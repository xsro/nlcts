var T0=(Cu,ll)=>()=>(ll||Cu((ll={exports:{}}).exports,ll),ll.exports);var M0=T0((L0,lp)=>{(async()=>{(function(){const Rn=document.createElement("link").relList;if(Rn&&Rn.supports&&Rn.supports("modulepreload"))return;for(const Re of document.querySelectorAll('link[rel="modulepreload"]'))ze(Re);new MutationObserver(Re=>{for(const jr of Re)if(jr.type==="childList")for(const W of jr.addedNodes)W.tagName==="LINK"&&W.rel==="modulepreload"&&ze(W)}).observe(document,{childList:!0,subtree:!0});function zn(Re){const jr={};return Re.integrity&&(jr.integrity=Re.integrity),Re.referrerPolicy&&(jr.referrerPolicy=Re.referrerPolicy),Re.crossOrigin==="use-credentials"?jr.credentials="include":Re.crossOrigin==="anonymous"?jr.credentials="omit":jr.credentials="same-origin",jr}function ze(Re){if(Re.ep)return;Re.ep=!0;const jr=zn(Re);fetch(Re.href,jr)}})();function Cu(Rn){return Rn&&Rn.__esModule&&Object.prototype.hasOwnProperty.call(Rn,"default")?Rn.default:Rn}var ll={},cp={get exports(){return ll},set exports(Rn){ll=Rn}};(function(Rn,zn){(function(){var ze="ace",Re=function(){return this}();!Re&&typeof window<"u"&&(Re=window);var jr=function(r,m,h){if(typeof r!="string"){jr.original?jr.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(h=m),jr.modules[r]||(jr.payloads[r]=h,jr.modules[r]=null)};jr.modules={},jr.payloads={};var W=function(r,m,h){if(typeof m=="string"){var s=T(r,m);if(s!=null)return h&&h(),s}else if(Object.prototype.toString.call(m)==="[object Array]"){for(var e=[],t=0,n=m.length;t<n;++t){var a=T(r,m[t]);if(a==null&&I.original)return;e.push(a)}return h&&h.apply(null,e)||!0}},I=function(r,m){var h=W("",r,m);return h==null&&I.original?I.original.apply(this,arguments):h},o=function(r,m){if(m.indexOf("!")!==-1){var h=m.split("!");return o(r,h[0])+"!"+o(r,h[1])}if(m.charAt(0)=="."){var s=r.split("/").slice(0,-1).join("/");for(m=s+"/"+m;m.indexOf(".")!==-1&&e!=m;){var e=m;m=m.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return m},T=function(r,m){m=o(r,m);var h=jr.modules[m];if(!h){if(h=jr.payloads[m],typeof h=="function"){var s={},e={id:m,uri:"",exports:s,packaged:!0},t=function(a,i){return W(m,a,i)},n=h(t,s,e);s=n||e.exports,jr.modules[m]=s,delete jr.payloads[m]}h=jr.modules[m]=s||h}return h};function k(r){var m=Re;r&&(Re[r]||(Re[r]={}),m=Re[r]),(!m.define||!m.define.packaged)&&(jr.original=m.define,m.define=jr,m.define.packaged=!0),(!m.require||!m.require.packaged)&&(I.original=m.require,m.require=I,m.require.packaged=!0)}k(ze)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(ze,Re,jr){function W(I,o,T){Object.defineProperty(I,o,{value:T,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||W(String.prototype,"startsWith",function(I,o){return o=o||0,this.lastIndexOf(I,o)===o}),String.prototype.endsWith||W(String.prototype,"endsWith",function(I,o){var T=this;(o===void 0||o>T.length)&&(o=T.length),o-=I.length;var k=T.indexOf(I,o);return k!==-1&&k===o}),String.prototype.repeat||W(String.prototype,"repeat",function(I){for(var o="",T=this;I>0;)I&1&&(o+=T),(I>>=1)&&(T+=T);return o}),String.prototype.includes||W(String.prototype,"includes",function(I,o){return this.indexOf(I,o)!=-1}),Object.assign||(Object.assign=function(I){if(I==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(I),T=1;T<arguments.length;T++){var k=arguments[T];k!=null&&Object.keys(k).forEach(function(r){o[r]=k[r]})}return o}),Object.values||(Object.values=function(I){return Object.keys(I).map(function(o){return I[o]})}),Array.prototype.find||W(Array.prototype,"find",function(I){for(var o=this.length,T=arguments[1],k=0;k<o;k++){var r=this[k];if(I.call(T,r,k,this))return r}}),Array.prototype.findIndex||W(Array.prototype,"findIndex",function(I){for(var o=this.length,T=arguments[1],k=0;k<o;k++){var r=this[k];if(I.call(T,r,k,this))return k}}),Array.prototype.includes||W(Array.prototype,"includes",function(I,o){return this.indexOf(I,o)!=-1}),Array.prototype.fill||W(Array.prototype,"fill",function(I){for(var o=this,T=o.length>>>0,k=arguments[1],r=k>>0,m=r<0?Math.max(T+r,0):Math.min(r,T),h=arguments[2],s=h===void 0?T:h>>0,e=s<0?Math.max(T+s,0):Math.min(s,T);m<e;)o[m]=I,m++;return o}),Array.of||W(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(ze,Re,jr){ze("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(ze,Re,jr){Re.deepCopy=function W(I){if(typeof I!="object"||!I)return I;var o;if(Array.isArray(I)){o=[];for(var T=0;T<I.length;T++)o[T]=W(I[T]);return o}if(Object.prototype.toString.call(I)!=="[object Object]")return I;o={};for(var T in I)o[T]=W(I[T]);return o}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(ze,Re,jr){Re.last=function(o){return o[o.length-1]},Re.stringReverse=function(o){return o.split("").reverse().join("")},Re.stringRepeat=function(o,T){for(var k="";T>0;)T&1&&(k+=o),(T>>=1)&&(o+=o);return k};var W=/^\s\s*/,I=/\s\s*$/;Re.stringTrimLeft=function(o){return o.replace(W,"")},Re.stringTrimRight=function(o){return o.replace(I,"")},Re.copyObject=function(o){var T={};for(var k in o)T[k]=o[k];return T},Re.copyArray=function(o){for(var T=[],k=0,r=o.length;k<r;k++)o[k]&&typeof o[k]=="object"?T[k]=this.copyObject(o[k]):T[k]=o[k];return T},Re.deepCopy=ze("./deep_copy").deepCopy,Re.arrayToMap=function(o){for(var T={},k=0;k<o.length;k++)T[o[k]]=1;return T},Re.createMap=function(o){var T=Object.create(null);for(var k in o)T[k]=o[k];return T},Re.arrayRemove=function(o,T){for(var k=0;k<=o.length;k++)T===o[k]&&o.splice(k,1)},Re.escapeRegExp=function(o){return o.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},Re.escapeHTML=function(o){return(""+o).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},Re.getMatchOffsets=function(o,T){var k=[];return o.replace(T,function(r){k.push({offset:arguments[arguments.length-2],length:r.length})}),k},Re.deferredCall=function(o){var T=null,k=function(){T=null,o()},r=function(m){return r.cancel(),T=setTimeout(k,m||0),r};return r.schedule=r,r.call=function(){return this.cancel(),o(),r},r.cancel=function(){return clearTimeout(T),T=null,r},r.isPending=function(){return T},r},Re.delayedCall=function(o,T){var k=null,r=function(){k=null,o()},m=function(h){k==null&&(k=setTimeout(r,h||T))};return m.delay=function(h){k&&clearTimeout(k),k=setTimeout(r,h||T)},m.schedule=m,m.call=function(){this.cancel(),o()},m.cancel=function(){k&&clearTimeout(k),k=null},m.isPending=function(){return k},m},Re.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},Re.supportsUnicodeFlag=function(){try{new RegExp("^.$","u")}catch{return!1}return!0}}),ace.define("ace/lib/useragent",["require","exports","module"],function(ze,Re,jr){Re.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},Re.getOS=function(){return Re.isMac?Re.OS.MAC:Re.isLinux?Re.OS.LINUX:Re.OS.WINDOWS};var W=typeof navigator=="object"?navigator:{},I=(/mac|win|linux/i.exec(W.platform)||["other"])[0].toLowerCase(),o=W.userAgent||"",T=W.appName||"";Re.isWin=I=="win",Re.isMac=I=="mac",Re.isLinux=I=="linux",Re.isIE=T=="Microsoft Internet Explorer"||T.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),Re.isOldIE=Re.isIE&&Re.isIE<9,Re.isGecko=Re.isMozilla=o.match(/ Gecko\/\d+/),Re.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",Re.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,Re.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,Re.isEdge=parseFloat(o.split(" Edge/")[1])||void 0,Re.isAIR=o.indexOf("AdobeAIR")>=0,Re.isAndroid=o.indexOf("Android")>=0,Re.isChromeOS=o.indexOf(" CrOS ")>=0,Re.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,Re.isIOS&&(Re.isMac=!0),Re.isMobile=Re.isIOS||Re.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(ze,Re,jr){var W=ze("./useragent"),I="http://www.w3.org/1999/xhtml";Re.buildDom=function h(s,e,t){if(typeof s=="string"&&s){var n=document.createTextNode(s);return e&&e.appendChild(n),n}if(!Array.isArray(s))return s&&s.appendChild&&e&&e.appendChild(s),s;if(typeof s[0]!="string"||!s[0]){for(var a=[],i=0;i<s.length;i++){var c=h(s[i],e,t);c&&a.push(c)}return a}var l=document.createElement(s[0]),u=s[1],f=1;u&&typeof u=="object"&&!Array.isArray(u)&&(f=2);for(var i=f;i<s.length;i++)h(s[i],l,t);return f==2&&Object.keys(u).forEach(function(d){var w=u[d];d==="class"?l.className=Array.isArray(w)?w.join(" "):w:typeof w=="function"||d=="value"||d[0]=="$"?l[d]=w:d==="ref"?t&&(t[w]=l):d==="style"?typeof w=="string"&&(l.style.cssText=w):w!=null&&l.setAttribute(d,w)}),e&&e.appendChild(l),l},Re.getDocumentHead=function(h){return h||(h=document),h.head||h.getElementsByTagName("head")[0]||h.documentElement},Re.createElement=function(h,s){return document.createElementNS?document.createElementNS(s||I,h):document.createElement(h)},Re.removeChildren=function(h){h.innerHTML=""},Re.createTextNode=function(h,s){var e=s?s.ownerDocument:document;return e.createTextNode(h)},Re.createFragment=function(h){var s=h?h.ownerDocument:document;return s.createDocumentFragment()},Re.hasCssClass=function(h,s){var e=(h.className+"").split(/\s+/g);return e.indexOf(s)!==-1},Re.addCssClass=function(h,s){Re.hasCssClass(h,s)||(h.className+=" "+s)},Re.removeCssClass=function(h,s){for(var e=h.className.split(/\s+/g);;){var t=e.indexOf(s);if(t==-1)break;e.splice(t,1)}h.className=e.join(" ")},Re.toggleCssClass=function(h,s){for(var e=h.className.split(/\s+/g),t=!0;;){var n=e.indexOf(s);if(n==-1)break;t=!1,e.splice(n,1)}return t&&e.push(s),h.className=e.join(" "),t},Re.setCssClass=function(h,s,e){e?Re.addCssClass(h,s):Re.removeCssClass(h,s)},Re.hasCssString=function(h,s){var e=0,t;if(s=s||document,t=s.querySelectorAll("style")){for(;e<t.length;)if(t[e++].id===h)return!0}},Re.removeElementById=function(h,s){s=s||document,s.getElementById(h)&&s.getElementById(h).remove()};var o,T=[];Re.useStrictCSP=function(h){o=h,h==!1?k():T||(T=[])};function k(){var h=T;T=null,h&&h.forEach(function(s){r(s[0],s[1])})}function r(h,s,e){if(!(typeof document>"u")){if(T){if(e)k();else if(e===!1)return T.push([h,s])}if(!o){var t=e;!e||!e.getRootNode?t=document:(t=e.getRootNode(),(!t||t==e)&&(t=document));var n=t.ownerDocument||t;if(s&&Re.hasCssString(s,t))return null;s&&(h+=`
/*# sourceURL=ace/css/`+s+" */");var a=Re.createElement("style");a.appendChild(n.createTextNode(h)),s&&(a.id=s),t==n&&(t=Re.getDocumentHead(n)),t.insertBefore(a,t.firstChild)}}}if(Re.importCssString=r,Re.importCssStylsheet=function(h,s){Re.buildDom(["link",{rel:"stylesheet",href:h}],Re.getDocumentHead(s))},Re.scrollbarWidth=function(h){var s=Re.createElement("ace_inner");s.style.width="100%",s.style.minWidth="0px",s.style.height="200px",s.style.display="block";var e=Re.createElement("ace_outer"),t=e.style;t.position="absolute",t.left="-10000px",t.overflow="hidden",t.width="200px",t.minWidth="0px",t.height="150px",t.display="block",e.appendChild(s);var n=h&&h.documentElement||document&&document.documentElement;if(!n)return 0;n.appendChild(e);var a=s.offsetWidth;t.overflow="scroll";var i=s.offsetWidth;return a===i&&(i=e.clientWidth),n.removeChild(e),a-i},Re.computedStyle=function(h,s){return window.getComputedStyle(h,"")||{}},Re.setStyle=function(h,s,e){h[s]!==e&&(h[s]=e)},Re.HAS_CSS_ANIMATION=!1,Re.HAS_CSS_TRANSFORMS=!1,Re.HI_DPI=W.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,W.isChromeOS&&(Re.HI_DPI=!1),typeof document<"u"){var m=document.createElement("div");Re.HI_DPI&&m.style.transform!==void 0&&(Re.HAS_CSS_TRANSFORMS=!0),!W.isEdge&&typeof m.style.animationName<"u"&&(Re.HAS_CSS_ANIMATION=!0),m=null}Re.HAS_CSS_TRANSFORMS?Re.translate=function(h,s,e){h.style.transform="translate("+Math.round(s)+"px, "+Math.round(e)+"px)"}:Re.translate=function(h,s,e){h.style.top=Math.round(e)+"px",h.style.left=Math.round(s)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(ze,Re,jr){var W=ze("./dom");Re.get=function(I,o){var T=new XMLHttpRequest;T.open("GET",I,!0),T.onreadystatechange=function(){T.readyState===4&&o(T.responseText)},T.send(null)},Re.loadScript=function(I,o){var T=W.getDocumentHead(),k=document.createElement("script");k.src=I,T.appendChild(k),k.onload=k.onreadystatechange=function(r,m){(m||!k.readyState||k.readyState=="loaded"||k.readyState=="complete")&&(k=k.onload=k.onreadystatechange=null,m||o())}},Re.qualifyURL=function(I){var o=document.createElement("a");return o.href=I,o.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(ze,Re,jr){Re.inherits=function(W,I){W.super_=I,W.prototype=Object.create(I.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}})},Re.mixin=function(W,I){for(var o in I)W[o]=I[o];return W},Re.implement=function(W,I){Re.mixin(W,I)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(ze,Re,jr){var W={},I=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};W._emit=W._dispatchEvent=function(T,k){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var r=this._eventRegistry[T]||[],m=this._defaultHandlers[T];if(!(!r.length&&!m)){(typeof k!="object"||!k)&&(k={}),k.type||(k.type=T),k.stopPropagation||(k.stopPropagation=I),k.preventDefault||(k.preventDefault=o),r=r.slice();for(var h=0;h<r.length&&(r[h](k,this),!k.propagationStopped);h++);if(m&&!k.defaultPrevented)return m(k,this)}},W._signal=function(T,k){var r=(this._eventRegistry||{})[T];if(r){r=r.slice();for(var m=0;m<r.length;m++)r[m](k,this)}},W.once=function(T,k){var r=this;if(this.on(T,function m(){r.off(T,m),k.apply(null,arguments)}),!k)return new Promise(function(m){k=m})},W.setDefaultHandler=function(T,k){var r=this._defaultHandlers;if(r||(r=this._defaultHandlers={_disabled_:{}}),r[T]){var m=r[T],h=r._disabled_[T];h||(r._disabled_[T]=h=[]),h.push(m);var s=h.indexOf(k);s!=-1&&h.splice(s,1)}r[T]=k},W.removeDefaultHandler=function(T,k){var r=this._defaultHandlers;if(r){var m=r._disabled_[T];if(r[T]==k)m&&this.setDefaultHandler(T,m.pop());else if(m){var h=m.indexOf(k);h!=-1&&m.splice(h,1)}}},W.on=W.addEventListener=function(T,k,r){this._eventRegistry=this._eventRegistry||{};var m=this._eventRegistry[T];return m||(m=this._eventRegistry[T]=[]),m.indexOf(k)==-1&&m[r?"unshift":"push"](k),k},W.off=W.removeListener=W.removeEventListener=function(T,k){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[T];if(r){var m=r.indexOf(k);m!==-1&&r.splice(m,1)}},W.removeAllListeners=function(T){T||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[T]=void 0),this._defaultHandlers&&(this._defaultHandlers[T]=void 0)},Re.EventEmitter=W}),ace.define("ace/lib/report_error",["require","exports","module"],function(ze,Re,jr){Re.reportError=function(W,I){var o=new Error(W);o.data=I,typeof console=="object"&&console.error&&console.error(o),setTimeout(function(){throw o})}}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(ze,Re,jr){var W=ze("./oop"),I=ze("./event_emitter").EventEmitter,o=ze("./report_error").reportError,T={setOptions:function(h){Object.keys(h).forEach(function(s){this.setOption(s,h[s])},this)},getOptions:function(h){var s={};if(h)Array.isArray(h)||(s=h,h=Object.keys(s));else{var e=this.$options;h=Object.keys(e).filter(function(t){return!e[t].hidden})}return h.forEach(function(t){s[t]=this.getOption(t)},this),s},setOption:function(h,s){if(this["$"+h]!==s){var e=this.$options[h];if(!e)return k('misspelled option "'+h+'"');if(e.forwardTo)return this[e.forwardTo]&&this[e.forwardTo].setOption(h,s);e.handlesSet||(this["$"+h]=s),e&&e.set&&e.set.call(this,s)}},getOption:function(h){var s=this.$options[h];return s?s.forwardTo?this[s.forwardTo]&&this[s.forwardTo].getOption(h):s&&s.get?s.get.call(this):this["$"+h]:k('misspelled option "'+h+'"')}};function k(h){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var r,m=function(){function h(){this.$defaultOptions={}}return h.prototype.defineOptions=function(s,e,t){return s.$options||(this.$defaultOptions[e]=s.$options={}),Object.keys(t).forEach(function(n){var a=t[n];typeof a=="string"&&(a={forwardTo:a}),a.name||(a.name=n),s.$options[a.name]=a,"initialValue"in a&&(s["$"+a.name]=a.initialValue)}),W.implement(s,T),this},h.prototype.resetOptions=function(s){Object.keys(s.$options).forEach(function(e){var t=s.$options[e];"value"in t&&s.setOption(e,t.value)})},h.prototype.setDefaultValue=function(s,e,t){if(!s){for(s in this.$defaultOptions)if(this.$defaultOptions[s][e])break;if(!this.$defaultOptions[s][e])return!1}var n=this.$defaultOptions[s]||(this.$defaultOptions[s]={});n[e]&&(n.forwardTo?this.setDefaultValue(n.forwardTo,e,t):n[e].value=t)},h.prototype.setDefaultValues=function(s,e){Object.keys(e).forEach(function(t){this.setDefaultValue(s,t,e[t])},this)},h.prototype.setMessages=function(s){r=s},h.prototype.nls=function(s,e){r&&!r[s]&&k("No message found for '"+s+"' in the provided messages, falling back to default English message.");var t=r&&r[s]||s;return e&&(t=t.replace(/\$(\$|[\d]+)/g,function(n,a){return a=="$"?"$":e[a]})),t},h}();m.prototype.warn=k,m.prototype.reportError=o,W.implement(m.prototype,I),Re.AppConfig=m}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(ze,Re,jr){jr.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(ze,Re,jr){Re.isDark=!1,Re.cssClass="ace-tm",Re.cssText=ze("./textmate-css"),Re.$id="ace/theme/textmate";var W=ze("../lib/dom");W.importCssString(Re.cssText,Re.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(ze,Re,jr){var W=ze("./lib/lang"),I=ze("./lib/net"),o=ze("./lib/dom"),T=ze("./lib/app_config").AppConfig;jr.exports=Re=new T;var k={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};Re.get=function(s){if(!k.hasOwnProperty(s))throw new Error("Unknown config key: "+s);return k[s]},Re.set=function(s,e){if(k.hasOwnProperty(s))k[s]=e;else if(this.setDefaultValue("",s,e)==!1)throw new Error("Unknown config key: "+s);s=="useStrictCSP"&&o.useStrictCSP(e)},Re.all=function(){return W.copyObject(k)},Re.$modes={},Re.moduleUrl=function(s,e){if(k.$moduleUrls[s])return k.$moduleUrls[s];var t=s.split("/");e=e||t[t.length-2]||"";var n=e=="snippets"?"/":"-",a=t[t.length-1];if(e=="worker"&&n=="-"){var i=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g");a=a.replace(i,"")}(!a||a==e)&&t.length>1&&(a=t[t.length-2]);var c=k[e+"Path"];return c==null?c=k.basePath:n=="/"&&(e=n=""),c&&c.slice(-1)!="/"&&(c+="/"),c+e+n+a+this.get("suffix")},Re.setModuleUrl=function(s,e){return k.$moduleUrls[s]=e};var r=function(s,e){if(s==="ace/theme/textmate"||s==="./theme/textmate")return e(null,ze("./theme/textmate"));if(m)return m(s,e);console.error("loader is not configured")},m;Re.setLoader=function(s){m=s},Re.dynamicModules=Object.create(null),Re.$loading={},Re.$loaded={},Re.loadModule=function(s,e){var t,n;Array.isArray(s)&&(n=s[0],s=s[1]);var a=function(i){if(i&&!Re.$loading[s])return e&&e(i);if(Re.$loading[s]||(Re.$loading[s]=[]),Re.$loading[s].push(e),!(Re.$loading[s].length>1)){var c=function(){r(s,function(l,u){u&&(Re.$loaded[s]=u),Re._emit("load.module",{name:s,module:u});var f=Re.$loading[s];Re.$loading[s]=null,f.forEach(function(d){d&&d(u)})})};if(!Re.get("packaged"))return c();I.loadScript(Re.moduleUrl(s,n),c),h()}};if(Re.dynamicModules[s])Re.dynamicModules[s]().then(function(i){i.default?a(i.default):a(i)});else{try{t=this.$require(s)}catch{}a(t||Re.$loaded[s])}},Re.$require=function(s){if(typeof jr.require=="function"){var e="require";return jr[e](s)}},Re.setModuleLoader=function(s,e){Re.dynamicModules[s]=e};var h=function(){!k.basePath&&!k.workerPath&&!k.modePath&&!k.themePath&&!Object.keys(k.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),h=function(){})};Re.version="1.28.0"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(ze,Re,jr){ze("./lib/fixoldbrowsers");var W=ze("./config");W.setLoader(function(k,r){ze([k],function(m){r(null,m)})});var I=function(){return this||typeof window<"u"&&window}();jr.exports=function(k){W.init=o,W.$require=ze,k.require=ze},o(!0);function o(k){if(!(!I||!I.document)){W.set("packaged",k||ze.packaged||jr.packaged||I.define&&(void 0).packaged);var r={},m="",h=document.currentScript||document._currentScript,s=h&&h.ownerDocument||document;h&&h.src&&(m=h.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var e=s.getElementsByTagName("script"),t=0;t<e.length;t++){var n=e[t],a=n.src||n.getAttribute("src");if(a){for(var i=n.attributes,c=0,l=i.length;c<l;c++){var u=i[c];u.name.indexOf("data-ace-")===0&&(r[T(u.name.replace(/^data-ace-/,""))]=u.value)}var f=a.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);f&&(m=f[1])}}m&&(r.base=r.base||m,r.packaged=!0),r.basePath=r.base,r.workerPath=r.workerPath||r.base,r.modePath=r.modePath||r.base,r.themePath=r.themePath||r.base,delete r.base;for(var d in r)typeof r[d]<"u"&&W.set(d,r[d])}}function T(k){return k.replace(/-(.)/g,function(r,m){return m.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(ze,Re,jr){var W=function(o,T){return o.row-T.row||o.column-T.column},I=function(){function o(T,k,r,m){this.start={row:T,column:k},this.end={row:r,column:m}}return o.prototype.isEqual=function(T){return this.start.row===T.start.row&&this.end.row===T.end.row&&this.start.column===T.start.column&&this.end.column===T.end.column},o.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},o.prototype.contains=function(T,k){return this.compare(T,k)==0},o.prototype.compareRange=function(T){var k,r=T.end,m=T.start;return k=this.compare(r.row,r.column),k==1?(k=this.compare(m.row,m.column),k==1?2:k==0?1:0):k==-1?-2:(k=this.compare(m.row,m.column),k==-1?-1:k==1?42:0)},o.prototype.comparePoint=function(T){return this.compare(T.row,T.column)},o.prototype.containsRange=function(T){return this.comparePoint(T.start)==0&&this.comparePoint(T.end)==0},o.prototype.intersects=function(T){var k=this.compareRange(T);return k==-1||k==0||k==1},o.prototype.isEnd=function(T,k){return this.end.row==T&&this.end.column==k},o.prototype.isStart=function(T,k){return this.start.row==T&&this.start.column==k},o.prototype.setStart=function(T,k){typeof T=="object"?(this.start.column=T.column,this.start.row=T.row):(this.start.row=T,this.start.column=k)},o.prototype.setEnd=function(T,k){typeof T=="object"?(this.end.column=T.column,this.end.row=T.row):(this.end.row=T,this.end.column=k)},o.prototype.inside=function(T,k){return this.compare(T,k)==0?!(this.isEnd(T,k)||this.isStart(T,k)):!1},o.prototype.insideStart=function(T,k){return this.compare(T,k)==0?!this.isEnd(T,k):!1},o.prototype.insideEnd=function(T,k){return this.compare(T,k)==0?!this.isStart(T,k):!1},o.prototype.compare=function(T,k){return!this.isMultiLine()&&T===this.start.row?k<this.start.column?-1:k>this.end.column?1:0:T<this.start.row?-1:T>this.end.row?1:this.start.row===T?k>=this.start.column?0:-1:this.end.row===T?k<=this.end.column?0:1:0},o.prototype.compareStart=function(T,k){return this.start.row==T&&this.start.column==k?-1:this.compare(T,k)},o.prototype.compareEnd=function(T,k){return this.end.row==T&&this.end.column==k?1:this.compare(T,k)},o.prototype.compareInside=function(T,k){return this.end.row==T&&this.end.column==k?1:this.start.row==T&&this.start.column==k?-1:this.compare(T,k)},o.prototype.clipRows=function(T,k){if(this.end.row>k)var r={row:k+1,column:0};else if(this.end.row<T)var r={row:T,column:0};if(this.start.row>k)var m={row:k+1,column:0};else if(this.start.row<T)var m={row:T,column:0};return o.fromPoints(m||this.start,r||this.end)},o.prototype.extend=function(T,k){var r=this.compare(T,k);if(r==0)return this;if(r==-1)var m={row:T,column:k};else var h={row:T,column:k};return o.fromPoints(m||this.start,h||this.end)},o.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},o.prototype.isMultiLine=function(){return this.start.row!==this.end.row},o.prototype.clone=function(){return o.fromPoints(this.start,this.end)},o.prototype.collapseRows=function(){return this.end.column==0?new o(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new o(this.start.row,0,this.end.row,0)},o.prototype.toScreenRange=function(T){var k=T.documentToScreenPosition(this.start),r=T.documentToScreenPosition(this.end);return new o(k.row,k.column,r.row,r.column)},o.prototype.moveBy=function(T,k){this.start.row+=T,this.start.column+=k,this.end.row+=T,this.end.column+=k},o}();I.fromPoints=function(o,T){return new I(o.row,o.column,T.row,T.column)},I.comparePoints=W,I.comparePoints=function(o,T){return o.row-T.row||o.column-T.column},Re.Range=I}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(ze,Re,jr){var W=ze("./oop"),I=function(){var o={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};o.PRINTABLE_KEYS[173]="-";var T,k;for(k in o.FUNCTION_KEYS)T=o.FUNCTION_KEYS[k].toLowerCase(),o[T]=parseInt(k,10);for(k in o.PRINTABLE_KEYS)T=o.PRINTABLE_KEYS[k].toLowerCase(),o[T]=parseInt(k,10);return W.mixin(o,o.MODIFIER_KEYS),W.mixin(o,o.PRINTABLE_KEYS),W.mixin(o,o.FUNCTION_KEYS),o.enter=o.return,o.escape=o.esc,o.del=o.delete,function(){for(var r=["cmd","ctrl","alt","shift"],m=Math.pow(2,r.length);m--;)o.KEY_MODS[m]=r.filter(function(h){return m&o.KEY_MODS[h]}).join("-")+"-"}(),o.KEY_MODS[0]="",o.KEY_MODS[-1]="input-",o}();W.mixin(Re,I),Re.default=Re,Re.keyCodeToString=function(o){var T=I[o];return typeof T!="string"&&(T=String.fromCharCode(o)),T.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(ze,Re,jr){var W=ze("./keys"),I=ze("./useragent"),o=null,T=0,k;function r(){k=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){k={passive:!1}}})}catch{}}function m(){return k==null&&r(),k}function h(c,l,u){this.elem=c,this.type=l,this.callback=u}h.prototype.destroy=function(){e(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var s=Re.addListener=function(c,l,u,f){c.addEventListener(l,u,m()),f&&f.$toDestroy.push(new h(c,l,u))},e=Re.removeListener=function(c,l,u){c.removeEventListener(l,u,m())};Re.stopEvent=function(c){return Re.stopPropagation(c),Re.preventDefault(c),!1},Re.stopPropagation=function(c){c.stopPropagation&&c.stopPropagation()},Re.preventDefault=function(c){c.preventDefault&&c.preventDefault()},Re.getButton=function(c){return c.type=="dblclick"?0:c.type=="contextmenu"||I.isMac&&c.ctrlKey&&!c.altKey&&!c.shiftKey?2:c.button},Re.capture=function(c,l,u){var f=c&&c.ownerDocument||document;function d(w){l&&l(w),u&&u(w),e(f,"mousemove",l),e(f,"mouseup",d),e(f,"dragstart",d)}return s(f,"mousemove",l),s(f,"mouseup",d),s(f,"dragstart",d),d},Re.addMouseWheelListener=function(c,l,u){s(c,"wheel",function(f){var d=.15,w=f.deltaX||0,v=f.deltaY||0;switch(f.deltaMode){case f.DOM_DELTA_PIXEL:f.wheelX=w*d,f.wheelY=v*d;break;case f.DOM_DELTA_LINE:var p=15;f.wheelX=w*p,f.wheelY=v*p;break;case f.DOM_DELTA_PAGE:var y=150;f.wheelX=w*y,f.wheelY=v*y;break}l(f)},u)},Re.addMultiMouseDownListener=function(c,l,u,f,d){var w=0,v,p,y,b={2:"dblclick",3:"tripleclick",4:"quadclick"};function x(_){if(Re.getButton(_)!==0?w=0:_.detail>1?(w++,w>4&&(w=1)):w=1,I.isIE){var g=Math.abs(_.clientX-v)>5||Math.abs(_.clientY-p)>5;(!y||g)&&(w=1),y&&clearTimeout(y),y=setTimeout(function(){y=null},l[w-1]||600),w==1&&(v=_.clientX,p=_.clientY)}if(_._clicks=w,u[f]("mousedown",_),w>4)w=0;else if(w>1)return u[f](b[w],_)}Array.isArray(c)||(c=[c]),c.forEach(function(_){s(_,"mousedown",x,d)})};var t=function(c){return 0|(c.ctrlKey?1:0)|(c.altKey?2:0)|(c.shiftKey?4:0)|(c.metaKey?8:0)};Re.getModifierString=function(c){return W.KEY_MODS[t(c)]};function n(c,l,u){var f=t(l);if(!I.isMac&&o){if(l.getModifierState&&(l.getModifierState("OS")||l.getModifierState("Win"))&&(f|=8),o.altGr)if((3&f)!=3)o.altGr=0;else return;if(u===18||u===17){var d="location"in l?l.location:l.keyLocation;if(u===17&&d===1)o[u]==1&&(T=l.timeStamp);else if(u===18&&f===3&&d===2){var w=l.timeStamp-T;w<50&&(o.altGr=!0)}}}if(u in W.MODIFIER_KEYS&&(u=-1),!f&&u===13){var d="location"in l?l.location:l.keyLocation;if(d===3&&(c(l,f,-u),l.defaultPrevented))return}if(I.isChromeOS&&f&8){if(c(l,f,u),l.defaultPrevented)return;f&=-9}return!f&&!(u in W.FUNCTION_KEYS)&&!(u in W.PRINTABLE_KEYS)?!1:c(l,f,u)}Re.addCommandKeyListener=function(c,l,u){if(I.isOldGecko||I.isOpera&&!("KeyboardEvent"in window)){var f=null;s(c,"keydown",function(w){f=w.keyCode},u),s(c,"keypress",function(w){return n(l,w,f)},u)}else{var d=null;s(c,"keydown",function(w){o[w.keyCode]=(o[w.keyCode]||0)+1;var v=n(l,w,w.keyCode);return d=w.defaultPrevented,v},u),s(c,"keypress",function(w){d&&(w.ctrlKey||w.altKey||w.shiftKey||w.metaKey)&&(Re.stopEvent(w),d=null)},u),s(c,"keyup",function(w){o[w.keyCode]=null},u),o||(a(),s(window,"focus",a))}};function a(){o=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!I.isOldIE){var i=1;Re.nextTick=function(c,l){l=l||window;var u="zero-timeout-message-"+i++,f=function(d){d.data==u&&(Re.stopPropagation(d),e(l,"message",f),c())};s(l,"message",f),l.postMessage(u,"*")}}Re.$idleBlocked=!1,Re.onIdle=function(c,l){return setTimeout(function u(){Re.$idleBlocked?setTimeout(u,100):c()},l)},Re.$idleBlockId=null,Re.blockIdle=function(c){Re.$idleBlockId&&clearTimeout(Re.$idleBlockId),Re.$idleBlocked=!0,Re.$idleBlockId=setTimeout(function(){Re.$idleBlocked=!1},c||100)},Re.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),Re.nextFrame?Re.nextFrame=Re.nextFrame.bind(window):Re.nextFrame=function(c){setTimeout(c,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(ze,Re,jr){var W;jr.exports={lineMode:!1,pasteCancelled:function(){return W&&W>Date.now()-50?!0:W=!1},cancel:function(){W=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(ze,Re,jr){var W=ze("../lib/event"),I=ze("../config").nls,o=ze("../lib/useragent"),T=ze("../lib/dom"),k=ze("../lib/lang"),r=ze("../clipboard"),m=o.isChrome<18,h=o.isIE,s=o.isChrome>63,e=400,t=ze("../lib/keys"),n=t.KEY_MODS,a=o.isIOS,i=a?/\s/:/\n/,c=o.isMobile,l=function(u,f){var d=T.createElement("textarea");d.className="ace_text-input",d.setAttribute("wrap","off"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck",!1),d.style.opacity="0",u.insertBefore(d,u.firstChild);var w=!1,v=!1,p=!1,y=!1,b="";c||(d.style.fontSize="1px");var x=!1,_=!1,g="",A=0,M=0,L=0,E=Number.MAX_SAFE_INTEGER,S=Number.MIN_SAFE_INTEGER,O=0;try{var P=document.activeElement===d}catch{}this.setNumberOfExtraLines=function(vt){if(E=Number.MAX_SAFE_INTEGER,S=Number.MIN_SAFE_INTEGER,vt<0){O=0;return}O=vt},this.setAriaOptions=function(vt){if(vt.activeDescendant?(d.setAttribute("aria-haspopup","true"),d.setAttribute("aria-autocomplete",vt.inline?"both":"list"),d.setAttribute("aria-activedescendant",vt.activeDescendant)):(d.setAttribute("aria-haspopup","false"),d.setAttribute("aria-autocomplete","both"),d.removeAttribute("aria-activedescendant")),vt.role&&d.setAttribute("role",vt.role),vt.setLabel&&(d.setAttribute("aria-roledescription",I("editor")),f.session)){var xt=f.session.selection.cursor.row;d.setAttribute("aria-label",I("Cursor at row $0",[xt+1]))}},this.setAriaOptions({role:"textbox"}),W.addListener(d,"blur",function(vt){_||(f.onBlur(vt),P=!1)},f),W.addListener(d,"focus",function(vt){if(!_){if(P=!0,o.isEdge)try{if(!document.hasFocus())return}catch{}f.onFocus(vt),o.isEdge?setTimeout(R):R()}},f),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:f.renderer.enableKeyboardAccessibility}),b||s||this.$focusScroll=="browser")return d.focus({preventScroll:!0});var vt=d.style.top;d.style.position="fixed",d.style.top="0px";try{var xt=d.getBoundingClientRect().top!=0}catch{return}var st=[];if(xt)for(var at=d.parentElement;at&&at.nodeType==1;)st.push(at),at.setAttribute("ace_nocontext",!0),!at.parentElement&&at.getRootNode?at=at.getRootNode().host:at=at.parentElement;d.focus({preventScroll:!0}),xt&&st.forEach(function(ht){ht.removeAttribute("ace_nocontext")}),setTimeout(function(){d.style.position="",d.style.top=="0px"&&(d.style.top=vt)},0)},this.blur=function(){d.blur()},this.isFocused=function(){return P},f.on("beforeEndOperation",function(){var vt=f.curOp,xt=vt&&vt.command&&vt.command.name;if(xt!="insertstring"){var st=xt&&(vt.docChanged||vt.selectionChanged);p&&st&&(g=d.value="",ot()),R()}});var U=function(vt,xt){for(var st=xt,at=1;at<=vt-E&&at<2*O+1;at++)st+=f.session.getLine(vt-at).length+1;return st},R=a?function(vt){if(!(!P||w&&!vt||y)){vt||(vt="");var xt=`
 ab`+vt+`cde fg
`;xt!=d.value&&(d.value=g=xt);var st=4,at=4+(vt.length||(f.selection.isEmpty()?0:1));(A!=st||M!=at)&&d.setSelectionRange(st,at),A=st,M=at}}:function(){if(!(p||y)&&!(!P&&!G)){p=!0;var vt=0,xt=0,st="";if(f.session){var at=f.selection,ht=at.getRange(),Lt=at.cursor.row;Lt===S+1?(E=S+1,S=E+2*O):Lt===E-1?(S=E-1,E=S-2*O):(Lt<E-1||Lt>S+1)&&(E=Lt>O?Lt-O:0,S=Lt>O?Lt+O:2*O);for(var Mt=[],_t=E;_t<=S;_t++)Mt.push(f.session.getLine(_t));if(st=Mt.join(`
`),vt=U(ht.start.row,ht.start.column),xt=U(ht.end.row,ht.end.column),ht.start.row<E){var St=f.session.getLine(E-1);vt=ht.start.row<E-1?0:vt,xt+=St.length+1,st=St+`
`+st}else if(ht.end.row>S){var Dt=f.session.getLine(S+1);xt=ht.end.row>S+1?Dt.length:ht.end.column,xt+=st.length+1,st=st+`
`+Dt}else c&&Lt>0&&(st=`
`+st,xt+=1,vt+=1);st.length>e&&(vt<e&&xt<e?st=st.slice(0,e):(st=`
`,vt==xt?vt=xt=0:(vt=0,xt=1)));var ut=st+`

`;ut!=g&&(d.value=g=ut,A=M=ut.length)}if(G&&(A=d.selectionStart,M=d.selectionEnd),M!=xt||A!=vt||d.selectionEnd!=M)try{d.setSelectionRange(vt,xt),A=vt,M=xt}catch{}p=!1}};this.resetSelection=R,P&&f.onFocus();var j=function(vt){return vt.selectionStart===0&&vt.selectionEnd>=g.length&&vt.value===g&&g&&vt.selectionEnd!==M},B=function(vt){p||(w?w=!1:j(d)?(f.selectAll(),R()):c&&d.selectionStart!=A&&R())},z=null;this.setInputHandler=function(vt){z=vt},this.getInputHandler=function(){return z};var G=!1,V=function(vt,xt){if(G&&(G=!1),v)return R(),vt&&f.onPaste(vt),v=!1,"";for(var st=d.selectionStart,at=d.selectionEnd,ht=A,Lt=g.length-M,Mt=vt,_t=vt.length-st,St=vt.length-at,Dt=0;ht>0&&g[Dt]==vt[Dt];)Dt++,ht--;for(Mt=Mt.slice(Dt),Dt=1;Lt>0&&g.length-Dt>A-1&&g[g.length-Dt]==vt[vt.length-Dt];)Dt++,Lt--;_t-=Dt-1,St-=Dt-1;var ut=Mt.length-Dt+1;if(ut<0&&(ht=-ut,ut=0),Mt=Mt.slice(0,ut),!xt&&!Mt&&!_t&&!ht&&!Lt&&!St)return"";y=!0;var Tt=!1;return o.isAndroid&&Mt==". "&&(Mt="  ",Tt=!0),Mt&&!ht&&!Lt&&!_t&&!St||x?f.onTextInput(Mt):f.onTextInput(Mt,{extendLeft:ht,extendRight:Lt,restoreStart:_t,restoreEnd:St}),y=!1,g=vt,A=st,M=at,L=St,Tt?`
`:Mt},et=function(vt){if(p)return nt();if(vt&&vt.inputType){if(vt.inputType=="historyUndo")return f.execCommand("undo");if(vt.inputType=="historyRedo")return f.execCommand("redo")}var xt=d.value,st=V(xt,!0);(xt.length>e+100||i.test(st)||c&&A<1&&A==M)&&R()},J=function(vt,xt,st){var at=vt.clipboardData||window.clipboardData;if(!(!at||m)){var ht=h||st?"Text":"text/plain";try{return xt?at.setData(ht,xt)!==!1:at.getData(ht)}catch(Lt){if(!st)return J(Lt,xt,!0)}}},X=function(vt,xt){var st=f.getCopyText();if(!st)return W.preventDefault(vt);J(vt,st)?(a&&(R(st),w=st,setTimeout(function(){w=!1},10)),xt?f.onCut():f.onCopy(),W.preventDefault(vt)):(w=!0,d.value=st,d.select(),setTimeout(function(){w=!1,R(),xt?f.onCut():f.onCopy()}))},Y=function(vt){X(vt,!0)},Z=function(vt){X(vt,!1)},tt=function(vt){var xt=J(vt);r.pasteCancelled()||(typeof xt=="string"?(xt&&f.onPaste(xt,vt),o.isIE&&setTimeout(R),W.preventDefault(vt)):(d.value="",v=!0))};W.addCommandKeyListener(d,f.onCommandKey.bind(f),f),W.addListener(d,"select",B,f),W.addListener(d,"input",et,f),W.addListener(d,"cut",Y,f),W.addListener(d,"copy",Z,f),W.addListener(d,"paste",tt,f),(!("oncut"in d)||!("oncopy"in d)||!("onpaste"in d))&&W.addListener(u,"keydown",function(vt){if(!(o.isMac&&!vt.metaKey||!vt.ctrlKey))switch(vt.keyCode){case 67:Z(vt);break;case 86:tt(vt);break;case 88:Y(vt);break}},f);var rt=function(vt){if(!(p||!f.onCompositionStart||f.$readOnly)&&(p={},!x)){vt.data&&(p.useTextareaForIME=!1),setTimeout(nt,0),f._signal("compositionStart"),f.on("mousedown",ct);var xt=f.getSelectionRange();xt.end.row=xt.start.row,xt.end.column=xt.start.column,p.markerRange=xt,p.selectionStart=A,f.onCompositionStart(p),p.useTextareaForIME?(g=d.value="",A=0,M=0):(d.msGetInputContext&&(p.context=d.msGetInputContext()),d.getInputContext&&(p.context=d.getInputContext()))}},nt=function(){if(!(!p||!f.onCompositionUpdate||f.$readOnly)){if(x)return ct();if(p.useTextareaForIME)f.onCompositionUpdate(d.value);else{var vt=d.value;V(vt),p.markerRange&&(p.context&&(p.markerRange.start.column=p.selectionStart=p.context.compositionStartOffset),p.markerRange.end.column=p.markerRange.start.column+M-p.selectionStart+L)}}},ot=function(vt){!f.onCompositionEnd||f.$readOnly||(p=!1,f.onCompositionEnd(),f.off("mousedown",ct),vt&&et())};function ct(){_=!0,d.blur(),d.focus(),_=!1}var pt=k.delayedCall(nt,50).schedule.bind(null,null);function gt(vt){vt.keyCode==27&&d.value.length<d.selectionStart&&(p||(g=d.value),A=M=-1,R()),pt()}W.addListener(d,"compositionstart",rt,f),W.addListener(d,"compositionupdate",nt,f),W.addListener(d,"keyup",gt,f),W.addListener(d,"keydown",pt,f),W.addListener(d,"compositionend",ot,f),this.getElement=function(){return d},this.setCommandMode=function(vt){x=vt,d.readOnly=!1},this.setReadOnly=function(vt){x||(d.readOnly=vt)},this.setCopyWithEmptySelection=function(vt){},this.onContextMenu=function(vt){G=!0,R(),f._emit("nativecontextmenu",{target:f,domEvent:vt}),this.moveToMouse(vt,!0)},this.moveToMouse=function(vt,xt){b||(b=d.style.cssText),d.style.cssText=(xt?"z-index:100000;":"")+(o.isIE?"opacity:0.1;":"")+"text-indent: -"+(A+M)*f.renderer.characterWidth*.5+"px;";var st=f.container.getBoundingClientRect(),at=T.computedStyle(f.container),ht=st.top+(parseInt(at.borderTopWidth)||0),Lt=st.left+(parseInt(st.borderLeftWidth)||0),Mt=st.bottom-ht-d.clientHeight-2,_t=function(St){T.translate(d,St.clientX-Lt-2,Math.min(St.clientY-ht-2,Mt))};_t(vt),vt.type=="mousedown"&&(f.renderer.$isMousePressed=!0,clearTimeout(kt),o.isWin&&W.capture(f.container,_t,yt))},this.onContextMenuClose=yt;var kt;function yt(){clearTimeout(kt),kt=setTimeout(function(){b&&(d.style.cssText=b,b=""),f.renderer.$isMousePressed=!1,f.renderer.$keepTextAreaAtCursor&&f.renderer.$moveTextAreaToCursor()},0)}var mt=function(vt){f.textInput.onContextMenu(vt),yt()};W.addListener(d,"mouseup",mt,f),W.addListener(d,"mousedown",function(vt){vt.preventDefault(),yt()},f),W.addListener(f.renderer.scroller,"contextmenu",mt,f),W.addListener(d,"contextmenu",mt,f),a&&Ot(u,f,d);function Ot(vt,xt,st){var at=null,ht=!1;st.addEventListener("keydown",function(Mt){at&&clearTimeout(at),ht=!0},!0),st.addEventListener("keyup",function(Mt){at=setTimeout(function(){ht=!1},100)},!0);var Lt=function(Mt){if(document.activeElement===st&&!(ht||p||xt.$mouseHandler.isMousePressed)&&!w){var _t=st.selectionStart,St=st.selectionEnd,Dt=null,ut=0;if(_t==0?Dt=t.up:_t==1?Dt=t.home:St>M&&g[St]==`
`?Dt=t.end:_t<A&&g[_t-1]==" "?(Dt=t.left,ut=n.option):_t<A||_t==A&&M!=A&&_t==St?Dt=t.left:St>M&&g.slice(0,St).split(`
`).length>2?Dt=t.down:St>M&&g[St-1]==" "?(Dt=t.right,ut=n.option):(St>M||St==M&&M!=A&&_t==St)&&(Dt=t.right),_t!==St&&(ut|=n.shift),Dt){var Tt=xt.onCommandKey({},ut,Dt);if(!Tt&&xt.commands){Dt=t.keyCodeToString(Dt);var bt=xt.commands.findKeyCommand(ut,Dt);bt&&xt.execCommand(bt)}A=_t,M=St,R("")}}};document.addEventListener("selectionchange",Lt),xt.on("destroy",function(){document.removeEventListener("selectionchange",Lt)})}this.destroy=function(){d.parentElement&&d.parentElement.removeChild(d)}};Re.TextInput=l,Re.$setUserAgentForTests=function(u,f){c=u,a=f}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(ze,Re,jr){var W=ze("../lib/useragent"),I=0,o=550,T=function(){function m(h){h.$clickSelection=null;var s=h.editor;s.setDefaultHandler("mousedown",this.onMouseDown.bind(h)),s.setDefaultHandler("dblclick",this.onDoubleClick.bind(h)),s.setDefaultHandler("tripleclick",this.onTripleClick.bind(h)),s.setDefaultHandler("quadclick",this.onQuadClick.bind(h)),s.setDefaultHandler("mousewheel",this.onMouseWheel.bind(h));var e=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];e.forEach(function(t){h[t]=this[t]},this),h.selectByLines=this.extendSelectionBy.bind(h,"getLineRange"),h.selectByWords=this.extendSelectionBy.bind(h,"getWordRange")}return m.prototype.onMouseDown=function(h){var s=h.inSelection(),e=h.getDocumentPosition();this.mousedownEvent=h;var t=this.editor,n=h.getButton();if(n!==0){var a=t.getSelectionRange(),i=a.isEmpty();(i||n==1)&&t.selection.moveToPosition(e),n==2&&(t.textInput.onContextMenu(h.domEvent),W.isMozilla||h.preventDefault());return}if(this.mousedownEvent.time=Date.now(),s&&!t.isFocused()&&(t.focus(),this.$focusTimeout&&!this.$clickSelection&&!t.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(h);return}return this.captureMouse(h),this.startSelect(e,h.domEvent._clicks>1),h.preventDefault()},m.prototype.startSelect=function(h,s){h=h||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var e=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?e.selection.selectToPosition(h):s||e.selection.moveToPosition(h),s||this.select(),e.setStyle("ace_selecting"),this.setState("select"))},m.prototype.select=function(){var h,s=this.editor,e=s.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var t=this.$clickSelection.comparePoint(e);if(t==-1)h=this.$clickSelection.end;else if(t==1)h=this.$clickSelection.start;else{var n=r(this.$clickSelection,e);e=n.cursor,h=n.anchor}s.selection.setSelectionAnchor(h.row,h.column)}s.selection.selectToPosition(e),s.renderer.scrollCursorIntoView()},m.prototype.extendSelectionBy=function(h){var s,e=this.editor,t=e.renderer.screenToTextCoordinates(this.x,this.y),n=e.selection[h](t.row,t.column);if(this.$clickSelection){var a=this.$clickSelection.comparePoint(n.start),i=this.$clickSelection.comparePoint(n.end);if(a==-1&&i<=0)s=this.$clickSelection.end,(n.end.row!=t.row||n.end.column!=t.column)&&(t=n.start);else if(i==1&&a>=0)s=this.$clickSelection.start,(n.start.row!=t.row||n.start.column!=t.column)&&(t=n.end);else if(a==-1&&i==1)t=n.end,s=n.start;else{var c=r(this.$clickSelection,t);t=c.cursor,s=c.anchor}e.selection.setSelectionAnchor(s.row,s.column)}e.selection.selectToPosition(t),e.renderer.scrollCursorIntoView()},m.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},m.prototype.focusWait=function(){var h=k(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),s=Date.now();(h>I||s-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},m.prototype.onDoubleClick=function(h){var s=h.getDocumentPosition(),e=this.editor,t=e.session,n=t.getBracketRange(s);n?(n.isEmpty()&&(n.start.column--,n.end.column++),this.setState("select")):(n=e.selection.getWordRange(s.row,s.column),this.setState("selectByWords")),this.$clickSelection=n,this.select()},m.prototype.onTripleClick=function(h){var s=h.getDocumentPosition(),e=this.editor;this.setState("selectByLines");var t=e.getSelectionRange();t.isMultiLine()&&t.contains(s.row,s.column)?(this.$clickSelection=e.selection.getLineRange(t.start.row),this.$clickSelection.end=e.selection.getLineRange(t.end.row).end):this.$clickSelection=e.selection.getLineRange(s.row),this.select()},m.prototype.onQuadClick=function(h){var s=this.editor;s.selectAll(),this.$clickSelection=s.getSelectionRange(),this.setState("selectAll")},m.prototype.onMouseWheel=function(h){if(!h.getAccelKey()){h.getShiftKey()&&h.wheelY&&!h.wheelX&&(h.wheelX=h.wheelY,h.wheelY=0);var s=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var e=this.$lastScroll,t=h.domEvent.timeStamp,n=t-e.t,a=n?h.wheelX/n:e.vx,i=n?h.wheelY/n:e.vy;n<o&&(a=(a+e.vx)/2,i=(i+e.vy)/2);var c=Math.abs(a/i),l=!1;if(c>=1&&s.renderer.isScrollableBy(h.wheelX*h.speed,0)&&(l=!0),c<=1&&s.renderer.isScrollableBy(0,h.wheelY*h.speed)&&(l=!0),l)e.allowed=t;else if(t-e.allowed<o){var u=Math.abs(a)<=1.5*Math.abs(e.vx)&&Math.abs(i)<=1.5*Math.abs(e.vy);u?(l=!0,e.allowed=t):e.allowed=0}if(e.t=t,e.vx=a,e.vy=i,l)return s.renderer.scrollBy(h.wheelX*h.speed,h.wheelY*h.speed),h.stop()}},m}();T.prototype.selectEnd=T.prototype.selectByLinesEnd,T.prototype.selectAllEnd=T.prototype.selectByLinesEnd,T.prototype.selectByWordsEnd=T.prototype.selectByLinesEnd,Re.DefaultHandlers=T;function k(m,h,s,e){return Math.sqrt(Math.pow(s-m,2)+Math.pow(e-h,2))}function r(m,h){if(m.start.row==m.end.row)var s=2*h.column-m.start.column-m.end.column;else if(m.start.row==m.end.row-1&&!m.start.column&&!m.end.column)var s=h.column-4;else var s=2*h.row-m.start.row-m.end.row;return s<0?{cursor:m.start,anchor:m.end}:{cursor:m.end,anchor:m.start}}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/range"],function(ze,Re,jr){var W=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(a[c]=i[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),I=this&&this.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=ze("./lib/dom"),T=ze("./range").Range,k="ace_tooltip",r=function(){function e(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}return e.prototype.$init=function(){return this.$element=o.createElement("div"),this.$element.className=k,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},e.prototype.getElement=function(){return this.$element||this.$init()},e.prototype.setText=function(t){this.getElement().textContent=t},e.prototype.setHtml=function(t){this.getElement().innerHTML=t},e.prototype.setPosition=function(t,n){this.getElement().style.left=t+"px",this.getElement().style.top=n+"px"},e.prototype.setClassName=function(t){o.addCssClass(this.getElement(),t)},e.prototype.setTheme=function(t){this.$element.className=k+" "+(t.isDark?"ace_dark ":"")+(t.cssClass||"")},e.prototype.show=function(t,n,a){t!=null&&this.setText(t),n!=null&&a!=null&&this.setPosition(n,a),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},e.prototype.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=k,this.isOpen=!1)},e.prototype.getHeight=function(){return this.getElement().offsetHeight},e.prototype.getWidth=function(){return this.getElement().offsetWidth},e.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},e}(),m=function(){function e(){this.popups=[]}return e.prototype.addPopup=function(t){this.popups.push(t),this.updatePopups()},e.prototype.removePopup=function(t){var n=this.popups.indexOf(t);n!==-1&&(this.popups.splice(n,1),this.updatePopups())},e.prototype.updatePopups=function(){var t,n,a,i;this.popups.sort(function(y,b){return b.priority-y.priority});var c=[];try{for(var l=I(this.popups),u=l.next();!u.done;u=l.next()){var f=u.value,d=!0;try{for(var w=(a=void 0,I(c)),v=w.next();!v.done;v=w.next()){var p=v.value;if(this.doPopupsOverlap(p,f)){d=!1;break}}}catch(y){a={error:y}}finally{try{v&&!v.done&&(i=w.return)&&i.call(w)}finally{if(a)throw a.error}}d?c.push(f):f.hide()}}catch(y){t={error:y}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}},e.prototype.doPopupsOverlap=function(t,n){var a=t.getElement().getBoundingClientRect(),i=n.getElement().getBoundingClientRect();return a.left<i.right&&a.right>i.left&&a.top<i.bottom&&a.bottom>i.top},e}(),h=new m;Re.popupManager=h,Re.Tooltip=r;var s=function(e){W(t,e);function t(n){n===void 0&&(n=document.body);var a=e.call(this,n)||this;a.timeout=void 0,a.lastT=0,a.idleTime=350,a.lastEvent=void 0,a.onMouseOut=a.onMouseOut.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.waitForHover=a.waitForHover.bind(a),a.hide=a.hide.bind(a);var i=a.getElement();return i.style.whiteSpace="pre-wrap",i.style.pointerEvents="auto",i.addEventListener("mouseout",a.onMouseOut),i.tabIndex=-1,i.addEventListener("blur",function(){i.contains(document.activeElement)||this.hide()}.bind(a)),a}return t.prototype.addToEditor=function(n){n.on("mousemove",this.onMouseMove),n.on("mousedown",this.hide),n.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},t.prototype.removeFromEditor=function(n){n.off("mousemove",this.onMouseMove),n.off("mousedown",this.hide),n.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},t.prototype.onMouseMove=function(n,a){this.lastEvent=n,this.lastT=Date.now();var i=a.$mouseHandler.isMousePressed;if(this.isOpen){var c=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(c.row,c.column)||i||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||i||(this.lastEvent=n,this.timeout=setTimeout(this.waitForHover,this.idleTime))},t.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var n=Date.now()-this.lastT;if(this.idleTime-n>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-n);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},t.prototype.isOutsideOfText=function(n){var a=n.editor,i=n.getDocumentPosition(),c=a.session.getLine(i.row);if(i.column==c.length){var l=a.renderer.pixelToScreenCoordinates(n.clientX,n.clientY),u=a.session.documentToScreenPosition(i.row,i.column);if(u.column!=l.column||u.row!=l.row)return!0}return!1},t.prototype.setDataProvider=function(n){this.$gatherData=n},t.prototype.showForRange=function(n,a,i,c){if(!(c&&c!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var l=n.renderer;this.isOpen||(h.addPopup(this),this.$registerCloseEvents(),this.setTheme(l.theme)),this.isOpen=!0,this.addMarker(a,n.session),this.range=T.fromPoints(a.start,a.end);var u=this.getElement();u.innerHTML="",u.appendChild(i),u.style.display="block";var f=l.textToScreenCoordinates(a.start.row,a.start.column),d=u.clientHeight,w=l.scroller.getBoundingClientRect(),v=!0;f.pageY-d<0&&(v=!1),v?f.pageY-=d:f.pageY+=l.lineHeight,u.style.maxWidth=w.width-(f.pageX-w.left)+"px",this.setPosition(f.pageX,f.pageY)}},t.prototype.addMarker=function(n,a){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=a,this.marker=a&&a.addMarker(n,"ace_highlight-marker","text")},t.prototype.hide=function(n){!n&&document.activeElement==this.getElement()||n&&n.target&&(n.type!="keydown"||n.ctrlKey||n.metaKey)&&this.$element.contains(n.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,h.removePopup(this)))},t.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("mousewheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},t.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("mousewheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},t.prototype.onMouseOut=function(n){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!n.relatedTarget||n.relatedTarget==this.getElement()||n&&n.currentTarget.contains(n.relatedTarget)||n.relatedTarget.classList.contains("ace_content")||this.hide())},t}(r);Re.HoverTooltip=s}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(ze,Re,jr){var W=this&&this.__extends||function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),I=this&&this.__values||function(s){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&s[e],n=0;if(t)return t.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=ze("../lib/dom"),T=ze("../lib/event"),k=ze("../tooltip").Tooltip,r=ze("../config").nls;function m(s){var e=s.editor,t=e.renderer.$gutterLayer,n=new h(e);s.editor.setDefaultHandler("guttermousedown",function(f){if(!(!e.isFocused()||f.getButton()!=0)){var d=t.getRegion(f);if(d!="foldWidgets"){var w=f.getDocumentPosition().row,v=e.session.selection;if(f.getShiftKey())v.selectTo(w,0);else{if(f.domEvent.detail==2)return e.selectAll(),f.preventDefault();s.$clickSelection=e.selection.getLineRange(w)}return s.setState("selectByLines"),s.captureMouse(f),f.preventDefault()}}});var a,i;function c(){var f=i.getDocumentPosition().row,d=e.session.getLength();if(f==d){var w=e.renderer.pixelToScreenCoordinates(0,i.y).row,v=i.$pos;if(w>e.session.documentToScreenRow(v.row,v.column))return l()}if(n.showTooltip(f),!!n.isOpen)if(e.on("mousewheel",l),s.$tooltipFollowsMouse)u(i);else{var p=i.getGutterRow(),y=t.$lines.get(p);if(y){var b=y.element.querySelector(".ace_gutter_annotation"),x=b.getBoundingClientRect(),_=n.getElement().style;_.left=x.right+"px",_.top=x.bottom+"px"}else u(i)}}function l(){a&&(a=clearTimeout(a)),n.isOpen&&(n.hideTooltip(),e.off("mousewheel",l))}function u(f){n.setPosition(f.x,f.y)}s.editor.setDefaultHandler("guttermousemove",function(f){var d=f.domEvent.target||f.domEvent.srcElement;if(o.hasCssClass(d,"ace_fold-widget"))return l();n.isOpen&&s.$tooltipFollowsMouse&&u(f),i=f,!a&&(a=setTimeout(function(){a=null,i&&!s.isMousePressed?c():l()},50))}),T.addListener(e.renderer.$gutter,"mouseout",function(f){i=null,!(!n.isOpen||a)&&(a=setTimeout(function(){a=null,l()},50))},e),e.on("changeSession",l),e.on("input",l)}Re.GutterHandler=m;var h=function(s){W(e,s);function e(t){var n=s.call(this,t.container)||this;return n.editor=t,n}return e.prototype.setPosition=function(t,n){var a=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,c=this.getWidth(),l=this.getHeight();t+=15,n+=15,t+c>a&&(t-=t+c-a),n+l>i&&(n-=20+l),k.prototype.setPosition.call(this,t,n)},Object.defineProperty(e,"annotationLabels",{get:function(){return{error:{singular:r("error"),plural:r("errors")},warning:{singular:r("warning"),plural:r("warnings")},info:{singular:r("information message"),plural:r("information messages")}}},enumerable:!1,configurable:!0}),e.prototype.showTooltip=function(t){var n=this.editor.renderer.$gutterLayer,a=n.$annotations[t],i;a?i={text:Array.from(a.text),type:Array.from(a.type)}:i={text:[],type:[]};var c=n.session.getFoldLine(t);if(c&&n.$showFoldedAnnotations){for(var l={error:[],warning:[],info:[]},u,f=t+1;f<=c.end.row;f++)if(n.$annotations[f])for(var d=0;d<n.$annotations[f].text.length;d++){var w=n.$annotations[f].type[d];if(l[w].push(n.$annotations[f].text[d]),w==="error"){u="error_fold";continue}if(w==="warning"){u="warning_fold";continue}}if(u==="error_fold"||u==="warning_fold"){var v="".concat(e.annotationsToSummaryString(l)," in folded code.");i.text.push(v),i.type.push(u)}}if(i.text.length===0)return this.hide();for(var p={error:[],warning:[],info:[]},y=n.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",f=0;f<i.text.length;f++){var b="<span class='ace_".concat(i.type[f]," ").concat(y,"' aria-label='").concat(e.annotationLabels[i.type[f].replace("_fold","")].singular,"' role=img> </span> ").concat(i.text[f]);p[i.type[f].replace("_fold","")].push(b)}var x=[].concat(p.error,p.warning,p.info).join("<br>");this.setHtml(x),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},e.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},e.annotationsToSummaryString=function(t){var n,a,i=[],c=["error","warning","info"];try{for(var l=I(c),u=l.next();!u.done;u=l.next()){var f=u.value;if(t[f].length){var d=t[f].length===1?e.annotationLabels[f].singular:e.annotationLabels[f].plural;i.push("".concat(t[f].length," ").concat(d))}}}catch(w){n={error:w}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return i.join(", ")},e}(k);Re.GutterTooltip=h}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(ze,Re,jr){var W=ze("../lib/event"),I=ze("../lib/useragent"),o=function(){function T(k,r){this.domEvent=k,this.editor=r,this.x=this.clientX=k.clientX,this.y=this.clientY=k.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return T.prototype.stopPropagation=function(){W.stopPropagation(this.domEvent),this.propagationStopped=!0},T.prototype.preventDefault=function(){W.preventDefault(this.domEvent),this.defaultPrevented=!0},T.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},T.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},T.prototype.getGutterRow=function(){var k=this.getDocumentPosition().row,r=this.editor.session.documentToScreenRow(k,0),m=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return r-m},T.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var k=this.editor,r=k.getSelectionRange();if(r.isEmpty())this.$inSelection=!1;else{var m=this.getDocumentPosition();this.$inSelection=r.contains(m.row,m.column)}return this.$inSelection},T.prototype.getButton=function(){return W.getButton(this.domEvent)},T.prototype.getShiftKey=function(){return this.domEvent.shiftKey},T.prototype.getAccelKey=function(){return I.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},T}();Re.MouseEvent=o}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(ze,Re,jr){var W=ze("../lib/dom"),I=ze("../lib/event"),o=ze("../lib/useragent"),T=200,k=200,r=5;function m(s){var e=s.editor,t=W.createElement("div");t.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",t.textContent="\xA0";var n=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];n.forEach(function(U){s[U]=this[U]},this),e.on("mousedown",this.onMouseDown.bind(s));var a=e.container,i,c,l,u,f,d,w=0,v,p,y,b,x;this.onDragStart=function(U){if(this.cancelDrag||!a.draggable){var R=this;return setTimeout(function(){R.startSelect(),R.captureMouse(U)},0),U.preventDefault()}f=e.getSelectionRange();var j=U.dataTransfer;j.effectAllowed=e.getReadOnly()?"copy":"copyMove",e.container.appendChild(t),j.setDragImage&&j.setDragImage(t,0,0),setTimeout(function(){e.container.removeChild(t)}),j.clearData(),j.setData("Text",e.session.getTextRange()),p=!0,this.setState("drag")},this.onDragEnd=function(U){if(a.draggable=!1,p=!1,this.setState(null),!e.getReadOnly()){var R=U.dataTransfer.dropEffect;!v&&R=="move"&&e.session.remove(e.getSelectionRange()),e.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(U){if(!(e.getReadOnly()||!O(U.dataTransfer)))return c=U.clientX,l=U.clientY,i||M(),w++,U.dataTransfer.dropEffect=v=P(U),I.preventDefault(U)},this.onDragOver=function(U){if(!(e.getReadOnly()||!O(U.dataTransfer)))return c=U.clientX,l=U.clientY,i||(M(),w++),E!==null&&(E=null),U.dataTransfer.dropEffect=v=P(U),I.preventDefault(U)},this.onDragLeave=function(U){if(w--,w<=0&&i)return L(),v=null,I.preventDefault(U)},this.onDrop=function(U){if(d){var R=U.dataTransfer;if(p)switch(v){case"move":f.contains(d.row,d.column)?f={start:d,end:d}:f=e.moveText(f,d);break;case"copy":f=e.moveText(f,d,!0);break}else{var j=R.getData("Text");f={start:d,end:e.session.insert(d,j)},e.focus(),v=null}return L(),I.preventDefault(U)}},I.addListener(a,"dragstart",this.onDragStart.bind(s),e),I.addListener(a,"dragend",this.onDragEnd.bind(s),e),I.addListener(a,"dragenter",this.onDragEnter.bind(s),e),I.addListener(a,"dragover",this.onDragOver.bind(s),e),I.addListener(a,"dragleave",this.onDragLeave.bind(s),e),I.addListener(a,"drop",this.onDrop.bind(s),e);function _(U,R){var j=Date.now(),B=!R||U.row!=R.row,z=!R||U.column!=R.column;if(!b||B||z)e.moveCursorToPosition(U),b=j,x={x:c,y:l};else{var G=h(x.x,x.y,c,l);G>r?b=null:j-b>=k&&(e.renderer.scrollCursorIntoView(),b=null)}}function g(U,R){var j=Date.now(),B=e.renderer.layerConfig.lineHeight,z=e.renderer.layerConfig.characterWidth,G=e.renderer.scroller.getBoundingClientRect(),V={x:{left:c-G.left,right:G.right-c},y:{top:l-G.top,bottom:G.bottom-l}},et=Math.min(V.x.left,V.x.right),J=Math.min(V.y.top,V.y.bottom),X={row:U.row,column:U.column};et/z<=2&&(X.column+=V.x.left<V.x.right?-3:2),J/B<=1&&(X.row+=V.y.top<V.y.bottom?-1:1);var Y=U.row!=X.row,Z=U.column!=X.column,tt=!R||U.row!=R.row;Y||Z&&!tt?y?j-y>=T&&e.renderer.scrollCursorIntoView(X):y=j:y=null}function A(){var U=d;d=e.renderer.screenToTextCoordinates(c,l),_(d,U),g(d,U)}function M(){f=e.selection.toOrientedRange(),i=e.session.addMarker(f,"ace_selection",e.getSelectionStyle()),e.clearSelection(),e.isFocused()&&e.renderer.$cursorLayer.setBlinking(!1),clearInterval(u),A(),u=setInterval(A,20),w=0,I.addListener(document,"mousemove",S)}function L(){clearInterval(u),e.session.removeMarker(i),i=null,e.selection.fromOrientedRange(f),e.isFocused()&&!p&&e.$resetCursorStyle(),f=null,d=null,w=0,y=null,b=null,I.removeListener(document,"mousemove",S)}var E=null;function S(){E==null&&(E=setTimeout(function(){E!=null&&i&&L()},20))}function O(U){var R=U.types;return!R||Array.prototype.some.call(R,function(j){return j=="text/plain"||j=="Text"})}function P(U){var R=["copy","copymove","all","uninitialized"],j=["move","copymove","linkmove","all","uninitialized"],B=o.isMac?U.altKey:U.ctrlKey,z="uninitialized";try{z=U.dataTransfer.effectAllowed.toLowerCase()}catch{}var G="none";return B&&R.indexOf(z)>=0?G="copy":j.indexOf(z)>=0?G="move":R.indexOf(z)>=0&&(G="copy"),G}}(function(){this.dragWait=function(){var s=Date.now()-this.mousedownEvent.time;s>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var s=this.editor.container;s.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(s){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var s=this.editor,e=s.container;e.draggable=!0,s.renderer.$cursorLayer.setBlinking(!1),s.setStyle("ace_dragging");var t=o.isWin?"default":"move";s.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(s){var e=this.editor.container;if(o.isIE&&this.state=="dragReady"){var t=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);t>3&&e.dragDrop()}if(this.state==="dragWait"){var t=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);t>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(s){if(this.$dragEnabled){this.mousedownEvent=s;var e=this.editor,t=s.inSelection(),n=s.getButton(),a=s.domEvent.detail||1;if(a===1&&n===0&&t){if(s.editor.inMultiSelectMode&&(s.getAccelKey()||s.getShiftKey()))return;this.mousedownEvent.time=Date.now();var i=s.domEvent.target||s.domEvent.srcElement;if("unselectable"in i&&(i.unselectable="on"),e.getDragDelay()){if(o.isWebKit){this.cancelDrag=!0;var c=e.container;c.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(s,this.onMouseDrag.bind(this)),s.defaultPrevented=!0}}}}).call(m.prototype);function h(s,e,t,n){return Math.sqrt(Math.pow(t-s,2)+Math.pow(n-e,2))}Re.DragdropHandler=m}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(ze,Re,jr){var W=ze("./mouse_event").MouseEvent,I=ze("../lib/event"),o=ze("../lib/dom");Re.addTouchListeners=function(T,k){var r="scroll",m,h,s,e,t,n,a=0,i,c=0,l=0,u=0,f,d;function w(){var _=window.navigator&&window.navigator.clipboard,g=!1,A=function(){var L=k.getCopyText(),E=k.session.getUndoManager().hasUndo();d.replaceChild(o.buildDom(g?["span",!L&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],L&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],L&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],_&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],E&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Palette"]]:["span"]),d.firstChild)},M=function(L){var E=L.target.getAttribute("action");if(E=="more"||!g)return g=!g,A();E=="paste"?_.readText().then(function(S){k.execCommand(E,S)}):E&&((E=="cut"||E=="copy")&&(_?_.writeText(k.getCopyText()):document.execCommand("copy")),k.execCommand(E)),d.firstChild.style.display="none",g=!1,E!="openCommandPallete"&&k.focus()};d=o.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(L){r="menu",L.stopPropagation(),L.preventDefault(),k.textInput.focus()},ontouchend:function(L){L.stopPropagation(),L.preventDefault(),M(L)},onclick:M},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],k.container)}function v(){d||w();var _=k.selection.cursor,g=k.renderer.textToScreenCoordinates(_.row,_.column),A=k.renderer.textToScreenCoordinates(0,0).pageX,M=k.renderer.scrollLeft,L=k.container.getBoundingClientRect();d.style.top=g.pageY-L.top-3+"px",g.pageX-L.left<L.width-70?(d.style.left="",d.style.right="10px"):(d.style.right="",d.style.left=A+M-L.left+"px"),d.style.display="",d.firstChild.style.display="none",k.on("input",p)}function p(_){d&&(d.style.display="none"),k.off("input",p)}function y(){t=null,clearTimeout(t);var _=k.selection.getRange(),g=_.contains(i.row,i.column);(_.isEmpty()||!g)&&(k.selection.moveToPosition(i),k.selection.selectWord()),r="wait",v()}function b(){t=null,clearTimeout(t),k.selection.moveToPosition(i);var _=c>=2?k.selection.getLineRange(i.row):k.session.getBracketRange(i);_&&!_.isEmpty()?k.selection.setRange(_):k.selection.selectWord(),r="wait"}I.addListener(T,"contextmenu",function(_){if(f){var g=k.textInput.getElement();g.focus()}},k),I.addListener(T,"touchstart",function(_){var g=_.touches;if(t||g.length>1){clearTimeout(t),t=null,s=-1,r="zoom";return}f=k.$mouseHandler.isMousePressed=!0;var A=k.renderer.layerConfig.lineHeight,M=k.renderer.layerConfig.lineHeight,L=_.timeStamp;e=L;var E=g[0],S=E.clientX,O=E.clientY;Math.abs(m-S)+Math.abs(h-O)>A&&(s=-1),m=_.clientX=S,h=_.clientY=O,l=u=0;var P=new W(_,k);if(i=P.getDocumentPosition(),L-s<500&&g.length==1&&!a)c++,_.preventDefault(),_.button=0,b();else{c=0;var U=k.selection.cursor,R=k.selection.isEmpty()?U:k.selection.anchor,j=k.renderer.$cursorLayer.getPixelPosition(U,!0),B=k.renderer.$cursorLayer.getPixelPosition(R,!0),z=k.renderer.scroller.getBoundingClientRect(),G=k.renderer.layerConfig.offset,V=k.renderer.scrollLeft,et=function(Y,Z){return Y=Y/M,Z=Z/A-.75,Y*Y+Z*Z};if(_.clientX<z.left){r="zoom";return}var J=et(_.clientX-z.left-j.left+V,_.clientY-z.top-j.top+G),X=et(_.clientX-z.left-B.left+V,_.clientY-z.top-B.top+G);J<3.5&&X<3.5&&(r=J>X?"cursor":"anchor"),X<3.5?r="anchor":J<3.5?r="cursor":r="scroll",t=setTimeout(y,450)}s=L},k),I.addListener(T,"touchend",function(_){f=k.$mouseHandler.isMousePressed=!1,n&&clearInterval(n),r=="zoom"?(r="",a=0):t?(k.selection.moveToPosition(i),a=0,v()):r=="scroll"?(x(),p()):v(),clearTimeout(t),t=null},k),I.addListener(T,"touchmove",function(_){t&&(clearTimeout(t),t=null);var g=_.touches;if(!(g.length>1||r=="zoom")){var A=g[0],M=m-A.clientX,L=h-A.clientY;if(r=="wait")if(M*M+L*L>4)r="cursor";else return _.preventDefault();m=A.clientX,h=A.clientY,_.clientX=A.clientX,_.clientY=A.clientY;var E=_.timeStamp,S=E-e;if(e=E,r=="scroll"){var O=new W(_,k);O.speed=1,O.wheelX=M,O.wheelY=L,10*Math.abs(M)<Math.abs(L)&&(M=0),10*Math.abs(L)<Math.abs(M)&&(L=0),S!=0&&(l=M/S,u=L/S),k._emit("mousewheel",O),O.propagationStopped||(l=u=0)}else{var P=new W(_,k),U=P.getDocumentPosition();r=="cursor"?k.selection.moveCursorToPosition(U):r=="anchor"&&k.selection.setSelectionAnchor(U.row,U.column),k.renderer.scrollCursorIntoView(U),_.preventDefault()}}},k);function x(){a+=60,n=setInterval(function(){a--<=0&&(clearInterval(n),n=null),Math.abs(l)<.01&&(l=0),Math.abs(u)<.01&&(u=0),a<20&&(l=.9*l),a<20&&(u=.9*u);var _=k.session.getScrollTop();k.renderer.scrollBy(10*l,10*u),_==k.session.getScrollTop()&&(a=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(ze,Re,jr){var W=ze("../lib/event"),I=ze("../lib/useragent"),o=ze("./default_handlers").DefaultHandlers,T=ze("./default_gutter_handler").GutterHandler,k=ze("./mouse_event").MouseEvent,r=ze("./dragdrop_handler").DragdropHandler,m=ze("./touch_handler").addTouchListeners,h=ze("../config"),s=function(){function e(t){var n=this;this.editor=t,new o(this),new T(this),new r(this);var a=function(l){var u=!document.hasFocus||!document.hasFocus()||!t.isFocused()&&document.activeElement==(t.textInput&&t.textInput.getElement());u&&window.focus(),t.focus(),setTimeout(function(){t.isFocused()||t.focus()})},i=t.renderer.getMouseEventTarget();W.addListener(i,"click",this.onMouseEvent.bind(this,"click"),t),W.addListener(i,"mousemove",this.onMouseMove.bind(this,"mousemove"),t),W.addMultiMouseDownListener([i,t.renderer.scrollBarV&&t.renderer.scrollBarV.inner,t.renderer.scrollBarH&&t.renderer.scrollBarH.inner,t.textInput&&t.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",t),W.addMouseWheelListener(t.container,this.onMouseWheel.bind(this,"mousewheel"),t),m(t.container,t);var c=t.renderer.$gutter;W.addListener(c,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),t),W.addListener(c,"click",this.onMouseEvent.bind(this,"gutterclick"),t),W.addListener(c,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),t),W.addListener(c,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),t),W.addListener(i,"mousedown",a,t),W.addListener(c,"mousedown",a,t),I.isIE&&t.renderer.scrollBarV&&(W.addListener(t.renderer.scrollBarV.element,"mousedown",a,t),W.addListener(t.renderer.scrollBarH.element,"mousedown",a,t)),t.on("mousemove",function(l){if(!(n.state||n.$dragDelay||!n.$dragEnabled)){var u=t.renderer.screenToTextCoordinates(l.x,l.y),f=t.session.selection.getRange(),d=t.renderer;!f.isEmpty()&&f.insideStart(u.row,u.column)?d.setCursorStyle("default"):d.setCursorStyle("")}},t)}return e.prototype.onMouseEvent=function(t,n){this.editor.session&&this.editor._emit(t,new k(n,this.editor))},e.prototype.onMouseMove=function(t,n){var a=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!a||!a.length||this.editor._emit(t,new k(n,this.editor))},e.prototype.onMouseWheel=function(t,n){var a=new k(n,this.editor);a.speed=this.$scrollSpeed*2,a.wheelX=n.wheelX,a.wheelY=n.wheelY,this.editor._emit(t,a)},e.prototype.setState=function(t){this.state=t},e.prototype.captureMouse=function(t,n){this.x=t.x,this.y=t.y,this.isMousePressed=!0;var a=this.editor,i=this.editor.renderer;i.$isMousePressed=!0;var c=this,l=function(v){if(v){if(I.isWebKit&&!v.which&&c.releaseMouse)return c.releaseMouse();c.x=v.clientX,c.y=v.clientY,n&&n(v),c.mouseEvent=new k(v,c.editor),c.$mouseMoved=!0}},u=function(v){a.off("beforeEndOperation",d),clearInterval(w),a.session&&f(),c[c.state+"End"]&&c[c.state+"End"](v),c.state="",c.isMousePressed=i.$isMousePressed=!1,i.$keepTextAreaAtCursor&&i.$moveTextAreaToCursor(),c.$onCaptureMouseMove=c.releaseMouse=null,v&&c.onMouseEvent("mouseup",v),a.endOperation()},f=function(){c[c.state]&&c[c.state](),c.$mouseMoved=!1};if(I.isOldIE&&t.domEvent.type=="dblclick")return setTimeout(function(){u(t)});var d=function(v){c.releaseMouse&&a.curOp.command.name&&a.curOp.selectionChanged&&(c[c.state+"End"]&&c[c.state+"End"](),c.state="",c.releaseMouse())};a.on("beforeEndOperation",d),a.startOperation({command:{name:"mouse"}}),c.$onCaptureMouseMove=l,c.releaseMouse=W.capture(this.editor.container,l,u);var w=setInterval(f,20)},e.prototype.cancelContextMenu=function(){var t=function(n){n&&n.domEvent&&n.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",t),n&&n.domEvent&&W.stopEvent(n.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)},e.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},e}();s.prototype.releaseMouse=null,h.defineOptions(s.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:I.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),Re.MouseHandler=s}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(ze,Re,jr){var W=ze("../lib/dom"),I=function(){function o(T){T.on("click",function(k){var r=k.getDocumentPosition(),m=T.session,h=m.getFoldAt(r.row,r.column,1);h&&(k.getAccelKey()?m.removeFold(h):m.expandFold(h),k.stop());var s=k.domEvent&&k.domEvent.target;s&&W.hasCssClass(s,"ace_inline_button")&&W.hasCssClass(s,"ace_toggle_wrap")&&(m.setOption("wrap",!m.getUseWrapMode()),T.renderer.scrollCursorIntoView())}),T.on("gutterclick",function(k){var r=T.renderer.$gutterLayer.getRegion(k);if(r=="foldWidgets"){var m=k.getDocumentPosition().row,h=T.session;h.foldWidgets&&h.foldWidgets[m]&&T.session.onFoldWidgetClick(m,k),T.isFocused()||T.focus(),k.stop()}}),T.on("gutterdblclick",function(k){var r=T.renderer.$gutterLayer.getRegion(k);if(r=="foldWidgets"){var m=k.getDocumentPosition().row,h=T.session,s=h.getParentFoldRangeData(m,!0),e=s.range||s.firstRange;if(e){m=e.start.row;var t=h.getFoldAt(m,h.getLine(m).length,1);t?h.removeFold(t):(h.addFold("...",e),T.renderer.scrollCursorIntoView({row:e.start.row,column:0}))}k.stop()}})}return o}();Re.FoldHandler=I}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(ze,Re,jr){var W=ze("../lib/keys"),I=ze("../lib/event"),o=function(){function T(k){this.$editor=k,this.$data={editor:k},this.$handlers=[],this.setDefaultHandler(k.commands)}return T.prototype.setDefaultHandler=function(k){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=k,this.addKeyboardHandler(k,0)},T.prototype.setKeyboardHandler=function(k){var r=this.$handlers;if(r[r.length-1]!=k){for(;r[r.length-1]&&r[r.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(r[r.length-1]);this.addKeyboardHandler(k,1)}},T.prototype.addKeyboardHandler=function(k,r){if(k){typeof k=="function"&&!k.handleKeyboard&&(k.handleKeyboard=k);var m=this.$handlers.indexOf(k);m!=-1&&this.$handlers.splice(m,1),r==null?this.$handlers.push(k):this.$handlers.splice(r,0,k),m==-1&&k.attach&&k.attach(this.$editor)}},T.prototype.removeKeyboardHandler=function(k){var r=this.$handlers.indexOf(k);return r==-1?!1:(this.$handlers.splice(r,1),k.detach&&k.detach(this.$editor),!0)},T.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},T.prototype.getStatusText=function(){var k=this.$data,r=k.editor;return this.$handlers.map(function(m){return m.getStatusText&&m.getStatusText(r,k)||""}).filter(Boolean).join(" ")},T.prototype.$callKeyboardHandlers=function(k,r,m,h){for(var s,e=!1,t=this.$editor.commands,n=this.$handlers.length;n--&&(s=this.$handlers[n].handleKeyboard(this.$data,k,r,m,h),!(!(!s||!s.command)&&(s.command=="null"?e=!0:e=t.exec(s.command,this.$editor,s.args,h),e&&h&&k!=-1&&s.passEvent!=!0&&s.command.passEvent!=!0&&I.stopEvent(h),e))););return!e&&k==-1&&(s={command:"insertstring"},e=t.exec("insertstring",this.$editor,r)),e&&this.$editor._signal&&this.$editor._signal("keyboardActivity",s),e},T.prototype.onCommandKey=function(k,r,m){var h=W.keyCodeToString(m);return this.$callKeyboardHandlers(r,h,m,k)},T.prototype.onTextInput=function(k){return this.$callKeyboardHandlers(-1,k)},T}();Re.KeyBinding=o}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(ze,Re,jr){var W=0,I=0,o=!1,T=!1,k=!1,r=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,s=1,e=0,t=1,n=2,a=3,i=4,c=5,l=6,u=7,f=8,d=9,w=10,v=11,p=12,y=13,b=14,x=15,_=16,g=17,A=18,M=[A,A,A,A,A,A,A,A,A,l,c,l,f,c,A,A,A,A,A,A,A,A,A,A,A,A,A,A,c,c,c,l,f,i,i,v,v,v,i,i,i,i,i,w,d,w,d,d,n,n,n,n,n,n,n,n,n,n,d,i,i,i,i,i,i,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,i,i,i,i,i,i,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,i,i,i,i,A,A,A,A,A,A,c,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,d,i,v,v,v,v,i,i,i,i,e,i,i,A,i,i,v,v,n,n,i,e,i,i,i,n,e,i,i,i,i,i],L=[f,f,f,f,f,f,f,f,f,f,f,A,A,A,e,t,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,f,c,y,b,x,_,g,d,v,v,v,v,v,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,d,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,f];function E(U,R,j,B){var z=W?m:r,G=null,V=null,et=null,J=0,X=null,Y=null,Z=-1,tt=null,rt=null,nt=[];if(!B)for(tt=0,B=[];tt<j;tt++)B[tt]=P(U[tt]);for(I=W,o=!1,T=!1,k=!1,rt=0;rt<j;rt++){if(G=J,nt[rt]=V=O(U,B,nt,rt),J=z[G][V],X=J&240,J&=15,R[rt]=et=z[J][5],X>0)if(X==16){for(tt=Z;tt<rt;tt++)R[tt]=1;Z=-1}else Z=-1;if(Y=z[J][6],Y)Z==-1&&(Z=rt);else if(Z>-1){for(tt=Z;tt<rt;tt++)R[tt]=et;Z=-1}B[rt]==c&&(R[rt]=0),I|=et}if(k){for(tt=0;tt<j;tt++)if(B[tt]==l){R[tt]=W;for(var ot=tt-1;ot>=0&&B[ot]==f;ot--)R[ot]=W}}}function S(U,R,j){if(!(I<U)){if(U==1&&W==s&&!T){j.reverse();return}for(var B=j.length,z=0,G,V,et,J;z<B;){if(R[z]>=U){for(G=z+1;G<B&&R[G]>=U;)G++;for(V=z,et=G-1;V<et;V++,et--)J=j[V],j[V]=j[et],j[et]=J;z=G}z++}}}function O(U,R,j,B){var z=R[B],G,V,et,J;switch(z){case e:case t:o=!1;case i:case a:return z;case n:return o?a:n;case u:return o=!0,t;case f:return i;case d:return B<1||B+1>=R.length||(G=j[B-1])!=n&&G!=a||(V=R[B+1])!=n&&V!=a?i:(o&&(V=a),V==G?V:i);case w:return G=B>0?j[B-1]:c,G==n&&B+1<R.length&&R[B+1]==n?n:i;case v:if(B>0&&j[B-1]==n)return n;if(o)return i;for(J=B+1,et=R.length;J<et&&R[J]==v;)J++;return J<et&&R[J]==n?n:i;case p:for(et=R.length,J=B+1;J<et&&R[J]==p;)J++;if(J<et){var X=U[B],Y=X>=1425&&X<=2303||X==64286;if(G=R[J],Y&&(G==t||G==u))return t}return B<1||(G=R[B-1])==c?i:j[B-1];case c:return o=!1,T=!0,W;case l:return k=!0,i;case y:case b:case _:case g:case x:o=!1;case A:return i}}function P(U){var R=U.charCodeAt(0),j=R>>8;return j==0?R>191?e:M[R]:j==5?/[\u0591-\u05f4]/.test(U)?t:e:j==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(U)?p:/[\u0660-\u0669\u066b-\u066c]/.test(U)?a:R==1642?v:/[\u06f0-\u06f9]/.test(U)?n:u:j==32&&R<=8287?L[R&255]:j==254&&R>=65136?u:i}Re.L=e,Re.R=t,Re.EN=n,Re.ON_R=3,Re.AN=4,Re.R_H=5,Re.B=6,Re.RLE=7,Re.DOT="\xB7",Re.doBidiReorder=function(U,R,j){if(U.length<2)return{};var B=U.split(""),z=new Array(B.length),G=new Array(B.length),V=[];W=j?s:h,E(B,V,B.length,R);for(var et=0;et<z.length;z[et]=et,et++);S(2,V,z),S(1,V,z);for(var et=0;et<z.length-1;et++)R[et]===a?V[et]=Re.AN:V[et]===t&&(R[et]>u&&R[et]<y||R[et]===i||R[et]===A)?V[et]=Re.ON_R:et>0&&B[et-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(B[et])&&(V[et-1]=V[et]=Re.R_H,et++);B[B.length-1]===Re.DOT&&(V[B.length-1]=Re.B),B[0]==="\u202B"&&(V[0]=Re.RLE);for(var et=0;et<z.length;et++)G[et]=V[z[et]];return{logicalFromVisual:z,bidiLevels:G}},Re.hasBidiCharacters=function(U,R){for(var j=!1,B=0;B<U.length;B++)R[B]=P(U.charAt(B)),!j&&(R[B]==t||R[B]==u||R[B]==a)&&(j=!0);return j},Re.getVisualFromLogicalIdx=function(U,R){for(var j=0;j<R.logicalFromVisual.length;j++)if(R.logicalFromVisual[j]==U)return j;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(ze,Re,jr){var W=ze("./lib/bidiutil"),I=ze("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,T=function(){function k(r){this.session=r,this.bidiMap={},this.currentRow=null,this.bidiUtil=W,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(r.getValue())}return k.prototype.isBidiRow=function(r,m,h){return this.seenBidi?(r!==this.currentRow&&(this.currentRow=r,this.updateRowLine(m,h),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},k.prototype.onChange=function(r){this.seenBidi?this.currentRow=null:r.action=="insert"&&o.test(r.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},k.prototype.getDocumentRow=function(){var r=0,m=this.session.$screenRowCache;if(m.length){var h=this.session.$getRowCacheIndex(m,this.currentRow);h>=0&&(r=this.session.$docRowCache[h])}return r},k.prototype.getSplitIndex=function(){var r=0,m=this.session.$screenRowCache;if(m.length)for(var h,s=this.session.$getRowCacheIndex(m,this.currentRow);this.currentRow-r>0&&(h=this.session.$getRowCacheIndex(m,this.currentRow-r-1),h===s);)s=h,r++;else r=this.currentRow;return r},k.prototype.updateRowLine=function(r,m){r===void 0&&(r=this.getDocumentRow());var h=r===this.session.getLength()-1,s=h?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(r),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var e=this.session.$wrapData[r];e&&(m===void 0&&(m=this.getSplitIndex()),m>0&&e.length?(this.wrapIndent=e.indent,this.wrapOffset=this.wrapIndent*this.charWidths[W.L],this.line=m<e.length?this.line.substring(e[m-1],e[m]):this.line.substring(e[e.length-1])):this.line=this.line.substring(0,e[m]),m==e.length&&(this.line+=this.showInvisibles?s:W.DOT))}else this.line+=this.showInvisibles?s:W.DOT;var t=this.session,n=0,a;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(i,c){return i==="	"||t.isFullWidth(i.charCodeAt(0))?(a=i==="	"?t.getScreenTabSize(c+n):2,n+=a-1,I.stringRepeat(W.DOT,a)):i}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==W.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},k.prototype.updateBidiMap=function(){var r=[];W.hasBidiCharacters(this.line,r)||this.isRtlDir?this.bidiMap=W.doBidiReorder(this.line,r,this.isRtlDir):this.bidiMap={}},k.prototype.markAsDirty=function(){this.currentRow=null},k.prototype.updateCharacterWidths=function(r){if(this.characterWidth!==r.$characterSize.width){this.fontMetrics=r;var m=this.characterWidth=r.$characterSize.width,h=r.$measureCharWidth("\u05D4");this.charWidths[W.L]=this.charWidths[W.EN]=this.charWidths[W.ON_R]=m,this.charWidths[W.R]=this.charWidths[W.AN]=h,this.charWidths[W.R_H]=h*.45,this.charWidths[W.B]=this.charWidths[W.RLE]=0,this.currentRow=null}},k.prototype.setShowInvisibles=function(r){this.showInvisibles=r,this.currentRow=null},k.prototype.setEolChar=function(r){this.EOL=r},k.prototype.setContentWidth=function(r){this.contentWidth=r},k.prototype.isRtlLine=function(r){return this.$isRtl?!0:r!=null?this.session.getLine(r).charAt(0)==this.RLE:this.isRtlDir},k.prototype.setRtlDirection=function(r,m){for(var h=r.getCursorPosition(),s=r.selection.getSelectionAnchor().row;s<=h.row;s++)!m&&r.session.getLine(s).charAt(0)===r.session.$bidiHandler.RLE?r.session.doc.removeInLine(s,0,1):m&&r.session.getLine(s).charAt(0)!==r.session.$bidiHandler.RLE&&r.session.doc.insert({column:0,row:s},r.session.$bidiHandler.RLE)},k.prototype.getPosLeft=function(r){r-=this.wrapIndent;var m=this.line.charAt(0)===this.RLE?1:0,h=r>m?this.session.getOverwrite()?r:r-1:m,s=W.getVisualFromLogicalIdx(h,this.bidiMap),e=this.bidiMap.bidiLevels,t=0;!this.session.getOverwrite()&&r<=m&&e[s]%2!==0&&s++;for(var n=0;n<s;n++)t+=this.charWidths[e[n]];return!this.session.getOverwrite()&&r>m&&e[s]%2===0&&(t+=this.charWidths[e[s]]),this.wrapIndent&&(t+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(t+=this.rtlLineOffset),t},k.prototype.getSelections=function(r,m){var h=this.bidiMap,s=h.bidiLevels,e,t=[],n=0,a=Math.min(r,m)-this.wrapIndent,i=Math.max(r,m)-this.wrapIndent,c=!1,l=!1,u=0;this.wrapIndent&&(n+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var f,d=0;d<s.length;d++)f=h.logicalFromVisual[d],e=s[d],c=f>=a&&f<i,c&&!l?u=n:!c&&l&&t.push({left:u,width:n-u}),n+=this.charWidths[e],l=c;if(c&&d===s.length&&t.push({left:u,width:n-u}),this.isRtlDir)for(var w=0;w<t.length;w++)t[w].left+=this.rtlLineOffset;return t},k.prototype.offsetToCol=function(h){this.isRtlDir&&(h-=this.rtlLineOffset);var m=0,h=Math.max(h,0),s=0,e=0,t=this.bidiMap.bidiLevels,n=this.charWidths[t[e]];for(this.wrapIndent&&(h-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);h>s+n/2;){if(s+=n,e===t.length-1){n=0;break}n=this.charWidths[t[++e]]}return e>0&&t[e-1]%2!==0&&t[e]%2===0?(h<s&&e--,m=this.bidiMap.logicalFromVisual[e]):e>0&&t[e-1]%2===0&&t[e]%2!==0?m=1+(h>s?this.bidiMap.logicalFromVisual[e]:this.bidiMap.logicalFromVisual[e-1]):this.isRtlDir&&e===t.length-1&&n===0&&t[e-1]%2===0||!this.isRtlDir&&e===0&&t[e]%2!==0?m=1+this.bidiMap.logicalFromVisual[e]:(e>0&&t[e-1]%2!==0&&n!==0&&e--,m=this.bidiMap.logicalFromVisual[e]),m===0&&this.isRtlDir&&m++,m+this.wrapIndent},k}();Re.BidiHandler=T}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(ze,Re,jr){var W=ze("./lib/oop"),I=ze("./lib/lang"),o=ze("./lib/event_emitter").EventEmitter,T=ze("./range").Range,k=function(){function r(m){this.session=m,this.doc=m.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var h=this;this.cursor.on("change",function(s){h.$cursorChanged=!0,h.$silent||h._emit("changeCursor"),!h.$isEmpty&&!h.$silent&&h._emit("changeSelection"),!h.$keepDesiredColumnOnChange&&s.old.column!=s.value.column&&(h.$desiredColumn=null)}),this.anchor.on("change",function(){h.$anchorChanged=!0,!h.$isEmpty&&!h.$silent&&h._emit("changeSelection")})}return r.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},r.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},r.prototype.getCursor=function(){return this.lead.getPosition()},r.prototype.setAnchor=function(m,h){this.$isEmpty=!1,this.anchor.setPosition(m,h)},r.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},r.prototype.getSelectionLead=function(){return this.lead.getPosition()},r.prototype.isBackwards=function(){var m=this.anchor,h=this.lead;return m.row>h.row||m.row==h.row&&m.column>h.column},r.prototype.getRange=function(){var m=this.anchor,h=this.lead;return this.$isEmpty?T.fromPoints(h,h):this.isBackwards()?T.fromPoints(h,m):T.fromPoints(m,h)},r.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},r.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},r.prototype.setRange=function(m,h){var s=h?m.end:m.start,e=h?m.start:m.end;this.$setSelection(s.row,s.column,e.row,e.column)},r.prototype.$setSelection=function(m,h,s,e){if(!this.$silent){var t=this.$isEmpty,n=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(m,h),this.cursor.setPosition(s,e),this.$isEmpty=!T.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||t!=this.$isEmpty||n)&&this._emit("changeSelection")}},r.prototype.$moveSelection=function(m){var h=this.lead;this.$isEmpty&&this.setSelectionAnchor(h.row,h.column),m.call(this)},r.prototype.selectTo=function(m,h){this.$moveSelection(function(){this.moveCursorTo(m,h)})},r.prototype.selectToPosition=function(m){this.$moveSelection(function(){this.moveCursorToPosition(m)})},r.prototype.moveTo=function(m,h){this.clearSelection(),this.moveCursorTo(m,h)},r.prototype.moveToPosition=function(m){this.clearSelection(),this.moveCursorToPosition(m)},r.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},r.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},r.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},r.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},r.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},r.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},r.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},r.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},r.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},r.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},r.prototype.getWordRange=function(m,h){if(typeof h>"u"){var s=m||this.lead;m=s.row,h=s.column}return this.session.getWordRange(m,h)},r.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},r.prototype.selectAWord=function(){var m=this.getCursor(),h=this.session.getAWordRange(m.row,m.column);this.setSelectionRange(h)},r.prototype.getLineRange=function(m,h){var s=typeof m=="number"?m:this.lead.row,e,t=this.session.getFoldLine(s);return t?(s=t.start.row,e=t.end.row):e=s,h===!0?new T(s,0,e,this.session.getLine(e).length):new T(s,0,e+1,0)},r.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},r.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},r.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},r.prototype.wouldMoveIntoSoftTab=function(m,h,s){var e=m.column,t=m.column+h;return s<0&&(e=m.column-h,t=m.column),this.session.isTabStop(m)&&this.doc.getLine(m.row).slice(e,t).split(" ").length-1==h},r.prototype.moveCursorLeft=function(){var m=this.lead.getPosition(),h;if(h=this.session.getFoldAt(m.row,m.column,-1))this.moveCursorTo(h.start.row,h.start.column);else if(m.column===0)m.row>0&&this.moveCursorTo(m.row-1,this.doc.getLine(m.row-1).length);else{var s=this.session.getTabSize();this.wouldMoveIntoSoftTab(m,s,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-s):this.moveCursorBy(0,-1)}},r.prototype.moveCursorRight=function(){var m=this.lead.getPosition(),h;if(h=this.session.getFoldAt(m.row,m.column,1))this.moveCursorTo(h.end.row,h.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var s=this.session.getTabSize(),m=this.lead;this.wouldMoveIntoSoftTab(m,s,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,s):this.moveCursorBy(0,1)}},r.prototype.moveCursorLineStart=function(){var m=this.lead.row,h=this.lead.column,s=this.session.documentToScreenRow(m,h),e=this.session.screenToDocumentPosition(s,0),t=this.session.getDisplayLine(m,null,e.row,e.column),n=t.match(/^\s*/);n[0].length!=h&&!this.session.$useEmacsStyleLineStart&&(e.column+=n[0].length),this.moveCursorToPosition(e)},r.prototype.moveCursorLineEnd=function(){var m=this.lead,h=this.session.getDocumentLastRowColumnPosition(m.row,m.column);if(this.lead.column==h.column){var s=this.session.getLine(h.row);if(h.column==s.length){var e=s.search(/\s+$/);e>0&&(h.column=e)}}this.moveCursorTo(h.row,h.column)},r.prototype.moveCursorFileEnd=function(){var m=this.doc.getLength()-1,h=this.doc.getLine(m).length;this.moveCursorTo(m,h)},r.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},r.prototype.moveCursorLongWordRight=function(){var m=this.lead.row,h=this.lead.column,s=this.doc.getLine(m),e=s.substring(h);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var t=this.session.getFoldAt(m,h,1);if(t){this.moveCursorTo(t.end.row,t.end.column);return}if(this.session.nonTokenRe.exec(e)&&(h+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,e=s.substring(h)),h>=s.length){this.moveCursorTo(m,s.length),this.moveCursorRight(),m<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(e)&&(h+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(m,h)},r.prototype.moveCursorLongWordLeft=function(){var m=this.lead.row,h=this.lead.column,s;if(s=this.session.getFoldAt(m,h,-1)){this.moveCursorTo(s.start.row,s.start.column);return}var e=this.session.getFoldStringAt(m,h,-1);e==null&&(e=this.doc.getLine(m).substring(0,h));var t=I.stringReverse(e);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(t)&&(h-=this.session.nonTokenRe.lastIndex,t=t.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),h<=0){this.moveCursorTo(m,0),this.moveCursorLeft(),m>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(t)&&(h-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(m,h)},r.prototype.$shortWordEndIndex=function(m){var h=0,s,e=/\s/,t=this.session.tokenRe;if(t.lastIndex=0,this.session.tokenRe.exec(m))h=this.session.tokenRe.lastIndex;else{for(;(s=m[h])&&e.test(s);)h++;if(h<1){for(t.lastIndex=0;(s=m[h])&&!t.test(s);)if(t.lastIndex=0,h++,e.test(s))if(h>2){h--;break}else{for(;(s=m[h])&&e.test(s);)h++;if(h>2)break}}}return t.lastIndex=0,h},r.prototype.moveCursorShortWordRight=function(){var m=this.lead.row,h=this.lead.column,s=this.doc.getLine(m),e=s.substring(h),t=this.session.getFoldAt(m,h,1);if(t)return this.moveCursorTo(t.end.row,t.end.column);if(h==s.length){var n=this.doc.getLength();do m++,e=this.doc.getLine(m);while(m<n&&/^\s*$/.test(e));/^\s+/.test(e)||(e=""),h=0}var a=this.$shortWordEndIndex(e);this.moveCursorTo(m,h+a)},r.prototype.moveCursorShortWordLeft=function(){var m=this.lead.row,h=this.lead.column,s;if(s=this.session.getFoldAt(m,h,-1))return this.moveCursorTo(s.start.row,s.start.column);var e=this.session.getLine(m).substring(0,h);if(h===0){do m--,e=this.doc.getLine(m);while(m>0&&/^\s*$/.test(e));h=e.length,/\s+$/.test(e)||(e="")}var t=I.stringReverse(e),n=this.$shortWordEndIndex(t);return this.moveCursorTo(m,h-n)},r.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},r.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},r.prototype.moveCursorBy=function(m,h){var s=this.session.documentToScreenPosition(this.lead.row,this.lead.column),e;if(h===0&&(m!==0&&(this.session.$bidiHandler.isBidiRow(s.row,this.lead.row)?(e=this.session.$bidiHandler.getPosLeft(s.column),s.column=Math.round(e/this.session.$bidiHandler.charWidths[0])):e=s.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?s.column=this.$desiredColumn:this.$desiredColumn=s.column),m!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var t=this.session.lineWidgets[this.lead.row];m<0?m-=t.rowsAbove||0:m>0&&(m+=t.rowCount-(t.rowsAbove||0))}var n=this.session.screenToDocumentPosition(s.row+m,s.column,e);m!==0&&h===0&&n.row===this.lead.row&&(n.column,this.lead.column),this.moveCursorTo(n.row,n.column+h,h===0)},r.prototype.moveCursorToPosition=function(m){this.moveCursorTo(m.row,m.column)},r.prototype.moveCursorTo=function(m,h,s){var e=this.session.getFoldAt(m,h,1);e&&(m=e.start.row,h=e.start.column),this.$keepDesiredColumnOnChange=!0;var t=this.session.getLine(m);/[\uDC00-\uDFFF]/.test(t.charAt(h))&&t.charAt(h-1)&&(this.lead.row==m&&this.lead.column==h+1?h=h-1:h=h+1),this.lead.setPosition(m,h),this.$keepDesiredColumnOnChange=!1,s||(this.$desiredColumn=null)},r.prototype.moveCursorToScreen=function(m,h,s){var e=this.session.screenToDocumentPosition(m,h);this.moveCursorTo(e.row,e.column,s)},r.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},r.prototype.fromOrientedRange=function(m){this.setSelectionRange(m,m.cursor==m.start),this.$desiredColumn=m.desiredColumn||this.$desiredColumn},r.prototype.toOrientedRange=function(m){var h=this.getRange();return m?(m.start.column=h.start.column,m.start.row=h.start.row,m.end.column=h.end.column,m.end.row=h.end.row):m=h,m.cursor=this.isBackwards()?m.start:m.end,m.desiredColumn=this.$desiredColumn,m},r.prototype.getRangeOfMovements=function(m){var h=this.getCursor();try{m(this);var s=this.getCursor();return T.fromPoints(h,s)}catch{return T.fromPoints(h,h)}finally{this.moveCursorToPosition(h)}},r.prototype.toJSON=function(){if(this.rangeCount)var m=this.ranges.map(function(h){var s=h.clone();return s.isBackwards=h.cursor==h.start,s});else{var m=this.getRange();m.isBackwards=this.isBackwards()}return m},r.prototype.fromJSON=function(m){if(m.start==null)if(this.rangeList&&m.length>1){this.toSingleRange(m[0]);for(var h=m.length;h--;){var s=T.fromPoints(m[h].start,m[h].end);m[h].isBackwards&&(s.cursor=s.start),this.addRange(s,!0)}return}else m=m[0];this.rangeList&&this.toSingleRange(m),this.setSelectionRange(m,m.isBackwards)},r.prototype.isEqual=function(m){if((m.length||this.rangeCount)&&m.length!=this.rangeCount)return!1;if(!m.length||!this.ranges)return this.getRange().isEqual(m);for(var h=this.ranges.length;h--;)if(!this.ranges[h].isEqual(m[h]))return!1;return!0},r}();k.prototype.setSelectionAnchor=k.prototype.setAnchor,k.prototype.getSelectionAnchor=k.prototype.getAnchor,k.prototype.setSelectionRange=k.prototype.setRange,W.implement(k.prototype,o),Re.Selection=k}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(ze,Re,jr){var W=ze("./lib/report_error").reportError,I=2e3,o=function(){function T(k){this.states=k,this.regExps={},this.matchMappings={};for(var r in this.states){for(var m=this.states[r],h=[],s=0,e=this.matchMappings[r]={defaultToken:"text"},t="g",n=[],a=0;a<m.length;a++){var i=m[a];if(i.defaultToken&&(e.defaultToken=i.defaultToken),i.caseInsensitive&&t.indexOf("i")===-1&&(t+="i"),i.unicode&&t.indexOf("u")===-1&&(t+="u"),i.regex!=null){i.regex instanceof RegExp&&(i.regex=i.regex.toString().slice(1,-1));var c=i.regex,l=new RegExp("(?:("+c+")|(.))").exec("a").length-2;Array.isArray(i.token)?i.token.length==1||l==1?i.token=i.token[0]:l-1!=i.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:i,groupCount:l-1}),i.token=i.token[0]):(i.tokenArray=i.token,i.token=null,i.onMatch=this.$arrayTokens):typeof i.token=="function"&&!i.onMatch&&(l>1?i.onMatch=this.$applyToken:i.onMatch=i.token),l>1&&(/\\\d/.test(i.regex)?c=i.regex.replace(/\\([0-9]+)/g,function(u,f){return"\\"+(parseInt(f,10)+s+1)}):(l=1,c=this.removeCapturingGroups(i.regex)),!i.splitRegex&&typeof i.token!="string"&&n.push(i)),e[s]=a,s+=l,h.push(c),i.onMatch||(i.onMatch=null)}}h.length||(e[0]=0,h.push("$")),n.forEach(function(u){u.splitRegex=this.createSplitterRegexp(u.regex,t)},this),this.regExps[r]=new RegExp("("+h.join(")|(")+")|($)",t)}}return T.prototype.$setMaxTokenCount=function(k){I=k|0},T.prototype.$applyToken=function(k){var r=this.splitRegex.exec(k).slice(1),m=this.token.apply(this,r);if(typeof m=="string")return[{type:m,value:k}];for(var h=[],s=0,e=m.length;s<e;s++)r[s]&&(h[h.length]={type:m[s],value:r[s]});return h},T.prototype.$arrayTokens=function(k){if(!k)return[];var r=this.splitRegex.exec(k);if(!r)return"text";for(var m=[],h=this.tokenArray,s=0,e=h.length;s<e;s++)r[s+1]&&(m[m.length]={type:h[s],value:r[s+1]});return m},T.prototype.removeCapturingGroups=function(k){var r=k.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(m,h){return h?"(?:":m});return r},T.prototype.createSplitterRegexp=function(k,r){if(k.indexOf("(?=")!=-1){var m=0,h=!1,s={};k.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,n,a,i,c){return h?h=i!="]":i?h=!0:a?(m==s.stack&&(s.end=c+1,s.stack=-1),m--):n&&(m++,n.length!=1&&(s.stack=m,s.start=c)),e}),s.end!=null&&/^\)*$/.test(k.substr(s.end))&&(k=k.substring(0,s.start)+k.substr(s.end))}return k.charAt(0)!="^"&&(k="^"+k),k.charAt(k.length-1)!="$"&&(k+="$"),new RegExp(k,(r||"").replace("g",""))},T.prototype.getLineTokens=function(k,r){if(r&&typeof r!="string"){var m=r.slice(0);r=m[0],r==="#tmp"&&(m.shift(),r=m.shift())}else var m=[];var h=r||"start",s=this.states[h];s||(h="start",s=this.states[h]);var e=this.matchMappings[h],t=this.regExps[h];t.lastIndex=0;for(var n,a=[],i=0,c=0,l={type:null,value:""};n=t.exec(k);){var u=e.defaultToken,f=null,d=n[0],w=t.lastIndex;if(w-d.length>i){var v=k.substring(i,w-d.length);l.type==u?l.value+=v:(l.type&&a.push(l),l={type:u,value:v})}for(var p=0;p<n.length-2;p++)if(n[p+1]!==void 0){f=s[e[p]],f.onMatch?u=f.onMatch(d,h,m,k):u=f.token,f.next&&(typeof f.next=="string"?h=f.next:h=f.next(h,m),s=this.states[h],s||(this.reportError("state doesn't exist",h),h="start",s=this.states[h]),e=this.matchMappings[h],i=w,t=this.regExps[h],t.lastIndex=w),f.consumeLineEnd&&(i=w);break}if(d){if(typeof u=="string")(!f||f.merge!==!1)&&l.type===u?l.value+=d:(l.type&&a.push(l),l={type:u,value:d});else if(u){l.type&&a.push(l),l={type:null,value:""};for(var p=0;p<u.length;p++)a.push(u[p])}}if(i==k.length)break;if(i=w,c++>I){for(c>2*k.length&&this.reportError("infinite loop with in ace tokenizer",{startState:r,line:k});i<k.length;)l.type&&a.push(l),l={value:k.substring(i,i+=500),type:"overflow"};h="start",m=[];break}}return l.type&&a.push(l),m.length>1&&m[0]!==h&&m.unshift("#tmp",h),{tokens:a,state:m.length?m:h}},T}();o.prototype.reportError=W,Re.Tokenizer=o}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(ze,Re,jr){var W=ze("../lib/deep_copy").deepCopy,I=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(k,r){if(!r){for(var m in k)this.$rules[m]=k[m];return}for(var m in k){for(var h=k[m],s=0;s<h.length;s++){var e=h[s];(e.next||e.onMatch)&&(typeof e.next=="string"&&e.next.indexOf(r)!==0&&(e.next=r+e.next),e.nextState&&e.nextState.indexOf(r)!==0&&(e.nextState=r+e.nextState))}this.$rules[r+m]=h}},this.getRules=function(){return this.$rules},this.embedRules=function(k,r,m,h,s){var e=typeof k=="function"?new k().getRules():k;if(h)for(var t=0;t<h.length;t++)h[t]=r+h[t];else{h=[];for(var n in e)h.push(r+n)}if(this.addRules(e,r),m)for(var a=Array.prototype[s?"push":"unshift"],t=0;t<h.length;t++)a.apply(this.$rules[h[t]],W(m));this.$embeds||(this.$embeds=[]),this.$embeds.push(r)},this.getEmbeds=function(){return this.$embeds};var o=function(k,r){return(k!="start"||r.length)&&r.unshift(this.nextState,k),this.nextState},T=function(k,r){return r.shift(),r.shift()||"start"};this.normalizeRules=function(){var k=0,r=this.$rules;function m(h){var s=r[h];s.processed=!0;for(var e=0;e<s.length;e++){var t=s[e],n=null;Array.isArray(t)&&(n=t,t={}),!t.regex&&t.start&&(t.regex=t.start,t.next||(t.next=[]),t.next.push({defaultToken:t.token},{token:t.token+".end",regex:t.end||t.start,next:"pop"}),t.token=t.token+".start",t.push=!0);var a=t.next||t.push;if(a&&Array.isArray(a)){var i=t.stateName;i||(i=t.token,typeof i!="string"&&(i=i[0]||""),r[i]&&(i+=k++)),r[i]=a,t.next=i,m(i)}else a=="pop"&&(t.next=T);if(t.push&&(t.nextState=t.next||t.push,t.next=o,delete t.push),t.rules)for(var c in t.rules)r[c]?r[c].push&&r[c].push.apply(r[c],t.rules[c]):r[c]=t.rules[c];var l=typeof t=="string"?t:t.include;if(l&&(l==="$self"&&(l="start"),Array.isArray(l)?n=l.map(function(f){return r[f]}):n=r[l]),n){var u=[e,1].concat(n);t.noEscape&&(u=u.filter(function(f){return!f.next})),s.splice.apply(s,u),e--}t.keywordMap&&(t.token=this.createKeywordMapper(t.keywordMap,t.defaultToken||"text",t.caseInsensitive),delete t.defaultToken)}}Object.keys(r).forEach(m,this)},this.createKeywordMapper=function(k,r,m,h){var s=Object.create(null);return this.$keywordList=[],Object.keys(k).forEach(function(e){for(var t=k[e],n=t.split(h||"|"),a=n.length;a--;){var i=n[a];this.$keywordList.push(i),m&&(i=i.toLowerCase()),s[i]=e}},this),k=null,m?function(e){return s[e.toLowerCase()]||r}:function(e){return s[e]||r}},this.getKeywords=function(){return this.$keywords}}).call(I.prototype),Re.TextHighlightRules=I}),ace.define("ace/mode/behaviour",["require","exports","module"],function(ze,Re,jr){var W=function(){this.$behaviours={}};(function(){this.add=function(I,o,T){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[I]:this.$behaviours[I]={}}this.$behaviours[I][o]=T},this.addBehaviours=function(I){for(var o in I)for(var T in I[o])this.add(o,T,I[o][T])},this.remove=function(I){this.$behaviours&&this.$behaviours[I]&&delete this.$behaviours[I]},this.inherit=function(I,o){if(typeof I=="function")var T=new I().getBehaviours(o);else var T=I.getBehaviours(o);this.addBehaviours(T)},this.getBehaviours=function(I){if(I){for(var o={},T=0;T<I.length;T++)this.$behaviours[I[T]]&&(o[I[T]]=this.$behaviours[I[T]]);return o}else return this.$behaviours}}).call(W.prototype),Re.Behaviour=W}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(ze,Re,jr){var W=ze("./range").Range,I=function(){function o(T,k,r){this.$session=T,this.$row=k,this.$rowTokens=T.getTokens(k);var m=T.getTokenAt(k,r);this.$tokenIndex=m?m.index:-1}return o.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},o.prototype.stepForward=function(){this.$tokenIndex+=1;for(var T;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,T||(T=this.$session.getLength()),this.$row>=T)return this.$row=T-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},o.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},o.prototype.getCurrentTokenRow=function(){return this.$row},o.prototype.getCurrentTokenColumn=function(){var T=this.$rowTokens,k=this.$tokenIndex,r=T[k].start;if(r!==void 0)return r;for(r=0;k>0;)k-=1,r+=T[k].value.length;return r},o.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},o.prototype.getCurrentTokenRange=function(){var T=this.$rowTokens[this.$tokenIndex],k=this.getCurrentTokenColumn();return new W(this.$row,k,this.$row,k+T.value.length)},o}();Re.TokenIterator=I}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(ze,Re,jr){var W=ze("../../lib/oop"),I=ze("../behaviour").Behaviour,o=ze("../../token_iterator").TokenIterator,T=ze("../../lib/lang"),k=["text","paren.rparen","rparen","paren","punctuation.operator"],r=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],m,h={},s={'"':'"',"'":"'"},e=function(a){var i=-1;if(a.multiSelect&&(i=a.selection.index,h.rangeCount!=a.multiSelect.rangeCount&&(h={rangeCount:a.multiSelect.rangeCount})),h[i])return m=h[i];m=h[i]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},t=function(a,i,c,l){var u=a.end.row-a.start.row;return{text:c+i+l,selection:[0,a.start.column+1,u,a.end.column+(u?0:1)]}},n=function(a){a=a||{},this.add("braces","insertion",function(i,c,l,u,f){var d=l.getCursorPosition(),w=u.doc.getLine(d.row);if(f=="{"){e(l);var v=l.getSelectionRange(),p=u.doc.getTextRange(v);if(p!==""&&p!=="{"&&l.getWrapBehavioursEnabled())return t(v,p,"{","}");if(n.isSaneInsertion(l,u))return/[\]\}\)]/.test(w[d.column])||l.inMultiSelectMode||a.braces?(n.recordAutoInsert(l,u,"}"),{text:"{}",selection:[1,1]}):(n.recordMaybeInsert(l,u,"{"),{text:"{",selection:[1,1]})}else if(f=="}"){e(l);var y=w.substring(d.column,d.column+1);if(y=="}"){var b=u.$findOpeningBracket("}",{column:d.column+1,row:d.row});if(b!==null&&n.isAutoInsertedClosing(d,w,f))return n.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(f==`
`||f==`\r
`){e(l);var x="";n.isMaybeInsertedClosing(d,w)&&(x=T.stringRepeat("}",m.maybeInsertedBrackets),n.clearMaybeInsertedClosing());var y=w.substring(d.column,d.column+1);if(y==="}"){var _=u.findMatchingBracket({row:d.row,column:d.column+1},"}");if(!_)return null;var g=this.$getIndent(u.getLine(_.row))}else if(x)var g=this.$getIndent(w);else{n.clearMaybeInsertedClosing();return}var A=g+u.getTabString();return{text:`
`+A+`
`+g+x,selection:[1,A.length,1,A.length]}}else n.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(i,c,l,u,f){var d=u.doc.getTextRange(f);if(!f.isMultiLine()&&d=="{"){e(l);var w=u.doc.getLine(f.start.row),v=w.substring(f.end.column,f.end.column+1);if(v=="}")return f.end.column++,f;m.maybeInsertedBrackets--}}),this.add("parens","insertion",function(i,c,l,u,f){if(f=="("){e(l);var d=l.getSelectionRange(),w=u.doc.getTextRange(d);if(w!==""&&l.getWrapBehavioursEnabled())return t(d,w,"(",")");if(n.isSaneInsertion(l,u))return n.recordAutoInsert(l,u,")"),{text:"()",selection:[1,1]}}else if(f==")"){e(l);var v=l.getCursorPosition(),p=u.doc.getLine(v.row),y=p.substring(v.column,v.column+1);if(y==")"){var b=u.$findOpeningBracket(")",{column:v.column+1,row:v.row});if(b!==null&&n.isAutoInsertedClosing(v,p,f))return n.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(i,c,l,u,f){var d=u.doc.getTextRange(f);if(!f.isMultiLine()&&d=="("){e(l);var w=u.doc.getLine(f.start.row),v=w.substring(f.start.column+1,f.start.column+2);if(v==")")return f.end.column++,f}}),this.add("brackets","insertion",function(i,c,l,u,f){if(f=="["){e(l);var d=l.getSelectionRange(),w=u.doc.getTextRange(d);if(w!==""&&l.getWrapBehavioursEnabled())return t(d,w,"[","]");if(n.isSaneInsertion(l,u))return n.recordAutoInsert(l,u,"]"),{text:"[]",selection:[1,1]}}else if(f=="]"){e(l);var v=l.getCursorPosition(),p=u.doc.getLine(v.row),y=p.substring(v.column,v.column+1);if(y=="]"){var b=u.$findOpeningBracket("]",{column:v.column+1,row:v.row});if(b!==null&&n.isAutoInsertedClosing(v,p,f))return n.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(i,c,l,u,f){var d=u.doc.getTextRange(f);if(!f.isMultiLine()&&d=="["){e(l);var w=u.doc.getLine(f.start.row),v=w.substring(f.start.column+1,f.start.column+2);if(v=="]")return f.end.column++,f}}),this.add("string_dquotes","insertion",function(i,c,l,u,f){var d=u.$mode.$quotes||s;if(f.length==1&&d[f]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(f)!=-1)return;e(l);var w=f,v=l.getSelectionRange(),p=u.doc.getTextRange(v);if(p!==""&&(p.length!=1||!d[p])&&l.getWrapBehavioursEnabled())return t(v,p,w,w);if(!p){var y=l.getCursorPosition(),b=u.doc.getLine(y.row),x=b.substring(y.column-1,y.column),_=b.substring(y.column,y.column+1),g=u.getTokenAt(y.row,y.column),A=u.getTokenAt(y.row,y.column+1);if(x=="\\"&&g&&/escape/.test(g.type))return null;var M=g&&/string|escape/.test(g.type),L=!A||/string|escape/.test(A.type),E;if(_==w)E=M!==L,E&&/string\.end/.test(A.type)&&(E=!1);else{if(M&&!L||M&&L)return null;var S=u.$mode.tokenRe;S.lastIndex=0;var O=S.test(x);S.lastIndex=0;var P=S.test(_),U=u.$mode.$pairQuotesAfter,R=U&&U[w]&&U[w].test(x);if(!R&&O||P||_&&!/[\s;,.})\]\\]/.test(_))return null;var j=b[y.column-2];if(x==w&&(j==w||S.test(j)))return null;E=!0}return{text:E?w+w:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(i,c,l,u,f){var d=u.$mode.$quotes||s,w=u.doc.getTextRange(f);if(!f.isMultiLine()&&d.hasOwnProperty(w)){e(l);var v=u.doc.getLine(f.start.row),p=v.substring(f.start.column+1,f.start.column+2);if(p==w)return f.end.column++,f}}),a.closeDocComment!==!1&&this.add("doc comment end","insertion",function(i,c,l,u,f){if(i==="doc-start"&&(f===`
`||f===`\r
`)&&l.selection.isEmpty()){var d=l.getCursorPosition(),w=u.doc.getLine(d.row),v=u.doc.getLine(d.row+1),p=this.$getIndent(w);if(/\s*\*/.test(v))return/^\s*\*/.test(w)?{text:f+p+"* ",selection:[1,3+p.length,1,3+p.length]}:{text:f+p+" * ",selection:[1,3+p.length,1,3+p.length]};if(/\/\*\*/.test(w.substring(0,d.column)))return{text:f+p+" * "+f+" "+p+"*/",selection:[1,4+p.length,1,4+p.length]}}})};n.isSaneInsertion=function(a,i){var c=a.getCursorPosition(),l=new o(i,c.row,c.column);if(!this.$matchTokenType(l.getCurrentToken()||"text",k)){if(/[)}\]]/.test(a.session.getLine(c.row)[c.column]))return!0;var u=new o(i,c.row,c.column+1);if(!this.$matchTokenType(u.getCurrentToken()||"text",k))return!1}return l.stepForward(),l.getCurrentTokenRow()!==c.row||this.$matchTokenType(l.getCurrentToken()||"text",r)},n.$matchTokenType=function(a,i){return i.indexOf(a.type||a)>-1},n.recordAutoInsert=function(a,i,c){var l=a.getCursorPosition(),u=i.doc.getLine(l.row);this.isAutoInsertedClosing(l,u,m.autoInsertedLineEnd[0])||(m.autoInsertedBrackets=0),m.autoInsertedRow=l.row,m.autoInsertedLineEnd=c+u.substr(l.column),m.autoInsertedBrackets++},n.recordMaybeInsert=function(a,i,c){var l=a.getCursorPosition(),u=i.doc.getLine(l.row);this.isMaybeInsertedClosing(l,u)||(m.maybeInsertedBrackets=0),m.maybeInsertedRow=l.row,m.maybeInsertedLineStart=u.substr(0,l.column)+c,m.maybeInsertedLineEnd=u.substr(l.column),m.maybeInsertedBrackets++},n.isAutoInsertedClosing=function(a,i,c){return m.autoInsertedBrackets>0&&a.row===m.autoInsertedRow&&c===m.autoInsertedLineEnd[0]&&i.substr(a.column)===m.autoInsertedLineEnd},n.isMaybeInsertedClosing=function(a,i){return m.maybeInsertedBrackets>0&&a.row===m.maybeInsertedRow&&i.substr(a.column)===m.maybeInsertedLineEnd&&i.substr(0,a.column)==m.maybeInsertedLineStart},n.popAutoInsertedClosing=function(){m.autoInsertedLineEnd=m.autoInsertedLineEnd.substr(1),m.autoInsertedBrackets--},n.clearMaybeInsertedClosing=function(){m&&(m.maybeInsertedBrackets=0,m.maybeInsertedRow=-1)},W.inherits(n,I),Re.CstyleBehaviour=n}),ace.define("ace/unicode",["require","exports","module"],function(ze,Re,jr){for(var W=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],I=0,o=[],T=0;T<W.length;T+=2)o.push(I+=W[T]),W[T+1]&&o.push(45,I+=W[T+1]);Re.wordChars=String.fromCharCode.apply(null,o)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(ze,Re,jr){var W=ze("../config"),I=ze("../tokenizer").Tokenizer,o=ze("./text_highlight_rules").TextHighlightRules,T=ze("./behaviour/cstyle").CstyleBehaviour,k=ze("../unicode"),r=ze("../lib/lang"),m=ze("../token_iterator").TokenIterator,h=ze("../range").Range,s=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new T,this.tokenRe=new RegExp("^["+k.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+k.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new I(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,a){var i=t.doc,c=!0,l=!0,u=1/0,f=t.getTabSize(),d=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var w=this.lineCommentStart.map(r.escapeRegExp).join("|"),v=this.lineCommentStart[0];else var w=r.escapeRegExp(this.lineCommentStart),v=this.lineCommentStart;w=new RegExp("^(\\s*)(?:"+w+") ?"),d=t.getUseSoftTabs();var p=function(E,S){var O=E.match(w);if(O){var P=O[1].length,U=O[0].length;!_(E,P,U)&&O[0][U-1]==" "&&U--,i.removeInLine(S,P,U)}},y=v+" ",b=function(E,S){(!c||/\S/.test(E))&&(_(E,u,u)?i.insertInLine({row:S,column:u},y):i.insertInLine({row:S,column:u},v))},x=function(E,S){return w.test(E)},_=function(E,S,O){for(var P=0;S--&&E.charAt(S)==" ";)P++;if(P%f!=0)return!1;for(var P=0;E.charAt(O++)==" ";)P++;return f>2?P%f!=f-1:P%f==0}}else{if(!this.blockComment)return!1;var v=this.blockComment.start,g=this.blockComment.end,w=new RegExp("^(\\s*)(?:"+r.escapeRegExp(v)+")"),A=new RegExp("(?:"+r.escapeRegExp(g)+")\\s*$"),b=function(R,j){x(R,j)||(!c||/\S/.test(R))&&(i.insertInLine({row:j,column:R.length},g),i.insertInLine({row:j,column:u},v))},p=function(R,j){var B;(B=R.match(A))&&i.removeInLine(j,R.length-B[0].length,R.length),(B=R.match(w))&&i.removeInLine(j,B[1].length,B[0].length)},x=function(R,j){if(w.test(R))return!0;for(var B=t.getTokens(j),z=0;z<B.length;z++)if(B[z].type==="comment")return!0}}function M(E){for(var S=n;S<=a;S++)E(i.getLine(S),S)}var L=1/0;M(function(E,S){var O=E.search(/\S/);O!==-1?(O<u&&(u=O),l&&!x(E,S)&&(l=!1)):L>E.length&&(L=E.length)}),u==1/0&&(u=L,c=!1,l=!1),d&&u%f!=0&&(u=Math.floor(u/f)*f),M(l?p:b)},this.toggleBlockComment=function(e,t,n,a){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var c=new m(t,a.row,a.column),l=c.getCurrentToken();t.selection;var u=t.selection.toOrientedRange(),f,d;if(l&&/comment/.test(l.type)){for(var w,v;l&&/comment/.test(l.type);){var p=l.value.indexOf(i.start);if(p!=-1){var y=c.getCurrentTokenRow(),b=c.getCurrentTokenColumn()+p;w=new h(y,b,y,b+i.start.length);break}l=c.stepBackward()}for(var c=new m(t,a.row,a.column),l=c.getCurrentToken();l&&/comment/.test(l.type);){var p=l.value.indexOf(i.end);if(p!=-1){var y=c.getCurrentTokenRow(),b=c.getCurrentTokenColumn()+p;v=new h(y,b,y,b+i.end.length);break}l=c.stepForward()}v&&t.remove(v),w&&(t.remove(w),f=w.start.row,d=-i.start.length)}else d=i.start.length,f=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);u.start.row==f&&(u.start.column+=d),u.end.row==f&&(u.end.column+=d),t.selection.fromOrientedRange(u)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)if(e[t]){var n=e[t],a=n.prototype.$id,i=W.$modes[a];i||(W.$modes[a]=i=new n),W.$modes[t]||(W.$modes[t]=i),this.$embeds.push(t),this.$modes[t]=i}for(var c=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],t=0;t<c.length;t++)(function(u){var f=c[t],d=u[f];u[c[t]]=function(){return this.$delegator(f,arguments,d)}})(this)},this.$delegator=function(e,t,n){var a=t[0]||"start";if(typeof a!="string"){if(Array.isArray(a[2])){var i=a[2][a[2].length-1],c=this.$modes[i];if(c)return c[e].apply(c,[a[1]].concat([].slice.call(t,1)))}a=a[0]||"start"}for(var l=0;l<this.$embeds.length;l++)if(this.$modes[this.$embeds[l]]){var u=a.split(this.$embeds[l]);if(!u[0]&&u[1]){t[0]=u[1];var c=this.$modes[this.$embeds[l]];return c[e].apply(c,t)}}var f=n.apply(this,t);return n?f:void 0},this.transformAction=function(e,t,n,a,i){if(this.$behaviour){var c=this.$behaviour.getBehaviours();for(var l in c)if(c[l][t]){var u=c[l][t].apply(this,arguments);if(u)return u}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var a in t)for(var i=t[a],c=0,l=i.length;c<l;c++)if(typeof i[c].token=="string")/keyword|support|storage/.test(i[c].token)&&n.push(i[c].regex);else if(typeof i[c].token=="object"){for(var u=0,f=i[c].token.length;u<f;u++)if(/keyword|support|storage/.test(i[c].token[u])){var a=i[c].regex.match(/\(.+?\)/g)[u];n.push(a.substr(1,a.length-2))}}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,a){var i=this.$keywordList||this.$createKeywordList();return i.map(function(c){return{name:c,value:c,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(s.prototype),Re.Mode=s}),ace.define("ace/apply_delta",["require","exports","module"],function(ze,Re,jr){Re.applyDelta=function(W,I,o){var T=I.start.row,k=I.start.column,r=W[T]||"";switch(I.action){case"insert":var m=I.lines;if(m.length===1)W[T]=r.substring(0,k)+I.lines[0]+r.substring(k);else{var h=[T,1].concat(I.lines);W.splice.apply(W,h),W[T]=r.substring(0,k)+W[T],W[T+I.lines.length-1]+=r.substring(k)}break;case"remove":var s=I.end.column,e=I.end.row;T===e?W[T]=r.substring(0,k)+r.substring(s):W.splice(T,e-T+1,r.substring(0,k)+W[e].substring(s));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(ze,Re,jr){var W=ze("./lib/oop"),I=ze("./lib/event_emitter").EventEmitter,o=function(){function r(m,h,s){this.$onChange=this.onChange.bind(this),this.attach(m),typeof s>"u"?this.setPosition(h.row,h.column):this.setPosition(h,s)}return r.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},r.prototype.getDocument=function(){return this.document},r.prototype.onChange=function(m){if(!(m.start.row==m.end.row&&m.start.row!=this.row)&&!(m.start.row>this.row)){var h=k(m,{row:this.row,column:this.column},this.$insertRight);this.setPosition(h.row,h.column,!0)}},r.prototype.setPosition=function(m,h,s){var e;if(s?e={row:m,column:h}:e=this.$clipPositionToDocument(m,h),!(this.row==e.row&&this.column==e.column)){var t={row:this.row,column:this.column};this.row=e.row,this.column=e.column,this._signal("change",{old:t,value:e})}},r.prototype.detach=function(){this.document.off("change",this.$onChange)},r.prototype.attach=function(m){this.document=m||this.document,this.document.on("change",this.$onChange)},r.prototype.$clipPositionToDocument=function(m,h){var s={};return m>=this.document.getLength()?(s.row=Math.max(0,this.document.getLength()-1),s.column=this.document.getLine(s.row).length):m<0?(s.row=0,s.column=0):(s.row=m,s.column=Math.min(this.document.getLine(s.row).length,Math.max(0,h))),h<0&&(s.column=0),s},r}();o.prototype.$insertRight=!1,W.implement(o.prototype,I);function T(r,m,h){var s=h?r.column<=m.column:r.column<m.column;return r.row<m.row||r.row==m.row&&s}function k(r,m,h){var s=r.action=="insert",e=(s?1:-1)*(r.end.row-r.start.row),t=(s?1:-1)*(r.end.column-r.start.column),n=r.start,a=s?n:r.end;return T(m,n,h)?{row:m.row,column:m.column}:T(a,m,!h)?{row:m.row+e,column:m.column+(m.row==a.row?t:0)}:{row:n.row,column:n.column}}Re.Anchor=o}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(ze,Re,jr){var W=ze("./lib/oop"),I=ze("./apply_delta").applyDelta,o=ze("./lib/event_emitter").EventEmitter,T=ze("./range").Range,k=ze("./anchor").Anchor,r=function(){function m(h){this.$lines=[""],h.length===0?this.$lines=[""]:Array.isArray(h)?this.insertMergedLines({row:0,column:0},h):this.insert({row:0,column:0},h)}return m.prototype.setValue=function(h){var s=this.getLength()-1;this.remove(new T(0,0,s,this.getLine(s).length)),this.insert({row:0,column:0},h||"")},m.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},m.prototype.createAnchor=function(h,s){return new k(this,h,s)},m.prototype.$detectNewLine=function(h){var s=h.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=s?s[1]:`
`,this._signal("changeNewLineMode")},m.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},m.prototype.setNewLineMode=function(h){this.$newLineMode!==h&&(this.$newLineMode=h,this._signal("changeNewLineMode"))},m.prototype.getNewLineMode=function(){return this.$newLineMode},m.prototype.isNewLine=function(h){return h==`\r
`||h=="\r"||h==`
`},m.prototype.getLine=function(h){return this.$lines[h]||""},m.prototype.getLines=function(h,s){return this.$lines.slice(h,s+1)},m.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},m.prototype.getLength=function(){return this.$lines.length},m.prototype.getTextRange=function(h){return this.getLinesForRange(h).join(this.getNewLineCharacter())},m.prototype.getLinesForRange=function(h){var s;if(h.start.row===h.end.row)s=[this.getLine(h.start.row).substring(h.start.column,h.end.column)];else{s=this.getLines(h.start.row,h.end.row),s[0]=(s[0]||"").substring(h.start.column);var e=s.length-1;h.end.row-h.start.row==e&&(s[e]=s[e].substring(0,h.end.column))}return s},m.prototype.insertLines=function(h,s){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(h,s)},m.prototype.removeLines=function(h,s){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(h,s)},m.prototype.insertNewLine=function(h){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(h,["",""])},m.prototype.insert=function(h,s){return this.getLength()<=1&&this.$detectNewLine(s),this.insertMergedLines(h,this.$split(s))},m.prototype.insertInLine=function(h,s){var e=this.clippedPos(h.row,h.column),t=this.pos(h.row,h.column+s.length);return this.applyDelta({start:e,end:t,action:"insert",lines:[s]},!0),this.clonePos(t)},m.prototype.clippedPos=function(h,s){var e=this.getLength();h===void 0?h=e:h<0?h=0:h>=e&&(h=e-1,s=void 0);var t=this.getLine(h);return s==null&&(s=t.length),s=Math.min(Math.max(s,0),t.length),{row:h,column:s}},m.prototype.clonePos=function(h){return{row:h.row,column:h.column}},m.prototype.pos=function(h,s){return{row:h,column:s}},m.prototype.$clipPosition=function(h){var s=this.getLength();return h.row>=s?(h.row=Math.max(0,s-1),h.column=this.getLine(s-1).length):(h.row=Math.max(0,h.row),h.column=Math.min(Math.max(h.column,0),this.getLine(h.row).length)),h},m.prototype.insertFullLines=function(h,s){h=Math.min(Math.max(h,0),this.getLength());var e=0;h<this.getLength()?(s=s.concat([""]),e=0):(s=[""].concat(s),h--,e=this.$lines[h].length),this.insertMergedLines({row:h,column:e},s)},m.prototype.insertMergedLines=function(h,s){var e=this.clippedPos(h.row,h.column),t={row:e.row+s.length-1,column:(s.length==1?e.column:0)+s[s.length-1].length};return this.applyDelta({start:e,end:t,action:"insert",lines:s}),this.clonePos(t)},m.prototype.remove=function(h){var s=this.clippedPos(h.start.row,h.start.column),e=this.clippedPos(h.end.row,h.end.column);return this.applyDelta({start:s,end:e,action:"remove",lines:this.getLinesForRange({start:s,end:e})}),this.clonePos(s)},m.prototype.removeInLine=function(h,s,e){var t=this.clippedPos(h,s),n=this.clippedPos(h,e);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})},!0),this.clonePos(t)},m.prototype.removeFullLines=function(h,s){h=Math.min(Math.max(0,h),this.getLength()-1),s=Math.min(Math.max(0,s),this.getLength()-1);var e=s==this.getLength()-1&&h>0,t=s<this.getLength()-1,n=e?h-1:h,a=e?this.getLine(n).length:0,i=t?s+1:s,c=t?0:this.getLine(i).length,l=new T(n,a,i,c),u=this.$lines.slice(h,s+1);return this.applyDelta({start:l.start,end:l.end,action:"remove",lines:this.getLinesForRange(l)}),u},m.prototype.removeNewLine=function(h){h<this.getLength()-1&&h>=0&&this.applyDelta({start:this.pos(h,this.getLine(h).length),end:this.pos(h+1,0),action:"remove",lines:["",""]})},m.prototype.replace=function(h,s){if(h instanceof T||(h=T.fromPoints(h.start,h.end)),s.length===0&&h.isEmpty())return h.start;if(s==this.getTextRange(h))return h.end;this.remove(h);var e;return s?e=this.insert(h.start,s):e=h.start,e},m.prototype.applyDeltas=function(h){for(var s=0;s<h.length;s++)this.applyDelta(h[s])},m.prototype.revertDeltas=function(h){for(var s=h.length-1;s>=0;s--)this.revertDelta(h[s])},m.prototype.applyDelta=function(h,s){var e=h.action=="insert";(e?h.lines.length<=1&&!h.lines[0]:!T.comparePoints(h.start,h.end))||(e&&h.lines.length>2e4?this.$splitAndapplyLargeDelta(h,2e4):(I(this.$lines,h,s),this._signal("change",h)))},m.prototype.$safeApplyDelta=function(h){var s=this.$lines.length;(h.action=="remove"&&h.start.row<s&&h.end.row<s||h.action=="insert"&&h.start.row<=s)&&this.applyDelta(h)},m.prototype.$splitAndapplyLargeDelta=function(h,s){for(var e=h.lines,t=e.length-s+1,n=h.start.row,a=h.start.column,i=0,c=0;i<t;i=c){c+=s-1;var l=e.slice(i,c);l.push(""),this.applyDelta({start:this.pos(n+i,a),end:this.pos(n+c,a=0),action:h.action,lines:l},!0)}h.lines=e.slice(i),h.start.row=n+i,h.start.column=a,this.applyDelta(h,!0)},m.prototype.revertDelta=function(h){this.$safeApplyDelta({start:this.clonePos(h.start),end:this.clonePos(h.end),action:h.action=="insert"?"remove":"insert",lines:h.lines.slice()})},m.prototype.indexToPosition=function(h,s){for(var e=this.$lines||this.getAllLines(),t=this.getNewLineCharacter().length,n=s||0,a=e.length;n<a;n++)if(h-=e[n].length+t,h<0)return{row:n,column:h+e[n].length+t};return{row:a-1,column:h+e[a-1].length+t}},m.prototype.positionToIndex=function(h,s){for(var e=this.$lines||this.getAllLines(),t=this.getNewLineCharacter().length,n=0,a=Math.min(h.row,e.length),i=s||0;i<a;++i)n+=e[i].length+t;return n+h.column},m.prototype.$split=function(h){return h.split(/\r\n|\r|\n/)},m}();r.prototype.$autoNewLine="",r.prototype.$newLineMode="auto",W.implement(r.prototype,o),Re.Document=r}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(ze,Re,jr){var W=ze("./lib/oop"),I=ze("./lib/event_emitter").EventEmitter,o=function(){function T(k,r){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=k;var m=this;this.$worker=function(){if(m.running){for(var h=new Date,s=m.currentLine,e=-1,t=m.doc,n=s;m.lines[s];)s++;var a=t.getLength(),i=0;for(m.running=!1;s<a;){m.$tokenizeRow(s),e=s;do s++;while(m.lines[s]);if(i++,i%5===0&&new Date-h>20){m.running=setTimeout(m.$worker,20);break}}m.currentLine=s,e==-1&&(e=s),n<=e&&m.fireUpdateEvent(n,e)}}}return T.prototype.setTokenizer=function(k){this.tokenizer=k,this.lines=[],this.states=[],this.start(0)},T.prototype.setDocument=function(k){this.doc=k,this.lines=[],this.states=[],this.stop()},T.prototype.fireUpdateEvent=function(k,r){var m={first:k,last:r};this._signal("update",{data:m})},T.prototype.start=function(k){this.currentLine=Math.min(k||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},T.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},T.prototype.$updateOnChange=function(k){var r=k.start.row,m=k.end.row-r;if(m===0)this.lines[r]=null;else if(k.action=="remove")this.lines.splice(r,m+1,null),this.states.splice(r,m+1,null);else{var h=Array(m+1);h.unshift(r,1),this.lines.splice.apply(this.lines,h),this.states.splice.apply(this.states,h)}this.currentLine=Math.min(r,this.currentLine,this.doc.getLength()),this.stop()},T.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},T.prototype.getTokens=function(k){return this.lines[k]||this.$tokenizeRow(k)},T.prototype.getState=function(k){return this.currentLine==k&&this.$tokenizeRow(k),this.states[k]||"start"},T.prototype.$tokenizeRow=function(k){var r=this.doc.getLine(k),m=this.states[k-1],h=this.tokenizer.getLineTokens(r,m,k);return this.states[k]+""!=h.state+""?(this.states[k]=h.state,this.lines[k+1]=null,this.currentLine>k+1&&(this.currentLine=k+1)):this.currentLine==k&&(this.currentLine=k+1),this.lines[k]=h.tokens},T.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},T}();W.implement(o.prototype,I),Re.BackgroundTokenizer=o}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(ze,Re,jr){var W=ze("./lib/lang"),I=ze("./range").Range,o=function(){function T(k,r,m){m===void 0&&(m="text"),this.setRegexp(k),this.clazz=r,this.type=m}return T.prototype.setRegexp=function(k){this.regExp+""!=k+""&&(this.regExp=k,this.cache=[])},T.prototype.update=function(k,r,m,h){if(this.regExp)for(var s=h.firstRow,e=h.lastRow,t={},n=s;n<=e;n++){var a=this.cache[n];a==null&&(a=W.getMatchOffsets(m.getLine(n),this.regExp),a.length>this.MAX_RANGES&&(a=a.slice(0,this.MAX_RANGES)),a=a.map(function(u){return new I(n,u.offset,n,u.offset+u.length)}),this.cache[n]=a.length?a:"");for(var i=a.length;i--;){var c=a[i].toScreenRange(m),l=c.toString();t[l]||(t[l]=!0,r.drawSingleLineMarker(k,c,this.clazz,h))}}},T}();o.prototype.MAX_RANGES=500,Re.SearchHighlight=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(ze,Re,jr){var W=ze("../range").Range,I=function(){function o(T,k){this.foldData=T,Array.isArray(k)?this.folds=k:k=this.folds=[k];var r=k[k.length-1];this.range=new W(k[0].start.row,k[0].start.column,r.end.row,r.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(m){m.setFoldLine(this)},this)}return o.prototype.shiftRow=function(T){this.start.row+=T,this.end.row+=T,this.folds.forEach(function(k){k.start.row+=T,k.end.row+=T})},o.prototype.addFold=function(T){if(T.sameRow){if(T.start.row<this.startRow||T.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(T),this.folds.sort(function(k,r){return-k.range.compareEnd(r.start.row,r.start.column)}),this.range.compareEnd(T.start.row,T.start.column)>0?(this.end.row=T.end.row,this.end.column=T.end.column):this.range.compareStart(T.end.row,T.end.column)<0&&(this.start.row=T.start.row,this.start.column=T.start.column)}else if(T.start.row==this.end.row)this.folds.push(T),this.end.row=T.end.row,this.end.column=T.end.column;else if(T.end.row==this.start.row)this.folds.unshift(T),this.start.row=T.start.row,this.start.column=T.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");T.foldLine=this},o.prototype.containsRow=function(T){return T>=this.start.row&&T<=this.end.row},o.prototype.walk=function(T,k,r){var m=0,h=this.folds,s,e,t,n=!0;k==null&&(k=this.end.row,r=this.end.column);for(var a=0;a<h.length;a++){if(s=h[a],e=s.range.compareStart(k,r),e==-1){T(null,k,r,m,n);return}if(t=T(null,s.start.row,s.start.column,m,n),t=!t&&T(s.placeholder,s.start.row,s.start.column,m),t||e===0)return;n=!s.sameRow,m=s.end.column}T(null,k,r,m,n)},o.prototype.getNextFoldTo=function(T,k){for(var r,m,h=0;h<this.folds.length;h++){if(r=this.folds[h],m=r.range.compareEnd(T,k),m==-1)return{fold:r,kind:"after"};if(m===0)return{fold:r,kind:"inside"}}return null},o.prototype.addRemoveChars=function(T,k,r){var m=this.getNextFoldTo(T,k),h,s;if(m){if(h=m.fold,m.kind=="inside"&&h.start.column!=k&&h.start.row!=T)window.console&&window.console.log(T,k,h);else if(h.start.row==T){s=this.folds;var e=s.indexOf(h);for(e===0&&(this.start.column+=r),e;e<s.length;e++){if(h=s[e],h.start.column+=r,!h.sameRow)return;h.end.column+=r}this.end.column+=r}}},o.prototype.split=function(T,k){var r=this.getNextFoldTo(T,k);if(!r||r.kind=="inside")return null;var m=r.fold,h=this.folds,s=this.foldData,e=h.indexOf(m),t=h[e-1];this.end.row=t.end.row,this.end.column=t.end.column,h=h.splice(e,h.length-e);var n=new o(s,h);return s.splice(s.indexOf(this)+1,0,n),n},o.prototype.merge=function(T){for(var k=T.folds,r=0;r<k.length;r++)this.addFold(k[r]);var m=this.foldData;m.splice(m.indexOf(T),1)},o.prototype.toString=function(){var T=[this.range.toString()+": ["];return this.folds.forEach(function(k){T.push("  "+k.toString())}),T.push("]"),T.join(`
`)},o.prototype.idxToPosition=function(T){for(var k=0,r=0;r<this.folds.length;r++){var m=this.folds[r];if(T-=m.start.column-k,T<0)return{row:m.start.row,column:m.start.column+T};if(T-=m.placeholder.length,T<0)return m.start;k=m.end.column}return{row:this.end.row,column:this.end.column+T}},o}();Re.FoldLine=I}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(ze,Re,jr){var W=ze("./range").Range,I=W.comparePoints,o=function(){function T(){this.ranges=[],this.$bias=1}return T.prototype.pointIndex=function(k,r,m){for(var h=this.ranges,s=m||0;s<h.length;s++){var e=h[s],t=I(k,e.end);if(!(t>0)){var n=I(k,e.start);return t===0?r&&n!==0?-s-2:s:n>0||n===0&&!r?s:-s-1}}return-s-1},T.prototype.add=function(k){var r=!k.isEmpty(),m=this.pointIndex(k.start,r);m<0&&(m=-m-1);var h=this.pointIndex(k.end,r,m);return h<0?h=-h-1:h++,this.ranges.splice(m,h-m,k)},T.prototype.addList=function(k){for(var r=[],m=k.length;m--;)r.push.apply(r,this.add(k[m]));return r},T.prototype.substractPoint=function(k){var r=this.pointIndex(k);if(r>=0)return this.ranges.splice(r,1)},T.prototype.merge=function(){var k=[],r=this.ranges;r=r.sort(function(t,n){return I(t.start,n.start)});for(var m=r[0],h,s=1;s<r.length;s++){h=m,m=r[s];var e=I(h.end,m.start);e<0||e==0&&!h.isEmpty()&&!m.isEmpty()||(I(h.end,m.end)<0&&(h.end.row=m.end.row,h.end.column=m.end.column),r.splice(s,1),k.push(m),m=h,s--)}return this.ranges=r,k},T.prototype.contains=function(k,r){return this.pointIndex({row:k,column:r})>=0},T.prototype.containsPoint=function(k){return this.pointIndex(k)>=0},T.prototype.rangeAtPoint=function(k){var r=this.pointIndex(k);if(r>=0)return this.ranges[r]},T.prototype.clipRows=function(k,r){var m=this.ranges;if(m[0].start.row>r||m[m.length-1].start.row<k)return[];var h=this.pointIndex({row:k,column:0});h<0&&(h=-h-1);var s=this.pointIndex({row:r,column:0},h);s<0&&(s=-s-1);for(var e=[],t=h;t<s;t++)e.push(m[t]);return e},T.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},T.prototype.attach=function(k){this.session&&this.detach(),this.session=k,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},T.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},T.prototype.$onChange=function(k){for(var r=k.start,m=k.end,h=r.row,s=m.row,e=this.ranges,t=0,n=e.length;t<n;t++){var a=e[t];if(a.end.row>=h)break}if(k.action=="insert")for(var i=s-h,c=-r.column+m.column;t<n;t++){var a=e[t];if(a.start.row>h)break;if(a.start.row==h&&a.start.column>=r.column&&(a.start.column==r.column&&this.$bias<=0||(a.start.column+=c,a.start.row+=i)),a.end.row==h&&a.end.column>=r.column){if(a.end.column==r.column&&this.$bias<0)continue;a.end.column==r.column&&c>0&&t<n-1&&a.end.column>a.start.column&&a.end.column==e[t+1].start.column&&(a.end.column-=c),a.end.column+=c,a.end.row+=i}}else for(var i=h-s,c=r.column-m.column;t<n;t++){var a=e[t];if(a.start.row>s)break;a.end.row<s&&(h<a.end.row||h==a.end.row&&r.column<a.end.column)?(a.end.row=h,a.end.column=r.column):a.end.row==s?a.end.column<=m.column?(i||a.end.column>r.column)&&(a.end.column=r.column,a.end.row=r.row):(a.end.column+=c,a.end.row+=i):a.end.row>s&&(a.end.row+=i),a.start.row<s&&(h<a.start.row||h==a.start.row&&r.column<a.start.column)?(a.start.row=h,a.start.column=r.column):a.start.row==s?a.start.column<=m.column?(i||a.start.column>r.column)&&(a.start.column=r.column,a.start.row=r.row):(a.start.column+=c,a.start.row+=i):a.start.row>s&&(a.start.row+=i)}if(i!=0&&t<n)for(;t<n;t++){var a=e[t];a.start.row+=i,a.end.row+=i}},T}();o.prototype.comparePoints=I,Re.RangeList=o}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(ze,Re,jr){var W=this&&this.__extends||function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");h(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),I=ze("../range_list").RangeList,o=function(h){W(s,h);function s(e,t){var n=h.call(this)||this;return n.foldLine=null,n.placeholder=t,n.range=e,n.start=e.start,n.end=e.end,n.sameRow=e.start.row==e.end.row,n.subFolds=n.ranges=[],n}return s.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},s.prototype.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},s.prototype.clone=function(){var e=this.range.clone(),t=new s(e,this.placeholder);return this.subFolds.forEach(function(n){t.subFolds.push(n.clone())}),t.collapseChildren=this.collapseChildren,t},s.prototype.addSubFold=function(e){if(!this.range.isEqual(e)){k(e,this.start);for(var t=e.start.row,n=e.start.column,a=0,i=-1;a<this.subFolds.length&&(i=this.subFolds[a].range.compare(t,n),i==1);a++);var c=this.subFolds[a],l=0;if(i==0){if(c.range.containsRange(e))return c.addSubFold(e);l=1}for(var t=e.range.end.row,n=e.range.end.column,u=a,i=-1;u<this.subFolds.length&&(i=this.subFolds[u].range.compare(t,n),i==1);u++);i==0&&u++;for(var f=this.subFolds.splice(a,u-a,e),d=i==0?f.length-1:f.length,w=l;w<d;w++)e.addSubFold(f[w]);return e.setFoldLine(this.foldLine),e}},s.prototype.restoreRange=function(e){return m(e,this.start)},s}(I);function T(h,s){h.row-=s.row,h.row==0&&(h.column-=s.column)}function k(h,s){T(h.start,s),T(h.end,s)}function r(h,s){h.row==0&&(h.column+=s.column),h.row+=s.row}function m(h,s){r(h.start,s),r(h.end,s)}Re.Fold=o}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(ze,Re,jr){var W=ze("../range").Range,I=ze("./fold_line").FoldLine,o=ze("./fold").Fold,T=ze("../token_iterator").TokenIterator,k=ze("../mouse/mouse_event").MouseEvent;function r(){this.getFoldAt=function(m,h,s){var e=this.getFoldLine(m);if(!e)return null;for(var t=e.folds,n=0;n<t.length;n++){var a=t[n].range;if(a.contains(m,h)){if(s==1&&a.isEnd(m,h)&&!a.isEmpty()||s==-1&&a.isStart(m,h)&&!a.isEmpty())continue;return t[n]}}},this.getFoldsInRange=function(m){var h=m.start,s=m.end,e=this.$foldData,t=[];h.column+=1,s.column-=1;for(var n=0;n<e.length;n++){var a=e[n].range.compareRange(m);if(a!=2){if(a==-2)break;for(var i=e[n].folds,c=0;c<i.length;c++){var l=i[c];if(a=l.range.compareRange(m),a==-2)break;if(a!=2){if(a==42)break;t.push(l)}}}}return h.column-=1,s.column+=1,t},this.getFoldsInRangeList=function(m){if(Array.isArray(m)){var h=[];m.forEach(function(e){h=h.concat(this.getFoldsInRange(e))},this)}else var h=this.getFoldsInRange(m);return h},this.getAllFolds=function(){for(var m=[],h=this.$foldData,s=0;s<h.length;s++)for(var e=0;e<h[s].folds.length;e++)m.push(h[s].folds[e]);return m},this.getFoldStringAt=function(m,h,s,e){if(e=e||this.getFoldLine(m),!e)return null;for(var t={end:{column:0}},n,a,i=0;i<e.folds.length;i++){a=e.folds[i];var c=a.range.compareEnd(m,h);if(c==-1){n=this.getLine(a.start.row).substring(t.end.column,a.start.column);break}else if(c===0)return null;t=a}return n||(n=this.getLine(a.start.row).substring(t.end.column)),s==-1?n.substring(0,h-t.end.column):s==1?n.substring(h-t.end.column):n},this.getFoldLine=function(m,h){var s=this.$foldData,e=0;for(h&&(e=s.indexOf(h)),e==-1&&(e=0),e;e<s.length;e++){var t=s[e];if(t.start.row<=m&&t.end.row>=m)return t;if(t.end.row>m)return null}return null},this.getNextFoldLine=function(m,h){var s=this.$foldData,e=0;for(h&&(e=s.indexOf(h)),e==-1&&(e=0),e;e<s.length;e++){var t=s[e];if(t.end.row>=m)return t}return null},this.getFoldedRowCount=function(m,h){for(var s=this.$foldData,e=h-m+1,t=0;t<s.length;t++){var n=s[t],a=n.end.row,i=n.start.row;if(a>=h){i<h&&(i>=m?e-=h-i:e=0);break}else a>=m&&(i>=m?e-=a-i:e-=a-m+1)}return e},this.$addFoldLine=function(m){return this.$foldData.push(m),this.$foldData.sort(function(h,s){return h.start.row-s.start.row}),m},this.addFold=function(m,h){var s=this.$foldData,e=!1,t;m instanceof o?t=m:(t=new o(h,m),t.collapseChildren=h.collapseChildren),this.$clipRangeToDocument(t.range);var n=t.start.row,a=t.start.column,i=t.end.row,c=t.end.column,l=this.getFoldAt(n,a,1),u=this.getFoldAt(i,c,-1);if(l&&u==l)return l.addSubFold(t);l&&!l.range.isStart(n,a)&&this.removeFold(l),u&&!u.range.isEnd(i,c)&&this.removeFold(u);var f=this.getFoldsInRange(t.range);f.length>0&&(this.removeFolds(f),t.collapseChildren||f.forEach(function(p){t.addSubFold(p)}));for(var d=0;d<s.length;d++){var w=s[d];if(i==w.start.row){w.addFold(t),e=!0;break}else if(n==w.end.row){if(w.addFold(t),e=!0,!t.sameRow){var v=s[d+1];if(v&&v.start.row==i){w.merge(v);break}}break}else if(i<=w.start.row)break}return e||(w=this.$addFoldLine(new I(this.$foldData,t))),this.$useWrapMode?this.$updateWrapData(w.start.row,w.start.row):this.$updateRowLengthCache(w.start.row,w.start.row),this.$modified=!0,this._signal("changeFold",{data:t,action:"add"}),t},this.addFolds=function(m){m.forEach(function(h){this.addFold(h)},this)},this.removeFold=function(m){var h=m.foldLine,s=h.start.row,e=h.end.row,t=this.$foldData,n=h.folds;if(n.length==1)t.splice(t.indexOf(h),1);else if(h.range.isEnd(m.end.row,m.end.column))n.pop(),h.end.row=n[n.length-1].end.row,h.end.column=n[n.length-1].end.column;else if(h.range.isStart(m.start.row,m.start.column))n.shift(),h.start.row=n[0].start.row,h.start.column=n[0].start.column;else if(m.sameRow)n.splice(n.indexOf(m),1);else{var a=h.split(m.start.row,m.start.column);n=a.folds,n.shift(),a.start.row=n[0].start.row,a.start.column=n[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(s,e):this.$updateRowLengthCache(s,e)),this.$modified=!0,this._signal("changeFold",{data:m,action:"remove"})},this.removeFolds=function(m){for(var h=[],s=0;s<m.length;s++)h.push(m[s]);h.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(m){this.removeFold(m),m.subFolds.forEach(function(h){m.restoreRange(h),this.addFold(h)},this),m.collapseChildren>0&&this.foldAll(m.start.row+1,m.end.row,m.collapseChildren-1),m.subFolds=[]},this.expandFolds=function(m){m.forEach(function(h){this.expandFold(h)},this)},this.unfold=function(m,h){var s,e;if(m==null)s=new W(0,0,this.getLength(),0),h==null&&(h=!0);else if(typeof m=="number")s=new W(m,0,m,this.getLine(m).length);else if("row"in m)s=W.fromPoints(m,m);else{if(Array.isArray(m))return e=[],m.forEach(function(n){e=e.concat(this.unfold(n))},this),e;s=m}e=this.getFoldsInRangeList(s);for(var t=e;e.length==1&&W.comparePoints(e[0].start,s.start)<0&&W.comparePoints(e[0].end,s.end)>0;)this.expandFolds(e),e=this.getFoldsInRangeList(s);if(h!=!1?this.removeFolds(e):this.expandFolds(e),t.length)return t},this.isRowFolded=function(m,h){return!!this.getFoldLine(m,h)},this.getRowFoldEnd=function(m,h){var s=this.getFoldLine(m,h);return s?s.end.row:m},this.getRowFoldStart=function(m,h){var s=this.getFoldLine(m,h);return s?s.start.row:m},this.getFoldDisplayLine=function(m,h,s,e,t){e==null&&(e=m.start.row),t==null&&(t=0),h==null&&(h=m.end.row),s==null&&(s=this.getLine(h).length);var n=this.doc,a="";return m.walk(function(i,c,l,u){if(!(c<e)){if(c==e){if(l<t)return;u=Math.max(t,u)}i!=null?a+=i:a+=n.getLine(c).substring(u,l)}},h,s),a},this.getDisplayLine=function(m,h,s,e){var t=this.getFoldLine(m);if(t)return this.getFoldDisplayLine(t,m,h,s,e);var n;return n=this.doc.getLine(m),n.substring(e||0,h||n.length)},this.$cloneFoldData=function(){var m=[];return m=this.$foldData.map(function(h){var s=h.folds.map(function(e){return e.clone()});return new I(m,s)}),m},this.toggleFold=function(m){var h=this.selection,s=h.getRange(),e,t;if(s.isEmpty()){var n=s.start;if(e=this.getFoldAt(n.row,n.column),e){this.expandFold(e);return}else(t=this.findMatchingBracket(n))?s.comparePoint(t)==1?s.end=t:(s.start=t,s.start.column++,s.end.column--):(t=this.findMatchingBracket({row:n.row,column:n.column+1}))?(s.comparePoint(t)==1?s.end=t:s.start=t,s.start.column++):s=this.getCommentFoldRange(n.row,n.column)||s}else{var a=this.getFoldsInRange(s);if(m&&a.length){this.expandFolds(a);return}else a.length==1&&(e=a[0])}if(e||(e=this.getFoldAt(s.start.row,s.start.column)),e&&e.range.toString()==s.toString()){this.expandFold(e);return}var i="...";if(!s.isMultiLine()){if(i=this.getTextRange(s),i.length<4)return;i=i.trim().substring(0,2)+".."}this.addFold(i,s)},this.getCommentFoldRange=function(m,h,s){var e=new T(this,m,h),t=e.getCurrentToken(),n=t&&t.type;if(t&&/^comment|string/.test(n)){n=n.match(/comment|string/)[0],n=="comment"&&(n+="|doc-start|\\.doc");var a=new RegExp(n),i=new W;if(s!=1){do t=e.stepBackward();while(t&&a.test(t.type)&&!/^comment.end/.test(t.type));t=e.stepForward()}if(i.start.row=e.getCurrentTokenRow(),i.start.column=e.getCurrentTokenColumn()+(/^comment.start/.test(t.type)?t.value.length:2),e=new T(this,m,h),s!=-1){var c=-1;do if(t=e.stepForward(),c==-1){var l=this.getState(e.$row);a.test(l)||(c=e.$row)}else if(e.$row>c)break;while(t&&a.test(t.type)&&!/^comment.start/.test(t.type));t=e.stepBackward()}else t=e.getCurrentToken();return i.end.row=e.getCurrentTokenRow(),i.end.column=e.getCurrentTokenColumn(),/^comment.end/.test(t.type)||(i.end.column+=t.value.length-2),i}},this.foldAll=function(m,h,s,e){s==null&&(s=1e5);var t=this.foldWidgets;if(t){h=h||this.getLength(),m=m||0;for(var n=m;n<h;n++)if(t[n]==null&&(t[n]=this.getFoldWidget(n)),t[n]=="start"&&!(e&&!e(n))){var a=this.getFoldWidgetRange(n);a&&a.isMultiLine()&&a.end.row<=h&&a.start.row>=m&&(n=a.end.row,a.collapseChildren=s,this.addFold("...",a))}}},this.foldToLevel=function(m){for(this.foldAll();m-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var m=this;this.foldAll(null,null,null,function(h){for(var s=m.getTokens(h),e=0;e<s.length;e++){var t=s[e];if(!(t.type=="text"&&/^\s+$/.test(t.value)))return!!/comment/.test(t.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(m){if(!this.$foldStyles[m])throw new Error("invalid fold style: "+m+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=m){this.$foldStyle=m,m=="manual"&&this.unfold();var h=this.$foldMode;this.$setFolding(null),this.$setFolding(h)}},this.$setFolding=function(m){if(this.$foldMode!=m){if(this.$foldMode=m,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!m||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=m.getFoldWidget.bind(m,this,this.$foldStyle),this.getFoldWidgetRange=m.getFoldWidgetRange.bind(m,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(m,h){var s=this.foldWidgets;if(!s||h&&s[m])return{};for(var e=m-1,t;e>=0;){var n=s[e];if(n==null&&(n=s[e]=this.getFoldWidget(e)),n=="start"){var a=this.getFoldWidgetRange(e);if(t||(t=a),a&&a.end.row>=m)break}e--}return{range:e!==-1&&a,firstRange:t}},this.onFoldWidgetClick=function(m,h){h instanceof k&&(h=h.domEvent);var s={children:h.shiftKey,all:h.ctrlKey||h.metaKey,siblings:h.altKey},e=this.$toggleFoldWidget(m,s);if(!e){var t=h.target||h.srcElement;t&&/ace_fold-widget/.test(t.className)&&(t.className+=" ace_invalid")}},this.$toggleFoldWidget=function(m,h){if(this.getFoldWidget){var s=this.getFoldWidget(m),e=this.getLine(m),t=s==="end"?-1:1,n=this.getFoldAt(m,t===-1?0:e.length,t);if(n)return h.children||h.all?this.removeFold(n):this.expandFold(n),n;var a=this.getFoldWidgetRange(m,!0);if(a&&!a.isMultiLine()&&(n=this.getFoldAt(a.start.row,a.start.column,1),n&&a.isEqual(n.range)))return this.removeFold(n),n;if(h.siblings){var i=this.getParentFoldRangeData(m);if(i.range)var c=i.range.start.row+1,l=i.range.end.row;this.foldAll(c,l,h.all?1e4:0)}else h.children?(l=a?a.end.row:this.getLength(),this.foldAll(m+1,l,h.all?1e4:0)):a&&(h.all&&(a.collapseChildren=1e4),this.addFold("...",a));return a}},this.toggleFoldWidget=function(m){var h=this.selection.getCursor().row;h=this.getRowFoldStart(h);var s=this.$toggleFoldWidget(h,{});if(!s){var e=this.getParentFoldRangeData(h,!0);if(s=e.range||e.firstRange,s){h=s.start.row;var t=this.getFoldAt(h,this.getLine(h).length,1);t?this.removeFold(t):this.addFold("...",s)}}},this.updateFoldWidgets=function(m){var h=m.start.row,s=m.end.row-h;if(s===0)this.foldWidgets[h]=null;else if(m.action=="remove")this.foldWidgets.splice(h,s+1,null);else{var e=Array(s+1);e.unshift(h,1),this.foldWidgets.splice.apply(this.foldWidgets,e)}},this.tokenizerUpdateFoldWidgets=function(m){var h=m.data;h.first!=h.last&&this.foldWidgets.length>h.first&&this.foldWidgets.splice(h.first,this.foldWidgets.length)}}Re.Folding=r}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(ze,Re,jr){var W=ze("../token_iterator").TokenIterator,I=ze("../range").Range;function o(){this.findMatchingBracket=function(T,k){if(T.column==0)return null;var r=k||this.getLine(T.row).charAt(T.column-1);if(r=="")return null;var m=r.match(/([\(\[\{])|([\)\]\}])/);return m?m[1]?this.$findClosingBracket(m[1],T):this.$findOpeningBracket(m[2],T):null},this.getBracketRange=function(T){var k=this.getLine(T.row),r=!0,m,h=k.charAt(T.column-1),s=h&&h.match(/([\(\[\{])|([\)\]\}])/);if(s||(h=k.charAt(T.column),T={row:T.row,column:T.column+1},s=h&&h.match(/([\(\[\{])|([\)\]\}])/),r=!1),!s)return null;if(s[1]){var e=this.$findClosingBracket(s[1],T);if(!e)return null;m=I.fromPoints(T,e),r||(m.end.column++,m.start.column--),m.cursor=m.end}else{var e=this.$findOpeningBracket(s[2],T);if(!e)return null;m=I.fromPoints(e,T),r||(m.start.column++,m.end.column--),m.cursor=m.start}return m},this.getMatchingBracketRanges=function(T,k){var r=this.getLine(T.row),m=/([\(\[\{])|([\)\]\}])/,h=!k&&r.charAt(T.column-1),s=h&&h.match(m);if(s||(h=(k===void 0||k)&&r.charAt(T.column),T={row:T.row,column:T.column+1},s=h&&h.match(m)),!s)return null;var e=new I(T.row,T.column-1,T.row,T.column),t=s[1]?this.$findClosingBracket(s[1],T):this.$findOpeningBracket(s[2],T);if(!t)return[e];var n=new I(t.row,t.column,t.row,t.column+1);return[e,n]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(T,k,r){var m=this.$brackets[T],h=1,s=new W(this,k.row,k.column),e=s.getCurrentToken();if(e||(e=s.stepForward()),!!e){r||(r=new RegExp("(\\.?"+e.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var t=k.column-s.getCurrentTokenColumn()-2,n=e.value;;){for(;t>=0;){var a=n.charAt(t);if(a==m){if(h-=1,h==0)return{row:s.getCurrentTokenRow(),column:t+s.getCurrentTokenColumn()}}else a==T&&(h+=1);t-=1}do e=s.stepBackward();while(e&&!r.test(e.type));if(e==null)break;n=e.value,t=n.length-1}return null}},this.$findClosingBracket=function(T,k,r){var m=this.$brackets[T],h=1,s=new W(this,k.row,k.column),e=s.getCurrentToken();if(e||(e=s.stepForward()),!!e){r||(r=new RegExp("(\\.?"+e.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var t=k.column-s.getCurrentTokenColumn();;){for(var n=e.value,a=n.length;t<a;){var i=n.charAt(t);if(i==m){if(h-=1,h==0)return{row:s.getCurrentTokenRow(),column:t+s.getCurrentTokenColumn()}}else i==T&&(h+=1);t+=1}do e=s.stepForward();while(e&&!r.test(e.type));if(e==null)break;t=0}return null}},this.getMatchingTags=function(T){var k=new W(this,T.row,T.column),r=this.$findTagName(k);if(r){var m=k.stepBackward();return m.value==="<"?this.$findClosingTag(k,r):this.$findOpeningTag(k,r)}},this.$findTagName=function(T){var k=T.getCurrentToken(),r=!1,m=!1;if(k&&k.type.indexOf("tag-name")===-1)do m?k=T.stepBackward():k=T.stepForward(),k&&(k.value==="/>"?m=!0:k.type.indexOf("tag-name")!==-1&&(r=!0));while(k&&!r);return k},this.$findClosingTag=function(T,k){var r,m=k.value,h=k.value,s=0,e=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+1);k=T.stepForward();var t=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+k.value.length),n=!1;do if(r=k,k=T.stepForward(),k){if(k.value===">"&&!n){var l=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+1);n=!0}if(k.type.indexOf("tag-name")!==-1){if(m=k.value,h===m){if(r.value==="<")s++;else if(r.value==="</"&&(s--,s<0)){T.stepBackward();var a=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+2);k=T.stepForward();var i=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+k.value.length);if(k=T.stepForward(),k&&k.value===">")var c=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+1);else return}}}else if(h===m&&k.value==="/>"&&(s--,s<0))var a=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+2),i=a,c=i,l=new I(t.end.row,t.end.column,t.end.row,t.end.column+1)}while(k&&s>=0);if(e&&l&&a&&c&&t&&i)return{openTag:new I(e.start.row,e.start.column,l.end.row,l.end.column),closeTag:new I(a.start.row,a.start.column,c.end.row,c.end.column),openTagName:t,closeTagName:i}},this.$findOpeningTag=function(T,k){var r=T.getCurrentToken(),m=k.value,h=0,s=T.getCurrentTokenRow(),e=T.getCurrentTokenColumn(),t=e+2,n=new I(s,e,s,t);T.stepForward();var a=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+k.value.length);if(k=T.stepForward(),!(!k||k.value!==">")){var i=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+1);T.stepBackward(),T.stepBackward();do if(k=r,s=T.getCurrentTokenRow(),e=T.getCurrentTokenColumn(),t=e+k.value.length,r=T.stepBackward(),k){if(k.type.indexOf("tag-name")!==-1){if(m===k.value)if(r.value==="<"){if(h++,h>0){var c=new I(s,e,s,t),l=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+1);do k=T.stepForward();while(k&&k.value!==">");var u=new I(T.getCurrentTokenRow(),T.getCurrentTokenColumn(),T.getCurrentTokenRow(),T.getCurrentTokenColumn()+1)}}else r.value==="</"&&h--}else if(k.value==="/>"){for(var f=0,d=r;d;){if(d.type.indexOf("tag-name")!==-1&&d.value===m){h--;break}else if(d.value==="<")break;d=T.stepBackward(),f++}for(var w=0;w<f;w++)T.stepForward()}}while(r&&h<=0);if(l&&u&&n&&i&&c&&a)return{openTag:new I(l.start.row,l.start.column,u.end.row,u.end.column),closeTag:new I(n.start.row,n.start.column,i.end.row,i.end.column),openTagName:c,closeTagName:a}}}}Re.BracketMatch=o}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(ze,Re,jr){var W=ze("./lib/oop"),I=ze("./lib/lang"),o=ze("./bidihandler").BidiHandler,T=ze("./config"),k=ze("./lib/event_emitter").EventEmitter,r=ze("./selection").Selection,m=ze("./mode/text").Mode,h=ze("./range").Range,s=ze("./document").Document,e=ze("./background_tokenizer").BackgroundTokenizer,t=ze("./search_highlight").SearchHighlight,n=function(){function p(y,b){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++p.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new e(new m().getTokenizer(),this);var x=this;this.bgTokenizer.on("update",function(_){x._signal("tokenizerUpdate",_)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof y!="object"||!y.getLine)&&(y=new s(y)),this.setDocument(y),this.selection=new r(this),this.$bidiHandler=new o(this),T.resetOptions(this),this.setMode(b),T._signal("session",this),this.destroyed=!1}return p.prototype.setDocument=function(y){this.doc&&this.doc.off("change",this.$onChange),this.doc=y,y.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},p.prototype.getDocument=function(){return this.doc},p.prototype.$resetRowCache=function(y){if(!y){this.$docRowCache=[],this.$screenRowCache=[];return}var b=this.$docRowCache.length,x=this.$getRowCacheIndex(this.$docRowCache,y)+1;b>x&&(this.$docRowCache.splice(x,b),this.$screenRowCache.splice(x,b))},p.prototype.$getRowCacheIndex=function(y,b){for(var x=0,_=y.length-1;x<=_;){var g=x+_>>1,A=y[g];if(b>A)x=g+1;else if(b<A)_=g-1;else return g}return x-1},p.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},p.prototype.onChangeFold=function(y){var b=y.data;this.$resetRowCache(b.start.row)},p.prototype.onChange=function(y){this.$modified=!0,this.$bidiHandler.onChange(y),this.$resetRowCache(y.start.row);var b=this.$updateInternalDataOnChange(y);!this.$fromUndo&&this.$undoManager&&(b&&b.length&&(this.$undoManager.add({action:"removeFolds",folds:b},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(y,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(y),this._signal("change",y)},p.prototype.setValue=function(y){this.doc.setValue(y),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},p.prototype.toString=function(){return this.doc.getValue()},p.prototype.getSelection=function(){return this.selection},p.prototype.getState=function(y){return this.bgTokenizer.getState(y)},p.prototype.getTokens=function(y){return this.bgTokenizer.getTokens(y)},p.prototype.getTokenAt=function(y,b){var x=this.bgTokenizer.getTokens(y),_,g=0;if(b==null){var A=x.length-1;g=this.getLine(y).length}else for(var A=0;A<x.length&&(g+=x[A].value.length,!(g>=b));A++);return _=x[A],_?(_.index=A,_.start=g-_.value.length,_):null},p.prototype.setUndoManager=function(y){if(this.$undoManager=y,this.$informUndoManager&&this.$informUndoManager.cancel(),y){var b=this;y.addSession(this),this.$syncInformUndoManager=function(){b.$informUndoManager.cancel(),b.mergeUndoDeltas=!1},this.$informUndoManager=I.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},p.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},p.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},p.prototype.getTabString=function(){return this.getUseSoftTabs()?I.stringRepeat(" ",this.getTabSize()):"	"},p.prototype.setUseSoftTabs=function(y){this.setOption("useSoftTabs",y)},p.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},p.prototype.setTabSize=function(y){this.setOption("tabSize",y)},p.prototype.getTabSize=function(){return this.$tabSize},p.prototype.isTabStop=function(y){return this.$useSoftTabs&&y.column%this.$tabSize===0},p.prototype.setNavigateWithinSoftTabs=function(y){this.setOption("navigateWithinSoftTabs",y)},p.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},p.prototype.setOverwrite=function(y){this.setOption("overwrite",y)},p.prototype.getOverwrite=function(){return this.$overwrite},p.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},p.prototype.addGutterDecoration=function(y,b){this.$decorations[y]||(this.$decorations[y]=""),this.$decorations[y]+=" "+b,this._signal("changeBreakpoint",{})},p.prototype.removeGutterDecoration=function(y,b){this.$decorations[y]=(this.$decorations[y]||"").replace(" "+b,""),this._signal("changeBreakpoint",{})},p.prototype.getBreakpoints=function(){return this.$breakpoints},p.prototype.setBreakpoints=function(y){this.$breakpoints=[];for(var b=0;b<y.length;b++)this.$breakpoints[y[b]]="ace_breakpoint";this._signal("changeBreakpoint",{})},p.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},p.prototype.setBreakpoint=function(y,b){b===void 0&&(b="ace_breakpoint"),b?this.$breakpoints[y]=b:delete this.$breakpoints[y],this._signal("changeBreakpoint",{})},p.prototype.clearBreakpoint=function(y){delete this.$breakpoints[y],this._signal("changeBreakpoint",{})},p.prototype.addMarker=function(y,b,x,_){var g=this.$markerId++,A={range:y,type:x||"line",renderer:typeof x=="function"?x:null,clazz:b,inFront:!!_,id:g};return _?(this.$frontMarkers[g]=A,this._signal("changeFrontMarker")):(this.$backMarkers[g]=A,this._signal("changeBackMarker")),g},p.prototype.addDynamicMarker=function(y,b){if(y.update){var x=this.$markerId++;return y.id=x,y.inFront=!!b,b?(this.$frontMarkers[x]=y,this._signal("changeFrontMarker")):(this.$backMarkers[x]=y,this._signal("changeBackMarker")),y}},p.prototype.removeMarker=function(y){var b=this.$frontMarkers[y]||this.$backMarkers[y];if(b){var x=b.inFront?this.$frontMarkers:this.$backMarkers;delete x[y],this._signal(b.inFront?"changeFrontMarker":"changeBackMarker")}},p.prototype.getMarkers=function(y){return y?this.$frontMarkers:this.$backMarkers},p.prototype.highlight=function(y){if(!this.$searchHighlight){var b=new t(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(b)}this.$searchHighlight.setRegexp(y)},p.prototype.highlightLines=function(y,b,x,_){typeof b!="number"&&(x=b,b=y),x||(x="ace_step");var g=new h(y,0,b,1/0);return g.id=this.addMarker(g,x,"fullLine",_),g},p.prototype.setAnnotations=function(y){this.$annotations=y,this._signal("changeAnnotation",{})},p.prototype.getAnnotations=function(){return this.$annotations||[]},p.prototype.clearAnnotations=function(){this.setAnnotations([])},p.prototype.$detectNewLine=function(y){var b=y.match(/^.*?(\r?\n)/m);b?this.$autoNewLine=b[1]:this.$autoNewLine=`
`},p.prototype.getWordRange=function(y,b){var x=this.getLine(y),_=!1;if(b>0&&(_=!!x.charAt(b-1).match(this.tokenRe)),_||(_=!!x.charAt(b).match(this.tokenRe)),_)var g=this.tokenRe;else if(/^\s+$/.test(x.slice(b-1,b+1)))var g=/\s/;else var g=this.nonTokenRe;var A=b;if(A>0){do A--;while(A>=0&&x.charAt(A).match(g));A++}for(var M=b;M<x.length&&x.charAt(M).match(g);)M++;return new h(y,A,y,M)},p.prototype.getAWordRange=function(y,b){for(var x=this.getWordRange(y,b),_=this.getLine(x.end.row);_.charAt(x.end.column).match(/[ \t]/);)x.end.column+=1;return x},p.prototype.setNewLineMode=function(y){this.doc.setNewLineMode(y)},p.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},p.prototype.setUseWorker=function(y){this.setOption("useWorker",y)},p.prototype.getUseWorker=function(){return this.$useWorker},p.prototype.onReloadTokenizer=function(y){var b=y.data;this.bgTokenizer.start(b.first),this._signal("tokenizerUpdate",y)},p.prototype.setMode=function(y,b){if(y&&typeof y=="object"){if(y.getTokenizer)return this.$onChangeMode(y);var x=y,_=x.path}else _=y||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new m),this.$modes[_]&&!x){this.$onChangeMode(this.$modes[_]),b&&b();return}this.$modeId=_,T.loadModule(["mode",_],function(g){if(this.$modeId!==_)return b&&b();this.$modes[_]&&!x?this.$onChangeMode(this.$modes[_]):g&&g.Mode&&(g=new g.Mode(x),x||(this.$modes[_]=g,g.$id=_),this.$onChangeMode(g)),b&&b()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},p.prototype.$onChangeMode=function(y,b){if(b||(this.$modeId=y.$id),this.$mode!==y){var x=this.$mode;this.$mode=y,this.$stopWorker(),this.$useWorker&&this.$startWorker();var _=y.getTokenizer();if(_.on!==void 0){var g=this.onReloadTokenizer.bind(this);_.on("update",g)}this.bgTokenizer.setTokenizer(_),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=y.tokenRe,this.nonTokenRe=y.nonTokenRe,b||(y.attachToSession&&y.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(y.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:x,mode:y}))}},p.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},p.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(y){T.warn("Could not load worker",y),this.$worker=null}},p.prototype.getMode=function(){return this.$mode},p.prototype.setScrollTop=function(y){this.$scrollTop===y||isNaN(y)||(this.$scrollTop=y,this._signal("changeScrollTop",y))},p.prototype.getScrollTop=function(){return this.$scrollTop},p.prototype.setScrollLeft=function(y){this.$scrollLeft===y||isNaN(y)||(this.$scrollLeft=y,this._signal("changeScrollLeft",y))},p.prototype.getScrollLeft=function(){return this.$scrollLeft},p.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},p.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var y=0;return this.lineWidgets.forEach(function(b){b&&b.screenWidth>y&&(y=b.screenWidth)}),this.lineWidgetWidth=y},p.prototype.$computeWidth=function(y){if(this.$modified||y){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var b=this.doc.getAllLines(),x=this.$rowLengthCache,_=0,g=0,A=this.$foldData[g],M=A?A.start.row:1/0,L=b.length,E=0;E<L;E++){if(E>M){if(E=A.end.row+1,E>=L)break;A=this.$foldData[g++],M=A?A.start.row:1/0}x[E]==null&&(x[E]=this.$getStringScreenWidth(b[E])[0]),x[E]>_&&(_=x[E])}this.screenWidth=_}},p.prototype.getLine=function(y){return this.doc.getLine(y)},p.prototype.getLines=function(y,b){return this.doc.getLines(y,b)},p.prototype.getLength=function(){return this.doc.getLength()},p.prototype.getTextRange=function(y){return this.doc.getTextRange(y||this.selection.getRange())},p.prototype.insert=function(y,b){return this.doc.insert(y,b)},p.prototype.remove=function(y){return this.doc.remove(y)},p.prototype.removeFullLines=function(y,b){return this.doc.removeFullLines(y,b)},p.prototype.undoChanges=function(y,b){if(y.length){this.$fromUndo=!0;for(var x=y.length-1;x!=-1;x--){var _=y[x];_.action=="insert"||_.action=="remove"?this.doc.revertDelta(_):_.folds&&this.addFolds(_.folds)}!b&&this.$undoSelect&&(y.selectionBefore?this.selection.fromJSON(y.selectionBefore):this.selection.setRange(this.$getUndoSelection(y,!0))),this.$fromUndo=!1}},p.prototype.redoChanges=function(y,b){if(y.length){this.$fromUndo=!0;for(var x=0;x<y.length;x++){var _=y[x];(_.action=="insert"||_.action=="remove")&&this.doc.$safeApplyDelta(_)}!b&&this.$undoSelect&&(y.selectionAfter?this.selection.fromJSON(y.selectionAfter):this.selection.setRange(this.$getUndoSelection(y,!1))),this.$fromUndo=!1}},p.prototype.setUndoSelect=function(y){this.$undoSelect=y},p.prototype.$getUndoSelection=function(y,b){function x(L){return b?L.action!=="insert":L.action==="insert"}for(var _,g,A=0;A<y.length;A++){var M=y[A];if(M.start){if(!_){x(M)?_=h.fromPoints(M.start,M.end):_=h.fromPoints(M.start,M.start);continue}x(M)?(g=M.start,_.compare(g.row,g.column)==-1&&_.setStart(g),g=M.end,_.compare(g.row,g.column)==1&&_.setEnd(g)):(g=M.start,_.compare(g.row,g.column)==-1&&(_=h.fromPoints(M.start,M.start)))}}return _},p.prototype.replace=function(y,b){return this.doc.replace(y,b)},p.prototype.moveText=function(y,b,x){var _=this.getTextRange(y),g=this.getFoldsInRange(y),A=h.fromPoints(b,b);if(!x){this.remove(y);var M=y.start.row-y.end.row,L=M?-y.end.column:y.start.column-y.end.column;L&&(A.start.row==y.end.row&&A.start.column>y.end.column&&(A.start.column+=L),A.end.row==y.end.row&&A.end.column>y.end.column&&(A.end.column+=L)),M&&A.start.row>=y.end.row&&(A.start.row+=M,A.end.row+=M)}if(A.end=this.insert(A.start,_),g.length){var E=y.start,S=A.start,M=S.row-E.row,L=S.column-E.column;this.addFolds(g.map(function(U){return U=U.clone(),U.start.row==E.row&&(U.start.column+=L),U.end.row==E.row&&(U.end.column+=L),U.start.row+=M,U.end.row+=M,U}))}return A},p.prototype.indentRows=function(y,b,x){x=x.replace(/\t/g,this.getTabString());for(var _=y;_<=b;_++)this.doc.insertInLine({row:_,column:0},x)},p.prototype.outdentRows=function(y){for(var b=y.collapseRows(),x=new h(0,0,0,0),_=this.getTabSize(),g=b.start.row;g<=b.end.row;++g){var A=this.getLine(g);x.start.row=g,x.end.row=g;for(var M=0;M<_&&A.charAt(M)==" ";++M);M<_&&A.charAt(M)=="	"?(x.start.column=M,x.end.column=M+1):(x.start.column=0,x.end.column=M),this.remove(x)}},p.prototype.$moveLines=function(y,b,x){if(y=this.getRowFoldStart(y),b=this.getRowFoldEnd(b),x<0){var _=this.getRowFoldStart(y+x);if(_<0)return 0;var g=_-y}else if(x>0){var _=this.getRowFoldEnd(b+x);if(_>this.doc.getLength()-1)return 0;var g=_-b}else{y=this.$clipRowToDocument(y),b=this.$clipRowToDocument(b);var g=b-y+1}var A=new h(y,0,b,Number.MAX_VALUE),M=this.getFoldsInRange(A).map(function(E){return E=E.clone(),E.start.row+=g,E.end.row+=g,E}),L=x==0?this.doc.getLines(y,b):this.doc.removeFullLines(y,b);return this.doc.insertFullLines(y+g,L),M.length&&this.addFolds(M),g},p.prototype.moveLinesUp=function(y,b){return this.$moveLines(y,b,-1)},p.prototype.moveLinesDown=function(y,b){return this.$moveLines(y,b,1)},p.prototype.duplicateLines=function(y,b){return this.$moveLines(y,b,0)},p.prototype.$clipRowToDocument=function(y){return Math.max(0,Math.min(y,this.doc.getLength()-1))},p.prototype.$clipColumnToRow=function(y,b){return b<0?0:Math.min(this.doc.getLine(y).length,b)},p.prototype.$clipPositionToDocument=function(y,b){if(b=Math.max(0,b),y<0)y=0,b=0;else{var x=this.doc.getLength();y>=x?(y=x-1,b=this.doc.getLine(x-1).length):b=Math.min(this.doc.getLine(y).length,b)}return{row:y,column:b}},p.prototype.$clipRangeToDocument=function(y){y.start.row<0?(y.start.row=0,y.start.column=0):y.start.column=this.$clipColumnToRow(y.start.row,y.start.column);var b=this.doc.getLength()-1;return y.end.row>b?(y.end.row=b,y.end.column=this.doc.getLine(b).length):y.end.column=this.$clipColumnToRow(y.end.row,y.end.column),y},p.prototype.setUseWrapMode=function(y){if(y!=this.$useWrapMode){if(this.$useWrapMode=y,this.$modified=!0,this.$resetRowCache(0),y){var b=this.getLength();this.$wrapData=Array(b),this.$updateWrapData(0,b-1)}this._signal("changeWrapMode")}},p.prototype.getUseWrapMode=function(){return this.$useWrapMode},p.prototype.setWrapLimitRange=function(y,b){(this.$wrapLimitRange.min!==y||this.$wrapLimitRange.max!==b)&&(this.$wrapLimitRange={min:y,max:b},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},p.prototype.adjustWrapLimit=function(y,b){var x=this.$wrapLimitRange;x.max<0&&(x={min:b,max:b});var _=this.$constrainWrapLimit(y,x.min,x.max);return _!=this.$wrapLimit&&_>1?(this.$wrapLimit=_,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},p.prototype.$constrainWrapLimit=function(y,b,x){return b&&(y=Math.max(b,y)),x&&(y=Math.min(x,y)),y},p.prototype.getWrapLimit=function(){return this.$wrapLimit},p.prototype.setWrapLimit=function(y){this.setWrapLimitRange(y,y)},p.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},p.prototype.$updateInternalDataOnChange=function(y){var b=this.$useWrapMode,x=y.action,_=y.start,g=y.end,A=_.row,M=g.row,L=M-A,E=null;if(this.$updating=!0,L!=0)if(x==="remove"){this[b?"$wrapData":"$rowLengthCache"].splice(A,L);var S=this.$foldData;E=this.getFoldsInRange(y),this.removeFolds(E);var O=this.getFoldLine(g.row),P=0;if(O){O.addRemoveChars(g.row,g.column,_.column-g.column),O.shiftRow(-L);var U=this.getFoldLine(A);U&&U!==O&&(U.merge(O),O=U),P=S.indexOf(O)+1}for(P;P<S.length;P++){var O=S[P];O.start.row>=g.row&&O.shiftRow(-L)}M=A}else{var R=Array(L);R.unshift(A,0);var j=b?this.$wrapData:this.$rowLengthCache;j.splice.apply(j,R);var S=this.$foldData,O=this.getFoldLine(A),P=0;if(O){var B=O.range.compareInside(_.row,_.column);B==0?(O=O.split(_.row,_.column),O&&(O.shiftRow(L),O.addRemoveChars(M,0,g.column-_.column))):B==-1&&(O.addRemoveChars(A,0,g.column-_.column),O.shiftRow(L)),P=S.indexOf(O)+1}for(P;P<S.length;P++){var O=S[P];O.start.row>=A&&O.shiftRow(L)}}else{L=Math.abs(y.start.column-y.end.column),x==="remove"&&(E=this.getFoldsInRange(y),this.removeFolds(E),L=-L);var O=this.getFoldLine(A);O&&O.addRemoveChars(A,_.column,L)}return b&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,b?this.$updateWrapData(A,M):this.$updateRowLengthCache(A,M),E},p.prototype.$updateRowLengthCache=function(y,b,x){this.$rowLengthCache[y]=null,this.$rowLengthCache[b]=null},p.prototype.$updateWrapData=function(y,b){var x=this.doc.getAllLines(),_=this.getTabSize(),g=this.$wrapData,A=this.$wrapLimit,M,L,E=y;for(b=Math.min(b,x.length-1);E<=b;)L=this.getFoldLine(E,L),L?(M=[],L.walk(function(S,O,P,U){var R;if(S!=null){R=this.$getDisplayTokens(S,M.length),R[0]=c;for(var j=1;j<R.length;j++)R[j]=l}else R=this.$getDisplayTokens(x[O].substring(U,P),M.length);M=M.concat(R)}.bind(this),L.end.row,x[L.end.row].length+1),g[L.start.row]=this.$computeWrapSplits(M,A,_),E=L.end.row+1):(M=this.$getDisplayTokens(x[E]),g[E]=this.$computeWrapSplits(M,A,_),E++)},p.prototype.$computeWrapSplits=function(y,b,x){if(y.length==0)return[];var _=[],g=y.length,A=0,M=0,L=this.$wrapAsCode,E=this.$indentedSoftWrap,S=b<=Math.max(2*x,8)||E===!1?0:Math.floor(b/2);function O(){var B=0;if(S===0)return B;if(E)for(var z=0;z<y.length;z++){var G=y[z];if(G==f)B+=1;else if(G==d)B+=x;else{if(G==w)continue;break}}return L&&E!==!1&&(B+=x),Math.min(B,S)}function P(B){for(var z=B-A,G=A;G<B;G++){var V=y[G];(V===12||V===2)&&(z-=1)}_.length||(U=O(),_.indent=U),M+=z,_.push(M),A=B}for(var U=0;g-A>b-U;){var R=A+b-U;if(y[R-1]>=f&&y[R]>=f){P(R);continue}if(y[R]==c||y[R]==l){for(R;R!=A-1&&y[R]!=c;R--);if(R>A){P(R);continue}for(R=A+b,R;R<y.length&&y[R]==l;R++);if(R==y.length)break;P(R);continue}for(var j=Math.max(R-(b-(b>>2)),A-1);R>j&&y[R]<c;)R--;if(L){for(;R>j&&y[R]<c;)R--;for(;R>j&&y[R]==u;)R--}else for(;R>j&&y[R]<f;)R--;if(R>j){P(++R);continue}R=A+b,y[R]==i&&R--,P(R-U)}return _},p.prototype.$getDisplayTokens=function(y,b){var x=[],_;b=b||0;for(var g=0;g<y.length;g++){var A=y.charCodeAt(g);if(A==9){_=this.getScreenTabSize(x.length+b),x.push(d);for(var M=1;M<_;M++)x.push(w)}else A==32?x.push(f):A>39&&A<48||A>57&&A<64?x.push(u):A>=4352&&v(A)?x.push(a,i):x.push(a)}return x},p.prototype.$getStringScreenWidth=function(y,b,x){if(b==0)return[0,0];b==null&&(b=1/0),x=x||0;var _,g;for(g=0;g<y.length&&(_=y.charCodeAt(g),_==9?x+=this.getScreenTabSize(x):_>=4352&&v(_)?x+=2:x+=1,!(x>b));g++);return[x,g]},p.prototype.getRowLength=function(y){var b=1;return this.lineWidgets&&(b+=this.lineWidgets[y]&&this.lineWidgets[y].rowCount||0),!this.$useWrapMode||!this.$wrapData[y]?b:this.$wrapData[y].length+b},p.prototype.getRowLineCount=function(y){return!this.$useWrapMode||!this.$wrapData[y]?1:this.$wrapData[y].length+1},p.prototype.getRowWrapIndent=function(y){if(this.$useWrapMode){var b=this.screenToDocumentPosition(y,Number.MAX_VALUE),x=this.$wrapData[b.row];return x.length&&x[0]<b.column?x.indent:0}else return 0},p.prototype.getScreenLastRowColumn=function(y){var b=this.screenToDocumentPosition(y,Number.MAX_VALUE);return this.documentToScreenColumn(b.row,b.column)},p.prototype.getDocumentLastRowColumn=function(y,b){var x=this.documentToScreenRow(y,b);return this.getScreenLastRowColumn(x)},p.prototype.getDocumentLastRowColumnPosition=function(y,b){var x=this.documentToScreenRow(y,b);return this.screenToDocumentPosition(x,Number.MAX_VALUE/10)},p.prototype.getRowSplitData=function(y){if(this.$useWrapMode)return this.$wrapData[y]},p.prototype.getScreenTabSize=function(y){return this.$tabSize-(y%this.$tabSize|0)},p.prototype.screenToDocumentRow=function(y,b){return this.screenToDocumentPosition(y,b).row},p.prototype.screenToDocumentColumn=function(y,b){return this.screenToDocumentPosition(y,b).column},p.prototype.screenToDocumentPosition=function(y,b,x){if(y<0)return{row:0,column:0};var _,P=0,g=0,A,O=0,M=0,L=this.$screenRowCache,E=this.$getRowCacheIndex(L,y),S=L.length;if(S&&E>=0)var O=L[E],P=this.$docRowCache[E],U=y>L[S-1];else var U=!S;for(var R=this.getLength()-1,j=this.getNextFoldLine(P),B=j?j.start.row:1/0;O<=y&&(M=this.getRowLength(P),!(O+M>y||P>=R));)O+=M,P++,P>B&&(P=j.end.row+1,j=this.getNextFoldLine(P,j),B=j?j.start.row:1/0),U&&(this.$docRowCache.push(P),this.$screenRowCache.push(O));if(j&&j.start.row<=P)_=this.getFoldDisplayLine(j),P=j.start.row;else{if(O+M<=y||P>R)return{row:R,column:this.getLine(R).length};_=this.getLine(P),j=null}var z=0,G=Math.floor(y-O);if(this.$useWrapMode){var V=this.$wrapData[P];V&&(A=V[G],G>0&&V.length&&(z=V.indent,g=V[G-1]||V[V.length-1],_=_.substring(g)))}return x!==void 0&&this.$bidiHandler.isBidiRow(O+G,P,G)&&(b=this.$bidiHandler.offsetToCol(x)),g+=this.$getStringScreenWidth(_,b-z)[1],this.$useWrapMode&&g>=A&&(g=A-1),j?j.idxToPosition(g):{row:P,column:g}},p.prototype.documentToScreenPosition=function(y,b){if(typeof b>"u")var x=this.$clipPositionToDocument(y.row,y.column);else x=this.$clipPositionToDocument(y,b);y=x.row,b=x.column;var O=0,_=null,g=null;g=this.getFoldAt(y,b,1),g&&(y=g.start.row,b=g.start.column);var A,S=0,M=this.$docRowCache,L=this.$getRowCacheIndex(M,y),E=M.length;if(E&&L>=0)var S=M[L],O=this.$screenRowCache[L],P=y>M[E-1];else var P=!E;for(var U=this.getNextFoldLine(S),R=U?U.start.row:1/0;S<y;){if(S>=R){if(A=U.end.row+1,A>y)break;U=this.getNextFoldLine(A,U),R=U?U.start.row:1/0}else A=S+1;O+=this.getRowLength(S),S=A,P&&(this.$docRowCache.push(S),this.$screenRowCache.push(O))}var j="";U&&S>=R?(j=this.getFoldDisplayLine(U,y,b),_=U.start.row):(j=this.getLine(y).substring(0,b),_=y);var B=0;if(this.$useWrapMode){var z=this.$wrapData[_];if(z){for(var G=0;j.length>=z[G];)O++,G++;j=j.substring(z[G-1]||0,j.length),B=G>0?z.indent:0}}return this.lineWidgets&&this.lineWidgets[S]&&this.lineWidgets[S].rowsAbove&&(O+=this.lineWidgets[S].rowsAbove),{row:O,column:B+this.$getStringScreenWidth(j)[0]}},p.prototype.documentToScreenColumn=function(y,b){return this.documentToScreenPosition(y,b).column},p.prototype.documentToScreenRow=function(y,b){return this.documentToScreenPosition(y,b).row},p.prototype.getScreenLength=function(){var y=0,b=null;if(this.$useWrapMode)for(var x=this.$wrapData.length,_=0,g=0,b=this.$foldData[g++],A=b?b.start.row:1/0;_<x;){var M=this.$wrapData[_];y+=M?M.length+1:1,_++,_>A&&(_=b.end.row+1,b=this.$foldData[g++],A=b?b.start.row:1/0)}else{y=this.getLength();for(var L=this.$foldData,g=0;g<L.length;g++)b=L[g],y-=b.end.row-b.start.row}return this.lineWidgets&&(y+=this.$getWidgetScreenLength()),y},p.prototype.$setFontMetrics=function(y){this.$enableVarChar&&(this.$getStringScreenWidth=function(b,x,_){if(x===0)return[0,0];x||(x=1/0),_=_||0;var g,A;for(A=0;A<b.length&&(g=b.charAt(A),g==="	"?_+=this.getScreenTabSize(_):_+=y.getCharacterWidth(g),!(_>x));A++);return[_,A]})},p.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},p}();n.$uid=0,n.prototype.$modes=T.$modes,n.prototype.getValue=n.prototype.toString,n.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},n.prototype.$overwrite=!1,n.prototype.$mode=null,n.prototype.$modeId=null,n.prototype.$scrollTop=0,n.prototype.$scrollLeft=0,n.prototype.$wrapLimit=80,n.prototype.$useWrapMode=!1,n.prototype.$wrapLimitRange={min:null,max:null},n.prototype.lineWidgets=null,n.prototype.isFullWidth=v,W.implement(n.prototype,k);var a=1,i=2,c=3,l=4,u=9,f=10,d=11,w=12;function v(p){return p<4352?!1:p>=4352&&p<=4447||p>=4515&&p<=4519||p>=4602&&p<=4607||p>=9001&&p<=9002||p>=11904&&p<=11929||p>=11931&&p<=12019||p>=12032&&p<=12245||p>=12272&&p<=12283||p>=12288&&p<=12350||p>=12353&&p<=12438||p>=12441&&p<=12543||p>=12549&&p<=12589||p>=12593&&p<=12686||p>=12688&&p<=12730||p>=12736&&p<=12771||p>=12784&&p<=12830||p>=12832&&p<=12871||p>=12880&&p<=13054||p>=13056&&p<=19903||p>=19968&&p<=42124||p>=42128&&p<=42182||p>=43360&&p<=43388||p>=44032&&p<=55203||p>=55216&&p<=55238||p>=55243&&p<=55291||p>=63744&&p<=64255||p>=65040&&p<=65049||p>=65072&&p<=65106||p>=65108&&p<=65126||p>=65128&&p<=65131||p>=65281&&p<=65376||p>=65504&&p<=65510}ze("./edit_session/folding").Folding.call(n.prototype),ze("./edit_session/bracket_match").BracketMatch.call(n.prototype),T.defineOptions(n.prototype,"session",{wrap:{set:function(p){if(!p||p=="off"?p=!1:p=="free"?p=!0:p=="printMargin"?p=-1:typeof p=="string"&&(p=parseInt(p,10)||!1),this.$wrap!=p)if(this.$wrap=p,!p)this.setUseWrapMode(!1);else{var y=typeof p=="number"?p:null;this.setWrapLimitRange(y,y),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(p){p=p=="auto"?this.$mode.type!="text":p!="text",p!=this.$wrapAsCode&&(this.$wrapAsCode=p,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(p){this.$useWorker=p,this.$stopWorker(),p&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(p){p=parseInt(p),p>0&&this.$tabSize!==p&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=p,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(p){this.setFoldStyle(p)},handlesSet:!0},overwrite:{set:function(p){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(p){this.doc.setNewLineMode(p)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(p){this.setMode(p)},get:function(){return this.$modeId},handlesSet:!0}}),Re.EditSession=n}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(ze,Re,jr){var W=ze("./lib/lang"),I=ze("./lib/oop"),o=ze("./range").Range,T=function(){function r(){this.$options={}}return r.prototype.set=function(m){return I.mixin(this.$options,m),this},r.prototype.getOptions=function(){return W.copyObject(this.$options)},r.prototype.setOptions=function(m){this.$options=m},r.prototype.find=function(m){var h=this.$options,s=this.$matchIterator(m,h);if(!s)return!1;var e=null;return s.forEach(function(t,n,a,i){return e=new o(t,n,a,i),n==i&&h.start&&h.start.start&&h.skipCurrent!=!1&&e.isEqual(h.start)?(e=null,!1):!0}),e},r.prototype.findAll=function(m){var h=this.$options;if(!h.needle)return[];this.$assembleRegExp(h);var s=h.range,e=s?m.getLines(s.start.row,s.end.row):m.doc.getAllLines(),t=[],n=h.re;if(h.$isMultiLine){var a=n.length,i=e.length-a,c;t:for(var l=n.offset||0;l<=i;l++){for(var u=0;u<a;u++)if(e[l+u].search(n[u])==-1)continue t;var f=e[l],d=e[l+a-1],w=f.length-f.match(n[0])[0].length,v=d.match(n[a-1])[0].length;c&&c.end.row===l&&c.end.column>w||(t.push(c=new o(l,w,l+a-1,v)),a>2&&(l=l+a-2))}}else for(var p=0;p<e.length;p++)for(var y=W.getMatchOffsets(e[p],n),u=0;u<y.length;u++){var b=y[u];t.push(new o(p,b.offset,p,b.offset+b.length))}if(s){for(var x=s.start.column,_=s.end.column,p=0,u=t.length-1;p<u&&t[p].start.column<x&&t[p].start.row==0;)p++;for(var g=s.end.row-s.start.row;p<u&&t[u].end.column>_&&t[u].end.row==g;)u--;for(t=t.slice(p,u+1),p=0,u=t.length;p<u;p++)t[p].start.row+=s.start.row,t[p].end.row+=s.start.row}return t},r.prototype.replace=function(m,h){var s=this.$options,e=this.$assembleRegExp(s);if(s.$isMultiLine)return h;if(e){var t=e.exec(m);if(!t||t[0].length!=m.length)return null;if(h=m.replace(e,h),s.preserveCase){h=h.split("");for(var n=Math.min(m.length,m.length);n--;){var a=m[n];a&&a.toLowerCase()!=a?h[n]=h[n].toUpperCase():h[n]=h[n].toLowerCase()}h=h.join("")}return h}},r.prototype.$assembleRegExp=function(m,h){if(m.needle instanceof RegExp)return m.re=m.needle;var s=m.needle;if(!m.needle)return m.re=!1;m.$supportsUnicodeFlag===void 0&&(m.$supportsUnicodeFlag=W.supportsUnicodeFlag());try{new RegExp(s,"u")}catch{m.$supportsUnicodeFlag=!1}m.regExp||(s=W.escapeRegExp(s)),m.wholeWord&&(s=k(s,m));var e=m.caseSensitive?"gm":"gmi";if(m.$supportsUnicodeFlag&&(e+="u"),m.$isMultiLine=!h&&/[\n\r]/.test(s),m.$isMultiLine)return m.re=this.$assembleMultilineRegExp(s,e);try{var t=new RegExp(s,e)}catch{t=!1}return m.re=t},r.prototype.$assembleMultilineRegExp=function(m,h){for(var s=m.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),e=[],t=0;t<s.length;t++)try{e.push(new RegExp(s[t],h))}catch{return!1}return e},r.prototype.$matchIterator=function(m,h){var s=this.$assembleRegExp(h);if(!s)return!1;var e=h.backwards==!0,t=h.skipCurrent!=!1,n=h.range,a=h.start;a||(a=n?n[e?"end":"start"]:m.selection.getRange()),a.start&&(a=a[t!=e?"end":"start"]);var i=n?n.start.row:0,c=n?n.end.row:m.getLength()-1;if(e)var l=function(d){var w=a.row;if(!f(w,a.column,d)){for(w--;w>=i;w--)if(f(w,Number.MAX_VALUE,d))return;if(h.wrap!=!1){for(w=c,i=a.row;w>=i;w--)if(f(w,Number.MAX_VALUE,d))return}}};else var l=function(d){var w=a.row;if(!f(w,a.column,d)){for(w=w+1;w<=c;w++)if(f(w,0,d))return;if(h.wrap!=!1){for(w=i,c=a.row;w<=c;w++)if(f(w,0,d))return}}};if(h.$isMultiLine)var u=s.length,f=function(d,w,v){var p=e?d-u+1:d;if(!(p<0||p+u>m.getLength())){var y=m.getLine(p),b=y.search(s[0]);if(!(!e&&b<w||b===-1)){for(var x=1;x<u;x++)if(y=m.getLine(p+x),y.search(s[x])==-1)return;var _=y.match(s[u-1])[0].length;if(!(e&&_>w)&&v(p,b,p+u-1,_))return!0}}};else if(e)var f=function(d,w,v){var p=m.getLine(d),y=[],b,x=0;for(s.lastIndex=0;b=s.exec(p);){var _=b[0].length;if(x=b.index,!_){if(x>=p.length)break;s.lastIndex=x+=1}if(b.index+_>w)break;y.push(b.index,_)}for(var g=y.length-1;g>=0;g-=2){var A=y[g-1],_=y[g];if(v(d,A,d,A+_))return!0}};else var f=function(d,w,v){var p=m.getLine(d),y,b;for(s.lastIndex=w;b=s.exec(p);){var x=b[0].length;if(y=b.index,v(d,y,d,y+x))return!0;if(!x&&(s.lastIndex=y+=1,y>=p.length))return!1}};return{forEach:l}},r}();function k(r,m){var h=W.supportsLookbehind();function s(a,i){i===void 0&&(i=!0);var c=h&&m.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return c.test(a)||m.regExp?h&&m.$supportsUnicodeFlag?i?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var e=Array.from(r),t=e[0],n=e[e.length-1];return s(t)+r+s(n,!1)}Re.Search=T}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(ze,Re,jr){var W=this&&this.__extends||function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");h(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),I=ze("../lib/keys"),o=ze("../lib/useragent"),T=I.KEY_MODS,k=function(){function h(s,e){this.$init(s,e,!1)}return h.prototype.$init=function(s,e,t){this.platform=e||(o.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(s),this.$singleCommand=t},h.prototype.addCommand=function(s){this.commands[s.name]&&this.removeCommand(s),this.commands[s.name]=s,s.bindKey&&this._buildKeyHash(s)},h.prototype.removeCommand=function(s,e){var t=s&&(typeof s=="string"?s:s.name);s=this.commands[t],e||delete this.commands[t];var n=this.commandKeyBinding;for(var a in n){var i=n[a];if(i==s)delete n[a];else if(Array.isArray(i)){var c=i.indexOf(s);c!=-1&&(i.splice(c,1),i.length==1&&(n[a]=i[0]))}}},h.prototype.bindKey=function(s,e,t){if(typeof s=="object"&&s&&(t==null&&(t=s.position),s=s[this.platform]),!!s){if(typeof e=="function")return this.addCommand({exec:e,bindKey:s,name:e.name||s});s.split("|").forEach(function(n){var a="";if(n.indexOf(" ")!=-1){var i=n.split(/\s+/);n=i.pop(),i.forEach(function(u){var f=this.parseKeys(u),d=T[f.hashId]+f.key;a+=(a?" ":"")+d,this._addCommandToBinding(a,"chainKeys")},this),a+=" "}var c=this.parseKeys(n),l=T[c.hashId]+c.key;this._addCommandToBinding(a+l,e,t)},this)}},h.prototype._addCommandToBinding=function(s,e,t){var n=this.commandKeyBinding,a;if(!e)delete n[s];else if(!n[s]||this.$singleCommand)n[s]=e;else{Array.isArray(n[s])?(a=n[s].indexOf(e))!=-1&&n[s].splice(a,1):n[s]=[n[s]],typeof t!="number"&&(t=r(e));var i=n[s];for(a=0;a<i.length;a++){var c=i[a],l=r(c);if(l>t)break}i.splice(a,0,e)}},h.prototype.addCommands=function(s){s&&Object.keys(s).forEach(function(e){var t=s[e];if(t){if(typeof t=="string")return this.bindKey(t,e);typeof t=="function"&&(t={exec:t}),typeof t=="object"&&(t.name||(t.name=e),this.addCommand(t))}},this)},h.prototype.removeCommands=function(s){Object.keys(s).forEach(function(e){this.removeCommand(s[e])},this)},h.prototype.bindKeys=function(s){Object.keys(s).forEach(function(e){this.bindKey(e,s[e])},this)},h.prototype._buildKeyHash=function(s){this.bindKey(s.bindKey,s)},h.prototype.parseKeys=function(s){var e=s.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(l){return l}),t=e.pop(),n=I[t];if(I.FUNCTION_KEYS[n])t=I.FUNCTION_KEYS[n].toLowerCase();else if(e.length){if(e.length==1&&e[0]=="shift")return{key:t.toUpperCase(),hashId:-1}}else return{key:t,hashId:-1};for(var a=0,i=e.length;i--;){var c=I.KEY_MODS[e[i]];if(c==null)return typeof console<"u"&&console.error("invalid modifier "+e[i]+" in "+s),!1;a|=c}return{key:t,hashId:a}},h.prototype.findKeyCommand=function(s,e){var t=T[s]+e;return this.commandKeyBinding[t]},h.prototype.handleKeyboard=function(s,e,t,n){if(!(n<0)){var a=T[e]+t,i=this.commandKeyBinding[a];return s.$keyChain&&(s.$keyChain+=" "+a,i=this.commandKeyBinding[s.$keyChain]||i),i&&(i=="chainKeys"||i[i.length-1]=="chainKeys")?(s.$keyChain=s.$keyChain||a,{command:"null"}):(s.$keyChain&&((!e||e==4)&&t.length==1?s.$keyChain=s.$keyChain.slice(0,-a.length-1):(e==-1||n>0)&&(s.$keyChain="")),{command:i})}},h.prototype.getStatusText=function(s,e){return e.$keyChain||""},h}();function r(h){return typeof h=="object"&&h.bindKey&&h.bindKey.position||(h.isDefault?-100:0)}var m=function(h){W(s,h);function s(e,t){var n=h.call(this,e,t)||this;return n.$singleCommand=!0,n}return s}(k);m.call=function(h,s,e){k.prototype.$init.call(h,s,e,!0)},k.call=function(h,s,e){k.prototype.$init.call(h,s,e,!1)},Re.HashHandler=m,Re.MultiHashHandler=k}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(ze,Re,jr){var W=this&&this.__extends||function(){var r=function(m,h){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,e){s.__proto__=e}||function(s,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])},r(m,h)};return function(m,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");r(m,h);function s(){this.constructor=m}m.prototype=h===null?Object.create(h):(s.prototype=h.prototype,new s)}}(),I=ze("../lib/oop"),o=ze("../keyboard/hash_handler").MultiHashHandler,T=ze("../lib/event_emitter").EventEmitter,k=function(r){W(m,r);function m(h,s){var e=r.call(this,s,h)||this;return e.byName=e.commands,e.setDefaultHandler("exec",function(t){return t.args?t.command.exec(t.editor,t.args,t.event,!1):t.command.exec(t.editor,{},t.event,!0)}),e}return m.prototype.exec=function(h,s,e){if(Array.isArray(h)){for(var t=h.length;t--;)if(this.exec(h[t],s,e))return!0;return!1}if(typeof h=="string"&&(h=this.commands[h]),!h||s&&s.$readOnly&&!h.readOnly||this.$checkCommandState!=!1&&h.isAvailable&&!h.isAvailable(s))return!1;var n={editor:s,command:h,args:e};return n.returnValue=this._emit("exec",n),this._signal("afterExec",n),n.returnValue!==!1},m.prototype.toggleRecording=function(h){if(!this.$inReplay)return h&&h._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(s){this.macro.push([s.command,s.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},m.prototype.replay=function(h){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(h);try{this.$inReplay=!0,this.macro.forEach(function(s){typeof s=="string"?this.exec(s,h):this.exec(s[0],h,s[1])},this)}finally{this.$inReplay=!1}}},m.prototype.trimMacro=function(h){return h.map(function(s){return typeof s[0]!="string"&&(s[0]=s[0].name),s[1]||(s=s[0]),s})},m}(o);I.implement(k.prototype,T),Re.CommandManager=k}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(ze,Re,jr){var W=ze("../lib/lang"),I=ze("../config"),o=ze("../range").Range;function T(r,m){return{win:r,mac:m}}Re.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:T("Ctrl-,","Command-,"),exec:function(r){I.loadModule("ace/ext/settings_menu",function(m){m.init(r),r.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:T("Alt-E","F4"),exec:function(r){I.loadModule("ace/ext/error_marker",function(m){m.showErrorMarker(r,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:T("Alt-Shift-E","Shift-F4"),exec:function(r){I.loadModule("ace/ext/error_marker",function(m){m.showErrorMarker(r,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:T("Ctrl-A","Command-A"),exec:function(r){r.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:T(null,"Ctrl-L"),exec:function(r){r.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:T("Ctrl-L","Command-L"),exec:function(r,m){typeof m=="number"&&!isNaN(m)&&r.gotoLine(m),r.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:T("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(r){r.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:T("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(r){r.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:T("F2","F2"),exec:function(r){r.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:T("Alt-F2","Alt-F2"),exec:function(r){r.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:T(null,"Ctrl-Command-Option-0"),exec:function(r){r.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:T(null,"Ctrl-Command-Option-0"),exec:function(r){r.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:T("Alt-0","Command-Option-0"),exec:function(r){r.session.foldAll(),r.session.unfold(r.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:T("Alt-Shift-0","Command-Option-Shift-0"),exec:function(r){r.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:T("Ctrl-K","Command-G"),exec:function(r){r.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:T("Ctrl-Shift-K","Command-Shift-G"),exec:function(r){r.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:T("Alt-K","Ctrl-G"),exec:function(r){r.selection.isEmpty()?r.selection.selectWord():r.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:T("Alt-Shift-K","Ctrl-Shift-G"),exec:function(r){r.selection.isEmpty()?r.selection.selectWord():r.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:T("Ctrl-F","Command-F"),exec:function(r){I.loadModule("ace/ext/searchbox",function(m){m.Search(r)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(r){r.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:T("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(r){r.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:T("Ctrl-Home","Command-Home|Command-Up"),exec:function(r){r.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:T("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(r){r.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:T("Up","Up|Ctrl-P"),exec:function(r,m){r.navigateUp(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:T("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(r){r.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:T("Ctrl-End","Command-End|Command-Down"),exec:function(r){r.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:T("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(r){r.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:T("Down","Down|Ctrl-N"),exec:function(r,m){r.navigateDown(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:T("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(r){r.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:T("Ctrl-Left","Option-Left"),exec:function(r){r.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:T("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(r){r.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:T("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(r){r.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:T("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(r){r.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:T("Left","Left|Ctrl-B"),exec:function(r,m){r.navigateLeft(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:T("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(r){r.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:T("Ctrl-Right","Option-Right"),exec:function(r){r.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:T("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(r){r.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:T("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(r){r.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:T("Shift-Right","Shift-Right"),exec:function(r){r.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:T("Right","Right|Ctrl-F"),exec:function(r,m){r.navigateRight(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(r){r.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:T(null,"Option-PageDown"),exec:function(r){r.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:T("PageDown","PageDown|Ctrl-V"),exec:function(r){r.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(r){r.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:T(null,"Option-PageUp"),exec:function(r){r.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(r){r.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:T("Ctrl-Up",null),exec:function(r){r.renderer.scrollBy(0,-2*r.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:T("Ctrl-Down",null),exec:function(r){r.renderer.scrollBy(0,2*r.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(r){r.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(r){r.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:T("Ctrl-Alt-E","Command-Option-E"),exec:function(r){r.commands.toggleRecording(r)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:T("Ctrl-Shift-E","Command-Shift-E"),exec:function(r){r.commands.replay(r)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:T("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(r){r.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:T("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(r){r.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:T("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(r){r.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:T(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(r){},readOnly:!0},{name:"cut",description:"Cut",exec:function(r){var m=r.$copyWithEmptySelection&&r.selection.isEmpty(),h=m?r.selection.getLineRange():r.selection.getRange();r._emit("cut",h),h.isEmpty()||r.session.remove(h),r.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(r,m){r.$handlePaste(m)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:T("Ctrl-D","Command-D"),exec:function(r){r.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:T("Ctrl-Shift-D","Command-Shift-D"),exec:function(r){r.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:T("Ctrl-Alt-S","Command-Alt-S"),exec:function(r){r.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:T("Ctrl-/","Command-/"),exec:function(r){r.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:T("Ctrl-Shift-/","Command-Shift-/"),exec:function(r){r.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:T("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(r){r.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:T("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(r){r.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:T("Ctrl-H","Command-Option-F"),exec:function(r){I.loadModule("ace/ext/searchbox",function(m){m.Search(r,!0)})}},{name:"undo",description:"Undo",bindKey:T("Ctrl-Z","Command-Z"),exec:function(r){r.undo()}},{name:"redo",description:"Redo",bindKey:T("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(r){r.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:T("Alt-Shift-Up","Command-Option-Up"),exec:function(r){r.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:T("Alt-Up","Option-Up"),exec:function(r){r.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:T("Alt-Shift-Down","Command-Option-Down"),exec:function(r){r.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:T("Alt-Down","Option-Down"),exec:function(r){r.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:T("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(r){r.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:T("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(r){r.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:T("Shift-Delete",null),exec:function(r){if(r.selection.isEmpty())r.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:T("Alt-Backspace","Command-Backspace"),exec:function(r){r.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:T("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(r){r.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:T("Ctrl-Shift-Backspace",null),exec:function(r){var m=r.selection.getRange();m.start.column=0,r.session.remove(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:T("Ctrl-Shift-Delete",null),exec:function(r){var m=r.selection.getRange();m.end.column=Number.MAX_VALUE,r.session.remove(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:T("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(r){r.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:T("Ctrl-Delete","Alt-Delete"),exec:function(r){r.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:T("Shift-Tab","Shift-Tab"),exec:function(r){r.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:T("Tab","Tab"),exec:function(r){r.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:T("Ctrl-[","Ctrl-["),exec:function(r){r.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:T("Ctrl-]","Ctrl-]"),exec:function(r){r.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(r,m){r.insert(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(r,m){r.insert(W.stringRepeat(m.text||"",m.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:T(null,"Ctrl-O"),exec:function(r){r.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:T("Alt-Shift-X","Ctrl-T"),exec:function(r){r.transposeLetters()},multiSelectAction:function(r){r.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:T("Ctrl-U","Ctrl-U"),exec:function(r){r.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:T("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(r){r.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:T(null,null),exec:function(r){r.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:T("Ctrl-Shift-L","Command-Shift-L"),exec:function(r){var m=r.selection.getRange();m.start.column=m.end.column=0,m.end.row++,r.selection.setRange(m,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:T("Ctrl+F3","F3"),exec:function(r){r.openLink()}},{name:"joinlines",description:"Join lines",bindKey:T(null,null),exec:function(r){for(var m=r.selection.isBackwards(),h=m?r.selection.getSelectionLead():r.selection.getSelectionAnchor(),s=m?r.selection.getSelectionAnchor():r.selection.getSelectionLead(),e=r.session.doc.getLine(h.row).length,t=r.session.doc.getTextRange(r.selection.getRange()),n=t.replace(/\n\s*/," ").length,a=r.session.doc.getLine(h.row),i=h.row+1;i<=s.row+1;i++){var c=W.stringTrimLeft(W.stringTrimRight(r.session.doc.getLine(i)));c.length!==0&&(c=" "+c),a+=c}s.row+1<r.session.doc.getLength()-1&&(a+=r.session.doc.getNewLineCharacter()),r.clearSelection(),r.session.doc.replace(new o(h.row,0,s.row+2,0),a),n>0?(r.selection.moveCursorTo(h.row,h.column),r.selection.selectTo(h.row,h.column+n)):(e=r.session.doc.getLine(h.row).length>e?e+1:e,r.selection.moveCursorTo(h.row,e))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:T(null,null),exec:function(r){var m=r.session.doc.getLength()-1,h=r.session.doc.getLine(m).length,s=r.selection.rangeList.ranges,e=[];s.length<1&&(s=[r.selection.getRange()]);for(var t=0;t<s.length;t++)t==s.length-1&&(s[t].end.row===m&&s[t].end.column===h||e.push(new o(s[t].end.row,s[t].end.column,m,h))),t===0?s[t].start.row===0&&s[t].start.column===0||e.push(new o(0,0,s[t].start.row,s[t].start.column)):e.push(new o(s[t-1].end.row,s[t-1].end.column,s[t].start.row,s[t].start.column));r.exitMultiSelectMode(),r.clearSelection();for(var t=0;t<e.length;t++)r.selection.addRange(e[t],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(r){r.selection.clearSelection(),r.navigateLineEnd(),r.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(r){r.selection.clearSelection();var m=r.getCursorPosition();r.selection.moveTo(m.row-1,Number.MAX_VALUE),r.insert(`
`),m.row===0&&r.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command palette",bindKey:T("F1","F1"),exec:function(r){r.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:T(null,null),exec:function(r){r.prompt({$type:"modes"})},readOnly:!0}];for(var k=1;k<9;k++)Re.commands.push({name:"foldToLevel"+k,description:"Fold To Level "+k,level:k,exec:function(r){r.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(ze,Re,jr){var W=ze("./lib/dom"),I=function(){function o(T){this.session=T,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return o.prototype.getRowLength=function(T){var k;return this.lineWidgets?k=this.lineWidgets[T]&&this.lineWidgets[T].rowCount||0:k=0,!this.$useWrapMode||!this.$wrapData[T]?1+k:this.$wrapData[T].length+1+k},o.prototype.$getWidgetScreenLength=function(){var T=0;return this.lineWidgets.forEach(function(k){k&&k.rowCount&&!k.hidden&&(T+=k.rowCount)}),T},o.prototype.$onChangeEditor=function(T){this.attach(T.editor)},o.prototype.attach=function(T){T&&T.widgetManager&&T.widgetManager!=this&&T.widgetManager.detach(),this.editor!=T&&(this.detach(),this.editor=T,T&&(T.widgetManager=this,T.renderer.on("beforeRender",this.measureWidgets),T.renderer.on("afterRender",this.renderWidgets)))},o.prototype.detach=function(T){var k=this.editor;if(k){this.editor=null,k.widgetManager=null,k.renderer.off("beforeRender",this.measureWidgets),k.renderer.off("afterRender",this.renderWidgets);var r=this.session.lineWidgets;r&&r.forEach(function(m){m&&m.el&&m.el.parentNode&&(m._inDocument=!1,m.el.parentNode.removeChild(m.el))})}},o.prototype.updateOnFold=function(T,k){var r=k.lineWidgets;if(!(!r||!T.action)){for(var m=T.data,h=m.start.row,s=m.end.row,e=T.action=="add",t=h+1;t<s;t++)r[t]&&(r[t].hidden=e);r[s]&&(e?r[h]?r[s].hidden=e:r[h]=r[s]:(r[h]==r[s]&&(r[h]=void 0),r[s].hidden=e))}},o.prototype.updateOnChange=function(T){var k=this.session.lineWidgets;if(k){var r=T.start.row,m=T.end.row-r;if(m!==0)if(T.action=="remove"){var h=k.splice(r+1,m);!k[r]&&h[h.length-1]&&(k[r]=h.pop()),h.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var s=new Array(m);k[r]&&k[r].column!=null&&T.start.column>k[r].column&&r++,s.unshift(r,0),k.splice.apply(k,s),this.$updateRows()}}},o.prototype.$updateRows=function(){var T=this.session.lineWidgets;if(T){var k=!0;T.forEach(function(r,m){if(r)for(k=!1,r.row=m;r.$oldWidget;)r.$oldWidget.row=m,r=r.$oldWidget}),k&&(this.session.lineWidgets=null)}},o.prototype.$registerLineWidget=function(T){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var k=this.session.lineWidgets[T.row];return k&&(T.$oldWidget=k,k.el&&k.el.parentNode&&(k.el.parentNode.removeChild(k.el),k._inDocument=!1)),this.session.lineWidgets[T.row]=T,T},o.prototype.addLineWidget=function(T){if(this.$registerLineWidget(T),T.session=this.session,!this.editor)return T;var k=this.editor.renderer;T.html&&!T.el&&(T.el=W.createElement("div"),T.el.innerHTML=T.html),T.text&&!T.el&&(T.el=W.createElement("div"),T.el.textContent=T.text),T.el&&(W.addCssClass(T.el,"ace_lineWidgetContainer"),T.className&&W.addCssClass(T.el,T.className),T.el.style.position="absolute",T.el.style.zIndex=5,k.container.appendChild(T.el),T._inDocument=!0,T.coverGutter||(T.el.style.zIndex=3),T.pixelHeight==null&&(T.pixelHeight=T.el.offsetHeight)),T.rowCount==null&&(T.rowCount=T.pixelHeight/k.layerConfig.lineHeight);var r=this.session.getFoldAt(T.row,0);if(T.$fold=r,r){var m=this.session.lineWidgets;T.row==r.end.row&&!m[r.start.row]?m[r.start.row]=T:T.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:T.row}}}),this.$updateRows(),this.renderWidgets(null,k),this.onWidgetChanged(T),T},o.prototype.removeLineWidget=function(T){if(T._inDocument=!1,T.session=null,T.el&&T.el.parentNode&&T.el.parentNode.removeChild(T.el),T.editor&&T.editor.destroy)try{T.editor.destroy()}catch{}if(this.session.lineWidgets){var k=this.session.lineWidgets[T.row];if(k==T)this.session.lineWidgets[T.row]=T.$oldWidget,T.$oldWidget&&this.onWidgetChanged(T.$oldWidget);else for(;k;){if(k.$oldWidget==T){k.$oldWidget=T.$oldWidget;break}k=k.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:T.row}}}),this.$updateRows()},o.prototype.getWidgetsAtRow=function(T){for(var k=this.session.lineWidgets,r=k&&k[T],m=[];r;)m.push(r),r=r.$oldWidget;return m},o.prototype.onWidgetChanged=function(T){this.session._changedWidgets.push(T),this.editor&&this.editor.renderer.updateFull()},o.prototype.measureWidgets=function(T,k){var r=this.session._changedWidgets,m=k.layerConfig;if(!(!r||!r.length)){for(var h=1/0,s=0;s<r.length;s++){var e=r[s];if(!(!e||!e.el)&&e.session==this.session){if(!e._inDocument){if(this.session.lineWidgets[e.row]!=e)continue;e._inDocument=!0,k.container.appendChild(e.el)}e.h=e.el.offsetHeight,e.fixedWidth||(e.w=e.el.offsetWidth,e.screenWidth=Math.ceil(e.w/m.characterWidth));var t=e.h/m.lineHeight;e.coverLine&&(t-=this.session.getRowLineCount(e.row),t<0&&(t=0)),e.rowCount!=t&&(e.rowCount=t,e.row<h&&(h=e.row))}}h!=1/0&&(this.session._emit("changeFold",{data:{start:{row:h}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},o.prototype.renderWidgets=function(T,k){var r=k.layerConfig,m=this.session.lineWidgets;if(m){for(var h=Math.min(this.firstRow,r.firstRow),s=Math.max(this.lastRow,r.lastRow,m.length);h>0&&!m[h];)h--;this.firstRow=r.firstRow,this.lastRow=r.lastRow,k.$cursorLayer.config=r;for(var e=h;e<=s;e++){var t=m[e];if(!(!t||!t.el)){if(t.hidden){t.el.style.top=-100-(t.pixelHeight||0)+"px";continue}t._inDocument||(t._inDocument=!0,k.container.appendChild(t.el));var n=k.$cursorLayer.getPixelPosition({row:e,column:0},!0).top;t.coverLine||(n+=r.lineHeight*this.session.getRowLineCount(t.row)),t.el.style.top=n-r.offset+"px";var a=t.coverGutter?0:k.gutterWidth;t.fixedWidth||(a-=k.scrollLeft),t.el.style.left=a+"px",t.fullWidth&&t.screenWidth&&(t.el.style.minWidth=r.width+2*r.padding+"px"),t.fixedWidth?t.el.style.right=k.scrollBar.getWidth()+"px":t.el.style.right=""}}}},o}();Re.LineWidgets=I}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(ze,Re,jr){var W=ze("../lib/keys"),I=ze("../mouse/default_gutter_handler").GutterTooltip,o=function(){function k(r){this.editor=r,this.gutterLayer=r.renderer.$gutterLayer,this.element=r.renderer.$gutter,this.lines=r.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new I(this.editor)}return k.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},k.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},k.prototype.$onGutterKeyDown=function(r){if(this.annotationTooltip.isOpen){r.preventDefault(),r.keyCode===W.escape&&this.annotationTooltip.hideTooltip();return}if(r.target===this.element){if(r.keyCode!=W.enter)return;r.preventDefault();var m=this.editor.getCursorPosition().row;this.editor.isRowVisible(m)||this.editor.scrollToLine(m,!0,!0),setTimeout(function(){var h=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),s=this.$findNearestFoldWidget(h),e=this.$findNearestAnnotation(h);if(!(s===null&&e===null)){if(s===null&&e!==null){this.activeRowIndex=e,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(s!==null&&e===null){this.activeRowIndex=s,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(e-h)<Math.abs(s-h)){this.activeRowIndex=e,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=s,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(r),setTimeout(function(){this.editor._signal("gutterkeydown",new T(r,this))}.bind(this),10)},k.prototype.$handleGutterKeyboardInteraction=function(r){if(r.keyCode===W.tab){r.preventDefault();return}if(r.keyCode===W.escape){r.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(r.keyCode===W.up){switch(r.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(r.keyCode===W.down){switch(r.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(r.keyCode===W.left){r.preventDefault(),this.$switchLane("annotation");return}if(r.keyCode===W.right){r.preventDefault(),this.$switchLane("fold");return}if(r.keyCode===W.enter||r.keyCode===W.space){switch(r.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var m=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),r),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==m&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(m),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var h=this.lines.cells[this.activeRowIndex].element.childNodes[2],s=h.getBoundingClientRect(),e=this.annotationTooltip.getElement().style;e.left=s.right+"px",e.top=s.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},k.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},k.prototype.$isFoldWidgetVisible=function(r){var m=this.editor.isRowFullyVisible(this.$rowIndexToRow(r)),h=this.$getFoldWidget(r).style.display!=="none";return m&&h},k.prototype.$isAnnotationVisible=function(r){var m=this.editor.isRowFullyVisible(this.$rowIndexToRow(r)),h=this.$getAnnotation(r).style.display!=="none";return m&&h},k.prototype.$getFoldWidget=function(r){var m=this.lines.get(r),h=m.element;return h.childNodes[1]},k.prototype.$getAnnotation=function(r){var m=this.lines.get(r),h=m.element;return h.childNodes[2]},k.prototype.$findNearestFoldWidget=function(r){if(this.$isFoldWidgetVisible(r))return r;for(var m=0;r-m>0||r+m<this.lines.getLength()-1;){if(m++,r-m>=0&&this.$isFoldWidgetVisible(r-m))return r-m;if(r+m<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(r+m))return r+m}return null},k.prototype.$findNearestAnnotation=function(r){if(this.$isAnnotationVisible(r))return r;for(var m=0;r-m>0||r+m<this.lines.getLength()-1;){if(m++,r-m>=0&&this.$isAnnotationVisible(r-m))return r-m;if(r+m<=this.lines.getLength()-1&&this.$isAnnotationVisible(r+m))return r+m}return null},k.prototype.$focusFoldWidget=function(r){if(r!=null){var m=this.$getFoldWidget(r);m.classList.add(this.editor.renderer.keyboardFocusClassName),m.focus()}},k.prototype.$focusAnnotation=function(r){if(r!=null){var m=this.$getAnnotation(r);m.classList.add(this.editor.renderer.keyboardFocusClassName),m.focus()}},k.prototype.$blurFoldWidget=function(r){var m=this.$getFoldWidget(r);m.classList.remove(this.editor.renderer.keyboardFocusClassName),m.blur()},k.prototype.$blurAnnotation=function(r){var m=this.$getAnnotation(r);m.classList.remove(this.editor.renderer.keyboardFocusClassName),m.blur()},k.prototype.$moveFoldWidgetUp=function(){for(var r=this.activeRowIndex;r>0;)if(r--,this.$isFoldWidgetVisible(r)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=r,this.$focusFoldWidget(this.activeRowIndex);return}},k.prototype.$moveFoldWidgetDown=function(){for(var r=this.activeRowIndex;r<this.lines.getLength()-1;)if(r++,this.$isFoldWidgetVisible(r)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=r,this.$focusFoldWidget(this.activeRowIndex);return}},k.prototype.$moveAnnotationUp=function(){for(var r=this.activeRowIndex;r>0;)if(r--,this.$isAnnotationVisible(r)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=r,this.$focusAnnotation(this.activeRowIndex);return}},k.prototype.$moveAnnotationDown=function(){for(var r=this.activeRowIndex;r<this.lines.getLength()-1;)if(r++,this.$isAnnotationVisible(r)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=r,this.$focusAnnotation(this.activeRowIndex);return}},k.prototype.$switchLane=function(r){switch(r){case"annotation":if(this.activeLane==="annotation")break;var m=this.$findNearestAnnotation(this.activeRowIndex);if(m==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=m,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var h=this.$findNearestFoldWidget(this.activeRowIndex);if(h==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=h,this.$focusFoldWidget(this.activeRowIndex);break}},k.prototype.$rowIndexToRow=function(r){var m=this.lines.get(r);return m?m.row:null},k.prototype.$rowToRowIndex=function(r){for(var m=0;m<this.lines.getLength();m++){var h=this.lines.get(m);if(h.row==r)return m}return null},k}();Re.GutterKeyboardHandler=o;var T=function(){function k(r,m){this.gutterKeyboardHandler=m,this.domEvent=r}return k.prototype.getKey=function(){return W.keyCodeToString(this.domEvent.keyCode)},k.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},k.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},k.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},k}();Re.GutterKeyboardEvent=T}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(ze,Re,jr){var W=this&&this.__values||function(x){var _=typeof Symbol=="function"&&Symbol.iterator,g=_&&x[_],A=0;if(g)return g.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&A>=x.length&&(x=void 0),{value:x&&x[A++],done:!x}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},I=ze("./lib/oop"),o=ze("./lib/dom"),T=ze("./lib/lang"),k=ze("./lib/useragent"),r=ze("./keyboard/textinput").TextInput,m=ze("./mouse/mouse_handler").MouseHandler,h=ze("./mouse/fold_handler").FoldHandler,s=ze("./keyboard/keybinding").KeyBinding,e=ze("./edit_session").EditSession,t=ze("./search").Search,n=ze("./range").Range,a=ze("./lib/event_emitter").EventEmitter,i=ze("./commands/command_manager").CommandManager,c=ze("./commands/default_commands").commands,l=ze("./config"),u=ze("./token_iterator").TokenIterator,f=ze("./line_widgets").LineWidgets,d=ze("./keyboard/gutter_handler").GutterKeyboardHandler,w=ze("./config").nls,v=ze("./clipboard"),p=ze("./lib/keys"),y=function(){function x(_,g,A){this.$toDestroy=[];var M=_.getContainerElement();this.container=M,this.renderer=_,this.id="editor"+ ++x.$uid,this.commands=new i(k.isMac?"mac":"win",c),typeof document=="object"&&(this.textInput=new r(_.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new m(this),new h(this)),this.keyBinding=new s(this),this.$search=new t().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=T.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(L,E){E._$emitInputEvent.schedule(31)}),this.setSession(g||A&&A.session||new e("")),l.resetOptions(this),A&&this.setOptions(A),l._signal("editor",this)}return x.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=T.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},x.prototype.startOperation=function(_){if(this.curOp){if(!_||this.curOp.command)return;this.prevOp=this.curOp}_||(this.previousCommand=null,_={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:_.command||{},args:_.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},x.prototype.endOperation=function(_){if(this.curOp&&this.session){if(_&&_.returnValue===!1||!this.session)return this.curOp=null;if(_==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var g=this.curOp.command,A=g&&g.scrollIntoView;if(A){switch(A){case"center-animate":A="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var M=this.selection.getRange(),L=this.renderer.layerConfig;(M.start.row>=L.lastRow||M.end.row<=L.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}A=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var E=this.selection.toJSON();this.curOp.selectionAfter=E,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(E),this.prevOp=this.curOp,this.curOp=null}},x.prototype.$historyTracker=function(_){if(this.$mergeUndoDeltas){var g=this.prevOp,A=this.$mergeableCommands,M=g.command&&_.command.name==g.command.name;if(_.command.name=="insertstring"){var L=_.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),M=M&&this.mergeNextCommand&&(!/\s/.test(L)||/\s/.test(g.args)),this.mergeNextCommand=!0}else M=M&&A.indexOf(_.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(M=!1),M?this.session.mergeUndoDeltas=!0:A.indexOf(_.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},x.prototype.setKeyboardHandler=function(_,g){if(_&&typeof _=="string"&&_!="ace"){this.$keybindingId=_;var A=this;l.loadModule(["keybinding",_],function(M){A.$keybindingId==_&&A.keyBinding.setKeyboardHandler(M&&M.handler),g&&g()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(_),g&&g()},x.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},x.prototype.setSession=function(_){if(this.session!=_){this.curOp&&this.endOperation(),this.curOp={};var g=this.session;if(g){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var A=this.session.getSelection();A.off("changeCursor",this.$onCursorChange),A.off("changeSelection",this.$onSelectionChange)}this.session=_,_?(this.$onDocumentChange=this.onDocumentChange.bind(this),_.on("change",this.$onDocumentChange),this.renderer.setSession(_),this.$onChangeMode=this.onChangeMode.bind(this),_.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),_.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),_.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),_.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),_.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),_.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=_.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(_)),this._signal("changeSession",{session:_,oldSession:g}),this.curOp=null,g&&g._signal("changeEditor",{oldEditor:this}),_&&_._signal("changeEditor",{editor:this}),_&&!_.destroyed&&_.bgTokenizer.scheduleStart()}},x.prototype.getSession=function(){return this.session},x.prototype.setValue=function(_,g){return this.session.doc.setValue(_),g?g==1?this.navigateFileEnd():g==-1&&this.navigateFileStart():this.selectAll(),_},x.prototype.getValue=function(){return this.session.getValue()},x.prototype.getSelection=function(){return this.selection},x.prototype.resize=function(_){this.renderer.onResize(_)},x.prototype.setTheme=function(_,g){this.renderer.setTheme(_,g)},x.prototype.getTheme=function(){return this.renderer.getTheme()},x.prototype.setStyle=function(_){this.renderer.setStyle(_)},x.prototype.unsetStyle=function(_){this.renderer.unsetStyle(_)},x.prototype.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container).fontSize},x.prototype.setFontSize=function(_){this.setOption("fontSize",_)},x.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var _=this;this.$highlightPending=!0,setTimeout(function(){_.$highlightPending=!1;var g=_.session;if(!(!g||g.destroyed)){g.$bracketHighlight&&(g.$bracketHighlight.markerIds.forEach(function(R){g.removeMarker(R)}),g.$bracketHighlight=null);var A=_.getCursorPosition(),M=_.getKeyboardHandler(),L=M&&M.$getDirectionForHighlight&&M.$getDirectionForHighlight(_),E=g.getMatchingBracketRanges(A,L);if(!E){var S=new u(g,A.row,A.column),O=S.getCurrentToken();if(O&&/\b(?:tag-open|tag-name)/.test(O.type)){var P=g.getMatchingTags(A);P&&(E=[P.openTagName,P.closeTagName])}}if(!E&&g.$mode.getMatching&&(E=g.$mode.getMatching(_.session)),!E){_.getHighlightIndentGuides()&&_.renderer.$textLayer.$highlightIndentGuide();return}var U="ace_bracket";Array.isArray(E)?E.length==1&&(U="ace_error_bracket"):E=[E],E.length==2&&(n.comparePoints(E[0].end,E[1].start)==0?E=[n.fromPoints(E[0].start,E[1].end)]:n.comparePoints(E[0].start,E[1].end)==0&&(E=[n.fromPoints(E[1].start,E[0].end)])),g.$bracketHighlight={ranges:E,markerIds:E.map(function(R){return g.addMarker(R,U,"text")})},_.getHighlightIndentGuides()&&_.renderer.$textLayer.$highlightIndentGuide()}},50)}},x.prototype.focus=function(){this.textInput.focus()},x.prototype.isFocused=function(){return this.textInput.isFocused()},x.prototype.blur=function(){this.textInput.blur()},x.prototype.onFocus=function(_){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",_))},x.prototype.onBlur=function(_){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",_))},x.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},x.prototype.onDocumentChange=function(_){var g=this.session.$useWrapMode,A=_.start.row==_.end.row?_.end.row:1/0;this.renderer.updateLines(_.start.row,A,g),this._signal("change",_),this.$cursorChange()},x.prototype.onTokenizerUpdate=function(_){var g=_.data;this.renderer.updateLines(g.first,g.last)},x.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},x.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},x.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},x.prototype.$updateHighlightActiveLine=function(){var _=this.getSession(),g;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(g=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(g=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(g=!1)),_.$highlightLineMarker&&!g)_.removeMarker(_.$highlightLineMarker.id),_.$highlightLineMarker=null;else if(!_.$highlightLineMarker&&g){var A=new n(g.row,g.column,g.row,1/0);A.id=_.addMarker(A,"ace_active-line","screenLine"),_.$highlightLineMarker=A}else g&&(_.$highlightLineMarker.start.row=g.row,_.$highlightLineMarker.end.row=g.row,_.$highlightLineMarker.start.column=g.column,_._signal("changeBackMarker"))},x.prototype.onSelectionChange=function(_){var g=this.session;if(g.$selectionMarker&&g.removeMarker(g.$selectionMarker),g.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var A=this.selection.getRange(),M=this.getSelectionStyle();g.$selectionMarker=g.addMarker(A,"ace_selection",M)}var L=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(L),this._signal("changeSelection")},x.prototype.$getSelectionHighLightRegexp=function(){var _=this.session,g=this.getSelectionRange();if(!(g.isEmpty()||g.isMultiLine())){var A=g.start.column,M=g.end.column,L=_.getLine(g.start.row),E=L.substring(A,M);if(!(E.length>5e3||!/[\w\d]/.test(E))){var S=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:E}),O=L.substring(A-1,M+1);if(S.test(O))return S}}},x.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},x.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},x.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},x.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},x.prototype.onChangeMode=function(_){this.renderer.updateText(),this._emit("changeMode",_)},x.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},x.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},x.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},x.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},x.prototype.getCopyText=function(){var _=this.getSelectedText(),g=this.session.doc.getNewLineCharacter(),A=!1;if(!_&&this.$copyWithEmptySelection){A=!0;for(var M=this.selection.getAllRanges(),L=0;L<M.length;L++){var E=M[L];L&&M[L-1].start.row==E.start.row||(_+=this.session.getLine(E.start.row)+g)}}var S={text:_};return this._signal("copy",S),v.lineMode=A?S.text:!1,S.text},x.prototype.onCopy=function(){this.commands.exec("copy",this)},x.prototype.onCut=function(){this.commands.exec("cut",this)},x.prototype.onPaste=function(_,g){var A={text:_,event:g};this.commands.exec("paste",this,A)},x.prototype.$handlePaste=function(_){typeof _=="string"&&(_={text:_}),this._signal("paste",_);var g=_.text,A=g===v.lineMode,M=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)A?M.insert({row:this.selection.lead.row,column:0},g):this.insert(g);else if(A)this.selection.rangeList.ranges.forEach(function(U){M.insert({row:U.start.row,column:0},g)});else{var L=g.split(/\r\n|\r|\n/),E=this.selection.rangeList.ranges,S=L.length==2&&(!L[0]||!L[1]);if(L.length!=E.length||S)return this.commands.exec("insertstring",this,g);for(var O=E.length;O--;){var P=E[O];P.isEmpty()||M.remove(P),M.insert(P.start,L[O])}}},x.prototype.execCommand=function(_,g){return this.commands.exec(_,this,g)},x.prototype.insert=function(_,g){var A=this.session,M=A.getMode(),L=this.getCursorPosition();if(this.getBehavioursEnabled()&&!g){var E=M.transformAction(A.getState(L.row),"insertion",this,A,_);E&&(_!==E.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),_=E.text)}if(_=="	"&&(_=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&_.indexOf(`
`)==-1){var S=new n.fromPoints(L,L);S.end.column+=_.length,this.session.remove(S)}}else{var S=this.getSelectionRange();L=this.session.remove(S),this.clearSelection()}if(_==`
`||_==`\r
`){var R=A.getLine(L.row);if(L.column>R.search(/\S|$/)){var O=R.substr(L.column).search(/\S|$/);A.doc.removeInLine(L.row,L.column,L.column+O)}}this.clearSelection();var P=L.column,U=A.getState(L.row),R=A.getLine(L.row),j=M.checkOutdent(U,R,_);if(A.insert(L,_),E&&E.selection&&(E.selection.length==2?this.selection.setSelectionRange(new n(L.row,P+E.selection[0],L.row,P+E.selection[1])):this.selection.setSelectionRange(new n(L.row+E.selection[0],E.selection[1],L.row+E.selection[2],E.selection[3]))),this.$enableAutoIndent){if(A.getDocument().isNewLine(_)){var B=M.getNextLineIndent(U,R.slice(0,L.column),A.getTabString());A.insert({row:L.row+1,column:0},B)}j&&M.autoOutdent(U,A,L.row)}},x.prototype.autoIndent=function(){var _=this.session,g=_.getMode(),A,M;if(this.selection.isEmpty())A=0,M=_.doc.getLength()-1;else{var L=this.getSelectionRange();A=L.start.row,M=L.end.row}for(var E="",S="",O="",P,U,R,j=_.getTabString(),B=A;B<=M;B++)B>0&&(E=_.getState(B-1),S=_.getLine(B-1),O=g.getNextLineIndent(E,S,j)),P=_.getLine(B),U=g.$getIndent(P),O!==U&&(U.length>0&&(R=new n(B,0,B,U.length),_.remove(R)),O.length>0&&_.insert({row:B,column:0},O)),g.autoOutdent(E,_,B)},x.prototype.onTextInput=function(_,g){if(!g)return this.keyBinding.onTextInput(_);this.startOperation({command:{name:"insertstring"}});var A=this.applyComposition.bind(this,_,g);this.selection.rangeCount?this.forEachSelection(A):A(),this.endOperation()},x.prototype.applyComposition=function(_,g){if(g.extendLeft||g.extendRight){var A=this.selection.getRange();A.start.column-=g.extendLeft,A.end.column+=g.extendRight,A.start.column<0&&(A.start.row--,A.start.column+=this.session.getLine(A.start.row).length+1),this.selection.setRange(A),!_&&!A.isEmpty()&&this.remove()}if((_||!this.selection.isEmpty())&&this.insert(_,!0),g.restoreStart||g.restoreEnd){var A=this.selection.getRange();A.start.column-=g.restoreStart,A.end.column-=g.restoreEnd,this.selection.setRange(A)}},x.prototype.onCommandKey=function(_,g,A){return this.keyBinding.onCommandKey(_,g,A)},x.prototype.setOverwrite=function(_){this.session.setOverwrite(_)},x.prototype.getOverwrite=function(){return this.session.getOverwrite()},x.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},x.prototype.setScrollSpeed=function(_){this.setOption("scrollSpeed",_)},x.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},x.prototype.setDragDelay=function(_){this.setOption("dragDelay",_)},x.prototype.getDragDelay=function(){return this.getOption("dragDelay")},x.prototype.setSelectionStyle=function(_){this.setOption("selectionStyle",_)},x.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},x.prototype.setHighlightActiveLine=function(_){this.setOption("highlightActiveLine",_)},x.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},x.prototype.setHighlightGutterLine=function(_){this.setOption("highlightGutterLine",_)},x.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},x.prototype.setHighlightSelectedWord=function(_){this.setOption("highlightSelectedWord",_)},x.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},x.prototype.setAnimatedScroll=function(_){this.renderer.setAnimatedScroll(_)},x.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},x.prototype.setShowInvisibles=function(_){this.renderer.setShowInvisibles(_)},x.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},x.prototype.setDisplayIndentGuides=function(_){this.renderer.setDisplayIndentGuides(_)},x.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},x.prototype.setHighlightIndentGuides=function(_){this.renderer.setHighlightIndentGuides(_)},x.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},x.prototype.setShowPrintMargin=function(_){this.renderer.setShowPrintMargin(_)},x.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},x.prototype.setPrintMarginColumn=function(_){this.renderer.setPrintMarginColumn(_)},x.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},x.prototype.setReadOnly=function(_){this.setOption("readOnly",_)},x.prototype.getReadOnly=function(){return this.getOption("readOnly")},x.prototype.setBehavioursEnabled=function(_){this.setOption("behavioursEnabled",_)},x.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},x.prototype.setWrapBehavioursEnabled=function(_){this.setOption("wrapBehavioursEnabled",_)},x.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},x.prototype.setShowFoldWidgets=function(_){this.setOption("showFoldWidgets",_)},x.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},x.prototype.setFadeFoldWidgets=function(_){this.setOption("fadeFoldWidgets",_)},x.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},x.prototype.remove=function(_){this.selection.isEmpty()&&(_=="left"?this.selection.selectLeft():this.selection.selectRight());var g=this.getSelectionRange();if(this.getBehavioursEnabled()){var A=this.session,M=A.getState(g.start.row),L=A.getMode().transformAction(M,"deletion",this,A,g);if(g.end.column===0){var E=A.getTextRange(g);if(E[E.length-1]==`
`){var S=A.getLine(g.end.row);/^\s+$/.test(S)&&(g.end.column=S.length)}}L&&(g=L)}this.session.remove(g),this.clearSelection()},x.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},x.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},x.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},x.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var _=this.getSelectionRange();_.start.column==_.end.column&&_.start.row==_.end.row&&(_.end.column=0,_.end.row++),this.session.remove(_),this.clearSelection()},x.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var _=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(_)},x.prototype.setGhostText=function(_,g){this.session.widgetManager||(this.session.widgetManager=new f(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(_,g)},x.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},x.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var _=this.getCursorPosition(),g=_.column;if(g!==0){var A=this.session.getLine(_.row),M,L;g<A.length?(M=A.charAt(g)+A.charAt(g-1),L=new n(_.row,g-1,_.row,g+1)):(M=A.charAt(g-1)+A.charAt(g-2),L=new n(_.row,g-2,_.row,g)),this.session.replace(L,M),this.session.selection.moveToPosition(L.end)}}},x.prototype.toLowerCase=function(){var _=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var g=this.getSelectionRange(),A=this.session.getTextRange(g);this.session.replace(g,A.toLowerCase()),this.selection.setSelectionRange(_)},x.prototype.toUpperCase=function(){var _=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var g=this.getSelectionRange(),A=this.session.getTextRange(g);this.session.replace(g,A.toUpperCase()),this.selection.setSelectionRange(_)},x.prototype.indent=function(){var _=this.session,g=this.getSelectionRange();if(g.start.row<g.end.row){var A=this.$getSelectedRows();_.indentRows(A.first,A.last,"	");return}else if(g.start.column<g.end.column){var M=_.getTextRange(g);if(!/^\s+$/.test(M)){var A=this.$getSelectedRows();_.indentRows(A.first,A.last,"	");return}}var L=_.getLine(g.start.row),E=g.start,S=_.getTabSize(),O=_.documentToScreenColumn(E.row,E.column);if(this.session.getUseSoftTabs())var P=S-O%S,U=T.stringRepeat(" ",P);else{for(var P=O%S;L[g.start.column-1]==" "&&P;)g.start.column--,P--;this.selection.setSelectionRange(g),U="	"}return this.insert(U)},x.prototype.blockIndent=function(){var _=this.$getSelectedRows();this.session.indentRows(_.first,_.last,"	")},x.prototype.blockOutdent=function(){var _=this.session.getSelection();this.session.outdentRows(_.getRange())},x.prototype.sortLines=function(){for(var _=this.$getSelectedRows(),g=this.session,A=[],M=_.first;M<=_.last;M++)A.push(g.getLine(M));A.sort(function(S,O){return S.toLowerCase()<O.toLowerCase()?-1:S.toLowerCase()>O.toLowerCase()?1:0});for(var L=new n(0,0,0,0),M=_.first;M<=_.last;M++){var E=g.getLine(M);L.start.row=M,L.end.row=M,L.end.column=E.length,g.replace(L,A[M-_.first])}},x.prototype.toggleCommentLines=function(){var _=this.session.getState(this.getCursorPosition().row),g=this.$getSelectedRows();this.session.getMode().toggleCommentLines(_,this.session,g.first,g.last)},x.prototype.toggleBlockComment=function(){var _=this.getCursorPosition(),g=this.session.getState(_.row),A=this.getSelectionRange();this.session.getMode().toggleBlockComment(g,this.session,A,_)},x.prototype.getNumberAt=function(_,g){var A=/[\-]?[0-9]+(?:\.[0-9]+)?/g;A.lastIndex=0;for(var M=this.session.getLine(_);A.lastIndex<g;){var L=A.exec(M);if(L.index<=g&&L.index+L[0].length>=g){var E={value:L[0],start:L.index,end:L.index+L[0].length};return E}}return null},x.prototype.modifyNumber=function(_){var g=this.selection.getCursor().row,A=this.selection.getCursor().column,M=new n(g,A-1,g,A),L=this.session.getTextRange(M);if(!isNaN(parseFloat(L))&&isFinite(L)){var E=this.getNumberAt(g,A);if(E){var S=E.value.indexOf(".")>=0?E.start+E.value.indexOf(".")+1:E.end,O=E.start+E.value.length-S,P=parseFloat(E.value);P*=Math.pow(10,O),S!==E.end&&A<S?_*=Math.pow(10,E.end-A-1):_*=Math.pow(10,E.end-A),P+=_,P/=Math.pow(10,O);var U=P.toFixed(O),R=new n(g,E.start,g,E.end);this.session.replace(R,U),this.moveCursorTo(g,Math.max(E.start+1,A+U.length-E.value.length))}}else this.toggleWord()},x.prototype.toggleWord=function(){var _=this.selection.getCursor().row,g=this.selection.getCursor().column;this.selection.selectWord();var A=this.getSelectedText(),M=this.selection.getWordRange().start.column,L=A.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),E=g-M-1;E<0&&(E=0);var S=0,O=0,P=this;A.match(/[A-Za-z0-9_]+/)&&L.forEach(function(J,X){O=S+J.length,E>=S&&E<=O&&(A=J,P.selection.clearSelection(),P.moveCursorTo(_,S+M),P.selection.selectTo(_,O+M)),S=O});for(var U=this.$toggleWordPairs,R,j=0;j<U.length;j++)for(var B=U[j],z=0;z<=1;z++){var G=+!z,V=A.match(new RegExp("^\\s?_?("+T.escapeRegExp(B[z])+")\\s?$","i"));if(V){var et=A.match(new RegExp("([_]|^|\\s)("+T.escapeRegExp(V[1])+")($|\\s)","g"));et&&(R=A.replace(new RegExp(T.escapeRegExp(B[z]),"i"),function(J){var X=B[G];return J.toUpperCase()==J?X=X.toUpperCase():J.charAt(0).toUpperCase()==J.charAt(0)&&(X=X.substr(0,0)+B[G].charAt(0).toUpperCase()+X.substr(1)),X}),this.insert(R),R="")}}},x.prototype.findLinkAt=function(_,g){var A,M,L=this.session.getLine(_),E=L.split(/((?:https?|ftp):\/\/[\S]+)/),S=g;S<0&&(S=0);var O=0,P=0,U;try{for(var R=W(E),j=R.next();!j.done;j=R.next()){var B=j.value;if(P=O+B.length,S>=O&&S<=P&&B.match(/((?:https?|ftp):\/\/[\S]+)/)){U=B.replace(/[\s:.,'";}\]]+$/,"");break}O=P}}catch(z){A={error:z}}finally{try{j&&!j.done&&(M=R.return)&&M.call(R)}finally{if(A)throw A.error}}return U},x.prototype.openLink=function(){var _=this.selection.getCursor(),g=this.findLinkAt(_.row,_.column);return g&&window.open(g,"_blank"),g!=null},x.prototype.removeLines=function(){var _=this.$getSelectedRows();this.session.removeFullLines(_.first,_.last),this.clearSelection()},x.prototype.duplicateSelection=function(){var _=this.selection,g=this.session,A=_.getRange(),M=_.isBackwards();if(A.isEmpty()){var L=A.start.row;g.duplicateLines(L,L)}else{var E=M?A.start:A.end,S=g.insert(E,g.getTextRange(A),!1);A.start=E,A.end=S,_.setSelectionRange(A,M)}},x.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},x.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},x.prototype.moveText=function(_,g,A){return this.session.moveText(_,g,A)},x.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},x.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},x.prototype.$moveLines=function(_,g){var A,M,L=this.selection;if(!L.inMultiSelectMode||this.inVirtualSelectionMode){var E=L.toOrientedRange();A=this.$getSelectedRows(E),M=this.session.$moveLines(A.first,A.last,g?0:_),g&&_==-1&&(M=0),E.moveBy(M,0),L.fromOrientedRange(E)}else{var S=L.rangeList.ranges;L.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var O=0,P=0,U=S.length,R=0;R<U;R++){var j=R;S[R].moveBy(O,0),A=this.$getSelectedRows(S[R]);for(var B=A.first,z=A.last;++R<U;){P&&S[R].moveBy(P,0);var G=this.$getSelectedRows(S[R]);if(g&&G.first!=z||!g&&G.first>z+1)break;z=G.last}for(R--,O=this.session.$moveLines(B,z,g?0:_),g&&_==-1&&(j=R+1);j<=R;)S[j].moveBy(O,0),j++;g||(O=0),P+=O}L.fromOrientedRange(L.ranges[0]),L.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},x.prototype.$getSelectedRows=function(_){return _=(_||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(_.start.row),last:this.session.getRowFoldEnd(_.end.row)}},x.prototype.onCompositionStart=function(_){this.renderer.showComposition(_)},x.prototype.onCompositionUpdate=function(_){this.renderer.setCompositionText(_)},x.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},x.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},x.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},x.prototype.isRowVisible=function(_){return _>=this.getFirstVisibleRow()&&_<=this.getLastVisibleRow()},x.prototype.isRowFullyVisible=function(_){return _>=this.renderer.getFirstFullyVisibleRow()&&_<=this.renderer.getLastFullyVisibleRow()},x.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},x.prototype.$moveByPage=function(_,g){var A=this.renderer,M=this.renderer.layerConfig,L=_*Math.floor(M.height/M.lineHeight);g===!0?this.selection.$moveSelection(function(){this.moveCursorBy(L,0)}):g===!1&&(this.selection.moveCursorBy(L,0),this.selection.clearSelection());var E=A.scrollTop;A.scrollBy(0,L*M.lineHeight),g!=null&&A.scrollCursorIntoView(null,.5),A.animateScrolling(E)},x.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},x.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},x.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},x.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},x.prototype.scrollPageDown=function(){this.$moveByPage(1)},x.prototype.scrollPageUp=function(){this.$moveByPage(-1)},x.prototype.scrollToRow=function(_){this.renderer.scrollToRow(_)},x.prototype.scrollToLine=function(_,g,A,M){this.renderer.scrollToLine(_,g,A,M)},x.prototype.centerSelection=function(){var _=this.getSelectionRange(),g={row:Math.floor(_.start.row+(_.end.row-_.start.row)/2),column:Math.floor(_.start.column+(_.end.column-_.start.column)/2)};this.renderer.alignCursor(g,.5)},x.prototype.getCursorPosition=function(){return this.selection.getCursor()},x.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},x.prototype.getSelectionRange=function(){return this.selection.getRange()},x.prototype.selectAll=function(){this.selection.selectAll()},x.prototype.clearSelection=function(){this.selection.clearSelection()},x.prototype.moveCursorTo=function(_,g){this.selection.moveCursorTo(_,g)},x.prototype.moveCursorToPosition=function(_){this.selection.moveCursorToPosition(_)},x.prototype.jumpToMatching=function(_,g){var A=this.getCursorPosition(),M=new u(this.session,A.row,A.column),L=M.getCurrentToken(),E=0;L&&L.type.indexOf("tag-name")!==-1&&(L=M.stepBackward());var S=L||M.stepForward();if(S){var O,P=!1,U={},R=A.column-S.start,j,B={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(S.value.match(/[{}()\[\]]/g)){for(;R<S.value.length&&!P;R++)if(B[S.value[R]])switch(j=B[S.value[R]]+"."+S.type.replace("rparen","lparen"),isNaN(U[j])&&(U[j]=0),S.value[R]){case"(":case"[":case"{":U[j]++;break;case")":case"]":case"}":U[j]--,U[j]===-1&&(O="bracket",P=!0);break}}else S.type.indexOf("tag-name")!==-1&&(isNaN(U[S.value])&&(U[S.value]=0),L.value==="<"&&E>1?U[S.value]++:L.value==="</"&&U[S.value]--,U[S.value]===-1&&(O="tag",P=!0));P||(L=S,E++,S=M.stepForward(),R=0)}while(S&&!P);if(O){var z,G;if(O==="bracket")z=this.session.getBracketRange(A),z||(z=new n(M.getCurrentTokenRow(),M.getCurrentTokenColumn()+R-1,M.getCurrentTokenRow(),M.getCurrentTokenColumn()+R-1),G=z.start,(g||G.row===A.row&&Math.abs(G.column-A.column)<2)&&(z=this.session.getBracketRange(G)));else if(O==="tag"){if(!S||S.type.indexOf("tag-name")===-1)return;if(z=new n(M.getCurrentTokenRow(),M.getCurrentTokenColumn()-2,M.getCurrentTokenRow(),M.getCurrentTokenColumn()-2),z.compare(A.row,A.column)===0){var V=this.session.getMatchingTags(A);V&&(V.openTag.contains(A.row,A.column)?(z=V.closeTag,G=z.start):(z=V.openTag,V.closeTag.start.row===A.row&&V.closeTag.start.column===A.column?G=z.end:G=z.start))}G=G||z.start}G=z&&z.cursor||G,G&&(_?z&&g?this.selection.setRange(z):z&&z.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(G.row,G.column):this.selection.moveTo(G.row,G.column))}}},x.prototype.gotoLine=function(_,g,A){this.selection.clearSelection(),this.session.unfold({row:_-1,column:g||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(_-1,g||0),this.isRowFullyVisible(_-1)||this.scrollToLine(_-1,!0,A)},x.prototype.navigateTo=function(_,g){this.selection.moveTo(_,g)},x.prototype.navigateUp=function(_){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var g=this.selection.anchor.getPosition();return this.moveCursorToPosition(g)}this.selection.clearSelection(),this.selection.moveCursorBy(-_||-1,0)},x.prototype.navigateDown=function(_){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var g=this.selection.anchor.getPosition();return this.moveCursorToPosition(g)}this.selection.clearSelection(),this.selection.moveCursorBy(_||1,0)},x.prototype.navigateLeft=function(_){if(this.selection.isEmpty())for(_=_||1;_--;)this.selection.moveCursorLeft();else{var g=this.getSelectionRange().start;this.moveCursorToPosition(g)}this.clearSelection()},x.prototype.navigateRight=function(_){if(this.selection.isEmpty())for(_=_||1;_--;)this.selection.moveCursorRight();else{var g=this.getSelectionRange().end;this.moveCursorToPosition(g)}this.clearSelection()},x.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},x.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},x.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},x.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},x.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},x.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},x.prototype.replace=function(_,g){g&&this.$search.set(g);var A=this.$search.find(this.session),M=0;return A&&(this.$tryReplace(A,_)&&(M=1),this.selection.setSelectionRange(A),this.renderer.scrollSelectionIntoView(A.start,A.end)),M},x.prototype.replaceAll=function(_,g){g&&this.$search.set(g);var A=this.$search.findAll(this.session),M=0;if(!A.length)return M;var L=this.getSelectionRange();this.selection.moveTo(0,0);for(var E=A.length-1;E>=0;--E)this.$tryReplace(A[E],_)&&M++;return this.selection.setSelectionRange(L),M},x.prototype.$tryReplace=function(_,g){var A=this.session.getTextRange(_);return g=this.$search.replace(A,g),g!==null?(_.end=this.session.replace(_,g),_):null},x.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},x.prototype.find=function(_,g,A){g||(g={}),typeof _=="string"||_ instanceof RegExp?g.needle=_:typeof _=="object"&&I.mixin(g,_);var M=this.selection.getRange();g.needle==null&&(_=this.session.getTextRange(M)||this.$search.$options.needle,_||(M=this.session.getWordRange(M.start.row,M.start.column),_=this.session.getTextRange(M)),this.$search.set({needle:_})),this.$search.set(g),g.start||this.$search.set({start:M});var L=this.$search.find(this.session);if(g.preventScroll)return L;if(L)return this.revealRange(L,A),L;g.backwards?M.start=M.end:M.end=M.start,this.selection.setRange(M)},x.prototype.findNext=function(_,g){this.find({skipCurrent:!0,backwards:!1},_,g)},x.prototype.findPrevious=function(_,g){this.find(_,{skipCurrent:!0,backwards:!0},g)},x.prototype.revealRange=function(_,g){this.session.unfold(_),this.selection.setSelectionRange(_);var A=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(_.start,_.end,.5),g!==!1&&this.renderer.animateScrolling(A)},x.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},x.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},x.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(_){_.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},x.prototype.setAutoScrollEditorIntoView=function(_){if(_){var g,A=this,M=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var L=this.$scrollAnchor;L.style.cssText="position:absolute",this.container.insertBefore(L,this.container.firstChild);var E=this.on("changeSelection",function(){M=!0}),S=this.renderer.on("beforeRender",function(){M&&(g=A.renderer.container.getBoundingClientRect())}),O=this.renderer.on("afterRender",function(){if(M&&g&&(A.isFocused()||A.searchBox&&A.searchBox.isFocused())){var P=A.renderer,U=P.$cursorLayer.$pixelPos,R=P.layerConfig,j=U.top-R.offset;U.top>=0&&j+g.top<0?M=!0:U.top<R.height&&U.top+g.top+R.lineHeight>window.innerHeight?M=!1:M=null,M!=null&&(L.style.top=j+"px",L.style.left=U.left+"px",L.style.height=R.lineHeight+"px",L.scrollIntoView(M)),M=g=null}});this.setAutoScrollEditorIntoView=function(P){P||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",E),this.renderer.off("afterRender",O),this.renderer.off("beforeRender",S))}}},x.prototype.$resetCursorStyle=function(){var _=this.$cursorStyle||"ace",g=this.renderer.$cursorLayer;g&&(g.setSmoothBlinking(/smooth/.test(_)),g.isBlinking=!this.$readOnly&&_!="wide",o.setCssClass(g.element,"ace_slim-cursors",/slim/.test(_)))},x.prototype.prompt=function(_,g,A){var M=this;l.loadModule("ace/ext/prompt",function(L){L.prompt(M,_,g,A)})},x}();y.$uid=0,y.prototype.curOp=null,y.prototype.prevOp={},y.prototype.$mergeableCommands=["backspace","del","insertstring"],y.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],I.implement(y.prototype,a),l.defineOptions(y.prototype,"editor",{selectionStyle:{set:function(x){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:x})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(x){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(x){this.textInput.setReadOnly(x),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(x){this.textInput.setCopyWithEmptySelection(x)},initialValue:!1},cursorStyle:{set:function(x){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(x){this.setAutoScrollEditorIntoView(x)}},keyboardHandler:{set:function(x){this.setKeyboardHandler(x)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(x){this.session.setValue(x)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(x){this.setSession(x)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(x){this.renderer.$gutterLayer.setShowLineNumbers(x),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),x&&this.$relativeLineNumbers?b.attach(this):b.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(x){this.$showLineNumbers&&x?b.attach(this):b.detach(this)}},placeholder:{set:function(x){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var _=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(_&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),o.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!_&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),o.addCssClass(this.container,"ace_hasPlaceholder");var g=o.createElement("div");g.className="ace_placeholder",g.textContent=this.$placeholder||"",this.renderer.placeholderNode=g,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!_&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(x){var _={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(M){M.blur(),M.renderer.scroller.focus()},readOnly:!0},g=function(M){if(M.target==this.renderer.scroller&&M.keyCode===p.enter){M.preventDefault();var L=this.getCursorPosition().row;this.isRowVisible(L)||this.scrollToLine(L,!0,!0),this.focus()}},A;x?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(k.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",w("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",w("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",g.bind(this)),this.commands.addCommand(_),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",w("editor")),this.renderer.$gutter.setAttribute("aria-label",w("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),A||(A=new d(this)),A.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",g.bind(this)),this.commands.removeCommand(_),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),A&&A.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var b={getText:function(x,_){return(Math.abs(x.selection.lead.row-_)||_+1+(_<9?"\xB7":""))+""},getWidth:function(x,_,g){return Math.max(_.toString().length,(g.lastRow+1).toString().length,2)*g.characterWidth},update:function(x,_){_.renderer.$loop.schedule(_.renderer.CHANGE_GUTTER)},attach:function(x){x.renderer.$gutterLayer.$renderer=this,x.on("changeSelection",this.update),this.update(null,x)},detach:function(x){x.renderer.$gutterLayer.$renderer==this&&(x.renderer.$gutterLayer.$renderer=null),x.off("changeSelection",this.update),this.update(null,x)}};Re.Editor=y}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(ze,Re,jr){var W=function(){function u(){this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return u.prototype.addSession=function(f){this.$session=f},u.prototype.add=function(f,d,w){if(!this.$fromUndo&&f!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),d===!1||!this.lastDeltas){this.lastDeltas=[];var v=this.$undoStack.length;v>this.$undoDepth-1&&this.$undoStack.splice(0,v-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),f.id=this.$rev=++this.$maxRev}(f.action=="remove"||f.action=="insert")&&(this.$lastDelta=f),this.lastDeltas.push(f)}},u.prototype.addSelection=function(f,d){this.selections.push({value:f,rev:d||this.$rev})},u.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},u.prototype.markIgnored=function(f,d){d==null&&(d=this.$rev+1);for(var w=this.$undoStack,v=w.length;v--;){var p=w[v][0];if(p.id<=f)break;p.id<d&&(p.ignore=!0)}this.lastDeltas=null},u.prototype.getSelection=function(f,d){for(var w=this.selections,v=w.length;v--;){var p=w[v];if(p.rev<f)return d&&(p=w[v+1]),p}},u.prototype.getRevision=function(){return this.$rev},u.prototype.getDeltas=function(f,d){d==null&&(d=this.$rev+1);for(var w=this.$undoStack,v=null,p=0,y=w.length;y--;){var b=w[y][0];if(b.id<d&&!v&&(v=y+1),b.id<=f){p=y+1;break}}return w.slice(p,v)},u.prototype.getChangedRanges=function(f,d){d==null&&(d=this.$rev+1)},u.prototype.getChangedLines=function(f,d){d==null&&(d=this.$rev+1)},u.prototype.undo=function(f,d){this.lastDeltas=null;var w=this.$undoStack;if(I(w,w.length)){f||(f=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var v=w.pop(),p=null;return v&&(p=f.undoChanges(v,d),this.$redoStack.push(v),this.$syncRev()),this.$fromUndo=!1,p}},u.prototype.redo=function(f,d){if(this.lastDeltas=null,f||(f=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var w=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);l(this.$redoStack,w),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(y){y[0].id=++this.$maxRev},this)}var v=this.$redoStack.pop(),p=null;return v&&(p=f.redoChanges(v,d),this.$undoStack.push(v),this.$syncRev()),this.$fromUndo=!1,p},u.prototype.$syncRev=function(){var f=this.$undoStack,d=f[f.length-1],w=d&&d[0].id||0;this.$redoStackBaseRev=w,this.$rev=w},u.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},u.prototype.canUndo=function(){return this.$undoStack.length>0},u.prototype.canRedo=function(){return this.$redoStack.length>0},u.prototype.bookmark=function(f){f==null&&(f=this.$rev),this.mark=f},u.prototype.isAtBookmark=function(){return this.$rev===this.mark},u.prototype.toJSON=function(){},u.prototype.fromJSON=function(){},u.prototype.$prettyPrint=function(f){return f?m(f):m(this.$undoStack)+`
---
`+m(this.$redoStack)},u}();W.prototype.hasUndo=W.prototype.canUndo,W.prototype.hasRedo=W.prototype.canRedo,W.prototype.isClean=W.prototype.isAtBookmark,W.prototype.markClean=W.prototype.bookmark;function I(u,f){for(var d=f;d--;){var w=u[d];if(w&&!w[0].ignore){for(;d<f-1;){var v=e(u[d],u[d+1]);u[d]=v[0],u[d+1]=v[1],d++}return!0}}}var o=ze("./range").Range,T=o.comparePoints;o.comparePoints;function k(u){return{row:u.row,column:u.column}}function r(u){return{start:k(u.start),end:k(u.end),action:u.action,lines:u.lines.slice()}}function m(u){if(u=u||this,Array.isArray(u))return u.map(m).join(`
`);var f="";return u.action?(f=u.action=="insert"?"+":"-",f+="["+u.lines+"]"):u.value&&(Array.isArray(u.value)?f=u.value.map(h).join(`
`):f=h(u.value)),u.start&&(f+=h(u)),(u.id||u.rev)&&(f+="	("+(u.id||u.rev)+")"),f}function h(u){return u.start.row+":"+u.start.column+"=>"+u.end.row+":"+u.end.column}function s(u,f){var d=u.action=="insert",w=f.action=="insert";if(d&&w)if(T(f.start,u.end)>=0)n(f,u,-1);else if(T(f.start,u.start)<=0)n(u,f,1);else return null;else if(d&&!w)if(T(f.start,u.end)>=0)n(f,u,-1);else if(T(f.end,u.start)<=0)n(u,f,-1);else return null;else if(!d&&w)if(T(f.start,u.start)>=0)n(f,u,1);else if(T(f.start,u.start)<=0)n(u,f,1);else return null;else if(!d&&!w)if(T(f.start,u.start)>=0)n(f,u,1);else if(T(f.end,u.start)<=0)n(u,f,-1);else return null;return[f,u]}function e(u,f){for(var d=u.length;d--;)for(var w=0;w<f.length;w++)if(!s(u[d],f[w])){for(;d<u.length;){for(;w--;)s(f[w],u[d]);w=f.length,d++}return[u,f]}return u.selectionBefore=f.selectionBefore=u.selectionAfter=f.selectionAfter=null,[f,u]}function t(u,f){var d=u.action=="insert",w=f.action=="insert";if(d&&w)T(u.start,f.start)<0?n(f,u,1):n(u,f,1);else if(d&&!w)T(u.start,f.end)>=0?n(u,f,-1):(T(u.start,f.start)<=0||n(u,o.fromPoints(f.start,u.start),-1),n(f,u,1));else if(!d&&w)T(f.start,u.end)>=0?n(f,u,-1):(T(f.start,u.start)<=0||n(f,o.fromPoints(u.start,f.start),-1),n(u,f,1));else if(!d&&!w)if(T(f.start,u.end)>=0)n(f,u,-1);else if(T(f.end,u.start)<=0)n(u,f,-1);else{var v,p;return T(u.start,f.start)<0&&(v=u,u=i(u,f.start)),T(u.end,f.end)>0&&(p=i(u,f.end)),a(f.end,u.start,u.end,-1),p&&!v&&(u.lines=p.lines,u.start=p.start,u.end=p.end,p=u),[f,v,p].filter(Boolean)}return[f,u]}function n(u,f,d){a(u.start,f.start,f.end,d),a(u.end,f.start,f.end,d)}function a(u,f,d,w){u.row==(w==1?f:d).row&&(u.column+=w*(d.column-f.column)),u.row+=w*(d.row-f.row)}function i(u,f){var d=u.lines,w=u.end;u.end=k(f);var v=u.end.row-u.start.row,p=d.splice(v,d.length),y=v?f.column:f.column-u.start.column;d.push(p[0].substring(0,y)),p[0]=p[0].substr(y);var b={start:k(f),end:w,lines:p,action:u.action};return b}function c(u,f){f=r(f);for(var d=u.length;d--;){for(var w=u[d],v=0;v<w.length;v++){var p=w[v],y=t(p,f);f=y[0],y.length!=2&&(y[2]?(w.splice(v+1,1,y[1],y[2]),v++):y[1]||(w.splice(v,1),v--))}w.length||u.splice(d,1)}return u}function l(u,f){for(var d=0;d<f.length;d++)for(var w=f[d],v=0;v<w.length;v++)c(u,w[v])}Re.UndoManager=W}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(ze,Re,jr){var W=ze("../lib/dom"),I=function(){function o(T,k){this.element=T,this.canvasHeight=k||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return o.prototype.moveContainer=function(T){W.translate(this.element,0,-(T.firstRowScreen*T.lineHeight%this.canvasHeight)-T.offset*this.$offsetCoefficient)},o.prototype.pageChanged=function(T,k){return Math.floor(T.firstRowScreen*T.lineHeight/this.canvasHeight)!==Math.floor(k.firstRowScreen*k.lineHeight/this.canvasHeight)},o.prototype.computeLineTop=function(T,k,r){var m=k.firstRowScreen*k.lineHeight,h=Math.floor(m/this.canvasHeight),s=r.documentToScreenRow(T,0)*k.lineHeight;return s-h*this.canvasHeight},o.prototype.computeLineHeight=function(T,k,r){return k.lineHeight*r.getRowLineCount(T)},o.prototype.getLength=function(){return this.cells.length},o.prototype.get=function(T){return this.cells[T]},o.prototype.shift=function(){this.$cacheCell(this.cells.shift())},o.prototype.pop=function(){this.$cacheCell(this.cells.pop())},o.prototype.push=function(T){if(Array.isArray(T)){this.cells.push.apply(this.cells,T);for(var k=W.createFragment(this.element),r=0;r<T.length;r++)k.appendChild(T[r].element);this.element.appendChild(k)}else this.cells.push(T),this.element.appendChild(T.element)},o.prototype.unshift=function(T){if(Array.isArray(T)){this.cells.unshift.apply(this.cells,T);for(var k=W.createFragment(this.element),r=0;r<T.length;r++)k.appendChild(T[r].element);this.element.firstChild?this.element.insertBefore(k,this.element.firstChild):this.element.appendChild(k)}else this.cells.unshift(T),this.element.insertAdjacentElement("afterbegin",T.element)},o.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},o.prototype.$cacheCell=function(T){T&&(T.element.remove(),this.cellCache.push(T))},o.prototype.createCell=function(T,k,r,m){var h=this.cellCache.pop();if(!h){var s=W.createElement("div");m&&m(s),this.element.appendChild(s),h={element:s,text:"",row:T}}return h.row=T,h},o}();Re.Lines=I}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(ze,Re,jr){var W=ze("../lib/dom"),I=ze("../lib/oop"),o=ze("../lib/lang"),T=ze("../lib/event_emitter").EventEmitter,k=ze("./lines").Lines,r=ze("../config").nls,m=function(){function s(e){this.element=W.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new k(this.element),this.$lines.$offsetCoefficient=1}return s.prototype.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},s.prototype.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},s.prototype.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},s.prototype.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],a=n.row,i=this.$annotations[a];i||(i=this.$annotations[a]={text:[],type:[]});var c=n.text,l=n.type;c=c?o.escapeHTML(c):n.html||"",i.text.indexOf(c)===-1&&(i.text.push(c),i.type.push(l));var u=n.className;u?i.className=u:l=="error"?i.className=" ace_error":l=="warning"&&i.className!=" ace_error"?i.className=" ace_warning":l=="info"&&!i.className&&(i.className=" ace_info")}},s.prototype.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(n!==0)if(e.action=="remove")this.$annotations.splice(t,n+1,null);else{var a=new Array(n+1);a.unshift(t,1),this.$annotations.splice.apply(this.$annotations,a)}}},s.prototype.update=function(e){this.config=e;var t=this.session,n=e.firstRow,a=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=a,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var i=t.getNextFoldLine(n),c=i?i.start.row:1/0,l=null,u=-1,f=n;;){if(f>c&&(f=i.end.row+1,i=t.getNextFoldLine(f,i),c=i?i.start.row:1/0),f>a){for(;this.$lines.getLength()>u+1;)this.$lines.pop();break}l=this.$lines.get(++u),l?l.row=f:(l=this.$lines.createCell(f,e,this.session,h),this.$lines.push(l)),this.$renderCell(l,e,i,f),f++}this._signal("afterRender"),this.$updateGutterWidth(e)},s.prototype.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,a=t.$firstLineNumber,i=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(i=t.getLength()+a-1);var c=n?n.getWidth(t,i,e):i.toString().length*e.characterWidth,l=this.$padding||this.$computePadding();c+=l.left+l.right,c!==this.gutterWidth&&!isNaN(c)&&(this.gutterWidth=c,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",c))},s.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},s.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!(this.$cursorCell&&this.$cursorCell.row==e)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var a=t[n];if(a.row>=this.$cursorRow){if(a.row>this.$cursorRow){var i=this.session.getFoldLine(this.$cursorRow);if(n>0&&i&&i.start.row==t[n-1].row)a=t[n-1];else break}a.element.className="ace_gutter-active-line "+a.element.className,this.$cursorCell=a;break}}}}},s.prototype.scrollLines=function(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),a=this.oldLastRow;if(this.oldLastRow=n,!t||a<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(a>n)for(var i=this.session.getFoldedRowCount(n+1,a);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>a&&this.$lines.push(this.$renderLines(e,a+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},s.prototype.$renderLines=function(e,t,n){for(var a=[],i=t,c=this.session.getNextFoldLine(i),l=c?c.start.row:1/0;i>l&&(i=c.end.row+1,c=this.session.getNextFoldLine(i,c),l=c?c.start.row:1/0),!(i>n);){var u=this.$lines.createCell(i,e,this.session,h);this.$renderCell(u,e,c,i),a.push(u),i++}return a},s.prototype.$renderCell=function(e,t,n,a){var i=e.element,c=this.session,l=i.childNodes[0],u=i.childNodes[1],f=i.childNodes[2],d=f.firstChild,w=c.$firstLineNumber,v=c.$breakpoints,p=c.$decorations,y=c.gutterRenderer||this.$renderer,b=this.$showFoldWidgets&&c.foldWidgets,x=n?n.start.row:Number.MAX_VALUE,_=t.lineHeight+"px",g=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",A=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",M=(y?y.getText(c,a):a+w).toString();if(this.$highlightGutterLine&&(a==this.$cursorRow||n&&a<this.$cursorRow&&a>=x&&this.$cursorRow<=n.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),v[a]&&(g+=v[a]),p[a]&&(g+=p[a]),this.$annotations[a]&&a!==x&&(g+=this.$annotations[a].className),b){var L=b[a];L==null&&(L=b[a]=c.getFoldWidget(a))}if(L){var E="ace_fold-widget ace_"+L,S=L=="start"&&a==x&&a<n.end.row;if(S){E+=" ace_closed";for(var O="",P=!1,U=a+1;U<=n.end.row;U++)if(this.$annotations[U]){if(this.$annotations[U].className===" ace_error"){P=!0,O=" ace_error_fold";break}if(this.$annotations[U].className===" ace_warning"){P=!0,O=" ace_warning_fold";continue}}g+=O}else E+=" ace_open";u.className!=E&&(u.className=E),W.setStyle(u.style,"height",_),W.setStyle(u.style,"display","inline-block"),u.setAttribute("role","button"),u.setAttribute("tabindex","-1");var R=c.getFoldWidgetRange(a);R?u.setAttribute("aria-label",r("Toggle code folding, rows $0 through $1",[R.start.row+1,R.end.row+1])):n?u.setAttribute("aria-label",r("Toggle code folding, rows $0 through $1",[n.start.row+1,n.end.row+1])):u.setAttribute("aria-label",r("Toggle code folding, row $0",[a+1])),S?(u.setAttribute("aria-expanded","false"),u.setAttribute("title",r("Unfold code"))):(u.setAttribute("aria-expanded","true"),u.setAttribute("title",r("Fold code")))}else u&&(W.setStyle(u.style,"display","none"),u.setAttribute("tabindex","0"),u.removeAttribute("role"),u.removeAttribute("aria-label"));return P&&this.$showFoldedAnnotations?(f.className="ace_gutter_annotation",d.className=A,d.className+=O,W.setStyle(d.style,"height",_),W.setStyle(f.style,"display","block"),W.setStyle(f.style,"height",_),f.setAttribute("aria-label",r("Read annotations row $0",[M])),f.setAttribute("tabindex","-1"),f.setAttribute("role","button")):this.$annotations[a]?(f.className="ace_gutter_annotation",d.className=A,this.$useSvgGutterIcons?d.className+=this.$annotations[a].className:i.classList.add(this.$annotations[a].className.replace(" ","")),W.setStyle(d.style,"height",_),W.setStyle(f.style,"display","block"),W.setStyle(f.style,"height",_),f.setAttribute("aria-label",r("Read annotations row $0",[M])),f.setAttribute("tabindex","-1"),f.setAttribute("role","button")):(W.setStyle(f.style,"display","none"),f.removeAttribute("aria-label"),f.removeAttribute("role"),f.setAttribute("tabindex","0")),M!==l.data&&(l.data=M),i.className!=g&&(i.className=g),W.setStyle(e.element.style,"height",this.$lines.computeLineHeight(a,t,c)+"px"),W.setStyle(e.element.style,"top",this.$lines.computeLineTop(a,t,c)+"px"),e.text=M,f.style.display==="none"&&u.style.display==="none"?e.element.setAttribute("aria-hidden",!0):e.element.setAttribute("aria-hidden",!1),e},s.prototype.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},s.prototype.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},s.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},s.prototype.setShowFoldWidgets=function(e){e?W.addCssClass(this.element,"ace_folding-enabled"):W.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},s.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},s.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=W.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},s.prototype.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();if(e.x<t.left+n.left)return"markers";if(this.$showFoldWidgets&&e.x>n.right-t.right)return"foldWidgets"},s}();m.prototype.$fixedWidth=!1,m.prototype.$highlightGutterLine=!0,m.prototype.$renderer="",m.prototype.$showLineNumbers=!0,m.prototype.$showFoldWidgets=!0,I.implement(m.prototype,T);function h(s){var e=document.createTextNode("");s.appendChild(e);var t=W.createElement("span");s.appendChild(t);var n=W.createElement("span");s.appendChild(n);var a=W.createElement("span");return n.appendChild(a),s}Re.Gutter=m}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(ze,Re,jr){var W=ze("../range").Range,I=ze("../lib/dom"),o=function(){function k(r){this.element=I.createElement("div"),this.element.className="ace_layer ace_marker-layer",r.appendChild(this.element)}return k.prototype.setPadding=function(r){this.$padding=r},k.prototype.setSession=function(r){this.session=r},k.prototype.setMarkers=function(r){this.markers=r},k.prototype.elt=function(r,m){var h=this.i!=-1&&this.element.childNodes[this.i];h?this.i++:(h=document.createElement("div"),this.element.appendChild(h),this.i=-1),h.style.cssText=m,h.className=r},k.prototype.update=function(r){if(r){this.config=r,this.i=0;var m;for(var h in this.markers){var s=this.markers[h];if(!s.range){s.update(m,this,this.session,r);continue}var e=s.range.clipRows(r.firstRow,r.lastRow);if(!e.isEmpty())if(e=e.toScreenRange(this.session),s.renderer){var t=this.$getTop(e.start.row,r),n=this.$padding+e.start.column*r.characterWidth;s.renderer(m,e,n,t,r)}else s.type=="fullLine"?this.drawFullLineMarker(m,e,s.clazz,r):s.type=="screenLine"?this.drawScreenLineMarker(m,e,s.clazz,r):e.isMultiLine()?s.type=="text"?this.drawTextMarker(m,e,s.clazz,r):this.drawMultiLineMarker(m,e,s.clazz,r):this.drawSingleLineMarker(m,e,s.clazz+" ace_start ace_br15",r)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},k.prototype.$getTop=function(r,m){return(r-m.firstRowScreen)*m.lineHeight},k.prototype.drawTextMarker=function(r,m,h,s,e){for(var t=this.session,n=m.start.row,a=m.end.row,i=n,c=0,l=0,u=t.getScreenLastRowColumn(i),f=new W(i,m.start.column,i,l);i<=a;i++)f.start.row=f.end.row=i,f.start.column=i==n?m.start.column:t.getRowWrapIndent(i),f.end.column=u,c=l,l=u,u=i+1<a?t.getScreenLastRowColumn(i+1):i==a?0:m.end.column,this.drawSingleLineMarker(r,f,h+(i==n?" ace_start":"")+" ace_br"+T(i==n||i==n+1&&m.start.column,c<l,l>u,i==a),s,i==a?0:1,e)},k.prototype.drawMultiLineMarker=function(r,m,h,s,e){var t=this.$padding,n=s.lineHeight,a=this.$getTop(m.start.row,s),i=t+m.start.column*s.characterWidth;if(e=e||"",this.session.$bidiHandler.isBidiRow(m.start.row)){var c=m.clone();c.end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(r,c,h+" ace_br1 ace_start",s,null,e)}else this.elt(h+" ace_br1 ace_start","height:"+n+"px;right:0;top:"+a+"px;left:"+i+"px;"+(e||""));if(this.session.$bidiHandler.isBidiRow(m.end.row)){var c=m.clone();c.start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(r,c,h+" ace_br12",s,null,e)}else{a=this.$getTop(m.end.row,s);var l=m.end.column*s.characterWidth;this.elt(h+" ace_br12","height:"+n+"px;width:"+l+"px;top:"+a+"px;left:"+t+"px;"+(e||""))}if(n=(m.end.row-m.start.row-1)*s.lineHeight,!(n<=0)){a=this.$getTop(m.start.row+1,s);var u=(m.start.column?1:0)|(m.end.column?0:8);this.elt(h+(u?" ace_br"+u:""),"height:"+n+"px;right:0;top:"+a+"px;left:"+t+"px;"+(e||""))}},k.prototype.drawSingleLineMarker=function(r,m,h,s,e,t){if(this.session.$bidiHandler.isBidiRow(m.start.row))return this.drawBidiSingleLineMarker(r,m,h,s,e,t);var n=s.lineHeight,a=(m.end.column+(e||0)-m.start.column)*s.characterWidth,i=this.$getTop(m.start.row,s),c=this.$padding+m.start.column*s.characterWidth;this.elt(h,"height:"+n+"px;width:"+a+"px;top:"+i+"px;left:"+c+"px;"+(t||""))},k.prototype.drawBidiSingleLineMarker=function(r,m,h,s,e,t){var n=s.lineHeight,a=this.$getTop(m.start.row,s),i=this.$padding,c=this.session.$bidiHandler.getSelections(m.start.column,m.end.column);c.forEach(function(l){this.elt(h,"height:"+n+"px;width:"+(l.width+(e||0))+"px;top:"+a+"px;left:"+(i+l.left)+"px;"+(t||""))},this)},k.prototype.drawFullLineMarker=function(r,m,h,s,e){var t=this.$getTop(m.start.row,s),n=s.lineHeight;m.start.row!=m.end.row&&(n+=this.$getTop(m.end.row,s)-t),this.elt(h,"height:"+n+"px;top:"+t+"px;left:0;right:0;"+(e||""))},k.prototype.drawScreenLineMarker=function(r,m,h,s,e){var t=this.$getTop(m.start.row,s),n=s.lineHeight;this.elt(h,"height:"+n+"px;top:"+t+"px;left:0;right:0;"+(e||""))},k}();o.prototype.$padding=0;function T(k,r,m,h){return(k?1:0)|(r?2:0)|(m?4:0)|(h?8:0)}Re.Marker=o}),ace.define("ace/layer/text_util",["require","exports","module"],function(ze,Re,jr){var W=new Set(["text","rparen","lparen"]);Re.isTextToken=function(I){return W.has(I)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(ze,Re,jr){var W=ze("../lib/oop"),I=ze("../lib/dom"),o=ze("../lib/lang"),T=ze("./lines").Lines,k=ze("../lib/event_emitter").EventEmitter,r=ze("../config").nls,m=ze("./text_util").isTextToken,h=function(){function s(e){this.dom=I,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new T(this.element)}return s.prototype.$updateEolChar=function(){var e=this.session.doc,t=e.getNewLineCharacter()==`
`&&e.getNewLineMode()!="windows",n=t?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=n)return this.EOL_CHAR=n,!0},s.prototype.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},s.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},s.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},s.prototype.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(t){this._signal("changeCharacterSize",t)}.bind(this)),this.$pollSizeChanges()},s.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},s.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},s.prototype.setSession=function(e){this.session=e,e&&this.$computeTabString()},s.prototype.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,typeof e=="string"?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},s.prototype.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},s.prototype.setHighlightIndentGuides=function(e){return this.$highlightIndentGuides===e?!1:(this.$highlightIndentGuides=e,e)},s.prototype.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++)if(this.showTabs){var a=this.dom.createElement("span");a.className="ace_invisible ace_invisible_tab",a.textContent=o.stringRepeat(this.TAB_CHAR,n),t.push(a)}else t.push(this.dom.createTextNode(o.stringRepeat(" ",n),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i="ace_indent-guide",c=this.showSpaces?" ace_invisible ace_invisible_space":"",l=this.showSpaces?o.stringRepeat(this.SPACE_CHAR,this.tabSize):o.stringRepeat(" ",this.tabSize),u=this.showTabs?" ace_invisible ace_invisible_tab":"",f=this.showTabs?o.stringRepeat(this.TAB_CHAR,this.tabSize):l,a=this.dom.createElement("span");a.className=i+c,a.textContent=l,this.$tabStrings[" "]=a;var a=this.dom.createElement("span");a.className=i+u,a.textContent=f,this.$tabStrings["	"]=a}},s.prototype.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var a=Math.max(t,e.firstRow),i=Math.min(n,e.lastRow),c=this.element.childNodes,l=0,u=e.firstRow;u<a;u++){var f=this.session.getFoldLine(u);if(f)if(f.containsRow(a)){a=f.start.row;break}else u=f.end.row;l++}for(var d=!1,u=a,f=this.session.getNextFoldLine(u),w=f?f.start.row:1/0;u>w&&(u=f.end.row+1,f=this.session.getNextFoldLine(u,f),w=f?f.start.row:1/0),!(u>i);){var v=c[l++];if(v){this.dom.removeChildren(v),this.$renderLine(v,u,u==w?f:!1),d&&(v.style.top=this.$lines.computeLineTop(u,e,this.session)+"px");var p=e.lineHeight*this.session.getRowLength(u)+"px";v.style.height!=p&&(d=!0,v.style.height=p)}u++}if(d)for(;l<this.$lines.cells.length;){var y=this.$lines.cells[l++];y.element.style.top=this.$lines.computeLineTop(y.row,e,this.session)+"px"}},s.prototype.scrollLines=function(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,a=t?t.lastRow:-1;if(!t||a<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(t.lastRow>e.lastRow)for(var i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow)),this.$highlightIndentGuide()},s.prototype.$renderLinesFragment=function(e,t,n){for(var a=[],i=t,c=this.session.getNextFoldLine(i),l=c?c.start.row:1/0;i>l&&(i=c.end.row+1,c=this.session.getNextFoldLine(i,c),l=c?c.start.row:1/0),!(i>n);){var u=this.$lines.createCell(i,e,this.session),f=u.element;this.dom.removeChildren(f),I.setStyle(f.style,"height",this.$lines.computeLineHeight(i,e,this.session)+"px"),I.setStyle(f.style,"top",this.$lines.computeLineTop(i,e,this.session)+"px"),this.$renderLine(f,i,i==l?c:!1),this.$useLineGroups()?f.className="ace_line_group":f.className="ace_line",a.push(u),i++}return a},s.prototype.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,n=e.lastRow,a=this.$lines;a.getLength();)a.pop();a.push(this.$renderLinesFragment(e,t,n))},s.prototype.$renderToken=function(e,t,n,a){for(var i=this,c=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,l=this.dom.createFragment(this.element),u,f=0;u=c.exec(a);){var d=u[1],w=u[2],v=u[3],p=u[4],y=u[5];if(!(!i.showSpaces&&w)){var b=f!=u.index?a.slice(f,u.index):"";if(f=u.index+u[0].length,b&&l.appendChild(this.dom.createTextNode(b,this.element)),d){var x=i.session.getScreenTabSize(t+u.index);l.appendChild(i.$tabStrings[x].cloneNode(!0)),t+=x-1}else if(w)if(i.showSpaces){var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_space",_.textContent=o.stringRepeat(i.SPACE_CHAR,w.length),l.appendChild(_)}else l.appendChild(this.dom.createTextNode(w,this.element));else if(v){var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_space ace_invalid",_.textContent=o.stringRepeat(i.SPACE_CHAR,v.length),l.appendChild(_)}else if(p){t+=1;var _=this.dom.createElement("span");_.style.width=i.config.characterWidth*2+"px",_.className=i.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",_.textContent=i.showSpaces?i.SPACE_CHAR:p,l.appendChild(_)}else if(y){t+=1;var _=this.dom.createElement("span");_.style.width=i.config.characterWidth*2+"px",_.className="ace_cjk",_.textContent=y,l.appendChild(_)}}}if(l.appendChild(this.dom.createTextNode(f?a.slice(f):a,this.element)),m(n.type))e.appendChild(l);else{var g="ace_"+n.type.replace(/\./g," ace_"),_=this.dom.createElement("span");n.type=="fold"&&(_.style.width=n.value.length*this.config.characterWidth+"px",_.setAttribute("title",r("Unfold code"))),_.className=g,_.appendChild(l),e.appendChild(_)}return t+a.length},s.prototype.renderIndentGuide=function(e,t,n){var a=t.search(this.$indentGuideRe);if(a<=0||a>=n)return t;if(t[0]==" "){a-=a%this.tabSize;for(var i=a/this.tabSize,c=0;c<i;c++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),t.substr(a)}else if(t[0]=="	"){for(var c=0;c<a;c++)e.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),t.substr(a)}return this.$highlightIndentGuide(),t},s.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var e=this.session.doc.$lines;if(e){var t=this.session.selection.getCursor(),n=/^\s*/.exec(this.session.doc.getLine(t.row))[0].length,a=Math.floor(n/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:a,start:t.row};var i=this.session.$bracketHighlight;if(i){for(var c=this.session.$bracketHighlight.ranges,l=0;l<c.length;l++)if(t.row!==c[l].start.row){this.$highlightIndentGuideMarker.end=c[l].start.row,t.row>c[l].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&e[t.row]!==""&&t.column===e[t.row].length){this.$highlightIndentGuideMarker.dir=1;for(var l=t.row+1;l<e.length;l++){var u=e[l],f=/^\s*/.exec(u)[0].length;if(u!==""&&(this.$highlightIndentGuideMarker.end=l,f<=n))break}}this.$renderHighlightIndentGuide()}}},s.prototype.$clearActiveIndentGuide=function(){for(var e=this.$lines.cells,t=0;t<e.length;t++){var n=e[t],a=n.element.childNodes;if(a.length>0){for(var i=0;i<a.length;i++)if(a[i].classList&&a[i].classList.contains("ace_indent-guide-active")){a[i].classList.remove("ace_indent-guide-active");break}}}},s.prototype.$setIndentGuideActive=function(e,t){var n=this.session.doc.getLine(e.row);if(n!==""){var a=e.element.childNodes;if(a){var i=a[t-1];i&&i.classList&&i.classList.contains("ace_indent-guide")&&i.classList.add("ace_indent-guide-active")}}},s.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var e=this.$lines.cells;this.$clearActiveIndentGuide();var t=this.$highlightIndentGuideMarker.indentLevel;if(t!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var n=0;n<e.length;n++){var a=e[n];if(this.$highlightIndentGuideMarker.end&&a.row>=this.$highlightIndentGuideMarker.start+1){if(a.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(a,t)}}else for(var n=e.length-1;n>=0;n--){var a=e[n];if(this.$highlightIndentGuideMarker.end&&a.row<this.$highlightIndentGuideMarker.start){if(a.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(a,t)}}}},s.prototype.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},s.prototype.$renderWrappedLine=function(e,t,n){var a=0,i=0,c=n[0],l=0,u=this.$createLineElement();e.appendChild(u);for(var f=0;f<t.length;f++){var d=t[f],w=d.value;if(f==0&&this.displayIndentGuides){if(a=w.length,w=this.renderIndentGuide(u,w,c),!w)continue;a-=w.length}if(a+w.length<c)l=this.$renderToken(u,l,d,w),a+=w.length;else{for(;a+w.length>=c;)l=this.$renderToken(u,l,d,w.substring(0,c-a)),w=w.substring(c-a),a=c,u=this.$createLineElement(),e.appendChild(u),u.appendChild(this.dom.createTextNode(o.stringRepeat("\xA0",n.indent),this.element)),i++,l=0,c=n[i]||Number.MAX_VALUE;w.length!=0&&(a+=w.length,l=this.$renderToken(u,l,d,w))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(u,l,null,"",!0)},s.prototype.$renderSimpleLine=function(e,t){for(var n=0,a=0;a<t.length;a++){var i=t[a],c=i.value;if(!(a==0&&this.displayIndentGuides&&(c=this.renderIndentGuide(e,c),!c))){if(n+c.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,i,c);n=this.$renderToken(e,n,i,c)}}},s.prototype.$renderOverflowMessage=function(e,t,n,a,i){n&&this.$renderToken(e,t,n,a.slice(0,this.MAX_LINE_LENGTH-t));var c=this.dom.createElement("span");c.className="ace_inline_button ace_keyword ace_toggle_wrap",c.textContent=i?"<hide>":"<click to see more...>",e.appendChild(c)},s.prototype.$renderLine=function(e,t,n){if(!n&&n!=!1&&(n=this.session.getFoldLine(t)),n)var a=this.$getFoldLineTokens(t,n);else var a=this.session.getTokens(t);var i=e;if(a.length){var c=this.session.getRowSplitData(t);if(c&&c.length){this.$renderWrappedLine(e,a,c);var i=e.lastChild}else{var i=e;this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i)),this.$renderSimpleLine(i,a)}}else this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i));if(this.showEOL&&i){n&&(t=n.end.row);var l=this.dom.createElement("span");l.className="ace_invisible ace_invisible_eol",l.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,i.appendChild(l)}},s.prototype.$getFoldLineTokens=function(e,t){var n=this.session,a=[];function i(l,u,f){for(var d=0,w=0;w+l[d].value.length<u;)if(w+=l[d].value.length,d++,d==l.length)return;if(w!=u){var v=l[d].value.substring(u-w);v.length>f-u&&(v=v.substring(0,f-u)),a.push({type:l[d].type,value:v}),w=u+v.length,d+=1}for(;w<f&&d<l.length;){var v=l[d].value;v.length+w>f?a.push({type:l[d].type,value:v.substring(0,f-w)}):a.push(l[d]),w+=v.length,d+=1}}var c=n.getTokens(e);return t.walk(function(l,u,f,d,w){l!=null?a.push({type:"fold",value:l}):(w&&(c=n.getTokens(u)),c.length&&i(c,d,f))},t.end.row,this.session.getLine(t.end.row).length),a},s.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},s}();h.prototype.EOF_CHAR="\xB6",h.prototype.EOL_CHAR_LF="\xAC",h.prototype.EOL_CHAR_CRLF="\xA4",h.prototype.EOL_CHAR=h.prototype.EOL_CHAR_LF,h.prototype.TAB_CHAR="\u2014",h.prototype.SPACE_CHAR="\xB7",h.prototype.$padding=0,h.prototype.MAX_LINE_LENGTH=1e4,h.prototype.showInvisibles=!1,h.prototype.showSpaces=!1,h.prototype.showTabs=!1,h.prototype.showEOL=!1,h.prototype.displayIndentGuides=!0,h.prototype.$highlightIndentGuides=!0,h.prototype.$tabStrings=[],h.prototype.destroy={},h.prototype.onChangeTabSize=h.prototype.$computeTabString,W.implement(h.prototype,k),Re.Text=h}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(ze,Re,jr){var W=ze("../lib/dom"),I=function(){function o(T){this.element=W.createElement("div"),this.element.className="ace_layer ace_cursor-layer",T.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),W.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return o.prototype.$updateOpacity=function(T){for(var k=this.cursors,r=k.length;r--;)W.setStyle(k[r].style,"opacity",T?"":"0")},o.prototype.$startCssAnimation=function(){for(var T=this.cursors,k=T.length;k--;)T[k].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&W.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},o.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,W.removeCssClass(this.element,"ace_animate-blinking")},o.prototype.setPadding=function(T){this.$padding=T},o.prototype.setSession=function(T){this.session=T},o.prototype.setBlinking=function(T){T!=this.isBlinking&&(this.isBlinking=T,this.restartTimer())},o.prototype.setBlinkInterval=function(T){T!=this.blinkInterval&&(this.blinkInterval=T,this.restartTimer())},o.prototype.setSmoothBlinking=function(T){T!=this.smoothBlinking&&(this.smoothBlinking=T,W.setCssClass(this.element,"ace_smooth-blinking",T),this.$updateCursors(!0),this.restartTimer())},o.prototype.addCursor=function(){var T=W.createElement("div");return T.className="ace_cursor",this.element.appendChild(T),this.cursors.push(T),T},o.prototype.removeCursor=function(){if(this.cursors.length>1){var T=this.cursors.pop();return T.parentNode.removeChild(T),T}},o.prototype.hideCursor=function(){this.isVisible=!1,W.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},o.prototype.showCursor=function(){this.isVisible=!0,W.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},o.prototype.restartTimer=function(){var T=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,W.removeCssClass(this.element,"ace_smooth-blinking")),T(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&W.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),W.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var k=function(){this.timeoutId=setTimeout(function(){T(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){T(!0),k()},this.blinkInterval),k()}},o.prototype.getPixelPosition=function(T,k){if(!this.config||!this.session)return{left:0,top:0};T||(T=this.session.selection.getCursor());var r=this.session.documentToScreenPosition(T),m=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,T.row)?this.session.$bidiHandler.getPosLeft(r.column):r.column*this.config.characterWidth),h=(r.row-(k?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:m,top:h}},o.prototype.isCursorInView=function(T,k){return T.top>=0&&T.top<k.maxHeight},o.prototype.update=function(T){this.config=T;var k=this.session.$selectionMarkers,r=0,m=0;(k===void 0||k.length===0)&&(k=[{cursor:null}]);for(var r=0,h=k.length;r<h;r++){var s=this.getPixelPosition(k[r].cursor,!0);if(!((s.top>T.height+T.offset||s.top<0)&&r>1)){var e=this.cursors[m++]||this.addCursor(),t=e.style;this.drawCursor?this.drawCursor(e,s,T,k[r],this.session):this.isCursorInView(s,T)?(W.setStyle(t,"display","block"),W.translate(e,s.left,s.top),W.setStyle(t,"width",Math.round(T.characterWidth)+"px"),W.setStyle(t,"height",T.lineHeight+"px")):W.setStyle(t,"display","none")}}for(;this.cursors.length>m;)this.removeCursor();var n=this.session.getOverwrite();this.$setOverwrite(n),this.$pixelPos=s,this.restartTimer()},o.prototype.$setOverwrite=function(T){T!=this.overwrite&&(this.overwrite=T,T?W.addCssClass(this.element,"ace_overwrite-cursors"):W.removeCssClass(this.element,"ace_overwrite-cursors"))},o.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},o}();I.prototype.$padding=0,I.prototype.drawCursor=null,Re.Cursor=I}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(ze,Re,jr){var W=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(a[c]=i[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),I=ze("./lib/oop"),o=ze("./lib/dom"),T=ze("./lib/event"),k=ze("./lib/event_emitter").EventEmitter,r=32768,m=function(){function e(t,n){this.element=o.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+n,this.inner=o.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,T.addListener(this.element,"scroll",this.onScroll.bind(this)),T.addListener(this.element,"mousedown",T.preventDefault)}return e.prototype.setVisible=function(t){this.element.style.display=t?"":"none",this.isVisible=t,this.coeff=1},e}();I.implement(m.prototype,k);var h=function(e){W(t,e);function t(n,a){var i=e.call(this,n,"-v")||this;return i.scrollTop=0,i.scrollHeight=0,a.$scrollbarWidth=i.width=o.scrollbarWidth(n.ownerDocument),i.inner.style.width=i.element.style.width=(i.width||15)+5+"px",i.$minWidth=0,i}return t.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var n=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-n)/(this.coeff-n)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},t.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},t.prototype.setHeight=function(n){this.element.style.height=n+"px"},t.prototype.setScrollHeight=function(n){this.scrollHeight=n,n>r?(this.coeff=r/n,n=r):this.coeff!=1&&(this.coeff=1),this.inner.style.height=n+"px"},t.prototype.setScrollTop=function(n){this.scrollTop!=n&&(this.skipEvent=!0,this.scrollTop=n,this.element.scrollTop=n*this.coeff)},t}(m);h.prototype.setInnerHeight=h.prototype.setScrollHeight;var s=function(e){W(t,e);function t(n,a){var i=e.call(this,n,"-h")||this;return i.scrollLeft=0,i.height=a.$scrollbarWidth,i.inner.style.height=i.element.style.height=(i.height||15)+5+"px",i}return t.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},t.prototype.getHeight=function(){return this.isVisible?this.height:0},t.prototype.setWidth=function(n){this.element.style.width=n+"px"},t.prototype.setInnerWidth=function(n){this.inner.style.width=n+"px"},t.prototype.setScrollWidth=function(n){this.inner.style.width=n+"px"},t.prototype.setScrollLeft=function(n){this.scrollLeft!=n&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=n)},t}(m);Re.ScrollBar=h,Re.ScrollBarV=h,Re.ScrollBarH=s,Re.VScrollBar=h,Re.HScrollBar=s}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(ze,Re,jr){var W=this&&this.__extends||function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),I=ze("./lib/oop"),o=ze("./lib/dom"),T=ze("./lib/event"),k=ze("./lib/event_emitter").EventEmitter;o.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var r=function(){function s(e,t){this.element=o.createElement("div"),this.element.className="ace_sb"+t,this.inner=o.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,T.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return s.prototype.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1},s}();I.implement(r.prototype,k);var m=function(s){W(e,s);function e(t,n){var a=s.call(this,t,"-v")||this;return a.scrollTop=0,a.scrollHeight=0,a.parent=t,a.width=a.VScrollWidth,a.renderer=n,a.inner.style.width=a.element.style.width=(a.width||15)+"px",a.$minWidth=0,a}return e.prototype.onMouseDown=function(t,n){if(t==="mousedown"&&!(T.getButton(n)!==0||n.detail===2)){if(n.target===this.inner){var a=this,i=n.clientY,c=function(p){i=p.clientY},l=function(){clearInterval(w)},u=n.clientY,f=this.thumbTop,d=function(){if(i!==void 0){var p=a.scrollTopFromThumbTop(f+i-u);p!==a.scrollTop&&a._emit("scroll",{data:p})}};T.capture(this.inner,c,l);var w=setInterval(d,20);return T.preventDefault(n)}var v=n.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(v)}),T.preventDefault(n)}},e.prototype.getHeight=function(){return this.height},e.prototype.scrollTopFromThumbTop=function(t){var n=t*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return n=n>>0,n<0?n=0:n>this.pageHeight-this.viewHeight&&(n=this.pageHeight-this.viewHeight),n},e.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},e.prototype.setHeight=function(t){this.height=Math.max(0,t),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},e.prototype.setScrollHeight=function(t,n){this.pageHeight===t&&!n||(this.pageHeight=t,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},e.prototype.setScrollTop=function(t){this.scrollTop=t,t<0&&(t=0),this.thumbTop=t*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},e}(r);m.prototype.setInnerHeight=m.prototype.setScrollHeight;var h=function(s){W(e,s);function e(t,n){var a=s.call(this,t,"-h")||this;return a.scrollLeft=0,a.scrollWidth=0,a.height=a.HScrollHeight,a.inner.style.height=a.element.style.height=(a.height||12)+"px",a.renderer=n,a}return e.prototype.onMouseDown=function(t,n){if(t==="mousedown"&&!(T.getButton(n)!==0||n.detail===2)){if(n.target===this.inner){var a=this,i=n.clientX,c=function(p){i=p.clientX},l=function(){clearInterval(w)},u=n.clientX,f=this.thumbLeft,d=function(){if(i!==void 0){var p=a.scrollLeftFromThumbLeft(f+i-u);p!==a.scrollLeft&&a._emit("scroll",{data:p})}};T.capture(this.inner,c,l);var w=setInterval(d,20);return T.preventDefault(n)}var v=n.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(v)}),T.preventDefault(n)}},e.prototype.getHeight=function(){return this.isVisible?this.height:0},e.prototype.scrollLeftFromThumbLeft=function(t){var n=t*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return n=n>>0,n<0?n=0:n>this.pageWidth-this.viewWidth&&(n=this.pageWidth-this.viewWidth),n},e.prototype.setWidth=function(t){this.width=Math.max(0,t),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},e.prototype.setScrollWidth=function(t,n){this.pageWidth===t&&!n||(this.pageWidth=t,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},e.prototype.setScrollLeft=function(t){this.scrollLeft=t,t<0&&(t=0),this.thumbLeft=t*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},e}(r);h.prototype.setInnerWidth=h.prototype.setScrollWidth,Re.ScrollBar=m,Re.ScrollBarV=m,Re.ScrollBarH=h,Re.VScrollBar=m,Re.HScrollBar=h}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(ze,Re,jr){var W=ze("./lib/event"),I=function(){function o(T,k){this.onRender=T,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=k||window;var r=this;this._flush=function(m){r.pending=!1;var h=r.changes;if(h&&(W.blockIdle(100),r.changes=0,r.onRender(h)),r.changes){if(r.$recursionLimit--<0)return;r.schedule()}else r.$recursionLimit=2}}return o.prototype.schedule=function(T){this.changes=this.changes|T,this.changes&&!this.pending&&(W.nextFrame(this._flush),this.pending=!0)},o.prototype.clear=function(T){var k=this.changes;return this.changes=0,k},o}();Re.RenderLoop=I}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(ze,Re,jr){var W=ze("../lib/oop"),I=ze("../lib/dom"),o=ze("../lib/lang"),T=ze("../lib/event"),k=ze("../lib/useragent"),r=ze("../lib/event_emitter").EventEmitter,m=512,h=typeof ResizeObserver=="function",s=200,e=function(){function t(n){this.el=I.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=I.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=I.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),n.appendChild(this.el),this.$measureNode.textContent=o.stringRepeat("X",m),this.$characterSize={width:0,height:0},h?this.$addObserver():this.checkForSizeChanges()}return t.prototype.$setMeasureNodeStyles=function(n,a){n.width=n.height="auto",n.left=n.top="0px",n.visibility="hidden",n.position="absolute",n.whiteSpace="pre",k.isIE<8?n["font-family"]="inherit":n.font="inherit",n.overflow=a?"hidden":"visible"},t.prototype.checkForSizeChanges=function(n){if(n===void 0&&(n=this.$measureSizes()),n&&(this.$characterSize.width!==n.width||this.$characterSize.height!==n.height)){this.$measureNode.style.fontWeight="bold";var a=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=n,this.charSizes=Object.create(null),this.allowBoldFonts=a&&a.width===n.width&&a.height===n.height,this._emit("changeCharacterSize",{data:n})}},t.prototype.$addObserver=function(){var n=this;this.$observer=new window.ResizeObserver(function(a){n.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},t.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var n=this;return this.$pollSizeChangesTimer=T.onIdle(function a(){n.checkForSizeChanges(),T.onIdle(a,500)},500)},t.prototype.setPolling=function(n){n?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},t.prototype.$measureSizes=function(n){var a={height:(n||this.$measureNode).clientHeight,width:(n||this.$measureNode).clientWidth/m};return a.width===0||a.height===0?null:a},t.prototype.$measureCharWidth=function(n){this.$main.textContent=o.stringRepeat(n,m);var a=this.$main.getBoundingClientRect();return a.width/m},t.prototype.getCharacterWidth=function(n){var a=this.charSizes[n];return a===void 0&&(a=this.charSizes[n]=this.$measureCharWidth(n)/this.$characterSize.width),a},t.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},t.prototype.$getZoom=function(n){return!n||!n.parentElement?1:(window.getComputedStyle(n).zoom||1)*this.$getZoom(n.parentElement)},t.prototype.$initTransformMeasureNodes=function(){var n=function(a,i){return["div",{style:"position: absolute;top:"+a+"px;left:"+i+"px;"}]};this.els=I.buildDom([n(0,0),n(s,0),n(0,s),n(s,s)],this.el)},t.prototype.transformCoordinates=function(n,a){if(n){var i=this.$getZoom(this.el);n=f(1/i,n)}function c(S,O,P){var U=S[1]*O[0]-S[0]*O[1];return[(-O[1]*P[0]+O[0]*P[1])/U,(+S[1]*P[0]-S[0]*P[1])/U]}function l(S,O){return[S[0]-O[0],S[1]-O[1]]}function u(S,O){return[S[0]+O[0],S[1]+O[1]]}function f(S,O){return[S*O[0],S*O[1]]}this.els||this.$initTransformMeasureNodes();function d(S){var O=S.getBoundingClientRect();return[O.left,O.top]}var w=d(this.els[0]),v=d(this.els[1]),p=d(this.els[2]),y=d(this.els[3]),b=c(l(y,v),l(y,p),l(u(v,p),u(y,w))),x=f(1+b[0],l(v,w)),_=f(1+b[1],l(p,w));if(a){var g=a,A=b[0]*g[0]/s+b[1]*g[1]/s+1,M=u(f(g[0],x),f(g[1],_));return u(f(1/A/s,M),w)}var L=l(n,w),E=c(l(x,f(b[0],L)),l(_,f(b[1],L)),L);return f(s,E)},t}();e.prototype.$characterSize={width:0,height:0},W.implement(e.prototype,r),Re.FontMetrics=e}),ace.define("ace/css/editor-css",["require","exports","module"],function(ze,Re,jr){jr.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(ze,Re,jr){var W=ze("../lib/dom"),I=ze("../lib/oop"),o=ze("../lib/event_emitter").EventEmitter,T=function(){function k(r,m){this.canvas=W.createElement("canvas"),this.renderer=m,this.pixelRatio=1,this.maxHeight=m.layerConfig.maxHeight,this.lineHeight=m.layerConfig.lineHeight,this.canvasHeight=r.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=r.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top=0+"px",this.canvas.style.right=0+"px",this.canvas.style.zIndex=7+"px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},r.element.appendChild(this.canvas)}return k.prototype.$updateDecorators=function(r){var m=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(r){this.maxHeight=r.maxHeight,this.lineHeight=r.lineHeight,this.canvasHeight=r.height;var h=(r.lastRow+1)*this.lineHeight;h<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var s=this.canvas.getContext("2d");function e(y,b){return y.priority<b.priority?-1:y.priority>b.priority?1:0}var t=this.renderer.session.$annotations;if(s.clearRect(0,0,this.canvas.width,this.canvas.height),t){var n={info:1,warning:2,error:3};t.forEach(function(y){y.priority=n[y.type]||null}),t=t.sort(e);for(var a=this.renderer.session.$foldData,i=0;i<t.length;i++){var c=t[i].row,l=this.compensateFoldRows(c,a),u=Math.round((c-l)*this.lineHeight*this.heightRatio),f=Math.round((c-l)*this.lineHeight*this.heightRatio),d=Math.round(((c-l)*this.lineHeight+this.lineHeight)*this.heightRatio),w=d-f;if(w<this.minDecorationHeight){var v=(f+d)/2|0;v<this.halfMinDecorationHeight?v=this.halfMinDecorationHeight:v+this.halfMinDecorationHeight>this.canvasHeight&&(v=this.canvasHeight-this.halfMinDecorationHeight),f=Math.round(v-this.halfMinDecorationHeight),d=Math.round(v+this.halfMinDecorationHeight)}s.fillStyle=m[t[i].type]||null,s.fillRect(0,u,this.canvasWidth,d-f)}}var p=this.renderer.session.selection.getCursor();if(p){var l=this.compensateFoldRows(p.row,a),u=Math.round((p.row-l)*this.lineHeight*this.heightRatio);s.fillStyle="rgba(0, 0, 0, 0.5)",s.fillRect(0,u,this.canvasWidth,2)}},k.prototype.compensateFoldRows=function(r,m){var h=0;if(m&&m.length>0)for(var s=0;s<m.length;s++)r>m[s].start.row&&r<m[s].end.row?h+=r-m[s].start.row:r>=m[s].end.row&&(h+=m[s].end.row-m[s].start.row);return h},k}();I.implement(T.prototype,o),Re.Decorator=T}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(ze,Re,jr){var W=ze("./lib/oop"),I=ze("./lib/dom"),o=ze("./lib/lang"),T=ze("./config"),k=ze("./layer/gutter").Gutter,r=ze("./layer/marker").Marker,m=ze("./layer/text").Text,h=ze("./layer/cursor").Cursor,s=ze("./scrollbar").HScrollBar,e=ze("./scrollbar").VScrollBar,t=ze("./scrollbar_custom").HScrollBar,n=ze("./scrollbar_custom").VScrollBar,a=ze("./renderloop").RenderLoop,i=ze("./layer/font_metrics").FontMetrics,c=ze("./lib/event_emitter").EventEmitter,l=ze("./css/editor-css"),u=ze("./layer/decorators").Decorator,f=ze("./lib/useragent");I.importCssString(l,"ace_editor.css",!1);var d=function(){function w(v,p){var y=this;this.container=v||I.createElement("div"),I.addCssClass(this.container,"ace_editor"),I.HI_DPI&&I.addCssClass(this.container,"ace_hidpi"),this.setTheme(p),T.get("useStrictCSP")==null&&T.set("useStrictCSP",!1),this.$gutter=I.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=I.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=I.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new k(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new r(this.content);var b=this.$textLayer=new m(this.content);this.canvas=b.element,this.$markerFront=new r(this.content),this.$cursorLayer=new h(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new e(this.container,this),this.scrollBarH=new s(this.container,this),this.scrollBarV.on("scroll",function(x){y.$scrollAnimation||y.session.setScrollTop(x.data-y.scrollMargin.top)}),this.scrollBarH.on("scroll",function(x){y.$scrollAnimation||y.session.setScrollLeft(x.data-y.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new i(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(x){y.updateCharacterSize(),y.onResize(!0,y.gutterWidth,y.$size.width,y.$size.height),y._signal("changeCharacterSize",x)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!f.isIOS,this.$loop=new a(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),T.resetOptions(this),T._signal("renderer",this)}return w.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),I.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},w.prototype.setSession=function(v){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=v,v&&this.scrollMargin.top&&v.getScrollTop()<=0&&v.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(v),this.$markerBack.setSession(v),this.$markerFront.setSession(v),this.$gutterLayer.setSession(v),this.$textLayer.setSession(v),v&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},w.prototype.updateLines=function(v,p,y){if(p===void 0&&(p=1/0),this.$changedLines?(this.$changedLines.firstRow>v&&(this.$changedLines.firstRow=v),this.$changedLines.lastRow<p&&(this.$changedLines.lastRow=p)):this.$changedLines={firstRow:v,lastRow:p},this.$changedLines.lastRow<this.layerConfig.firstRow)if(y)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},w.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},w.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},w.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},w.prototype.updateFull=function(v){v?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},w.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},w.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},w.prototype.onResize=function(v,p,y,b){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=v?1:0;var x=this.container;b||(b=x.clientHeight||x.scrollHeight),y||(y=x.clientWidth||x.scrollWidth);var _=this.$updateCachedSize(v,p,y,b);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!y&&!b)return this.resizing=0;v&&(this.$gutterLayer.$padding=null),v?this.$renderChanges(_|this.$changes,!0):this.$loop.schedule(_|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},w.prototype.$updateCachedSize=function(v,p,y,b){b-=this.$extraHeight||0;var x=0,_=this.$size,g={width:_.width,height:_.height,scrollerHeight:_.scrollerHeight,scrollerWidth:_.scrollerWidth};if(b&&(v||_.height!=b)&&(_.height=b,x|=this.CHANGE_SIZE,_.scrollerHeight=_.height,this.$horizScroll&&(_.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(_.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",x=x|this.CHANGE_SCROLL),y&&(v||_.width!=y)){x|=this.CHANGE_SIZE,_.width=y,p==null&&(p=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=p,I.setStyle(this.scrollBarH.element.style,"left",p+"px"),I.setStyle(this.scroller.style,"left",p+this.margin.left+"px"),_.scrollerWidth=Math.max(0,y-p-this.scrollBarV.getWidth()-this.margin.h),I.setStyle(this.$gutter.style,"left",this.margin.left+"px");var A=this.scrollBarV.getWidth()+"px";I.setStyle(this.scrollBarH.element.style,"right",A),I.setStyle(this.scroller.style,"right",A),I.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(_.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||v)&&(x|=this.CHANGE_FULL)}return _.$dirty=!y||!b,x&&this._signal("resize",g),x},w.prototype.onGutterResize=function(v){var p=this.$showGutter?v:0;p!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,p,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},w.prototype.adjustWrapLimit=function(){var v=this.$size.scrollerWidth-this.$padding*2,p=Math.floor(v/this.characterWidth);return this.session.adjustWrapLimit(p,this.$showPrintMargin&&this.$printMarginColumn)},w.prototype.setAnimatedScroll=function(v){this.setOption("animatedScroll",v)},w.prototype.getAnimatedScroll=function(){return this.$animatedScroll},w.prototype.setShowInvisibles=function(v){this.setOption("showInvisibles",v),this.session.$bidiHandler.setShowInvisibles(v)},w.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},w.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},w.prototype.setDisplayIndentGuides=function(v){this.setOption("displayIndentGuides",v)},w.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},w.prototype.setHighlightIndentGuides=function(v){this.setOption("highlightIndentGuides",v)},w.prototype.setShowPrintMargin=function(v){this.setOption("showPrintMargin",v)},w.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},w.prototype.setPrintMarginColumn=function(v){this.setOption("printMarginColumn",v)},w.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},w.prototype.getShowGutter=function(){return this.getOption("showGutter")},w.prototype.setShowGutter=function(v){return this.setOption("showGutter",v)},w.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},w.prototype.setFadeFoldWidgets=function(v){this.setOption("fadeFoldWidgets",v)},w.prototype.setHighlightGutterLine=function(v){this.setOption("highlightGutterLine",v)},w.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},w.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var v=I.createElement("div");v.className="ace_layer ace_print-margin-layer",this.$printMarginEl=I.createElement("div"),this.$printMarginEl.className="ace_print-margin",v.appendChild(this.$printMarginEl),this.content.insertBefore(v,this.content.firstChild)}var p=this.$printMarginEl.style;p.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",p.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},w.prototype.getContainerElement=function(){return this.container},w.prototype.getMouseEventTarget=function(){return this.scroller},w.prototype.getTextAreaContainer=function(){return this.container},w.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var v=this.textarea.style,p=this.$composition;if(!this.$keepTextAreaAtCursor&&!p){I.translate(this.textarea,-100,0);return}var y=this.$cursorLayer.$pixelPos;if(y){p&&p.markerRange&&(y=this.$cursorLayer.getPixelPosition(p.markerRange.start,!0));var b=this.layerConfig,x=y.top,_=y.left;x-=b.offset;var g=p&&p.useTextareaForIME||f.isMobile?this.lineHeight:1;if(x<0||x>b.height-g){I.translate(this.textarea,0,0);return}var A=1,M=this.$size.height-g;if(!p)x+=this.lineHeight;else if(p.useTextareaForIME){var L=this.textarea.value;A=this.characterWidth*this.session.$getStringScreenWidth(L)[0]}else x+=this.lineHeight+2;_-=this.scrollLeft,_>this.$size.scrollerWidth-A&&(_=this.$size.scrollerWidth-A),_+=this.gutterWidth+this.margin.left,I.setStyle(v,"height",g+"px"),I.setStyle(v,"width",A+"px"),I.translate(this.textarea,Math.min(_,this.$size.scrollerWidth-A),Math.min(x,M))}}},w.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},w.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},w.prototype.getLastFullyVisibleRow=function(){var v=this.layerConfig,p=v.lastRow,y=this.session.documentToScreenRow(p,0)*v.lineHeight;return y-this.session.getScrollTop()>v.height-v.lineHeight?p-1:p},w.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},w.prototype.setPadding=function(v){this.$padding=v,this.$textLayer.setPadding(v),this.$cursorLayer.setPadding(v),this.$markerFront.setPadding(v),this.$markerBack.setPadding(v),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},w.prototype.setScrollMargin=function(v,p,y,b){var x=this.scrollMargin;x.top=v|0,x.bottom=p|0,x.right=b|0,x.left=y|0,x.v=x.top+x.bottom,x.h=x.left+x.right,x.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-x.top),this.updateFull()},w.prototype.setMargin=function(v,p,y,b){var x=this.margin;x.top=v|0,x.bottom=p|0,x.right=b|0,x.left=y|0,x.v=x.top+x.bottom,x.h=x.left+x.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},w.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},w.prototype.setHScrollBarAlwaysVisible=function(v){this.setOption("hScrollBarAlwaysVisible",v)},w.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},w.prototype.setVScrollBarAlwaysVisible=function(v){this.setOption("vScrollBarAlwaysVisible",v)},w.prototype.$updateScrollBarV=function(){var v=this.layerConfig.maxHeight,p=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(v-=(p-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>v-p&&(v=this.scrollTop+p,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(v+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},w.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},w.prototype.freeze=function(){this.$frozen=!0},w.prototype.unfreeze=function(){this.$frozen=!1},w.prototype.$renderChanges=function(v,p){if(this.$changes&&(v|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!v&&!p){this.$changes|=v;return}if(this.$size.$dirty)return this.$changes|=v,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",v),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var y=this.layerConfig;if(v&this.CHANGE_FULL||v&this.CHANGE_SIZE||v&this.CHANGE_TEXT||v&this.CHANGE_LINES||v&this.CHANGE_SCROLL||v&this.CHANGE_H_SCROLL){if(v|=this.$computeLayerConfig()|this.$loop.clear(),y.firstRow!=this.layerConfig.firstRow&&y.firstRowScreen==this.layerConfig.firstRowScreen){var b=this.scrollTop+(y.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;b>0&&(this.scrollTop=b,v=v|this.CHANGE_SCROLL,v|=this.$computeLayerConfig()|this.$loop.clear())}y=this.layerConfig,this.$updateScrollBarV(),v&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),I.translate(this.content,-this.scrollLeft,-y.offset);var x=y.width+2*this.$padding+"px",_=y.minHeight+"px";I.setStyle(this.content.style,"width",x),I.setStyle(this.content.style,"height",_)}if(v&this.CHANGE_H_SCROLL&&(I.translate(this.content,-this.scrollLeft,-y.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),v&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(y),this.$showGutter&&this.$gutterLayer.update(y),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(y),this.$markerBack.update(y),this.$markerFront.update(y),this.$cursorLayer.update(y),this.$moveTextAreaToCursor(),this._signal("afterRender",v);return}if(v&this.CHANGE_SCROLL){this.$changedLines=null,v&this.CHANGE_TEXT||v&this.CHANGE_LINES?this.$textLayer.update(y):this.$textLayer.scrollLines(y),this.$showGutter&&(v&this.CHANGE_GUTTER||v&this.CHANGE_LINES?this.$gutterLayer.update(y):this.$gutterLayer.scrollLines(y)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(y),this.$markerBack.update(y),this.$markerFront.update(y),this.$cursorLayer.update(y),this.$moveTextAreaToCursor(),this._signal("afterRender",v);return}v&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(y),this.$showGutter&&this.$gutterLayer.update(y),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(y)):v&this.CHANGE_LINES?((this.$updateLines()||v&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(y),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(y)):v&this.CHANGE_TEXT||v&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(y),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(y)):v&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(y),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(y)),v&this.CHANGE_CURSOR&&(this.$cursorLayer.update(y),this.$moveTextAreaToCursor()),v&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(y),v&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(y),this._signal("afterRender",v)},w.prototype.$autosize=function(){var v=this.session.getScreenLength()*this.lineHeight,p=this.$maxLines*this.lineHeight,y=Math.min(p,Math.max((this.$minLines||1)*this.lineHeight,v))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(y+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&y>this.$maxPixelHeight&&(y=this.$maxPixelHeight);var b=y<=2*this.lineHeight,x=!b&&v>p;if(y!=this.desiredHeight||this.$size.height!=this.desiredHeight||x!=this.$vScroll){x!=this.$vScroll&&(this.$vScroll=x,this.scrollBarV.setVisible(x));var _=this.container.clientWidth;this.container.style.height=y+"px",this.$updateCachedSize(!0,this.$gutterWidth,_,y),this.desiredHeight=y,this._signal("autosize")}},w.prototype.$computeLayerConfig=function(){var v=this.session,p=this.$size,y=p.height<=2*this.lineHeight,b=this.session.getScreenLength(),x=b*this.lineHeight,_=this.$getLongestLine(),g=!y&&(this.$hScrollBarAlwaysVisible||p.scrollerWidth-_-2*this.$padding<0),A=this.$horizScroll!==g;A&&(this.$horizScroll=g,this.scrollBarH.setVisible(g));var M=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var L=p.scrollerHeight+this.lineHeight,E=!this.$maxLines&&this.$scrollPastEnd?(p.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;x+=E;var S=this.scrollMargin;this.session.setScrollTop(Math.max(-S.top,Math.min(this.scrollTop,x-p.scrollerHeight+S.bottom))),this.session.setScrollLeft(Math.max(-S.left,Math.min(this.scrollLeft,_+2*this.$padding-p.scrollerWidth+S.right)));var O=!y&&(this.$vScrollBarAlwaysVisible||p.scrollerHeight-x+E<0||this.scrollTop>S.top),P=M!==O;P&&(this.$vScroll=O,this.scrollBarV.setVisible(O));var U=this.scrollTop%this.lineHeight,R=Math.ceil(L/this.lineHeight)-1,j=Math.max(0,Math.round((this.scrollTop-U)/this.lineHeight)),B=j+R,z,G,V=this.lineHeight;j=v.screenToDocumentRow(j,0);var et=v.getFoldLine(j);et&&(j=et.start.row),z=v.documentToScreenRow(j,0),G=v.getRowLength(j)*V,B=Math.min(v.screenToDocumentRow(B,0),v.getLength()-1),L=p.scrollerHeight+v.getRowLength(B)*V+G,U=this.scrollTop-z*V;var J=0;return(this.layerConfig.width!=_||A)&&(J=this.CHANGE_H_SCROLL),(A||P)&&(J|=this.$updateCachedSize(!0,this.gutterWidth,p.width,p.height),this._signal("scrollbarVisibilityChanged"),P&&(_=this.$getLongestLine())),this.layerConfig={width:_,padding:this.$padding,firstRow:j,firstRowScreen:z,lastRow:B,lineHeight:V,characterWidth:this.characterWidth,minHeight:L,maxHeight:x,offset:U,gutterOffset:V?Math.max(0,Math.ceil((U+p.height-p.scrollerHeight)/V)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(_-this.$padding),J},w.prototype.$updateLines=function(){if(this.$changedLines){var v=this.$changedLines.firstRow,p=this.$changedLines.lastRow;this.$changedLines=null;var y=this.layerConfig;if(!(v>y.lastRow+1)&&!(p<y.firstRow)){if(p===1/0){this.$showGutter&&this.$gutterLayer.update(y),this.$textLayer.update(y);return}return this.$textLayer.updateLines(y,v,p),!0}}},w.prototype.$getLongestLine=function(){var v=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(v+=1),this.$textLayer&&v>this.$textLayer.MAX_LINE_LENGTH&&(v=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(v*this.characterWidth))},w.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},w.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},w.prototype.addGutterDecoration=function(v,p){this.$gutterLayer.addGutterDecoration(v,p)},w.prototype.removeGutterDecoration=function(v,p){this.$gutterLayer.removeGutterDecoration(v,p)},w.prototype.updateBreakpoints=function(v){this.$loop.schedule(this.CHANGE_GUTTER)},w.prototype.setAnnotations=function(v){this.$gutterLayer.setAnnotations(v),this.$loop.schedule(this.CHANGE_GUTTER)},w.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},w.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},w.prototype.showCursor=function(){this.$cursorLayer.showCursor()},w.prototype.scrollSelectionIntoView=function(v,p,y){this.scrollCursorIntoView(v,y),this.scrollCursorIntoView(p,y)},w.prototype.scrollCursorIntoView=function(v,p,y){if(this.$size.scrollerHeight!==0){var b=this.$cursorLayer.getPixelPosition(v),x=b.left,_=b.top,g=y&&y.top||0,A=y&&y.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var M=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;M+g>_?(p&&M+g>_+this.lineHeight&&(_-=p*this.$size.scrollerHeight),_===0&&(_=-this.scrollMargin.top),this.session.setScrollTop(_)):M+this.$size.scrollerHeight-A<_+this.lineHeight&&(p&&M+this.$size.scrollerHeight-A<_-this.lineHeight&&(_+=p*this.$size.scrollerHeight),this.session.setScrollTop(_+this.lineHeight+A-this.$size.scrollerHeight));var L=this.scrollLeft,E=2*this.layerConfig.characterWidth;x-E<L?(x-=E,x<this.$padding+E&&(x=-this.scrollMargin.left),this.session.setScrollLeft(x)):(x+=E,L+this.$size.scrollerWidth<x+this.characterWidth?this.session.setScrollLeft(Math.round(x+this.characterWidth-this.$size.scrollerWidth)):L<=this.$padding&&x-L<this.characterWidth&&this.session.setScrollLeft(0))}},w.prototype.getScrollTop=function(){return this.session.getScrollTop()},w.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},w.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},w.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},w.prototype.scrollToRow=function(v){this.session.setScrollTop(v*this.lineHeight)},w.prototype.alignCursor=function(v,p){typeof v=="number"&&(v={row:v,column:0});var y=this.$cursorLayer.getPixelPosition(v),b=this.$size.scrollerHeight-this.lineHeight,x=y.top-b*(p||0);return this.session.setScrollTop(x),x},w.prototype.$calcSteps=function(v,p){var y=0,b=this.STEPS,x=[],_=function(g,A,M){return M*(Math.pow(g-1,3)+1)+A};for(y=0;y<b;++y)x.push(_(y/this.STEPS,v,p-v));return x},w.prototype.scrollToLine=function(v,p,y,b){var x=this.$cursorLayer.getPixelPosition({row:v,column:0}),_=x.top;p&&(_-=this.$size.scrollerHeight/2);var g=this.scrollTop;this.session.setScrollTop(_),y!==!1&&this.animateScrolling(g,b)},w.prototype.animateScrolling=function(v,p){var y=this.scrollTop;if(!this.$animatedScroll)return;var b=this;if(v==y)return;if(this.$scrollAnimation){var x=this.$scrollAnimation.steps;if(x.length&&(v=x[0],v==y))return}var _=b.$calcSteps(v,y);this.$scrollAnimation={from:v,to:y,steps:_},clearInterval(this.$timer),b.session.setScrollTop(_.shift()),b.session.$scrollTop=y;function g(){b.$timer=clearInterval(b.$timer),b.$scrollAnimation=null,b.$stopAnimation=!1,p&&p()}this.$timer=setInterval(function(){if(b.$stopAnimation){g();return}if(!b.session)return clearInterval(b.$timer);_.length?(b.session.setScrollTop(_.shift()),b.session.$scrollTop=y):y!=null?(b.session.$scrollTop=-1,b.session.setScrollTop(y),y=null):g()},10)},w.prototype.scrollToY=function(v){this.scrollTop!==v&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=v)},w.prototype.scrollToX=function(v){this.scrollLeft!==v&&(this.scrollLeft=v),this.$loop.schedule(this.CHANGE_H_SCROLL)},w.prototype.scrollTo=function(v,p){this.session.setScrollTop(p),this.session.setScrollLeft(v)},w.prototype.scrollBy=function(v,p){p&&this.session.setScrollTop(this.session.getScrollTop()+p),v&&this.session.setScrollLeft(this.session.getScrollLeft()+v)},w.prototype.isScrollableBy=function(v,p){if(p<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||p>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||v<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||v>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},w.prototype.pixelToScreenCoordinates=function(v,p){var y;if(this.$hasCssTransforms){y={top:0,left:0};var b=this.$fontMetrics.transformCoordinates([v,p]);v=b[1]-this.gutterWidth-this.margin.left,p=b[0]}else y=this.scroller.getBoundingClientRect();var x=v+this.scrollLeft-y.left-this.$padding,_=x/this.characterWidth,g=Math.floor((p+this.scrollTop-y.top)/this.lineHeight),A=this.$blockCursor?Math.floor(_):Math.round(_);return{row:g,column:A,side:_-A>0?1:-1,offsetX:x}},w.prototype.screenToTextCoordinates=function(v,p){var y;if(this.$hasCssTransforms){y={top:0,left:0};var b=this.$fontMetrics.transformCoordinates([v,p]);v=b[1]-this.gutterWidth-this.margin.left,p=b[0]}else y=this.scroller.getBoundingClientRect();var x=v+this.scrollLeft-y.left-this.$padding,_=x/this.characterWidth,g=this.$blockCursor?Math.floor(_):Math.round(_),A=Math.floor((p+this.scrollTop-y.top)/this.lineHeight);return this.session.screenToDocumentPosition(A,Math.max(g,0),x)},w.prototype.textToScreenCoordinates=function(v,p){var y=this.scroller.getBoundingClientRect(),b=this.session.documentToScreenPosition(v,p),x=this.$padding+(this.session.$bidiHandler.isBidiRow(b.row,v)?this.session.$bidiHandler.getPosLeft(b.column):Math.round(b.column*this.characterWidth)),_=b.row*this.lineHeight;return{pageX:y.left+x-this.scrollLeft,pageY:y.top+_-this.scrollTop}},w.prototype.visualizeFocus=function(){I.addCssClass(this.container,"ace_focus")},w.prototype.visualizeBlur=function(){I.removeCssClass(this.container,"ace_focus")},w.prototype.showComposition=function(v){this.$composition=v,v.cssText||(v.cssText=this.textarea.style.cssText),v.useTextareaForIME==null&&(v.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(I.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):v.markerId=this.session.addMarker(v.markerRange,"ace_composition_marker","text")},w.prototype.setCompositionText=function(v){var p=this.session.selection.cursor;this.addToken(v,"composition_placeholder",p.row,p.column),this.$moveTextAreaToCursor()},w.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),I.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var v=this.session.selection.cursor;this.removeExtraToken(v.row,v.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},w.prototype.setGhostText=function(v,p){var y=this.session.selection.cursor,b=p||{row:y.row,column:y.column};this.removeGhostText();var x=v.split(`
`);this.addToken(x[0],"ghost_text",b.row,b.column),this.$ghostText={text:v,position:{row:b.row,column:b.column}},x.length>1&&(this.$ghostTextWidget={text:x.slice(1).join(`
`),row:b.row,column:b.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget))},w.prototype.removeGhostText=function(){if(this.$ghostText){var v=this.$ghostText.position;this.removeExtraToken(v.row,v.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},w.prototype.addToken=function(v,p,y,b){var x=this.session;x.bgTokenizer.lines[y]=null;var _={type:p,value:v},g=x.getTokens(y);if(b==null||!g.length)g.push(_);else for(var A=0,M=0;M<g.length;M++){var L=g[M];if(A+=L.value.length,b<=A){var E=L.value.length-(A-b),S=L.value.slice(0,E),O=L.value.slice(E);g.splice(M,1,{type:L.type,value:S},_,{type:L.type,value:O});break}}this.updateLines(y,y)},w.prototype.removeExtraToken=function(v,p){this.session.bgTokenizer.lines[v]=null,this.updateLines(v,v)},w.prototype.setTheme=function(v,p){var y=this;if(this.$themeId=v,y._dispatchEvent("themeChange",{theme:v}),!v||typeof v=="string"){var b=v||this.$options.theme.initialValue;T.loadModule(["theme",b],x)}else x(v);function x(_){if(y.$themeId!=v)return p&&p();if(!_||!_.cssClass)throw new Error("couldn't load module "+v+" or it didn't call define");_.$id&&(y.$themeId=_.$id),I.importCssString(_.cssText,_.cssClass,y.container),y.theme&&I.removeCssClass(y.container,y.theme.cssClass);var g="padding"in _?_.padding:"padding"in(y.theme||{})?4:y.$padding;y.$padding&&g!=y.$padding&&y.setPadding(g),y.$theme=_.cssClass,y.theme=_,I.addCssClass(y.container,_.cssClass),I.setCssClass(y.container,"ace_dark",_.isDark),y.$size&&(y.$size.width=0,y.$updateSizeAsync()),y._dispatchEvent("themeLoaded",{theme:_}),p&&p()}},w.prototype.getTheme=function(){return this.$themeId},w.prototype.setStyle=function(v,p){I.setCssClass(this.container,v,p!==!1)},w.prototype.unsetStyle=function(v){I.removeCssClass(this.container,v)},w.prototype.setCursorStyle=function(v){I.setStyle(this.scroller.style,"cursor",v)},w.prototype.setMouseCursor=function(v){I.setStyle(this.scroller.style,"cursor",v)},w.prototype.attachToShadowRoot=function(){I.importCssString(l,"ace_editor.css",this.container)},w.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},w.prototype.$updateCustomScrollbar=function(v){var p=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,v===!0?(this.scrollBarV=new n(this.container,this),this.scrollBarH=new t(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(y){p.$scrollAnimation||p.session.setScrollTop(y.data-p.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(y){p.$scrollAnimation||p.session.setScrollLeft(y.data-p.scrollMargin.left)}),this.$scrollDecorator=new u(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new e(this.container,this),this.scrollBarH=new s(this.container,this),this.scrollBarV.addEventListener("scroll",function(y){p.$scrollAnimation||p.session.setScrollTop(y.data-p.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(y){p.$scrollAnimation||p.session.setScrollLeft(y.data-p.scrollMargin.left)}))},w.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var v=this;this.$resizeTimer=o.delayedCall(function(){v.destroyed||v.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(p){var y=p[0].contentRect.width,b=p[0].contentRect.height;Math.abs(v.$size.width-y)>1||Math.abs(v.$size.height-b)>1?v.$resizeTimer.delay():v.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},w}();d.prototype.CHANGE_CURSOR=1,d.prototype.CHANGE_MARKER=2,d.prototype.CHANGE_GUTTER=4,d.prototype.CHANGE_SCROLL=8,d.prototype.CHANGE_LINES=16,d.prototype.CHANGE_TEXT=32,d.prototype.CHANGE_SIZE=64,d.prototype.CHANGE_MARKER_BACK=128,d.prototype.CHANGE_MARKER_FRONT=256,d.prototype.CHANGE_FULL=512,d.prototype.CHANGE_H_SCROLL=1024,d.prototype.$changes=0,d.prototype.$padding=null,d.prototype.$frozen=!1,d.prototype.STEPS=8,W.implement(d.prototype,c),T.defineOptions(d.prototype,"renderer",{useResizeObserver:{set:function(w){!w&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):w&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(w){this.$textLayer.setShowInvisibles(w)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(w){typeof w=="number"&&(this.$printMarginColumn=w),this.$showPrintMargin=!!w,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(w){this.$gutter.style.display=w?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(w){this.$gutterLayer.$useSvgGutterIcons=w},initialValue:!1},showFoldedAnnotations:{set:function(w){this.$gutterLayer.$showFoldedAnnotations=w},initialValue:!1},fadeFoldWidgets:{set:function(w){I.setCssClass(this.$gutter,"ace_fade-fold-widgets",w)},initialValue:!1},showFoldWidgets:{set:function(w){this.$gutterLayer.setShowFoldWidgets(w),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(w){this.$textLayer.setDisplayIndentGuides(w)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(w){this.$textLayer.setHighlightIndentGuides(w)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(w){this.$gutterLayer.setHighlightGutterLine(w),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(w){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(w){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(w){typeof w=="number"&&(w=w+"px"),this.container.style.fontSize=w,this.updateFontSize()},initialValue:12},fontFamily:{set:function(w){this.container.style.fontFamily=w,this.updateFontSize()}},maxLines:{set:function(w){this.updateFull()}},minLines:{set:function(w){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(w){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(w){w=+w||0,this.$scrollPastEnd!=w&&(this.$scrollPastEnd=w,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(w){this.$gutterLayer.$fixedWidth=!!w,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(w){this.$updateCustomScrollbar(w)},initialValue:!1},theme:{set:function(w){this.setTheme(w)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!f.isMobile&&!f.isIE}}),Re.VirtualRenderer=d}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(ze,Re,jr){var W=ze("../lib/oop"),I=ze("../lib/net"),o=ze("../lib/event_emitter").EventEmitter,T=ze("../config");function k(s){var e="importScripts('"+I.qualifyURL(s)+"');";try{return new Blob([e],{type:"application/javascript"})}catch{var t=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,n=new t;return n.append(e),n.getBlob("application/javascript")}}function r(s){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(T.get("loadWorkerFromBlob")){var e=k(s),t=window.URL||window.webkitURL,n=t.createObjectURL(e);return new Worker(n)}return new Worker(s)}var m=function(s){s.postMessage||(s=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=s,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){W.implement(this,o),this.$createWorkerFromOldConfig=function(s,e,t,n,a){if(ze.nameToUrl&&!ze.toUrl&&(ze.toUrl=ze.nameToUrl),T.get("packaged")||!ze.toUrl)n=n||T.moduleUrl(e,"worker");else{var i=this.$normalizePath;n=n||i(ze.toUrl("ace/worker/worker.js",null,"_"));var c={};s.forEach(function(l){c[l]=i(ze.toUrl(l,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=r(n),a&&this.send("importScripts",a),this.$worker.postMessage({init:!0,tlns:c,module:e,classname:t}),this.$worker},this.onMessage=function(s){var e=s.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var t=this.callbacks[e.id];t&&(t(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data);break}},this.reportError=function(s){window.console&&console.error&&console.error(s)},this.$normalizePath=function(s){return I.qualifyURL(s)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(s){s.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(s,e){this.$worker.postMessage({command:s,args:e})},this.call=function(s,e,t){if(t){var n=this.callbackId++;this.callbacks[n]=t,e.push(n)}this.send(s,e)},this.emit=function(s,e){try{e.data&&e.data.err&&(e.data.err={message:e.data.err.message,stack:e.data.err.stack,code:e.data.err.code}),this.$worker&&this.$worker.postMessage({event:s,data:{data:e.data}})}catch(t){console.error(t.stack)}},this.attachToDocument=function(s){this.$doc&&this.terminate(),this.$doc=s,this.call("setValue",[s.getValue()]),s.on("change",this.changeListener,!0)},this.changeListener=function(s){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),s.action=="insert"?this.deltaQueue.push(s.start,s.lines):this.deltaQueue.push(s.start,s.end)},this.$sendDeltaQueue=function(){var s=this.deltaQueue;s&&(this.deltaQueue=null,s.length>50&&s.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:s}))}}).call(m.prototype);var h=function(s,e,t){var n=null,a=!1,i=Object.create(o),c=[],l=new m({messageBuffer:c,terminate:function(){},postMessage:function(f){c.push(f),n&&(a?setTimeout(u):u())}});l.setEmitSync=function(f){a=f};var u=function(){var f=c.shift();f.command?n[f.command].apply(n,f.args):f.event&&i._signal(f.event,f.data)};return i.postMessage=function(f){l.onMessage({data:f})},i.callback=function(f,d){this.postMessage({type:"call",id:d,data:f})},i.emit=function(f,d){this.postMessage({type:"event",name:f,data:d})},T.loadModule(["worker",e],function(f){for(n=new f[t](i);c.length;)u()}),l};Re.UIWorkerClient=h,Re.WorkerClient=m,Re.createWorker=r}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(ze,Re,jr){var W=ze("./range").Range,I=ze("./lib/event_emitter").EventEmitter,o=ze("./lib/oop"),T=function(){function k(r,m,h,s,e,t){var n=this;this.length=m,this.session=r,this.doc=r.getDocument(),this.mainClass=e,this.othersClass=t,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=s,this.$onCursorChange=function(){setTimeout(function(){n.onCursorChange()})},this.$pos=h;var a=r.getUndoManager().$undoStack||r.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),r.selection.on("changeCursor",this.$onCursorChange)}return k.prototype.setup=function(){var r=this,m=this.doc,h=this.session;this.selectionBefore=h.selection.toJSON(),h.selection.inMultiSelectMode&&h.selection.toSingleRange(),this.pos=m.createAnchor(this.$pos.row,this.$pos.column);var s=this.pos;s.$insertRight=!0,s.detach(),s.markerId=h.addMarker(new W(s.row,s.column,s.row,s.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(e){var t=m.createAnchor(e.row,e.column);t.$insertRight=!0,t.detach(),r.others.push(t)}),h.setUndoSelect(!1)},k.prototype.showOtherMarkers=function(){if(!this.othersActive){var r=this.session,m=this;this.othersActive=!0,this.others.forEach(function(h){h.markerId=r.addMarker(new W(h.row,h.column,h.row,h.column+m.length),m.othersClass,null,!1)})}},k.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var r=0;r<this.others.length;r++)this.session.removeMarker(this.others[r].markerId)}},k.prototype.onUpdate=function(r){if(this.$updating)return this.updateAnchors(r);var m=r;if(m.start.row===m.end.row&&m.start.row===this.pos.row){this.$updating=!0;var h=r.action==="insert"?m.end.column-m.start.column:m.start.column-m.end.column,s=m.start.column>=this.pos.column&&m.start.column<=this.pos.column+this.length+1,e=m.start.column-this.pos.column;if(this.updateAnchors(r),s&&(this.length+=h),s&&!this.session.$fromUndo){if(r.action==="insert")for(var t=this.others.length-1;t>=0;t--){var n=this.others[t],a={row:n.row,column:n.column+e};this.doc.insertMergedLines(a,r.lines)}else if(r.action==="remove")for(var t=this.others.length-1;t>=0;t--){var n=this.others[t],a={row:n.row,column:n.column+e};this.doc.remove(new W(a.row,a.column,a.row,a.column-h))}}this.$updating=!1,this.updateMarkers()}},k.prototype.updateAnchors=function(r){this.pos.onChange(r);for(var m=this.others.length;m--;)this.others[m].onChange(r);this.updateMarkers()},k.prototype.updateMarkers=function(){if(!this.$updating){var r=this,m=this.session,h=function(e,t){m.removeMarker(e.markerId),e.markerId=m.addMarker(new W(e.row,e.column,e.row,e.column+r.length),t,null,!1)};h(this.pos,this.mainClass);for(var s=this.others.length;s--;)h(this.others[s],this.othersClass)}},k.prototype.onCursorChange=function(r){if(!(this.$updating||!this.session)){var m=this.session.selection.getCursor();m.row===this.pos.row&&m.column>=this.pos.column&&m.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",r)):(this.hideOtherMarkers(),this._emit("cursorLeave",r))}},k.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},k.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var r=this.session.getUndoManager(),m=(r.$undoStack||r.$undostack).length-this.$undoStackDepth,h=0;h<m;h++)r.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},k}();o.implement(T.prototype,I),Re.PlaceHolder=T}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(ze,Re,jr){var W=ze("../lib/event"),I=ze("../lib/useragent");function o(k,r){return k.row==r.row&&k.column==r.column}function T(k){var r=k.domEvent,m=r.altKey,h=r.shiftKey,s=r.ctrlKey,e=k.getAccelKey(),t=k.getButton();if(s&&I.isMac&&(t=r.button),k.editor.inMultiSelectMode&&t==2){k.editor.textInput.onContextMenu(k.domEvent);return}if(!s&&!m&&!e){t===0&&k.editor.inMultiSelectMode&&k.editor.exitMultiSelectMode();return}if(t===0){var n=k.editor,a=n.selection,i=n.inMultiSelectMode,c=k.getDocumentPosition(),l=a.getCursor(),u=k.inSelection()||a.isEmpty()&&o(c,l),f=k.x,d=k.y,w=function(O){f=O.clientX,d=O.clientY},v=n.session,p=n.renderer.pixelToScreenCoordinates(f,d),y=p,b;if(n.$mouseHandler.$enableJumpToDef)s&&m||e&&m?b=h?"block":"add":m&&n.$blockSelectEnabled&&(b="block");else if(e&&!m){if(b="add",!i&&h)return}else m&&n.$blockSelectEnabled&&(b="block");if(b&&I.isMac&&r.ctrlKey&&n.$mouseHandler.cancelContextMenu(),b=="add"){if(!i&&u)return;if(!i){var x=a.toOrientedRange();n.addSelectionMarker(x)}var _=a.rangeList.rangeAtPoint(c);n.inVirtualSelectionMode=!0,h&&(_=null,x=a.ranges[0]||x,n.removeSelectionMarker(x)),n.once("mouseup",function(){var O=a.toOrientedRange();_&&O.isEmpty()&&o(_.cursor,O.cursor)?a.substractPoint(O.cursor):(h?a.substractPoint(x.cursor):x&&(n.removeSelectionMarker(x),a.addRange(x)),a.addRange(O)),n.inVirtualSelectionMode=!1})}else if(b=="block"){k.stop(),n.inVirtualSelectionMode=!0;var g,A=[],M=function(){var O=n.renderer.pixelToScreenCoordinates(f,d),P=v.screenToDocumentPosition(O.row,O.column,O.offsetX);o(y,O)&&o(P,a.lead)||(y=O,n.selection.moveToPosition(P),n.renderer.scrollCursorIntoView(),n.removeSelectionMarkers(A),A=a.rectangularRangeBlock(y,p),n.$mouseHandler.$clickSelection&&A.length==1&&A[0].isEmpty()&&(A[0]=n.$mouseHandler.$clickSelection.clone()),A.forEach(n.addSelectionMarker,n),n.updateSelectionMarkers())};i&&!e?a.toSingleRange():!i&&e&&(g=a.toOrientedRange(),n.addSelectionMarker(g)),h?p=v.documentToScreenPosition(a.lead):a.moveToPosition(c),y={row:-1,column:-1};var L=function(O){M(),clearInterval(S),n.removeSelectionMarkers(A),A.length||(A=[a.toOrientedRange()]),g&&(n.removeSelectionMarker(g),a.toSingleRange(g));for(var P=0;P<A.length;P++)a.addRange(A[P]);n.inVirtualSelectionMode=!1,n.$mouseHandler.$clickSelection=null},E=M;W.capture(n.container,w,L);var S=setInterval(function(){E()},20);return k.preventDefault()}}}Re.onMouseDown=T}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(ze,Re,jr){Re.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(I){I.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(I){I.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(I){I.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(I){I.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(I){I.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(I){I.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(I){I.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(I){I.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(I){I.multiSelect.rangeCount>1?I.multiSelect.joinSelections():I.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(I){I.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(I){I.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(I){I.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],Re.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(I){I.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(I){return I&&I.inMultiSelectMode}}];var W=ze("../keyboard/hash_handler").HashHandler;Re.keyboardHandler=new W(Re.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(ze,Re,jr){var W=ze("./range_list").RangeList,I=ze("./range").Range,o=ze("./selection").Selection,T=ze("./mouse/multi_select_handler").onMouseDown,k=ze("./lib/event"),r=ze("./lib/lang"),m=ze("./commands/multi_select_commands");Re.commands=m.defaultCommands.concat(m.multiSelectCommands);var h=ze("./search").Search,s=new h;function e(l,u,f){return s.$options.wrap=!0,s.$options.needle=u,s.$options.backwards=f==-1,s.find(l)}var t=ze("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(t.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(l,u){if(l){if(!this.inMultiSelectMode&&this.rangeCount===0){var f=this.toOrientedRange();if(this.rangeList.add(f),this.rangeList.add(l),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),u||this.fromOrientedRange(l);this.rangeList.removeAll(),this.rangeList.add(f),this.$onAddRange(f)}l.cursor||(l.cursor=l.end);var d=this.rangeList.add(l);return this.$onAddRange(l),d.length&&this.$onRemoveRange(d),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),u||this.fromOrientedRange(l)}},this.toSingleRange=function(l){l=l||this.ranges[0];var u=this.rangeList.removeAll();u.length&&this.$onRemoveRange(u),l&&this.fromOrientedRange(l)},this.substractPoint=function(l){var u=this.rangeList.substractPoint(l);if(u)return this.$onRemoveRange(u),u[0]},this.mergeOverlappingRanges=function(){var l=this.rangeList.merge();l.length&&this.$onRemoveRange(l)},this.$onAddRange=function(l){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(l),this._signal("addRange",{range:l})},this.$onRemoveRange=function(l){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var u=this.rangeList.ranges.pop();l.push(u),this.rangeCount=0}for(var f=l.length;f--;){var d=this.ranges.indexOf(l[f]);this.ranges.splice(d,1)}this._signal("removeRange",{ranges:l}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),u=u||this.ranges[0],u&&!u.isEqual(this.getRange())&&this.fromOrientedRange(u)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new W,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var l=this.ranges.length?this.ranges:[this.getRange()],u=[],f=0;f<l.length;f++){var d=l[f],w=d.start.row,v=d.end.row;if(w===v)u.push(d.clone());else{for(u.push(new I(w,d.start.column,w,this.session.getLine(w).length));++w<v;)u.push(this.getLineRange(w,!0));u.push(new I(v,0,v,d.end.column))}f==0&&!this.isBackwards()&&(u=u.reverse())}this.toSingleRange();for(var f=u.length;f--;)this.addRange(u[f])},this.joinSelections=function(){var l=this.rangeList.ranges,u=l[l.length-1],f=I.fromPoints(l[0].start,u.end);this.toSingleRange(),this.setSelectionRange(f,u.cursor==u.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var l=this.rangeList.ranges,u=l[l.length-1],f=I.fromPoints(l[0].start,u.end);this.toSingleRange(),this.setSelectionRange(f,u.cursor==u.start)}else{var d=this.session.documentToScreenPosition(this.cursor),w=this.session.documentToScreenPosition(this.anchor),v=this.rectangularRangeBlock(d,w);v.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(l,u,f){var d=[],w=l.column<u.column;if(w)var v=l.column,p=u.column,y=l.offsetX,b=u.offsetX;else var v=u.column,p=l.column,y=u.offsetX,b=l.offsetX;var x=l.row<u.row;if(x)var _=l.row,g=u.row;else var _=u.row,g=l.row;v<0&&(v=0),_<0&&(_=0),_==g&&(f=!0);for(var A,M=_;M<=g;M++){var L=I.fromPoints(this.session.screenToDocumentPosition(M,v,y),this.session.screenToDocumentPosition(M,p,b));if(L.isEmpty()){if(A&&a(L.end,A))break;A=L.end}L.cursor=w?L.start:L.end,d.push(L)}if(x&&d.reverse(),!f){for(var E=d.length-1;d[E].isEmpty()&&E>0;)E--;if(E>0)for(var S=0;d[S].isEmpty();)S++;for(var O=E;O>=S;O--)d[O].isEmpty()&&d.splice(O,1)}return d}}.call(o.prototype);var n=ze("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(l){l.cursor||(l.cursor=l.end);var u=this.getSelectionStyle();return l.marker=this.session.addMarker(l,"ace_selection",u),this.session.$selectionMarkers.push(l),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,l},this.removeSelectionMarker=function(l){if(l.marker){this.session.removeMarker(l.marker);var u=this.session.$selectionMarkers.indexOf(l);u!=-1&&this.session.$selectionMarkers.splice(u,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(l){for(var u=this.session.$selectionMarkers,f=l.length;f--;){var d=l[f];if(d.marker){this.session.removeMarker(d.marker);var w=u.indexOf(d);w!=-1&&u.splice(w,1)}}this.session.selectionMarkerCount=u.length},this.$onAddRange=function(l){this.addSelectionMarker(l.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(l){this.removeSelectionMarkers(l.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(l){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(m.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(l){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(m.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(l){var u=l.command,f=l.editor;if(f.multiSelect){if(u.multiSelectAction)u.multiSelectAction=="forEach"?d=f.forEachSelection(u,l.args):u.multiSelectAction=="forEachLine"?d=f.forEachSelection(u,l.args,!0):u.multiSelectAction=="single"?(f.exitMultiSelectMode(),d=u.exec(f,l.args||{})):d=u.multiSelectAction(f,l.args||{});else{var d=u.exec(f,l.args||{});f.multiSelect.addRange(f.multiSelect.toOrientedRange()),f.multiSelect.mergeOverlappingRanges()}return d}},this.forEachSelection=function(l,u,f){if(!this.inVirtualSelectionMode){var d=f&&f.keepOrder,w=f==!0||f&&f.$byLines,v=this.session,p=this.selection,y=p.rangeList,b=(d?p:y).ranges,x;if(!b.length)return l.exec?l.exec(this,u||{}):l(this,u||{});var _=p._eventRegistry;p._eventRegistry={};var g=new o(v);this.inVirtualSelectionMode=!0;for(var A=b.length;A--;){if(w)for(;A>0&&b[A].start.row==b[A-1].end.row;)A--;g.fromOrientedRange(b[A]),g.index=A,this.selection=v.selection=g;var M=l.exec?l.exec(this,u||{}):l(this,u||{});!x&&M!==void 0&&(x=M),g.toOrientedRange(b[A])}g.detach(),this.selection=v.selection=p,this.inVirtualSelectionMode=!1,p._eventRegistry=_,p.mergeOverlappingRanges(),p.ranges[0]&&p.fromOrientedRange(p.ranges[0]);var L=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),L&&L.from==L.to&&this.renderer.animateScrolling(L.from),x}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var l="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var u=this.multiSelect.rangeList.ranges,f=[],d=0;d<u.length;d++)f.push(this.session.getTextRange(u[d]));var w=this.session.getDocument().getNewLineCharacter();l=f.join(w),l.length==(f.length-1)*w.length&&(l="")}else this.selection.isEmpty()||(l=this.session.getTextRange(this.getSelectionRange()));return l},this.$checkMultiselectChange=function(l,u){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var f=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&u==this.multiSelect.anchor)return;var d=u==this.multiSelect.anchor?f.cursor==f.start?f.end:f.start:f.cursor;d.row!=u.row||this.session.$clipPositionToDocument(d.row,d.column).column!=u.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(l,u,f){if(u=u||{},u.needle=l||u.needle,u.needle==null){var d=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();u.needle=this.session.getTextRange(d)}this.$search.set(u);var w=this.$search.findAll(this.session);if(!w.length)return 0;var v=this.multiSelect;f||v.toSingleRange(w[0]);for(var p=w.length;p--;)v.addRange(w[p],!0);return d&&v.rangeList.rangeAtPoint(d.start)&&v.addRange(d,!0),w.length},this.selectMoreLines=function(l,u){var f=this.selection.toOrientedRange(),d=f.cursor==f.end,w=this.session.documentToScreenPosition(f.cursor);this.selection.$desiredColumn&&(w.column=this.selection.$desiredColumn);var v=this.session.screenToDocumentPosition(w.row+l,w.column);if(f.isEmpty())var y=v;else var p=this.session.documentToScreenPosition(d?f.end:f.start),y=this.session.screenToDocumentPosition(p.row+l,p.column);if(d){var b=I.fromPoints(v,y);b.cursor=b.start}else{var b=I.fromPoints(y,v);b.cursor=b.end}if(b.desiredColumn=w.column,!this.selection.inMultiSelectMode)this.selection.addRange(f);else if(u)var x=f.cursor;this.selection.addRange(b),x&&this.selection.substractPoint(x)},this.transposeSelections=function(l){for(var u=this.session,f=u.multiSelect,d=f.ranges,w=d.length;w--;){var v=d[w];if(v.isEmpty()){var p=u.getWordRange(v.start.row,v.start.column);v.start.row=p.start.row,v.start.column=p.start.column,v.end.row=p.end.row,v.end.column=p.end.column}}f.mergeOverlappingRanges();for(var y=[],w=d.length;w--;){var v=d[w];y.unshift(u.getTextRange(v))}l<0?y.unshift(y.pop()):y.push(y.shift());for(var w=d.length;w--;){var v=d[w],p=v.clone();u.replace(v,y[w]),v.start.row=p.start.row,v.start.column=p.start.column}f.fromOrientedRange(f.ranges[0])},this.selectMore=function(l,u,f){var d=this.session,w=d.multiSelect,v=w.toOrientedRange();if(!(v.isEmpty()&&(v=d.getWordRange(v.start.row,v.start.column),v.cursor=l==-1?v.start:v.end,this.multiSelect.addRange(v),f))){var p=d.getTextRange(v),y=e(d,p,l);y&&(y.cursor=l==-1?y.start:y.end,this.session.unfold(y),this.multiSelect.addRange(y),this.renderer.scrollCursorIntoView(null,.5)),u&&this.multiSelect.substractPoint(v.cursor)}},this.alignCursors=function(){var l=this.session,u=l.multiSelect,f=u.ranges,d=-1,w=f.filter(function(E){if(E.cursor.row==d)return!0;d=E.cursor.row});if(!f.length||w.length==f.length-1){var v=this.selection.getRange(),p=v.start.row,y=v.end.row,b=p==y;if(b){var x=this.session.getLength(),_;do _=this.session.getLine(y);while(/[=:]/.test(_)&&++y<x);do _=this.session.getLine(p);while(/[=:]/.test(_)&&--p>0);p<0&&(p=0),y>=x&&(y=x-1)}var g=this.session.removeFullLines(p,y);g=this.$reAlignText(g,b),this.session.insert({row:p,column:0},g.join(`
`)+`
`),b||(v.start.column=0,v.end.column=g[g.length-1].length),this.selection.setRange(v)}else{w.forEach(function(E){u.substractPoint(E.cursor)});var A=0,M=1/0,L=f.map(function(E){var S=E.cursor,O=l.getLine(S.row),P=O.substr(S.column).search(/\S/g);return P==-1&&(P=0),S.column>A&&(A=S.column),P<M&&(M=P),P});f.forEach(function(E,S){var O=E.cursor,P=A-O.column,U=L[S]-M;P>U?l.insert(O,r.stringRepeat(" ",P-U)):l.remove(new I(O.row,O.column,O.row,O.column-P+U)),E.start.column=E.end.column=A,E.start.row=E.end.row=O.row,E.cursor=E.end}),u.fromOrientedRange(f[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(l,u){var f=!0,d=!0,w,v,p;return l.map(function(g){var A=g.match(/(\s*)(.*?)(\s*)([=:].*)/);return A?w==null?(w=A[1].length,v=A[2].length,p=A[3].length,A):(w+v+p!=A[1].length+A[2].length+A[3].length&&(d=!1),w!=A[1].length&&(f=!1),w>A[1].length&&(w=A[1].length),v<A[2].length&&(v=A[2].length),p>A[3].length&&(p=A[3].length),A):[g]}).map(u?b:f?d?x:b:_);function y(g){return r.stringRepeat(" ",g)}function b(g){return g[2]?y(w)+g[2]+y(v-g[2].length+p)+g[4].replace(/^([=:])\s+/,"$1 "):g[0]}function x(g){return g[2]?y(w+v-g[2].length)+g[2]+y(p)+g[4].replace(/^([=:])\s+/,"$1 "):g[0]}function _(g){return g[2]?y(w)+g[2]+y(p)+g[4].replace(/^([=:])\s+/,"$1 "):g[0]}}}).call(n.prototype);function a(l,u){return l.row==u.row&&l.column==u.column}Re.onSessionChange=function(l){var u=l.session;u&&!u.multiSelect&&(u.$selectionMarkers=[],u.selection.$initRangeList(),u.multiSelect=u.selection),this.multiSelect=u&&u.multiSelect;var f=l.oldSession;f&&(f.multiSelect.off("addRange",this.$onAddRange),f.multiSelect.off("removeRange",this.$onRemoveRange),f.multiSelect.off("multiSelect",this.$onMultiSelect),f.multiSelect.off("singleSelect",this.$onSingleSelect),f.multiSelect.lead.off("change",this.$checkMultiselectChange),f.multiSelect.anchor.off("change",this.$checkMultiselectChange)),u&&(u.multiSelect.on("addRange",this.$onAddRange),u.multiSelect.on("removeRange",this.$onRemoveRange),u.multiSelect.on("multiSelect",this.$onMultiSelect),u.multiSelect.on("singleSelect",this.$onSingleSelect),u.multiSelect.lead.on("change",this.$checkMultiselectChange),u.multiSelect.anchor.on("change",this.$checkMultiselectChange)),u&&this.inMultiSelectMode!=u.selection.inMultiSelectMode&&(u.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function i(l){l.$multiselectOnSessionChange||(l.$onAddRange=l.$onAddRange.bind(l),l.$onRemoveRange=l.$onRemoveRange.bind(l),l.$onMultiSelect=l.$onMultiSelect.bind(l),l.$onSingleSelect=l.$onSingleSelect.bind(l),l.$multiselectOnSessionChange=Re.onSessionChange.bind(l),l.$checkMultiselectChange=l.$checkMultiselectChange.bind(l),l.$multiselectOnSessionChange(l),l.on("changeSession",l.$multiselectOnSessionChange),l.on("mousedown",T),l.commands.addCommands(m.defaultCommands),c(l))}function c(l){if(!l.textInput)return;var u=l.textInput.getElement(),f=!1;k.addListener(u,"keydown",function(w){var v=w.keyCode==18&&!(w.ctrlKey||w.shiftKey||w.metaKey);l.$blockSelectEnabled&&v?f||(l.renderer.setMouseCursor("crosshair"),f=!0):f&&d()},l),k.addListener(u,"keyup",d,l),k.addListener(u,"blur",d,l);function d(w){f&&(l.renderer.setMouseCursor(""),f=!1)}}Re.MultiSelect=i,ze("./config").defineOptions(n.prototype,"editor",{enableMultiselect:{set:function(l){i(this),l?this.on("mousedown",T):this.off("mousedown",T)},value:!0},enableBlockSelect:{set:function(l){this.$blockSelectEnabled=l},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(ze,Re,jr){var W=ze("../../range").Range,I=Re.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(o,T,k){var r=o.getLine(k);return this.foldingStartMarker.test(r)?"start":T=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(o,T,k){return null},this.indentationBlock=function(o,T,k){var r=/\S/,m=o.getLine(T),h=m.search(r);if(h!=-1){for(var s=k||m.length,e=o.getLength(),t=T,n=T;++T<e;){var a=o.getLine(T).search(r);if(a!=-1){if(a<=h){var i=o.getTokenAt(T,0);if(!i||i.type!=="string")break}n=T}}if(n>t){var c=o.getLine(n).length;return new W(t,s,n,c)}}},this.openingBracketBlock=function(o,T,k,r,m){var h={row:k,column:r+1},s=o.$findClosingBracket(T,h,m);if(s){var e=o.foldWidgets[s.row];return e==null&&(e=o.getFoldWidget(s.row)),e=="start"&&s.row>h.row&&(s.row--,s.column=o.getLine(s.row).length),W.fromPoints(h,s)}},this.closingBracketBlock=function(o,T,k,r,m){var h={row:k,column:r},s=o.$findOpeningBracket(T,h);if(s)return s.column++,h.column--,W.fromPoints(s,h)}}).call(I.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(ze,Re,jr){var W=ze("../line_widgets").LineWidgets,I=ze("../lib/dom"),o=ze("../range").Range,T=ze("../config").nls;function k(m,h,s){for(var e=0,t=m.length-1;e<=t;){var n=e+t>>1,a=s(h,m[n]);if(a>0)e=n+1;else if(a<0)t=n-1;else return n}return-(e+1)}function r(m,h,s){var e=m.getAnnotations().sort(o.comparePoints);if(e.length){var t=k(e,{row:h,column:-1},o.comparePoints);t<0&&(t=-t-1),t>=e.length?t=s>0?0:e.length-1:t===0&&s<0&&(t=e.length-1);var n=e[t];if(!(!n||!s)){if(n.row===h){do n=e[t+=s];while(n&&n.row===h);if(!n)return e.slice()}var a=[];h=n.row;do a[s<0?"unshift":"push"](n),n=e[t+=s];while(n&&n.row==h);return a.length&&a}}}Re.showErrorMarker=function(m,h){var s=m.session;s.widgetManager||(s.widgetManager=new W(s),s.widgetManager.attach(m));var e=m.getCursorPosition(),t=e.row,n=s.widgetManager.getWidgetsAtRow(t).filter(function(v){return v.type=="errorMarker"})[0];n?n.destroy():t-=h;var a=r(s,t,h),i;if(a){var c=a[0];e.column=(c.pos&&typeof c.column!="number"?c.pos.sc:c.column)||0,e.row=c.row,i=m.renderer.$gutterLayer.$annotations[e.row]}else{if(n)return;i={text:[T("Looks good!")],className:"ace_ok"}}m.session.unfold(e.row),m.selection.moveToPosition(e);var l={row:e.row,fixedWidth:!0,coverGutter:!0,el:I.createElement("div"),type:"errorMarker"},u=l.el.appendChild(I.createElement("div")),f=l.el.appendChild(I.createElement("div"));f.className="error_widget_arrow "+i.className;var d=m.renderer.$cursorLayer.getPixelPosition(e).left;f.style.left=d+m.renderer.gutterWidth-5+"px",l.el.className="error_widget_wrapper",u.className="error_widget "+i.className,u.innerHTML=i.text.join("<br>"),u.appendChild(I.createElement("div"));var w=function(v,p,y){if(p===0&&(y==="esc"||y==="return"))return l.destroy(),{command:"null"}};l.destroy=function(){m.$mouseHandler.isMousePressed||(m.keyBinding.removeKeyboardHandler(w),s.widgetManager.removeLineWidget(l),m.off("changeSelection",l.destroy),m.off("changeSession",l.destroy),m.off("mouseup",l.destroy),m.off("change",l.destroy))},m.keyBinding.addKeyboardHandler(w),m.on("changeSelection",l.destroy),m.on("changeSession",l.destroy),m.on("mouseup",l.destroy),m.on("change",l.destroy),m.session.widgetManager.addLineWidget(l),l.el.onmousedown=m.focus.bind(m),m.renderer.scrollCursorIntoView(null,.5,{bottom:l.el.offsetHeight})},I.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(ze,Re,jr){ze("./loader_build")(Re);var W=ze("./lib/dom"),I=ze("./range").Range,o=ze("./editor").Editor,T=ze("./edit_session").EditSession,k=ze("./undomanager").UndoManager,r=ze("./virtual_renderer").VirtualRenderer;ze("./worker/worker_client"),ze("./keyboard/hash_handler"),ze("./placeholder"),ze("./multi_select"),ze("./mode/folding/fold_mode"),ze("./theme/textmate"),ze("./ext/error_marker"),Re.config=ze("./config"),Re.edit=function(m,h){if(typeof m=="string"){var s=m;if(m=document.getElementById(s),!m)throw new Error("ace.edit can't find div #"+s)}if(m&&m.env&&m.env.editor instanceof o)return m.env.editor;var e="";if(m&&/input|textarea/i.test(m.tagName)){var t=m;e=t.value,m=W.createElement("pre"),t.parentNode.replaceChild(m,t)}else m&&(e=m.textContent,m.innerHTML="");var n=Re.createEditSession(e),a=new o(new r(m),n,h),i={document:n,editor:a,onResize:a.resize.bind(a,null)};return t&&(i.textarea=t),a.on("destroy",function(){i.editor.container.env=null}),a.container.env=a.env=i,a},Re.createEditSession=function(m,h){var s=new T(m,h);return s.setUndoManager(new k),s},Re.Range=I,Re.Editor=o,Re.EditSession=T,Re.UndoManager=k,Re.VirtualRenderer=r,Re.version=Re.config.version}),function(){ace.require(["ace/ace"],function(ze){ze&&(ze.config.init(!0),ze.define=ace.define);var Re=function(){return this}();!Re&&typeof window<"u"&&(Re=window),!Re&&typeof self<"u"&&(Re=self),Re.ace||(Re.ace=ze);for(var jr in ze)ze.hasOwnProperty(jr)&&(Re.ace[jr]=ze[jr]);Re.ace.default=Re.ace,Rn&&(Rn.exports=Re.ace)})}()})(cp);var bh={},up={get exports(){return bh},set exports(Rn){bh=Rn}};(function(Rn,zn){ace.define("ace/theme/monokai-css",["require","exports","module"],function(ze,Re,jr){jr.exports=`.ace-monokai .ace_gutter {
  background: #2F3129;
  color: #8F908A
}

.ace-monokai .ace_print-margin {
  width: 1px;
  background: #555651
}

.ace-monokai {
  background-color: #272822;
  color: #F8F8F2
}

.ace-monokai .ace_cursor {
  color: #F8F8F0
}

.ace-monokai .ace_marker-layer .ace_selection {
  background: #49483E
}

.ace-monokai.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px #272822;
}

.ace-monokai .ace_marker-layer .ace_step {
  background: rgb(102, 82, 0)
}

.ace-monokai .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid #49483E
}

.ace-monokai .ace_marker-layer .ace_active-line {
  background: #202020
}

.ace-monokai .ace_gutter-active-line {
  background-color: #272727
}

.ace-monokai .ace_marker-layer .ace_selected-word {
  border: 1px solid #49483E
}

.ace-monokai .ace_invisible {
  color: #52524d
}

.ace-monokai .ace_entity.ace_name.ace_tag,
.ace-monokai .ace_keyword,
.ace-monokai .ace_meta.ace_tag,
.ace-monokai .ace_storage {
  color: #F92672
}

.ace-monokai .ace_punctuation,
.ace-monokai .ace_punctuation.ace_tag {
  color: #fff
}

.ace-monokai .ace_constant.ace_character,
.ace-monokai .ace_constant.ace_language,
.ace-monokai .ace_constant.ace_numeric,
.ace-monokai .ace_constant.ace_other {
  color: #AE81FF
}

.ace-monokai .ace_invalid {
  color: #F8F8F0;
  background-color: #F92672
}

.ace-monokai .ace_invalid.ace_deprecated {
  color: #F8F8F0;
  background-color: #AE81FF
}

.ace-monokai .ace_support.ace_constant,
.ace-monokai .ace_support.ace_function {
  color: #66D9EF
}

.ace-monokai .ace_fold {
  background-color: #A6E22E;
  border-color: #F8F8F2
}

.ace-monokai .ace_storage.ace_type,
.ace-monokai .ace_support.ace_class,
.ace-monokai .ace_support.ace_type {
  font-style: italic;
  color: #66D9EF
}

.ace-monokai .ace_entity.ace_name.ace_function,
.ace-monokai .ace_entity.ace_other,
.ace-monokai .ace_entity.ace_other.ace_attribute-name,
.ace-monokai .ace_variable {
  color: #A6E22E
}

.ace-monokai .ace_variable.ace_parameter {
  font-style: italic;
  color: #FD971F
}

.ace-monokai .ace_string {
  color: #E6DB74
}

.ace-monokai .ace_comment {
  color: #75715E
}

.ace-monokai .ace_indent-guide {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y
}

.ace-monokai .ace_indent-guide-active {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;
}
`}),ace.define("ace/theme/monokai",["require","exports","module","ace/theme/monokai-css","ace/lib/dom"],function(ze,Re,jr){Re.isDark=!0,Re.cssClass="ace-monokai",Re.cssText=ze("./monokai-css");var W=ze("../lib/dom");W.importCssString(Re.cssText,Re.cssClass,!1)}),function(){ace.require(["ace/theme/monokai"],function(ze){Rn&&(Rn.exports=ze)})}()})(up);var _h={},hp={get exports(){return _h},set exports(Rn){_h=Rn}};(function(Rn,zn){ace.define("ace/mode/jsdoc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(ze,Re,jr){var W=ze("../lib/oop"),I=ze("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:["comment.doc.tag","comment.doc.text","lparen.doc"],regex:"(@(?:param|member|typedef|property|namespace|var|const|callback))(\\s*)({)",push:[{token:"lparen.doc",regex:"{",push:[{include:"doc-syntax"},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"}]},{token:["rparen.doc","text.doc","variable.parameter.doc","lparen.doc","variable.parameter.doc","rparen.doc"],regex:/(})(\s*)(?:([\w=:\/\.]+)|(?:(\[)([\w=:\/\.]+)(\])))/,next:"pop"},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"},{include:"doc-syntax"},{defaultToken:"text.doc"}]},{token:["comment.doc.tag","text.doc","lparen.doc"],regex:"(@(?:returns?|yields|type|this|suppress|public|protected|private|package|modifies|implements|external|exception|throws|enum|define|extends))(\\s*)({)",push:[{token:"lparen.doc",regex:"{",push:[{include:"doc-syntax"},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"}]},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"},{include:"doc-syntax"},{defaultToken:"text.doc"}]},{token:["comment.doc.tag","text.doc","variable.parameter.doc"],regex:'(@(?:alias|memberof|instance|module|name|lends|namespace|external|this|template|requires|param|implements|function|extends|typedef|mixes|constructor|var|memberof\\!|event|listens|exports|class|constructs|interface|emits|fires|throws|const|callback|borrows|augments))(\\s+)(\\w[\\w#.:/~"\\-]*)?'},{token:["comment.doc.tag","text.doc","variable.parameter.doc"],regex:"(@method)(\\s+)(\\w[\\w.\\(\\)]*)"},{token:"comment.doc.tag",regex:"@access\\s+(?:private|public|protected)"},{token:"comment.doc.tag",regex:"@kind\\s+(?:class|constant|event|external|file|function|member|mixin|module|namespace|typedef)"},{token:"comment.doc.tag",regex:"@\\w+(?=\\s|$)"},o.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}],"doc-syntax":[{token:"operator.doc",regex:/[|:]/},{token:"paren.doc",regex:/[\[\]]/}]},this.normalizeRules()};W.inherits(o,I),o.getTagRule=function(T){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},o.getStartRule=function(T){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:T}},o.getEndRule=function(T){return{token:"comment.doc",regex:"\\*\\/",next:T}},Re.JsDocCommentHighlightRules=o}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/jsdoc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(ze,Re,jr){var W=ze("../lib/oop"),I=ze("./jsdoc_comment_highlight_rules").JsDocCommentHighlightRules,o=ze("./text_highlight_rules").TextHighlightRules,T="[a-zA-Z\\$_\xA1-\uFFFF][a-zA-Z\\d\\$_\xA1-\uFFFF]*",k=function(h){var s=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Symbol|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static|constructor","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),e="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",t="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[I.getStartRule("doc-start"),m("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+T+")(\\.)(prototype)(\\.)("+T+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+T+")(\\.)("+T+")(\\s*)(=)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+T+")(\\s*)(=)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+T+")(\\.)("+T+")(\\s*)(=)(\\s*)(function\\*?)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function\\*?)(\\s+)("+T+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+T+")(\\s*)(:)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:`from(?=\\s*('|"))`},{token:"keyword",regex:"(?:"+e+")\\b",next:"start"},{token:"support.constant",regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:s,regex:T},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+T+")(\\.)("+T+")(\\s*)(=)(\\s*)(function\\*?)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|lter|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward|rEach)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:T},{regex:"",token:"empty",next:"no_regex"}],start:[I.getStartRule("doc-start"),m("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],default_parameter:[{token:"string",regex:"'(?=.)",push:[{token:"string",regex:"'|$",next:"pop"},{include:"qstring"}]},{token:"string",regex:'"(?=.)',push:[{token:"string",regex:'"|$',next:"pop"},{include:"qqstring"}]},{token:"constant.language",regex:"null|Infinity|NaN|undefined"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:"punctuation.operator",regex:",",next:"function_arguments"},{token:"text",regex:"\\s+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],function_arguments:[m("function_arguments"),{token:"variable.parameter",regex:T},{token:"punctuation.operator",regex:","},{token:"text",regex:"\\s+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:t},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:t},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},(!h||!h.noES6)&&(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(n,a,i){if(this.next=n=="{"?this.nextState:"",n=="{"&&i.length)i.unshift("start",a);else if(n=="}"&&i.length&&(i.shift(),this.next=i.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end";return n=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:t},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]},{token:["variable.parameter","text"],regex:"("+T+")(\\s*)(?=\\=>)"},{token:"paren.lparen",regex:"(\\()(?=.+\\s*=>)",next:"function_arguments"},{token:"variable.language",regex:"(?:(?:(?:Weak)?(?:Set|Map))|Promise)\\b"}),this.$rules.function_arguments.unshift({token:"keyword.operator",regex:"=",next:"default_parameter"},{token:"keyword.operator",regex:"\\.{3}"}),this.$rules.property.unshift({token:"support.function",regex:"(findIndex|repeat|startsWith|endsWith|includes|isSafeInteger|trunc|cbrt|log2|log10|sign|then|catch|finally|resolve|reject|race|any|all|allSettled|keys|entries|isInteger)\\b(?=\\()"},{token:"constant.language",regex:"(?:MAX_SAFE_INTEGER|MIN_SAFE_INTEGER|EPSILON)\\b"}),(!h||h.jsx!=!1)&&r.call(this)),this.embedRules(I,"doc-",[I.getEndRule("no_regex")]),this.normalizeRules()};W.inherits(k,o);function r(){var h=T.replace("\\d","\\d\\-"),s={onMatch:function(t,n,a){var i=t.charAt(1)=="/"?2:1;return i==1?(n!=this.nextState?a.unshift(this.next,this.nextState,0):a.unshift(this.next),a[2]++):i==2&&n==this.nextState&&(a[1]--,(!a[1]||a[1]<0)&&(a.shift(),a.shift())),[{type:"meta.tag.punctuation."+(i==1?"":"end-")+"tag-open.xml",value:t.slice(0,i)},{type:"meta.tag.tag-name.xml",value:t.substr(i)}]},regex:"</?"+h,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(s);var e={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[e,s,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(t,n,a){return n==a[0]&&a.shift(),t.length==2&&(a[0]==this.nextState&&a[1]--,(!a[1]||a[1]<0)&&a.splice(0,2)),this.next=a[0]||"start",[{type:this.token,value:t}]},nextState:"jsx"},e,m("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:h},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},s],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function m(h){return[{token:"comment",regex:/\/\*/,next:[I.getTagRule(),{token:"comment",regex:"\\*\\/",next:h||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[I.getTagRule(),{token:"comment",regex:"$|^",next:h||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}Re.JavaScriptHighlightRules=k}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(ze,Re,jr){var W=ze("../range").Range,I=function(){};(function(){this.checkOutdent=function(o,T){return/^\s+$/.test(o)?/^\s*\}/.test(T):!1},this.autoOutdent=function(o,T){var k=o.getLine(T),r=k.match(/^(\s*\})/);if(!r)return 0;var m=r[1].length,h=o.findMatchingBracket({row:T,column:m});if(!h||h.row==T)return 0;var s=this.$getIndent(o.getLine(h.row));o.replace(new W(T,0,T,m-1),s)},this.$getIndent=function(o){return o.match(/^\s*/)[0]}}).call(I.prototype),Re.MatchingBraceOutdent=I}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(ze,Re,jr){var W=ze("../../lib/oop"),I=ze("../../range").Range,o=ze("./fold_mode").FoldMode,T=Re.FoldMode=function(k){k&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+k.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+k.end)))};W.inherits(T,o),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(k,r,m){var h=k.getLine(m);if(this.singleLineBlockCommentRe.test(h)&&!this.startRegionRe.test(h)&&!this.tripleStarBlockCommentRe.test(h))return"";var s=this._getFoldWidgetBase(k,r,m);return!s&&this.startRegionRe.test(h)?"start":s},this.getFoldWidgetRange=function(k,r,m,h){var s=k.getLine(m);if(this.startRegionRe.test(s))return this.getCommentRegionBlock(k,s,m);var e=s.match(this.foldingStartMarker);if(e){var t=e.index;if(e[1])return this.openingBracketBlock(k,e[1],m,t);var n=k.getCommentFoldRange(m,t+e[0].length,1);return n&&!n.isMultiLine()&&(h?n=this.getSectionRange(k,m):r!="all"&&(n=null)),n}if(r!=="markbegin"){var e=s.match(this.foldingStopMarker);if(e){var t=e.index+e[0].length;return e[1]?this.closingBracketBlock(k,e[1],m,t):k.getCommentFoldRange(m,t,-1)}}},this.getSectionRange=function(k,r){var m=k.getLine(r),h=m.search(/\S/),s=r,e=m.length;r=r+1;for(var t=r,n=k.getLength();++r<n;){m=k.getLine(r);var a=m.search(/\S/);if(a!==-1){if(h>a)break;var i=this.getFoldWidgetRange(k,"all",r);if(i){if(i.start.row<=s)break;if(i.isMultiLine())r=i.end.row;else if(h==a)break}t=r}}return new I(s,e,t,k.getLine(t).length)},this.getCommentRegionBlock=function(k,r,m){for(var h=r.search(/\s*$/),s=k.getLength(),e=m,t=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,n=1;++m<s;){r=k.getLine(m);var a=t.exec(r);if(a&&(a[1]?n--:n++,!n))break}var i=m;if(i>e)return new I(e,h,i,r.length)}}.call(T.prototype)}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(ze,Re,jr){var W=ze("../lib/oop"),I=ze("./text").Mode,o=ze("./javascript_highlight_rules").JavaScriptHighlightRules,T=ze("./matching_brace_outdent").MatchingBraceOutdent,k=ze("../worker/worker_client").WorkerClient,r=ze("./behaviour/cstyle").CstyleBehaviour,m=ze("./folding/cstyle").FoldMode,h=function(){this.HighlightRules=o,this.$outdent=new T,this.$behaviour=new r,this.foldingRules=new m};W.inherits(h,I),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.$pairQuotesAfter={"`":/\w/},this.getNextLineIndent=function(s,e,t){var n=this.$getIndent(e),a=this.getTokenizer().getLineTokens(e,s),i=a.tokens,c=a.state;if(i.length&&i[i.length-1].type=="comment")return n;if(s=="start"||s=="no_regex"){var l=e.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/);l&&(n+=t)}else if(s=="doc-start"){if(c=="start"||c=="no_regex")return"";var l=e.match(/^\s*(\/?)\*/);l&&(l[1]&&(n+=" "),n+="* ")}return n},this.checkOutdent=function(s,e,t){return this.$outdent.checkOutdent(e,t)},this.autoOutdent=function(s,e,t){this.$outdent.autoOutdent(e,t)},this.createWorker=function(s){var e=new k(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return e.attachToDocument(s.getDocument()),e.on("annotate",function(t){s.setAnnotations(t.data)}),e.on("terminate",function(){s.clearAnnotations()}),e},this.$id="ace/mode/javascript",this.snippetFileId="ace/snippets/javascript"}.call(h.prototype),Re.Mode=h}),function(){ace.require(["ace/mode/javascript"],function(ze){Rn&&(Rn.exports=ze)})}()})(hp);const fp="/nlcts/assets/nlct_bg-0f8b7d5e.wasm",pp=async(Rn={},zn)=>{let ze;if(zn.startsWith("data:")){const Re=zn.replace(/^data:.*?base64,/,"");let jr;if(typeof Buffer=="function"&&typeof Buffer.from=="function")jr=Buffer.from(Re,"base64");else if(typeof atob=="function"){const W=atob(Re);jr=new Uint8Array(W.length);for(let I=0;I<W.length;I++)jr[I]=W.charCodeAt(I)}else throw new Error("Cannot decode base64-encoded data URL");ze=await WebAssembly.instantiate(jr,Rn)}else{const Re=await fetch(zn),jr=Re.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&jr.startsWith("application/wasm"))ze=await WebAssembly.instantiateStreaming(Re,Rn);else{const W=await Re.arrayBuffer();ze=await WebAssembly.instantiate(W,Rn)}}return ze.instance.exports};let Hi;function dp(Rn){Hi=Rn}const gp=typeof TextDecoder>"u"?(0,lp.require)("util").TextDecoder:TextDecoder;let wh=new gp("utf-8",{ignoreBOM:!0,fatal:!0});wh.decode();let Nc=null;function mp(){return(Nc===null||Nc.byteLength===0)&&(Nc=new Uint8Array(Hi.memory.buffer)),Nc}function Lu(Rn,zn){return Rn=Rn>>>0,wh.decode(mp().subarray(Rn,Rn+zn))}let Bc=null;function cl(){return(Bc===null||Bc.byteLength===0)&&(Bc=new Int32Array(Hi.memory.buffer)),Bc}let jc=null;function kh(){return(jc===null||jc.byteLength===0)&&(jc=new Float64Array(Hi.memory.buffer)),jc}function Eu(Rn,zn){return Rn=Rn>>>0,kh().subarray(Rn/8,Rn/8+zn)}let Su=0;function Th(Rn,zn){const ze=zn(Rn.length*8,8)>>>0;return kh().set(Rn,ze/8),Su=Rn.length,ze}function vp(Rn,zn){const ze=Th(zn,Hi.__wbindgen_malloc),Re=Su,jr=Hi.ode4_r(Rn,ze,Re);return Iu.__wrap(jr)}new Array(128).fill(void 0).push(void 0,null,!0,!1);class Uc{static __wrap(zn){zn=zn>>>0;const ze=Object.create(Uc.prototype);return ze.__wbg_ptr=zn,ze}__destroy_into_raw(){const zn=this.__wbg_ptr;return this.__wbg_ptr=0,zn}free(){const zn=this.__destroy_into_raw();Hi.__wbg_data_free(zn)}names(){let zn,ze;try{const W=Hi.__wbindgen_add_to_stack_pointer(-16);Hi.data_names(W,this.__wbg_ptr);var Re=cl()[W/4+0],jr=cl()[W/4+1];return zn=Re,ze=jr,Lu(Re,jr)}finally{Hi.__wbindgen_add_to_stack_pointer(16),Hi.__wbindgen_free(zn,ze,1)}}data(){try{const jr=Hi.__wbindgen_add_to_stack_pointer(-16);Hi.data_data(jr,this.__wbg_ptr);var zn=cl()[jr/4+0],ze=cl()[jr/4+1],Re=Eu(zn,ze).slice();return Hi.__wbindgen_free(zn,ze*8),Re}finally{Hi.__wbindgen_add_to_stack_pointer(16)}}}class Iu{static __wrap(zn){zn=zn>>>0;const ze=Object.create(Iu.prototype);return ze.__wbg_ptr=zn,ze}__destroy_into_raw(){const zn=this.__wbg_ptr;return this.__wbg_ptr=0,zn}free(){const zn=this.__destroy_into_raw();Hi.__wbg_result_free(zn)}step(){Hi.result_step(this.__wbg_ptr)}times(){try{const jr=Hi.__wbindgen_add_to_stack_pointer(-16);Hi.result_times(jr,this.__wbg_ptr);var zn=cl()[jr/4+0],ze=cl()[jr/4+1],Re=Eu(zn,ze).slice();return Hi.__wbindgen_free(zn,ze*8),Re}finally{Hi.__wbindgen_add_to_stack_pointer(16)}}last_data(){const zn=Hi.result_last_data(this.__wbg_ptr);return Uc.__wrap(zn)}data(zn){const ze=Hi.result_data(this.__wbg_ptr,zn);return Uc.__wrap(ze)}}function yp(Rn,zn,ze,Re){var jr=Eu(ze,Re).slice();Hi.__wbindgen_free(ze,Re*8);const W=ode_rhs(zn,jr),I=Th(W,Hi.__wbindgen_malloc),o=Su;cl()[Rn/4+1]=o,cl()[Rn/4+0]=I}function xp(Rn,zn){alert(Lu(Rn,zn))}function bp(Rn,zn){throw new Error(Lu(Rn,zn))}URL=globalThis.URL;const Ba=await pp({"./nlct_bg.js":{__wbg_oderhs_1e5035fe60a6917a:yp,__wbg_alert_313a593755e1e7a4:xp,__wbindgen_throw:bp}},fp),_p=Ba.memory,wp=Ba.__wbg_result_free,kp=Ba.__wbg_data_free,Tp=Ba.data_names,Mp=Ba.data_data,Ap=Ba.result_step,Cp=Ba.result_times,Lp=Ba.result_last_data,Ep=Ba.result_data,Sp=Ba.ode4_r,Ip=Ba.ode4,Op=Ba.concensus,Rp=Ba.greet,Pp=Ba.nlct,Dp=Ba.__wbindgen_add_to_stack_pointer,Fp=Ba.__wbindgen_free,zp=Ba.__wbindgen_malloc,Np=Object.freeze(Object.defineProperty({__proto__:null,__wbg_data_free:kp,__wbg_result_free:wp,__wbindgen_add_to_stack_pointer:Dp,__wbindgen_free:Fp,__wbindgen_malloc:zp,concensus:Op,data_data:Mp,data_names:Tp,greet:Rp,memory:_p,nlct:Pp,ode4:Ip,ode4_r:Sp,result_data:Ep,result_last_data:Lp,result_step:Ap,result_times:Cp},Symbol.toStringTag,{value:"Module"}));dp(Np);var Ou={},Bp={get exports(){return Ou},set exports(Rn){Ou=Rn}};(function(Rn,zn){(function(ze,Re){Rn.exports=Re()})(self,function(){return function(){var ze={98847:function(W,I,o){var T=o(71828),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var r in k){var m=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");T.addStyleRule(m,k[r])}},98222:function(W,I,o){W.exports=o(82887)},27206:function(W,I,o){W.exports=o(60822)},59893:function(W,I,o){W.exports=o(23381)},5224:function(W,I,o){W.exports=o(83832)},59509:function(W,I,o){W.exports=o(72201)},75557:function(W,I,o){W.exports=o(91815)},40338:function(W,I,o){W.exports=o(21462)},35080:function(W,I,o){W.exports=o(51319)},61396:function(W,I,o){W.exports=o(57516)},40549:function(W,I,o){W.exports=o(98128)},49866:function(W,I,o){W.exports=o(99442)},36089:function(W,I,o){W.exports=o(93740)},19548:function(W,I,o){W.exports=o(8729)},35831:function(W,I,o){W.exports=o(93814)},61039:function(W,I,o){W.exports=o(14382)},97040:function(W,I,o){W.exports=o(51759)},77986:function(W,I,o){W.exports=o(10421)},24296:function(W,I,o){W.exports=o(43102)},58872:function(W,I,o){W.exports=o(92165)},29626:function(W,I,o){W.exports=o(3325)},65591:function(W,I,o){W.exports=o(36071)},69738:function(W,I,o){W.exports=o(43905)},92650:function(W,I,o){W.exports=o(35902)},35630:function(W,I,o){W.exports=o(69816)},73434:function(W,I,o){W.exports=o(94507)},27909:function(W,I,o){var T=o(19548);T.register([o(27206),o(5224),o(58872),o(65591),o(69738),o(92650),o(49866),o(25743),o(6197),o(97040),o(85461),o(73434),o(54201),o(81299),o(47645),o(35630),o(77986),o(83043),o(93005),o(96881),o(4534),o(50581),o(40549),o(77900),o(47582),o(35080),o(21641),o(17280),o(5861),o(29626),o(10021),o(65317),o(96268),o(61396),o(35831),o(16122),o(46163),o(40344),o(40338),o(48131),o(36089),o(55334),o(75557),o(19440),o(99488),o(59893),o(97393),o(98222),o(61039),o(24296),o(66398),o(59509)]),W.exports=T},46163:function(W,I,o){W.exports=o(15154)},96881:function(W,I,o){W.exports=o(64943)},50581:function(W,I,o){W.exports=o(21164)},55334:function(W,I,o){W.exports=o(54186)},65317:function(W,I,o){W.exports=o(94873)},10021:function(W,I,o){W.exports=o(67618)},54201:function(W,I,o){W.exports=o(58810)},5861:function(W,I,o){W.exports=o(20593)},16122:function(W,I,o){W.exports=o(29396)},83043:function(W,I,o){W.exports=o(13551)},48131:function(W,I,o){W.exports=o(46858)},47582:function(W,I,o){W.exports=o(17988)},21641:function(W,I,o){W.exports=o(68868)},96268:function(W,I,o){W.exports=o(20467)},19440:function(W,I,o){W.exports=o(91271)},99488:function(W,I,o){W.exports=o(21461)},97393:function(W,I,o){W.exports=o(85956)},25743:function(W,I,o){W.exports=o(52979)},66398:function(W,I,o){W.exports=o(32275)},17280:function(W,I,o){W.exports=o(6419)},77900:function(W,I,o){W.exports=o(61510)},81299:function(W,I,o){W.exports=o(87619)},93005:function(W,I,o){W.exports=o(93601)},40344:function(W,I,o){W.exports=o(96595)},47645:function(W,I,o){W.exports=o(70954)},6197:function(W,I,o){W.exports=o(47462)},4534:function(W,I,o){W.exports=o(17659)},85461:function(W,I,o){W.exports=o(19990)},82884:function(W){W.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(W,I,o){var T=o(82884),k=o(41940),r=o(85555),m=o(44467).templatedArray;o(24695),W.exports=m("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:T.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:T.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",r.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",r.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(W,I,o){var T=o(71828),k=o(89298),r=o(92605).draw;function m(s){var e=s._fullLayout;T.filterVisible(e.annotations).forEach(function(t){var n=k.getFromId(s,t.xref),a=k.getFromId(s,t.yref),i=k.getRefType(t.xref),c=k.getRefType(t.yref);t._extremes={},i==="range"&&h(t,n),c==="range"&&h(t,a)})}function h(s,e){var t,n=e._id,a=n.charAt(0),i=s[a],c=s["a"+a],l=s[a+"ref"],u=s["a"+a+"ref"],f=s["_"+a+"padplus"],d=s["_"+a+"padminus"],w={x:1,y:-1}[a]*s[a+"shift"],v=3*s.arrowsize*s.arrowwidth||0,p=v+w,y=v-w,b=3*s.startarrowsize*s.arrowwidth||0,x=b+w,_=b-w;if(u===l){var g=k.findExtremes(e,[e.r2c(i)],{ppadplus:p,ppadminus:y}),A=k.findExtremes(e,[e.r2c(c)],{ppadplus:Math.max(f,x),ppadminus:Math.max(d,_)});t={min:[g.min[0],A.min[0]],max:[g.max[0],A.max[0]]}}else x=c?x+c:x,_=c?_-c:_,t=k.findExtremes(e,[e.r2c(i)],{ppadplus:Math.max(f,p,x),ppadminus:Math.max(d,y,_)});s._extremes[n]=t}W.exports=function(s){var e=s._fullLayout;if(T.filterVisible(e.annotations).length&&s._fullData.length)return T.syncOrAsync([r,m],s)}},44317:function(W,I,o){var T=o(71828),k=o(73972),r=o(44467).arrayEditor;function m(s,e){var t,n,a,i,c,l,u,f=s._fullLayout.annotations,d=[],w=[],v=[],p=(e||[]).length;for(t=0;t<f.length;t++)if(i=(a=f[t]).clicktoshow){for(n=0;n<p;n++)if(l=(c=e[n]).xaxis,u=c.yaxis,l._id===a.xref&&u._id===a.yref&&l.d2r(c.x)===h(a._xclick,l)&&u.d2r(c.y)===h(a._yclick,u)){(a.visible?i==="onout"?w:v:d).push(t);break}n===p&&a.visible&&i==="onout"&&w.push(t)}return{on:d,off:w,explicitOff:v}}function h(s,e){return e.type==="log"?e.l2r(s):e.d2r(s)}W.exports={hasClickToShow:function(s,e){var t=m(s,e);return t.on.length>0||t.explicitOff.length>0},onClick:function(s,e){var t,n,a=m(s,e),i=a.on,c=a.off.concat(a.explicitOff),l={},u=s._fullLayout.annotations;if(i.length||c.length){for(t=0;t<i.length;t++)(n=r(s.layout,"annotations",u[i[t]])).modifyItem("visible",!0),T.extendFlat(l,n.getUpdateObj());for(t=0;t<c.length;t++)(n=r(s.layout,"annotations",u[c[t]])).modifyItem("visible",!1),T.extendFlat(l,n.getUpdateObj());return k.call("update",s,{},l)}}}},25625:function(W,I,o){var T=o(71828),k=o(7901);W.exports=function(r,m,h,s){s("opacity");var e=s("bgcolor"),t=s("bordercolor"),n=k.opacity(t);s("borderpad");var a=s("borderwidth"),i=s("showarrow");if(s("text",i?" ":h._dfltTitle.annotation),s("textangle"),T.coerceFont(s,"font",h.font),s("width"),s("align"),s("height")&&s("valign"),i){var c,l,u=s("arrowside");u.indexOf("end")!==-1&&(c=s("arrowhead"),l=s("arrowsize")),u.indexOf("start")!==-1&&(s("startarrowhead",c),s("startarrowsize",l)),s("arrowcolor",n?m.bordercolor:k.defaultLine),s("arrowwidth",2*(n&&a||1)),s("standoff"),s("startstandoff")}var f=s("hovertext"),d=h.hoverlabel||{};if(f){var w=s("hoverlabel.bgcolor",d.bgcolor||(k.opacity(e)?k.rgb(e):k.defaultLine)),v=s("hoverlabel.bordercolor",d.bordercolor||k.contrast(w));T.coerceFont(s,"hoverlabel.font",{family:d.font.family,size:d.font.size,color:d.font.color||v})}s("captureevents",!!f)}},94128:function(W,I,o){var T=o(92770),k=o(58163);W.exports=function(r,m,h,s){m=m||{};var e=h==="log"&&m.type==="linear",t=h==="linear"&&m.type==="log";if(e||t)for(var n,a,i=r._fullLayout.annotations,c=m._id.charAt(0),l=0;l<i.length;l++)n=i[l],a="annotations["+l+"].",n[c+"ref"]===m._id&&u(c),n["a"+c+"ref"]===m._id&&u("a"+c);function u(f){var d=n[f],w=null;w=e?k(d,m.range):Math.pow(10,d),T(w)||(w=null),s(a+f,w)}}},84046:function(W,I,o){var T=o(71828),k=o(89298),r=o(85501),m=o(25625),h=o(50215);function s(e,t,n){function a(A,M){return T.coerce(e,t,h,A,M)}var i=a("visible"),c=a("clicktoshow");if(i||c){m(e,t,n,a);for(var l=t.showarrow,u=["x","y"],f=[-10,-30],d={_fullLayout:n},w=0;w<2;w++){var v=u[w],p=k.coerceRef(e,t,d,v,"","paper");if(p!=="paper"&&k.getFromId(d,p)._annIndices.push(t._index),k.coercePosition(t,d,a,p,v,.5),l){var y="a"+v,b=k.coerceRef(e,t,d,y,"pixel",["pixel","paper"]);b!=="pixel"&&b!==p&&(b=t[y]="pixel");var x=b==="pixel"?f[w]:.4;k.coercePosition(t,d,a,b,y,x)}a(v+"anchor"),a(v+"shift")}if(T.noneOrAll(e,t,["x","y"]),l&&T.noneOrAll(e,t,["ax","ay"]),c){var _=a("xclick"),g=a("yclick");t._xclick=_===void 0?t.x:k.cleanPosition(_,d,t.xref),t._yclick=g===void 0?t.y:k.cleanPosition(g,d,t.yref)}}}W.exports=function(e,t){r(e,t,{name:"annotations",handleItemDefaults:s})}},92605:function(W,I,o){var T=o(39898),k=o(73972),r=o(74875),m=o(71828),h=m.strTranslate,s=o(89298),e=o(7901),t=o(91424),n=o(30211),a=o(63893),i=o(6964),c=o(28569),l=o(44467).arrayEditor,u=o(13011);function f(v,p){var y=v._fullLayout.annotations[p]||{},b=s.getFromId(v,y.xref),x=s.getFromId(v,y.yref);b&&b.setScale(),x&&x.setScale(),w(v,y,p,!1,b,x)}function d(v,p,y,b,x){var _=x[y],g=x[y+"ref"],A=y.indexOf("y")!==-1,M=s.getRefType(g)==="domain",L=A?b.h:b.w;return v?M?_+(A?-p:p)/v._length:v.p2r(v.r2p(_)+p):_+(A?-p:p)/L}function w(v,p,y,b,x,_){var g,A,M=v._fullLayout,L=v._fullLayout._size,E=v._context.edits;b?(g="annotation-"+b,A=b+".annotations"):(g="annotation",A="annotations");var S=l(v.layout,A,p),O=S.modifyBase,P=S.modifyItem,U=S.getUpdateObj;M._infolayer.selectAll("."+g+'[data-index="'+y+'"]').remove();var R="clip"+M._uid+"_ann"+y;if(p._input&&p.visible!==!1){var j={x:{},y:{}},B=+p.textangle||0,z=M._infolayer.append("g").classed(g,!0).attr("data-index",String(y)).style("opacity",p.opacity),G=z.append("g").classed("annotation-text-g",!0),V=E[p.showarrow?"annotationTail":"annotationPosition"],et=p.captureevents||E.annotationText||V,J=G.append("g").style("pointer-events",et?"all":null).call(i,"pointer").on("click",function(){v._dragging=!1,v.emit("plotly_clickannotation",gt(T.event))});p.hovertext&&J.on("mouseover",function(){var mt=p.hoverlabel,Ot=mt.font,vt=this.getBoundingClientRect(),xt=v.getBoundingClientRect();n.loneHover({x0:vt.left-xt.left,x1:vt.right-xt.left,y:(vt.top+vt.bottom)/2-xt.top,text:p.hovertext,color:mt.bgcolor,borderColor:mt.bordercolor,fontFamily:Ot.family,fontSize:Ot.size,fontColor:Ot.color},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:v})}).on("mouseout",function(){n.loneUnhover(M._hoverlayer.node())});var X=p.borderwidth,Y=p.borderpad,Z=X+Y,tt=J.append("rect").attr("class","bg").style("stroke-width",X+"px").call(e.stroke,p.bordercolor).call(e.fill,p.bgcolor),rt=p.width||p.height,nt=M._topclips.selectAll("#"+R).data(rt?[0]:[]);nt.enter().append("clipPath").classed("annclip",!0).attr("id",R).append("rect"),nt.exit().remove();var ot=p.font,ct=M._meta?m.templateString(p.text,M._meta):p.text,pt=J.append("text").classed("annotation-text",!0).text(ct);E.annotationText?pt.call(a.makeEditable,{delegate:J,gd:v}).call(kt).on("edit",function(mt){p.text=mt,this.call(kt),P("text",mt),x&&x.autorange&&O(x._name+".autorange",!0),_&&_.autorange&&O(_._name+".autorange",!0),k.call("_guiRelayout",v,U())}):pt.call(kt)}else T.selectAll("#"+R).remove();function gt(mt){var Ot={index:y,annotation:p._input,fullAnnotation:p,event:mt};return b&&(Ot.subplotId=b),Ot}function kt(mt){return mt.call(t.font,ot).attr({"text-anchor":{left:"start",right:"end"}[p.align]||"middle"}),a.convertToTspans(mt,v,yt),mt}function yt(){var mt=pt.selectAll("a");mt.size()===1&&mt.text()===pt.text()&&J.insert("a",":first-child").attr({"xlink:xlink:href":mt.attr("xlink:href"),"xlink:xlink:show":mt.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(tt.node());var Ot=J.select(".annotation-text-math-group"),vt=!Ot.empty(),xt=t.bBox((vt?Ot:pt).node()),st=xt.width,at=xt.height,ht=p.width||st,Lt=p.height||at,Mt=Math.round(ht+2*Z),_t=Math.round(Lt+2*Z);function St(me,ce){return ce==="auto"&&(ce=me<.3333333333333333?"left":me>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ce]}for(var Dt=!1,ut=["x","y"],Tt=0;Tt<ut.length;Tt++){var bt,It,zt,Ft,$t,Wt=ut[Tt],Xt=p[Wt+"ref"]||Wt,ae=p["a"+Wt+"ref"],Qt={x,y:_}[Wt],de=(B+(Wt==="x"?0:-90))*Math.PI/180,ye=Mt*Math.cos(de),ve=_t*Math.sin(de),ie=Math.abs(ye)+Math.abs(ve),se=p[Wt+"anchor"],ke=p[Wt+"shift"]*(Wt==="x"?1:-1),Ae=j[Wt],Ie=s.getRefType(Xt);if(Qt&&Ie!=="domain"){var Te=Qt.r2fraction(p[Wt]);(Te<0||Te>1)&&(ae===Xt?((Te=Qt.r2fraction(p["a"+Wt]))<0||Te>1)&&(Dt=!0):Dt=!0),bt=Qt._offset+Qt.r2p(p[Wt]),Ft=.5}else{var Vt=Ie==="domain";Wt==="x"?(zt=p[Wt],bt=Vt?Qt._offset+Qt._length*zt:bt=L.l+L.w*zt):(zt=1-p[Wt],bt=Vt?Qt._offset+Qt._length*zt:bt=L.t+L.h*zt),Ft=p.showarrow?.5:zt}if(p.showarrow){Ae.head=bt;var Zt=p["a"+Wt];if($t=ye*St(.5,p.xanchor)-ve*St(.5,p.yanchor),ae===Xt){var Gt=s.getRefType(ae);Gt==="domain"?(Wt==="y"&&(Zt=1-Zt),Ae.tail=Qt._offset+Qt._length*Zt):Gt==="paper"?Wt==="y"?(Zt=1-Zt,Ae.tail=L.t+L.h*Zt):Ae.tail=L.l+L.w*Zt:Ae.tail=Qt._offset+Qt.r2p(Zt),It=$t}else Ae.tail=bt+Zt,It=$t+Zt;Ae.text=Ae.tail+$t;var Yt=M[Wt==="x"?"width":"height"];if(Xt==="paper"&&(Ae.head=m.constrain(Ae.head,1,Yt-1)),ae==="pixel"){var ne=-Math.max(Ae.tail-3,Ae.text),re=Math.min(Ae.tail+3,Ae.text)-Yt;ne>0?(Ae.tail+=ne,Ae.text+=ne):re>0&&(Ae.tail-=re,Ae.text-=re)}Ae.tail+=ke,Ae.head+=ke}else It=$t=ie*St(Ft,se),Ae.text=bt+$t;Ae.text+=ke,$t+=ke,It+=ke,p["_"+Wt+"padplus"]=ie/2+It,p["_"+Wt+"padminus"]=ie/2-It,p["_"+Wt+"size"]=ie,p["_"+Wt+"shift"]=$t}if(Dt)J.remove();else{var Pt=0,Nt=0;if(p.align!=="left"&&(Pt=(ht-st)*(p.align==="center"?.5:1)),p.valign!=="top"&&(Nt=(Lt-at)*(p.valign==="middle"?.5:1)),vt)Ot.select("svg").attr({x:Z+Pt-1,y:Z+Nt}).call(t.setClipUrl,rt?R:null,v);else{var ee=Z+Nt-xt.top,te=Z+Pt-xt.left;pt.call(a.positionText,te,ee).call(t.setClipUrl,rt?R:null,v)}nt.select("rect").call(t.setRect,Z,Z,ht,Lt),tt.call(t.setRect,X/2,X/2,Mt-X,_t-X),J.call(t.setTranslate,Math.round(j.x.text-Mt/2),Math.round(j.y.text-_t/2)),G.attr({transform:"rotate("+B+","+j.x.text+","+j.y.text+")"});var ge,pe=function(me,ce){z.selectAll(".annotation-arrow-g").remove();var we=j.x.head,ue=j.y.head,he=j.x.tail+me,be=j.y.tail+ce,Pe=j.x.text+me,De=j.y.text+ce,Ue=m.rotationXYMatrix(B,Pe,De),tr=m.apply2DTransform(Ue),Ge=m.apply2DTransform2(Ue),Ze=+tt.attr("width"),We=+tt.attr("height"),pr=Pe-.5*Ze,xr=pr+Ze,sr=De-.5*We,$e=sr+We,ir=[[pr,sr,pr,$e],[pr,$e,xr,$e],[xr,$e,xr,sr],[xr,sr,pr,sr]].map(Ge);if(!ir.reduce(function(tn,qr){return tn^!!m.segmentsIntersect(we,ue,we+1e6,ue+1e6,qr[0],qr[1],qr[2],qr[3])},!1)){ir.forEach(function(tn){var qr=m.segmentsIntersect(he,be,we,ue,tn[0],tn[1],tn[2],tn[3]);qr&&(he=qr.x,be=qr.y)});var Ke=p.arrowwidth,ar=p.arrowcolor,fr=p.arrowside,mr=z.append("g").style({opacity:e.opacity(ar)}).classed("annotation-arrow-g",!0),Cr=mr.append("path").attr("d","M"+he+","+be+"L"+we+","+ue).style("stroke-width",Ke+"px").call(e.stroke,e.rgb(ar));if(u(Cr,fr,p),E.annotationPosition&&Cr.node().parentNode&&!b){var Er=we,_r=ue;if(p.standoff){var Sr=Math.sqrt(Math.pow(we-he,2)+Math.pow(ue-be,2));Er+=p.standoff*(he-we)/Sr,_r+=p.standoff*(be-ue)/Sr}var Xr,en,sn=mr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(he-Er)+","+(be-_r),transform:h(Er,_r)}).style("stroke-width",Ke+6+"px").call(e.stroke,"rgba(0,0,0,0)").call(e.fill,"rgba(0,0,0,0)");c.init({element:sn.node(),gd:v,prepFn:function(){var tn=t.getTranslate(J);Xr=tn.x,en=tn.y,x&&x.autorange&&O(x._name+".autorange",!0),_&&_.autorange&&O(_._name+".autorange",!0)},moveFn:function(tn,qr){var vn=tr(Xr,en),je=vn[0]+tn,nr=vn[1]+qr;J.call(t.setTranslate,je,nr),P("x",d(x,tn,"x",L,p)),P("y",d(_,qr,"y",L,p)),p.axref===p.xref&&P("ax",d(x,tn,"ax",L,p)),p.ayref===p.yref&&P("ay",d(_,qr,"ay",L,p)),mr.attr("transform",h(tn,qr)),G.attr({transform:"rotate("+B+","+je+","+nr+")"})},doneFn:function(){k.call("_guiRelayout",v,U());var tn=document.querySelector(".js-notes-box-panel");tn&&tn.redraw(tn.selectedObj)}})}}};p.showarrow&&pe(0,0),V&&c.init({element:J.node(),gd:v,prepFn:function(){ge=G.attr("transform")},moveFn:function(me,ce){var we="pointer";if(p.showarrow)p.axref===p.xref?P("ax",d(x,me,"ax",L,p)):P("ax",p.ax+me),p.ayref===p.yref?P("ay",d(_,ce,"ay",L.w,p)):P("ay",p.ay+ce),pe(me,ce);else{if(b)return;var ue,he;if(x)ue=d(x,me,"x",L,p);else{var be=p._xsize/L.w,Pe=p.x+(p._xshift-p.xshift)/L.w-be/2;ue=c.align(Pe+me/L.w,be,0,1,p.xanchor)}if(_)he=d(_,ce,"y",L,p);else{var De=p._ysize/L.h,Ue=p.y-(p._yshift+p.yshift)/L.h-De/2;he=c.align(Ue-ce/L.h,De,0,1,p.yanchor)}P("x",ue),P("y",he),x&&_||(we=c.getCursor(x?.5:ue,_?.5:he,p.xanchor,p.yanchor))}G.attr({transform:h(me,ce)+ge}),i(J,we)},clickFn:function(me,ce){p.captureevents&&v.emit("plotly_clickannotation",gt(ce))},doneFn:function(){i(J),k.call("_guiRelayout",v,U());var me=document.querySelector(".js-notes-box-panel");me&&me.redraw(me.selectedObj)}})}}}W.exports={draw:function(v){var p=v._fullLayout;p._infolayer.selectAll(".annotation").remove();for(var y=0;y<p.annotations.length;y++)p.annotations[y].visible&&f(v,y);return r.previousPromises(v)},drawOne:f,drawRaw:w}},13011:function(W,I,o){var T=o(39898),k=o(7901),r=o(82884),m=o(71828),h=m.strScale,s=m.strRotate,e=m.strTranslate;W.exports=function(t,n,a){var i,c,l,u,f=t.node(),d=r[a.arrowhead||0],w=r[a.startarrowhead||0],v=(a.arrowwidth||1)*(a.arrowsize||1),p=(a.arrowwidth||1)*(a.startarrowsize||1),y=n.indexOf("start")>=0,b=n.indexOf("end")>=0,x=d.backoff*v+a.standoff,_=w.backoff*p+a.startstandoff;if(f.nodeName==="line"){i={x:+t.attr("x1"),y:+t.attr("y1")},c={x:+t.attr("x2"),y:+t.attr("y2")};var g=i.x-c.x,A=i.y-c.y;if(u=(l=Math.atan2(A,g))+Math.PI,x&&_&&x+_>Math.sqrt(g*g+A*A))return void z();if(x){if(x*x>g*g+A*A)return void z();var M=x*Math.cos(l),L=x*Math.sin(l);c.x+=M,c.y+=L,t.attr({x2:c.x,y2:c.y})}if(_){if(_*_>g*g+A*A)return void z();var E=_*Math.cos(l),S=_*Math.sin(l);i.x-=E,i.y-=S,t.attr({x1:i.x,y1:i.y})}}else if(f.nodeName==="path"){var O=f.getTotalLength(),P="";if(O<x+_)return void z();var U=f.getPointAtLength(0),R=f.getPointAtLength(.1);l=Math.atan2(U.y-R.y,U.x-R.x),i=f.getPointAtLength(Math.min(_,O)),P="0px,"+_+"px,";var j=f.getPointAtLength(O),B=f.getPointAtLength(O-.1);u=Math.atan2(j.y-B.y,j.x-B.x),c=f.getPointAtLength(Math.max(0,O-x)),P+=O-(P?_+x:x)+"px,"+O+"px",t.style("stroke-dasharray",P)}function z(){t.style("stroke-dasharray","0px,100px")}function G(V,et,J,X){V.path&&(V.noRotate&&(J=0),T.select(f.parentNode).append("path").attr({class:t.attr("class"),d:V.path,transform:e(et.x,et.y)+s(180*J/Math.PI)+h(X)}).style({fill:k.rgb(a.arrowcolor),"stroke-width":0}))}y&&G(w,i,l,p),b&&G(d,c,u,v)}},32745:function(W,I,o){var T=o(92605),k=o(44317);W.exports={moduleType:"component",name:"annotations",layoutAttributes:o(50215),supplyLayoutDefaults:o(84046),includeBasePlot:o(76325)("annotations"),calcAutorange:o(3749),draw:T.draw,drawOne:T.drawOne,drawRaw:T.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:o(94128)}},26997:function(W,I,o){var T=o(50215),k=o(30962).overrideAll,r=o(44467).templatedArray;W.exports=k(r("annotation",{visible:T.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:T.xanchor,xshift:T.xshift,yanchor:T.yanchor,yshift:T.yshift,text:T.text,textangle:T.textangle,font:T.font,width:T.width,height:T.height,opacity:T.opacity,align:T.align,valign:T.valign,bgcolor:T.bgcolor,bordercolor:T.bordercolor,borderpad:T.borderpad,borderwidth:T.borderwidth,showarrow:T.showarrow,arrowcolor:T.arrowcolor,arrowhead:T.arrowhead,startarrowhead:T.startarrowhead,arrowside:T.arrowside,arrowsize:T.arrowsize,startarrowsize:T.startarrowsize,arrowwidth:T.arrowwidth,standoff:T.standoff,startstandoff:T.startstandoff,hovertext:T.hovertext,hoverlabel:T.hoverlabel,captureevents:T.captureevents}),"calc","from-root")},5485:function(W,I,o){var T=o(71828),k=o(89298);function r(m,h){var s=h.fullSceneLayout.domain,e=h.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};m._xa={},T.extendFlat(m._xa,t),k.setConvert(m._xa),m._xa._offset=e.l+s.x[0]*e.w,m._xa.l2p=function(){return .5*(1+m._pdata[0]/m._pdata[3])*e.w*(s.x[1]-s.x[0])},m._ya={},T.extendFlat(m._ya,t),k.setConvert(m._ya),m._ya._offset=e.t+(1-s.y[1])*e.h,m._ya.l2p=function(){return .5*(1-m._pdata[1]/m._pdata[3])*e.h*(s.y[1]-s.y[0])}}W.exports=function(m){for(var h=m.fullSceneLayout.annotations,s=0;s<h.length;s++)r(h[s],m);m.fullLayout._infolayer.selectAll(".annotation-"+m.id).remove()}},20226:function(W,I,o){var T=o(71828),k=o(89298),r=o(85501),m=o(25625),h=o(26997);function s(e,t,n,a){function i(l,u){return T.coerce(e,t,h,l,u)}function c(l){var u=l+"axis",f={_fullLayout:{}};return f._fullLayout[u]=n[u],k.coercePosition(t,f,i,l,l,.5)}i("visible")&&(m(e,t,a.fullLayout,i),c("x"),c("y"),c("z"),T.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",i("ax",-10),i("ay",-30),T.noneOrAll(e,t,["ax","ay"])))}W.exports=function(e,t,n){r(e,t,{name:"annotations",handleItemDefaults:s,fullLayout:n.fullLayout})}},82188:function(W,I,o){var T=o(92605).drawRaw,k=o(63538),r=["x","y","z"];W.exports=function(m){for(var h=m.fullSceneLayout,s=m.dataScale,e=h.annotations,t=0;t<e.length;t++){for(var n=e[t],a=!1,i=0;i<3;i++){var c=r[i],l=n[c],u=h[c+"axis"].r2fraction(l);if(u<0||u>1){a=!0;break}}a?m.fullLayout._infolayer.select(".annotation-"+m.id+'[data-index="'+t+'"]').remove():(n._pdata=k(m.glplot.cameraParams,[h.xaxis.r2l(n.x)*s[0],h.yaxis.r2l(n.y)*s[1],h.zaxis.r2l(n.z)*s[2]]),T(m.graphDiv,n,t,m.id,n._xa,n._ya))}}},2468:function(W,I,o){var T=o(73972),k=o(71828);W.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:o(26997)}}},layoutAttributes:o(26997),handleDefaults:o(20226),includeBasePlot:function(r,m){var h=T.subplotsRegistry.gl3d;if(h)for(var s=h.attrRegex,e=Object.keys(r),t=0;t<e.length;t++){var n=e[t];s.test(n)&&(r[n].annotations||[]).length&&(k.pushUnique(m._basePlotModules,h),k.pushUnique(m._subplots.gl3d,n))}},convert:o(5485),draw:o(82188)}},7561:function(W,I,o){W.exports=o(63489),o(94338),o(3961),o(38751),o(86825),o(37715),o(99384),o(43805),o(88874),o(83290),o(29108),o(55422),o(94320),o(31320),o(51367),o(21457)},72201:function(W,I,o){var T=o(7561),k=o(71828),r=o(50606),m=r.EPOCHJD,h=r.ONEDAY,s={valType:"enumerated",values:k.sortObjectKeys(T.calendars),editType:"calc",dflt:"gregorian"},e=function(v,p,y,b){var x={};return x[y]=s,k.coerce(v,p,x,y,b)},t="##",n={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},a={};function i(v){var p=a[v];return p||(a[v]=T.instance(v))}function c(v){return k.extendFlat({},s,{description:v})}function l(v){return"Sets the calendar system to use with `"+v+"` date data."}var u={xcalendar:c(l("x"))},f=k.extendFlat({},u,{ycalendar:c(l("y"))}),d=k.extendFlat({},f,{zcalendar:c(l("z"))}),w=c(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));W.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:f,bar:f,box:f,heatmap:f,contour:f,histogram:f,histogram2d:f,histogram2dcontour:f,scatter3d:d,surface:d,mesh3d:d,scattergl:f,ohlc:u,candlestick:u},layout:{calendar:c(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:w},yaxis:{calendar:w},scene:{xaxis:{calendar:w},yaxis:{calendar:w},zaxis:{calendar:w}},polar:{radialaxis:{calendar:w}}},transforms:{filter:{valuecalendar:c(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:c(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:s,handleDefaults:e,handleTraceDefaults:function(v,p,y,b){for(var x=0;x<y.length;x++)e(v,p,y[x]+"calendar",b.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:i,worldCalFmt:function(v,p,y){for(var b,x,_,g,A,M=Math.floor((p+.05)/h)+m,L=i(y).fromJD(M),E=0;(E=v.indexOf("%",E))!==-1;)(b=v.charAt(E+1))==="0"||b==="-"||b==="_"?(_=3,x=v.charAt(E+2),b==="_"&&(b="-")):(x=b,b="0",_=2),(g=n[x])?(A=g===t?t:L.formatDate(g[b]),v=v.substr(0,E)+A+v.substr(E+_),E+=A.length):E+=_;return v}}},22399:function(W,I){I.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],I.defaultLine="#444",I.lightLine="#eee",I.background="#fff",I.borderLine="#BEC8D9",I.lightFraction=90.9090909090909},7901:function(W,I,o){var T=o(84267),k=o(92770),r=o(73627).isTypedArray,m=W.exports={},h=o(22399);m.defaults=h.defaults;var s=m.defaultLine=h.defaultLine;m.lightLine=h.lightLine;var e=m.background=h.background;function t(n){if(k(n)||typeof n!="string")return n;var a=n.trim();if(a.substr(0,3)!=="rgb")return n;var i=a.match(/^rgba?\s*\(([^()]*)\)$/);if(!i)return n;var c=i[1].trim().split(/\s*[\s,]\s*/),l=a.charAt(3)==="a"&&c.length===4;if(!l&&c.length!==3)return n;for(var u=0;u<c.length;u++){if(!c[u].length||(c[u]=Number(c[u]),!(c[u]>=0)))return n;if(u===3)c[u]>1&&(c[u]=1);else if(c[u]>=1)return n}var f=Math.round(255*c[0])+", "+Math.round(255*c[1])+", "+Math.round(255*c[2]);return l?"rgba("+f+", "+c[3]+")":"rgb("+f+")"}m.tinyRGB=function(n){var a=n.toRgb();return"rgb("+Math.round(a.r)+", "+Math.round(a.g)+", "+Math.round(a.b)+")"},m.rgb=function(n){return m.tinyRGB(T(n))},m.opacity=function(n){return n?T(n).getAlpha():0},m.addOpacity=function(n,a){var i=T(n).toRgb();return"rgba("+Math.round(i.r)+", "+Math.round(i.g)+", "+Math.round(i.b)+", "+a+")"},m.combine=function(n,a){var i=T(n).toRgb();if(i.a===1)return T(n).toRgbString();var c=T(a||e).toRgb(),l=c.a===1?c:{r:255*(1-c.a)+c.r*c.a,g:255*(1-c.a)+c.g*c.a,b:255*(1-c.a)+c.b*c.a},u={r:l.r*(1-i.a)+i.r*i.a,g:l.g*(1-i.a)+i.g*i.a,b:l.b*(1-i.a)+i.b*i.a};return T(u).toRgbString()},m.contrast=function(n,a,i){var c=T(n);return c.getAlpha()!==1&&(c=T(m.combine(n,e))),(c.isDark()?a?c.lighten(a):e:i?c.darken(i):s).toString()},m.stroke=function(n,a){var i=T(a);n.style({stroke:m.tinyRGB(i),"stroke-opacity":i.getAlpha()})},m.fill=function(n,a){var i=T(a);n.style({fill:m.tinyRGB(i),"fill-opacity":i.getAlpha()})},m.clean=function(n){if(n&&typeof n=="object"){var a,i,c,l,u=Object.keys(n);for(a=0;a<u.length;a++)if(l=n[c=u[a]],c.substr(c.length-5)==="color")if(Array.isArray(l))for(i=0;i<l.length;i++)l[i]=t(l[i]);else n[c]=t(l);else if(c.substr(c.length-10)==="colorscale"&&Array.isArray(l))for(i=0;i<l.length;i++)Array.isArray(l[i])&&(l[i][1]=t(l[i][1]));else if(Array.isArray(l)){var f=l[0];if(!Array.isArray(f)&&f&&typeof f=="object")for(i=0;i<l.length;i++)m.clean(l[i])}else l&&typeof l=="object"&&!r(l)&&m.clean(l)}}},63583:function(W,I,o){var T=o(13838),k=o(41940),r=o(1426).extendFlat,m=o(30962).overrideAll;W.exports=m({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:T.linecolor,outlinewidth:T.linewidth,bordercolor:T.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:T.minor.tickmode,nticks:T.nticks,tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:r({},T.ticks,{dflt:""}),ticklabeloverflow:r({},T.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,ticklabelstep:T.ticklabelstep,showticklabels:T.showticklabels,labelalias:T.labelalias,tickfont:k({}),tickangle:T.tickangle,tickformat:T.tickformat,tickformatstops:T.tickformatstops,tickprefix:T.tickprefix,showtickprefix:T.showtickprefix,ticksuffix:T.ticksuffix,showticksuffix:T.showticksuffix,separatethousands:T.separatethousands,exponentformat:T.exponentformat,minexponent:T.minexponent,showexponent:T.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(W){W.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(W,I,o){var T=o(71828),k=o(44467),r=o(26218),m=o(38701),h=o(96115),s=o(89426),e=o(63583);W.exports=function(t,n,a){var i=k.newContainer(n,"colorbar"),c=t.colorbar||{};function l(P,U){return T.coerce(c,i,e,P,U)}var u=a.margin||{t:0,b:0,l:0,r:0},f=a.width-u.l-u.r,d=a.height-u.t-u.b,w=l("orientation")==="v",v=l("thicknessmode");l("thickness",v==="fraction"?30/(w?f:d):30);var p=l("lenmode");l("len",p==="fraction"?1:w?d:f);var y,b,x,_=l("yref")==="paper",g=l("xref")==="paper",A="left";w?(x="middle",A=g?"left":"right",y=g?1.02:1,b=.5):(x=_?"bottom":"top",A="center",y=.5,b=_?1.02:1),T.coerce(c,i,{x:{valType:"number",min:g?-2:0,max:g?3:1,dflt:y}},"x"),T.coerce(c,i,{y:{valType:"number",min:_?-2:0,max:_?3:1,dflt:b}},"y"),l("xanchor",A),l("xpad"),l("yanchor",x),l("ypad"),T.noneOrAll(c,i,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var M=T.coerce(c,i,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:w?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",M.indexOf("inside")!==-1?"hide past domain":"hide past div"),r(c,i,l,"linear");var L=a.font,E={outerTicks:!1,font:L};M.indexOf("inside")!==-1&&(E.bgColor="black"),s(c,i,l,"linear",E),h(c,i,l,"linear",E),m(c,i,l,"linear",E),l("title.text",a._dfltTitle.colorbar);var S=i.showticklabels?i.tickfont:L,O=T.extendFlat({},S,{color:L.color,size:T.bigFont(S.size)});T.coerceFont(l,"title.font",O),l("title.side",w?"top":"right")}},98981:function(W,I,o){var T=o(39898),k=o(84267),r=o(74875),m=o(73972),h=o(89298),s=o(28569),e=o(71828),t=e.strTranslate,n=o(1426).extendFlat,a=o(6964),i=o(91424),c=o(7901),l=o(92998),u=o(63893),f=o(52075).flipScale,d=o(71453),w=o(52830),v=o(13838),p=o(18783),y=p.LINE_SPACING,b=p.FROM_TL,x=p.FROM_BR,_=o(30939).cn;W.exports={draw:function(g){var A=g._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(M){var L,E,S,O,P=M._fullLayout,U=M.calcdata,R=[];function j(rt){return n(rt,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function B(){typeof O.calc=="function"?O.calc(M,S,L):(L._fillgradient=E.reversescale?f(E.colorscale):E.colorscale,L._zrange=[E[O.min],E[O.max]])}for(var z=0;z<U.length;z++){var G=U[z];if((S=G[0].trace)._module){var V=S._module.colorbar;if(S.visible===!0&&V)for(var et=Array.isArray(V),J=et?V:[V],X=0;X<J.length;X++){var Y=(O=J[X]).container;(E=Y?S[Y]:S)&&E.showscale&&((L=j(E.colorbar))._id="cb"+S.uid+(et&&Y?"-"+Y:""),L._traceIndex=S.index,L._propPrefix=(Y?Y+".":"")+"colorbar.",L._meta=S._meta,B(),R.push(L))}}}for(var Z in P._colorAxes)if((E=P[Z]).showscale){var tt=P._colorAxes[Z];(L=j(E.colorbar))._id="cb"+Z,L._propPrefix=Z+".colorbar.",L._meta=P._meta,O={min:"cmin",max:"cmax"},tt[0]!=="heatmap"&&(S=tt[1],O.calc=S._module.colorbar.calc),B(),R.push(L)}return R}(g),function(M){return M._id});A.enter().append("g").attr("class",function(M){return M._id}).classed(_.colorbar,!0),A.each(function(M){var L=T.select(this);e.ensureSingle(L,"rect",_.cbbg),e.ensureSingle(L,"g",_.cbfills),e.ensureSingle(L,"g",_.cblines),e.ensureSingle(L,"g",_.cbaxis,function(S){S.classed(_.crisp,!0)}),e.ensureSingle(L,"g",_.cbtitleunshift,function(S){S.append("g").classed(_.cbtitle,!0)}),e.ensureSingle(L,"rect",_.cboutline);var E=function(S,O,P){var U=O.orientation==="v",R=O.len,j=O.lenmode,B=O.thickness,z=O.thicknessmode,G=O.outlinewidth,V=O.borderwidth,et=O.bgcolor,J=O.xanchor,X=O.yanchor,Y=O.xpad,Z=O.ypad,tt=O.x,rt=U?O.y:1-O.y,nt=O.yref==="paper",ot=O.xref==="paper",ct=P._fullLayout,pt=ct._size,gt=O._fillcolor,kt=O._line,yt=O.title,mt=yt.side,Ot=O._zrange||T.extent((typeof gt=="function"?gt:kt.color).domain()),vt=typeof kt.color=="function"?kt.color:function(){return kt.color},xt=typeof gt=="function"?gt:function(){return gt},st=O._levels,at=function(Gt,Yt,ne){var re,Pt,Nt=Yt._levels,ee=[],te=[],ge=Nt.end+Nt.size/100,pe=Nt.size,me=1.001*ne[0]-.001*ne[1],ce=1.001*ne[1]-.001*ne[0];for(Pt=0;Pt<1e5&&(re=Nt.start+Pt*pe,!(pe>0?re>=ge:re<=ge));Pt++)re>me&&re<ce&&ee.push(re);if(Yt._fillgradient)te=[0];else if(typeof Yt._fillcolor=="function"){var we=Yt._filllevels;if(we)for(ge=we.end+we.size/100,pe=we.size,Pt=0;Pt<1e5&&(re=we.start+Pt*pe,!(pe>0?re>=ge:re<=ge));Pt++)re>ne[0]&&re<ne[1]&&te.push(re);else(te=ee.map(function(ue){return ue-Nt.size/2})).push(te[te.length-1]+Nt.size)}else Yt._fillcolor&&typeof Yt._fillcolor=="string"&&(te=[0]);return Nt.size<0&&(ee.reverse(),te.reverse()),{line:ee,fill:te}}(0,O,Ot),ht=at.fill,Lt=at.line,Mt=Math.round(B*(z==="fraction"?U?pt.w:pt.h:1)),_t=Mt/(U?pt.w:pt.h),St=Math.round(R*(j==="fraction"?U?pt.h:pt.w:1)),Dt=St/(U?pt.h:pt.w),ut=ot?pt.w:P._fullLayout.width,Tt=nt?pt.h:P._fullLayout.height,bt=Math.round(U?tt*ut+Y:rt*Tt+Z),It={center:.5,right:1}[J]||0,zt={top:1,middle:.5}[X]||0,Ft=U?tt-It*_t:rt-zt*_t,$t=U?rt-zt*Dt:tt-It*Dt,Wt=Math.round(U?Tt*(1-$t):ut*$t);O._lenFrac=Dt,O._thickFrac=_t,O._uFrac=Ft,O._vFrac=$t;var Xt=O._axis=function(Gt,Yt,ne){var re=Gt._fullLayout,Pt=Yt.orientation==="v",Nt={type:"linear",range:ne,tickmode:Yt.tickmode,nticks:Yt.nticks,tick0:Yt.tick0,dtick:Yt.dtick,tickvals:Yt.tickvals,ticktext:Yt.ticktext,ticks:Yt.ticks,ticklen:Yt.ticklen,tickwidth:Yt.tickwidth,tickcolor:Yt.tickcolor,showticklabels:Yt.showticklabels,labelalias:Yt.labelalias,ticklabelposition:Yt.ticklabelposition,ticklabeloverflow:Yt.ticklabeloverflow,ticklabelstep:Yt.ticklabelstep,tickfont:Yt.tickfont,tickangle:Yt.tickangle,tickformat:Yt.tickformat,exponentformat:Yt.exponentformat,minexponent:Yt.minexponent,separatethousands:Yt.separatethousands,showexponent:Yt.showexponent,showtickprefix:Yt.showtickprefix,tickprefix:Yt.tickprefix,showticksuffix:Yt.showticksuffix,ticksuffix:Yt.ticksuffix,title:Yt.title,showline:!0,anchor:"free",side:Pt?"right":"bottom",position:1},ee=Pt?"y":"x",te={type:"linear",_id:ee+Yt._id},ge={letter:ee,font:re.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:re.calendar};function pe(me,ce){return e.coerce(Nt,te,v,me,ce)}return d(Nt,te,pe,ge,re),w(Nt,te,pe,ge),te}(P,O,Ot);Xt.position=_t+(U?tt+Y/pt.w:rt+Z/pt.h);var ae=["top","bottom"].indexOf(mt)!==-1;if(U&&ae&&(Xt.title.side=mt,Xt.titlex=tt+Y/pt.w,Xt.titley=$t+(yt.side==="top"?Dt-Z/pt.h:Z/pt.h)),U||ae||(Xt.title.side=mt,Xt.titley=rt+Z/pt.h,Xt.titlex=$t+Y/pt.w),kt.color&&O.tickmode==="auto"){Xt.tickmode="linear",Xt.tick0=st.start;var Qt=st.size,de=e.constrain(St/50,4,15)+1,ye=(Ot[1]-Ot[0])/((O.nticks||de)*Qt);if(ye>1){var ve=Math.pow(10,Math.floor(Math.log(ye)/Math.LN10));Qt*=ve*e.roundUp(ye/ve,[2,5,10]),(Math.abs(st.start)/st.size+1e-6)%1<2e-6&&(Xt.tick0=0)}Xt.dtick=Qt}Xt.domain=U?[$t+Z/pt.h,$t+Dt-Z/pt.h]:[$t+Y/pt.w,$t+Dt-Y/pt.w],Xt.setScale(),S.attr("transform",t(Math.round(pt.l),Math.round(pt.t)));var ie,se=S.select("."+_.cbtitleunshift).attr("transform",t(-Math.round(pt.l),-Math.round(pt.t))),ke=Xt.ticklabelposition,Ae=Xt.title.font.size,Ie=S.select("."+_.cbaxis),Te=0,Vt=0;function Zt(Gt,Yt){var ne={propContainer:Xt,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:ct._dfltTitle.colorbar,containerGroup:S.select("."+_.cbtitle)},re=Gt.charAt(0)==="h"?Gt.substr(1):"h"+Gt;S.selectAll("."+re+",."+re+"-math-group").remove(),l.draw(P,Gt,n(ne,Yt||{}))}return e.syncOrAsync([r.previousPromises,function(){var Gt,Yt;(U&&ae||!U&&!ae)&&(mt==="top"&&(Gt=Y+pt.l+ut*tt,Yt=Z+pt.t+Tt*(1-$t-Dt)+3+.75*Ae),mt==="bottom"&&(Gt=Y+pt.l+ut*tt,Yt=Z+pt.t+Tt*(1-$t)-3-.25*Ae),mt==="right"&&(Yt=Z+pt.t+Tt*rt+3+.75*Ae,Gt=Y+pt.l+ut*$t),Zt(Xt._id+"title",{attributes:{x:Gt,y:Yt,"text-anchor":U?"start":"middle"}}))},function(){if(!U&&!ae||U&&ae){var Gt,Yt=S.select("."+_.cbtitle),ne=Yt.select("text"),re=[-G/2,G/2],Pt=Yt.select(".h"+Xt._id+"title-math-group").node(),Nt=15.6;if(ne.node()&&(Nt=parseInt(ne.node().style.fontSize,10)*y),Pt?(Gt=i.bBox(Pt),Vt=Gt.width,(Te=Gt.height)>Nt&&(re[1]-=(Te-Nt)/2)):ne.node()&&!ne.classed(_.jsPlaceholder)&&(Gt=i.bBox(ne.node()),Vt=Gt.width,Te=Gt.height),U){if(Te){if(Te+=5,mt==="top")Xt.domain[1]-=Te/pt.h,re[1]*=-1;else{Xt.domain[0]+=Te/pt.h;var ee=u.lineCount(ne);re[1]+=(1-ee)*Nt}Yt.attr("transform",t(re[0],re[1])),Xt.setScale()}}else Vt&&(mt==="right"&&(Xt.domain[0]+=(Vt+Ae/2)/pt.w),Yt.attr("transform",t(re[0],re[1])),Xt.setScale())}S.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",U?t(0,Math.round(pt.h*(1-Xt.domain[1]))):t(Math.round(pt.w*Xt.domain[0]),0)),Ie.attr("transform",U?t(0,Math.round(-pt.t)):t(Math.round(-pt.l),0));var te=S.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(ht);te.enter().append("rect").classed(_.cbfill,!0).attr("style",""),te.exit().remove();var ge=Ot.map(Xt.c2p).map(Math.round).sort(function(ue,he){return ue-he});te.each(function(ue,he){var be=[he===0?Ot[0]:(ht[he]+ht[he-1])/2,he===ht.length-1?Ot[1]:(ht[he]+ht[he+1])/2].map(Xt.c2p).map(Math.round);U&&(be[1]=e.constrain(be[1]+(be[1]>be[0])?1:-1,ge[0],ge[1]));var Pe=T.select(this).attr(U?"x":"y",bt).attr(U?"y":"x",T.min(be)).attr(U?"width":"height",Math.max(Mt,2)).attr(U?"height":"width",Math.max(T.max(be)-T.min(be),2));if(O._fillgradient)i.gradient(Pe,P,O._id,U?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var De=xt(ue).replace("e-","");Pe.attr("fill",k(De).toHexString())}});var pe=S.select("."+_.cblines).selectAll("path."+_.cbline).data(kt.color&&kt.width?Lt:[]);pe.enter().append("path").classed(_.cbline,!0),pe.exit().remove(),pe.each(function(ue){var he=bt,be=Math.round(Xt.c2p(ue))+kt.width/2%1;T.select(this).attr("d","M"+(U?he+","+be:be+","+he)+(U?"h":"v")+Mt).call(i.lineGroupStyle,kt.width,vt(ue),kt.dash)}),Ie.selectAll("g."+Xt._id+"tick,path").remove();var me=bt+Mt+(G||0)/2-(O.ticks==="outside"?1:0),ce=h.calcTicks(Xt),we=h.getTickSigns(Xt)[2];return h.drawTicks(P,Xt,{vals:Xt.ticks==="inside"?h.clipEnds(Xt,ce):ce,layer:Ie,path:h.makeTickPath(Xt,me,we),transFn:h.makeTransTickFn(Xt)}),h.drawLabels(P,Xt,{vals:ce,layer:Ie,transFn:h.makeTransTickLabelFn(Xt),labelFns:h.makeLabelFns(Xt,me)})},function(){if(U&&!ae||!U&&ae){var Gt,Yt,ne=Xt.position||0,re=Xt._offset+Xt._length/2;if(mt==="right")Yt=re,Gt=pt.l+ut*ne+10+Ae*(Xt.showticklabels?1:.5);else if(Gt=re,mt==="bottom"&&(Yt=pt.t+Tt*ne+10+(ke.indexOf("inside")===-1?Xt.tickfont.size:0)+(Xt.ticks!=="intside"&&O.ticklen||0)),mt==="top"){var Pt=yt.text.split("<br>").length;Yt=pt.t+Tt*ne+10-Mt-y*Ae*Pt}Zt((U?"h":"v")+Xt._id+"title",{avoid:{selection:T.select(P).selectAll("g."+Xt._id+"tick"),side:mt,offsetTop:U?0:pt.t,offsetLeft:U?pt.l:0,maxShift:U?ct.width:ct.height},attributes:{x:Gt,y:Yt,"text-anchor":"middle"},transform:{rotate:U?-90:0,offset:0}})}},r.previousPromises,function(){var Gt,Yt=Mt+G/2;ke.indexOf("inside")===-1&&(Gt=i.bBox(Ie.node()),Yt+=U?Gt.width:Gt.height),ie=se.select("text");var ne=0,re=U&&mt==="top",Pt=!U&&mt==="right",Nt=0;if(ie.node()&&!ie.classed(_.jsPlaceholder)){var ee,te=se.select(".h"+Xt._id+"title-math-group").node();te&&(U&&ae||!U&&!ae)?(ne=(Gt=i.bBox(te)).width,ee=Gt.height):(ne=(Gt=i.bBox(se.node())).right-pt.l-(U?bt:Wt),ee=Gt.bottom-pt.t-(U?Wt:bt),U||mt!=="top"||(Yt+=Gt.height,Nt=Gt.height)),Pt&&(ie.attr("transform",t(ne/2+Ae/2,0)),ne*=2),Yt=Math.max(Yt,U?ne:ee)}var ge=2*(U?Y:Z)+Yt+V+G/2,pe=0;!U&&yt.text&&X==="bottom"&&rt<=0&&(ge+=pe=ge/2,Nt+=pe),ct._hColorbarMoveTitle=pe,ct._hColorbarMoveCBTitle=Nt;var me=V+G,ce=(U?bt:Wt)-me/2-(U?Y:0),we=(U?Wt:bt)-(U?St:Z+Nt-pe);S.select("."+_.cbbg).attr("x",ce).attr("y",we).attr(U?"width":"height",Math.max(ge-pe,2)).attr(U?"height":"width",Math.max(St+me,2)).call(c.fill,et).call(c.stroke,O.bordercolor).style("stroke-width",V);var ue=Pt?Math.max(ne-10,0):0;S.selectAll("."+_.cboutline).attr("x",(U?bt:Wt+Y)+ue).attr("y",(U?Wt+Z-St:bt)+(re?Te:0)).attr(U?"width":"height",Math.max(Mt,2)).attr(U?"height":"width",Math.max(St-(U?2*Z+Te:2*Y+ue),2)).call(c.stroke,O.outlinecolor).style({fill:"none","stroke-width":G});var he=U?It*ge:0,be=U?0:(1-zt)*ge-Nt;if(he=ot?pt.l-he:-he,be=nt?pt.t-be:-be,S.attr("transform",t(he,be)),!U&&(V||k(et).getAlpha()&&!k.equals(ct.paper_bgcolor,et))){var Pe=Ie.selectAll("text"),De=Pe[0].length,Ue=S.select("."+_.cbbg).node(),tr=i.bBox(Ue),Ge=i.getTranslate(S);Pe.each(function(fr,mr){var Cr=De-1;if(mr===0||mr===Cr){var Er,_r=i.bBox(this),Sr=i.getTranslate(this);if(mr===Cr){var Xr=_r.right+Sr.x;(Er=tr.right+Ge.x+Wt-V-2+tt-Xr)>0&&(Er=0)}else if(mr===0){var en=_r.left+Sr.x;(Er=tr.left+Ge.x+Wt+V+2-en)<0&&(Er=0)}Er&&(De<3?this.setAttribute("transform","translate("+Er+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ze={},We=b[J],pr=x[J],xr=b[X],sr=x[X],$e=ge-Mt;U?(j==="pixels"?(Ze.y=rt,Ze.t=St*xr,Ze.b=St*sr):(Ze.t=Ze.b=0,Ze.yt=rt+R*xr,Ze.yb=rt-R*sr),z==="pixels"?(Ze.x=tt,Ze.l=ge*We,Ze.r=ge*pr):(Ze.l=$e*We,Ze.r=$e*pr,Ze.xl=tt-B*We,Ze.xr=tt+B*pr)):(j==="pixels"?(Ze.x=tt,Ze.l=St*We,Ze.r=St*pr):(Ze.l=Ze.r=0,Ze.xl=tt+R*We,Ze.xr=tt-R*pr),z==="pixels"?(Ze.y=1-rt,Ze.t=ge*xr,Ze.b=ge*sr):(Ze.t=$e*xr,Ze.b=$e*sr,Ze.yt=rt-B*xr,Ze.yb=rt+B*sr));var ir=O.y<.5?"b":"t",Ke=O.x<.5?"l":"r";P._fullLayout._reservedMargin[O._id]={};var ar={r:ct.width-ce-he,l:ce+Ze.r,b:ct.height-we-be,t:we+Ze.b};ot&&nt?r.autoMargin(P,O._id,Ze):ot?P._fullLayout._reservedMargin[O._id][ir]=ar[ir]:nt||U?P._fullLayout._reservedMargin[O._id][Ke]=ar[Ke]:P._fullLayout._reservedMargin[O._id][ir]=ar[ir]}],P)}(L,M,g);E&&E.then&&(g._promises||[]).push(E),g._context.edits.colorbarPosition&&function(S,O,P){var U,R,j,B=O.orientation==="v",z=P._fullLayout._size;s.init({element:S.node(),gd:P,prepFn:function(){U=S.attr("transform"),a(S)},moveFn:function(G,V){S.attr("transform",U+t(G,V)),R=s.align((B?O._uFrac:O._vFrac)+G/z.w,B?O._thickFrac:O._lenFrac,0,1,O.xanchor),j=s.align((B?O._vFrac:1-O._uFrac)-V/z.h,B?O._lenFrac:O._thickFrac,0,1,O.yanchor);var et=s.getCursor(R,j,O.xanchor,O.yanchor);a(S,et)},doneFn:function(){if(a(S),R!==void 0&&j!==void 0){var G={};G[O._propPrefix+"x"]=R,G[O._propPrefix+"y"]=j,O._traceIndex!==void 0?m.call("_guiRestyle",P,G,O._traceIndex):m.call("_guiRelayout",P,G)}}})}(L,M,g)}),A.exit().each(function(M){r.autoMargin(g,M._id)}).remove(),A.order()}}},76228:function(W,I,o){var T=o(71828);W.exports=function(k){return T.isPlainObject(k.colorbar)}},12311:function(W,I,o){W.exports={moduleType:"component",name:"colorbar",attributes:o(63583),supplyDefaults:o(62499),draw:o(98981).draw,hasColorbar:o(76228)}},50693:function(W,I,o){var T=o(63583),k=o(30587).counter,r=o(78607),m=o(63282).scales;function h(s){return"`"+s+"`"}r(m),W.exports=function(s,e){s=s||"";var t,n=(e=e||{}).cLetter||"c",a=("onlyIfNumerical"in e?e.onlyIfNumerical:Boolean(s),"noScale"in e?e.noScale:s==="marker.line"),i="showScaleDflt"in e?e.showScaleDflt:n==="z",c=typeof e.colorscaleDflt=="string"?m[e.colorscaleDflt]:null,l=e.editTypeOverride||"",u=s?s+".":"";"colorAttr"in e?(t=e.colorAttr,e.colorAttr):h(u+(t={z:"z",c:"color"}[n]));var f=n+"auto",d=n+"min",w=n+"max",v=n+"mid",p={};p[d]=p[w]=void 0;var y={};y[f]=!1;var b={};return t==="color"&&(b.color={valType:"color",arrayOk:!0,editType:l||"style"},e.anim&&(b.color.anim=!0)),b[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:p},b[d]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:y},b[w]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:y},b[v]={valType:"number",dflt:null,editType:"calc",impliedEdits:p},b.colorscale={valType:"colorscale",editType:"calc",dflt:c,impliedEdits:{autocolorscale:!1}},b.autocolorscale={valType:"boolean",dflt:e.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},b.reversescale={valType:"boolean",dflt:!1,editType:"plot"},a||(b.showscale={valType:"boolean",dflt:i,editType:"calc"},b.colorbar=T),e.noColorAxis||(b.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),b}},78803:function(W,I,o){var T=o(92770),k=o(71828),r=o(52075).extractOpts;W.exports=function(m,h,s){var e,t=m._fullLayout,n=s.vals,a=s.containerStr,i=a?k.nestedProperty(h,a).get():h,c=r(i),l=c.auto!==!1,u=c.min,f=c.max,d=c.mid,w=function(){return k.aggNums(Math.min,null,n)},v=function(){return k.aggNums(Math.max,null,n)};u===void 0?u=w():l&&(u=i._colorAx&&T(u)?Math.min(u,w()):w()),f===void 0?f=v():l&&(f=i._colorAx&&T(f)?Math.max(f,v()):v()),l&&d!==void 0&&(f-d>d-u?u=d-(f-d):f-d<d-u&&(f=d+(d-u))),u===f&&(u-=.5,f+=.5),c._sync("min",u),c._sync("max",f),c.autocolorscale&&(e=u*f<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus,c._sync("colorscale",e))}},33046:function(W,I,o){var T=o(71828),k=o(52075).hasColorscale,r=o(52075).extractOpts;W.exports=function(m,h){function s(l,u){var f=l["_"+u];f!==void 0&&(l[u]=f)}function e(l,u){var f=u.container?T.nestedProperty(l,u.container).get():l;if(f)if(f.coloraxis)f._colorAx=h[f.coloraxis];else{var d=r(f),w=d.auto;(w||d.min===void 0)&&s(f,u.min),(w||d.max===void 0)&&s(f,u.max),d.autocolorscale&&s(f,"colorscale")}}for(var t=0;t<m.length;t++){var n=m[t],a=n._module.colorbar;if(a)if(Array.isArray(a))for(var i=0;i<a.length;i++)e(n,a[i]);else e(n,a);k(n,"marker.line")&&e(n,{container:"marker.line",min:"cmin",max:"cmax"})}for(var c in h._colorAxes)e(h[c],{min:"cmin",max:"cmax"})}},1586:function(W,I,o){var T=o(92770),k=o(71828),r=o(76228),m=o(62499),h=o(63282).isValid,s=o(73972).traceIs;function e(t,n){var a=n.slice(0,n.length-1);return n?k.nestedProperty(t,a).get()||{}:t}W.exports=function t(n,a,i,c,l){var u=l.prefix,f=l.cLetter,d="_module"in a,w=e(n,u),v=e(a,u),p=e(a._template||{},u)||{},y=function(){return delete n.coloraxis,delete a.coloraxis,t(n,a,i,c,l)};if(d){var b=i._colorAxes||{},x=c(u+"coloraxis");if(x){var _=s(a,"contour")&&k.nestedProperty(a,"contours.coloring").get()||"heatmap",g=b[x];return void(g?(g[2].push(y),g[0]!==_&&(g[0]=!1,k.warn(["Ignoring coloraxis:",x,"setting","as it is linked to incompatible colorscales."].join(" ")))):b[x]=[_,a,[y]])}}var A=w[f+"min"],M=w[f+"max"],L=T(A)&&T(M)&&A<M;c(u+f+"auto",!L)?c(u+f+"mid"):(c(u+f+"min"),c(u+f+"max"));var E,S,O=w.colorscale,P=p.colorscale;O!==void 0&&(E=!h(O)),P!==void 0&&(E=!h(P)),c(u+"autocolorscale",E),c(u+"colorscale"),c(u+"reversescale"),u!=="marker.line."&&(u&&d&&(S=r(w)),c(u+"showscale",S)&&(u&&p&&(v._template=p),m(w,v,i)))}},52075:function(W,I,o){var T=o(39898),k=o(84267),r=o(92770),m=o(71828),h=o(7901),s=o(63282).isValid,e=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function n(u){var f,d,w,v=u._colorAx,p=v||u,y={};for(d=0;d<e.length;d++)y[w=e[d]]=p[w];if(v)for(f="c",d=0;d<t.length;d++)y[w=t[d]]=p["c"+w];else{var b;for(d=0;d<t.length;d++)((b="c"+(w=t[d]))in p||(b="z"+w)in p)&&(y[w]=p[b]);f=b.charAt(0)}return y._sync=function(x,_){var g=t.indexOf(x)!==-1?f+x:x;p[g]=p["_"+g]=_},y}function a(u){for(var f=n(u),d=f.min,w=f.max,v=f.reversescale?i(f.colorscale):f.colorscale,p=v.length,y=new Array(p),b=new Array(p),x=0;x<p;x++){var _=v[x];y[x]=d+_[0]*(w-d),b[x]=_[1]}return{domain:y,range:b}}function i(u){for(var f=u.length,d=new Array(f),w=f-1,v=0;w>=0;w--,v++){var p=u[w];d[v]=[1-p[0],p[1]]}return d}function c(u,f){f=f||{};for(var d=u.domain,w=u.range,v=w.length,p=new Array(v),y=0;y<v;y++){var b=k(w[y]).toRgb();p[y]=[b.r,b.g,b.b,b.a]}var x,_=T.scale.linear().domain(d).range(p).clamp(!0),g=f.noNumericCheck,A=f.returnArray;return(x=g&&A?_:g?function(M){return l(_(M))}:A?function(M){return r(M)?_(M):k(M).isValid()?M:h.defaultLine}:function(M){return r(M)?l(_(M)):k(M).isValid()?M:h.defaultLine}).domain=_.domain,x.range=function(){return w},x}function l(u){var f={r:u[0],g:u[1],b:u[2],a:u[3]};return k(f).toRgbString()}W.exports={hasColorscale:function(u,f,d){var w=f?m.nestedProperty(u,f).get()||{}:u,v=w[d||"color"],p=!1;if(m.isArrayOrTypedArray(v)){for(var y=0;y<v.length;y++)if(r(v[y])){p=!0;break}}return m.isPlainObject(w)&&(p||w.showscale===!0||r(w.cmin)&&r(w.cmax)||s(w.colorscale)||m.isPlainObject(w.colorbar))},extractOpts:n,extractScale:a,flipScale:i,makeColorScaleFunc:c,makeColorScaleFuncFromTrace:function(u,f){return c(a(u),f)}}},21081:function(W,I,o){var T=o(63282),k=o(52075);W.exports={moduleType:"component",name:"colorscale",attributes:o(50693),layoutAttributes:o(72673),supplyLayoutDefaults:o(30959),handleDefaults:o(1586),crossTraceDefaults:o(33046),calc:o(78803),scales:T.scales,defaultScale:T.defaultScale,getScale:T.get,isValidScale:T.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},72673:function(W,I,o){var T=o(1426).extendFlat,k=o(50693),r=o(63282).scales;W.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:r.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:r.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:r.RdBu,editType:"calc"}},coloraxis:T({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(W,I,o){var T=o(71828),k=o(44467),r=o(72673),m=o(1586);W.exports=function(h,s){function e(f,d){return T.coerce(h,s,r,f,d)}e("colorscale.sequential"),e("colorscale.sequentialminus"),e("colorscale.diverging");var t,n,a=s._colorAxes;function i(f,d){return T.coerce(t,n,r.coloraxis,f,d)}for(var c in a){var l=a[c];if(l[0])t=h[c]||{},(n=k.newContainer(s,c,"coloraxis"))._name=c,m(t,n,s,i,{prefix:"",cLetter:"c"});else{for(var u=0;u<l[2].length;u++)l[2][u]();delete s._colorAxes[c]}}}},63282:function(W,I,o){var T=o(84267),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764703,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882352,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},r=k.RdBu;function m(h){var s=0;if(!Array.isArray(h)||h.length<2||!h[0]||!h[h.length-1]||+h[0][0]!=0||+h[h.length-1][0]!=1)return!1;for(var e=0;e<h.length;e++){var t=h[e];if(t.length!==2||+t[0]<s||!T(t[1]).isValid())return!1;s=+t[0]}return!0}W.exports={scales:k,defaultScale:r,get:function(h,s){if(s||(s=r),!h)return s;function e(){try{h=k[h]||JSON.parse(h)}catch{h=s}}return typeof h=="string"&&(e(),typeof h=="string"&&e()),m(h)?h:s},isValid:function(h){return k[h]!==void 0||m(h)}}},92807:function(W){W.exports=function(I,o,T,k,r){var m=(I-T)/(k-T),h=m+o/(k-T),s=(m+h)/2;return r==="left"||r==="bottom"?m:r==="center"||r==="middle"?s:r==="right"||r==="top"?h:m<.6666666666666666-s?m:h>1.3333333333333333-s?h:s}},70461:function(W,I,o){var T=o(71828),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];W.exports=function(r,m,h,s){return r=h==="left"?0:h==="center"?1:h==="right"?2:T.constrain(Math.floor(3*r),0,2),m=s==="bottom"?0:s==="middle"?1:s==="top"?2:T.constrain(Math.floor(3*m),0,2),k[m][r]}},64505:function(W,I){I.selectMode=function(o){return o==="lasso"||o==="select"},I.drawMode=function(o){return o==="drawclosedpath"||o==="drawopenpath"||o==="drawline"||o==="drawrect"||o==="drawcircle"},I.openMode=function(o){return o==="drawline"||o==="drawopenpath"},I.rectMode=function(o){return o==="select"||o==="drawline"||o==="drawrect"||o==="drawcircle"},I.freeMode=function(o){return o==="lasso"||o==="drawclosedpath"||o==="drawopenpath"},I.selectingOrDrawing=function(o){return I.freeMode(o)||I.rectMode(o)}},28569:function(W,I,o){var T=o(48956),k=o(57035),r=o(38520),m=o(71828).removeElement,h=o(85555),s=W.exports={};s.align=o(92807),s.getCursor=o(70461);var e=o(26041);function t(){var a=document.createElement("div");a.className="dragcover";var i=a.style;return i.position="fixed",i.left=0,i.right=0,i.top=0,i.bottom=0,i.zIndex=999999999,i.background="none",document.body.appendChild(a),a}function n(a){return T(a.changedTouches?a.changedTouches[0]:a,document.body)}s.unhover=e.wrapped,s.unhoverRaw=e.raw,s.init=function(a){var i,c,l,u,f,d,w,v,p=a.gd,y=1,b=p._context.doubleClickDelay,x=a.element;p._mouseDownTime||(p._mouseDownTime=0),x.style.pointerEvents="all",x.onmousedown=g,r?(x._ontouchstart&&x.removeEventListener("touchstart",x._ontouchstart),x._ontouchstart=g,x.addEventListener("touchstart",g,{passive:!1})):x.ontouchstart=g;var _=a.clampFn||function(L,E,S){return Math.abs(L)<S&&(L=0),Math.abs(E)<S&&(E=0),[L,E]};function g(L){p._dragged=!1,p._dragging=!0;var E=n(L);i=E[0],c=E[1],w=L.target,d=L,v=L.buttons===2||L.ctrlKey,L.clientX===void 0&&L.clientY===void 0&&(L.clientX=i,L.clientY=c),(l=new Date().getTime())-p._mouseDownTime<b?y+=1:(y=1,p._mouseDownTime=l),a.prepFn&&a.prepFn(L,i,c),k&&!v?(f=t()).style.cursor=window.getComputedStyle(x).cursor:k||(f=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(x).cursor),document.addEventListener("mouseup",M),document.addEventListener("touchend",M),a.dragmode!==!1&&(L.preventDefault(),document.addEventListener("mousemove",A),document.addEventListener("touchmove",A,{passive:!1}))}function A(L){L.preventDefault();var E=n(L),S=a.minDrag||h.MINDRAG,O=_(E[0]-i,E[1]-c,S),P=O[0],U=O[1];(P||U)&&(p._dragged=!0,s.unhover(p,L)),p._dragged&&a.moveFn&&!v&&(p._dragdata={element:x,dx:P,dy:U},a.moveFn(P,U))}function M(L){if(delete p._dragdata,a.dragmode!==!1&&(L.preventDefault(),document.removeEventListener("mousemove",A),document.removeEventListener("touchmove",A)),document.removeEventListener("mouseup",M),document.removeEventListener("touchend",M),k?m(f):u&&(f.documentElement.style.cursor=u,u=null),p._dragging){if(p._dragging=!1,new Date().getTime()-p._mouseDownTime>b&&(y=Math.max(y-1,1)),p._dragged)a.doneFn&&a.doneFn();else if(a.clickFn&&a.clickFn(y,d),!v){var E;try{E=new MouseEvent("click",L)}catch{var S=n(L);(E=document.createEvent("MouseEvents")).initMouseEvent("click",L.bubbles,L.cancelable,L.view,L.detail,L.screenX,L.screenY,S[0],S[1],L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.button,L.relatedTarget)}w.dispatchEvent(E)}p._dragging=!1,p._dragged=!1}else p._dragged=!1}},s.coverSlip=t},26041:function(W,I,o){var T=o(11086),k=o(79990),r=o(24401).getGraphDiv,m=o(26675),h=W.exports={};h.wrapped=function(s,e,t){(s=r(s))._fullLayout&&k.clear(s._fullLayout._uid+m.HOVERID),h.raw(s,e,t)},h.raw=function(s,e){var t=s._fullLayout,n=s._hoverdata;e||(e={}),e.target&&!s._dragged&&T.triggerHandler(s,"plotly_beforehover",e)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),s._hoverdata=void 0,e.target&&n&&s.emit("plotly_unhover",{event:e,points:n}))}},79952:function(W,I){I.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},I.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(W,I,o){var T=o(39898),k=o(71828),r=k.numberFormat,m=o(92770),h=o(84267),s=o(73972),e=o(7901),t=o(21081),n=k.strTranslate,a=o(63893),i=o(77922),c=o(18783).LINE_SPACING,l=o(37822).DESELECTDIM,u=o(34098),f=o(39984),d=o(23469).appendArrayPointValue,w=W.exports={};function v(vt,xt,st){var at=xt.fillpattern,ht=at&&w.getPatternAttr(at.shape,0,"");if(ht){var Lt=w.getPatternAttr(at.bgcolor,0,null),Mt=w.getPatternAttr(at.fgcolor,0,null),_t=at.fgopacity,St=w.getPatternAttr(at.size,0,8),Dt=w.getPatternAttr(at.solidity,0,.3),ut=xt.uid;w.pattern(vt,"point",st,ut,ht,St,Dt,void 0,at.fillmode,Lt,Mt,_t)}else xt.fillcolor&&vt.call(e.fill,xt.fillcolor)}w.font=function(vt,xt,st,at){k.isPlainObject(xt)&&(at=xt.color,st=xt.size,xt=xt.family),xt&&vt.style("font-family",xt),st+1&&vt.style("font-size",st+"px"),at&&vt.call(e.fill,at)},w.setPosition=function(vt,xt,st){vt.attr("x",xt).attr("y",st)},w.setSize=function(vt,xt,st){vt.attr("width",xt).attr("height",st)},w.setRect=function(vt,xt,st,at,ht){vt.call(w.setPosition,xt,st).call(w.setSize,at,ht)},w.translatePoint=function(vt,xt,st,at){var ht=st.c2p(vt.x),Lt=at.c2p(vt.y);return!!(m(ht)&&m(Lt)&&xt.node())&&(xt.node().nodeName==="text"?xt.attr("x",ht).attr("y",Lt):xt.attr("transform",n(ht,Lt)),!0)},w.translatePoints=function(vt,xt,st){vt.each(function(at){var ht=T.select(this);w.translatePoint(at,ht,xt,st)})},w.hideOutsideRangePoint=function(vt,xt,st,at,ht,Lt){xt.attr("display",st.isPtWithinRange(vt,ht)&&at.isPtWithinRange(vt,Lt)?null:"none")},w.hideOutsideRangePoints=function(vt,xt){if(xt._hasClipOnAxisFalse){var st=xt.xaxis,at=xt.yaxis;vt.each(function(ht){var Lt=ht[0].trace,Mt=Lt.xcalendar,_t=Lt.ycalendar,St=s.traceIs(Lt,"bar-like")?".bartext":".point,.textpoint";vt.selectAll(St).each(function(Dt){w.hideOutsideRangePoint(Dt,T.select(this),st,at,Mt,_t)})})}},w.crispRound=function(vt,xt,st){return xt&&m(xt)?vt._context.staticPlot?xt:xt<1?1:Math.round(xt):st||0},w.singleLineStyle=function(vt,xt,st,at,ht){xt.style("fill","none");var Lt=(((vt||[])[0]||{}).trace||{}).line||{},Mt=st||Lt.width||0,_t=ht||Lt.dash||"";e.stroke(xt,at||Lt.color),w.dashLine(xt,_t,Mt)},w.lineGroupStyle=function(vt,xt,st,at){vt.style("fill","none").each(function(ht){var Lt=(((ht||[])[0]||{}).trace||{}).line||{},Mt=xt||Lt.width||0,_t=at||Lt.dash||"";T.select(this).call(e.stroke,st||Lt.color).call(w.dashLine,_t,Mt)})},w.dashLine=function(vt,xt,st){st=+st||0,xt=w.dashStyle(xt,st),vt.style({"stroke-dasharray":xt,"stroke-width":st+"px"})},w.dashStyle=function(vt,xt){xt=+xt||1;var st=Math.max(xt,3);return vt==="solid"?vt="":vt==="dot"?vt=st+"px,"+st+"px":vt==="dash"?vt=3*st+"px,"+3*st+"px":vt==="longdash"?vt=5*st+"px,"+5*st+"px":vt==="dashdot"?vt=3*st+"px,"+st+"px,"+st+"px,"+st+"px":vt==="longdashdot"&&(vt=5*st+"px,"+2*st+"px,"+st+"px,"+2*st+"px"),vt},w.singleFillStyle=function(vt,xt){var st=T.select(vt.node());v(vt,((st.data()[0]||[])[0]||{}).trace||{},xt)},w.fillGroupStyle=function(vt,xt){vt.style("stroke-width",0).each(function(st){var at=T.select(this);st[0].trace&&v(at,st[0].trace,xt)})};var p=o(90998);w.symbolNames=[],w.symbolFuncs=[],w.symbolBackOffs=[],w.symbolNeedLines={},w.symbolNoDot={},w.symbolNoFill={},w.symbolList=[],Object.keys(p).forEach(function(vt){var xt=p[vt],st=xt.n;w.symbolList.push(st,String(st),vt,st+100,String(st+100),vt+"-open"),w.symbolNames[st]=vt,w.symbolFuncs[st]=xt.f,w.symbolBackOffs[st]=xt.backoff||0,xt.needLine&&(w.symbolNeedLines[st]=!0),xt.noDot?w.symbolNoDot[st]=!0:w.symbolList.push(st+200,String(st+200),vt+"-dot",st+300,String(st+300),vt+"-open-dot"),xt.noFill&&(w.symbolNoFill[st]=!0)});var y=w.symbolNames.length;function b(vt,xt,st,at){var ht=vt%100;return w.symbolFuncs[ht](xt,st,at)+(vt>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}w.symbolNumber=function(vt){if(m(vt))vt=+vt;else if(typeof vt=="string"){var xt=0;vt.indexOf("-open")>0&&(xt=100,vt=vt.replace("-open","")),vt.indexOf("-dot")>0&&(xt+=200,vt=vt.replace("-dot","")),(vt=w.symbolNames.indexOf(vt))>=0&&(vt+=xt)}return vt%100>=y||vt>=400?0:Math.floor(Math.max(vt,0))};var x={x1:1,x2:0,y1:0,y2:0},_={x1:0,x2:0,y1:1,y2:0},g=r("~f"),A={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:x},horizontalreversed:{node:"linearGradient",attrs:x,reversed:!0},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:!0}};w.gradient=function(vt,xt,st,at,ht,Lt){for(var Mt=ht.length,_t=A[at],St=new Array(Mt),Dt=0;Dt<Mt;Dt++)_t.reversed?St[Mt-1-Dt]=[g(100*(1-ht[Dt][0])),ht[Dt][1]]:St[Dt]=[g(100*ht[Dt][0]),ht[Dt][1]];var ut=xt._fullLayout,Tt="g"+ut._uid+"-"+st,bt=ut._defs.select(".gradients").selectAll("#"+Tt).data([at+St.join(";")],k.identity);bt.exit().remove(),bt.enter().append(_t.node).each(function(){var It=T.select(this);_t.attrs&&It.attr(_t.attrs),It.attr("id",Tt);var zt=It.selectAll("stop").data(St);zt.exit().remove(),zt.enter().append("stop"),zt.each(function(Ft){var $t=h(Ft[1]);T.select(this).attr({offset:Ft[0]+"%","stop-color":e.tinyRGB($t),"stop-opacity":$t.getAlpha()})})}),vt.style(Lt,J(Tt,xt)).style(Lt+"-opacity",null),vt.classed("gradient_filled",!0)},w.pattern=function(vt,xt,st,at,ht,Lt,Mt,_t,St,Dt,ut,Tt){var bt=xt==="legend";_t&&(St==="overlay"?(Dt=_t,ut=e.contrast(Dt)):(Dt=void 0,ut=_t));var It,zt,Ft,$t,Wt,Xt,ae,Qt,de,ye=st._fullLayout,ve="p"+ye._uid+"-"+at,ie={},se=h(ut),ke=e.tinyRGB(se),Ae=Tt*se.getAlpha();switch(ht){case"/":It=Lt*Math.sqrt(2),zt=Lt*Math.sqrt(2),Xt="path",ie={d:Ft="M-"+It/4+","+zt/4+"l"+It/2+",-"+zt/2+"M0,"+zt+"L"+It+",0M"+It/4*3+","+zt/4*5+"l"+It/2+",-"+zt/2,opacity:Ae,stroke:ke,"stroke-width":($t=Mt*Lt)+"px"};break;case"\\":It=Lt*Math.sqrt(2),zt=Lt*Math.sqrt(2),Xt="path",ie={d:Ft="M"+It/4*3+",-"+zt/4+"l"+It/2+","+zt/2+"M0,0L"+It+","+zt+"M-"+It/4+","+zt/4*3+"l"+It/2+","+zt/2,opacity:Ae,stroke:ke,"stroke-width":($t=Mt*Lt)+"px"};break;case"x":It=Lt*Math.sqrt(2),zt=Lt*Math.sqrt(2),Ft="M-"+It/4+","+zt/4+"l"+It/2+",-"+zt/2+"M0,"+zt+"L"+It+",0M"+It/4*3+","+zt/4*5+"l"+It/2+",-"+zt/2+"M"+It/4*3+",-"+zt/4+"l"+It/2+","+zt/2+"M0,0L"+It+","+zt+"M-"+It/4+","+zt/4*3+"l"+It/2+","+zt/2,$t=Lt-Lt*Math.sqrt(1-Mt),Xt="path",ie={d:Ft,opacity:Ae,stroke:ke,"stroke-width":$t+"px"};break;case"|":Xt="path",Xt="path",ie={d:Ft="M"+(It=Lt)/2+",0L"+It/2+","+(zt=Lt),opacity:Ae,stroke:ke,"stroke-width":($t=Mt*Lt)+"px"};break;case"-":Xt="path",Xt="path",ie={d:Ft="M0,"+(zt=Lt)/2+"L"+(It=Lt)+","+zt/2,opacity:Ae,stroke:ke,"stroke-width":($t=Mt*Lt)+"px"};break;case"+":Xt="path",Ft="M"+(It=Lt)/2+",0L"+It/2+","+(zt=Lt)+"M0,"+zt/2+"L"+It+","+zt/2,$t=Lt-Lt*Math.sqrt(1-Mt),Xt="path",ie={d:Ft,opacity:Ae,stroke:ke,"stroke-width":$t+"px"};break;case".":It=Lt,zt=Lt,Mt<Math.PI/4?Wt=Math.sqrt(Mt*Lt*Lt/Math.PI):(ae=Mt,Qt=Math.PI/4,Wt=(de=Lt/2)+(Lt/Math.sqrt(2)-de)*(ae-Qt)/(1-Qt)),Xt="circle",ie={cx:It/2,cy:zt/2,r:Wt,opacity:Ae,fill:ke}}var Ie=[ht||"noSh",Dt||"noBg",ut||"noFg",Lt,Mt].join(";"),Te=ye._defs.select(".patterns").selectAll("#"+ve).data([Ie],k.identity);Te.exit().remove(),Te.enter().append("pattern").each(function(){var Vt=T.select(this);if(Vt.attr({id:ve,width:It+"px",height:zt+"px",patternUnits:"userSpaceOnUse",patternTransform:bt?"scale(0.8)":""}),Dt){var Zt=h(Dt),Gt=e.tinyRGB(Zt),Yt=Zt.getAlpha(),ne=Vt.selectAll("rect").data([0]);ne.exit().remove(),ne.enter().append("rect").attr({width:It+"px",height:zt+"px",fill:Gt,"fill-opacity":Yt})}var re=Vt.selectAll(Xt).data([0]);re.exit().remove(),re.enter().append(Xt).attr(ie)}),vt.style("fill",J(ve,st)).style("fill-opacity",null),vt.classed("pattern_filled",!0)},w.initGradients=function(vt){var xt=vt._fullLayout;k.ensureSingle(xt._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),T.select(vt).selectAll(".gradient_filled").classed("gradient_filled",!1)},w.initPatterns=function(vt){var xt=vt._fullLayout;k.ensureSingle(xt._defs,"g","patterns").selectAll("pattern").remove(),T.select(vt).selectAll(".pattern_filled").classed("pattern_filled",!1)},w.getPatternAttr=function(vt,xt,st){return vt&&k.isArrayOrTypedArray(vt)?xt<vt.length?vt[xt]:st:vt},w.pointStyle=function(vt,xt,st,at){if(vt.size()){var ht=w.makePointStyleFns(xt);vt.each(function(Lt){w.singlePointStyle(Lt,T.select(this),xt,ht,st,at)})}},w.singlePointStyle=function(vt,xt,st,at,ht,Lt){var Mt=st.marker,_t=Mt.line;if(Lt&&Lt.i>=0&&vt.i===void 0&&(vt.i=Lt.i),xt.style("opacity",at.selectedOpacityFn?at.selectedOpacityFn(vt):vt.mo===void 0?Mt.opacity:vt.mo),at.ms2mrc){var St;St=vt.ms==="various"||Mt.size==="various"?3:at.ms2mrc(vt.ms),vt.mrc=St,at.selectedSizeFn&&(St=vt.mrc=at.selectedSizeFn(vt));var Dt=w.symbolNumber(vt.mx||Mt.symbol)||0;vt.om=Dt%200>=100;var ut=Ot(vt,st),Tt=Z(vt,st);xt.attr("d",b(Dt,St,ut,Tt))}var bt,It,zt,Ft=!1;if(vt.so)zt=_t.outlierwidth,It=_t.outliercolor,bt=Mt.outliercolor;else{var $t=(_t||{}).width;zt=(vt.mlw+1||$t+1||(vt.trace?(vt.trace.marker.line||{}).width:0)+1)-1||0,It="mlc"in vt?vt.mlcc=at.lineScale(vt.mlc):k.isArrayOrTypedArray(_t.color)?e.defaultLine:_t.color,k.isArrayOrTypedArray(Mt.color)&&(bt=e.defaultLine,Ft=!0),bt="mc"in vt?vt.mcc=at.markerScale(vt.mc):Mt.color||Mt.colors||"rgba(0,0,0,0)",at.selectedColorFn&&(bt=at.selectedColorFn(vt))}if(vt.om)xt.call(e.stroke,bt).style({"stroke-width":(zt||1)+"px",fill:"none"});else{xt.style("stroke-width",(vt.isBlank?0:zt)+"px");var Wt=Mt.gradient,Xt=vt.mgt;Xt?Ft=!0:Xt=Wt&&Wt.type,k.isArrayOrTypedArray(Xt)&&(Xt=Xt[0],A[Xt]||(Xt=0));var ae=Mt.pattern,Qt=ae&&w.getPatternAttr(ae.shape,vt.i,"");if(Xt&&Xt!=="none"){var de=vt.mgc;de?Ft=!0:de=Wt.color;var ye=st.uid;Ft&&(ye+="-"+vt.i),w.gradient(xt,ht,ye,Xt,[[0,de],[1,bt]],"fill")}else if(Qt){var ve=!1,ie=ae.fgcolor;!ie&&Lt&&Lt.color&&(ie=Lt.color,ve=!0);var se=w.getPatternAttr(ie,vt.i,Lt&&Lt.color||null),ke=w.getPatternAttr(ae.bgcolor,vt.i,null),Ae=ae.fgopacity,Ie=w.getPatternAttr(ae.size,vt.i,8),Te=w.getPatternAttr(ae.solidity,vt.i,.3);ve=ve||vt.mcc||k.isArrayOrTypedArray(ae.shape)||k.isArrayOrTypedArray(ae.bgcolor)||k.isArrayOrTypedArray(ae.fgcolor)||k.isArrayOrTypedArray(ae.size)||k.isArrayOrTypedArray(ae.solidity);var Vt=st.uid;ve&&(Vt+="-"+vt.i),w.pattern(xt,"point",ht,Vt,Qt,Ie,Te,vt.mcc,ae.fillmode,ke,se,Ae)}else k.isArrayOrTypedArray(bt)?e.fill(xt,bt[vt.i]):e.fill(xt,bt);zt&&e.stroke(xt,It)}},w.makePointStyleFns=function(vt){var xt={},st=vt.marker;return xt.markerScale=w.tryColorscale(st,""),xt.lineScale=w.tryColorscale(st,"line"),s.traceIs(vt,"symbols")&&(xt.ms2mrc=u.isBubble(vt)?f(vt):function(){return(st.size||6)/2}),vt.selectedpoints&&k.extendFlat(xt,w.makeSelectedPointStyleFns(vt)),xt},w.makeSelectedPointStyleFns=function(vt){var xt={},st=vt.selected||{},at=vt.unselected||{},ht=vt.marker||{},Lt=st.marker||{},Mt=at.marker||{},_t=ht.opacity,St=Lt.opacity,Dt=Mt.opacity,ut=St!==void 0,Tt=Dt!==void 0;(k.isArrayOrTypedArray(_t)||ut||Tt)&&(xt.selectedOpacityFn=function(Qt){var de=Qt.mo===void 0?ht.opacity:Qt.mo;return Qt.selected?ut?St:de:Tt?Dt:l*de});var bt=ht.color,It=Lt.color,zt=Mt.color;(It||zt)&&(xt.selectedColorFn=function(Qt){var de=Qt.mcc||bt;return Qt.selected?It||de:zt||de});var Ft=ht.size,$t=Lt.size,Wt=Mt.size,Xt=$t!==void 0,ae=Wt!==void 0;return s.traceIs(vt,"symbols")&&(Xt||ae)&&(xt.selectedSizeFn=function(Qt){var de=Qt.mrc||Ft/2;return Qt.selected?Xt?$t/2:de:ae?Wt/2:de}),xt},w.makeSelectedTextStyleFns=function(vt){var xt={},st=vt.selected||{},at=vt.unselected||{},ht=vt.textfont||{},Lt=st.textfont||{},Mt=at.textfont||{},_t=ht.color,St=Lt.color,Dt=Mt.color;return xt.selectedTextColorFn=function(ut){var Tt=ut.tc||_t;return ut.selected?St||Tt:Dt||(St?Tt:e.addOpacity(Tt,l))},xt},w.selectedPointStyle=function(vt,xt){if(vt.size()&&xt.selectedpoints){var st=w.makeSelectedPointStyleFns(xt),at=xt.marker||{},ht=[];st.selectedOpacityFn&&ht.push(function(Lt,Mt){Lt.style("opacity",st.selectedOpacityFn(Mt))}),st.selectedColorFn&&ht.push(function(Lt,Mt){e.fill(Lt,st.selectedColorFn(Mt))}),st.selectedSizeFn&&ht.push(function(Lt,Mt){var _t=Mt.mx||at.symbol||0,St=st.selectedSizeFn(Mt);Lt.attr("d",b(w.symbolNumber(_t),St,Ot(Mt,xt),Z(Mt,xt))),Mt.mrc2=St}),ht.length&&vt.each(function(Lt){for(var Mt=T.select(this),_t=0;_t<ht.length;_t++)ht[_t](Mt,Lt)})}},w.tryColorscale=function(vt,xt){var st=xt?k.nestedProperty(vt,xt).get():vt;if(st){var at=st.color;if((st.colorscale||st._colorAx)&&k.isArrayOrTypedArray(at))return t.makeColorScaleFuncFromTrace(st)}return k.identity};var M,L,E={start:1,end:-1,middle:0,bottom:1,top:-1};function S(vt,xt,st,at,ht){var Lt=T.select(vt.node().parentNode),Mt=xt.indexOf("top")!==-1?"top":xt.indexOf("bottom")!==-1?"bottom":"middle",_t=xt.indexOf("left")!==-1?"end":xt.indexOf("right")!==-1?"start":"middle",St=at?at/.8+1:0,Dt=(a.lineCount(vt)-1)*c+1,ut=E[_t]*St,Tt=.75*st+E[Mt]*St+(E[Mt]-1)*Dt*st/2;vt.attr("text-anchor",_t),ht||Lt.attr("transform",n(ut,Tt))}function O(vt,xt){var st=vt.ts||xt.textfont.size;return m(st)&&st>0?st:0}function P(vt,xt,st){return st&&(vt=G(vt)),xt?R(vt[1]):U(vt[0])}function U(vt){var xt=T.round(vt,2);return M=xt,xt}function R(vt){var xt=T.round(vt,2);return L=xt,xt}function j(vt,xt,st,at){var ht=vt[0]-xt[0],Lt=vt[1]-xt[1],Mt=st[0]-xt[0],_t=st[1]-xt[1],St=Math.pow(ht*ht+Lt*Lt,.25),Dt=Math.pow(Mt*Mt+_t*_t,.25),ut=(Dt*Dt*ht-St*St*Mt)*at,Tt=(Dt*Dt*Lt-St*St*_t)*at,bt=3*Dt*(St+Dt),It=3*St*(St+Dt);return[[U(xt[0]+(bt&&ut/bt)),R(xt[1]+(bt&&Tt/bt))],[U(xt[0]-(It&&ut/It)),R(xt[1]-(It&&Tt/It))]]}w.textPointStyle=function(vt,xt,st){if(vt.size()){var at;if(xt.selectedpoints){var ht=w.makeSelectedTextStyleFns(xt);at=ht.selectedTextColorFn}var Lt=xt.texttemplate,Mt=st._fullLayout;vt.each(function(_t){var St=T.select(this),Dt=Lt?k.extractOption(_t,xt,"txt","texttemplate"):k.extractOption(_t,xt,"tx","text");if(Dt||Dt===0){if(Lt){var ut=xt._module.formatLabels,Tt=ut?ut(_t,xt,Mt):{},bt={};d(bt,xt,_t.i);var It=xt._meta||{};Dt=k.texttemplateString(Dt,Tt,Mt._d3locale,bt,_t,It)}var zt=_t.tp||xt.textposition,Ft=O(_t,xt),$t=at?at(_t):_t.tc||xt.textfont.color;St.call(w.font,_t.tf||xt.textfont.family,Ft,$t).text(Dt).call(a.convertToTspans,st).call(S,zt,Ft,_t.mrc)}else St.remove()})}},w.selectedTextStyle=function(vt,xt){if(vt.size()&&xt.selectedpoints){var st=w.makeSelectedTextStyleFns(xt);vt.each(function(at){var ht=T.select(this),Lt=st.selectedTextColorFn(at),Mt=at.tp||xt.textposition,_t=O(at,xt);e.fill(ht,Lt);var St=s.traceIs(xt,"bar-like");S(ht,Mt,_t,at.mrc2||at.mrc,St)})}},w.smoothopen=function(vt,xt){if(vt.length<3)return"M"+vt.join("L");var st,at="M"+vt[0],ht=[];for(st=1;st<vt.length-1;st++)ht.push(j(vt[st-1],vt[st],vt[st+1],xt));for(at+="Q"+ht[0][0]+" "+vt[1],st=2;st<vt.length-1;st++)at+="C"+ht[st-2][1]+" "+ht[st-1][0]+" "+vt[st];return at+"Q"+ht[vt.length-3][1]+" "+vt[vt.length-1]},w.smoothclosed=function(vt,xt){if(vt.length<3)return"M"+vt.join("L")+"Z";var st,at="M"+vt[0],ht=vt.length-1,Lt=[j(vt[ht],vt[0],vt[1],xt)];for(st=1;st<ht;st++)Lt.push(j(vt[st-1],vt[st],vt[st+1],xt));for(Lt.push(j(vt[ht-1],vt[ht],vt[0],xt)),st=1;st<=ht;st++)at+="C"+Lt[st-1][1]+" "+Lt[st][0]+" "+vt[st];return at+"C"+Lt[ht][1]+" "+Lt[0][0]+" "+vt[0]+"Z"};var B={hv:function(vt,xt,st){return"H"+U(xt[0])+"V"+P(xt,1,st)},vh:function(vt,xt,st){return"V"+R(xt[1])+"H"+P(xt,0,st)},hvh:function(vt,xt,st){return"H"+U((vt[0]+xt[0])/2)+"V"+R(xt[1])+"H"+P(xt,0,st)},vhv:function(vt,xt,st){return"V"+R((vt[1]+xt[1])/2)+"H"+U(xt[0])+"V"+P(xt,1,st)}},z=function(vt,xt,st){return"L"+P(xt,0,st)+","+P(xt,1,st)};function G(vt,xt){var st=vt.backoff,at=vt.trace,ht=vt.d,Lt=vt.i;if(st&&at&&at.marker&&at.marker.angle%360==0&&at.line&&at.line.shape!=="spline"){var Mt=k.isArrayOrTypedArray(st),_t=vt,St=xt?xt[0]:M||0,Dt=xt?xt[1]:L||0,ut=_t[0],Tt=_t[1],bt=ut-St,It=Tt-Dt,zt=Math.atan2(It,bt),Ft=Mt?st[Lt]:st;if(Ft==="auto"){var $t=_t.i;at.type==="scatter"&&$t--;var Wt=_t.marker,Xt=Wt.symbol;k.isArrayOrTypedArray(Xt)&&(Xt=Xt[$t]);var ae=Wt.size;k.isArrayOrTypedArray(ae)&&(ae=ae[$t]),Ft=Wt?w.symbolBackOffs[w.symbolNumber(Xt)]*ae:0,Ft+=w.getMarkerStandoff(ht[$t],at)||0}var Qt=ut-Ft*Math.cos(zt),de=Tt-Ft*Math.sin(zt);(Qt<=ut&&Qt>=St||Qt>=ut&&Qt<=St)&&(de<=Tt&&de>=Dt||de>=Tt&&de<=Dt)&&(vt=[Qt,de])}return vt}w.steps=function(vt){var xt=B[vt]||z;return function(st){for(var at="M"+U(st[0][0])+","+R(st[0][1]),ht=st.length,Lt=1;Lt<ht;Lt++)at+=xt(st[Lt-1],st[Lt],Lt===ht-1);return at}},w.applyBackoff=G,w.makeTester=function(){var vt=k.ensureSingleById(T.select("body"),"svg","js-plotly-tester",function(st){st.attr(i.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),xt=k.ensureSingle(vt,"path","js-reference-point",function(st){st.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});w.tester=vt,w.testref=xt},w.savedBBoxes={};var V=0;function et(vt){var xt=vt.getAttribute("data-unformatted");if(xt!==null)return xt+vt.getAttribute("data-math")+vt.getAttribute("text-anchor")+vt.getAttribute("style")}function J(vt,xt){if(!vt)return null;var st=xt._context,at=st._exportedPlot?"":st._baseUrl||"";return at?"url('"+at+"#"+vt+"')":"url(#"+vt+")"}w.bBox=function(vt,xt,st){var at,ht,Lt;if(st||(st=et(vt)),st){if(at=w.savedBBoxes[st])return k.extendFlat({},at)}else if(vt.childNodes.length===1){var Mt=vt.childNodes[0];if(st=et(Mt)){var _t=+Mt.getAttribute("x")||0,St=+Mt.getAttribute("y")||0,Dt=Mt.getAttribute("transform");if(!Dt){var ut=w.bBox(Mt,!1,st);return _t&&(ut.left+=_t,ut.right+=_t),St&&(ut.top+=St,ut.bottom+=St),ut}if(st+="~"+_t+"~"+St+"~"+Dt,at=w.savedBBoxes[st])return k.extendFlat({},at)}}xt?ht=vt:(Lt=w.tester.node(),ht=vt.cloneNode(!0),Lt.appendChild(ht)),T.select(ht).attr("transform",null).call(a.positionText,0,0);var Tt=ht.getBoundingClientRect(),bt=w.testref.node().getBoundingClientRect();xt||Lt.removeChild(ht);var It={height:Tt.height,width:Tt.width,left:Tt.left-bt.left,top:Tt.top-bt.top,right:Tt.right-bt.left,bottom:Tt.bottom-bt.top};return V>=1e4&&(w.savedBBoxes={},V=0),st&&(w.savedBBoxes[st]=It),V++,k.extendFlat({},It)},w.setClipUrl=function(vt,xt,st){vt.attr("clip-path",J(xt,st))},w.getTranslate=function(vt){var xt=(vt[vt.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(st,at,ht){return[at,ht].join(" ")}).split(" ");return{x:+xt[0]||0,y:+xt[1]||0}},w.setTranslate=function(vt,xt,st){var at=vt.attr?"attr":"getAttribute",ht=vt.attr?"attr":"setAttribute",Lt=vt[at]("transform")||"";return xt=xt||0,st=st||0,Lt=Lt.replace(/(\btranslate\(.*?\);?)/,"").trim(),Lt=(Lt+=n(xt,st)).trim(),vt[ht]("transform",Lt),Lt},w.getScale=function(vt){var xt=(vt[vt.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(st,at,ht){return[at,ht].join(" ")}).split(" ");return{x:+xt[0]||1,y:+xt[1]||1}},w.setScale=function(vt,xt,st){var at=vt.attr?"attr":"getAttribute",ht=vt.attr?"attr":"setAttribute",Lt=vt[at]("transform")||"";return xt=xt||1,st=st||1,Lt=Lt.replace(/(\bscale\(.*?\);?)/,"").trim(),Lt=(Lt+="scale("+xt+","+st+")").trim(),vt[ht]("transform",Lt),Lt};var X=/\s*sc.*/;w.setPointGroupScale=function(vt,xt,st){if(xt=xt||1,st=st||1,vt){var at=xt===1&&st===1?"":"scale("+xt+","+st+")";vt.each(function(){var ht=(this.getAttribute("transform")||"").replace(X,"");ht=(ht+=at).trim(),this.setAttribute("transform",ht)})}};var Y=/translate\([^)]*\)\s*$/;function Z(vt,xt){var st;return vt&&(st=vt.mf),st===void 0&&(st=xt.marker&&xt.marker.standoff||0),xt._geo||xt._xA?st:-st}w.setTextPointsScale=function(vt,xt,st){vt&&vt.each(function(){var at,ht=T.select(this),Lt=ht.select("text");if(Lt.node()){var Mt=parseFloat(Lt.attr("x")||0),_t=parseFloat(Lt.attr("y")||0),St=(ht.attr("transform")||"").match(Y);at=xt===1&&st===1?[]:[n(Mt,_t),"scale("+xt+","+st+")",n(-Mt,-_t)],St&&at.push(St),ht.attr("transform",at.join(""))}})},w.getMarkerStandoff=Z;var tt,rt,nt,ot,ct,pt,gt=Math.atan2,kt=Math.cos,yt=Math.sin;function mt(vt,xt){var st=xt[0],at=xt[1];return[st*kt(vt)-at*yt(vt),st*yt(vt)+at*kt(vt)]}function Ot(vt,xt){var st,at,ht=vt.ma;ht===void 0&&(ht=xt.marker.angle||0);var Lt=xt.marker.angleref;if(Lt==="previous"||Lt==="north"){if(xt._geo){var Mt=xt._geo.project(vt.lonlat);st=Mt[0],at=Mt[1]}else{var _t=xt._xA,St=xt._yA;if(!_t||!St)return 90;st=_t.c2p(vt.x),at=St.c2p(vt.y)}if(xt._geo){var Dt,ut=vt.lonlat[0],Tt=vt.lonlat[1],bt=xt._geo.project([ut,Tt+1e-5]),It=xt._geo.project([ut+1e-5,Tt]),zt=gt(It[1]-at,It[0]-st),Ft=gt(bt[1]-at,bt[0]-st);if(Lt==="north")Dt=ht/180*Math.PI;else if(Lt==="previous"){var $t=ut/180*Math.PI,Wt=Tt/180*Math.PI,Xt=tt/180*Math.PI,ae=rt/180*Math.PI,Qt=Xt-$t,de=kt(ae)*yt(Qt),ye=yt(ae)*kt(Wt)-kt(ae)*yt(Wt)*kt(Qt);Dt=-gt(de,ye)-Math.PI,tt=ut,rt=Tt}var ve=mt(zt,[kt(Dt),0]),ie=mt(Ft,[yt(Dt),0]);ht=gt(ve[1]+ie[1],ve[0]+ie[0])/Math.PI*180,Lt!=="previous"||pt===xt.uid&&vt.i===ct+1||(ht=null)}if(Lt==="previous"&&!xt._geo)if(pt===xt.uid&&vt.i===ct+1&&m(st)&&m(at)){var se=st-nt,ke=at-ot,Ae=xt.line&&xt.line.shape||"",Ie=Ae.slice(Ae.length-1);Ie==="h"&&(ke=0),Ie==="v"&&(se=0),ht+=gt(ke,se)/Math.PI*180+90}else ht=null}return nt=st,ot=at,ct=vt.i,pt=xt.uid,ht}w.getMarkerAngle=Ot},90998:function(W,I,o){var T,k,r,m,h=o(95616),s=o(39898).round,e="M0,0Z",t=Math.sqrt(2),n=Math.sqrt(3),a=Math.PI,i=Math.cos,c=Math.sin;function l(f){return f===null}function u(f,d,w){if(!(f&&f%360!=0||d))return w;if(r===f&&m===d&&T===w)return k;function v(P,U){var R=i(P),j=c(P),B=U[0],z=U[1]+(d||0);return[B*R-z*j,B*j+z*R]}r=f,m=d,T=w;for(var p=f/180*a,y=0,b=0,x=h(w),_="",g=0;g<x.length;g++){var A=x[g],M=A[0],L=y,E=b;if(M==="M"||M==="L")y=+A[1],b=+A[2];else if(M==="m"||M==="l")y+=+A[1],b+=+A[2];else if(M==="H")y=+A[1];else if(M==="h")y+=+A[1];else if(M==="V")b=+A[1];else if(M==="v")b+=+A[1];else if(M==="A"){y=+A[1],b=+A[2];var S=v(p,[+A[6],+A[7]]);A[6]=S[0],A[7]=S[1],A[3]=+A[3]+f}M!=="H"&&M!=="V"||(M="L"),M!=="h"&&M!=="v"||(M="l"),M!=="m"&&M!=="l"||(y-=L,b-=E);var O=v(p,[y,b]);M!=="H"&&M!=="V"||(M="L"),M!=="M"&&M!=="L"&&M!=="m"&&M!=="l"||(A[1]=O[0],A[2]=O[1]),A[0]=M,_+=A[0]+A.slice(1).join(",")}return k=_,_}W.exports={circle:{n:0,f:function(f,d,w){if(l(d))return e;var v=s(f,2),p="M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z";return w?u(d,w,p):p}},square:{n:1,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")}},diamond:{n:2,f:function(f,d,w){if(l(d))return e;var v=s(1.3*f,2);return u(d,w,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"Z")}},cross:{n:3,f:function(f,d,w){if(l(d))return e;var v=s(.4*f,2),p=s(1.2*f,2);return u(d,w,"M"+p+","+v+"H"+v+"V"+p+"H-"+v+"V"+v+"H-"+p+"V-"+v+"H-"+v+"V-"+p+"H"+v+"V-"+v+"H"+p+"Z")}},x:{n:4,f:function(f,d,w){if(l(d))return e;var v=s(.8*f/t,2),p="l"+v+","+v,y="l"+v+",-"+v,b="l-"+v+",-"+v,x="l-"+v+","+v;return u(d,w,"M0,"+v+p+y+b+y+b+x+b+x+p+x+p+"Z")}},"triangle-up":{n:5,f:function(f,d,w){if(l(d))return e;var v=s(2*f/n,2);return u(d,w,"M-"+v+","+s(f/2,2)+"H"+v+"L0,-"+s(f,2)+"Z")}},"triangle-down":{n:6,f:function(f,d,w){if(l(d))return e;var v=s(2*f/n,2);return u(d,w,"M-"+v+",-"+s(f/2,2)+"H"+v+"L0,"+s(f,2)+"Z")}},"triangle-left":{n:7,f:function(f,d,w){if(l(d))return e;var v=s(2*f/n,2);return u(d,w,"M"+s(f/2,2)+",-"+v+"V"+v+"L-"+s(f,2)+",0Z")}},"triangle-right":{n:8,f:function(f,d,w){if(l(d))return e;var v=s(2*f/n,2);return u(d,w,"M-"+s(f/2,2)+",-"+v+"V"+v+"L"+s(f,2)+",0Z")}},"triangle-ne":{n:9,f:function(f,d,w){if(l(d))return e;var v=s(.6*f,2),p=s(1.2*f,2);return u(d,w,"M-"+p+",-"+v+"H"+v+"V"+p+"Z")}},"triangle-se":{n:10,f:function(f,d,w){if(l(d))return e;var v=s(.6*f,2),p=s(1.2*f,2);return u(d,w,"M"+v+",-"+p+"V"+v+"H-"+p+"Z")}},"triangle-sw":{n:11,f:function(f,d,w){if(l(d))return e;var v=s(.6*f,2),p=s(1.2*f,2);return u(d,w,"M"+p+","+v+"H-"+v+"V-"+p+"Z")}},"triangle-nw":{n:12,f:function(f,d,w){if(l(d))return e;var v=s(.6*f,2),p=s(1.2*f,2);return u(d,w,"M-"+v+","+p+"V-"+v+"H"+p+"Z")}},pentagon:{n:13,f:function(f,d,w){if(l(d))return e;var v=s(.951*f,2),p=s(.588*f,2),y=s(-f,2),b=s(-.309*f,2);return u(d,w,"M"+v+","+b+"L"+p+","+s(.809*f,2)+"H-"+p+"L-"+v+","+b+"L0,"+y+"Z")}},hexagon:{n:14,f:function(f,d,w){if(l(d))return e;var v=s(f,2),p=s(f/2,2),y=s(f*n/2,2);return u(d,w,"M"+y+",-"+p+"V"+p+"L0,"+v+"L-"+y+","+p+"V-"+p+"L0,-"+v+"Z")}},hexagon2:{n:15,f:function(f,d,w){if(l(d))return e;var v=s(f,2),p=s(f/2,2),y=s(f*n/2,2);return u(d,w,"M-"+p+","+y+"H"+p+"L"+v+",0L"+p+",-"+y+"H-"+p+"L-"+v+",0Z")}},octagon:{n:16,f:function(f,d,w){if(l(d))return e;var v=s(.924*f,2),p=s(.383*f,2);return u(d,w,"M-"+p+",-"+v+"H"+p+"L"+v+",-"+p+"V"+p+"L"+p+","+v+"H-"+p+"L-"+v+","+p+"V-"+p+"Z")}},star:{n:17,f:function(f,d,w){if(l(d))return e;var v=1.4*f,p=s(.225*v,2),y=s(.951*v,2),b=s(.363*v,2),x=s(.588*v,2),_=s(-v,2),g=s(-.309*v,2),A=s(.118*v,2),M=s(.809*v,2);return u(d,w,"M"+p+","+g+"H"+y+"L"+b+","+A+"L"+x+","+M+"L0,"+s(.382*v,2)+"L-"+x+","+M+"L-"+b+","+A+"L-"+y+","+g+"H-"+p+"L0,"+_+"Z")}},hexagram:{n:18,f:function(f,d,w){if(l(d))return e;var v=s(.66*f,2),p=s(.38*f,2),y=s(.76*f,2);return u(d,w,"M-"+y+",0l-"+p+",-"+v+"h"+y+"l"+p+",-"+v+"l"+p+","+v+"h"+y+"l-"+p+","+v+"l"+p+","+v+"h-"+y+"l-"+p+","+v+"l-"+p+",-"+v+"h-"+y+"Z")}},"star-triangle-up":{n:19,f:function(f,d,w){if(l(d))return e;var v=s(f*n*.8,2),p=s(.8*f,2),y=s(1.6*f,2),b=s(4*f,2),x="A "+b+","+b+" 0 0 1 ";return u(d,w,"M-"+v+","+p+x+v+","+p+x+"0,-"+y+x+"-"+v+","+p+"Z")}},"star-triangle-down":{n:20,f:function(f,d,w){if(l(d))return e;var v=s(f*n*.8,2),p=s(.8*f,2),y=s(1.6*f,2),b=s(4*f,2),x="A "+b+","+b+" 0 0 1 ";return u(d,w,"M"+v+",-"+p+x+"-"+v+",-"+p+x+"0,"+y+x+v+",-"+p+"Z")}},"star-square":{n:21,f:function(f,d,w){if(l(d))return e;var v=s(1.1*f,2),p=s(2*f,2),y="A "+p+","+p+" 0 0 1 ";return u(d,w,"M-"+v+",-"+v+y+"-"+v+","+v+y+v+","+v+y+v+",-"+v+y+"-"+v+",-"+v+"Z")}},"star-diamond":{n:22,f:function(f,d,w){if(l(d))return e;var v=s(1.4*f,2),p=s(1.9*f,2),y="A "+p+","+p+" 0 0 1 ";return u(d,w,"M-"+v+",0"+y+"0,"+v+y+v+",0"+y+"0,-"+v+y+"-"+v+",0Z")}},"diamond-tall":{n:23,f:function(f,d,w){if(l(d))return e;var v=s(.7*f,2),p=s(1.4*f,2);return u(d,w,"M0,"+p+"L"+v+",0L0,-"+p+"L-"+v+",0Z")}},"diamond-wide":{n:24,f:function(f,d,w){if(l(d))return e;var v=s(1.4*f,2),p=s(.7*f,2);return u(d,w,"M0,"+p+"L"+v+",0L0,-"+p+"L-"+v+",0Z")}},hourglass:{n:25,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M"+v+","+v+"H-"+v+"L"+v+",-"+v+"H-"+v+"Z")},noDot:!0},bowtie:{n:26,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M"+v+","+v+"V-"+v+"L-"+v+","+v+"V-"+v+"Z")},noDot:!0},"circle-cross":{n:27,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(f,d,w){if(l(d))return e;var v=s(f,2),p=s(f/t,2);return u(d,w,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(f,d,w){if(l(d))return e;var v=s(1.3*f,2);return u(d,w,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM0,-"+v+"V"+v+"M-"+v+",0H"+v)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(f,d,w){if(l(d))return e;var v=s(1.3*f,2),p=s(.65*f,2);return u(d,w,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM-"+p+",-"+p+"L"+p+","+p+"M-"+p+","+p+"L"+p+",-"+p)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(f,d,w){if(l(d))return e;var v=s(1.4*f,2);return u(d,w,"M0,"+v+"V-"+v+"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(f,d,w){if(l(d))return e;var v=s(1.2*f,2),p=s(.85*f,2);return u(d,w,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(f,d,w){if(l(d))return e;var v=s(f/2,2),p=s(f,2);return u(d,w,"M"+v+","+p+"V-"+p+"M"+(v-p)+",-"+p+"V"+p+"M"+p+","+v+"H-"+p+"M-"+p+","+(v-p)+"H"+p)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(f,d,w){if(l(d))return e;var v=s(1.2*f,2),p=s(1.6*f,2),y=s(.8*f,2);return u(d,w,"M-"+v+","+y+"L0,0M"+v+","+y+"L0,0M0,-"+p+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(f,d,w){if(l(d))return e;var v=s(1.2*f,2),p=s(1.6*f,2),y=s(.8*f,2);return u(d,w,"M-"+v+",-"+y+"L0,0M"+v+",-"+y+"L0,0M0,"+p+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(f,d,w){if(l(d))return e;var v=s(1.2*f,2),p=s(1.6*f,2),y=s(.8*f,2);return u(d,w,"M"+y+","+v+"L0,0M"+y+",-"+v+"L0,0M-"+p+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(f,d,w){if(l(d))return e;var v=s(1.2*f,2),p=s(1.6*f,2),y=s(.8*f,2);return u(d,w,"M-"+y+","+v+"L0,0M-"+y+",-"+v+"L0,0M"+p+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(f,d,w){if(l(d))return e;var v=s(1.4*f,2);return u(d,w,"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(f,d,w){if(l(d))return e;var v=s(1.4*f,2);return u(d,w,"M0,"+v+"V-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M"+v+","+v+"L-"+v+",-"+v)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M0,0L-"+v+","+s(2*f,2)+"H"+v+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M0,0L-"+v+",-"+s(2*f,2)+"H"+v+"Z")},noDot:!0},"arrow-left":{n:47,f:function(f,d,w){if(l(d))return e;var v=s(2*f,2),p=s(f,2);return u(d,w,"M0,0L"+v+",-"+p+"V"+p+"Z")},noDot:!0},"arrow-right":{n:48,f:function(f,d,w){if(l(d))return e;var v=s(2*f,2),p=s(f,2);return u(d,w,"M0,0L-"+v+",-"+p+"V"+p+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M-"+v+",0H"+v+"M0,0L-"+v+","+s(2*f,2)+"H"+v+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(f,d,w){if(l(d))return e;var v=s(f,2);return u(d,w,"M-"+v+",0H"+v+"M0,0L-"+v+",-"+s(2*f,2)+"H"+v+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(f,d,w){if(l(d))return e;var v=s(2*f,2),p=s(f,2);return u(d,w,"M0,-"+p+"V"+p+"M0,0L"+v+",-"+p+"V"+p+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(f,d,w){if(l(d))return e;var v=s(2*f,2),p=s(f,2);return u(d,w,"M0,-"+p+"V"+p+"M0,0L-"+v+",-"+p+"V"+p+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(f,d,w){if(l(d))return e;var v=a/2.5,p=2*f*i(v),y=2*f*c(v);return u(d,w,"M0,0L"+-p+","+y+"L"+p+","+y+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(f,d,w){if(l(d))return e;var v=a/4,p=2*f*i(v),y=2*f*c(v);return u(d,w,"M0,0L"+-p+","+y+"A "+2*f+","+2*f+" 0 0 1 "+p+","+y+"Z")},backoff:.4,noDot:!0}}},25673:function(W){W.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(W,I,o){var T=o(92770),k=o(73972),r=o(89298),m=o(71828),h=o(45827);function s(e,t,n,a){var i=t["error_"+a]||{},c=[];if(i.visible&&["linear","log"].indexOf(n.type)!==-1){for(var l=h(i),u=0;u<e.length;u++){var f=e[u],d=f.i;if(d===void 0)d=u;else if(d===null)continue;var w=f[a];if(T(n.c2l(w))){var v=l(w,d);if(T(v[0])&&T(v[1])){var p=f[a+"s"]=w-v[0],y=f[a+"h"]=w+v[1];c.push(p,y)}}}var b=n._id,x=t._extremes[b],_=r.findExtremes(n,c,m.extendFlat({tozero:x.opts.tozero},{padded:!0}));x.min=x.min.concat(_.min),x.max=x.max.concat(_.max)}}W.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var a=t[n],i=a[0].trace;if(i.visible===!0&&k.traceIs(i,"errorBarsOK")){var c=r.getFromId(e,i.xaxis),l=r.getFromId(e,i.yaxis);s(a,i,c,"x"),s(a,i,l,"y")}}}},45827:function(W){function I(o,T){return o==="percent"?function(k){return Math.abs(k*T/100)}:o==="constant"?function(){return Math.abs(T)}:o==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}W.exports=function(o){var T=o.type,k=o.symmetric;if(T==="data"){var r=o.array||[];if(k)return function(e,t){var n=+r[t];return[n,n]};var m=o.arrayminus||[];return function(e,t){var n=+r[t],a=+m[t];return isNaN(n)&&isNaN(a)?[NaN,NaN]:[a||0,n||0]}}var h=I(T,o.value),s=I(T,o.valueminus);return k||o.valueminus===void 0?function(e){var t=h(e);return[t,t]}:function(e){return[s(e),h(e)]}}},97587:function(W,I,o){var T=o(92770),k=o(73972),r=o(71828),m=o(44467),h=o(25673);W.exports=function(s,e,t,n){var a="error_"+n.axis,i=m.newContainer(e,a),c=s[a]||{};function l(w,v){return r.coerce(c,i,h,w,v)}if(l("visible",c.array!==void 0||c.value!==void 0||c.type==="sqrt")!==!1){var u=l("type","array"in c?"data":"percent"),f=!0;u!=="sqrt"&&(f=l("symmetric",!((u==="data"?"arrayminus":"valueminus")in c))),u==="data"?(l("array"),l("traceref"),f||(l("arrayminus"),l("tracerefminus"))):u!=="percent"&&u!=="constant"||(l("value"),f||l("valueminus"));var d="copy_"+n.inherit+"style";n.inherit&&(e["error_"+n.inherit]||{}).visible&&l(d,!(c.color||T(c.thickness)||T(c.width))),n.inherit&&i[d]||(l("color",t),l("thickness"),l("width",k.traceIs(e,"gl3d")?0:4))}}},37369:function(W,I,o){var T=o(71828),k=o(30962).overrideAll,r=o(25673),m={error_x:T.extendFlat({},r),error_y:T.extendFlat({},r)};delete m.error_x.copy_zstyle,delete m.error_y.copy_zstyle,delete m.error_y.copy_ystyle;var h={error_x:T.extendFlat({},r),error_y:T.extendFlat({},r),error_z:T.extendFlat({},r)};delete h.error_x.copy_ystyle,delete h.error_y.copy_ystyle,delete h.error_z.copy_ystyle,delete h.error_z.copy_zstyle,W.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:m,bar:m,histogram:m,scatter3d:k(h,"calc","nested"),scattergl:k(m,"calc","nested")}},supplyDefaults:o(97587),calc:o(84532),makeComputeError:o(45827),plot:o(19398),style:o(62662),hoverInfo:function(s,e,t){(e.error_y||{}).visible&&(t.yerr=s.yh-s.y,e.error_y.symmetric||(t.yerrneg=s.y-s.ys)),(e.error_x||{}).visible&&(t.xerr=s.xh-s.x,e.error_x.symmetric||(t.xerrneg=s.x-s.xs))}}},19398:function(W,I,o){var T=o(39898),k=o(92770),r=o(91424),m=o(34098);W.exports=function(h,s,e,t){var n=e.xaxis,a=e.yaxis,i=t&&t.duration>0,c=h._context.staticPlot;s.each(function(l){var u,f=l[0].trace,d=f.error_x||{},w=f.error_y||{};f.ids&&(u=function(b){return b.id});var v=m.hasMarkers(f)&&f.marker.maxdisplayed>0;w.visible||d.visible||(l=[]);var p=T.select(this).selectAll("g.errorbar").data(l,u);if(p.exit().remove(),l.length){d.visible||p.selectAll("path.xerror").remove(),w.visible||p.selectAll("path.yerror").remove(),p.style("opacity",1);var y=p.enter().append("g").classed("errorbar",!0);i&&y.style("opacity",0).transition().duration(t.duration).style("opacity",1),r.setClipUrl(p,e.layerClipId,h),p.each(function(b){var x=T.select(this),_=function(S,O,P){var U={x:O.c2p(S.x),y:P.c2p(S.y)};return S.yh!==void 0&&(U.yh=P.c2p(S.yh),U.ys=P.c2p(S.ys),k(U.ys)||(U.noYS=!0,U.ys=P.c2p(S.ys,!0))),S.xh!==void 0&&(U.xh=O.c2p(S.xh),U.xs=O.c2p(S.xs),k(U.xs)||(U.noXS=!0,U.xs=O.c2p(S.xs,!0))),U}(b,n,a);if(!v||b.vis){var g,A=x.select("path.yerror");if(w.visible&&k(_.x)&&k(_.yh)&&k(_.ys)){var M=w.width;g="M"+(_.x-M)+","+_.yh+"h"+2*M+"m-"+M+",0V"+_.ys,_.noYS||(g+="m-"+M+",0h"+2*M),A.size()?i&&(A=A.transition().duration(t.duration).ease(t.easing)):A=x.append("path").style("vector-effect",c?"none":"non-scaling-stroke").classed("yerror",!0),A.attr("d",g)}else A.remove();var L=x.select("path.xerror");if(d.visible&&k(_.y)&&k(_.xh)&&k(_.xs)){var E=(d.copy_ystyle?w:d).width;g="M"+_.xh+","+(_.y-E)+"v"+2*E+"m0,-"+E+"H"+_.xs,_.noXS||(g+="m0,-"+E+"v"+2*E),L.size()?i&&(L=L.transition().duration(t.duration).ease(t.easing)):L=x.append("path").style("vector-effect",c?"none":"non-scaling-stroke").classed("xerror",!0),L.attr("d",g)}else L.remove()}})}})}},62662:function(W,I,o){var T=o(39898),k=o(7901);W.exports=function(r){r.each(function(m){var h=m[0].trace,s=h.error_y||{},e=h.error_x||{},t=T.select(this);t.selectAll("path.yerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color),e.copy_ystyle&&(e=s),t.selectAll("path.xerror").style("stroke-width",e.thickness+"px").call(k.stroke,e.color)})}},77914:function(W,I,o){var T=o(41940),k=o(528).hoverlabel,r=o(1426).extendFlat;W.exports={hoverlabel:{bgcolor:r({},k.bgcolor,{arrayOk:!0}),bordercolor:r({},k.bordercolor,{arrayOk:!0}),font:T({arrayOk:!0,editType:"none"}),align:r({},k.align,{arrayOk:!0}),namelength:r({},k.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(W,I,o){var T=o(71828),k=o(73972);function r(m,h,s,e){e=e||T.identity,Array.isArray(m)&&(h[0][s]=e(m))}W.exports=function(m){var h=m.calcdata,s=m._fullLayout;function e(c){return function(l){return T.coerceHoverinfo({hoverinfo:l},{_module:c._module},s)}}for(var t=0;t<h.length;t++){var n=h[t],a=n[0].trace;if(!k.traceIs(a,"pie-like")){var i=k.traceIs(a,"2dMap")?r:T.fillArray;i(a.hoverinfo,n,"hi",e(a)),a.hovertemplate&&i(a.hovertemplate,n,"ht"),a.hoverlabel&&(i(a.hoverlabel.bgcolor,n,"hbg"),i(a.hoverlabel.bordercolor,n,"hbc"),i(a.hoverlabel.font.size,n,"hts"),i(a.hoverlabel.font.color,n,"htc"),i(a.hoverlabel.font.family,n,"htf"),i(a.hoverlabel.namelength,n,"hnl"),i(a.hoverlabel.align,n,"hta"))}}}},75914:function(W,I,o){var T=o(73972),k=o(88335).hover;W.exports=function(r,m,h){var s=T.getComponentMethod("annotations","onClick")(r,r._hoverdata);function e(){r.emit("plotly_click",{points:r._hoverdata,event:m})}h!==void 0&&k(r,m,h,!0),r._hoverdata&&m&&m.target&&(s&&s.then?s.then(e):e(),m.stopImmediatePropagation&&m.stopImmediatePropagation())}},26675:function(W){W.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(W,I,o){var T=o(71828),k=o(77914),r=o(38048);W.exports=function(m,h,s,e){var t=T.extendFlat({},e.hoverlabel);h.hovertemplate&&(t.namelength=-1),r(m,h,function(n,a){return T.coerce(m,h,k,n,a)},t)}},23469:function(W,I,o){var T=o(71828);I.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},I.isTraceInSubplots=function(e,t){if(e.type==="splom"){for(var n=e.xaxes||[],a=e.yaxes||[],i=0;i<n.length;i++)for(var c=0;c<a.length;c++)if(t.indexOf(n[i]+a[c])!==-1)return!0;return!1}return t.indexOf(I.getSubplot(e))!==-1},I.flat=function(e,t){for(var n=new Array(e.length),a=0;a<e.length;a++)n[a]=t;return n},I.p2c=function(e,t){for(var n=new Array(e.length),a=0;a<e.length;a++)n[a]=e[a].p2c(t);return n},I.getDistanceFunction=function(e,t,n,a){return e==="closest"?a||I.quadrature(t,n):e.charAt(0)==="x"?t:n},I.getClosest=function(e,t,n){if(n.index!==!1)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var a=0;a<e.length;a++){var i=t(e[a]);i<=n.distance&&(n.index=a,n.distance=i)}return n},I.inbox=function(e,t,n){return e*t<0||e===0?n:1/0},I.quadrature=function(e,t){return function(n){var a=e(n),i=t(n);return Math.sqrt(a*a+i*i)}},I.makeEventData=function(e,t,n){var a="index"in e?e.index:e.pointNumber,i={data:t._input,fullData:t,curveNumber:t.index,pointNumber:a};if(t._indexToPoints){var c=t._indexToPoints[a];c.length===1?i.pointIndex=c[0]:i.pointIndices=c}else i.pointIndex=a;return t._module.eventData?i=t._module.eventData(i,e,t,n,a):("xVal"in e?i.x=e.xVal:"x"in e&&(i.x=e.x),"yVal"in e?i.y=e.yVal:"y"in e&&(i.y=e.y),e.xa&&(i.xaxis=e.xa),e.ya&&(i.yaxis=e.ya),e.zLabelVal!==void 0&&(i.z=e.zLabelVal)),I.appendArrayPointValue(i,t,a),i},I.appendArrayPointValue=function(e,t,n){var a=t._arrayAttrs;if(a)for(var i=0;i<a.length;i++){var c=a[i],l=r(c);if(e[l]===void 0){var u=m(T.nestedProperty(t,c).get(),n);u!==void 0&&(e[l]=u)}}},I.appendArrayMultiPointValues=function(e,t,n){var a=t._arrayAttrs;if(a)for(var i=0;i<a.length;i++){var c=a[i],l=r(c);if(e[l]===void 0){for(var u=T.nestedProperty(t,c).get(),f=new Array(n.length),d=0;d<n.length;d++)f[d]=m(u,n[d]);e[l]=f}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function r(e){return k[e]||e}function m(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var h={x:!0,y:!0},s={"x unified":!0,"y unified":!0};I.isUnifiedHover=function(e){return typeof e=="string"&&!!s[e]},I.isXYhover=function(e){return typeof e=="string"&&!!h[e]}},88335:function(W,I,o){var T=o(39898),k=o(92770),r=o(84267),m=o(71828),h=m.strTranslate,s=m.strRotate,e=o(11086),t=o(63893),n=o(39918),a=o(91424),i=o(7901),c=o(28569),l=o(89298),u=o(73972),f=o(23469),d=o(26675),w=o(99017),v=o(43969),p=d.YANGLE,y=Math.PI*p/180,b=1/Math.sin(y),x=Math.cos(y),_=Math.sin(y),g=d.HOVERARROWSIZE,A=d.HOVERTEXTPAD,M={box:!0,ohlc:!0,violin:!0,candlestick:!0},L={scatter:!0,scattergl:!0,splom:!0};function E(Y){return[Y.trace.index,Y.index,Y.x0,Y.y0,Y.name,Y.attr,Y.xa?Y.xa._id:"",Y.ya?Y.ya._id:""].join(",")}I.hover=function(Y,Z,tt,rt){Y=m.getGraphDiv(Y);var nt=Z.target;m.throttle(Y._fullLayout._uid+d.HOVERID,d.HOVERMINTIME,function(){(function(ot,ct,pt,gt,kt){pt||(pt="xy");var yt=Array.isArray(pt)?pt:[pt],mt=ot._fullLayout,Ot=mt._plots||[],vt=Ot[pt],xt=mt._has("cartesian");if(vt){var st=vt.overlays.map(function(je){return je.id});yt=yt.concat(st)}for(var at=yt.length,ht=new Array(at),Lt=new Array(at),Mt=!1,_t=0;_t<at;_t++){var St=yt[_t];if(Ot[St])Mt=!0,ht[_t]=Ot[St].xaxis,Lt[_t]=Ot[St].yaxis;else{if(!mt[St]||!mt[St]._subplot)return void m.warn("Unrecognized subplot: "+St);var Dt=mt[St]._subplot;ht[_t]=Dt.xaxis,Lt[_t]=Dt.yaxis}}var ut=ct.hovermode||mt.hovermode;if(ut&&!Mt&&(ut="closest"),["x","y","closest","x unified","y unified"].indexOf(ut)===-1||!ot.calcdata||ot.querySelector(".zoombox")||ot._dragging)return c.unhoverRaw(ot,ct);var Tt=mt.hoverdistance;Tt===-1&&(Tt=1/0);var bt=mt.spikedistance;bt===-1&&(bt=1/0);var It,zt,Ft,$t,Wt,Xt,ae,Qt,de,ye,ve,ie,se,ke=[],Ae=[],Ie={hLinePoint:null,vLinePoint:null},Te=!1;if(Array.isArray(ct))for(ut="array",Ft=0;Ft<ct.length;Ft++)(Wt=ot.calcdata[ct[Ft].curveNumber||0])&&(Xt=Wt[0].trace,Wt[0].trace.hoverinfo!=="skip"&&(Ae.push(Wt),Xt.orientation==="h"&&(Te=!0)));else{for($t=0;$t<ot.calcdata.length;$t++)Wt=ot.calcdata[$t],(Xt=Wt[0].trace).hoverinfo!=="skip"&&f.isTraceInSubplots(Xt,yt)&&(Ae.push(Wt),Xt.orientation==="h"&&(Te=!0));var Vt,Zt;if(kt){if(e.triggerHandler(ot,"plotly_beforehover",ct)===!1)return;var Gt=kt.getBoundingClientRect();Vt=ct.clientX-Gt.left,Zt=ct.clientY-Gt.top,mt._calcInverseTransform(ot);var Yt=m.apply3DTransform(mt._invTransform)(Vt,Zt);if(Vt=Yt[0],Zt=Yt[1],Vt<0||Vt>ht[0]._length||Zt<0||Zt>Lt[0]._length)return c.unhoverRaw(ot,ct)}else Vt="xpx"in ct?ct.xpx:ht[0]._length/2,Zt="ypx"in ct?ct.ypx:Lt[0]._length/2;if(ct.pointerX=Vt+ht[0]._offset,ct.pointerY=Zt+Lt[0]._offset,It="xval"in ct?f.flat(yt,ct.xval):f.p2c(ht,Vt),zt="yval"in ct?f.flat(yt,ct.yval):f.p2c(Lt,Zt),!k(It[0])||!k(zt[0]))return m.warn("Fx.hover failed",ct,ot),c.unhoverRaw(ot,ct)}var ne=1/0;function re(je,nr){for($t=0;$t<Ae.length;$t++)if((Wt=Ae[$t])&&Wt[0]&&Wt[0].trace&&(Xt=Wt[0].trace).visible===!0&&Xt._length!==0&&["carpet","contourcarpet"].indexOf(Xt._module.name)===-1){if(Xt.type==="splom"?ae=yt[Qt=0]:(ae=f.getSubplot(Xt),Qt=yt.indexOf(ae)),de=ut,f.isUnifiedHover(de)&&(de=de.charAt(0)),ie={cd:Wt,trace:Xt,xa:ht[Qt],ya:Lt[Qt],maxHoverDistance:Tt,maxSpikeDistance:bt,index:!1,distance:Math.min(ne,Tt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:i.defaultLine,name:Xt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},mt[ae]&&(ie.subplot=mt[ae]._subplot),mt._splomScenes&&mt._splomScenes[Xt.uid]&&(ie.scene=mt._splomScenes[Xt.uid]),se=ke.length,de==="array"){var hr=ct[$t];"pointNumber"in hr?(ie.index=hr.pointNumber,de="closest"):(de="","xval"in hr&&(ye=hr.xval,de="x"),"yval"in hr&&(ve=hr.yval,de=de?"closest":"y"))}else je!==void 0&&nr!==void 0?(ye=je,ve=nr):(ye=It[Qt],ve=zt[Qt]);if(Tt!==0)if(Xt._module&&Xt._module.hoverPoints){var gr=Xt._module.hoverPoints(ie,ye,ve,de,{finiteRange:!0,hoverLayer:mt._hoverlayer});if(gr)for(var Mr,Hr=0;Hr<gr.length;Hr++)Mr=gr[Hr],k(Mr.x0)&&k(Mr.y0)&&ke.push(j(Mr,ut))}else m.log("Unrecognized trace type in hover:",Xt);if(ut==="closest"&&ke.length>se&&(ke.splice(0,se),ne=ke[0].distance),xt&&bt!==0&&ke.length===0){ie.distance=bt,ie.index=!1;var Pr=Xt._module.hoverPoints(ie,ye,ve,"closest",{hoverLayer:mt._hoverlayer});if(Pr&&(Pr=Pr.filter(function(qe){return qe.spikeDistance<=bt})),Pr&&Pr.length){var Dr,Qr=Pr.filter(function(qe){return qe.xa.showspikes&&qe.xa.spikesnap!=="hovered data"});if(Qr.length){var He=Qr[0];k(He.x0)&&k(He.y0)&&(Dr=Nt(He),(!Ie.vLinePoint||Ie.vLinePoint.spikeDistance>Dr.spikeDistance)&&(Ie.vLinePoint=Dr))}var wr=Pr.filter(function(qe){return qe.ya.showspikes&&qe.ya.spikesnap!=="hovered data"});if(wr.length){var Me=wr[0];k(Me.x0)&&k(Me.y0)&&(Dr=Nt(Me),(!Ie.hLinePoint||Ie.hLinePoint.spikeDistance>Dr.spikeDistance)&&(Ie.hLinePoint=Dr))}}}}}function Pt(je,nr,hr){for(var gr,Mr=null,Hr=1/0,Pr=0;Pr<je.length;Pr++)gr=je[Pr].spikeDistance,hr&&Pr===0&&(gr=-1/0),gr<=Hr&&gr<=nr&&(Mr=je[Pr],Hr=gr);return Mr}function Nt(je){return je?{xa:je.xa,ya:je.ya,x:je.xSpike!==void 0?je.xSpike:(je.x0+je.x1)/2,y:je.ySpike!==void 0?je.ySpike:(je.y0+je.y1)/2,distance:je.distance,spikeDistance:je.spikeDistance,curveNumber:je.trace.index,color:je.color,pointNumber:je.index}:null}re();var ee={fullLayout:mt,container:mt._hoverlayer,event:ct},te=ot._spikepoints,ge={vLinePoint:Ie.vLinePoint,hLinePoint:Ie.hLinePoint};ot._spikepoints=ge;var pe=function(){ke.sort(function(je,nr){return je.distance-nr.distance}),ke=function(je,nr){for(var hr=nr.charAt(0),gr=[],Mr=[],Hr=[],Pr=0;Pr<je.length;Pr++){var Dr=je[Pr];u.traceIs(Dr.trace,"bar-like")||u.traceIs(Dr.trace,"box-violin")?Hr.push(Dr):Dr.trace[hr+"period"]?Mr.push(Dr):gr.push(Dr)}return gr.concat(Mr).concat(Hr)}(ke,ut)};pe();var me=ut.charAt(0),ce=(me==="x"||me==="y")&&ke[0]&&L[ke[0].trace.type];if(xt&&bt!==0&&ke.length!==0){var we=Pt(ke.filter(function(je){return je.ya.showspikes}),bt,ce);Ie.hLinePoint=Nt(we);var ue=Pt(ke.filter(function(je){return je.xa.showspikes}),bt,ce);Ie.vLinePoint=Nt(ue)}if(ke.length===0){var he=c.unhoverRaw(ot,ct);return!xt||Ie.hLinePoint===null&&Ie.vLinePoint===null||z(te)&&B(ot,Ie,ee),he}if(xt&&z(te)&&B(ot,Ie,ee),f.isXYhover(de)&&ke[0].length!==0&&ke[0].trace.type!=="splom"){var be=ke[0],Pe=(ke=M[be.trace.type]?ke.filter(function(je){return je.trace.index===be.trace.index}):[be]).length;re(V("x",be,mt),V("y",be,mt));var De,Ue=[],tr={},Ge=0,Ze=function(je){var nr=M[je.trace.type]?E(je):je.trace.index;if(tr[nr]){var hr=tr[nr]-1,gr=Ue[hr];hr>0&&Math.abs(je.distance)<Math.abs(gr.distance)&&(Ue[hr]=je)}else Ge++,tr[nr]=Ge,Ue.push(je)};for(De=0;De<Pe;De++)Ze(ke[De]);for(De=ke.length-1;De>Pe-1;De--)Ze(ke[De]);ke=Ue,pe()}var We=ot._hoverdata,pr=[],xr=et(ot),sr=J(ot);for(Ft=0;Ft<ke.length;Ft++){var $e=ke[Ft],ir=f.makeEventData($e,$e.trace,$e.cd);if($e.hovertemplate!==!1){var Ke=!1;$e.cd[$e.index]&&$e.cd[$e.index].ht&&(Ke=$e.cd[$e.index].ht),$e.hovertemplate=Ke||$e.trace.hovertemplate||!1}if($e.xa&&$e.ya){var ar=$e.x0+$e.xa._offset,fr=$e.x1+$e.xa._offset,mr=$e.y0+$e.ya._offset,Cr=$e.y1+$e.ya._offset,Er=Math.min(ar,fr),_r=Math.max(ar,fr),Sr=Math.min(mr,Cr),Xr=Math.max(mr,Cr);ir.bbox={x0:Er+sr,x1:_r+sr,y0:Sr+xr,y1:Xr+xr}}$e.eventData=[ir],pr.push(ir)}ot._hoverdata=pr;var en=ut==="y"&&(Ae.length>1||ke.length>1)||ut==="closest"&&Te&&ke.length>1,sn=i.combine(mt.plot_bgcolor||i.background,mt.paper_bgcolor),tn=O(ke,{gd:ot,hovermode:ut,rotateLabels:en,bgColor:sn,container:mt._hoverlayer,outerContainer:mt._paper.node(),commonLabelOpts:mt.hoverlabel,hoverdistance:mt.hoverdistance}),qr=tn.hoverLabels;if(f.isUnifiedHover(ut)||(function(je,nr,hr,gr){var Mr,Hr,Pr,Dr,Qr,He,wr,Me=nr?"xa":"ya",qe=nr?"ya":"xa",Qe=0,yr=1,br=je.size(),Ar=new Array(br),cr=0,Xe=gr.minX,Je=gr.maxX,lr=gr.minY,ur=gr.maxY,Lr=function(fn){return fn*hr._invScaleX},Ir=function(fn){return fn*hr._invScaleY};function Gr(fn){var kn=fn[0],Yr=fn[fn.length-1];if(Hr=kn.pmin-kn.pos-kn.dp+kn.size,Pr=Yr.pos+Yr.dp+Yr.size-kn.pmax,Hr>.01){for(Qr=fn.length-1;Qr>=0;Qr--)fn[Qr].dp+=Hr;Mr=!1}if(!(Pr<.01)){if(Hr<-.01){for(Qr=fn.length-1;Qr>=0;Qr--)fn[Qr].dp-=Pr;Mr=!1}if(Mr){var mn=0;for(Dr=0;Dr<fn.length;Dr++)(He=fn[Dr]).pos+He.dp+He.size>kn.pmax&&mn++;for(Dr=fn.length-1;Dr>=0&&!(mn<=0);Dr--)(He=fn[Dr]).pos>kn.pmax-1&&(He.del=!0,mn--);for(Dr=0;Dr<fn.length&&!(mn<=0);Dr++)if((He=fn[Dr]).pos<kn.pmin+1)for(He.del=!0,mn--,Pr=2*He.size,Qr=fn.length-1;Qr>=0;Qr--)fn[Qr].dp-=Pr;for(Dr=fn.length-1;Dr>=0&&!(mn<=0);Dr--)(He=fn[Dr]).pos+He.dp+He.size>kn.pmax&&(He.del=!0,mn--)}}}for(je.each(function(fn){var kn=fn[Me],Yr=fn[qe],mn=kn._id.charAt(0)==="x",Sn=kn.range;cr===0&&Sn&&Sn[0]>Sn[1]!==mn&&(yr=-1);var Xn=0,ui=mn?hr.width:hr.height;if(hr.hovermode==="x"||hr.hovermode==="y"){var si,gi,ri=U(fn,nr),Mi=fn.anchor,Xa=Mi==="end"?-1:1;if(Mi==="middle")gi=(si=fn.crossPos+(mn?Ir(ri.y-fn.by/2):Lr(fn.bx/2+fn.tx2width/2)))+(mn?Ir(fn.by):Lr(fn.bx));else if(mn)gi=(si=fn.crossPos+Ir(g+ri.y)-Ir(fn.by/2-g))+Ir(fn.by);else{var ya=Lr(Xa*g+ri.x),so=ya+Lr(Xa*fn.bx);si=fn.crossPos+Math.min(ya,so),gi=fn.crossPos+Math.max(ya,so)}mn?lr!==void 0&&ur!==void 0&&Math.min(gi,ur)-Math.max(si,lr)>1&&(Yr.side==="left"?(Xn=Yr._mainLinePosition,ui=hr.width):ui=Yr._mainLinePosition):Xe!==void 0&&Je!==void 0&&Math.min(gi,Je)-Math.max(si,Xe)>1&&(Yr.side==="top"?(Xn=Yr._mainLinePosition,ui=hr.height):ui=Yr._mainLinePosition)}Ar[cr++]=[{datum:fn,traceIndex:fn.trace.index,dp:0,pos:fn.pos,posref:fn.posref,size:fn.by*(mn?b:1)/2,pmin:Xn,pmax:ui}]}),Ar.sort(function(fn,kn){return fn[0].posref-kn[0].posref||yr*(kn[0].traceIndex-fn[0].traceIndex)});!Mr&&Qe<=br;){for(Qe++,Mr=!0,Dr=0;Dr<Ar.length-1;){var Nr=Ar[Dr],Kr=Ar[Dr+1],Vr=Nr[Nr.length-1],an=Kr[0];if((Hr=Vr.pos+Vr.dp+Vr.size-an.pos-an.dp+an.size)>.01&&Vr.pmin===an.pmin&&Vr.pmax===an.pmax){for(Qr=Kr.length-1;Qr>=0;Qr--)Kr[Qr].dp+=Hr;for(Nr.push.apply(Nr,Kr),Ar.splice(Dr+1,1),wr=0,Qr=Nr.length-1;Qr>=0;Qr--)wr+=Nr[Qr].dp;for(Pr=wr/Nr.length,Qr=Nr.length-1;Qr>=0;Qr--)Nr[Qr].dp-=Pr;Mr=!1}else Dr++}Ar.forEach(Gr)}for(Dr=Ar.length-1;Dr>=0;Dr--){var rn=Ar[Dr];for(Qr=rn.length-1;Qr>=0;Qr--){var nn=rn[Qr],hn=nn.datum;hn.offset=nn.dp,hn.del=nn.del}}}(qr,en,mt,tn.commonLabelBoundingBox),R(qr,en,mt._invScaleX,mt._invScaleY)),kt&&kt.tagName){var vn=u.getComponentMethod("annotations","hasClickToShow")(ot,pr);n(T.select(kt),vn?"pointer":"")}kt&&!gt&&function(je,nr,hr){if(!hr||hr.length!==je._hoverdata.length)return!0;for(var gr=hr.length-1;gr>=0;gr--){var Mr=hr[gr],Hr=je._hoverdata[gr];if(Mr.curveNumber!==Hr.curveNumber||String(Mr.pointNumber)!==String(Hr.pointNumber)||String(Mr.pointNumbers)!==String(Hr.pointNumbers))return!0}return!1}(ot,0,We)&&(We&&ot.emit("plotly_unhover",{event:ct,points:We}),ot.emit("plotly_hover",{event:ct,points:ot._hoverdata,xaxes:ht,yaxes:Lt,xvals:It,yvals:zt}))})(Y,Z,tt,rt,nt)})},I.loneHover=function(Y,Z){var tt=!0;Array.isArray(Y)||(tt=!1,Y=[Y]);var rt=Z.gd,nt=et(rt),ot=J(rt),ct=O(Y.map(function(kt){var yt=kt._x0||kt.x0||kt.x||0,mt=kt._x1||kt.x1||kt.x||0,Ot=kt._y0||kt.y0||kt.y||0,vt=kt._y1||kt.y1||kt.y||0,xt=kt.eventData;if(xt){var st=Math.min(yt,mt),at=Math.max(yt,mt),ht=Math.min(Ot,vt),Lt=Math.max(Ot,vt),Mt=kt.trace;if(u.traceIs(Mt,"gl3d")){var _t=rt._fullLayout[Mt.scene]._scene.container,St=_t.offsetLeft,Dt=_t.offsetTop;st+=St,at+=St,ht+=Dt,Lt+=Dt}xt.bbox={x0:st+ot,x1:at+ot,y0:ht+nt,y1:Lt+nt},Z.inOut_bbox&&Z.inOut_bbox.push(xt.bbox)}else xt=!1;return{color:kt.color||i.defaultLine,x0:kt.x0||kt.x||0,x1:kt.x1||kt.x||0,y0:kt.y0||kt.y||0,y1:kt.y1||kt.y||0,xLabel:kt.xLabel,yLabel:kt.yLabel,zLabel:kt.zLabel,text:kt.text,name:kt.name,idealAlign:kt.idealAlign,borderColor:kt.borderColor,fontFamily:kt.fontFamily,fontSize:kt.fontSize,fontColor:kt.fontColor,nameLength:kt.nameLength,textAlign:kt.textAlign,trace:kt.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:kt.hovertemplate||!1,hovertemplateLabels:kt.hovertemplateLabels||!1,eventData:xt}}),{gd:rt,hovermode:"closest",rotateLabels:!1,bgColor:Z.bgColor||i.background,container:T.select(Z.container),outerContainer:Z.outerContainer||Z.container}).hoverLabels,pt=0,gt=0;return ct.sort(function(kt,yt){return kt.y0-yt.y0}).each(function(kt,yt){var mt=kt.y0-kt.by/2;kt.offset=mt-5<pt?pt-mt+5:0,pt=mt+kt.by+kt.offset,yt===Z.anchorIndex&&(gt=kt.offset)}).each(function(kt){kt.offset-=gt}),R(ct,!1,rt._fullLayout._invScaleX,rt._fullLayout._invScaleY),tt?ct:ct.node()};var S=/<extra>([\s\S]*)<\/extra>/;function O(Y,Z){var tt=Z.gd,rt=tt._fullLayout,nt=Z.hovermode,ot=Z.rotateLabels,ct=Z.bgColor,pt=Z.container,gt=Z.outerContainer,kt=Z.commonLabelOpts||{};if(Y.length===0)return[[]];var yt=Z.fontFamily||d.HOVERFONT,mt=Z.fontSize||d.HOVERFONTSIZE,Ot=Y[0],vt=Ot.xa,xt=Ot.ya,st=nt.charAt(0),at=st+"Label",ht=Ot[at];if(ht===void 0&&vt.type==="multicategory")for(var Lt=0;Lt<Y.length&&(ht=Y[Lt][at])===void 0;Lt++);var Mt=X(tt,gt),_t=Mt.top,St=Mt.width,Dt=Mt.height,ut=ht!==void 0&&Ot.distance<=Z.hoverdistance&&(nt==="x"||nt==="y");if(ut){var Tt,bt,It=!0;for(Tt=0;Tt<Y.length;Tt++)if(It&&Y[Tt].zLabel===void 0&&(It=!1),bt=Y[Tt].hoverinfo||Y[Tt].trace.hoverinfo){var zt=Array.isArray(bt)?bt:bt.split("+");if(zt.indexOf("all")===-1&&zt.indexOf(nt)===-1){ut=!1;break}}It&&(ut=!1)}var Ft=pt.selectAll("g.axistext").data(ut?[0]:[]);Ft.enter().append("g").classed("axistext",!0),Ft.exit().remove();var $t={minX:0,maxX:0,minY:0,maxY:0};if(Ft.each(function(){var he=T.select(this),be=m.ensureSingle(he,"path","",function(Sr){Sr.style({"stroke-width":"1px"})}),Pe=m.ensureSingle(he,"text","",function(Sr){Sr.attr("data-notex",1)}),De=kt.bgcolor||i.defaultLine,Ue=kt.bordercolor||i.contrast(De),tr=i.contrast(De),Ge={family:kt.font.family||yt,size:kt.font.size||mt,color:kt.font.color||tr};be.style({fill:De,stroke:Ue}),Pe.text(ht).call(a.font,Ge).call(t.positionText,0,0).call(t.convertToTspans,tt),he.attr("transform","");var Ze,We,pr=X(tt,Pe.node());if(nt==="x"){var xr=vt.side==="top"?"-":"";Pe.attr("text-anchor","middle").call(t.positionText,0,vt.side==="top"?_t-pr.bottom-g-A:_t-pr.top+g+A),Ze=vt._offset+(Ot.x0+Ot.x1)/2,We=xt._offset+(vt.side==="top"?0:xt._length);var sr=pr.width/2+A;Ze<sr?(Ze=sr,be.attr("d","M-"+(sr-g)+",0L-"+(sr-2*g)+","+xr+g+"H"+sr+"v"+xr+(2*A+pr.height)+"H-"+sr+"V"+xr+g+"Z")):Ze>rt.width-sr?(Ze=rt.width-sr,be.attr("d","M"+(sr-g)+",0L"+sr+","+xr+g+"v"+xr+(2*A+pr.height)+"H-"+sr+"V"+xr+g+"H"+(sr-2*g)+"Z")):be.attr("d","M0,0L"+g+","+xr+g+"H"+sr+"v"+xr+(2*A+pr.height)+"H-"+sr+"V"+xr+g+"H-"+g+"Z"),$t.minX=Ze-sr,$t.maxX=Ze+sr,vt.side==="top"?($t.minY=We-(2*A+pr.height),$t.maxY=We-A):($t.minY=We+A,$t.maxY=We+(2*A+pr.height))}else{var $e,ir,Ke;xt.side==="right"?($e="start",ir=1,Ke="",Ze=vt._offset+vt._length):($e="end",ir=-1,Ke="-",Ze=vt._offset),We=xt._offset+(Ot.y0+Ot.y1)/2,Pe.attr("text-anchor",$e),be.attr("d","M0,0L"+Ke+g+","+g+"V"+(A+pr.height/2)+"h"+Ke+(2*A+pr.width)+"V-"+(A+pr.height/2)+"H"+Ke+g+"V-"+g+"Z"),$t.minY=We-(A+pr.height/2),$t.maxY=We+(A+pr.height/2),xt.side==="right"?($t.minX=Ze+g,$t.maxX=Ze+g+(2*A+pr.width)):($t.minX=Ze-g-(2*A+pr.width),$t.maxX=Ze-g);var ar,fr=pr.height/2,mr=_t-pr.top-fr,Cr="clip"+rt._uid+"commonlabel"+xt._id;if(Ze<pr.width+2*A+g){ar="M-"+(g+A)+"-"+fr+"h-"+(pr.width-A)+"V"+fr+"h"+(pr.width-A)+"Z";var Er=pr.width-Ze+A;t.positionText(Pe,Er,mr),$e==="end"&&Pe.selectAll("tspan").each(function(){var Sr=T.select(this),Xr=a.tester.append("text").text(Sr.text()).call(a.font,Ge),en=X(tt,Xr.node());Math.round(en.width)<Math.round(pr.width)&&Sr.attr("x",Er-en.width),Xr.remove()})}else t.positionText(Pe,ir*(A+g),mr),ar=null;var _r=rt._topclips.selectAll("#"+Cr).data(ar?[0]:[]);_r.enter().append("clipPath").attr("id",Cr).append("path"),_r.exit().remove(),_r.select("path").attr("d",ar),a.setClipUrl(Pe,ar?Cr:null,tt)}he.attr("transform",h(Ze,We))}),f.isUnifiedHover(nt)){pt.selectAll("g.hovertext").remove();var Wt=Y.filter(function(he){return he.hoverinfo!=="none"});if(Wt.length===0)return[];var Xt=rt.hoverlabel,ae=Xt.font,Qt={showlegend:!0,legend:{title:{text:ht,font:ae},font:ae,bgcolor:Xt.bgcolor,bordercolor:Xt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:rt.legend?rt.legend.traceorder:void 0,orientation:"v"}},de={font:ae};w(Qt,de,tt._fullData);var ye=de.legend;ye.entries=[];for(var ve=0;ve<Wt.length;ve++){var ie=Wt[ve];if(ie.hoverinfo!=="none"){var se=P(ie,!0,nt,rt,ht),ke=se[0],Ae=se[1];ie.name=Ae,ie.text=Ae!==""?Ae+" : "+ke:ke;var Ie=ie.cd[ie.index];Ie&&(Ie.mc&&(ie.mc=Ie.mc),Ie.mcc&&(ie.mc=Ie.mcc),Ie.mlc&&(ie.mlc=Ie.mlc),Ie.mlcc&&(ie.mlc=Ie.mlcc),Ie.mlw&&(ie.mlw=Ie.mlw),Ie.mrc&&(ie.mrc=Ie.mrc),Ie.dir&&(ie.dir=Ie.dir)),ie._distinct=!0,ye.entries.push([ie])}}ye.entries.sort(function(he,be){return he[0].trace.index-be[0].trace.index}),ye.layer=pt,ye._inHover=!0,ye._groupTitleFont=Xt.grouptitlefont,v(tt,ye);var Te,Vt,Zt,Gt,Yt=pt.select("g.legend"),ne=X(tt,Yt.node()),re=ne.width+2*A,Pt=ne.height+2*A,Nt=Wt[0],ee=(Nt.x0+Nt.x1)/2,te=(Nt.y0+Nt.y1)/2,ge=!(u.traceIs(Nt.trace,"bar-like")||u.traceIs(Nt.trace,"box-violin"));st==="y"?ge?(Vt=te-A,Te=te+A):(Vt=Math.min.apply(null,Wt.map(function(he){return Math.min(he.y0,he.y1)})),Te=Math.max.apply(null,Wt.map(function(he){return Math.max(he.y0,he.y1)}))):Vt=Te=m.mean(Wt.map(function(he){return(he.y0+he.y1)/2}))-Pt/2,st==="x"?ge?(Zt=ee+A,Gt=ee-A):(Zt=Math.max.apply(null,Wt.map(function(he){return Math.max(he.x0,he.x1)})),Gt=Math.min.apply(null,Wt.map(function(he){return Math.min(he.x0,he.x1)}))):Zt=Gt=m.mean(Wt.map(function(he){return(he.x0+he.x1)/2}))-re/2;var pe,me,ce=vt._offset,we=xt._offset;return Gt+=ce-re,Vt+=we-Pt,pe=(Zt+=ce)+re<St&&Zt>=0?Zt:Gt+re<St&&Gt>=0?Gt:ce+re<St?ce:Zt-ee<ee-Gt+re?St-re:0,pe+=A,me=(Te+=we)+Pt<Dt&&Te>=0?Te:Vt+Pt<Dt&&Vt>=0?Vt:we+Pt<Dt?we:Te-te<te-Vt+Pt?Dt-Pt:0,me+=A,Yt.attr("transform",h(pe-1,me-1)),Yt}var ue=pt.selectAll("g.hovertext").data(Y,function(he){return E(he)});return ue.enter().append("g").classed("hovertext",!0).each(function(){var he=T.select(this);he.append("rect").call(i.fill,i.addOpacity(ct,.8)),he.append("text").classed("name",!0),he.append("path").style("stroke-width","1px"),he.append("text").classed("nums",!0).call(a.font,yt,mt)}),ue.exit().remove(),ue.each(function(he){var be=T.select(this).attr("transform",""),Pe=he.color;Array.isArray(Pe)&&(Pe=Pe[he.eventData[0].pointNumber]);var De=he.bgcolor||Pe,Ue=i.combine(i.opacity(De)?De:i.defaultLine,ct),tr=i.combine(i.opacity(Pe)?Pe:i.defaultLine,ct),Ge=he.borderColor||i.contrast(Ue),Ze=P(he,ut,nt,rt,ht,be),We=Ze[0],pr=Ze[1],xr=be.select("text.nums").call(a.font,he.fontFamily||yt,he.fontSize||mt,he.fontColor||Ge).text(We).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,tt),sr=be.select("text.name"),$e=0,ir=0;if(pr&&pr!==We){sr.call(a.font,he.fontFamily||yt,he.fontSize||mt,tr).text(pr).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,tt);var Ke=X(tt,sr.node());$e=Ke.width+2*A,ir=Ke.height+2*A}else sr.remove(),be.select("rect").remove();be.select("path").style({fill:Ue,stroke:Ge});var ar=he.xa._offset+(he.x0+he.x1)/2,fr=he.ya._offset+(he.y0+he.y1)/2,mr=Math.abs(he.x1-he.x0),Cr=Math.abs(he.y1-he.y0),Er=X(tt,xr.node()),_r=Er.width/rt._invScaleX,Sr=Er.height/rt._invScaleY;he.ty0=(_t-Er.top)/rt._invScaleY,he.bx=_r+2*A,he.by=Math.max(Sr+2*A,ir),he.anchor="start",he.txwidth=_r,he.tx2width=$e,he.offset=0;var Xr,en,sn=(_r+g+A+$e)*rt._invScaleX;if(ot)he.pos=ar,Xr=fr+Cr/2+sn<=Dt,en=fr-Cr/2-sn>=0,he.idealAlign!=="top"&&Xr||!en?Xr?(fr+=Cr/2,he.anchor="start"):he.anchor="middle":(fr-=Cr/2,he.anchor="end"),he.crossPos=fr;else{if(he.pos=fr,Xr=ar+mr/2+sn<=St,en=ar-mr/2-sn>=0,he.idealAlign!=="left"&&Xr||!en)if(Xr)ar+=mr/2,he.anchor="start";else{he.anchor="middle";var tn=sn/2,qr=ar+tn-St,vn=ar-tn;qr>0&&(ar-=qr),vn<0&&(ar+=-vn)}else ar-=mr/2,he.anchor="end";he.crossPos=ar}xr.attr("text-anchor",he.anchor),$e&&sr.attr("text-anchor",he.anchor),be.attr("transform",h(ar,fr)+(ot?s(p):""))}),{hoverLabels:ue,commonLabelBoundingBox:$t}}function P(Y,Z,tt,rt,nt,ot){var ct="",pt="";Y.nameOverride!==void 0&&(Y.name=Y.nameOverride),Y.name&&(Y.trace._meta&&(Y.name=m.templateString(Y.name,Y.trace._meta)),ct=G(Y.name,Y.nameLength));var gt=tt.charAt(0),kt=gt==="x"?"y":"x";Y.zLabel!==void 0?(Y.xLabel!==void 0&&(pt+="x: "+Y.xLabel+"<br>"),Y.yLabel!==void 0&&(pt+="y: "+Y.yLabel+"<br>"),Y.trace.type!=="choropleth"&&Y.trace.type!=="choroplethmapbox"&&(pt+=(pt?"z: ":"")+Y.zLabel)):Z&&Y[gt+"Label"]===nt?pt=Y[kt+"Label"]||"":Y.xLabel===void 0?Y.yLabel!==void 0&&Y.trace.type!=="scattercarpet"&&(pt=Y.yLabel):pt=Y.yLabel===void 0?Y.xLabel:"("+Y.xLabel+", "+Y.yLabel+")",!Y.text&&Y.text!==0||Array.isArray(Y.text)||(pt+=(pt?"<br>":"")+Y.text),Y.extraText!==void 0&&(pt+=(pt?"<br>":"")+Y.extraText),ot&&pt===""&&!Y.hovertemplate&&(ct===""&&ot.remove(),pt=ct);var yt=Y.hovertemplate||!1;if(yt){var mt=Y.hovertemplateLabels||Y;Y[gt+"Label"]!==nt&&(mt[gt+"other"]=mt[gt+"Val"],mt[gt+"otherLabel"]=mt[gt+"Label"]),pt=(pt=m.hovertemplateString(yt,mt,rt._d3locale,Y.eventData[0]||{},Y.trace._meta)).replace(S,function(Ot,vt){return ct=G(vt,Y.nameLength),""})}return[pt,ct]}function U(Y,Z){var tt=0,rt=Y.offset;return Z&&(rt*=-_,tt=Y.offset*x),{x:tt,y:rt}}function R(Y,Z,tt,rt){var nt=function(ct){return ct*tt},ot=function(ct){return ct*rt};Y.each(function(ct){var pt=T.select(this);if(ct.del)return pt.remove();var gt,kt,yt,mt,Ot=pt.select("text.nums"),vt=ct.anchor,xt=vt==="end"?-1:1,st=(mt=(yt=(kt={start:1,end:-1,middle:0}[(gt=ct).anchor])*(g+A))+kt*(gt.txwidth+A),gt.anchor==="middle"&&(yt-=gt.tx2width/2,mt+=gt.txwidth/2+A),{alignShift:kt,textShiftX:yt,text2ShiftX:mt}),at=U(ct,Z),ht=at.x,Lt=at.y,Mt=vt==="middle";pt.select("path").attr("d",Mt?"M-"+nt(ct.bx/2+ct.tx2width/2)+","+ot(Lt-ct.by/2)+"h"+nt(ct.bx)+"v"+ot(ct.by)+"h-"+nt(ct.bx)+"Z":"M0,0L"+nt(xt*g+ht)+","+ot(g+Lt)+"v"+ot(ct.by/2-g)+"h"+nt(xt*ct.bx)+"v-"+ot(ct.by)+"H"+nt(xt*g+ht)+"V"+ot(Lt-g)+"Z");var _t=ht+st.textShiftX,St=Lt+ct.ty0-ct.by/2+A,Dt=ct.textAlign||"auto";Dt!=="auto"&&(Dt==="left"&&vt!=="start"?(Ot.attr("text-anchor","start"),_t=Mt?-ct.bx/2-ct.tx2width/2+A:-ct.bx-A):Dt==="right"&&vt!=="end"&&(Ot.attr("text-anchor","end"),_t=Mt?ct.bx/2-ct.tx2width/2-A:ct.bx+A)),Ot.call(t.positionText,nt(_t),ot(St)),ct.tx2width&&(pt.select("text.name").call(t.positionText,nt(st.text2ShiftX+st.alignShift*A+ht),ot(Lt+ct.ty0-ct.by/2+A)),pt.select("rect").call(a.setRect,nt(st.text2ShiftX+(st.alignShift-1)*ct.tx2width/2+ht),ot(Lt-ct.by/2-1),nt(ct.tx2width),ot(ct.by+2)))})}function j(Y,Z){var tt=Y.index,rt=Y.trace||{},nt=Y.cd[0],ot=Y.cd[tt]||{};function ct(Ot){return Ot||k(Ot)&&Ot===0}var pt=Array.isArray(tt)?function(Ot,vt){var xt=m.castOption(nt,tt,Ot);return ct(xt)?xt:m.extractOption({},rt,"",vt)}:function(Ot,vt){return m.extractOption(ot,rt,Ot,vt)};function gt(Ot,vt,xt){var st=pt(vt,xt);ct(st)&&(Y[Ot]=st)}if(gt("hoverinfo","hi","hoverinfo"),gt("bgcolor","hbg","hoverlabel.bgcolor"),gt("borderColor","hbc","hoverlabel.bordercolor"),gt("fontFamily","htf","hoverlabel.font.family"),gt("fontSize","hts","hoverlabel.font.size"),gt("fontColor","htc","hoverlabel.font.color"),gt("nameLength","hnl","hoverlabel.namelength"),gt("textAlign","hta","hoverlabel.align"),Y.posref=Z==="y"||Z==="closest"&&rt.orientation==="h"?Y.xa._offset+(Y.x0+Y.x1)/2:Y.ya._offset+(Y.y0+Y.y1)/2,Y.x0=m.constrain(Y.x0,0,Y.xa._length),Y.x1=m.constrain(Y.x1,0,Y.xa._length),Y.y0=m.constrain(Y.y0,0,Y.ya._length),Y.y1=m.constrain(Y.y1,0,Y.ya._length),Y.xLabelVal!==void 0&&(Y.xLabel="xLabel"in Y?Y.xLabel:l.hoverLabelText(Y.xa,Y.xLabelVal,rt.xhoverformat),Y.xVal=Y.xa.c2d(Y.xLabelVal)),Y.yLabelVal!==void 0&&(Y.yLabel="yLabel"in Y?Y.yLabel:l.hoverLabelText(Y.ya,Y.yLabelVal,rt.yhoverformat),Y.yVal=Y.ya.c2d(Y.yLabelVal)),Y.zLabelVal!==void 0&&Y.zLabel===void 0&&(Y.zLabel=String(Y.zLabelVal)),!(isNaN(Y.xerr)||Y.xa.type==="log"&&Y.xerr<=0)){var kt=l.tickText(Y.xa,Y.xa.c2l(Y.xerr),"hover").text;Y.xerrneg!==void 0?Y.xLabel+=" +"+kt+" / -"+l.tickText(Y.xa,Y.xa.c2l(Y.xerrneg),"hover").text:Y.xLabel+=" \xB1 "+kt,Z==="x"&&(Y.distance+=1)}if(!(isNaN(Y.yerr)||Y.ya.type==="log"&&Y.yerr<=0)){var yt=l.tickText(Y.ya,Y.ya.c2l(Y.yerr),"hover").text;Y.yerrneg!==void 0?Y.yLabel+=" +"+yt+" / -"+l.tickText(Y.ya,Y.ya.c2l(Y.yerrneg),"hover").text:Y.yLabel+=" \xB1 "+yt,Z==="y"&&(Y.distance+=1)}var mt=Y.hoverinfo||Y.trace.hoverinfo;return mt&&mt!=="all"&&((mt=Array.isArray(mt)?mt:mt.split("+")).indexOf("x")===-1&&(Y.xLabel=void 0),mt.indexOf("y")===-1&&(Y.yLabel=void 0),mt.indexOf("z")===-1&&(Y.zLabel=void 0),mt.indexOf("text")===-1&&(Y.text=void 0),mt.indexOf("name")===-1&&(Y.name=void 0)),Y}function B(Y,Z,tt){var rt,nt,ot=tt.container,ct=tt.fullLayout,pt=ct._size,gt=tt.event,kt=!!Z.hLinePoint,yt=!!Z.vLinePoint;if(ot.selectAll(".spikeline").remove(),yt||kt){var mt=i.combine(ct.plot_bgcolor,ct.paper_bgcolor);if(kt){var Ot,vt,xt=Z.hLinePoint;rt=xt&&xt.xa,(nt=xt&&xt.ya).spikesnap==="cursor"?(Ot=gt.pointerX,vt=gt.pointerY):(Ot=rt._offset+xt.x,vt=nt._offset+xt.y);var st,at,ht=r.readability(xt.color,mt)<1.5?i.contrast(mt):xt.color,Lt=nt.spikemode,Mt=nt.spikethickness,_t=nt.spikecolor||ht,St=l.getPxPosition(Y,nt);if(Lt.indexOf("toaxis")!==-1||Lt.indexOf("across")!==-1){if(Lt.indexOf("toaxis")!==-1&&(st=St,at=Ot),Lt.indexOf("across")!==-1){var Dt=nt._counterDomainMin,ut=nt._counterDomainMax;nt.anchor==="free"&&(Dt=Math.min(Dt,nt.position),ut=Math.max(ut,nt.position)),st=pt.l+Dt*pt.w,at=pt.l+ut*pt.w}ot.insert("line",":first-child").attr({x1:st,x2:at,y1:vt,y2:vt,"stroke-width":Mt,stroke:_t,"stroke-dasharray":a.dashStyle(nt.spikedash,Mt)}).classed("spikeline",!0).classed("crisp",!0),ot.insert("line",":first-child").attr({x1:st,x2:at,y1:vt,y2:vt,"stroke-width":Mt+2,stroke:mt}).classed("spikeline",!0).classed("crisp",!0)}Lt.indexOf("marker")!==-1&&ot.insert("circle",":first-child").attr({cx:St+(nt.side!=="right"?Mt:-Mt),cy:vt,r:Mt,fill:_t}).classed("spikeline",!0)}if(yt){var Tt,bt,It=Z.vLinePoint;rt=It&&It.xa,nt=It&&It.ya,rt.spikesnap==="cursor"?(Tt=gt.pointerX,bt=gt.pointerY):(Tt=rt._offset+It.x,bt=nt._offset+It.y);var zt,Ft,$t=r.readability(It.color,mt)<1.5?i.contrast(mt):It.color,Wt=rt.spikemode,Xt=rt.spikethickness,ae=rt.spikecolor||$t,Qt=l.getPxPosition(Y,rt);if(Wt.indexOf("toaxis")!==-1||Wt.indexOf("across")!==-1){if(Wt.indexOf("toaxis")!==-1&&(zt=Qt,Ft=bt),Wt.indexOf("across")!==-1){var de=rt._counterDomainMin,ye=rt._counterDomainMax;rt.anchor==="free"&&(de=Math.min(de,rt.position),ye=Math.max(ye,rt.position)),zt=pt.t+(1-ye)*pt.h,Ft=pt.t+(1-de)*pt.h}ot.insert("line",":first-child").attr({x1:Tt,x2:Tt,y1:zt,y2:Ft,"stroke-width":Xt,stroke:ae,"stroke-dasharray":a.dashStyle(rt.spikedash,Xt)}).classed("spikeline",!0).classed("crisp",!0),ot.insert("line",":first-child").attr({x1:Tt,x2:Tt,y1:zt,y2:Ft,"stroke-width":Xt+2,stroke:mt}).classed("spikeline",!0).classed("crisp",!0)}Wt.indexOf("marker")!==-1&&ot.insert("circle",":first-child").attr({cx:Tt,cy:Qt-(rt.side!=="top"?Xt:-Xt),r:Xt,fill:ae}).classed("spikeline",!0)}}}function z(Y,Z){return!Z||Z.vLinePoint!==Y._spikepoints.vLinePoint||Z.hLinePoint!==Y._spikepoints.hLinePoint}function G(Y,Z){return t.plainText(Y||"",{len:Z,allowedTags:["br","sub","sup","b","i","em"]})}function V(Y,Z,tt){var rt=Z[Y+"a"],nt=Z[Y+"Val"],ot=Z.cd[0];if(rt.type==="category"||rt.type==="multicategory")nt=rt._categoriesMap[nt];else if(rt.type==="date"){var ct=Z.trace[Y+"periodalignment"];if(ct){var pt=Z.cd[Z.index],gt=pt[Y+"Start"];gt===void 0&&(gt=pt[Y]);var kt=pt[Y+"End"];kt===void 0&&(kt=pt[Y]);var yt=kt-gt;ct==="end"?nt+=yt:ct==="middle"&&(nt+=yt/2)}nt=rt.d2c(nt)}return ot&&ot.t&&ot.t.posLetter===rt._id&&(tt.boxmode!=="group"&&tt.violinmode!=="group"||(nt+=ot.t.dPos)),nt}function et(Y){return Y.offsetTop+Y.clientTop}function J(Y){return Y.offsetLeft+Y.clientLeft}function X(Y,Z){var tt=Y._fullLayout,rt=Z.getBoundingClientRect(),nt=rt.left,ot=rt.top,ct=nt+rt.width,pt=ot+rt.height,gt=m.apply3DTransform(tt._invTransform)(nt,ot),kt=m.apply3DTransform(tt._invTransform)(ct,pt),yt=gt[0],mt=gt[1],Ot=kt[0],vt=kt[1];return{x:yt,y:mt,width:Ot-yt,height:vt-mt,top:Math.min(mt,vt),left:Math.min(yt,Ot),right:Math.max(yt,Ot),bottom:Math.max(mt,vt)}}},38048:function(W,I,o){var T=o(71828),k=o(7901),r=o(23469).isUnifiedHover;W.exports=function(m,h,s,e){e=e||{};var t=h.legend;function n(a){e.font[a]||(e.font[a]=t?h.legend.font[a]:h.font[a])}h&&r(h.hovermode)&&(e.font||(e.font={}),n("size"),n("family"),n("color"),t?(e.bgcolor||(e.bgcolor=k.combine(h.legend.bgcolor,h.paper_bgcolor)),e.bordercolor||(e.bordercolor=h.legend.bordercolor)):e.bgcolor||(e.bgcolor=h.paper_bgcolor)),s("hoverlabel.bgcolor",e.bgcolor),s("hoverlabel.bordercolor",e.bordercolor),s("hoverlabel.namelength",e.namelength),T.coerceFont(s,"hoverlabel.font",e.font),s("hoverlabel.align",e.align)}},98212:function(W,I,o){var T=o(71828),k=o(528);W.exports=function(r,m){function h(s,e){return m[s]!==void 0?m[s]:T.coerce(r,m,k,s,e)}return h("clickmode"),h("hovermode")}},30211:function(W,I,o){var T=o(39898),k=o(71828),r=o(28569),m=o(23469),h=o(528),s=o(88335);W.exports={moduleType:"component",name:"fx",constants:o(26675),schema:{layout:h},attributes:o(77914),layoutAttributes:h,supplyLayoutGlobalDefaults:o(22774),supplyDefaults:o(54268),supplyLayoutDefaults:o(34938),calc:o(30732),getDistanceFunction:m.getDistanceFunction,getClosest:m.getClosest,inbox:m.inbox,quadrature:m.quadrature,appendArrayPointValue:m.appendArrayPointValue,castHoverOption:function(e,t,n){return k.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(e,t,n){return k.castOption(e,n,"hoverinfo",function(a){return k.coerceHoverinfo({hoverinfo:a},{_module:e._module},t)})},hover:s.hover,unhover:r.unhover,loneHover:s.loneHover,loneUnhover:function(e){var t=k.isD3Selection(e)?e:T.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:o(75914)}},528:function(W,I,o){var T=o(26675),k=o(41940),r=k({editType:"none"});r.family.dflt=T.HOVERFONT,r.size.dflt=T.HOVERFONTSIZE,W.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:r,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(W,I,o){var T=o(71828),k=o(528),r=o(98212),m=o(38048);W.exports=function(h,s){function e(i,c){return T.coerce(h,s,k,i,c)}r(h,s)&&(e("hoverdistance"),e("spikedistance")),e("dragmode")==="select"&&e("selectdirection");var t=s._has("mapbox"),n=s._has("geo"),a=s._basePlotModules.length;s.dragmode==="zoom"&&((t||n)&&a===1||t&&n&&a===2)&&(s.dragmode="pan"),m(h,s,e),T.coerceFont(e,"hoverlabel.grouptitlefont",s.hoverlabel.font)}},22774:function(W,I,o){var T=o(71828),k=o(38048),r=o(528);W.exports=function(m,h){k(m,h,function(s,e){return T.coerce(m,h,r,s,e)})}},83312:function(W,I,o){var T=o(71828),k=o(30587).counter,r=o(27670).Y,m=o(85555).idRegex,h=o(44467),s={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[m.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[m.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:r({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function e(a,i,c){var l=i[c+"axes"],u=Object.keys((a._splomAxes||{})[c]||{});return Array.isArray(l)?l:u.length?u:void 0}function t(a,i,c,l,u,f){var d=i(a+"gap",c),w=i("domain."+a);i(a+"side",l);for(var v=new Array(u),p=w[0],y=(w[1]-p)/(u-d),b=y*(1-d),x=0;x<u;x++){var _=p+y*x;v[f?u-1-x:x]=[_,_+b]}return v}function n(a,i,c,l,u){var f,d=new Array(c);function w(v,p){i.indexOf(p)!==-1&&l[p]===void 0?(d[v]=p,l[p]=v):d[v]=""}if(Array.isArray(a))for(f=0;f<c;f++)w(f,a[f]);else for(w(0,u),f=1;f<c;f++)w(f,u+(f+1));return d}W.exports={moduleType:"component",name:"grid",schema:{layout:{grid:s}},layoutAttributes:s,sizeDefaults:function(a,i){var c=a.grid||{},l=e(i,c,"x"),u=e(i,c,"y");if(a.grid||l||u){var f,d,w=Array.isArray(c.subplots)&&Array.isArray(c.subplots[0]),v=Array.isArray(l),p=Array.isArray(u),y=v&&l!==c.xaxes&&p&&u!==c.yaxes;w?(f=c.subplots.length,d=c.subplots[0].length):(p&&(f=u.length),v&&(d=l.length));var b=h.newContainer(i,"grid"),x=S("rows",f),_=S("columns",d);if(x*_>1){w||v||p||S("pattern")==="independent"&&(w=!0),b._hasSubplotGrid=w;var g,A,M=S("roworder")==="top to bottom",L=w?.2:.1,E=w?.3:.1;y&&i._splomGridDflt&&(g=i._splomGridDflt.xside,A=i._splomGridDflt.yside),b._domains={x:t("x",S,L,g,_),y:t("y",S,E,A,x,M)}}else delete i.grid}function S(O,P){return T.coerce(c,b,s,O,P)}},contentDefaults:function(a,i){var c=i.grid;if(c&&c._domains){var l,u,f,d,w,v,p,y=a.grid||{},b=i._subplots,x=c._hasSubplotGrid,_=c.rows,g=c.columns,A=c.pattern==="independent",M=c._axisMap={};if(x){var L=y.subplots||[];v=c.subplots=new Array(_);var E=1;for(l=0;l<_;l++){var S=v[l]=new Array(g),O=L[l]||[];for(u=0;u<g;u++)if(A?(w=E===1?"xy":"x"+E+"y"+E,E++):w=O[u],S[u]="",b.cartesian.indexOf(w)!==-1){if(p=w.indexOf("y"),f=w.slice(0,p),d=w.slice(p),M[f]!==void 0&&M[f]!==u||M[d]!==void 0&&M[d]!==l)continue;S[u]=w,M[f]=u,M[d]=l}}}else{var P=e(i,y,"x"),U=e(i,y,"y");c.xaxes=n(P,b.xaxis,g,M,"x"),c.yaxes=n(U,b.yaxis,_,M,"y")}var R=c._anchors={},j=c.roworder==="top to bottom";for(var B in M){var z,G,V,et=B.charAt(0),J=c[et+"side"];if(J.length<8)R[B]="free";else if(et==="x"){if(J.charAt(0)==="t"===j?(z=0,G=1,V=_):(z=_-1,G=-1,V=-1),x){var X=M[B];for(l=z;l!==V;l+=G)if((w=v[l][X])&&(p=w.indexOf("y"),w.slice(0,p)===B)){R[B]=w.slice(p);break}}else for(l=z;l!==V;l+=G)if(d=c.yaxes[l],b.cartesian.indexOf(B+d)!==-1){R[B]=d;break}}else if(J.charAt(0)==="l"?(z=0,G=1,V=g):(z=g-1,G=-1,V=-1),x){var Y=M[B];for(l=z;l!==V;l+=G)if((w=v[Y][l])&&(p=w.indexOf("y"),w.slice(p)===B)){R[B]=w.slice(0,p);break}}else for(l=z;l!==V;l+=G)if(f=c.xaxes[l],b.cartesian.indexOf(f+B)!==-1){R[B]=f;break}}}}}},69819:function(W,I,o){var T=o(85555),k=o(44467).templatedArray;o(24695),W.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",T.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",T.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(W,I,o){var T=o(92770),k=o(58163);W.exports=function(r,m,h,s){m=m||{};var e=h==="log"&&m.type==="linear",t=h==="linear"&&m.type==="log";if(e||t){for(var n,a,i=r._fullLayout.images,c=m._id.charAt(0),l=0;l<i.length;l++)if(a="images["+l+"].",(n=i[l])[c+"ref"]===m._id){var u=n[c],f=n["size"+c],d=null,w=null;if(e){d=k(u,m.range);var v=f/Math.pow(10,d)/2;w=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else w=(d=Math.pow(10,u))*(Math.pow(10,f/2)-Math.pow(10,-f/2));T(d)?T(w)||(w=null):(d=null,w=null),s(a+c,d),s(a+"size"+c,w)}}}},81603:function(W,I,o){var T=o(71828),k=o(89298),r=o(85501),m=o(69819);function h(s,e,t){function n(d,w){return T.coerce(s,e,m,d,w)}var a=n("source");if(!n("visible",!!a))return e;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var i={_fullLayout:t},c=["x","y"],l=0;l<2;l++){var u=c[l],f=k.coerceRef(s,e,i,u,"paper",void 0);f!=="paper"&&k.getFromId(i,f)._imgIndices.push(e._index),k.coercePosition(e,i,n,f,u,0)}return e}W.exports=function(s,e){r(s,e,{name:"images",handleItemDefaults:h})}},80750:function(W,I,o){var T=o(39898),k=o(91424),r=o(89298),m=o(41675),h=o(77922);W.exports=function(s){var e,t,n=s._fullLayout,a=[],i={},c=[];for(t=0;t<n.images.length;t++){var l=n.images[t];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){e=m.ref2id(l.xref)+m.ref2id(l.yref);var u=n._plots[e];if(!u){c.push(l);continue}u.mainplot&&(e=u.mainplot.id),i[e]||(i[e]=[]),i[e].push(l)}else l.layer==="above"?a.push(l):c.push(l)}var f={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},d={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function w(g){var A=T.select(this);if(this._imgSrc!==g.source)if(A.attr("xmlns",h.svg),g.source&&g.source.slice(0,5)==="data:")A.attr("xlink:href",g.source),this._imgSrc=g.source;else{var M=new Promise(function(L){var E=new Image;function S(){A.remove(),L()}this.img=E,E.setAttribute("crossOrigin","anonymous"),E.onerror=S,E.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height,O.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var P=O.toDataURL("image/png");A.attr("xlink:href",P),L()},A.on("error",S),E.src=g.source,this._imgSrc=g.source}.bind(this));s._promises.push(M)}}function v(g){var A,M,L=T.select(this),E=r.getFromId(s,g.xref),S=r.getFromId(s,g.yref),O=r.getRefType(g.xref)==="domain",P=r.getRefType(g.yref)==="domain",U=n._size;A=E!==void 0?typeof g.xref=="string"&&O?E._length*g.sizex:Math.abs(E.l2p(g.sizex)-E.l2p(0)):g.sizex*U.w,M=S!==void 0?typeof g.yref=="string"&&P?S._length*g.sizey:Math.abs(S.l2p(g.sizey)-S.l2p(0)):g.sizey*U.h;var R,j,B=A*f[g.xanchor].offset,z=M*d[g.yanchor].offset,G=f[g.xanchor].sizing+d[g.yanchor].sizing;switch(R=E!==void 0?typeof g.xref=="string"&&O?E._length*g.x+E._offset:E.r2p(g.x)+E._offset:g.x*U.w+U.l,R+=B,j=S!==void 0?typeof g.yref=="string"&&P?S._length*(1-g.y)+S._offset:S.r2p(g.y)+S._offset:U.h-g.y*U.h+U.t,j+=z,g.sizing){case"fill":G+=" slice";break;case"stretch":G="none"}L.attr({x:R,y:j,width:A,height:M,preserveAspectRatio:G,opacity:g.opacity});var V=(E&&r.getRefType(g.xref)!=="domain"?E._id:"")+(S&&r.getRefType(g.yref)!=="domain"?S._id:"");k.setClipUrl(L,V?"clip"+n._uid+V:null,s)}var p=n._imageLowerLayer.selectAll("image").data(c),y=n._imageUpperLayer.selectAll("image").data(a);p.enter().append("image"),y.enter().append("image"),p.exit().remove(),y.exit().remove(),p.each(function(g){w.bind(this)(g),v.bind(this)(g)}),y.each(function(g){w.bind(this)(g),v.bind(this)(g)});var b=Object.keys(n._plots);for(t=0;t<b.length;t++){e=b[t];var x=n._plots[e];if(x.imagelayer){var _=x.imagelayer.selectAll("image").data(i[e]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(g){w.bind(this)(g),v.bind(this)(g)})}}}},68804:function(W,I,o){W.exports={moduleType:"component",name:"images",layoutAttributes:o(69819),supplyLayoutDefaults:o(81603),includeBasePlot:o(76325)("images"),draw:o(80750),convertCoords:o(75378)}},33030:function(W,I,o){var T=o(41940),k=o(22399);W.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:T({editType:"legend"}),grouptitlefont:T({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:T({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(W){W.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(W,I,o){var T=o(73972),k=o(71828),r=o(44467),m=o(9012),h=o(33030),s=o(10820),e=o(10130);function t(n,a,i,c){var l=a[n]||{},u=r.newContainer(i,n);function f(G,V){return k.coerce(l,u,h,G,V)}var d=k.coerceFont(f,"font",i.font);if(f("bgcolor",i.paper_bgcolor),f("bordercolor"),f("visible")){for(var w,v=function(G,V){var et=w._input,J=w;return k.coerce(et,J,m,G,V)},p=i.font||{},y=k.coerceFont(f,"grouptitlefont",k.extendFlat({},p,{size:Math.round(1.1*p.size)})),b=0,x=!1,_="normal",g=(i.shapes||[]).filter(function(G){return G.showlegend}),A=c.concat(g).filter(function(G){return n===(G.legend||"legend")}),M=0;M<A.length;M++)if((w=A[M]).visible){var L=w._isShape;(w.showlegend||w._dfltShowLegend&&!(w._module&&w._module.attributes&&w._module.attributes.showlegend&&w._module.attributes.showlegend.dflt===!1))&&(b++,w.showlegend&&(x=!0,(!L&&T.traceIs(w,"pie-like")||w._input.showlegend===!0)&&b++),k.coerceFont(v,"legendgrouptitle.font",y)),(!L&&T.traceIs(w,"bar")&&i.barmode==="stack"||["tonextx","tonexty"].indexOf(w.fill)!==-1)&&(_=e.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),w.legendgroup!==void 0&&w.legendgroup!==""&&(_=e.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var E=k.coerce(a,i,s,"showlegend",x&&b>(n==="legend"?1:0));if(E===!1&&(i[n]=void 0),(E!==!1||l.uirevision)&&(f("uirevision",i.uirevision),E!==!1)){f("borderwidth");var S,O,P,U=f("orientation")==="h",R=f("yref")==="paper",j=f("xref")==="paper",B="left";if(U?(S=0,T.getComponentMethod("rangeslider","isVisible")(a.xaxis)?R?(O=1.1,P="bottom"):(O=1,P="top"):R?(O=-.1,P="top"):(O=0,P="bottom")):(O=1,P="auto",j?S=1.02:(S=1,B="right")),k.coerce(l,u,{x:{valType:"number",editType:"legend",min:j?-2:0,max:j?3:1,dflt:S}},"x"),k.coerce(l,u,{y:{valType:"number",editType:"legend",min:R?-2:0,max:R?3:1,dflt:O}},"y"),f("traceorder",_),e.isGrouped(i[n])&&f("tracegroupgap"),f("entrywidth"),f("entrywidthmode"),f("itemsizing"),f("itemwidth"),f("itemclick"),f("itemdoubleclick"),f("groupclick"),f("xanchor",B),f("yanchor",P),f("valign"),k.noneOrAll(l,u,["x","y"]),f("title.text")){f("title.side",U?"left":"top");var z=k.extendFlat({},d,{size:k.bigFont(d.size)});k.coerceFont(f,"title.font",z)}}}}W.exports=function(n,a,i){var c,l=i.slice(),u=a.shapes;if(u)for(c=0;c<u.length;c++){var f=u[c];if(f.showlegend){var d={_input:f._input,visible:f.visible,showlegend:f.showlegend,legend:f.legend};l.push(d)}}var w=["legend"];for(c=0;c<l.length;c++)k.pushUnique(w,l[c].legend);for(a._legends=[],c=0;c<w.length;c++){var v=w[c];t(v,n,a,l),a[v]&&a[v].visible&&(a[v]._id=v),a._legends.push(v)}}},43969:function(W,I,o){var T=o(39898),k=o(71828),r=o(74875),m=o(73972),h=o(11086),s=o(28569),e=o(91424),t=o(7901),n=o(63893),a=o(85167),i=o(14928),c=o(18783),l=c.LINE_SPACING,u=c.FROM_TL,f=c.FROM_BR,d=o(82424),w=o(53630),v=o(10130),p=1,y=/^legend[0-9]*$/;function b(P,U){var R,j,B=U||{},z=P._fullLayout,G=O(B),V=B._inHover;if(V?(j=B.layer,R="hover"):(j=z._infolayer,R=G),j){var et;if(R+=z._uid,P._legendMouseDownTime||(P._legendMouseDownTime=0),V){if(!B.entries)return;et=d(B.entries,B)}else{for(var J=(P.calcdata||[]).slice(),X=z.shapes,Y=0;Y<X.length;Y++){var Z=X[Y];if(Z.showlegend){var tt={_isShape:!0,_fullInput:Z,index:Z._index,name:Z.name||Z.label.text||"shape "+Z._index,legend:Z.legend,legendgroup:Z.legendgroup,legendgrouptitle:Z.legendgrouptitle,legendrank:Z.legendrank,legendwidth:Z.legendwidth,showlegend:Z.showlegend,visible:Z.visible,opacity:Z.opacity,mode:Z.type==="line"?"lines":"markers",line:Z.line,marker:{line:Z.line,color:Z.fillcolor,size:12,symbol:Z.type==="rect"?"square":Z.type==="circle"?"circle":"hexagon2"}};J.push([{trace:tt}])}}et=z.showlegend&&d(J,B,z._legends.length>1)}var rt=z.hiddenlabels||[];if(!(V||z.showlegend&&et.length))return j.selectAll("."+G).remove(),z._topdefs.select("#"+R).remove(),r.autoMargin(P,G);var nt=k.ensureSingle(j,"g",G,function(vt){V||vt.attr("pointer-events","all")}),ot=k.ensureSingleById(z._topdefs,"clipPath",R,function(vt){vt.append("rect")}),ct=k.ensureSingle(nt,"rect","bg",function(vt){vt.attr("shape-rendering","crispEdges")});ct.call(t.stroke,B.bordercolor).call(t.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px");var pt,gt=k.ensureSingle(nt,"g","scrollbox"),kt=B.title;B._titleWidth=0,B._titleHeight=0,kt.text?((pt=k.ensureSingle(gt,"text",G+"titletext")).attr("text-anchor","start").call(e.font,kt.font).text(kt.text),L(pt,gt,P,B,p)):gt.selectAll("."+G+"titletext").remove();var yt=k.ensureSingle(nt,"rect","scrollbar",function(vt){vt.attr(i.scrollBarEnterAttrs).call(t.fill,i.scrollBarColor)}),mt=gt.selectAll("g.groups").data(et);mt.enter().append("g").attr("class","groups"),mt.exit().remove();var Ot=mt.selectAll("g.traces").data(k.identity);Ot.enter().append("g").attr("class","traces"),Ot.exit().remove(),Ot.style("opacity",function(vt){var xt=vt[0].trace;return m.traceIs(xt,"pie-like")?rt.indexOf(vt[0].label)!==-1?.5:1:xt.visible==="legendonly"?.5:1}).each(function(){T.select(this).call(g,P,B)}).call(w,P,B).each(function(){V||T.select(this).call(M,P,G)}),k.syncOrAsync([r.previousPromises,function(){return function(vt,xt,st,at){var ht=vt._fullLayout,Lt=O(at);at||(at=ht[Lt]);var Mt=ht._size,_t=v.isVertical(at),St=v.isGrouped(at),Dt=at.entrywidthmode==="fraction",ut=at.borderwidth,Tt=2*ut,bt=i.itemGap,It=at.itemwidth+2*bt,zt=2*(ut+bt),Ft=S(at),$t=at.y<0||at.y===0&&Ft==="top",Wt=at.y>1||at.y===1&&Ft==="bottom",Xt=at.tracegroupgap,ae={};at._maxHeight=Math.max($t||Wt?ht.height/2:Mt.h,30);var Qt=0;at._width=0,at._height=0;var de=function(pe){var me=0,ce=0,we=pe.title.side;return we&&(we.indexOf("left")!==-1&&(me=pe._titleWidth),we.indexOf("top")!==-1&&(ce=pe._titleHeight)),[me,ce]}(at);if(_t)st.each(function(pe){var me=pe[0].height;e.setTranslate(this,ut+de[0],ut+de[1]+at._height+me/2+bt),at._height+=me,at._width=Math.max(at._width,pe[0].width)}),Qt=It+at._width,at._width+=bt+It+Tt,at._height+=zt,St&&(xt.each(function(pe,me){e.setTranslate(this,0,me*at.tracegroupgap)}),at._height+=(at._lgroupsLength-1)*at.tracegroupgap);else{var ye=E(at),ve=at.x<0||at.x===0&&ye==="right",ie=at.x>1||at.x===1&&ye==="left",se=Wt||$t,ke=ht.width/2;at._maxWidth=Math.max(ve?se&&ye==="left"?Mt.l+Mt.w:ke:ie?se&&ye==="right"?Mt.r+Mt.w:ke:Mt.w,2*It);var Ae=0,Ie=0;st.each(function(pe){var me=x(pe,at,It);Ae=Math.max(Ae,me),Ie+=me}),Qt=null;var Te=0;if(St){var Vt=0,Zt=0,Gt=0;xt.each(function(){var pe=0,me=0;T.select(this).selectAll("g.traces").each(function(we){var ue=x(we,at,It),he=we[0].height;e.setTranslate(this,de[0],de[1]+ut+bt+he/2+me),me+=he,pe=Math.max(pe,ue),ae[we[0].trace.legendgroup]=pe});var ce=pe+bt;Zt>0&&ce+ut+Zt>at._maxWidth?(Te=Math.max(Te,Zt),Zt=0,Gt+=Vt+Xt,Vt=me):Vt=Math.max(Vt,me),e.setTranslate(this,Zt,Gt),Zt+=ce}),at._width=Math.max(Te,Zt)+ut,at._height=Gt+Vt+zt}else{var Yt=st.size(),ne=Ie+Tt+(Yt-1)*bt<at._maxWidth,re=0,Pt=0,Nt=0,ee=0;st.each(function(pe){var me=pe[0].height,ce=x(pe,at,It),we=ne?ce:Ae;Dt||(we+=bt),we+ut+Pt-bt>=at._maxWidth&&(Te=Math.max(Te,ee),Pt=0,Nt+=re,at._height+=re,re=0),e.setTranslate(this,de[0]+ut+Pt,de[1]+ut+Nt+me/2+bt),ee=Pt+ce+bt,Pt+=we,re=Math.max(re,me)}),ne?(at._width=Pt+Tt,at._height=re+zt):(at._width=Math.max(Te,ee)+Tt,at._height+=re+zt)}}at._width=Math.ceil(Math.max(at._width+de[0],at._titleWidth+2*(ut+i.titlePad))),at._height=Math.ceil(Math.max(at._height+de[1],at._titleHeight+2*(ut+i.itemGap))),at._effHeight=Math.min(at._height,at._maxHeight);var te=vt._context.edits,ge=te.legendText||te.legendPosition;st.each(function(pe){var me=T.select(this).select("."+Lt+"toggle"),ce=pe[0].height,we=pe[0].trace.legendgroup,ue=x(pe,at,It);St&&we!==""&&(ue=ae[we]);var he=ge?It:Qt||ue;_t||Dt||(he+=bt/2),e.setRect(me,0,-ce/2,he,ce)})}(P,mt,Ot,B)},function(){var vt,xt,st,at,ht=z._size,Lt=B.borderwidth,Mt=B.xref==="paper",_t=B.yref==="paper";if(kt.text&&function(se,ke,Ae){if(ke.title.side==="top center"||ke.title.side==="top right"){var Ie=ke.title.font.size*l,Te=0,Vt=se.node(),Zt=e.bBox(Vt).width;ke.title.side==="top center"?Te=.5*(ke._width-2*Ae-2*i.titlePad-Zt):ke.title.side==="top right"&&(Te=ke._width-2*Ae-2*i.titlePad-Zt),n.positionText(se,Ae+i.titlePad+Te,Ae+Ie)}}(pt,B,Lt),!V){var St,Dt;St=Mt?ht.l+ht.w*B.x-u[E(B)]*B._width:z.width*B.x-u[E(B)]*B._width,Dt=_t?ht.t+ht.h*(1-B.y)-u[S(B)]*B._effHeight:z.height*(1-B.y)-u[S(B)]*B._effHeight;var ut=function(se,ke,Ae,Ie){var Te=se._fullLayout,Vt=Te[ke],Zt=E(Vt),Gt=S(Vt),Yt=Vt.xref==="paper",ne=Vt.yref==="paper";se._fullLayout._reservedMargin[ke]={};var re=Vt.y<.5?"b":"t",Pt=Vt.x<.5?"l":"r",Nt={r:Te.width-Ae,l:Ae+Vt._width,b:Te.height-Ie,t:Ie+Vt._effHeight};if(Yt&&ne)return r.autoMargin(se,ke,{x:Vt.x,y:Vt.y,l:Vt._width*u[Zt],r:Vt._width*f[Zt],b:Vt._effHeight*f[Gt],t:Vt._effHeight*u[Gt]});Yt?se._fullLayout._reservedMargin[ke][re]=Nt[re]:ne||Vt.orientation==="v"?se._fullLayout._reservedMargin[ke][Pt]=Nt[Pt]:se._fullLayout._reservedMargin[ke][re]=Nt[re]}(P,G,St,Dt);if(ut)return;if(z.margin.autoexpand){var Tt=St,bt=Dt;St=Mt?k.constrain(St,0,z.width-B._width):Tt,Dt=_t?k.constrain(Dt,0,z.height-B._effHeight):bt,St!==Tt&&k.log("Constrain "+G+".x to make legend fit inside graph"),Dt!==bt&&k.log("Constrain "+G+".y to make legend fit inside graph")}e.setTranslate(nt,St,Dt)}if(yt.on(".drag",null),nt.on("wheel",null),V||B._height<=B._maxHeight||P._context.staticPlot){var It=B._effHeight;V&&(It=B._height),ct.attr({width:B._width-Lt,height:It-Lt,x:Lt/2,y:Lt/2}),e.setTranslate(gt,0,0),ot.select("rect").attr({width:B._width-2*Lt,height:It-2*Lt,x:Lt,y:Lt}),e.setClipUrl(gt,R,P),e.setRect(yt,0,0,0,0),delete B._scrollY}else{var zt,Ft,$t,Wt=Math.max(i.scrollBarMinHeight,B._effHeight*B._effHeight/B._height),Xt=B._effHeight-Wt-2*i.scrollBarMargin,ae=B._height-B._effHeight,Qt=Xt/ae,de=Math.min(B._scrollY||0,ae);ct.attr({width:B._width-2*Lt+i.scrollBarWidth+i.scrollBarMargin,height:B._effHeight-Lt,x:Lt/2,y:Lt/2}),ot.select("rect").attr({width:B._width-2*Lt+i.scrollBarWidth+i.scrollBarMargin,height:B._effHeight-2*Lt,x:Lt,y:Lt+de}),e.setClipUrl(gt,R,P),ie(de,Wt,Qt),nt.on("wheel",function(){ie(de=k.constrain(B._scrollY+T.event.deltaY/Xt*ae,0,ae),Wt,Qt),de!==0&&de!==ae&&T.event.preventDefault()});var ye=T.behavior.drag().on("dragstart",function(){var se=T.event.sourceEvent;zt=se.type==="touchstart"?se.changedTouches[0].clientY:se.clientY,$t=de}).on("drag",function(){var se=T.event.sourceEvent;se.buttons===2||se.ctrlKey||(Ft=se.type==="touchmove"?se.changedTouches[0].clientY:se.clientY,de=function(ke,Ae,Ie){var Te=(Ie-Ae)/Qt+ke;return k.constrain(Te,0,ae)}($t,zt,Ft),ie(de,Wt,Qt))});yt.call(ye);var ve=T.behavior.drag().on("dragstart",function(){var se=T.event.sourceEvent;se.type==="touchstart"&&(zt=se.changedTouches[0].clientY,$t=de)}).on("drag",function(){var se=T.event.sourceEvent;se.type==="touchmove"&&(Ft=se.changedTouches[0].clientY,de=function(ke,Ae,Ie){var Te=(Ae-Ie)/Qt+ke;return k.constrain(Te,0,ae)}($t,zt,Ft),ie(de,Wt,Qt))});gt.call(ve)}function ie(se,ke,Ae){B._scrollY=P._fullLayout[G]._scrollY=se,e.setTranslate(gt,0,-se),e.setRect(yt,B._width,i.scrollBarMargin+se*Ae,i.scrollBarWidth,ke),ot.select("rect").attr("y",Lt+se)}P._context.edits.legendPosition&&(nt.classed("cursor-move",!0),s.init({element:nt.node(),gd:P,prepFn:function(){var se=e.getTranslate(nt);st=se.x,at=se.y},moveFn:function(se,ke){var Ae=st+se,Ie=at+ke;e.setTranslate(nt,Ae,Ie),vt=s.align(Ae,B._width,ht.l,ht.l+ht.w,B.xanchor),xt=s.align(Ie+B._height,-B._height,ht.t+ht.h,ht.t,B.yanchor)},doneFn:function(){if(vt!==void 0&&xt!==void 0){var se={};se[G+".x"]=vt,se[G+".y"]=xt,m.call("_guiRelayout",P,se)}},clickFn:function(se,ke){var Ae=j.selectAll("g.traces").filter(function(){var Ie=this.getBoundingClientRect();return ke.clientX>=Ie.left&&ke.clientX<=Ie.right&&ke.clientY>=Ie.top&&ke.clientY<=Ie.bottom});Ae.size()>0&&_(P,nt,Ae,se,ke)}}))}],P)}}function x(P,U,R){var j=P[0],B=j.width,z=U.entrywidthmode,G=j.trace.legendwidth||U.entrywidth;return z==="fraction"?U._maxWidth*G:R+(G||B)}function _(P,U,R,j,B){var z=R.data()[0][0].trace,G={event:B,node:R.node(),curveNumber:z.index,expandedIndex:z._expandedIndex,data:P.data,layout:P.layout,frames:P._transitionData._frames,config:P._context,fullData:P._fullData,fullLayout:P._fullLayout};z._group&&(G.group=z._group),m.traceIs(z,"pie-like")&&(G.label=R.datum()[0].label);var V=h.triggerHandler(P,"plotly_legendclick",G);if(j===1){if(V===!1)return;U._clickTimeout=setTimeout(function(){P._fullLayout&&a(R,P,j)},P._context.doubleClickDelay)}else j===2&&(U._clickTimeout&&clearTimeout(U._clickTimeout),P._legendMouseDownTime=0,h.triggerHandler(P,"plotly_legenddoubleclick",G)!==!1&&V!==!1&&a(R,P,j))}function g(P,U,R){var j,B,z=O(R),G=P.data()[0][0],V=G.trace,et=m.traceIs(V,"pie-like"),J=!R._inHover&&U._context.edits.legendText&&!et,X=R._maxNameLength;G.groupTitle?(j=G.groupTitle.text,B=G.groupTitle.font):(B=R.font,R.entries?j=G.text:(j=et?G.label:V.name,V._meta&&(j=k.templateString(j,V._meta))));var Y=k.ensureSingle(P,"text",z+"text");Y.attr("text-anchor","start").call(e.font,B).text(J?A(j,X):j);var Z=R.itemwidth+2*i.itemGap;n.positionText(Y,Z,0),J?Y.call(n.makeEditable,{gd:U,text:j}).call(L,P,U,R).on("edit",function(tt){this.text(A(tt,X)).call(L,P,U,R);var rt=G.trace._fullInput||{},nt={};if(m.hasTransform(rt,"groupby")){var ot=m.getTransformIndices(rt,"groupby"),ct=ot[ot.length-1],pt=k.keyedContainer(rt,"transforms["+ct+"].styles","target","value.name");pt.set(G.trace._group,tt),nt=pt.constructUpdate()}else nt.name=tt;return rt._isShape?m.call("_guiRelayout",U,"shapes["+V.index+"].name",nt.name):m.call("_guiRestyle",U,nt,V.index)}):L(Y,P,U,R)}function A(P,U){var R=Math.max(4,U);if(P&&P.trim().length>=R/2)return P;for(var j=R-(P=P||"").length;j>0;j--)P+=" ";return P}function M(P,U,R){var j,B=U._context.doubleClickDelay,z=1,G=k.ensureSingle(P,"rect",R+"toggle",function(V){U._context.staticPlot||V.style("cursor","pointer").attr("pointer-events","all"),V.call(t.fill,"rgba(0,0,0,0)")});U._context.staticPlot||(G.on("mousedown",function(){(j=new Date().getTime())-U._legendMouseDownTime<B?z+=1:(z=1,U._legendMouseDownTime=j)}),G.on("mouseup",function(){if(!U._dragged&&!U._editing){var V=U._fullLayout[R];new Date().getTime()-U._legendMouseDownTime>B&&(z=Math.max(z-1,1)),_(U,V,P,z,T.event)}}))}function L(P,U,R,j,B){j._inHover&&P.attr("data-notex",!0),n.convertToTspans(P,R,function(){(function(z,G,V,et){var J=z.data()[0][0];if(V._inHover||!J||J.trace.showlegend){var X=z.select("g[class*=math-group]"),Y=X.node(),Z=O(V);V||(V=G._fullLayout[Z]);var tt,rt,nt=V.borderwidth,ot=(et===p?V.title.font:J.groupTitle?J.groupTitle.font:V.font).size*l;if(Y){var ct=e.bBox(Y);tt=ct.height,rt=ct.width,et===p?e.setTranslate(X,nt,nt+.75*tt):e.setTranslate(X,0,.25*tt)}else{var pt="."+Z+(et===p?"title":"")+"text",gt=z.select(pt),kt=n.lineCount(gt),yt=gt.node();if(tt=ot*kt,rt=yt?e.bBox(yt).width:0,et===p)V.title.side==="left"&&(rt+=2*i.itemGap),n.positionText(gt,nt+i.titlePad,nt+ot);else{var mt=2*i.itemGap+V.itemwidth;J.groupTitle&&(mt=i.itemGap,rt-=V.itemwidth),n.positionText(gt,mt,-ot*((kt-1)/2-.3))}}et===p?(V._titleWidth=rt,V._titleHeight=tt):(J.lineHeight=ot,J.height=Math.max(tt,16)+3,J.width=rt)}else z.remove()})(U,R,j,B)})}function E(P){return k.isRightAnchor(P)?"right":k.isCenterAnchor(P)?"center":"left"}function S(P){return k.isBottomAnchor(P)?"bottom":k.isMiddleAnchor(P)?"middle":"top"}function O(P){return P._id||"legend"}W.exports=function(P,U){if(U)b(P,U);else{var R=P._fullLayout,j=R._legends;R._infolayer.selectAll('[class^="legend"]').each(function(){var G=T.select(this),V=G.attr("class").split(" ")[0];V.match(y)&&j.indexOf(V)===-1&&G.remove()});for(var B=0;B<j.length;B++){var z=j[B];b(P,P._fullLayout[z])}}}},82424:function(W,I,o){var T=o(73972),k=o(10130);W.exports=function(r,m,h){var s,e,t=m._inHover,n=k.isGrouped(m),a=k.isReversed(m),i={},c=[],l=!1,u={},f=0,d=0;function w(j,B,z){if(m.visible!==!1&&(!h||j===m._id))if(B!==""&&k.isGrouped(m))c.indexOf(B)===-1?(c.push(B),l=!0,i[B]=[z]):i[B].push(z);else{var G="~~i"+f;c.push(G),i[G]=[z],f++}}for(s=0;s<r.length;s++){var v=r[s],p=v[0],y=p.trace,b=y.legend,x=y.legendgroup;if(t||y.visible&&y.showlegend)if(T.traceIs(y,"pie-like"))for(u[x]||(u[x]={}),e=0;e<v.length;e++){var _=v[e].label;u[x][_]||(w(b,x,{label:_,color:v[e].color,i:v[e].i,trace:y,pts:v[e].pts}),u[x][_]=!0,d=Math.max(d,(_||"").length))}else w(b,x,p),d=Math.max(d,(y.name||"").length)}if(!c.length)return[];var g=!l||!n,A=[];for(s=0;s<c.length;s++){var M=i[c[s]];g?A.push(M[0]):A.push(M)}for(g&&(A=[A]),s=0;s<A.length;s++){var L=1/0;for(e=0;e<A[s].length;e++){var E=A[s][e].trace.legendrank;L>E&&(L=E)}A[s][0]._groupMinRank=L,A[s][0]._preGroupSort=s}var S=function(j,B){return j.trace.legendrank-B.trace.legendrank||j._preSort-B._preSort};for(A.forEach(function(j,B){j[0]._preGroupSort=B}),A.sort(function(j,B){return j[0]._groupMinRank-B[0]._groupMinRank||j[0]._preGroupSort-B[0]._preGroupSort}),s=0;s<A.length;s++){A[s].forEach(function(j,B){j._preSort=B}),A[s].sort(S);var O=A[s][0].trace,P=null;for(e=0;e<A[s].length;e++){var U=A[s][e].trace.legendgrouptitle;if(U&&U.text){P=U,t&&(U.font=m._groupTitleFont);break}}if(a&&A[s].reverse(),P){var R=!1;for(e=0;e<A[s].length;e++)if(T.traceIs(A[s][e].trace,"pie-like")){R=!0;break}A[s].unshift({i:-1,groupTitle:P,noClick:R,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:m.groupclick==="toggleitem"||O.visible}})}for(e=0;e<A[s].length;e++)A[s][e]=[A[s][e]]}return m._lgroupsLength=A.length,m._maxNameLength=d,A}},85167:function(W,I,o){var T=o(73972),k=o(71828),r=k.pushUnique,m=!0;W.exports=function(h,s,e){var t=s._fullLayout;if(!s._dragged&&!s._editing){var n,a=t.legend.itemclick,i=t.legend.itemdoubleclick,c=t.legend.groupclick;if(e===1&&a==="toggle"&&i==="toggleothers"&&m&&s.data&&s._context.showTips&&k.notifier(k._(s,"Double-click on legend to isolate one trace"),"long"),m=!1,e===1?n=a:e===2&&(n=i),n){var l=c==="togglegroup",u=t.hiddenlabels?t.hiddenlabels.slice():[],f=h.data()[0][0];if(!f.groupTitle||!f.noClick){var d=s._fullData,w=(t.shapes||[]).filter(function(xt){return xt.showlegend}),v=d.concat(w),p=f.trace;p._isShape&&(p=p._fullInput);var y,b,x,_,g,A=p.legendgroup,M={},L=[],E=[],S=[],O=(t.shapes||[]).map(function(xt){return xt._input}),P=!1,U=p.legend,R=p._fullInput;if(R&&R._isShape||!T.traceIs(p,"pie-like")){var j,B=A&&A.length,z=[];if(B)for(y=0;y<v.length;y++)(j=v[y]).visible&&j.legendgroup===A&&z.push(y);if(n==="toggle"){var G;switch(p.visible){case!0:G="legendonly";break;case!1:G=!1;break;case"legendonly":G=!0}if(B)if(l)for(y=0;y<v.length;y++){var V=v[y];V.visible!==!1&&V.legendgroup===A&&vt(V,G)}else vt(p,G);else vt(p,G)}else if(n==="toggleothers"){var et,J,X,Y,Z=!0;for(y=0;y<v.length;y++)if(et=(Y=v[y])===p,J=Y.showlegend!==!0,!(et||J||B&&Y.legendgroup===A||Y.legend!==U||Y.visible!==!0||T.traceIs(Y,"notLegendIsolatable"))){Z=!1;break}for(y=0;y<v.length;y++)if((Y=v[y]).visible!==!1&&Y.legend===U&&!T.traceIs(Y,"notLegendIsolatable"))switch(p.visible){case"legendonly":vt(Y,!0);break;case!0:X=!!Z||"legendonly",et=Y===p,J=Y.showlegend!==!0&&!Y.legendgroup,vt(Y,!!(et||B&&Y.legendgroup===A||J)||X)}}for(y=0;y<E.length;y++)if(x=E[y]){var tt=x.constructUpdate(),rt=Object.keys(tt);for(b=0;b<rt.length;b++)_=rt[b],(M[_]=M[_]||[])[S[y]]=tt[_]}for(g=Object.keys(M),y=0;y<g.length;y++)for(_=g[y],b=0;b<L.length;b++)M[_].hasOwnProperty(b)||(M[_][b]=void 0);P?T.call("_guiUpdate",s,M,{shapes:O},L):T.call("_guiRestyle",s,M,L)}else{var nt=f.label,ot=u.indexOf(nt);if(n==="toggle")ot===-1?u.push(nt):u.splice(ot,1);else if(n==="toggleothers"){var ct=ot!==-1,pt=[];for(y=0;y<s.calcdata.length;y++){var gt=s.calcdata[y];for(b=0;b<gt.length;b++){var kt=gt[b].label;U===gt[0].trace.legend&&nt!==kt&&(u.indexOf(kt)===-1&&(ct=!0),r(u,kt),pt.push(kt))}}if(!ct)for(var yt=0;yt<pt.length;yt++){var mt=u.indexOf(pt[yt]);mt!==-1&&u.splice(mt,1)}}T.call("_guiRelayout",s,"hiddenlabels",u)}}}}function Ot(xt,st){var at=L.indexOf(xt),ht=M.visible;return ht||(ht=M.visible=[]),L.indexOf(xt)===-1&&(L.push(xt),at=L.length-1),ht[at]=st,at}function vt(xt,st){if(!f.groupTitle||l){var at,ht=xt._fullInput||xt,Lt=ht._isShape,Mt=ht.index;if(Mt===void 0&&(Mt=ht._index),T.hasTransform(ht,"groupby")){var _t=E[Mt];if(!_t){var St=T.getTransformIndices(ht,"groupby"),Dt=St[St.length-1];_t=k.keyedContainer(ht,"transforms["+Dt+"].styles","target","value.visible"),E[Mt]=_t}var ut=_t.get(xt._group);ut===void 0&&(ut=!0),ut!==!1&&_t.set(xt._group,st),S[Mt]=Ot(Mt,ht.visible!==!1)}else{var Tt=ht.visible!==!1&&st;Lt?(at=Tt,O[Mt].visible=at,P=!0):Ot(Mt,Tt)}}}}},10130:function(W,I){I.isGrouped=function(o){return(o.traceorder||"").indexOf("grouped")!==-1},I.isVertical=function(o){return o.orientation!=="h"},I.isReversed=function(o){return(o.traceorder||"").indexOf("reversed")!==-1}},2199:function(W,I,o){W.exports={moduleType:"component",name:"legend",layoutAttributes:o(33030),supplyLayoutDefaults:o(99017),draw:o(43969),style:o(53630)}},53630:function(W,I,o){var T=o(39898),k=o(73972),r=o(71828),m=r.strTranslate,h=o(91424),s=o(7901),e=o(52075).extractOpts,t=o(34098),n=o(63463),a=o(53581).castOption,i=o(14928);function c(f,d){return(d?"radial":"horizontal")+(f?"":"reversed")}function l(f){var d=f[0].trace,w=d.contours,v=t.hasLines(d),p=t.hasMarkers(d),y=d.visible&&d.fill&&d.fill!=="none",b=!1,x=!1;if(w){var _=w.coloring;_==="lines"?b=!0:v=_==="none"||_==="heatmap"||w.showlines,w.type==="constraint"?y=w._operation!=="=":_!=="fill"&&_!=="heatmap"||(x=!0)}return{showMarker:p,showLine:v,showFill:y,showGradientLine:b,showGradientFill:x,anyLine:v||b,anyFill:y||x}}function u(f,d,w){return f&&r.isArrayOrTypedArray(f)?d:f>w?w:f}W.exports=function(f,d,w){var v=d._fullLayout;w||(w=v.legend);var p=w.itemsizing==="constant",y=w.itemwidth,b=(y+2*i.itemGap)/2,x=m(b,0),_=function(M,L,E,S){var O;if(M+1)O=M;else{if(!(L&&L.width>0))return 0;O=L.width}return p?S:Math.min(O,E)};function g(M,L,E){var S=M[0].trace,O=S.marker||{},P=O.line||{},U=E?S.visible&&S.type===E:k.traceIs(S,"bar"),R=T.select(L).select("g.legendpoints").selectAll("path.legend"+E).data(U?[M]:[]);R.enter().append("path").classed("legend"+E,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",x),R.exit().remove(),R.each(function(j){var B=T.select(this),z=j[0],G=_(z.mlw,O.line,5,2);B.style("stroke-width",G+"px");var V=z.mcc;if(!w._inHover&&"mc"in z){var et=e(O),J=et.mid;J===void 0&&(J=(et.max+et.min)/2),V=h.tryColorscale(O,"")(J)}var X=V||z.mc||O.color,Y=O.pattern,Z=Y&&h.getPatternAttr(Y.shape,0,"");if(Z){var tt=h.getPatternAttr(Y.bgcolor,0,null),rt=h.getPatternAttr(Y.fgcolor,0,null),nt=Y.fgopacity,ot=u(Y.size,8,10),ct=u(Y.solidity,.5,1),pt="legend-"+S.uid;B.call(h.pattern,"legend",d,pt,Z,ot,ct,V,Y.fillmode,tt,rt,nt)}else B.call(s.fill,X);G&&s.stroke(B,z.mlc||P.color)})}function A(M,L,E){var S=M[0],O=S.trace,P=E?O.visible&&O.type===E:k.traceIs(O,E),U=T.select(L).select("g.legendpoints").selectAll("path.legend"+E).data(P?[M]:[]);if(U.enter().append("path").classed("legend"+E,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",x),U.exit().remove(),U.size()){var R=O.marker||{},j=_(a(R.line.width,S.pts),R.line,5,2),B="pieLike",z=r.minExtend(O,{marker:{line:{width:j}}},B),G=r.minExtend(S,{trace:z},B);n(U,G,z,d)}}f.each(function(M){var L=T.select(this),E=r.ensureSingle(L,"g","layers");E.style("opacity",M[0].trace.opacity);var S=w.valign,O=M[0].lineHeight,P=M[0].height;if(S!=="middle"&&O&&P){var U={top:1,bottom:-1}[S]*(.5*(O-P+3));E.attr("transform",m(0,U))}else E.attr("transform",null);E.selectAll("g.legendfill").data([M]).enter().append("g").classed("legendfill",!0),E.selectAll("g.legendlines").data([M]).enter().append("g").classed("legendlines",!0);var R=E.selectAll("g.legendsymbols").data([M]);R.enter().append("g").classed("legendsymbols",!0),R.selectAll("g.legendpoints").data([M]).enter().append("g").classed("legendpoints",!0)}).each(function(M){var L,E=M[0].trace,S=[];if(E.visible)switch(E.type){case"histogram2d":case"heatmap":S=[["M-15,-2V4H15V-2Z"]],L=!0;break;case"choropleth":case"choroplethmapbox":S=[["M-6,-6V6H6V-6Z"]],L=!0;break;case"densitymapbox":S=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],L="radial";break;case"cone":S=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],L=!1;break;case"streamtube":S=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],L=!1;break;case"surface":S=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],L=!0;break;case"mesh3d":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],L=!1;break;case"volume":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],L=!0;break;case"isosurface":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],L=!1}var O=T.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(S);O.enter().append("path").classed("legend3dandfriends",!0).attr("transform",x).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(P,U){var R,j=T.select(this),B=e(E),z=B.colorscale,G=B.reversescale;if(z){if(!L){var V=z.length;R=U===0?z[G?V-1:0][1]:U===1?z[G?0:V-1][1]:z[Math.floor((V-1)/2)][1]}}else{var et=E.vertexcolor||E.facecolor||E.color;R=r.isArrayOrTypedArray(et)?et[U]||et[0]:et}j.attr("d",P[0]),R?j.call(s.fill,R):j.call(function(J){if(J.size()){var X="legendfill-"+E.uid;h.gradient(J,d,X,c(G,L==="radial"),z,"fill")}})})}).each(function(M){var L=M[0].trace,E=L.type==="waterfall";if(M[0]._distinct&&E){var S=M[0].trace[M[0].dir].marker;return M[0].mc=S.color,M[0].mlw=S.line.width,M[0].mlc=S.line.color,g(M,this,"waterfall")}var O=[];L.visible&&E&&(O=M[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var P=T.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(O);P.enter().append("path").classed("legendwaterfall",!0).attr("transform",x).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(U){var R=T.select(this),j=L[U[0]].marker,B=_(void 0,j.line,5,2);R.attr("d",U[1]).style("stroke-width",B+"px").call(s.fill,j.color),B&&R.call(s.stroke,j.line.color)})}).each(function(M){g(M,this,"funnel")}).each(function(M){g(M,this)}).each(function(M){var L=M[0].trace,E=T.select(this).select("g.legendpoints").selectAll("path.legendbox").data(L.visible&&k.traceIs(L,"box-violin")?[M]:[]);E.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",x),E.exit().remove(),E.each(function(){var S=T.select(this);if(L.boxpoints!=="all"&&L.points!=="all"||s.opacity(L.fillcolor)!==0||s.opacity((L.line||{}).color)!==0){var O=_(void 0,L.line,5,2);S.style("stroke-width",O+"px").call(s.fill,L.fillcolor),O&&s.stroke(S,L.line.color)}else{var P=r.minExtend(L,{marker:{size:p?12:r.constrain(L.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});E.call(h.pointStyle,P,d)}})}).each(function(M){A(M,this,"funnelarea")}).each(function(M){A(M,this,"pie")}).each(function(M){var L,E,S=l(M),O=S.showFill,P=S.showLine,U=S.showGradientLine,R=S.showGradientFill,j=S.anyFill,B=S.anyLine,z=M[0],G=z.trace,V=e(G),et=V.colorscale,J=V.reversescale,X=t.hasMarkers(G)||!j?"M5,0":B?"M5,-2":"M5,-3",Y=T.select(this),Z=Y.select(".legendfill").selectAll("path").data(O||R?[M]:[]);if(Z.enter().append("path").classed("js-fill",!0),Z.exit().remove(),Z.attr("d",X+"h"+y+"v6h-"+y+"z").call(function(nt){if(nt.size())if(O)h.fillGroupStyle(nt,d);else{var ot="legendfill-"+G.uid;h.gradient(nt,d,ot,c(J),et,"fill")}}),P||U){var tt=_(void 0,G.line,10,5);E=r.minExtend(G,{line:{width:tt}}),L=[r.minExtend(z,{trace:E})]}var rt=Y.select(".legendlines").selectAll("path").data(P||U?[L]:[]);rt.enter().append("path").classed("js-line",!0),rt.exit().remove(),rt.attr("d",X+(U?"l"+y+",0.0001":"h"+y)).call(P?h.lineGroupStyle:function(nt){if(nt.size()){var ot="legendline-"+G.uid;h.lineGroupStyle(nt),h.gradient(nt,d,ot,c(J),et,"stroke")}})}).each(function(M){var L,E,S=l(M),O=S.anyFill,P=S.anyLine,U=S.showLine,R=S.showMarker,j=M[0],B=j.trace,z=!R&&!P&&!O&&t.hasText(B);function G(rt,nt,ot,ct){var pt=r.nestedProperty(B,rt).get(),gt=r.isArrayOrTypedArray(pt)&&nt?nt(pt):pt;if(p&&gt&&ct!==void 0&&(gt=ct),ot){if(gt<ot[0])return ot[0];if(gt>ot[1])return ot[1]}return gt}function V(rt){return j._distinct&&j.index&&rt[j.index]?rt[j.index]:rt[0]}if(R||z||U){var et={},J={};if(R){et.mc=G("marker.color",V),et.mx=G("marker.symbol",V),et.mo=G("marker.opacity",r.mean,[.2,1]),et.mlc=G("marker.line.color",V),et.mlw=G("marker.line.width",r.mean,[0,5],2),J.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var X=G("marker.size",r.mean,[2,16],12);et.ms=X,J.marker.size=X}U&&(J.line={width:G("line.width",V,[0,10],5)}),z&&(et.tx="Aa",et.tp=G("textposition",V),et.ts=10,et.tc=G("textfont.color",V),et.tf=G("textfont.family",V)),L=[r.minExtend(j,et)],(E=r.minExtend(B,J)).selectedpoints=null,E.texttemplate=null}var Y=T.select(this).select("g.legendpoints"),Z=Y.selectAll("path.scatterpts").data(R?L:[]);Z.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",x),Z.exit().remove(),Z.call(h.pointStyle,E,d),R&&(L[0].mrc=3);var tt=Y.selectAll("g.pointtext").data(z?L:[]);tt.enter().append("g").classed("pointtext",!0).append("text").attr("transform",x),tt.exit().remove(),tt.selectAll("text").call(h.textPointStyle,E,d)}).each(function(M){var L=M[0].trace,E=T.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(L.visible&&L.type==="candlestick"?[M,M]:[]);E.enter().append("path").classed("legendcandle",!0).attr("d",function(S,O){return O?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",x).style("stroke-miterlimit",1),E.exit().remove(),E.each(function(S,O){var P=T.select(this),U=L[O?"increasing":"decreasing"],R=_(void 0,U.line,5,2);P.style("stroke-width",R+"px").call(s.fill,U.fillcolor),R&&s.stroke(P,U.line.color)})}).each(function(M){var L=M[0].trace,E=T.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(L.visible&&L.type==="ohlc"?[M,M]:[]);E.enter().append("path").classed("legendohlc",!0).attr("d",function(S,O){return O?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",x).style("stroke-miterlimit",1),E.exit().remove(),E.each(function(S,O){var P=T.select(this),U=L[O?"increasing":"decreasing"],R=_(void 0,U.line,5,2);P.style("fill","none").call(h.dashLine,U.line.dash,R),R&&s.stroke(P,U.line.color)})})}},42068:function(W,I,o){o(93348),W.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(W,I,o){var T=o(73972),k=o(74875),r=o(41675),m=o(24255),h=o(34031).eraseActiveShape,s=o(71828),e=s._,t=W.exports={};function n(v,p){var y,b,x=p.currentTarget,_=x.getAttribute("data-attr"),g=x.getAttribute("data-val")||!0,A=v._fullLayout,M={},L=r.list(v,null,!0),E=A._cartesianSpikesEnabled;if(_==="zoom"){var S,O=g==="in"?.5:2,P=(1+O)/2,U=(1-O)/2;for(b=0;b<L.length;b++)if(!(y=L[b]).fixedrange)if(S=y._name,g==="auto")M[S+".autorange"]=!0;else if(g==="reset")y._rangeInitial0===void 0&&y._rangeInitial1===void 0?M[S+".autorange"]=!0:y._rangeInitial0===void 0?(M[S+".autorange"]=y._autorangeInitial,M[S+".range"]=[null,y._rangeInitial1]):y._rangeInitial1===void 0?(M[S+".range"]=[y._rangeInitial0,null],M[S+".autorange"]=y._autorangeInitial):M[S+".range"]=[y._rangeInitial0,y._rangeInitial1],y._showSpikeInitial!==void 0&&(M[S+".showspikes"]=y._showSpikeInitial,E!=="on"||y._showSpikeInitial||(E="off"));else{var R=[y.r2l(y.range[0]),y.r2l(y.range[1])],j=[P*R[0]+U*R[1],P*R[1]+U*R[0]];M[S+".range[0]"]=y.l2r(j[0]),M[S+".range[1]"]=y.l2r(j[1])}}else _!=="hovermode"||g!=="x"&&g!=="y"||(g=A._isHoriz?"y":"x",x.setAttribute("data-val",g)),M[_]=g;A._cartesianSpikesEnabled=E,T.call("_guiRelayout",v,M)}function a(v,p){for(var y=p.currentTarget,b=y.getAttribute("data-attr"),x=y.getAttribute("data-val")||!0,_=v._fullLayout._subplots.gl3d||[],g={},A=b.split("."),M=0;M<_.length;M++)g[_[M]+"."+A[1]]=x;var L=x==="pan"?x:"zoom";g.dragmode=L,T.call("_guiRelayout",v,g)}function i(v,p){for(var y=p.currentTarget.getAttribute("data-attr"),b=y==="resetLastSave",x=y==="resetDefault",_=v._fullLayout,g=_._subplots.gl3d||[],A={},M=0;M<g.length;M++){var L,E=g[M],S=E+".camera",O=E+".aspectratio",P=E+".aspectmode",U=_[E]._scene;b?(A[S+".up"]=U.viewInitial.up,A[S+".eye"]=U.viewInitial.eye,A[S+".center"]=U.viewInitial.center,L=!0):x&&(A[S+".up"]=null,A[S+".eye"]=null,A[S+".center"]=null,L=!0),L&&(A[O+".x"]=U.viewInitial.aspectratio.x,A[O+".y"]=U.viewInitial.aspectratio.y,A[O+".z"]=U.viewInitial.aspectratio.z,A[P]=U.viewInitial.aspectmode)}T.call("_guiRelayout",v,A)}function c(v,p){var y=p.currentTarget,b=y._previousVal,x=v._fullLayout,_=x._subplots.gl3d||[],g=["xaxis","yaxis","zaxis"],A={},M={};if(b)M=b,y._previousVal=null;else{for(var L=0;L<_.length;L++){var E=_[L],S=x[E],O=E+".hovermode";A[O]=S.hovermode,M[O]=!1;for(var P=0;P<3;P++){var U=g[P],R=E+"."+U+".showspikes";M[R]=!1,A[R]=S[U].showspikes}}y._previousVal=A}return M}function l(v,p){for(var y=p.currentTarget,b=y.getAttribute("data-attr"),x=y.getAttribute("data-val")||!0,_=v._fullLayout,g=_._subplots.geo||[],A=0;A<g.length;A++){var M=g[A],L=_[M];if(b==="zoom"){var E=L.projection.scale,S=x==="in"?2*E:.5*E;T.call("_guiRelayout",v,M+".projection.scale",S)}}b==="reset"&&w(v,"geo")}function u(v){var p=v._fullLayout;return!p.hovermode&&(p._has("cartesian")?p._isHoriz?"y":"x":"closest")}function f(v){var p=u(v);T.call("_guiRelayout",v,"hovermode",p)}function d(v,p){for(var y=p.currentTarget.getAttribute("data-val"),b=v._fullLayout,x=b._subplots.mapbox||[],_={},g=0;g<x.length;g++){var A=x[g],M=b[A].zoom,L=y==="in"?1.05*M:M/1.05;_[A+".zoom"]=L}T.call("_guiRelayout",v,_)}function w(v,p){for(var y=v._fullLayout,b=y._subplots[p]||[],x={},_=0;_<b.length;_++)for(var g=b[_],A=y[g]._subplot.viewInitial,M=Object.keys(A),L=0;L<M.length;L++){var E=M[L];x[g+"."+E]=A[E]}T.call("_guiRelayout",v,x)}t.toImage={name:"toImage",title:function(v){var p=(v._context.toImageButtonOptions||{}).format||"png";return e(v,p==="png"?"Download plot as a png":"Download plot")},icon:m.camera,click:function(v){var p=v._context.toImageButtonOptions,y={format:p.format||"png"};s.notifier(e(v,"Taking snapshot - this may take a few seconds"),"long"),y.format!=="svg"&&s.isIE()&&(s.notifier(e(v,"IE only supports svg.  Changing format to svg."),"long"),y.format="svg"),["filename","width","height","scale"].forEach(function(b){b in p&&(y[b]=p[b])}),T.call("downloadImage",v,y).then(function(b){s.notifier(e(v,"Snapshot succeeded")+" - "+b,"long")}).catch(function(){s.notifier(e(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(v){return e(v,"Edit in Chart Studio")},icon:m.disk,click:function(v){k.sendDataToCloud(v)}},t.editInChartStudio={name:"editInChartStudio",title:function(v){return e(v,"Edit in Chart Studio")},icon:m.pencil,click:function(v){k.sendDataToCloud(v)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(v){return e(v,"Zoom")},attr:"dragmode",val:"zoom",icon:m.zoombox,click:n},t.pan2d={name:"pan2d",_cat:"pan",title:function(v){return e(v,"Pan")},attr:"dragmode",val:"pan",icon:m.pan,click:n},t.select2d={name:"select2d",_cat:"select",title:function(v){return e(v,"Box Select")},attr:"dragmode",val:"select",icon:m.selectbox,click:n},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(v){return e(v,"Lasso Select")},attr:"dragmode",val:"lasso",icon:m.lasso,click:n},t.drawclosedpath={name:"drawclosedpath",title:function(v){return e(v,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:m.drawclosedpath,click:n},t.drawopenpath={name:"drawopenpath",title:function(v){return e(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:m.drawopenpath,click:n},t.drawline={name:"drawline",title:function(v){return e(v,"Draw line")},attr:"dragmode",val:"drawline",icon:m.drawline,click:n},t.drawrect={name:"drawrect",title:function(v){return e(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:m.drawrect,click:n},t.drawcircle={name:"drawcircle",title:function(v){return e(v,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:m.drawcircle,click:n},t.eraseshape={name:"eraseshape",title:function(v){return e(v,"Erase active shape")},icon:m.eraseshape,click:h},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(v){return e(v,"Zoom in")},attr:"zoom",val:"in",icon:m.zoom_plus,click:n},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(v){return e(v,"Zoom out")},attr:"zoom",val:"out",icon:m.zoom_minus,click:n},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(v){return e(v,"Autoscale")},attr:"zoom",val:"auto",icon:m.autoscale,click:n},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(v){return e(v,"Reset axes")},attr:"zoom",val:"reset",icon:m.home,click:n},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(v){return e(v,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:m.tooltip_basic,gravity:"ne",click:n},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(v){return e(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?"y":"x"},icon:m.tooltip_compare,gravity:"ne",click:n},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(v){return e(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:m.zoombox,click:a},t.pan3d={name:"pan3d",_cat:"pan",title:function(v){return e(v,"Pan")},attr:"scene.dragmode",val:"pan",icon:m.pan,click:a},t.orbitRotation={name:"orbitRotation",title:function(v){return e(v,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:m["3d_rotate"],click:a},t.tableRotation={name:"tableRotation",title:function(v){return e(v,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:m["z-axis"],click:a},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(v){return e(v,"Reset camera to default")},attr:"resetDefault",icon:m.home,click:i},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(v){return e(v,"Reset camera to last save")},attr:"resetLastSave",icon:m.movie,click:i},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(v){return e(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:m.tooltip_basic,gravity:"ne",click:function(v,p){var y=c(v,p);T.call("_guiRelayout",v,y)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(v){return e(v,"Zoom in")},attr:"zoom",val:"in",icon:m.zoom_plus,click:l},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(v){return e(v,"Zoom out")},attr:"zoom",val:"out",icon:m.zoom_minus,click:l},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(v){return e(v,"Reset")},attr:"reset",val:null,icon:m.autoscale,click:l},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(v){return e(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:m.tooltip_basic,gravity:"ne",click:f},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(v){return e(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:m.tooltip_basic,gravity:"ne",click:f},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(v){return e(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:m.tooltip_basic,gravity:"ne",click:f},t.resetViewSankey={name:"resetSankeyGroup",title:function(v){return e(v,"Reset view")},icon:m.home,click:function(v){for(var p={"node.groups":[],"node.x":[],"node.y":[]},y=0;y<v._fullData.length;y++){var b=v._fullData[y]._viewInitial;p["node.groups"].push(b.node.groups.slice()),p["node.x"].push(b.node.x.slice()),p["node.y"].push(b.node.y.slice())}T.call("restyle",v,p)}},t.toggleHover={name:"toggleHover",title:function(v){return e(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:m.tooltip_basic,gravity:"ne",click:function(v,p){var y=c(v,p);y.hovermode=u(v),T.call("_guiRelayout",v,y)}},t.resetViews={name:"resetViews",title:function(v){return e(v,"Reset views")},icon:m.home,click:function(v,p){var y=p.currentTarget;y.setAttribute("data-attr","zoom"),y.setAttribute("data-val","reset"),n(v,p),y.setAttribute("data-attr","resetLastSave"),i(v,p),w(v,"geo"),w(v,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(v){return e(v,"Toggle Spike Lines")},icon:m.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var p=v._fullLayout,y=p._cartesianSpikesEnabled;p._cartesianSpikesEnabled=y==="on"?"off":"on",T.call("_guiRelayout",v,function(b){for(var x=b._fullLayout._cartesianSpikesEnabled==="on",_=r.list(b,null,!0),g={},A=0;A<_.length;A++){var M=_[A];g[M._name+".showspikes"]=!!x||M._showSpikeInitial}return g}(v))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(v){return e(v,"Reset view")},attr:"reset",icon:m.home,click:function(v){w(v,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(v){return e(v,"Zoom in")},attr:"zoom",val:"in",icon:m.zoom_plus,click:d},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(v){return e(v,"Zoom out")},attr:"zoom",val:"out",icon:m.zoom_minus,click:d}},93348:function(W,I,o){var T=o(26023),k=Object.keys(T),r=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],m=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(r),h=[];k.forEach(function(s){(function(e){if(m.indexOf(e._cat||e.name)===-1){var t=e.name,n=(e._cat||e.name).toLowerCase();h.indexOf(t)===-1&&h.push(t),h.indexOf(n)===-1&&h.push(n)}})(T[s])}),h.sort(),W.exports={DRAW_MODES:r,backButtons:m,foreButtons:h}},35750:function(W,I,o){var T=o(71828),k=o(7901),r=o(44467),m=o(42068);W.exports=function(h,s){var e=h.modebar||{},t=r.newContainer(s,"modebar");function n(i,c){return T.coerce(e,t,m,i,c)}n("orientation"),n("bgcolor",k.addOpacity(s.paper_bgcolor,.5));var a=k.contrast(k.rgb(s.modebar.bgcolor));n("color",k.addOpacity(a,.3)),n("activecolor",k.addOpacity(a,.7)),n("uirevision",s.uirevision),n("add"),n("remove")}},64168:function(W,I,o){W.exports={moduleType:"component",name:"modebar",layoutAttributes:o(42068),supplyLayoutDefaults:o(35750),manage:o(14192)}},14192:function(W,I,o){var T=o(41675),k=o(34098),r=o(73972),m=o(23469).isUnifiedHover,h=o(37676),s=o(26023),e=o(93348).DRAW_MODES,t=o(71828).extendDeep;W.exports=function(n){var a=n._fullLayout,i=n._context,c=a._modeBar;if(i.displayModeBar||i.watermark){if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var l,u=i.modeBarButtons;l=Array.isArray(u)&&u.length?function(f){for(var d=t([],f),w=0;w<d.length;w++)for(var v=d[w],p=0;p<v.length;p++){var y=v[p];if(typeof y=="string"){if(s[y]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));d[w][p]=s[y]}}return d}(u):!i.displayModeBar&&i.watermark?[]:function(f){var d=f._fullLayout,w=f._fullData,v=f._context;function p(pt,gt){if(typeof gt=="string"){if(gt.toLowerCase()===pt.toLowerCase())return!0}else{var kt=gt.name,yt=gt._cat||gt.name;if(kt===pt||yt===pt.toLowerCase())return!0}return!1}var y=d.modebar.add;typeof y=="string"&&(y=[y]);var b=d.modebar.remove;typeof b=="string"&&(b=[b]);var x=v.modeBarButtonsToAdd.concat(y.filter(function(pt){for(var gt=0;gt<v.modeBarButtonsToRemove.length;gt++)if(p(pt,v.modeBarButtonsToRemove[gt]))return!1;return!0})),_=v.modeBarButtonsToRemove.concat(b.filter(function(pt){for(var gt=0;gt<v.modeBarButtonsToAdd.length;gt++)if(p(pt,v.modeBarButtonsToAdd[gt]))return!1;return!0})),g=d._has("cartesian"),A=d._has("gl3d"),M=d._has("geo"),L=d._has("pie"),E=d._has("funnelarea"),S=d._has("gl2d"),O=d._has("ternary"),P=d._has("mapbox"),U=d._has("polar"),R=d._has("smith"),j=d._has("sankey"),B=function(pt){for(var gt=T.list({_fullLayout:pt},null,!0),kt=0;kt<gt.length;kt++)if(!gt[kt].fixedrange)return!1;return!0}(d),z=m(d.hovermode),G=[];function V(pt){if(pt.length){for(var gt=[],kt=0;kt<pt.length;kt++){for(var yt=pt[kt],mt=s[yt],Ot=mt.name.toLowerCase(),vt=(mt._cat||mt.name).toLowerCase(),xt=!1,st=0;st<_.length;st++){var at=_[st].toLowerCase();if(at===Ot||at===vt){xt=!0;break}}xt||gt.push(s[yt])}G.push(gt)}}var et=["toImage"];v.showEditInChartStudio?et.push("editInChartStudio"):v.showSendToCloud&&et.push("sendDataToCloud"),V(et);var J=[],X=[],Y=[],Z=[];(g||S||L||E||O)+M+A+P+U+R>1?(X=["toggleHover"],Y=["resetViews"]):M?(J=["zoomInGeo","zoomOutGeo"],X=["hoverClosestGeo"],Y=["resetGeo"]):A?(X=["hoverClosest3d"],Y=["resetCameraDefault3d","resetCameraLastSave3d"]):P?(J=["zoomInMapbox","zoomOutMapbox"],X=["toggleHover"],Y=["resetViewMapbox"]):S?X=["hoverClosestGl2d"]:L?X=["hoverClosestPie"]:j?(X=["hoverClosestCartesian","hoverCompareCartesian"],Y=["resetViewSankey"]):X=["toggleHover"],g&&(X=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(pt){for(var gt=0;gt<pt.length;gt++)if(!r.traceIs(pt[gt],"noHover"))return!1;return!0}(w)||z)&&(X=[]),!g&&!S||B||(J=["zoomIn2d","zoomOut2d","autoScale2d"],Y[0]!=="resetViews"&&(Y=["resetScale2d"])),A?Z=["zoom3d","pan3d","orbitRotation","tableRotation"]:(g||S)&&!B||O?Z=["zoom2d","pan2d"]:P||M?Z=["pan2d"]:U&&(Z=["zoom2d"]),function(pt){for(var gt=!1,kt=0;kt<pt.length&&!gt;kt++){var yt=pt[kt];yt._module&&yt._module.selectPoints&&(r.traceIs(yt,"scatter-like")?(k.hasMarkers(yt)||k.hasText(yt))&&(gt=!0):r.traceIs(yt,"box-violin")&&yt.boxpoints!=="all"&&yt.points!=="all"||(gt=!0))}return gt}(w)&&Z.push("select2d","lasso2d");var tt=[],rt=function(pt){tt.indexOf(pt)===-1&&X.indexOf(pt)!==-1&&tt.push(pt)};if(Array.isArray(x)){for(var nt=[],ot=0;ot<x.length;ot++){var ct=x[ot];typeof ct=="string"?(ct=ct.toLowerCase(),e.indexOf(ct)!==-1?(d._has("mapbox")||d._has("cartesian"))&&Z.push(ct):ct==="togglespikelines"?rt("toggleSpikelines"):ct==="togglehover"?rt("toggleHover"):ct==="hovercompare"?rt("hoverCompareCartesian"):ct==="hoverclosest"?(rt("hoverClosestCartesian"),rt("hoverClosestGeo"),rt("hoverClosest3d"),rt("hoverClosestGl2d"),rt("hoverClosestPie")):ct==="v1hovermode"&&(rt("toggleHover"),rt("hoverClosestCartesian"),rt("hoverCompareCartesian"),rt("hoverClosestGeo"),rt("hoverClosest3d"),rt("hoverClosestGl2d"),rt("hoverClosestPie"))):nt.push(ct)}x=nt}return V(Z),V(J.concat(Y)),V(tt),function(pt,gt){if(gt.length)if(Array.isArray(gt[0]))for(var kt=0;kt<gt.length;kt++)pt.push(gt[kt]);else pt.push(gt);return pt}(G,x)}(n),c?c.update(n,l):a._modeBar=h(n,l)}else c&&(c.destroy(),delete a._modeBar)}},37676:function(W,I,o){var T=o(39898),k=o(92770),r=o(71828),m=o(24255),h=o(11506).version,s=new DOMParser;function e(n){this.container=n.container,this.element=document.createElement("div"),this.update(n.graphInfo,n.buttons),this.container.appendChild(this.element)}var t=e.prototype;t.update=function(n,a){this.graphInfo=n;var i=this.graphInfo._context,c=this.graphInfo._fullLayout,l="modebar-"+c._uid;this.element.setAttribute("id",l),this._uid=l,this.element.className="modebar",i.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),c.modebar.orientation==="v"&&(this.element.className+=" vertical",a=a.reverse());var u=c.modebar,f=i.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";r.deleteRelatedStyleRule(l),r.addRelatedStyleRule(l,f+"#"+l+" .modebar-group","background-color: "+u.bgcolor),r.addRelatedStyleRule(l,"#"+l+" .modebar-btn .icon path","fill: "+u.color),r.addRelatedStyleRule(l,"#"+l+" .modebar-btn:hover .icon path","fill: "+u.activecolor),r.addRelatedStyleRule(l,"#"+l+" .modebar-btn.active .icon path","fill: "+u.activecolor);var d=!this.hasButtons(a),w=this.hasLogo!==i.displaylogo,v=this.locale!==i.locale;if(this.locale=i.locale,(d||w||v)&&(this.removeAllButtons(),this.updateButtons(a),i.watermark||i.displaylogo)){var p=this.getLogo();i.watermark&&(p.className=p.className+" watermark"),c.modebar.orientation==="v"?this.element.insertBefore(p,this.element.childNodes[0]):this.element.appendChild(p),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(n){var a=this;this.buttons=n,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(i){var c=a.createGroup();i.forEach(function(l){var u=l.name;if(!u)throw new Error("must provide button 'name' in button config");if(a.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");a.buttonsNames.push(u);var f=a.createButton(l);a.buttonElements.push(f),c.appendChild(f)}),a.element.appendChild(c)})},t.createGroup=function(){var n=document.createElement("div");return n.className="modebar-group",n},t.createButton=function(n){var a=this,i=document.createElement("a");i.setAttribute("rel","tooltip"),i.className="modebar-btn";var c=n.title;c===void 0?c=n.name:typeof c=="function"&&(c=c(this.graphInfo)),(c||c===0)&&i.setAttribute("data-title",c),n.attr!==void 0&&i.setAttribute("data-attr",n.attr);var l=n.val;if(l!==void 0&&(typeof l=="function"&&(l=l(this.graphInfo)),i.setAttribute("data-val",l)),typeof n.click!="function")throw new Error("must provide button 'click' function in button config");i.addEventListener("click",function(f){n.click(a.graphInfo,f),a.updateActiveButton(f.currentTarget)}),i.setAttribute("data-toggle",n.toggle||!1),n.toggle&&T.select(i).classed("active",!0);var u=n.icon;return typeof u=="function"?i.appendChild(u()):i.appendChild(this.createIcon(u||m.question)),i.setAttribute("data-gravity",n.gravity||"n"),i},t.createIcon=function(n){var a,i=k(n.height)?Number(n.height):n.ascent-n.descent,c="http://www.w3.org/2000/svg";if(n.path){(a=document.createElementNS(c,"svg")).setAttribute("viewBox",[0,0,n.width,i].join(" ")),a.setAttribute("class","icon");var l=document.createElementNS(c,"path");l.setAttribute("d",n.path),n.transform?l.setAttribute("transform",n.transform):n.ascent!==void 0&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+n.ascent+")"),a.appendChild(l)}return n.svg&&(a=s.parseFromString(n.svg,"application/xml").childNodes[0]),a.setAttribute("height","1em"),a.setAttribute("width","1em"),a},t.updateActiveButton=function(n){var a=this.graphInfo._fullLayout,i=n!==void 0?n.getAttribute("data-attr"):null;this.buttonElements.forEach(function(c){var l=c.getAttribute("data-val")||!0,u=c.getAttribute("data-attr"),f=c.getAttribute("data-toggle")==="true",d=T.select(c);if(f)u===i&&d.classed("active",!d.classed("active"));else{var w=u===null?u:r.nestedProperty(a,u).get();d.classed("active",w===l)}})},t.hasButtons=function(n){var a=this.buttons;if(!a||n.length!==a.length)return!1;for(var i=0;i<n.length;++i){if(n[i].length!==a[i].length)return!1;for(var c=0;c<n[i].length;c++)if(n[i][c].name!==a[i][c].name)return!1}return!0},t.getLogo=function(){var n=this.createGroup(),a=document.createElement("a");return a.href="https://plotly.com/",a.target="_blank",a.setAttribute("data-title",r._(this.graphInfo,"Produced with Plotly.js")+" (v"+h+")"),a.className="modebar-btn plotlyjsicon modebar-btn--logo",a.appendChild(this.createIcon(m.newplotlylogo)),n.appendChild(a),n},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){r.removeElement(this.container.querySelector(".modebar")),r.deleteRelatedStyleRule(this._uid)},W.exports=function(n,a){var i=n._fullLayout,c=new e({graphInfo:n,container:i._modebardiv.node(),buttons:a});return i._privateplot&&T.select(c.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),c}},37113:function(W,I,o){var T=o(41940),k=o(22399),r=(0,o(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});W.exports={visible:{valType:"boolean",editType:"plot"},buttons:r,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:T({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(W){W.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(W,I,o){var T=o(71828),k=o(7901),r=o(44467),m=o(85501),h=o(37113),s=o(89573);function e(t,n,a,i){var c=i.calendar;function l(f,d){return T.coerce(t,n,h.buttons,f,d)}if(l("visible")){var u=l("step");u!=="all"&&(!c||c==="gregorian"||u!=="month"&&u!=="year"?l("stepmode"):n.stepmode="backward",l("count")),l("label")}}W.exports=function(t,n,a,i,c){var l=t.rangeselector||{},u=r.newContainer(n,"rangeselector");function f(v,p){return T.coerce(l,u,h,v,p)}if(f("visible",m(l,u,{name:"buttons",handleItemDefaults:e,calendar:c}).length>0)){var d=function(v,p,y){for(var b=y.filter(function(A){return p[A].anchor===v._id}),x=0,_=0;_<b.length;_++){var g=p[b[_]].domain;g&&(x=Math.max(g[1],x))}return[v.domain[0],x+s.yPad]}(n,a,i);f("x",d[0]),f("y",d[1]),T.noneOrAll(t,n,["x","y"]),f("xanchor"),f("yanchor"),T.coerceFont(f,"font",a.font);var w=f("bgcolor");f("activecolor",k.contrast(w,s.lightAmount,s.darkAmount)),f("bordercolor"),f("borderwidth")}}},21598:function(W,I,o){var T=o(39898),k=o(73972),r=o(74875),m=o(7901),h=o(91424),s=o(71828),e=s.strTranslate,t=o(63893),n=o(41675),a=o(18783),i=a.LINE_SPACING,c=a.FROM_TL,l=a.FROM_BR,u=o(89573),f=o(70565);function d(p){return p._id}function w(p,y,b){var x=s.ensureSingle(p,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});x.attr({rx:u.rx,ry:u.ry}),x.call(m.stroke,y.bordercolor).call(m.fill,function(_,g){return g._isActive||g._isHovered?_.activecolor:_.bgcolor}(y,b)).style("stroke-width",y.borderwidth+"px")}function v(p,y,b,x){var _,g;s.ensureSingle(p,"text","selector-text",function(A){A.attr("text-anchor","middle")}).call(h.font,y.font).text((_=b,g=x._fullLayout._meta,_.label?g?s.templateString(_.label,g):_.label:_.step==="all"?"all":_.count+_.step.charAt(0))).call(function(A){t.convertToTspans(A,x)})}W.exports=function(p){var y=p._fullLayout._infolayer.selectAll(".rangeselector").data(function(b){for(var x=n.list(b,"x",!0),_=[],g=0;g<x.length;g++){var A=x[g];A.rangeselector&&A.rangeselector.visible&&_.push(A)}return _}(p),d);y.enter().append("g").classed("rangeselector",!0),y.exit().remove(),y.style({cursor:"pointer","pointer-events":"all"}),y.each(function(b){var x=T.select(this),_=b,g=_.rangeselector,A=x.selectAll("g.button").data(s.filterVisible(g.buttons));A.enter().append("g").classed("button",!0),A.exit().remove(),A.each(function(M){var L=T.select(this),E=f(_,M);M._isActive=function(S,O,P){if(O.step==="all")return S.autorange===!0;var U=Object.keys(P);return S.range[0]===P[U[0]]&&S.range[1]===P[U[1]]}(_,M,E),L.call(w,g,M),L.call(v,g,M,p),L.on("click",function(){p._dragged||k.call("_guiRelayout",p,E)}),L.on("mouseover",function(){M._isHovered=!0,L.call(w,g,M)}),L.on("mouseout",function(){M._isHovered=!1,L.call(w,g,M)})}),function(M,L,E,S,O){var P=0,U=0,R=E.borderwidth;L.each(function(){var et=T.select(this).select(".selector-text"),J=E.font.size*i,X=Math.max(J*t.lineCount(et),16)+3;U=Math.max(U,X)}),L.each(function(){var et=T.select(this),J=et.select(".selector-rect"),X=et.select(".selector-text"),Y=X.node()&&h.bBox(X.node()).width,Z=E.font.size*i,tt=t.lineCount(X),rt=Math.max(Y+10,u.minButtonWidth);et.attr("transform",e(R+P,R)),J.attr({x:0,y:0,width:rt,height:U}),t.positionText(X,rt/2,U/2-(tt-1)*Z/2+3),P+=rt+5});var j=M._fullLayout._size,B=j.l+j.w*E.x,z=j.t+j.h*(1-E.y),G="left";s.isRightAnchor(E)&&(B-=P,G="right"),s.isCenterAnchor(E)&&(B-=P/2,G="center");var V="top";s.isBottomAnchor(E)&&(z-=U,V="bottom"),s.isMiddleAnchor(E)&&(z-=U/2,V="middle"),P=Math.ceil(P),U=Math.ceil(U),B=Math.round(B),z=Math.round(z),r.autoMargin(M,S+"-range-selector",{x:E.x,y:E.y,l:P*c[G],r:P*l[G],b:U*l[V],t:U*c[V]}),O.attr("transform",e(B,z))}(p,A,g,_._name,x)})}},70565:function(W,I,o){var T=o(81041),k=o(71828).titleCase;W.exports=function(r,m){var h=r._name,s={};if(m.step==="all")s[h+".autorange"]=!0;else{var e=function(t,n){var a,i=t.range,c=new Date(t.r2l(i[1])),l=n.step,u=T["utc"+k(l)],f=n.count;switch(n.stepmode){case"backward":a=t.l2r(+u.offset(c,-f));break;case"todate":var d=u.offset(c,-f);a=t.l2r(+u.ceil(d))}return[a,i[1]]}(r,m);s[h+".range[0]"]=e[0],s[h+".range[1]"]=e[1]}return s}},97218:function(W,I,o){W.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:o(37113)}}},layoutAttributes:o(37113),handleDefaults:o(28674),draw:o(21598)}},75148:function(W,I,o){var T=o(22399);W.exports={bgcolor:{valType:"color",dflt:T.background,editType:"plot"},bordercolor:{valType:"color",dflt:T.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(W,I,o){var T=o(41675).list,k=o(71739).getAutoRange,r=o(73251);W.exports=function(m){for(var h=T(m,"x",!0),s=0;s<h.length;s++){var e=h[s],t=e[r.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(m,e))}}},73251:function(W){W.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(W,I,o){var T=o(71828),k=o(44467),r=o(41675),m=o(75148),h=o(47850);W.exports=function(s,e,t){var n=s[t],a=e[t];if(n.rangeslider||e._requestRangeslider[a._id]){T.isPlainObject(n.rangeslider)||(n.rangeslider={});var i,c,l=n.rangeslider,u=k.newContainer(a,"rangeslider");if(x("visible")){x("bgcolor",e.plot_bgcolor),x("bordercolor"),x("borderwidth"),x("thickness"),x("autorange",!a.isValidRange(l.range)),x("range");var f=e._subplots;if(f)for(var d=f.cartesian.filter(function(g){return g.substr(0,g.indexOf("y"))===r.name2id(t)}).map(function(g){return g.substr(g.indexOf("y"),g.length)}),w=T.simpleMap(d,r.id2name),v=0;v<w.length;v++){var p=w[v];i=l[p]||{},c=k.newContainer(u,p,"yaxis");var y,b=e[p];i.range&&b.isValidRange(i.range)&&(y="fixed"),_("rangemode",y)!=="match"&&_("range",b.range.slice())}u._input=l}}function x(g,A){return T.coerce(l,u,m,g,A)}function _(g,A){return T.coerce(i,c,h,g,A)}}},72413:function(W,I,o){var T=o(39898),k=o(73972),r=o(74875),m=o(71828),h=m.strTranslate,s=o(91424),e=o(7901),t=o(92998),n=o(93612),a=o(41675),i=o(28569),c=o(6964),l=o(73251);function u(y,b,x,_){var g=m.ensureSingle(y,"rect",l.bgClassName,function(E){E.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),A=_.borderwidth%2==0?_.borderwidth:_.borderwidth-1,M=-_._offsetShift,L=s.crispRound(b,_.borderwidth);g.attr({width:_._width+A,height:_._height+A,transform:h(M,M),"stroke-width":L}).call(e.stroke,_.bordercolor).call(e.fill,_.bgcolor)}function f(y,b,x,_){var g=b._fullLayout;m.ensureSingleById(g._topdefs,"clipPath",_._clipId,function(A){A.append("rect").attr({x:0,y:0})}).select("rect").attr({width:_._width,height:_._height})}function d(y,b,x,_){var g,A=b.calcdata,M=y.selectAll("g."+l.rangePlotClassName).data(x._subplotsWith,m.identity);M.enter().append("g").attr("class",function(L){return l.rangePlotClassName+" "+L}).call(s.setClipUrl,_._clipId,b),M.order(),M.exit().remove(),M.each(function(L,E){var S=T.select(this),O=E===0,P=a.getFromId(b,L,"y"),U=P._name,R=_[U],j={data:[],layout:{xaxis:{type:x.type,domain:[0,1],range:_.range.slice(),calendar:x.calendar},width:_._width,height:_._height,margin:{t:0,b:0,l:0,r:0}},_context:b._context};x.rangebreaks&&(j.layout.xaxis.rangebreaks=x.rangebreaks),j.layout[U]={type:P.type,domain:[0,1],range:R.rangemode!=="match"?R.range.slice():P.range.slice(),calendar:P.calendar},P.rangebreaks&&(j.layout[U].rangebreaks=P.rangebreaks),r.supplyDefaults(j);var B=j._fullLayout.xaxis,z=j._fullLayout[U];B.clearCalc(),B.setScale(),z.clearCalc(),z.setScale();var G={id:L,plotgroup:S,xaxis:B,yaxis:z,isRangePlot:!0};O?g=G:(G.mainplot="xy",G.mainplotinfo=g),n.rangePlot(b,G,function(V,et){for(var J=[],X=0;X<V.length;X++){var Y=V[X],Z=Y[0].trace;Z.xaxis+Z.yaxis===et&&J.push(Y)}return J}(A,L))})}function w(y,b,x,_,g){m.ensureSingle(y,"rect",l.maskMinClassName,function(A){A.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",_._height).call(e.fill,l.maskColor),m.ensureSingle(y,"rect",l.maskMaxClassName,function(A){A.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",_._height).call(e.fill,l.maskColor),g.rangemode!=="match"&&(m.ensureSingle(y,"rect",l.maskMinOppAxisClassName,function(A){A.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",_._width).call(e.fill,l.maskOppAxisColor),m.ensureSingle(y,"rect",l.maskMaxOppAxisClassName,function(A){A.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",_._width).style("border-top",l.maskOppBorder).call(e.fill,l.maskOppAxisColor))}function v(y,b,x,_){b._context.staticPlot||m.ensureSingle(y,"rect",l.slideBoxClassName,function(g){g.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:_._height,fill:l.slideBoxFill})}function p(y,b,x,_){var g=m.ensureSingle(y,"g",l.grabberMinClassName),A=m.ensureSingle(y,"g",l.grabberMaxClassName),M={x:0,width:l.handleWidth,rx:l.handleRadius,fill:e.background,stroke:e.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},L={y:Math.round(_._height/4),height:Math.round(_._height/2)};m.ensureSingle(g,"rect",l.handleMinClassName,function(S){S.attr(M)}).attr(L),m.ensureSingle(A,"rect",l.handleMaxClassName,function(S){S.attr(M)}).attr(L);var E={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:b._context.staticPlot?void 0:l.grabAreaCursor};m.ensureSingle(g,"rect",l.grabAreaMinClassName,function(S){S.attr(E)}).attr("height",_._height),m.ensureSingle(A,"rect",l.grabAreaMaxClassName,function(S){S.attr(E)}).attr("height",_._height)}W.exports=function(y){for(var b=y._fullLayout,x=b._rangeSliderData,_=0;_<x.length;_++){var g=x[_][l.name];g._clipId=g._id+"-"+b._uid}var A=b._infolayer.selectAll("g."+l.containerClassName).data(x,function(M){return M._name});A.exit().each(function(M){var L=M[l.name];b._topdefs.select("#"+L._clipId).remove()}).remove(),x.length!==0&&(A.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),A.each(function(M){var L=T.select(this),E=M[l.name],S=b[a.id2name(M.anchor)],O=E[a.id2name(M.anchor)];if(E.range){var P,U=m.simpleMap(E.range,M.r2l),R=m.simpleMap(M.range,M.r2l);P=R[0]<R[1]?[Math.min(U[0],R[0]),Math.max(U[1],R[1])]:[Math.max(U[0],R[0]),Math.min(U[1],R[1])],E.range=E._input.range=m.simpleMap(P,M.l2r)}M.cleanRange("rangeslider.range");var j=b._size,B=M.domain;E._width=j.w*(B[1]-B[0]);var z=Math.round(j.l+j.w*B[0]),G=Math.round(j.t+j.h*(1-M._counterDomainMin)+(M.side==="bottom"?M._depth:0)+E._offsetShift+l.extraPad);L.attr("transform",h(z,G)),E._rl=m.simpleMap(E.range,M.r2l);var V=E._rl[0],et=E._rl[1],J=et-V;if(E.p2d=function(pt){return pt/E._width*J+V},E.d2p=function(pt){return(pt-V)/J*E._width},M.rangebreaks){var X=M.locateBreaks(V,et);if(X.length){var Y,Z,tt=0;for(Y=0;Y<X.length;Y++)tt+=(Z=X[Y]).max-Z.min;var rt=E._width/(et-V-tt),nt=[-rt*V];for(Y=0;Y<X.length;Y++)Z=X[Y],nt.push(nt[nt.length-1]-rt*(Z.max-Z.min));for(E.d2p=function(pt){for(var gt=nt[0],kt=0;kt<X.length;kt++){var yt=X[kt];if(pt>=yt.max)gt=nt[kt+1];else if(pt<yt.min)break}return gt+rt*pt},Y=0;Y<X.length;Y++)(Z=X[Y]).pmin=E.d2p(Z.min),Z.pmax=E.d2p(Z.max);E.p2d=function(pt){for(var gt=nt[0],kt=0;kt<X.length;kt++){var yt=X[kt];if(pt>=yt.pmax)gt=nt[kt+1];else if(pt<yt.pmin)break}return(pt-gt)/rt}}}if(O.rangemode!=="match"){var ot=S.r2l(O.range[0]),ct=S.r2l(O.range[1])-ot;E.d2pOppAxis=function(pt){return(pt-ot)/ct*E._height}}L.call(u,y,M,E).call(f,y,M,E).call(d,y,M,E).call(w,y,M,E,O).call(v,y,M,E).call(p,y,M,E),function(pt,gt,kt,yt){if(!gt._context.staticPlot){var mt=pt.select("rect."+l.slideBoxClassName).node(),Ot=pt.select("rect."+l.grabAreaMinClassName).node(),vt=pt.select("rect."+l.grabAreaMaxClassName).node();pt.on("mousedown",xt),pt.on("touchstart",xt)}function xt(){var st=T.event,at=st.target,ht=st.clientX||st.touches[0].clientX,Lt=ht-pt.node().getBoundingClientRect().left,Mt=yt.d2p(kt._rl[0]),_t=yt.d2p(kt._rl[1]),St=i.coverSlip();function Dt(Tt){var bt,It,zt,Ft=+(Tt.clientX||Tt.touches[0].clientX)-ht;switch(at){case mt:if(zt="ew-resize",Mt+Ft>kt._length||_t+Ft<0)return;bt=Mt+Ft,It=_t+Ft;break;case Ot:if(zt="col-resize",Mt+Ft>kt._length)return;bt=Mt+Ft,It=_t;break;case vt:if(zt="col-resize",_t+Ft<0)return;bt=Mt,It=_t+Ft;break;default:zt="ew-resize",bt=Lt,It=Lt+Ft}if(It<bt){var $t=It;It=bt,bt=$t}yt._pixelMin=bt,yt._pixelMax=It,c(T.select(St),zt),function(Wt,Xt,ae,Qt){function de(ie){return ae.l2r(m.constrain(ie,Qt._rl[0],Qt._rl[1]))}var ye=de(Qt.p2d(Qt._pixelMin)),ve=de(Qt.p2d(Qt._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",Xt,ae._name+".range",[ye,ve])})}(0,gt,kt,yt)}function ut(){St.removeEventListener("mousemove",Dt),St.removeEventListener("mouseup",ut),this.removeEventListener("touchmove",Dt),this.removeEventListener("touchend",ut),m.removeElement(St)}this.addEventListener("touchmove",Dt),this.addEventListener("touchend",ut),St.addEventListener("mousemove",Dt),St.addEventListener("mouseup",ut)}}(L,y,M,E),function(pt,gt,kt,yt,mt,Ot){var vt=l.handleWidth/2;function xt(Tt){return m.constrain(Tt,0,yt._width)}function st(Tt){return m.constrain(Tt,0,yt._height)}function at(Tt){return m.constrain(Tt,-vt,yt._width+vt)}var ht=xt(yt.d2p(kt._rl[0])),Lt=xt(yt.d2p(kt._rl[1]));if(pt.select("rect."+l.slideBoxClassName).attr("x",ht).attr("width",Lt-ht),pt.select("rect."+l.maskMinClassName).attr("width",ht),pt.select("rect."+l.maskMaxClassName).attr("x",Lt).attr("width",yt._width-Lt),Ot.rangemode!=="match"){var Mt=yt._height-st(yt.d2pOppAxis(mt._rl[1])),_t=yt._height-st(yt.d2pOppAxis(mt._rl[0]));pt.select("rect."+l.maskMinOppAxisClassName).attr("x",ht).attr("height",Mt).attr("width",Lt-ht),pt.select("rect."+l.maskMaxOppAxisClassName).attr("x",ht).attr("y",_t).attr("height",yt._height-_t).attr("width",Lt-ht),pt.select("rect."+l.slideBoxClassName).attr("y",Mt).attr("height",_t-Mt)}var St=.5,Dt=Math.round(at(ht-vt))-St,ut=Math.round(at(Lt-vt))+St;pt.select("g."+l.grabberMinClassName).attr("transform",h(Dt,St)),pt.select("g."+l.grabberMaxClassName).attr("transform",h(ut,St))}(L,0,M,E,S,O),M.side==="bottom"&&t.draw(y,M._id+"title",{propContainer:M,propName:M._name+".title",placeholder:b._dfltTitle.x,attributes:{x:M._offset+M._length/2,y:G+E._height+E._offsetShift+10+1.5*M.title.font.size,"text-anchor":"middle"}})}))}},549:function(W,I,o){var T=o(41675),k=o(63893),r=o(73251),m=o(18783).LINE_SPACING,h=r.name;function s(e){var t=e&&e[h];return t&&t.visible}I.isVisible=s,I.makeData=function(e){var t=T.list({_fullLayout:e},"x",!0),n=e.margin,a=[];if(!e._has("gl2d"))for(var i=0;i<t.length;i++){var c=t[i];if(s(c)){a.push(c);var l=c[h];l._id=h+c._id,l._height=(e.height-n.b-n.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}e._rangeSliderData=a},I.autoMarginOpts=function(e,t){var n=e._fullLayout,a=t[h],i=t._id.charAt(0),c=0,l=0;return t.side==="bottom"&&(c=t._depth,t.title.text!==n._dfltTitle[i]&&(l=1.5*t.title.font.size+10+a._offsetShift,l+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*m)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:a._height+c+Math.max(n.margin.b,l),pad:r.extraPad+2*a._offsetShift}}},13137:function(W,I,o){var T=o(71828),k=o(75148),r=o(47850),m=o(549);W.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:T.extendFlat({},k,{yaxis:r})}}},layoutAttributes:o(75148),handleDefaults:o(26377),calcAutorange:o(88443),draw:o(72413),isVisible:m.isVisible,makeData:m.makeData,autoMarginOpts:m.autoMarginOpts}},47850:function(W){W.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(W,I,o){var T=o(50215),k=o(82196).line,r=o(79952).P,m=o(1426).extendFlat,h=o(30962).overrideAll,s=o(44467).templatedArray;o(24695),W.exports=h(s("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:m({},T.xref,{}),yref:m({},T.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:m({},k.width,{min:1,dflt:1}),dash:m({},r,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(W){W.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(W,I,o){var T=o(71828),k=o(89298),r=o(85501),m=o(8389),h=o(30477);function s(e,t,n){function a(L,E){return T.coerce(e,t,m,L,E)}var i=a("path"),c=a("type",i?"path":"rect")!=="path";c&&delete t.path,a("opacity"),a("line.color"),a("line.width"),a("line.dash");for(var l=["x","y"],u=0;u<2;u++){var f,d,w,v=l[u],p={_fullLayout:n},y=k.coerceRef(e,t,p,v);if((f=k.getFromId(p,y))._selectionIndices.push(t._index),w=h.rangeToShapePosition(f),d=h.shapePositionToRange(f),c){var b=v+"0",x=v+"1",_=e[b],g=e[x];e[b]=d(e[b],!0),e[x]=d(e[x],!0),k.coercePosition(t,p,a,y,b),k.coercePosition(t,p,a,y,x);var A=t[b],M=t[x];A!==void 0&&M!==void 0&&(t[b]=w(A),t[x]=w(M),e[b]=_,e[x]=g)}}c&&T.noneOrAll(e,t,["x0","x1","y0","y1"])}W.exports=function(e,t){r(e,t,{name:"selections",handleItemDefaults:s});for(var n=t.selections,a=0;a<n.length;a++){var i=n[a];i&&i.path===void 0&&(i.x0!==void 0&&i.x1!==void 0&&i.y0!==void 0&&i.y1!==void 0||(t.selections[a]=null))}}},32485:function(W,I,o){var T=o(60165).readPaths,k=o(42359),r=o(51873).clearOutlineControllers,m=o(7901),h=o(91424),s=o(44467).arrayEditor,e=o(30477),t=e.getPathString;function n(u){var f=u._fullLayout;for(var d in r(u),f._selectionLayer.selectAll("path").remove(),f._plots){var w=f._plots[d].selectionLayer;w&&w.selectAll("path").remove()}for(var v=0;v<f.selections.length;v++)i(u,v)}function a(u){return u._context.editSelection}function i(u,f){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+f+'"]').remove();var d=e.makeSelectionsOptionsAndPlotinfo(u,f),w=d.options,v=d.plotinfo;w._input&&function(p){var y=t(u,w),b={"data-index":f,"fill-rule":"evenodd",d:y},x=w.opacity,_="rgba(0,0,0,0)",g=w.line.color||m.contrast(u._fullLayout.plot_bgcolor),A=w.line.width,M=w.line.dash;A||(A=5,M="solid");var L=a(u)&&u._fullLayout._activeSelectionIndex===f;L&&(_=u._fullLayout.activeselection.fillcolor,x=u._fullLayout.activeselection.opacity);for(var E=[],S=1;S>=0;S--){var O=p.append("path").attr(b).style("opacity",S?.1:x).call(m.stroke,g).call(m.fill,_).call(h.dashLine,S?"solid":M,S?4+A:A);if(c(O,u,w),L){var P=s(u.layout,"selections",w);O.style({cursor:"move"});var U={element:O.node(),plotinfo:v,gd:u,editHelpers:P,isActiveSelection:!0},R=T(y,u);k(R,O,U)}else O.style("pointer-events",S?"all":"none");E[S]=O}var j=E[0];E[1].node().addEventListener("click",function(){return function(B,z){if(a(B)){var G=+z.node().getAttribute("data-index");if(G>=0){if(G===B._fullLayout._activeSelectionIndex)return void l(B);B._fullLayout._activeSelectionIndex=G,B._fullLayout._deactivateSelection=l,n(B)}}}(u,j)})}(u._fullLayout._selectionLayer)}function c(u,f,d){var w=d.xref+d.yref;h.setClipUrl(u,"clip"+f._fullLayout._uid+w,f)}function l(u){a(u)&&u._fullLayout._activeSelectionIndex>=0&&(r(u),delete u._fullLayout._activeSelectionIndex,n(u))}W.exports={draw:n,drawOne:i,activateLastSelection:function(u){if(a(u)){var f=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=f,u._fullLayout._deactivateSelection=l,n(u)}}}},53777:function(W,I,o){var T=o(79952).P,k=o(1426).extendFlat;W.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},T,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(W){W.exports=function(I,o,T){T("newselection.mode"),T("newselection.line.width")&&(T("newselection.line.color"),T("newselection.line.dash")),T("activeselection.fillcolor"),T("activeselection.opacity")}},35855:function(W,I,o){var T=o(64505).selectMode,k=o(51873).clearOutline,r=o(60165),m=r.readPaths,h=r.writePaths,s=r.fixDatesForPaths;W.exports=function(e,t){if(e.length){var n=e[0][0];if(n){var a=n.getAttribute("d"),i=t.gd,c=i._fullLayout.newselection,l=t.plotinfo,u=l.xaxis,f=l.yaxis,d=t.isActiveSelection,w=t.dragmode,v=(i.layout||{}).selections||[];if(!T(w)&&d!==void 0){var p=i._fullLayout._activeSelectionIndex;if(p<v.length)switch(i._fullLayout.selections[p].type){case"rect":w="select";break;case"path":w="lasso"}}var y,b=m(a,i,l,d),x={xref:u._id,yref:f._id,opacity:c.opacity,line:{color:c.line.color,width:c.line.width,dash:c.line.dash}};b.length===1&&(y=b[0]),y&&y.length===5&&w==="select"?(x.type="rect",x.x0=y[0][1],x.y0=y[0][2],x.x1=y[2][1],x.y1=y[2][2]):(x.type="path",u&&f&&s(b,u,f),x.path=h(b),y=null),k(i);for(var _=t.editHelpers,g=(_||{}).modifyItem,A=[],M=0;M<v.length;M++){var L=i._fullLayout.selections[M];if(L){if(A[M]=L._input,d!==void 0&&M===i._fullLayout._activeSelectionIndex){var E=x;switch(L.type){case"rect":g("x0",E.x0),g("x1",E.x1),g("y0",E.y0),g("y1",E.y1);break;case"path":g("path",E.path)}}}else A[M]=L}return d===void 0?(A.push(x),A):_?_.getUpdateObj():{}}}}},75549:function(W,I,o){var T=o(71828).strTranslate;function k(r,m){switch(r.type){case"log":return r.p2d(m);case"date":return r.p2r(m,0,r.calendar);default:return r.p2r(m)}}W.exports={p2r:k,r2p:function(r,m){switch(r.type){case"log":return r.d2p(m);case"date":return r.r2p(m,0,r.calendar);default:return r.r2p(m)}},axValue:function(r){var m=r._id.charAt(0)==="y"?1:0;return function(h){return k(r,h[m])}},getTransform:function(r){return T(r.xaxis._offset,r.yaxis._offset)}}},47322:function(W,I,o){var T=o(32485),k=o(3937);W.exports={moduleType:"component",name:"selections",layoutAttributes:o(8389),supplyLayoutDefaults:o(59402),supplyDrawNewSelectionDefaults:o(90849),includeBasePlot:o(76325)("selections"),draw:T.draw,drawOne:T.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},3937:function(W,I,o){var T=o(52142),k=o(38258),r=o(73972),m=o(91424).dashStyle,h=o(7901),s=o(30211),e=o(23469).makeEventData,t=o(64505),n=t.freeMode,a=t.rectMode,i=t.drawMode,c=t.openMode,l=t.selectMode,u=o(30477),f=o(21459),d=o(42359),w=o(51873).clearOutline,v=o(60165),p=v.handleEllipse,y=v.readPaths,b=o(90551).newShapes,x=o(35855),_=o(32485).activateLastSelection,g=o(71828),A=g.sorterAsc,M=o(61082),L=o(79990),E=o(41675).getFromId,S=o(33306),O=o(61549).redrawReglTraces,P=o(34122),U=P.MINSELECT,R=M.filter,j=M.tester,B=o(75549),z=B.p2r,G=B.axValue,V=B.getTransform;function et(ut){return ut.subplot!==void 0}function J(ut,Tt,bt,It,zt,Ft,$t){var Wt,Xt,ae,Qt,de,ye,ve,ie,se,ke=Tt._hoverdata,Ae=Tt._fullLayout.clickmode.indexOf("event")>-1,Ie=[];if(function(Yt){return Yt&&Array.isArray(Yt)&&Yt[0].hoverOnBox!==!0}(ke)){tt(ut,Tt,Ft);var Te=function(Yt,ne){var re,Pt,Nt=Yt[0],ee=-1,te=[];for(Pt=0;Pt<ne.length;Pt++)if(re=ne[Pt],Nt.fullData._expandedIndex===re.cd[0].trace._expandedIndex){if(Nt.hoverOnBox===!0)break;Nt.pointNumber!==void 0?ee=Nt.pointNumber:Nt.binNumber!==void 0&&(ee=Nt.binNumber,te=Nt.pointNumbers);break}return{pointNumber:ee,pointNumbers:te,searchInfo:re}}(ke,Wt=ot(Tt,bt,It,zt));if(Te.pointNumbers.length>0?function(Yt,ne){var re,Pt,Nt,ee=[];for(Nt=0;Nt<Yt.length;Nt++)(re=Yt[Nt]).cd[0].trace.selectedpoints&&re.cd[0].trace.selectedpoints.length>0&&ee.push(re);if(ee.length===1&&ee[0]===ne.searchInfo&&(Pt=ne.searchInfo.cd[0].trace).selectedpoints.length===ne.pointNumbers.length){for(Nt=0;Nt<ne.pointNumbers.length;Nt++)if(Pt.selectedpoints.indexOf(ne.pointNumbers[Nt])<0)return!1;return!0}return!1}(Wt,Te):function(Yt){var ne,re,Pt=0;for(re=0;re<Yt.length;re++)if((ne=Yt[re].cd[0].trace).selectedpoints&&(ne.selectedpoints.length>1||(Pt+=ne.selectedpoints.length)>1))return!1;return Pt===1}(Wt)&&(ye=pt(Te))){for($t&&$t.remove(),se=0;se<Wt.length;se++)(Xt=Wt[se])._module.selectPoints(Xt,!1);gt(Tt,Wt),rt(Ft),Ae&&Dt(Tt)}else{for(ve=ut.shiftKey&&(ye!==void 0?ye:pt(Te)),ae=function(Yt,ne,re){return{pointNumber:Yt,searchInfo:ne,subtract:!!re}}(Te.pointNumber,Te.searchInfo,ve),Qt=Z(Ft.selectionDefs.concat([ae])),se=0;se<Wt.length;se++)if(de=yt(Wt[se]._module.selectPoints(Wt[se],Qt),Wt[se]),Ie.length)for(var Vt=0;Vt<de.length;Vt++)Ie.push(de[Vt]);else Ie=de;if(gt(Tt,Wt,ie={points:Ie}),ae&&Ft&&Ft.selectionDefs.push(ae),$t){var Zt=Ft.mergedPolygons,Gt=c(Ft.dragmode);d(mt(Zt,Gt),$t,Ft)}Ae&&St(Tt,ie)}}}function X(ut){return"pointNumber"in ut&&"searchInfo"in ut}function Y(ut){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Tt,bt,It,zt){var Ft=ut.searchInfo.cd[0].trace._expandedIndex;return zt.cd[0].trace._expandedIndex===Ft&&It===ut.pointNumber},isRect:!1,degenerate:!1,subtract:!!ut.subtract}}function Z(ut){if(ut.length){for(var Tt=[],bt=X(ut[0])?0:ut[0][0][0],It=bt,zt=X(ut[0])?0:ut[0][0][1],Ft=zt,$t=0;$t<ut.length;$t++)if(X(ut[$t]))Tt.push(Y(ut[$t]));else{var Wt=j(ut[$t]);Wt.subtract=!!ut[$t].subtract,Tt.push(Wt),bt=Math.min(bt,Wt.xmin),It=Math.max(It,Wt.xmax),zt=Math.min(zt,Wt.ymin),Ft=Math.max(Ft,Wt.ymax)}return{xmin:bt,xmax:It,ymin:zt,ymax:Ft,pts:[],contains:function(Xt,ae,Qt,de){for(var ye=!1,ve=0;ve<Tt.length;ve++)Tt[ve].contains(Xt,ae,Qt,de)&&(ye=!Tt[ve].subtract);return ye},isRect:!1,degenerate:!1}}}function tt(ut,Tt,bt){var It=Tt._fullLayout,zt=bt.plotinfo,Ft=bt.dragmode,$t=It._lastSelectedSubplot&&It._lastSelectedSubplot===zt.id,Wt=(ut.shiftKey||ut.altKey)&&!(i(Ft)&&c(Ft));$t&&Wt&&zt.selection&&zt.selection.selectionDefs&&!bt.selectionDefs?(bt.selectionDefs=zt.selection.selectionDefs,bt.mergedPolygons=zt.selection.mergedPolygons):Wt&&zt.selection||rt(bt),$t||(w(Tt),It._lastSelectedSubplot=zt.id)}function rt(ut,Tt){var bt=ut.dragmode,It=ut.plotinfo,zt=ut.gd;(function(de){return de._fullLayout._activeShapeIndex>=0})(zt)&&zt._fullLayout._deactivateShape(zt),function(de){return de._fullLayout._activeSelectionIndex>=0}(zt)&&zt._fullLayout._deactivateSelection(zt);var Ft=zt._fullLayout._zoomlayer,$t=i(bt),Wt=l(bt);if($t||Wt){var Xt,ae,Qt=Ft.selectAll(".select-outline-"+It.id);Qt&&zt._fullLayout._outlining&&($t&&(Xt=b(Qt,ut)),Xt&&r.call("_guiRelayout",zt,{shapes:Xt}),Wt&&!et(ut)&&(ae=x(Qt,ut)),ae&&(zt._fullLayout._noEmitSelectedAtStart=!0,r.call("_guiRelayout",zt,{selections:ae}).then(function(){Tt&&_(zt)})),zt._fullLayout._outlining=!1)}It.selection={},It.selection.selectionDefs=ut.selectionDefs=[],It.selection.mergedPolygons=ut.mergedPolygons=[]}function nt(ut){return ut._id}function ot(ut,Tt,bt,It){if(!ut.calcdata)return[];var zt,Ft,$t,Wt=[],Xt=Tt.map(nt),ae=bt.map(nt);for($t=0;$t<ut.calcdata.length;$t++)if((Ft=(zt=ut.calcdata[$t])[0].trace).visible===!0&&Ft._module&&Ft._module.selectPoints)if(!et({subplot:It})||Ft.subplot!==It&&Ft.geo!==It)if(Ft.type==="splom"){if(Ft._xaxes[Xt[0]]&&Ft._yaxes[ae[0]]){var Qt=ct(Ft._module,zt,Tt[0],bt[0]);Qt.scene=ut._fullLayout._splomScenes[Ft.uid],Wt.push(Qt)}}else if(Ft.type==="sankey"){var de=ct(Ft._module,zt,Tt[0],bt[0]);Wt.push(de)}else{if(Xt.indexOf(Ft.xaxis)===-1||ae.indexOf(Ft.yaxis)===-1)continue;Wt.push(ct(Ft._module,zt,E(ut,Ft.xaxis),E(ut,Ft.yaxis)))}else Wt.push(ct(Ft._module,zt,Tt[0],bt[0]));return Wt}function ct(ut,Tt,bt,It){return{_module:ut,cd:Tt,xaxis:bt,yaxis:It}}function pt(ut){var Tt=ut.searchInfo.cd[0].trace,bt=ut.pointNumber,It=ut.pointNumbers,zt=It.length>0?It[0]:bt;return!!Tt.selectedpoints&&Tt.selectedpoints.indexOf(zt)>-1}function gt(ut,Tt,bt){var It,zt;for(It=0;It<Tt.length;It++){var Ft=Tt[It].cd[0].trace._fullInput,$t=ut._fullLayout._tracePreGUI[Ft.uid]||{};$t.selectedpoints===void 0&&($t.selectedpoints=Ft._input.selectedpoints||null)}if(bt){var Wt=bt.points||[];for(It=0;It<Tt.length;It++)(zt=Tt[It].cd[0].trace)._input.selectedpoints=zt._fullInput.selectedpoints=[],zt._fullInput!==zt&&(zt.selectedpoints=[]);for(var Xt=0;Xt<Wt.length;Xt++){var ae=Wt[Xt],Qt=ae.data,de=ae.fullData,ye=ae.pointIndex,ve=ae.pointIndices;ve?([].push.apply(Qt.selectedpoints,ve),zt._fullInput!==zt&&[].push.apply(de.selectedpoints,ve)):(Qt.selectedpoints.push(ye),zt._fullInput!==zt&&de.selectedpoints.push(ye))}}else for(It=0;It<Tt.length;It++)delete(zt=Tt[It].cd[0].trace).selectedpoints,delete zt._input.selectedpoints,zt._fullInput!==zt&&delete zt._fullInput.selectedpoints;(function(ie,se){for(var ke=!1,Ae=0;Ae<se.length;Ae++){var Ie=se[Ae],Te=Ie.cd;r.traceIs(Te[0].trace,"regl")&&(ke=!0);var Vt=Ie._module,Zt=Vt.styleOnSelect||Vt.style;Zt&&(Zt(ie,Te,Te[0].node3),Te[0].nodeRangePlot3&&Zt(ie,Te,Te[0].nodeRangePlot3))}ke&&(S(ie),O(ie))})(ut,Tt)}function kt(ut,Tt,bt){for(var It=(bt?T.difference:T.union)({regions:ut},{regions:[Tt]}).regions.reverse(),zt=0;zt<It.length;zt++){var Ft=It[zt];Ft.subtract=ht(Ft,It.slice(0,zt))}return It}function yt(ut,Tt){if(Array.isArray(ut))for(var bt=Tt.cd,It=Tt.cd[0].trace,zt=0;zt<ut.length;zt++)ut[zt]=e(ut[zt],It,bt);return ut}function mt(ut,Tt){for(var bt=[],It=0;It<ut.length;It++){bt[It]=[];for(var zt=0;zt<ut[It].length;zt++){bt[It][zt]=[],bt[It][zt][0]=zt?"L":"M";for(var Ft=0;Ft<ut[It][zt].length;Ft++)bt[It][zt].push(ut[It][zt][Ft])}Tt||bt[It].push(["Z",bt[It][0][1],bt[It][0][2]])}return bt}function Ot(ut,Tt){for(var bt,It,zt=[],Ft=[],$t=0;$t<Tt.length;$t++){var Wt=Tt[$t];It=Wt._module.selectPoints(Wt,ut),Ft.push(It),bt=yt(It,Wt),zt=zt.concat(bt)}return zt}function vt(ut,Tt,bt,It,zt){var Ft,$t,Wt,Xt=!!It;zt&&(Ft=zt.plotinfo,$t=zt.xaxes[0]._id,Wt=zt.yaxes[0]._id);var ae=[],Qt=[],de=at(ut),ye=ut._fullLayout;if(Ft){var ve=ye._zoomlayer,ie=ye.dragmode,se=i(ie),ke=l(ie);if(se||ke){var Ae=E(ut,$t,"x"),Ie=E(ut,Wt,"y");if(Ae&&Ie){var Te=ve.selectAll(".select-outline-"+Ft.id);if(Te&&ut._fullLayout._outlining&&Te.length){for(var Vt=Te[0][0].getAttribute("d"),Zt=y(Vt,ut,Ft),Gt=[],Yt=0;Yt<Zt.length;Yt++){for(var ne=Zt[Yt],re=[],Pt=0;Pt<ne.length;Pt++)re.push([Lt(Ae,ne[Pt][1]),Lt(Ie,ne[Pt][2])]);re.xref=$t,re.yref=Wt,re.subtract=ht(re,Gt),Gt.push(re)}de=de.concat(Gt)}}}}var Nt=$t&&Wt?[$t+Wt]:ye._subplots.cartesian;(function(Cr){var Er=Cr.calcdata;if(Er)for(var _r=0;_r<Er.length;_r++){var Sr=Er[_r][0].trace,Xr=Cr._fullLayout._splomScenes;if(Xr){var en=Xr[Sr.uid];en&&(en.selectBatch=[])}}})(ut);for(var ee={},te=0;te<Nt.length;te++){var ge=Nt[te],pe=ge.indexOf("y"),me=ge.slice(0,pe),ce=ge.slice(pe),we=$t&&Wt?bt:void 0;if(we=st(de,me,ce,we)){var ue=It;if(!Xt){var he=E(ut,me,"x"),be=E(ut,ce,"y");ue=ot(ut,[he],[be],ge);for(var Pe=0;Pe<ue.length;Pe++){var De=ue[Pe],Ue=De.cd[0],tr=Ue.trace;if(De._module.name==="scattergl"&&!Ue.t.xpx){var Ge=tr.x,Ze=tr.y,We=tr._length;Ue.t.xpx=[],Ue.t.ypx=[];for(var pr=0;pr<We;pr++)Ue.t.xpx[pr]=he.c2p(Ge[pr]),Ue.t.ypx[pr]=be.c2p(Ze[pr])}De._module.name==="splom"&&(ee[tr.uid]||(ee[tr.uid]=!0))}}var xr=Ot(we,ue);ae=ae.concat(xr),Qt=Qt.concat(ue)}}var sr={points:ae};gt(ut,Qt,sr);var $e=ye.clickmode.indexOf("event")>-1&&Tt;if(!Ft&&Tt){var ir=at(ut,!0);if(ir.length){var Ke=ir[0].xref,ar=ir[0].yref;if(Ke&&ar){var fr=Mt(ir);_t([E(ut,Ke,"x"),E(ut,ar,"y")])(sr,fr)}}ut._fullLayout._noEmitSelectedAtStart?ut._fullLayout._noEmitSelectedAtStart=!1:$e&&St(ut,sr),ye._reselect=!1}if(!Ft&&ye._deselect){var mr=ye._deselect;(function(Cr,Er,_r){for(var Sr=0;Sr<_r.length;Sr++){var Xr=_r[Sr];if(Xr.xaxis&&Xr.xaxis._id===Cr&&Xr.yaxis&&Xr.yaxis._id===Er)return!0}return!1})($t=mr.xref,Wt=mr.yref,Qt)||xt(ut,$t,Wt,It),$e&&(sr.points.length?St(ut,sr):Dt(ut)),ye._deselect=!1}return{eventData:sr,selectionTesters:bt}}function xt(ut,Tt,bt,It){It=ot(ut,[E(ut,Tt,"x")],[E(ut,bt,"y")],Tt+bt);for(var zt=0;zt<It.length;zt++){var Ft=It[zt];Ft._module.selectPoints(Ft,!1)}gt(ut,It)}function st(ut,Tt,bt,It){for(var zt,Ft=0;Ft<ut.length;Ft++){var $t=ut[Ft];Tt===$t.xref&&bt===$t.yref&&(zt?It=Z(zt=kt(zt,$t,!!$t.subtract)):(zt=[$t],It=j($t)))}return It}function at(ut,Tt){for(var bt=[],It=ut._fullLayout,zt=It.selections,Ft=zt.length,$t=0;$t<Ft;$t++)if(!Tt||$t===It._activeSelectionIndex){var Wt=zt[$t];if(Wt){var Xt,ae,Qt,de,ye,ve=Wt.xref,ie=Wt.yref,se=E(ut,ve,"x"),ke=E(ut,ie,"y");if(Wt.type==="rect"){ye=[];var Ae=Lt(se,Wt.x0),Ie=Lt(se,Wt.x1),Te=Lt(ke,Wt.y0),Vt=Lt(ke,Wt.y1);ye=[[Ae,Te],[Ae,Vt],[Ie,Vt],[Ie,Te]],Xt=Math.min(Ae,Ie),ae=Math.max(Ae,Ie),Qt=Math.min(Te,Vt),de=Math.max(Te,Vt),ye.xmin=Xt,ye.xmax=ae,ye.ymin=Qt,ye.ymax=de,ye.xref=ve,ye.yref=ie,ye.subtract=!1,ye.isRect=!0,bt.push(ye)}else if(Wt.type==="path")for(var Zt=Wt.path.split("Z"),Gt=[],Yt=0;Yt<Zt.length;Yt++){var ne=Zt[Yt];if(ne){ne+="Z";var re=u.extractPathCoords(ne,f.paramIsX,"raw"),Pt=u.extractPathCoords(ne,f.paramIsY,"raw");Xt=1/0,ae=-1/0,Qt=1/0,de=-1/0,ye=[];for(var Nt=0;Nt<re.length;Nt++){var ee=Lt(se,re[Nt]),te=Lt(ke,Pt[Nt]);ye.push([ee,te]),Xt=Math.min(ee,Xt),ae=Math.max(ee,ae),Qt=Math.min(te,Qt),de=Math.max(te,de)}ye.xmin=Xt,ye.xmax=ae,ye.ymin=Qt,ye.ymax=de,ye.xref=ve,ye.yref=ie,ye.subtract=ht(ye,Gt),Gt.push(ye),bt.push(ye)}}}}return bt}function ht(ut,Tt){for(var bt=!1,It=0;It<Tt.length;It++)for(var zt=Tt[It],Ft=0;Ft<ut.length;Ft++)if(k(ut[Ft],zt)){bt=!bt;break}return bt}function Lt(ut,Tt){return ut.type==="date"&&(Tt=Tt.replace("_"," ")),ut.type==="log"?ut.c2p(Tt):ut.r2p(Tt,null,ut.calendar)}function Mt(ut){for(var Tt=ut.length,bt=[],It=0;It<Tt;It++){var zt=ut[It];bt=(bt=bt.concat(zt)).concat([zt[0]])}return(Ft=bt).isRect=Ft.length===5&&Ft[0][0]===Ft[4][0]&&Ft[0][1]===Ft[4][1]&&Ft[0][0]===Ft[1][0]&&Ft[2][0]===Ft[3][0]&&Ft[0][1]===Ft[3][1]&&Ft[1][1]===Ft[2][1]||Ft[0][1]===Ft[1][1]&&Ft[2][1]===Ft[3][1]&&Ft[0][0]===Ft[3][0]&&Ft[1][0]===Ft[2][0],Ft.isRect&&(Ft.xmin=Math.min(Ft[0][0],Ft[2][0]),Ft.xmax=Math.max(Ft[0][0],Ft[2][0]),Ft.ymin=Math.min(Ft[0][1],Ft[2][1]),Ft.ymax=Math.max(Ft[0][1],Ft[2][1])),Ft;var Ft}function _t(ut){return function(Tt,bt){for(var It,zt,Ft=0;Ft<ut.length;Ft++){var $t=ut[Ft],Wt=$t._id,Xt=Wt.charAt(0);if(bt.isRect){It||(It={});var ae=bt[Xt+"min"],Qt=bt[Xt+"max"];ae!==void 0&&Qt!==void 0&&(It[Wt]=[z($t,ae),z($t,Qt)].sort(A))}else zt||(zt={}),zt[Wt]=bt.map(G($t))}It&&(Tt.range=It),zt&&(Tt.lassoPoints=zt)}}function St(ut,Tt){Tt&&(Tt.selections=(ut.layout||{}).selections||[]),ut.emit("plotly_selected",Tt)}function Dt(ut){ut.emit("plotly_deselect",null)}W.exports={reselect:vt,prepSelect:function(ut,Tt,bt,It,zt){var Ft=!et(It),$t=n(zt),Wt=a(zt),Xt=c(zt),ae=i(zt),Qt=l(zt),de=zt==="drawcircle",ye=zt==="drawline"||de,ve=It.gd,ie=ve._fullLayout,se=Qt&&ie.newselection.mode==="immediate"&&Ft,ke=ie._zoomlayer,Ae=It.element.getBoundingClientRect(),Ie=It.plotinfo,Te=V(Ie),Vt=Tt-Ae.left,Zt=bt-Ae.top;ie._calcInverseTransform(ve);var Gt=g.apply3DTransform(ie._invTransform)(Vt,Zt);Vt=Gt[0],Zt=Gt[1];var Yt,ne,re,Pt,Nt,ee,te,ge=ie._invScaleX,pe=ie._invScaleY,me=Vt,ce=Zt,we="M"+Vt+","+Zt,ue=It.xaxes[0],he=It.yaxes[0],be=ue._length,Pe=he._length,De=ut.altKey&&!(i(zt)&&Xt);tt(ut,ve,It),$t&&(Yt=R([[Vt,Zt]],P.BENDPX));var Ue=ke.selectAll("path.select-outline-"+Ie.id).data([1]),tr=ae?ie.newshape:ie.newselection;ae&&(It.hasText=tr.label.text||tr.label.texttemplate);var Ge=ae&&!Xt?tr.fillcolor:"rgba(0,0,0,0)",Ze=tr.line.color||(Ft?h.contrast(ve._fullLayout.plot_bgcolor):"#7f7f7f");Ue.enter().append("path").attr("class","select-outline select-outline-"+Ie.id).style({opacity:ae?tr.opacity/2:1,"stroke-dasharray":m(tr.line.dash,tr.line.width),"stroke-width":tr.line.width+"px","shape-rendering":"crispEdges"}).call(h.stroke,Ze).call(h.fill,Ge).attr("fill-rule","evenodd").classed("cursor-move",!!ae).attr("transform",Te).attr("d",we+"Z");var We=ke.append("path").attr("class","zoombox-corners").style({fill:h.background,stroke:h.defaultLine,"stroke-width":1}).attr("transform",Te).attr("d","M0,0Z");if(ae&&It.hasText){var pr=ke.select(".label-temp");pr.empty()&&(pr=ke.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var xr=ie._uid+P.SELECTID,sr=[],$e=ot(ve,It.xaxes,It.yaxes,It.subplot);se&&!ut.shiftKey&&(It._clearSubplotSelections=function(){if(Ft){var Ke=ue._id,ar=he._id;xt(ve,Ke,ar,$e);for(var fr=(ve.layout||{}).selections||[],mr=[],Cr=!1,Er=0;Er<fr.length;Er++){var _r=ie.selections[Er];_r.xref!==Ke||_r.yref!==ar?mr.push(fr[Er]):Cr=!0}Cr&&(ve._fullLayout._noEmitSelectedAtStart=!0,r.call("_guiRelayout",ve,{selections:mr}))}});var ir=function(Ke){return Ke.plotinfo.fillRangeItems||_t(Ke.xaxes.concat(Ke.yaxes))}(It);It.moveFn=function(Ke,ar){It._clearSubplotSelections&&(It._clearSubplotSelections(),It._clearSubplotSelections=void 0),me=Math.max(0,Math.min(be,ge*Ke+Vt)),ce=Math.max(0,Math.min(Pe,pe*ar+Zt));var fr=Math.abs(me-Vt),mr=Math.abs(ce-Zt);if(Wt){var Cr,Er,_r;if(Qt){var Sr=ie.selectdirection;switch(Cr=Sr==="any"?mr<Math.min(.6*fr,U)?"h":fr<Math.min(.6*mr,U)?"v":"d":Sr){case"h":Er=de?Pe/2:0,_r=Pe;break;case"v":Er=de?be/2:0,_r=be}}if(ae)switch(ie.newshape.drawdirection){case"vertical":Cr="h",Er=de?Pe/2:0,_r=Pe;break;case"horizontal":Cr="v",Er=de?be/2:0,_r=be;break;case"ortho":fr<mr?(Cr="h",Er=Zt,_r=ce):(Cr="v",Er=Vt,_r=me);break;default:Cr="d"}Cr==="h"?((Pt=ye?p(de,[me,Er],[me,_r]):[[Vt,Er],[Vt,_r],[me,_r],[me,Er]]).xmin=ye?me:Math.min(Vt,me),Pt.xmax=ye?me:Math.max(Vt,me),Pt.ymin=Math.min(Er,_r),Pt.ymax=Math.max(Er,_r),We.attr("d","M"+Pt.xmin+","+(Zt-U)+"h-4v"+2*U+"h4ZM"+(Pt.xmax-1)+","+(Zt-U)+"h4v"+2*U+"h-4Z")):Cr==="v"?((Pt=ye?p(de,[Er,ce],[_r,ce]):[[Er,Zt],[Er,ce],[_r,ce],[_r,Zt]]).xmin=Math.min(Er,_r),Pt.xmax=Math.max(Er,_r),Pt.ymin=ye?ce:Math.min(Zt,ce),Pt.ymax=ye?ce:Math.max(Zt,ce),We.attr("d","M"+(Vt-U)+","+Pt.ymin+"v-4h"+2*U+"v4ZM"+(Vt-U)+","+(Pt.ymax-1)+"v4h"+2*U+"v-4Z")):Cr==="d"&&((Pt=ye?p(de,[Vt,Zt],[me,ce]):[[Vt,Zt],[Vt,ce],[me,ce],[me,Zt]]).xmin=Math.min(Vt,me),Pt.xmax=Math.max(Vt,me),Pt.ymin=Math.min(Zt,ce),Pt.ymax=Math.max(Zt,ce),We.attr("d","M0,0Z"))}else $t&&(Yt.addPt([me,ce]),Pt=Yt.filtered);if(It.selectionDefs&&It.selectionDefs.length?(re=kt(It.mergedPolygons,Pt,De),Pt.subtract=De,ne=Z(It.selectionDefs.concat([Pt]))):(re=[Pt],ne=j(Pt)),d(mt(re,Xt),Ue,It),Qt){var Xr,en=vt(ve,!1),sn=en.eventData?en.eventData.points.slice():[];en=vt(ve,!1,ne,$e,It),ne=en.selectionTesters,te=en.eventData,Xr=Yt?Yt.filtered:Mt(re),L.throttle(xr,P.SELECTDELAY,function(){for(var tn=(sr=Ot(ne,$e)).slice(),qr=0;qr<sn.length;qr++){for(var vn=sn[qr],je=!1,nr=0;nr<tn.length;nr++)if(tn[nr].curveNumber===vn.curveNumber&&tn[nr].pointNumber===vn.pointNumber){je=!0;break}je||tn.push(vn)}tn.length&&(te||(te={}),te.points=tn),ir(te,Xr),function(hr,gr){hr.emit("plotly_selecting",gr)}(ve,te)})}},It.clickFn=function(Ke,ar){if(We.remove(),ve._fullLayout._activeShapeIndex>=0)ve._fullLayout._deactivateShape(ve);else if(!ae){var fr=ie.clickmode;L.done(xr).then(function(){if(L.clear(xr),Ke===2){for(Ue.remove(),Nt=0;Nt<$e.length;Nt++)(ee=$e[Nt])._module.selectPoints(ee,!1);if(gt(ve,$e),rt(It),Dt(ve),$e.length){var mr=$e[0].xaxis,Cr=$e[0].yaxis;if(mr&&Cr){for(var Er=[],_r=ve._fullLayout.selections,Sr=0;Sr<_r.length;Sr++){var Xr=_r[Sr];Xr&&(Xr.xref===mr._id&&Xr.yref===Cr._id||Er.push(Xr))}Er.length<_r.length&&(ve._fullLayout._noEmitSelectedAtStart=!0,r.call("_guiRelayout",ve,{selections:Er}))}}}else fr.indexOf("select")>-1&&J(ar,ve,It.xaxes,It.yaxes,It.subplot,It,Ue),fr==="event"&&St(ve,void 0);s.click(ve,ar,Ie.id)}).catch(g.error)}},It.doneFn=function(){We.remove(),L.done(xr).then(function(){L.clear(xr),!se&&Pt&&It.selectionDefs&&(Pt.subtract=De,It.selectionDefs.push(Pt),It.mergedPolygons.length=0,[].push.apply(It.mergedPolygons,re)),(se||ae)&&rt(It,se),It.doneFnCompleted&&It.doneFnCompleted(sr),Qt&&St(ve,te)}).catch(g.error)}},clearOutline:w,clearSelectionsCache:rt,selectOnClick:J}},89827:function(W,I,o){var T=o(50215),k=o(41940),r=o(82196).line,m=o(79952).P,h=o(1426).extendFlat,s=o(44467).templatedArray,e=(o(24695),o(9012)),t=o(5386).R,n=o(37281);W.exports=s("shape",{visible:h({},e.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:h({},e.legend,{editType:"calc+arraydraw"}),legendgroup:h({},e.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:h({},e.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:k({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:h({},e.legendrank,{editType:"calc+arraydraw"}),legendwidth:h({},e.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:h({},T.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:h({},T.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:h({},r.color,{editType:"arraydraw"}),width:h({},r.width,{editType:"calc+arraydraw"}),dash:h({},m,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(n)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(W,I,o){var T=o(71828),k=o(89298),r=o(21459),m=o(30477);function h(n){return e(n.line.width,n.xsizemode,n.x0,n.x1,n.path,!1)}function s(n){return e(n.line.width,n.ysizemode,n.y0,n.y1,n.path,!0)}function e(n,a,i,c,l,u){var f=n/2,d=u;if(a==="pixel"){var w=l?m.extractPathCoords(l,u?r.paramIsY:r.paramIsX):[i,c],v=T.aggNums(Math.max,null,w),p=T.aggNums(Math.min,null,w),y=p<0?Math.abs(p)+f:f,b=v>0?v+f:f;return{ppad:f,ppadplus:d?y:b,ppadminus:d?b:y}}return{ppad:f}}function t(n,a,i,c,l){var u=n.type==="category"||n.type==="multicategory"?n.r2c:n.d2c;if(a!==void 0)return[u(a),u(i)];if(c){var f,d,w,v,p=1/0,y=-1/0,b=c.match(r.segmentRE);for(n.type==="date"&&(u=m.decodeDate(u)),f=0;f<b.length;f++)(d=l[b[f].charAt(0)].drawn)!==void 0&&(!(w=b[f].substr(1).match(r.paramRE))||w.length<d||((v=u(w[d]))<p&&(p=v),v>y&&(y=v)));return y>=p?[p,y]:void 0}}W.exports=function(n){var a=n._fullLayout,i=T.filterVisible(a.shapes);if(i.length&&n._fullData.length)for(var c=0;c<i.length;c++){var l,u,f=i[c];f._extremes={};var d=k.getRefType(f.xref),w=k.getRefType(f.yref);if(f.xref!=="paper"&&d!=="domain"){var v=f.xsizemode==="pixel"?f.xanchor:f.x0,p=f.xsizemode==="pixel"?f.xanchor:f.x1;(u=t(l=k.getFromId(n,f.xref),v,p,f.path,r.paramIsX))&&(f._extremes[l._id]=k.findExtremes(l,u,h(f)))}if(f.yref!=="paper"&&w!=="domain"){var y=f.ysizemode==="pixel"?f.yanchor:f.y0,b=f.ysizemode==="pixel"?f.yanchor:f.y1;(u=t(l=k.getFromId(n,f.yref),y,b,f.path,r.paramIsY))&&(f._extremes[l._id]=k.findExtremes(l,u,s(f)))}}}},21459:function(W){W.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(W,I,o){var T=o(71828),k=o(89298),r=o(85501),m=o(89827),h=o(30477);function s(e,t,n){function a(B,z){return T.coerce(e,t,m,B,z)}if(t._isShape=!0,a("visible")){a("showlegend")&&(a("legend"),a("legendwidth"),a("legendgroup"),a("legendgrouptitle.text"),T.coerceFont(a,"legendgrouptitle.font"),a("legendrank"));var i=a("path"),c=a("type",i?"path":"rect"),l=c!=="path";l&&delete t.path,a("editable"),a("layer"),a("opacity"),a("fillcolor"),a("fillrule"),a("line.width")&&(a("line.color"),a("line.dash"));for(var u=a("xsizemode"),f=a("ysizemode"),d=["x","y"],w=0;w<2;w++){var v,p,y,b=d[w],x=b+"anchor",_=b==="x"?u:f,g={_fullLayout:n},A=k.coerceRef(e,t,g,b,void 0,"paper");if(k.getRefType(A)==="range"?((v=k.getFromId(g,A))._shapeIndices.push(t._index),y=h.rangeToShapePosition(v),p=h.shapePositionToRange(v)):p=y=T.identity,l){var M=b+"0",L=b+"1",E=e[M],S=e[L];e[M]=p(e[M],!0),e[L]=p(e[L],!0),_==="pixel"?(a(M,0),a(L,10)):(k.coercePosition(t,g,a,A,M,.25),k.coercePosition(t,g,a,A,L,.75)),t[M]=y(t[M]),t[L]=y(t[L]),e[M]=E,e[L]=S}if(_==="pixel"){var O=e[x];e[x]=p(e[x],!0),k.coercePosition(t,g,a,A,x,.25),t[x]=y(t[x]),e[x]=O}}l&&T.noneOrAll(e,t,["x0","x1","y0","y1"]);var P,U,R=c==="line";if(l&&(P=a("label.texttemplate")),P||(U=a("label.text")),U||P){a("label.textangle");var j=a("label.textposition",R?"middle":"middle center");a("label.xanchor"),a("label.yanchor",function(B,z){return B?"bottom":z.indexOf("top")!==-1?"top":z.indexOf("bottom")!==-1?"bottom":"middle"}(R,j)),a("label.padding"),T.coerceFont(a,"label.font",n.font)}}}W.exports=function(e,t){r(e,t,{name:"shapes",handleItemDefaults:s})}},48100:function(W,I,o){var T=o(71828),k=o(89298),r=o(63893),m=o(91424),h=o(60165).readPaths,s=o(30477),e=s.getPathString,t=o(37281),n=o(18783).FROM_TL;W.exports=function(a,i,c,l){if(l.selectAll(".shape-label").remove(),c.label.text||c.label.texttemplate){var u;if(c.label.texttemplate){var f={};if(c.type!=="path"){var d=k.getFromId(a,c.xref),w=k.getFromId(a,c.yref);for(var v in t){var p=t[v](c,d,w);p!==void 0&&(f[v]=p)}}u=T.texttemplateStringForShapes(c.label.texttemplate,{},a._fullLayout._d3locale,f)}else u=c.label.text;var y,b,x,_,g={"data-index":i},A=c.label.font,M=l.append("g").attr(g).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(c.path){var L=e(a,c),E=h(L,a);y=1/0,x=1/0,b=-1/0,_=-1/0;for(var S=0;S<E.length;S++)for(var O=0;O<E[S].length;O++)for(var P=E[S][O],U=1;U<P.length;U+=2){var R=P[U],j=P[U+1];y=Math.min(y,R),b=Math.max(b,R),x=Math.min(x,j),_=Math.max(_,j)}}else{var B=k.getFromId(a,c.xref),z=k.getRefType(c.xref),G=k.getFromId(a,c.yref),V=k.getRefType(c.yref),et=s.getDataToPixel(a,B,!1,z),J=s.getDataToPixel(a,G,!0,V);y=et(c.x0),b=et(c.x1),x=J(c.y0),_=J(c.y1)}var X=c.label.textangle;X==="auto"&&(X=c.type==="line"?function(nt,ot,ct,pt){var gt,kt;return kt=Math.abs(ct-nt),gt=ct>=nt?ot-pt:pt-ot,-180/Math.PI*Math.atan2(gt,kt)}(y,x,b,_):0),M.call(function(nt){return nt.call(m.font,A).attr({}),r.convertToTspans(nt,a),nt});var Y=function(nt,ot,ct,pt,gt,kt,yt){var mt,Ot,vt,xt,st=gt.label.textposition,at=gt.label.textangle,ht=gt.label.padding,Lt=gt.type,Mt=Math.PI/180*kt,_t=Math.sin(Mt),St=Math.cos(Mt),Dt=gt.label.xanchor,ut=gt.label.yanchor;if(Lt==="line"){st==="start"?(mt=nt,Ot=ot):st==="end"?(mt=ct,Ot=pt):(mt=(nt+ct)/2,Ot=(ot+pt)/2),Dt==="auto"&&(Dt=st==="start"?at==="auto"?ct>nt?"left":ct<nt?"right":"center":ct>nt?"right":ct<nt?"left":"center":st==="end"?at==="auto"?ct>nt?"right":ct<nt?"left":"center":ct>nt?"left":ct<nt?"right":"center":"center");var Tt={bottom:-1,middle:0,top:1};if(at==="auto"){var bt=Tt[ut];vt=-ht*_t*bt,xt=ht*St*bt}else vt=ht*{left:1,center:0,right:-1}[Dt],xt=ht*Tt[ut];mt+=vt,Ot+=xt}else vt=ht+3,st.indexOf("right")!==-1?(mt=Math.max(nt,ct)-vt,Dt==="auto"&&(Dt="right")):st.indexOf("left")!==-1?(mt=Math.min(nt,ct)+vt,Dt==="auto"&&(Dt="left")):(mt=(nt+ct)/2,Dt==="auto"&&(Dt="center")),Ot=st.indexOf("top")!==-1?Math.min(ot,pt):st.indexOf("bottom")!==-1?Math.max(ot,pt):(ot+pt)/2,xt=ht,ut==="bottom"?Ot-=xt:ut==="top"&&(Ot+=xt);var It=n[ut],zt=gt.label.font.size,Ft=yt.height;return{textx:mt+(Ft*It-zt)*_t,texty:Ot+-(Ft*It-zt)*St,xanchor:Dt}}(y,x,b,_,c,X,m.bBox(M.node())),Z=Y.textx,tt=Y.texty,rt=Y.xanchor;M.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[rt],y:tt,x:Z,transform:"rotate("+X+","+Z+","+tt+")"}).call(r.positionText,Z,tt)}}},42359:function(W,I,o){var T=o(71828).strTranslate,k=o(28569),r=o(64505),m=r.drawMode,h=r.selectMode,s=o(73972),e=o(7901),t=o(89995),n=t.i000,a=t.i090,i=t.i180,c=t.i270,l=o(51873).clearOutlineControllers,u=o(60165),f=u.pointsOnRectangle,d=u.pointsOnEllipse,w=u.writePaths,v=o(90551).newShapes,p=o(90551).createShapeObj,y=o(35855),b=o(48100);function x(_,g){var A,M,L,E=_[g][1],S=_[g][2],O=_.length;return M=_[A=(g+1)%O][1],L=_[A][2],M===E&&L===S&&(M=_[A=(g+2)%O][1],L=_[A][2]),[A,M,L]}W.exports=function _(g,A,M,L){L||(L=0);var E=M.gd;function S(){_(g,A,M,L++),(d(g[0])||M.hasText)&&O({redrawing:!0})}function O(gt){var kt={};M.isActiveShape!==void 0&&(M.isActiveShape=!1,kt=v(A,M)),M.isActiveSelection!==void 0&&(M.isActiveSelection=!1,kt=y(A,M),E._fullLayout._reselect=!0),Object.keys(kt).length&&s.call((gt||{}).redrawing?"relayout":"_guiRelayout",E,kt)}var P,U,R,j,B,z=E._fullLayout._zoomlayer,G=M.dragmode,V=m(G),et=h(G);if((V||et)&&(E._fullLayout._outlining=!0),l(E),A.attr("d",w(g)),L||!M.isActiveShape&&!M.isActiveSelection||(B=function(gt,kt){for(var yt=0;yt<kt.length;yt++){var mt=kt[yt];gt[yt]=[];for(var Ot=0;Ot<mt.length;Ot++){gt[yt][Ot]=[];for(var vt=0;vt<mt[Ot].length;vt++)gt[yt][Ot][vt]=mt[Ot][vt]}}return gt}([],g),function(gt){P=[];for(var kt=0;kt<g.length;kt++){var yt=g[kt],mt=f(yt),Ot=!mt&&d(yt);P[kt]=[];for(var vt=yt.length,xt=0;xt<vt;xt++)if(yt[xt][0]!=="Z"&&(!Ot||xt===n||xt===a||xt===i||xt===c)){var st,at=mt&&M.isActiveSelection;at&&(st=x(yt,xt));var ht=yt[xt][1],Lt=yt[xt][2],Mt=gt.append(at?"rect":"circle").attr("data-i",kt).attr("data-j",xt).style({fill:e.background,stroke:e.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(at){var _t=st[1]-ht,St=st[2]-Lt,Dt=St?5:Math.max(Math.min(25,Math.abs(_t)-5),5),ut=_t?5:Math.max(Math.min(25,Math.abs(St)-5),5);Mt.classed(St?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Dt).attr("height",ut).attr("x",ht-Dt/2).attr("y",Lt-ut/2).attr("transform",T(_t/2,St/2))}else Mt.classed("cursor-grab",!0).attr("r",5).attr("cx",ht).attr("cy",Lt);P[kt][xt]={element:Mt.node(),gd:E,prepFn:Y,doneFn:tt,clickFn:rt},k.init(P[kt][xt])}}}(z.append("g").attr("class","outline-controllers")),function(){U=[],g.length&&(U[0]={element:A[0][0],gd:E,prepFn:ot,doneFn:ct,clickFn:pt},k.init(U[0]))}()),V&&M.hasText){var J=z.select(".label-temp"),X=p(A,M,M.dragmode);b(E,"label-temp",X,J)}function Y(gt){R=+gt.srcElement.getAttribute("data-i"),j=+gt.srcElement.getAttribute("data-j"),P[R][j].moveFn=Z}function Z(gt,kt){if(g.length){var yt=B[R][j][1],mt=B[R][j][2],Ot=g[R],vt=Ot.length;if(f(Ot)){var xt=gt,st=kt;M.isActiveSelection&&(x(Ot,j)[1]===Ot[j][1]?st=0:xt=0);for(var at=0;at<vt;at++)if(at!==j){var ht=Ot[at];ht[1]===Ot[j][1]&&(ht[1]=yt+xt),ht[2]===Ot[j][2]&&(ht[2]=mt+st)}if(Ot[j][1]=yt+xt,Ot[j][2]=mt+st,!f(Ot))for(var Lt=0;Lt<vt;Lt++)for(var Mt=0;Mt<Ot[Lt].length;Mt++)Ot[Lt][Mt]=B[R][Lt][Mt]}else Ot[j][1]=yt+gt,Ot[j][2]=mt+kt;S()}}function tt(){O()}function rt(gt,kt){if(gt===2){R=+kt.srcElement.getAttribute("data-i"),j=+kt.srcElement.getAttribute("data-j");var yt=g[R];f(yt)||d(yt)||function(){if(g.length&&g[R]&&g[R].length){for(var mt=[],Ot=0;Ot<g[R].length;Ot++)Ot!==j&&mt.push(g[R][Ot]);mt.length>1&&(mt.length!==2||mt[1][0]!=="Z")&&(j===0&&(mt[0][0]="M"),g[R]=mt,S(),O())}}()}}function nt(gt,kt){(function(yt,mt){if(g.length)for(var Ot=0;Ot<g.length;Ot++)for(var vt=0;vt<g[Ot].length;vt++)for(var xt=0;xt+2<g[Ot][vt].length;xt+=2)g[Ot][vt][xt+1]=B[Ot][vt][xt+1]+yt,g[Ot][vt][xt+2]=B[Ot][vt][xt+2]+mt})(gt,kt),S()}function ot(gt){(R=+gt.srcElement.getAttribute("data-i"))||(R=0),U[R].moveFn=nt}function ct(){O()}function pt(gt){gt===2&&function(kt){if(h(kt._fullLayout.dragmode)){l(kt);var yt=kt._fullLayout._activeSelectionIndex,mt=(kt.layout||{}).selections||[];if(yt<mt.length){for(var Ot=[],vt=0;vt<mt.length;vt++)vt!==yt&&Ot.push(mt[vt]);delete kt._fullLayout._activeSelectionIndex;var xt=kt._fullLayout.selections[yt];kt._fullLayout._deselect={xref:xt.xref,yref:xt.yref},s.call("_guiRelayout",kt,{selections:Ot})}}}(E)}}},34031:function(W,I,o){var T=o(39898),k=o(73972),r=o(71828),m=o(89298),h=o(60165).readPaths,s=o(42359),e=o(48100),t=o(51873).clearOutlineControllers,n=o(7901),a=o(91424),i=o(44467).arrayEditor,c=o(28569),l=o(6964),u=o(21459),f=o(30477),d=f.getPathString;function w(g){var A=g._fullLayout;for(var M in A._shapeUpperLayer.selectAll("path").remove(),A._shapeLowerLayer.selectAll("path").remove(),A._shapeUpperLayer.selectAll("text").remove(),A._shapeLowerLayer.selectAll("text").remove(),A._plots){var L=A._plots[M].shapelayer;L&&(L.selectAll("path").remove(),L.selectAll("text").remove())}for(var E=0;E<A.shapes.length;E++)A.shapes[E].visible===!0&&y(g,E)}function v(g){return!!g._fullLayout._outlining}function p(g){return!g._context.edits.shapePosition}function y(g,A){g._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+A+'"]').remove();var M=f.makeShapesOptionsAndPlotinfo(g,A),L=M.options,E=M.plotinfo;function S(O){var P=d(g,L),U={"data-index":A,"fill-rule":L.fillrule,d:P},R=L.opacity,j=L.fillcolor,B=L.line.width?L.line.color:"rgba(0,0,0,0)",z=L.line.width,G=L.line.dash;z||L.editable!==!0||(z=5,G="solid");var V=P[P.length-1]!=="Z",et=p(g)&&L.editable&&g._fullLayout._activeShapeIndex===A;et&&(j=V?"rgba(0,0,0,0)":g._fullLayout.activeshape.fillcolor,R=g._fullLayout.activeshape.opacity);var J,X=O.append("g").classed("shape-group",!0).attr({"data-index":A}),Y=X.append("path").attr(U).style("opacity",R).call(n.stroke,B).call(n.fill,j).call(a.dashLine,G,z);if(b(X,g,L),e(g,A,L,X),(et||g._context.edits.shapePosition)&&(J=i(g.layout,"shapes",L)),et){Y.style({cursor:"move"});var Z={element:Y.node(),plotinfo:E,gd:g,editHelpers:J,hasText:L.label.text||L.label.texttemplate,isActiveShape:!0},tt=h(P,g);s(tt,Y,Z)}else g._context.edits.shapePosition?function(rt,nt,ot,ct,pt,gt){var kt,yt,mt,Ot,vt,xt,st,at,ht,Lt,Mt,_t,St,Dt,ut,Tt,bt=10,It=10,zt=ot.xsizemode==="pixel",Ft=ot.ysizemode==="pixel",$t=ot.type==="line",Wt=ot.type==="path",Xt=gt.modifyItem,ae=T.select(nt.node().parentNode),Qt=m.getFromId(rt,ot.xref),de=m.getRefType(ot.xref),ye=m.getFromId(rt,ot.yref),ve=m.getRefType(ot.yref),ie=f.getDataToPixel(rt,Qt,!1,de),se=f.getDataToPixel(rt,ye,!0,ve),ke=f.getPixelToData(rt,Qt,!1,de),Ae=f.getPixelToData(rt,ye,!0,ve),Ie=$t?function(){var re=10,Pt=Math.max(ot.line.width,re),Nt=pt.append("g").attr("data-index",ct).attr("drag-helper",!0);Nt.append("path").attr("d",nt.attr("d")).style({cursor:"move","stroke-width":Pt,"stroke-opacity":"0"});var ee={"fill-opacity":"0"},te=Math.max(Pt/2,re);return Nt.append("circle").attr({"data-line-point":"start-point",cx:zt?ie(ot.xanchor)+ot.x0:ie(ot.x0),cy:Ft?se(ot.yanchor)-ot.y0:se(ot.y0),r:te}).style(ee).classed("cursor-grab",!0),Nt.append("circle").attr({"data-line-point":"end-point",cx:zt?ie(ot.xanchor)+ot.x1:ie(ot.x1),cy:Ft?se(ot.yanchor)-ot.y1:se(ot.y1),r:te}).style(ee).classed("cursor-grab",!0),Nt}():nt,Te={element:Ie.node(),gd:rt,prepFn:function(re){v(rt)||(zt&&(vt=ie(ot.xanchor)),Ft&&(xt=se(ot.yanchor)),ot.type==="path"?ut=ot.path:(kt=zt?ot.x0:ie(ot.x0),yt=Ft?ot.y0:se(ot.y0),mt=zt?ot.x1:ie(ot.x1),Ot=Ft?ot.y1:se(ot.y1)),kt<mt?(ht=kt,St="x0",Lt=mt,Dt="x1"):(ht=mt,St="x1",Lt=kt,Dt="x0"),!Ft&&yt<Ot||Ft&&yt>Ot?(st=yt,Mt="y0",at=Ot,_t="y1"):(st=Ot,Mt="y1",at=yt,_t="y0"),Vt(re),Yt(pt,ot),function(Pt,Nt,ee){var te=Nt.xref,ge=Nt.yref,pe=m.getFromId(ee,te),me=m.getFromId(ee,ge),ce="";te==="paper"||pe.autorange||(ce+=te),ge==="paper"||me.autorange||(ce+=ge),a.setClipUrl(Pt,ce?"clip"+ee._fullLayout._uid+ce:null,ee)}(nt,ot,rt),Te.moveFn=Tt==="move"?Zt:Gt,Te.altKey=re.altKey)},doneFn:function(){v(rt)||(l(nt),ne(pt),b(nt,rt,ot),k.call("_guiRelayout",rt,gt.getUpdateObj()))},clickFn:function(){v(rt)||ne(pt)}};function Vt(re){if(v(rt))Tt=null;else if($t)Tt=re.target.tagName==="path"?"move":re.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Pt=Te.element.getBoundingClientRect(),Nt=Pt.right-Pt.left,ee=Pt.bottom-Pt.top,te=re.clientX-Pt.left,ge=re.clientY-Pt.top,pe=!Wt&&Nt>bt&&ee>It&&!re.shiftKey?c.getCursor(te/Nt,1-ge/ee):"move";l(nt,pe),Tt=pe.split("-")[0]}}function Zt(re,Pt){if(ot.type==="path"){var Nt=function(ge){return ge},ee=Nt,te=Nt;zt?Xt("xanchor",ot.xanchor=ke(vt+re)):(ee=function(ge){return ke(ie(ge)+re)},Qt&&Qt.type==="date"&&(ee=f.encodeDate(ee))),Ft?Xt("yanchor",ot.yanchor=Ae(xt+Pt)):(te=function(ge){return Ae(se(ge)+Pt)},ye&&ye.type==="date"&&(te=f.encodeDate(te))),Xt("path",ot.path=x(ut,ee,te))}else zt?Xt("xanchor",ot.xanchor=ke(vt+re)):(Xt("x0",ot.x0=ke(kt+re)),Xt("x1",ot.x1=ke(mt+re))),Ft?Xt("yanchor",ot.yanchor=Ae(xt+Pt)):(Xt("y0",ot.y0=Ae(yt+Pt)),Xt("y1",ot.y1=Ae(Ot+Pt)));nt.attr("d",d(rt,ot)),Yt(pt,ot),e(rt,ct,ot,ae)}function Gt(re,Pt){if(Wt){var Nt=function(Ze){return Ze},ee=Nt,te=Nt;zt?Xt("xanchor",ot.xanchor=ke(vt+re)):(ee=function(Ze){return ke(ie(Ze)+re)},Qt&&Qt.type==="date"&&(ee=f.encodeDate(ee))),Ft?Xt("yanchor",ot.yanchor=Ae(xt+Pt)):(te=function(Ze){return Ae(se(Ze)+Pt)},ye&&ye.type==="date"&&(te=f.encodeDate(te))),Xt("path",ot.path=x(ut,ee,te))}else if($t){if(Tt==="resize-over-start-point"){var ge=kt+re,pe=Ft?yt-Pt:yt+Pt;Xt("x0",ot.x0=zt?ge:ke(ge)),Xt("y0",ot.y0=Ft?pe:Ae(pe))}else if(Tt==="resize-over-end-point"){var me=mt+re,ce=Ft?Ot-Pt:Ot+Pt;Xt("x1",ot.x1=zt?me:ke(me)),Xt("y1",ot.y1=Ft?ce:Ae(ce))}}else{var we=function(Ze){return Tt.indexOf(Ze)!==-1},ue=we("n"),he=we("s"),be=we("w"),Pe=we("e"),De=ue?st+Pt:st,Ue=he?at+Pt:at,tr=be?ht+re:ht,Ge=Pe?Lt+re:Lt;Ft&&(ue&&(De=st-Pt),he&&(Ue=at-Pt)),(!Ft&&Ue-De>It||Ft&&De-Ue>It)&&(Xt(Mt,ot[Mt]=Ft?De:Ae(De)),Xt(_t,ot[_t]=Ft?Ue:Ae(Ue))),Ge-tr>bt&&(Xt(St,ot[St]=zt?tr:ke(tr)),Xt(Dt,ot[Dt]=zt?Ge:ke(Ge)))}nt.attr("d",d(rt,ot)),Yt(pt,ot),e(rt,ct,ot,ae)}function Yt(re,Pt){(zt||Ft)&&function(){var Nt=Pt.type!=="path",ee=re.selectAll(".visual-cue").data([0]);ee.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var te=ie(zt?Pt.xanchor:r.midRange(Nt?[Pt.x0,Pt.x1]:f.extractPathCoords(Pt.path,u.paramIsX))),ge=se(Ft?Pt.yanchor:r.midRange(Nt?[Pt.y0,Pt.y1]:f.extractPathCoords(Pt.path,u.paramIsY)));if(te=f.roundPositionForSharpStrokeRendering(te,1),ge=f.roundPositionForSharpStrokeRendering(ge,1),zt&&Ft){var pe="M"+(te-1-1)+","+(ge-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ee.attr("d",pe)}else if(zt){var me="M"+(te-1-1)+","+(ge-9-1)+"v18 h2 v-18 Z";ee.attr("d",me)}else{var ce="M"+(te-9-1)+","+(ge-1-1)+"h18 v2 h-18 Z";ee.attr("d",ce)}}()}function ne(re){re.selectAll(".visual-cue").remove()}c.init(Te),Ie.node().onmousemove=Vt}(g,Y,L,A,O,J):L.editable===!0&&Y.style("pointer-events",V||n.opacity(j)*R<=.5?"stroke":"all");Y.node().addEventListener("click",function(){return function(rt,nt){if(p(rt)){var ot=+nt.node().getAttribute("data-index");if(ot>=0){if(ot===rt._fullLayout._activeShapeIndex)return void _(rt);rt._fullLayout._activeShapeIndex=ot,rt._fullLayout._deactivateShape=_,w(rt)}}}(g,Y)})}L._input&&L.visible===!0&&(L.layer!=="below"?S(g._fullLayout._shapeUpperLayer):L.xref==="paper"||L.yref==="paper"?S(g._fullLayout._shapeLowerLayer):E._hadPlotinfo?S((E.mainplotinfo||E).shapelayer):S(g._fullLayout._shapeLowerLayer))}function b(g,A,M){var L=(M.xref+M.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");a.setClipUrl(g,L?"clip"+A._fullLayout._uid+L:null,A)}function x(g,A,M){return g.replace(u.segmentRE,function(L){var E=0,S=L.charAt(0),O=u.paramIsX[S],P=u.paramIsY[S],U=u.numParams[S];return S+L.substr(1).replace(u.paramRE,function(R){return E>=U||(O[E]?R=A(R):P[E]&&(R=M(R)),E++),R})})}function _(g){p(g)&&g._fullLayout._activeShapeIndex>=0&&(t(g),delete g._fullLayout._activeShapeIndex,w(g))}W.exports={draw:w,drawOne:y,eraseActiveShape:function(g){if(p(g)){t(g);var A=g._fullLayout._activeShapeIndex,M=(g.layout||{}).shapes||[];if(A<M.length){for(var L=[],E=0;E<M.length;E++)E!==A&&L.push(M[E]);return delete g._fullLayout._activeShapeIndex,k.call("_guiRelayout",g,{shapes:L})}}},drawLabel:e}},29241:function(W,I,o){var T=o(30962).overrideAll,k=o(9012),r=o(41940),m=o(79952).P,h=o(1426).extendFlat,s=o(5386).R,e=o(37281);W.exports=T({newshape:{visible:h({},k.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:h({},k.legend,{}),legendgroup:h({},k.legendgroup,{}),legendgrouptitle:{text:h({},k.legendgrouptitle.text,{}),font:r({})},legendrank:h({},k.legendrank,{}),legendwidth:h({},k.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:h({},m,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:h({},k.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:s({newshape:!0},{keys:Object.keys(e)}),font:r({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function(W){W.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(W,I,o){var T=o(7901),k=o(71828);W.exports=function(r,m,h){if(h("newshape.visible"),h("newshape.name"),h("newshape.showlegend"),h("newshape.legend"),h("newshape.legendwidth"),h("newshape.legendgroup"),h("newshape.legendgrouptitle.text"),k.coerceFont(h,"newshape.legendgrouptitle.font"),h("newshape.legendrank"),h("newshape.drawdirection"),h("newshape.layer"),h("newshape.fillcolor"),h("newshape.fillrule"),h("newshape.opacity"),h("newshape.line.width")){var s=(r||{}).plot_bgcolor||"#FFF";h("newshape.line.color",T.contrast(s)),h("newshape.line.dash")}var e=r.dragmode==="drawline",t=h("newshape.label.text"),n=h("newshape.label.texttemplate");if(t||n){h("newshape.label.textangle");var a=h("newshape.label.textposition",e?"middle":"middle center");h("newshape.label.xanchor"),h("newshape.label.yanchor",function(i,c){return i?"bottom":c.indexOf("top")!==-1?"top":c.indexOf("bottom")!==-1?"bottom":"middle"}(e,a)),h("newshape.label.padding"),k.coerceFont(h,"newshape.label.font",m.font)}h("activeshape.fillcolor"),h("activeshape.opacity")}},60165:function(W,I,o){var T=o(95616),k=o(89995),r=k.CIRCLE_SIDES,m=k.SQRT2,h=o(75549),s=h.p2r,e=h.r2p,t=[0,3,4,5,6,1,2],n=[0,3,4,1,2];function a(c,l){return Math.abs(c-l)<=1e-6}function i(c,l){var u=l[1]-c[1],f=l[2]-c[2];return Math.sqrt(u*u+f*f)}I.writePaths=function(c){var l=c.length;if(!l)return"M0,0Z";for(var u="",f=0;f<l;f++)for(var d=c[f].length,w=0;w<d;w++){var v=c[f][w][0];if(v==="Z")u+="Z";else for(var p=c[f][w].length,y=0;y<p;y++){var b=y;v==="Q"||v==="S"?b=n[y]:v==="C"&&(b=t[y]),u+=c[f][w][b],y>0&&y<p-1&&(u+=",")}}return u},I.readPaths=function(c,l,u,f){var d,w,v,p=T(c),y=[],b=-1,x=0,_=0,g=function(){w=x,v=_};g();for(var A=0;A<p.length;A++){var M,L,E,S,O=[],P=p[A][0],U=P;switch(P){case"M":y[++b]=[],x=+p[A][1],_=+p[A][2],O.push([U,x,_]),g();break;case"Q":case"S":M=+p[A][1],E=+p[A][2],x=+p[A][3],_=+p[A][4],O.push([U,x,_,M,E]);break;case"C":M=+p[A][1],E=+p[A][2],L=+p[A][3],S=+p[A][4],x=+p[A][5],_=+p[A][6],O.push([U,x,_,M,E,L,S]);break;case"T":case"L":x=+p[A][1],_=+p[A][2],O.push([U,x,_]);break;case"H":U="L",x=+p[A][1],O.push([U,x,_]);break;case"V":U="L",_=+p[A][1],O.push([U,x,_]);break;case"A":U="L";var R=+p[A][1],j=+p[A][2];+p[A][4]||(R=-R,j=-j);var B=x-R,z=_;for(d=1;d<=r/2;d++){var G=2*Math.PI*d/r;O.push([U,B+R*Math.cos(G),z+j*Math.sin(G)])}break;case"Z":x===w&&_===v||(x=w,_=v,O.push([U,x,_]))}for(var V=(u||{}).domain,et=l._fullLayout._size,J=u&&u.xsizemode==="pixel",X=u&&u.ysizemode==="pixel",Y=f===!1,Z=0;Z<O.length;Z++){for(d=0;d+2<7;d+=2){var tt=O[Z][d+1],rt=O[Z][d+2];tt!==void 0&&rt!==void 0&&(x=tt,_=rt,u&&(u.xaxis&&u.xaxis.p2r?(Y&&(tt-=u.xaxis._offset),tt=J?e(u.xaxis,u.xanchor)+tt:s(u.xaxis,tt)):(Y&&(tt-=et.l),V?tt=V.x[0]+tt/et.w:tt/=et.w),u.yaxis&&u.yaxis.p2r?(Y&&(rt-=u.yaxis._offset),rt=X?e(u.yaxis,u.yanchor)-rt:s(u.yaxis,rt)):(Y&&(rt-=et.t),rt=V?V.y[1]-rt/et.h:1-rt/et.h)),O[Z][d+1]=tt,O[Z][d+2]=rt)}y[b].push(O[Z].slice())}}return y},I.pointsOnRectangle=function(c){if(c.length!==5)return!1;for(var l=1;l<3;l++)if(!a(c[0][l]-c[1][l],c[3][l]-c[2][l])||!a(c[0][l]-c[3][l],c[1][l]-c[2][l]))return!1;return!(!a(c[0][1],c[1][1])&&!a(c[0][1],c[3][1])||!(i(c[0],c[1])*i(c[0],c[3])))},I.pointsOnEllipse=function(c){var l=c.length;if(l!==r+1)return!1;l=r;for(var u=0;u<l;u++){var f=(2*l-u)%l,d=(l/2+f)%l,w=(l/2+u)%l;if(!a(i(c[u],c[w]),i(c[f],c[d])))return!1}return!0},I.handleEllipse=function(c,l,u){if(!c)return[l,u];var f=I.ellipseOver({x0:l[0],y0:l[1],x1:u[0],y1:u[1]}),d=(f.x1+f.x0)/2,w=(f.y1+f.y0)/2,v=(f.x1-f.x0)/2,p=(f.y1-f.y0)/2;v||(v=p/=m),p||(p=v/=m);for(var y=[],b=0;b<r;b++){var x=2*b*Math.PI/r;y.push([d+v*Math.cos(x),w+p*Math.sin(x)])}return y},I.ellipseOver=function(c){var l=c.x0,u=c.y0,f=c.x1,d=c.y1,w=f-l,v=d-u,p=((l-=w)+f)/2,y=((u-=v)+d)/2;return{x0:p-(w*=m),y0:y-(v*=m),x1:p+w,y1:y+v}},I.fixDatesForPaths=function(c,l,u){var f=l.type==="date",d=u.type==="date";if(!f&&!d)return c;for(var w=0;w<c.length;w++)for(var v=0;v<c[w].length;v++)for(var p=0;p+2<c[w][v].length;p+=2)f&&(c[w][v][p+1]=c[w][v][p+1].replace(" ","_")),d&&(c[w][v][p+2]=c[w][v][p+2].replace(" ","_"));return c}},90551:function(W,I,o){var T=o(64505),k=T.drawMode,r=T.openMode,m=o(89995),h=m.i000,s=m.i090,e=m.i180,t=m.i270,n=m.cos45,a=m.sin45,i=o(75549),c=i.p2r,l=i.r2p,u=o(51873).clearOutline,f=o(60165),d=f.readPaths,w=f.writePaths,v=f.ellipseOver,p=f.fixDatesForPaths;function y(b,x,_){var g,A=b[0][0],M=x.gd,L=A.getAttribute("d"),E=M._fullLayout.newshape,S=x.plotinfo,O=x.isActiveShape,P=S.xaxis,U=S.yaxis,R=!!S.domain||!S.xaxis,j=!!S.domain||!S.yaxis,B=r(_),z=d(L,M,S,O),G={editable:!0,visible:E.visible,name:E.name,showlegend:E.showlegend,legend:E.legend,legendwidth:E.legendwidth,legendgroup:E.legendgroup,legendgrouptitle:{text:E.legendgrouptitle.text,font:E.legendgrouptitle.font},legendrank:E.legendrank,label:E.label,xref:R?"paper":P._id,yref:j?"paper":U._id,layer:E.layer,opacity:E.opacity,line:{color:E.line.color,width:E.line.width,dash:E.line.dash}};if(B||(G.fillcolor=E.fillcolor,G.fillrule=E.fillrule),z.length===1&&(g=z[0]),g&&g.length===5&&_==="drawrect")G.type="rect",G.x0=g[0][1],G.y0=g[0][2],G.x1=g[2][1],G.y1=g[2][2];else if(g&&_==="drawline")G.type="line",G.x0=g[0][1],G.y0=g[0][2],G.x1=g[1][1],G.y1=g[1][2];else if(g&&_==="drawcircle"){G.type="circle";var V=g[h][1],et=g[s][1],J=g[e][1],X=g[t][1],Y=g[h][2],Z=g[s][2],tt=g[e][2],rt=g[t][2],nt=S.xaxis&&(S.xaxis.type==="date"||S.xaxis.type==="log"),ot=S.yaxis&&(S.yaxis.type==="date"||S.yaxis.type==="log");nt&&(V=l(S.xaxis,V),et=l(S.xaxis,et),J=l(S.xaxis,J),X=l(S.xaxis,X)),ot&&(Y=l(S.yaxis,Y),Z=l(S.yaxis,Z),tt=l(S.yaxis,tt),rt=l(S.yaxis,rt));var ct=(et+X)/2,pt=(Y+tt)/2,gt=v({x0:ct,y0:pt,x1:ct+(X-et+J-V)/2*n,y1:pt+(rt-Z+tt-Y)/2*a});nt&&(gt.x0=c(S.xaxis,gt.x0),gt.x1=c(S.xaxis,gt.x1)),ot&&(gt.y0=c(S.yaxis,gt.y0),gt.y1=c(S.yaxis,gt.y1)),G.x0=gt.x0,G.y0=gt.y0,G.x1=gt.x1,G.y1=gt.y1}else G.type="path",P&&U&&p(z,P,U),G.path=w(z),g=null;return G}W.exports={newShapes:function(b,x){if(b.length&&b[0][0]){var _=x.gd,g=x.isActiveShape,A=x.dragmode,M=(_.layout||{}).shapes||[];if(!k(A)&&g!==void 0){var L=_._fullLayout._activeShapeIndex;if(L<M.length)switch(_._fullLayout.shapes[L].type){case"rect":A="drawrect";break;case"circle":A="drawcircle";break;case"line":A="drawline";break;case"path":var E=M[L].path||"";A=E[E.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var S=y(b,x,A);u(_);for(var O=x.editHelpers,P=(O||{}).modifyItem,U=[],R=0;R<M.length;R++){var j=_._fullLayout.shapes[R];if(U[R]=j._input,g!==void 0&&R===_._fullLayout._activeShapeIndex){var B=S;switch(j.type){case"line":case"rect":case"circle":P("x0",B.x0),P("x1",B.x1),P("y0",B.y0),P("y1",B.y1);break;case"path":P("path",B.path)}}}return g===void 0?(U.push(S),U):O?O.getUpdateObj():{}}},createShapeObj:y}},51873:function(W){W.exports={clearOutlineControllers:function(I){var o=I._fullLayout._zoomlayer;o&&o.selectAll(".outline-controllers").remove()},clearOutline:function(I){var o=I._fullLayout._zoomlayer;o&&o.selectAll(".select-outline").remove(),I._fullLayout._outlining=!1}}},30477:function(W,I,o){var T=o(21459),k=o(71828),r=o(89298);I.rangeToShapePosition=function(m){return m.type==="log"?m.r2d:function(h){return h}},I.shapePositionToRange=function(m){return m.type==="log"?m.d2r:function(h){return h}},I.decodeDate=function(m){return function(h){return h.replace&&(h=h.replace("_"," ")),m(h)}},I.encodeDate=function(m){return function(h){return m(h).replace(" ","_")}},I.extractPathCoords=function(m,h,s){var e=[];return m.match(T.segmentRE).forEach(function(t){var n=h[t.charAt(0)].drawn;if(n!==void 0){var a=t.substr(1).match(T.paramRE);if(a&&!(a.length<n)){var i=a[n],c=s?i:k.cleanNumber(i);e.push(c)}}}),e},I.getDataToPixel=function(m,h,s,e){var t,n=m._fullLayout._size;if(h)if(e==="domain")t=function(i){return h._length*(s?1-i:i)+h._offset};else{var a=I.shapePositionToRange(h);t=function(i){return h._offset+h.r2p(a(i,!0))},h.type==="date"&&(t=I.decodeDate(t))}else t=s?function(i){return n.t+n.h*(1-i)}:function(i){return n.l+n.w*i};return t},I.getPixelToData=function(m,h,s,e){var t,n=m._fullLayout._size;if(h)if(e==="domain")t=function(i){var c=(i-h._offset)/h._length;return s?1-c:c};else{var a=I.rangeToShapePosition(h);t=function(i){return a(h.p2r(i-h._offset))}}else t=s?function(i){return 1-(i-n.t)/n.h}:function(i){return(i-n.l)/n.w};return t},I.roundPositionForSharpStrokeRendering=function(m,h){var s=Math.round(h%2)===1,e=Math.round(m);return s?e+.5:e},I.makeShapesOptionsAndPlotinfo=function(m,h){var s=m._fullLayout.shapes[h]||{},e=m._fullLayout._plots[s.xref+s.yref];return e?e._hadPlotinfo=!0:(e={},s.xref&&s.xref!=="paper"&&(e.xaxis=m._fullLayout[s.xref+"axis"]),s.yref&&s.yref!=="paper"&&(e.yaxis=m._fullLayout[s.yref+"axis"])),e.xsizemode=s.xsizemode,e.ysizemode=s.ysizemode,e.xanchor=s.xanchor,e.yanchor=s.yanchor,{options:s,plotinfo:e}},I.makeSelectionsOptionsAndPlotinfo=function(m,h){var s=m._fullLayout.selections[h]||{},e=m._fullLayout._plots[s.xref+s.yref];return e?e._hadPlotinfo=!0:(e={},s.xref&&(e.xaxis=m._fullLayout[s.xref+"axis"]),s.yref&&(e.yaxis=m._fullLayout[s.yref+"axis"])),{options:s,plotinfo:e}},I.getPathString=function(m,h){var s,e,t,n,a,i,c,l,u=h.type,f=r.getRefType(h.xref),d=r.getRefType(h.yref),w=r.getFromId(m,h.xref),v=r.getFromId(m,h.yref),p=m._fullLayout._size;if(w?f==="domain"?e=function(E){return w._offset+w._length*E}:(s=I.shapePositionToRange(w),e=function(E){return w._offset+w.r2p(s(E,!0))}):e=function(E){return p.l+p.w*E},v?d==="domain"?n=function(E){return v._offset+v._length*(1-E)}:(t=I.shapePositionToRange(v),n=function(E){return v._offset+v.r2p(t(E,!0))}):n=function(E){return p.t+p.h*(1-E)},u==="path")return w&&w.type==="date"&&(e=I.decodeDate(e)),v&&v.type==="date"&&(n=I.decodeDate(n)),function(E,S,O){var P=E.path,U=E.xsizemode,R=E.ysizemode,j=E.xanchor,B=E.yanchor;return P.replace(T.segmentRE,function(z){var G=0,V=z.charAt(0),et=T.paramIsX[V],J=T.paramIsY[V],X=T.numParams[V],Y=z.substr(1).replace(T.paramRE,function(Z){return et[G]?Z=U==="pixel"?S(j)+Number(Z):S(Z):J[G]&&(Z=R==="pixel"?O(B)-Number(Z):O(Z)),++G>X&&(Z="X"),Z});return G>X&&(Y=Y.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+z)),V+Y})}(h,e,n);if(h.xsizemode==="pixel"){var y=e(h.xanchor);a=y+h.x0,i=y+h.x1}else a=e(h.x0),i=e(h.x1);if(h.ysizemode==="pixel"){var b=n(h.yanchor);c=b-h.y0,l=b-h.y1}else c=n(h.y0),l=n(h.y1);if(u==="line")return"M"+a+","+c+"L"+i+","+l;if(u==="rect")return"M"+a+","+c+"H"+i+"V"+l+"H"+a+"Z";var x=(a+i)/2,_=(c+l)/2,g=Math.abs(x-a),A=Math.abs(_-c),M="A"+g+","+A,L=x+g+","+_;return"M"+L+M+" 0 1,1 "+x+","+(_-A)+M+" 0 0,1 "+L+"Z"}},89853:function(W,I,o){var T=o(34031);W.exports={moduleType:"component",name:"shapes",layoutAttributes:o(89827),supplyLayoutDefaults:o(84726),supplyDrawNewShapeDefaults:o(45547),includeBasePlot:o(76325)("shapes"),calcAutorange:o(5627),draw:T.draw,drawOne:T.drawOne}},37281:function(W){function I(r,m){return m?m.d2l(r):r}function o(r,m){return m?m.l2d(r):r}function T(r,m){return I(r.x1,m)-I(r.x0,m)}function k(r,m,h){return I(r.y1,h)-I(r.y0,h)}W.exports={x0:function(r){return r.x0},x1:function(r){return r.x1},y0:function(r){return r.y0},y1:function(r){return r.y1},slope:function(r,m,h){return r.type!=="line"?void 0:k(r,0,h)/T(r,m)},dx:T,dy:k,width:function(r,m){return Math.abs(T(r,m))},height:function(r,m,h){return Math.abs(k(r,0,h))},length:function(r,m,h){return r.type!=="line"?void 0:Math.sqrt(Math.pow(T(r,m),2)+Math.pow(k(r,0,h),2))},xcenter:function(r,m){return o((I(r.x1,m)+I(r.x0,m))/2,m)},ycenter:function(r,m,h){return o((I(r.y1,h)+I(r.y0,h))/2,h)}}},75067:function(W,I,o){var T=o(41940),k=o(35025),r=o(1426).extendDeepAll,m=o(30962).overrideAll,h=o(85594),s=o(44467).templatedArray,e=o(98292),t=s("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});W.exports=m(s("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:r(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:h.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:T({})},font:T({}),activebgcolor:{valType:"color",dflt:e.gripBgActiveColor},bgcolor:{valType:"color",dflt:e.railBgColor},bordercolor:{valType:"color",dflt:e.railBorderColor},borderwidth:{valType:"number",min:0,dflt:e.railBorderWidth},ticklen:{valType:"number",min:0,dflt:e.tickLength},tickcolor:{valType:"color",dflt:e.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:e.minorTickLength}}),"arraydraw","from-root")},98292:function(W){W.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(W,I,o){var T=o(71828),k=o(85501),r=o(75067),m=o(98292).name,h=r.steps;function s(t,n,a){function i(d,w){return T.coerce(t,n,r,d,w)}for(var c=k(t,n,{name:"steps",handleItemDefaults:e}),l=0,u=0;u<c.length;u++)c[u].visible&&l++;if(l<2?n.visible=!1:i("visible")){n._stepCount=l;var f=n._visibleSteps=T.filterVisible(c);(c[i("active")]||{}).visible||(n.active=f[0]._index),i("x"),i("y"),T.noneOrAll(t,n,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),T.coerceFont(i,"font",a.font),i("currentvalue.visible")&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),T.coerceFont(i,"currentvalue.font",n.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function e(t,n){function a(c,l){return T.coerce(t,n,h,c,l)}if(t.method==="skip"||Array.isArray(t.args)?a("visible"):n.visible=!1){a("method"),a("args");var i=a("label","step-"+n._index);a("value",i),a("execute")}}W.exports=function(t,n){k(t,n,{name:m,handleItemDefaults:s})}},44504:function(W,I,o){var T=o(39898),k=o(74875),r=o(7901),m=o(91424),h=o(71828),s=h.strTranslate,e=o(63893),t=o(44467).arrayEditor,n=o(98292),a=o(18783),i=a.LINE_SPACING,c=a.FROM_TL,l=a.FROM_BR;function u(O){return n.autoMarginIdRoot+O._index}function f(O){return O._index}function d(O,P){var U=m.tester.selectAll("g."+n.labelGroupClass).data(P._visibleSteps);U.enter().append("g").classed(n.labelGroupClass,!0);var R=0,j=0;U.each(function(Z){var tt=p(T.select(this),{step:Z},P).node();if(tt){var rt=m.bBox(tt);j=Math.max(j,rt.height),R=Math.max(R,rt.width)}}),U.remove();var B=P._dims={};B.inputAreaWidth=Math.max(n.railWidth,n.gripHeight);var z=O._fullLayout._size;B.lx=z.l+z.w*P.x,B.ly=z.t+z.h*(1-P.y),P.lenmode==="fraction"?B.outerLength=Math.round(z.w*P.len):B.outerLength=P.len,B.inputAreaStart=0,B.inputAreaLength=Math.round(B.outerLength-P.pad.l-P.pad.r);var G=(B.inputAreaLength-2*n.stepInset)/(P._stepCount-1),V=R+n.labelPadding;if(B.labelStride=Math.max(1,Math.ceil(V/G)),B.labelHeight=j,B.currentValueMaxWidth=0,B.currentValueHeight=0,B.currentValueTotalHeight=0,B.currentValueMaxLines=1,P.currentvalue.visible){var et=m.tester.append("g");U.each(function(Z){var tt=w(et,P,Z.label),rt=tt.node()&&m.bBox(tt.node())||{width:0,height:0},nt=e.lineCount(tt);B.currentValueMaxWidth=Math.max(B.currentValueMaxWidth,Math.ceil(rt.width)),B.currentValueHeight=Math.max(B.currentValueHeight,Math.ceil(rt.height)),B.currentValueMaxLines=Math.max(B.currentValueMaxLines,nt)}),B.currentValueTotalHeight=B.currentValueHeight+P.currentvalue.offset,et.remove()}B.height=B.currentValueTotalHeight+n.tickOffset+P.ticklen+n.labelOffset+B.labelHeight+P.pad.t+P.pad.b;var J="left";h.isRightAnchor(P)&&(B.lx-=B.outerLength,J="right"),h.isCenterAnchor(P)&&(B.lx-=B.outerLength/2,J="center");var X="top";h.isBottomAnchor(P)&&(B.ly-=B.height,X="bottom"),h.isMiddleAnchor(P)&&(B.ly-=B.height/2,X="middle"),B.outerLength=Math.ceil(B.outerLength),B.height=Math.ceil(B.height),B.lx=Math.round(B.lx),B.ly=Math.round(B.ly);var Y={y:P.y,b:B.height*l[X],t:B.height*c[X]};P.lenmode==="fraction"?(Y.l=0,Y.xl=P.x-P.len*c[J],Y.r=0,Y.xr=P.x+P.len*l[J]):(Y.x=P.x,Y.l=B.outerLength*c[J],Y.r=B.outerLength*l[J]),k.autoMargin(O,u(P),Y)}function w(O,P,U){if(P.currentvalue.visible){var R,j,B=P._dims;switch(P.currentvalue.xanchor){case"right":R=B.inputAreaLength-n.currentValueInset-B.currentValueMaxWidth,j="left";break;case"center":R=.5*B.inputAreaLength,j="middle";break;default:R=n.currentValueInset,j="left"}var z=h.ensureSingle(O,"text",n.labelClass,function(Y){Y.attr({"text-anchor":j,"data-notex":1})}),G=P.currentvalue.prefix?P.currentvalue.prefix:"";if(typeof U=="string")G+=U;else{var V=P.steps[P.active].label,et=P._gd._fullLayout._meta;et&&(V=h.templateString(V,et)),G+=V}P.currentvalue.suffix&&(G+=P.currentvalue.suffix),z.call(m.font,P.currentvalue.font).text(G).call(e.convertToTspans,P._gd);var J=e.lineCount(z),X=(B.currentValueMaxLines+1-J)*P.currentvalue.font.size*i;return e.positionText(z,R,X),z}}function v(O,P,U){h.ensureSingle(O,"rect",n.gripRectClass,function(R){R.call(_,P,O,U).style("pointer-events","all")}).attr({width:n.gripWidth,height:n.gripHeight,rx:n.gripRadius,ry:n.gripRadius}).call(r.stroke,U.bordercolor).call(r.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function p(O,P,U){var R=h.ensureSingle(O,"text",n.labelClass,function(z){z.attr({"text-anchor":"middle","data-notex":1})}),j=P.step.label,B=U._gd._fullLayout._meta;return B&&(j=h.templateString(j,B)),R.call(m.font,U.font).text(j).call(e.convertToTspans,U._gd),R}function y(O,P){var U=h.ensureSingle(O,"g",n.labelsClass),R=P._dims,j=U.selectAll("g."+n.labelGroupClass).data(R.labelSteps);j.enter().append("g").classed(n.labelGroupClass,!0),j.exit().remove(),j.each(function(B){var z=T.select(this);z.call(p,B,P),m.setTranslate(z,M(P,B.fraction),n.tickOffset+P.ticklen+P.font.size*i+n.labelOffset+R.currentValueTotalHeight)})}function b(O,P,U,R,j){var B=Math.round(R*(U._stepCount-1)),z=U._visibleSteps[B]._index;z!==U.active&&x(O,P,U,z,!0,j)}function x(O,P,U,R,j,B){var z=U.active;U.active=R,t(O.layout,n.name,U).applyUpdate("active",R);var G=U.steps[U.active];P.call(A,U,B),P.call(w,U),O.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:j,previousActive:z}),G&&G.method&&j&&(P._nextMethod?(P._nextMethod.step=G,P._nextMethod.doCallback=j,P._nextMethod.doTransition=B):(P._nextMethod={step:G,doCallback:j,doTransition:B},P._nextMethodRaf=window.requestAnimationFrame(function(){var V=P._nextMethod.step;V.method&&(V.execute&&k.executeAPICommand(O,V.method,V.args),P._nextMethod=null,P._nextMethodRaf=null)})))}function _(O,P,U){if(!P._context.staticPlot){var R=U.node(),j=T.select(P);O.on("mousedown",z),O.on("touchstart",z)}function B(){return U.data()[0]}function z(){var G=B();P.emit("plotly_sliderstart",{slider:G});var V=U.select("."+n.gripRectClass);T.event.stopPropagation(),T.event.preventDefault(),V.call(r.fill,G.activebgcolor);var et=L(G,T.mouse(R)[0]);function J(){var Y=B(),Z=L(Y,T.mouse(R)[0]);b(P,U,Y,Z,!1)}function X(){var Y=B();Y._dragging=!1,V.call(r.fill,Y.bgcolor),j.on("mouseup",null),j.on("mousemove",null),j.on("touchend",null),j.on("touchmove",null),P.emit("plotly_sliderend",{slider:Y,step:Y.steps[Y.active]})}b(P,U,G,et,!0),G._dragging=!0,j.on("mousemove",J),j.on("touchmove",J),j.on("mouseup",X),j.on("touchend",X)}}function g(O,P){var U=O.selectAll("rect."+n.tickRectClass).data(P._visibleSteps),R=P._dims;U.enter().append("rect").classed(n.tickRectClass,!0),U.exit().remove(),U.attr({width:P.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(j,B){var z=B%R.labelStride==0,G=T.select(this);G.attr({height:z?P.ticklen:P.minorticklen}).call(r.fill,P.tickcolor),m.setTranslate(G,M(P,B/(P._stepCount-1))-.5*P.tickwidth,(z?n.tickOffset:n.minorTickOffset)+R.currentValueTotalHeight)})}function A(O,P,U){for(var R=O.select("rect."+n.gripRectClass),j=0,B=0;B<P._stepCount;B++)if(P._visibleSteps[B]._index===P.active){j=B;break}var z=M(P,j/(P._stepCount-1));if(!P._invokingCommand){var G=R;U&&P.transition.duration>0&&(G=G.transition().duration(P.transition.duration).ease(P.transition.easing)),G.attr("transform",s(z-.5*n.gripWidth,P._dims.currentValueTotalHeight))}}function M(O,P){var U=O._dims;return U.inputAreaStart+n.stepInset+(U.inputAreaLength-2*n.stepInset)*Math.min(1,Math.max(0,P))}function L(O,P){var U=O._dims;return Math.min(1,Math.max(0,(P-n.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*n.stepInset-2*U.inputAreaStart)))}function E(O,P,U){var R=U._dims,j=h.ensureSingle(O,"rect",n.railTouchRectClass,function(B){B.call(_,P,O,U).style("pointer-events","all")});j.attr({width:R.inputAreaLength,height:Math.max(R.inputAreaWidth,n.tickOffset+U.ticklen+R.labelHeight)}).call(r.fill,U.bgcolor).attr("opacity",0),m.setTranslate(j,0,R.currentValueTotalHeight)}function S(O,P){var U=P._dims,R=U.inputAreaLength-2*n.railInset,j=h.ensureSingle(O,"rect",n.railRectClass);j.attr({width:R,height:n.railWidth,rx:n.railRadius,ry:n.railRadius,"shape-rendering":"crispEdges"}).call(r.stroke,P.bordercolor).call(r.fill,P.bgcolor).style("stroke-width",P.borderwidth+"px"),m.setTranslate(j,n.railInset,.5*(U.inputAreaWidth-n.railWidth)+U.currentValueTotalHeight)}W.exports=function(O){var P=O._context.staticPlot,U=O._fullLayout,R=function(et,J){for(var X=et[n.name],Y=[],Z=0;Z<X.length;Z++){var tt=X[Z];tt.visible&&(tt._gd=J,Y.push(tt))}return Y}(U,O),j=U._infolayer.selectAll("g."+n.containerClassName).data(R.length>0?[0]:[]);function B(et){et._commandObserver&&(et._commandObserver.remove(),delete et._commandObserver),k.autoMargin(O,u(et))}if(j.enter().append("g").classed(n.containerClassName,!0).style("cursor",P?null:"ew-resize"),j.exit().each(function(){T.select(this).selectAll("g."+n.groupClassName).each(B)}).remove(),R.length!==0){var z=j.selectAll("g."+n.groupClassName).data(R,f);z.enter().append("g").classed(n.groupClassName,!0),z.exit().each(B).remove();for(var G=0;G<R.length;G++){var V=R[G];d(O,V)}z.each(function(et){var J=T.select(this);(function(X){var Y=X._dims;Y.labelSteps=[];for(var Z=X._stepCount,tt=0;tt<Z;tt+=Y.labelStride)Y.labelSteps.push({fraction:tt/(Z-1),step:X._visibleSteps[tt]})})(et),k.manageCommandObserver(O,et,et._visibleSteps,function(X){var Y=J.data()[0];Y.active!==X.index&&(Y._dragging||x(O,J,Y,X.index,!1,!0))}),function(X,Y,Z){(Z.steps[Z.active]||{}).visible||(Z.active=Z._visibleSteps[0]._index),Y.call(w,Z).call(S,Z).call(y,Z).call(g,Z).call(E,X,Z).call(v,X,Z);var tt=Z._dims;m.setTranslate(Y,tt.lx+Z.pad.l,tt.ly+Z.pad.t),Y.call(A,Z,!1),Y.call(w,Z)}(O,T.select(this),et)})}}},23243:function(W,I,o){var T=o(98292);W.exports={moduleType:"component",name:T.name,layoutAttributes:o(75067),supplyLayoutDefaults:o(12343),draw:o(44504)}},92998:function(W,I,o){var T=o(39898),k=o(92770),r=o(74875),m=o(73972),h=o(71828),s=h.strTranslate,e=o(91424),t=o(7901),n=o(63893),a=o(37822),i=o(18783).OPPOSITE_SIDE,c=/ [XY][0-9]* /;W.exports={draw:function(l,u,f){var d,w=f.propContainer,v=f.propName,p=f.placeholder,y=f.traceIndex,b=f.avoid||{},x=f.attributes,_=f.transform,g=f.containerGroup,A=l._fullLayout,M=1,L=!1,E=w.title,S=(E&&E.text?E.text:"").trim(),O=E&&E.font?E.font:{},P=O.family,U=O.size,R=O.color;v==="title.text"?d="titleText":v.indexOf("axis")!==-1?d="axisTitleText":v.indexOf(!0)&&(d="colorbarTitleText");var j=l._context.edits[d];S===""?M=0:S.replace(c," % ")===p.replace(c," % ")&&(M=.2,L=!0,j||(S="")),f._meta?S=h.templateString(S,f._meta):A._meta&&(S=h.templateString(S,A._meta));var B,z=S||j;g||(g=h.ensureSingle(A._infolayer,"g","g-"+u),B=A._hColorbarMoveTitle);var G=g.selectAll("text").data(z?[0]:[]);if(G.enter().append("text"),G.text(S).attr("class",u),G.exit().remove(),!z)return g;function V(X){h.syncOrAsync([et,J],X)}function et(X){var Y;return!_&&B&&(_={}),_?(Y="",_.rotate&&(Y+="rotate("+[_.rotate,x.x,x.y]+")"),(_.offset||B)&&(Y+=s(0,(_.offset||0)-(B||0)))):Y=null,X.attr("transform",Y),X.style({"font-family":P,"font-size":T.round(U,2)+"px",fill:t.rgb(R),opacity:M*t.opacity(R),"font-weight":r.fontWeight}).attr(x).call(n.convertToTspans,l),r.previousPromises(l)}function J(X){var Y=T.select(X.node().parentNode);if(b&&b.selection&&b.side&&S){Y.attr("transform",null);var Z=i[b.side],tt=b.side==="left"||b.side==="top"?-1:1,rt=k(b.pad)?b.pad:2,nt=e.bBox(Y.node()),ot={t:0,b:0,l:0,r:0},ct=l._fullLayout._reservedMargin;for(var pt in ct)for(var gt in ct[pt]){var kt=ct[pt][gt];ot[gt]=Math.max(ot[gt],kt)}var yt={left:ot.l,top:ot.t,right:A.width-ot.r,bottom:A.height-ot.b},mt=b.maxShift||tt*(yt[b.side]-nt[b.side]),Ot=0;if(mt<0)Ot=mt;else{var vt=b.offsetLeft||0,xt=b.offsetTop||0;nt.left-=vt,nt.right-=vt,nt.top-=xt,nt.bottom-=xt,b.selection.each(function(){var at=e.bBox(this);h.bBoxIntersect(nt,at,rt)&&(Ot=Math.max(Ot,tt*(at[b.side]-nt[Z])+rt))}),Ot=Math.min(mt,Ot),w._titleScoot=Math.abs(Ot)}if(Ot>0||mt<0){var st={left:[-Ot,0],right:[Ot,0],top:[0,-Ot],bottom:[0,Ot]}[b.side];Y.attr("transform",s(st[0],st[1]))}}}return G.call(V),j&&(S?G.on(".opacity",null):(M=0,L=!0,G.text(p).on("mouseover.opacity",function(){T.select(this).transition().duration(a.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){T.select(this).transition().duration(a.HIDE_PLACEHOLDER).style("opacity",0)})),G.call(n.makeEditable,{gd:l}).on("edit",function(X){y!==void 0?m.call("_guiRestyle",l,v,X,y):m.call("_guiRelayout",l,v,X)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(V)}).on("input",function(X){this.text(X||" ").call(n.positionText,x.x,x.y)})),G.classed("js-placeholder",L),g}}},7163:function(W,I,o){var T=o(41940),k=o(22399),r=o(1426).extendFlat,m=o(30962).overrideAll,h=o(35025),s=o(44467).templatedArray,e=s("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});W.exports=m(s("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:e,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:r(h({editType:"arraydraw"}),{}),font:T({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(W){W.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},64897:function(W,I,o){var T=o(71828),k=o(85501),r=o(7163),m=o(75909).name,h=r.buttons;function s(t,n,a){function i(c,l){return T.coerce(t,n,r,c,l)}i("visible",k(t,n,{name:"buttons",handleItemDefaults:e}).length>0)&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),T.noneOrAll(t,n,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),T.coerceFont(i,"font",a.font),i("bgcolor",a.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function e(t,n){function a(i,c){return T.coerce(t,n,h,i,c)}a("visible",t.method==="skip"||Array.isArray(t.args))&&(a("method"),a("args"),a("args2"),a("label"),a("execute"))}W.exports=function(t,n){k(t,n,{name:m,handleItemDefaults:s})}},13689:function(W,I,o){var T=o(39898),k=o(74875),r=o(7901),m=o(91424),h=o(71828),s=o(63893),e=o(44467).arrayEditor,t=o(18783).LINE_SPACING,n=o(75909),a=o(25849);function i(M){return M._index}function c(M,L){return+M.attr(n.menuIndexAttrName)===L._index}function l(M,L,E,S,O,P,U,R){L.active=U,e(M.layout,n.name,L).applyUpdate("active",U),L.type==="buttons"?f(M,S,null,null,L):L.type==="dropdown"&&(O.attr(n.menuIndexAttrName,"-1"),u(M,S,O,P,L),R||f(M,S,O,P,L))}function u(M,L,E,S,O){var P=h.ensureSingle(L,"g",n.headerClassName,function(G){G.style("pointer-events","all")}),U=O._dims,R=O.active,j=O.buttons[R]||n.blankHeaderOpts,B={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},z={width:U.headerWidth,height:U.headerHeight};P.call(d,O,j,M).call(g,O,B,z),h.ensureSingle(L,"text",n.headerArrowClassName,function(G){G.attr("text-anchor","end").call(m.font,O.font).text(n.arrowSymbol[O.direction])}).attr({x:U.headerWidth-n.arrowOffsetX+O.pad.l,y:U.headerHeight/2+n.textOffsetY+O.pad.t}),P.on("click",function(){E.call(A,String(c(E,O)?-1:O._index)),f(M,L,E,S,O)}),P.on("mouseover",function(){P.call(y)}),P.on("mouseout",function(){P.call(b,O)}),m.setTranslate(L,U.lx,U.ly)}function f(M,L,E,S,O){E||(E=L).attr("pointer-events","all");var P=function(Y){return+Y.attr(n.menuIndexAttrName)==-1}(E)&&O.type!=="buttons"?[]:O.buttons,U=O.type==="dropdown"?n.dropdownButtonClassName:n.buttonClassName,R=E.selectAll("g."+U).data(h.filterVisible(P)),j=R.enter().append("g").classed(U,!0),B=R.exit();O.type==="dropdown"?(j.attr("opacity","0").transition().attr("opacity","1"),B.transition().attr("opacity","0").remove()):B.remove();var z=0,G=0,V=O._dims,et=["up","down"].indexOf(O.direction)!==-1;O.type==="dropdown"&&(et?G=V.headerHeight+n.gapButtonHeader:z=V.headerWidth+n.gapButtonHeader),O.type==="dropdown"&&O.direction==="up"&&(G=-n.gapButtonHeader+n.gapButton-V.openHeight),O.type==="dropdown"&&O.direction==="left"&&(z=-n.gapButtonHeader+n.gapButton-V.openWidth);var J={x:V.lx+z+O.pad.l,y:V.ly+G+O.pad.t,yPad:n.gapButton,xPad:n.gapButton,index:0},X={l:J.x+O.borderwidth,t:J.y+O.borderwidth};R.each(function(Y,Z){var tt=T.select(this);tt.call(d,O,Y,M).call(g,O,J),tt.on("click",function(){T.event.defaultPrevented||(Y.execute&&(Y.args2&&O.active===Z?(l(M,O,0,L,E,S,-1),k.executeAPICommand(M,Y.method,Y.args2)):(l(M,O,0,L,E,S,Z),k.executeAPICommand(M,Y.method,Y.args))),M.emit("plotly_buttonclicked",{menu:O,button:Y,active:O.active}))}),tt.on("mouseover",function(){tt.call(y)}),tt.on("mouseout",function(){tt.call(b,O),R.call(p,O)})}),R.call(p,O),et?(X.w=Math.max(V.openWidth,V.headerWidth),X.h=J.y-X.t):(X.w=J.x-X.l,X.h=Math.max(V.openHeight,V.headerHeight)),X.direction=O.direction,S&&(R.size()?function(Y,Z,tt,rt,nt,ot){var ct,pt,gt,kt=nt.direction,yt=kt==="up"||kt==="down",mt=nt._dims,Ot=nt.active;if(yt)for(pt=0,gt=0;gt<Ot;gt++)pt+=mt.heights[gt]+n.gapButton;else for(ct=0,gt=0;gt<Ot;gt++)ct+=mt.widths[gt]+n.gapButton;rt.enable(ot,ct,pt),rt.hbar&&rt.hbar.attr("opacity","0").transition().attr("opacity","1"),rt.vbar&&rt.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,S,O,X):function(Y){var Z=!!Y.hbar,tt=!!Y.vbar;Z&&Y.hbar.transition().attr("opacity","0").each("end",function(){Z=!1,tt||Y.disable()}),tt&&Y.vbar.transition().attr("opacity","0").each("end",function(){tt=!1,Z||Y.disable()})}(S))}function d(M,L,E,S){M.call(w,L).call(v,L,E,S)}function w(M,L){h.ensureSingle(M,"rect",n.itemRectClassName,function(E){E.attr({rx:n.rx,ry:n.ry,"shape-rendering":"crispEdges"})}).call(r.stroke,L.bordercolor).call(r.fill,L.bgcolor).style("stroke-width",L.borderwidth+"px")}function v(M,L,E,S){var O=h.ensureSingle(M,"text",n.itemTextClassName,function(R){R.attr({"text-anchor":"start","data-notex":1})}),P=E.label,U=S._fullLayout._meta;U&&(P=h.templateString(P,U)),O.call(m.font,L.font).text(P).call(s.convertToTspans,S)}function p(M,L){var E=L.active;M.each(function(S,O){var P=T.select(this);O===E&&L.showactive&&P.select("rect."+n.itemRectClassName).call(r.fill,n.activeColor)})}function y(M){M.select("rect."+n.itemRectClassName).call(r.fill,n.hoverColor)}function b(M,L){M.select("rect."+n.itemRectClassName).call(r.fill,L.bgcolor)}function x(M,L){var E=L._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},S=m.tester.selectAll("g."+n.dropdownButtonClassName).data(h.filterVisible(L.buttons));S.enter().append("g").classed(n.dropdownButtonClassName,!0);var O=["up","down"].indexOf(L.direction)!==-1;S.each(function(z,G){var V=T.select(this);V.call(d,L,z,M);var et=V.select("."+n.itemTextClassName),J=et.node()&&m.bBox(et.node()).width,X=Math.max(J+n.textPadX,n.minWidth),Y=L.font.size*t,Z=s.lineCount(et),tt=Math.max(Y*Z,n.minHeight)+n.textOffsetY;tt=Math.ceil(tt),X=Math.ceil(X),E.widths[G]=X,E.heights[G]=tt,E.height1=Math.max(E.height1,tt),E.width1=Math.max(E.width1,X),O?(E.totalWidth=Math.max(E.totalWidth,X),E.openWidth=E.totalWidth,E.totalHeight+=tt+n.gapButton,E.openHeight+=tt+n.gapButton):(E.totalWidth+=X+n.gapButton,E.openWidth+=X+n.gapButton,E.totalHeight=Math.max(E.totalHeight,tt),E.openHeight=E.totalHeight)}),O?E.totalHeight-=n.gapButton:E.totalWidth-=n.gapButton,E.headerWidth=E.width1+n.arrowPadX,E.headerHeight=E.height1,L.type==="dropdown"&&(O?(E.width1+=n.arrowPadX,E.totalHeight=E.height1):E.totalWidth=E.width1,E.totalWidth+=n.arrowPadX),S.remove();var P=E.totalWidth+L.pad.l+L.pad.r,U=E.totalHeight+L.pad.t+L.pad.b,R=M._fullLayout._size;E.lx=R.l+R.w*L.x,E.ly=R.t+R.h*(1-L.y);var j="left";h.isRightAnchor(L)&&(E.lx-=P,j="right"),h.isCenterAnchor(L)&&(E.lx-=P/2,j="center");var B="top";h.isBottomAnchor(L)&&(E.ly-=U,B="bottom"),h.isMiddleAnchor(L)&&(E.ly-=U/2,B="middle"),E.totalWidth=Math.ceil(E.totalWidth),E.totalHeight=Math.ceil(E.totalHeight),E.lx=Math.round(E.lx),E.ly=Math.round(E.ly),k.autoMargin(M,_(L),{x:L.x,y:L.y,l:P*({right:1,center:.5}[j]||0),r:P*({left:1,center:.5}[j]||0),b:U*({top:1,middle:.5}[B]||0),t:U*({bottom:1,middle:.5}[B]||0)})}function _(M){return n.autoMarginIdRoot+M._index}function g(M,L,E,S){S=S||{};var O=M.select("."+n.itemRectClassName),P=M.select("."+n.itemTextClassName),U=L.borderwidth,R=E.index,j=L._dims;m.setTranslate(M,U+E.x,U+E.y);var B=["up","down"].indexOf(L.direction)!==-1,z=S.height||(B?j.heights[R]:j.height1);O.attr({x:0,y:0,width:S.width||(B?j.width1:j.widths[R]),height:z});var G=L.font.size*t,V=(s.lineCount(P)-1)*G/2;s.positionText(P,n.textOffsetX,z/2-V+n.textOffsetY),B?E.y+=j.heights[R]+E.yPad:E.x+=j.widths[R]+E.xPad,E.index++}function A(M,L){M.attr(n.menuIndexAttrName,L||"-1").selectAll("g."+n.dropdownButtonClassName).remove()}W.exports=function(M){var L=M._fullLayout,E=h.filterVisible(L[n.name]);function S(G){k.autoMargin(M,_(G))}var O=L._menulayer.selectAll("g."+n.containerClassName).data(E.length>0?[0]:[]);if(O.enter().append("g").classed(n.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){T.select(this).selectAll("g."+n.headerGroupClassName).each(S)}).remove(),E.length!==0){var P=O.selectAll("g."+n.headerGroupClassName).data(E,i);P.enter().append("g").classed(n.headerGroupClassName,!0);for(var U=h.ensureSingle(O,"g",n.dropdownButtonGroupClassName,function(G){G.style("pointer-events","all")}),R=0;R<E.length;R++){var j=E[R];x(M,j)}var B="updatemenus"+L._uid,z=new a(M,U,B);P.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(A)),P.exit().each(function(G){U.call(A),S(G)}).remove(),P.each(function(G){var V=T.select(this),et=G.type==="dropdown"?U:null;k.manageCommandObserver(M,G,G.buttons,function(J){l(M,G,G.buttons[J.index],V,et,z,J.index,!0)}),G.type==="dropdown"?(u(M,V,U,z,G),c(U,G)&&f(M,V,U,z,G)):f(M,V,null,null,G)})}}},20763:function(W,I,o){var T=o(75909);W.exports={moduleType:"component",name:T.name,layoutAttributes:o(7163),supplyLayoutDefaults:o(64897),draw:o(13689)}},25849:function(W,I,o){W.exports=h;var T=o(39898),k=o(7901),r=o(91424),m=o(71828);function h(s,e,t){this.gd=s,this.container=e,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}h.barWidth=2,h.barLength=20,h.barRadius=2,h.barPad=1,h.barColor="#808BA4",h.prototype.enable=function(s,e,t){var n=this.gd._fullLayout,a=n.width,i=n.height;this.position=s;var c,l,u,f,d=this.position.l,w=this.position.w,v=this.position.t,p=this.position.h,y=this.position.direction,b=y==="down",x=y==="left",_=y==="up",g=w,A=p;b||x||y==="right"||_||(this.position.direction="down",b=!0),b||_?(l=(c=d)+g,b?(u=v,A=(f=Math.min(u+A,i))-u):A=(f=v+A)-(u=Math.max(f-A,0))):(f=(u=v)+A,x?g=(l=d+g)-(c=Math.max(l-g,0)):(c=d,g=(l=Math.min(c+g,a))-c)),this._box={l:c,t:u,w:g,h:A};var M=w>g,L=h.barLength+2*h.barPad,E=h.barWidth+2*h.barPad,S=d,O=v+p;O+E>i&&(O=i-E);var P=this.container.selectAll("rect.scrollbar-horizontal").data(M?[0]:[]);P.exit().on(".drag",null).remove(),P.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,h.barColor),M?(this.hbar=P.attr({rx:h.barRadius,ry:h.barRadius,x:S,y:O,width:L,height:E}),this._hbarXMin=S+L/2,this._hbarTranslateMax=g-L):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=p>A,R=h.barWidth+2*h.barPad,j=h.barLength+2*h.barPad,B=d+w,z=v;B+R>a&&(B=a-R);var G=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);G.exit().on(".drag",null).remove(),G.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,h.barColor),U?(this.vbar=G.attr({rx:h.barRadius,ry:h.barRadius,x:B,y:z,width:R,height:j}),this._vbarYMin=z+j/2,this._vbarTranslateMax=A-j):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var V=this.id,et=c-.5,J=U?l+R+.5:l+.5,X=u-.5,Y=M?f+E+.5:f+.5,Z=n._topdefs.selectAll("#"+V).data(M||U?[0]:[]);if(Z.exit().remove(),Z.enter().append("clipPath").attr("id",V).append("rect"),M||U?(this._clipRect=Z.select("rect").attr({x:Math.floor(et),y:Math.floor(X),width:Math.ceil(J)-Math.floor(et),height:Math.ceil(Y)-Math.floor(X)}),this.container.call(r.setClipUrl,V,this.gd),this.bg.attr({x:d,y:v,width:w,height:p})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(r.setClipUrl,null),delete this._clipRect),M||U){var tt=T.behavior.drag().on("dragstart",function(){T.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(tt);var rt=T.behavior.drag().on("dragstart",function(){T.event.sourceEvent.preventDefault(),T.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));M&&this.hbar.on(".drag",null).call(rt),U&&this.vbar.on(".drag",null).call(rt)}this.setTranslate(e,t)},h.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(r.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},h.prototype._onBoxDrag=function(){var s=this.translateX,e=this.translateY;this.hbar&&(s-=T.event.dx),this.vbar&&(e-=T.event.dy),this.setTranslate(s,e)},h.prototype._onBoxWheel=function(){var s=this.translateX,e=this.translateY;this.hbar&&(s+=T.event.deltaY),this.vbar&&(e+=T.event.deltaY),this.setTranslate(s,e)},h.prototype._onBarDrag=function(){var s=this.translateX,e=this.translateY;if(this.hbar){var t=s+this._hbarXMin,n=t+this._hbarTranslateMax;s=(m.constrain(T.event.x,t,n)-t)/(n-t)*(this.position.w-this._box.w)}if(this.vbar){var a=e+this._vbarYMin,i=a+this._vbarTranslateMax;e=(m.constrain(T.event.y,a,i)-a)/(i-a)*(this.position.h-this._box.h)}this.setTranslate(s,e)},h.prototype.setTranslate=function(s,e){var t=this.position.w-this._box.w,n=this.position.h-this._box.h;if(s=m.constrain(s||0,0,t),e=m.constrain(e||0,0,n),this.translateX=s,this.translateY=e,this.container.call(r.setTranslate,this._box.l-this.position.l-s,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+s-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var a=s/t;this.hbar.call(r.setTranslate,s+a*this._hbarTranslateMax,e)}if(this.vbar){var i=e/n;this.vbar.call(r.setTranslate,s,e+i*this._vbarTranslateMax)}}},18783:function(W){W.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(W){W.exports={axisRefDescription:function(I,o,T){return["If set to a",I,"axis id (e.g. *"+I+"* or","*"+I+"2*), the `"+I+"` position refers to a",I,"coordinate. If set to *paper*, the `"+I+"`","position refers to the distance from the",o,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",o,"("+T+"). If set to a",I,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",o,"of the domain of that axis: e.g.,","*"+I+"2 domain* refers to the domain of the second",I," axis and a",I,"position of 0.5 refers to the","point between the",o,"and the",T,"of the domain of the","second",I,"axis."].join(" ")}}},22372:function(W){W.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},31562:function(W){W.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(W){W.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(W){W.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(W){W.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},37822:function(W){W.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(W){W.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},32396:function(W,I){I.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],I.STYLE=I.CSS_DECLARATIONS.map(function(o){return o.join(": ")+"; "}).join("")},77922:function(W,I){I.xmlns="http://www.w3.org/2000/xmlns/",I.svg="http://www.w3.org/2000/svg",I.xlink="http://www.w3.org/1999/xlink",I.svgAttrs={xmlns:I.svg,"xmlns:xlink":I.xlink}},8729:function(W,I,o){I.version=o(11506).version,o(7417),o(98847);for(var T=o(73972),k=I.register=T.register,r=o(10641),m=Object.keys(r),h=0;h<m.length;h++){var s=m[h];s.charAt(0)!=="_"&&(I[s]=r[s]),k({moduleType:"apiMethod",name:s,fn:r[s]})}k(o(67368)),k([o(32745),o(2468),o(47322),o(89853),o(68804),o(20763),o(23243),o(13137),o(97218),o(83312),o(37369),o(21081),o(12311),o(2199),o(30211),o(64168)]),k([o(92177),o(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),I.Icons=o(24255);var e=o(30211),t=o(74875);I.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},I.Fx={hover:e.hover,unhover:e.unhover,loneHover:e.loneHover,loneUnhover:e.loneUnhover},I.Snapshot=o(44511),I.PlotSchema=o(86281)},24255:function(W){W.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function(W,I){I.isLeftAnchor=function(o){return o.xanchor==="left"||o.xanchor==="auto"&&o.x<=.3333333333333333},I.isCenterAnchor=function(o){return o.xanchor==="center"||o.xanchor==="auto"&&o.x>.3333333333333333&&o.x<.6666666666666666},I.isRightAnchor=function(o){return o.xanchor==="right"||o.xanchor==="auto"&&o.x>=.6666666666666666},I.isTopAnchor=function(o){return o.yanchor==="top"||o.yanchor==="auto"&&o.y>=.6666666666666666},I.isMiddleAnchor=function(o){return o.yanchor==="middle"||o.yanchor==="auto"&&o.y>.3333333333333333&&o.y<.6666666666666666},I.isBottomAnchor=function(o){return o.yanchor==="bottom"||o.yanchor==="auto"&&o.y<=.3333333333333333}},26348:function(W,I,o){var T=o(64872),k=T.mod,r=T.modHalf,m=Math.PI,h=2*m;function s(a){return Math.abs(a[1]-a[0])>h-1e-14}function e(a,i){return r(i-a,h)}function t(a,i){if(s(i))return!0;var c,l;i[0]<i[1]?(c=i[0],l=i[1]):(c=i[1],l=i[0]),(c=k(c,h))>(l=k(l,h))&&(l+=h);var u=k(a,h),f=u+h;return u>=c&&u<=l||f>=c&&f<=l}function n(a,i,c,l,u,f,d){u=u||0,f=f||0;var w,v,p,y,b,x=s([c,l]);function _(L,E){return[L*Math.cos(E)+u,f-L*Math.sin(E)]}x?(w=0,v=m,p=h):c<l?(w=c,p=l):(w=l,p=c),a<i?(y=a,b=i):(y=i,b=a);var g,A=Math.abs(p-w)<=m?0:1;function M(L,E,S){return"A"+[L,L]+" "+[0,A,S]+" "+_(L,E)}return x?g=y===null?"M"+_(b,w)+M(b,v,0)+M(b,p,0)+"Z":"M"+_(y,w)+M(y,v,0)+M(y,p,0)+"ZM"+_(b,w)+M(b,v,1)+M(b,p,1)+"Z":y===null?(g="M"+_(b,w)+M(b,p,0),d&&(g+="L0,0Z")):g="M"+_(y,w)+"L"+_(b,w)+M(b,p,0)+"L"+_(y,p)+M(y,w,1)+"Z",g}W.exports={deg2rad:function(a){return a/180*m},rad2deg:function(a){return a/m*180},angleDelta:e,angleDist:function(a,i){return Math.abs(e(a,i))},isFullCircle:s,isAngleInsideSector:t,isPtInsideSector:function(a,i,c,l){return!!t(i,l)&&(c[0]<c[1]?(u=c[0],f=c[1]):(u=c[1],f=c[0]),a>=u&&a<=f);var u,f},pathArc:function(a,i,c,l,u){return n(null,a,i,c,l,u,0)},pathSector:function(a,i,c,l,u){return n(null,a,i,c,l,u,1)},pathAnnulus:function(a,i,c,l,u,f){return n(a,i,c,l,u,f,1)}}},73627:function(W,I){var o=Array.isArray,T=ArrayBuffer,k=DataView;function r(s){return T.isView(s)&&!(s instanceof k)}function m(s){return o(s)||r(s)}function h(s,e,t){if(m(s)){if(m(s[0])){for(var n=t,a=0;a<s.length;a++)n=e(n,s[a].length);return n}return s.length}return 0}I.isTypedArray=r,I.isArrayOrTypedArray=m,I.isArray1D=function(s){return!m(s[0])},I.ensureArray=function(s,e){return o(s)||(s=[]),s.length=e,s},I.concat=function(){var s,e,t,n,a,i,c,l,u=[],f=!0,d=0;for(t=0;t<arguments.length;t++)(i=(n=arguments[t]).length)&&(e?u.push(n):(e=n,a=i),o(n)?s=!1:(f=!1,d?s!==n.constructor&&(s=!1):s=n.constructor),d+=i);if(!d)return[];if(!u.length)return e;if(f)return e.concat.apply(e,u);if(s){for((c=new s(d)).set(e),t=0;t<u.length;t++)n=u[t],c.set(n,a),a+=n.length;return c}for(c=new Array(d),l=0;l<e.length;l++)c[l]=e[l];for(t=0;t<u.length;t++){for(n=u[t],l=0;l<n.length;l++)c[a+l]=n[l];a+=l}return c},I.maxRowLength=function(s){return h(s,Math.max,0)},I.minRowLength=function(s){return h(s,Math.min,1/0)}},95218:function(W,I,o){var T=o(92770),k=o(50606).BADNUM,r=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;W.exports=function(m){return typeof m=="string"&&(m=m.replace(r,"")),T(m)?Number(m):k}},33306:function(W){W.exports=function(I){var o=I._fullLayout;o._glcanvas&&o._glcanvas.size()&&o._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},86367:function(W){W.exports=function(I){I._responsiveChartHandler&&(window.removeEventListener("resize",I._responsiveChartHandler),delete I._responsiveChartHandler)}},96554:function(W,I,o){var T=o(92770),k=o(84267),r=o(9012),m=o(63282),h=o(7901),s=o(37822).DESELECTDIM,e=o(65487),t=o(30587).counter,n=o(64872).modHalf,a=o(73627).isArrayOrTypedArray;function i(c,l){var u=I.valObjectMeta[l.valType];if(l.arrayOk&&a(c))return!0;if(u.validateFunction)return u.validateFunction(c,l);var f={},d=f,w={set:function(v){d=v}};return u.coerceFunction(c,w,f,l),d!==f}I.valObjectMeta={data_array:{coerceFunction:function(c,l,u){a(c)?l.set(c):u!==void 0&&l.set(u)}},enumerated:{coerceFunction:function(c,l,u,f){f.coerceNumber&&(c=+c),f.values.indexOf(c)===-1?l.set(u):l.set(c)},validateFunction:function(c,l){l.coerceNumber&&(c=+c);for(var u=l.values,f=0;f<u.length;f++){var d=String(u[f]);if(d.charAt(0)==="/"&&d.charAt(d.length-1)==="/"){if(new RegExp(d.substr(1,d.length-2)).test(c))return!0}else if(c===u[f])return!0}return!1}},boolean:{coerceFunction:function(c,l,u){c===!0||c===!1?l.set(c):l.set(u)}},number:{coerceFunction:function(c,l,u,f){!T(c)||f.min!==void 0&&c<f.min||f.max!==void 0&&c>f.max?l.set(u):l.set(+c)}},integer:{coerceFunction:function(c,l,u,f){c%1||!T(c)||f.min!==void 0&&c<f.min||f.max!==void 0&&c>f.max?l.set(u):l.set(+c)}},string:{coerceFunction:function(c,l,u,f){if(typeof c!="string"){var d=typeof c=="number";f.strict!==!0&&d?l.set(String(c)):l.set(u)}else f.noBlank&&!c?l.set(u):l.set(c)}},color:{coerceFunction:function(c,l,u){k(c).isValid()?l.set(c):l.set(u)}},colorlist:{coerceFunction:function(c,l,u){Array.isArray(c)&&c.length&&c.every(function(f){return k(f).isValid()})?l.set(c):l.set(u)}},colorscale:{coerceFunction:function(c,l,u){l.set(m.get(c,u))}},angle:{coerceFunction:function(c,l,u){c==="auto"?l.set("auto"):T(c)?l.set(n(+c,360)):l.set(u)}},subplotid:{coerceFunction:function(c,l,u,f){var d=f.regex||t(u);typeof c=="string"&&d.test(c)?l.set(c):l.set(u)},validateFunction:function(c,l){var u=l.dflt;return c===u||typeof c=="string"&&!!t(u).test(c)}},flaglist:{coerceFunction:function(c,l,u,f){if((f.extras||[]).indexOf(c)===-1)if(typeof c=="string"){for(var d=c.split("+"),w=0;w<d.length;){var v=d[w];f.flags.indexOf(v)===-1||d.indexOf(v)<w?d.splice(w,1):w++}d.length?l.set(d.join("+")):l.set(u)}else l.set(u);else l.set(c)}},any:{coerceFunction:function(c,l,u){c===void 0?l.set(u):l.set(c)}},info_array:{coerceFunction:function(c,l,u,f){function d(O,P,U){var R,j={set:function(B){R=B}};return U===void 0&&(U=P.dflt),I.valObjectMeta[P.valType].coerceFunction(O,j,U,P),R}var w=f.dimensions===2||f.dimensions==="1-2"&&Array.isArray(c)&&Array.isArray(c[0]);if(Array.isArray(c)){var v,p,y,b,x,_,g=f.items,A=[],M=Array.isArray(g),L=M&&w&&Array.isArray(g[0]),E=w&&M&&!L,S=M&&!E?g.length:c.length;if(u=Array.isArray(u)?u:[],w)for(v=0;v<S;v++)for(A[v]=[],y=Array.isArray(c[v])?c[v]:[],x=E?g.length:M?g[v].length:y.length,p=0;p<x;p++)b=E?g[p]:M?g[v][p]:g,(_=d(y[p],b,(u[v]||[])[p]))!==void 0&&(A[v][p]=_);else for(v=0;v<S;v++)(_=d(c[v],M?g[v]:g,u[v]))!==void 0&&(A[v]=_);l.set(A)}else l.set(u)},validateFunction:function(c,l){if(!Array.isArray(c))return!1;var u=l.items,f=Array.isArray(u),d=l.dimensions===2;if(!l.freeLength&&c.length!==u.length)return!1;for(var w=0;w<c.length;w++)if(d){if(!Array.isArray(c[w])||!l.freeLength&&c[w].length!==u[w].length)return!1;for(var v=0;v<c[w].length;v++)if(!i(c[w][v],f?u[w][v]:u))return!1}else if(!i(c[w],f?u[w]:u))return!1;return!0}}},I.coerce=function(c,l,u,f,d){var w=e(u,f).get(),v=e(c,f),p=e(l,f),y=v.get(),b=l._template;if(y===void 0&&b&&(y=e(b,f).get(),b=0),d===void 0&&(d=w.dflt),w.arrayOk&&a(y))return p.set(y),y;var x=I.valObjectMeta[w.valType].coerceFunction;x(y,p,d,w);var _=p.get();return b&&_===d&&!i(y,w)&&(x(y=e(b,f).get(),p,d,w),_=p.get()),_},I.coerce2=function(c,l,u,f,d){var w=e(c,f),v=I.coerce(c,l,u,f,d);return w.get()!=null&&v},I.coerceFont=function(c,l,u){var f={};return u=u||{},f.family=c(l+".family",u.family),f.size=c(l+".size",u.size),f.color=c(l+".color",u.color),f},I.coercePattern=function(c,l,u,f){if(c(l+".shape")){c(l+".solidity"),c(l+".size");var d=c(l+".fillmode")==="overlay";if(!f){var w=c(l+".bgcolor",d?u:void 0);c(l+".fgcolor",d?h.contrast(w):u)}c(l+".fgopacity",d?.5:1)}},I.coerceHoverinfo=function(c,l,u){var f,d=l._module.attributes,w=d.hoverinfo?d:r,v=w.hoverinfo;if(u._dataLength===1){var p=v.dflt==="all"?v.flags.slice():v.dflt.split("+");p.splice(p.indexOf("name"),1),f=p.join("+")}return I.coerce(c,l,w,"hoverinfo",f)},I.coerceSelectionMarkerOpacity=function(c,l){if(c.marker){var u,f,d=c.marker.opacity;d!==void 0&&(a(d)||c.selected||c.unselected||(u=d,f=s*d),l("selected.marker.opacity",u),l("unselected.marker.opacity",f))}},I.validate=i},41631:function(W,I,o){var T,k,r=o(84096).i$,m=o(92770),h=o(47769),s=o(64872).mod,e=o(50606),t=e.BADNUM,n=e.ONEDAY,a=e.ONEHOUR,i=e.ONEMIN,c=e.ONESEC,l=e.EPOCHJD,u=o(73972),f=o(84096).g0,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,w=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=new Date().getFullYear()-70;function p(P){return P&&u.componentsRegistry.calendars&&typeof P=="string"&&P!=="gregorian"}function y(P,U){return String(P+Math.pow(10,U)).substr(1)}I.dateTick0=function(P,U){var R=function(B,z){return p(B)?z?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[B]:u.getComponentMethod("calendars","CANONICAL_TICK")[B]:z?"2000-01-02":"2000-01-01"}(P,!!U);if(U<2)return R;var j=I.dateTime2ms(R,P);return j+=n*(U-1),I.ms2DateTime(j,0,P)},I.dfltRange=function(P){return p(P)?u.getComponentMethod("calendars","DFLTRANGE")[P]:["2000-01-01","2001-01-01"]},I.isJSDate=function(P){return typeof P=="object"&&P!==null&&typeof P.getTime=="function"},I.dateTime2ms=function(P,U){if(I.isJSDate(P)){var R=P.getTimezoneOffset()*i,j=(P.getUTCMinutes()-P.getMinutes())*i+(P.getUTCSeconds()-P.getSeconds())*c+(P.getUTCMilliseconds()-P.getMilliseconds());if(j){var B=3*i;R=R-B/2+s(j-R+B/2,B)}return(P=Number(P)-R)>=T&&P<=k?P:t}if(typeof P!="string"&&typeof P!="number")return t;P=String(P);var z=p(U),G=P.charAt(0);!z||G!=="G"&&G!=="g"||(P=P.substr(1),U="");var V=z&&U.substr(0,7)==="chinese",et=P.match(V?w:d);if(!et)return t;var J=et[1],X=et[3]||"1",Y=Number(et[5]||1),Z=Number(et[7]||0),tt=Number(et[9]||0),rt=Number(et[11]||0);if(z){if(J.length===2)return t;var nt;J=Number(J);try{var ot=u.getComponentMethod("calendars","getCal")(U);if(V){var ct=X.charAt(X.length-1)==="i";X=parseInt(X,10),nt=ot.newDate(J,ot.toMonthIndex(J,X,ct),Y)}else nt=ot.newDate(J,Number(X),Y)}catch{return t}return nt?(nt.toJD()-l)*n+Z*a+tt*i+rt*c:t}J=J.length===2?(Number(J)+2e3-v)%100+v:Number(J),X-=1;var pt=new Date(Date.UTC(2e3,X,Y,Z,tt));return pt.setUTCFullYear(J),pt.getUTCMonth()!==X||pt.getUTCDate()!==Y?t:pt.getTime()+rt*c},T=I.MIN_MS=I.dateTime2ms("-9999"),k=I.MAX_MS=I.dateTime2ms("9999-12-31 23:59:59.9999"),I.isDateTime=function(P,U){return I.dateTime2ms(P,U)!==t};var b=90*n,x=3*a,_=5*i;function g(P,U,R,j,B){if((U||R||j||B)&&(P+=" "+y(U,2)+":"+y(R,2),(j||B)&&(P+=":"+y(j,2),B))){for(var z=4;B%10==0;)z-=1,B/=10;P+="."+y(B,z)}return P}I.ms2DateTime=function(P,U,R){if(typeof P!="number"||!(P>=T&&P<=k))return t;U||(U=0);var j,B,z,G,V,et,J=Math.floor(10*s(P+.05,1)),X=Math.round(P-J/10);if(p(R)){var Y=Math.floor(X/n)+l,Z=Math.floor(s(P,n));try{j=u.getComponentMethod("calendars","getCal")(R).fromJD(Y).formatDate("yyyy-mm-dd")}catch{j=f("G%Y-%m-%d")(new Date(X))}if(j.charAt(0)==="-")for(;j.length<11;)j="-0"+j.substr(1);else for(;j.length<10;)j="0"+j;B=U<b?Math.floor(Z/a):0,z=U<b?Math.floor(Z%a/i):0,G=U<x?Math.floor(Z%i/c):0,V=U<_?Z%c*10+J:0}else et=new Date(X),j=f("%Y-%m-%d")(et),B=U<b?et.getUTCHours():0,z=U<b?et.getUTCMinutes():0,G=U<x?et.getUTCSeconds():0,V=U<_?10*et.getUTCMilliseconds()+J:0;return g(j,B,z,G,V)},I.ms2DateTimeLocal=function(P){if(!(P>=T+n&&P<=k-n))return t;var U=Math.floor(10*s(P+.05,1)),R=new Date(Math.round(P-U/10));return g(r("%Y-%m-%d")(R),R.getHours(),R.getMinutes(),R.getSeconds(),10*R.getUTCMilliseconds()+U)},I.cleanDate=function(P,U,R){if(P===t)return U;if(I.isJSDate(P)||typeof P=="number"&&isFinite(P)){if(p(R))return h.error("JS Dates and milliseconds are incompatible with world calendars",P),U;if(!(P=I.ms2DateTimeLocal(+P))&&U!==void 0)return U}else if(!I.isDateTime(P,R))return h.error("unrecognized date",P),U;return P};var A=/%\d?f/g,M=/%h/g,L={1:"1",2:"1",3:"2",4:"2"};function E(P,U,R,j){P=P.replace(A,function(z){var G=Math.min(+z.charAt(1)||6,6);return(U/1e3%1+2).toFixed(G).substr(2).replace(/0+$/,"")||"0"});var B=new Date(Math.floor(U+.05));if(P=P.replace(M,function(){return L[R("%q")(B)]}),p(j))try{P=u.getComponentMethod("calendars","worldCalFmt")(P,U,j)}catch{return"Invalid"}return R(P)(B)}var S=[59,59.9,59.99,59.999,59.9999];I.formatDate=function(P,U,R,j,B,z){if(B=p(B)&&B,!U)if(R==="y")U=z.year;else if(R==="m")U=z.month;else{if(R!=="d")return function(G,V){var et=s(G+.05,n),J=y(Math.floor(et/a),2)+":"+y(s(Math.floor(et/i),60),2);if(V!=="M"){m(V)||(V=0);var X=(100+Math.min(s(G/c,60),S[V])).toFixed(V).substr(1);V>0&&(X=X.replace(/0+$/,"").replace(/[\.]$/,"")),J+=":"+X}return J}(P,R)+`
`+E(z.dayMonthYear,P,j,B);U=z.dayMonth+`
`+z.year}return E(U,P,j,B)};var O=3*n;I.incrementMonth=function(P,U,R){R=p(R)&&R;var j=s(P,n);if(P=Math.round(P-j),R)try{var B=Math.round(P/n)+l,z=u.getComponentMethod("calendars","getCal")(R),G=z.fromJD(B);return U%12?z.add(G,U,"m"):z.add(G,U/12,"y"),(G.toJD()-l)*n+j}catch{h.error("invalid ms "+P+" in calendar "+R)}var V=new Date(P+O);return V.setUTCMonth(V.getUTCMonth()+U)+j-O},I.findExactDates=function(P,U){for(var R,j,B=0,z=0,G=0,V=0,et=p(U)&&u.getComponentMethod("calendars","getCal")(U),J=0;J<P.length;J++)if(j=P[J],m(j)){if(!(j%n))if(et)try{(R=et.fromJD(j/n+l)).day()===1?R.month()===1?B++:z++:G++}catch{}else(R=new Date(j)).getUTCDate()===1?R.getUTCMonth()===0?B++:z++:G++}else V++;G+=z+=B;var X=P.length-V;return{exactYears:B/X,exactMonths:z/X,exactDays:G/X}}},24401:function(W,I,o){var T=o(39898),k=o(47769),r=o(35657),m=o(79576);function h(a){var i=a&&a.parentNode;i&&i.removeChild(a)}function s(a,i,c){var l="plotly.js-style-"+a,u=document.getElementById(l);u||((u=document.createElement("style")).setAttribute("id",l),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var f=u.sheet;f.insertRule?f.insertRule(i+"{"+c+"}",0):f.addRule?f.addRule(i,c,0):k.warn("addStyleRule failed")}function e(a){var i=window.getComputedStyle(a,null),c=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("-moz-transform")||i.getPropertyValue("-ms-transform")||i.getPropertyValue("-o-transform")||i.getPropertyValue("transform");return c==="none"?null:c.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function t(a){for(var i=[];n(a);)i.push(a),a=a.parentNode;return i}function n(a){return a&&(a instanceof Element||a instanceof HTMLElement)}W.exports={getGraphDiv:function(a){var i;if(typeof a=="string"){if((i=document.getElementById(a))===null)throw new Error("No DOM element with id '"+a+"' exists on the page.");return i}if(a==null)throw new Error("DOM element provided is null or undefined");return a},isPlotDiv:function(a){var i=T.select(a);return i.node()instanceof HTMLElement&&i.size()&&i.classed("js-plotly-plot")},removeElement:h,addStyleRule:function(a,i){s("global",a,i)},addRelatedStyleRule:s,deleteRelatedStyleRule:function(a){var i="plotly.js-style-"+a,c=document.getElementById(i);c&&h(c)},getFullTransformMatrix:function(a){var i=t(a),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return i.forEach(function(l){var u=e(l);if(u){var f=r.convertCssMatrix(u);c=m.multiply(c,c,f)}}),c},getElementTransformMatrix:e,getElementAndAncestors:t,equalDomRects:function(a,i){return a&&i&&a.top===i.top&&a.left===i.left&&a.right===i.right&&a.bottom===i.bottom}}},11086:function(W,I,o){var T=o(15398).EventEmitter,k={init:function(r){if(r._ev instanceof T)return r;var m=new T,h=new T;return r._ev=m,r._internalEv=h,r.on=m.on.bind(m),r.once=m.once.bind(m),r.removeListener=m.removeListener.bind(m),r.removeAllListeners=m.removeAllListeners.bind(m),r._internalOn=h.on.bind(h),r._internalOnce=h.once.bind(h),r._removeInternalListener=h.removeListener.bind(h),r._removeAllInternalListeners=h.removeAllListeners.bind(h),r.emit=function(s,e){typeof jQuery<"u"&&jQuery(r).trigger(s,e),m.emit(s,e),h.emit(s,e)},r},triggerHandler:function(r,m,h){var s,e;typeof jQuery<"u"&&(s=jQuery(r).triggerHandler(m,h));var t=r._ev;if(!t)return s;var n,a=t._events[m];if(!a)return s;function i(c){return c.listener?(t.removeListener(m,c.listener),c.fired?void 0:(c.fired=!0,c.listener.apply(t,[h]))):c.apply(t,[h])}for(a=Array.isArray(a)?a:[a],n=0;n<a.length-1;n++)i(a[n]);return e=i(a[n]),s!==void 0?s:e},purge:function(r){return delete r._ev,delete r.on,delete r.once,delete r.removeListener,delete r.removeAllListeners,delete r.emit,delete r._ev,delete r._internalEv,delete r._internalOn,delete r._internalOnce,delete r._removeInternalListener,delete r._removeAllInternalListeners,r}};W.exports=k},1426:function(W,I,o){var T=o(41965),k=Array.isArray;function r(m,h,s,e){var t,n,a,i,c,l,u,f=m[0],d=m.length;if(d===2&&k(f)&&k(m[1])&&f.length===0){if(u=function(v,p){var y,b;for(y=0;y<v.length;y++){if((b=v[y])!==null&&typeof b=="object")return!1;b!==void 0&&(p[y]=b)}return!0}(m[1],f),u)return f;f.splice(0,f.length)}for(var w=1;w<d;w++)for(n in t=m[w])a=f[n],i=t[n],e&&k(i)?f[n]=i:h&&i&&(T(i)||(c=k(i)))?(c?(c=!1,l=a&&k(a)?a:[]):l=a&&T(a)?a:{},f[n]=r([l,i],h,s,e)):(i!==void 0||s)&&(f[n]=i);return f}I.extendFlat=function(){return r(arguments,!1,!1,!1)},I.extendDeep=function(){return r(arguments,!0,!1,!1)},I.extendDeepAll=function(){return r(arguments,!0,!0,!1)},I.extendDeepNoArrays=function(){return r(arguments,!0,!1,!0)}},75744:function(W){W.exports=function(I){for(var o={},T=[],k=0,r=0;r<I.length;r++){var m=I[r];o[m]!==1&&(o[m]=1,T[k++]=m)}return T}},76756:function(W){function I(T){return T.visible===!0}function o(T){var k=T[0].trace;return k.visible===!0&&k._length!==0}W.exports=function(T){for(var k,r=(k=T,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?o:I),m=[],h=0;h<T.length;h++){var s=T[h];r(s)&&m.push(s)}return m}},41327:function(W,I,o){var T=o(39898),k=o(24138),r=o(30774),m=o(29261),h=o(85268),s=o(23389),e=o(47769),t=o(41965),n=o(65487),a=o(61082),i=Object.keys(k),c={"ISO-3":s,"USA-states":s,"country names":function(u){for(var f=0;f<i.length;f++){var d=i[f];if(new RegExp(k[d]).test(u.trim().toLowerCase()))return d}return e.log("Unrecognized country name: "+u+"."),!1}};function l(u){var f=u.geojson,d=window.PlotlyGeoAssets||{},w=typeof f=="string"?d[f]:f;return t(w)?w:(e.error("Oops ... something went wrong when fetching "+f),!1)}W.exports={locationToFeature:function(u,f,d){if(!f||typeof f!="string")return!1;var w,v,p,y=c[u](f);if(y){if(u==="USA-states")for(w=[],p=0;p<d.length;p++)(v=d[p]).properties&&v.properties.gu&&v.properties.gu==="USA"&&w.push(v);else w=d;for(p=0;p<w.length;p++)if((v=w[p]).id===y)return v;e.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var f,d,w,v,p=u.geometry,y=p.coordinates,b=u.id,x=[];function _(g){for(var A=0;A<g.length-1;A++)if(g[A][0]>0&&g[A+1][0]<0)return A;return null}switch(f=b==="RUS"||b==="FJI"?function(g){var A;if(_(g)===null)A=g;else for(A=new Array(g.length),v=0;v<g.length;v++)A[v]=[g[v][0]<0?g[v][0]+360:g[v][0],g[v][1]];x.push(a.tester(A))}:b==="ATA"?function(g){var A=_(g);if(A===null)return x.push(a.tester(g));var M=new Array(g.length+1),L=0;for(v=0;v<g.length;v++)v>A?M[L++]=[g[v][0]+360,g[v][1]]:v===A?(M[L++]=g[v],M[L++]=[g[v][0],-90]):M[L++]=g[v];var E=a.tester(M);E.pts.pop(),x.push(E)}:function(g){x.push(a.tester(g))},p.type){case"MultiPolygon":for(d=0;d<y.length;d++)for(w=0;w<y[d].length;w++)f(y[d][w]);break;case"Polygon":for(d=0;d<y.length;d++)f(y[d])}return x},getTraceGeojson:l,extractTraceFeature:function(u){var f=u[0].trace,d=l(f);if(!d)return!1;var w,v={},p=[];for(w=0;w<f._length;w++){var y=u[w];(y.loc||y.loc===0)&&(v[y.loc]=y)}function b(g){var A=n(g,f.featureidkey||"id").get(),M=v[A];if(M){var L=g.geometry;if(L.type==="Polygon"||L.type==="MultiPolygon"){var E={type:"Feature",id:A,geometry:L,properties:{}};E.properties.ct=function(S){var O,P=S.geometry;if(P.type==="MultiPolygon")for(var U=P.coordinates,R=0,j=0;j<U.length;j++){var B={type:"Polygon",coordinates:U[j]},z=r.default(B);z>R&&(R=z,O=B)}else O=P;return m.default(O).geometry.coordinates}(E),M.fIn=g,M.fOut=E,p.push(E)}else e.log(["Location",M.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete v[A]}switch(d.type){case"FeatureCollection":var x=d.features;for(w=0;w<x.length;w++)b(x[w]);break;case"Feature":b(d);break;default:return e.warn(["Invalid GeoJSON type",(d.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var _ in v)e.log(["Location *"+_+"*","does not have a matching feature with id-key","*"+f.featureidkey+"*."].join(" "));return p},fetchTraceGeoData:function(u){var f=window.PlotlyGeoAssets||{},d=[];function w(b){return new Promise(function(x,_){T.json(b,function(g,A){if(g){delete f[b];var M=g.status===404?'GeoJSON at URL "'+b+'" does not exist.':"Unexpected error while fetching from "+b;return _(new Error(M))}return f[b]=A,x(A)})})}function v(b){return new Promise(function(x,_){var g=0,A=setInterval(function(){return f[b]&&f[b]!=="pending"?(clearInterval(A),x(f[b])):g>100?(clearInterval(A),_("Unexpected error while fetching from "+b)):void g++},50)})}for(var p=0;p<u.length;p++){var y=u[p][0].trace.geojson;typeof y=="string"&&(f[y]?f[y]==="pending"&&d.push(v(y)):(f[y]="pending",d.push(w(y))))}return d},computeBbox:function(u){return h.default(u)}}},18214:function(W,I,o){var T=o(50606).BADNUM;I.calcTraceToLineCoords=function(k){for(var r=k[0].trace.connectgaps,m=[],h=[],s=0;s<k.length;s++){var e=k[s].lonlat;e[0]!==T?h.push(e):!r&&h.length>0&&(m.push(h),h=[])}return h.length>0&&m.push(h),m},I.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},I.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var r=new Array(k.length),m=0;m<k.length;m++)r[m]=[k[m]];return{type:"MultiPolygon",coordinates:r}},I.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(W,I,o){var T,k,r,m=o(64872).mod;function h(e,t,n,a,i,c,l,u){var f=n-e,d=i-e,w=l-i,v=a-t,p=c-t,y=u-c,b=f*y-w*v;if(b===0)return null;var x=(d*y-w*p)/b,_=(d*v-f*p)/b;return _<0||_>1||x<0||x>1?null:{x:e+f*x,y:t+v*x}}function s(e,t,n,a,i){var c=a*e+i*t;if(c<0)return a*a+i*i;if(c>n){var l=a-e,u=i-t;return l*l+u*u}var f=a*t-i*e;return f*f/n}I.segmentsIntersect=h,I.segmentDistance=function(e,t,n,a,i,c,l,u){if(h(e,t,n,a,i,c,l,u))return 0;var f=n-e,d=a-t,w=l-i,v=u-c,p=f*f+d*d,y=w*w+v*v,b=Math.min(s(f,d,p,i-e,c-t),s(f,d,p,l-e,u-t),s(w,v,y,e-i,t-c),s(w,v,y,n-i,a-c));return Math.sqrt(b)},I.getTextLocation=function(e,t,n,a){if(e===k&&a===r||(T={},k=e,r=a),T[n])return T[n];var i=e.getPointAtLength(m(n-a/2,t)),c=e.getPointAtLength(m(n+a/2,t)),l=Math.atan((c.y-i.y)/(c.x-i.x)),u=e.getPointAtLength(m(n,t)),f={x:(4*u.x+i.x+c.x)/6,y:(4*u.y+i.y+c.y)/6,theta:l};return T[n]=f,f},I.clearLocationCache=function(){k=null},I.getVisibleSegment=function(e,t,n){var a,i,c=t.left,l=t.right,u=t.top,f=t.bottom,d=0,w=e.getTotalLength(),v=w;function p(b){var x=e.getPointAtLength(b);b===0?a=x:b===w&&(i=x);var _=x.x<c?c-x.x:x.x>l?x.x-l:0,g=x.y<u?u-x.y:x.y>f?x.y-f:0;return Math.sqrt(_*_+g*g)}for(var y=p(d);y;){if((d+=y+n)>v)return;y=p(d)}for(y=p(v);y;){if(d>(v-=y+n))return;y=p(v)}return{min:d,max:v,len:v-d,total:w,isClosed:d===0&&v===w&&Math.abs(a.x-i.x)<.1&&Math.abs(a.y-i.y)<.1}},I.findPointOnPath=function(e,t,n,a){for(var i,c,l,u=(a=a||{}).pathLength||e.getTotalLength(),f=a.tolerance||.001,d=a.iterationLimit||30,w=e.getPointAtLength(0)[n]>e.getPointAtLength(u)[n]?-1:1,v=0,p=0,y=u;v<d;){if(i=(p+y)/2,l=(c=e.getPointAtLength(i))[n]-t,Math.abs(l)<f)return c;w*l>0?y=i:p=i,v++}return c}},81697:function(W,I,o){var T=o(92770),k=o(84267),r=o(25075),m=o(21081),h=o(22399).defaultLine,s=o(73627).isArrayOrTypedArray,e=r(h);function t(i,c){var l=i;return l[3]*=c,l}function n(i){if(T(i))return e;var c=r(i);return c.length?c:e}function a(i){return T(i)?i:1}W.exports={formatColor:function(i,c,l){var u,f,d,w,v,p=i.color,y=s(p),b=s(c),x=m.extractOpts(i),_=[];if(u=x.colorscale!==void 0?m.makeColorScaleFuncFromTrace(i):n,f=y?function(A,M){return A[M]===void 0?e:r(u(A[M]))}:n,d=b?function(A,M){return A[M]===void 0?1:a(A[M])}:a,y||b)for(var g=0;g<l;g++)w=f(p,g),v=d(c,g),_[g]=t(w,v);else _=t(r(p),c);return _},parseColorScale:function(i){var c=m.extractOpts(i),l=c.colorscale;return c.reversescale&&(l=m.flipScale(c.colorscale)),l.map(function(u){var f=u[0],d=k(u[1]).toRgb();return{index:f,rgb:[d.r,d.g,d.b,d.a]}})}}},28984:function(W,I,o){var T=o(23389);function k(r){return[r]}W.exports={keyFun:function(r){return r.key},repeat:k,descend:T,wrap:k,unwrap:function(r){return r[0]}}},23389:function(W){W.exports=function(I){return I}},39240:function(W){W.exports=function(I,o){if(!o)return I;var T=1/Math.abs(o),k=T>1?(T*I+T*o)/T:I+o,r=String(k).length;if(r>16){var m=String(o).length;if(r>=String(I).length+m){var h=parseFloat(k).toPrecision(12);h.indexOf("e+")===-1&&(k=+h)}}return k}},71828:function(W,I,o){var T=o(39898),k=o(84096).g0,r=o(60721).WU,m=o(92770),h=o(50606),s=h.FP_SAFE,e=-s,t=h.BADNUM,n=W.exports={};n.adjustFormat=function(Z){return!Z||/^\d[.]\df/.test(Z)||/[.]\d%/.test(Z)?Z:Z==="0.f"?"~f":/^\d%/.test(Z)?"~%":/^\ds/.test(Z)?"~s":!/^[~,.0$]/.test(Z)&&/[&fps]/.test(Z)?"~"+Z:Z};var a={};n.warnBadFormat=function(Z){var tt=String(Z);a[tt]||(a[tt]=1,n.warn('encountered bad format: "'+tt+'"'))},n.noFormat=function(Z){return String(Z)},n.numberFormat=function(Z){var tt;try{tt=r(n.adjustFormat(Z))}catch{return n.warnBadFormat(Z),n.noFormat}return tt},n.nestedProperty=o(65487),n.keyedContainer=o(66636),n.relativeAttr=o(6962),n.isPlainObject=o(41965),n.toLogRange=o(58163),n.relinkPrivateKeys=o(51332);var i=o(73627);n.isTypedArray=i.isTypedArray,n.isArrayOrTypedArray=i.isArrayOrTypedArray,n.isArray1D=i.isArray1D,n.ensureArray=i.ensureArray,n.concat=i.concat,n.maxRowLength=i.maxRowLength,n.minRowLength=i.minRowLength;var c=o(64872);n.mod=c.mod,n.modHalf=c.modHalf;var l=o(96554);n.valObjectMeta=l.valObjectMeta,n.coerce=l.coerce,n.coerce2=l.coerce2,n.coerceFont=l.coerceFont,n.coercePattern=l.coercePattern,n.coerceHoverinfo=l.coerceHoverinfo,n.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,n.validate=l.validate;var u=o(41631);n.dateTime2ms=u.dateTime2ms,n.isDateTime=u.isDateTime,n.ms2DateTime=u.ms2DateTime,n.ms2DateTimeLocal=u.ms2DateTimeLocal,n.cleanDate=u.cleanDate,n.isJSDate=u.isJSDate,n.formatDate=u.formatDate,n.incrementMonth=u.incrementMonth,n.dateTick0=u.dateTick0,n.dfltRange=u.dfltRange,n.findExactDates=u.findExactDates,n.MIN_MS=u.MIN_MS,n.MAX_MS=u.MAX_MS;var f=o(65888);n.findBin=f.findBin,n.sorterAsc=f.sorterAsc,n.sorterDes=f.sorterDes,n.distinctVals=f.distinctVals,n.roundUp=f.roundUp,n.sort=f.sort,n.findIndexOfMin=f.findIndexOfMin,n.sortObjectKeys=o(78607);var d=o(80038);n.aggNums=d.aggNums,n.len=d.len,n.mean=d.mean,n.median=d.median,n.midRange=d.midRange,n.variance=d.variance,n.stdev=d.stdev,n.interp=d.interp;var w=o(35657);n.init2dArray=w.init2dArray,n.transposeRagged=w.transposeRagged,n.dot=w.dot,n.translationMatrix=w.translationMatrix,n.rotationMatrix=w.rotationMatrix,n.rotationXYMatrix=w.rotationXYMatrix,n.apply3DTransform=w.apply3DTransform,n.apply2DTransform=w.apply2DTransform,n.apply2DTransform2=w.apply2DTransform2,n.convertCssMatrix=w.convertCssMatrix,n.inverseTransformMatrix=w.inverseTransformMatrix;var v=o(26348);n.deg2rad=v.deg2rad,n.rad2deg=v.rad2deg,n.angleDelta=v.angleDelta,n.angleDist=v.angleDist,n.isFullCircle=v.isFullCircle,n.isAngleInsideSector=v.isAngleInsideSector,n.isPtInsideSector=v.isPtInsideSector,n.pathArc=v.pathArc,n.pathSector=v.pathSector,n.pathAnnulus=v.pathAnnulus;var p=o(99863);n.isLeftAnchor=p.isLeftAnchor,n.isCenterAnchor=p.isCenterAnchor,n.isRightAnchor=p.isRightAnchor,n.isTopAnchor=p.isTopAnchor,n.isMiddleAnchor=p.isMiddleAnchor,n.isBottomAnchor=p.isBottomAnchor;var y=o(87642);n.segmentsIntersect=y.segmentsIntersect,n.segmentDistance=y.segmentDistance,n.getTextLocation=y.getTextLocation,n.clearLocationCache=y.clearLocationCache,n.getVisibleSegment=y.getVisibleSegment,n.findPointOnPath=y.findPointOnPath;var b=o(1426);n.extendFlat=b.extendFlat,n.extendDeep=b.extendDeep,n.extendDeepAll=b.extendDeepAll,n.extendDeepNoArrays=b.extendDeepNoArrays;var x=o(47769);n.log=x.log,n.warn=x.warn,n.error=x.error;var _=o(30587);n.counterRegex=_.counter;var g=o(79990);n.throttle=g.throttle,n.throttleDone=g.done,n.clearThrottle=g.clear;var A=o(24401);function M(Z){var tt={};for(var rt in Z)for(var nt=Z[rt],ot=0;ot<nt.length;ot++)tt[nt[ot]]=+rt;return tt}n.getGraphDiv=A.getGraphDiv,n.isPlotDiv=A.isPlotDiv,n.removeElement=A.removeElement,n.addStyleRule=A.addStyleRule,n.addRelatedStyleRule=A.addRelatedStyleRule,n.deleteRelatedStyleRule=A.deleteRelatedStyleRule,n.getFullTransformMatrix=A.getFullTransformMatrix,n.getElementTransformMatrix=A.getElementTransformMatrix,n.getElementAndAncestors=A.getElementAndAncestors,n.equalDomRects=A.equalDomRects,n.clearResponsive=o(86367),n.preserveDrawingBuffer=o(45142),n.makeTraceGroups=o(77310),n._=o(15867),n.notifier=o(75046),n.filterUnique=o(75744),n.filterVisible=o(76756),n.pushUnique=o(75138),n.increment=o(39240),n.cleanNumber=o(95218),n.ensureNumber=function(Z){return m(Z)?(Z=Number(Z))>s||Z<e?t:Z:t},n.isIndex=function(Z,tt){return!(tt!==void 0&&Z>=tt)&&m(Z)&&Z>=0&&Z%1==0},n.noop=o(64213),n.identity=o(23389),n.repeat=function(Z,tt){for(var rt=new Array(tt),nt=0;nt<tt;nt++)rt[nt]=Z;return rt},n.swapAttrs=function(Z,tt,rt,nt){rt||(rt="x"),nt||(nt="y");for(var ot=0;ot<tt.length;ot++){var ct=tt[ot],pt=n.nestedProperty(Z,ct.replace("?",rt)),gt=n.nestedProperty(Z,ct.replace("?",nt)),kt=pt.get();pt.set(gt.get()),gt.set(kt)}},n.raiseToTop=function(Z){Z.parentNode.appendChild(Z)},n.cancelTransition=function(Z){return Z.transition().duration(0)},n.constrain=function(Z,tt,rt){return tt>rt?Math.max(rt,Math.min(tt,Z)):Math.max(tt,Math.min(rt,Z))},n.bBoxIntersect=function(Z,tt,rt){return rt=rt||0,Z.left<=tt.right+rt&&tt.left<=Z.right+rt&&Z.top<=tt.bottom+rt&&tt.top<=Z.bottom+rt},n.simpleMap=function(Z,tt,rt,nt,ot){for(var ct=Z.length,pt=new Array(ct),gt=0;gt<ct;gt++)pt[gt]=tt(Z[gt],rt,nt,ot);return pt},n.randstr=function Z(tt,rt,nt,ot){if(nt||(nt=16),rt===void 0&&(rt=24),rt<=0)return"0";var ct,pt,gt=Math.log(Math.pow(2,rt))/Math.log(nt),kt="";for(ct=2;gt===1/0;ct*=2)gt=Math.log(Math.pow(2,rt/ct))/Math.log(nt)*ct;var yt=gt-Math.floor(gt);for(ct=0;ct<Math.floor(gt);ct++)kt=Math.floor(Math.random()*nt).toString(nt)+kt;yt&&(pt=Math.pow(nt,yt),kt=Math.floor(Math.random()*pt).toString(nt)+kt);var mt=parseInt(kt,nt);return tt&&tt[kt]||mt!==1/0&&mt>=Math.pow(2,rt)?ot>10?(n.warn("randstr failed uniqueness"),kt):Z(tt,rt,nt,(ot||0)+1):kt},n.OptionControl=function(Z,tt){Z||(Z={}),tt||(tt="opt");var rt={optionList:[],_newoption:function(nt){nt[tt]=Z,rt[nt.name]=nt,rt.optionList.push(nt)}};return rt["_"+tt]=Z,rt},n.smooth=function(Z,tt){if((tt=Math.round(tt)||0)<2)return Z;var rt,nt,ot,ct,pt=Z.length,gt=2*pt,kt=2*tt-1,yt=new Array(kt),mt=new Array(pt);for(rt=0;rt<kt;rt++)yt[rt]=(1-Math.cos(Math.PI*(rt+1)/tt))/(2*tt);for(rt=0;rt<pt;rt++){for(ct=0,nt=0;nt<kt;nt++)(ot=rt+nt+1-tt)<-pt?ot-=gt*Math.round(ot/gt):ot>=gt&&(ot-=gt*Math.floor(ot/gt)),ot<0?ot=-1-ot:ot>=pt&&(ot=gt-1-ot),ct+=Z[ot]*yt[nt];mt[rt]=ct}return mt},n.syncOrAsync=function(Z,tt,rt){var nt;function ot(){return n.syncOrAsync(Z,tt,rt)}for(;Z.length;)if((nt=(0,Z.splice(0,1)[0])(tt))&&nt.then)return nt.then(ot);return rt&&rt(tt)},n.stripTrailingSlash=function(Z){return Z.substr(-1)==="/"?Z.substr(0,Z.length-1):Z},n.noneOrAll=function(Z,tt,rt){if(Z){var nt,ot=!1,ct=!0;for(nt=0;nt<rt.length;nt++)Z[rt[nt]]!=null?ot=!0:ct=!1;if(ot&&!ct)for(nt=0;nt<rt.length;nt++)Z[rt[nt]]=tt[rt[nt]]}},n.mergeArray=function(Z,tt,rt,nt){var ot=typeof nt=="function";if(n.isArrayOrTypedArray(Z))for(var ct=Math.min(Z.length,tt.length),pt=0;pt<ct;pt++){var gt=Z[pt];tt[pt][rt]=ot?nt(gt):gt}},n.mergeArrayCastPositive=function(Z,tt,rt){return n.mergeArray(Z,tt,rt,function(nt){var ot=+nt;return isFinite(ot)&&ot>0?ot:0})},n.fillArray=function(Z,tt,rt,nt){if(nt=nt||n.identity,n.isArrayOrTypedArray(Z))for(var ot=0;ot<tt.length;ot++)tt[ot][rt]=nt(Z[ot])},n.castOption=function(Z,tt,rt,nt){nt=nt||n.identity;var ot=n.nestedProperty(Z,rt).get();return n.isArrayOrTypedArray(ot)?Array.isArray(tt)&&n.isArrayOrTypedArray(ot[tt[0]])?nt(ot[tt[0]][tt[1]]):nt(ot[tt]):ot},n.extractOption=function(Z,tt,rt,nt){if(rt in Z)return Z[rt];var ot=n.nestedProperty(tt,nt).get();return Array.isArray(ot)?void 0:ot},n.tagSelected=function(Z,tt,rt){var nt,ot,ct=tt.selectedpoints,pt=tt._indexToPoints;pt&&(nt=M(pt));for(var gt=0;gt<ct.length;gt++){var kt=ct[gt];if(n.isIndex(kt)||n.isArrayOrTypedArray(kt)&&n.isIndex(kt[0])&&n.isIndex(kt[1])){var yt=nt?nt[kt]:kt,mt=rt?rt[yt]:yt;(ot=mt)!==void 0&&ot<Z.length&&(Z[mt].selected=1)}}},n.selIndices2selPoints=function(Z){var tt=Z.selectedpoints,rt=Z._indexToPoints;if(rt){for(var nt=M(rt),ot=[],ct=0;ct<tt.length;ct++){var pt=tt[ct];if(n.isIndex(pt)){var gt=nt[pt];n.isIndex(gt)&&ot.push(gt)}}return ot}return tt},n.getTargetArray=function(Z,tt){var rt=tt.target;if(typeof rt=="string"&&rt){var nt=n.nestedProperty(Z,rt).get();return!!Array.isArray(nt)&&nt}return!!Array.isArray(rt)&&rt},n.minExtend=function Z(tt,rt,nt){var ot={};typeof rt!="object"&&(rt={});var ct,pt,gt,kt=nt==="pieLike"?-1:3,yt=Object.keys(tt);for(ct=0;ct<yt.length;ct++)gt=tt[pt=yt[ct]],pt.charAt(0)!=="_"&&typeof gt!="function"&&(pt==="module"?ot[pt]=gt:Array.isArray(gt)?ot[pt]=pt==="colorscale"||kt===-1?gt.slice():gt.slice(0,kt):n.isTypedArray(gt)?ot[pt]=kt===-1?gt.subarray():gt.subarray(0,kt):ot[pt]=gt&&typeof gt=="object"?Z(tt[pt],rt[pt],nt):gt);for(yt=Object.keys(rt),ct=0;ct<yt.length;ct++)typeof(gt=rt[pt=yt[ct]])=="object"&&pt in ot&&typeof ot[pt]=="object"||(ot[pt]=gt);return ot},n.titleCase=function(Z){return Z.charAt(0).toUpperCase()+Z.substr(1)},n.containsAny=function(Z,tt){for(var rt=0;rt<tt.length;rt++)if(Z.indexOf(tt[rt])!==-1)return!0;return!1},n.isIE=function(){return window.navigator.msSaveBlob!==void 0};var L=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return L.test(window.navigator.userAgent)};var E=/iPad|iPhone|iPod/;n.isIOS=function(){return E.test(window.navigator.userAgent)};var S=/Firefox\/(\d+)\.\d+/;n.getFirefoxVersion=function(){var Z=S.exec(window.navigator.userAgent);if(Z&&Z.length===2){var tt=parseInt(Z[1]);if(!isNaN(tt))return tt}return null},n.isD3Selection=function(Z){return Z instanceof T.selection},n.ensureSingle=function(Z,tt,rt,nt){var ot=Z.select(tt+(rt?"."+rt:""));if(ot.size())return ot;var ct=Z.append(tt);return rt&&ct.classed(rt,!0),nt&&ct.call(nt),ct},n.ensureSingleById=function(Z,tt,rt,nt){var ot=Z.select(tt+"#"+rt);if(ot.size())return ot;var ct=Z.append(tt).attr("id",rt);return nt&&ct.call(nt),ct},n.objectFromPath=function(Z,tt){for(var rt,nt=Z.split("."),ot=rt={},ct=0;ct<nt.length;ct++){var pt=nt[ct],gt=null,kt=nt[ct].match(/(.*)\[([0-9]+)\]/);kt?(pt=kt[1],gt=kt[2],rt=rt[pt]=[],ct===nt.length-1?rt[gt]=tt:rt[gt]={},rt=rt[gt]):(ct===nt.length-1?rt[pt]=tt:rt[pt]={},rt=rt[pt])}return ot};var O=/^([^\[\.]+)\.(.+)?/,P=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function U(Z){return Z.slice(0,2)==="__"}n.expandObjectPaths=function(Z){var tt,rt,nt,ot,ct,pt,gt;if(typeof Z=="object"&&!Array.isArray(Z)){for(rt in Z)if(Z.hasOwnProperty(rt))if(tt=rt.match(O)){if(ot=Z[rt],U(nt=tt[1]))continue;delete Z[rt],Z[nt]=n.extendDeepNoArrays(Z[nt]||{},n.objectFromPath(rt,n.expandObjectPaths(ot))[nt])}else if(tt=rt.match(P)){if(ot=Z[rt],U(nt=tt[1]))continue;if(ct=parseInt(tt[2]),delete Z[rt],Z[nt]=Z[nt]||[],tt[3]===".")gt=tt[4],pt=Z[nt][ct]=Z[nt][ct]||{},n.extendDeepNoArrays(pt,n.objectFromPath(gt,n.expandObjectPaths(ot)));else{if(U(nt))continue;Z[nt][ct]=n.expandObjectPaths(ot)}}else{if(U(rt))continue;Z[rt]=n.expandObjectPaths(Z[rt])}}return Z},n.numSeparate=function(Z,tt,rt){if(rt||(rt=!1),typeof tt!="string"||tt.length===0)throw new Error("Separator string required for formatting!");typeof Z=="number"&&(Z=String(Z));var nt=/(\d+)(\d{3})/,ot=tt.charAt(0),ct=tt.charAt(1),pt=Z.split("."),gt=pt[0],kt=pt.length>1?ot+pt[1]:"";if(ct&&(pt.length>1||gt.length>4||rt))for(;nt.test(gt);)gt=gt.replace(nt,"$1"+ct+"$2");return gt+kt},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var R=/^\w*$/;n.templateString=function(Z,tt){var rt={};return Z.replace(n.TEMPLATE_STRING_REGEX,function(nt,ot){var ct;return R.test(ot)?ct=tt[ot]:(rt[ot]=rt[ot]||n.nestedProperty(tt,ot).get,ct=rt[ot]()),n.isValidTextValue(ct)?ct:""})};var j={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return et.apply(j,arguments)};var B={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return et.apply(B,arguments)};var z=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,G={max:10,count:0,name:"texttemplate",parseMultDiv:!0};n.texttemplateStringForShapes=function(){return et.apply(G,arguments)};var V=/^[:|\|]/;function et(Z,tt,rt){var nt=this,ot=arguments;tt||(tt={});var ct={};return Z.replace(n.TEMPLATE_STRING_REGEX,function(pt,gt,kt){var yt=gt==="_xother"||gt==="_yother",mt=gt==="_xother_"||gt==="_yother_",Ot=gt==="xother_"||gt==="yother_",vt=gt==="xother"||gt==="yother"||yt||Ot||mt,xt=gt;(yt||mt)&&(xt=xt.substring(1)),(Ot||mt)&&(xt=xt.substring(0,xt.length-1));var st,at,ht,Lt=null,Mt=null;if(nt.parseMultDiv){var _t=function(Tt){var bt=Tt.match(z);return bt?{key:bt[1],op:bt[2],number:Number(bt[3])}:{key:Tt,op:null,number:null}}(xt);xt=_t.key,Lt=_t.op,Mt=_t.number}if(vt){if((st=tt[xt])===void 0)return""}else for(ht=3;ht<ot.length;ht++)if(at=ot[ht]){if(at.hasOwnProperty(xt)){st=at[xt];break}if(R.test(xt)||(st=n.nestedProperty(at,xt).get(),(st=ct[xt]||n.nestedProperty(at,xt).get())&&(ct[xt]=st)),st!==void 0)break}if(st!==void 0&&(Lt==="*"&&(st*=Mt),Lt==="/"&&(st/=Mt)),st===void 0&&nt)return nt.count<nt.max&&(n.warn("Variable '"+xt+"' in "+nt.name+" could not be found!"),st=pt),nt.count===nt.max&&n.warn("Too many "+nt.name+" warnings - additional warnings will be suppressed"),nt.count++,pt;if(kt){var St;if(kt[0]===":"&&(st=(St=rt?rt.numberFormat:n.numberFormat)(kt.replace(V,""))(st)),kt[0]==="|"){St=rt?rt.timeFormat:k;var Dt=n.dateTime2ms(st);st=n.formatDate(Dt,kt.replace(V,""),!1,St)}}else{var ut=xt+"Label";tt.hasOwnProperty(ut)&&(st=tt[ut])}return vt&&(st="("+st+")",(yt||mt)&&(st=" "+st),(Ot||mt)&&(st+=" ")),st})}n.subplotSort=function(Z,tt){for(var rt=Math.min(Z.length,tt.length)+1,nt=0,ot=0,ct=0;ct<rt;ct++){var pt=Z.charCodeAt(ct)||0,gt=tt.charCodeAt(ct)||0,kt=pt>=48&&pt<=57,yt=gt>=48&&gt<=57;if(kt&&(nt=10*nt+pt-48),yt&&(ot=10*ot+gt-48),!kt||!yt){if(nt!==ot)return nt-ot;if(pt!==gt)return pt-gt}}return ot-nt};var J=2e9;n.seedPseudoRandom=function(){J=2e9},n.pseudoRandom=function(){var Z=J;return J=(69069*J+1)%4294967296,Math.abs(J-Z)<429496729?n.pseudoRandom():J/4294967296},n.fillText=function(Z,tt,rt){var nt=Array.isArray(rt)?function(pt){rt.push(pt)}:function(pt){rt.text=pt},ot=n.extractOption(Z,tt,"htx","hovertext");if(n.isValidTextValue(ot))return nt(ot);var ct=n.extractOption(Z,tt,"tx","text");return n.isValidTextValue(ct)?nt(ct):void 0},n.isValidTextValue=function(Z){return Z||Z===0},n.formatPercent=function(Z,tt){tt=tt||0;for(var rt=(Math.round(100*Z*Math.pow(10,tt))*Math.pow(.1,tt)).toFixed(tt)+"%",nt=0;nt<tt;nt++)rt.indexOf(".")!==-1&&(rt=(rt=rt.replace("0%","%")).replace(".%","%"));return rt},n.isHidden=function(Z){var tt=window.getComputedStyle(Z).display;return!tt||tt==="none"},n.strTranslate=function(Z,tt){return Z||tt?"translate("+Z+","+tt+")":""},n.strRotate=function(Z){return Z?"rotate("+Z+")":""},n.strScale=function(Z){return Z!==1?"scale("+Z+")":""},n.getTextTransform=function(Z){var tt=Z.noCenter,rt=Z.textX,nt=Z.textY,ot=Z.targetX,ct=Z.targetY,pt=Z.anchorX||0,gt=Z.anchorY||0,kt=Z.rotate,yt=Z.scale;return yt?yt>1&&(yt=1):yt=0,n.strTranslate(ot-yt*(rt+pt),ct-yt*(nt+gt))+n.strScale(yt)+(kt?"rotate("+kt+(tt?"":" "+rt+" "+nt)+")":"")},n.setTransormAndDisplay=function(Z,tt){Z.attr("transform",n.getTextTransform(tt)),Z.style("display",tt.scale?null:"none")},n.ensureUniformFontSize=function(Z,tt){var rt=n.extendFlat({},tt);return rt.size=Math.max(tt.size,Z._fullLayout.uniformtext.minsize||0),rt},n.join2=function(Z,tt,rt){var nt=Z.length;return nt>1?Z.slice(0,-1).join(tt)+rt+Z[nt-1]:Z.join(tt)},n.bigFont=function(Z){return Math.round(1.2*Z)};var X=n.getFirefoxVersion(),Y=X!==null&&X<86;n.getPositionFromD3Event=function(){return Y?[T.event.layerX,T.event.layerY]:[T.event.offsetX,T.event.offsetY]}},41965:function(W){W.exports=function(I){return window&&window.process&&window.process.versions?Object.prototype.toString.call(I)==="[object Object]":Object.prototype.toString.call(I)==="[object Object]"&&Object.getPrototypeOf(I).hasOwnProperty("hasOwnProperty")}},66636:function(W,I,o){var T=o(65487),k=/^\w*$/;W.exports=function(r,m,h,s){var e,t,n;h=h||"name",s=s||"value";var a={};m&&m.length?(n=T(r,m),t=n.get()):t=r,m=m||"";var i={};if(t)for(e=0;e<t.length;e++)i[t[e][h]]=e;var c=k.test(s),l={set:function(u,f){var d=f===null?4:0;if(!t){if(!n||d===4)return;t=[],n.set(t)}var w=i[u];if(w===void 0){if(d===4)return;d|=3,w=t.length,i[u]=w}else f!==(c?t[w][s]:T(t[w],s).get())&&(d|=2);var v=t[w]=t[w]||{};return v[h]=u,c?v[s]=f:T(v,s).set(f),f!==null&&(d&=-5),a[w]=a[w]|d,l},get:function(u){if(t){var f=i[u];return f===void 0?void 0:c?t[f][s]:T(t[f],s).get()}},rename:function(u,f){var d=i[u];return d===void 0||(a[d]=1|a[d],i[f]=d,delete i[u],t[d][h]=f),l},remove:function(u){var f=i[u];if(f===void 0)return l;var d=t[f];if(Object.keys(d).length>2)return a[f]=2|a[f],l.set(u,null);if(c){for(e=f;e<t.length;e++)a[e]=3|a[e];for(e=f;e<t.length;e++)i[t[e][h]]--;t.splice(f,1),delete i[u]}else T(d,s).set(null),a[f]=6|a[f];return l},constructUpdate:function(){for(var u,f,d={},w=Object.keys(a),v=0;v<w.length;v++)f=w[v],u=m+"["+f+"]",t[f]?(1&a[f]&&(d[u+"."+h]=t[f][h]),2&a[f]&&(d[u+"."+s]=c?4&a[f]?null:t[f][s]:4&a[f]?null:T(t[f],s).get())):d[u]=null;return d}};return l}},15867:function(W,I,o){var T=o(73972);W.exports=function(k,r){for(var m=k._context.locale,h=0;h<2;h++){for(var s=k._context.locales,e=0;e<2;e++){var t=(s[m]||{}).dictionary;if(t){var n=t[r];if(n)return n}s=T.localeRegistry}var a=m.split("-")[0];if(a===m)break;m=a}return r}},47769:function(W,I,o){var T=o(72075).dfltConfig,k=o(75046),r=W.exports={};r.log=function(){var m;if(T.logging>1){var h=["LOG:"];for(m=0;m<arguments.length;m++)h.push(arguments[m]);console.trace.apply(console,h)}if(T.notifyOnLogging>1){var s=[];for(m=0;m<arguments.length;m++)s.push(arguments[m]);k(s.join("<br>"),"long")}},r.warn=function(){var m;if(T.logging>0){var h=["WARN:"];for(m=0;m<arguments.length;m++)h.push(arguments[m]);console.trace.apply(console,h)}if(T.notifyOnLogging>0){var s=[];for(m=0;m<arguments.length;m++)s.push(arguments[m]);k(s.join("<br>"),"stick")}},r.error=function(){var m;if(T.logging>0){var h=["ERROR:"];for(m=0;m<arguments.length;m++)h.push(arguments[m]);console.error.apply(console,h)}if(T.notifyOnLogging>0){var s=[];for(m=0;m<arguments.length;m++)s.push(arguments[m]);k(s.join("<br>"),"stick")}}},77310:function(W,I,o){var T=o(39898);W.exports=function(k,r,m){var h=k.selectAll("g."+m.replace(/\s/g,".")).data(r,function(e){return e[0].trace.uid});h.exit().remove(),h.enter().append("g").attr("class",m),h.order();var s=k.classed("rangeplot")?"nodeRangePlot3":"node3";return h.each(function(e){e[0][s]=T.select(this)}),h}},35657:function(W,I,o){var T=o(79576);I.init2dArray=function(k,r){for(var m=new Array(k),h=0;h<k;h++)m[h]=new Array(r);return m},I.transposeRagged=function(k){var r,m,h=0,s=k.length;for(r=0;r<s;r++)h=Math.max(h,k[r].length);var e=new Array(h);for(r=0;r<h;r++)for(e[r]=new Array(s),m=0;m<s;m++)e[r][m]=k[m][r];return e},I.dot=function(k,r){if(!k.length||!r.length||k.length!==r.length)return null;var m,h,s=k.length;if(k[0].length)for(m=new Array(s),h=0;h<s;h++)m[h]=I.dot(k[h],r);else if(r[0].length){var e=I.transposeRagged(r);for(m=new Array(e.length),h=0;h<e.length;h++)m[h]=I.dot(k,e[h])}else for(m=0,h=0;h<s;h++)m+=k[h]*r[h];return m},I.translationMatrix=function(k,r){return[[1,0,k],[0,1,r],[0,0,1]]},I.rotationMatrix=function(k){var r=k*Math.PI/180;return[[Math.cos(r),-Math.sin(r),0],[Math.sin(r),Math.cos(r),0],[0,0,1]]},I.rotationXYMatrix=function(k,r,m){return I.dot(I.dot(I.translationMatrix(r,m),I.rotationMatrix(k)),I.translationMatrix(-r,-m))},I.apply3DTransform=function(k){return function(){var r=arguments,m=arguments.length===1?r[0]:[r[0],r[1],r[2]||0];return I.dot(k,[m[0],m[1],m[2],1]).slice(0,3)}},I.apply2DTransform=function(k){return function(){var r=arguments;r.length===3&&(r=r[0]);var m=arguments.length===1?r[0]:[r[0],r[1]];return I.dot(k,[m[0],m[1],1]).slice(0,2)}},I.apply2DTransform2=function(k){var r=I.apply2DTransform(k);return function(m){return r(m.slice(0,2)).concat(r(m.slice(2,4)))}},I.convertCssMatrix=function(k){if(k){var r=k.length;if(r===16)return k;if(r===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},I.inverseTransformMatrix=function(k){var r=[];return T.invert(r,k),[[r[0],r[1],r[2],r[3]],[r[4],r[5],r[6],r[7]],[r[8],r[9],r[10],r[11]],[r[12],r[13],r[14],r[15]]]}},64872:function(W){W.exports={mod:function(I,o){var T=I%o;return T<0?T+o:T},modHalf:function(I,o){return Math.abs(I)>o/2?I-Math.round(I/o)*o:I}}},65487:function(W,I,o){var T=o(92770),k=o(73627).isArrayOrTypedArray;function r(a,i){return function(){var c,l,u,f,d,w=a;for(f=0;f<i.length-1;f++){if((c=i[f])===-1){for(l=!0,u=[],d=0;d<w.length;d++)u[d]=r(w[d],i.slice(f+1))(),u[d]!==u[0]&&(l=!1);return l?u[0]:u}if(typeof c=="number"&&!k(w)||typeof(w=w[c])!="object"||w===null)return}if(typeof w=="object"&&w!==null&&(u=w[i[f]])!==null)return u}}W.exports=function(a,i){if(T(i))i=String(i);else if(typeof i!="string"||i.substr(i.length-4)==="[-1]")throw"bad property string";var c,l,u,f,d=i.split(".");for(f=0;f<d.length;f++)if(String(d[f]).slice(0,2)==="__")throw"bad property string";for(f=0;f<d.length;){if(c=String(d[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(c[1])d[f]=c[1];else{if(f!==0)throw"bad property string";d.splice(0,1)}for(l=c[2].substr(1,c[2].length-2).split("]["),u=0;u<l.length;u++)f++,d.splice(f,0,Number(l[u]))}f++}return typeof a!="object"?function(w,v,p){return{set:function(){throw"bad container"},get:function(){},astr:v,parts:p,obj:w}}(a,i,d):{set:s(a,d,i),get:r(a,d),astr:i,parts:d,obj:a}};var m=/(^|\.)args\[/;function h(a,i){return a===void 0||a===null&&!i.match(m)}function s(a,i,c){return function(l){var u,f,d=a,w="",v=h(l,c);for(f=0;f<i.length-1;f++){if(typeof(u=i[f])=="number"&&!k(d))throw"array index but container is not an array";if(u===-1){if(v=!t(d,i.slice(f+1),l,c))break;return}if(!n(d,u,i[f+1],v))break;if(typeof(d=d[u])!="object"||d===null)throw"container is not an object";w=e(w,u)}if(v){if(f===i.length-1&&(delete d[i[f]],Array.isArray(d)&&+i[f]==d.length-1))for(;d.length&&d[d.length-1]===void 0;)d.pop()}else d[i[f]]=l}}function e(a,i){var c=i;return T(i)?c="["+i+"]":a&&(c="."+i),a+c}function t(a,i,c,l){var u,f=k(c),d=!0,w=c,v=l.replace("-1",0),p=!f&&h(c,v),y=i[0];for(u=0;u<a.length;u++)v=l.replace("-1",u),f&&(p=h(w=c[u%c.length],v)),p&&(d=!1),n(a,u,y,p)&&s(a[u],i,l.replace("-1",u))(w);return d}function n(a,i,c,l){if(a[i]===void 0){if(l)return!1;a[i]=typeof c=="number"?[]:{}}return!0}},64213:function(W){W.exports=function(){}},75046:function(W,I,o){var T=o(39898),k=o(92770),r=[];W.exports=function(m,h){if(r.indexOf(m)===-1){r.push(m);var s=1e3;k(h)?s=h:h==="long"&&(s=3e3);var e=T.select("body").selectAll(".plotly-notifier").data([0]);e.enter().append("div").classed("plotly-notifier",!0),e.selectAll(".notifier-note").data(r).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(n){var a=T.select(this);a.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){a.transition().call(t)});for(var i=a.append("p"),c=n.split(/<br\s*\/?>/g),l=0;l<c.length;l++)l&&i.append("br"),i.append("span").text(c[l]);h==="stick"?a.transition().duration(350).style("opacity",1):a.transition().duration(700).style("opacity",1).transition().delay(s).call(t)})}function t(n){n.duration(700).style("opacity",0).each("end",function(a){var i=r.indexOf(a);i!==-1&&r.splice(i,1),T.select(this).remove()})}}},39918:function(W,I,o){var T=o(6964),k="data-savedcursor";W.exports=function(r,m){var h=r.attr(k);if(m){if(!h){for(var s=(r.attr("class")||"").split(" "),e=0;e<s.length;e++){var t=s[e];t.indexOf("cursor-")===0&&r.attr(k,t.substr(7)).classed(t,!1)}r.attr(k)||r.attr(k,"!!")}T(r,m)}else h&&(r.attr(k,null),h==="!!"?T(r):T(r,h))}},61082:function(W,I,o){var T=o(35657).dot,k=o(50606).BADNUM,r=W.exports={};r.tester=function(m){var h,s=m.slice(),e=s[0][0],t=e,n=s[0][1],a=n;for(s[s.length-1][0]===s[0][0]&&s[s.length-1][1]===s[0][1]||s.push(s[0]),h=1;h<s.length;h++)e=Math.min(e,s[h][0]),t=Math.max(t,s[h][0]),n=Math.min(n,s[h][1]),a=Math.max(a,s[h][1]);var i,c=!1;s.length===5&&(s[0][0]===s[1][0]?s[2][0]===s[3][0]&&s[0][1]===s[3][1]&&s[1][1]===s[2][1]&&(c=!0,i=function(f){return f[0]===s[0][0]}):s[0][1]===s[1][1]&&s[2][1]===s[3][1]&&s[0][0]===s[3][0]&&s[1][0]===s[2][0]&&(c=!0,i=function(f){return f[1]===s[0][1]}));var l=!0,u=s[0];for(h=1;h<s.length;h++)if(u[0]!==s[h][0]||u[1]!==s[h][1]){l=!1;break}return{xmin:e,xmax:t,ymin:n,ymax:a,pts:s,contains:c?function(f,d){var w=f[0],v=f[1];return!(w===k||w<e||w>t||v===k||v<n||v>a||d&&i(f))}:function(f,d){var w=f[0],v=f[1];if(w===k||w<e||w>t||v===k||v<n||v>a)return!1;var p,y,b,x,_,g=s.length,A=s[0][0],M=s[0][1],L=0;for(p=1;p<g;p++)if(y=A,b=M,A=s[p][0],M=s[p][1],!(w<(x=Math.min(y,A))||w>Math.max(y,A)||v>Math.max(b,M)))if(v<Math.min(b,M))w!==x&&L++;else{if(v===(_=A===y?v:b+(w-y)*(M-b)/(A-y)))return p!==1||!d;v<=_&&w!==x&&L++}return L%2==1},isRect:c,degenerate:l}},r.isSegmentBent=function(m,h,s,e){var t,n,a,i=m[h],c=[m[s][0]-i[0],m[s][1]-i[1]],l=T(c,c),u=Math.sqrt(l),f=[-c[1]/u,c[0]/u];for(t=h+1;t<s;t++)if(n=[m[t][0]-i[0],m[t][1]-i[1]],(a=T(n,c))<0||a>l||Math.abs(T(n,f))>e)return!0;return!1},r.filter=function(m,h){var s=[m[0]],e=0,t=0;function n(a){m.push(a);var i=s.length,c=e;s.splice(t+1);for(var l=c+1;l<m.length;l++)(l===m.length-1||r.isSegmentBent(m,c,l+1,h))&&(s.push(m[l]),s.length<i-2&&(e=l,t=s.length-1),c=l)}return m.length>1&&n(m.pop()),{addPt:n,raw:m,filtered:s}}},79749:function(W,I,o){var T=o(58617),k=o(98580);W.exports=function(r,m,h){var s=r._fullLayout,e=!0;return s._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(h);else if(!t.pick||s._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:r._context.plotGlPixelRatio||o.g.devicePixelRatio,extensions:m||[],cachedCode:h||{}})}catch{e=!1}t.regl||(e=!1),e&&this.addEventListener("webglcontextlost",function(n){r&&r.emit&&r.emit("plotly_webglcontextlost",{event:n,layer:t.key})},!1)}}),e||T({container:s._glcontainer.node()}),e}},45142:function(W,I,o){var T=o(92770),k=o(35791);W.exports=function(r){var m;if(typeof(m=r&&r.hasOwnProperty("userAgent")?r.userAgent:function(){var i;return typeof navigator<"u"&&(i=navigator.userAgent),i&&i.headers&&typeof i.headers["user-agent"]=="string"&&(i=i.headers["user-agent"]),i}())!="string")return!0;var h=k({ua:{headers:{"user-agent":m}},tablet:!0,featureDetect:!1});if(!h){for(var s=m.split(" "),e=1;e<s.length;e++)if(s[e].indexOf("Safari")!==-1)for(var t=e-1;t>-1;t--){var n=s[t];if(n.substr(0,8)==="Version/"){var a=n.substr(8).split(".")[0];if(T(a)&&(a=+a),a>=13)return!0}}}return h}},75138:function(W){W.exports=function(I,o){if(o instanceof RegExp){for(var T=o.toString(),k=0;k<I.length;k++)if(I[k]instanceof RegExp&&I[k].toString()===T)return I;I.push(o)}else!o&&o!==0||I.indexOf(o)!==-1||I.push(o);return I}},10847:function(W,I,o){var T=o(71828),k=o(72075).dfltConfig,r={add:function(m,h,s,e,t){var n,a;m.undoQueue=m.undoQueue||{index:0,queue:[],sequence:!1},a=m.undoQueue.index,m.autoplay?m.undoQueue.inSequence||(m.autoplay=!1):(!m.undoQueue.sequence||m.undoQueue.beginSequence?(n={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},m.undoQueue.queue.splice(a,m.undoQueue.queue.length-a,n),m.undoQueue.index+=1):n=m.undoQueue.queue[a-1],m.undoQueue.beginSequence=!1,n&&(n.undo.calls.unshift(h),n.undo.args.unshift(s),n.redo.calls.push(e),n.redo.args.push(t)),m.undoQueue.queue.length>k.queueLength&&(m.undoQueue.queue.shift(),m.undoQueue.index--))},startSequence:function(m){m.undoQueue=m.undoQueue||{index:0,queue:[],sequence:!1},m.undoQueue.sequence=!0,m.undoQueue.beginSequence=!0},stopSequence:function(m){m.undoQueue=m.undoQueue||{index:0,queue:[],sequence:!1},m.undoQueue.sequence=!1,m.undoQueue.beginSequence=!1},undo:function(m){var h,s;if(!(m.undoQueue===void 0||isNaN(m.undoQueue.index)||m.undoQueue.index<=0)){for(m.undoQueue.index--,h=m.undoQueue.queue[m.undoQueue.index],m.undoQueue.inSequence=!0,s=0;s<h.undo.calls.length;s++)r.plotDo(m,h.undo.calls[s],h.undo.args[s]);m.undoQueue.inSequence=!1,m.autoplay=!1}},redo:function(m){var h,s;if(!(m.undoQueue===void 0||isNaN(m.undoQueue.index)||m.undoQueue.index>=m.undoQueue.queue.length)){for(h=m.undoQueue.queue[m.undoQueue.index],m.undoQueue.inSequence=!0,s=0;s<h.redo.calls.length;s++)r.plotDo(m,h.redo.calls[s],h.redo.args[s]);m.undoQueue.inSequence=!1,m.autoplay=!1,m.undoQueue.index++}},plotDo:function(m,h,s){m.autoplay=!0,s=function(e,t){for(var n,a=[],i=0;i<t.length;i++)n=t[i],a[i]=n===e?n:typeof n=="object"?Array.isArray(n)?T.extendDeep([],n):T.extendDeepAll({},n):n;return a}(m,s),h.apply(null,s)}};W.exports=r},30587:function(W,I){I.counter=function(o,T,k,r){var m=(T||"")+(k?"":"$"),h=r===!1?"":"^";return o==="xy"?new RegExp(h+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+m):new RegExp(h+o+"([2-9]|[1-9][0-9]+)?"+m)}},6962:function(W){var I=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,o=/^[^\.\[\]]+$/;W.exports=function(T,k){for(;k;){var r=T.match(I);if(r)T=r[1];else{if(!T.match(o))throw new Error("bad relativeAttr call:"+[T,k]);T=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return T&&k.charAt(0)!=="["?T+"."+k:T+k}},51332:function(W,I,o){var T=o(73627).isArrayOrTypedArray,k=o(41965);W.exports=function r(m,h){for(var s in h){var e=h[s],t=m[s];if(t!==e)if(s.charAt(0)==="_"||typeof e=="function"){if(s in m)continue;m[s]=e}else if(T(e)&&T(t)&&k(e[0])){if(s==="customdata"||s==="ids")continue;for(var n=Math.min(e.length,t.length),a=0;a<n;a++)t[a]!==e[a]&&k(e[a])&&k(t[a])&&r(t[a],e[a])}else k(e)&&k(t)&&(r(t,e),Object.keys(t).length||delete m[s])}}},65888:function(W,I,o){var T=o(92770),k=o(47769),r=o(23389),m=o(50606).BADNUM,h=1e-9;function s(a,i){return a<i}function e(a,i){return a<=i}function t(a,i){return a>i}function n(a,i){return a>=i}I.findBin=function(a,i,c){if(T(i.start))return c?Math.ceil((a-i.start)/i.size-h)-1:Math.floor((a-i.start)/i.size+h);var l,u,f=0,d=i.length,w=0,v=d>1?(i[d-1]-i[0])/(d-1):1;for(u=v>=0?c?s:e:c?n:t,a+=v*h*(c?-1:1)*(v>=0?1:-1);f<d&&w++<100;)u(i[l=Math.floor((f+d)/2)],a)?f=l+1:d=l;return w>90&&k.log("Long binary search..."),f-1},I.sorterAsc=function(a,i){return a-i},I.sorterDes=function(a,i){return i-a},I.distinctVals=function(a){var i,c=a.slice();for(c.sort(I.sorterAsc),i=c.length-1;i>-1&&c[i]===m;i--);for(var l,u=c[i]-c[0]||1,f=u/(i||1)/1e4,d=[],w=0;w<=i;w++){var v=c[w],p=v-l;l===void 0?(d.push(v),l=v):p>f&&(u=Math.min(u,p),d.push(v),l=v)}return{vals:d,minDiff:u}},I.roundUp=function(a,i,c){for(var l,u=0,f=i.length-1,d=0,w=c?0:1,v=c?1:0,p=c?Math.ceil:Math.floor;u<f&&d++<100;)i[l=p((u+f)/2)]<=a?u=l+w:f=l-v;return i[u]},I.sort=function(a,i){for(var c=0,l=0,u=1;u<a.length;u++){var f=i(a[u],a[u-1]);if(f<0?c=1:f>0&&(l=1),c&&l)return a.sort(i)}return l?a:a.reverse()},I.findIndexOfMin=function(a,i){i=i||r;for(var c,l=1/0,u=0;u<a.length;u++){var f=i(a[u]);f<l&&(l=f,c=u)}return c}},6964:function(W){W.exports=function(I,o){(I.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&I.classed(T,!1)}),o&&I.classed("cursor-"+o,!0)}},58617:function(W,I,o){var T=o(7901),k=function(){};W.exports=function(r){for(var m in r)typeof r[m]=="function"&&(r[m]=k);r.destroy=function(){r.container.parentNode.removeChild(r.container)};var h=document.createElement("div");h.className="no-webgl",h.style.cursor="pointer",h.style.fontSize="24px",h.style.color=T.defaults[0],h.style.position="absolute",h.style.left=h.style.top="0px",h.style.width=h.style.height="100%",h.style["background-color"]=T.lightLine,h.style["z-index"]=30;var s=document.createElement("p");return s.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",s.style.position="relative",s.style.top="50%",s.style.left="50%",s.style.height="30%",s.style.width="50%",s.style.margin="-15% 0 0 -25%",h.appendChild(s),r.container.appendChild(h),r.container.style.background="#FFFFFF",r.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(W){W.exports=function(I){return Object.keys(I).sort()}},80038:function(W,I,o){var T=o(92770),k=o(73627).isArrayOrTypedArray;I.aggNums=function(r,m,h,s){var e,t;if((!s||s>h.length)&&(s=h.length),T(m)||(m=!1),k(h[0])){for(t=new Array(s),e=0;e<s;e++)t[e]=I.aggNums(r,m,h[e]);h=t}for(e=0;e<s;e++)T(m)?T(h[e])&&(m=r(+m,+h[e])):m=h[e];return m},I.len=function(r){return I.aggNums(function(m){return m+1},0,r)},I.mean=function(r,m){return m||(m=I.len(r)),I.aggNums(function(h,s){return h+s},0,r)/m},I.midRange=function(r){if(r!==void 0&&r.length!==0)return(I.aggNums(Math.max,null,r)+I.aggNums(Math.min,null,r))/2},I.variance=function(r,m,h){return m||(m=I.len(r)),T(h)||(h=I.mean(r,m)),I.aggNums(function(s,e){return s+Math.pow(e-h,2)},0,r)/m},I.stdev=function(r,m,h){return Math.sqrt(I.variance(r,m,h))},I.median=function(r){var m=r.slice().sort();return I.interp(m,.5)},I.interp=function(r,m){if(!T(m))throw"n should be a finite number";if((m=m*r.length-.5)<0)return r[0];if(m>r.length-1)return r[r.length-1];var h=m%1;return h*r[Math.ceil(m)]+(1-h)*r[Math.floor(m)]}},78614:function(W,I,o){var T=o(25075);W.exports=function(k){return k?T(k):[0,0,0,1]}},3883:function(W,I,o){var T=o(32396),k=o(91424),r=o(71828),m=null;W.exports=function(){if(m!==null)return m;m=!1;var h=r.isIE()||r.isSafari()||r.isIOS();if(window.navigator.userAgent&&!h){var s=Array.from(T.CSS_DECLARATIONS).reverse(),e=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof e=="function")m=s.some(function(a){return e.apply(null,a)});else{var t=k.tester.append("image").attr("style",T.STYLE),n=window.getComputedStyle(t.node()).imageRendering;m=s.some(function(a){var i=a[1];return n===i||n===i.toLowerCase()}),t.remove()}}return m}},63893:function(W,I,o){var T=o(39898),k=o(71828),r=k.strTranslate,m=o(77922),h=o(18783).LINE_SPACING,s=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;I.convertToTspans=function(P,U,R){var j=P.text(),B=!P.attr("data-notex")&&U&&U._context.typesetMath&&typeof MathJax<"u"&&j.match(s),z=T.select(P.node().parentNode);if(!z.empty()){var G=P.attr("class")?P.attr("class").split(" ")[0]:"text";return G+="-math",z.selectAll("svg."+G).remove(),z.selectAll("g."+G+"-group").remove(),P.style("display",null).attr({"data-unformatted":j,"data-math":"N"}),B?(U&&U._promises||[]).push(new Promise(function(et){P.style("display","none");var J=parseInt(P.node().style.fontSize,10),X={fontSize:J};(function(Y,Z,tt){var rt,nt,ot,ct,pt=parseInt((MathJax.version||"").split(".")[0]);if(pt===2||pt===3){var gt=function(){var yt="math-output-"+k.randstr({},64),mt=(ct=T.select("body").append("div").attr({id:yt}).style({visibility:"hidden",position:"absolute","font-size":Z.fontSize+"px"}).text(Y.replace(e,"\\lt ").replace(t,"\\gt "))).node();return pt===2?MathJax.Hub.Typeset(mt):MathJax.typeset([mt])},kt=function(){var yt=ct.select(pt===2?".MathJax_SVG":".MathJax"),mt=!yt.empty()&&ct.select("svg").node();if(mt){var Ot,vt=mt.getBoundingClientRect();Ot=pt===2?T.select("body").select("#MathJax_SVG_glyphs"):yt.select("defs"),tt(yt,Ot,vt)}else k.log("There was an error in the tex syntax.",Y),tt();ct.remove()};pt===2?MathJax.Hub.Queue(function(){return nt=k.extendDeepAll({},MathJax.Hub.config),ot=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:n},displayAlign:"left"})},function(){if((rt=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},gt,kt,function(){if(rt!=="SVG")return MathJax.Hub.setRenderer(rt)},function(){return ot!==void 0&&(MathJax.Hub.processSectionDelay=ot),MathJax.Hub.Config(nt)}):pt===3&&(nt=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=n,(rt=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){gt(),kt(),rt!=="svg"&&(MathJax.config.startup.output=rt),MathJax.config=nt}))}else k.warn("No MathJax version:",MathJax.version)})(B[2],X,function(Y,Z,tt){z.selectAll("svg."+G).remove(),z.selectAll("g."+G+"-group").remove();var rt=Y&&Y.select("svg");if(!rt||!rt.node())return V(),void et();var nt=z.append("g").classed(G+"-group",!0).attr({"pointer-events":"none","data-unformatted":j,"data-math":"Y"});nt.node().appendChild(rt.node()),Z&&Z.node()&&rt.node().insertBefore(Z.node().cloneNode(!0),rt.node().firstChild);var ot=tt.width,ct=tt.height;rt.attr({class:G,height:ct,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var pt=P.node().style.fill||"black",gt=rt.select("g");gt.attr({fill:pt,stroke:pt});var kt=gt.node().getBoundingClientRect(),yt=kt.width,mt=kt.height;(yt>ot||mt>ct)&&(rt.style("overflow","hidden"),yt=(kt=rt.node().getBoundingClientRect()).width,mt=kt.height);var Ot=+P.attr("x"),vt=+P.attr("y"),xt=-(J||P.node().getBoundingClientRect().height)/4;if(G[0]==="y")nt.attr({transform:"rotate("+[-90,Ot,vt]+")"+r(-yt/2,xt-mt/2)});else if(G[0]==="l")vt=xt-mt/2;else if(G[0]==="a"&&G.indexOf("atitle")!==0)Ot=0,vt=xt;else{var st=P.attr("text-anchor");Ot-=yt*(st==="middle"?.5:st==="end"?1:0),vt=vt+xt-mt/2}rt.attr({x:Ot,y:vt}),R&&R.call(P,nt),et(nt)})})):V(),P}function V(){z.empty()||(G=P.attr("class")+"-math",z.select("svg."+G).remove()),P.text("").style("white-space","pre");var et=function(J,X){X=X.replace(f," ");var Y,Z=!1,tt=[],rt=-1;function nt(){rt++;var Mt=document.createElementNS(m.svg,"tspan");T.select(Mt).attr({class:"line",dy:rt*h+"em"}),J.appendChild(Mt),Y=Mt;var _t=tt;if(tt=[{node:Mt}],_t.length>1)for(var St=1;St<_t.length;St++)ot(_t[St])}function ot(Mt){var _t,St=Mt.type,Dt={};if(St==="a"){_t="a";var ut=Mt.target,Tt=Mt.href,bt=Mt.popup;Tt&&(Dt={"xlink:xlink:show":ut==="_blank"||ut.charAt(0)!=="_"?"new":"replace",target:ut,"xlink:xlink:href":Tt},bt&&(Dt.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+bt+'");return false;'))}else _t="tspan";Mt.style&&(Dt.style=Mt.style);var It=document.createElementNS(m.svg,_t);if(St==="sup"||St==="sub"){ct(Y,l),Y.appendChild(It);var zt=document.createElementNS(m.svg,"tspan");ct(zt,l),T.select(zt).attr("dy",c[St]),Dt.dy=i[St],Y.appendChild(It),Y.appendChild(zt)}else Y.appendChild(It);T.select(It).attr(Dt),Y=Mt.node=It,tt.push(Mt)}function ct(Mt,_t){Mt.appendChild(document.createTextNode(_t))}function pt(Mt){if(tt.length!==1){var _t=tt.pop();Mt!==_t.type&&k.log("Start tag <"+_t.type+"> doesnt match end tag <"+Mt+">. Pretending it did match.",X),Y=tt[tt.length-1].node}else k.log("Ignoring unexpected end tag </"+Mt+">.",X)}v.test(X)?nt():(Y=J,tt=[{node:J}]);for(var gt=X.split(d),kt=0;kt<gt.length;kt++){var yt=gt[kt],mt=yt.match(w),Ot=mt&&mt[2].toLowerCase(),vt=a[Ot];if(Ot==="br")nt();else if(vt===void 0)ct(Y,L(yt));else if(mt[1])pt(Ot);else{var xt=mt[4],st={type:Ot},at=_(xt,p);if(at?(at=at.replace(g,"$1 fill:"),vt&&(at+=";"+vt)):vt&&(at=vt),at&&(st.style=at),Ot==="a"){Z=!0;var ht=_(xt,y);if(ht){var Lt=E(ht);Lt&&(st.href=Lt,st.target=_(xt,b)||"_blank",st.popup=_(xt,x))}}ot(st)}}return Z}(P.node(),j);et&&P.style("pointer-events","all"),I.positionText(P),R&&R.call(P)}};var e=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,n=[["$","$"],["\\(","\\)"]],a={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},i={sub:"0.3em",sup:"-0.6em"},c={sub:"-0.21em",sup:"0.42em"},l="\u200B",u=["http:","https:","mailto:","",void 0,":"],f=I.NEWLINES=/(\r\n?|\n)/g,d=/(<[^<>]*>)/,w=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;I.BR_TAG_ALL=/<br(\s+.*)?>/gi;var p=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,b=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,x=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(P,U){if(!P)return null;var R=P.match(U),j=R&&(R[3]||R[4]);return j&&L(j)}var g=/(^|;)\s*color:/;I.plainText=function(P,U){for(var R=(U=U||{}).len!==void 0&&U.len!==-1?U.len:1/0,j=U.allowedTags!==void 0?U.allowedTags:["br"],B=P.split(d),z=[],G="",V=0,et=0;et<B.length;et++){var J=B[et],X=J.match(w),Y=X&&X[2].toLowerCase();if(Y)j.indexOf(Y)!==-1&&(z.push(J),G=Y);else{var Z=J.length;if(V+Z<R)z.push(J),V+=Z;else if(V<R){var tt=R-V;G&&(G!=="br"||tt<=3||Z<=3)&&z.pop(),R>3?z.push(J.substr(0,tt-3)+"..."):z.push(J.substr(0,tt));break}G=""}}return z.join("")};var A={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},M=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function L(P){return P.replace(M,function(U,R){return(R.charAt(0)==="#"?function(j){if(!(j>1114111)){var B=String.fromCodePoint;if(B)return B(j);var z=String.fromCharCode;return j<=65535?z(j):z(55232+(j>>10),j%1024+56320)}}(R.charAt(1)==="x"?parseInt(R.substr(2),16):parseInt(R.substr(1),10)):A[R])||U})}function E(P){var U=encodeURI(decodeURI(P)),R=document.createElement("a"),j=document.createElement("a");R.href=P,j.href=U;var B=R.protocol,z=j.protocol;return u.indexOf(B)!==-1&&u.indexOf(z)!==-1?U:""}function S(P,U,R){var j,B,z,G=R.horizontalAlign,V=R.verticalAlign||"top",et=P.node().getBoundingClientRect(),J=U.node().getBoundingClientRect();return B=V==="bottom"?function(){return et.bottom-j.height}:V==="middle"?function(){return et.top+(et.height-j.height)/2}:function(){return et.top},z=G==="right"?function(){return et.right-j.width}:G==="center"?function(){return et.left+(et.width-j.width)/2}:function(){return et.left},function(){j=this.node().getBoundingClientRect();var X=z()-J.left,Y=B()-J.top,Z=R.gd||{};if(R.gd){Z._fullLayout._calcInverseTransform(Z);var tt=k.apply3DTransform(Z._fullLayout._invTransform)(X,Y);X=tt[0],Y=tt[1]}return this.style({top:Y+"px",left:X+"px","z-index":1e3}),this}}I.convertEntities=L,I.sanitizeHTML=function(P){P=P.replace(f," ");for(var U=document.createElement("p"),R=U,j=[],B=P.split(d),z=0;z<B.length;z++){var G=B[z],V=G.match(w),et=V&&V[2].toLowerCase();if(et in a)if(V[1])j.length&&(R=j.pop());else{var J=V[4],X=_(J,p),Y=X?{style:X}:{};if(et==="a"){var Z=_(J,y);if(Z){var tt=E(Z);if(tt){Y.href=tt;var rt=_(J,b);rt&&(Y.target=rt)}}}var nt=document.createElement(et);R.appendChild(nt),T.select(nt).attr(Y),R=nt,j.push(nt)}else R.appendChild(document.createTextNode(L(G)))}return U.innerHTML},I.lineCount=function(P){return P.selectAll("tspan.line").size()||1},I.positionText=function(P,U,R){return P.each(function(){var j=T.select(this);function B(V,et){return et===void 0?(et=j.attr(V))===null&&(j.attr(V,0),et=0):j.attr(V,et),et}var z=B("x",U),G=B("y",R);this.nodeName==="text"&&j.selectAll("tspan.line").attr({x:z,y:G})})};var O="1px ";I.makeTextShadow=function(P){return O+O+O+P+", -"+O+"-"+O+O+P+", "+O+"-"+O+O+P+", -"+O+O+O+P},I.makeEditable=function(P,U){var R=U.gd,j=U.delegate,B=T.dispatch("edit","input","cancel"),z=j||P;if(P.style({"pointer-events":j?"none":"all"}),P.size()!==1)throw new Error("boo");function G(){var et,J,X,Y,Z;et=T.select(R).select(".svg-container"),J=et.append("div"),X=P.node().style,Y=parseFloat(X.fontSize||12),(Z=U.text)===void 0&&(Z=P.attr("data-unformatted")),J.classed("plugin-editable editable",!0).style({position:"absolute","font-family":X.fontFamily||"Arial","font-size":Y,color:U.fill||X.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Y/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Z).call(S(P,et,U)).on("blur",function(){R._editing=!1,P.text(this.textContent).style({opacity:1});var nt,ot=T.select(this).attr("class");(nt=ot?"."+ot.split(" ")[0]+"-math-group":"[class*=-math-group]")&&T.select(P.node().parentNode).select(nt).style({opacity:0});var ct=this.textContent;T.select(this).transition().duration(0).remove(),T.select(document).on("mouseup",null),B.edit.call(P,ct)}).on("focus",function(){var nt=this;R._editing=!0,T.select(document).on("mouseup",function(){if(T.event.target===nt)return!1;document.activeElement===J.node()&&J.node().blur()})}).on("keyup",function(){T.event.which===27?(R._editing=!1,P.style({opacity:1}),T.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),B.cancel.call(P,this.textContent)):(B.input.call(P,this.textContent),T.select(this).call(S(P,et,U)))}).on("keydown",function(){T.event.which===13&&this.blur()}).call(V),P.style({opacity:0});var tt,rt=z.attr("class");(tt=rt?"."+rt.split(" ")[0]+"-math-group":"[class*=-math-group]")&&T.select(P.node().parentNode).select(tt).style({opacity:0})}function V(et){var J=et.node(),X=document.createRange();X.selectNodeContents(J);var Y=window.getSelection();Y.removeAllRanges(),Y.addRange(X),J.focus()}return U.immediate?G():z.on("click",G),T.rebind(P,B,"on")}},79990:function(W,I){var o={};function T(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}I.throttle=function(k,r,m){var h=o[k],s=Date.now();if(!h){for(var e in o)o[e].ts<s-6e4&&delete o[e];h=o[k]={ts:0,timer:null}}function t(){m(),h.ts=Date.now(),h.onDone&&(h.onDone(),h.onDone=null)}T(h),s>h.ts+r?t():h.timer=setTimeout(function(){t(),h.timer=null},r)},I.done=function(k){var r=o[k];return r&&r.timer?new Promise(function(m){var h=r.onDone;r.onDone=function(){h&&h(),m(),r.onDone=null}}):Promise.resolve()},I.clear=function(k){if(k)T(o[k]),delete o[k];else for(var r in o)I.clear(r)}},58163:function(W,I,o){var T=o(92770);W.exports=function(k,r){if(k>0)return Math.log(k)/Math.LN10;var m=Math.log(Math.min(r[0],r[1]))/Math.LN10;return T(m)||(m=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),m}},90973:function(W,I,o){var T=W.exports={},k=o(78776).locationmodeToLayer,r=o(96892).zL;T.getTopojsonName=function(m){return[m.scope.replace(/ /g,"-"),"_",m.resolution.toString(),"m"].join("")},T.getTopojsonPath=function(m,h){return m+h+".json"},T.getTopojsonFeatures=function(m,h){var s=k[m.locationmode],e=h.objects[s];return r(h,e).features}},37815:function(W){W.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(W){W.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(W,I,o){var T=o(73972);W.exports=function(k){for(var r,m,h=T.layoutArrayContainers,s=T.layoutArrayRegexes,e=k.split("[")[0],t=0;t<s.length;t++)if((m=k.match(s[t]))&&m.index===0){r=m[0];break}if(r||(r=h[h.indexOf(e)]),!r)return!1;var n=k.substr(r.length);return n?!!(m=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:r,index:Number(m[1]),property:m[3]||""}:{array:r,index:"",property:""}}},30962:function(W,I,o){var T=o(1426).extendFlat,k=o(41965),r={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},m={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},h=r.flags.slice().concat(["fullReplot"]),s=m.flags.slice().concat("layoutReplot");function e(a){for(var i={},c=0;c<a.length;c++)i[a[c]]=!1;return i}function t(a,i,c){var l=T({},a);for(var u in l){var f=l[u];k(f)&&(l[u]=n(f,i,0,u))}return c==="from-root"&&(l.editType=i),l}function n(a,i,c,l){if(a.valType){var u=T({},a);if(u.editType=i,Array.isArray(a.items)){u.items=new Array(a.items.length);for(var f=0;f<a.items.length;f++)u.items[f]=n(a.items[f],i)}return u}return t(a,i,l.charAt(0)==="_"?"nested":"from-root")}W.exports={traces:r,layout:m,traceFlags:function(){return e(h)},layoutFlags:function(){return e(s)},update:function(a,i){var c=i.editType;if(c&&c!=="none")for(var l=c.split("+"),u=0;u<l.length;u++)a[l[u]]=!0},overrideAll:t}},58377:function(W,I,o){var T=o(92770),k=o(27812),r=o(73972),m=o(71828),h=o(74875),s=o(41675),e=o(7901),t=s.cleanId,n=s.getFromTrace,a=r.traceIs;function i(y,b){var x=y[b],_=b.charAt(0);x&&x!=="paper"&&(y[b]=t(x,_,!0))}function c(y){function b(x,_){var g=y[x],A=y.title&&y.title[_];g&&!A&&(y.title||(y.title={}),y.title[_]=y[x],delete y[x])}y&&(typeof y.title!="string"&&typeof y.title!="number"||(y.title={text:y.title}),b("titlefont","font"),b("titleposition","position"),b("titleside","side"),b("titleoffset","offset"))}function l(y){if(!m.isPlainObject(y))return!1;var b=y.name;return delete y.name,delete y.showlegend,(typeof b=="string"||typeof b=="number")&&String(b)}function u(y,b,x,_){if(x&&!_)return y;if(_&&!x||!y.trim())return b;if(!b.trim())return y;var g,A=Math.min(y.length,b.length);for(g=0;g<A&&y.charAt(g)===b.charAt(g);g++);return y.substr(0,g).trim()}function f(y){var b="middle",x="center";return typeof y=="string"&&(y.indexOf("top")!==-1?b="top":y.indexOf("bottom")!==-1&&(b="bottom"),y.indexOf("left")!==-1?x="left":y.indexOf("right")!==-1&&(x="right")),b+" "+x}function d(y,b){return b in y&&typeof y[b]=="object"&&Object.keys(y[b]).length===0}I.clearPromiseQueue=function(y){Array.isArray(y._promises)&&y._promises.length>0&&m.log("Clearing previous rejected promises from queue."),y._promises=[]},I.cleanLayout=function(y){var b,x;y||(y={}),y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1),y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1),y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var _=(h.subplotsRegistry.cartesian||{}).attrRegex,g=(h.subplotsRegistry.polar||{}).attrRegex,A=(h.subplotsRegistry.ternary||{}).attrRegex,M=(h.subplotsRegistry.gl3d||{}).attrRegex,L=Object.keys(y);for(b=0;b<L.length;b++){var E=L[b];if(_&&_.test(E)){var S=y[E];S.anchor&&S.anchor!=="free"&&(S.anchor=t(S.anchor)),S.overlaying&&(S.overlaying=t(S.overlaying)),S.type||(S.isdate?S.type="date":S.islog?S.type="log":S.isdate===!1&&S.islog===!1&&(S.type="linear")),S.autorange!=="withzero"&&S.autorange!=="tozero"||(S.autorange=!0,S.rangemode="tozero"),delete S.islog,delete S.isdate,delete S.categories,d(S,"domain")&&delete S.domain,S.autotick!==void 0&&(S.tickmode===void 0&&(S.tickmode=S.autotick?"auto":"linear"),delete S.autotick),c(S)}else if(g&&g.test(E))c(y[E].radialaxis);else if(A&&A.test(E)){var O=y[E];c(O.aaxis),c(O.baxis),c(O.caxis)}else if(M&&M.test(E)){var P=y[E],U=P.cameraposition;if(Array.isArray(U)&&U[0].length===4){var R=U[0],j=U[1],B=U[2],z=k([],R),G=[];for(x=0;x<3;++x)G[x]=j[x]+B*z[2+4*x];P.camera={eye:{x:G[0],y:G[1],z:G[2]},center:{x:j[0],y:j[1],z:j[2]},up:{x:0,y:0,z:1}},delete P.cameraposition}c(P.xaxis),c(P.yaxis),c(P.zaxis)}}var V=Array.isArray(y.annotations)?y.annotations.length:0;for(b=0;b<V;b++){var et=y.annotations[b];m.isPlainObject(et)&&(et.ref&&(et.ref==="paper"?(et.xref="paper",et.yref="paper"):et.ref==="data"&&(et.xref="x",et.yref="y"),delete et.ref),i(et,"xref"),i(et,"yref"))}var J=Array.isArray(y.shapes)?y.shapes.length:0;for(b=0;b<J;b++){var X=y.shapes[b];m.isPlainObject(X)&&(i(X,"xref"),i(X,"yref"))}var Y=Array.isArray(y.images)?y.images.length:0;for(b=0;b<Y;b++){var Z=y.images[b];m.isPlainObject(Z)&&(i(Z,"xref"),i(Z,"yref"))}var tt=y.legend;return tt&&(tt.x>3?(tt.x=1.02,tt.xanchor="left"):tt.x<-2&&(tt.x=-.02,tt.xanchor="right"),tt.y>3?(tt.y=1.02,tt.yanchor="bottom"):tt.y<-2&&(tt.y=-.02,tt.yanchor="top")),c(y),y.dragmode==="rotate"&&(y.dragmode="orbit"),e.clean(y),y.template&&y.template.layout&&I.cleanLayout(y.template.layout),y},I.cleanData=function(y){for(var b=0;b<y.length;b++){var x,_=y[b];if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var g=e.defaults,A=_.error_y.color||(a(_,"bar")?e.defaultLine:g[b%g.length]);_.error_y.color=e.addOpacity(e.rgb(A),e.opacity(A)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir!=="h"||!a(_,"bar")&&_.type.substr(0,9)!=="histogram"||(_.orientation="h",I.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&I.swapXYData(_),_.type!=="histogramx"&&_.type!=="histogramy"||(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=t(_.xaxis,"x")),_.yaxis&&(_.yaxis=t(_.yaxis,"y")),a(_,"gl3d")&&_.scene&&(_.scene=h.subplotsRegistry.gl3d.cleanId(_.scene)),!a(_,"pie-like")&&!a(_,"bar-like"))if(Array.isArray(_.textposition))for(x=0;x<_.textposition.length;x++)_.textposition[x]=f(_.textposition[x]);else _.textposition&&(_.textposition=f(_.textposition));var M=r.getModule(_);if(M&&M.colorbar){var L=M.colorbar.container,E=L?_[L]:_;E&&E.colorscale&&(E.colorscale==="YIGnBu"&&(E.colorscale="YlGnBu"),E.colorscale==="YIOrRd"&&(E.colorscale="YlOrRd"))}if(_.type==="surface"&&m.isPlainObject(_.contours)){var S=["x","y","z"];for(x=0;x<S.length;x++){var O=_.contours[S[x]];m.isPlainObject(O)&&(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var P=(_.increasing||{}).showlegend!==!1,U=(_.decreasing||{}).showlegend!==!1,R=l(_.increasing),j=l(_.decreasing);if(R!==!1&&j!==!1){var B=u(R,j,P,U);B&&(_.name=B)}else!R&&!j||_.name||(_.name=R||j)}if(Array.isArray(_.transforms)){var z=_.transforms;for(x=0;x<z.length;x++){var G=z[x];if(m.isPlainObject(G))switch(G.type){case"filter":G.filtersrc&&(G.target=G.filtersrc,delete G.filtersrc),G.calendar&&(G.valuecalendar||(G.valuecalendar=G.calendar),delete G.calendar);break;case"groupby":if(G.styles=G.styles||G.style,G.styles&&!Array.isArray(G.styles)){var V=G.styles,et=Object.keys(V);G.styles=[];for(var J=0;J<et.length;J++)G.styles.push({target:et[J],value:V[et[J]]})}}}}d(_,"line")&&delete _.line,"marker"in _&&(d(_.marker,"line")&&delete _.marker.line,d(_,"marker")&&delete _.marker),e.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),c(_),_.colorbar&&c(_.colorbar),_.marker&&_.marker.colorbar&&c(_.marker.colorbar),_.line&&_.line.colorbar&&c(_.line.colorbar),_.aaxis&&c(_.aaxis),_.baxis&&c(_.baxis)}},I.swapXYData=function(y){var b;if(m.swapAttrs(y,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0),y.error_x&&y.error_y){var x=y.error_y,_="copy_ystyle"in x?x.copy_ystyle:!(x.color||x.thickness||x.width);m.swapAttrs(y,["error_?.copy_ystyle"]),_&&m.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if(typeof y.hoverinfo=="string"){var g=y.hoverinfo.split("+");for(b=0;b<g.length;b++)g[b]==="x"?g[b]="y":g[b]==="y"&&(g[b]="x");y.hoverinfo=g.join("+")}},I.coerceTraceIndices=function(y,b){if(T(b))return[b];if(!Array.isArray(b)||!b.length)return y.data.map(function(g,A){return A});if(Array.isArray(b)){for(var x=[],_=0;_<b.length;_++)m.isIndex(b[_],y.data.length)?x.push(b[_]):m.warn("trace index (",b[_],") is not a number or is out of bounds");return x}return b},I.manageArrayContainers=function(y,b,x){var _=y.obj,g=y.parts,A=g.length,M=g[A-1],L=T(M);if(L&&b===null){var E=g.slice(0,A-1).join(".");m.nestedProperty(_,E).get().splice(M,1)}else L&&y.get()===void 0&&y.get()===void 0&&(x[y.astr]=null),y.set(b)};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function v(y){var b=y.search(w);if(b>0)return y.substr(0,b)}I.hasParent=function(y,b){for(var x=v(b);x;){if(x in y)return!0;x=v(x)}return!1};var p=["x","y","z"];I.clearAxisTypes=function(y,b,x){for(var _=0;_<b.length;_++)for(var g=y._fullData[_],A=0;A<3;A++){var M=n(y,g,p[A]);if(M&&M.type!=="log"){var L=M._name,E=M._id.substr(1);if(E.substr(0,5)==="scene"){if(x[E]!==void 0)continue;L=E+"."+L}var S=L+".type";x[L]===void 0&&x[S]===void 0&&m.nestedProperty(y.layout,S).set(null)}}}},10641:function(W,I,o){var T=o(72391);I._doPlot=T._doPlot,I.newPlot=T.newPlot,I.restyle=T.restyle,I.relayout=T.relayout,I.redraw=T.redraw,I.update=T.update,I._guiRestyle=T._guiRestyle,I._guiRelayout=T._guiRelayout,I._guiUpdate=T._guiUpdate,I._storeDirectGUIEdit=T._storeDirectGUIEdit,I.react=T.react,I.extendTraces=T.extendTraces,I.prependTraces=T.prependTraces,I.addTraces=T.addTraces,I.deleteTraces=T.deleteTraces,I.moveTraces=T.moveTraces,I.purge=T.purge,I.addFrames=T.addFrames,I.deleteFrames=T.deleteFrames,I.animate=T.animate,I.setPlotConfig=T.setPlotConfig;var k=o(24401).getGraphDiv,r=o(34031).eraseActiveShape;I.deleteActiveShape=function(h){return r(k(h))},I.toImage=o(403),I.validate=o(84936),I.downloadImage=o(7239);var m=o(96318);I.makeTemplate=m.makeTemplate,I.validateTemplate=m.validateTemplate},6611:function(W,I,o){var T=o(41965),k=o(64213),r=o(47769),m=o(65888).sorterAsc,h=o(73972);I.containerArrayMatch=o(14458);var s=I.isAddVal=function(t){return t==="add"||T(t)},e=I.isRemoveVal=function(t){return t===null||t==="remove"};I.applyContainerArrayChanges=function(t,n,a,i,c){var l=n.astr,u=h.getComponentMethod(l,"supplyLayoutDefaults"),f=h.getComponentMethod(l,"draw"),d=h.getComponentMethod(l,"drawOne"),w=i.replot||i.recalc||u===k||f===k,v=t.layout,p=t._fullLayout;if(a[""]){Object.keys(a).length>1&&r.warn("Full array edits are incompatible with other edits",l);var y=a[""][""];if(e(y))n.set(null);else{if(!Array.isArray(y))return r.warn("Unrecognized full array edit value",l,y),!0;n.set(y)}return!w&&(u(v,p),f(t),!0)}var b,x,_,g,A,M,L,E,S=Object.keys(a).map(Number).sort(m),O=n.get(),P=O||[],U=c(p,l).get(),R=[],j=-1,B=P.length;for(b=0;b<S.length;b++)if(g=a[_=S[b]],A=Object.keys(g),M=g[""],L=s(M),_<0||_>P.length-(L?0:1))r.warn("index out of range",l,_);else if(M!==void 0)A.length>1&&r.warn("Insertion & removal are incompatible with edits to the same index.",l,_),e(M)?R.push(_):L?(M==="add"&&(M={}),P.splice(_,0,M),U&&U.splice(_,0,{})):r.warn("Unrecognized full object edit value",l,_,M),j===-1&&(j=_);else for(x=0;x<A.length;x++)E=l+"["+_+"].",c(P[_],A[x],E).set(g[A[x]]);for(b=R.length-1;b>=0;b--)P.splice(R[b],1),U&&U.splice(R[b],1);if(P.length?O||n.set(P):n.set(null),w)return!1;if(u(v,p),d!==k){var z;if(j===-1)z=S;else{for(B=Math.max(P.length,B),z=[],b=0;b<S.length&&!((_=S[b])>=j);b++)z.push(_);for(b=j;b<B;b++)z.push(b)}for(b=0;b<z.length;b++)d(t,z[b])}else f(t);return!0}},72391:function(W,I,o){var T=o(39898),k=o(92770),r=o(57035),m=o(71828),h=m.nestedProperty,s=o(11086),e=o(10847),t=o(73972),n=o(86281),a=o(74875),i=o(89298),c=o(23608),l=o(13838),u=o(91424),f=o(7901),d=o(4305).initInteractions,w=o(77922),v=o(47322).clearOutline,p=o(72075).dfltConfig,y=o(6611),b=o(58377),x=o(61549),_=o(30962),g=o(85555).AX_NAME_PATTERN,A=0;function M(Mt){var _t=Mt._fullLayout;_t._redrawFromAutoMarginCount?_t._redrawFromAutoMarginCount--:Mt.emit("plotly_afterplot")}function L(Mt,_t){try{Mt._fullLayout._paper.style("background",_t)}catch(St){m.error(St)}}function E(Mt,_t){L(Mt,f.combine(_t,"white"))}function S(Mt,_t){if(!Mt._context){Mt._context=m.extendDeep({},p);var St=T.select("base");Mt._context._baseUrl=St.size()&&St.attr("href")?window.location.href.split("#")[0]:""}var Dt,ut,Tt,bt=Mt._context;if(_t){for(ut=Object.keys(_t),Dt=0;Dt<ut.length;Dt++)(Tt=ut[Dt])!=="editable"&&Tt!=="edits"&&Tt in bt&&(Tt==="setBackground"&&_t[Tt]==="opaque"?bt[Tt]=E:bt[Tt]=_t[Tt]);_t.plot3dPixelRatio&&!bt.plotGlPixelRatio&&(bt.plotGlPixelRatio=bt.plot3dPixelRatio);var It=_t.editable;if(It!==void 0)for(bt.editable=It,ut=Object.keys(bt.edits),Dt=0;Dt<ut.length;Dt++)bt.edits[ut[Dt]]=It;if(_t.edits)for(ut=Object.keys(_t.edits),Dt=0;Dt<ut.length;Dt++)(Tt=ut[Dt])in bt.edits&&(bt.edits[Tt]=_t.edits[Tt]);bt._exportedPlot=_t._exportedPlot}bt.staticPlot&&(bt.editable=!1,bt.edits={},bt.autosizable=!1,bt.scrollZoom=!1,bt.doubleClick=!1,bt.showTips=!1,bt.showLink=!1,bt.displayModeBar=!1),bt.displayModeBar!=="hover"||r||(bt.displayModeBar=!0),bt.setBackground!=="transparent"&&typeof bt.setBackground=="function"||(bt.setBackground=L),bt._hasZeroHeight=bt._hasZeroHeight||Mt.clientHeight===0,bt._hasZeroWidth=bt._hasZeroWidth||Mt.clientWidth===0;var zt=bt.scrollZoom,Ft=bt._scrollZoom={};if(zt===!0)Ft.cartesian=1,Ft.gl3d=1,Ft.geo=1,Ft.mapbox=1;else if(typeof zt=="string"){var $t=zt.split("+");for(Dt=0;Dt<$t.length;Dt++)Ft[$t[Dt]]=1}else zt!==!1&&(Ft.gl3d=1,Ft.geo=1,Ft.mapbox=1)}function O(Mt,_t){var St,Dt,ut=_t+1,Tt=[];for(St=0;St<Mt.length;St++)(Dt=Mt[St])<0?Tt.push(ut+Dt):Tt.push(Dt);return Tt}function P(Mt,_t,St){var Dt,ut;for(Dt=0;Dt<_t.length;Dt++){if((ut=_t[Dt])!==parseInt(ut,10))throw new Error("all values in "+St+" must be integers");if(ut>=Mt.data.length||ut<-Mt.data.length)throw new Error(St+" must be valid indices for gd.data.");if(_t.indexOf(ut,Dt+1)>-1||ut>=0&&_t.indexOf(-Mt.data.length+ut)>-1||ut<0&&_t.indexOf(Mt.data.length+ut)>-1)throw new Error("each index in "+St+" must be unique.")}}function U(Mt,_t,St){if(!Array.isArray(Mt.data))throw new Error("gd.data must be an array.");if(_t===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(_t)||(_t=[_t]),P(Mt,_t,"currentIndices"),St===void 0||Array.isArray(St)||(St=[St]),St!==void 0&&P(Mt,St,"newIndices"),St!==void 0&&_t.length!==St.length)throw new Error("current and new indices must be of equal length.")}function R(Mt,_t,St,Dt,ut){(function(Xt,ae,Qt,de){var ye=m.isPlainObject(de);if(!Array.isArray(Xt.data))throw new Error("gd.data must be an array");if(!m.isPlainObject(ae))throw new Error("update must be a key:value object");if(Qt===void 0)throw new Error("indices must be an integer or array of integers");for(var ve in P(Xt,Qt,"indices"),ae){if(!Array.isArray(ae[ve])||ae[ve].length!==Qt.length)throw new Error("attribute "+ve+" must be an array of length equal to indices array length");if(ye&&(!(ve in de)||!Array.isArray(de[ve])||de[ve].length!==ae[ve].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(Mt,_t,St,Dt);for(var Tt=function(Xt,ae,Qt,de){var ye,ve,ie,se,ke,Ae=m.isPlainObject(de),Ie=[];for(var Te in Array.isArray(Qt)||(Qt=[Qt]),Qt=O(Qt,Xt.data.length-1),ae)for(var Vt=0;Vt<Qt.length;Vt++){if(ye=Xt.data[Qt[Vt]],ve=(ie=h(ye,Te)).get(),se=ae[Te][Vt],!m.isArrayOrTypedArray(se))throw new Error("attribute: "+Te+" index: "+Vt+" must be an array");if(!m.isArrayOrTypedArray(ve))throw new Error("cannot extend missing or non-array attribute: "+Te);if(ve.constructor!==se.constructor)throw new Error("cannot extend array with an array of a different type: "+Te);ke=Ae?de[Te][Vt]:de,k(ke)||(ke=-1),Ie.push({prop:ie,target:ve,insert:se,maxp:Math.floor(ke)})}return Ie}(Mt,_t,St,Dt),bt={},It={},zt=0;zt<Tt.length;zt++){var Ft=Tt[zt].prop,$t=Tt[zt].maxp,Wt=ut(Tt[zt].target,Tt[zt].insert,$t);Ft.set(Wt[0]),Array.isArray(bt[Ft.astr])||(bt[Ft.astr]=[]),bt[Ft.astr].push(Wt[1]),Array.isArray(It[Ft.astr])||(It[Ft.astr]=[]),It[Ft.astr].push(Tt[zt].target.length)}return{update:bt,maxPoints:It}}function j(Mt,_t){var St=new Mt.constructor(Mt.length+_t.length);return St.set(Mt),St.set(_t,Mt.length),St}function B(Mt,_t,St,Dt){Mt=m.getGraphDiv(Mt),b.clearPromiseQueue(Mt);var ut={};if(typeof _t=="string")ut[_t]=St;else{if(!m.isPlainObject(_t))return m.warn("Restyle fail.",_t,St,Dt),Promise.reject();ut=m.extendFlat({},_t),Dt===void 0&&(Dt=St)}Object.keys(ut).length&&(Mt.changed=!0);var Tt=b.coerceTraceIndices(Mt,Dt),bt=et(Mt,ut,Tt),It=bt.flags;It.calc&&(Mt.calcdata=void 0),It.clearAxisTypes&&b.clearAxisTypes(Mt,Tt,{});var zt=[];It.fullReplot?zt.push(I._doPlot):(zt.push(a.previousPromises),a.supplyDefaults(Mt),It.markerSize&&(a.doCalcdata(Mt),Z(zt)),It.style&&zt.push(x.doTraceStyle),It.colorbars&&zt.push(x.doColorBars),zt.push(M)),zt.push(a.rehover,a.redrag,a.reselect),e.add(Mt,B,[Mt,bt.undoit,bt.traces],B,[Mt,bt.redoit,bt.traces]);var Ft=m.syncOrAsync(zt,Mt);return Ft&&Ft.then||(Ft=Promise.resolve()),Ft.then(function(){return Mt.emit("plotly_restyle",bt.eventData),Mt})}function z(Mt){return Mt===void 0?null:Mt}function G(Mt,_t){return _t?function(St,Dt,ut){var Tt=h(St,Dt),bt=Tt.set;return Tt.set=function(It){V((ut||"")+Dt,Tt.get(),It,Mt),bt(It)},Tt}:h}function V(Mt,_t,St,Dt){if(Array.isArray(_t)||Array.isArray(St))for(var ut=Array.isArray(_t)?_t:[],Tt=Array.isArray(St)?St:[],bt=Math.max(ut.length,Tt.length),It=0;It<bt;It++)V(Mt+"["+It+"]",ut[It],Tt[It],Dt);else if(m.isPlainObject(_t)||m.isPlainObject(St)){var zt=m.isPlainObject(_t)?_t:{},Ft=m.isPlainObject(St)?St:{},$t=m.extendFlat({},zt,Ft);for(var Wt in $t)V(Mt+"."+Wt,zt[Wt],Ft[Wt],Dt)}else Dt[Mt]===void 0&&(Dt[Mt]=z(_t))}function et(Mt,_t,St){var Dt,ut=Mt._fullLayout,Tt=Mt._fullData,bt=Mt.data,It=ut._guiEditing,zt=G(ut._preGUI,It),Ft=m.extendDeepAll({},_t);J(_t);var $t,Wt=_.traceFlags(),Xt={},ae={};function Qt(){return St.map(function(){})}function de(Ge){var Ze=i.id2name(Ge);$t.indexOf(Ze)===-1&&$t.push(Ze)}function ye(Ge){return"LAYOUT"+Ge+".autorange"}function ve(Ge){return"LAYOUT"+Ge+".range"}function ie(Ge){for(var Ze=Ge;Ze<Tt.length;Ze++)if(Tt[Ze]._input===bt[Ge])return Tt[Ze]}function se(Ge,Ze,We){if(Array.isArray(Ge))Ge.forEach(function(sr){se(sr,Ze,We)});else if(!(Ge in _t)&&!b.hasParent(_t,Ge)){var pr;if(Ge.substr(0,6)==="LAYOUT")pr=zt(Mt.layout,Ge.replace("LAYOUT",""));else{var xr=St[We];pr=G(ut._tracePreGUI[ie(xr)._fullInput.uid],It)(bt[xr],Ge)}Ge in ae||(ae[Ge]=Qt()),ae[Ge][We]===void 0&&(ae[Ge][We]=z(pr.get())),Ze!==void 0&&pr.set(Ze)}}function ke(Ge){return function(Ze){return Tt[Ze][Ge]}}function Ae(Ge){return function(Ze,We){return Ze===!1?Tt[St[We]][Ge]:null}}for(var Ie in _t){if(b.hasParent(_t,Ie))throw new Error("cannot set "+Ie+" and a parent attribute simultaneously");var Te,Vt,Zt,Gt,Yt,ne,re=_t[Ie];if(Ie!=="autobinx"&&Ie!=="autobiny"||(Ie=Ie.charAt(Ie.length-1)+"bins",re=Array.isArray(re)?re.map(Ae(Ie)):re===!1?St.map(ke(Ie)):null),Xt[Ie]=re,Ie.substr(0,6)!=="LAYOUT"){for(ae[Ie]=Qt(),Dt=0;Dt<St.length;Dt++)if(Te=bt[St[Dt]],Vt=ie(St[Dt]),Gt=(Zt=G(ut._tracePreGUI[Vt._fullInput.uid],It)(Te,Ie)).get(),(Yt=Array.isArray(re)?re[Dt%re.length]:re)!==void 0){var Pt=Zt.parts[Zt.parts.length-1],Nt=Ie.substr(0,Ie.length-Pt.length-1),ee=Nt?Nt+".":"",te=Nt?h(Vt,Nt).get():Vt;if((ne=n.getTraceValObject(Vt,Zt.parts))&&ne.impliedEdits&&Yt!==null)for(var ge in ne.impliedEdits)se(m.relativeAttr(Ie,ge),ne.impliedEdits[ge],Dt);else if(Pt!=="thicknessmode"&&Pt!=="lenmode"||Gt===Yt||Yt!=="fraction"&&Yt!=="pixels"||!te){if(Ie==="type"&&(Yt==="pie"!=(Gt==="pie")||Yt==="funnelarea"!=(Gt==="funnelarea"))){var pe="x",me="y";Yt!=="bar"&&Gt!=="bar"||Te.orientation!=="h"||(pe="y",me="x"),m.swapAttrs(Te,["?","?src"],"labels",pe),m.swapAttrs(Te,["d?","?0"],"label",pe),m.swapAttrs(Te,["?","?src"],"values",me),Gt==="pie"||Gt==="funnelarea"?(h(Te,"marker.color").set(h(Te,"marker.colors").get()),ut._pielayer.selectAll("g.trace").remove()):t.traceIs(Te,"cartesian")&&h(Te,"marker.colors").set(h(Te,"marker.color").get())}}else{var ce=ut._size,we=te.orient,ue=we==="top"||we==="bottom";if(Pt==="thicknessmode"){var he=ue?ce.h:ce.w;se(ee+"thickness",te.thickness*(Yt==="fraction"?1/he:he),Dt)}else{var be=ue?ce.w:ce.h;se(ee+"len",te.len*(Yt==="fraction"?1/be:be),Dt)}}if(ae[Ie][Dt]=z(Gt),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Ie)!==-1){if(Ie==="orientation"){Zt.set(Yt);var Pe=Te.x&&!Te.y?"h":"v";if((Zt.get()||Pe)===Vt.orientation)continue}else Ie==="orientationaxes"&&(Te.orientation={v:"h",h:"v"}[Vt.orientation]);b.swapXYData(Te),Wt.calc=Wt.clearAxisTypes=!0}else a.dataArrayContainers.indexOf(Zt.parts[0])!==-1?(b.manageArrayContainers(Zt,Yt,ae),Wt.calc=!0):(ne?ne.arrayOk&&!t.traceIs(Vt,"regl")&&(m.isArrayOrTypedArray(Yt)||m.isArrayOrTypedArray(Gt))?Wt.calc=!0:_.update(Wt,ne):Wt.calc=!0,Zt.set(Yt))}if(["swapxyaxes","orientationaxes"].indexOf(Ie)!==-1&&i.swap(Mt,St),Ie==="orientationaxes"){var De=h(Mt.layout,"hovermode"),Ue=De.get();Ue==="x"?De.set("y"):Ue==="y"?De.set("x"):Ue==="x unified"?De.set("y unified"):Ue==="y unified"&&De.set("x unified")}if(["orientation","type"].indexOf(Ie)!==-1){for($t=[],Dt=0;Dt<St.length;Dt++){var tr=bt[St[Dt]];t.traceIs(tr,"cartesian")&&(de(tr.xaxis||"x"),de(tr.yaxis||"y"))}se($t.map(ye),!0,0),se($t.map(ve),[0,1],0)}}else Zt=zt(Mt.layout,Ie.replace("LAYOUT","")),ae[Ie]=[z(Zt.get())],Zt.set(Array.isArray(re)?re[0]:re),Wt.calc=!0}return(Wt.calc||Wt.plot)&&(Wt.fullReplot=!0),{flags:Wt,undoit:ae,redoit:Xt,traces:St,eventData:m.extendDeepNoArrays([],[Ft,St])}}function J(Mt){var _t,St,Dt,ut=m.counterRegex("axis",".title",!1,!1),Tt=/colorbar\.title$/,bt=Object.keys(Mt);for(_t=0;_t<bt.length;_t++)St=bt[_t],Dt=Mt[St],St!=="title"&&!ut.test(St)&&!Tt.test(St)||typeof Dt!="string"&&typeof Dt!="number"?St.indexOf("titlefont")>-1&&St.indexOf("grouptitlefont")===-1?It(St,St.replace("titlefont","title.font")):St.indexOf("titleposition")>-1?It(St,St.replace("titleposition","title.position")):St.indexOf("titleside")>-1?It(St,St.replace("titleside","title.side")):St.indexOf("titleoffset")>-1&&It(St,St.replace("titleoffset","title.offset")):It(St,St.replace("title","title.text"));function It(zt,Ft){Mt[Ft]=Mt[zt],delete Mt[zt]}}function X(Mt,_t,St){Mt=m.getGraphDiv(Mt),b.clearPromiseQueue(Mt);var Dt={};if(typeof _t=="string")Dt[_t]=St;else{if(!m.isPlainObject(_t))return m.warn("Relayout fail.",_t,St),Promise.reject();Dt=m.extendFlat({},_t)}Object.keys(Dt).length&&(Mt.changed=!0);var ut=ot(Mt,Dt),Tt=ut.flags;Tt.calc&&(Mt.calcdata=void 0);var bt=[a.previousPromises];Tt.layoutReplot?bt.push(x.layoutReplot):Object.keys(Dt).length&&(Y(Mt,Tt,ut)||a.supplyDefaults(Mt),Tt.legend&&bt.push(x.doLegend),Tt.layoutstyle&&bt.push(x.layoutStyles),Tt.axrange&&Z(bt,ut.rangesAltered),Tt.ticks&&bt.push(x.doTicksRelayout),Tt.modebar&&bt.push(x.doModeBar),Tt.camera&&bt.push(x.doCamera),Tt.colorbars&&bt.push(x.doColorBars),bt.push(M)),bt.push(a.rehover,a.redrag,a.reselect),e.add(Mt,X,[Mt,ut.undoit],X,[Mt,ut.redoit]);var It=m.syncOrAsync(bt,Mt);return It&&It.then||(It=Promise.resolve(Mt)),It.then(function(){return Mt.emit("plotly_relayout",ut.eventData),Mt})}function Y(Mt,_t,St){var Dt,ut,Tt=Mt._fullLayout;if(!_t.axrange)return!1;for(var bt in _t)if(bt!=="axrange"&&_t[bt])return!1;var It=function(ae,Qt){return m.coerce(Dt,ut,l,ae,Qt)},zt={};for(var Ft in St.rangesAltered){var $t=i.id2name(Ft);if(Dt=Mt.layout[$t],ut=Tt[$t],c(Dt,ut,It,zt),ut._matchGroup){for(var Wt in ut._matchGroup)if(Wt!==Ft){var Xt=Tt[i.id2name(Wt)];Xt.autorange=ut.autorange,Xt.range=ut.range.slice(),Xt._input.range=ut.range.slice()}}}return!0}function Z(Mt,_t){var St=_t?function(Dt){var ut=[];for(var Tt in _t){var bt=i.getFromId(Dt,Tt);if(ut.push(Tt),(bt.ticklabelposition||"").indexOf("inside")!==-1&&bt._anchorAxis&&ut.push(bt._anchorAxis._id),bt._matchGroup)for(var It in bt._matchGroup)_t[It]||ut.push(It)}return i.draw(Dt,ut,{skipTitle:!0})}:function(Dt){return i.draw(Dt,"redraw")};Mt.push(v,x.doAutoRangeAndConstraints,St,x.drawData,x.finalDraw)}var tt=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,rt=/^[xyz]axis[0-9]*\.autorange$/,nt=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ot(Mt,_t){var St,Dt,ut,Tt=Mt.layout,bt=Mt._fullLayout,It=bt._guiEditing,zt=G(bt._preGUI,It),Ft=Object.keys(_t),$t=i.list(Mt),Wt=m.extendDeepAll({},_t),Xt={};for(J(_t),Ft=Object.keys(_t),Dt=0;Dt<Ft.length;Dt++)if(Ft[Dt].indexOf("allaxes")===0){for(ut=0;ut<$t.length;ut++){var ae=$t[ut]._id.substr(1),Qt=ae.indexOf("scene")!==-1?ae+".":"",de=Ft[Dt].replace("allaxes",Qt+$t[ut]._name);_t[de]||(_t[de]=_t[Ft[Dt]])}delete _t[Ft[Dt]]}var ye=_.layoutFlags(),ve={},ie={};function se(sr,$e){if(Array.isArray(sr))sr.forEach(function(Ke){se(Ke,$e)});else if(!(sr in _t)&&!b.hasParent(_t,sr)){var ir=zt(Tt,sr);sr in ie||(ie[sr]=z(ir.get())),$e!==void 0&&ir.set($e)}}var ke,Ae={};function Ie(sr){var $e=i.name2id(sr.split(".")[0]);return Ae[$e]=1,$e}for(var Te in _t){if(b.hasParent(_t,Te))throw new Error("cannot set "+Te+" and a parent attribute simultaneously");for(var Vt=zt(Tt,Te),Zt=_t[Te],Gt=Vt.parts.length-1;Gt>0&&typeof Vt.parts[Gt]!="string";)Gt--;var Yt=Vt.parts[Gt],ne=Vt.parts[Gt-1]+"."+Yt,re=Vt.parts.slice(0,Gt).join("."),Pt=h(Mt.layout,re).get(),Nt=h(bt,re).get(),ee=Vt.get();if(Zt!==void 0){ve[Te]=Zt,ie[Te]=Yt==="reverse"?Zt:z(ee);var te=n.getLayoutValObject(bt,Vt.parts);if(te&&te.impliedEdits&&Zt!==null)for(var ge in te.impliedEdits)se(m.relativeAttr(Te,ge),te.impliedEdits[ge]);if(["width","height"].indexOf(Te)!==-1)if(Zt){se("autosize",null);var pe=Te==="height"?"width":"height";se(pe,bt[pe])}else bt[Te]=Mt._initialAutoSize[Te];else if(Te==="autosize")se("width",Zt?null:bt.width),se("height",Zt?null:bt.height);else if(ne.match(tt))Ie(ne),h(bt,re+"._inputRange").set(null);else if(ne.match(rt)){Ie(ne),h(bt,re+"._inputRange").set(null);var me=h(bt,re).get();me._inputDomain&&(me._input.domain=me._inputDomain.slice())}else ne.match(nt)&&h(bt,re+"._inputDomain").set(null);if(Yt==="type"){ke=Pt;var ce=Nt.type==="linear"&&Zt==="log",we=Nt.type==="log"&&Zt==="linear";if(ce||we){if(ke&&ke.range)if(Nt.autorange)ce&&(ke.range=ke.range[1]>ke.range[0]?[1,2]:[2,1]);else{var ue=ke.range[0],he=ke.range[1];ce?(ue<=0&&he<=0&&se(re+".autorange",!0),ue<=0?ue=he/1e6:he<=0&&(he=ue/1e6),se(re+".range[0]",Math.log(ue)/Math.LN10),se(re+".range[1]",Math.log(he)/Math.LN10)):(se(re+".range[0]",Math.pow(10,ue)),se(re+".range[1]",Math.pow(10,he)))}else se(re+".autorange",!0);Array.isArray(bt._subplots.polar)&&bt._subplots.polar.length&&bt[Vt.parts[0]]&&Vt.parts[1]==="radialaxis"&&delete bt[Vt.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(Mt,Nt,Zt,se),t.getComponentMethod("images","convertCoords")(Mt,Nt,Zt,se)}else se(re+".autorange",!0),se(re+".range",null);h(bt,re+"._inputRange").set(null)}else if(Yt.match(g)){var be=h(bt,Te).get(),Pe=(Zt||{}).type;Pe&&Pe!=="-"||(Pe="linear"),t.getComponentMethod("annotations","convertCoords")(Mt,be,Pe,se),t.getComponentMethod("images","convertCoords")(Mt,be,Pe,se)}var De=y.containerArrayMatch(Te);if(De){St=De.array,Dt=De.index;var Ue=De.property,tr=te||{editType:"calc"};Dt!==""&&Ue===""&&(y.isAddVal(Zt)?ie[Te]=null:y.isRemoveVal(Zt)?ie[Te]=(h(Tt,St).get()||[])[Dt]:m.warn("unrecognized full object value",_t)),_.update(ye,tr),Xt[St]||(Xt[St]={});var Ge=Xt[St][Dt];Ge||(Ge=Xt[St][Dt]={}),Ge[Ue]=Zt,delete _t[Te]}else Yt==="reverse"?(Pt.range?Pt.range.reverse():(se(re+".autorange",!0),Pt.range=[1,0]),Nt.autorange?ye.calc=!0:ye.plot=!0):(Te==="dragmode"&&(Zt===!1&&ee!==!1||Zt!==!1&&ee===!1)||bt._has("scatter-like")&&bt._has("regl")&&Te==="dragmode"&&(Zt==="lasso"||Zt==="select")&&ee!=="lasso"&&ee!=="select"||bt._has("gl2d")?ye.plot=!0:te?_.update(ye,te):ye.calc=!0,Vt.set(Zt))}}for(St in Xt)y.applyContainerArrayChanges(Mt,zt(Tt,St),Xt[St],ye,zt)||(ye.plot=!0);for(var Ze in Ae){var We=(ke=i.getFromId(Mt,Ze))&&ke._constraintGroup;if(We)for(var pr in ye.calc=!0,We)Ae[pr]||(i.getFromId(Mt,pr)._constraintShrinkable=!0)}(ct(Mt)||_t.height||_t.width)&&(ye.plot=!0);var xr=bt.shapes;for(Dt=0;Dt<xr.length;Dt++)if(xr[Dt].showlegend){ye.calc=!0;break}return(ye.plot||ye.calc)&&(ye.layoutReplot=!0),{flags:ye,rangesAltered:Ae,undoit:ie,redoit:ve,eventData:Wt}}function ct(Mt){var _t=Mt._fullLayout,St=_t.width,Dt=_t.height;return Mt.layout.autosize&&a.plotAutoSize(Mt,Mt.layout,_t),_t.width!==St||_t.height!==Dt}function pt(Mt,_t,St,Dt){Mt=m.getGraphDiv(Mt),b.clearPromiseQueue(Mt),m.isPlainObject(_t)||(_t={}),m.isPlainObject(St)||(St={}),Object.keys(_t).length&&(Mt.changed=!0),Object.keys(St).length&&(Mt.changed=!0);var ut=b.coerceTraceIndices(Mt,Dt),Tt=et(Mt,m.extendFlat({},_t),ut),bt=Tt.flags,It=ot(Mt,m.extendFlat({},St)),zt=It.flags;(bt.calc||zt.calc)&&(Mt.calcdata=void 0),bt.clearAxisTypes&&b.clearAxisTypes(Mt,ut,St);var Ft=[];zt.layoutReplot?Ft.push(x.layoutReplot):bt.fullReplot?Ft.push(I._doPlot):(Ft.push(a.previousPromises),Y(Mt,zt,It)||a.supplyDefaults(Mt),bt.style&&Ft.push(x.doTraceStyle),(bt.colorbars||zt.colorbars)&&Ft.push(x.doColorBars),zt.legend&&Ft.push(x.doLegend),zt.layoutstyle&&Ft.push(x.layoutStyles),zt.axrange&&Z(Ft,It.rangesAltered),zt.ticks&&Ft.push(x.doTicksRelayout),zt.modebar&&Ft.push(x.doModeBar),zt.camera&&Ft.push(x.doCamera),Ft.push(M)),Ft.push(a.rehover,a.redrag,a.reselect),e.add(Mt,pt,[Mt,Tt.undoit,It.undoit,Tt.traces],pt,[Mt,Tt.redoit,It.redoit,Tt.traces]);var $t=m.syncOrAsync(Ft,Mt);return $t&&$t.then||($t=Promise.resolve(Mt)),$t.then(function(){return Mt.emit("plotly_update",{data:Tt.eventData,layout:It.eventData}),Mt})}function gt(Mt){return function(_t){_t._fullLayout._guiEditing=!0;var St=Mt.apply(null,arguments);return _t._fullLayout._guiEditing=!1,St}}var kt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],yt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function mt(Mt,_t){for(var St=0;St<_t.length;St++){var Dt=_t[St],ut=Mt.match(Dt.pattern);if(ut){var Tt=ut[1]||"";return{head:Tt,tail:Mt.substr(Tt.length+1),attr:Dt.attr}}}}function Ot(Mt,_t){var St=h(_t,Mt).get();if(St!==void 0)return St;var Dt=Mt.split(".");for(Dt.pop();Dt.length>1;)if(Dt.pop(),(St=h(_t,Dt.join(".")+".uirevision").get())!==void 0)return St;return _t.uirevision}function vt(Mt,_t){for(var St=0;St<_t.length;St++)if(_t[St]._fullInput.uid===Mt)return St;return-1}function xt(Mt,_t,St){for(var Dt=0;Dt<_t.length;Dt++)if(_t[Dt].uid===Mt)return Dt;return!_t[St]||_t[St].uid?-1:St}function st(Mt,_t){var St=m.isPlainObject(Mt),Dt=Array.isArray(Mt);return St||Dt?(St&&m.isPlainObject(_t)||Dt&&Array.isArray(_t))&&JSON.stringify(Mt)===JSON.stringify(_t):Mt===_t}function at(Mt,_t,St,Dt){var ut,Tt,bt,It=Dt.getValObject,zt=Dt.flags,Ft=Dt.immutable,$t=Dt.inArray,Wt=Dt.arrayIndex;function Xt(){var Pt=ut.editType;$t&&Pt.indexOf("arraydraw")!==-1?m.pushUnique(zt.arrays[$t],Wt):(_.update(zt,ut),Pt!=="none"&&zt.nChanges++,Dt.transition&&ut.anim&&zt.nChangesAnim++,(tt.test(bt)||rt.test(bt))&&(zt.rangesAltered[St[0]]=1),nt.test(bt)&&h(_t,"_inputDomain").set(null),Tt==="datarevision"&&(zt.newDataRevision=1))}function ae(Pt){return Pt.valType==="data_array"||Pt.arrayOk}for(Tt in Mt){if(zt.calc&&!Dt.transition)return;var Qt=Mt[Tt],de=_t[Tt],ye=St.concat(Tt);if(bt=ye.join("."),Tt.charAt(0)!=="_"&&typeof Qt!="function"&&Qt!==de){if((Tt==="tick0"||Tt==="dtick")&&St[0]!=="geo"){var ve=_t.tickmode;if(ve==="auto"||ve==="array"||!ve)continue}if((Tt!=="range"||!_t.autorange)&&(Tt!=="zmin"&&Tt!=="zmax"||_t.type!=="contourcarpet")&&(ut=It(ye))&&(!ut._compareAsJSON||JSON.stringify(Qt)!==JSON.stringify(de))){var ie,se=ut.valType,ke=ae(ut),Ae=Array.isArray(Qt),Ie=Array.isArray(de);if(Ae&&Ie){var Te="_input_"+Tt,Vt=Mt[Te],Zt=_t[Te];if(Array.isArray(Vt)&&Vt===Zt)continue}if(de===void 0)ke&&Ae?zt.calc=!0:Xt();else if(ut._isLinkedToArray){var Gt=[],Yt=!1;$t||(zt.arrays[Tt]=Gt);var ne=Math.min(Qt.length,de.length),re=Math.max(Qt.length,de.length);if(ne!==re){if(ut.editType!=="arraydraw"){Xt();continue}Yt=!0}for(ie=0;ie<ne;ie++)at(Qt[ie],de[ie],ye.concat(ie),m.extendFlat({inArray:Tt,arrayIndex:ie},Dt));if(Yt)for(ie=ne;ie<re;ie++)Gt.push(ie)}else!se&&m.isPlainObject(Qt)?at(Qt,de,ye,Dt):ke?Ae&&Ie?(Ft&&(zt.calc=!0),(Ft||Dt.newDataRevision)&&Xt()):Ae!==Ie?zt.calc=!0:Xt():Ae&&Ie&&Qt.length===de.length&&String(Qt)===String(de)||Xt()}}}for(Tt in _t)if(!(Tt in Mt)&&Tt.charAt(0)!=="_"&&typeof _t[Tt]!="function"){if(ae(ut=It(St.concat(Tt)))&&Array.isArray(_t[Tt]))return void(zt.calc=!0);Xt()}}function ht(Mt,_t){var St;for(St in Mt)if(St.charAt(0)!=="_"){var Dt=Mt[St],ut=_t[St];if(Dt!==ut)if(m.isPlainObject(Dt)&&m.isPlainObject(ut)){if(ht(Dt,ut))return!0}else{if(!Array.isArray(Dt)||!Array.isArray(ut)||Dt.length!==ut.length)return!0;for(var Tt=0;Tt<Dt.length;Tt++)if(Dt[Tt]!==ut[Tt]&&(!m.isPlainObject(Dt[Tt])||!m.isPlainObject(ut[Tt])||ht(Dt[Tt],ut[Tt])))return!0}}}function Lt(Mt){var _t=Mt._fullLayout,St=Mt.getBoundingClientRect();if(!m.equalDomRects(St,_t._lastBBox)){var Dt=_t._invTransform=m.inverseTransformMatrix(m.getFullTransformMatrix(Mt));_t._invScaleX=Math.sqrt(Dt[0][0]*Dt[0][0]+Dt[0][1]*Dt[0][1]+Dt[0][2]*Dt[0][2]),_t._invScaleY=Math.sqrt(Dt[1][0]*Dt[1][0]+Dt[1][1]*Dt[1][1]+Dt[1][2]*Dt[1][2]),_t._lastBBox=St}}I.animate=function(Mt,_t,St){if(Mt=m.getGraphDiv(Mt),!m.isPlotDiv(Mt))throw new Error("This element is not a Plotly plot: "+Mt+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Dt=Mt._transitionData;Dt._frameQueue||(Dt._frameQueue=[]);var ut=(St=a.supplyAnimationDefaults(St)).transition,Tt=St.frame;function bt(Ft){return Array.isArray(ut)?Ft>=ut.length?ut[0]:ut[Ft]:ut}function It(Ft){return Array.isArray(Tt)?Ft>=Tt.length?Tt[0]:Tt[Ft]:Tt}function zt(Ft,$t){var Wt=0;return function(){if(Ft&&++Wt===$t)return Ft()}}return Dt._frameWaitingCnt===void 0&&(Dt._frameWaitingCnt=0),new Promise(function(Ft,$t){function Wt(){Mt.emit("plotly_animating"),Dt._lastFrameAt=-1/0,Dt._timeToNext=0,Dt._runningTransitions=0,Dt._currentFrame=null;var Te=function(){Dt._animationRaf=window.requestAnimationFrame(Te),Date.now()-Dt._lastFrameAt>Dt._timeToNext&&function(){Dt._currentFrame&&Dt._currentFrame.onComplete&&Dt._currentFrame.onComplete();var Vt=Dt._currentFrame=Dt._frameQueue.shift();if(Vt){var Zt=Vt.name?Vt.name.toString():null;Mt._fullLayout._currentFrame=Zt,Dt._lastFrameAt=Date.now(),Dt._timeToNext=Vt.frameOpts.duration,a.transition(Mt,Vt.frame.data,Vt.frame.layout,b.coerceTraceIndices(Mt,Vt.frame.traces),Vt.frameOpts,Vt.transitionOpts).then(function(){Vt.onComplete&&Vt.onComplete()}),Mt.emit("plotly_animatingframe",{name:Zt,frame:Vt.frame,animation:{frame:Vt.frameOpts,transition:Vt.transitionOpts}})}else Mt.emit("plotly_animated"),window.cancelAnimationFrame(Dt._animationRaf),Dt._animationRaf=null}()};Te()}var Xt,ae,Qt=0;function de(Te){return Array.isArray(ut)?Qt>=ut.length?Te.transitionOpts=ut[Qt]:Te.transitionOpts=ut[0]:Te.transitionOpts=ut,Qt++,Te}var ye=[],ve=_t==null,ie=Array.isArray(_t);if(ve||ie||!m.isPlainObject(_t)){if(ve||["string","number"].indexOf(typeof _t)!==-1)for(Xt=0;Xt<Dt._frames.length;Xt++)(ae=Dt._frames[Xt])&&(ve||String(ae.group)===String(_t))&&ye.push({type:"byname",name:String(ae.name),data:de({name:ae.name})});else if(ie)for(Xt=0;Xt<_t.length;Xt++){var se=_t[Xt];["number","string"].indexOf(typeof se)!==-1?(se=String(se),ye.push({type:"byname",name:se,data:de({name:se})})):m.isPlainObject(se)&&ye.push({type:"object",data:de(m.extendFlat({},se))})}}else ye.push({type:"object",data:de(m.extendFlat({},_t))});for(Xt=0;Xt<ye.length;Xt++)if((ae=ye[Xt]).type==="byname"&&!Dt._frameHash[ae.data.name])return m.warn('animate failure: frame not found: "'+ae.data.name+'"'),void $t();["next","immediate"].indexOf(St.mode)!==-1&&function(){if(Dt._frameQueue.length!==0){for(;Dt._frameQueue.length;){var Te=Dt._frameQueue.pop();Te.onInterrupt&&Te.onInterrupt()}Mt.emit("plotly_animationinterrupted",[])}}(),St.direction==="reverse"&&ye.reverse();var ke=Mt._fullLayout._currentFrame;if(ke&&St.fromcurrent){var Ae=-1;for(Xt=0;Xt<ye.length;Xt++)if((ae=ye[Xt]).type==="byname"&&ae.name===ke){Ae=Xt;break}if(Ae>0&&Ae<ye.length-1){var Ie=[];for(Xt=0;Xt<ye.length;Xt++)ae=ye[Xt],(ye[Xt].type!=="byname"||Xt>Ae)&&Ie.push(ae);ye=Ie}}ye.length>0?function(Te){if(Te.length!==0){for(var Vt=0;Vt<Te.length;Vt++){var Zt;Zt=Te[Vt].type==="byname"?a.computeFrame(Mt,Te[Vt].name):Te[Vt].data;var Gt=It(Vt),Yt=bt(Vt);Yt.duration=Math.min(Yt.duration,Gt.duration);var ne={frame:Zt,name:Te[Vt].name,frameOpts:Gt,transitionOpts:Yt};Vt===Te.length-1&&(ne.onComplete=zt(Ft,2),ne.onInterrupt=$t),Dt._frameQueue.push(ne)}St.mode==="immediate"&&(Dt._lastFrameAt=-1/0),Dt._animationRaf||Wt()}}(ye):(Mt.emit("plotly_animated"),Ft())})},I.addFrames=function(Mt,_t,St){if(Mt=m.getGraphDiv(Mt),_t==null)return Promise.resolve();if(!m.isPlotDiv(Mt))throw new Error("This element is not a Plotly plot: "+Mt+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Dt,ut,Tt,bt,It=Mt._transitionData._frames,zt=Mt._transitionData._frameHash;if(!Array.isArray(_t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+_t);var Ft=It.length+2*_t.length,$t=[],Wt={};for(Dt=_t.length-1;Dt>=0;Dt--)if(m.isPlainObject(_t[Dt])){var Xt=_t[Dt].name,ae=(zt[Xt]||Wt[Xt]||{}).name,Qt=_t[Dt].name,de=zt[ae]||Wt[ae];ae&&Qt&&typeof Qt=="number"&&de&&A<5&&(A++,m.warn('addFrames: overwriting frame "'+(zt[ae]||Wt[ae]).name+'" with a frame whose name of type "number" also equates to "'+ae+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),A===5&&m.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Wt[Xt]={name:Xt},$t.push({frame:a.supplyFrameDefaults(_t[Dt]),index:St&&St[Dt]!==void 0&&St[Dt]!==null?St[Dt]:Ft+Dt})}$t.sort(function(Te,Vt){return Te.index>Vt.index?-1:Te.index<Vt.index?1:0});var ye=[],ve=[],ie=It.length;for(Dt=$t.length-1;Dt>=0;Dt--){if(typeof(ut=$t[Dt].frame).name=="number"&&m.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!ut.name)for(;zt[ut.name="frame "+Mt._transitionData._counter++];);if(zt[ut.name]){for(Tt=0;Tt<It.length&&(It[Tt]||{}).name!==ut.name;Tt++);ye.push({type:"replace",index:Tt,value:ut}),ve.unshift({type:"replace",index:Tt,value:It[Tt]})}else bt=Math.max(0,Math.min($t[Dt].index,ie)),ye.push({type:"insert",index:bt,value:ut}),ve.unshift({type:"delete",index:bt}),ie++}var se=a.modifyFrames,ke=a.modifyFrames,Ae=[Mt,ve],Ie=[Mt,ye];return e&&e.add(Mt,se,Ae,ke,Ie),a.modifyFrames(Mt,ye)},I.deleteFrames=function(Mt,_t){if(Mt=m.getGraphDiv(Mt),!m.isPlotDiv(Mt))throw new Error("This element is not a Plotly plot: "+Mt);var St,Dt,ut=Mt._transitionData._frames,Tt=[],bt=[];if(!_t)for(_t=[],St=0;St<ut.length;St++)_t.push(St);for((_t=_t.slice()).sort(),St=_t.length-1;St>=0;St--)Dt=_t[St],Tt.push({type:"delete",index:Dt}),bt.unshift({type:"insert",index:Dt,value:ut[Dt]});var It=a.modifyFrames,zt=a.modifyFrames,Ft=[Mt,bt],$t=[Mt,Tt];return e&&e.add(Mt,It,Ft,zt,$t),a.modifyFrames(Mt,Tt)},I.addTraces=function Mt(_t,St,Dt){_t=m.getGraphDiv(_t);var ut,Tt,bt=[],It=I.deleteTraces,zt=Mt,Ft=[_t,bt],$t=[_t,St];for(function(Wt,Xt,ae){var Qt,de;if(!Array.isArray(Wt.data))throw new Error("gd.data must be an array.");if(Xt===void 0)throw new Error("traces must be defined.");for(Array.isArray(Xt)||(Xt=[Xt]),Qt=0;Qt<Xt.length;Qt++)if(typeof(de=Xt[Qt])!="object"||Array.isArray(de)||de===null)throw new Error("all values in traces array must be non-array objects");if(ae===void 0||Array.isArray(ae)||(ae=[ae]),ae!==void 0&&ae.length!==Xt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(_t,St,Dt),Array.isArray(St)||(St=[St]),St=St.map(function(Wt){return m.extendFlat({},Wt)}),b.cleanData(St),ut=0;ut<St.length;ut++)_t.data.push(St[ut]);for(ut=0;ut<St.length;ut++)bt.push(-St.length+ut);if(Dt===void 0)return Tt=I.redraw(_t),e.add(_t,It,Ft,zt,$t),Tt;Array.isArray(Dt)||(Dt=[Dt]);try{U(_t,bt,Dt)}catch(Wt){throw _t.data.splice(_t.data.length-St.length,St.length),Wt}return e.startSequence(_t),e.add(_t,It,Ft,zt,$t),Tt=I.moveTraces(_t,bt,Dt),e.stopSequence(_t),Tt},I.deleteTraces=function Mt(_t,St){_t=m.getGraphDiv(_t);var Dt,ut,Tt=[],bt=I.addTraces,It=Mt,zt=[_t,Tt,St],Ft=[_t,St];if(St===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(St)||(St=[St]),P(_t,St,"indices"),(St=O(St,_t.data.length-1)).sort(m.sorterDes),Dt=0;Dt<St.length;Dt+=1)ut=_t.data.splice(St[Dt],1)[0],Tt.push(ut);var $t=I.redraw(_t);return e.add(_t,bt,zt,It,Ft),$t},I.extendTraces=function Mt(_t,St,Dt,ut){var Tt=R(_t=m.getGraphDiv(_t),St,Dt,ut,function(zt,Ft,$t){var Wt,Xt;if(m.isTypedArray(zt))if($t<0){var ae=new zt.constructor(0),Qt=j(zt,Ft);$t<0?(Wt=Qt,Xt=ae):(Wt=ae,Xt=Qt)}else if(Wt=new zt.constructor($t),Xt=new zt.constructor(zt.length+Ft.length-$t),$t===Ft.length)Wt.set(Ft),Xt.set(zt);else if($t<Ft.length){var de=Ft.length-$t;Wt.set(Ft.subarray(de)),Xt.set(zt),Xt.set(Ft.subarray(0,de),zt.length)}else{var ye=$t-Ft.length,ve=zt.length-ye;Wt.set(zt.subarray(ve)),Wt.set(Ft,ye),Xt.set(zt.subarray(0,ve))}else Wt=zt.concat(Ft),Xt=$t>=0&&$t<Wt.length?Wt.splice(0,Wt.length-$t):[];return[Wt,Xt]}),bt=I.redraw(_t),It=[_t,Tt.update,Dt,Tt.maxPoints];return e.add(_t,I.prependTraces,It,Mt,arguments),bt},I.moveTraces=function Mt(_t,St,Dt){var ut,Tt=[],bt=[],It=Mt,zt=Mt,Ft=[_t=m.getGraphDiv(_t),Dt,St],$t=[_t,St,Dt];if(U(_t,St,Dt),St=Array.isArray(St)?St:[St],Dt===void 0)for(Dt=[],ut=0;ut<St.length;ut++)Dt.push(-St.length+ut);for(Dt=Array.isArray(Dt)?Dt:[Dt],St=O(St,_t.data.length-1),Dt=O(Dt,_t.data.length-1),ut=0;ut<_t.data.length;ut++)St.indexOf(ut)===-1&&Tt.push(_t.data[ut]);for(ut=0;ut<St.length;ut++)bt.push({newIndex:Dt[ut],trace:_t.data[St[ut]]});for(bt.sort(function(Xt,ae){return Xt.newIndex-ae.newIndex}),ut=0;ut<bt.length;ut+=1)Tt.splice(bt[ut].newIndex,0,bt[ut].trace);_t.data=Tt;var Wt=I.redraw(_t);return e.add(_t,It,Ft,zt,$t),Wt},I.prependTraces=function Mt(_t,St,Dt,ut){var Tt=R(_t=m.getGraphDiv(_t),St,Dt,ut,function(zt,Ft,$t){var Wt,Xt;if(m.isTypedArray(zt))if($t<=0){var ae=new zt.constructor(0),Qt=j(Ft,zt);$t<0?(Wt=Qt,Xt=ae):(Wt=ae,Xt=Qt)}else if(Wt=new zt.constructor($t),Xt=new zt.constructor(zt.length+Ft.length-$t),$t===Ft.length)Wt.set(Ft),Xt.set(zt);else if($t<Ft.length){var de=Ft.length-$t;Wt.set(Ft.subarray(0,de)),Xt.set(Ft.subarray(de)),Xt.set(zt,de)}else{var ye=$t-Ft.length;Wt.set(Ft),Wt.set(zt.subarray(0,ye),Ft.length),Xt.set(zt.subarray(ye))}else Wt=Ft.concat(zt),Xt=$t>=0&&$t<Wt.length?Wt.splice($t,Wt.length):[];return[Wt,Xt]}),bt=I.redraw(_t),It=[_t,Tt.update,Dt,Tt.maxPoints];return e.add(_t,I.extendTraces,It,Mt,arguments),bt},I.newPlot=function(Mt,_t,St,Dt){return Mt=m.getGraphDiv(Mt),a.cleanPlot([],{},Mt._fullData||[],Mt._fullLayout||{}),a.purge(Mt),I._doPlot(Mt,_t,St,Dt)},I._doPlot=function(Mt,_t,St,Dt){var ut;if(Mt=m.getGraphDiv(Mt),s.init(Mt),m.isPlainObject(_t)){var Tt=_t;_t=Tt.data,St=Tt.layout,Dt=Tt.config,ut=Tt.frames}if(s.triggerHandler(Mt,"plotly_beforeplot",[_t,St,Dt])===!1)return Promise.reject();_t||St||m.isPlotDiv(Mt)||m.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Mt),S(Mt,Dt),St||(St={}),T.select(Mt).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(Mt._promises)||(Mt._promises=[]);var bt=(Mt.data||[]).length===0&&Array.isArray(_t);Array.isArray(_t)&&(b.cleanData(_t),bt?Mt.data=_t:Mt.data.push.apply(Mt.data,_t),Mt.empty=!1),Mt.layout&&!bt||(Mt.layout=b.cleanLayout(St)),a.supplyDefaults(Mt);var It=Mt._fullLayout,zt=It._has("cartesian");It._replotting=!0,(bt||It._shouldCreateBgLayer)&&(function(ve){var ie=T.select(ve),se=ve._fullLayout;if(se._calcInverseTransform=Lt,se._calcInverseTransform(ve),se._container=ie.selectAll(".plot-container").data([0]),se._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),se._paperdiv=se._container.selectAll(".svg-container").data([0]),se._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),se._glcontainer=se._paperdiv.selectAll(".gl-container").data([{}]),se._glcontainer.enter().append("div").classed("gl-container",!0),se._paperdiv.selectAll(".main-svg").remove(),se._paperdiv.select(".modebar-container").remove(),se._paper=se._paperdiv.insert("svg",":first-child").classed("main-svg",!0),se._toppaper=se._paperdiv.append("svg").classed("main-svg",!0),se._modebardiv=se._paperdiv.append("div"),delete se._modeBar,se._hoverpaper=se._paperdiv.append("svg").classed("main-svg",!0),!se._uid){var ke={};T.selectAll("defs").each(function(){this.id&&(ke[this.id.split("-")[1]]=1)}),se._uid=m.randstr(ke)}se._paperdiv.selectAll(".main-svg").attr(w.svgAttrs),se._defs=se._paper.append("defs").attr("id","defs-"+se._uid),se._clips=se._defs.append("g").classed("clips",!0),se._topdefs=se._toppaper.append("defs").attr("id","topdefs-"+se._uid),se._topclips=se._topdefs.append("g").classed("clips",!0),se._bgLayer=se._paper.append("g").classed("bglayer",!0),se._draggers=se._paper.append("g").classed("draglayer",!0);var Ae=se._paper.append("g").classed("layer-below",!0);se._imageLowerLayer=Ae.append("g").classed("imagelayer",!0),se._shapeLowerLayer=Ae.append("g").classed("shapelayer",!0),se._cartesianlayer=se._paper.append("g").classed("cartesianlayer",!0),se._polarlayer=se._paper.append("g").classed("polarlayer",!0),se._smithlayer=se._paper.append("g").classed("smithlayer",!0),se._ternarylayer=se._paper.append("g").classed("ternarylayer",!0),se._geolayer=se._paper.append("g").classed("geolayer",!0),se._funnelarealayer=se._paper.append("g").classed("funnelarealayer",!0),se._pielayer=se._paper.append("g").classed("pielayer",!0),se._iciclelayer=se._paper.append("g").classed("iciclelayer",!0),se._treemaplayer=se._paper.append("g").classed("treemaplayer",!0),se._sunburstlayer=se._paper.append("g").classed("sunburstlayer",!0),se._indicatorlayer=se._toppaper.append("g").classed("indicatorlayer",!0),se._glimages=se._paper.append("g").classed("glimages",!0);var Ie=se._toppaper.append("g").classed("layer-above",!0);se._imageUpperLayer=Ie.append("g").classed("imagelayer",!0),se._shapeUpperLayer=Ie.append("g").classed("shapelayer",!0),se._selectionLayer=se._toppaper.append("g").classed("selectionlayer",!0),se._infolayer=se._toppaper.append("g").classed("infolayer",!0),se._menulayer=se._toppaper.append("g").classed("menulayer",!0),se._zoomlayer=se._toppaper.append("g").classed("zoomlayer",!0),se._hoverlayer=se._hoverpaper.append("g").classed("hoverlayer",!0),se._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ve.emit("plotly_framework")}(Mt),It._shouldCreateBgLayer&&delete It._shouldCreateBgLayer),u.initGradients(Mt),u.initPatterns(Mt),bt&&i.saveShowSpikeInitial(Mt);var Ft=!Mt.calcdata||Mt.calcdata.length!==(Mt._fullData||[]).length;Ft&&a.doCalcdata(Mt);for(var $t=0;$t<Mt.calcdata.length;$t++)Mt.calcdata[$t][0].trace=Mt._fullData[$t];Mt._context.responsive?Mt._responsiveChartHandler||(Mt._responsiveChartHandler=function(){m.isHidden(Mt)||a.resize(Mt)},window.addEventListener("resize",Mt._responsiveChartHandler)):m.clearResponsive(Mt);var Wt=m.extendFlat({},It._size),Xt=0;function ae(){if(a.clearAutoMarginIds(Mt),x.drawMarginPushers(Mt),i.allowAutoMargin(Mt),Mt._fullLayout.title.text&&Mt._fullLayout.title.automargin&&a.allowAutoMargin(Mt,"title.automargin"),It._has("pie"))for(var ve=Mt._fullData,ie=0;ie<ve.length;ie++){var se=ve[ie];se.type==="pie"&&se.automargin&&a.allowAutoMargin(Mt,"pie."+se.uid+".automargin")}return a.doAutoMargin(Mt),a.previousPromises(Mt)}function Qt(){Mt._transitioning||(x.doAutoRangeAndConstraints(Mt),bt&&i.saveRangeInitial(Mt),t.getComponentMethod("rangeslider","calcAutorange")(Mt))}var de=[a.previousPromises,function(){if(ut)return I.addFrames(Mt,ut)},function ve(){for(var ie=It._basePlotModules,se=0;se<ie.length;se++)ie[se].drawFramework&&ie[se].drawFramework(Mt);!It._glcanvas&&It._has("gl")&&(It._glcanvas=It._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Te){return Te.key}),It._glcanvas.enter().append("canvas").attr("class",function(Te){return"gl-canvas gl-canvas-"+Te.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var ke=Mt._context.plotGlPixelRatio;if(It._glcanvas){It._glcanvas.attr("width",It.width*ke).attr("height",It.height*ke).style("width",It.width+"px").style("height",It.height+"px");var Ae=It._glcanvas.data()[0].regl;if(Ae&&(Math.floor(It.width*ke)!==Ae._gl.drawingBufferWidth||Math.floor(It.height*ke)!==Ae._gl.drawingBufferHeight)){var Ie="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Xt)return m.log(Ie+" Clearing graph and plotting again."),a.cleanPlot([],{},Mt._fullData,It),a.supplyDefaults(Mt),It=Mt._fullLayout,a.doCalcdata(Mt),Xt++,ve();m.error(Ie)}}return It.modebar.orientation==="h"?It._modebardiv.style("height",null).style("width","100%"):It._modebardiv.style("width",null).style("height",It.height+"px"),a.previousPromises(Mt)},ae,function(){if(a.didMarginChange(Wt,It._size))return m.syncOrAsync([ae,x.layoutStyles],Mt)}];zt&&de.push(function(){if(Ft)return m.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),Qt],Mt);Qt()}),de.push(x.layoutStyles),zt&&de.push(function(){return i.draw(Mt,bt?"":"redraw")},function(ve){ve._fullLayout._insideTickLabelsAutorange&&X(ve,ve._fullLayout._insideTickLabelsAutorange).then(function(){ve._fullLayout._insideTickLabelsAutorange=void 0})}),de.push(x.drawData,x.finalDraw,d,a.addLinks,a.rehover,a.redrag,a.reselect,a.doAutoMargin,function(ve){ve._fullLayout._insideTickLabelsAutorange&&bt&&i.saveRangeInitial(ve,!0)},a.previousPromises);var ye=m.syncOrAsync(de,Mt);return ye&&ye.then||(ye=Promise.resolve()),ye.then(function(){return M(Mt),Mt})},I.purge=function(Mt){var _t=(Mt=m.getGraphDiv(Mt))._fullLayout||{},St=Mt._fullData||[];return a.cleanPlot([],{},St,_t),a.purge(Mt),s.purge(Mt),_t._container&&_t._container.remove(),delete Mt._context,Mt},I.react=function(Mt,_t,St,Dt){var ut,Tt;Mt=m.getGraphDiv(Mt),b.clearPromiseQueue(Mt);var bt=Mt._fullData,It=Mt._fullLayout;if(m.isPlotDiv(Mt)&&bt&&It){if(m.isPlainObject(_t)){var zt=_t;_t=zt.data,St=zt.layout,Dt=zt.config,ut=zt.frames}var Ft=!1;if(Dt){var $t=m.extendDeep({},Mt._context);Mt._context=void 0,S(Mt,Dt),Ft=ht($t,Mt._context)}Mt.data=_t||[],b.cleanData(Mt.data),Mt.layout=St||{},b.cleanLayout(Mt.layout),function(re,Pt,Nt,ee){var te,ge,pe,me,ce,we,ue,he,be,Pe,De=ee._preGUI,Ue=[],tr={},Ge={};for(te in De){if(ce=mt(te,kt)){if(be=ce.head,Pe=ce.tail,ge=ce.attr||be+".uirevision",(me=(pe=h(ee,ge).get())&&Ot(ge,Pt))&&me===pe){if((we=De[te])===null&&(we=void 0),st(he=(ue=h(Pt,te)).get(),we)){he===void 0&&Pe==="autorange"&&Ue.push(be),ue.set(z(h(ee,te).get()));continue}if(Pe==="autorange"||Pe.substr(0,6)==="range["){var Ze=De[be+".range[0]"],We=De[be+".range[1]"],pr=De[be+".autorange"];if(pr||pr===null&&Ze===null&&We===null){if(!(be in tr)){var xr=h(Pt,be).get();tr[be]=xr&&(xr.autorange||xr.autorange!==!1&&(!xr.range||xr.range.length!==2))}if(tr[be]){ue.set(z(h(ee,te).get()));continue}}}}}else m.warn("unrecognized GUI edit: "+te);delete De[te],ce&&ce.tail.substr(0,6)==="range["&&(Ge[ce.head]=1)}for(var sr=0;sr<Ue.length;sr++){var $e=Ue[sr];if(Ge[$e]){var ir=h(Pt,$e).get();ir&&delete ir.autorange}}var Ke=ee._tracePreGUI;for(var ar in Ke){var fr,mr=Ke[ar],Cr=null;for(te in mr){if(!Cr){var Er=vt(ar,Nt);if(Er<0){delete Ke[ar];break}var _r=xt(ar,re,(fr=Nt[Er]._fullInput).index);if(_r<0){delete Ke[ar];break}Cr=re[_r]}if(ce=mt(te,yt)){if(ce.attr?me=(pe=h(ee,ce.attr).get())&&Ot(ce.attr,Pt):(pe=fr.uirevision,(me=Cr.uirevision)===void 0&&(me=Pt.uirevision)),me&&me===pe&&((we=mr[te])===null&&(we=void 0),st(he=(ue=h(Cr,te)).get(),we))){ue.set(z(h(fr,te).get()));continue}}else m.warn("unrecognized GUI edit: "+te+" in trace uid "+ar);delete mr[te]}}}(Mt.data,Mt.layout,bt,It),a.supplyDefaults(Mt,{skipUpdateCalc:!0});var Wt=Mt._fullData,Xt=Mt._fullLayout,ae=Xt.datarevision===void 0,Qt=Xt.transition,de=function(re,Pt,Nt,ee,te){var ge=_.layoutFlags();return ge.arrays={},ge.rangesAltered={},ge.nChanges=0,ge.nChangesAnim=0,at(Pt,Nt,[],{getValObject:function(pe){return n.getLayoutValObject(Nt,pe)},flags:ge,immutable:ee,transition:te,gd:re}),(ge.plot||ge.calc)&&(ge.layoutReplot=!0),te&&ge.nChanges&&ge.nChangesAnim&&(ge.anim=ge.nChanges===ge.nChangesAnim?"all":"some"),ge}(Mt,It,Xt,ae,Qt),ye=de.newDataRevision,ve=function(re,Pt,Nt,ee,te,ge){var pe=Pt.length===Nt.length;if(!te&&!pe)return{fullReplot:!0,calc:!0};var me,ce,we=_.traceFlags();we.arrays={},we.nChanges=0,we.nChangesAnim=0;var ue={getValObject:function(be){var Pe=n.getTraceValObject(ce,be);return!ce._module.animatable&&Pe.anim&&(Pe.anim=!1),Pe},flags:we,immutable:ee,transition:te,newDataRevision:ge,gd:re},he={};for(me=0;me<Pt.length;me++)if(Nt[me]){if(ce=Nt[me]._fullInput,a.hasMakesDataTransform(ce)&&(ce=Nt[me]),he[ce.uid])continue;he[ce.uid]=1,at(Pt[me]._fullInput,ce,[],ue)}return(we.calc||we.plot)&&(we.fullReplot=!0),te&&we.nChanges&&we.nChangesAnim&&(we.anim=we.nChanges===we.nChangesAnim&&pe?"all":"some"),we}(Mt,bt,Wt,ae,Qt,ye);if(ct(Mt)&&(de.layoutReplot=!0),ve.calc||de.calc){Mt.calcdata=void 0;for(var ie=Object.getOwnPropertyNames(Xt),se=0;se<ie.length;se++){var ke=ie[se],Ae=ke.substring(0,5);if(Ae==="xaxis"||Ae==="yaxis"){var Ie=Xt[ke]._emptyCategories;Ie&&Ie()}}}else a.supplyDefaultsUpdateCalc(Mt.calcdata,Wt);var Te=[];if(ut&&(Mt._transitionData={},a.createTransitionData(Mt),Te.push(function(){return I.addFrames(Mt,ut)})),Xt.transition&&!Ft&&(ve.anim||de.anim))de.ticks&&Te.push(x.doTicksRelayout),a.doCalcdata(Mt),x.doAutoRangeAndConstraints(Mt),Te.push(function(){return a.transitionFromReact(Mt,ve,de,It)});else if(ve.fullReplot||de.layoutReplot||Ft)Mt._fullLayout._skipDefaults=!0,Te.push(I._doPlot);else{for(var Vt in de.arrays){var Zt=de.arrays[Vt];if(Zt.length){var Gt=t.getComponentMethod(Vt,"drawOne");if(Gt!==m.noop)for(var Yt=0;Yt<Zt.length;Yt++)Gt(Mt,Zt[Yt]);else{var ne=t.getComponentMethod(Vt,"draw");if(ne===m.noop)throw new Error("cannot draw components: "+Vt);ne(Mt)}}}Te.push(a.previousPromises),ve.style&&Te.push(x.doTraceStyle),(ve.colorbars||de.colorbars)&&Te.push(x.doColorBars),de.legend&&Te.push(x.doLegend),de.layoutstyle&&Te.push(x.layoutStyles),de.axrange&&Z(Te),de.ticks&&Te.push(x.doTicksRelayout),de.modebar&&Te.push(x.doModeBar),de.camera&&Te.push(x.doCamera),Te.push(M)}Te.push(a.rehover,a.redrag,a.reselect),(Tt=m.syncOrAsync(Te,Mt))&&Tt.then||(Tt=Promise.resolve(Mt))}else Tt=I.newPlot(Mt,_t,St,Dt);return Tt.then(function(){return Mt.emit("plotly_react",{data:_t,layout:St}),Mt})},I.redraw=function(Mt){if(Mt=m.getGraphDiv(Mt),!m.isPlotDiv(Mt))throw new Error("This element is not a Plotly plot: "+Mt);return b.cleanData(Mt.data),b.cleanLayout(Mt.layout),Mt.calcdata=void 0,I._doPlot(Mt).then(function(){return Mt.emit("plotly_redraw"),Mt})},I.relayout=X,I.restyle=B,I.setPlotConfig=function(Mt){return m.extendFlat(p,Mt)},I.update=pt,I._guiRelayout=gt(X),I._guiRestyle=gt(B),I._guiUpdate=gt(pt),I._storeDirectGUIEdit=function(Mt,_t,St){for(var Dt in St)V(Dt,h(Mt,Dt).get(),St[Dt],_t)}},72075:function(W){var I={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},o={};(function T(k,r){for(var m in k){var h=k[m];h.valType?r[m]=h.dflt:(r[m]||(r[m]={}),T(h,r[m]))}})(I,o),W.exports={configAttributes:I,dfltConfig:o}},86281:function(W,I,o){var T=o(73972),k=o(71828),r=o(9012),m=o(10820),h=o(31391),s=o(85594),e=o(72075).configAttributes,t=o(30962),n=k.extendDeepAll,a=k.isPlainObject,i=k.isArrayOrTypedArray,c=k.nestedProperty,l=k.valObjectMeta,u="_isSubplotObj",f="_isLinkedToArray",d="_deprecated",w=[u,f,"_arrayAttrRegexps",d];function v(g,A,M){if(!g)return!1;if(g._isLinkedToArray){if(p(A[M]))M++;else if(M<A.length)return!1}for(;M<A.length;M++){var L=g[A[M]];if(!a(L)||(g=L,M===A.length-1))break;if(g._isLinkedToArray){if(!p(A[++M]))return!1}else if(g.valType==="info_array"){var E=A[++M];if(!p(E))return!1;var S=g.items;if(Array.isArray(S)){if(E>=S.length)return!1;if(g.dimensions===2){if(M++,A.length===M)return g;var O=A[M];if(!p(O))return!1;g=S[E][O]}else g=S[E]}else g=S}}return g}function p(g){return g===Math.round(g)&&g>=0}function y(){var g,A,M={};for(g in n(M,m),T.subplotsRegistry)if((A=T.subplotsRegistry[g]).layoutAttributes)if(Array.isArray(A.attr))for(var L=0;L<A.attr.length;L++)x(M,A,A.attr[L]);else x(M,A,A.attr==="subplot"?A.name:A.attr);for(g in T.componentsRegistry){var E=(A=T.componentsRegistry[g]).schema;if(E&&(E.subplots||E.layout)){var S=E.subplots;if(S&&S.xaxis&&!S.yaxis)for(var O in S.xaxis)delete M.yaxis[O];delete M.xaxis.shift,delete M.xaxis.autoshift}else A.name==="colorscale"?n(M,A.layoutAttributes):A.layoutAttributes&&_(M,A.layoutAttributes,A.name)}return{layoutAttributes:b(M)}}function b(g){return function(A){I.crawl(A,function(M,L,E){I.isValObject(M)?M.arrayOk!==!0&&M.valType!=="data_array"||(E[L+"src"]={valType:"string",editType:"none"}):a(M)&&(M.role="object")})}(g),function(A){I.crawl(A,function(M,L,E){if(M){var S=M[f];S&&(delete M[f],E[L]={items:{}},E[L].items[S]=M,E[L].role="object")}})}(g),function(A){(function M(L){for(var E in L)if(a(L[E]))M(L[E]);else if(Array.isArray(L[E]))for(var S=0;S<L[E].length;S++)M(L[E][S]);else L[E]instanceof RegExp&&(L[E]=L[E].toString())})(A)}(g),g}function x(g,A,M){var L=c(g,M),E=n({},A.layoutAttributes);E[u]=!0,L.set(E)}function _(g,A,M){var L=c(g,M);L.set(n(L.get()||{},A))}I.IS_SUBPLOT_OBJ=u,I.IS_LINKED_TO_ARRAY=f,I.DEPRECATED=d,I.UNDERSCORE_ATTRS=w,I.get=function(){var g={};T.allTypes.forEach(function(L){g[L]=function(E){var S,O;O=(S=T.modules[E]._module).basePlotModule;var P={type:null},U=n({},r),R=n({},S.attributes);I.crawl(R,function(z,G,V,et,J){c(U,J).set(void 0),z===void 0&&c(R,J).set(void 0)}),n(P,U),T.traceIs(E,"noOpacity")&&delete P.opacity,T.traceIs(E,"showLegend")||(delete P.showlegend,delete P.legendgroup),T.traceIs(E,"noHover")&&(delete P.hoverinfo,delete P.hoverlabel),S.selectPoints||delete P.selectedpoints,n(P,R),O.attributes&&n(P,O.attributes),P.type=E;var j={meta:S.meta||{},categories:S.categories||{},animatable:Boolean(S.animatable),type:E,attributes:b(P)};if(S.layoutAttributes){var B={};n(B,S.layoutAttributes),j.layoutAttributes=b(B)}return S.animatable||I.crawl(j,function(z){I.isValObject(z)&&"anim"in z&&delete z.anim}),j}(L)});var A,M={};return Object.keys(T.transformsRegistry).forEach(function(L){M[L]=function(E){var S=T.transformsRegistry[E],O=n({},S.attributes);return Object.keys(T.componentsRegistry).forEach(function(P){var U=T.componentsRegistry[P];U.schema&&U.schema.transforms&&U.schema.transforms[E]&&Object.keys(U.schema.transforms[E]).forEach(function(R){_(O,U.schema.transforms[E][R],R)})}),{attributes:b(O)}}(L)}),{defs:{valObjects:l,metaKeys:w.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:g,layout:y(),transforms:M,frames:(A={frames:n({},h)},b(A),A.frames),animation:b(s),config:b(e)}},I.crawl=function(g,A,M,L){var E=M||0;L=L||"",Object.keys(g).forEach(function(S){var O=g[S];if(w.indexOf(S)===-1){var P=(L?L+".":"")+S;A(O,S,g,E,P),I.isValObject(O)||a(O)&&S!=="impliedEdits"&&I.crawl(O,A,E+1,P)}})},I.isValObject=function(g){return g&&g.valType!==void 0},I.findArrayAttributes=function(g){var A,M,L=[],E=[],S=[];function O(z,G,V,et){E=E.slice(0,et).concat([G]),S=S.slice(0,et).concat([z&&z._isLinkedToArray]),z&&(z.valType==="data_array"||z.arrayOk===!0)&&(E[et-1]!=="colorbar"||G!=="ticktext"&&G!=="tickvals")&&P(A,0,"")}function P(z,G,V){var et=z[E[G]],J=V+E[G];if(G===E.length-1)i(et)&&L.push(M+J);else if(S[G]){if(Array.isArray(et))for(var X=0;X<et.length;X++)a(et[X])&&P(et[X],G+1,J+"["+X+"].")}else a(et)&&P(et,G+1,J+".")}A=g,M="",I.crawl(r,O),g._module&&g._module.attributes&&I.crawl(g._module.attributes,O);var U=g.transforms;if(U)for(var R=0;R<U.length;R++){var j=U[R],B=j._module;B&&(M="transforms["+R+"].",A=j,I.crawl(B.attributes,O))}return L},I.getTraceValObject=function(g,A){var M,L,E=A[0],S=1;if(E==="transforms"){if(A.length===1)return r.transforms;var O=g.transforms;if(!Array.isArray(O)||!O.length)return!1;var P=A[1];if(!p(P)||P>=O.length)return!1;L=(M=(T.transformsRegistry[O[P].type]||{}).attributes)&&M[A[2]],S=3}else{var U=g._module;if(U||(U=(T.modules[g.type||r.type.dflt]||{})._module),!U)return!1;if(!(L=(M=U.attributes)&&M[E])){var R=U.basePlotModule;R&&R.attributes&&(L=R.attributes[E])}L||(L=r[E])}return v(L,A,S)},I.getLayoutValObject=function(g,A){var M=function(L,E){var S,O,P,U,R=L._basePlotModules;if(R){var j;for(S=0;S<R.length;S++){if((P=R[S]).attrRegex&&P.attrRegex.test(E)){if(P.layoutAttrOverrides)return P.layoutAttrOverrides;!j&&P.layoutAttributes&&(j=P.layoutAttributes)}var B=P.baseLayoutAttrOverrides;if(B&&E in B)return B[E]}if(j)return j}var z=L._modules;if(z){for(S=0;S<z.length;S++)if((U=z[S].layoutAttributes)&&E in U)return U[E]}for(O in T.componentsRegistry){if((P=T.componentsRegistry[O]).name==="colorscale"&&E.indexOf("coloraxis")===0)return P.layoutAttributes[E];if(!P.schema&&E===P.name)return P.layoutAttributes}return E in m&&m[E]}(g,A[0]);return v(M,A,1)}},44467:function(W,I,o){var T=o(71828),k=o(9012),r="templateitemname",m={name:{valType:"string",editType:"none"}};function h(e){return e&&typeof e=="string"}function s(e){var t=e.length-1;return e.charAt(t)!=="s"&&T.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}m[r]={valType:"string",editType:"calc"},I.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=m.name,t[r]=m[r],t},I.traceTemplater=function(e){var t,n,a={};for(t in e)n=e[t],Array.isArray(n)&&n.length&&(a[t]=0);return{newTrace:function(i){var c={type:t=T.coerce(i,{},k,"type"),_template:null};if(t in a){n=e[t];var l=a[t]%n.length;a[t]++,c._template=n[l]}return c}}},I.newContainer=function(e,t,n){var a=e._template,i=a&&(a[t]||n&&a[n]);return T.isPlainObject(i)||(i=null),e[t]={_template:i}},I.arrayTemplater=function(e,t,n){var a=e._template,i=a&&a[s(t)],c=a&&a[t];Array.isArray(c)&&c.length||(c=[]);var l={};return{newItem:function(u){var f={name:u.name,_input:u},d=f[r]=u[r];if(!h(d))return f._template=i,f;for(var w=0;w<c.length;w++){var v=c[w];if(v.name===d)return l[d]=1,f._template=v,f}return f[n]=u[n]||!1,f._template=!1,f},defaultItems:function(){for(var u=[],f=0;f<c.length;f++){var d=c[f],w=d.name;if(h(w)&&!l[w]){var v={_template:d,name:w,_input:{_templateitemname:w}};v[r]=d[r],u.push(v),l[w]=1}}return u}}},I.arrayDefaultKey=s,I.arrayEditor=function(e,t,n){var a=(T.nestedProperty(e,t).get()||[]).length,i=n._index,c=i>=a&&(n._input||{})._templateitemname;c&&(i=a);var l,u=t+"["+i+"]";function f(){l={},c&&(l[u]={},l[u][r]=c)}function d(v,p){c?T.nestedProperty(l[u],v).set(p):l[u+"."+v]=p}function w(){var v=l;return f(),v}return f(),{modifyBase:function(v,p){l[v]=p},modifyItem:d,getUpdateObj:w,applyUpdate:function(v,p){v&&d(v,p);var y=w();for(var b in y)T.nestedProperty(e,b).set(y[b])}}}},61549:function(W,I,o){var T=o(39898),k=o(73972),r=o(74875),m=o(71828),h=o(63893),s=o(33306),e=o(7901),t=o(91424),n=o(92998),a=o(64168),i=o(89298),c=o(18783),l=o(99082),u=l.enforce,f=l.clean,d=o(71739).doAutoRange,w="start";function v(_,g,A){for(var M=0;M<A.length;M++){var L=A[M][0],E=A[M][1];if(!(L[0]>=_[1]||L[1]<=_[0])&&E[0]<g[1]&&E[1]>g[0])return!0}return!1}function p(_){var g,A,M,L,E,S,O=_._fullLayout,P=O._size,U=P.p,R=i.list(_,"",!0);if(O._paperdiv.style({width:_._context.responsive&&O.autosize&&!_._context._hasZeroWidth&&!_.layout.width?"100%":O.width+"px",height:_._context.responsive&&O.autosize&&!_._context._hasZeroHeight&&!_.layout.height?"100%":O.height+"px"}).selectAll(".main-svg").call(t.setSize,O.width,O.height),_._context.setBackground(_,O.paper_bgcolor),I.drawMainTitle(_),a.manage(_),!O._has("cartesian"))return r.previousPromises(_);function j(Ft,$t,Wt){var Xt=Ft._lw/2;return Ft._id.charAt(0)==="x"?$t?Wt==="top"?$t._offset-U-Xt:$t._offset+$t._length+U+Xt:P.t+P.h*(1-(Ft.position||0))+Xt%1:$t?Wt==="right"?$t._offset+$t._length+U+Xt:$t._offset-U-Xt:P.l+P.w*(Ft.position||0)+Xt%1}for(g=0;g<R.length;g++){var B=(L=R[g])._anchorAxis;L._linepositions={},L._lw=t.crispRound(_,L.linewidth,1),L._mainLinePosition=j(L,B,L.side),L._mainMirrorPosition=L.mirror&&B?j(L,B,c.OPPOSITE_SIDE[L.side]):null}var z=[],G=[],V=[],et=e.opacity(O.paper_bgcolor)===1&&e.opacity(O.plot_bgcolor)===1&&O.paper_bgcolor===O.plot_bgcolor;for(A in O._plots)if((M=O._plots[A]).mainplot)M.bg&&M.bg.remove(),M.bg=void 0;else{var J=M.xaxis.domain,X=M.yaxis.domain,Y=M.plotgroup;if(v(J,X,V)){var Z=Y.node(),tt=M.bg=m.ensureSingle(Y,"rect","bg");Z.insertBefore(tt.node(),Z.childNodes[0]),G.push(A)}else Y.select("rect.bg").remove(),V.push([J,X]),et||(z.push(A),G.push(A))}var rt,nt,ot,ct,pt,gt,kt,yt,mt,Ot,vt,xt,st,at=O._bgLayer.selectAll(".bg").data(z);for(at.enter().append("rect").classed("bg",!0),at.exit().remove(),at.each(function(Ft){O._plots[Ft].bg=T.select(this)}),g=0;g<G.length;g++)M=O._plots[G[g]],E=M.xaxis,S=M.yaxis,M.bg&&E._offset!==void 0&&S._offset!==void 0&&M.bg.call(t.setRect,E._offset-U,S._offset-U,E._length+2*U,S._length+2*U).call(e.fill,O.plot_bgcolor).style("stroke-width",0);if(!O._hasOnlyLargeSploms)for(A in O._plots){M=O._plots[A],E=M.xaxis,S=M.yaxis;var ht,Lt,Mt=M.clipId="clip"+O._uid+A+"plot",_t=m.ensureSingleById(O._clips,"clipPath",Mt,function(Ft){Ft.classed("plotclip",!0).append("rect")});M.clipRect=_t.select("rect").attr({width:E._length,height:S._length}),t.setTranslate(M.plot,E._offset,S._offset),M._hasClipOnAxisFalse?(ht=null,Lt=Mt):(ht=Mt,Lt=null),t.setClipUrl(M.plot,ht,_),M.layerClipId=Lt}function St(Ft){return"M"+rt+","+Ft+"H"+nt}function Dt(Ft){return"M"+E._offset+","+Ft+"h"+E._length}function ut(Ft){return"M"+Ft+","+yt+"V"+kt}function Tt(Ft){return S._shift!==void 0&&(Ft+=S._shift),"M"+Ft+","+S._offset+"v"+S._length}function bt(Ft,$t,Wt){if(!Ft.showline||A!==Ft._mainSubplot)return"";if(!Ft._anchorAxis)return Wt(Ft._mainLinePosition);var Xt=$t(Ft._mainLinePosition);return Ft.mirror&&(Xt+=$t(Ft._mainMirrorPosition)),Xt}for(A in O._plots){M=O._plots[A],E=M.xaxis,S=M.yaxis;var It="M0,0";y(E,A)&&(pt=x(E,"left",S,R),rt=E._offset-(pt?U+pt:0),gt=x(E,"right",S,R),nt=E._offset+E._length+(gt?U+gt:0),ot=j(E,S,"bottom"),ct=j(E,S,"top"),!(st=!E._anchorAxis||A!==E._mainSubplot)||E.mirror!=="allticks"&&E.mirror!=="all"||(E._linepositions[A]=[ot,ct]),It=bt(E,St,Dt),st&&E.showline&&(E.mirror==="all"||E.mirror==="allticks")&&(It+=St(ot)+St(ct)),M.xlines.style("stroke-width",E._lw+"px").call(e.stroke,E.showline?E.linecolor:"rgba(0,0,0,0)")),M.xlines.attr("d",It);var zt="M0,0";y(S,A)&&(vt=x(S,"bottom",E,R),kt=S._offset+S._length+(vt?U:0),xt=x(S,"top",E,R),yt=S._offset-(xt?U:0),mt=j(S,E,"left"),Ot=j(S,E,"right"),!(st=!S._anchorAxis||A!==S._mainSubplot)||S.mirror!=="allticks"&&S.mirror!=="all"||(S._linepositions[A]=[mt,Ot]),zt=bt(S,ut,Tt),st&&S.showline&&(S.mirror==="all"||S.mirror==="allticks")&&(zt+=ut(mt)+ut(Ot)),M.ylines.style("stroke-width",S._lw+"px").call(e.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),M.ylines.attr("d",zt)}return i.makeClipPaths(_),r.previousPromises(_)}function y(_,g){return(_.ticks||_.showline)&&(g===_._mainSubplot||_.mirror==="all"||_.mirror==="allticks")}function b(_,g,A){if(!A.showline||!A._lw)return!1;if(A.mirror==="all"||A.mirror==="allticks")return!0;var M=A._anchorAxis;if(!M)return!1;var L=c.FROM_BL[g];return A.side===g?M.domain[L]===_.domain[L]:A.mirror&&M.domain[1-L]===_.domain[1-L]}function x(_,g,A,M){if(b(_,g,A))return A._lw;for(var L=0;L<M.length;L++){var E=M[L];if(E._mainAxis===A._mainAxis&&b(_,g,E))return E._lw}return 0}I.layoutStyles=function(_){return m.syncOrAsync([r.doAutoMargin,p],_)},I.drawMainTitle=function(_){var g,A=_._fullLayout.title,M=_._fullLayout,L=function(j){var B=j.title,z="middle";return m.isRightAnchor(B)?z="end":m.isLeftAnchor(B)&&(z=w),z}(M),E=function(j){var B=j.title,z="0em";return m.isTopAnchor(B)?z=c.CAP_SHIFT+"em":m.isMiddleAnchor(B)&&(z=c.MID_SHIFT+"em"),z}(M),S=function(j,B){var z=j.title,G=j._size,V=0;return B!=="0em"&&B?B===c.CAP_SHIFT+"em"&&(V=z.pad.t):V=-z.pad.b,z.y==="auto"?G.t/2:z.yref==="paper"?G.t+G.h-G.h*z.y+V:j.height-j.height*z.y+V}(M,E),O=function(j,B){var z=j.title,G=j._size,V=0;return B===w?V=z.pad.l:B==="end"&&(V=-z.pad.r),z.xref==="paper"?G.l+G.w*z.x+V:j.width*z.x+V}(M,L);if(n.draw(_,"gtitle",{propContainer:M,propName:"title.text",placeholder:M._dfltTitle.plot,attributes:{x:O,y:S,"text-anchor":L,dy:E}}),A.text&&A.automargin){var P=T.selectAll(".gtitle"),U=t.bBox(P.node()).height,R=function(j,B,z){var G=B.y,V=B.yanchor,et=G>.5?"t":"b",J=j._fullLayout.margin[et],X=0;return B.yref==="paper"?X=z+B.pad.t+B.pad.b:B.yref==="container"&&(X=function(Y,Z,tt,rt,nt){var ot=0;return tt==="middle"&&(ot+=nt/2),Y==="t"?(tt==="top"&&(ot+=nt),ot+=rt-Z*rt):(tt==="bottom"&&(ot+=nt),ot+=Z*rt),ot}(et,G,V,j._fullLayout.height,z)+B.pad.t+B.pad.b),X>J?X:0}(_,A,U);R>0&&(function(j,B,z,G){var V="title.automargin",et=j._fullLayout.title,J=et.y>.5?"t":"b",X={x:et.x,y:et.y,t:0,b:0},Y={};et.yref==="paper"&&function(Z,tt,rt,nt,ot){var ct=tt.yref==="paper"?Z._fullLayout._size.h:Z._fullLayout.height,pt=m.isTopAnchor(tt)?nt:nt-ot,gt=rt==="b"?ct-pt:pt;return!(m.isTopAnchor(tt)&&rt==="t"||m.isBottomAnchor(tt)&&rt==="b")&&gt<ot}(j,et,J,B,G)?X[J]=z:et.yref==="container"&&(Y[J]=z,j._fullLayout._reservedMargin[V]=Y),r.allowAutoMargin(j,V),r.autoMargin(j,V,X)}(_,S,R,U),P.attr({x:O,y:S,"text-anchor":L,dy:(g=A.yanchor,g==="top"?c.CAP_SHIFT+.3+"em":g==="bottom"?"-0.3em":c.MID_SHIFT+"em")}).call(h.positionText,O,S))}},I.doTraceStyle=function(_){var g,A=_.calcdata,M=[];for(g=0;g<A.length;g++){var L=A[g],E=L[0]||{},S=E.trace||{},O=S._module||{},P=O.arraysToCalcdata;P&&P(L,S);var U=O.editStyle;U&&M.push({fn:U,cd0:E})}if(M.length){for(g=0;g<M.length;g++){var R=M[g];R.fn(_,R.cd0)}s(_),I.redrawReglTraces(_)}return r.style(_),k.getComponentMethod("legend","draw")(_),r.previousPromises(_)},I.doColorBars=function(_){return k.getComponentMethod("colorbar","draw")(_),r.previousPromises(_)},I.layoutReplot=function(_){var g=_.layout;return _.layout=void 0,k.call("_doPlot",_,"",g)},I.doLegend=function(_){return k.getComponentMethod("legend","draw")(_),r.previousPromises(_)},I.doTicksRelayout=function(_){return i.draw(_,"redraw"),_._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(_),s(_),I.redrawReglTraces(_)),I.drawMainTitle(_),r.previousPromises(_)},I.doModeBar=function(_){var g=_._fullLayout;a.manage(_);for(var A=0;A<g._basePlotModules.length;A++){var M=g._basePlotModules[A].updateFx;M&&M(_)}return r.previousPromises(_)},I.doCamera=function(_){for(var g=_._fullLayout,A=g._subplots.gl3d,M=0;M<A.length;M++){var L=g[A[M]];L._scene.setViewport(L)}},I.drawData=function(_){var g=_._fullLayout;s(_);for(var A=g._basePlotModules,M=0;M<A.length;M++)A[M].plot(_);return I.redrawReglTraces(_),r.style(_),k.getComponentMethod("selections","draw")(_),k.getComponentMethod("shapes","draw")(_),k.getComponentMethod("annotations","draw")(_),k.getComponentMethod("images","draw")(_),g._replotting=!1,r.previousPromises(_)},I.redrawReglTraces=function(_){var g=_._fullLayout;if(g._has("regl")){var A,M,L=_._fullData,E=[],S=[];for(g._hasOnlyLargeSploms&&g._splomGrid.draw(),A=0;A<L.length;A++){var O=L[A];O.visible===!0&&O._length!==0&&(O.type==="splom"?g._splomScenes[O.uid].draw():O.type==="scattergl"?m.pushUnique(E,O.xaxis+O.yaxis):O.type==="scatterpolargl"&&m.pushUnique(S,O.subplot))}for(A=0;A<E.length;A++)(M=g._plots[E[A]])._scene&&M._scene.draw();for(A=0;A<S.length;A++)(M=g[S[A]]._subplot)._scene&&M._scene.draw()}},I.doAutoRangeAndConstraints=function(_){for(var g,A=i.list(_,"",!0),M={},L=0;L<A.length;L++)if(!M[(g=A[L])._id]){M[g._id]=1,f(_,g),d(_,g);var E=g._matchGroup;if(E)for(var S in E){var O=i.getFromId(_,S);d(_,O,g.range),M[S]=1}}u(_)},I.finalDraw=function(_){k.getComponentMethod("rangeslider","draw")(_),k.getComponentMethod("rangeselector","draw")(_)},I.drawMarginPushers=function(_){k.getComponentMethod("legend","draw")(_),k.getComponentMethod("rangeselector","draw")(_),k.getComponentMethod("sliders","draw")(_),k.getComponentMethod("updatemenus","draw")(_),k.getComponentMethod("colorbar","draw")(_)}},96318:function(W,I,o){var T=o(71828),k=T.isPlainObject,r=o(86281),m=o(74875),h=o(9012),s=o(44467),e=o(72075).dfltConfig;function t(d,w){d=T.extendDeep({},d);var v,p,y=Object.keys(d).sort();function b(M,L,E){if(k(L)&&k(M))t(M,L);else if(Array.isArray(L)&&Array.isArray(M)){var S=s.arrayTemplater({_template:d},E);for(p=0;p<L.length;p++){var O=L[p],P=S.newItem(O)._template;P&&t(P,O)}var U=S.defaultItems();for(p=0;p<U.length;p++)L.push(U[p]._template);for(p=0;p<L.length;p++)delete L[p].templateitemname}}for(v=0;v<y.length;v++){var x=y[v],_=d[x];if(x in w?b(_,w[x],x):w[x]=_,n(x)===x)for(var g in w){var A=n(g);g===A||A!==x||g in d||b(_,w[g],x)}}}function n(d){return d.replace(/[0-9]+$/,"")}function a(d,w,v,p,y){var b=y&&v(y);for(var x in d){var _=d[x],g=l(d,x,p),A=l(d,x,y),M=v(A);if(!M){var L=n(x);L!==x&&(M=v(A=l(d,L,y)))}if(!(b&&b===M||!M||M._noTemplating||M.valType==="data_array"||M.arrayOk&&Array.isArray(_)))if(!M.valType&&k(_))a(_,w,v,g,A);else if(M._isLinkedToArray&&Array.isArray(_))for(var E=!1,S=0,O={},P=0;P<_.length;P++){var U=_[P];if(k(U)){var R=U.name;if(R)O[R]||(a(U,w,v,l(_,S,g),l(_,S,A)),S++,O[R]=1);else if(!E){var j=l(d,s.arrayDefaultKey(x),p),B=l(_,S,g);a(U,w,v,B,l(_,S,A));var z=T.nestedProperty(w,B);T.nestedProperty(w,j).set(z.get()),z.set(null),E=!0}}}else T.nestedProperty(w,g).set(_)}}function i(d,w){return r.getLayoutValObject(d,T.nestedProperty({},w).parts)}function c(d,w){return r.getTraceValObject(d,T.nestedProperty({},w).parts)}function l(d,w,v){return v?Array.isArray(d)?v+"["+w+"]":v+"."+w:w}function u(d){for(var w=0;w<d.length;w++)if(k(d[w]))return!0}function f(d){var w;switch(d.code){case"data":w="The template has no key data.";break;case"layout":w="The template has no key layout.";break;case"missing":w=d.path?"There are no templates for item "+d.path+" with name "+d.templateitemname:"There are no templates for trace "+d.index+", of type "+d.traceType+".";break;case"unused":w=d.path?"The template item at "+d.path+" was not used in constructing the plot.":d.dataCount?"Some of the templates of type "+d.traceType+" were not used. The template has "+d.templateCount+" traces, the data only has "+d.dataCount+" of this type.":"The template has "+d.templateCount+" traces of type "+d.traceType+" but there are none in the data.";break;case"reused":w="Some of the templates of type "+d.traceType+" were used more than once. The template has "+d.templateCount+" traces, the data has "+d.dataCount+" of this type."}return d.msg=w,d}I.makeTemplate=function(d){d=T.isPlainObject(d)?d:T.getGraphDiv(d),d=T.extendDeep({_context:e},{data:d.data,layout:d.layout}),m.supplyDefaults(d);var w=d.data||[],v=d.layout||{};v._basePlotModules=d._fullLayout._basePlotModules,v._modules=d._fullLayout._modules;var p={data:{},layout:{}};w.forEach(function(S){var O={};a(S,O,c.bind(null,S));var P=T.coerce(S,{},h,"type"),U=p.data[P];U||(U=p.data[P]=[]),U.push(O)}),a(v,p.layout,i.bind(null,v)),delete p.layout.template;var y=v.template;if(k(y)){var b,x,_,g,A,M,L=y.layout;k(L)&&t(L,p.layout);var E=y.data;if(k(E)){for(x in p.data)if(_=E[x],Array.isArray(_)){for(M=(A=p.data[x]).length,g=_.length,b=0;b<M;b++)t(_[b%g],A[b]);for(b=M;b<g;b++)A.push(T.extendDeep({},_[b]))}for(x in E)x in p.data||(p.data[x]=T.extendDeep([],E[x]))}}return p},I.validateTemplate=function(d,w){var v=T.extendDeep({},{_context:e,data:d.data,layout:d.layout}),p=v.layout||{};k(w)||(w=p.template||{});var y=w.layout,b=w.data,x=[];v.layout=p,v.layout.template=w,m.supplyDefaults(v);var _=v._fullLayout,g=v._fullData,A={};if(k(y)?(function U(R,j){for(var B in R)if(B.charAt(0)!=="_"&&k(R[B])){var z,G=n(B),V=[];for(z=0;z<j.length;z++)V.push(l(R,B,j[z])),G!==B&&V.push(l(R,G,j[z]));for(z=0;z<V.length;z++)A[V[z]]=1;U(R[B],V)}}(_,["layout"]),function U(R,j){for(var B in R)if(B.indexOf("defaults")===-1&&k(R[B])){var z=l(R,B,j);A[z]?U(R[B],z):x.push({code:"unused",path:z})}}(y,"layout")):x.push({code:"layout"}),k(b)){for(var M,L={},E=0;E<g.length;E++){var S=g[E];L[M=S.type]=(L[M]||0)+1,S._fullInput._template||x.push({code:"missing",index:S._fullInput.index,traceType:M})}for(M in b){var O=b[M].length,P=L[M]||0;O>P?x.push({code:"unused",traceType:M,templateCount:O,dataCount:P}):P>O&&x.push({code:"reused",traceType:M,templateCount:O,dataCount:P})}}else x.push({code:"data"});if(function U(R,j){for(var B in R)if(B.charAt(0)!=="_"){var z=R[B],G=l(R,B,j);k(z)?(Array.isArray(R)&&z._template===!1&&z.templateitemname&&x.push({code:"missing",path:G,templateitemname:z.templateitemname}),U(z,G)):Array.isArray(z)&&u(z)&&U(z,G)}}({data:g,layout:_},""),x.length)return x.map(f)}},403:function(W,I,o){var T=o(92770),k=o(72391),r=o(74875),m=o(71828),h=o(25095),s=o(5900),e=o(70942),t=o(11506).version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};W.exports=function(a,i){var c,l,u,f;function d(P){return!(P in i)||m.validate(i[P],n[P])}if(i=i||{},m.isPlainObject(a)?(c=a.data||[],l=a.layout||{},u=a.config||{},f={}):(a=m.getGraphDiv(a),c=m.extendDeep([],a.data),l=m.extendDeep({},a.layout),u=a._context,f=a._fullLayout||{}),!d("width")&&i.width!==null||!d("height")&&i.height!==null)throw new Error("Height and width should be pixel values.");if(!d("format"))throw new Error("Export format is not "+m.join2(n.format.values,", "," or ")+".");var w={};function v(P,U){return m.coerce(i,w,n,P,U)}var p=v("format"),y=v("width"),b=v("height"),x=v("scale"),_=v("setBackground"),g=v("imageDataOnly"),A=document.createElement("div");A.style.position="absolute",A.style.left="-5000px",document.body.appendChild(A);var M=m.extendFlat({},l);y?M.width=y:i.width===null&&T(f.width)&&(M.width=f.width),b?M.height=b:i.height===null&&T(f.height)&&(M.height=f.height);var L=m.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),E=h.getRedrawFunc(A);function S(){return new Promise(function(P){setTimeout(P,h.getDelay(A._fullLayout))})}function O(){return new Promise(function(P,U){var R=s(A,p,x),j=A._fullLayout.width,B=A._fullLayout.height;function z(){k.purge(A),document.body.removeChild(A)}if(p==="full-json"){var G=r.graphJson(A,!1,"keepdata","object",!0,!0);return G.version=t,G=JSON.stringify(G),z(),P(g?G:h.encodeJSON(G))}if(z(),p==="svg")return P(g?R:h.encodeSVG(R));var V=document.createElement("canvas");V.id=m.randstr(),e({format:p,width:j,height:B,scale:x,canvas:V,svg:R,promise:!0}).then(P).catch(U)})}return new Promise(function(P,U){k.newPlot(A,c,M,L).then(E).then(S).then(O).then(function(R){P(function(j){return g?j.replace(h.IMAGE_URL_PREFIX,""):j}(R))}).catch(function(R){U(R)})})}},84936:function(W,I,o){var T=o(71828),k=o(74875),r=o(86281),m=o(72075).dfltConfig,h=T.isPlainObject,s=Array.isArray,e=T.isArrayOrTypedArray;function t(d,w,v,p,y,b){b=b||[];for(var x=Object.keys(d),_=0;_<x.length;_++){var g=x[_];if(g!=="transforms"){var A=b.slice();A.push(g);var M=d[g],L=w[g],E=l(v,g),S=(E||{}).valType,O=S==="info_array",P=S==="colorscale",U=(E||{}).items;if(c(v,g))if(h(M)&&h(L)&&S!=="any")t(M,L,E,p,y,A);else if(O&&s(M)){M.length>L.length&&p.push(i("unused",y,A.concat(L.length)));var R,j,B,z,G,V=L.length,et=Array.isArray(U);if(et&&(V=Math.min(V,U.length)),E.dimensions===2)for(j=0;j<V;j++)if(s(M[j])){M[j].length>L[j].length&&p.push(i("unused",y,A.concat(j,L[j].length)));var J=L[j].length;for(R=0;R<(et?Math.min(J,U[j].length):J);R++)B=et?U[j][R]:U,z=M[j][R],G=L[j][R],T.validate(z,B)?G!==z&&G!==+z&&p.push(i("dynamic",y,A.concat(j,R),z,G)):p.push(i("value",y,A.concat(j,R),z))}else p.push(i("array",y,A.concat(j),M[j]));else for(j=0;j<V;j++)B=et?U[j]:U,z=M[j],G=L[j],T.validate(z,B)?G!==z&&G!==+z&&p.push(i("dynamic",y,A.concat(j),z,G)):p.push(i("value",y,A.concat(j),z))}else if(E.items&&!O&&s(M)){var X,Y,Z=U[Object.keys(U)[0]],tt=[];for(X=0;X<L.length;X++){var rt=L[X]._index||X;if((Y=A.slice()).push(rt),h(M[rt])&&h(L[X])){tt.push(rt);var nt=M[rt],ot=L[X];h(nt)&&nt.visible!==!1&&ot.visible===!1?p.push(i("invisible",y,Y)):t(nt,ot,Z,p,y,Y)}}for(X=0;X<M.length;X++)(Y=A.slice()).push(X),h(M[X])?tt.indexOf(X)===-1&&p.push(i("unused",y,Y)):p.push(i("object",y,Y,M[X]))}else!h(M)&&h(L)?p.push(i("object",y,A,M)):e(M)||!e(L)||O||P?g in w?T.validate(M,E)?E.valType==="enumerated"&&(E.coerceNumber&&M!==+L||M!==L)&&p.push(i("dynamic",y,A,M,L)):p.push(i("value",y,A,M)):p.push(i("unused",y,A,M)):p.push(i("array",y,A,M));else p.push(i("schema",y,A))}}return p}W.exports=function(d,w){d===void 0&&(d=[]),w===void 0&&(w={});var v,p,y=r.get(),b=[],x={_context:T.extendFlat({},m)};s(d)?(x.data=T.extendDeep([],d),v=d):(x.data=[],v=[],b.push(i("array","data"))),h(w)?(x.layout=T.extendDeep({},w),p=w):(x.layout={},p={},arguments.length>1&&b.push(i("object","layout"))),k.supplyDefaults(x);for(var _=x._fullData,g=v.length,A=0;A<g;A++){var M=v[A],L=["data",A];if(h(M)){var E=_[A],S=E.type,O=y.traces[S].attributes;O.type={valType:"enumerated",values:[S]},E.visible===!1&&M.visible!==!1&&b.push(i("invisible",L)),t(M,E,O,b,L);var P=M.transforms,U=E.transforms;if(P){s(P)||b.push(i("array",L,["transforms"])),L.push("transforms");for(var R=0;R<P.length;R++){var j=["transforms",R],B=P[R].type;if(h(P[R])){var z=y.transforms[B]?y.transforms[B].attributes:{};z.type={valType:"enumerated",values:Object.keys(y.transforms)},t(P[R],U[R],z,b,L,j)}else b.push(i("object",L,j))}}}else b.push(i("object",L))}var G=x._fullLayout,V=function(et,J){for(var X=et.layout.layoutAttributes,Y=0;Y<J.length;Y++){var Z=J[Y],tt=et.traces[Z.type],rt=tt.layoutAttributes;rt&&(Z.subplot?T.extendFlat(X[tt.attributes.subplot.dflt],rt):T.extendFlat(X,rt))}return X}(y,_);return t(p,G,V,b,"layout"),b.length===0?void 0:b};var n={object:function(d,w){return(d==="layout"&&w===""?"The layout argument":d[0]==="data"&&w===""?"Trace "+d[1]+" in the data argument":a(d)+"key "+w)+" must be linked to an object container"},array:function(d,w){return(d==="data"?"The data argument":a(d)+"key "+w)+" must be linked to an array container"},schema:function(d,w){return a(d)+"key "+w+" is not part of the schema"},unused:function(d,w,v){var p=h(v)?"container":"key";return a(d)+p+" "+w+" did not get coerced"},dynamic:function(d,w,v,p){return[a(d)+"key",w,"(set to '"+v+"')","got reset to","'"+p+"'","during defaults."].join(" ")},invisible:function(d,w){return(w?a(d)+"item "+w:"Trace "+d[1])+" got defaulted to be not visible"},value:function(d,w,v){return[a(d)+"key "+w,"is set to an invalid value ("+v+")"].join(" ")}};function a(d){return s(d)?"In data trace "+d[1]+", ":"In "+d+", "}function i(d,w,v,p,y){var b,x;v=v||"",s(w)?(b=w[0],x=w[1]):(b=w,x=null);var _=function(A){if(!s(A))return String(A);for(var M="",L=0;L<A.length;L++){var E=A[L];typeof E=="number"?M=M.substr(0,M.length-1)+"["+E+"]":M+=E,L<A.length-1&&(M+=".")}return M}(v),g=n[d](w,_,p,y);return T.log(g),{code:d,container:b,trace:x,path:v,astr:_,msg:g}}function c(d,w){var v=f(w),p=v.keyMinusId,y=v.id;return!!(p in d&&d[p]._isSubplotObj&&y)||w in d}function l(d,w){return w in d?d[w]:d[f(w).keyMinusId]}var u=T.counterRegex("([a-z]+)");function f(d){var w=d.match(u);return{keyMinusId:w&&w[1],id:w&&w[2]}}},85594:function(W){W.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(W,I,o){var T=o(71828),k=o(44467);W.exports=function(r,m,h){var s,e,t=h.name,n=h.inclusionAttr||"visible",a=m[t],i=T.isArrayOrTypedArray(r[t])?r[t]:[],c=m[t]=[],l=k.arrayTemplater(m,t,n);for(s=0;s<i.length;s++){var u=i[s];T.isPlainObject(u)?e=l.newItem(u):(e=l.newItem({}))[n]=!1,e._index=s,e[n]!==!1&&h.handleItemDefaults(u,e,m,h),c.push(e)}var f=l.defaultItems();for(s=0;s<f.length;s++)(e=f[s])._index=c.length,h.handleItemDefaults({},e,m,h,{}),c.push(e);if(T.isArrayOrTypedArray(a)){var d=Math.min(a.length,c.length);for(s=0;s<d;s++)T.relinkPrivateKeys(c[s],a[s])}return c}},9012:function(W,I,o){var T=o(41940),k=o(77914);W.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:T({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(W,I,o){var T=o(92770),k=o(71828),r=k.dateTime2ms,m=k.incrementMonth,h=o(50606).ONEAVGMONTH;W.exports=function(s,e,t,n){if(e.type!=="date")return{vals:n};var a=s[t+"periodalignment"];if(!a)return{vals:n};var i,c=s[t+"period"];if(T(c)){if((c=+c)<=0)return{vals:n}}else if(typeof c=="string"&&c.charAt(0)==="M"){var l=+c.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:n};i=l}for(var u=e.calendar,f=a==="start",d=a==="end",w=s[t+"period0"],v=r(w,u)||0,p=[],y=[],b=[],x=n.length,_=0;_<x;_++){var g,A,M,L=n[_];if(i){for(g=Math.round((L-v)/(i*h)),M=m(v,i*g,u);M>L;)M=m(M,-i,u);for(;M<=L;)M=m(M,i,u);A=m(M,-i,u)}else{for(M=v+(g=Math.round((L-v)/c))*c;M>L;)M-=c;for(;M<=L;)M+=c;A=M-c}p[_]=f?A:d?M:(A+M)/2,y[_]=A,b[_]=M}return{vals:p,starts:y,ends:b}}},89502:function(W){W.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(W,I,o){var T=o(39898),k=o(92770),r=o(71828),m=o(50606).FP_SAFE,h=o(73972),s=o(91424),e=o(41675),t=e.getFromId,n=e.isLinked;function a(_,g){var A,M,L=[],E=_._fullLayout,S=c(E,g,0),O=c(E,g,1),P=u(_,g),U=P.min,R=P.max;if(U.length===0||R.length===0)return r.simpleMap(g.range,g.r2l);var j=U[0].val,B=R[0].val;for(A=1;A<U.length&&j===B;A++)j=Math.min(j,U[A].val);for(A=1;A<R.length&&j===B;A++)B=Math.max(B,R[A].val);var z=g.autorange,G=z==="reversed"||z==="min reversed"||z==="max reversed";if(!G&&g.range){var V=r.simpleMap(g.range,g.r2l);G=V[1]<V[0]}g.autorange==="reversed"&&(g.autorange=!0);var et,J,X,Y,Z,tt,rt=g.rangemode,nt=rt==="tozero",ot=rt==="nonnegative",ct=g._length,pt=ct/10,gt=0;for(A=0;A<U.length;A++)for(et=U[A],M=0;M<R.length;M++)(tt=(J=R[M]).val-et.val-i(g,et.val,J.val))>0&&((Z=ct-S(et)-O(J))>pt?tt/Z>gt&&(X=et,Y=J,gt=tt/Z):tt/ct>gt&&(X={val:et.val,nopad:1},Y={val:J.val,nopad:1},gt=tt/ct));if(j===B){var kt=j-1,yt=j+1;if(nt)if(j===0)L=[0,1];else{var mt=(j>0?R:U).reduce(function(vt,xt){return Math.max(vt,O(xt))},0),Ot=j/(1-Math.min(.5,mt/ct));L=j>0?[0,Ot]:[Ot,0]}else L=ot?[Math.max(0,kt),Math.max(1,yt)]:[kt,yt]}else nt?(X.val>=0&&(X={val:0,nopad:1}),Y.val<=0&&(Y={val:0,nopad:1})):ot&&(X.val-gt*S(X)<0&&(X={val:0,nopad:1}),Y.val<=0&&(Y={val:1,nopad:1})),gt=(Y.val-X.val-i(g,et.val,J.val))/(ct-S(X)-O(Y)),L=[X.val-gt*S(X),Y.val+gt*O(Y)];return L=x(L,g),g.limitRange&&g.limitRange(),G&&L.reverse(),r.simpleMap(L,g.l2r||Number)}function i(_,g,A){var M=0;if(_.rangebreaks)for(var L=_.locateBreaks(g,A),E=0;E<L.length;E++){var S=L[E];M+=S.max-S.min}return M}function c(_,g,A){var M=.05*g._length,L=g._anchorAxis||{};if((g.ticklabelposition||"").indexOf("inside")!==-1||(L.ticklabelposition||"").indexOf("inside")!==-1){var E=g.isReversed();if(!E){var S=r.simpleMap(g.range,g.r2l);E=S[1]<S[0]}E&&(A=!A)}var O=0;return n(_,g._id)||(O=function(P,U,R){var j=0,B=U._id.charAt(0)==="x";for(var z in P._plots){var G=P._plots[z];if(U._id===G.xaxis._id||U._id===G.yaxis._id){var V=(B?G.yaxis:G.xaxis)||{};if((V.ticklabelposition||"").indexOf("inside")!==-1&&(!R&&(V.side==="left"||V.side==="bottom")||R&&(V.side==="top"||V.side==="right"))){if(V._vals){var et=r.deg2rad(V._tickAngles[V._id+"tick"]||0),J=Math.abs(Math.cos(et)),X=Math.abs(Math.sin(et));if(!V._vals[0].bb){var Y=V._id+"tick";V._selections[Y].each(function(ot){var ct=T.select(this);ct.select(".text-math-group").empty()&&(ot.bb=s.bBox(ct.node()))})}for(var Z=0;Z<V._vals.length;Z++){var tt=V._vals[Z].bb;if(tt){var rt=2*l+tt.width,nt=2*l+tt.height;j=Math.max(j,B?Math.max(rt*J,nt*X):Math.max(nt*J,rt*X))}}}V.ticks==="inside"&&V.ticklabelposition==="inside"&&(j+=V.ticklen||0)}}}return j}(_,g,A)),M=Math.max(O,M),g.constrain==="domain"&&g._inputDomain&&(M*=(g._inputDomain[1]-g._inputDomain[0])/(g.domain[1]-g.domain[0])),function(P){return P.nopad?0:P.pad+(P.extrapad?M:O)}}W.exports={applyAutorangeOptions:x,getAutoRange:a,makePadFn:c,doAutoRange:function(_,g,A){if(g.setScale(),g.autorange){g.range=A?A.slice():a(_,g),g._r=g.range.slice(),g._rl=r.simpleMap(g._r,g.r2l);var M=g._input,L={};L[g._attr+".range"]=g.range,L[g._attr+".autorange"]=g.autorange,h.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,L),M.range=g.range.slice(),M.autorange=g.autorange}var E=g._anchorAxis;if(E&&E.rangeslider){var S=E.rangeslider[g._name];S&&S.rangemode==="auto"&&(S.range=a(_,g)),E._input.rangeslider[g._name]=r.extendFlat({},S)}},findExtremes:function(_,g,A){A||(A={}),_._m||_.setScale();var M,L,E,S,O,P,U,R,j,B=[],z=[],G=g.length,V=A.padded||!1,et=A.tozero&&(_.type==="linear"||_.type==="-"),J=_.type==="log",X=!1,Y=A.vpadLinearized||!1;function Z(kt){if(Array.isArray(kt))return X=!0,function(mt){return Math.max(Number(kt[mt]||0),0)};var yt=Math.max(Number(kt||0),0);return function(){return yt}}var tt=Z((_._m>0?A.ppadplus:A.ppadminus)||A.ppad||0),rt=Z((_._m>0?A.ppadminus:A.ppadplus)||A.ppad||0),nt=Z(A.vpadplus||A.vpad),ot=Z(A.vpadminus||A.vpad);if(!X){if(R=1/0,j=-1/0,J)for(M=0;M<G;M++)(L=g[M])<R&&L>0&&(R=L),L>j&&L<m&&(j=L);else for(M=0;M<G;M++)(L=g[M])<R&&L>-m&&(R=L),L>j&&L<m&&(j=L);g=[R,j],G=2}var ct={tozero:et,extrapad:V};function pt(kt){E=g[kt],k(E)&&(P=tt(kt),U=rt(kt),Y?(S=_.c2l(E)-ot(kt),O=_.c2l(E)+nt(kt)):(R=E-ot(kt),j=E+nt(kt),J&&R<j/10&&(R=j/10),S=_.c2l(R),O=_.c2l(j)),et&&(S=Math.min(0,S),O=Math.max(0,O)),v(S)&&f(B,S,U,ct),v(O)&&d(z,O,P,ct))}var gt=Math.min(6,G);for(M=0;M<gt;M++)pt(M);for(M=G-1;M>=gt;M--)pt(M);return{min:B,max:z,opts:A}},concatExtremes:u};var l=3;function u(_,g,A){var M,L,E,S=g._id,O=_._fullData,P=_._fullLayout,U=[],R=[];function j(et,J){for(M=0;M<J.length;M++){var X=et[J[M]],Y=(X._extremes||{})[S];if(X.visible===!0&&Y){for(L=0;L<Y.min.length;L++)E=Y.min[L],f(U,E.val,E.pad,{extrapad:E.extrapad});for(L=0;L<Y.max.length;L++)E=Y.max[L],d(R,E.val,E.pad,{extrapad:E.extrapad})}}}if(j(O,g._traceIndices),j(P.annotations||[],g._annIndices||[]),j(P.shapes||[],g._shapeIndices||[]),g._matchGroup&&!A){for(var B in g._matchGroup)if(B!==g._id){var z=t(_,B),G=u(_,z,!0),V=g._length/z._length;for(L=0;L<G.min.length;L++)E=G.min[L],f(U,E.val,E.pad*V,{extrapad:E.extrapad});for(L=0;L<G.max.length;L++)E=G.max[L],d(R,E.val,E.pad*V,{extrapad:E.extrapad})}}return{min:U,max:R}}function f(_,g,A,M){w(_,g,A,M,p)}function d(_,g,A,M){w(_,g,A,M,y)}function w(_,g,A,M,L){for(var E=M.tozero,S=M.extrapad,O=!0,P=0;P<_.length&&O;P++){var U=_[P];if(L(U.val,g)&&U.pad>=A&&(U.extrapad||!S)){O=!1;break}L(g,U.val)&&U.pad<=A&&(S||!U.extrapad)&&(_.splice(P,1),P--)}if(O){var R=E&&g===0;_.push({val:g,pad:R?0:A,extrapad:!R&&S})}}function v(_){return k(_)&&Math.abs(_)<m}function p(_,g){return _<=g}function y(_,g){return _>=g}function b(_,g,A){return g===void 0||A===void 0||(g=_.d2l(g))<_.d2l(A)}function x(_,g){if(!g||!g.autorangeoptions)return _;var A=_[0],M=_[1],L=g.autorangeoptions.include;if(L!==void 0){var E=g.d2l(A),S=g.d2l(M);r.isArrayOrTypedArray(L)||(L=[L]);for(var O=0;O<L.length;O++){var P=g.d2l(L[O]);E>=P&&(E=P,A=P),S<=P&&(S=P,M=P)}}return A=function(U,R){var j=R.autorangeoptions;return j&&j.minallowed!==void 0&&b(R,j.minallowed,j.maxallowed)?j.minallowed:j&&j.clipmin!==void 0&&b(R,j.clipmin,j.clipmax)?Math.max(U,R.d2l(j.clipmin)):U}(A,g),M=function(U,R){var j=R.autorangeoptions;return j&&j.maxallowed!==void 0&&b(R,j.minallowed,j.maxallowed)?j.maxallowed:j&&j.clipmax!==void 0&&b(R,j.clipmin,j.clipmax)?Math.min(U,R.d2l(j.clipmax)):U}(M,g),[A,M]}},23074:function(W){W.exports=function(I,o,T){var k,r;if(T){var m=o==="reversed"||o==="min reversed"||o==="max reversed";k=T[m?1:0],r=T[m?0:1]}var h=I("autorangeoptions.minallowed",r===null?k:void 0),s=I("autorangeoptions.maxallowed",k===null?r:void 0);h===void 0&&I("autorangeoptions.clipmin"),s===void 0&&I("autorangeoptions.clipmax"),I("autorangeoptions.include")}},89298:function(W,I,o){var T=o(39898),k=o(92770),r=o(74875),m=o(73972),h=o(71828),s=h.strTranslate,e=o(63893),t=o(92998),n=o(7901),a=o(91424),i=o(13838),c=o(66287),l=o(50606),u=l.ONEMAXYEAR,f=l.ONEAVGYEAR,d=l.ONEMINYEAR,w=l.ONEMAXQUARTER,v=l.ONEAVGQUARTER,p=l.ONEMINQUARTER,y=l.ONEMAXMONTH,b=l.ONEAVGMONTH,x=l.ONEMINMONTH,_=l.ONEWEEK,g=l.ONEDAY,A=g/2,M=l.ONEHOUR,L=l.ONEMIN,E=l.ONESEC,S=l.MINUS_SIGN,O=l.BADNUM,P={K:"zeroline"},U={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},j={K:"tick",L:"path"},B={K:"tick",L:"text"},z={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},G=o(18783),V=G.MID_SHIFT,et=G.CAP_SHIFT,J=G.LINE_SPACING,X=G.OPPOSITE_SIDE,Y=W.exports={};Y.setConvert=o(21994);var Z=o(4322),tt=o(41675),rt=tt.idSort,nt=tt.isLinked;Y.id2name=tt.id2name,Y.name2id=tt.name2id,Y.cleanId=tt.cleanId,Y.list=tt.list,Y.listIds=tt.listIds,Y.getFromId=tt.getFromId,Y.getFromTrace=tt.getFromTrace;var ot=o(71739);Y.getAutoRange=ot.getAutoRange,Y.findExtremes=ot.findExtremes;var ct=1e-4;function pt(Pt){var Nt=(Pt[1]-Pt[0])*ct;return[Pt[0]-Nt,Pt[1]+Nt]}Y.coerceRef=function(Pt,Nt,ee,te,ge,pe){var me=te.charAt(te.length-1),ce=ee._fullLayout._subplots[me+"axis"],we=te+"ref",ue={};return ge||(ge=ce[0]||(typeof pe=="string"?pe:pe[0])),pe||(pe=ge),ce=ce.concat(ce.map(function(he){return he+" domain"})),ue[we]={valType:"enumerated",values:ce.concat(pe?typeof pe=="string"?[pe]:pe:[]),dflt:ge},h.coerce(Pt,Nt,ue,we)},Y.getRefType=function(Pt){return Pt===void 0?Pt:Pt==="paper"?"paper":Pt==="pixel"?"pixel":/( domain)$/.test(Pt)?"domain":"range"},Y.coercePosition=function(Pt,Nt,ee,te,ge,pe){var me,ce;if(Y.getRefType(te)!=="range")me=h.ensureNumber,ce=ee(ge,pe);else{var we=Y.getFromId(Nt,te);ce=ee(ge,pe=we.fraction2r(pe)),me=we.cleanPos}Pt[ge]=me(ce)},Y.cleanPosition=function(Pt,Nt,ee){return(ee==="paper"||ee==="pixel"?h.ensureNumber:Y.getFromId(Nt,ee).cleanPos)(Pt)},Y.redrawComponents=function(Pt,Nt){Nt=Nt||Y.listIds(Pt);var ee=Pt._fullLayout;function te(ge,pe,me,ce){for(var we=m.getComponentMethod(ge,pe),ue={},he=0;he<Nt.length;he++)for(var be=ee[Y.id2name(Nt[he])][me],Pe=0;Pe<be.length;Pe++){var De=be[Pe];if(!ue[De]&&(we(Pt,De),ue[De]=1,ce))return}}te("annotations","drawOne","_annIndices"),te("shapes","drawOne","_shapeIndices"),te("images","draw","_imgIndices",!0),te("selections","drawOne","_selectionIndices")};var gt=Y.getDataConversions=function(Pt,Nt,ee,te){var ge,pe=ee==="x"||ee==="y"||ee==="z"?ee:te;if(Array.isArray(pe)){if(ge={type:Z(te,void 0,{autotypenumbers:Pt._fullLayout.autotypenumbers}),_categories:[]},Y.setConvert(ge),ge.type==="category")for(var me=0;me<te.length;me++)ge.d2c(te[me])}else ge=Y.getFromTrace(Pt,Nt,pe);return ge?{d2c:ge.d2c,c2d:ge.c2d}:pe==="ids"?{d2c:yt,c2d:yt}:{d2c:kt,c2d:kt}};function kt(Pt){return+Pt}function yt(Pt){return String(Pt)}function mt(Pt,Nt){return Math.abs((Pt/Nt+.5)%1-.5)<.001}function Ot(Pt,Nt){return Math.abs(Pt/Nt-1)<.001}function vt(Pt){return+Pt.substring(1)}function xt(Pt,Nt){return Pt.rangebreaks&&(Nt=Nt.filter(function(ee){return Pt.maskBreaks(ee.x)!==O})),Nt}function st(Pt){var Nt=Pt._mainAxis,ee=[];if(Nt._vals){for(var te=0;te<Nt._vals.length;te++)if(!Nt._vals[te].noTick){var ge=Nt.l2p(Nt._vals[te].x),pe=Pt.p2l(ge),me=Y.tickText(Pt,pe);Nt._vals[te].minor&&(me.minor=!0,me.text=""),ee.push(me)}}return xt(Pt,ee)}function at(Pt){var Nt=pt(h.simpleMap(Pt.range,Pt.r2l)),ee=Math.min(Nt[0],Nt[1]),te=Math.max(Nt[0],Nt[1]),ge=Pt.type==="category"?Pt.d2l_noadd:Pt.d2l;Pt.type==="log"&&String(Pt.dtick).charAt(0)!=="L"&&(Pt.dtick="L"+Math.pow(10,Math.floor(Math.min(Pt.range[0],Pt.range[1]))-1));for(var pe=[],me=0;me<=1;me++)if(!me||Pt.minor){var ce=me?Pt.minor.tickvals:Pt.tickvals,we=me?[]:Pt.ticktext;if(ce){Array.isArray(we)||(we=[]);for(var ue=0;ue<ce.length;ue++){var he=ge(ce[ue]);if(he>ee&&he<te){var be=we[ue]===void 0?Y.tickText(Pt,he):It(Pt,he,String(we[ue]));me&&(be.minor=!0,be.text=""),pe.push(be)}}}}return xt(Pt,pe)}Y.getDataToCoordFunc=function(Pt,Nt,ee,te){return gt(Pt,Nt,ee,te).d2c},Y.counterLetter=function(Pt){var Nt=Pt.charAt(0);return Nt==="x"?"y":Nt==="y"?"x":void 0},Y.minDtick=function(Pt,Nt,ee,te){["log","category","multicategory"].indexOf(Pt.type)===-1&&te?Pt._minDtick===void 0?(Pt._minDtick=Nt,Pt._forceTick0=ee):Pt._minDtick&&((Pt._minDtick/Nt+1e-6)%1<2e-6&&((ee-Pt._forceTick0)/Nt%1+1.000001)%1<2e-6?(Pt._minDtick=Nt,Pt._forceTick0=ee):((Nt/Pt._minDtick+1e-6)%1>2e-6||((ee-Pt._forceTick0)/Pt._minDtick%1+1.000001)%1>2e-6)&&(Pt._minDtick=0)):Pt._minDtick=0},Y.saveRangeInitial=function(Pt,Nt){for(var ee=Y.list(Pt,"",!0),te=!1,ge=0;ge<ee.length;ge++){var pe=ee[ge],me=pe._rangeInitial0===void 0&&pe._rangeInitial1===void 0,ce=me||pe.range[0]!==pe._rangeInitial0||pe.range[1]!==pe._rangeInitial1,we=pe.autorange;(me&&we!==!0||Nt&&ce)&&(pe._rangeInitial0=we==="min"||we==="max reversed"?void 0:pe.range[0],pe._rangeInitial1=we==="max"||we==="min reversed"?void 0:pe.range[1],pe._autorangeInitial=we,te=!0)}return te},Y.saveShowSpikeInitial=function(Pt,Nt){for(var ee=Y.list(Pt,"",!0),te=!1,ge="on",pe=0;pe<ee.length;pe++){var me=ee[pe],ce=me._showSpikeInitial===void 0,we=ce||me.showspikes!==me._showspikes;(ce||Nt&&we)&&(me._showSpikeInitial=me.showspikes,te=!0),ge!=="on"||me.showspikes||(ge="off")}return Pt._fullLayout._cartesianSpikesEnabled=ge,te},Y.autoBin=function(Pt,Nt,ee,te,ge,pe){var me,ce=h.aggNums(Math.min,null,Pt),we=h.aggNums(Math.max,null,Pt);if(Nt.type==="category"||Nt.type==="multicategory")return{start:ce-.5,end:we+.5,size:Math.max(1,Math.round(pe)||1),_dataSpan:we-ce};if(ge||(ge=Nt.calendar),me=Nt.type==="log"?{type:"linear",range:[ce,we]}:{type:Nt.type,range:h.simpleMap([ce,we],Nt.c2r,0,ge),calendar:ge},Y.setConvert(me),pe=pe&&c.dtick(pe,me.type))me.dtick=pe,me.tick0=c.tick0(void 0,me.type,ge);else{var ue;if(ee)ue=(we-ce)/ee;else{var he=h.distinctVals(Pt),be=Math.pow(10,Math.floor(Math.log(he.minDiff)/Math.LN10)),Pe=be*h.roundUp(he.minDiff/be,[.9,1.9,4.9,9.9],!0);ue=Math.max(Pe,2*h.stdev(Pt)/Math.pow(Pt.length,te?.25:.4)),k(ue)||(ue=1)}Y.autoTicks(me,ue)}var De,Ue=me.dtick,tr=Y.tickIncrement(Y.tickFirst(me),Ue,"reverse",ge);if(typeof Ue=="number")tr=function(Ge,Ze,We,pr,xr){var sr=0,$e=0,ir=0,Ke=0;function ar(Er){return(1+100*(Er-Ge)/We.dtick)%100<2}for(var fr=0;fr<Ze.length;fr++)Ze[fr]%1==0?ir++:k(Ze[fr])||Ke++,ar(Ze[fr])&&sr++,ar(Ze[fr]+We.dtick/2)&&$e++;var mr=Ze.length-Ke;if(ir===mr&&We.type!=="date")We.dtick<1?Ge=pr-.5*We.dtick:(Ge-=.5)+We.dtick<pr&&(Ge+=We.dtick);else if($e<.1*mr&&(sr>.3*mr||ar(pr)||ar(xr))){var Cr=We.dtick/2;Ge+=Ge+Cr<pr?Cr:-Cr}return Ge}(tr,Pt,me,ce,we),De=tr+(1+Math.floor((we-tr)/Ue))*Ue;else for(me.dtick.charAt(0)==="M"&&(tr=function(Ge,Ze,We,pr,xr){var sr=h.findExactDates(Ze,xr);if(sr.exactDays>.8){var $e=Number(We.substr(1));sr.exactYears>.8&&$e%12==0?Ge=Y.tickIncrement(Ge,"M6","reverse")+1.5*g:sr.exactMonths>.8?Ge=Y.tickIncrement(Ge,"M1","reverse")+15.5*g:Ge-=A;var ir=Y.tickIncrement(Ge,We);if(ir<=pr)return ir}return Ge}(tr,Pt,Ue,ce,ge)),De=tr;De<=we;)De=Y.tickIncrement(De,Ue,!1,ge);return{start:Nt.c2r(tr,0,ge),end:Nt.c2r(De,0,ge),size:Ue,_dataSpan:we-ce}},Y.prepMinorTicks=function(Pt,Nt,ee){if(!Nt.minor.dtick){delete Pt.dtick;var te,ge=Nt.dtick&&k(Nt._tmin);if(ge){var pe=Y.tickIncrement(Nt._tmin,Nt.dtick,!0);te=[Nt._tmin,.99*pe+.01*Nt._tmin]}else{var me=h.simpleMap(Nt.range,Nt.r2l);te=[me[0],.8*me[0]+.2*me[1]]}if(Pt.range=h.simpleMap(te,Nt.l2r),Pt._isMinor=!0,Y.prepTicks(Pt,ee),ge){var ce=k(Nt.dtick),we=k(Pt.dtick),ue=ce?Nt.dtick:+Nt.dtick.substring(1),he=we?Pt.dtick:+Pt.dtick.substring(1);ce&&we?mt(ue,he)?ue===2*_&&he===2*g&&(Pt.dtick=_):ue===2*_&&he===3*g?Pt.dtick=_:ue!==_||(Nt._input.minor||{}).nticks?Ot(ue/he,2.5)?Pt.dtick=ue/2:Pt.dtick=ue:Pt.dtick=g:String(Nt.dtick).charAt(0)==="M"?we?Pt.dtick="M1":mt(ue,he)?ue>=12&&he===2&&(Pt.dtick="M3"):Pt.dtick=Nt.dtick:String(Pt.dtick).charAt(0)==="L"?String(Nt.dtick).charAt(0)==="L"?mt(ue,he)||(Pt.dtick=Ot(ue/he,2.5)?Nt.dtick/2:Nt.dtick):Pt.dtick="D1":Pt.dtick==="D2"&&+Nt.dtick>1&&(Pt.dtick=1)}Pt.range=Nt.range}Nt.minor._tick0Init===void 0&&(Pt.tick0=Nt.tick0)},Y.prepTicks=function(Pt,Nt){var ee=h.simpleMap(Pt.range,Pt.r2l,void 0,void 0,Nt);if(Pt.tickmode==="auto"||!Pt.dtick){var te,ge=Pt.nticks;ge||(Pt.type==="category"||Pt.type==="multicategory"?(te=Pt.tickfont?h.bigFont(Pt.tickfont.size||12):15,ge=Pt._length/te):(te=Pt._id.charAt(0)==="y"?40:80,ge=h.constrain(Pt._length/te,4,9)+1),Pt._name==="radialaxis"&&(ge*=2)),Pt.minor&&Pt.minor.tickmode!=="array"||Pt.tickmode==="array"&&(ge*=100),Pt._roughDTick=Math.abs(ee[1]-ee[0])/ge,Y.autoTicks(Pt,Pt._roughDTick),Pt._minDtick>0&&Pt.dtick<2*Pt._minDtick&&(Pt.dtick=Pt._minDtick,Pt.tick0=Pt.l2r(Pt._forceTick0))}Pt.ticklabelmode==="period"&&function(pe){var me;function ce(){return!(k(pe.dtick)||pe.dtick.charAt(0)!=="M")}var we=ce(),ue=Y.getTickFormat(pe);if(ue){var he=pe._dtickInit!==pe.dtick;/%[fLQsSMX]/.test(ue)||(/%[HI]/.test(ue)?(me=M,he&&!we&&pe.dtick<M&&(pe.dtick=M)):/%p/.test(ue)?(me=A,he&&!we&&pe.dtick<A&&(pe.dtick=A)):/%[Aadejuwx]/.test(ue)?(me=g,he&&!we&&pe.dtick<g&&(pe.dtick=g)):/%[UVW]/.test(ue)?(me=_,he&&!we&&pe.dtick<_&&(pe.dtick=_)):/%[Bbm]/.test(ue)?(me=b,he&&(we?vt(pe.dtick)<1:pe.dtick<x)&&(pe.dtick="M1")):/%[q]/.test(ue)?(me=v,he&&(we?vt(pe.dtick)<3:pe.dtick<p)&&(pe.dtick="M3")):/%[Yy]/.test(ue)&&(me=f,he&&(we?vt(pe.dtick)<12:pe.dtick<d)&&(pe.dtick="M12")))}(we=ce())&&pe.tick0===pe._dowTick0&&(pe.tick0=pe._rawTick0),pe._definedDelta=me}(Pt),Pt.tick0||(Pt.tick0=Pt.type==="date"?"2000-01-01":0),Pt.type==="date"&&Pt.dtick<.1&&(Pt.dtick=.1),bt(Pt)},Y.calcTicks=function(Pt,Nt){for(var ee,te,ge=Pt.type,pe=Pt.calendar,me=Pt.ticklabelstep,ce=Pt.ticklabelmode==="period",we=h.simpleMap(Pt.range,Pt.r2l,void 0,void 0,Nt),ue=we[1]<we[0],he=Math.min(we[0],we[1]),be=Math.max(we[0],we[1]),Pe=Math.max(1e3,Pt._length||0),De=[],Ue=[],tr=[],Ge=[],Ze=Pt.minor&&(Pt.minor.ticks||Pt.minor.showgrid),We=1;We>=(Ze?0:1);We--){var pr=!We;We?(Pt._dtickInit=Pt.dtick,Pt._tick0Init=Pt.tick0):(Pt.minor._dtickInit=Pt.minor.dtick,Pt.minor._tick0Init=Pt.minor.tick0);var xr=We?Pt:h.extendFlat({},Pt,Pt.minor);if(pr?Y.prepMinorTicks(xr,Pt,Nt):Y.prepTicks(xr,Nt),xr.tickmode!=="array")if(xr.tickmode!=="sync"){var sr=pt(we),$e=sr[0],ir=sr[1],Ke=k(xr.dtick),ar=ge==="log"&&!(Ke||xr.dtick.charAt(0)==="L"),fr=Y.tickFirst(xr,Nt);if(We){if(Pt._tmin=fr,fr<$e!==ue)break;ge!=="category"&&ge!=="multicategory"||(ir=ue?Math.max(-.5,ir):Math.min(Pt._categories.length-.5,ir))}var mr,Cr,Er=null,_r=fr;We&&(Ke?Cr=Pt.dtick:ge==="date"?typeof Pt.dtick=="string"&&Pt.dtick.charAt(0)==="M"&&(Cr=b*Pt.dtick.substring(1)):Cr=Pt._roughDTick,mr=Math.round((Pt.r2l(_r)-Pt.r2l(Pt.tick0))/Cr)-1);var Sr=xr.dtick;for(xr.rangebreaks&&xr._tick0Init!==xr.tick0&&(_r=Gt(_r,Pt),ue||(_r=Y.tickIncrement(_r,Sr,!ue,pe))),We&&ce&&(_r=Y.tickIncrement(_r,Sr,!ue,pe),mr--);ue?_r>=ir:_r<=ir;_r=Y.tickIncrement(_r,Sr,ue,pe)){if(We&&mr++,xr.rangebreaks&&!ue){if(_r<$e)continue;if(xr.maskBreaks(_r)===O&&Gt(_r,xr)>=be)break}if(tr.length>Pe||_r===Er)break;Er=_r;var Xr={value:_r};We?(ar&&_r!==(0|_r)&&(Xr.simpleLabel=!0),me>1&&mr%me&&(Xr.skipLabel=!0),tr.push(Xr)):(Xr.minor=!0,Ge.push(Xr))}}else tr=[],De=st(Pt);else We?(tr=[],De=at(Pt)):(Ge=[],Ue=at(Pt))}if(Ze&&!(Pt.minor.ticks==="inside"&&Pt.ticks==="outside"||Pt.minor.ticks==="outside"&&Pt.ticks==="inside")){for(var en=tr.map(function(Me){return Me.value}),sn=[],tn=0;tn<Ge.length;tn++){var qr=Ge[tn],vn=qr.value;if(en.indexOf(vn)===-1){for(var je=!1,nr=0;!je&&nr<tr.length;nr++)1e7+tr[nr].value===1e7+vn&&(je=!0);je||sn.push(qr)}}Ge=sn}if(ce&&function(Me,qe,Qe){for(var yr=0;yr<Me.length;yr++){var br=Me[yr].value,Ar=yr,cr=yr+1;yr<Me.length-1?(Ar=yr,cr=yr+1):yr>0?(Ar=yr-1,cr=yr):(Ar=yr,cr=yr);var Xe,Je=Me[Ar].value,lr=Me[cr].value,ur=Math.abs(lr-Je),Lr=Qe||ur,Ir=0;Lr>=d?Ir=ur>=d&&ur<=u?ur:f:Qe===v&&Lr>=p?Ir=ur>=p&&ur<=w?ur:v:Lr>=x?Ir=ur>=x&&ur<=y?ur:b:Qe===_&&Lr>=_?Ir=_:Lr>=g?Ir=g:Qe===A&&Lr>=A?Ir=A:Qe===M&&Lr>=M&&(Ir=M),Ir>=ur&&(Ir=ur,Xe=!0);var Gr=br+Ir;if(qe.rangebreaks&&Ir>0){for(var Nr=0,Kr=0;Kr<84;Kr++){var Vr=(Kr+.5)/84;qe.maskBreaks(br*(1-Vr)+Vr*Gr)!==O&&Nr++}(Ir*=Nr/84)||(Me[yr].drop=!0),Xe&&ur>_&&(Ir=ur)}(Ir>0||yr===0)&&(Me[yr].periodX=br+Ir/2)}}(tr,Pt,Pt._definedDelta),Pt.rangebreaks){var hr=Pt._id.charAt(0)==="y",gr=1;Pt.tickmode==="auto"&&(gr=Pt.tickfont?Pt.tickfont.size:12);var Mr=NaN;for(ee=tr.length-1;ee>-1;ee--)if(tr[ee].drop)tr.splice(ee,1);else{tr[ee].value=Gt(tr[ee].value,Pt);var Hr=Pt.c2p(tr[ee].value);(hr?Mr>Hr-gr:Mr<Hr+gr)?tr.splice(ue?ee+1:ee,1):Mr=Hr}}Zt(Pt)&&Math.abs(we[1]-we[0])===360&&tr.pop(),Pt._tmax=(tr[tr.length-1]||{}).value,Pt._prevDateHead="",Pt._inCalcTicks=!0;var Pr,Dr,Qr=function(Me){Me.text="",Pt._prevDateHead=te};for(tr=tr.concat(Ge),ee=0;ee<tr.length;ee++){var He=tr[ee].minor,wr=tr[ee].value;He?Ue.push({x:wr,minor:!0}):(te=Pt._prevDateHead,Pr=Y.tickText(Pt,wr,!1,tr[ee].simpleLabel),(Dr=tr[ee].periodX)!==void 0&&(Pr.periodX=Dr,(Dr>be||Dr<he)&&(Dr>be&&(Pr.periodX=be),Dr<he&&(Pr.periodX=he),Qr(Pr))),tr[ee].skipLabel&&Qr(Pr),De.push(Pr))}return De=De.concat(Ue),Pt._inCalcTicks=!1,ce&&De.length&&(De[0].noTick=!0),De};var ht=[2,5,10],Lt=[1,2,3,6,12],Mt=[1,2,5,10,15,30],_t=[1,2,3,7,14],St=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Dt=[-.301,0,.301,.699,1],ut=[15,30,45,90,180];function Tt(Pt,Nt,ee){return Nt*h.roundUp(Pt/Nt,ee)}function bt(Pt){var Nt=Pt.dtick;if(Pt._tickexponent=0,k(Nt)||typeof Nt=="string"||(Nt=1),Pt.type!=="category"&&Pt.type!=="multicategory"||(Pt._tickround=null),Pt.type==="date"){var ee=Pt.r2l(Pt.tick0),te=Pt.l2r(ee).replace(/(^-|i)/g,""),ge=te.length;if(String(Nt).charAt(0)==="M")ge>10||te.substr(5)!=="01-01"?Pt._tickround="d":Pt._tickround=+Nt.substr(1)%12==0?"y":"m";else if(Nt>=g&&ge<=10||Nt>=15*g)Pt._tickround="d";else if(Nt>=L&&ge<=16||Nt>=M)Pt._tickround="M";else if(Nt>=E&&ge<=19||Nt>=L)Pt._tickround="S";else{var pe=Pt.l2r(ee+Nt).replace(/^-/,"").length;Pt._tickround=Math.max(ge,pe)-20,Pt._tickround<0&&(Pt._tickround=4)}}else if(k(Nt)||Nt.charAt(0)==="L"){var me=Pt.range.map(Pt.r2d||Number);k(Nt)||(Nt=Number(Nt.substr(1))),Pt._tickround=2-Math.floor(Math.log(Nt)/Math.LN10+.01);var ce=Math.max(Math.abs(me[0]),Math.abs(me[1])),we=Math.floor(Math.log(ce)/Math.LN10+.01),ue=Pt.minexponent===void 0?3:Pt.minexponent;Math.abs(we)>ue&&(Ft(Pt.exponentformat)&&!$t(we)?Pt._tickexponent=3*Math.round((we-1)/3):Pt._tickexponent=we)}else Pt._tickround=null}function It(Pt,Nt,ee){var te=Pt.tickfont||{};return{x:Nt,dx:0,dy:0,text:ee||"",fontSize:te.size,font:te.family,fontColor:te.color}}Y.autoTicks=function(Pt,Nt,ee){var te;function ge(be){return Math.pow(be,Math.floor(Math.log(Nt)/Math.LN10))}if(Pt.type==="date"){Pt.tick0=h.dateTick0(Pt.calendar,0);var pe=2*Nt;if(pe>f)Nt/=f,te=ge(10),Pt.dtick="M"+12*Tt(Nt,te,ht);else if(pe>b)Nt/=b,Pt.dtick="M"+Tt(Nt,1,Lt);else if(pe>g){if(Pt.dtick=Tt(Nt,g,Pt._hasDayOfWeekBreaks?[1,2,7,14]:_t),!ee){var me=Y.getTickFormat(Pt),ce=Pt.ticklabelmode==="period";ce&&(Pt._rawTick0=Pt.tick0),/%[uVW]/.test(me)?Pt.tick0=h.dateTick0(Pt.calendar,2):Pt.tick0=h.dateTick0(Pt.calendar,1),ce&&(Pt._dowTick0=Pt.tick0)}}else pe>M?Pt.dtick=Tt(Nt,M,Lt):pe>L?Pt.dtick=Tt(Nt,L,Mt):pe>E?Pt.dtick=Tt(Nt,E,Mt):(te=ge(10),Pt.dtick=Tt(Nt,te,ht))}else if(Pt.type==="log"){Pt.tick0=0;var we=h.simpleMap(Pt.range,Pt.r2l);if(Pt._isMinor&&(Nt*=1.5),Nt>.7)Pt.dtick=Math.ceil(Nt);else if(Math.abs(we[1]-we[0])<1){var ue=1.5*Math.abs((we[1]-we[0])/Nt);Nt=Math.abs(Math.pow(10,we[1])-Math.pow(10,we[0]))/ue,te=ge(10),Pt.dtick="L"+Tt(Nt,te,ht)}else Pt.dtick=Nt>.3?"D2":"D1"}else Pt.type==="category"||Pt.type==="multicategory"?(Pt.tick0=0,Pt.dtick=Math.ceil(Math.max(Nt,1))):Zt(Pt)?(Pt.tick0=0,te=1,Pt.dtick=Tt(Nt,te,ut)):(Pt.tick0=0,te=ge(10),Pt.dtick=Tt(Nt,te,ht));if(Pt.dtick===0&&(Pt.dtick=1),!k(Pt.dtick)&&typeof Pt.dtick!="string"){var he=Pt.dtick;throw Pt.dtick=1,"ax.dtick error: "+String(he)}},Y.tickIncrement=function(Pt,Nt,ee,te){var ge=ee?-1:1;if(k(Nt))return h.increment(Pt,ge*Nt);var pe=Nt.charAt(0),me=ge*Number(Nt.substr(1));if(pe==="M")return h.incrementMonth(Pt,me,te);if(pe==="L")return Math.log(Math.pow(10,Pt)+me)/Math.LN10;if(pe==="D"){var ce=Nt==="D2"?Dt:St,we=Pt+.01*ge,ue=h.roundUp(h.mod(we,1),ce,ee);return Math.floor(we)+Math.log(T.round(Math.pow(10,ue),1))/Math.LN10}throw"unrecognized dtick "+String(Nt)},Y.tickFirst=function(Pt,Nt){var ee=Pt.r2l||Number,te=h.simpleMap(Pt.range,ee,void 0,void 0,Nt),ge=te[1]<te[0],pe=ge?Math.floor:Math.ceil,me=pt(te)[0],ce=Pt.dtick,we=ee(Pt.tick0);if(k(ce)){var ue=pe((me-we)/ce)*ce+we;return Pt.type!=="category"&&Pt.type!=="multicategory"||(ue=h.constrain(ue,0,Pt._categories.length-1)),ue}var he=ce.charAt(0),be=Number(ce.substr(1));if(he==="M"){for(var Pe,De,Ue,tr=0,Ge=we;tr<10;){if(((Pe=Y.tickIncrement(Ge,ce,ge,Pt.calendar))-me)*(Ge-me)<=0)return ge?Math.min(Ge,Pe):Math.max(Ge,Pe);De=(me-(Ge+Pe)/2)/(Pe-Ge),Ue=he+(Math.abs(Math.round(De))||1)*be,Ge=Y.tickIncrement(Ge,Ue,De<0?!ge:ge,Pt.calendar),tr++}return h.error("tickFirst did not converge",Pt),Ge}if(he==="L")return Math.log(pe((Math.pow(10,me)-we)/be)*be+we)/Math.LN10;if(he==="D"){var Ze=ce==="D2"?Dt:St,We=h.roundUp(h.mod(me,1),Ze,ge);return Math.floor(me)+Math.log(T.round(Math.pow(10,We),1))/Math.LN10}throw"unrecognized dtick "+String(ce)},Y.tickText=function(Pt,Nt,ee,te){var ge,pe=It(Pt,Nt),me=Pt.tickmode==="array",ce=ee||me,we=Pt.type,ue=we==="category"?Pt.d2l_noadd:Pt.d2l;if(me&&Array.isArray(Pt.ticktext)){var he=h.simpleMap(Pt.range,Pt.r2l),be=(Math.abs(he[1]-he[0])-(Pt._lBreaks||0))/1e4;for(ge=0;ge<Pt.ticktext.length&&!(Math.abs(Nt-ue(Pt.tickvals[ge]))<be);ge++);if(ge<Pt.ticktext.length)return pe.text=String(Pt.ticktext[ge]),pe}function Pe(Ge){if(Ge===void 0)return!0;if(ee)return Ge==="none";var Ze={first:Pt._tmin,last:Pt._tmax}[Ge];return Ge!=="all"&&Nt!==Ze}var De=ee?"never":Pt.exponentformat!=="none"&&Pe(Pt.showexponent)?"hide":"";if(we==="date"?function(Ge,Ze,We,pr){var xr=Ge._tickround,sr=We&&Ge.hoverformat||Y.getTickFormat(Ge);pr&&(xr=k(xr)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[xr]);var $e,ir=h.formatDate(Ze.x,sr,xr,Ge._dateFormat,Ge.calendar,Ge._extraFormat),Ke=ir.indexOf(`
`);if(Ke!==-1&&($e=ir.substr(Ke+1),ir=ir.substr(0,Ke)),pr&&(ir==="00:00:00"||ir==="00:00"?(ir=$e,$e=""):ir.length===8&&(ir=ir.replace(/:00$/,""))),$e)if(We)xr==="d"?ir+=", "+$e:ir=$e+(ir?", "+ir:"");else if(Ge._inCalcTicks&&Ge._prevDateHead===$e){var ar=Yt(Ge),fr=Ge._trueSide||Ge.side;(!ar&&fr==="top"||ar&&fr==="bottom")&&(ir+="<br> ")}else Ge._prevDateHead=$e,ir+="<br>"+$e;Ze.text=ir}(Pt,pe,ee,ce):we==="log"?function(Ge,Ze,We,pr,xr){var sr=Ge.dtick,$e=Ze.x,ir=Ge.tickformat,Ke=typeof sr=="string"&&sr.charAt(0);if(xr==="never"&&(xr=""),pr&&Ke!=="L"&&(sr="L3",Ke="L"),ir||Ke==="L")Ze.text=Wt(Math.pow(10,$e),Ge,xr,pr);else if(k(sr)||Ke==="D"&&h.mod($e+.01,1)<.1){var ar=Math.round($e),fr=Math.abs(ar),mr=Ge.exponentformat;mr==="power"||Ft(mr)&&$t(ar)?(Ze.text=ar===0?1:ar===1?"10":"10<sup>"+(ar>1?"":S)+fr+"</sup>",Ze.fontSize*=1.25):(mr==="e"||mr==="E")&&fr>2?Ze.text="1"+mr+(ar>0?"+":S)+fr:(Ze.text=Wt(Math.pow(10,$e),Ge,"","fakehover"),sr==="D1"&&Ge._id.charAt(0)==="y"&&(Ze.dy-=Ze.fontSize/6))}else{if(Ke!=="D")throw"unrecognized dtick "+String(sr);Ze.text=String(Math.round(Math.pow(10,h.mod($e,1)))),Ze.fontSize*=.75}if(Ge.dtick==="D1"){var Cr=String(Ze.text).charAt(0);Cr!=="0"&&Cr!=="1"||(Ge._id.charAt(0)==="y"?Ze.dx-=Ze.fontSize/4:(Ze.dy+=Ze.fontSize/2,Ze.dx+=(Ge.range[1]>Ge.range[0]?1:-1)*Ze.fontSize*($e<0?.5:.25)))}}(Pt,pe,0,ce,De):we==="category"?function(Ge,Ze){var We=Ge._categories[Math.round(Ze.x)];We===void 0&&(We=""),Ze.text=String(We)}(Pt,pe):we==="multicategory"?function(Ge,Ze,We){var pr=Math.round(Ze.x),xr=Ge._categories[pr]||[],sr=xr[1]===void 0?"":String(xr[1]),$e=xr[0]===void 0?"":String(xr[0]);We?Ze.text=$e+" - "+sr:(Ze.text=sr,Ze.text2=$e)}(Pt,pe,ee):Zt(Pt)?function(Ge,Ze,We,pr,xr){if(Ge.thetaunit!=="radians"||We)Ze.text=Wt(Ze.x,Ge,xr,pr);else{var sr=Ze.x/180;if(sr===0)Ze.text="0";else{var $e=function(Ke){function ar(Er,_r){return Math.abs(Er-_r)<=1e-6}var fr=function(Er){for(var _r=1;!ar(Math.round(Er*_r)/_r,Er);)_r*=10;return _r}(Ke),mr=Ke*fr,Cr=Math.abs(function Er(_r,Sr){return ar(Sr,0)?_r:Er(Sr,_r%Sr)}(mr,fr));return[Math.round(mr/Cr),Math.round(fr/Cr)]}(sr);if($e[1]>=100)Ze.text=Wt(h.deg2rad(Ze.x),Ge,xr,pr);else{var ir=Ze.x<0;$e[1]===1?$e[0]===1?Ze.text="\u03C0":Ze.text=$e[0]+"\u03C0":Ze.text=["<sup>",$e[0],"</sup>","\u2044","<sub>",$e[1],"</sub>","\u03C0"].join(""),ir&&(Ze.text=S+Ze.text)}}}}(Pt,pe,ee,ce,De):function(Ge,Ze,We,pr,xr){xr==="never"?xr="":Ge.showexponent==="all"&&Math.abs(Ze.x/Ge.dtick)<1e-6&&(xr="hide"),Ze.text=Wt(Ze.x,Ge,xr,pr)}(Pt,pe,0,ce,De),te||(Pt.tickprefix&&!Pe(Pt.showtickprefix)&&(pe.text=Pt.tickprefix+pe.text),Pt.ticksuffix&&!Pe(Pt.showticksuffix)&&(pe.text+=Pt.ticksuffix)),Pt.labelalias&&Pt.labelalias.hasOwnProperty(pe.text)){var Ue=Pt.labelalias[pe.text];typeof Ue=="string"&&(pe.text=Ue)}if(Pt.tickson==="boundaries"||Pt.showdividers){var tr=function(Ge){var Ze=Pt.l2p(Ge);return Ze>=0&&Ze<=Pt._length?Ge:null};pe.xbnd=[tr(pe.x-.5),tr(pe.x+Pt.dtick-.5)]}return pe},Y.hoverLabelText=function(Pt,Nt,ee){ee&&(Pt=h.extendFlat({},Pt,{hoverformat:ee}));var te=Array.isArray(Nt)?Nt[0]:Nt,ge=Array.isArray(Nt)?Nt[1]:void 0;if(ge!==void 0&&ge!==te)return Y.hoverLabelText(Pt,te,ee)+" - "+Y.hoverLabelText(Pt,ge,ee);var pe=Pt.type==="log"&&te<=0,me=Y.tickText(Pt,Pt.c2l(pe?-te:te),"hover").text;return pe?te===0?"0":S+me:me};var zt=["f","p","n","\u03BC","m","","k","M","G","T"];function Ft(Pt){return Pt==="SI"||Pt==="B"}function $t(Pt){return Pt>14||Pt<-15}function Wt(Pt,Nt,ee,te){var ge=Pt<0,pe=Nt._tickround,me=ee||Nt.exponentformat||"B",ce=Nt._tickexponent,we=Y.getTickFormat(Nt),ue=Nt.separatethousands;if(te){var he={exponentformat:me,minexponent:Nt.minexponent,dtick:Nt.showexponent==="none"?Nt.dtick:k(Pt)&&Math.abs(Pt)||1,range:Nt.showexponent==="none"?Nt.range.map(Nt.r2d):[0,Pt||1]};bt(he),pe=(Number(he._tickround)||0)+4,ce=he._tickexponent,Nt.hoverformat&&(we=Nt.hoverformat)}if(we)return Nt._numFormat(we)(Pt).replace(/-/g,S);var be,Pe=Math.pow(10,-pe)/2;if(me==="none"&&(ce=0),(Pt=Math.abs(Pt))<Pe)Pt="0",ge=!1;else{if(Pt+=Pe,ce&&(Pt*=Math.pow(10,-ce),pe+=ce),pe===0)Pt=String(Math.floor(Pt));else if(pe<0){Pt=(Pt=String(Math.round(Pt))).substr(0,Pt.length+pe);for(var De=pe;De<0;De++)Pt+="0"}else{var Ue=(Pt=String(Pt)).indexOf(".")+1;Ue&&(Pt=Pt.substr(0,Ue+pe).replace(/\.?0+$/,""))}Pt=h.numSeparate(Pt,Nt._separators,ue)}return ce&&me!=="hide"&&(Ft(me)&&$t(ce)&&(me="power"),be=ce<0?S+-ce:me!=="power"?"+"+ce:String(ce),me==="e"||me==="E"?Pt+=me+be:me==="power"?Pt+="\xD710<sup>"+be+"</sup>":me==="B"&&ce===9?Pt+="B":Ft(me)&&(Pt+=zt[ce/3+5])),ge?S+Pt:Pt}function Xt(Pt,Nt){if(Pt){var ee=Object.keys(z).reduce(function(te,ge){return Nt.indexOf(ge)!==-1&&z[ge].forEach(function(pe){te[pe]=1}),te},{});Object.keys(Pt).forEach(function(te){ee[te]||(te.length===1?Pt[te]=0:delete Pt[te])})}}function ae(Pt,Nt){for(var ee=[],te={},ge=0;ge<Nt.length;ge++){var pe=Nt[ge];te[pe.text2]?te[pe.text2].push(pe.x):te[pe.text2]=[pe.x]}for(var me in te)ee.push(It(Pt,h.interp(te[me],.5),me));return ee}function Qt(Pt){return Pt.periodX!==void 0?Pt.periodX:Pt.x}function de(Pt){return[Pt.text,Pt.x,Pt.axInfo,Pt.font,Pt.fontSize,Pt.fontColor].join("_")}function ye(Pt){var Nt=Pt.title.font.size,ee=(Pt.title.text.match(e.BR_TAG_ALL)||[]).length;return Pt.title.hasOwnProperty("standoff")?ee?Nt*(et+ee*J):Nt*et:ee?Nt*(ee+1)*J:Nt}function ve(Pt,Nt){var ee=Pt.l2p(Nt);return ee>1&&ee<Pt._length-1}function ie(Pt){var Nt=T.select(Pt),ee=Nt.select(".text-math-group");return ee.empty()?Nt.select("text"):ee}function se(Pt){return Pt._id+".automargin"}function ke(Pt){return se(Pt)+".mirror"}function Ae(Pt){return Pt._id+".rangeslider"}function Ie(Pt,Nt){for(var ee=0;ee<Nt.length;ee++)Pt.indexOf(Nt[ee])===-1&&Pt.push(Nt[ee])}function Te(Pt,Nt,ee){var te,ge,pe=[],me=[],ce=Pt.layout;for(te=0;te<Nt.length;te++)pe.push(Y.getFromId(Pt,Nt[te]));for(te=0;te<ee.length;te++)me.push(Y.getFromId(Pt,ee[te]));var we=Object.keys(i),ue=["anchor","domain","overlaying","position","side","tickangle","editType"],he=["linear","log"];for(te=0;te<we.length;te++){var be=we[te],Pe=pe[0][be],De=me[0][be],Ue=!0,tr=!1,Ge=!1;if(be.charAt(0)!=="_"&&typeof Pe!="function"&&ue.indexOf(be)===-1){for(ge=1;ge<pe.length&&Ue;ge++){var Ze=pe[ge][be];be==="type"&&he.indexOf(Pe)!==-1&&he.indexOf(Ze)!==-1&&Pe!==Ze?tr=!0:Ze!==Pe&&(Ue=!1)}for(ge=1;ge<me.length&&Ue;ge++){var We=me[ge][be];be==="type"&&he.indexOf(De)!==-1&&he.indexOf(We)!==-1&&De!==We?Ge=!0:me[ge][be]!==De&&(Ue=!1)}Ue&&(tr&&(ce[pe[0]._name].type="linear"),Ge&&(ce[me[0]._name].type="linear"),Vt(ce,be,pe,me,Pt._fullLayout._dfltTitle))}}for(te=0;te<Pt._fullLayout.annotations.length;te++){var pr=Pt._fullLayout.annotations[te];Nt.indexOf(pr.xref)!==-1&&ee.indexOf(pr.yref)!==-1&&h.swapAttrs(ce.annotations[te],["?"])}}function Vt(Pt,Nt,ee,te,ge){var pe,me=h.nestedProperty,ce=me(Pt[ee[0]._name],Nt).get(),we=me(Pt[te[0]._name],Nt).get();for(Nt==="title"&&(ce&&ce.text===ge.x&&(ce.text=ge.y),we&&we.text===ge.y&&(we.text=ge.x)),pe=0;pe<ee.length;pe++)me(Pt,ee[pe]._name+"."+Nt).set(we);for(pe=0;pe<te.length;pe++)me(Pt,te[pe]._name+"."+Nt).set(ce)}function Zt(Pt){return Pt._id==="angularaxis"}function Gt(Pt,Nt){for(var ee=Nt._rangebreaks.length,te=0;te<ee;te++){var ge=Nt._rangebreaks[te];if(Pt>=ge.min&&Pt<ge.max)return ge.max}return Pt}function Yt(Pt){return(Pt.ticklabelposition||"").indexOf("inside")!==-1}function ne(Pt,Nt){Yt(Pt._anchorAxis||{})&&Pt._hideCounterAxisInsideTickLabels&&Pt._hideCounterAxisInsideTickLabels(Nt)}function re(Pt,Nt,ee,te){var ge,pe=Pt.anchor==="free"||Pt.overlaying!==void 0&&Pt.overlaying!==!1?Pt.overlaying:Pt._id;ge=te?Pt.side==="right"?Nt:-Nt:Nt,pe in ee||(ee[pe]={}),Pt.side in ee[pe]||(ee[pe][Pt.side]=0),ee[pe][Pt.side]+=ge}Y.getTickFormat=function(Pt){var Nt,ee,te,ge,pe,me,ce,we;function ue(Pe){return typeof Pe!="string"?Pe:Number(Pe.replace("M",""))*b}function he(Pe,De){var Ue=["L","D"];if(typeof Pe==typeof De){if(typeof Pe=="number")return Pe-De;var tr=Ue.indexOf(Pe.charAt(0)),Ge=Ue.indexOf(De.charAt(0));return tr===Ge?Number(Pe.replace(/(L|D)/g,""))-Number(De.replace(/(L|D)/g,"")):tr-Ge}return typeof Pe=="number"?1:-1}function be(Pe,De){var Ue=De[0]===null,tr=De[1]===null,Ge=he(Pe,De[0])>=0,Ze=he(Pe,De[1])<=0;return(Ue||Ge)&&(tr||Ze)}if(Pt.tickformatstops&&Pt.tickformatstops.length>0)switch(Pt.type){case"date":case"linear":for(Nt=0;Nt<Pt.tickformatstops.length;Nt++)if((te=Pt.tickformatstops[Nt]).enabled&&(ge=Pt.dtick,pe=te.dtickrange,me=void 0,ce=void 0,we=void 0,me=ue||function(Pe){return Pe},ce=pe[0],we=pe[1],(!ce&&typeof ce!="number"||me(ce)<=me(ge))&&(!we&&typeof we!="number"||me(we)>=me(ge)))){ee=te;break}break;case"log":for(Nt=0;Nt<Pt.tickformatstops.length;Nt++)if((te=Pt.tickformatstops[Nt]).enabled&&be(Pt.dtick,te.dtickrange)){ee=te;break}}return ee?ee.value:Pt.tickformat},Y.getSubplots=function(Pt,Nt){var ee=Pt._fullLayout._subplots,te=ee.cartesian.concat(ee.gl2d||[]),ge=Nt?Y.findSubplotsWithAxis(te,Nt):te;return ge.sort(function(pe,me){var ce=pe.substr(1).split("y"),we=me.substr(1).split("y");return ce[0]===we[0]?+ce[1]-+we[1]:+ce[0]-+we[0]}),ge},Y.findSubplotsWithAxis=function(Pt,Nt){for(var ee=new RegExp(Nt._id.charAt(0)==="x"?"^"+Nt._id+"y":Nt._id+"$"),te=[],ge=0;ge<Pt.length;ge++){var pe=Pt[ge];ee.test(pe)&&te.push(pe)}return te},Y.makeClipPaths=function(Pt){var Nt=Pt._fullLayout;if(!Nt._hasOnlyLargeSploms){var ee,te,ge={_offset:0,_length:Nt.width,_id:""},pe={_offset:0,_length:Nt.height,_id:""},me=Y.list(Pt,"x",!0),ce=Y.list(Pt,"y",!0),we=[];for(ee=0;ee<me.length;ee++)for(we.push({x:me[ee],y:pe}),te=0;te<ce.length;te++)ee===0&&we.push({x:ge,y:ce[te]}),we.push({x:me[ee],y:ce[te]});var ue=Nt._clips.selectAll(".axesclip").data(we,function(he){return he.x._id+he.y._id});ue.enter().append("clipPath").classed("axesclip",!0).attr("id",function(he){return"clip"+Nt._uid+he.x._id+he.y._id}).append("rect"),ue.exit().remove(),ue.each(function(he){T.select(this).select("rect").attr({x:he.x._offset||0,y:he.y._offset||0,width:he.x._length||1,height:he.y._length||1})})}},Y.draw=function(Pt,Nt,ee){var te=Pt._fullLayout;Nt==="redraw"&&te._paper.selectAll("g.subplot").each(function(ce){var we=ce[0],ue=te._plots[we];if(ue){var he=ue.xaxis,be=ue.yaxis;ue.xaxislayer.selectAll("."+he._id+"tick").remove(),ue.yaxislayer.selectAll("."+be._id+"tick").remove(),ue.xaxislayer.selectAll("."+he._id+"tick2").remove(),ue.yaxislayer.selectAll("."+be._id+"tick2").remove(),ue.xaxislayer.selectAll("."+he._id+"divider").remove(),ue.yaxislayer.selectAll("."+be._id+"divider").remove(),ue.minorGridlayer&&ue.minorGridlayer.selectAll("path").remove(),ue.gridlayer&&ue.gridlayer.selectAll("path").remove(),ue.zerolinelayer&&ue.zerolinelayer.selectAll("path").remove(),te._infolayer.select(".g-"+he._id+"title").remove(),te._infolayer.select(".g-"+be._id+"title").remove()}});var ge=Nt&&Nt!=="redraw"?Nt:Y.listIds(Pt),pe=Y.list(Pt).filter(function(ce){return ce.autoshift}).map(function(ce){return ce.overlaying});ge.map(function(ce){var we=Y.getFromId(Pt,ce);if(we.tickmode==="sync"&&we.overlaying){var ue=ge.findIndex(function(he){return he===we.overlaying});ue>=0&&ge.unshift(ge.splice(ue,1).shift())}});var me={false:{left:0,right:0}};return h.syncOrAsync(ge.map(function(ce){return function(){if(ce){var we=Y.getFromId(Pt,ce);ee||(ee={}),ee.axShifts=me,ee.overlayingShiftedAx=pe;var ue=Y.drawOne(Pt,we,ee);return we._shiftPusher&&re(we,we._fullDepth||0,me,!0),we._r=we.range.slice(),we._rl=h.simpleMap(we._r,we.r2l),ue}}}))},Y.drawOne=function(Pt,Nt,ee){var te,ge,pe,me=(ee=ee||{}).axShifts||{},ce=ee.overlayingShiftedAx||[];Nt.setScale();var we=Pt._fullLayout,ue=Nt._id,he=ue.charAt(0),be=Y.counterLetter(ue),Pe=we._plots[Nt._mainSubplot];if(Pe){if(Nt._shiftPusher=Nt.autoshift||ce.indexOf(Nt._id)!==-1||ce.indexOf(Nt.overlaying)!==-1,Nt._shiftPusher&Nt.anchor==="free"){var De=Nt.linewidth/2||0;Nt.ticks==="inside"&&(De+=Nt.ticklen),re(Nt,De,me,!0),re(Nt,Nt.shift||0,me,!1)}ee.skipTitle===!0&&Nt._shift!==void 0||(Nt._shift=function(cr,Xe){return cr.autoshift?Xe[cr.overlaying][cr.side]:cr.shift||0}(Nt,me));var Ue=Pe[he+"axislayer"],tr=Nt._mainLinePosition,Ge=tr+=Nt._shift,Ze=Nt._mainMirrorPosition,We=Nt._vals=Y.calcTicks(Nt),pr=[Nt.mirror,Ge,Ze].join("_");for(te=0;te<We.length;te++)We[te].axInfo=pr;Nt._selections={},Nt._tickAngles&&(Nt._prevTickAngles=Nt._tickAngles),Nt._tickAngles={},Nt._depth=null;var xr={};if(Nt.visible){var sr,$e,ir=Y.makeTransTickFn(Nt),Ke=Y.makeTransTickLabelFn(Nt),ar=Nt.ticks==="inside",fr=Nt.ticks==="outside";if(Nt.tickson==="boundaries"){var mr=function(cr,Xe){var Je,lr=[],ur=function(Lr,Ir){var Gr=Lr.xbnd[Ir];Gr!==null&&lr.push(h.extendFlat({},Lr,{x:Gr}))};if(Xe.length){for(Je=0;Je<Xe.length;Je++)ur(Xe[Je],0);ur(Xe[Je-1],1)}return lr}(0,We);$e=Y.clipEnds(Nt,mr),sr=ar?$e:mr}else $e=Y.clipEnds(Nt,We),sr=ar&&Nt.ticklabelmode!=="period"?$e:We;var Cr,Er=Nt._gridVals=$e,_r=function(cr,Xe){var Je,lr,ur=[],Lr=Xe.length&&Xe[Xe.length-1].x<Xe[0].x,Ir=function(Nr,Kr){var Vr=Nr.xbnd[Kr];Vr!==null&&ur.push(h.extendFlat({},Nr,{x:Vr}))};if(cr.showdividers&&Xe.length){for(Je=0;Je<Xe.length;Je++){var Gr=Xe[Je];Gr.text2!==lr&&Ir(Gr,Lr?1:0),lr=Gr.text2}Ir(Xe[Je-1],Lr?0:1)}return ur}(Nt,We);if(!we._hasOnlyLargeSploms){var Sr=Nt._subplotsWith,Xr={};for(te=0;te<Sr.length;te++){ge=Sr[te];var en=(pe=we._plots[ge])[be+"axis"],sn=en._mainAxis._id;if(!Xr[sn]){Xr[sn]=1;var tn=he==="x"?"M0,"+en._offset+"v"+en._length:"M"+en._offset+",0h"+en._length;Y.drawGrid(Pt,Nt,{vals:Er,counterAxis:en,layer:pe.gridlayer.select("."+ue),minorLayer:pe.minorGridlayer.select("."+ue),path:tn,transFn:ir}),Y.drawZeroLine(Pt,Nt,{counterAxis:en,layer:pe.zerolinelayer,path:tn,transFn:ir})}}}var qr=Y.getTickSigns(Nt),vn=Y.getTickSigns(Nt,"minor");if(Nt.ticks||Nt.minor&&Nt.minor.ticks){var je,nr,hr,gr,Mr=Y.makeTickPath(Nt,Ge,qr[2]),Hr=Y.makeTickPath(Nt,Ge,vn[2],{minor:!0});if(Nt._anchorAxis&&Nt.mirror&&Nt.mirror!==!0?(je=Y.makeTickPath(Nt,Ze,qr[3]),nr=Y.makeTickPath(Nt,Ze,vn[3],{minor:!0}),hr=Mr+je,gr=Hr+nr):(je="",nr="",hr=Mr,gr=Hr),Nt.showdividers&&fr&&Nt.tickson==="boundaries"){var Pr={};for(te=0;te<_r.length;te++)Pr[_r[te].x]=1;Cr=function(cr){return Pr[cr.x]?je:hr}}else Cr=function(cr){return cr.minor?gr:hr}}if(Y.drawTicks(Pt,Nt,{vals:sr,layer:Ue,path:Cr,transFn:ir}),Nt.mirror==="allticks"){var Dr=Object.keys(Nt._linepositions||{});for(te=0;te<Dr.length;te++){ge=Dr[te],pe=we._plots[ge];var Qr=Nt._linepositions[ge]||[],He=Qr[0],wr=Qr[1],Me=Qr[2],qe=Y.makeTickPath(Nt,He,Me?qr[0]:vn[0],{minor:Me})+Y.makeTickPath(Nt,wr,Me?qr[1]:vn[1],{minor:Me});Y.drawTicks(Pt,Nt,{vals:sr,layer:pe[he+"axislayer"],path:qe,transFn:ir})}}var Qe=[];if(Qe.push(function(){return Y.drawLabels(Pt,Nt,{vals:We,layer:Ue,plotinfo:pe,transFn:Ke,labelFns:Y.makeLabelFns(Nt,Ge)})}),Nt.type==="multicategory"){var yr={x:2,y:10}[he];Qe.push(function(){var cr={x:"height",y:"width"}[he],Xe=Ar()[cr]+yr+(Nt._tickAngles[ue+"tick"]?Nt.tickfont.size*J:0);return Y.drawLabels(Pt,Nt,{vals:ae(Nt,We),layer:Ue,cls:ue+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:ir,labelFns:Y.makeLabelFns(Nt,Ge+Xe*qr[4])})}),Qe.push(function(){return Nt._depth=qr[4]*(Ar("tick2")[Nt.side]-Ge),function(cr,Xe,Je){var lr=Xe._id+"divider",ur=Je.vals,Lr=Je.layer.selectAll("path."+lr).data(ur,de);Lr.exit().remove(),Lr.enter().insert("path",":first-child").classed(lr,1).classed("crisp",1).call(n.stroke,Xe.dividercolor).style("stroke-width",a.crispRound(cr,Xe.dividerwidth,1)+"px"),Lr.attr("transform",Je.transFn).attr("d",Je.path)}(Pt,Nt,{vals:_r,layer:Ue,path:Y.makeTickPath(Nt,Ge,qr[4],{len:Nt._depth}),transFn:ir})})}else Nt.title.hasOwnProperty("standoff")&&Qe.push(function(){Nt._depth=qr[4]*(Ar()[Nt.side]-Ge)});var br=m.getComponentMethod("rangeslider","isVisible")(Nt);return ee.skipTitle||br&&Nt.side==="bottom"||Qe.push(function(){return function(cr,Xe){var Je,lr=cr._fullLayout,ur=Xe._id,Lr=ur.charAt(0),Ir=Xe.title.font.size;if(Xe.title.hasOwnProperty("standoff"))Je=Xe._depth+Xe.title.standoff+ye(Xe);else{var Gr=Yt(Xe);if(Xe.type==="multicategory")Je=Xe._depth;else{var Nr=1.5*Ir;Gr&&(Nr=.5*Ir,Xe.ticks==="outside"&&(Nr+=Xe.ticklen)),Je=10+Nr+(Xe.linewidth?Xe.linewidth-1:0)}Gr||(Je+=Lr==="x"?Xe.side==="top"?Ir*(Xe.showticklabels?1:0):Ir*(Xe.showticklabels?1.5:.5):Xe.side==="right"?Ir*(Xe.showticklabels?1:.5):Ir*(Xe.showticklabels?.5:0))}var Kr,Vr,an,rn,nn=Y.getPxPosition(cr,Xe);if(Lr==="x"?(Vr=Xe._offset+Xe._length/2,an=Xe.side==="top"?nn-Je:nn+Je):(an=Xe._offset+Xe._length/2,Vr=Xe.side==="right"?nn+Je:nn-Je,Kr={rotate:"-90",offset:0}),Xe.type!=="multicategory"){var hn=Xe._selections[Xe._id+"tick"];if(rn={selection:hn,side:Xe.side},hn&&hn.node()&&hn.node().parentNode){var fn=a.getTranslate(hn.node().parentNode);rn.offsetLeft=fn.x,rn.offsetTop=fn.y}Xe.title.hasOwnProperty("standoff")&&(rn.pad=0)}return Xe._titleStandoff=Je,t.draw(cr,ur+"title",{propContainer:Xe,propName:Xe._name+".title.text",placeholder:lr._dfltTitle[Lr],avoid:rn,transform:Kr,attributes:{x:Vr,y:an,"text-anchor":"middle"}})}(Pt,Nt)}),Qe.push(function(){var cr,Xe,Je,lr,ur=Nt.side.charAt(0),Lr=X[Nt.side].charAt(0),Ir=Y.getPxPosition(Pt,Nt),Gr=fr?Nt.ticklen:0;(Nt.automargin||br||Nt._shiftPusher)&&(Nt.type==="multicategory"?cr=Ar("tick2"):(cr=Ar(),he==="x"&&ur==="b"&&(Nt._depth=Math.max(cr.width>0?cr.bottom-Ir:0,Gr))));var Nr=0,Kr=0;if(Nt._shiftPusher&&(Nr=Math.max(Gr,cr.height>0?ur==="l"?Ir-cr.left:cr.right-Ir:0),Nt.title.text!==we._dfltTitle[he]&&(Kr=(Nt._titleStandoff||0)+(Nt._titleScoot||0),ur==="l"&&(Kr+=ye(Nt))),Nt._fullDepth=Math.max(Nr,Kr)),Nt.automargin){Xe={x:0,y:0,r:0,l:0,t:0,b:0};var Vr=[0,1],an=typeof Nt._shift=="number"?Nt._shift:0;if(he==="x"){if(ur==="b"?Xe[ur]=Nt._depth:(Xe[ur]=Nt._depth=Math.max(cr.width>0?Ir-cr.top:0,Gr),Vr.reverse()),cr.width>0){var rn=cr.right-(Nt._offset+Nt._length);rn>0&&(Xe.xr=1,Xe.r=rn);var nn=Nt._offset-cr.left;nn>0&&(Xe.xl=0,Xe.l=nn)}}else if(ur==="l"?(Nt._depth=Math.max(cr.height>0?Ir-cr.left:0,Gr),Xe[ur]=Nt._depth-an):(Nt._depth=Math.max(cr.height>0?cr.right-Ir:0,Gr),Xe[ur]=Nt._depth+an,Vr.reverse()),cr.height>0){var hn=cr.bottom-(Nt._offset+Nt._length);hn>0&&(Xe.yb=0,Xe.b=hn);var fn=Nt._offset-cr.top;fn>0&&(Xe.yt=1,Xe.t=fn)}Xe[be]=Nt.anchor==="free"?Nt.position:Nt._anchorAxis.domain[Vr[0]],Nt.title.text!==we._dfltTitle[he]&&(Xe[ur]+=ye(Nt)+(Nt.title.standoff||0)),Nt.mirror&&Nt.anchor!=="free"&&((Je={x:0,y:0,r:0,l:0,t:0,b:0})[Lr]=Nt.linewidth,Nt.mirror&&Nt.mirror!==!0&&(Je[Lr]+=Gr),Nt.mirror===!0||Nt.mirror==="ticks"?Je[be]=Nt._anchorAxis.domain[Vr[1]]:Nt.mirror!=="all"&&Nt.mirror!=="allticks"||(Je[be]=[Nt._counterDomainMin,Nt._counterDomainMax][Vr[1]]))}br&&(lr=m.getComponentMethod("rangeslider","autoMarginOpts")(Pt,Nt)),typeof Nt.automargin=="string"&&(Xt(Xe,Nt.automargin),Xt(Je,Nt.automargin)),r.autoMargin(Pt,se(Nt),Xe),r.autoMargin(Pt,ke(Nt),Je),r.autoMargin(Pt,Ae(Nt),lr)}),h.syncOrAsync(Qe)}}function Ar(cr){var Xe=ue+(cr||"tick");return xr[Xe]||(xr[Xe]=function(Je,lr){var ur,Lr,Ir,Gr;return Je._selections[lr].size()?(ur=1/0,Lr=-1/0,Ir=1/0,Gr=-1/0,Je._selections[lr].each(function(){var Nr=ie(this),Kr=a.bBox(Nr.node().parentNode);ur=Math.min(ur,Kr.top),Lr=Math.max(Lr,Kr.bottom),Ir=Math.min(Ir,Kr.left),Gr=Math.max(Gr,Kr.right)})):(ur=0,Lr=0,Ir=0,Gr=0),{top:ur,bottom:Lr,left:Ir,right:Gr,height:Lr-ur,width:Gr-Ir}}(Nt,Xe)),xr[Xe]}},Y.getTickSigns=function(Pt,Nt){var ee=Pt._id.charAt(0),te={x:"top",y:"right"}[ee],ge=Pt.side===te?1:-1,pe=[-1,1,ge,-ge];return(Nt?(Pt.minor||{}).ticks:Pt.ticks)!=="inside"==(ee==="x")&&(pe=pe.map(function(me){return-me})),Pt.side&&pe.push({l:-1,t:-1,r:1,b:1}[Pt.side.charAt(0)]),pe},Y.makeTransTickFn=function(Pt){return Pt._id.charAt(0)==="x"?function(Nt){return s(Pt._offset+Pt.l2p(Nt.x),0)}:function(Nt){return s(0,Pt._offset+Pt.l2p(Nt.x))}},Y.makeTransTickLabelFn=function(Pt){var Nt=function(ge){var pe=ge.ticklabelposition||"",me=function(Ze){return pe.indexOf(Ze)!==-1},ce=me("top"),we=me("left"),ue=me("right"),he=me("bottom"),be=me("inside"),Pe=he||we||ce||ue;if(!Pe&&!be)return[0,0];var De=ge.side,Ue=Pe?(ge.tickwidth||0)/2:0,tr=3,Ge=ge.tickfont?ge.tickfont.size:12;return(he||ce)&&(Ue+=Ge*et,tr+=(ge.linewidth||0)/2),(we||ue)&&(Ue+=(ge.linewidth||0)/2,tr+=3),be&&De==="top"&&(tr-=Ge*(1-et)),(we||ce)&&(Ue=-Ue),De!=="bottom"&&De!=="right"||(tr=-tr),[Pe?Ue:0,be?tr:0]}(Pt),ee=Nt[0],te=Nt[1];return Pt._id.charAt(0)==="x"?function(ge){return s(ee+Pt._offset+Pt.l2p(Qt(ge)),te)}:function(ge){return s(te,ee+Pt._offset+Pt.l2p(Qt(ge)))}},Y.makeTickPath=function(Pt,Nt,ee,te){te||(te={});var ge=te.minor;if(ge&&!Pt.minor)return"";var pe=te.len!==void 0?te.len:ge?Pt.minor.ticklen:Pt.ticklen,me=Pt._id.charAt(0),ce=(Pt.linewidth||1)/2;return me==="x"?"M0,"+(Nt+ce*ee)+"v"+pe*ee:"M"+(Nt+ce*ee)+",0h"+pe*ee},Y.makeLabelFns=function(Pt,Nt,ee){var te=Pt.ticklabelposition||"",ge=function(mr){return te.indexOf(mr)!==-1},pe=ge("top"),me=ge("left"),ce=ge("right"),we=ge("bottom")||me||pe||ce,ue=ge("inside"),he=te==="inside"&&Pt.ticks==="inside"||!ue&&Pt.ticks==="outside"&&Pt.tickson!=="boundaries",be=0,Pe=0,De=he?Pt.ticklen:0;if(ue?De*=-1:we&&(De=0),he&&(be+=De,ee)){var Ue=h.deg2rad(ee);be=De*Math.cos(Ue)+1,Pe=De*Math.sin(Ue)}Pt.showticklabels&&(he||Pt.showline)&&(be+=.2*Pt.tickfont.size);var tr,Ge,Ze,We,pr,xr={labelStandoff:be+=(Pt.linewidth||1)/2*(ue?-1:1),labelShift:Pe},sr=0,$e=Pt.side,ir=Pt._id.charAt(0),Ke=Pt.tickangle;if(ir==="x")We=(pr=!ue&&$e==="bottom"||ue&&$e==="top")?1:-1,ue&&(We*=-1),tr=Pe*We,Ge=Nt+be*We,Ze=pr?1:-.2,Math.abs(Ke)===90&&(ue?Ze+=V:Ze=Ke===-90&&$e==="bottom"?et:Ke===90&&$e==="top"?V:.5,sr=V/2*(Ke/90)),xr.xFn=function(mr){return mr.dx+tr+sr*mr.fontSize},xr.yFn=function(mr){return mr.dy+Ge+mr.fontSize*Ze},xr.anchorFn=function(mr,Cr){if(we){if(me)return"end";if(ce)return"start"}return k(Cr)&&Cr!==0&&Cr!==180?Cr*We<0!==ue?"end":"start":"middle"},xr.heightFn=function(mr,Cr,Er){return Cr<-60||Cr>60?-.5*Er:Pt.side==="top"!==ue?-Er:0};else if(ir==="y"){if(We=(pr=!ue&&$e==="left"||ue&&$e==="right")?1:-1,ue&&(We*=-1),tr=be,Ge=Pe*We,Ze=0,ue||Math.abs(Ke)!==90||(Ze=Ke===-90&&$e==="left"||Ke===90&&$e==="right"?et:.5),ue){var ar=k(Ke)?+Ke:0;if(ar!==0){var fr=h.deg2rad(ar);sr=Math.abs(Math.sin(fr))*et*We,Ze=0}}xr.xFn=function(mr){return mr.dx+Nt-(tr+mr.fontSize*Ze)*We+sr*mr.fontSize},xr.yFn=function(mr){return mr.dy+Ge+mr.fontSize*V},xr.anchorFn=function(mr,Cr){return k(Cr)&&Math.abs(Cr)===90?"middle":pr?"end":"start"},xr.heightFn=function(mr,Cr,Er){return Pt.side==="right"&&(Cr*=-1),Cr<-30?-Er:Cr<30?-.5*Er:0}}return xr},Y.drawTicks=function(Pt,Nt,ee){ee=ee||{};var te=Nt._id+"tick",ge=[].concat(Nt.minor&&Nt.minor.ticks?ee.vals.filter(function(me){return me.minor&&!me.noTick}):[]).concat(Nt.ticks?ee.vals.filter(function(me){return!me.minor&&!me.noTick}):[]),pe=ee.layer.selectAll("path."+te).data(ge,de);pe.exit().remove(),pe.enter().append("path").classed(te,1).classed("ticks",1).classed("crisp",ee.crisp!==!1).each(function(me){return n.stroke(T.select(this),me.minor?Nt.minor.tickcolor:Nt.tickcolor)}).style("stroke-width",function(me){return a.crispRound(Pt,me.minor?Nt.minor.tickwidth:Nt.tickwidth,1)+"px"}).attr("d",ee.path).style("display",null),ne(Nt,[j]),pe.attr("transform",ee.transFn)},Y.drawGrid=function(Pt,Nt,ee){if(ee=ee||{},Nt.tickmode!=="sync"){var te=Nt._id+"grid",ge=Nt.minor&&Nt.minor.showgrid,pe=ge?ee.vals.filter(function(Ze){return Ze.minor}):[],me=Nt.showgrid?ee.vals.filter(function(Ze){return!Ze.minor}):[],ce=ee.counterAxis;if(ce&&Y.shouldShowZeroLine(Pt,Nt,ce))for(var we=Nt.tickmode==="array",ue=0;ue<me.length;ue++){var he=me[ue].x;if(we?!he:Math.abs(he)<Nt.dtick/100){if(me=me.slice(0,ue).concat(me.slice(ue+1)),!we)break;ue--}}Nt._gw=a.crispRound(Pt,Nt.gridwidth,1);for(var be=ge?a.crispRound(Pt,Nt.minor.gridwidth,1):0,Pe=ee.layer,De=ee.minorLayer,Ue=1;Ue>=0;Ue--){var tr=Ue?Pe:De;if(tr){var Ge=tr.selectAll("path."+te).data(Ue?me:pe,de);Ge.exit().remove(),Ge.enter().append("path").classed(te,1).classed("crisp",ee.crisp!==!1),Ge.attr("transform",ee.transFn).attr("d",ee.path).each(function(Ze){return n.stroke(T.select(this),Ze.minor?Nt.minor.gridcolor:Nt.gridcolor||"#ddd")}).style("stroke-dasharray",function(Ze){return a.dashStyle(Ze.minor?Nt.minor.griddash:Nt.griddash,Ze.minor?Nt.minor.gridwidth:Nt.gridwidth)}).style("stroke-width",function(Ze){return(Ze.minor?be:Nt._gw)+"px"}).style("display",null),typeof ee.path=="function"&&Ge.attr("d",ee.path)}}ne(Nt,[U,R])}},Y.drawZeroLine=function(Pt,Nt,ee){ee=ee||ee;var te=Nt._id+"zl",ge=Y.shouldShowZeroLine(Pt,Nt,ee.counterAxis),pe=ee.layer.selectAll("path."+te).data(ge?[{x:0,id:Nt._id}]:[]);pe.exit().remove(),pe.enter().append("path").classed(te,1).classed("zl",1).classed("crisp",ee.crisp!==!1).each(function(){ee.layer.selectAll("path").sort(function(me,ce){return rt(me.id,ce.id)})}),pe.attr("transform",ee.transFn).attr("d",ee.path).call(n.stroke,Nt.zerolinecolor||n.defaultLine).style("stroke-width",a.crispRound(Pt,Nt.zerolinewidth,Nt._gw||1)+"px").style("display",null),ne(Nt,[P])},Y.drawLabels=function(Pt,Nt,ee){ee=ee||{};var te=Pt._fullLayout,ge=Nt._id,pe=ge.charAt(0),me=ee.cls||ge+"tick",ce=ee.vals.filter(function(We){return We.text}),we=ee.labelFns,ue=ee.secondary?0:Nt.tickangle,he=(Nt._prevTickAngles||{})[me],be=ee.layer.selectAll("g."+me).data(Nt.showticklabels?ce:[],de),Pe=[];function De(We,pr){We.each(function(xr){var sr=T.select(this),$e=sr.select(".text-math-group"),ir=we.anchorFn(xr,pr),Ke=ee.transFn.call(sr.node(),xr)+(k(pr)&&+pr!=0?" rotate("+pr+","+we.xFn(xr)+","+(we.yFn(xr)-xr.fontSize/2)+")":""),ar=e.lineCount(sr),fr=J*xr.fontSize,mr=we.heightFn(xr,k(pr)?+pr:0,(ar-1)*fr);if(mr&&(Ke+=s(0,mr)),$e.empty()){var Cr=sr.select("text");Cr.attr({transform:Ke,"text-anchor":ir}),Cr.style("opacity",1),Nt._adjustTickLabelsOverflow&&Nt._adjustTickLabelsOverflow()}else{var Er=a.bBox($e.node()).width*{end:-.5,start:.5}[ir];$e.attr("transform",Ke+s(Er,0))}})}be.enter().append("g").classed(me,1).append("text").attr("text-anchor","middle").each(function(We){var pr=T.select(this),xr=Pt._promises.length;pr.call(e.positionText,we.xFn(We),we.yFn(We)).call(a.font,We.font,We.fontSize,We.fontColor).text(We.text).call(e.convertToTspans,Pt),Pt._promises[xr]?Pe.push(Pt._promises.pop().then(function(){De(pr,ue)})):De(pr,ue)}),ne(Nt,[B]),be.exit().remove(),ee.repositionOnUpdate&&be.each(function(We){T.select(this).select("text").call(e.positionText,we.xFn(We),we.yFn(We))}),Nt._adjustTickLabelsOverflow=function(){var We=Nt.ticklabeloverflow;if(We&&We!=="allow"){var pr=We.indexOf("hide")!==-1,xr=Nt._id.charAt(0)==="x",sr=0,$e=xr?Pt._fullLayout.width:Pt._fullLayout.height;if(We.indexOf("domain")!==-1){var ir=h.simpleMap(Nt.range,Nt.r2l);sr=Nt.l2p(ir[0])+Nt._offset,$e=Nt.l2p(ir[1])+Nt._offset}var Ke=Math.min(sr,$e),ar=Math.max(sr,$e),fr=Nt.side,mr=1/0,Cr=-1/0;for(var Er in be.each(function(Xr){var en=T.select(this);if(en.select(".text-math-group").empty()){var sn=a.bBox(en.node()),tn=0;xr?(sn.right>ar||sn.left<Ke)&&(tn=1):(sn.bottom>ar||sn.top+(Nt.tickangle?0:Xr.fontSize/4)<Ke)&&(tn=1);var qr=en.select("text");tn?pr&&qr.style("opacity",0):(qr.style("opacity",1),mr=fr==="bottom"||fr==="right"?Math.min(mr,xr?sn.top:sn.left):-1/0,Cr=fr==="top"||fr==="left"?Math.max(Cr,xr?sn.bottom:sn.right):1/0)}}),te._plots){var _r=te._plots[Er];if(Nt._id===_r.xaxis._id||Nt._id===_r.yaxis._id){var Sr=xr?_r.yaxis:_r.xaxis;Sr&&(Sr["_visibleLabelMin_"+Nt._id]=mr,Sr["_visibleLabelMax_"+Nt._id]=Cr)}}}},Nt._hideCounterAxisInsideTickLabels=function(We){var pr=Nt._id.charAt(0)==="x",xr=[];for(var sr in te._plots){var $e=te._plots[sr];Nt._id!==$e.xaxis._id&&Nt._id!==$e.yaxis._id||xr.push(pr?$e.yaxis:$e.xaxis)}xr.forEach(function(ir,Ke){ir&&Yt(ir)&&(We||[P,R,U,j,B]).forEach(function(ar){var fr=ar.K==="tick"&&ar.L==="text"&&Nt.ticklabelmode==="period",mr=te._plots[Nt._mainSubplot];(ar.K===P.K?mr.zerolinelayer.selectAll("."+Nt._id+"zl"):ar.K===R.K?mr.minorGridlayer.selectAll("."+Nt._id):ar.K===U.K?mr.gridlayer.selectAll("."+Nt._id):mr[Nt._id.charAt(0)+"axislayer"]).each(function(){var Cr=T.select(this);ar.L&&(Cr=Cr.selectAll(ar.L)),Cr.each(function(Er){var _r=Nt.l2p(fr?Qt(Er):Er.x)+Nt._offset,Sr=T.select(this);_r<Nt["_visibleLabelMax_"+ir._id]&&_r>Nt["_visibleLabelMin_"+ir._id]?Sr.style("display","none"):ar.K!=="tick"||Ke||Sr.style("display",null)})})})})},De(be,he+1?he:ue);var Ue=null;Nt._selections&&(Nt._selections[me]=be);var tr=[function(){return Pe.length&&Promise.all(Pe)}];Nt.automargin&&te._redrawFromAutoMarginCount&&he===90?(Ue=90,tr.push(function(){De(be,he)})):tr.push(function(){if(De(be,ue),ce.length&&pe==="x"&&!k(ue)&&(Nt.type!=="log"||String(Nt.dtick).charAt(0)!=="D")){Ue=0;var We,pr=0,xr=[];if(be.each(function(en){pr=Math.max(pr,en.fontSize);var sn=Nt.l2p(en.x),tn=ie(this),qr=a.bBox(tn.node());xr.push({top:0,bottom:10,height:10,left:sn-qr.width/2,right:sn+qr.width/2+2,width:qr.width+2})}),Nt.tickson!=="boundaries"&&!Nt.showdividers||ee.secondary){var sr=ce.length,$e=Math.abs((ce[sr-1].x-ce[0].x)*Nt._m)/(sr-1),ir=Nt.ticklabelposition||"",Ke=function(en){return ir.indexOf(en)!==-1},ar=Ke("top"),fr=Ke("left"),mr=Ke("right"),Cr=Ke("bottom")||fr||ar||mr?(Nt.tickwidth||0)+6:0,Er=$e<2.5*pr||Nt.type==="multicategory"||Nt._name==="realaxis";for(We=0;We<xr.length-1;We++)if(h.bBoxIntersect(xr[We],xr[We+1],Cr)){Ue=Er?90:30;break}}else{var _r=2;for(Nt.ticks&&(_r+=Nt.tickwidth/2),We=0;We<xr.length;We++){var Sr=ce[We].xbnd,Xr=xr[We];if(Sr[0]!==null&&Xr.left-Nt.l2p(Sr[0])<_r||Sr[1]!==null&&Nt.l2p(Sr[1])-Xr.right<_r){Ue=90;break}}}Ue&&De(be,Ue)}}),Nt._tickAngles&&tr.push(function(){Nt._tickAngles[me]=Ue===null?k(ue)?ue:0:Ue});var Ge=Nt._anchorAxis;Ge&&Ge.autorange&&Yt(Nt)&&!nt(te,Nt._id)&&(te._insideTickLabelsAutorange||(te._insideTickLabelsAutorange={}),te._insideTickLabelsAutorange[Ge._name+".autorange"]=Ge.autorange,tr.push(function(){be.each(function(We,pr){var xr=ie(this);xr.select(".text-math-group").empty()&&(Nt._vals[pr].bb=a.bBox(xr.node()))})}));var Ze=h.syncOrAsync(tr);return Ze&&Ze.then&&Pt._promises.push(Ze),Ze},Y.getPxPosition=function(Pt,Nt){var ee,te=Pt._fullLayout._size,ge=Nt._id.charAt(0),pe=Nt.side;return Nt.anchor!=="free"?ee=Nt._anchorAxis:ge==="x"?ee={_offset:te.t+(1-(Nt.position||0))*te.h,_length:0}:ge==="y"&&(ee={_offset:te.l+(Nt.position||0)*te.w+Nt._shift,_length:0}),pe==="top"||pe==="left"?ee._offset:pe==="bottom"||pe==="right"?ee._offset+ee._length:void 0},Y.shouldShowZeroLine=function(Pt,Nt,ee){var te=h.simpleMap(Nt.range,Nt.r2l);return te[0]*te[1]<=0&&Nt.zeroline&&(Nt.type==="linear"||Nt.type==="-")&&!(Nt.rangebreaks&&Nt.maskBreaks(0)===O)&&(ve(Nt,0)||!function(ge,pe,me,ce){var we=me._mainAxis;if(we){var ue=ge._fullLayout,he=pe._id.charAt(0),be=Y.counterLetter(pe._id),Pe=pe._offset+(Math.abs(ce[0])<Math.abs(ce[1])==(he==="x")?0:pe._length),De=ue._plots[me._mainSubplot];if(!(De.mainplotinfo||De).overlays.length)return Ze(me);for(var Ue=Y.list(ge,be),tr=0;tr<Ue.length;tr++){var Ge=Ue[tr];if(Ge._mainAxis===we&&Ze(Ge))return!0}}function Ze(We){if(!We.showline||!We.linewidth)return!1;var pr=Math.max((We.linewidth+pe.zerolinewidth)/2,1);function xr(ir){return typeof ir=="number"&&Math.abs(ir-Pe)<pr}if(xr(We._mainLinePosition)||xr(We._mainMirrorPosition))return!0;var sr=We._linepositions||{};for(var $e in sr)if(xr(sr[$e][0])||xr(sr[$e][1]))return!0}}(Pt,Nt,ee,te)||function(ge,pe){for(var me=ge._fullData,ce=pe._mainSubplot,we=pe._id.charAt(0),ue=0;ue<me.length;ue++){var he=me[ue];if(he.visible===!0&&he.xaxis+he.yaxis===ce&&(m.traceIs(he,"bar-like")&&he.orientation==={x:"h",y:"v"}[we]||he.fill&&he.fill.charAt(he.fill.length-1)===we))return!0}return!1}(Pt,Nt))},Y.clipEnds=function(Pt,Nt){return Nt.filter(function(ee){return ve(Pt,ee.x)})},Y.allowAutoMargin=function(Pt){for(var Nt=Y.list(Pt,"",!0),ee=0;ee<Nt.length;ee++){var te=Nt[ee];te.automargin&&(r.allowAutoMargin(Pt,se(te)),te.mirror&&r.allowAutoMargin(Pt,ke(te))),m.getComponentMethod("rangeslider","isVisible")(te)&&r.allowAutoMargin(Pt,Ae(te))}},Y.swap=function(Pt,Nt){for(var ee=function(ge,pe){var me,ce,we=[];for(me=0;me<pe.length;me++){var ue=[],he=ge._fullData[pe[me]].xaxis,be=ge._fullData[pe[me]].yaxis;if(he&&be){for(ce=0;ce<we.length;ce++)we[ce].x.indexOf(he)===-1&&we[ce].y.indexOf(be)===-1||ue.push(ce);if(ue.length){var Pe,De=we[ue[0]];if(ue.length>1)for(ce=1;ce<ue.length;ce++)Pe=we[ue[ce]],Ie(De.x,Pe.x),Ie(De.y,Pe.y);Ie(De.x,[he]),Ie(De.y,[be])}else we.push({x:[he],y:[be]})}}return we}(Pt,Nt),te=0;te<ee.length;te++)Te(Pt,ee[te].x,ee[te].y)}},4322:function(W,I,o){var T=o(92770),k=o(71828),r=o(50606).BADNUM,m=k.isArrayOrTypedArray,h=k.isDateTime,s=k.cleanNumber,e=Math.round;function t(a,i){return i?T(a):typeof a=="number"}function n(a){return Math.max(1,(a-1)/1e3)}W.exports=function(a,i,c){var l=a,u=c.noMultiCategory;if(m(l)&&!l.length)return"-";if(!u&&function(p){return m(p[0])&&m(p[1])}(l))return"multicategory";if(u&&Array.isArray(l[0])){for(var f=[],d=0;d<l.length;d++)if(m(l[d]))for(var w=0;w<l[d].length;w++)f.push(l[d][w]);l=f}if(function(p,y){for(var b=p.length,x=n(b),_=0,g=0,A={},M=0;M<b;M+=x){var L=p[e(M)],E=String(L);A[E]||(A[E]=1,h(L,y)&&_++,T(L)&&g++)}return _>2*g}(l,i))return"date";var v=c.autotypenumbers!=="strict";return function(p,y){for(var b=p.length,x=n(b),_=0,g=0,A={},M=0;M<b;M+=x){var L=p[e(M)],E=String(L);if(!A[E]){A[E]=1;var S=typeof L;S==="boolean"?g++:(y?s(L)!==r:S==="number")?_++:S==="string"&&g++}}return g>2*_}(l,v)?"category":function(p,y){for(var b=p.length,x=0;x<b;x++)if(t(p[x],y))return!0;return!1}(l,v)?"linear":"-"}},71453:function(W,I,o){var T=o(92770),k=o(73972),r=o(71828),m=o(44467),h=o(85501),s=o(13838),e=o(26218),t=o(38701),n=o(96115),a=o(89426),i=o(15258),c=o(92128),l=o(23608),u=o(21994),f=o(85555).WEEKDAY_PATTERN,d=o(85555).HOUR_PATTERN;function w(y,b,x){function _(P,U){return r.coerce(y,b,s.rangebreaks,P,U)}if(_("enabled")){var g=_("bounds");if(g&&g.length>=2){var A,M,L="";if(g.length===2){for(A=0;A<2;A++)if(M=p(g[A])){L=f;break}}var E=_("pattern",L);if(E===f)for(A=0;A<2;A++)(M=p(g[A]))&&(b.bounds[A]=g[A]=M-1);if(E)for(A=0;A<2;A++)switch(M=g[A],E){case f:if(!T(M)||(M=+M)!==Math.floor(M)||M<0||M>=7)return void(b.enabled=!1);b.bounds[A]=g[A]=M;break;case d:if(!T(M)||(M=+M)<0||M>24)return void(b.enabled=!1);b.bounds[A]=g[A]=M}if(x.autorange===!1){var S=x.range;if(S[0]<S[1]){if(g[0]<S[0]&&g[1]>S[1])return void(b.enabled=!1)}else if(g[0]>S[0]&&g[1]<S[1])return void(b.enabled=!1)}}else{var O=_("values");if(!O||!O.length)return void(b.enabled=!1);_("dvalue")}}}W.exports=function(y,b,x,_,g){var A,M=_.letter,L=_.font||{},E=_.splomStash||{},S=x("visible",!_.visibleDflt),O=b._template||{},P=b.type||O.type||"-";P==="date"&&(k.getComponentMethod("calendars","handleDefaults")(y,b,"calendar",_.calendar),_.noTicklabelmode||(A=x("ticklabelmode")));var U="";_.noTicklabelposition&&P!=="multicategory"||(U=r.coerce(y,b,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:A==="period"?["outside","inside"]:M==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||x("ticklabeloverflow",U.indexOf("inside")!==-1?"hide past domain":P==="category"||P==="multicategory"?"allow":"hide past div"),u(b,g),l(y,b,x,_),i(y,b,x,_),P==="category"||_.noHover||x("hoverformat");var R=x("color"),j=R!==s.color.dflt?R:L.color,B=E.label||g._dfltTitle[M];if(a(y,b,x,P,_),!S)return b;x("title.text",B),r.coerceFont(x,"title.font",{family:L.family,size:r.bigFont(L.size),color:j}),e(y,b,x,P);var z=_.hasMinor;if(z&&(m.newContainer(b,"minor"),e(y,b,x,P,{isMinor:!0})),n(y,b,x,P,_),t(y,b,x,_),z){var G=_.isMinor;_.isMinor=!0,t(y,b,x,_),_.isMinor=G}c(y,b,x,{dfltColor:R,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:z,attributes:s}),!z||b.minor.ticks||b.minor.showgrid||delete b.minor,(b.showline||b.ticks)&&x("mirror");var V,et=P==="multicategory";if(_.noTickson||P!=="category"&&!et||!b.ticks&&!b.showgrid||(et&&(V="boundaries"),x("tickson",V)==="boundaries"&&delete b.ticklabelposition),et&&x("showdividers")&&(x("dividercolor"),x("dividerwidth")),P==="date")if(h(y,b,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:w}),b.rangebreaks.length){for(var J=0;J<b.rangebreaks.length;J++)if(b.rangebreaks[J].pattern===f){b._hasDayOfWeekBreaks=!0;break}if(u(b,g),g._has("scattergl")||g._has("splom"))for(var X=0;X<_.data.length;X++){var Y=_.data[X];Y.type!=="scattergl"&&Y.type!=="splom"||(Y.visible=!1,r.warn(Y.type+" traces do not work on axes with rangebreaks. Setting trace "+Y.index+" to `visible: false`."))}}else delete b.rangebreaks;return b};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function p(y){if(typeof y=="string")return v[y.substr(0,3).toLowerCase()]}},12663:function(W,I,o){var T=o(31562),k=T.FORMAT_LINK,r=T.DATE_FORMAT_LINK;function m(s,e){return["Sets the "+s+" formatting rule"+(e?"for `"+e+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function h(s,e){return m(s,e)+[" And for dates see: "+r+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}W.exports={axisHoverFormat:function(s,e){return{valType:"string",dflt:"",editType:"none",description:(e?m:h)("hover text",s)+["By default the values are formatted using "+(e?"generic number format":"`"+s+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:m,descriptionWithDates:h}},41675:function(W,I,o){var T=o(73972),k=o(85555);function r(m,h){if(h&&h.length){for(var s=0;s<h.length;s++)if(h[s][m])return!0}return!1}I.id2name=function(m){if(typeof m=="string"&&m.match(k.AX_ID_PATTERN)){var h=m.split(" ")[0].substr(1);return h==="1"&&(h=""),m.charAt(0)+"axis"+h}},I.name2id=function(m){if(m.match(k.AX_NAME_PATTERN)){var h=m.substr(5);return h==="1"&&(h=""),m.charAt(0)+h}},I.cleanId=function(m,h,s){var e=/( domain)$/.test(m);if(typeof m=="string"&&m.match(k.AX_ID_PATTERN)&&(!h||m.charAt(0)===h)&&(!e||s)){var t=m.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),m.charAt(0)+t+(e&&s?" domain":"")}},I.list=function(m,h,s){var e=m._fullLayout;if(!e)return[];var t,n=I.listIds(m,h),a=new Array(n.length);for(t=0;t<n.length;t++){var i=n[t];a[t]=e[i.charAt(0)+"axis"+i.substr(1)]}if(!s){var c=e._subplots.gl3d||[];for(t=0;t<c.length;t++){var l=e[c[t]];h?a.push(l[h+"axis"]):a.push(l.xaxis,l.yaxis,l.zaxis)}}return a},I.listIds=function(m,h){var s=m._fullLayout;if(!s)return[];var e=s._subplots;return h?e[h+"axis"]:e.xaxis.concat(e.yaxis)},I.getFromId=function(m,h,s){var e=m._fullLayout;return h=h===void 0||typeof h!="string"?h:h.replace(" domain",""),s==="x"?h=h.replace(/y[0-9]*/,""):s==="y"&&(h=h.replace(/x[0-9]*/,"")),e[I.id2name(h)]},I.getFromTrace=function(m,h,s){var e=m._fullLayout,t=null;if(T.traceIs(h,"gl3d")){var n=h.scene;n.substr(0,5)==="scene"&&(t=e[n][s+"axis"])}else t=I.getFromId(m,h[s+"axis"]||s);return t},I.idSort=function(m,h){var s=m.charAt(0),e=h.charAt(0);return s!==e?s>e?1:-1:+(m.substr(1)||1)-+(h.substr(1)||1)},I.ref2id=function(m){return!!/^[xyz]/.test(m)&&m.split(" ")[0]},I.isLinked=function(m,h){return r(h,m._axisMatchGroups)||r(h,m._axisConstraintGroups)}},15258:function(W){W.exports=function(I,o,T,k){if(o.type==="category"){var r,m=I.categoryarray,h=Array.isArray(m)&&m.length>0;h&&(r="array");var s,e=T("categoryorder",r);e==="array"&&(s=T("categoryarray")),h||e!=="array"||(e=o.categoryorder="trace"),e==="trace"?o._initialCategories=[]:e==="array"?o._initialCategories=s.slice():(s=function(t,n){var a,i,c,l=n.dataAttr||t._id.charAt(0),u={};if(n.axData)a=n.axData;else for(a=[],i=0;i<n.data.length;i++){var f=n.data[i];f[l+"axis"]===t._id&&a.push(f)}for(i=0;i<a.length;i++){var d=a[i][l];for(c=0;c<d.length;c++){var w=d[c];w!=null&&(u[w]=1)}}return Object.keys(u)}(o,k).sort(),e==="category ascending"?o._initialCategories=s:e==="category descending"&&(o._initialCategories=s.reverse()))}}},66287:function(W,I,o){var T=o(92770),k=o(71828),r=o(50606),m=r.ONEDAY,h=r.ONEWEEK;I.dtick=function(s,e){var t=e==="log",n=e==="date",a=e==="category",i=n?m:1;if(!s)return i;if(T(s))return(s=Number(s))<=0?i:a?Math.max(1,Math.round(s)):n?Math.max(.1,s):s;if(typeof s!="string"||!n&&!t)return i;var c=s.charAt(0),l=s.substr(1);return(l=T(l)?Number(l):0)<=0||!(n&&c==="M"&&l===Math.round(l)||t&&c==="L"||t&&c==="D"&&(l===1||l===2))?i:s},I.tick0=function(s,e,t,n){return e==="date"?k.cleanDate(s,k.dateTick0(t,n%h==0?1:0)):n!=="D1"&&n!=="D2"?T(s)?Number(s):0:void 0}},85555:function(W,I,o){var T=o(30587).counter;W.exports={idRegex:{x:T("x","( domain)?"),y:T("y","( domain)?")},attrRegex:T("[xy]axis"),xAxisMatch:T("xaxis"),yAxisMatch:T("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(W,I,o){var T=o(71828),k=o(71739),r=o(41675).id2name,m=o(13838),h=o(42449),s=o(21994),e=o(50606).ALMOST_EQUAL,t=o(18783).FROM_BL;function n(d,w,v){var p=v.axIds,y=v.layoutOut,b=v.hasImage,x=y._axisConstraintGroups,_=y._axisMatchGroups,g=w._id,A=g.charAt(0),M=((y._splomAxes||{})[A]||{})[g]||{},L=w._id,E=L.charAt(0)==="x";function S(Z,tt){return T.coerce(d,w,m,Z,tt)}w._matchGroup=null,w._constraintGroup=null,S("constrain",b?"domain":"range"),T.coerce(d,w,{constraintoward:{valType:"enumerated",values:E?["left","center","right"]:["bottom","middle","top"],dflt:E?"center":"middle"}},"constraintoward");var O,P,U=w.type,R=[];for(O=0;O<p.length;O++)(P=p[O])!==L&&y[r(P)].type===U&&R.push(P);var j=i(x,L);if(j){var B=[];for(O=0;O<R.length;O++)j[P=R[O]]||B.push(P);R=B}var z,G,V=R.length;V&&(d.matches||M.matches)&&(z=T.coerce(d,w,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(M.matches)!==-1?M.matches:void 0}},"matches"));var et=b&&!E?w.anchor:void 0;if(V&&!z&&(d.scaleanchor||et)&&(G=T.coerce(d,w,{scaleanchor:{valType:"enumerated",values:R.concat([!1])}},"scaleanchor",et)),z){w._matchGroup=c(_,L,z,1);var J=y[r(z)],X=a(y,w)/a(y,J);E!==(z.charAt(0)==="x")&&(X=(E?"x":"y")+X),c(x,L,z,X)}else d.matches&&p.indexOf(d.matches)!==-1&&T.warn("ignored "+w._name+'.matches: "'+d.matches+'" to avoid an infinite loop');if(G){var Y=S("scaleratio");Y||(Y=w.scaleratio=1),c(x,L,G,Y)}else d.scaleanchor&&p.indexOf(d.scaleanchor)!==-1&&T.warn("ignored "+w._name+'.scaleanchor: "'+d.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function a(d,w){var v=w.domain;return v||(v=d[r(w.overlaying)].domain),v[1]-v[0]}function i(d,w){for(var v=0;v<d.length;v++)if(d[v][w])return d[v];return null}function c(d,w,v,p){var y,b,x,_,g,A=i(d,w);A===null?((A={})[w]=1,g=d.length,d.push(A)):g=d.indexOf(A);var M=Object.keys(A);for(y=0;y<d.length;y++)if(x=d[y],y!==g&&x[v]){var L=x[v];for(b=0;b<M.length;b++)x[_=M[b]]=l(L,l(p,A[_]));return void d.splice(g,1)}if(p!==1)for(b=0;b<M.length;b++){var E=M[b];A[E]=l(p,A[E])}A[v]=1}function l(d,w){var v,p,y="",b="";typeof d=="string"&&(v=(y=d.match(/^[xy]*/)[0]).length,d=+d.substr(v)),typeof w=="string"&&(p=(b=w.match(/^[xy]*/)[0]).length,w=+w.substr(p));var x=d*w;return v||p?v&&p&&y.charAt(0)!==b.charAt(0)?v===p?x:(v>p?y.substr(p):b.substr(v))+x:y+b+d*w:x}function u(d,w){for(var v=w._size,p=v.h/v.w,y={},b=Object.keys(d),x=0;x<b.length;x++){var _=b[x],g=d[_];if(typeof g=="string"){var A=g.match(/^[xy]*/)[0],M=A.length;g=+g.substr(M);for(var L=A.charAt(0)==="y"?p:1/p,E=0;E<M;E++)g*=L}y[_]=g}return y}function f(d,w){var v=d._inputDomain,p=t[d.constraintoward],y=v[0]+(v[1]-v[0])*p;d.domain=d._input.domain=[y+(v[0]-y)/w,y+(v[1]-y)/w],d.setScale()}I.handleDefaults=function(d,w,v){var p,y,b,x,_,g,A,M,L=v.axIds,E=v.axHasImage,S=w._axisConstraintGroups=[],O=w._axisMatchGroups=[];for(p=0;p<L.length;p++)n(_=d[x=r(L[p])],g=w[x],{axIds:L,layoutOut:w,hasImage:E[x]});function P(J,X){for(p=0;p<J.length;p++)for(b in y=J[p])w[r(b)][X]=y}for(P(O,"_matchGroup"),p=0;p<S.length;p++)for(b in y=S[p])if((g=w[r(b)]).fixedrange){for(var U in y){var R=r(U);(d[R]||{}).fixedrange===!1&&T.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),w[R].fixedrange=!0}break}for(p=0;p<S.length;){for(b in y=S[p]){(g=w[r(b)])._matchGroup&&Object.keys(g._matchGroup).length===Object.keys(y).length&&(S.splice(p,1),p--);break}p++}P(S,"_constraintGroup");var j=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],B=!1,z=!1;function G(){M=g[A],A==="rangebreaks"&&(z=g._hasDayOfWeekBreaks)}for(p=0;p<O.length;p++){y=O[p];for(var V=0;V<j.length;V++){var et;for(b in A=j[V],M=null,y)if(_=d[x=r(b)],g=w[x],A in g){if(!g.matches&&(et=g,A in _)){G();break}M===null&&A in _&&G()}if(A==="range"&&M&&_.range&&_.range.length===2&&_.range[0]!==null&&_.range[1]!==null&&(B=!0),A==="autorange"&&M===null&&B&&(M=!1),M===null&&A in et&&(M=et[A]),M!==null)for(b in y)(g=w[r(b)])[A]=A==="range"?M.slice():M,A==="rangebreaks"&&(g._hasDayOfWeekBreaks=z,s(g,w))}}},I.enforce=function(d){var w,v,p,y,b,x,_,g,A=d._fullLayout,M=A._axisConstraintGroups||[];for(w=0;w<M.length;w++){p=u(M[w],A);var L=Object.keys(p),E=1/0,S=0,O=1/0,P={},U={},R=!1;for(v=0;v<L.length;v++)U[y=L[v]]=b=A[r(y)],b._inputDomain?b.domain=b._inputDomain.slice():b._inputDomain=b.domain.slice(),b._inputRange||(b._inputRange=b.range.slice()),b.setScale(),P[y]=x=Math.abs(b._m)/p[y],E=Math.min(E,x),b.constrain!=="domain"&&b._constraintShrinkable||(O=Math.min(O,x)),delete b._constraintShrinkable,S=Math.max(S,x),b.constrain==="domain"&&(R=!0);if(!(E>e*S)||R){for(v=0;v<L.length;v++)if(x=P[y=L[v]],_=(b=U[y]).constrain,x!==O||_==="domain")if(g=x/O,_==="range")h(b,g);else{var j=b._inputDomain,B=(b.domain[1]-b.domain[0])/(j[1]-j[0]),z=(b.r2l(b.range[1])-b.r2l(b.range[0]))/(b.r2l(b._inputRange[1])-b.r2l(b._inputRange[0]));if((g/=B)*z<1){b.domain=b._input.domain=j.slice(),h(b,g);continue}if(z<1&&(b.range=b._input.range=b._inputRange.slice(),g*=z),b.autorange){var G=b.r2l(b.range[0]),V=b.r2l(b.range[1]),et=(G+V)/2,J=et,X=et,Y=Math.abs(V-et),Z=et-Y*g*1.0001,tt=et+Y*g*1.0001,rt=k.makePadFn(A,b,0),nt=k.makePadFn(A,b,1);f(b,g);var ot,ct,pt=Math.abs(b._m),gt=k.concatExtremes(d,b),kt=gt.min,yt=gt.max;for(ct=0;ct<kt.length;ct++)(ot=kt[ct].val-rt(kt[ct])/pt)>Z&&ot<J&&(J=ot);for(ct=0;ct<yt.length;ct++)(ot=yt[ct].val+nt(yt[ct])/pt)<tt&&ot>X&&(X=ot);g/=(X-J)/(2*Y),J=b.l2r(J),X=b.l2r(X),b.range=b._input.range=G<V?[J,X]:[X,J]}f(b,g)}}}},I.getAxisGroup=function(d,w){for(var v=d._axisMatchGroups,p=0;p<v.length;p++)if(v[p][w])return"g"+p;return w},I.clean=function(d,w){if(w._inputDomain){for(var v=!1,p=w._id,y=d._fullLayout._axisConstraintGroups,b=0;b<y.length;b++)if(y[b][p]){v=!0;break}v&&w.constrain==="domain"||(w._input.domain=w.domain=w._inputDomain,delete w._inputDomain)}}},29323:function(W,I,o){var T=o(39898),k=o(71828),r=k.numberFormat,m=o(84267),h=o(38520),s=o(73972),e=k.strTranslate,t=o(63893),n=o(7901),a=o(91424),i=o(30211),c=o(89298),l=o(6964),u=o(28569),f=o(64505),d=f.selectingOrDrawing,w=f.freeMode,v=o(18783).FROM_TL,p=o(33306),y=o(61549).redrawReglTraces,b=o(74875),x=o(41675).getFromId,_=o(47322).prepSelect,g=o(47322).clearOutline,A=o(47322).selectOnClick,M=o(42449),L=o(85555),E=L.MINDRAG,S=L.MINZOOM,O=!0;function P(ot,ct,pt,gt){var kt=k.ensureSingle(ot.draglayer,ct,pt,function(yt){yt.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ot.id)});return kt.call(l,gt),kt.node()}function U(ot,ct,pt,gt,kt,yt,mt){var Ot=P(ot,"rect",ct,pt);return T.select(Ot).call(a.setRect,gt,kt,yt,mt),Ot}function R(ot,ct){for(var pt=0;pt<ot.length;pt++)if(!ot[pt].fixedrange)return ct;return""}function j(ot,ct,pt,gt,kt){for(var yt=0;yt<ot.length;yt++){var mt=ot[yt];if(!mt.fixedrange)if(mt.rangebreaks){var Ot=mt._id.charAt(0)==="y",vt=Ot?1-ct:ct,xt=Ot?1-pt:pt;gt[mt._name+".range[0]"]=mt.l2r(mt.p2l(vt*mt._length)),gt[mt._name+".range[1]"]=mt.l2r(mt.p2l(xt*mt._length))}else{var st=mt._rl[0],at=mt._rl[1]-st;gt[mt._name+".range[0]"]=mt.l2r(st+at*ct),gt[mt._name+".range[1]"]=mt.l2r(st+at*pt)}}if(kt&&kt.length){var ht=(ct+(1-pt))/2;j(kt,ht,1-ht,gt,[])}}function B(ot,ct){for(var pt=0;pt<ot.length;pt++){var gt=ot[pt];if(!gt.fixedrange){if(gt.rangebreaks){var kt=gt._length,yt=(gt.p2l(0+ct)-gt.p2l(0)+(gt.p2l(kt+ct)-gt.p2l(kt)))/2;gt.range=[gt.l2r(gt._rl[0]-yt),gt.l2r(gt._rl[1]-yt)]}else gt.range=[gt.l2r(gt._rl[0]-ct/gt._m),gt.l2r(gt._rl[1]-ct/gt._m)];gt.limitRange&&gt.limitRange()}}}function z(ot){return 1-(ot>=0?Math.min(ot,.9):1/(1/Math.max(ot,-.3)+3.222))}function G(ot,ct,pt,gt,kt){return ot.append("path").attr("class","zoombox").style({fill:ct>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",e(pt,gt)).attr("d",kt+"Z")}function V(ot,ct,pt){return ot.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",e(ct,pt)).attr("d","M0,0Z")}function et(ot,ct,pt,gt,kt,yt){ot.attr("d",gt+"M"+pt.l+","+pt.t+"v"+pt.h+"h"+pt.w+"v-"+pt.h+"h-"+pt.w+"Z"),J(ot,ct,kt,yt)}function J(ot,ct,pt,gt){pt||(ot.transition().style("fill",gt>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ct.transition().style("opacity",1).duration(200))}function X(ot){T.select(ot).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Y(ot){O&&ot.data&&ot._context.showTips&&(k.notifier(k._(ot,"Double-click to zoom back out"),"long"),O=!1)}function Z(ot){var ct=Math.floor(Math.min(ot.b-ot.t,ot.r-ot.l,S)/2);return"M"+(ot.l-3.5)+","+(ot.t-.5+ct)+"h3v"+-ct+"h"+ct+"v-3h-"+(ct+3)+"ZM"+(ot.r+3.5)+","+(ot.t-.5+ct)+"h-3v"+-ct+"h"+-ct+"v-3h"+(ct+3)+"ZM"+(ot.r+3.5)+","+(ot.b+.5-ct)+"h-3v"+ct+"h"+-ct+"v3h"+(ct+3)+"ZM"+(ot.l-3.5)+","+(ot.b+.5-ct)+"h3v"+ct+"h"+ct+"v3h-"+(ct+3)+"Z"}function tt(ot,ct,pt,gt,kt){for(var yt,mt,Ot,vt,xt=!1,st={},at={},ht=(kt||{}).xaHash,Lt=(kt||{}).yaHash,Mt=0;Mt<ct.length;Mt++){var _t=ct[Mt];for(yt in pt)if(_t[yt]){for(Ot in _t)kt&&(ht[Ot]||Lt[Ot])||(Ot.charAt(0)==="x"?pt:gt)[Ot]||(st[Ot]=yt);for(mt in gt)kt&&(ht[mt]||Lt[mt])||!_t[mt]||(xt=!0)}for(mt in gt)if(_t[mt])for(vt in _t)kt&&(ht[vt]||Lt[vt])||(vt.charAt(0)==="x"?pt:gt)[vt]||(at[vt]=mt)}xt&&(k.extendFlat(st,at),at={});var St={},Dt=[];for(Ot in st){var ut=x(ot,Ot);Dt.push(ut),St[ut._id]=ut}var Tt={},bt=[];for(vt in at){var It=x(ot,vt);bt.push(It),Tt[It._id]=It}return{xaHash:St,yaHash:Tt,xaxes:Dt,yaxes:bt,xLinks:st,yLinks:at,isSubplotConstrained:xt}}function rt(ot,ct){if(h){var pt=ot.onwheel!==void 0?"wheel":"mousewheel";ot._onwheel&&ot.removeEventListener(pt,ot._onwheel),ot._onwheel=ct,ot.addEventListener(pt,ct,{passive:!1})}else ot.onwheel!==void 0?ot.onwheel=ct:ot.onmousewheel!==void 0?ot.onmousewheel=ct:ot.isAddedWheelEvent||(ot.isAddedWheelEvent=!0,ot.addEventListener("wheel",ct,{passive:!1}))}function nt(ot){var ct=[];for(var pt in ot)ct.push(ot[pt]);return ct}W.exports={makeDragBox:function(ot,ct,pt,gt,kt,yt,mt,Ot){var vt,xt,st,at,ht,Lt,Mt,_t,St,Dt,ut,Tt,bt,It,zt,Ft,$t,Wt,Xt,ae,Qt,de,ye,ve=ot._fullLayout._zoomlayer,ie=mt+Ot==="nsew",se=(mt+Ot).length===1;function ke(){if(vt=ct.xaxis,xt=ct.yaxis,St=vt._length,Dt=xt._length,Mt=vt._offset,_t=xt._offset,(st={})[vt._id]=vt,(at={})[xt._id]=xt,mt&&Ot)for(var $e=ct.overlays,ir=0;ir<$e.length;ir++){var Ke=$e[ir].xaxis;st[Ke._id]=Ke;var ar=$e[ir].yaxis;at[ar._id]=ar}ht=nt(st),Lt=nt(at),bt=R(ht,Ot),It=R(Lt,mt),zt=!It&&!bt,Tt=tt(ot,ot._fullLayout._axisMatchGroups,st,at);var fr=(ut=tt(ot,ot._fullLayout._axisConstraintGroups,st,at,Tt)).isSubplotConstrained||Tt.isSubplotConstrained;Ft=Ot||fr,$t=mt||fr;var mr=ot._fullLayout;Wt=mr._has("scattergl"),Xt=mr._has("splom"),ae=mr._has("svg")}pt+=ct.yaxis._shift,ke();var Ae=function($e,ir,Ke){return $e?$e==="nsew"?Ke?"":ir==="pan"?"move":"crosshair":$e.toLowerCase()+"-resize":"pointer"}(It+bt,ot._fullLayout.dragmode,ie),Ie=U(ct,mt+Ot+"drag",Ae,pt,gt,kt,yt);if(zt&&!ie)return Ie.onmousedown=null,Ie.style.pointerEvents="none",Ie;var Te,Vt,Zt,Gt,Yt,ne,re,Pt,Nt,ee,te={element:Ie,gd:ot,plotinfo:ct};function ge(){te.plotinfo.selection=!1,g(ot)}function pe($e,ir){var Ke=te.gd;if(Ke._fullLayout._activeShapeIndex>=0)Ke._fullLayout._deactivateShape(Ke);else{var ar=Ke._fullLayout.clickmode;if(X(Ke),$e!==2||se||Ge(),ie)ar.indexOf("select")>-1&&A(ir,Ke,ht,Lt,ct.id,te),ar.indexOf("event")>-1&&i.click(Ke,ir,ct.id);else if($e===1&&se){var fr=mt?xt:vt,mr=mt==="s"||Ot==="w"?0:1,Cr=fr._name+".range["+mr+"]",Er=function(Xr,en){var sn,tn=Xr.range[en],qr=Math.abs(tn-Xr.range[1-en]);return Xr.type==="date"?tn:Xr.type==="log"?(sn=Math.ceil(Math.max(0,-Math.log(qr)/Math.LN10))+3,r("."+sn+"g")(Math.pow(10,tn))):(sn=Math.floor(Math.log(Math.abs(tn))/Math.LN10)-Math.floor(Math.log(qr)/Math.LN10)+4,r("."+String(sn)+"g")(tn))}(fr,mr),_r="left",Sr="middle";if(fr.fixedrange)return;mt?(Sr=mt==="n"?"top":"bottom",fr.side==="right"&&(_r="right")):Ot==="e"&&(_r="right"),Ke._context.showAxisRangeEntryBoxes&&T.select(Ie).call(t.makeEditable,{gd:Ke,immediate:!0,background:Ke._fullLayout.paper_bgcolor,text:String(Er),fill:fr.tickfont?fr.tickfont.color:"#444",horizontalAlign:_r,verticalAlign:Sr}).on("edit",function(Xr){var en=fr.d2r(Xr);en!==void 0&&s.call("_guiRelayout",Ke,Cr,en)})}}}function me($e,ir){if(ot._transitioningWithDuration)return!1;var Ke=Math.max(0,Math.min(St,de*$e+Te)),ar=Math.max(0,Math.min(Dt,ye*ir+Vt)),fr=Math.abs(Ke-Te),mr=Math.abs(ar-Vt);function Cr(){re="",Zt.r=Zt.l,Zt.t=Zt.b,Nt.attr("d","M0,0Z")}if(Zt.l=Math.min(Te,Ke),Zt.r=Math.max(Te,Ke),Zt.t=Math.min(Vt,ar),Zt.b=Math.max(Vt,ar),ut.isSubplotConstrained)fr>S||mr>S?(re="xy",fr/St>mr/Dt?(mr=fr*Dt/St,Vt>ar?Zt.t=Vt-mr:Zt.b=Vt+mr):(fr=mr*St/Dt,Te>Ke?Zt.l=Te-fr:Zt.r=Te+fr),Nt.attr("d",Z(Zt))):Cr();else if(Tt.isSubplotConstrained)if(fr>S||mr>S){re="xy";var Er=Math.min(Zt.l/St,(Dt-Zt.b)/Dt),_r=Math.max(Zt.r/St,(Dt-Zt.t)/Dt);Zt.l=Er*St,Zt.r=_r*St,Zt.b=(1-Er)*Dt,Zt.t=(1-_r)*Dt,Nt.attr("d",Z(Zt))}else Cr();else!It||mr<Math.min(Math.max(.6*fr,E),S)?fr<E||!bt?Cr():(Zt.t=0,Zt.b=Dt,re="x",Nt.attr("d",function(Sr,Xr){return"M"+(Sr.l-.5)+","+(Xr-S-.5)+"h-3v"+(2*S+1)+"h3ZM"+(Sr.r+.5)+","+(Xr-S-.5)+"h3v"+(2*S+1)+"h-3Z"}(Zt,Vt))):!bt||fr<Math.min(.6*mr,S)?(Zt.l=0,Zt.r=St,re="y",Nt.attr("d",function(Sr,Xr){return"M"+(Xr-S-.5)+","+(Sr.t-.5)+"v-3h"+(2*S+1)+"v3ZM"+(Xr-S-.5)+","+(Sr.b+.5)+"v3h"+(2*S+1)+"v-3Z"}(Zt,Te))):(re="xy",Nt.attr("d",Z(Zt)));Zt.w=Zt.r-Zt.l,Zt.h=Zt.b-Zt.t,re&&(ee=!0),ot._dragged=ee,et(Pt,Nt,Zt,Yt,ne,Gt),ce(),ot.emit("plotly_relayouting",Qt),ne=!0}function ce(){Qt={},re!=="xy"&&re!=="x"||(j(ht,Zt.l/St,Zt.r/St,Qt,ut.xaxes),Ue("x",Qt)),re!=="xy"&&re!=="y"||(j(Lt,(Dt-Zt.b)/Dt,(Dt-Zt.t)/Dt,Qt,ut.yaxes),Ue("y",Qt))}function we(){ce(),X(ot),Ze(),Y(ot)}te.prepFn=function($e,ir,Ke){var ar=te.dragmode,fr=ot._fullLayout.dragmode;fr!==ar&&(te.dragmode=fr),ke(),de=ot._fullLayout._invScaleX,ye=ot._fullLayout._invScaleY,zt||(ie?$e.shiftKey?fr==="pan"?fr="zoom":d(fr)||(fr="pan"):$e.ctrlKey&&(fr="pan"):fr="pan"),w(fr)?te.minDrag=1:te.minDrag=void 0,d(fr)?(te.xaxes=ht,te.yaxes=Lt,_($e,ir,Ke,te,fr)):(te.clickFn=pe,d(ar)&&ge(),zt||(fr==="zoom"?(te.moveFn=me,te.doneFn=we,te.minDrag=1,function(mr,Cr,Er){var _r=Ie.getBoundingClientRect();Te=Cr-_r.left,Vt=Er-_r.top,ot._fullLayout._calcInverseTransform(ot);var Sr=k.apply3DTransform(ot._fullLayout._invTransform)(Te,Vt);Te=Sr[0],Vt=Sr[1],Zt={l:Te,r:Te,w:0,t:Vt,b:Vt,h:0},Gt=ot._hmpixcount?ot._hmlumcount/ot._hmpixcount:m(ot._fullLayout.plot_bgcolor).getLuminance(),ne=!1,re="xy",ee=!1,Pt=G(ve,Gt,Mt,_t,Yt="M0,0H"+St+"V"+Dt+"H0V0"),Nt=V(ve,Mt,_t)}(0,ir,Ke)):fr==="pan"&&(te.moveFn=De,te.doneFn=Ze))),ot._fullLayout._redrag=function(){var mr=ot._dragdata;if(mr&&mr.element===Ie){var Cr=ot._fullLayout.dragmode;d(Cr)||(ke(),We([0,0,St,Dt]),te.moveFn(mr.dx,mr.dy))}}},u.init(te);var ue=[0,0,St,Dt],he=null,be=L.REDRAWDELAY,Pe=ct.mainplot?ot._fullLayout._plots[ct.mainplot]:ct;function De($e,ir){if($e*=de,ir*=ye,!ot._transitioningWithDuration){if(ot._fullLayout._replotting=!0,bt==="ew"||It==="ns"){var Ke=bt?-$e:0,ar=It?-ir:0;if(Tt.isSubplotConstrained){if(bt&&It){var fr=($e/St-ir/Dt)/2;Ke=-($e=fr*St),ar=-(ir=-fr*Dt)}It?Ke=-ar*St/Dt:ar=-Ke*Dt/St}return bt&&(B(ht,$e),Ue("x")),It&&(B(Lt,ir),Ue("y")),We([Ke,ar,St,Dt]),tr(),void ot.emit("plotly_relayouting",Qt)}var mr,Cr,Er=bt==="w"==(It==="n")?1:-1;if(bt&&It&&(ut.isSubplotConstrained||Tt.isSubplotConstrained)){var _r=($e/St+Er*ir/Dt)/2;$e=_r*St,ir=Er*_r*Dt}if(bt==="w"?$e=sn(ht,0,$e):bt==="e"?$e=sn(ht,1,-$e):bt||($e=0),It==="n"?ir=sn(Lt,1,ir):It==="s"?ir=sn(Lt,0,-ir):It||(ir=0),mr=bt==="w"?$e:0,Cr=It==="n"?ir:0,ut.isSubplotConstrained&&!Tt.isSubplotConstrained||Tt.isSubplotConstrained&&bt&&It&&Er>0){var Sr;if(Tt.isSubplotConstrained||!bt&&It.length===1){for(Sr=0;Sr<ht.length;Sr++)ht[Sr].range=ht[Sr]._r.slice(),M(ht[Sr],1-ir/Dt);mr=($e=ir*St/Dt)/2}if(Tt.isSubplotConstrained||!It&&bt.length===1){for(Sr=0;Sr<Lt.length;Sr++)Lt[Sr].range=Lt[Sr]._r.slice(),M(Lt[Sr],1-$e/St);Cr=(ir=$e*Dt/St)/2}}Tt.isSubplotConstrained&&It||Ue("x"),Tt.isSubplotConstrained&&bt||Ue("y");var Xr=St-$e,en=Dt-ir;!Tt.isSubplotConstrained||bt&&It||(bt?(Cr=mr?0:$e*Dt/St,en=Xr*Dt/St):(mr=Cr?0:ir*St/Dt,Xr=en*St/Dt)),We([mr,Cr,Xr,en]),tr(),ot.emit("plotly_relayouting",Qt)}function sn(tn,qr,vn){for(var je,nr,hr=1-qr,gr=0;gr<tn.length;gr++){var Mr=tn[gr];if(!Mr.fixedrange){je=Mr,nr=Mr._rl[hr]+(Mr._rl[qr]-Mr._rl[hr])/z(vn/Mr._length);var Hr=Mr.l2r(nr);Hr!==!1&&Hr!==void 0&&(Mr.range[qr]=Hr)}}return je._length*(je._rl[qr]-nr)/(je._rl[qr]-je._rl[hr])}}function Ue($e,ir){for(var Ke=Tt.isSubplotConstrained?{x:Lt,y:ht}[$e]:Tt[$e+"axes"],ar=Tt.isSubplotConstrained?{x:ht,y:Lt}[$e]:[],fr=0;fr<Ke.length;fr++){var mr=Ke[fr],Cr=mr._id,Er=Tt.xLinks[Cr]||Tt.yLinks[Cr],_r=ar[0]||st[Er]||at[Er];_r&&(ir?(ir[mr._name+".range[0]"]=ir[_r._name+".range[0]"],ir[mr._name+".range[1]"]=ir[_r._name+".range[1]"]):mr.range=_r.range.slice())}}function tr(){var $e,ir=[];function Ke(Cr){for($e=0;$e<Cr.length;$e++)Cr[$e].fixedrange||ir.push(Cr[$e]._id)}function ar(Cr,Er){for($e=0;$e<Cr.length;$e++){var _r=Cr[$e],Sr=_r[Er];_r.fixedrange||Sr.tickmode!=="sync"||ir.push(Sr._id)}}for(Ft&&(Ke(ht),Ke(ut.xaxes),Ke(Tt.xaxes),ar(ct.overlays,"xaxis")),$t&&(Ke(Lt),Ke(ut.yaxes),Ke(Tt.yaxes),ar(ct.overlays,"yaxis")),Qt={},$e=0;$e<ir.length;$e++){var fr=ir[$e],mr=x(ot,fr);c.drawOne(ot,mr,{skipTitle:!0}),Qt[mr._name+".range[0]"]=mr.range[0],Qt[mr._name+".range[1]"]=mr.range[1]}c.redrawComponents(ot,ir)}function Ge(){if(!ot._transitioningWithDuration){var $e=ot._context.doubleClick,ir=[];bt&&(ir=ir.concat(ht)),It&&(ir=ir.concat(Lt)),Tt.xaxes&&(ir=ir.concat(Tt.xaxes)),Tt.yaxes&&(ir=ir.concat(Tt.yaxes));var Ke,ar,fr={};if($e==="reset+autosize")for($e="autosize",ar=0;ar<ir.length;ar++){var mr=(Ke=ir[ar])._rangeInitial0,Cr=Ke._rangeInitial1,Er=mr!==void 0||Cr!==void 0;if(Er&&(mr!==void 0&&mr!==Ke.range[0]||Cr!==void 0&&Cr!==Ke.range[1])||!Er&&Ke.autorange!==!0){$e="reset";break}}if($e==="autosize")for(ar=0;ar<ir.length;ar++)(Ke=ir[ar]).fixedrange||(fr[Ke._name+".autorange"]=!0);else if($e==="reset"){for((bt||ut.isSubplotConstrained)&&(ir=ir.concat(ut.xaxes)),It&&!ut.isSubplotConstrained&&(ir=ir.concat(ut.yaxes)),ut.isSubplotConstrained&&(bt?It||(ir=ir.concat(Lt)):ir=ir.concat(ht)),ar=0;ar<ir.length;ar++)if(!(Ke=ir[ar]).fixedrange){var _r=Ke._name,Sr=Ke._autorangeInitial;Ke._rangeInitial0===void 0&&Ke._rangeInitial1===void 0?fr[_r+".autorange"]=!0:Ke._rangeInitial0===void 0?(fr[_r+".autorange"]=Sr,fr[_r+".range"]=[null,Ke._rangeInitial1]):Ke._rangeInitial1===void 0?(fr[_r+".range"]=[Ke._rangeInitial0,null],fr[_r+".autorange"]=Sr):fr[_r+".range"]=[Ke._rangeInitial0,Ke._rangeInitial1]}}ot.emit("plotly_doubleclick",null),s.call("_guiRelayout",ot,fr)}}function Ze(){We([0,0,St,Dt]),k.syncOrAsync([b.previousPromises,function(){ot._fullLayout._replotting=!1,s.call("_guiRelayout",ot,Qt)}],ot)}function We($e){var ir,Ke,ar,fr,mr=ot._fullLayout,Cr=mr._plots,Er=mr._subplots.cartesian;if(Xt&&s.subplotsRegistry.splom.drag(ot),Wt){for(ir=0;ir<Er.length;ir++)if(ar=(Ke=Cr[Er[ir]]).xaxis,fr=Ke.yaxis,Ke._scene){var _r=k.simpleMap(ar.range,ar.r2l),Sr=k.simpleMap(fr.range,fr.r2l);ar.limitRange&&ar.limitRange(),fr.limitRange&&fr.limitRange(),_r=ar.range,Sr=fr.range,Ke._scene.update({range:[_r[0],Sr[0],_r[1],Sr[1]]})}}if((Xt||Wt)&&(p(ot),y(ot)),ae){var Xr=$e[2]/vt._length,en=$e[3]/xt._length;for(ir=0;ir<Er.length;ir++){ar=(Ke=Cr[Er[ir]]).xaxis,fr=Ke.yaxis;var sn,tn,qr,vn,je=(Ft||Tt.isSubplotConstrained)&&!ar.fixedrange&&st[ar._id],nr=($t||Tt.isSubplotConstrained)&&!fr.fixedrange&&at[fr._id];if(je?(sn=Xr,qr=Ot||Tt.isSubplotConstrained?$e[0]:sr(ar,sn)):Tt.xaHash[ar._id]?(sn=Xr,qr=$e[0]*ar._length/vt._length):Tt.yaHash[ar._id]?(sn=en,qr=It==="ns"?-$e[1]*ar._length/xt._length:sr(ar,sn,{n:"top",s:"bottom"}[It])):qr=xr(ar,sn=pr(ar,Xr,en)),sn>1&&(ar.maxallowed!==void 0&&Ft===(ar.range[0]<ar.range[1]?"e":"w")||ar.minallowed!==void 0&&Ft===(ar.range[0]<ar.range[1]?"w":"e"))&&(sn=1,qr=0),nr?(tn=en,vn=mt||Tt.isSubplotConstrained?$e[1]:sr(fr,tn)):Tt.yaHash[fr._id]?(tn=en,vn=$e[1]*fr._length/xt._length):Tt.xaHash[fr._id]?(tn=Xr,vn=bt==="ew"?-$e[0]*fr._length/vt._length:sr(fr,tn,{e:"right",w:"left"}[bt])):vn=xr(fr,tn=pr(fr,Xr,en)),tn>1&&(fr.maxallowed!==void 0&&$t===(fr.range[0]<fr.range[1]?"n":"s")||fr.minallowed!==void 0&&$t===(fr.range[0]<fr.range[1]?"s":"n"))&&(tn=1,vn=0),sn||tn){sn||(sn=1),tn||(tn=1);var hr=ar._offset-qr/sn,gr=fr._offset-vn/tn;Ke.clipRect.call(a.setTranslate,qr,vn).call(a.setScale,sn,tn),Ke.plot.call(a.setTranslate,hr,gr).call(a.setScale,1/sn,1/tn),sn===Ke.xScaleFactor&&tn===Ke.yScaleFactor||(a.setPointGroupScale(Ke.zoomScalePts,sn,tn),a.setTextPointsScale(Ke.zoomScaleTxt,sn,tn)),a.hideOutsideRangePoints(Ke.clipOnAxisFalseTraces,Ke),Ke.xScaleFactor=sn,Ke.yScaleFactor=tn}}}}function pr($e,ir,Ke){return $e.fixedrange?0:Ft&&ut.xaHash[$e._id]?ir:$t&&(ut.isSubplotConstrained?ut.xaHash:ut.yaHash)[$e._id]?Ke:0}function xr($e,ir){return ir?($e.range=$e._r.slice(),M($e,ir),sr($e,ir)):0}function sr($e,ir,Ke){return $e._length*(1-ir)*v[Ke||$e.constraintoward||"middle"]}return mt.length*Ot.length!=1&&rt(Ie,function($e){if(ot._context._scrollZoom.cartesian||ot._fullLayout._enablescrollzoom){if(ge(),ot._transitioningWithDuration)return $e.preventDefault(),void $e.stopPropagation();ke(),clearTimeout(he);var ir=-$e.deltaY;if(isFinite(ir)||(ir=$e.wheelDelta/10),isFinite(ir)){var Ke,ar=Math.exp(-Math.min(Math.max(ir,-20),20)/200),fr=Pe.draglayer.select(".nsewdrag").node().getBoundingClientRect(),mr=($e.clientX-fr.left)/fr.width,Cr=(fr.bottom-$e.clientY)/fr.height;if(Ft){for(Ot||(mr=.5),Ke=0;Ke<ht.length;Ke++)Er(ht[Ke],mr,ar);Ue("x"),ue[2]*=ar,ue[0]+=ue[2]*mr*(1/ar-1)}if($t){for(mt||(Cr=.5),Ke=0;Ke<Lt.length;Ke++)Er(Lt[Ke],Cr,ar);Ue("y"),ue[3]*=ar,ue[1]+=ue[3]*(1-Cr)*(1/ar-1)}We(ue),tr(),ot.emit("plotly_relayouting",Qt),he=setTimeout(function(){ot._fullLayout&&(ue=[0,0,St,Dt],Ze())},be),$e.preventDefault()}else k.log("Did not find wheel motion attributes: ",$e)}function Er(_r,Sr,Xr){if(!_r.fixedrange){var en=k.simpleMap(_r.range,_r.r2l),sn=en[0]+(en[1]-en[0])*Sr;_r.range=en.map(function(tn){return _r.l2r(sn+(tn-sn)*Xr)})}}}),Ie},makeDragger:P,makeRectDragger:U,makeZoombox:G,makeCorners:V,updateZoombox:et,xyCorners:Z,transitionZoombox:J,removeZoombox:X,showDoubleClickNotifier:Y,attachWheelEventHandler:rt}},4305:function(W,I,o){var T=o(39898),k=o(30211),r=o(28569),m=o(6964),h=o(29323).makeDragBox,s=o(85555).DRAGGERSIZE;I.initInteractions=function(e){var t=e._fullLayout;if(e._context.staticPlot)T.select(e).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(a,i){if((t._plots[a].mainplot&&!0)===(t._plots[i].mainplot&&!0)){var c=a.split("y"),l=i.split("y");return c[0]===l[0]?Number(c[1]||1)-Number(l[1]||1):Number(c[0]||1)-Number(l[0]||1)}return t._plots[a].mainplot?1:-1}).forEach(function(a){var i=t._plots[a],c=i.xaxis,l=i.yaxis;if(!i.mainplot){var u=h(e,i,c._offset,l._offset,c._length,l._length,"ns","ew");u.onmousemove=function(w){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===a&&e._fullLayout._plots[a]&&k.hover(e,w,a)},k.hover(e,w,a),e._fullLayout._lasthover=u,e._fullLayout._hoversubplot=a},u.onmouseout=function(w){e._dragging||(e._fullLayout._hoversubplot=null,r.unhover(e,w))},e._context.showAxisDragHandles&&(h(e,i,c._offset-s,l._offset-s,s,s,"n","w"),h(e,i,c._offset+c._length,l._offset-s,s,s,"n","e"),h(e,i,c._offset-s,l._offset+l._length,s,s,"s","w"),h(e,i,c._offset+c._length,l._offset+l._length,s,s,"s","e"))}if(e._context.showAxisDragHandles){if(a===c._mainSubplot){var f=c._mainLinePosition;c.side==="top"&&(f-=s),h(e,i,c._offset+.1*c._length,f,.8*c._length,s,"","ew"),h(e,i,c._offset,f,.1*c._length,s,"","w"),h(e,i,c._offset+.9*c._length,f,.1*c._length,s,"","e")}if(a===l._mainSubplot){var d=l._mainLinePosition;l.side!=="right"&&(d-=s),h(e,i,d,l._offset+.1*l._length,s,.8*l._length,"ns",""),h(e,i,d,l._offset+.9*l._length,s,.1*l._length,"s",""),h(e,i,d,l._offset,s,.1*l._length,"n","")}}});var n=t._hoverlayer.node();n.onmousemove=function(a){a.target=e._fullLayout._lasthover,k.hover(e,a,t._hoversubplot)},n.onclick=function(a){a.target=e._fullLayout._lasthover,k.click(e,a)},n.onmousedown=function(a){e._fullLayout._lasthover.onmousedown(a)},I.updateFx(e)}},I.updateFx=function(e){var t=e._fullLayout,n=t.dragmode==="pan"?"move":"crosshair";m(t._draggers,n)}},76325:function(W,I,o){var T=o(73972),k=o(71828),r=o(41675);W.exports=function(m){return function(h,s){var e=h[m];if(Array.isArray(e))for(var t=T.subplotsRegistry.cartesian,n=t.idRegex,a=s._subplots,i=a.xaxis,c=a.yaxis,l=a.cartesian,u=s._has("cartesian")||s._has("gl2d"),f=0;f<e.length;f++){var d=e[f];if(k.isPlainObject(d)){var w=r.cleanId(d.xref,"x",!1),v=r.cleanId(d.yref,"y",!1),p=n.x.test(w),y=n.y.test(v);if(p||y){u||k.pushUnique(s._basePlotModules,t);var b=!1;p&&i.indexOf(w)===-1&&(i.push(w),b=!0),y&&c.indexOf(v)===-1&&(c.push(v),b=!0),b&&p&&y&&l.push(w+v)}}}}}},93612:function(W,I,o){var T=o(39898),k=o(73972),r=o(71828),m=o(74875),h=o(91424),s=o(27659).a0,e=o(41675),t=o(85555),n=o(77922),a=r.ensureSingle;function i(d,w,v){return r.ensureSingle(d,w,v,function(p){p.datum(v)})}function c(d,w,v,p,y){for(var b,x,_,g=t.traceLayerClasses,A=d._fullLayout,M=A._modules,L=[],E=[],S=0;S<M.length;S++){var O=(b=M[S]).name,P=k.modules[O].categories;if(P.svg){var U=b.layerName||O+"layer",R=b.plot;_=(x=s(v,R))[0],v=x[1],_.length&&L.push({i:g.indexOf(U),className:U,plotMethod:R,cdModule:_}),P.zoomScale&&E.push("."+U)}}L.sort(function(z,G){return z.i-G.i});var j=w.plot.selectAll("g.mlayer").data(L,function(z){return z.className});if(j.enter().append("g").attr("class",function(z){return z.className}).classed("mlayer",!0).classed("rangeplot",w.isRangePlot),j.exit().remove(),j.order(),j.each(function(z){var G=T.select(this),V=z.className;z.plotMethod(d,w,z.cdModule,G,p,y),t.clipOnAxisFalseQuery.indexOf("."+V)===-1&&h.setClipUrl(G,w.layerClipId,d)}),A._has("scattergl")&&(b=k.getModule("scattergl"),_=s(v,b)[0],b.plot(d,w,_)),!d._context.staticPlot&&(w._hasClipOnAxisFalse&&(w.clipOnAxisFalseTraces=w.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),E.length)){var B=w.plot.selectAll(E.join(",")).selectAll(".trace");w.zoomScalePts=B.selectAll("path.point"),w.zoomScaleTxt=B.selectAll(".textpoint")}}function l(d,w){var v=w.plotgroup,p=w.id,y=t.layerValue2layerClass[w.xaxis.layer],b=t.layerValue2layerClass[w.yaxis.layer],x=d._fullLayout._hasOnlyLargeSploms;if(w.mainplot){var _=w.mainplotinfo,g=_.plotgroup,A=p+"-x",M=p+"-y";w.minorGridlayer=_.minorGridlayer,w.gridlayer=_.gridlayer,w.zerolinelayer=_.zerolinelayer,a(_.overlinesBelow,"path",A),a(_.overlinesBelow,"path",M),a(_.overaxesBelow,"g",A),a(_.overaxesBelow,"g",M),w.plot=a(_.overplot,"g",p),a(_.overlinesAbove,"path",A),a(_.overlinesAbove,"path",M),a(_.overaxesAbove,"g",A),a(_.overaxesAbove,"g",M),w.xlines=g.select(".overlines-"+y).select("."+A),w.ylines=g.select(".overlines-"+b).select("."+M),w.xaxislayer=g.select(".overaxes-"+y).select("."+A),w.yaxislayer=g.select(".overaxes-"+b).select("."+M)}else if(x)w.xlines=a(v,"path","xlines-above"),w.ylines=a(v,"path","ylines-above"),w.xaxislayer=a(v,"g","xaxislayer-above"),w.yaxislayer=a(v,"g","yaxislayer-above");else{var L=a(v,"g","layer-subplot");w.shapelayer=a(L,"g","shapelayer"),w.imagelayer=a(L,"g","imagelayer"),w.minorGridlayer=a(v,"g","minor-gridlayer"),w.gridlayer=a(v,"g","gridlayer"),w.zerolinelayer=a(v,"g","zerolinelayer"),a(v,"path","xlines-below"),a(v,"path","ylines-below"),w.overlinesBelow=a(v,"g","overlines-below"),a(v,"g","xaxislayer-below"),a(v,"g","yaxislayer-below"),w.overaxesBelow=a(v,"g","overaxes-below"),w.plot=a(v,"g","plot"),w.overplot=a(v,"g","overplot"),w.xlines=a(v,"path","xlines-above"),w.ylines=a(v,"path","ylines-above"),w.overlinesAbove=a(v,"g","overlines-above"),a(v,"g","xaxislayer-above"),a(v,"g","yaxislayer-above"),w.overaxesAbove=a(v,"g","overaxes-above"),w.xlines=v.select(".xlines-"+y),w.ylines=v.select(".ylines-"+b),w.xaxislayer=v.select(".xaxislayer-"+y),w.yaxislayer=v.select(".yaxislayer-"+b)}x||(i(w.minorGridlayer,"g",w.xaxis._id),i(w.minorGridlayer,"g",w.yaxis._id),w.minorGridlayer.selectAll("g").map(function(E){return E[0]}).sort(e.idSort),i(w.gridlayer,"g",w.xaxis._id),i(w.gridlayer,"g",w.yaxis._id),w.gridlayer.selectAll("g").map(function(E){return E[0]}).sort(e.idSort)),w.xlines.style("fill","none").classed("crisp",!0),w.ylines.style("fill","none").classed("crisp",!0)}function u(d,w){if(d){var v={};for(var p in d.each(function(_){var g=_[0];T.select(this).remove(),f(g,w),v[g]=!0}),w._plots)for(var y=w._plots[p].overlays||[],b=0;b<y.length;b++){var x=y[b];v[x.id]&&x.plot.selectAll(".trace").remove()}}}function f(d,w){w._draggers.selectAll("g."+d).remove(),w._defs.select("#clip"+w._uid+d+"plot").remove()}I.name="cartesian",I.attr=["xaxis","yaxis"],I.idRoot=["x","y"],I.idRegex=t.idRegex,I.attrRegex=t.attrRegex,I.attributes=o(89502),I.layoutAttributes=o(13838),I.supplyLayoutDefaults=o(86763),I.transitionAxes=o(66847),I.finalizeSubplots=function(d,w){var v,p,y,b=w._subplots,x=b.xaxis,_=b.yaxis,g=b.cartesian,A=g.concat(b.gl2d||[]),M={},L={};for(v=0;v<A.length;v++){var E=A[v].split("y");M[E[0]]=1,L["y"+E[1]]=1}for(v=0;v<x.length;v++)M[p=x[v]]||(y=(d[e.id2name(p)]||{}).anchor,t.idRegex.y.test(y)||(y="y"),g.push(p+y),A.push(p+y),L[y]||(L[y]=1,r.pushUnique(_,y)));for(v=0;v<_.length;v++)L[y=_[v]]||(p=(d[e.id2name(y)]||{}).anchor,t.idRegex.x.test(p)||(p="x"),g.push(p+y),A.push(p+y),M[p]||(M[p]=1,r.pushUnique(x,p)));if(!A.length){for(var S in p="",y="",d)t.attrRegex.test(S)&&(S.charAt(0)==="x"?(!p||+S.substr(5)<+p.substr(5))&&(p=S):(!y||+S.substr(5)<+y.substr(5))&&(y=S));p=p?e.name2id(p):"x",y=y?e.name2id(y):"y",x.push(p),_.push(y),g.push(p+y)}},I.plot=function(d,w,v,p){var y,b=d._fullLayout,x=b._subplots.cartesian,_=d.calcdata;if(!Array.isArray(w))for(w=[],y=0;y<_.length;y++)w.push(y);for(y=0;y<x.length;y++){for(var g,A=x[y],M=b._plots[A],L=[],E=0;E<_.length;E++){var S=_[E],O=S[0].trace;O.xaxis+O.yaxis===A&&((w.indexOf(O.index)!==-1||O.carpet)&&(g&&g[0].trace.xaxis+g[0].trace.yaxis===A&&["tonextx","tonexty","tonext"].indexOf(O.fill)!==-1&&L.indexOf(g)===-1&&L.push(g),L.push(S)),g=S)}c(d,M,L,v,p)}},I.clean=function(d,w,v,p){var y,b,x,_=p._plots||{},g=w._plots||{},A=p._subplots||{};if(p._hasOnlyLargeSploms&&!w._hasOnlyLargeSploms)for(x in _)(y=_[x]).plotgroup&&y.plotgroup.remove();var M=p._has&&p._has("gl"),L=w._has&&w._has("gl");if(M&&!L)for(x in _)(y=_[x])._scene&&y._scene.destroy();if(A.xaxis&&A.yaxis){var E=e.listIds({_fullLayout:p});for(b=0;b<E.length;b++){var S=E[b];w[e.id2name(S)]||p._infolayer.selectAll(".g-"+S+"title").remove()}}var O=p._has&&p._has("cartesian"),P=w._has&&w._has("cartesian");if(O&&!P)u(p._cartesianlayer.selectAll(".subplot"),p),p._defs.selectAll(".axesclip").remove(),delete p._axisConstraintGroups,delete p._axisMatchGroups;else if(A.cartesian)for(b=0;b<A.cartesian.length;b++){var U=A.cartesian[b];if(!g[U]){var R="."+U+",."+U+"-x,."+U+"-y";p._cartesianlayer.selectAll(R).remove(),f(U,p)}}},I.drawFramework=function(d){var w=d._fullLayout,v=function(y){var b,x,_,g,A,M,L=y._fullLayout,E=L._subplots.cartesian,S=E.length,O=[],P=[];for(b=0;b<S;b++){_=E[b],A=(g=L._plots[_]).xaxis,M=g.yaxis;var U=A._mainAxis,R=M._mainAxis,j=U._id+R._id,B=L._plots[j];g.overlays=[],j!==_&&B?(g.mainplot=j,g.mainplotinfo=B,P.push(_)):(g.mainplot=void 0,g.mainplotinfo=void 0,O.push(_))}for(b=0;b<P.length;b++)_=P[b],(g=L._plots[_]).mainplotinfo.overlays.push(g);var z=O.concat(P),G=new Array(S);for(b=0;b<S;b++){_=z[b],A=(g=L._plots[_]).xaxis,M=g.yaxis;var V=[_,A.layer,M.layer,A.overlaying||"",M.overlaying||""];for(x=0;x<g.overlays.length;x++)V.push(g.overlays[x].id);G[b]=V}return G}(d),p=w._cartesianlayer.selectAll(".subplot").data(v,String);p.enter().append("g").attr("class",function(y){return"subplot "+y[0]}),p.order(),p.exit().call(u,w),p.each(function(y){var b=y[0],x=w._plots[b];x.plotgroup=T.select(this),l(d,x),x.draglayer=a(w._draggers,"g",b)})},I.rangePlot=function(d,w,v){l(d,w),c(d,w,v),m.style(d)},I.toSVG=function(d){var w=d._fullLayout._glimages,v=T.select(d).selectAll(".svg-container");v.filter(function(p,y){return y===v.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var p=this,y=p.toDataURL("image/png");w.append("svg:image").attr({xmlns:n.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:p.style.width,height:p.style.height})})},I.updateFx=o(4305).updateFx},13838:function(W,I,o){var T=o(41940),k=o(22399),r=o(79952).P,m=o(1426).extendFlat,h=o(44467).templatedArray,s=o(12663).descriptionWithDates,e=o(50606).ONEDAY,t=o(85555),n=t.HOUR_PATTERN,a=t.WEEKDAY_PATTERN,i={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},c=m({},i,{values:i.values.slice().concat(["sync"])});function l(A){return{valType:"integer",min:0,dflt:A?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"data_array",editType:"ticks"},w={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function v(A){var M={valType:"number",min:0,editType:"ticks"};return A||(M.dflt=5),M}function p(A){var M={valType:"number",min:0,editType:"ticks"};return A||(M.dflt=1),M}var y={valType:"color",dflt:k.defaultLine,editType:"ticks"},b={valType:"color",dflt:k.lightLine,editType:"ticks"};function x(A){var M={valType:"number",min:0,editType:"ticks"};return A||(M.dflt=1),M}var _=m({},r,{editType:"ticks"}),g={valType:"boolean",editType:"ticks"};W.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:T({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:h("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[a,n,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:e},editType:"calc"}),tickmode:c,nticks:l(),tick0:u,dtick:f,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:d,ticktext:{valType:"data_array",editType:"ticks"},ticks:w,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:v(),tickwidth:p(),tickcolor:y,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:m({},r,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:T({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:s("tick label")},tickformatstops:h("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:s("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:g,gridcolor:b,gridwidth:x(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:i,nticks:l("minor"),tick0:u,dtick:f,tickvals:d,ticks:w,ticklen:v("minor"),tickwidth:p("minor"),tickcolor:y,gridcolor:b,gridwidth:x("minor"),griddash:_,showgrid:g,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:T({editType:"ticks"})}}},86763:function(W,I,o){var T=o(71828),k=o(7901),r=o(23469).isUnifiedHover,m=o(98212),h=o(44467),s=o(10820),e=o(13838),t=o(951),n=o(71453),a=o(99082),i=o(52830),c=o(41675),l=c.id2name,u=c.name2id,f=o(85555).AX_ID_PATTERN,d=o(73972),w=d.traceIs,v=d.getComponentMethod;function p(y,b,x){Array.isArray(y[b])?y[b].push(x):y[b]=[x]}W.exports=function(y,b,x){var _,g,A=b.autotypenumbers,M={},L={},E={},S={},O={},P={},U={},R={},j={},B={};for(_=0;_<x.length;_++){var z=x[_];if(w(z,"cartesian")||w(z,"gl2d")){var G,V;if(z.xaxis)G=l(z.xaxis),p(M,G,z);else if(z.xaxes)for(g=0;g<z.xaxes.length;g++)p(M,l(z.xaxes[g]),z);if(z.yaxis)V=l(z.yaxis),p(M,V,z);else if(z.yaxes)for(g=0;g<z.yaxes.length;g++)p(M,l(z.yaxes[g]),z);z.type==="funnel"?z.orientation==="h"?(G&&(L[G]=!0),V&&(U[V]=!0)):V&&(E[V]=!0):z.type==="image"?(V&&(R[V]=!0),G&&(R[G]=!0)):(V&&(O[V]=!0,P[V]=!0),w(z,"carpet")&&(z.type!=="carpet"||z._cheater)||G&&(S[G]=!0)),z.type==="carpet"&&z._cheater&&G&&(L[G]=!0),w(z,"2dMap")&&(j[G]=!0,j[V]=!0),w(z,"oriented")&&(B[z.orientation==="h"?V:G]=!0)}}var et=b._subplots,J=et.xaxis,X=et.yaxis,Y=T.simpleMap(J,l),Z=T.simpleMap(X,l),tt=Y.concat(Z),rt=k.background;J.length&&X.length&&(rt=T.coerce(y,b,s,"plot_bgcolor"));var nt,ot,ct,pt,gt,kt=k.combine(rt,b.paper_bgcolor);function yt(){var se=M[nt]||[];gt._traceIndices=se.map(function(ke){return ke._expandedIndex}),gt._annIndices=[],gt._shapeIndices=[],gt._selectionIndices=[],gt._imgIndices=[],gt._subplotsWith=[],gt._counterAxes=[],gt._name=gt._attr=nt,gt._id=ot}function mt(se,ke){return T.coerce(pt,gt,e,se,ke)}function Ot(se,ke){return T.coerce2(pt,gt,e,se,ke)}function vt(se){return se==="x"?X:J}function xt(se,ke){for(var Ae=se==="x"?Y:Z,Ie=[],Te=0;Te<Ae.length;Te++){var Vt=Ae[Te];Vt===ke||(y[Vt]||{}).overlaying||Ie.push(u(Vt))}return Ie}var st={x:vt("x"),y:vt("y")},at=st.x.concat(st.y),ht={},Lt=[];function Mt(){var se=pt.matches;f.test(se)&&at.indexOf(se)===-1&&(ht[se]=pt.type,Lt=Object.keys(ht))}var _t=m(y,b),St=r(_t);for(_=0;_<tt.length;_++){nt=tt[_],ot=u(nt),ct=nt.charAt(0),T.isPlainObject(y[nt])||(y[nt]={}),pt=y[nt],gt=h.newContainer(b,nt,ct+"axis"),yt();var Dt=ct==="x"&&!S[nt]&&L[nt]||ct==="y"&&!O[nt]&&E[nt],ut=ct==="y"&&(!P[nt]&&U[nt]||R[nt]),Tt={hasMinor:!0,letter:ct,font:b.font,outerTicks:j[nt],showGrid:!B[nt],data:M[nt]||[],bgColor:kt,calendar:b.calendar,automargin:!0,visibleDflt:Dt,reverseDflt:ut,autotypenumbersDflt:A,splomStash:((b._splomAxes||{})[ct]||{})[ot]};mt("uirevision",b.uirevision),t(pt,gt,mt,Tt),n(pt,gt,mt,Tt,b);var bt=St&&ct===_t.charAt(0),It=Ot("spikecolor",St?gt.color:void 0),zt=Ot("spikethickness",St?1.5:void 0),Ft=Ot("spikedash",St?"dot":void 0),$t=Ot("spikemode",St?"across":void 0),Wt=Ot("spikesnap");mt("showspikes",!!(bt||It||zt||Ft||$t||Wt))||(delete gt.spikecolor,delete gt.spikethickness,delete gt.spikedash,delete gt.spikemode,delete gt.spikesnap);var Xt=l(pt.overlaying),ae=[0,1];if(b[Xt]!==void 0){var Qt=l(b[Xt].anchor);b[Qt]!==void 0&&(ae=b[Qt].domain)}i(pt,gt,mt,{letter:ct,counterAxes:st[ct],overlayableAxes:xt(ct,nt),grid:b.grid,overlayingDomain:ae}),mt("title.standoff"),Mt(),gt._input=pt}for(_=0;_<Lt.length;){ot=Lt[_++],ct=(nt=l(ot)).charAt(0),T.isPlainObject(y[nt])||(y[nt]={}),pt=y[nt],gt=h.newContainer(b,nt,ct+"axis"),yt();var de={letter:ct,font:b.font,outerTicks:j[nt],showGrid:!B[nt],data:[],bgColor:kt,calendar:b.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:A,splomStash:((b._splomAxes||{})[ct]||{})[ot]};mt("uirevision",b.uirevision),gt.type=ht[ot]||"linear",n(pt,gt,mt,de,b),i(pt,gt,mt,{letter:ct,counterAxes:st[ct],overlayableAxes:xt(ct,nt),grid:b.grid}),mt("fixedrange"),Mt(),gt._input=pt}var ye=v("rangeslider","handleDefaults"),ve=v("rangeselector","handleDefaults");for(_=0;_<Y.length;_++)nt=Y[_],pt=y[nt],gt=b[nt],ye(y,b,nt),gt.type==="date"&&ve(pt,gt,b,Z,gt.calendar),mt("fixedrange");for(_=0;_<Z.length;_++){nt=Z[_],pt=y[nt],gt=b[nt];var ie=b[l(gt.anchor)];mt("fixedrange",v("rangeslider","isVisible")(ie))}a.handleDefaults(y,b,{axIds:at.concat(Lt).sort(c.idSort),axHasImage:R})}},92128:function(W,I,o){var T=o(84267).mix,k=o(22399),r=o(71828);W.exports=function(m,h,s,e){var t=(e=e||{}).dfltColor;function n(y,b){return r.coerce2(m,h,e.attributes,y,b)}var a=n("linecolor",t),i=n("linewidth");s("showline",e.showLine||!!a||!!i)||(delete h.linecolor,delete h.linewidth);var c=n("gridcolor",T(t,e.bgColor,e.blend||k.lightFraction).toRgbString()),l=n("gridwidth"),u=n("griddash");if(s("showgrid",e.showGrid||!!c||!!l||!!u)||(delete h.gridcolor,delete h.gridwidth,delete h.griddash),e.hasMinor){var f=n("minor.gridcolor",T(h.gridcolor,e.bgColor,67).toRgbString()),d=n("minor.gridwidth",h.gridwidth||1),w=n("minor.griddash",h.griddash||"solid");s("minor.showgrid",!!f||!!d||!!w)||(delete h.minor.gridcolor,delete h.minor.gridwidth,delete h.minor.griddash)}if(!e.noZeroLine){var v=n("zerolinecolor",t),p=n("zerolinewidth");s("zeroline",e.showGrid||!!v||!!p)||(delete h.zerolinecolor,delete h.zerolinewidth)}}},52830:function(W,I,o){var T=o(92770),k=o(71828);W.exports=function(r,m,h,s){var e,t,n,a,i,c,l=s.counterAxes||[],u=s.overlayableAxes||[],f=s.letter,d=s.grid,w=s.overlayingDomain;d&&(t=d._domains[f][d._axisMap[m._id]],e=d._anchors[m._id],t&&(n=d[f+"side"].split(" ")[0],a=d.domain[f][n==="right"||n==="top"?1:0])),t=t||[0,1],e=e||(T(r.position)?"free":l[0]||"free"),n=n||(f==="x"?"bottom":"left"),a=a||0,i=0,c=!1;var v=k.coerce(r,m,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:e}},"anchor"),p=k.coerce(r,m,{side:{valType:"enumerated",values:f==="x"?["bottom","top"]:["left","right"],dflt:n}},"side");v==="free"&&(f==="y"&&(h("autoshift")&&(a=p==="left"?w[0]:w[1],c=!m.automargin||m.automargin,i=p==="left"?-3:3),h("shift",i)),h("position",a)),h("automargin",c);var y=!1;if(u.length&&(y=k.coerce(r,m,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!y){var b=h("domain",t);b[0]>b[1]-.000244140625&&(m.domain=t),k.noneOrAll(r.domain,m.domain,t),m.tickmode==="sync"&&(m.tickmode="auto")}return h("layer"),m}},89426:function(W,I,o){var T=o(59652);W.exports=function(k,r,m,h,s){s||(s={});var e=s.tickSuffixDflt,t=T(k);m("tickprefix")&&m("showtickprefix",t),m("ticksuffix",e)&&m("showticksuffix",t)}},23608:function(W,I,o){var T=o(23074);W.exports=function(k,r,m,h){var s=r._template||{},e=r.type||s.type||"-";m("minallowed"),m("maxallowed");var t,n=m("range"),a=r.getAutorangeDflt(n,h),i=m("autorange",a);!n||(n[0]!==null||n[1]!==null)&&(n[0]!==null&&n[1]!==null||i!=="reversed"&&i!==!0)&&(n[0]===null||i!=="min"&&i!=="max reversed")&&(n[1]===null||i!=="max"&&i!=="min reversed")||(n=void 0,delete r.range,r.autorange=!0,t=!0),t||(i=m("autorange",a=r.getAutorangeDflt(n,h))),i&&(T(m,i,n),e!=="linear"&&e!=="-"||m("rangemode")),r.cleanRange()}},42449:function(W,I,o){var T=o(18783).FROM_BL;W.exports=function(k,r,m){m===void 0&&(m=T[k.constraintoward||"center"]);var h=[k.r2l(k.range[0]),k.r2l(k.range[1])],s=h[0]+(h[1]-h[0])*m;k.range=k._input.range=[k.l2r(s+(h[0]-s)*r),k.l2r(s+(h[1]-s)*r)],k.setScale()}},21994:function(W,I,o){var T=o(39898),k=o(84096).g0,r=o(71828),m=r.numberFormat,h=o(92770),s=r.cleanNumber,e=r.ms2DateTime,t=r.dateTime2ms,n=r.ensureNumber,a=r.isArrayOrTypedArray,i=o(50606),c=i.FP_SAFE,l=i.BADNUM,u=i.LOG_CLIP,f=i.ONEWEEK,d=i.ONEDAY,w=i.ONEHOUR,v=i.ONEMIN,p=i.ONESEC,y=o(41675),b=o(85555),x=b.HOUR_PATTERN,_=b.WEEKDAY_PATTERN;function g(M){return Math.pow(10,M)}function A(M){return M!=null}W.exports=function(M,L){L=L||{};var E=M._id||"x",S=E.charAt(0);function O(tt,rt){if(tt>0)return Math.log(tt)/Math.LN10;if(tt<=0&&rt&&M.range&&M.range.length===2){var nt=M.range[0],ot=M.range[1];return .5*(nt+ot-2*u*Math.abs(nt-ot))}return l}function P(tt,rt,nt,ot){if((ot||{}).msUTC&&h(tt))return+tt;var ct=t(tt,nt||M.calendar);if(ct===l){if(!h(tt))return l;tt=+tt;var pt=Math.floor(10*r.mod(tt+.05,1)),gt=Math.round(tt-pt/10);ct=t(new Date(gt))+pt/10}return ct}function U(tt,rt,nt){return e(tt,rt,nt||M.calendar)}function R(tt){return M._categories[Math.round(tt)]}function j(tt){if(A(tt)){if(M._categoriesMap===void 0&&(M._categoriesMap={}),M._categoriesMap[tt]!==void 0)return M._categoriesMap[tt];M._categories.push(typeof tt=="number"?String(tt):tt);var rt=M._categories.length-1;return M._categoriesMap[tt]=rt,rt}return l}function B(tt){if(M._categoriesMap)return M._categoriesMap[tt]}function z(tt){var rt=B(tt);return rt!==void 0?rt:h(tt)?+tt:void 0}function G(tt){return h(tt)?+tt:B(tt)}function V(tt,rt,nt){return T.round(nt+rt*tt,2)}function et(tt,rt,nt){return(tt-nt)/rt}var J=function(tt){return h(tt)?V(tt,M._m,M._b):l},X=function(tt){return et(tt,M._m,M._b)};if(M.rangebreaks){var Y=S==="y";J=function(tt){if(!h(tt))return l;var rt=M._rangebreaks.length;if(!rt)return V(tt,M._m,M._b);var nt=Y;M.range[0]>M.range[1]&&(nt=!nt);for(var ot=nt?-1:1,ct=ot*tt,pt=0,gt=0;gt<rt;gt++){var kt=ot*M._rangebreaks[gt].min,yt=ot*M._rangebreaks[gt].max;if(ct<kt)break;if(!(ct>yt)){pt=ct<(kt+yt)/2?gt:gt+1;break}pt=gt+1}var mt=M._B[pt]||0;return isFinite(mt)?V(tt,M._m2,mt):0},X=function(tt){var rt=M._rangebreaks.length;if(!rt)return et(tt,M._m,M._b);for(var nt=0,ot=0;ot<rt&&!(tt<M._rangebreaks[ot].pmin);ot++)tt>M._rangebreaks[ot].pmax&&(nt=ot+1);return et(tt,M._m2,M._B[nt])}}M.c2l=M.type==="log"?O:n,M.l2c=M.type==="log"?g:n,M.l2p=J,M.p2l=X,M.c2p=M.type==="log"?function(tt,rt){return J(O(tt,rt))}:J,M.p2c=M.type==="log"?function(tt){return g(X(tt))}:X,["linear","-"].indexOf(M.type)!==-1?(M.d2r=M.r2d=M.d2c=M.r2c=M.d2l=M.r2l=s,M.c2d=M.c2r=M.l2d=M.l2r=n,M.d2p=M.r2p=function(tt){return M.l2p(s(tt))},M.p2d=M.p2r=X,M.cleanPos=n):M.type==="log"?(M.d2r=M.d2l=function(tt,rt){return O(s(tt),rt)},M.r2d=M.r2c=function(tt){return g(s(tt))},M.d2c=M.r2l=s,M.c2d=M.l2r=n,M.c2r=O,M.l2d=g,M.d2p=function(tt,rt){return M.l2p(M.d2r(tt,rt))},M.p2d=function(tt){return g(X(tt))},M.r2p=function(tt){return M.l2p(s(tt))},M.p2r=X,M.cleanPos=n):M.type==="date"?(M.d2r=M.r2d=r.identity,M.d2c=M.r2c=M.d2l=M.r2l=P,M.c2d=M.c2r=M.l2d=M.l2r=U,M.d2p=M.r2p=function(tt,rt,nt){return M.l2p(P(tt,0,nt))},M.p2d=M.p2r=function(tt,rt,nt){return U(X(tt),rt,nt)},M.cleanPos=function(tt){return r.cleanDate(tt,l,M.calendar)}):M.type==="category"?(M.d2c=M.d2l=j,M.r2d=M.c2d=M.l2d=R,M.d2r=M.d2l_noadd=z,M.r2c=function(tt){var rt=G(tt);return rt!==void 0?rt:M.fraction2r(.5)},M.l2r=M.c2r=n,M.r2l=G,M.d2p=function(tt){return M.l2p(M.r2c(tt))},M.p2d=function(tt){return R(X(tt))},M.r2p=M.d2p,M.p2r=X,M.cleanPos=function(tt){return typeof tt=="string"&&tt!==""?tt:n(tt)}):M.type==="multicategory"&&(M.r2d=M.c2d=M.l2d=R,M.d2r=M.d2l_noadd=z,M.r2c=function(tt){var rt=z(tt);return rt!==void 0?rt:M.fraction2r(.5)},M.r2c_just_indices=B,M.l2r=M.c2r=n,M.r2l=z,M.d2p=function(tt){return M.l2p(M.r2c(tt))},M.p2d=function(tt){return R(X(tt))},M.r2p=M.d2p,M.p2r=X,M.cleanPos=function(tt){return Array.isArray(tt)||typeof tt=="string"&&tt!==""?tt:n(tt)},M.setupMultiCategory=function(tt){var rt,nt,ot=M._traceIndices,ct=M._matchGroup;if(ct&&M._categories.length===0){for(var pt in ct)if(pt!==E){var gt=L[y.id2name(pt)];ot=ot.concat(gt._traceIndices)}}var kt=[[0,{}],[0,{}]],yt=[];for(rt=0;rt<ot.length;rt++){var mt=tt[ot[rt]];if(S in mt){var Ot=mt[S],vt=mt._length||r.minRowLength(Ot);if(a(Ot[0])&&a(Ot[1]))for(nt=0;nt<vt;nt++){var xt=Ot[0][nt],st=Ot[1][nt];A(xt)&&A(st)&&(yt.push([xt,st]),xt in kt[0][1]||(kt[0][1][xt]=kt[0][0]++),st in kt[1][1]||(kt[1][1][st]=kt[1][0]++))}}}for(yt.sort(function(at,ht){var Lt=kt[0][1],Mt=Lt[at[0]]-Lt[ht[0]];if(Mt)return Mt;var _t=kt[1][1];return _t[at[1]]-_t[ht[1]]}),rt=0;rt<yt.length;rt++)j(yt[rt])}),M.fraction2r=function(tt){var rt=M.r2l(M.range[0]),nt=M.r2l(M.range[1]);return M.l2r(rt+tt*(nt-rt))},M.r2fraction=function(tt){var rt=M.r2l(M.range[0]),nt=M.r2l(M.range[1]);return(M.r2l(tt)-rt)/(nt-rt)},M.limitRange=function(tt){var rt=M.minallowed,nt=M.maxallowed;if(rt!==void 0||nt!==void 0){tt||(tt="range");var ot=r.nestedProperty(M,tt).get(),ct=r.simpleMap(ot,M.r2l),pt=ct[1]<ct[0];pt&&ct.reverse();var gt=r.simpleMap([rt,nt],M.r2l);rt!==void 0&&ct[0]<gt[0]&&(ot[pt?1:0]=rt),nt!==void 0&&ct[1]>gt[1]&&(ot[pt?0:1]=nt)}},M.cleanRange=function(tt,rt){M._cleanRange(tt,rt),M.limitRange(tt)},M._cleanRange=function(tt,rt){rt||(rt={}),tt||(tt="range");var nt,ot,ct=r.nestedProperty(M,tt).get();if(ot=(ot=M.type==="date"?r.dfltRange(M.calendar):S==="y"?b.DFLTRANGEY:M._name==="realaxis"?[0,1]:rt.dfltRange||b.DFLTRANGEX).slice(),M.rangemode!=="tozero"&&M.rangemode!=="nonnegative"||(ot[0]=0),ct&&ct.length===2){var pt=ct[0]===null,gt=ct[1]===null;for(M.type!=="date"||M.autorange||(ct[0]=r.cleanDate(ct[0],l,M.calendar),ct[1]=r.cleanDate(ct[1],l,M.calendar)),nt=0;nt<2;nt++)if(M.type==="date"){if(!r.isDateTime(ct[nt],M.calendar)){M[tt]=ot;break}if(M.r2l(ct[0])===M.r2l(ct[1])){var kt=r.constrain(M.r2l(ct[0]),r.MIN_MS+1e3,r.MAX_MS-1e3);ct[0]=M.l2r(kt-1e3),ct[1]=M.l2r(kt+1e3);break}}else{if(!h(ct[nt])){if(pt||gt||!h(ct[1-nt])){M[tt]=ot;break}ct[nt]=ct[1-nt]*(nt?10:.1)}if(ct[nt]<-c?ct[nt]=-c:ct[nt]>c&&(ct[nt]=c),ct[0]===ct[1]){var yt=Math.max(1,Math.abs(1e-6*ct[0]));ct[0]-=yt,ct[1]+=yt}}}else r.nestedProperty(M,tt).set(ot)},M.setScale=function(tt){var rt=L._size;if(M.overlaying){var nt=y.getFromId({_fullLayout:L},M.overlaying);M.domain=nt.domain}var ot=tt&&M._r?"_r":"range",ct=M.calendar;M.cleanRange(ot);var pt,gt,kt=M.r2l(M[ot][0],ct),yt=M.r2l(M[ot][1],ct),mt=S==="y";if(mt?(M._offset=rt.t+(1-M.domain[1])*rt.h,M._length=rt.h*(M.domain[1]-M.domain[0]),M._m=M._length/(kt-yt),M._b=-M._m*yt):(M._offset=rt.l+M.domain[0]*rt.w,M._length=rt.w*(M.domain[1]-M.domain[0]),M._m=M._length/(yt-kt),M._b=-M._m*kt),M._rangebreaks=[],M._lBreaks=0,M._m2=0,M._B=[],M.rangebreaks&&(M._rangebreaks=M.locateBreaks(Math.min(kt,yt),Math.max(kt,yt)),M._rangebreaks.length)){for(pt=0;pt<M._rangebreaks.length;pt++)gt=M._rangebreaks[pt],M._lBreaks+=Math.abs(gt.max-gt.min);var Ot=mt;kt>yt&&(Ot=!Ot),Ot&&M._rangebreaks.reverse();var vt=Ot?-1:1;for(M._m2=vt*M._length/(Math.abs(yt-kt)-M._lBreaks),M._B.push(-M._m2*(mt?yt:kt)),pt=0;pt<M._rangebreaks.length;pt++)gt=M._rangebreaks[pt],M._B.push(M._B[M._B.length-1]-vt*M._m2*(gt.max-gt.min));for(pt=0;pt<M._rangebreaks.length;pt++)(gt=M._rangebreaks[pt]).pmin=J(gt.min),gt.pmax=J(gt.max)}if(!isFinite(M._m)||!isFinite(M._b)||M._length<0)throw L._replotting=!1,new Error("Something went wrong with axis scaling")},M.maskBreaks=function(tt){var rt,nt,ot,ct,pt,gt=M.rangebreaks||[];gt._cachedPatterns||(gt._cachedPatterns=gt.map(function(xt){return xt.enabled&&xt.bounds?r.simpleMap(xt.bounds,xt.pattern?s:M.d2c):null})),gt._cachedValues||(gt._cachedValues=gt.map(function(xt){return xt.enabled&&xt.values?r.simpleMap(xt.values,M.d2c).sort(r.sorterAsc):null}));for(var kt=0;kt<gt.length;kt++){var yt=gt[kt];if(yt.enabled){if(yt.bounds){var mt=yt.pattern;switch(nt=(rt=gt._cachedPatterns[kt])[0],ot=rt[1],mt){case _:ct=(pt=new Date(tt)).getUTCDay(),nt>ot&&(ot+=7,ct<nt&&(ct+=7));break;case x:ct=(pt=new Date(tt)).getUTCHours()+(pt.getUTCMinutes()/60+pt.getUTCSeconds()/3600+pt.getUTCMilliseconds()/36e5),nt>ot&&(ot+=24,ct<nt&&(ct+=24));break;case"":ct=tt}if(ct>=nt&&ct<ot)return l}else for(var Ot=gt._cachedValues[kt],vt=0;vt<Ot.length;vt++)if(ot=(nt=Ot[vt])+yt.dvalue,tt>=nt&&tt<ot)return l}}return tt},M.locateBreaks=function(tt,rt){var nt,ot,ct,pt,gt=[];if(!M.rangebreaks)return gt;var kt=M.rangebreaks.slice().sort(function(_t,St){return _t.pattern===_&&St.pattern===x?-1:St.pattern===_&&_t.pattern===x?1:0}),yt=function(_t,St){if((_t=r.constrain(_t,tt,rt))!==(St=r.constrain(St,tt,rt))){for(var Dt=!0,ut=0;ut<gt.length;ut++){var Tt=gt[ut];_t<Tt.max&&St>=Tt.min&&(_t<Tt.min&&(Tt.min=_t),St>Tt.max&&(Tt.max=St),Dt=!1)}Dt&&gt.push({min:_t,max:St})}};for(nt=0;nt<kt.length;nt++){var mt=kt[nt];if(mt.enabled)if(mt.bounds){var Ot=tt,vt=rt;mt.pattern&&(Ot=Math.floor(Ot)),ct=(ot=r.simpleMap(mt.bounds,mt.pattern?s:M.r2l))[0],pt=ot[1];var xt,st,at=new Date(Ot);switch(mt.pattern){case _:st=f,xt=(pt-ct+(pt<ct?7:0))*d,Ot+=ct*d-(at.getUTCDay()*d+at.getUTCHours()*w+at.getUTCMinutes()*v+at.getUTCSeconds()*p+at.getUTCMilliseconds());break;case x:st=d,xt=(pt-ct+(pt<ct?24:0))*w,Ot+=ct*w-(at.getUTCHours()*w+at.getUTCMinutes()*v+at.getUTCSeconds()*p+at.getUTCMilliseconds());break;default:Ot=Math.min(ot[0],ot[1]),xt=st=(vt=Math.max(ot[0],ot[1]))-Ot}for(var ht=Ot;ht<vt;ht+=st)yt(ht,ht+xt)}else for(var Lt=r.simpleMap(mt.values,M.d2c),Mt=0;Mt<Lt.length;Mt++)yt(ct=Lt[Mt],pt=ct+mt.dvalue)}return gt.sort(function(_t,St){return _t.min-St.min}),gt},M.makeCalcdata=function(tt,rt,nt){var ot,ct,pt,gt,kt=M.type,yt=kt==="date"&&tt[rt+"calendar"];if(rt in tt){if(ot=tt[rt],gt=tt._length||r.minRowLength(ot),r.isTypedArray(ot)&&(kt==="linear"||kt==="log")){if(gt===ot.length)return ot;if(ot.subarray)return ot.subarray(0,gt)}if(kt==="multicategory")return function(vt,xt){for(var st=new Array(xt),at=0;at<xt;at++){var ht=(vt[0]||[])[at],Lt=(vt[1]||[])[at];st[at]=B([ht,Lt])}return st}(ot,gt);for(ct=new Array(gt),pt=0;pt<gt;pt++)ct[pt]=M.d2c(ot[pt],0,yt,nt)}else{var mt=rt+"0"in tt?M.d2c(tt[rt+"0"],0,yt):0,Ot=tt["d"+rt]?Number(tt["d"+rt]):1;for(ot=tt[{x:"y",y:"x"}[rt]],gt=tt._length||ot.length,ct=new Array(gt),pt=0;pt<gt;pt++)ct[pt]=mt+pt*Ot}if(M.rangebreaks)for(pt=0;pt<gt;pt++)ct[pt]=M.maskBreaks(ct[pt]);return ct},M.isValidRange=function(tt,rt){return Array.isArray(tt)&&tt.length===2&&(rt&&tt[0]===null||h(M.r2l(tt[0])))&&(rt&&tt[1]===null||h(M.r2l(tt[1])))},M.getAutorangeDflt=function(tt,rt){var nt=!M.isValidRange(tt,"nullOk");return nt&&rt&&rt.reverseDflt?nt="reversed":tt&&(tt[0]===null&&tt[1]===null?nt=!0:tt[0]===null&&tt[1]!==null?nt="min":tt[0]!==null&&tt[1]===null&&(nt="max")),nt},M.isReversed=function(){var tt=M.autorange;return tt==="reversed"||tt==="min reversed"||tt==="max reversed"},M.isPtWithinRange=function(tt,rt){var nt=M.c2l(tt[S],null,rt),ot=M.r2l(M.range[0]),ct=M.r2l(M.range[1]);return ot<ct?ot<=nt&&nt<=ct:ct<=nt&&nt<=ot},M._emptyCategories=function(){M._categories=[],M._categoriesMap={}},M.clearCalc=function(){var tt=M._matchGroup;if(tt){var rt=null,nt=null;for(var ot in tt){var ct=L[y.id2name(ot)];if(ct._categories){rt=ct._categories,nt=ct._categoriesMap;break}}rt&&nt?(M._categories=rt,M._categoriesMap=nt):M._emptyCategories()}else M._emptyCategories();if(M._initialCategories)for(var pt=0;pt<M._initialCategories.length;pt++)j(M._initialCategories[pt])},M.sortByInitialCategories=function(){var tt=[];if(M._emptyCategories(),M._initialCategories)for(var rt=0;rt<M._initialCategories.length;rt++)j(M._initialCategories[rt]);tt=tt.concat(M._traceIndices);var nt=M._matchGroup;for(var ot in nt)if(E!==ot){var ct=L[y.id2name(ot)];ct._categories=M._categories,ct._categoriesMap=M._categoriesMap,tt=tt.concat(ct._traceIndices)}return tt};var Z=L._d3locale;M.type==="date"&&(M._dateFormat=Z?Z.timeFormat:k,M._extraFormat=L._extraFormat),M._separators=L.separators,M._numFormat=Z?Z.numberFormat:m,delete M._minDtick,delete M._forceTick0}},59652:function(W){W.exports=function(I){var o=["showexponent","showtickprefix","showticksuffix"].filter(function(T){return I[T]!==void 0});if(o.every(function(T){return I[T]===I[o[0]]})||o.length===1)return I[o[0]]}},96115:function(W,I,o){var T=o(71828),k=o(7901).contrast,r=o(13838),m=o(59652),h=o(85501);function s(e,t){function n(a,i){return T.coerce(e,t,r.tickformatstops,a,i)}n("enabled")&&(n("dtickrange"),n("value"))}W.exports=function(e,t,n,a,i){i||(i={});var c=n("labelalias");T.isPlainObject(c)||delete t.labelalias;var l=m(e);if(n("showticklabels")){var u=i.font||{},f=t.color,d=(t.ticklabelposition||"").indexOf("inside")!==-1?k(i.bgColor):f&&f!==r.color.dflt?f:u.color;if(T.coerceFont(n,"tickfont",{family:u.family,size:u.size,color:d}),i.noTicklabelstep||a==="multicategory"||a==="log"||n("ticklabelstep"),i.noAng||n("tickangle"),a!=="category"){var w=n("tickformat");h(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:s}),t.tickformatstops.length||delete t.tickformatstops,i.noExp||w||a==="date"||(n("showexponent",l),n("exponentformat"),n("minexponent"),n("separatethousands"))}}}},38701:function(W,I,o){var T=o(71828),k=o(13838);W.exports=function(r,m,h,s){var e=s.isMinor,t=e?r.minor||{}:r,n=e?m.minor:m,a=e?k.minor:k,i=e?"minor.":"",c=T.coerce2(t,n,a,"ticklen",e?.6*(m.ticklen||5):void 0),l=T.coerce2(t,n,a,"tickwidth",e?m.tickwidth||1:void 0),u=T.coerce2(t,n,a,"tickcolor",(e?m.tickcolor:void 0)||n.color);h(i+"ticks",!e&&s.outerTicks||c||l||u?"outside":"")||(delete n.ticklen,delete n.tickwidth,delete n.tickcolor)}},26218:function(W,I,o){var T=o(66287),k=o(71828).isArrayOrTypedArray;W.exports=function(r,m,h,s,e){e||(e={});var t=e.isMinor,n=t?r.minor||{}:r,a=t?m.minor:m,i=t?"minor.":"";function c(v){var p=n[v];return p!==void 0?p:(a._template||{})[v]}var l=c("tick0"),u=c("dtick"),f=c("tickvals"),d=h(i+"tickmode",k(f)?"array":u?"linear":"auto");if(d==="auto"||d==="sync")h(i+"nticks");else if(d==="linear"){var w=a.dtick=T.dtick(u,s);a.tick0=T.tick0(l,s,m.calendar,w)}else s!=="multicategory"&&(h(i+"tickvals")===void 0?a.tickmode="auto":t||h("ticktext"))}},66847:function(W,I,o){var T=o(39898),k=o(73972),r=o(71828),m=o(91424),h=o(89298);W.exports=function(s,e,t,n){var a=s._fullLayout;if(e.length!==0){var i,c,l,u;n&&(i=n());var f=T.ease(t.easing);return s._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var v={},p=0;p<e.length;p++){var y=e[p],b=y.plotinfo.xaxis,x=y.plotinfo.yaxis;y.xr0&&(v[b._name+".range"]=y.xr0.slice()),y.yr0&&(v[x._name+".range"]=y.yr0.slice())}return k.call("relayout",s,v).then(function(){for(var _=0;_<e.length;_++)d(e[_].plotinfo)})}()}),c=Date.now(),u=window.requestAnimationFrame(function v(){l=Date.now();for(var p=Math.min(1,(l-c)/t.duration),y=f(p),b=0;b<e.length;b++)w(e[b],y);l-c>t.duration?(function(){for(var x={},_=0;_<e.length;_++){var g=e[_],A=g.plotinfo.xaxis,M=g.plotinfo.yaxis;g.xr1&&(x[A._name+".range"]=g.xr1.slice()),g.yr1&&(x[M._name+".range"]=g.yr1.slice())}i&&i(),k.call("relayout",s,x).then(function(){for(var L=0;L<e.length;L++)d(e[L].plotinfo)})}(),u=window.cancelAnimationFrame(v)):u=window.requestAnimationFrame(v)}),Promise.resolve()}function d(v){var p=v.xaxis,y=v.yaxis;a._defs.select("#"+v.clipId+"> rect").call(m.setTranslate,0,0).call(m.setScale,1,1),v.plot.call(m.setTranslate,p._offset,y._offset).call(m.setScale,1,1);var b=v.plot.selectAll(".scatterlayer .trace");b.selectAll(".point").call(m.setPointGroupScale,1,1),b.selectAll(".textpoint").call(m.setTextPointsScale,1,1),b.call(m.hideOutsideRangePoints,v)}function w(v,p){var y=v.plotinfo,b=y.xaxis,x=y.yaxis,_=b._length,g=x._length,A=!!v.xr1,M=!!v.yr1,L=[];if(A){var E=r.simpleMap(v.xr0,b.r2l),S=r.simpleMap(v.xr1,b.r2l),O=E[1]-E[0],P=S[1]-S[0];L[0]=(E[0]*(1-p)+p*S[0]-E[0])/(E[1]-E[0])*_,L[2]=_*(1-p+p*P/O),b.range[0]=b.l2r(E[0]*(1-p)+p*S[0]),b.range[1]=b.l2r(E[1]*(1-p)+p*S[1])}else L[0]=0,L[2]=_;if(M){var U=r.simpleMap(v.yr0,x.r2l),R=r.simpleMap(v.yr1,x.r2l),j=U[1]-U[0],B=R[1]-R[0];L[1]=(U[1]*(1-p)+p*R[1]-U[1])/(U[0]-U[1])*g,L[3]=g*(1-p+p*B/j),x.range[0]=b.l2r(U[0]*(1-p)+p*R[0]),x.range[1]=x.l2r(U[1]*(1-p)+p*R[1])}else L[1]=0,L[3]=g;h.drawOne(s,b,{skipTitle:!0}),h.drawOne(s,x,{skipTitle:!0}),h.redrawComponents(s,[b._id,x._id]);var z=A?_/L[2]:1,G=M?g/L[3]:1,V=A?L[0]:0,et=M?L[1]:0,J=A?L[0]/L[2]*_:0,X=M?L[1]/L[3]*g:0,Y=b._offset-J,Z=x._offset-X;y.clipRect.call(m.setTranslate,V,et).call(m.setScale,1/z,1/G),y.plot.call(m.setTranslate,Y,Z).call(m.setScale,z,G),m.setPointGroupScale(y.zoomScalePts,1/z,1/G),m.setTextPointsScale(y.zoomScaleTxt,1/z,1/G)}h.redrawComponents(s)}},951:function(W,I,o){var T=o(73972).traceIs,k=o(4322);function r(h){return{v:"x",h:"y"}[h.orientation||"v"]}function m(h,s){var e=r(h),t=T(h,"box-violin"),n=T(h._fullInput||{},"candlestick");return t&&!n&&s===e&&h[e]===void 0&&h[e+"0"]===void 0}W.exports=function(h,s,e,t){e("autotypenumbers",t.autotypenumbersDflt),e("type",(t.splomStash||{}).type)==="-"&&(function(n,a){if(n.type==="-"){var i,c=n._id,l=c.charAt(0);c.indexOf("scene")!==-1&&(c=l);var u=function(x,_,g){for(var A=0;A<x.length;A++){var M=x[A];if(M.type==="splom"&&M._length>0&&(M["_"+g+"axes"]||{})[_]||(M[g+"axis"]||g)===_&&(m(M,g)||(M[g]||[]).length||M[g+"0"]))return M}}(a,c,l);if(u)if(u.type!=="histogram"||l!=={v:"y",h:"x"}[u.orientation||"v"]){var f=l+"calendar",d=u[f],w={noMultiCategory:!T(u,"cartesian")||T(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&l==={h:"x",v:"y"}[u.orientation||"v"]&&(w.noMultiCategory=!0),w.autotypenumbers=n.autotypenumbers,m(u,l)){var v=r(u),p=[];for(i=0;i<a.length;i++){var y=a[i];T(y,"box-violin")&&(y[l+"axis"]||l)===c&&(y[v]!==void 0?p.push(y[v][0]):y.name!==void 0?p.push(y.name):p.push("text"),y[f]!==d&&(d=void 0))}n.type=k(p,d,w)}else if(u.type==="splom"){var b=u.dimensions[u._axesDim[c]];b.visible&&(n.type=k(b.values,d,w))}else n.type=k(u[l]||[u[l+"0"]],d,w)}else n.type="linear"}}(s,t.data),s.type==="-"?s.type="linear":h.type=s.type)}},31137:function(W,I,o){var T=o(73972),k=o(71828);function r(e,t,n){var a,i,c,l=!1;if(t.type==="data")a=e._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;a=e._fullLayout}return i=k.nestedProperty(a,t.prop).get(),(c=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&c[t.prop]!==i&&(l=!0),c[t.prop]=i,{changed:l,value:i}}function m(e,t){var n=[],a=t[0],i={};if(typeof a=="string")i[a]=t[1];else{if(!k.isPlainObject(a))return n;i=a}return s(i,function(c,l,u){n.push({type:"layout",prop:c,value:u})},"",0),n}function h(e,t){var n,a,i,c,l=[];if(a=t[0],i=t[1],n=t[2],c={},typeof a=="string")c[a]=i;else{if(!k.isPlainObject(a))return l;c=a,n===void 0&&(n=i)}return n===void 0&&(n=null),s(c,function(u,f,d){var w,v;if(Array.isArray(d)){v=d.slice();var p=Math.min(v.length,e.data.length);n&&(p=Math.min(p,n.length)),w=[];for(var y=0;y<p;y++)w[y]=n?n[y]:y}else v=d,w=n?n.slice():null;if(w===null)Array.isArray(v)&&(v=v[0]);else if(Array.isArray(w)){if(!Array.isArray(v)){var b=v;v=[];for(var x=0;x<w.length;x++)v[x]=b}v.length=Math.min(w.length,v.length)}l.push({type:"data",prop:u,traces:w,value:v})},"",0),l}function s(e,t,n,a){Object.keys(e).forEach(function(i){var c=e[i];if(i[0]!=="_"){var l=n+(a>0?".":"")+i;k.isPlainObject(c)?s(c,t,l,a+1):t(l,i,c)}})}I.manageCommandObserver=function(e,t,n,a){var i={},c=!0;t&&t._commandObserver&&(i=t._commandObserver),i.cache||(i.cache={}),i.lookupTable={};var l=I.hasSimpleAPICommandBindings(e,n,i.lookupTable);if(t&&t._commandObserver){if(l)return i;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,i}if(l){r(e,l,i.cache),i.check=function(){if(c){var d=r(e,l,i.cache);return d.changed&&a&&i.lookupTable[d.value]!==void 0&&(i.disable(),Promise.resolve(a({value:d.value,type:l.type,prop:l.prop,traces:l.traces,index:i.lookupTable[d.value]})).then(i.enable,i.enable)),d.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<u.length;f++)e._internalOn(u[f],i.check);i.remove=function(){for(var d=0;d<u.length;d++)e._removeInternalListener(u[d],i.check)}}else k.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){c=!1},i.enable=function(){c=!0},t&&(t._commandObserver=i),i},I.hasSimpleAPICommandBindings=function(e,t,n){var a,i,c=t.length;for(a=0;a<c;a++){var l,u=t[a],f=u.method,d=u.args;if(Array.isArray(d)||(d=[]),!f)return!1;var w=I.computeAPICommandBindings(e,f,d);if(w.length!==1)return!1;if(i){if((l=w[0]).type!==i.type||l.prop!==i.prop)return!1;if(Array.isArray(i.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var v=0;v<i.traces.length;v++)if(i.traces[v]!==l.traces[v])return!1}else if(l.prop!==i.prop)return!1}else i=w[0],Array.isArray(i.traces)&&i.traces.sort();var p=(l=w[0]).value;if(Array.isArray(p)){if(p.length!==1)return!1;p=p[0]}n&&(n[p]=a)}return i},I.executeAPICommand=function(e,t,n){if(t==="skip")return Promise.resolve();var a=T.apiMethodRegistry[t],i=[e];Array.isArray(n)||(n=[]);for(var c=0;c<n.length;c++)i.push(n[c]);return a.apply(null,i).catch(function(l){return k.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})},I.computeAPICommandBindings=function(e,t,n){var a;switch(Array.isArray(n)||(n=[]),t){case"restyle":a=h(e,n);break;case"relayout":a=m(0,n);break;case"update":a=h(e,[n[0],n[2]]).concat(m(0,[n[1]]));break;case"animate":a=function(i,c){return Array.isArray(c[0])&&c[0].length===1&&["string","number"].indexOf(typeof c[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:c[0][0].toString()}]:[]}(0,n);break;default:a=[]}return a}},27670:function(W,I,o){var T=o(1426).extendFlat;I.Y=function(k,r){r=r||{};var m={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},h=(k.name&&k.name,k.trace,r.description&&r.description,{x:T({},m,{}),y:T({},m,{}),editType:k.editType});return k.noGridCell||(h.row={valType:"integer",min:0,dflt:0,editType:k.editType},h.column={valType:"integer",min:0,dflt:0,editType:k.editType}),h},I.c=function(k,r,m,h){var s=h&&h.x||[0,1],e=h&&h.y||[0,1],t=r.grid;if(t){var n=m("domain.column");n!==void 0&&(n<t.columns?s=t._domains.x[n]:delete k.domain.column);var a=m("domain.row");a!==void 0&&(a<t.rows?e=t._domains.y[a]:delete k.domain.row)}var i=m("domain.x",s),c=m("domain.y",e);i[0]<i[1]||(k.domain.x=s.slice()),c[0]<c[1]||(k.domain.y=e.slice())}},41940:function(W){W.exports=function(I){var o=I.editType,T=I.colorEditType;T===void 0&&(T=o);var k={family:{valType:"string",noBlank:!0,strict:!0,editType:o},size:{valType:"number",min:1,editType:o},color:{valType:"color",editType:T},editType:o};return I.autoSize&&(k.size.dflt="auto"),I.autoColor&&(k.color.dflt="auto"),I.arrayOk&&(k.family.arrayOk=!0,k.size.arrayOk=!0,k.color.arrayOk=!0),k}},31391:function(W){W.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(W,I){I.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},I.axesNames=["lonaxis","lataxis"],I.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},I.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},I.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},I.clipPad=.001,I.precision=.1,I.landColor="#F0DC82",I.waterColor="#3399FF",I.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},I.sphereSVG={type:"Sphere"},I.fillLayers={ocean:1,land:1,lakes:1},I.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},I.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],I.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],I.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(W,I,o){var T=o(39898),k=o(27362),r=k.geoPath,m=k.geoDistance,h=o(65704),s=o(73972),e=o(71828),t=e.strTranslate,n=o(7901),a=o(91424),i=o(30211),c=o(74875),l=o(89298),u=o(71739).getAutoRange,f=o(28569),d=o(47322).prepSelect,w=o(47322).clearOutline,v=o(47322).selectOnClick,p=o(74455),y=o(78776),b=o(41327),x=o(90973),_=o(96892).zL;function g(L){this.id=L.id,this.graphDiv=L.graphDiv,this.container=L.container,this.topojsonURL=L.topojsonURL,this.isStatic=L.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var A=g.prototype;function M(L,E){var S=y.clipPad,O=L[0]+S,P=L[1]-S,U=E[0]+S,R=E[1]-S;O>0&&P<0&&(P+=360);var j=(P-O)/4;return{type:"Polygon",coordinates:[[[O,U],[O,R],[O+j,R],[O+2*j,R],[O+3*j,R],[P,R],[P,U],[P-j,U],[P-2*j,U],[P-3*j,U],[O,U]]]}}W.exports=function(L){return new g(L)},A.plot=function(L,E,S,O){var P=this;if(O)return P.update(L,E,!0);P._geoCalcData=L,P._fullLayout=E;var U=E[this.id],R=[],j=!1;for(var B in y.layerNameToAdjective)if(B!=="frame"&&U["show"+B]){j=!0;break}for(var z=!1,G=0;G<L.length;G++){var V=L[0][0].trace;V._geo=P,V.locationmode&&(j=!0);var et=V.marker;if(et){var J=et.angle,X=et.angleref;(J||X==="north"||X==="previous")&&(z=!0)}}if(this._hasMarkerAngles=z,j){var Y=x.getTopojsonName(U);P.topojson!==null&&Y===P.topojsonName||(P.topojsonName=Y,PlotlyGeoAssets.topojson[P.topojsonName]===void 0&&R.push(P.fetchTopojson()))}R=R.concat(b.fetchTraceGeoData(L)),S.push(new Promise(function(Z,tt){Promise.all(R).then(function(){P.topojson=PlotlyGeoAssets.topojson[P.topojsonName],P.update(L,E),Z()}).catch(tt)}))},A.fetchTopojson=function(){var L=this,E=x.getTopojsonPath(L.topojsonURL,L.topojsonName);return new Promise(function(S,O){T.json(E,function(P,U){if(P)return P.status===404?O(new Error(["plotly.js could not find topojson file at",E+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):O(new Error(["unexpected error while fetching topojson file at",E].join(" ")));PlotlyGeoAssets.topojson[L.topojsonName]=U,S()})})},A.update=function(L,E,S){var O=E[this.id];this.hasChoropleth=!1;for(var P=0;P<L.length;P++){var U=L[P],R=U[0].trace;R.type==="choropleth"&&(this.hasChoropleth=!0),R.visible===!0&&R._length>0&&R._module.calcGeoJSON(U,E)}if(!S){if(this.updateProjection(L,E))return;this.viewInitial&&this.scope===O.scope||this.saveViewInitial(O)}this.scope=O.scope,this.updateBaseLayers(E,O),this.updateDims(E,O),this.updateFx(E,O),c.generalUpdatePerTraceModule(this.graphDiv,this,L,O);var j=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=j.selectAll(".point"),this.dataPoints.text=j.selectAll("text"),this.dataPaths.line=j.selectAll(".js-line");var B=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=B.selectAll("path"),this._render()},A.updateProjection=function(L,E){var S=this.graphDiv,O=E[this.id],P=E._size,U=O.domain,R=O.projection,j=O.lonaxis,B=O.lataxis,z=j._ax,G=B._ax,V=this.projection=function(at){var ht=at.projection,Lt=ht.type,Mt=y.projNames[Lt];Mt="geo"+e.titleCase(Mt);for(var _t=(k[Mt]||h[Mt])(),St=at._isSatellite?180*Math.acos(1/ht.distance)/Math.PI:at._isClipped?y.lonaxisSpan[Lt]/2:null,Dt=["center","rotate","parallels","clipExtent"],ut=function(It){return It?_t:[]},Tt=0;Tt<Dt.length;Tt++){var bt=Dt[Tt];typeof _t[bt]!="function"&&(_t[bt]=ut)}return _t.isLonLatOverEdges=function(It){if(_t(It)===null)return!0;if(St){var zt=_t.rotate();return m(It,[-zt[0],-zt[1]])>St*Math.PI/180}return!1},_t.getPath=function(){return r().projection(_t)},_t.getBounds=function(It){return _t.getPath().bounds(It)},_t.precision(y.precision),at._isSatellite&&_t.tilt(ht.tilt).distance(ht.distance),St&&_t.clipAngle(St-y.clipPad),_t}(O),et=[[P.l+P.w*U.x[0],P.t+P.h*(1-U.y[1])],[P.l+P.w*U.x[1],P.t+P.h*(1-U.y[0])]],J=O.center||{},X=R.rotation||{},Y=j.range||[],Z=B.range||[];if(O.fitbounds){z._length=et[1][0]-et[0][0],G._length=et[1][1]-et[0][1],z.range=u(S,z),G.range=u(S,G);var tt=(z.range[0]+z.range[1])/2,rt=(G.range[0]+G.range[1])/2;if(O._isScoped)J={lon:tt,lat:rt};else if(O._isClipped){J={lon:tt,lat:rt},X={lon:tt,lat:rt,roll:X.roll};var nt=R.type,ot=y.lonaxisSpan[nt]/2||180,ct=y.lataxisSpan[nt]/2||90;Y=[tt-ot,tt+ot],Z=[rt-ct,rt+ct]}else J={lon:tt,lat:rt},X={lon:tt,lat:X.lat,roll:X.roll}}V.center([J.lon-X.lon,J.lat-X.lat]).rotate([-X.lon,-X.lat,X.roll]).parallels(R.parallels);var pt=M(Y,Z);V.fitExtent(et,pt);var gt=this.bounds=V.getBounds(pt),kt=this.fitScale=V.scale(),yt=V.translate();if(O.fitbounds){var mt=V.getBounds(M(z.range,G.range)),Ot=Math.min((gt[1][0]-gt[0][0])/(mt[1][0]-mt[0][0]),(gt[1][1]-gt[0][1])/(mt[1][1]-mt[0][1]));isFinite(Ot)?V.scale(Ot*kt):e.warn("Something went wrong during"+this.id+"fitbounds computations.")}else V.scale(R.scale*kt);var vt=this.midPt=[(gt[0][0]+gt[1][0])/2,(gt[0][1]+gt[1][1])/2];if(V.translate([yt[0]+(vt[0]-yt[0]),yt[1]+(vt[1]-yt[1])]).clipExtent(gt),O._isAlbersUsa){var xt=V([J.lon,J.lat]),st=V.translate();V.translate([st[0]-(xt[0]-st[0]),st[1]-(xt[1]-st[1])])}},A.updateBaseLayers=function(L,E){var S=this,O=S.topojson,P=S.layers,U=S.basePaths;function R(V){return V==="lonaxis"||V==="lataxis"}function j(V){return Boolean(y.lineLayers[V])}function B(V){return Boolean(y.fillLayers[V])}var z=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(V){return j(V)||B(V)?E["show"+V]:!R(V)||E[V].showgrid}),G=S.framework.selectAll(".layer").data(z,String);G.exit().each(function(V){delete P[V],delete U[V],T.select(this).remove()}),G.enter().append("g").attr("class",function(V){return"layer "+V}).each(function(V){var et=P[V]=T.select(this);V==="bg"?S.bgRect=et.append("rect").style("pointer-events","all"):R(V)?U[V]=et.append("path").style("fill","none"):V==="backplot"?et.append("g").classed("choroplethlayer",!0):V==="frontplot"?et.append("g").classed("scatterlayer",!0):j(V)?U[V]=et.append("path").style("fill","none").style("stroke-miterlimit",2):B(V)&&(U[V]=et.append("path").style("stroke","none"))}),G.order(),G.each(function(V){var et=U[V],J=y.layerNameToAdjective[V];V==="frame"?et.datum(y.sphereSVG):j(V)||B(V)?et.datum(_(O,O.objects[V])):R(V)&&et.datum(function(X,Y,Z){var tt,rt,nt,ot=Y[X],ct=y.scopeDefaults[Y.scope];X==="lonaxis"?(tt=ct.lonaxisRange,rt=ct.lataxisRange,nt=function(st,at){return[st,at]}):X==="lataxis"&&(tt=ct.lataxisRange,rt=ct.lonaxisRange,nt=function(st,at){return[at,st]});var pt={type:"linear",range:[tt[0],tt[1]-1e-6],tick0:ot.tick0,dtick:ot.dtick};l.setConvert(pt,Z);var gt=l.calcTicks(pt);Y.isScoped||X!=="lonaxis"||gt.pop();for(var kt=gt.length,yt=new Array(kt),mt=0;mt<kt;mt++)for(var Ot=gt[mt].x,vt=yt[mt]=[],xt=rt[0];xt<rt[1]+2.5;xt+=2.5)vt.push(nt(Ot,xt));return{type:"MultiLineString",coordinates:yt}}(V,E,L)).call(n.stroke,E[V].gridcolor).call(a.dashLine,E[V].griddash,E[V].gridwidth),j(V)?et.call(n.stroke,E[J+"color"]).call(a.dashLine,"",E[J+"width"]):B(V)&&et.call(n.fill,E[J+"color"])})},A.updateDims=function(L,E){var S=this.bounds,O=(E.framewidth||0)/2,P=S[0][0]-O,U=S[0][1]-O,R=S[1][0]-P+O,j=S[1][1]-U+O;a.setRect(this.clipRect,P,U,R,j),this.bgRect.call(a.setRect,P,U,R,j).call(n.fill,E.bgcolor),this.xaxis._offset=P,this.xaxis._length=R,this.yaxis._offset=U,this.yaxis._length=j},A.updateFx=function(L,E){var S=this,O=S.graphDiv,P=S.bgRect,U=L.dragmode,R=L.clickmode;if(!S.isStatic){var j={element:S.bgRect.node(),gd:O,plotinfo:{id:S.id,xaxis:S.xaxis,yaxis:S.yaxis,fillRangeItems:function(z,G){G.isRect?(z.range={})[S.id]=[B([G.xmin,G.ymin]),B([G.xmax,G.ymax])]:(z.lassoPoints={})[S.id]=G.map(B)}},xaxes:[S.xaxis],yaxes:[S.yaxis],subplot:S.id,clickFn:function(z){z===2&&w(O)}};U==="pan"?(P.node().onmousedown=null,P.call(p(S,E)),P.on("dblclick.zoom",function(){var z=S.viewInitial,G={};for(var V in z)G[S.id+"."+V]=z[V];s.call("_guiRelayout",O,G),O.emit("plotly_doubleclick",null)}),O._context._scrollZoom.geo||P.on("wheel.zoom",null)):U!=="select"&&U!=="lasso"||(P.on(".zoom",null),j.prepFn=function(z,G,V){d(z,G,V,j,U)},f.init(j)),P.on("mousemove",function(){var z=S.projection.invert(e.getPositionFromD3Event());if(!z)return f.unhover(O,T.event);S.xaxis.p2c=function(){return z[0]},S.yaxis.p2c=function(){return z[1]},i.hover(O,T.event,S.id)}),P.on("mouseout",function(){O._dragging||f.unhover(O,T.event)}),P.on("click",function(){U!=="select"&&U!=="lasso"&&(R.indexOf("select")>-1&&v(T.event,O,[S.xaxis],[S.yaxis],S.id,j),R.indexOf("event")>-1&&i.click(O,T.event))})}function B(z){return S.projection.invert([z[0]+S.xaxis._offset,z[1]+S.yaxis._offset])}},A.makeFramework=function(){var L=this,E=L.graphDiv,S=E._fullLayout,O="clip"+S._uid+L.id;L.clipDef=S._clips.append("clipPath").attr("id",O),L.clipRect=L.clipDef.append("rect"),L.framework=T.select(L.container).append("g").attr("class","geo "+L.id).call(a.setClipUrl,O,E),L.project=function(P){var U=L.projection(P);return U?[U[0]-L.xaxis._offset,U[1]-L.yaxis._offset]:[null,null]},L.xaxis={_id:"x",c2p:function(P){return L.project(P)[0]}},L.yaxis={_id:"y",c2p:function(P){return L.project(P)[1]}},L.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(L.mockAxis,S)},A.saveViewInitial=function(L){var E,S=L.center||{},O=L.projection,P=O.rotation||{};this.viewInitial={fitbounds:L.fitbounds,"projection.scale":O.scale},E=L._isScoped?{"center.lon":S.lon,"center.lat":S.lat}:L._isClipped?{"projection.rotation.lon":P.lon,"projection.rotation.lat":P.lat}:{"center.lon":S.lon,"center.lat":S.lat,"projection.rotation.lon":P.lon},e.extendFlat(this.viewInitial,E)},A.render=function(L){this._hasMarkerAngles&&L?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},A._render=function(){var L,E=this.projection,S=E.getPath();function O(U){var R=E(U.lonlat);return R?t(R[0],R[1]):null}function P(U){return E.isLonLatOverEdges(U.lonlat)?"none":null}for(L in this.basePaths)this.basePaths[L].attr("d",S);for(L in this.dataPaths)this.dataPaths[L].attr("d",function(U){return S(U.geojson)});for(L in this.dataPoints)this.dataPoints[L].attr("display",P).attr("transform",O)}},44622:function(W,I,o){var T=o(27659).AU,k=o(71828).counterRegex,r=o(69082),m="geo",h=k(m),s={};s[m]={valType:"subplotid",dflt:m,editType:"calc"},W.exports={attr:m,name:m,idRoot:m,idRegex:h,attrRegex:h,attributes:s,layoutAttributes:o(77519),supplyLayoutDefaults:o(82161),plot:function(e){for(var t=e._fullLayout,n=e.calcdata,a=t._subplots[m],i=0;i<a.length;i++){var c=a[i],l=T(n,m,c),u=t[c]._subplot;u||(u=r({id:c,graphDiv:e,container:t._geolayer.node(),topojsonURL:e._context.topojsonURL,staticPlot:e._context.staticPlot}),t[c]._subplot=u),u.plot(l,t,e._promises)}},updateFx:function(e){for(var t=e._fullLayout,n=t._subplots[m],a=0;a<n.length;a++){var i=t[n[a]];i._subplot.updateFx(t,i)}},clean:function(e,t,n,a){for(var i=a._subplots[m]||[],c=0;c<i.length;c++){var l=i[c],u=a[l]._subplot;!t[l]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},77519:function(W,I,o){var T=o(22399),k=o(27670).Y,r=o(79952).P,m=o(78776),h=o(30962).overrideAll,s=o(78607),e={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:T.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:r};(W.exports=h({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:s(m.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:s(m.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:T.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:m.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:m.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:m.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:m.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:T.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:T.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:T.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:T.background},lonaxis:e,lataxis:e},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(W,I,o){var T=o(71828),k=o(49119),r=o(27659).NG,m=o(78776),h=o(77519),s=m.axesNames;function e(t,n,a,i){var c=r(i.fullData,"geo",i.id).map(function(X){return X._expandedIndex}),l=a("resolution"),u=a("scope"),f=m.scopeDefaults[u],d=a("projection.type",f.projType),w=n._isAlbersUsa=d==="albers usa";w&&(u=n.scope="usa");var v=n._isScoped=u!=="world",p=n._isSatellite=d==="satellite",y=n._isConic=d.indexOf("conic")!==-1||d==="albers",b=n._isClipped=!!m.lonaxisSpan[d];if(t.visible===!1){var x=T.extendDeep({},n._template);x.showcoastlines=!1,x.showcountries=!1,x.showframe=!1,x.showlakes=!1,x.showland=!1,x.showocean=!1,x.showrivers=!1,x.showsubunits=!1,x.lonaxis&&(x.lonaxis.showgrid=!1),x.lataxis&&(x.lataxis.showgrid=!1),n._template=x}for(var _=a("visible"),g=0;g<s.length;g++){var A,M=s[g],L=[30,10][g];if(v)A=f[M+"Range"];else{var E=m[M+"Span"],S=(E[d]||E["*"])/2,O=a("projection.rotation."+M.substr(0,3),f.projRotate[g]);A=[O-S,O+S]}var P=a(M+".range",A);a(M+".tick0"),a(M+".dtick",L),a(M+".showgrid",!!_&&void 0)&&(a(M+".gridcolor"),a(M+".gridwidth"),a(M+".griddash")),n[M]._ax={type:"linear",_id:M.slice(0,3),_traceIndices:c,setScale:T.identity,c2l:T.identity,r2l:T.identity,autorange:!0,range:P.slice(),_m:1,_input:{}}}var U=n.lonaxis.range,R=n.lataxis.range,j=U[0],B=U[1];j>0&&B<0&&(B+=360);var z,G,V,et=(j+B)/2;if(!w){var J=v?f.projRotate:[et,0,0];z=a("projection.rotation.lon",J[0]),a("projection.rotation.lat",J[1]),a("projection.rotation.roll",J[2]),a("showcoastlines",!v&&_)&&(a("coastlinecolor"),a("coastlinewidth")),a("showocean",!!_&&void 0)&&a("oceancolor")}w?(G=-96.6,V=38.7):(G=v?et:z,V=(R[0]+R[1])/2),a("center.lon",G),a("center.lat",V),p&&(a("projection.tilt"),a("projection.distance")),y&&a("projection.parallels",f.projParallels||[0,60]),a("projection.scale"),a("showland",!!_&&void 0)&&a("landcolor"),a("showlakes",!!_&&void 0)&&a("lakecolor"),a("showrivers",!!_&&void 0)&&(a("rivercolor"),a("riverwidth")),a("showcountries",v&&u!=="usa"&&_)&&(a("countrycolor"),a("countrywidth")),(u==="usa"||u==="north america"&&l===50)&&(a("showsubunits",_),a("subunitcolor"),a("subunitwidth")),v||a("showframe",_)&&(a("framecolor"),a("framewidth")),a("bgcolor"),a("fitbounds")&&(delete n.projection.scale,v?(delete n.center.lon,delete n.center.lat):b?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}W.exports=function(t,n,a){k(t,n,a,{type:"geo",attributes:h,handleDefaults:e,fullData:a,partition:"y"})}},74455:function(W,I,o){var T=o(39898),k=o(71828),r=o(73972),m=Math.PI/180,h=180/Math.PI,s={cursor:"pointer"},e={cursor:"auto"};function t(v,p){return T.behavior.zoom().translate(p.translate()).scale(p.scale())}function n(v,p,y){var b=v.id,x=v.graphDiv,_=x.layout,g=_[b],A=x._fullLayout,M=A[b],L={},E={};function S(O,P){L[b+"."+O]=k.nestedProperty(g,O).get(),r.call("_storeDirectGUIEdit",_,A._preGUI,L);var U=k.nestedProperty(M,O);U.get()!==P&&(U.set(P),k.nestedProperty(g,O).set(P),E[b+"."+O]=P)}y(S),S("projection.scale",p.scale()/v.fitScale),S("fitbounds",!1),x.emit("plotly_relayout",E)}function a(v,p){var y=t(0,p);function b(x){var _=p.invert(v.midPt);x("center.lon",_[0]),x("center.lat",_[1])}return y.on("zoomstart",function(){T.select(this).style(s)}).on("zoom",function(){p.scale(T.event.scale).translate(T.event.translate),v.render(!0);var x=p.invert(v.midPt);v.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":p.scale()/v.fitScale,"geo.center.lon":x[0],"geo.center.lat":x[1]})}).on("zoomend",function(){T.select(this).style(e),n(v,p,b)}),y}function i(v,p){var y,b,x,_,g,A,M,L,E,S=t(0,p);function O(U){return p.invert(U)}function P(U){var R=p.rotate(),j=p.invert(v.midPt);U("projection.rotation.lon",-R[0]),U("center.lon",j[0]),U("center.lat",j[1])}return S.on("zoomstart",function(){T.select(this).style(s),y=T.mouse(this),b=p.rotate(),x=p.translate(),_=b,g=O(y)}).on("zoom",function(){if(A=T.mouse(this),function(j){var B=O(j);if(!B)return!0;var z=p(B);return Math.abs(z[0]-j[0])>2||Math.abs(z[1]-j[1])>2}(y))return S.scale(p.scale()),void S.translate(p.translate());p.scale(T.event.scale),p.translate([x[0],T.event.translate[1]]),g?O(A)&&(L=O(A),M=[_[0]+(L[0]-g[0]),b[1],b[2]],p.rotate(M),_=M):g=O(y=A),E=!0,v.render(!0);var U=p.rotate(),R=p.invert(v.midPt);v.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":p.scale()/v.fitScale,"geo.center.lon":R[0],"geo.center.lat":R[1],"geo.projection.rotation.lon":-U[0]})}).on("zoomend",function(){T.select(this).style(e),E&&n(v,p,P)}),S}function c(v,p){var y;p.rotate(),p.scale();var b=t(0,p),x=function(M){for(var L=0,E=arguments.length,S=[];++L<E;)S.push(arguments[L]);var O=T.dispatch.apply(null,S);return O.of=function(P,U){return function(R){var j;try{j=R.sourceEvent=T.event,R.target=M,T.event=R,O[R.type].apply(P,U)}finally{T.event=j}}},O}(b,"zoomstart","zoom","zoomend"),_=0,g=b.on;function A(M){var L=p.rotate();M("projection.rotation.lon",-L[0]),M("projection.rotation.lat",-L[1])}return b.on("zoomstart",function(){T.select(this).style(s);var M,L,E,S,O,P,U,R,j,B,z,G=T.mouse(this),V=p.rotate(),et=V,J=p.translate(),X=(L=.5*(M=V)[0]*m,E=.5*M[1]*m,S=.5*M[2]*m,O=Math.sin(L),P=Math.cos(L),U=Math.sin(E),R=Math.cos(E),j=Math.sin(S),[P*R*(B=Math.cos(S))+O*U*j,O*R*B-P*U*j,P*U*B+O*R*j,P*R*j-O*U*B]);y=l(p,G),g.call(b,"zoom",function(){var Y,Z,tt,rt,nt,ot,ct,pt,gt,kt,yt=T.mouse(this);if(p.scale(T.event.scale),y){if(l(p,yt)){p.rotate(V).translate(J);var mt=l(p,yt),Ot=function(st,at){if(st&&at){var ht=function(St,Dt){return[St[1]*Dt[2]-St[2]*Dt[1],St[2]*Dt[0]-St[0]*Dt[2],St[0]*Dt[1]-St[1]*Dt[0]]}(st,at),Lt=Math.sqrt(w(ht,ht)),Mt=.5*Math.acos(Math.max(-1,Math.min(1,w(st,at)))),_t=Math.sin(Mt)/Lt;return Lt&&[Math.cos(Mt),ht[2]*_t,-ht[1]*_t,ht[0]*_t]}}(y,mt),vt=function(st){return[Math.atan2(2*(st[0]*st[1]+st[2]*st[3]),1-2*(st[1]*st[1]+st[2]*st[2]))*h,Math.asin(Math.max(-1,Math.min(1,2*(st[0]*st[2]-st[3]*st[1]))))*h,Math.atan2(2*(st[0]*st[3]+st[1]*st[2]),1-2*(st[2]*st[2]+st[3]*st[3]))*h]}((tt=(Y=X)[0],rt=Y[1],nt=Y[2],ot=Y[3],[tt*(ct=(Z=Ot)[0])-rt*(pt=Z[1])-nt*(gt=Z[2])-ot*(kt=Z[3]),tt*pt+rt*ct+nt*kt-ot*gt,tt*gt-rt*kt+nt*ct+ot*pt,tt*kt+rt*gt-nt*pt+ot*ct])),xt=function(st,at,ht){var Lt=d(at,2,st[0]);Lt=d(Lt,1,st[1]),Lt=d(Lt,0,st[2]-ht[2]);var Mt,_t,St=at[0],Dt=at[1],ut=at[2],Tt=Lt[0],bt=Lt[1],It=Lt[2],zt=Math.atan2(Dt,St)*h,Ft=Math.sqrt(St*St+Dt*Dt);Math.abs(bt)>Ft?(_t=(bt>0?90:-90)-zt,Mt=0):(_t=Math.asin(bt/Ft)*h-zt,Mt=Math.sqrt(Ft*Ft-bt*bt));var $t=180-_t-2*zt,Wt=(Math.atan2(It,Tt)-Math.atan2(ut,Mt))*h,Xt=(Math.atan2(It,Tt)-Math.atan2(ut,-Mt))*h;return u(ht[0],ht[1],_t,Wt)<=u(ht[0],ht[1],$t,Xt)?[_t,Wt,ht[2]]:[$t,Xt,ht[2]]}(vt,y,et);isFinite(xt[0])&&isFinite(xt[1])&&isFinite(xt[2])||(xt=et),p.rotate(xt),et=xt}}else y=l(p,G=yt);x.of(this,arguments)({type:"zoom"})}),z=x.of(this,arguments),_++||z({type:"zoomstart"})}).on("zoomend",function(){var M;T.select(this).style(e),g.call(b,"zoom",null),M=x.of(this,arguments),--_||M({type:"zoomend"}),n(v,p,A)}).on("zoom.redraw",function(){v.render(!0);var M=p.rotate();v.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":p.scale()/v.fitScale,"geo.projection.rotation.lon":-M[0],"geo.projection.rotation.lat":-M[1]})}),T.rebind(b,x,"on")}function l(v,p){var y=v.invert(p);return y&&isFinite(y[0])&&isFinite(y[1])&&function(b){var x=b[0]*m,_=b[1]*m,g=Math.cos(_);return[g*Math.cos(x),g*Math.sin(x),Math.sin(_)]}(y)}function u(v,p,y,b){var x=f(y-v),_=f(b-p);return Math.sqrt(x*x+_*_)}function f(v){return(v%360+540)%360-180}function d(v,p,y){var b=y*m,x=v.slice(),_=p===0?1:0,g=p===2?1:2,A=Math.cos(b),M=Math.sin(b);return x[_]=v[_]*A-v[g]*M,x[g]=v[g]*A+v[_]*M,x}function w(v,p){for(var y=0,b=0,x=v.length;b<x;++b)y+=v[b]*p[b];return y}W.exports=function(v,p){var y=v.projection;return(p._isScoped?a:p._isClipped?c:i)(v,y)}},27659:function(W,I,o){var T=o(73972),k=o(85555).SUBPLOT_PATTERN;I.AU=function(r,m,h){var s=T.subplotsRegistry[m];if(!s)return[];for(var e=s.attr,t=[],n=0;n<r.length;n++){var a=r[n];a[0].trace[e]===h&&t.push(a)}return t},I.a0=function(r,m){var h,s=[],e=[];if(!(h=typeof m=="string"?T.getModule(m).plot:typeof m=="function"?m:m.plot))return[s,r];for(var t=0;t<r.length;t++){var n=r[t],a=n[0].trace;a.visible===!0&&a._length!==0&&(a._module&&a._module.plot===h?s.push(n):e.push(n))}return[s,e]},I.NG=function(r,m,h){if(!T.subplotsRegistry[m])return[];var s,e,t,n=T.subplotsRegistry[m].attr,a=[];if(m==="gl2d"){var i=h.match(k);e="x"+i[1],t="y"+i[2]}for(var c=0;c<r.length;c++)s=r[c],m==="gl2d"&&T.traceIs(s,"gl2d")?s[n[0]]===e&&s[n[1]]===t&&a.push(s):s[n]===h&&a.push(s);return a}},75071:function(W,I,o){var T=o(16825),k=o(1195),r=o(48956),m=o(85555),h=o(38520);function s(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}W.exports=function(e){var t=e.mouseContainer,n=e.glplot,a=new s(t,n);function i(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}function c(l,u,f){var d,w,v=e.calcDataBox(),p=n.viewBox,y=a.lastPos[0],b=a.lastPos[1],x=m.MINDRAG*n.pixelRatio,_=m.MINZOOM*n.pixelRatio;function g(O,P,U){var R=Math.min(P,U),j=Math.max(P,U);R!==j?(v[O]=R,v[O+2]=j,a.dataBox=v,e.setRanges(v)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}switch(u*=n.pixelRatio,f*=n.pixelRatio,f=p[3]-p[1]-f,e.fullLayout.dragmode){case"zoom":if(l){var A=u/(p[2]-p[0])*(v[2]-v[0])+v[0],M=f/(p[3]-p[1])*(v[3]-v[1])+v[1];a.boxInited||(a.boxStart[0]=A,a.boxStart[1]=M,a.dragStart[0]=u,a.dragStart[1]=f),a.boxEnd[0]=A,a.boxEnd[1]=M,a.boxInited=!0,a.boxEnabled||a.boxStart[0]===a.boxEnd[0]&&a.boxStart[1]===a.boxEnd[1]||(a.boxEnabled=!0);var L=Math.abs(a.dragStart[0]-u)<_,E=Math.abs(a.dragStart[1]-f)<_;if(!function(){for(var O=e.graphDiv._fullLayout._axisConstraintGroups,P=e.xaxis._id,U=e.yaxis._id,R=0;R<O.length;R++)if(O[R][P]!==-1){if(O[R][U]!==-1)return!0;break}return!1}()||L&&E)L&&(a.boxEnd[0]=a.boxStart[0]),E&&(a.boxEnd[1]=a.boxStart[1]);else{d=a.boxEnd[0]-a.boxStart[0],w=a.boxEnd[1]-a.boxStart[1];var S=(v[3]-v[1])/(v[2]-v[0]);Math.abs(d*S)>Math.abs(w)?(a.boxEnd[1]=a.boxStart[1]+Math.abs(d)*S*(w>=0?1:-1),a.boxEnd[1]<v[1]?(a.boxEnd[1]=v[1],a.boxEnd[0]=a.boxStart[0]+(v[1]-a.boxStart[1])/Math.abs(S)):a.boxEnd[1]>v[3]&&(a.boxEnd[1]=v[3],a.boxEnd[0]=a.boxStart[0]+(v[3]-a.boxStart[1])/Math.abs(S))):(a.boxEnd[0]=a.boxStart[0]+Math.abs(w)/S*(d>=0?1:-1),a.boxEnd[0]<v[0]?(a.boxEnd[0]=v[0],a.boxEnd[1]=a.boxStart[1]+(v[0]-a.boxStart[0])*Math.abs(S)):a.boxEnd[0]>v[2]&&(a.boxEnd[0]=v[2],a.boxEnd[1]=a.boxStart[1]+(v[2]-a.boxStart[0])*Math.abs(S)))}}else a.boxEnabled?(d=a.boxStart[0]!==a.boxEnd[0],w=a.boxStart[1]!==a.boxEnd[1],d||w?(d&&(g(0,a.boxStart[0],a.boxEnd[0]),e.xaxis.autorange=!1),w&&(g(1,a.boxStart[1],a.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),a.boxEnabled=!1,a.boxInited=!1):a.boxInited&&(a.boxInited=!1);break;case"pan":a.boxEnabled=!1,a.boxInited=!1,l?(a.panning||(a.dragStart[0]=u,a.dragStart[1]=f),Math.abs(a.dragStart[0]-u)<x&&(u=a.dragStart[0]),Math.abs(a.dragStart[1]-f)<x&&(f=a.dragStart[1]),d=(y-u)*(v[2]-v[0])/(n.viewBox[2]-n.viewBox[0]),w=(b-f)*(v[3]-v[1])/(n.viewBox[3]-n.viewBox[1]),v[0]+=d,v[2]+=d,v[1]+=w,v[3]+=w,e.setRanges(v),a.panning=!0,a.lastInputTime=Date.now(),i(),e.cameraChanged(),e.handleAnnotations()):a.panning&&(a.panning=!1,e.relayoutCallback())}a.lastPos[0]=u,a.lastPos[1]=f}return a.mouseListener=T(t,c),t.addEventListener("touchstart",function(l){var u=r(l.changedTouches[0],t);c(0,u[0],u[1]),c(1,u[0],u[1]),l.preventDefault()},!!h&&{passive:!1}),t.addEventListener("touchmove",function(l){l.preventDefault();var u=r(l.changedTouches[0],t);c(1,u[0],u[1]),l.preventDefault()},!!h&&{passive:!1}),t.addEventListener("touchend",function(l){c(0,a.lastPos[0],a.lastPos[1]),l.preventDefault()},!!h&&{passive:!1}),a.wheelListener=k(t,function(l,u){if(!e.scrollZoom)return!1;var f=e.calcDataBox(),d=n.viewBox,w=a.lastPos[0],v=a.lastPos[1],p=Math.exp(5*u/(d[3]-d[1])),y=w/(d[2]-d[0])*(f[2]-f[0])+f[0],b=v/(d[3]-d[1])*(f[3]-f[1])+f[1];return f[0]=(f[0]-y)*p+y,f[2]=(f[2]-y)*p+y,f[1]=(f[1]-b)*p+b,f[3]=(f[3]-b)*p+b,e.setRanges(f),a.lastInputTime=Date.now(),i(),e.cameraChanged(),e.handleAnnotations(),e.relayoutCallback(),!0},!0),a}},82961:function(W,I,o){var T=o(89298),k=o(78614);function r(s){this.scene=s,this.gl=s.gl,this.pixelRatio=s.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var m=r.prototype,h=["xaxis","yaxis"];m.merge=function(s){var e,t,n,a,i,c,l,u,f,d,w;for(this.titleEnable=!1,this.backgroundColor=k(s.plot_bgcolor),d=0;d<2;++d){var v=(e=h[d]).charAt(0);for(n=(t=s[this.scene[e]._name]).title.text===this.scene.fullLayout._dfltTitle[v]?"":t.title.text,w=0;w<=2;w+=2)this.labelEnable[d+w]=!1,this.labels[d+w]=n,this.labelColor[d+w]=k(t.title.font.color),this.labelFont[d+w]=t.title.font.family,this.labelSize[d+w]=t.title.font.size,this.labelPad[d+w]=this.getLabelPad(e,t),this.tickEnable[d+w]=!1,this.tickColor[d+w]=k((t.tickfont||{}).color),this.tickAngle[d+w]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[d+w]=this.getTickPad(t),this.tickMarkLength[d+w]=0,this.tickMarkWidth[d+w]=t.tickwidth||0,this.tickMarkColor[d+w]=k(t.tickcolor),this.borderLineEnable[d+w]=!1,this.borderLineColor[d+w]=k(t.linecolor),this.borderLineWidth[d+w]=t.linewidth||0;l=this.hasSharedAxis(t),i=this.hasAxisInDfltPos(e,t)&&!l,c=this.hasAxisInAltrPos(e,t)&&!l,a=t.mirror||!1,u=l?String(a).indexOf("all")!==-1:!!a,f=l?a==="allticks":String(a).indexOf("ticks")!==-1,i?this.labelEnable[d]=!0:c&&(this.labelEnable[d+2]=!0),i?this.tickEnable[d]=t.showticklabels:c&&(this.tickEnable[d+2]=t.showticklabels),(i||u)&&(this.borderLineEnable[d]=t.showline),(c||u)&&(this.borderLineEnable[d+2]=t.showline),(i||f)&&(this.tickMarkLength[d]=this.getTickMarkLength(t)),(c||f)&&(this.tickMarkLength[d+2]=this.getTickMarkLength(t)),this.gridLineEnable[d]=t.showgrid,this.gridLineColor[d]=k(t.gridcolor),this.gridLineWidth[d]=t.gridwidth,this.zeroLineEnable[d]=t.zeroline,this.zeroLineColor[d]=k(t.zerolinecolor),this.zeroLineWidth[d]=t.zerolinewidth}},m.hasSharedAxis=function(s){var e=this.scene,t=e.fullLayout._subplots.gl2d;return T.findSubplotsWithAxis(t,s).indexOf(e.id)!==0},m.hasAxisInDfltPos=function(s,e){var t=e.side;return s==="xaxis"?t==="bottom":s==="yaxis"?t==="left":void 0},m.hasAxisInAltrPos=function(s,e){var t=e.side;return s==="xaxis"?t==="top":s==="yaxis"?t==="right":void 0},m.getLabelPad=function(s,e){var t=1.5,n=e.title.font.size,a=e.showticklabels;return s==="xaxis"?e.side==="top"?n*(t+(a?1:0))-10:n*(t+(a?.5:0))-10:s==="yaxis"?e.side==="right"?10+n*(t+(a?1:.5)):10+n*(t+(a?.5:0)):void 0},m.getTickPad=function(s){return s.ticks==="outside"?10+s.ticklen:15},m.getTickMarkLength=function(s){if(!s.ticks)return 0;var e=s.ticklen;return s.ticks==="inside"?-e:e},W.exports=function(s){return new r(s)}},4796:function(W,I,o){var T=o(30962).overrideAll,k=o(92918),r=o(10820),m=o(77922),h=o(85555),s=o(93612),e=o(528),t=o(27659).NG;I.name="gl2d",I.attr=["xaxis","yaxis"],I.idRoot=["x","y"],I.idRegex=h.idRegex,I.attrRegex=h.attrRegex,I.attributes=o(89502),I.supplyLayoutDefaults=function(n,a,i){a._has("cartesian")||s.supplyLayoutDefaults(n,a,i)},I.layoutAttrOverrides=T(s.layoutAttributes,"plot","from-root"),I.baseLayoutAttrOverrides=T({plot_bgcolor:r.plot_bgcolor,hoverlabel:e.hoverlabel},"plot","nested"),I.plot=function(n){for(var a=n._fullLayout,i=n._fullData,c=a._subplots.gl2d,l=0;l<c.length;l++){var u=c[l],f=a._plots[u],d=t(i,"gl2d",u),w=f._scene2d;w===void 0&&(w=new k({id:u,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio},a),f._scene2d=w),w.plot(d,n.calcdata,a,n.layout)}},I.clean=function(n,a,i,c){for(var l=c._subplots.gl2d||[],u=0;u<l.length;u++){var f=l[u],d=c._plots[f];d._scene2d&&t(n,"gl2d",f).length===0&&(d._scene2d.destroy(),delete c._plots[f])}s.clean.apply(this,arguments)},I.drawFramework=function(n){n._context.staticPlot||s.drawFramework(n)},I.toSVG=function(n){for(var a=n._fullLayout,i=a._subplots.gl2d,c=0;c<i.length;c++){var l=a._plots[i[c]]._scene2d,u=l.toImage("png");a._glimages.append("svg:image").attr({xmlns:m.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},I.updateFx=function(n){for(var a=n._fullLayout,i=a._subplots.gl2d,c=0;c<i.length;c++)a._plots[i[c]]._scene2d.updateFx(a.dragmode)}},92918:function(W,I,o){var T,k,r=o(73972),m=o(89298),h=o(30211),s=o(9330).gl_plot2d,e=o(9330).gl_spikes2d,t=o(9330).gl_select_box,n=o(40372),a=o(82961),i=o(75071),c=o(58617),l=o(99082),u=l.enforce,f=l.clean,d=o(71739).doAutoRange,w=o(64505),v=w.drawMode,p=w.selectMode,y=["xaxis","yaxis"],b=o(85555).SUBPLOT_PATTERN;function x(g,A){this.container=g.container,this.graphDiv=g.graphDiv,this.pixelRatio=g.plotGlPixelRatio||window.devicePixelRatio,this.id=g.id,this.staticPlot=!!g.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(A),this.makeFramework(),this.stopped||(this.glplotOptions=a(this),this.glplotOptions.merge(A),this.glplot=s(this.glplotOptions),this.camera=i(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}W.exports=x;var _=x.prototype;_.makeFramework=function(){if(this.staticPlot){if(!(k||(T=document.createElement("canvas"),k=n({canvas:T,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=T,this.gl=k}else{var g=this.container.querySelector(".gl-canvas-focus"),A=n({canvas:g,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!A)return c(this),void(this.stopped=!0);this.canvas=g,this.gl=A}var M=this.canvas;M.style.width="100%",M.style.height="100%",M.style.position="absolute",M.style.top="0px",M.style.left="0px",M.style["pointer-events"]="none",this.updateSize(M);var L=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",L.style["z-index"]=20,L.style["pointer-events"]="none";var E=this.mouseContainer=document.createElement("div");E.style.position="absolute",E.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var S=this.container;S.appendChild(L),S.appendChild(E);var O=this;E.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),E.addEventListener("mouseover",function(){O.isMouseOver=!0})},_.toImage=function(g){g||(g="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(T),this.updateSize(this.canvas);var A=this.glplot.gl,M=A.drawingBufferWidth,L=A.drawingBufferHeight;A.clearColor(1,1,1,0),A.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),A.bindFramebuffer(A.FRAMEBUFFER,null);var E=new Uint8Array(M*L*4);A.readPixels(0,0,M,L,A.RGBA,A.UNSIGNED_BYTE,E);for(var S=0,O=L-1;S<O;++S,--O)for(var P=0;P<M;++P)for(var U=0;U<4;++U){var R=E[4*(M*S+P)+U];E[4*(M*S+P)+U]=E[4*(M*O+P)+U],E[4*(M*O+P)+U]=R}var j=document.createElement("canvas");j.width=M,j.height=L;var B,z=j.getContext("2d",{willReadFrequently:!0}),G=z.createImageData(M,L);switch(G.data.set(E),z.putImageData(G,0,0),g){case"jpeg":B=j.toDataURL("image/jpeg");break;case"webp":B=j.toDataURL("image/webp");break;default:B=j.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(T),B},_.updateSize=function(g){g||(g=this.canvas);var A=this.pixelRatio,M=this.fullLayout,L=M.width,E=M.height,S=0|Math.ceil(A*L),O=0|Math.ceil(A*E);return g.width===S&&g.height===O||(g.width=S,g.height=O),g},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var g=[m.calcTicks(this.xaxis),m.calcTicks(this.yaxis)],A=0;A<2;++A)for(var M=0;M<g[A].length;++M)g[A][M].text=g[A][M].text+"";return g},_.updateRefs=function(g){this.fullLayout=g;var A=this.id.match(b),M="xaxis"+A[1],L="yaxis"+A[2];this.xaxis=this.fullLayout[M],this.yaxis=this.fullLayout[L]},_.relayoutCallback=function(){var g=this.graphDiv,A=this.xaxis,M=this.yaxis,L=g.layout,E={},S=E[A._name+".range"]=A.range.slice(),O=E[M._name+".range"]=M.range.slice();E[A._name+".autorange"]=A.autorange,E[M._name+".autorange"]=M.autorange,r.call("_storeDirectGUIEdit",g.layout,g._fullLayout._preGUI,E);var P=L[A._name];P.range=S,P.autorange=A.autorange;var U=L[M._name];U.range=O,U.autorange=M.autorange,E.lastInputTime=this.camera.lastInputTime,g.emit("plotly_relayout",E)},_.cameraChanged=function(){var g=this.camera;this.glplot.setDataBox(this.calcDataBox());var A=this.computeTickMarks();(function(M,L){for(var E=0;E<2;++E){var S=M[E],O=L[E];if(S.length!==O.length)return!0;for(var P=0;P<S.length;++P)if(S[P].x!==O[P].x)return!0}return!1})(A,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=A,this.glplotOptions.dataBox=g.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var g=this.graphDiv,A=this.fullLayout.annotations,M=0;M<A.length;M++){var L=A[M];L.xref===this.xaxis._id&&L.yref===this.yaxis._id&&r.getComponentMethod("annotations","drawOne")(g,M)}},_.destroy=function(){if(this.glplot){var g=this.traces;g&&Object.keys(g).map(function(A){g[A].dispose(),delete g[A]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(g,A,M){var L=this.glplot;this.updateRefs(M),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(g,A),this.updateFx(M.dragmode);var E=M.width,S=M.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(M),O.screenBox=[0,0,E,S];var P={_fullLayout:{_axisConstraintGroups:M._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:M._size}};f(P,this.xaxis),f(P,this.yaxis);var U,R,j=M._size,B=this.xaxis.domain,z=this.yaxis.domain;for(O.viewBox=[j.l+B[0]*j.w,j.b+z[0]*j.h,E-j.r-(1-B[1])*j.w,S-j.t-(1-z[1])*j.h],this.mouseContainer.style.width=j.w*(B[1]-B[0])+"px",this.mouseContainer.style.height=j.h*(z[1]-z[0])+"px",this.mouseContainer.height=j.h*(z[1]-z[0]),this.mouseContainer.style.left=j.l+B[0]*j.w+"px",this.mouseContainer.style.top=j.t+(1-z[1])*j.h+"px",R=0;R<2;++R)(U=this[y[R]])._length=O.viewBox[R+2]-O.viewBox[R],d(this.graphDiv,U),U.setScale();u(P),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(M),L.update(O),this.glplot.draw()},_.calcDataBox=function(){var g=this.xaxis,A=this.yaxis,M=g.range,L=A.range,E=g.r2l,S=A.r2l;return[E(M[0]),S(L[0]),E(M[1]),S(L[1])]},_.setRanges=function(g){var A=this.xaxis,M=this.yaxis,L=A.l2r,E=M.l2r;A.range=[L(g[0]),L(g[2])],M.range=[E(g[1]),E(g[3])]},_.updateTraces=function(g,A){var M,L,E,S=Object.keys(this.traces);this.fullData=g;t:for(M=0;M<S.length;M++){var O=S[M],P=this.traces[O];for(L=0;L<g.length;L++)if((E=g[L]).uid===O&&E.type===P.type)continue t;P.dispose(),delete this.traces[O]}for(M=0;M<g.length;M++){E=g[M];var U=A[M],R=this.traces[E.uid];R?R.update(E,U):(R=E._module.plot(this,E,U),this.traces[E.uid]=R)}this.glplot.objects.sort(function(j,B){return j._trace.index-B._trace.index})},_.updateFx=function(g){p(g)||v(g)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=g==="pan"?"move":g==="zoom"?"crosshair":null},_.emitPointAction=function(g,A){for(var M,L=g.trace.uid,E=g.pointIndex,S=0;S<this.fullData.length;S++)this.fullData[S].uid===L&&(M=this.fullData[S]);var O={x:g.traceCoord[0],y:g.traceCoord[1],curveNumber:M.index,pointNumber:E,data:M._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};h.appendArrayPointValue(O,M,E),this.graphDiv.emit(A,{points:[O]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var g=this.glplot,A=this.camera,M=A.mouseListener,L=this.lastButtonState===1&&M.buttons===0,E=this.fullLayout;this.lastButtonState=M.buttons,this.cameraChanged();var S,O=M.x*g.pixelRatio,P=this.canvas.height-g.pixelRatio*M.y;if(A.boxEnabled&&E.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(A.boxStart[0],A.boxEnd[0]),Math.min(A.boxStart[1],A.boxEnd[1]),Math.max(A.boxStart[0],A.boxEnd[0]),Math.max(A.boxStart[1],A.boxEnd[1])],R=0;R<2;R++)A.boxStart[R]===A.boxEnd[R]&&(U[R]=g.dataBox[R],U[R+2]=g.dataBox[R+2]);g.setDirty()}else if(!A.panning&&this.isMouseOver){this.selectBox.enabled=!1;var j=E._size,B=this.xaxis.domain,z=this.yaxis.domain,G=(S=g.pick(O/g.pixelRatio+j.l+B[0]*j.w,P/g.pixelRatio-(j.t+(1-z[1])*j.h)))&&S.object._trace.handlePick(S);if(G&&L&&this.emitPointAction(G,"plotly_click"),S&&S.object._trace.hoverinfo!=="skip"&&E.hovermode&&G&&(!this.lastPickResult||this.lastPickResult.traceUid!==G.trace.uid||this.lastPickResult.dataCoord[0]!==G.dataCoord[0]||this.lastPickResult.dataCoord[1]!==G.dataCoord[1])){var V=G;this.lastPickResult={traceUid:G.trace?G.trace.uid:null,dataCoord:G.dataCoord.slice()},this.spikes.update({center:S.dataCoord}),V.screenCoord=[((g.viewBox[2]-g.viewBox[0])*(S.dataCoord[0]-g.dataBox[0])/(g.dataBox[2]-g.dataBox[0])+g.viewBox[0])/g.pixelRatio,(this.canvas.height-(g.viewBox[3]-g.viewBox[1])*(S.dataCoord[1]-g.dataBox[1])/(g.dataBox[3]-g.dataBox[1])-g.viewBox[1])/g.pixelRatio],this.emitPointAction(G,"plotly_hover");var et=this.fullData[V.trace.index]||{},J=V.pointIndex,X=h.castHoverinfo(et,E,J);if(X&&X!=="all"){var Y=X.split("+");Y.indexOf("x")===-1&&(V.traceCoord[0]=void 0),Y.indexOf("y")===-1&&(V.traceCoord[1]=void 0),Y.indexOf("z")===-1&&(V.traceCoord[2]=void 0),Y.indexOf("text")===-1&&(V.textLabel=void 0),Y.indexOf("name")===-1&&(V.name=void 0)}h.loneHover({x:V.screenCoord[0],y:V.screenCoord[1],xLabel:this.hoverFormatter("xaxis",V.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",V.traceCoord[1]),zLabel:V.traceCoord[2],text:V.textLabel,name:V.name,color:h.castHoverOption(et,J,"bgcolor")||V.color,borderColor:h.castHoverOption(et,J,"bordercolor"),fontFamily:h.castHoverOption(et,J,"font.family"),fontSize:h.castHoverOption(et,J,"font.size"),fontColor:h.castHoverOption(et,J,"font.color"),nameLength:h.castHoverOption(et,J,"namelength"),textAlign:h.castHoverOption(et,J,"align")},{container:this.svgContainer,gd:this.graphDiv})}}S||this.unhover(),g.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),h.loneUnhover(this.svgContainer))},_.hoverFormatter=function(g,A){if(A!==void 0){var M=this[g];return m.tickText(M,M.c2l(A),"hover").text}}},58547:function(W,I,o){var T=o(30962).overrideAll,k=o(528),r=o(33539),m=o(27659).NG,h=o(71828),s=o(77922),e="gl3d",t="scene";I.name=e,I.attr=t,I.idRoot=t,I.idRegex=I.attrRegex=h.counterRegex("scene"),I.attributes=o(59084),I.layoutAttributes=o(65500),I.baseLayoutAttrOverrides=T({hoverlabel:k.hoverlabel},"plot","nested"),I.supplyLayoutDefaults=o(24682),I.plot=function(n){for(var a=n._fullLayout,i=n._fullData,c=a._subplots[e],l=0;l<c.length;l++){var u=c[l],f=m(i,e,u),d=a[u],w=d.camera,v=d._scene;v||(v=new r({id:u,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio,camera:w},a),d._scene=v),v.viewInitial||(v.viewInitial={up:{x:w.up.x,y:w.up.y,z:w.up.z},eye:{x:w.eye.x,y:w.eye.y,z:w.eye.z},center:{x:w.center.x,y:w.center.y,z:w.center.z}}),v.plot(f,a,n.layout)}},I.clean=function(n,a,i,c){for(var l=c._subplots[e]||[],u=0;u<l.length;u++){var f=l[u];!a[f]&&c[f]._scene&&(c[f]._scene.destroy(),c._infolayer&&c._infolayer.selectAll(".annotation-"+f).remove())}},I.toSVG=function(n){for(var a=n._fullLayout,i=a._subplots[e],c=a._size,l=0;l<i.length;l++){var u=a[i[l]],f=u.domain,d=u._scene,w=d.toImage("png");a._glimages.append("svg:image").attr({xmlns:s.svg,"xlink:href":w,x:c.l+c.w*f.x[0],y:c.t+c.h*(1-f.y[1]),width:c.w*(f.x[1]-f.x[0]),height:c.h*(f.y[1]-f.y[0]),preserveAspectRatio:"none"}),d.destroy()}},I.cleanId=function(n){if(n.match(/^scene[0-9]*$/)){var a=n.substr(5);return a==="1"&&(a=""),t+a}},I.updateFx=function(n){for(var a=n._fullLayout,i=a._subplots[e],c=0;c<i.length;c++)a[i[c]]._scene.updateFx(a.dragmode,a.hovermode)}},59084:function(W){W.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(W,I,o){var T=o(7901),k=o(13838),r=o(1426).extendFlat,m=o(30962).overrideAll;W.exports=m({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:T.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:r({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},rangemode:k.rangemode,minallowed:k.minallowed,maxallowed:k.maxallowed,range:r({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:r({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},3277:function(W,I,o){var T=o(84267).mix,k=o(71828),r=o(44467),m=o(77894),h=o(951),s=o(71453),e=["xaxis","yaxis","zaxis"];W.exports=function(t,n,a){var i,c;function l(d,w){return k.coerce(i,c,m,d,w)}for(var u=0;u<e.length;u++){var f=e[u];i=t[f]||{},(c=r.newContainer(n,f))._id=f[0]+a.scene,c._name=f,h(i,c,l,a),s(i,c,l,{font:a.font,letter:f[0],data:a.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:a.bgColor,calendar:a.calendar},a.fullLayout),l("gridcolor",T(c.color,a.bgColor,72.72727272727273).toRgbString()),l("title.text",f[0]),c.setScale=k.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",c.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},30422:function(W,I,o){var T=o(78614),k=o(71828),r=["xaxis","yaxis","zaxis"];function m(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}m.prototype.merge=function(h,s){for(var e=this,t=0;t<3;++t){var n=s[r[t]];n.visible?(e.labels[t]=h._meta?k.templateString(n.title.text,h._meta):n.title.text,"font"in n.title&&(n.title.font.color&&(e.labelColor[t]=T(n.title.font.color)),n.title.font.family&&(e.labelFont[t]=n.title.font.family),n.title.font.size&&(e.labelSize[t]=n.title.font.size)),"showline"in n&&(e.lineEnable[t]=n.showline),"linecolor"in n&&(e.lineColor[t]=T(n.linecolor)),"linewidth"in n&&(e.lineWidth[t]=n.linewidth),"showgrid"in n&&(e.gridEnable[t]=n.showgrid),"gridcolor"in n&&(e.gridColor[t]=T(n.gridcolor)),"gridwidth"in n&&(e.gridWidth[t]=n.gridwidth),n.type==="log"?e.zeroEnable[t]=!1:"zeroline"in n&&(e.zeroEnable[t]=n.zeroline),"zerolinecolor"in n&&(e.zeroLineColor[t]=T(n.zerolinecolor)),"zerolinewidth"in n&&(e.zeroLineWidth[t]=n.zerolinewidth),"ticks"in n&&n.ticks?e.lineTickEnable[t]=!0:e.lineTickEnable[t]=!1,"ticklen"in n&&(e.lineTickLength[t]=e._defaultLineTickLength[t]=n.ticklen),"tickcolor"in n&&(e.lineTickColor[t]=T(n.tickcolor)),"tickwidth"in n&&(e.lineTickWidth[t]=n.tickwidth),"tickangle"in n&&(e.tickAngle[t]=n.tickangle==="auto"?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(e.tickEnable[t]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(e.tickColor[t]=T(n.tickfont.color)),n.tickfont.family&&(e.tickFont[t]=n.tickfont.family),n.tickfont.size&&(e.tickSize[t]=n.tickfont.size)),"mirror"in n?["ticks","all","allticks"].indexOf(n.mirror)!==-1?(e.lineTickMirror[t]=!0,e.lineMirror[t]=!0):n.mirror===!0?(e.lineTickMirror[t]=!1,e.lineMirror[t]=!0):(e.lineTickMirror[t]=!1,e.lineMirror[t]=!1):e.lineMirror[t]=!1,"showbackground"in n&&n.showbackground!==!1?(e.backgroundEnable[t]=!0,e.backgroundColor[t]=T(n.backgroundcolor)):e.backgroundEnable[t]=!1):(e.tickEnable[t]=!1,e.labelEnable[t]=!1,e.lineEnable[t]=!1,e.lineTickEnable[t]=!1,e.gridEnable[t]=!1,e.zeroEnable[t]=!1,e.backgroundEnable[t]=!1)}},W.exports=function(h,s){var e=new m;return e.merge(h,s),e}},24682:function(W,I,o){var T=o(71828),k=o(7901),r=o(73972),m=o(49119),h=o(3277),s=o(65500),e=o(27659).NG,t="gl3d";function n(a,i,c,l){for(var u=c("bgcolor"),f=k.combine(u,l.paper_bgcolor),d=["up","center","eye"],w=0;w<d.length;w++)c("camera."+d[w]+".x"),c("camera."+d[w]+".y"),c("camera."+d[w]+".z");c("camera.projection.type");var v=!!c("aspectratio.x")&&!!c("aspectratio.y")&&!!c("aspectratio.z"),p=c("aspectmode",v?"manual":"auto");v||(a.aspectratio=i.aspectratio={x:1,y:1,z:1},p==="manual"&&(i.aspectmode="auto"),a.aspectmode=i.aspectmode);var y=e(l.fullData,t,l.id);h(a,i,{font:l.font,scene:l.id,data:y,bgColor:f,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),r.getComponentMethod("annotations3d","handleDefaults")(a,i,l);var b=l.getDfltFromLayout("dragmode");if(b!==!1&&!b)if(b="orbit",a.camera&&a.camera.up){var x=a.camera.up.x,_=a.camera.up.y,g=a.camera.up.z;g!==0&&(x&&_&&g?g/Math.sqrt(x*x+_*_+g*g)>.999&&(b="turntable"):b="turntable")}else b="turntable";c("dragmode",b),c("hovermode",l.getDfltFromLayout("hovermode"))}W.exports=function(a,i,c){var l=i._basePlotModules.length>1;m(a,i,c,{type:t,attributes:s,handleDefaults:n,fullLayout:i,font:i.font,fullData:c,getDfltFromLayout:function(u){if(!l)return T.validate(a[u],s[u])?a[u]:void 0},autotypenumbersDflt:i.autotypenumbers,paper_bgcolor:i.paper_bgcolor,calendar:i.calendar})}},65500:function(W,I,o){var T=o(77894),k=o(27670).Y,r=o(1426).extendFlat,m=o(71828).counterRegex;function h(s,e,t){return{x:{valType:"number",dflt:s,editType:"camera"},y:{valType:"number",dflt:e,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}W.exports={_arrayAttrRegexps:[m("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:r(h(0,0,1),{}),center:r(h(0,0,0),{}),eye:r(h(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:T,yaxis:T,zaxis:T,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(W,I,o){var T=o(78614),k=["xaxis","yaxis","zaxis"];function r(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}r.prototype.merge=function(m){for(var h=0;h<3;++h){var s=m[k[h]];s.visible?(this.enabled[h]=s.showspikes,this.colors[h]=T(s.spikecolor),this.drawSides[h]=s.spikesides,this.lineWidth[h]=s.spikethickness):(this.enabled[h]=!1,this.drawSides[h]=!1)}},W.exports=function(m){var h=new r;return h.merge(m),h}},96085:function(W,I,o){W.exports=function(h){for(var s=h.axesOptions,e=h.glplot.axesPixels,t=h.fullSceneLayout,n=[[],[],[]],a=0;a<3;++a){var i=t[r[a]];if(i._length=(e[a].hi-e[a].lo)*e[a].pixelsPerDataUnit/h.dataScale[a],Math.abs(i._length)===1/0||isNaN(i._length))n[a]=[];else{i._input_range=i.range.slice(),i.range[0]=e[a].lo/h.dataScale[a],i.range[1]=e[a].hi/h.dataScale[a],i._m=1/(h.dataScale[a]*e[a].pixelsPerDataUnit),i.range[0]===i.range[1]&&(i.range[0]-=1,i.range[1]+=1);var c=i.tickmode;if(i.tickmode==="auto"){i.tickmode="linear";var l=i.nticks||k.constrain(i._length/40,4,9);T.autoTicks(i,Math.abs(i.range[1]-i.range[0])/l)}for(var u=T.calcTicks(i,{msUTC:!0}),f=0;f<u.length;++f)u[f].x=u[f].x*h.dataScale[a],i.type==="date"&&(u[f].text=u[f].text.replace(/\<br\>/g," "));n[a]=u,i.tickmode=c}}for(s.ticks=n,a=0;a<3;++a)for(m[a]=.5*(h.glplot.bounds[0][a]+h.glplot.bounds[1][a]),f=0;f<2;++f)s.bounds[f][a]=h.glplot.bounds[f][a];h.contourLevels=function(d){for(var w=new Array(3),v=0;v<3;++v){for(var p=d[v],y=new Array(p.length),b=0;b<p.length;++b)y[b]=p[b].x;w[v]=y}return w}(n)};var T=o(89298),k=o(71828),r=["xaxis","yaxis","zaxis"],m=[0,0,0]},63538:function(W){function I(o,T){var k,r,m=[0,0,0,0];for(k=0;k<4;++k)for(r=0;r<4;++r)m[r]+=o[4*k+r]*T[k];return m}W.exports=function(o,T){return I(o.projection,I(o.view,I(o.model,[T[0],T[1],T[2],1])))}},33539:function(W,I,o){var T,k,r=o(9330).gl_plot3d,m=r.createCamera,h=r.createScene,s=o(40372),e=o(38520),t=o(73972),n=o(71828),a=n.preserveDrawingBuffer(),i=o(89298),c=o(30211),l=o(78614),u=o(58617),f=o(63538),d=o(30422),w=o(13133),v=o(96085),p=o(71739).applyAutorangeOptions,y=!1;function b(M,L){var E=document.createElement("div"),S=M.container;this.graphDiv=M.graphDiv;var O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none",E.appendChild(O),this.svgContainer=O,E.id=M.id,E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",S.appendChild(E),this.fullLayout=L,this.id=M.id||"scene",this.fullSceneLayout=L[this.id],this.plotArgs=[[],{},{}],this.axesOptions=d(L,L[this.id]),this.spikeOptions=w(L[this.id]),this.container=E,this.staticMode=!!M.staticPlot,this.pixelRatio=this.pixelRatio||M.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var x=b.prototype;x.prepareOptions=function(){var M=this,L={canvas:M.canvas,gl:M.gl,glOptions:{preserveDrawingBuffer:a,premultipliedAlpha:!0,antialias:!0},container:M.container,axes:M.axesOptions,spikes:M.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:M.camera,pixelRatio:M.pixelRatio};if(M.staticMode){if(!(k||(T=document.createElement("canvas"),k=s({canvas:T,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");L.gl=k,L.canvas=T}return L};var _=!0;x.tryCreatePlot=function(){var M=this,L=M.prepareOptions(),E=!0;try{M.glplot=h(L)}catch{if(M.staticMode||!_||a)E=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{a=L.glOptions.preserveDrawingBuffer=!0,M.glplot=h(L)}catch{a=L.glOptions.preserveDrawingBuffer=!1,E=!1}}}return _=!1,E},x.initializeGLCamera=function(){var M=this,L=M.fullSceneLayout.camera,E=L.projection.type==="orthographic";M.camera=m(M.container,{center:[L.center.x,L.center.y,L.center.z],eye:[L.eye.x,L.eye.y,L.eye.z],up:[L.up.x,L.up.y,L.up.z],_ortho:E,zoomMin:.01,zoomMax:100,mode:"orbit"})},x.initializeGLPlot=function(){var M=this;if(M.initializeGLCamera(),!M.tryCreatePlot())return u(M);M.traces={},M.make4thDimension();var L=M.graphDiv,E=L.layout,S=function(){var P={};return M.isCameraChanged(E)&&(P[M.id+".camera"]=M.getCamera()),M.isAspectChanged(E)&&(P[M.id+".aspectratio"]=M.glplot.getAspectratio(),E[M.id].aspectmode!=="manual"&&(M.fullSceneLayout.aspectmode=E[M.id].aspectmode=P[M.id+".aspectmode"]="manual")),P},O=function(P){if(P.fullSceneLayout.dragmode!==!1){var U=S();P.saveLayout(E),P.graphDiv.emit("plotly_relayout",U)}};return M.glplot.canvas&&(M.glplot.canvas.addEventListener("mouseup",function(){O(M)}),M.glplot.canvas.addEventListener("touchstart",function(){y=!0}),M.glplot.canvas.addEventListener("wheel",function(P){if(L._context._scrollZoom.gl3d){if(M.camera._ortho){var U=P.deltaX>P.deltaY?1.1:.9090909090909092,R=M.glplot.getAspectratio();M.glplot.setAspectratio({x:U*R.x,y:U*R.y,z:U*R.z})}O(M)}},!!e&&{passive:!1}),M.glplot.canvas.addEventListener("mousemove",function(){if(M.fullSceneLayout.dragmode!==!1&&M.camera.mouseListener.buttons!==0){var P=S();M.graphDiv.emit("plotly_relayouting",P)}}),M.staticMode||M.glplot.canvas.addEventListener("webglcontextlost",function(P){L&&L.emit&&L.emit("plotly_webglcontextlost",{event:P,layer:M.id})},!1)),M.glplot.oncontextloss=function(){M.recoverContext()},M.glplot.onrender=function(){M.render()},!0},x.render=function(){var M,L=this,E=L.graphDiv,S=L.svgContainer,O=L.container.getBoundingClientRect();E._fullLayout._calcInverseTransform(E);var P=E._fullLayout._invScaleX,U=E._fullLayout._invScaleY,R=O.width*P,j=O.height*U;S.setAttributeNS(null,"viewBox","0 0 "+R+" "+j),S.setAttributeNS(null,"width",R),S.setAttributeNS(null,"height",j),v(L),L.glplot.axes.update(L.axesOptions);for(var B=Object.keys(L.traces),z=null,G=L.glplot.selection,V=0;V<B.length;++V)(M=L.traces[B[V]]).data.hoverinfo!=="skip"&&M.handlePick(G)&&(z=M),M.setContourLevels&&M.setContourLevels();function et(yt,mt,Ot){var vt=L.fullSceneLayout[yt+"axis"];return vt.type!=="log"&&(mt=vt.d2l(mt)),i.hoverLabelText(vt,mt,Ot)}if(z!==null){var J=f(L.glplot.cameraParams,G.dataCoordinate);M=z.data;var X,Y=E._fullData[M.index],Z=G.index,tt={xLabel:et("x",G.traceCoordinate[0],M.xhoverformat),yLabel:et("y",G.traceCoordinate[1],M.yhoverformat),zLabel:et("z",G.traceCoordinate[2],M.zhoverformat)},rt=c.castHoverinfo(Y,L.fullLayout,Z),nt=(rt||"").split("+"),ot=rt&&rt==="all";Y.hovertemplate||ot||(nt.indexOf("x")===-1&&(tt.xLabel=void 0),nt.indexOf("y")===-1&&(tt.yLabel=void 0),nt.indexOf("z")===-1&&(tt.zLabel=void 0),nt.indexOf("text")===-1&&(G.textLabel=void 0),nt.indexOf("name")===-1&&(z.name=void 0));var ct=[];M.type==="cone"||M.type==="streamtube"?(tt.uLabel=et("x",G.traceCoordinate[3],M.uhoverformat),(ot||nt.indexOf("u")!==-1)&&ct.push("u: "+tt.uLabel),tt.vLabel=et("y",G.traceCoordinate[4],M.vhoverformat),(ot||nt.indexOf("v")!==-1)&&ct.push("v: "+tt.vLabel),tt.wLabel=et("z",G.traceCoordinate[5],M.whoverformat),(ot||nt.indexOf("w")!==-1)&&ct.push("w: "+tt.wLabel),tt.normLabel=G.traceCoordinate[6].toPrecision(3),(ot||nt.indexOf("norm")!==-1)&&ct.push("norm: "+tt.normLabel),M.type==="streamtube"&&(tt.divergenceLabel=G.traceCoordinate[7].toPrecision(3),(ot||nt.indexOf("divergence")!==-1)&&ct.push("divergence: "+tt.divergenceLabel)),G.textLabel&&ct.push(G.textLabel),X=ct.join("<br>")):M.type==="isosurface"||M.type==="volume"?(tt.valueLabel=i.hoverLabelText(L._mockAxis,L._mockAxis.d2l(G.traceCoordinate[3]),M.valuehoverformat),ct.push("value: "+tt.valueLabel),G.textLabel&&ct.push(G.textLabel),X=ct.join("<br>")):X=G.textLabel;var pt={x:G.traceCoordinate[0],y:G.traceCoordinate[1],z:G.traceCoordinate[2],data:Y._input,fullData:Y,curveNumber:Y.index,pointNumber:Z};c.appendArrayPointValue(pt,Y,Z),M._module.eventData&&(pt=Y._module.eventData(pt,G,Y,{},Z));var gt={points:[pt]};if(L.fullSceneLayout.hovermode){var kt=[];c.loneHover({trace:Y,x:(.5+.5*J[0]/J[3])*R,y:(.5-.5*J[1]/J[3])*j,xLabel:tt.xLabel,yLabel:tt.yLabel,zLabel:tt.zLabel,text:X,name:z.name,color:c.castHoverOption(Y,Z,"bgcolor")||z.color,borderColor:c.castHoverOption(Y,Z,"bordercolor"),fontFamily:c.castHoverOption(Y,Z,"font.family"),fontSize:c.castHoverOption(Y,Z,"font.size"),fontColor:c.castHoverOption(Y,Z,"font.color"),nameLength:c.castHoverOption(Y,Z,"namelength"),textAlign:c.castHoverOption(Y,Z,"align"),hovertemplate:n.castOption(Y,Z,"hovertemplate"),hovertemplateLabels:n.extendFlat({},pt,tt),eventData:[pt]},{container:S,gd:E,inOut_bbox:kt}),pt.bbox=kt[0]}G.distance<5&&(G.buttons||y)?E.emit("plotly_click",gt):E.emit("plotly_hover",gt),this.oldEventData=gt}else c.loneUnhover(S),this.oldEventData&&E.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;L.drawAnnotations(L)},x.recoverContext=function(){var M=this;M.glplot.dispose();var L=function(){M.glplot.gl.isContextLost()?requestAnimationFrame(L):M.initializeGLPlot()?M.plot.apply(M,M.plotArgs):n.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(L)};var g=["xaxis","yaxis","zaxis"];function A(M,L,E){for(var S=M.fullSceneLayout,O=0;O<3;O++){var P=g[O],U=P.charAt(0),R=S[P],j=L[U],B=L[U+"calendar"],z=L["_"+U+"length"];if(n.isArrayOrTypedArray(j))for(var G,V=0;V<(z||j.length);V++)if(n.isArrayOrTypedArray(j[V]))for(var et=0;et<j[V].length;++et)G=R.d2l(j[V][et],0,B),!isNaN(G)&&isFinite(G)&&(E[0][O]=Math.min(E[0][O],G),E[1][O]=Math.max(E[1][O],G));else G=R.d2l(j[V],0,B),!isNaN(G)&&isFinite(G)&&(E[0][O]=Math.min(E[0][O],G),E[1][O]=Math.max(E[1][O],G));else E[0][O]=Math.min(E[0][O],0),E[1][O]=Math.max(E[1][O],z-1)}}x.plot=function(M,L,E){var S=this;if(S.plotArgs=[M,L,E],!S.glplot.contextLost){var O,P,U,R,j,B,z=L[S.id],G=E[S.id];S.fullLayout=L,S.fullSceneLayout=z,S.axesOptions.merge(L,z),S.spikeOptions.merge(z),S.setViewport(z),S.updateFx(z.dragmode,z.hovermode),S.camera.enableWheel=S.graphDiv._context._scrollZoom.gl3d,S.glplot.setClearColor(l(z.bgcolor)),S.setConvert(j),M?Array.isArray(M)||(M=[M]):M=[];var V=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(U=0;U<M.length;++U)(O=M[U]).visible===!0&&O._length!==0&&A(this,O,V);(function(St,Dt){for(var ut=St.fullSceneLayout,Tt=ut.annotations||[],bt=0;bt<3;bt++)for(var It=g[bt],zt=It.charAt(0),Ft=ut[It],$t=0;$t<Tt.length;$t++){var Wt=Tt[$t];if(Wt.visible){var Xt=Ft.r2l(Wt[zt]);!isNaN(Xt)&&isFinite(Xt)&&(Dt[0][bt]=Math.min(Dt[0][bt],Xt),Dt[1][bt]=Math.max(Dt[1][bt],Xt))}}})(this,V);var et=[1,1,1];for(R=0;R<3;++R)V[1][R]===V[0][R]?et[R]=1:et[R]=1/(V[1][R]-V[0][R]);for(S.dataScale=et,S.convertAnnotations(this),U=0;U<M.length;++U)(O=M[U]).visible===!0&&O._length!==0&&((P=S.traces[O.uid])?P.data.type===O.type?P.update(O):(P.dispose(),P=O._module.plot(this,O),S.traces[O.uid]=P):(P=O._module.plot(this,O),S.traces[O.uid]=P),P.name=O.name);var J=Object.keys(S.traces);t:for(U=0;U<J.length;++U){for(R=0;R<M.length;++R)if(M[R].uid===J[U]&&M[R].visible===!0&&M[R]._length!==0)continue t;(P=S.traces[J[U]]).dispose(),delete S.traces[J[U]]}S.glplot.objects.sort(function(St,Dt){return St._trace.data.index-Dt._trace.data.index});var X,Y=[[0,0,0],[0,0,0]],Z=[],tt={};for(U=0;U<3;++U){var rt;if((B=(j=z[g[U]]).type)in tt?(tt[B].acc*=et[U],tt[B].count+=1):tt[B]={acc:et[U],count:1},j.autorange){Y[0][U]=1/0,Y[1][U]=-1/0;var nt=S.glplot.objects,ot=S.fullSceneLayout.annotations||[],ct=j._name.charAt(0);for(R=0;R<nt.length;R++){var pt=nt[R],gt=pt.bounds,kt=pt._trace.data._pad||0;pt.constructor.name==="ErrorBars"&&j._lowerLogErrorBound?Y[0][U]=Math.min(Y[0][U],j._lowerLogErrorBound):Y[0][U]=Math.min(Y[0][U],gt[0][U]/et[U]-kt),Y[1][U]=Math.max(Y[1][U],gt[1][U]/et[U]+kt)}for(R=0;R<ot.length;R++){var yt=ot[R];if(yt.visible){var mt=j.r2l(yt[ct]);Y[0][U]=Math.min(Y[0][U],mt),Y[1][U]=Math.max(Y[1][U],mt)}}if("rangemode"in j&&j.rangemode==="tozero"&&(Y[0][U]=Math.min(Y[0][U],0),Y[1][U]=Math.max(Y[1][U],0)),Y[0][U]>Y[1][U])Y[0][U]=-1,Y[1][U]=1;else{var Ot=Y[1][U]-Y[0][U];Y[0][U]-=Ot/32,Y[1][U]+=Ot/32}if(rt=[Y[0][U],Y[1][U]],rt=p(rt,j),Y[0][U]=rt[0],Y[1][U]=rt[1],j.isReversed()){var vt=Y[0][U];Y[0][U]=Y[1][U],Y[1][U]=vt}}else rt=j.range,Y[0][U]=j.r2l(rt[0]),Y[1][U]=j.r2l(rt[1]);Y[0][U]===Y[1][U]&&(Y[0][U]-=1,Y[1][U]+=1),Z[U]=Y[1][U]-Y[0][U],j.range=[Y[0][U],Y[1][U]],j.limitRange(),S.glplot.setBounds(U,{min:j.range[0]*et[U],max:j.range[1]*et[U]})}var xt=z.aspectmode;if(xt==="cube")X=[1,1,1];else if(xt==="manual"){var st=z.aspectratio;X=[st.x,st.y,st.z]}else{if(xt!=="auto"&&xt!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var at=[1,1,1];for(U=0;U<3;++U){var ht=tt[B=(j=z[g[U]]).type];at[U]=Math.pow(ht.acc,1/ht.count)/et[U]}X=xt==="data"||Math.max.apply(null,at)/Math.min.apply(null,at)<=4?at:[1,1,1]}z.aspectratio.x=G.aspectratio.x=X[0],z.aspectratio.y=G.aspectratio.y=X[1],z.aspectratio.z=G.aspectratio.z=X[2],S.glplot.setAspectratio(z.aspectratio),S.viewInitial.aspectratio||(S.viewInitial.aspectratio={x:z.aspectratio.x,y:z.aspectratio.y,z:z.aspectratio.z}),S.viewInitial.aspectmode||(S.viewInitial.aspectmode=z.aspectmode);var Lt=z.domain||null,Mt=L._size||null;if(Lt&&Mt){var _t=S.container.style;_t.position="absolute",_t.left=Mt.l+Lt.x[0]*Mt.w+"px",_t.top=Mt.t+(1-Lt.y[1])*Mt.h+"px",_t.width=Mt.w*(Lt.x[1]-Lt.x[0])+"px",_t.height=Mt.h*(Lt.y[1]-Lt.y[0])+"px"}S.glplot.redraw()}},x.destroy=function(){var M=this;M.glplot&&(M.camera.mouseListener.enabled=!1,M.container.removeEventListener("wheel",M.camera.wheelListener),M.camera=null,M.glplot.dispose(),M.container.parentNode.removeChild(M.container),M.glplot=null)},x.getCamera=function(){var M,L=this;return L.camera.view.recalcMatrix(L.camera.view.lastT()),{up:{x:(M=L.camera).up[0],y:M.up[1],z:M.up[2]},center:{x:M.center[0],y:M.center[1],z:M.center[2]},eye:{x:M.eye[0],y:M.eye[1],z:M.eye[2]},projection:{type:M._ortho===!0?"orthographic":"perspective"}}},x.setViewport=function(M){var L,E=this,S=M.camera;E.camera.lookAt.apply(this,[[(L=S).eye.x,L.eye.y,L.eye.z],[L.center.x,L.center.y,L.center.z],[L.up.x,L.up.y,L.up.z]]),E.glplot.setAspectratio(M.aspectratio),S.projection.type==="orthographic"!==E.camera._ortho&&(E.glplot.redraw(),E.glplot.clearRGBA(),E.glplot.dispose(),E.initializeGLPlot())},x.isCameraChanged=function(M){var L=this.getCamera(),E=n.nestedProperty(M,this.id+".camera").get();function S(R,j,B,z){var G=["up","center","eye"],V=["x","y","z"];return j[G[B]]&&R[G[B]][V[z]]===j[G[B]][V[z]]}var O=!1;if(E===void 0)O=!0;else{for(var P=0;P<3;P++)for(var U=0;U<3;U++)if(!S(L,E,P,U)){O=!0;break}(!E.projection||L.projection&&L.projection.type!==E.projection.type)&&(O=!0)}return O},x.isAspectChanged=function(M){var L=this.glplot.getAspectratio(),E=n.nestedProperty(M,this.id+".aspectratio").get();return E===void 0||E.x!==L.x||E.y!==L.y||E.z!==L.z},x.saveLayout=function(M){var L,E,S,O,P,U,R=this,j=R.fullLayout,B=R.isCameraChanged(M),z=R.isAspectChanged(M),G=B||z;if(G){var V={};B&&(L=R.getCamera(),S=(E=n.nestedProperty(M,R.id+".camera")).get(),V[R.id+".camera"]=S),z&&(O=R.glplot.getAspectratio(),U=(P=n.nestedProperty(M,R.id+".aspectratio")).get(),V[R.id+".aspectratio"]=U),t.call("_storeDirectGUIEdit",M,j._preGUI,V),B&&(E.set(L),n.nestedProperty(j,R.id+".camera").set(L)),z&&(P.set(O),n.nestedProperty(j,R.id+".aspectratio").set(O),R.glplot.redraw())}return G},x.updateFx=function(M,L){var E=this,S=E.camera;if(S)if(M==="orbit")S.mode="orbit",S.keyBindingMode="rotate";else if(M==="turntable"){S.up=[0,0,1],S.mode="turntable",S.keyBindingMode="rotate";var O=E.graphDiv,P=O._fullLayout,U=E.fullSceneLayout.camera,R=U.up.x,j=U.up.y,B=U.up.z;if(B/Math.sqrt(R*R+j*j+B*B)<.999){var z=E.id+".camera.up",G={x:0,y:0,z:1},V={};V[z]=G;var et=O.layout;t.call("_storeDirectGUIEdit",et,P._preGUI,V),U.up=G,n.nestedProperty(et,z).set(G)}}else S.keyBindingMode=M;E.fullSceneLayout.hovermode=L},x.toImage=function(M){var L=this;M||(M="png"),L.staticMode&&L.container.appendChild(T),L.glplot.redraw();var E=L.glplot.gl,S=E.drawingBufferWidth,O=E.drawingBufferHeight;E.bindFramebuffer(E.FRAMEBUFFER,null);var P=new Uint8Array(S*O*4);E.readPixels(0,0,S,O,E.RGBA,E.UNSIGNED_BYTE,P),function(z,G,V){for(var et=0,J=V-1;et<J;++et,--J)for(var X=0;X<G;++X)for(var Y=0;Y<4;++Y){var Z=4*(G*et+X)+Y,tt=4*(G*J+X)+Y,rt=z[Z];z[Z]=z[tt],z[tt]=rt}}(P,S,O),function(z,G,V){for(var et=0;et<V;++et)for(var J=0;J<G;++J){var X=4*(G*et+J),Y=z[X+3];if(Y>0)for(var Z=255/Y,tt=0;tt<3;++tt)z[X+tt]=Math.min(Z*z[X+tt],255)}}(P,S,O);var U=document.createElement("canvas");U.width=S,U.height=O;var R,j=U.getContext("2d",{willReadFrequently:!0}),B=j.createImageData(S,O);switch(B.data.set(P),j.putImageData(B,0,0),M){case"jpeg":R=U.toDataURL("image/jpeg");break;case"webp":R=U.toDataURL("image/webp");break;default:R=U.toDataURL("image/png")}return L.staticMode&&L.container.removeChild(T),R},x.setConvert=function(){for(var M=0;M<3;M++){var L=this.fullSceneLayout[g[M]];i.setConvert(L,this.fullLayout),L.setScale=n.noop}},x.make4thDimension=function(){var M=this,L=M.graphDiv._fullLayout;M._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},i.setConvert(M._mockAxis,L)},W.exports=b},90060:function(W){W.exports=function(I,o,T,k){k=k||I.length;for(var r=new Array(k),m=0;m<k;m++)r[m]=[I[m],o[m],T[m]];return r}},10820:function(W,I,o){var T=o(41940),k=o(85594),r=o(22399),m=o(29241),h=o(53777),s=o(35025),e=o(1426).extendFlat,t=T({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=r.defaultLine,W.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:T({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:e(s({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:r.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:r.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:r.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:m.newshape,activeshape:m.activeshape,newselection:h.newselection,activeselection:h.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:e({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:T({editType:"layoutstyle"})}}},77734:function(W,I,o){var T=o(78607),k="1.10.1",r='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',m=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',r].join(" "),h=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),s={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:r,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:m,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:m,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:h,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:h,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},e=T(s);W.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:s,styleValuesNonMapbox:e,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+k+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",e.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},13056:function(W,I,o){var T=o(71828);W.exports=function(k,r){var m=k.split(" "),h=m[0],s=m[1],e=T.isArrayOrTypedArray(r)?T.mean(r):r,t=.5+e/100,n=1.5+e/100,a=["",""],i=[0,0];switch(h){case"top":a[0]="top",i[1]=-n;break;case"bottom":a[0]="bottom",i[1]=n}switch(s){case"left":a[1]="right",i[0]=-t;break;case"right":a[1]="left",i[0]=t}return{anchor:a[0]&&a[1]?a.join("-"):a[0]?a[0]:a[1]?a[1]:"center",offset:i}}},50101:function(W,I,o){var T=o(44517),k=o(71828),r=k.strTranslate,m=k.strScale,h=o(27659).AU,s=o(77922),e=o(39898),t=o(91424),n=o(63893),a=o(10481),i="mapbox",c=I.constants=o(77734);function l(u){return typeof u=="string"&&(c.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0)}I.name=i,I.attr="subplot",I.idRoot=i,I.idRegex=I.attrRegex=k.counterRegex(i),I.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},I.layoutAttributes=o(23585),I.supplyLayoutDefaults=o(77882),I.plot=function(u){var f=u._fullLayout,d=u.calcdata,w=f._subplots[i];if(T.version!==c.requiredVersion)throw new Error(c.wrongVersionErrorMsg);var v=function(g,A){var M=g._fullLayout;if(g._context.mapboxAccessToken==="")return"";for(var L=[],E=[],S=!1,O=!1,P=0;P<A.length;P++){var U=M[A[P]],R=U.accesstoken;l(U.style)&&(R?k.pushUnique(L,R):(l(U._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),S=!0),O=!0)),R&&k.pushUnique(E,R)}if(O){var j=S?c.noAccessTokenErrorMsg:c.missingStyleErrorMsg;throw k.error(j),new Error(j)}return L.length?(L.length>1&&k.warn(c.multipleTokensErrorMsg),L[0]):(E.length&&k.log(["Listed mapbox access token(s)",E.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,w);T.accessToken=v;for(var p=0;p<w.length;p++){var y=w[p],b=h(d,i,y),x=f[y],_=x._subplot;_||(_=new a(u,y),f[y]._subplot=_),_.viewInitial||(_.viewInitial={center:k.extendFlat({},x.center),zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),_.plot(b,f,u._promises)}},I.clean=function(u,f,d,w){for(var v=w._subplots[i]||[],p=0;p<v.length;p++){var y=v[p];!f[y]&&w[y]._subplot&&w[y]._subplot.destroy()}},I.toSVG=function(u){for(var f=u._fullLayout,d=f._subplots[i],w=f._size,v=0;v<d.length;v++){var p=f[d[v]],y=p.domain,b=p._subplot.toImage("png");f._glimages.append("svg:image").attr({xmlns:s.svg,"xlink:href":b,x:w.l+w.w*y.x[0],y:w.t+w.h*(1-y.y[1]),width:w.w*(y.x[1]-y.x[0]),height:w.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var x=e.select(p._subplot.div);if(x.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var _=f._glimages.append("g");_.attr("transform",r(w.l+w.w*y.x[0]+10,w.t+w.h*(1-y.y[0])-31)),_.append("path").attr("d",c.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",c.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",c.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",c.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var g=x.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),A=f._glimages.append("g"),M=A.append("text");M.text(g).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":g});var L=t.bBox(M.node()),E=w.w*(y.x[1]-y.x[0]);if(L.width>E/2){var S=g.split("|").join("<br>");M.text(S).attr("data-unformatted",S).call(n.convertToTspans,u),L=t.bBox(M.node())}M.attr("transform",r(-3,8-L.height)),A.insert("rect",".static-attribution").attr({x:-L.width-6,y:-L.height-3,width:L.width+6,height:L.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;L.width+6>E&&(O=E/(L.width+6));var P=[w.l+w.w*y.x[1],w.t+w.h*(1-y.y[0])];A.attr("transform",r(P[0],P[1])+m(O))}},I.updateFx=function(u){for(var f=u._fullLayout,d=f._subplots[i],w=0;w<d.length;w++)f[d[w]]._subplot.updateFx(f)}},67911:function(W,I,o){var T=o(71828),k=o(63893).sanitizeHTML,r=o(13056),m=o(77734);function h(n,a){this.subplot=n,this.uid=n.uid+"-"+a,this.index=a,this.idSource="source-"+this.uid,this.idLayer=m.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var s=h.prototype;function e(n){if(!n.visible)return!1;var a=n.source;if(Array.isArray(a)&&a.length>0){for(var i=0;i<a.length;i++)if(typeof a[i]!="string"||a[i].length===0)return!1;return!0}return T.isPlainObject(a)||typeof a=="string"&&a.length>0}function t(n){var a={},i={};switch(n.type){case"circle":T.extendFlat(i,{"circle-radius":n.circle.radius,"circle-color":n.color,"circle-opacity":n.opacity});break;case"line":T.extendFlat(i,{"line-width":n.line.width,"line-color":n.color,"line-opacity":n.opacity,"line-dasharray":n.line.dash});break;case"fill":T.extendFlat(i,{"fill-color":n.color,"fill-outline-color":n.fill.outlinecolor,"fill-opacity":n.opacity});break;case"symbol":var c=n.symbol,l=r(c.textposition,c.iconsize);T.extendFlat(a,{"icon-image":c.icon+"-15","icon-size":c.iconsize/10,"text-field":c.text,"text-size":c.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":c.placement}),T.extendFlat(i,{"icon-color":n.color,"text-color":c.textfont.color,"text-opacity":n.opacity});break;case"raster":T.extendFlat(i,{"raster-fade-duration":0,"raster-opacity":n.opacity})}return{layout:a,paint:i}}s.update=function(n){this.visible?this.needsNewImage(n)?this.updateImage(n):this.needsNewSource(n)?(this.removeLayer(),this.updateSource(n),this.updateLayer(n)):this.needsNewLayer(n)?this.updateLayer(n):this.updateStyle(n):(this.updateSource(n),this.updateLayer(n)),this.visible=e(n)},s.needsNewImage=function(n){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&n.sourcetype==="image"&&(this.source!==n.source||JSON.stringify(this.coordinates)!==JSON.stringify(n.coordinates))},s.needsNewSource=function(n){return this.sourceType!==n.sourcetype||JSON.stringify(this.source)!==JSON.stringify(n.source)||this.layerType!==n.type},s.needsNewLayer=function(n){return this.layerType!==n.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},s.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},s.updateImage=function(n){this.subplot.map.getSource(this.idSource).updateImage({url:n.source,coordinates:n.coordinates});var a=this.findFollowingMapboxLayerId(this.lookupBelow());a!==null&&this.subplot.map.moveLayer(this.idLayer,a)},s.updateSource=function(n){var a=this.subplot.map;if(a.getSource(this.idSource)&&a.removeSource(this.idSource),this.sourceType=n.sourcetype,this.source=n.source,e(n)){var i=function(c){var l,u=c.sourcetype,f=c.source,d={type:u};return u==="geojson"?l="data":u==="vector"?l=typeof f=="string"?"url":"tiles":u==="raster"?(l="tiles",d.tileSize=256):u==="image"&&(l="url",d.coordinates=c.coordinates),d[l]=f,c.sourceattribution&&(d.attribution=k(c.sourceattribution)),d}(n);a.addSource(this.idSource,i)}},s.findFollowingMapboxLayerId=function(n){if(n==="traces")for(var a=this.subplot.getMapLayers(),i=0;i<a.length;i++){var c=a[i].id;if(typeof c=="string"&&c.indexOf(m.traceLayerPrefix)===0){n=c;break}}return n},s.updateLayer=function(n){var a=this.subplot,i=t(n),c=this.lookupBelow(),l=this.findFollowingMapboxLayerId(c);this.removeLayer(),e(n)&&a.addLayer({id:this.idLayer,source:this.idSource,"source-layer":n.sourcelayer||"",type:n.type,minzoom:n.minzoom,maxzoom:n.maxzoom,layout:i.layout,paint:i.paint},l),this.layerType=n.type,this.below=c},s.updateStyle=function(n){if(e(n)){var a=t(n);this.subplot.setOptions(this.idLayer,"setLayoutProperty",a.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",a.paint)}},s.removeLayer=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer)},s.dispose=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer),n.getSource(this.idSource)&&n.removeSource(this.idSource)},W.exports=function(n,a,i){var c=new h(n,a);return c.update(i),c}},23585:function(W,I,o){var T=o(71828),k=o(7901).defaultLine,r=o(27670).Y,m=o(41940),h=o(82196).textposition,s=o(30962).overrideAll,e=o(44467).templatedArray,t=o(77734),n=m({});n.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(W.exports=s({_arrayAttrRegexps:[T.counterRegex("mapbox",".layers",!0)],domain:r({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:e("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:n,textposition:T.extendFlat({},h,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(W,I,o){var T=o(71828),k=o(49119),r=o(85501),m=o(23585);function h(e,t,n,a){n("accesstoken",a.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch");var i=n("bounds.west"),c=n("bounds.east"),l=n("bounds.south"),u=n("bounds.north");i!==void 0&&c!==void 0&&l!==void 0&&u!==void 0||delete t.bounds,r(e,t,{name:"layers",handleItemDefaults:s}),t._input=e}function s(e,t){function n(u,f){return T.coerce(e,t,m.layers,u,f)}if(n("visible")){var a,i=n("sourcetype"),c=i==="raster"||i==="image";n("source"),n("sourceattribution"),i==="vector"&&n("sourcelayer"),i==="image"&&n("coordinates"),c&&(a="raster");var l=n("type",a);c&&l!=="raster"&&(l=t.type="raster",T.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),l==="circle"&&n("circle.radius"),l==="line"&&(n("line.width"),n("line.dash")),l==="fill"&&n("fill.outlinecolor"),l==="symbol"&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),T.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}W.exports=function(e,t,n){k(e,t,n,{type:"mapbox",attributes:m,handleDefaults:h,partition:"y",accessToken:t._mapboxAccessToken})}},10481:function(W,I,o){var T=o(44517),k=o(71828),r=o(41327),m=o(73972),h=o(89298),s=o(28569),e=o(30211),t=o(64505),n=t.drawMode,a=t.selectMode,i=o(47322).prepSelect,c=o(47322).clearOutline,l=o(47322).clearSelectionsCache,u=o(47322).selectOnClick,f=o(77734),d=o(67911);function w(_,g){this.id=g,this.gd=_;var A=_._fullLayout,M=_._context;this.container=A._glcontainer.node(),this.isStatic=M.staticPlot,this.uid=A._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(A),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var v=w.prototype;v.plot=function(_,g,A){var M,L=this,E=g[L.id];L.map&&E.accesstoken!==L.accessToken&&(L.map.remove(),L.map=null,L.styleObj=null,L.traceHash={},L.layerList=[]),M=L.map?new Promise(function(S,O){L.updateMap(_,g,S,O)}):new Promise(function(S,O){L.createMap(_,g,S,O)}),A.push(M)},v.createMap=function(_,g,A,M){var L=this,E=g[L.id],S=L.styleObj=y(E.style);L.accessToken=E.accesstoken;var O=E.bounds,P=O?[[O.west,O.south],[O.east,O.north]]:null,U=L.map=new T.Map({container:L.div,style:S.style,center:x(E.center),zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,maxBounds:P,interactive:!L.isStatic,preserveDrawingBuffer:L.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new T.AttributionControl({compact:!0}));U._canvas.style.left="0px",U._canvas.style.top="0px",L.rejectOnError(M),L.isStatic||L.initFx(_,g);var R=[];R.push(new Promise(function(j){U.once("load",j)})),R=R.concat(r.fetchTraceGeoData(_)),Promise.all(R).then(function(){L.fillBelowLookup(_,g),L.updateData(_),L.updateLayout(g),L.resolveOnRender(A)}).catch(M)},v.updateMap=function(_,g,A,M){var L=this,E=L.map,S=g[this.id];L.rejectOnError(M);var O=[],P=y(S.style);JSON.stringify(L.styleObj)!==JSON.stringify(P)&&(L.styleObj=P,E.setStyle(P.style),L.traceHash={},O.push(new Promise(function(U){E.once("styledata",U)}))),O=O.concat(r.fetchTraceGeoData(_)),Promise.all(O).then(function(){L.fillBelowLookup(_,g),L.updateData(_),L.updateLayout(g),L.resolveOnRender(A)}).catch(M)},v.fillBelowLookup=function(_,g){var A,M,L=g[this.id].layers,E=this.belowLookup={},S=!1;for(A=0;A<_.length;A++){var O=_[A][0].trace,P=O._module;typeof O.below=="string"?M=O.below:P.getBelow&&(M=P.getBelow(O,this)),M===""&&(S=!0),E["trace-"+O.uid]=M||""}for(A=0;A<L.length;A++){var U=L[A];M=typeof U.below=="string"?U.below:S?"traces":"",E["layout-"+A]=M}var R,j,B={};for(R in E)B[M=E[R]]?B[M].push(R):B[M]=[R];for(M in B){var z=B[M];if(z.length>1)for(A=0;A<z.length;A++)(R=z[A]).indexOf("trace-")===0?(j=R.split("trace-")[1],this.traceHash[j]&&(this.traceHash[j].below=null)):R.indexOf("layout-")===0&&(j=R.split("layout-")[1],this.layerList[j]&&(this.layerList[j].below=null))}};var p={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function y(_){var g={};return k.isPlainObject(_)?(g.id=_.id,g.style=_):typeof _=="string"?(g.id=_,f.styleValuesMapbox.indexOf(_)!==-1?g.style=b(_):f.stylesNonMapbox[_]?g.style=f.stylesNonMapbox[_]:g.style=_):(g.id=f.styleValueDflt,g.style=b(f.styleValueDflt)),g.transition={duration:0,delay:0},g}function b(_){return f.styleUrlPrefix+_+"-"+f.styleUrlSuffix}function x(_){return[_.lon,_.lat]}v.updateData=function(_){var g,A,M,L,E=this.traceHash,S=_.slice().sort(function(j,B){return p[j[0].trace.type]-p[B[0].trace.type]});for(M=0;M<S.length;M++){var O=S[M],P=!1;(g=E[(A=O[0].trace).uid])&&(g.type===A.type?(g.update(O),P=!0):g.dispose()),!P&&A._module&&(E[A.uid]=A._module.plot(this,O))}var U=Object.keys(E);t:for(M=0;M<U.length;M++){var R=U[M];for(L=0;L<_.length;L++)if(R===(A=_[L][0].trace).uid)continue t;(g=E[R]).dispose(),delete E[R]}},v.updateLayout=function(_){var g=this.map,A=_[this.id];this.dragging||this.wheeling||(g.setCenter(x(A.center)),g.setZoom(A.zoom),g.setBearing(A.bearing),g.setPitch(A.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?g.scrollZoom.enable():g.scrollZoom.disable()},v.resolveOnRender=function(_){var g=this.map;g.on("render",function A(){g.loaded()&&(g.off("render",A),setTimeout(_,10))})},v.rejectOnError=function(_){var g=this.map;function A(){_(new Error(f.mapOnErrorMsg))}g.once("error",A),g.once("style.error",A),g.once("source.error",A),g.once("tile.error",A),g.once("layer.error",A)},v.createFramework=function(_){var g=this,A=g.div=document.createElement("div");A.id=g.uid,A.style.position="absolute",g.container.appendChild(A),g.xaxis={_id:"x",c2p:function(M){return g.project(M).x}},g.yaxis={_id:"y",c2p:function(M){return g.project(M).y}},g.updateFramework(_),g.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},h.setConvert(g.mockAxis,_)},v.initFx=function(_,g){var A=this,M=A.gd,L=A.map;function E(){e.loneUnhover(g._hoverlayer)}function S(){var O=A.getView();M.emit("plotly_relayouting",A.getViewEditsWithDerived(O))}L.on("moveend",function(O){if(A.map){var P=M._fullLayout;if(O.originalEvent||A.wheeling){var U=P[A.id];m.call("_storeDirectGUIEdit",M.layout,P._preGUI,A.getViewEdits(U));var R=A.getView();U._input.center=U.center=R.center,U._input.zoom=U.zoom=R.zoom,U._input.bearing=U.bearing=R.bearing,U._input.pitch=U.pitch=R.pitch,M.emit("plotly_relayout",A.getViewEditsWithDerived(R))}O.originalEvent&&O.originalEvent.type==="mouseup"?A.dragging=!1:A.wheeling&&(A.wheeling=!1),P._rehover&&P._rehover()}}),L.on("wheel",function(){A.wheeling=!0}),L.on("mousemove",function(O){var P=A.div.getBoundingClientRect(),U=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return P},A.xaxis.p2c=function(){return L.unproject(U).lng},A.yaxis.p2c=function(){return L.unproject(U).lat},M._fullLayout._rehover=function(){M._fullLayout._hoversubplot===A.id&&M._fullLayout[A.id]&&e.hover(M,O,A.id)},e.hover(M,O,A.id),M._fullLayout._hoversubplot=A.id}),L.on("dragstart",function(){A.dragging=!0,E()}),L.on("zoomstart",E),L.on("mouseout",function(){M._fullLayout._hoversubplot=null}),L.on("drag",S),L.on("zoom",S),L.on("dblclick",function(){var O=M._fullLayout[A.id];m.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,A.getViewEdits(O));var P=A.viewInitial;L.setCenter(x(P.center)),L.setZoom(P.zoom),L.setBearing(P.bearing),L.setPitch(P.pitch);var U=A.getView();O._input.center=O.center=U.center,O._input.zoom=O.zoom=U.zoom,O._input.bearing=O.bearing=U.bearing,O._input.pitch=O.pitch=U.pitch,M.emit("plotly_doubleclick",null),M.emit("plotly_relayout",A.getViewEditsWithDerived(U))}),A.clearOutline=function(){l(A.dragOptions),c(A.dragOptions.gd)},A.onClickInPanFn=function(O){return function(P){var U=M._fullLayout.clickmode;U.indexOf("select")>-1&&u(P.originalEvent,M,[A.xaxis],[A.yaxis],A.id,O),U.indexOf("event")>-1&&e.click(M,P.originalEvent)}}},v.updateFx=function(_){var g=this,A=g.map,M=g.gd;if(!g.isStatic){var L,E=_.dragmode;L=function(P,U){U.isRect?(P.range={})[g.id]=[O([U.xmin,U.ymin]),O([U.xmax,U.ymax])]:(P.lassoPoints={})[g.id]=U.map(O)};var S=g.dragOptions;g.dragOptions=k.extendDeep(S||{},{dragmode:_.dragmode,element:g.div,gd:M,plotinfo:{id:g.id,domain:_[g.id].domain,xaxis:g.xaxis,yaxis:g.yaxis,fillRangeItems:L},xaxes:[g.xaxis],yaxes:[g.yaxis],subplot:g.id}),A.off("click",g.onClickInPanHandler),a(E)||n(E)?(A.dragPan.disable(),A.on("zoomstart",g.clearOutline),g.dragOptions.prepFn=function(P,U,R){i(P,U,R,g.dragOptions,E)},s.init(g.dragOptions)):(A.dragPan.enable(),A.off("zoomstart",g.clearOutline),g.div.onmousedown=null,g.div.ontouchstart=null,g.div.removeEventListener("touchstart",g.div._ontouchstart),g.onClickInPanHandler=g.onClickInPanFn(g.dragOptions),A.on("click",g.onClickInPanHandler))}function O(P){var U=g.map.unproject(P);return[U.lng,U.lat]}},v.updateFramework=function(_){var g=_[this.id].domain,A=_._size,M=this.div.style;M.width=A.w*(g.x[1]-g.x[0])+"px",M.height=A.h*(g.y[1]-g.y[0])+"px",M.left=A.l+g.x[0]*A.w+"px",M.top=A.t+(1-g.y[1])*A.h+"px",this.xaxis._offset=A.l+g.x[0]*A.w,this.xaxis._length=A.w*(g.x[1]-g.x[0]),this.yaxis._offset=A.t+(1-g.y[1])*A.h,this.yaxis._length=A.h*(g.y[1]-g.y[0])},v.updateLayers=function(_){var g,A=_[this.id].layers,M=this.layerList;if(A.length!==M.length){for(g=0;g<M.length;g++)M[g].dispose();for(M=this.layerList=[],g=0;g<A.length;g++)M.push(d(this,g,A[g]))}else for(g=0;g<A.length;g++)M[g].update(A[g])},v.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},v.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},v.setOptions=function(_,g,A){for(var M in A)this.map[g](_,M,A[M])},v.getMapLayers=function(){return this.map.getStyle().layers},v.addLayer=function(_,g){var A=this.map;if(typeof g=="string"){if(g==="")return void A.addLayer(_,g);for(var M=this.getMapLayers(),L=0;L<M.length;L++)if(g===M[L].id)return void A.addLayer(_,g);k.warn(["Trying to add layer with *below* value",g,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}A.addLayer(_)},v.project=function(_){return this.map.project(new T.LngLat(_[0],_[1]))},v.getView=function(){var _=this.map,g=_.getCenter(),A={lon:g.lng,lat:g.lat},M=_.getCanvas(),L=parseInt(M.style.width),E=parseInt(M.style.height);return{center:A,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([L,0]).toArray(),_.unproject([L,E]).toArray(),_.unproject([0,E]).toArray()]}}},v.getViewEdits=function(_){for(var g=this.id,A=["center","zoom","bearing","pitch"],M={},L=0;L<A.length;L++){var E=A[L];M[g+"."+E]=_[E]}return M},v.getViewEditsWithDerived=function(_){var g=this.id,A=this.getViewEdits(_);return A[g+"._derived"]=_._derived,A},W.exports=w},35025:function(W){W.exports=function(I){var o=I.editType;return{t:{valType:"number",dflt:0,editType:o},r:{valType:"number",dflt:0,editType:o},b:{valType:"number",dflt:0,editType:o},l:{valType:"number",dflt:0,editType:o},editType:o}}},74875:function(W,I,o){var T=o(39898),k=o(84096).Dq,r=o(60721).FF,m=o(92770),h=o(73972),s=o(86281),e=o(44467),t=o(71828),n=o(7901),a=o(50606).BADNUM,i=o(41675),c=o(51873).clearOutline,l=o(21479),u=o(85594),f=o(31391),d=o(27659).a0,w=t.relinkPrivateKeys,v=t._,p=W.exports={};t.extendFlat(p,h),p.attributes=o(9012),p.attributes.type.values=p.allTypes,p.fontAttrs=o(41940),p.layoutAttributes=o(10820),p.fontWeight="normal";var y=p.transformsRegistry,b=o(31137);p.executeAPICommand=b.executeAPICommand,p.computeAPICommandBindings=b.computeAPICommandBindings,p.manageCommandObserver=b.manageCommandObserver,p.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings,p.redrawText=function(B){return B=t.getGraphDiv(B),new Promise(function(z){setTimeout(function(){B._fullLayout&&(h.getComponentMethod("annotations","draw")(B),h.getComponentMethod("legend","draw")(B),h.getComponentMethod("colorbar","draw")(B),z(p.previousPromises(B)))},300)})},p.resize=function(B){var z;B=t.getGraphDiv(B);var G=new Promise(function(V,et){B&&!t.isHidden(B)||et(new Error("Resize must be passed a displayed plot div element.")),B._redrawTimer&&clearTimeout(B._redrawTimer),B._resolveResize&&(z=B._resolveResize),B._resolveResize=V,B._redrawTimer=setTimeout(function(){if(!B.layout||B.layout.width&&B.layout.height||t.isHidden(B))V(B);else{delete B.layout.width,delete B.layout.height;var J=B.changed;B.autoplay=!0,h.call("relayout",B,{autosize:!0}).then(function(){B.changed=J,B._resolveResize===V&&(delete B._resolveResize,V(B))})}},100)});return z&&z(G),G},p.previousPromises=function(B){if((B._promises||[]).length)return Promise.all(B._promises).then(function(){B._promises=[]})},p.addLinks=function(B){if(B._context.showLink||B._context.showSources){var z=B._fullLayout,G=t.ensureSingle(z._paper,"text","js-plot-link-container",function(Z){Z.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var tt=T.select(this);tt.append("tspan").classed("js-link-to-tool",!0),tt.append("tspan").classed("js-link-spacer",!0),tt.append("tspan").classed("js-sourcelinks",!0)})}),V=G.node(),et={y:z._paper.attr("height")-9};document.body.contains(V)&&V.getComputedTextLength()>=z.width-20?(et["text-anchor"]="start",et.x=5):(et["text-anchor"]="end",et.x=z._paper.attr("width")-7),G.attr(et);var J=G.select(".js-link-to-tool"),X=G.select(".js-link-spacer"),Y=G.select(".js-sourcelinks");B._context.showSources&&B._context.showSources(B),B._context.showLink&&function(Z,tt){tt.text("");var rt=tt.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Z._context.linkText+" "+String.fromCharCode(187));if(Z._context.sendData)rt.on("click",function(){p.sendDataToCloud(Z)});else{var nt=window.location.pathname.split("/"),ot=window.location.search;rt.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+nt[2].split(".")[0]+"/"+nt[1]+ot})}}(B,J),X.text(J.text()&&Y.text()?" - ":"")}},p.sendDataToCloud=function(B){var z=(window.PLOTLYENV||{}).BASE_URL||B._context.plotlyServerURL;if(z){B.emit("plotly_beforeexport");var G=T.select(B).append("div").attr("id","hiddenform").style("display","none"),V=G.append("form").attr({action:z+"/external",method:"post",target:"_blank"});return V.append("input").attr({type:"text",name:"data"}).node().value=p.graphJson(B,!1,"keepdata"),V.node().submit(),G.remove(),B.emit("plotly_afterexport"),!1}};var x=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function g(B,z){var G=B._context.locale;G||(G="en-US");var V=!1,et={};function J(nt){for(var ot=!0,ct=0;ct<z.length;ct++){var pt=z[ct];et[pt]||(nt[pt]?et[pt]=nt[pt]:ot=!1)}ot&&(V=!0)}for(var X=0;X<2;X++){for(var Y=B._context.locales,Z=0;Z<2;Z++){var tt=(Y[G]||{}).format;if(tt&&(J(tt),V))break;Y=h.localeRegistry}var rt=G.split("-")[0];if(V||rt===G)break;G=rt}return V||J(h.localeRegistry.en.format),et}function A(B,z){var G={_fullLayout:z},V=B._id.charAt(0)==="x",et=B._mainAxis._anchorAxis,J="",X="",Y="";if(et&&(Y=et._mainAxis._id,J=V?B._id+Y:Y+B._id),!J||!z._plots[J]){J="";for(var Z=B._counterAxes,tt=0;tt<Z.length;tt++){var rt=Z[tt],nt=V?B._id+rt:rt+B._id;X||(X=nt);var ot=i.getFromId(G,rt);if(Y&&ot.overlaying===Y){J=nt;break}}}return J||X}function M(B){var z=B.transforms;if(Array.isArray(z)&&z.length)for(var G=0;G<z.length;G++){var V=z[G],et=V._module||y[V.type];if(et&&et.makesData)return!0}return!1}function L(B,z,G,V){for(var et=B.transforms,J=[B],X=0;X<et.length;X++){var Y=et[X],Z=y[Y.type];Z&&Z.transform&&(J=Z.transform(J,{transform:Y,fullTrace:B,fullData:z,layout:G,fullLayout:V,transformIndex:X}))}return J}function E(B){return typeof B=="string"&&B.substr(B.length-2)==="px"&&parseFloat(B)}function S(B){var z=B.margin;if(!B._size){var G=B._size={l:Math.round(z.l),r:Math.round(z.r),t:Math.round(z.t),b:Math.round(z.b),p:Math.round(z.pad)};G.w=Math.round(B.width)-G.l-G.r,G.h=Math.round(B.height)-G.t-G.b}B._pushmargin||(B._pushmargin={}),B._pushmarginIds||(B._pushmarginIds={}),B._reservedMargin||(B._reservedMargin={})}p.supplyDefaults=function(B,z){var G=z&&z.skipUpdateCalc,V=B._fullLayout||{};if(V._skipDefaults)delete V._skipDefaults;else{var et,J=B._fullLayout={},X=B.layout||{},Y=B._fullData||[],Z=B._fullData=[],tt=B.data||[],rt=B.calcdata||[],nt=B._context||{};B._transitionData||p.createTransitionData(B),J._dfltTitle={plot:v(B,"Click to enter Plot title"),x:v(B,"Click to enter X axis title"),y:v(B,"Click to enter Y axis title"),colorbar:v(B,"Click to enter Colorscale title"),annotation:v(B,"new text")},J._traceWord=v(B,"trace");var ot=g(B,x);if(J._mapboxAccessToken=nt.mapboxAccessToken,V._initialAutoSizeIsDone){var ct=V.width,pt=V.height;p.supplyLayoutGlobalDefaults(X,J,ot),X.width||(J.width=ct),X.height||(J.height=pt),p.sanitizeMargins(J)}else{p.supplyLayoutGlobalDefaults(X,J,ot);var gt=!X.width||!X.height,kt=J.autosize,yt=nt.autosizable;gt&&(kt||yt)?p.plotAutoSize(B,X,J):gt&&p.sanitizeMargins(J),!kt&&gt&&(X.width=J.width,X.height=J.height)}J._d3locale=function(zt,Ft){return zt.decimal=Ft.charAt(0),zt.thousands=Ft.charAt(1),{numberFormat:function($t){try{$t=r(zt).format(t.adjustFormat($t))}catch{return t.warnBadFormat($t),t.noFormat}return $t},timeFormat:k(zt).utcFormat}}(ot,J.separators),J._extraFormat=g(B,_),J._initialAutoSizeIsDone=!0,J._dataLength=tt.length,J._modules=[],J._visibleModules=[],J._basePlotModules=[];var mt=J._subplots=function(){var zt,Ft,$t=h.collectableSubplotTypes,Wt={};if(!$t){$t=[];var Xt=h.subplotsRegistry;for(var ae in Xt){var Qt=Xt[ae].attr;if(Qt&&($t.push(ae),Array.isArray(Qt)))for(Ft=0;Ft<Qt.length;Ft++)t.pushUnique($t,Qt[Ft])}}for(zt=0;zt<$t.length;zt++)Wt[$t[zt]]=[];return Wt}(),Ot=J._splomAxes={x:{},y:{}},vt=J._splomSubplots={};J._splomGridDflt={},J._scatterStackOpts={},J._firstScatter={},J._alignmentOpts={},J._colorAxes={},J._requestRangeslider={},J._traceUids=function(zt,Ft){var $t,Wt,Xt=Ft.length,ae=[];for($t=0;$t<zt.length;$t++){var Qt=zt[$t]._fullInput;Qt!==Wt&&ae.push(Qt),Wt=Qt}var de=ae.length,ye=new Array(Xt),ve={};function ie(Ae,Ie){ye[Ie]=Ae,ve[Ae]=1}function se(Ae,Ie){if(Ae&&typeof Ae=="string"&&!ve[Ae])return ie(Ae,Ie),!0}for($t=0;$t<Xt;$t++){var ke=Ft[$t].uid;typeof ke=="number"&&(ke=String(ke)),se(ke,$t)||$t<de&&se(ae[$t].uid,$t)||ie(t.randstr(ve),$t)}return ye}(Y,tt),J._globalTransforms=(B._context||{}).globalTransforms,p.supplyDataDefaults(tt,Z,X,J);var xt=Object.keys(Ot.x),st=Object.keys(Ot.y);if(xt.length>1&&st.length>1){for(h.getComponentMethod("grid","sizeDefaults")(X,J),et=0;et<xt.length;et++)t.pushUnique(mt.xaxis,xt[et]);for(et=0;et<st.length;et++)t.pushUnique(mt.yaxis,st[et]);for(var at in vt)t.pushUnique(mt.cartesian,at)}if(J._has=p._hasPlotType.bind(J),Y.length===Z.length)for(et=0;et<Z.length;et++)w(Z[et],Y[et]);p.supplyLayoutModuleDefaults(X,J,Z,B._transitionData);var ht=J._visibleModules,Lt=[];for(et=0;et<ht.length;et++){var Mt=ht[et].crossTraceDefaults;Mt&&t.pushUnique(Lt,Mt)}for(et=0;et<Lt.length;et++)Lt[et](Z,J);J._hasOnlyLargeSploms=J._basePlotModules.length===1&&J._basePlotModules[0].name==="splom"&&xt.length>15&&st.length>15&&J.shapes.length===0&&J.images.length===0,p.linkSubplots(Z,J,Y,V),p.cleanPlot(Z,J,Y,V);var _t=!(!V._has||!V._has("gl2d")),St=!(!J._has||!J._has("gl2d")),Dt=!(!V._has||!V._has("cartesian"))||_t,ut=!(!J._has||!J._has("cartesian"))||St;Dt&&!ut?V._bgLayer.remove():ut&&!Dt&&(J._shouldCreateBgLayer=!0),V._zoomlayer&&!B._dragging&&c({_fullLayout:V}),function(zt,Ft){var $t,Wt=[];Ft.meta&&($t=Ft._meta={meta:Ft.meta,layout:{meta:Ft.meta}});for(var Xt=0;Xt<zt.length;Xt++){var ae=zt[Xt];ae.meta?Wt[ae.index]=ae._meta={meta:ae.meta}:Ft.meta&&(ae._meta={meta:Ft.meta}),Ft.meta&&(ae._meta.layout={meta:Ft.meta})}Wt.length&&($t||($t=Ft._meta={}),$t.data=Wt)}(Z,J),w(J,V),h.getComponentMethod("colorscale","crossTraceDefaults")(Z,J),J._preGUI||(J._preGUI={}),J._tracePreGUI||(J._tracePreGUI={});var Tt,bt=J._tracePreGUI,It={};for(Tt in bt)It[Tt]="old";for(et=0;et<Z.length;et++)It[Tt=Z[et]._fullInput.uid]||(bt[Tt]={}),It[Tt]="new";for(Tt in It)It[Tt]==="old"&&delete bt[Tt];S(J),h.getComponentMethod("rangeslider","makeData")(J),G||rt.length!==Z.length||p.supplyDefaultsUpdateCalc(rt,Z)}},p.supplyDefaultsUpdateCalc=function(B,z){for(var G=0;G<z.length;G++){var V=z[G],et=(B[G]||[])[0];if(et&&et.trace){var J=et.trace;if(J._hasCalcTransform){var X,Y,Z,tt=J._arrayAttrs;for(X=0;X<tt.length;X++)Y=tt[X],Z=t.nestedProperty(J,Y).get().slice(),t.nestedProperty(V,Y).set(Z)}et.trace=V}}},p.createTransitionData=function(B){B._transitionData||(B._transitionData={}),B._transitionData._frames||(B._transitionData._frames=[]),B._transitionData._frameHash||(B._transitionData._frameHash={}),B._transitionData._counter||(B._transitionData._counter=0),B._transitionData._interruptCallbacks||(B._transitionData._interruptCallbacks=[])},p._hasPlotType=function(B){var z,G=this._basePlotModules||[];for(z=0;z<G.length;z++)if(G[z].name===B)return!0;var V=this._modules||[];for(z=0;z<V.length;z++){var et=V[z].name;if(et===B)return!0;var J=h.modules[et];if(J&&J.categories[B])return!0}return!1},p.cleanPlot=function(B,z,G,V){var et,J,X=V._basePlotModules||[];for(et=0;et<X.length;et++){var Y=X[et];Y.clean&&Y.clean(B,z,G,V)}var Z=V._has&&V._has("gl"),tt=z._has&&z._has("gl");Z&&!tt&&V._glcontainer!==void 0&&(V._glcontainer.selectAll(".gl-canvas").remove(),V._glcontainer.selectAll(".no-webgl").remove(),V._glcanvas=null);var rt=!!V._infolayer;t:for(et=0;et<G.length;et++){var nt=G[et].uid;for(J=0;J<B.length;J++)if(nt===B[J].uid)continue t;rt&&V._infolayer.select(".cb"+nt).remove()}},p.linkSubplots=function(B,z,G,V){var et,J,X=V._plots||{},Y=z._plots={},Z=z._subplots,tt={_fullData:B,_fullLayout:z},rt=Z.cartesian.concat(Z.gl2d||[]);for(et=0;et<rt.length;et++){var nt,ot=rt[et],ct=X[ot],pt=i.getFromId(tt,ot,"x"),gt=i.getFromId(tt,ot,"y");for(ct?nt=Y[ot]=ct:(nt=Y[ot]={}).id=ot,pt._counterAxes.push(gt._id),gt._counterAxes.push(pt._id),pt._subplotsWith.push(ot),gt._subplotsWith.push(ot),nt.xaxis=pt,nt.yaxis=gt,nt._hasClipOnAxisFalse=!1,J=0;J<B.length;J++){var kt=B[J];if(kt.xaxis===nt.xaxis._id&&kt.yaxis===nt.yaxis._id&&kt.cliponaxis===!1){nt._hasClipOnAxisFalse=!0;break}}}var yt,mt=i.list(tt,null,!0);for(et=0;et<mt.length;et++){var Ot=null;(yt=mt[et]).overlaying&&(Ot=i.getFromId(tt,yt.overlaying))&&Ot.overlaying&&(yt.overlaying=!1,Ot=null),yt._mainAxis=Ot||yt,Ot&&(yt.domain=Ot.domain.slice()),yt._anchorAxis=yt.anchor==="free"?null:i.getFromId(tt,yt.anchor)}for(et=0;et<mt.length;et++)if((yt=mt[et])._counterAxes.sort(i.idSort),yt._subplotsWith.sort(t.subplotSort),yt._mainSubplot=A(yt,z),yt._counterAxes.length&&(yt.spikemode&&yt.spikemode.indexOf("across")!==-1||yt.automargin&&yt.mirror&&yt.anchor!=="free"||h.getComponentMethod("rangeslider","isVisible")(yt))){var vt=1,xt=0;for(J=0;J<yt._counterAxes.length;J++){var st=i.getFromId(tt,yt._counterAxes[J]);vt=Math.min(vt,st.domain[0]),xt=Math.max(xt,st.domain[1])}vt<xt&&(yt._counterDomainMin=vt,yt._counterDomainMax=xt)}},p.clearExpandedTraceDefaultColors=function(B){var z,G,V;for(G=[],(z=B._module._colorAttrs)||(B._module._colorAttrs=z=[],s.crawl(B._module.attributes,function(et,J,X,Y){G[Y]=J,G.length=Y+1,et.valType==="color"&&et.dflt===void 0&&z.push(G.join("."))})),V=0;V<z.length;V++)t.nestedProperty(B,"_input."+z[V]).get()||t.nestedProperty(B,z[V]).set(null)},p.supplyDataDefaults=function(B,z,G,V){var et,J,X,Y=V._modules,Z=V._visibleModules,tt=V._basePlotModules,rt=0,nt=0;function ot(at){z.push(at);var ht=at._module;ht&&(t.pushUnique(Y,ht),at.visible===!0&&t.pushUnique(Z,ht),t.pushUnique(tt,at._module.basePlotModule),rt++,at._input.visible!==!1&&nt++)}V._transformModules=[];var ct={},pt=[],gt=(G.template||{}).data||{},kt=e.traceTemplater(gt);for(et=0;et<B.length;et++){if(X=B[et],(J=kt.newTrace(X)).uid=V._traceUids[et],p.supplyTraceDefaults(X,J,nt,V,et),J.index=et,J._input=X,J._expandedIndex=rt,J.transforms&&J.transforms.length)for(var yt=X.visible!==!1&&J.visible===!1,mt=L(J,z,G,V),Ot=0;Ot<mt.length;Ot++){var vt=mt[Ot],xt={_template:J._template,type:J.type,uid:J.uid+Ot};yt&&vt.visible===!1&&delete vt.visible,p.supplyTraceDefaults(vt,xt,rt,V,et),w(xt,vt),xt.index=et,xt._input=X,xt._fullInput=J,xt._expandedIndex=rt,xt._expandedInput=vt,ot(xt)}else J._fullInput=J,J._expandedInput=J,ot(J);h.traceIs(J,"carpetAxis")&&(ct[J.carpet]=J),h.traceIs(J,"carpetDependent")&&pt.push(et)}for(et=0;et<pt.length;et++)if((J=z[pt[et]]).visible){var st=ct[J.carpet];J._carpet=st,st&&st.visible?(J.xaxis=st.xaxis,J.yaxis=st.yaxis):J.visible=!1}},p.supplyAnimationDefaults=function(B){var z;B=B||{};var G={};function V(et,J){return t.coerce(B||{},G,u,et,J)}if(V("mode"),V("direction"),V("fromcurrent"),Array.isArray(B.frame))for(G.frame=[],z=0;z<B.frame.length;z++)G.frame[z]=p.supplyAnimationFrameDefaults(B.frame[z]||{});else G.frame=p.supplyAnimationFrameDefaults(B.frame||{});if(Array.isArray(B.transition))for(G.transition=[],z=0;z<B.transition.length;z++)G.transition[z]=p.supplyAnimationTransitionDefaults(B.transition[z]||{});else G.transition=p.supplyAnimationTransitionDefaults(B.transition||{});return G},p.supplyAnimationFrameDefaults=function(B){var z={};function G(V,et){return t.coerce(B||{},z,u.frame,V,et)}return G("duration"),G("redraw"),z},p.supplyAnimationTransitionDefaults=function(B){var z={};function G(V,et){return t.coerce(B||{},z,u.transition,V,et)}return G("duration"),G("easing"),z},p.supplyFrameDefaults=function(B){var z={};function G(V,et){return t.coerce(B,z,f,V,et)}return G("group"),G("name"),G("traces"),G("baseframe"),G("data"),G("layout"),z},p.supplyTraceDefaults=function(B,z,G,V,et){var J,X=V.colorway||n.defaults,Y=X[G%X.length];function Z(mt,Ot){return t.coerce(B,z,p.attributes,mt,Ot)}var tt=Z("visible");Z("type"),Z("name",V._traceWord+" "+et),Z("uirevision",V.uirevision);var rt=p.getModule(z);if(z._module=rt,rt){var nt=rt.basePlotModule,ot=nt.attr,ct=nt.attributes;if(ot&&ct){var pt=V._subplots,gt="";if(tt||nt.name!=="gl2d"){if(Array.isArray(ot))for(J=0;J<ot.length;J++){var kt=ot[J],yt=t.coerce(B,z,ct,kt);pt[kt]&&t.pushUnique(pt[kt],yt),gt+=yt}else gt=t.coerce(B,z,ct,ot);pt[nt.name]&&t.pushUnique(pt[nt.name],gt)}}}return tt&&(Z("customdata"),Z("ids"),Z("meta"),h.traceIs(z,"showLegend")?(t.coerce(B,z,rt.attributes.showlegend?rt.attributes:p.attributes,"showlegend"),Z("legend"),Z("legendwidth"),Z("legendgroup"),Z("legendgrouptitle.text"),Z("legendrank"),z._dfltShowLegend=!0):z._dfltShowLegend=!1,rt&&rt.supplyDefaults(B,z,Y,V),h.traceIs(z,"noOpacity")||Z("opacity"),h.traceIs(z,"notLegendIsolatable")&&(z.visible=!!z.visible),h.traceIs(z,"noHover")||(z.hovertemplate||t.coerceHoverinfo(B,z,V),z.type!=="parcats"&&h.getComponentMethod("fx","supplyDefaults")(B,z,Y,V)),rt&&rt.selectPoints&&Z("selectedpoints"),p.supplyTransformDefaults(B,z,V)),z},p.hasMakesDataTransform=M,p.supplyTransformDefaults=function(B,z,G){if(z._length||M(B)){var V=G._globalTransforms||[],et=G._transformModules||[];if(Array.isArray(B.transforms)||V.length!==0)for(var J=B.transforms||[],X=V.concat(J),Y=z.transforms=[],Z=0;Z<X.length;Z++){var tt,rt=X[Z],nt=rt.type,ot=y[nt],ct=!(rt._module&&rt._module===ot),pt=ot&&typeof ot.transform=="function";ot||t.warn("Unrecognized transform type "+nt+"."),ot&&ot.supplyDefaults&&(ct||pt)?((tt=ot.supplyDefaults(rt,z,G,B)).type=nt,tt._module=ot,t.pushUnique(et,ot)):tt=t.extendFlat({},rt),Y.push(tt)}}},p.supplyLayoutGlobalDefaults=function(B,z,G){function V(rt,nt){return t.coerce(B,z,p.layoutAttributes,rt,nt)}var et=B.template;t.isPlainObject(et)&&(z.template=et,z._template=et.layout,z._dataTemplate=et.data),V("autotypenumbers");var J=t.coerceFont(V,"font"),X=J.size;t.coerceFont(V,"title.font",t.extendFlat({},J,{size:Math.round(1.4*X)})),V("title.text",z._dfltTitle.plot),V("title.xref");var Y=V("title.yref");V("title.pad.t"),V("title.pad.r"),V("title.pad.b"),V("title.pad.l");var Z=V("title.automargin");V("title.x"),V("title.xanchor"),V("title.y"),V("title.yanchor"),Z&&(Y==="paper"&&(z.title.y!==0&&(z.title.y=1),z.title.yanchor==="auto"&&(z.title.yanchor=z.title.y===0?"top":"bottom")),Y==="container"&&(z.title.y==="auto"&&(z.title.y=1),z.title.yanchor==="auto"&&(z.title.yanchor=z.title.y<.5?"bottom":"top"))),V("uniformtext.mode")&&V("uniformtext.minsize"),V("autosize",!(B.width&&B.height)),V("width"),V("height"),V("minreducedwidth"),V("minreducedheight"),V("margin.l"),V("margin.r"),V("margin.t"),V("margin.b"),V("margin.pad"),V("margin.autoexpand"),B.width&&B.height&&p.sanitizeMargins(z),h.getComponentMethod("grid","sizeDefaults")(B,z),V("paper_bgcolor"),V("separators",G.decimal+G.thousands),V("hidesources"),V("colorway"),V("datarevision");var tt=V("uirevision");V("editrevision",tt),V("selectionrevision",tt),h.getComponentMethod("modebar","supplyLayoutDefaults")(B,z),h.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(B,z,V),h.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(B,z,V),V("meta"),t.isPlainObject(B.transition)&&(V("transition.duration"),V("transition.easing"),V("transition.ordering")),h.getComponentMethod("calendars","handleDefaults")(B,z,"calendar"),h.getComponentMethod("fx","supplyLayoutGlobalDefaults")(B,z,V),t.coerce(B,z,l,"scattermode")},p.plotAutoSize=function(B,z,G){var V,et,J=B._context||{},X=J.frameMargins,Y=t.isPlotDiv(B);if(Y&&B.emit("plotly_autosize"),J.fillFrame)V=window.innerWidth,et=window.innerHeight,document.body.style.overflow="hidden";else{var Z=Y?window.getComputedStyle(B):{};if(V=E(Z.width)||E(Z.maxWidth)||G.width,et=E(Z.height)||E(Z.maxHeight)||G.height,m(X)&&X>0){var tt=1-2*X;V=Math.round(tt*V),et=Math.round(tt*et)}}var rt=p.layoutAttributes.width.min,nt=p.layoutAttributes.height.min;V<rt&&(V=rt),et<nt&&(et=nt);var ot=!z.width&&Math.abs(G.width-V)>1,ct=!z.height&&Math.abs(G.height-et)>1;(ct||ot)&&(ot&&(G.width=V),ct&&(G.height=et)),B._initialAutoSize||(B._initialAutoSize={width:V,height:et}),p.sanitizeMargins(G)},p.supplyLayoutModuleDefaults=function(B,z,G,V){var et,J,X,Y=h.componentsRegistry,Z=z._basePlotModules,tt=h.subplotsRegistry.cartesian;for(et in Y)(X=Y[et]).includeBasePlot&&X.includeBasePlot(B,z);for(var rt in Z.length||Z.push(tt),z._has("cartesian")&&(h.getComponentMethod("grid","contentDefaults")(B,z),tt.finalizeSubplots(B,z)),z._subplots)z._subplots[rt].sort(t.subplotSort);for(J=0;J<Z.length;J++)(X=Z[J]).supplyLayoutDefaults&&X.supplyLayoutDefaults(B,z,G);var nt=z._modules;for(J=0;J<nt.length;J++)(X=nt[J]).supplyLayoutDefaults&&X.supplyLayoutDefaults(B,z,G);var ot=z._transformModules;for(J=0;J<ot.length;J++)(X=ot[J]).supplyLayoutDefaults&&X.supplyLayoutDefaults(B,z,G,V);for(et in Y)(X=Y[et]).supplyLayoutDefaults&&X.supplyLayoutDefaults(B,z,G)},p.purge=function(B){var z=B._fullLayout||{};z._glcontainer!==void 0&&(z._glcontainer.selectAll(".gl-canvas").remove(),z._glcontainer.remove(),z._glcanvas=null),z._modeBar&&z._modeBar.destroy(),B._transitionData&&(B._transitionData._interruptCallbacks&&(B._transitionData._interruptCallbacks.length=0),B._transitionData._animationRaf&&window.cancelAnimationFrame(B._transitionData._animationRaf)),t.clearThrottle(),t.clearResponsive(B),delete B.data,delete B.layout,delete B._fullData,delete B._fullLayout,delete B.calcdata,delete B.empty,delete B.fid,delete B.undoqueue,delete B.undonum,delete B.autoplay,delete B.changed,delete B._promises,delete B._redrawTimer,delete B._hmlumcount,delete B._hmpixcount,delete B._transitionData,delete B._transitioning,delete B._initialAutoSize,delete B._transitioningWithDuration,delete B._dragging,delete B._dragged,delete B._dragdata,delete B._hoverdata,delete B._snapshotInProgress,delete B._editing,delete B._mouseDownTime,delete B._legendMouseDownTime,B.removeAllListeners&&B.removeAllListeners()},p.style=function(B){var z,G=B._fullLayout._visibleModules,V=[];for(z=0;z<G.length;z++){var et=G[z];et.style&&t.pushUnique(V,et.style)}for(z=0;z<V.length;z++)V[z](B)},p.sanitizeMargins=function(B){if(B&&B.margin){var z,G=B.width,V=B.height,et=B.margin,J=G-(et.l+et.r),X=V-(et.t+et.b);J<0&&(z=(G-1)/(et.l+et.r),et.l=Math.floor(z*et.l),et.r=Math.floor(z*et.r)),X<0&&(z=(V-1)/(et.t+et.b),et.t=Math.floor(z*et.t),et.b=Math.floor(z*et.b))}},p.clearAutoMarginIds=function(B){B._fullLayout._pushmarginIds={}},p.allowAutoMargin=function(B,z){B._fullLayout._pushmarginIds[z]=1},p.autoMargin=function(B,z,G){var V=B._fullLayout,et=V.width,J=V.height,X=V.margin,Y=V.minreducedwidth,Z=V.minreducedheight,tt=t.constrain(et-X.l-X.r,2,Y),rt=t.constrain(J-X.t-X.b,2,Z),nt=Math.max(0,et-tt),ot=Math.max(0,J-rt),ct=V._pushmargin,pt=V._pushmarginIds;if(X.autoexpand!==!1){if(G){var gt=G.pad;if(gt===void 0&&(gt=Math.min(12,X.l,X.r,X.t,X.b)),nt){var kt=(G.l+G.r)/nt;kt>1&&(G.l/=kt,G.r/=kt)}if(ot){var yt=(G.t+G.b)/ot;yt>1&&(G.t/=yt,G.b/=yt)}var mt=G.xl!==void 0?G.xl:G.x,Ot=G.xr!==void 0?G.xr:G.x,vt=G.yt!==void 0?G.yt:G.y,xt=G.yb!==void 0?G.yb:G.y;ct[z]={l:{val:mt,size:G.l+gt},r:{val:Ot,size:G.r+gt},b:{val:xt,size:G.b+gt},t:{val:vt,size:G.t+gt}},pt[z]=1}else delete ct[z],delete pt[z];if(!V._replotting)return p.doAutoMargin(B)}},p.doAutoMargin=function(B){var z=B._fullLayout,G=z.width,V=z.height;z._size||(z._size={}),S(z);var et=z._size,J=z.margin,X={t:0,b:0,l:0,r:0},Y=t.extendFlat({},et),Z=J.l,tt=J.r,rt=J.t,nt=J.b,ot=z._pushmargin,ct=z._pushmarginIds,pt=z.minreducedwidth,gt=z.minreducedheight;if(J.autoexpand!==!1){for(var kt in ot)ct[kt]||delete ot[kt];var yt=B._fullLayout._reservedMargin;for(var mt in yt)for(var Ot in yt[mt]){var vt=yt[mt][Ot];X[Ot]=Math.max(X[Ot],vt)}for(var xt in ot.base={l:{val:0,size:Z},r:{val:1,size:tt},t:{val:1,size:rt},b:{val:0,size:nt}},X){var st=0;for(var at in ot)at!=="base"&&m(ot[at][xt].size)&&(st=ot[at][xt].size>st?ot[at][xt].size:st);var ht=Math.max(0,J[xt]-st);X[xt]=Math.max(0,X[xt]-ht)}for(var Lt in ot){var Mt=ot[Lt].l||{},_t=ot[Lt].b||{},St=Mt.val,Dt=Mt.size,ut=_t.val,Tt=_t.size,bt=G-X.r-X.l,It=V-X.t-X.b;for(var zt in ot){if(m(Dt)&&ot[zt].r){var Ft=ot[zt].r.val,$t=ot[zt].r.size;if(Ft>St){var Wt=(Dt*Ft+($t-bt)*St)/(Ft-St),Xt=($t*(1-St)+(Dt-bt)*(1-Ft))/(Ft-St);Wt+Xt>Z+tt&&(Z=Wt,tt=Xt)}}if(m(Tt)&&ot[zt].t){var ae=ot[zt].t.val,Qt=ot[zt].t.size;if(ae>ut){var de=(Tt*ae+(Qt-It)*ut)/(ae-ut),ye=(Qt*(1-ut)+(Tt-It)*(1-ae))/(ae-ut);de+ye>nt+rt&&(nt=de,rt=ye)}}}}}var ve=t.constrain(G-J.l-J.r,2,pt),ie=t.constrain(V-J.t-J.b,2,gt),se=Math.max(0,G-ve),ke=Math.max(0,V-ie);if(se){var Ae=(Z+tt)/se;Ae>1&&(Z/=Ae,tt/=Ae)}if(ke){var Ie=(nt+rt)/ke;Ie>1&&(nt/=Ie,rt/=Ie)}if(et.l=Math.round(Z)+X.l,et.r=Math.round(tt)+X.r,et.t=Math.round(rt)+X.t,et.b=Math.round(nt)+X.b,et.p=Math.round(J.pad),et.w=Math.round(G)-et.l-et.r,et.h=Math.round(V)-et.t-et.b,!z._replotting&&(p.didMarginChange(Y,et)||function(Vt){if("_redrawFromAutoMarginCount"in Vt._fullLayout)return!1;var Zt=i.list(Vt,"",!0);for(var Gt in Zt)if(Zt[Gt].autoshift||Zt[Gt].shift)return!0;return!1}(B))){"_redrawFromAutoMarginCount"in z?z._redrawFromAutoMarginCount++:z._redrawFromAutoMarginCount=1;var Te=3*(1+Object.keys(ct).length);if(z._redrawFromAutoMarginCount<Te)return h.call("_doPlot",B);z._size=Y,t.warn("Too many auto-margin redraws.")}(function(Vt){var Zt=i.list(Vt,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Gt){for(var Yt=0;Yt<Zt.length;Yt++){var ne=Zt[Yt][Gt];ne&&ne()}})})(B)};var O=["l","r","t","b","p","w","h"];function P(B,z,G){var V=!1,et=[p.previousPromises,function(){if(B._transitionData)return B._transitioning=!1,function(X){var Y=Promise.resolve();if(!X)return Y;for(;X.length;)Y=Y.then(X.shift());return Y}(B._transitionData._interruptCallbacks)},G.prepareFn,p.rehover,p.reselect,function(){return B.emit("plotly_transitioning",[]),new Promise(function(X){B._transitioning=!0,z.duration>0&&(B._transitioningWithDuration=!0),B._transitionData._interruptCallbacks.push(function(){V=!0}),G.redraw&&B._transitionData._interruptCallbacks.push(function(){return h.call("redraw",B)}),B._transitionData._interruptCallbacks.push(function(){B.emit("plotly_transitioninterrupted",[])});var Y=0,Z=0;function tt(){return Y++,function(){var rt;Z++,V||Z!==Y||(rt=X,B._transitionData&&(function(nt){if(nt)for(;nt.length;)nt.shift()}(B._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(G.redraw)return h.call("redraw",B)}).then(function(){B._transitioning=!1,B._transitioningWithDuration=!1,B.emit("plotly_transitioned",[])}).then(rt)))}}G.runFn(tt),setTimeout(tt())})}],J=t.syncOrAsync(et,B);return J&&J.then||(J=Promise.resolve()),J.then(function(){return B})}p.didMarginChange=function(B,z){for(var G=0;G<O.length;G++){var V=O[G],et=B[V],J=z[V];if(!m(et)||Math.abs(J-et)>1)return!0}return!1},p.graphJson=function(B,z,G,V,et,J){(et&&z&&!B._fullData||et&&!z&&!B._fullLayout)&&p.supplyDefaults(B);var X=et?B._fullData:B.data,Y=et?B._fullLayout:B.layout,Z=(B._transitionData||{})._frames;function tt(ot,ct){if(typeof ot=="function")return ct?"_function_":null;if(t.isPlainObject(ot)){var pt,gt={};return Object.keys(ot).sort().forEach(function(kt){if(["_","["].indexOf(kt.charAt(0))===-1)if(typeof ot[kt]!="function"){if(G==="keepdata"){if(kt.substr(kt.length-3)==="src")return}else if(G==="keepstream"){if(typeof(pt=ot[kt+"src"])=="string"&&pt.indexOf(":")>0&&!t.isPlainObject(ot.stream))return}else if(G!=="keepall"&&typeof(pt=ot[kt+"src"])=="string"&&pt.indexOf(":")>0)return;gt[kt]=tt(ot[kt],ct)}else ct&&(gt[kt]="_function")}),gt}return Array.isArray(ot)?ot.map(function(kt){return tt(kt,ct)}):t.isTypedArray(ot)?t.simpleMap(ot,t.identity):t.isJSDate(ot)?t.ms2DateTimeLocal(+ot):ot}var rt={data:(X||[]).map(function(ot){var ct=tt(ot);return z&&delete ct.fit,ct})};if(!z&&(rt.layout=tt(Y),et)){var nt=Y._size;rt.layout.computed={margin:{b:nt.b,l:nt.l,r:nt.r,t:nt.t}}}return Z&&(rt.frames=tt(Z)),J&&(rt.config=tt(B._context,!0)),V==="object"?rt:JSON.stringify(rt)},p.modifyFrames=function(B,z){var G,V,et,J=B._transitionData._frames,X=B._transitionData._frameHash;for(G=0;G<z.length;G++)switch((V=z[G]).type){case"replace":et=V.value;var Y=(J[V.index]||{}).name,Z=et.name;J[V.index]=X[Z]=et,Z!==Y&&(delete X[Y],X[Z]=et);break;case"insert":X[(et=V.value).name]=et,J.splice(V.index,0,et);break;case"delete":delete X[(et=J[V.index]).name],J.splice(V.index,1)}return Promise.resolve()},p.computeFrame=function(B,z){var G,V,et,J,X=B._transitionData._frameHash;if(!z)throw new Error("computeFrame must be given a string frame name");var Y=X[z.toString()];if(!Y)return!1;for(var Z=[Y],tt=[Y.name];Y.baseframe&&(Y=X[Y.baseframe.toString()])&&tt.indexOf(Y.name)===-1;)Z.push(Y),tt.push(Y.name);for(var rt={};Y=Z.pop();)if(Y.layout&&(rt.layout=p.extendLayout(rt.layout,Y.layout)),Y.data){if(rt.data||(rt.data=[]),!(V=Y.traces))for(V=[],G=0;G<Y.data.length;G++)V[G]=G;for(rt.traces||(rt.traces=[]),G=0;G<Y.data.length;G++)(et=V[G])!=null&&((J=rt.traces.indexOf(et))===-1&&(J=rt.data.length,rt.traces[J]=et),rt.data[J]=p.extendTrace(rt.data[J],Y.data[G]))}return rt},p.recomputeFrameHash=function(B){for(var z=B._transitionData._frameHash={},G=B._transitionData._frames,V=0;V<G.length;V++){var et=G[V];et&&et.name&&(z[et.name]=et)}},p.extendObjectWithContainers=function(B,z,G){var V,et,J,X,Y,Z,tt,rt=t.extendDeepNoArrays({},z||{}),nt=t.expandObjectPaths(rt),ot={};if(G&&G.length)for(J=0;J<G.length;J++)(et=(V=t.nestedProperty(nt,G[J])).get())===void 0?t.nestedProperty(ot,G[J]).set(null):(V.set(null),t.nestedProperty(ot,G[J]).set(et));if(B=t.extendDeepNoArrays(B||{},nt),G&&G.length){for(J=0;J<G.length;J++)if(Z=t.nestedProperty(ot,G[J]).get()){for(tt=(Y=t.nestedProperty(B,G[J])).get(),Array.isArray(tt)||(tt=[],Y.set(tt)),X=0;X<Z.length;X++){var ct=Z[X];tt[X]=ct===null?null:p.extendObjectWithContainers(tt[X],ct)}Y.set(tt)}}return B},p.dataArrayContainers=["transforms","dimensions"],p.layoutArrayContainers=h.layoutArrayContainers,p.extendTrace=function(B,z){return p.extendObjectWithContainers(B,z,p.dataArrayContainers)},p.extendLayout=function(B,z){return p.extendObjectWithContainers(B,z,p.layoutArrayContainers)},p.transition=function(B,z,G,V,et,J){var X={redraw:et.redraw},Y={},Z=[];return X.prepareFn=function(){for(var tt=Array.isArray(z)?z.length:0,rt=V.slice(0,tt),nt=0;nt<rt.length;nt++){var ot=rt[nt],ct=B._fullData[ot]._module;if(ct){if(ct.animatable){var pt=ct.basePlotModule.name;Y[pt]||(Y[pt]=[]),Y[pt].push(ot)}B.data[rt[nt]]=p.extendTrace(B.data[rt[nt]],z[nt])}}var gt=t.expandObjectPaths(t.extendDeepNoArrays({},G)),kt=/^[xy]axis[0-9]*$/;for(var yt in gt)kt.test(yt)&&delete gt[yt].range;p.extendLayout(B.layout,gt),delete B.calcdata,p.supplyDefaults(B),p.doCalcdata(B);var mt=t.expandObjectPaths(G);if(mt){var Ot=B._fullLayout._plots;for(var vt in Ot){var xt=Ot[vt],st=xt.xaxis,at=xt.yaxis,ht=st.range.slice(),Lt=at.range.slice(),Mt=null,_t=null,St=null,Dt=null;Array.isArray(mt[st._name+".range"])?Mt=mt[st._name+".range"].slice():Array.isArray((mt[st._name]||{}).range)&&(Mt=mt[st._name].range.slice()),Array.isArray(mt[at._name+".range"])?_t=mt[at._name+".range"].slice():Array.isArray((mt[at._name]||{}).range)&&(_t=mt[at._name].range.slice()),ht&&Mt&&(st.r2l(ht[0])!==st.r2l(Mt[0])||st.r2l(ht[1])!==st.r2l(Mt[1]))&&(St={xr0:ht,xr1:Mt}),Lt&&_t&&(at.r2l(Lt[0])!==at.r2l(_t[0])||at.r2l(Lt[1])!==at.r2l(_t[1]))&&(Dt={yr0:Lt,yr1:_t}),(St||Dt)&&Z.push(t.extendFlat({plotinfo:xt},St,Dt))}}return Promise.resolve()},X.runFn=function(tt){var rt,nt,ot=B._fullLayout._basePlotModules,ct=Z.length;if(G)for(nt=0;nt<ot.length;nt++)ot[nt].transitionAxes&&ot[nt].transitionAxes(B,Z,J,tt);for(var pt in ct?((rt=t.extendFlat({},J)).duration=0,delete Y.cartesian):rt=J,Y){var gt=Y[pt];B._fullData[gt[0]]._module.basePlotModule.plot(B,gt,rt,tt)}},P(B,J,X)},p.transitionFromReact=function(B,z,G,V){var et=B._fullLayout,J=et.transition,X={},Y=[];return X.prepareFn=function(){var Z=et._plots;for(var tt in X.redraw=!1,z.anim==="some"&&(X.redraw=!0),G.anim==="some"&&(X.redraw=!0),Z){var rt=Z[tt],nt=rt.xaxis,ot=rt.yaxis,ct=V[nt._name].range.slice(),pt=V[ot._name].range.slice(),gt=nt.range.slice(),kt=ot.range.slice();nt.setScale(),ot.setScale();var yt=null,mt=null;nt.r2l(ct[0])===nt.r2l(gt[0])&&nt.r2l(ct[1])===nt.r2l(gt[1])||(yt={xr0:ct,xr1:gt}),ot.r2l(pt[0])===ot.r2l(kt[0])&&ot.r2l(pt[1])===ot.r2l(kt[1])||(mt={yr0:pt,yr1:kt}),(yt||mt)&&Y.push(t.extendFlat({plotinfo:rt},yt,mt))}return Promise.resolve()},X.runFn=function(Z){for(var tt,rt,nt,ot=B._fullData,ct=B._fullLayout._basePlotModules,pt=[],gt=0;gt<ot.length;gt++)pt.push(gt);function kt(){if(B._fullLayout)for(var mt=0;mt<ct.length;mt++)ct[mt].transitionAxes&&ct[mt].transitionAxes(B,Y,tt,Z)}function yt(){if(B._fullLayout)for(var mt=0;mt<ct.length;mt++)ct[mt].plot(B,nt,rt,Z)}Y.length&&z.anim?J.ordering==="traces first"?(tt=t.extendFlat({},J,{duration:0}),nt=pt,rt=J,setTimeout(kt,J.duration),yt()):(tt=J,nt=null,rt=t.extendFlat({},J,{duration:0}),setTimeout(yt,tt.duration),kt()):Y.length?(tt=J,kt()):z.anim&&(nt=pt,rt=J,yt())},P(B,J,X)},p.doCalcdata=function(B,z){var G,V,et,J,X=i.list(B),Y=B._fullData,Z=B._fullLayout,tt=new Array(Y.length),rt=(B.calcdata||[]).slice();for(B.calcdata=tt,Z._numBoxes=0,Z._numViolins=0,Z._violinScaleGroupStats={},B._hmpixcount=0,B._hmlumcount=0,Z._piecolormap={},Z._sunburstcolormap={},Z._treemapcolormap={},Z._iciclecolormap={},Z._funnelareacolormap={},et=0;et<Y.length;et++)Array.isArray(z)&&z.indexOf(et)===-1&&(tt[et]=rt[et]);for(et=0;et<Y.length;et++)(G=Y[et])._arrayAttrs=s.findArrayAttributes(G),G._extremes={};var nt=Z._subplots.polar||[];for(et=0;et<nt.length;et++)X.push(Z[nt[et]].radialaxis,Z[nt[et]].angularaxis);for(var ot in Z._colorAxes){var ct=Z[ot];ct.cauto!==!1&&(delete ct.cmin,delete ct.cmax)}var pt=!1;function gt(mt){if(G=Y[mt],V=G._module,G.visible===!0&&G.transforms){if(V&&V.calc){var Ot=V.calc(B,G);Ot[0]&&Ot[0].t&&Ot[0].t._scene&&delete Ot[0].t._scene.dirty}for(J=0;J<G.transforms.length;J++){var vt=G.transforms[J];(V=y[vt.type])&&V.calcTransform&&(G._hasCalcTransform=!0,pt=!0,V.calcTransform(B,G,vt))}}}function kt(mt,Ot){if(G=Y[mt],!!(V=G._module).isContainer===Ot){var vt=[];if(G.visible===!0&&G._length!==0){delete G._indexToPoints;var xt=G.transforms||[];for(J=xt.length-1;J>=0;J--)if(xt[J].enabled){G._indexToPoints=xt[J]._indexToPoints;break}V&&V.calc&&(vt=V.calc(B,G))}Array.isArray(vt)&&vt[0]||(vt=[{x:a,y:a}]),vt[0].t||(vt[0].t={}),vt[0].trace=G,tt[mt]=vt}}for(R(X,Y,Z),et=0;et<Y.length;et++)kt(et,!0);for(et=0;et<Y.length;et++)gt(et);for(pt&&R(X,Y,Z),et=0;et<Y.length;et++)kt(et,!0);for(et=0;et<Y.length;et++)kt(et,!1);j(B);var yt=function(mt,Ot){var vt,xt,st,at,ht,Lt=[];function Mt(Vt,Zt,Gt){var Yt=Zt._id.charAt(0);if(Vt==="histogram2dcontour"){var ne=Zt._counterAxes[0],re=i.getFromId(Ot,ne),Pt=Yt==="x"||ne==="x"&&re.type==="category",Nt=Yt==="y"||ne==="y"&&re.type==="category";return function(ee,te){return ee===0||te===0||Pt&&ee===Gt[te].length-1||Nt&&te===Gt.length-1?-1:(Yt==="y"?te:ee)-1}}return function(ee,te){return Yt==="y"?te:ee}}var _t={min:function(Vt){return t.aggNums(Math.min,null,Vt)},max:function(Vt){return t.aggNums(Math.max,null,Vt)},sum:function(Vt){return t.aggNums(function(Zt,Gt){return Zt+Gt},null,Vt)},total:function(Vt){return t.aggNums(function(Zt,Gt){return Zt+Gt},null,Vt)},mean:function(Vt){return t.mean(Vt)},median:function(Vt){return t.median(Vt)}};for(vt=0;vt<mt.length;vt++){var St=mt[vt];if(St.type==="category"){var Dt=St.categoryorder.match(U);if(Dt){var ut=Dt[1],Tt=Dt[2],bt=St._id.charAt(0),It=bt==="x",zt=[];for(xt=0;xt<St._categories.length;xt++)zt.push([St._categories[xt],[]]);for(xt=0;xt<St._traceIndices.length;xt++){var Ft=St._traceIndices[xt],$t=Ot._fullData[Ft];if($t.visible===!0){var Wt=$t.type;h.traceIs($t,"histogram")&&(delete $t._xautoBinFinished,delete $t._yautoBinFinished);var Xt=Wt==="splom",ae=Wt==="scattergl",Qt=Ot.calcdata[Ft];for(st=0;st<Qt.length;st++){var de,ye,ve=Qt[st];if(Xt){var ie=$t._axesDim[St._id];if(!It){var se=$t._diag[ie][0];se&&(St=Ot._fullLayout[i.id2name(se)])}var ke=ve.trace.dimensions[ie].values;for(at=0;at<ke.length;at++)for(de=St._categoriesMap[ke[at]],ht=0;ht<ve.trace.dimensions.length;ht++)if(ht!==ie){var Ae=ve.trace.dimensions[ht];zt[de][1].push(Ae.values[at])}}else if(ae){for(at=0;at<ve.t.x.length;at++)It?(de=ve.t.x[at],ye=ve.t.y[at]):(de=ve.t.y[at],ye=ve.t.x[at]),zt[de][1].push(ye);ve.t&&ve.t._scene&&delete ve.t._scene.dirty}else if(ve.hasOwnProperty("z")){ye=ve.z;var Ie=Mt($t.type,St,ye);for(at=0;at<ye.length;at++)for(ht=0;ht<ye[at].length;ht++)(de=Ie(ht,at))+1&&zt[de][1].push(ye[at][ht])}else for((de=ve.p)===void 0&&(de=ve[bt]),(ye=ve.s)===void 0&&(ye=ve.v),ye===void 0&&(ye=It?ve.y:ve.x),Array.isArray(ye)||(ye=ye===void 0?[]:[ye]),at=0;at<ye.length;at++)zt[de][1].push(ye[at])}}}St._categoriesValue=zt;var Te=[];for(xt=0;xt<zt.length;xt++)Te.push([zt[xt][0],_t[ut](zt[xt][1])]);Te.sort(function(Vt,Zt){return Vt[1]-Zt[1]}),St._categoriesAggregatedValue=Te,St._initialCategories=Te.map(function(Vt){return Vt[0]}),Tt==="descending"&&St._initialCategories.reverse(),Lt=Lt.concat(St.sortByInitialCategories())}}}return Lt}(X,B);if(yt.length){for(Z._numBoxes=0,Z._numViolins=0,et=0;et<yt.length;et++)kt(yt[et],!0);for(et=0;et<yt.length;et++)kt(yt[et],!1);j(B)}h.getComponentMethod("fx","calc")(B),h.getComponentMethod("errorbars","calc")(B)};var U=/(total|sum|min|max|mean|median) (ascending|descending)/;function R(B,z,G){var V={};function et(Z){Z.clearCalc(),Z.type==="multicategory"&&Z.setupMultiCategory(z),V[Z._id]=1}t.simpleMap(B,et);for(var J=G._axisMatchGroups||[],X=0;X<J.length;X++)for(var Y in J[X])V[Y]||et(G[i.id2name(Y)])}function j(B){var z,G,V,et=B._fullLayout,J=et._visibleModules,X={};for(G=0;G<J.length;G++){var Y=J[G],Z=Y.crossTraceCalc;if(Z){var tt=Y.basePlotModule.name;X[tt]?t.pushUnique(X[tt],Z):X[tt]=[Z]}}for(V in X){var rt=X[V],nt=et._subplots[V];if(Array.isArray(nt))for(z=0;z<nt.length;z++){var ot=nt[z],ct=V==="cartesian"?et._plots[ot]:et[ot];for(G=0;G<rt.length;G++)rt[G](B,ct,ot)}else for(G=0;G<rt.length;G++)rt[G](B)}}p.rehover=function(B){B._fullLayout._rehover&&B._fullLayout._rehover()},p.redrag=function(B){B._fullLayout._redrag&&B._fullLayout._redrag()},p.reselect=function(B){var z=B._fullLayout,G=(B.layout||{}).selections,V=z._previousSelections;z._previousSelections=G;var et=z._reselect||JSON.stringify(G)!==JSON.stringify(V);h.getComponentMethod("selections","reselect")(B,et)},p.generalUpdatePerTraceModule=function(B,z,G,V){var et,J=z.traceHash,X={};for(et=0;et<G.length;et++){var Y=G[et],Z=Y[0].trace;Z.visible&&(X[Z.type]=X[Z.type]||[],X[Z.type].push(Y))}for(var tt in J)if(!X[tt]){var rt=J[tt][0];rt[0].trace.visible=!1,X[tt]=[rt]}for(var nt in X){var ot=X[nt];ot[0][0].trace._module.plot(B,z,t.filterVisible(ot),V)}z.traceHash=X},p.plotBasePlot=function(B,z,G,V,et){var J=h.getModule(B),X=d(z.calcdata,J)[0];J.plot(z,X,V,et)},p.cleanBasePlot=function(B,z,G,V,et){var J=et._has&&et._has(B),X=G._has&&G._has(B);J&&!X&&et["_"+B+"layer"].selectAll("g.trace").remove()}},9813:function(W){W.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(W,I,o){var T=o(71828),k=o(61082).tester,r=T.findIndexOfMin,m=T.isAngleInsideSector,h=T.angleDelta,s=T.angleDist;function e(i,c,l,u){var f,d,w=u[0],v=u[1],p=n(Math.sin(c)-Math.sin(i)),y=n(Math.cos(c)-Math.cos(i)),b=Math.tan(l),x=n(1/b),_=p/y,g=v-_*w;return x?p&&y?d=b*(f=g/(b-_)):y?(f=v*x,d=v):(f=w,d=w*b):p&&y?(f=0,d=g):y?(f=0,d=v):f=d=NaN,[f,d]}function t(i,c,l,u){return T.isFullCircle([c,l])?function(f,d){var w,v=d.length,p=new Array(v+1);for(w=0;w<v;w++){var y=d[w];p[w]=[f*Math.cos(y),f*Math.sin(y)]}return p[w]=p[0].slice(),p}(i,u):function(f,d,w,v){var p,y,b=v.length,x=[];function _(U){return[f*Math.cos(U),f*Math.sin(U)]}function g(U,R,j){return e(U,R,j,_(U))}function A(U){return T.mod(U,b)}function M(U){return m(U,[d,w])}var L=r(v,function(U){return M(U)?s(U,d):1/0}),E=g(v[L],v[A(L-1)],d);for(x.push(E),p=L,y=0;y<b;p++,y++){var S=v[A(p)];if(!M(S))break;x.push(_(S))}var O=r(v,function(U){return M(U)?s(U,w):1/0}),P=g(v[O],v[A(O+1)],w);return x.push(P),x.push([0,0]),x.push(x[0].slice()),x}(i,c,l,u)}function n(i){return Math.abs(i)>1e-10?i:0}function a(i,c,l){c=c||0,l=l||0;for(var u=i.length,f=new Array(u),d=0;d<u;d++){var w=i[d];f[d]=[c+w[0],l-w[1]]}return f}W.exports={isPtInsidePolygon:function(i,c,l,u,f){if(!m(c,u))return!1;var d,w;l[0]<l[1]?(d=l[0],w=l[1]):(d=l[1],w=l[0]);var v=k(t(d,u[0],u[1],f)),p=k(t(w,u[0],u[1],f)),y=[i*Math.cos(c),i*Math.sin(c)];return p.contains(y)&&!v.contains(y)},findPolygonOffset:function(i,c,l,u){for(var f=1/0,d=1/0,w=t(i,c,l,u),v=0;v<w.length;v++){var p=w[v];f=Math.min(f,p[0]),d=Math.min(d,-p[1])}return[f,d]},findEnclosingVertexAngles:function(i,c){var l=r(c,function(f){var d=h(f,i);return d>0?d:1/0}),u=T.mod(l+1,c.length);return[c[l],c[u]]},findIntersectionXY:e,findXYatLength:function(i,c,l,u){var f=-c*l,d=c*c+1,w=2*(c*f-l),v=f*f+l*l-i*i,p=Math.sqrt(w*w-4*d*v),y=(-w+p)/(2*d),b=(-w-p)/(2*d);return[[y,c*y+f+u],[b,c*b+f+u]]},clampTiny:n,pathPolygon:function(i,c,l,u,f,d){return"M"+a(t(i,c,l,u),f,d).join("L")},pathPolygonAnnulus:function(i,c,l,u,f,d,w){var v,p;i<c?(v=i,p=c):(v=c,p=i);var y=a(t(v,l,u,f),d,w);return"M"+a(t(p,l,u,f),d,w).reverse().join("L")+"M"+y.join("L")}}},23580:function(W,I,o){var T=o(27659).AU,k=o(71828).counterRegex,r=o(77997),m=o(9813),h=m.attr,s=m.name,e=k(s),t={};t[h]={valType:"subplotid",dflt:s,editType:"calc"},W.exports={attr:h,name:s,idRoot:s,idRegex:e,attrRegex:e,attributes:t,layoutAttributes:o(73812),supplyLayoutDefaults:o(68993),plot:function(n){for(var a=n._fullLayout,i=n.calcdata,c=a._subplots[s],l=0;l<c.length;l++){var u=c[l],f=T(i,s,u),d=a[u]._subplot;d||(d=r(n,u),a[u]._subplot=d),d.plot(f,a,n._promises)}},clean:function(n,a,i,c){for(var l=c._subplots[s]||[],u=c._has&&c._has("gl"),f=a._has&&a._has("gl"),d=u&&!f,w=0;w<l.length;w++){var v=l[w],p=c[v]._subplot;if(!a[v]&&p)for(var y in p.framework.remove(),p.layers["radial-axis-title"].remove(),p.clipPaths)p.clipPaths[y].remove();d&&p._scene&&(p._scene.destroy(),p._scene=null)}},toSVG:o(93612).toSVG}},73812:function(W,I,o){var T=o(22399),k=o(13838),r=o(27670).Y,m=o(71828).extendFlat,h=o(30962).overrideAll,s=h({color:k.color,showline:m({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:m({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),e=h({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:m({},k.visible,{dflt:!0}),type:m({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},autorange:m({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:m({},k.minallowed,{editType:"plot"}),maxallowed:m({},k.maxallowed,{editType:"plot"}),range:m({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:m({},k.title.text,{editType:"plot",dflt:""}),font:m({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};m(t,s,e);var n={visible:m({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};m(n,s,e),W.exports={domain:r({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:T.background},radialaxis:t,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(W,I,o){var T=o(71828),k=o(7901),r=o(44467),m=o(49119),h=o(27659).NG,s=o(26218),e=o(38701),t=o(96115),n=o(89426),a=o(15258),i=o(92128),c=o(23074),l=o(4322),u=o(73812),f=o(12101),d=o(9813),w=d.axisNames;function v(y,b,x,_){var g=x("bgcolor");_.bgColor=k.combine(g,_.paper_bgcolor);var A=x("sector");x("hole");var M,L=h(_.fullData,d.name,_.id),E=_.layoutOut;function S(ot,ct){return x(M+"."+ot,ct)}for(var O=0;O<w.length;O++){M=w[O],T.isPlainObject(y[M])||(y[M]={});var P=y[M],U=r.newContainer(b,M);U._id=U._name=M,U._attr=_.id+"."+M,U._traceIndices=L.map(function(ot){return ot._expandedIndex});var R=d.axisName2dataArray[M],j=p(P,U,S,L,R,_);a(P,U,S,{axData:L,dataAttr:R});var B=S("visible");switch(f(U,b,E),S("uirevision",b.uirevision),U._m=1,M){case"radialaxis":S("minallowed"),S("maxallowed");var z,G=S("range"),V=U.getAutorangeDflt(G),et=S("autorange",V);!G||(G[0]!==null||G[1]!==null)&&(G[0]!==null&&G[1]!==null||et!=="reversed"&&et!==!0)&&(G[0]===null||et!=="min"&&et!=="max reversed")&&(G[1]===null||et!=="max"&&et!=="min reversed")||(G=void 0,delete U.range,U.autorange=!0,z=!0),z||(et=S("autorange",V=U.getAutorangeDflt(G))),P.autorange=et,et&&(c(S,et,G),j!=="linear"&&j!=="-"||S("rangemode"),U.isReversed()&&(U._m=-1)),U.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(j==="date"){T.log("Polar plots do not support date angular axes yet.");for(var J=0;J<L.length;J++)L[J].visible=!1;j=P.type=U.type="linear"}S(j==="linear"?"thetaunit":"period");var X=S("direction");S("rotation",{counterclockwise:0,clockwise:90}[X])}if(n(P,U,S,U.type,{tickSuffixDflt:U.thetaunit==="degrees"?"\xB0":void 0}),B){var Y,Z,tt,rt,nt=_.font||{};Z=(Y=S("color"))===P.color?Y:nt.color,tt=nt.size,rt=nt.family,s(P,U,S,U.type),t(P,U,S,U.type,{font:{color:Z,size:tt,family:rt}}),e(P,U,S,{outerTicks:!0}),i(P,U,S,{dfltColor:Y,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[M]}),S("layer"),M==="radialaxis"&&(S("side"),S("angle",A[0]),S("title.text"),T.coerceFont(S,"title.font",{color:Z,size:T.bigFont(tt),family:rt}))}j!=="category"&&S("hoverformat"),U._input=P}b.angularaxis.type==="category"&&x("gridshape")}function p(y,b,x,_,g,A){var M=x("autotypenumbers",A.autotypenumbersDflt);if(x("type")==="-"){for(var L,E=0;E<_.length;E++)if(_[E].visible){L=_[E];break}L&&L[g]&&(b.type=l(L[g],"gregorian",{noMultiCategory:!0,autotypenumbers:M})),b.type==="-"?b.type="linear":y.type=b.type}return b.type}W.exports=function(y,b,x){m(y,b,x,{type:d.name,attributes:u,handleDefaults:v,font:b.font,autotypenumbersDflt:b.autotypenumbers,paper_bgcolor:b.paper_bgcolor,fullData:x,layoutOut:b})}},77997:function(W,I,o){var T=o(39898),k=o(84267),r=o(73972),m=o(71828),h=m.strRotate,s=m.strTranslate,e=o(7901),t=o(91424),n=o(74875),a=o(89298),i=o(21994),c=o(12101),l=o(71739).doAutoRange,u=o(29323),f=o(28569),d=o(30211),w=o(92998),v=o(47322).prepSelect,p=o(47322).selectOnClick,y=o(47322).clearOutline,b=o(6964),x=o(33306),_=o(61549).redrawReglTraces,g=o(18783).MID_SHIFT,A=o(9813),M=o(10869),L=o(23893),E=L.smith,S=L.reactanceArc,O=L.resistanceArc,P=L.smithTransform,U=m._,R=m.mod,j=m.deg2rad,B=m.rad2deg;function z(X,Y,Z){this.isSmith=Z||!1,this.id=Y,this.gd=X,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var tt=X._fullLayout,rt="clip"+tt._uid+Y;this.clipIds.forTraces=rt+"-for-traces",this.clipPaths.forTraces=tt._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=tt["_"+(Z?"smith":"polar")+"layer"].append("g").attr("class",Y),this.getHole=function(nt){return this.isSmith?0:nt.hole},this.getSector=function(nt){return this.isSmith?[0,360]:nt.sector},this.getRadial=function(nt){return this.isSmith?nt.realaxis:nt.radialaxis},this.getAngular=function(nt){return this.isSmith?nt.imaginaryaxis:nt.angularaxis},Z||(this.radialTickLayout=null,this.angularTickLayout=null)}var G=z.prototype;function V(X){var Y=X.ticks+String(X.ticklen)+String(X.showticklabels);return"side"in X&&(Y+=X.side),Y}function et(X,Y){return Y[m.findIndexOfMin(Y,function(Z){return m.angleDist(X,Z)})]}function J(X,Y,Z){return Y?(X.attr("display",null),X.attr(Z)):X&&X.attr("display","none"),X}W.exports=function(X,Y,Z){return new z(X,Y,Z)},G.plot=function(X,Y){for(var Z=this,tt=Y[Z.id],rt=!1,nt=0;nt<X.length;nt++)if(X[nt][0].trace.cliponaxis===!1){rt=!0;break}Z._hasClipOnAxisFalse=rt,Z.updateLayers(Y,tt),Z.updateLayout(Y,tt),n.generalUpdatePerTraceModule(Z.gd,Z,X,tt),Z.updateFx(Y,tt),Z.isSmith&&(delete tt.realaxis.range,delete tt.imaginaryaxis.range)},G.updateLayers=function(X,Y){var Z=this,tt=Z.isSmith,rt=Z.layers,nt=Z.getRadial(Y),ot=Z.getAngular(Y),ct=A.layerNames,pt=ct.indexOf("frontplot"),gt=ct.slice(0,pt),kt=ot.layer==="below traces",yt=nt.layer==="below traces";kt&&gt.push("angular-line"),yt&&gt.push("radial-line"),kt&&gt.push("angular-axis"),yt&&gt.push("radial-axis"),gt.push("frontplot"),kt||gt.push("angular-line"),yt||gt.push("radial-line"),kt||gt.push("angular-axis"),yt||gt.push("radial-axis");var mt=(tt?"smith":"polar")+"sublayer",Ot=Z.framework.selectAll("."+mt).data(gt,String);Ot.enter().append("g").attr("class",function(vt){return mt+" "+vt}).each(function(vt){var xt=rt[vt]=T.select(this);switch(vt){case"frontplot":tt||xt.append("g").classed("barlayer",!0),xt.append("g").classed("scatterlayer",!0);break;case"backplot":xt.append("g").classed("maplayer",!0);break;case"plotbg":rt.bg=xt.append("path");break;case"radial-grid":case"angular-grid":xt.style("fill","none");break;case"radial-line":xt.append("line").style("fill","none");break;case"angular-line":xt.append("path").style("fill","none")}}),Ot.order()},G.updateLayout=function(X,Y){var Z=this,tt=Z.layers,rt=X._size,nt=Z.getRadial(Y),ot=Z.getAngular(Y),ct=Y.domain.x,pt=Y.domain.y;Z.xOffset=rt.l+rt.w*ct[0],Z.yOffset=rt.t+rt.h*(1-pt[1]);var gt=Z.xLength=rt.w*(ct[1]-ct[0]),kt=Z.yLength=rt.h*(pt[1]-pt[0]),yt=Z.getSector(Y);Z.sectorInRad=yt.map(j);var mt,Ot,vt,xt,st,at=Z.sectorBBox=function(ae){var Qt,de=ae[0],ye=ae[1]-de,ve=R(de,360),ie=ve+ye,se=Math.cos(j(ve)),ke=Math.sin(j(ve)),Ae=Math.cos(j(ie)),Ie=Math.sin(j(ie));return Qt=ve<=90&&ie>=90||ve>90&&ie>=450?1:ke<=0&&Ie<=0?0:Math.max(ke,Ie),[ve<=180&&ie>=180||ve>180&&ie>=540?-1:se>=0&&Ae>=0?0:Math.min(se,Ae),ve<=270&&ie>=270||ve>270&&ie>=630?-1:ke>=0&&Ie>=0?0:Math.min(ke,Ie),ie>=360?1:se<=0&&Ae<=0?0:Math.max(se,Ae),Qt]}(yt),ht=at[2]-at[0],Lt=at[3]-at[1],Mt=kt/gt,_t=Math.abs(Lt/ht);Mt>_t?(mt=gt,st=(kt-(Ot=gt*_t))/rt.h/2,vt=[ct[0],ct[1]],xt=[pt[0]+st,pt[1]-st]):(Ot=kt,st=(gt-(mt=kt/_t))/rt.w/2,vt=[ct[0]+st,ct[1]-st],xt=[pt[0],pt[1]]),Z.xLength2=mt,Z.yLength2=Ot,Z.xDomain2=vt,Z.yDomain2=xt;var St,Dt=Z.xOffset2=rt.l+rt.w*vt[0],ut=Z.yOffset2=rt.t+rt.h*(1-xt[1]),Tt=Z.radius=mt/ht,bt=Z.innerRadius=Z.getHole(Y)*Tt,It=Z.cx=Dt-Tt*at[0],zt=Z.cy=ut+Tt*at[3],Ft=Z.cxx=It-Dt,$t=Z.cyy=zt-ut,Wt=nt.side;Wt==="counterclockwise"?(St=Wt,Wt="top"):Wt==="clockwise"&&(St=Wt,Wt="bottom"),Z.radialAxis=Z.mockAxis(X,Y,nt,{_id:"x",side:Wt,_trueSide:St,domain:[bt/rt.w,Tt/rt.w]}),Z.angularAxis=Z.mockAxis(X,Y,ot,{side:"right",domain:[0,Math.PI],autorange:!1}),Z.doAutoRange(X,Y),Z.updateAngularAxis(X,Y),Z.updateRadialAxis(X,Y),Z.updateRadialAxisTitle(X,Y),Z.xaxis=Z.mockCartesianAxis(X,Y,{_id:"x",domain:vt}),Z.yaxis=Z.mockCartesianAxis(X,Y,{_id:"y",domain:xt});var Xt=Z.pathSubplot();Z.clipPaths.forTraces.select("path").attr("d",Xt).attr("transform",s(Ft,$t)),tt.frontplot.attr("transform",s(Dt,ut)).call(t.setClipUrl,Z._hasClipOnAxisFalse?null:Z.clipIds.forTraces,Z.gd),tt.bg.attr("d",Xt).attr("transform",s(It,zt)).call(e.fill,Y.bgcolor)},G.mockAxis=function(X,Y,Z,tt){var rt=m.extendFlat({},Z,tt);return c(rt,Y,X),rt},G.mockCartesianAxis=function(X,Y,Z){var tt=this,rt=tt.isSmith,nt=Z._id,ot=m.extendFlat({type:"linear"},Z);i(ot,X);var ct={x:[0,2],y:[1,3]};return ot.setRange=function(){var pt=tt.sectorBBox,gt=ct[nt],kt=tt.radialAxis._rl,yt=(kt[1]-kt[0])/(1-tt.getHole(Y));ot.range=[pt[gt[0]]*yt,pt[gt[1]]*yt]},ot.isPtWithinRange=nt!=="x"||rt?function(){return!0}:function(pt){return tt.isPtInside(pt)},ot.setRange(),ot.setScale(),ot},G.doAutoRange=function(X,Y){var Z=this,tt=Z.gd,rt=Z.radialAxis,nt=Z.getRadial(Y);l(tt,rt);var ot=rt.range;nt.range=ot.slice(),nt._input.range=ot.slice(),rt._rl=[rt.r2l(ot[0],null,"gregorian"),rt.r2l(ot[1],null,"gregorian")]},G.updateRadialAxis=function(X,Y){var Z=this,tt=Z.gd,rt=Z.layers,nt=Z.radius,ot=Z.innerRadius,ct=Z.cx,pt=Z.cy,gt=Z.getRadial(Y),kt=R(Z.getSector(Y)[0],360),yt=Z.radialAxis,mt=ot<nt,Ot=Z.isSmith;Ot||(Z.fillViewInitialKey("radialaxis.angle",gt.angle),Z.fillViewInitialKey("radialaxis.range",yt.range.slice()),yt.setGeometry()),yt.tickangle==="auto"&&kt>90&&kt<=270&&(yt.tickangle=180);var vt=Ot?function(ut){var Tt=P(Z,E([ut.x,0]));return s(Tt[0]-ct,Tt[1]-pt)}:function(ut){return s(yt.l2p(ut.x)+ot,0)},xt=Ot?function(ut){return O(Z,ut.x,-1/0,1/0)}:function(ut){return Z.pathArc(yt.r2p(ut.x)+ot)},st=V(gt);if(Z.radialTickLayout!==st&&(rt["radial-axis"].selectAll(".xtick").remove(),Z.radialTickLayout=st),mt){yt.setScale();var at=0,ht=Ot?(yt.tickvals||[]).filter(function(ut){return ut>=0}).map(function(ut){return a.tickText(yt,ut,!0,!1)}):a.calcTicks(yt),Lt=Ot?ht:a.clipEnds(yt,ht),Mt=a.getTickSigns(yt)[2];Ot&&((yt.ticks==="top"&&yt.side==="bottom"||yt.ticks==="bottom"&&yt.side==="top")&&(Mt=-Mt),yt.ticks==="top"&&yt.side==="top"&&(at=-yt.ticklen),yt.ticks==="bottom"&&yt.side==="bottom"&&(at=yt.ticklen)),a.drawTicks(tt,yt,{vals:ht,layer:rt["radial-axis"],path:a.makeTickPath(yt,0,Mt),transFn:vt,crisp:!1}),a.drawGrid(tt,yt,{vals:Lt,layer:rt["radial-grid"],path:xt,transFn:m.noop,crisp:!1}),a.drawLabels(tt,yt,{vals:ht,layer:rt["radial-axis"],transFn:vt,labelFns:a.makeLabelFns(yt,at)})}var _t=Z.radialAxisAngle=Z.vangles?B(et(j(gt.angle),Z.vangles)):gt.angle,St=s(ct,pt),Dt=St+h(-_t);J(rt["radial-axis"],mt&&(gt.showticklabels||gt.ticks),{transform:Dt}),J(rt["radial-grid"],mt&&gt.showgrid,{transform:Ot?"":St}),J(rt["radial-line"].select("line"),mt&&gt.showline,{x1:Ot?-nt:ot,y1:0,x2:nt,y2:0,transform:Dt}).attr("stroke-width",gt.linewidth).call(e.stroke,gt.linecolor)},G.updateRadialAxisTitle=function(X,Y,Z){if(!this.isSmith){var tt=this,rt=tt.gd,nt=tt.radius,ot=tt.cx,ct=tt.cy,pt=tt.getRadial(Y),gt=tt.id+"title",kt=0;if(pt.title){var yt=t.bBox(tt.layers["radial-axis"].node()).height,mt=pt.title.font.size,Ot=pt.side;kt=Ot==="top"?mt:Ot==="counterclockwise"?-(yt+.4*mt):yt+.8*mt}var vt=Z!==void 0?Z:tt.radialAxisAngle,xt=j(vt),st=Math.cos(xt),at=Math.sin(xt),ht=ot+nt/2*st+kt*at,Lt=ct-nt/2*at+kt*st;tt.layers["radial-axis-title"]=w.draw(rt,gt,{propContainer:pt,propName:tt.id+".radialaxis.title",placeholder:U(rt,"Click to enter radial axis title"),attributes:{x:ht,y:Lt,"text-anchor":"middle"},transform:{rotate:-vt}})}},G.updateAngularAxis=function(X,Y){var Z=this,tt=Z.gd,rt=Z.layers,nt=Z.radius,ot=Z.innerRadius,ct=Z.cx,pt=Z.cy,gt=Z.getAngular(Y),kt=Z.angularAxis,yt=Z.isSmith;yt||(Z.fillViewInitialKey("angularaxis.rotation",gt.rotation),kt.setGeometry(),kt.setScale());var mt=yt?function(ut){var Tt=P(Z,E([0,ut.x]));return Math.atan2(Tt[0]-ct,Tt[1]-pt)-Math.PI/2}:function(ut){return kt.t2g(ut.x)};kt.type==="linear"&&kt.thetaunit==="radians"&&(kt.tick0=B(kt.tick0),kt.dtick=B(kt.dtick));var Ot=function(ut){return s(ct+nt*Math.cos(ut),pt-nt*Math.sin(ut))},vt=yt?function(ut){var Tt=P(Z,E([0,ut.x]));return s(Tt[0],Tt[1])}:function(ut){return Ot(mt(ut))},xt=yt?function(ut){var Tt=P(Z,E([0,ut.x])),bt=Math.atan2(Tt[0]-ct,Tt[1]-pt)-Math.PI/2;return s(Tt[0],Tt[1])+h(-B(bt))}:function(ut){var Tt=mt(ut);return Ot(Tt)+h(-B(Tt))},st=yt?function(ut){return S(Z,ut.x,0,1/0)}:function(ut){var Tt=mt(ut),bt=Math.cos(Tt),It=Math.sin(Tt);return"M"+[ct+ot*bt,pt-ot*It]+"L"+[ct+nt*bt,pt-nt*It]},at=a.makeLabelFns(kt,0).labelStandoff,ht={xFn:function(ut){var Tt=mt(ut);return Math.cos(Tt)*at},yFn:function(ut){var Tt=mt(ut),bt=Math.sin(Tt)>0?.2:1;return-Math.sin(Tt)*(at+ut.fontSize*bt)+Math.abs(Math.cos(Tt))*(ut.fontSize*g)},anchorFn:function(ut){var Tt=mt(ut),bt=Math.cos(Tt);return Math.abs(bt)<.1?"middle":bt>0?"start":"end"},heightFn:function(ut,Tt,bt){var It=mt(ut);return-.5*(1+Math.sin(It))*bt}},Lt=V(gt);Z.angularTickLayout!==Lt&&(rt["angular-axis"].selectAll("."+kt._id+"tick").remove(),Z.angularTickLayout=Lt);var Mt,_t=yt?[1/0].concat(kt.tickvals||[]).map(function(ut){return a.tickText(kt,ut,!0,!1)}):a.calcTicks(kt);if(yt&&(_t[0].text="\u221E",_t[0].fontSize*=1.75),Y.gridshape==="linear"?(Mt=_t.map(mt),m.angleDelta(Mt[0],Mt[1])<0&&(Mt=Mt.slice().reverse())):Mt=null,Z.vangles=Mt,kt.type==="category"&&(_t=_t.filter(function(ut){return m.isAngleInsideSector(mt(ut),Z.sectorInRad)})),kt.visible){var St=kt.ticks==="inside"?-1:1,Dt=(kt.linewidth||1)/2;a.drawTicks(tt,kt,{vals:_t,layer:rt["angular-axis"],path:"M"+St*Dt+",0h"+St*kt.ticklen,transFn:xt,crisp:!1}),a.drawGrid(tt,kt,{vals:_t,layer:rt["angular-grid"],path:st,transFn:m.noop,crisp:!1}),a.drawLabels(tt,kt,{vals:_t,layer:rt["angular-axis"],repositionOnUpdate:!0,transFn:vt,labelFns:ht})}J(rt["angular-line"].select("path"),gt.showline,{d:Z.pathSubplot(),transform:s(ct,pt)}).attr("stroke-width",gt.linewidth).call(e.stroke,gt.linecolor)},G.updateFx=function(X,Y){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(X),this.updateRadialDrag(X,Y,0),this.updateRadialDrag(X,Y,1)),this.updateHoverAndMainDrag(X))},G.updateHoverAndMainDrag=function(X){var Y,Z,tt=this,rt=tt.isSmith,nt=tt.gd,ot=tt.layers,ct=X._zoomlayer,pt=A.MINZOOM,gt=A.OFFEDGE,kt=tt.radius,yt=tt.innerRadius,mt=tt.cx,Ot=tt.cy,vt=tt.cxx,xt=tt.cyy,st=tt.sectorInRad,at=tt.vangles,ht=tt.radialAxis,Lt=M.clampTiny,Mt=M.findXYatLength,_t=M.findEnclosingVertexAngles,St=A.cornerHalfWidth,Dt=A.cornerLen/2,ut=u.makeDragger(ot,"path","maindrag",X.dragmode===!1?"none":"crosshair");T.select(ut).attr("d",tt.pathSubplot()).attr("transform",s(mt,Ot)),ut.onmousemove=function(re){d.hover(nt,re,tt.id),nt._fullLayout._lasthover=ut,nt._fullLayout._hoversubplot=tt.id},ut.onmouseout=function(re){nt._dragging||f.unhover(nt,re)};var Tt,bt,It,zt,Ft,$t,Wt,Xt,ae,Qt={element:ut,gd:nt,subplot:tt.id,plotinfo:{id:tt.id,xaxis:tt.xaxis,yaxis:tt.yaxis},xaxes:[tt.xaxis],yaxes:[tt.yaxis]};function de(re,Pt){return Math.sqrt(re*re+Pt*Pt)}function ye(re,Pt){return de(re-vt,Pt-xt)}function ve(re,Pt){return Math.atan2(xt-Pt,re-vt)}function ie(re,Pt){return[re*Math.cos(Pt),re*Math.sin(-Pt)]}function se(re,Pt){if(re===0)return tt.pathSector(2*St);var Nt=Dt/re,ee=Pt-Nt,te=Pt+Nt,ge=Math.max(0,Math.min(re,kt)),pe=ge-St,me=ge+St;return"M"+ie(pe,ee)+"A"+[pe,pe]+" 0,0,0 "+ie(pe,te)+"L"+ie(me,te)+"A"+[me,me]+" 0,0,1 "+ie(me,ee)+"Z"}function ke(re,Pt,Nt){if(re===0)return tt.pathSector(2*St);var ee,te,ge=ie(re,Pt),pe=ie(re,Nt),me=Lt((ge[0]+pe[0])/2),ce=Lt((ge[1]+pe[1])/2);if(me&&ce){var we=ce/me,ue=-1/we,he=Mt(St,we,me,ce);ee=Mt(Dt,ue,he[0][0],he[0][1]),te=Mt(Dt,ue,he[1][0],he[1][1])}else{var be,Pe;ce?(be=Dt,Pe=St):(be=St,Pe=Dt),ee=[[me-be,ce-Pe],[me+be,ce-Pe]],te=[[me-be,ce+Pe],[me+be,ce+Pe]]}return"M"+ee.join("L")+"L"+te.reverse().join("L")+"Z"}function Ae(re,Pt){return Pt=Math.max(Math.min(Pt,kt),yt),re<gt?re=0:kt-re<gt?re=kt:Pt<gt?Pt=0:kt-Pt<gt&&(Pt=kt),Math.abs(Pt-re)>pt?(re<Pt?(It=re,zt=Pt):(It=Pt,zt=re),!0):(It=null,zt=null,!1)}function Ie(re,Pt){re=re||Ft,Pt=Pt||"M0,0Z",Xt.attr("d",re),ae.attr("d",Pt),u.transitionZoombox(Xt,ae,$t,Wt),$t=!0;var Nt={};Yt(Nt),nt.emit("plotly_relayouting",Nt)}function Te(re,Pt){var Nt,ee,te=Tt+(re*=Y),ge=bt+(Pt*=Z),pe=ye(Tt,bt),me=Math.min(ye(te,ge),kt),ce=ve(Tt,bt);Ae(pe,me)&&(Nt=Ft+tt.pathSector(zt),It&&(Nt+=tt.pathSector(It)),ee=se(It,ce)+se(zt,ce)),Ie(Nt,ee)}function Vt(re,Pt,Nt,ee){var te=M.findIntersectionXY(Nt,ee,Nt,[re-vt,xt-Pt]);return de(te[0],te[1])}function Zt(re,Pt){var Nt,ee,te=Tt+re,ge=bt+Pt,pe=ve(Tt,bt),me=ve(te,ge),ce=_t(pe,at),we=_t(me,at);Ae(Vt(Tt,bt,ce[0],ce[1]),Math.min(Vt(te,ge,we[0],we[1]),kt))&&(Nt=Ft+tt.pathSector(zt),It&&(Nt+=tt.pathSector(It)),ee=[ke(It,ce[0],ce[1]),ke(zt,ce[0],ce[1])].join(" ")),Ie(Nt,ee)}function Gt(){if(u.removeZoombox(nt),It!==null&&zt!==null){var re={};Yt(re),u.showDoubleClickNotifier(nt),r.call("_guiRelayout",nt,re)}}function Yt(re){var Pt=ht._rl,Nt=(Pt[1]-Pt[0])/(1-yt/kt)/kt,ee=[Pt[0]+(It-yt)*Nt,Pt[0]+(zt-yt)*Nt];re[tt.id+".radialaxis.range"]=ee}function ne(re,Pt){var Nt=nt._fullLayout.clickmode;if(u.removeZoombox(nt),re===2){var ee={};for(var te in tt.viewInitial)ee[tt.id+"."+te]=tt.viewInitial[te];nt.emit("plotly_doubleclick",null),r.call("_guiRelayout",nt,ee)}Nt.indexOf("select")>-1&&re===1&&p(Pt,nt,[tt.xaxis],[tt.yaxis],tt.id,Qt),Nt.indexOf("event")>-1&&d.click(nt,Pt,tt.id)}Qt.prepFn=function(re,Pt,Nt){var ee=nt._fullLayout.dragmode,te=ut.getBoundingClientRect();nt._fullLayout._calcInverseTransform(nt);var ge=nt._fullLayout._invTransform;Y=nt._fullLayout._invScaleX,Z=nt._fullLayout._invScaleY;var pe=m.apply3DTransform(ge)(Pt-te.left,Nt-te.top);if(Tt=pe[0],bt=pe[1],at){var me=M.findPolygonOffset(kt,st[0],st[1],at);Tt+=vt+me[0],bt+=xt+me[1]}switch(ee){case"zoom":Qt.clickFn=ne,rt||(Qt.moveFn=at?Zt:Te,Qt.doneFn=Gt,function(){It=null,zt=null,Ft=tt.pathSubplot(),$t=!1;var ce=nt._fullLayout[tt.id];Wt=k(ce.bgcolor).getLuminance(),(Xt=u.makeZoombox(ct,Wt,mt,Ot,Ft)).attr("fill-rule","evenodd"),ae=u.makeCorners(ct,mt,Ot),y(nt)}());break;case"select":case"lasso":v(re,Pt,Nt,Qt,ee)}},f.init(Qt)},G.updateRadialDrag=function(X,Y,Z){var tt=this,rt=tt.gd,nt=tt.layers,ot=tt.radius,ct=tt.innerRadius,pt=tt.cx,gt=tt.cy,kt=tt.radialAxis,yt=A.radialDragBoxSize,mt=yt/2;if(kt.visible){var Ot,vt,xt,st=j(tt.radialAxisAngle),at=kt._rl,ht=at[0],Lt=at[1],Mt=at[Z],_t=.75*(at[1]-at[0])/(1-tt.getHole(Y))/ot;Z?(Ot=pt+(ot+mt)*Math.cos(st),vt=gt-(ot+mt)*Math.sin(st),xt="radialdrag"):(Ot=pt+(ct-mt)*Math.cos(st),vt=gt-(ct-mt)*Math.sin(st),xt="radialdrag-inner");var St,Dt,ut,Tt=u.makeRectDragger(nt,xt,"crosshair",-mt,-mt,yt,yt),bt={element:Tt,gd:rt};X.dragmode===!1&&(bt.dragmode=!1),J(T.select(Tt),kt.visible&&ct<ot,{transform:s(Ot,vt)}),bt.prepFn=function(){St=null,Dt=null,ut=null,bt.moveFn=It,bt.doneFn=zt,y(rt)},bt.clampFn=function(Wt,Xt){return Math.sqrt(Wt*Wt+Xt*Xt)<A.MINDRAG&&(Wt=0,Xt=0),[Wt,Xt]},f.init(bt)}function It(Wt,Xt){if(St)St(Wt,Xt);else{var ae=[Wt,-Xt],Qt=[Math.cos(st),Math.sin(st)],de=Math.abs(m.dot(ae,Qt)/Math.sqrt(m.dot(ae,ae)));isNaN(de)||(St=de<.5?Ft:$t)}var ye={};(function(ve){Dt!==null?ve[tt.id+".radialaxis.angle"]=Dt:ut!==null&&(ve[tt.id+".radialaxis.range["+Z+"]"]=ut)})(ye),rt.emit("plotly_relayouting",ye)}function zt(){Dt!==null?r.call("_guiRelayout",rt,tt.id+".radialaxis.angle",Dt):ut!==null&&r.call("_guiRelayout",rt,tt.id+".radialaxis.range["+Z+"]",ut)}function Ft(Wt,Xt){if(Z!==0){var ae=Ot+Wt,Qt=vt+Xt;Dt=Math.atan2(gt-Qt,ae-pt),tt.vangles&&(Dt=et(Dt,tt.vangles)),Dt=B(Dt);var de=s(pt,gt)+h(-Dt);nt["radial-axis"].attr("transform",de),nt["radial-line"].select("line").attr("transform",de);var ye=tt.gd._fullLayout,ve=ye[tt.id];tt.updateRadialAxisTitle(ye,ve,Dt)}}function $t(Wt,Xt){var ae=m.dot([Wt,-Xt],[Math.cos(st),Math.sin(st)]);if(ut=Mt-_t*ae,_t>0==(Z?ut>ht:ut<Lt)){var Qt=rt._fullLayout,de=Qt[tt.id];kt.range[Z]=ut,kt._rl[Z]=ut,tt.updateRadialAxis(Qt,de),tt.xaxis.setRange(),tt.xaxis.setScale(),tt.yaxis.setRange(),tt.yaxis.setScale();var ye=!1;for(var ve in tt.traceHash){var ie=tt.traceHash[ve],se=m.filterVisible(ie);ie[0][0].trace._module.plot(rt,tt,se,de),r.traceIs(ve,"gl")&&se.length&&(ye=!0)}ye&&(x(rt),_(rt))}else ut=null}},G.updateAngularDrag=function(X){var Y=this,Z=Y.gd,tt=Y.layers,rt=Y.radius,nt=Y.angularAxis,ot=Y.cx,ct=Y.cy,pt=Y.cxx,gt=Y.cyy,kt=A.angularDragBoxSize,yt=u.makeDragger(tt,"path","angulardrag",X.dragmode===!1?"none":"move"),mt={element:yt,gd:Z};function Ot(bt,It){return Math.atan2(gt+kt-It,bt-pt-kt)}X.dragmode===!1?mt.dragmode=!1:T.select(yt).attr("d",Y.pathAnnulus(rt,rt+kt)).attr("transform",s(ot,ct)).call(b,"move");var vt,xt,st,at,ht,Lt,Mt=tt.frontplot.select(".scatterlayer").selectAll(".trace"),_t=Mt.selectAll(".point"),St=Mt.selectAll(".textpoint");function Dt(bt,It){var zt=Y.gd._fullLayout,Ft=zt[Y.id],$t=Ot(vt+bt*X._invScaleX,xt+It*X._invScaleY),Wt=B($t-Lt);if(at=st+Wt,tt.frontplot.attr("transform",s(Y.xOffset2,Y.yOffset2)+h([-Wt,pt,gt])),Y.vangles){ht=Y.radialAxisAngle+Wt;var Xt=s(ot,ct)+h(-Wt),ae=s(ot,ct)+h(-ht);tt.bg.attr("transform",Xt),tt["radial-grid"].attr("transform",Xt),tt["radial-axis"].attr("transform",ae),tt["radial-line"].select("line").attr("transform",ae),Y.updateRadialAxisTitle(zt,Ft,ht)}else Y.clipPaths.forTraces.select("path").attr("transform",s(pt,gt)+h(Wt));_t.each(function(){var se=T.select(this),ke=t.getTranslate(se);se.attr("transform",s(ke.x,ke.y)+h([Wt]))}),St.each(function(){var se=T.select(this),ke=se.select("text"),Ae=t.getTranslate(se);se.attr("transform",h([Wt,ke.attr("x"),ke.attr("y")])+s(Ae.x,Ae.y))}),nt.rotation=m.modHalf(at,360),Y.updateAngularAxis(zt,Ft),Y._hasClipOnAxisFalse&&!m.isFullCircle(Y.sectorInRad)&&Mt.call(t.hideOutsideRangePoints,Y);var Qt=!1;for(var de in Y.traceHash)if(r.traceIs(de,"gl")){var ye=Y.traceHash[de],ve=m.filterVisible(ye);ye[0][0].trace._module.plot(Z,Y,ve,Ft),ve.length&&(Qt=!0)}Qt&&(x(Z),_(Z));var ie={};ut(ie),Z.emit("plotly_relayouting",ie)}function ut(bt){bt[Y.id+".angularaxis.rotation"]=at,Y.vangles&&(bt[Y.id+".radialaxis.angle"]=ht)}function Tt(){St.select("text").attr("transform",null);var bt={};ut(bt),r.call("_guiRelayout",Z,bt)}mt.prepFn=function(bt,It,zt){var Ft=X[Y.id];st=Ft.angularaxis.rotation;var $t=yt.getBoundingClientRect();vt=It-$t.left,xt=zt-$t.top,Z._fullLayout._calcInverseTransform(Z);var Wt=m.apply3DTransform(X._invTransform)(vt,xt);vt=Wt[0],xt=Wt[1],Lt=Ot(vt,xt),mt.moveFn=Dt,mt.doneFn=Tt,y(Z)},Y.vangles&&!m.isFullCircle(Y.sectorInRad)&&(mt.prepFn=m.noop,b(T.select(yt),null)),f.init(mt)},G.isPtInside=function(X){if(this.isSmith)return!0;var Y=this.sectorInRad,Z=this.vangles,tt=this.angularAxis.c2g(X.theta),rt=this.radialAxis,nt=rt.c2l(X.r),ot=rt._rl;return(Z?M.isPtInsidePolygon:m.isPtInsideSector)(nt,tt,ot,Y,Z)},G.pathArc=function(X){var Y=this.sectorInRad,Z=this.vangles;return(Z?M.pathPolygon:m.pathArc)(X,Y[0],Y[1],Z)},G.pathSector=function(X){var Y=this.sectorInRad,Z=this.vangles;return(Z?M.pathPolygon:m.pathSector)(X,Y[0],Y[1],Z)},G.pathAnnulus=function(X,Y){var Z=this.sectorInRad,tt=this.vangles;return(tt?M.pathPolygonAnnulus:m.pathAnnulus)(X,Y,Z[0],Z[1],tt)},G.pathSubplot=function(){var X=this.innerRadius,Y=this.radius;return X?this.pathAnnulus(X,Y):this.pathSector(Y)},G.fillViewInitialKey=function(X,Y){X in this.viewInitial||(this.viewInitial[X]=Y)}},12101:function(W,I,o){var T=o(71828),k=o(21994),r=T.deg2rad,m=T.rad2deg;W.exports=function(h,s,e){switch(k(h,e),h._id){case"x":case"radialaxis":(function(t,n){var a=n._subplot;t.setGeometry=function(){var i=t._rl[0],c=t._rl[1],l=a.innerRadius,u=(a.radius-l)/(c-i),f=l/u,d=i>c?function(w){return w<=0}:function(w){return w>=0};t.c2g=function(w){var v=t.c2l(w)-i;return(d(v)?v:0)+f},t.g2c=function(w){return t.l2c(w+i-f)},t.g2p=function(w){return w*u},t.c2p=function(w){return t.g2p(t.c2g(w))}}})(h,s);break;case"angularaxis":(function(t,n){var a=t.type;if(a==="linear"){var i=t.d2c,c=t.c2d;t.d2c=function(l,u){return function(f,d){return d==="degrees"?r(f):f}(i(l),u)},t.c2d=function(l,u){return c(function(f,d){return d==="degrees"?m(f):f}(l,u))}}t.makeCalcdata=function(l,u){var f,d,w=l[u],v=l._length,p=function(g){return t.d2c(g,l.thetaunit)};if(w){if(T.isTypedArray(w)&&a==="linear"){if(v===w.length)return w;if(w.subarray)return w.subarray(0,v)}for(f=new Array(v),d=0;d<v;d++)f[d]=p(w[d])}else{var y=u+"0",b="d"+u,x=y in l?p(l[y]):0,_=l[b]?p(l[b]):(t.period||2*Math.PI)/v;for(f=new Array(v),d=0;d<v;d++)f[d]=x+d*_}return f},t.setGeometry=function(){var l,u,f,d,w=n.sector,v=w.map(r),p={clockwise:-1,counterclockwise:1}[t.direction],y=r(t.rotation),b=function(A){return p*A+y},x=function(A){return(A-y)/p};switch(a){case"linear":u=l=T.identity,d=r,f=m,t.range=T.isFullCircle(v)?[w[0],w[0]+360]:v.map(x).map(m);break;case"category":var _=t._categories.length,g=t.period?Math.max(t.period,_):_;g===0&&(g=1),u=d=function(A){return 2*A*Math.PI/g},l=f=function(A){return A*g/Math.PI/2},t.range=[0,g]}t.c2g=function(A){return b(u(A))},t.g2c=function(A){return l(x(A))},t.t2g=function(A){return b(d(A))},t.g2t=function(A){return f(x(A))}}})(h,s)}}},39779:function(W){W.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(W){function I(r){return r<0?-1:r>0?1:0}function o(r){var m=r[0],h=r[1];if(!isFinite(m)||!isFinite(h))return[1,0];var s=(m+1)*(m+1)+h*h;return[(m*m+h*h-1)/s,2*h/s]}function T(r,m){var h=m[0],s=m[1];return[h*r.radius+r.cx,-s*r.radius+r.cy]}function k(r,m){return m*r.radius}W.exports={smith:o,reactanceArc:function(r,m,h,s){var e=T(r,o([h,m])),t=e[0],n=e[1],a=T(r,o([s,m])),i=a[0],c=a[1];if(m===0)return["M"+t+","+n,"L"+i+","+c].join(" ");var l=k(r,1/Math.abs(m));return["M"+t+","+n,"A"+l+","+l+" 0 0,"+(m<0?1:0)+" "+i+","+c].join(" ")},resistanceArc:function(r,m,h,s){var e=k(r,1/(m+1)),t=T(r,o([m,h])),n=t[0],a=t[1],i=T(r,o([m,s])),c=i[0],l=i[1];if(I(h)!==I(s)){var u=T(r,o([m,0]));return["M"+n+","+a,"A"+e+","+e+" 0 0,"+(0<h?0:1)+" "+u[0]+","+u[1],"A"+e+","+e+" 0 0,"+(s<0?0:1)+c+","+l].join(" ")}return["M"+n+","+a,"A"+e+","+e+" 0 0,"+(s<h?0:1)+" "+c+","+l].join(" ")},smithTransform:T}},7504:function(W,I,o){var T=o(27659).AU,k=o(71828).counterRegex,r=o(77997),m=o(39779),h=m.attr,s=m.name,e=k(s),t={};t[h]={valType:"subplotid",dflt:s,editType:"calc"},W.exports={attr:h,name:s,idRoot:s,idRegex:e,attrRegex:e,attributes:t,layoutAttributes:o(33419),supplyLayoutDefaults:o(9558),plot:function(n){for(var a=n._fullLayout,i=n.calcdata,c=a._subplots[s],l=0;l<c.length;l++){var u=c[l],f=T(i,s,u),d=a[u]._subplot;d||(d=r(n,u,!0),a[u]._subplot=d),d.plot(f,a,n._promises)}},clean:function(n,a,i,c){for(var l=c._subplots[s]||[],u=0;u<l.length;u++){var f=l[u],d=c[f]._subplot;if(!a[f]&&d)for(var w in d.framework.remove(),d.clipPaths)d.clipPaths[w].remove()}},toSVG:o(93612).toSVG}},33419:function(W,I,o){var T=o(22399),k=o(13838),r=o(27670).Y,m=o(71828).extendFlat,h=o(30962).overrideAll,s=h({color:k.color,showline:m({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:m({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),e=h({ticklen:k.ticklen,tickwidth:m({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=m({visible:m({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:m({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},s,e),n=m({visible:m({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},s,e);W.exports={domain:r({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:T.background},realaxis:t,imaginaryaxis:n,editType:"calc"}},9558:function(W,I,o){var T,k,r,m=o(71828),h=o(7901),s=o(44467),e=o(49119),t=o(27659).NG,n=o(89426),a=o(96115),i=o(92128),c=o(21994),l=o(33419),u=o(39779),f=u.axisNames,d=(T=function(v){return v.slice().reverse().map(function(p){return-p}).concat([0]).concat(v)},k=String,r={},function(v){var p=k?k(v):v;if(p in r)return r[p];var y=T(v);return r[p]=y,y});function w(v,p,y,b){var x=y("bgcolor");b.bgColor=h.combine(x,b.paper_bgcolor);var _,g=t(b.fullData,u.name,b.id),A=b.layoutOut;function M(G,V){return y(_+"."+G,V)}for(var L=0;L<f.length;L++){_=f[L],m.isPlainObject(v[_])||(v[_]={});var E=v[_],S=s.newContainer(p,_);S._id=S._name=_,S._attr=b.id+"."+_,S._traceIndices=g.map(function(G){return G._expandedIndex});var O=M("visible");if(S.type="linear",c(S,A),n(E,S,M,S.type),O){var P,U,R,j,B=_==="realaxis";B&&M("side"),B?M("tickvals"):M("tickvals",d(p.realaxis.tickvals||l.realaxis.tickvals.dflt));var z=b.font||{};O&&(U=(P=M("color"))===E.color?P:z.color,R=z.size,j=z.family),a(E,S,M,S.type,{noTicklabelstep:!0,noAng:!B,noExp:!0,font:{color:U,size:R,family:j}}),m.coerce2(v,p,l,_+".ticklen"),m.coerce2(v,p,l,_+".tickwidth"),m.coerce2(v,p,l,_+".tickcolor",p.color),M("ticks")||(delete p[_].ticklen,delete p[_].tickwidth,delete p[_].tickcolor),i(E,S,M,{dfltColor:P,bgColor:b.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[_]}),M("layer")}M("hoverformat"),delete S.type,S._input=E}}W.exports=function(v,p,y){e(v,p,y,{noUirevision:!0,type:u.name,attributes:l,handleDefaults:w,font:p.font,paper_bgcolor:p.paper_bgcolor,fullData:y,layoutOut:p})}},49119:function(W,I,o){var T=o(71828),k=o(44467),r=o(27670).c;W.exports=function(m,h,s,e){var t,n,a=e.type,i=e.attributes,c=e.handleDefaults,l=e.partition||"x",u=h._subplots[a],f=u.length,d=f&&u[0].replace(/\d+$/,"");function w(b,x){return T.coerce(t,n,i,b,x)}for(var v=0;v<f;v++){var p=u[v];t=m[p]?m[p]:m[p]={},n=k.newContainer(h,p,d),e.noUirevision||w("uirevision",h.uirevision);var y={};y[l]=[v/f,(v+1)/f],r(n,h,w,y),e.id=p,c(t,n,w,e)}}},5386:function(W,I,o){var T=o(31562);function k(r){var m=r.description?" "+r.description:"",h=r.keys||[];if(h.length>0){for(var s=[],e=0;e<h.length;e++)s[e]="`"+h[e]+"`";m+="Finally, the template string has access to ",m=h.length===1?m+"variable "+s[0]:m+"variables "+s.slice(0,-1).join(", ")+" and "+s.slice(-1)+"."}return m}T.FORMAT_LINK,T.DATE_FORMAT_LINK,I.fF=function(r,m){r=r||{},k(m=m||{});var h={valType:"string",dflt:"",editType:r.editType||"none"};return r.arrayOk!==!1&&(h.arrayOk=!0),h},I.si=function(r,m){r=r||{},k(m=m||{});var h={valType:"string",dflt:"",editType:r.editType||"calc"};return r.arrayOk!==!1&&(h.arrayOk=!0),h},I.R=function(r,m){return m=m||{},(r=r||{}).newshape,k(m),{valType:"string",dflt:"",editType:r.editType||"arraydraw"}}},61639:function(W,I,o){var T=o(64380),k=o(27659).AU,r=o(71828).counterRegex,m="ternary";I.name=m;var h=I.attr="subplot";I.idRoot=m,I.idRegex=I.attrRegex=r(m),(I.attributes={})[h]={valType:"subplotid",dflt:"ternary",editType:"calc"},I.layoutAttributes=o(81367),I.supplyLayoutDefaults=o(25369),I.plot=function(s){for(var e=s._fullLayout,t=s.calcdata,n=e._subplots[m],a=0;a<n.length;a++){var i=n[a],c=k(t,m,i),l=e[i]._subplot;l||(l=new T({id:i,graphDiv:s,container:e._ternarylayer.node()},e),e[i]._subplot=l),l.plot(c,e,s._promises)}},I.clean=function(s,e,t,n){for(var a=n._subplots[m]||[],i=0;i<a.length;i++){var c=a[i],l=n[c]._subplot;!e[c]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},81367:function(W,I,o){var T=o(22399),k=o(27670).Y,r=o(13838),m=o(30962).overrideAll,h=o(1426).extendFlat,s={title:{text:r.title.text,font:r.title.font},color:r.color,tickmode:r.minor.tickmode,nticks:h({},r.nticks,{dflt:6,min:1}),tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,ticklabelstep:r.ticklabelstep,showticklabels:r.showticklabels,labelalias:r.labelalias,showtickprefix:r.showtickprefix,tickprefix:r.tickprefix,showticksuffix:r.showticksuffix,ticksuffix:r.ticksuffix,showexponent:r.showexponent,exponentformat:r.exponentformat,minexponent:r.minexponent,separatethousands:r.separatethousands,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,hoverformat:r.hoverformat,showline:h({},r.showline,{dflt:!0}),linecolor:r.linecolor,linewidth:r.linewidth,showgrid:h({},r.showgrid,{dflt:!0}),gridcolor:r.gridcolor,gridwidth:r.gridwidth,griddash:r.griddash,layer:r.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:r._deprecated.title,titlefont:r._deprecated.titlefont}},e=W.exports=m({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:T.background},sum:{valType:"number",dflt:1,min:0},aaxis:s,baxis:s,caxis:s},"plot","from-root");e.uirevision={valType:"any",editType:"none"},e.aaxis.uirevision=e.baxis.uirevision=e.caxis.uirevision={valType:"any",editType:"none"}},25369:function(W,I,o){var T=o(7901),k=o(44467),r=o(71828),m=o(49119),h=o(96115),s=o(89426),e=o(38701),t=o(26218),n=o(92128),a=o(81367),i=["aaxis","baxis","caxis"];function c(u,f,d,w){var v,p,y,b=d("bgcolor"),x=d("sum");w.bgColor=T.combine(b,w.paper_bgcolor);for(var _=0;_<i.length;_++)p=u[v=i[_]]||{},(y=k.newContainer(f,v))._name=v,l(p,y,w,f);var g=f.aaxis,A=f.baxis,M=f.caxis;g.min+A.min+M.min>=x&&(g.min=0,A.min=0,M.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function l(u,f,d,w){var v=a[f._name];function p(A,M){return r.coerce(u,f,v,A,M)}p("uirevision",w.uirevision),f.type="linear";var y=p("color"),b=y!==v.color.dflt?y:d.font.color,x=f._name.charAt(0).toUpperCase(),_="Component "+x,g=p("title.text",_);f._hovertitle=g===_?g:x,r.coerceFont(p,"title.font",{family:d.font.family,size:r.bigFont(d.font.size),color:b}),p("min"),t(u,f,p,"linear"),s(u,f,p,"linear"),h(u,f,p,"linear"),e(u,f,p,{outerTicks:!0}),p("showticklabels")&&(r.coerceFont(p,"tickfont",{family:d.font.family,size:d.font.size,color:b}),p("tickangle"),p("tickformat")),n(u,f,p,{dfltColor:y,bgColor:d.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v}),p("hoverformat"),p("layer")}W.exports=function(u,f,d){m(u,f,d,{type:"ternary",attributes:a,handleDefaults:c,font:f.font,paper_bgcolor:f.paper_bgcolor})}},64380:function(W,I,o){var T=o(39898),k=o(84267),r=o(73972),m=o(71828),h=m.strTranslate,s=m._,e=o(7901),t=o(91424),n=o(21994),a=o(1426).extendFlat,i=o(74875),c=o(89298),l=o(28569),u=o(30211),f=o(64505),d=f.freeMode,w=f.rectMode,v=o(92998),p=o(47322).prepSelect,y=o(47322).selectOnClick,b=o(47322).clearOutline,x=o(47322).clearSelectionsCache,_=o(85555);function g(R,j){this.id=R.id,this.graphDiv=R.graphDiv,this.init(j),this.makeFramework(j),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}W.exports=g;var A=g.prototype;A.init=function(R){this.container=R._ternarylayer,this.defs=R._defs,this.layoutId=R._uid,this.traceHash={},this.layers={}},A.plot=function(R,j){var B=this,z=j[B.id],G=j._size;B._hasClipOnAxisFalse=!1;for(var V=0;V<R.length;V++)if(R[V][0].trace.cliponaxis===!1){B._hasClipOnAxisFalse=!0;break}B.updateLayers(z),B.adjustLayout(z,G),i.generalUpdatePerTraceModule(B.graphDiv,B,R,z),B.layers.plotbg.select("path").call(e.fill,z.bgcolor)},A.makeFramework=function(R){var j=this,B=j.graphDiv,z=R[j.id],G=j.clipId="clip"+j.layoutId+j.id,V=j.clipIdRelative="clip-relative"+j.layoutId+j.id;j.clipDef=m.ensureSingleById(R._clips,"clipPath",G,function(et){et.append("path").attr("d","M0,0Z")}),j.clipDefRelative=m.ensureSingleById(R._clips,"clipPath",V,function(et){et.append("path").attr("d","M0,0Z")}),j.plotContainer=m.ensureSingle(j.container,"g",j.id),j.updateLayers(z),t.setClipUrl(j.layers.backplot,G,B),t.setClipUrl(j.layers.grids,G,B)},A.updateLayers=function(R){var j=this.layers,B=["draglayer","plotbg","backplot","grids"];R.aaxis.layer==="below traces"&&B.push("aaxis","aline"),R.baxis.layer==="below traces"&&B.push("baxis","bline"),R.caxis.layer==="below traces"&&B.push("caxis","cline"),B.push("frontplot"),R.aaxis.layer==="above traces"&&B.push("aaxis","aline"),R.baxis.layer==="above traces"&&B.push("baxis","bline"),R.caxis.layer==="above traces"&&B.push("caxis","cline");var z=this.plotContainer.selectAll("g.toplevel").data(B,String),G=["agrid","bgrid","cgrid"];z.enter().append("g").attr("class",function(V){return"toplevel "+V}).each(function(V){var et=T.select(this);j[V]=et,V==="frontplot"?et.append("g").classed("scatterlayer",!0):V==="backplot"?et.append("g").classed("maplayer",!0):V==="plotbg"?et.append("path").attr("d","M0,0Z"):V==="aline"||V==="bline"||V==="cline"?et.append("path"):V==="grids"&&G.forEach(function(J){j[J]=et.append("g").classed("grid "+J,!0)})}),z.order()};var M=Math.sqrt(4/3);A.adjustLayout=function(R,j){var B,z,G,V,et,J,X=this,Y=R.domain,Z=(Y.x[0]+Y.x[1])/2,tt=(Y.y[0]+Y.y[1])/2,rt=Y.x[1]-Y.x[0],nt=Y.y[1]-Y.y[0],ot=rt*j.w,ct=nt*j.h,pt=R.sum,gt=R.aaxis.min,kt=R.baxis.min,yt=R.caxis.min;ot>M*ct?G=(V=ct)*M:V=(G=ot)/M,et=rt*G/ot,J=nt*V/ct,B=j.l+j.w*Z-G/2,z=j.t+j.h*(1-tt)-V/2,X.x0=B,X.y0=z,X.w=G,X.h=V,X.sum=pt,X.xaxis={type:"linear",range:[gt+2*yt-pt,pt-gt-2*kt],domain:[Z-et/2,Z+et/2],_id:"x"},n(X.xaxis,X.graphDiv._fullLayout),X.xaxis.setScale(),X.xaxis.isPtWithinRange=function(St){return St.a>=X.aaxis.range[0]&&St.a<=X.aaxis.range[1]&&St.b>=X.baxis.range[1]&&St.b<=X.baxis.range[0]&&St.c>=X.caxis.range[1]&&St.c<=X.caxis.range[0]},X.yaxis={type:"linear",range:[gt,pt-kt-yt],domain:[tt-J/2,tt+J/2],_id:"y"},n(X.yaxis,X.graphDiv._fullLayout),X.yaxis.setScale(),X.yaxis.isPtWithinRange=function(){return!0};var mt=X.yaxis.domain[0],Ot=X.aaxis=a({},R.aaxis,{range:[gt,pt-kt-yt],side:"left",tickangle:(+R.aaxis.tickangle||0)-30,domain:[mt,mt+J*M],anchor:"free",position:0,_id:"y",_length:G});n(Ot,X.graphDiv._fullLayout),Ot.setScale();var vt=X.baxis=a({},R.baxis,{range:[pt-gt-yt,kt],side:"bottom",domain:X.xaxis.domain,anchor:"free",position:0,_id:"x",_length:G});n(vt,X.graphDiv._fullLayout),vt.setScale();var xt=X.caxis=a({},R.caxis,{range:[pt-gt-kt,yt],side:"right",tickangle:(+R.caxis.tickangle||0)+30,domain:[mt,mt+J*M],anchor:"free",position:0,_id:"y",_length:G});n(xt,X.graphDiv._fullLayout),xt.setScale();var st="M"+B+","+(z+V)+"h"+G+"l-"+G/2+",-"+V+"Z";X.clipDef.select("path").attr("d",st),X.layers.plotbg.select("path").attr("d",st);var at="M0,"+V+"h"+G+"l-"+G/2+",-"+V+"Z";X.clipDefRelative.select("path").attr("d",at);var ht=h(B,z);X.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ht),X.clipDefRelative.select("path").attr("transform",null);var Lt=h(B-vt._offset,z+V);X.layers.baxis.attr("transform",Lt),X.layers.bgrid.attr("transform",Lt);var Mt=h(B+G/2,z)+"rotate(30)"+h(0,-Ot._offset);X.layers.aaxis.attr("transform",Mt),X.layers.agrid.attr("transform",Mt);var _t=h(B+G/2,z)+"rotate(-30)"+h(0,-xt._offset);X.layers.caxis.attr("transform",_t),X.layers.cgrid.attr("transform",_t),X.drawAxes(!0),X.layers.aline.select("path").attr("d",Ot.showline?"M"+B+","+(z+V)+"l"+G/2+",-"+V:"M0,0").call(e.stroke,Ot.linecolor||"#000").style("stroke-width",(Ot.linewidth||0)+"px"),X.layers.bline.select("path").attr("d",vt.showline?"M"+B+","+(z+V)+"h"+G:"M0,0").call(e.stroke,vt.linecolor||"#000").style("stroke-width",(vt.linewidth||0)+"px"),X.layers.cline.select("path").attr("d",xt.showline?"M"+(B+G/2)+","+z+"l"+G/2+","+V:"M0,0").call(e.stroke,xt.linecolor||"#000").style("stroke-width",(xt.linewidth||0)+"px"),X.graphDiv._context.staticPlot||X.initInteractions(),t.setClipUrl(X.layers.frontplot,X._hasClipOnAxisFalse?null:X.clipId,X.graphDiv)},A.drawAxes=function(R){var j=this,B=j.graphDiv,z=j.id.substr(7)+"title",G=j.layers,V=j.aaxis,et=j.baxis,J=j.caxis;if(j.drawAx(V),j.drawAx(et),j.drawAx(J),R){var X=Math.max(V.showticklabels?V.tickfont.size/2:0,(J.showticklabels?.75*J.tickfont.size:0)+(J.ticks==="outside"?.87*J.ticklen:0)),Y=(et.showticklabels?et.tickfont.size:0)+(et.ticks==="outside"?et.ticklen:0)+3;G["a-title"]=v.draw(B,"a"+z,{propContainer:V,propName:j.id+".aaxis.title",placeholder:s(B,"Click to enter Component A title"),attributes:{x:j.x0+j.w/2,y:j.y0-V.title.font.size/3-X,"text-anchor":"middle"}}),G["b-title"]=v.draw(B,"b"+z,{propContainer:et,propName:j.id+".baxis.title",placeholder:s(B,"Click to enter Component B title"),attributes:{x:j.x0-Y,y:j.y0+j.h+.83*et.title.font.size+Y,"text-anchor":"middle"}}),G["c-title"]=v.draw(B,"c"+z,{propContainer:J,propName:j.id+".caxis.title",placeholder:s(B,"Click to enter Component C title"),attributes:{x:j.x0+j.w+Y,y:j.y0+j.h+.83*J.title.font.size+Y,"text-anchor":"middle"}})}},A.drawAx=function(R){var j,B=this,z=B.graphDiv,G=R._name,V=G.charAt(0),et=R._id,J=B.layers[G],X=V+"tickLayout",Y=(j=R).ticks+String(j.ticklen)+String(j.showticklabels);B[X]!==Y&&(J.selectAll("."+et+"tick").remove(),B[X]=Y),R.setScale();var Z=c.calcTicks(R),tt=c.clipEnds(R,Z),rt=c.makeTransTickFn(R),nt=c.getTickSigns(R)[2],ot=m.deg2rad(30),ct=nt*(R.linewidth||1)/2,pt=nt*R.ticklen,gt=B.w,kt=B.h,yt=V==="b"?"M0,"+ct+"l"+Math.sin(ot)*pt+","+Math.cos(ot)*pt:"M"+ct+",0l"+Math.cos(ot)*pt+","+-Math.sin(ot)*pt,mt={a:"M0,0l"+kt+",-"+gt/2,b:"M0,0l-"+gt/2+",-"+kt,c:"M0,0l-"+kt+","+gt/2}[V];c.drawTicks(z,R,{vals:R.ticks==="inside"?tt:Z,layer:J,path:yt,transFn:rt,crisp:!1}),c.drawGrid(z,R,{vals:tt,layer:B.layers[V+"grid"],path:mt,transFn:rt,crisp:!1}),c.drawLabels(z,R,{vals:Z,layer:J,transFn:rt,labelFns:c.makeLabelFns(R,0,30)})};var L=_.MINZOOM/2+.87,E="m-0.87,.5h"+L+"v3h-"+(L+5.2)+"l"+(L/2+2.6)+",-"+(.87*L+4.5)+"l2.6,1.5l-"+L/2+","+.87*L+"Z",S="m0.87,.5h-"+L+"v3h"+(L+5.2)+"l-"+(L/2+2.6)+",-"+(.87*L+4.5)+"l-2.6,1.5l"+L/2+","+.87*L+"Z",O="m0,1l"+L/2+","+.87*L+"l2.6,-1.5l-"+(L/2+2.6)+",-"+(.87*L+4.5)+"l-"+(L/2+2.6)+","+(.87*L+4.5)+"l2.6,1.5l"+L/2+",-"+.87*L+"Z",P=!0;function U(R){T.select(R).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}A.clearOutline=function(){x(this.dragOptions),b(this.dragOptions.gd)},A.initInteractions=function(){var R,j,B,z,G,V,et,J,X,Y,Z,tt,rt=this,nt=rt.layers.plotbg.select("path").node(),ot=rt.graphDiv,ct=ot._fullLayout._zoomlayer;function pt(at){var ht={};return ht[rt.id+".aaxis.min"]=at.a,ht[rt.id+".baxis.min"]=at.b,ht[rt.id+".caxis.min"]=at.c,ht}function gt(at,ht){var Lt=ot._fullLayout.clickmode;U(ot),at===2&&(ot.emit("plotly_doubleclick",null),r.call("_guiRelayout",ot,pt({a:0,b:0,c:0}))),Lt.indexOf("select")>-1&&at===1&&y(ht,ot,[rt.xaxis],[rt.yaxis],rt.id,rt.dragOptions),Lt.indexOf("event")>-1&&u.click(ot,ht,rt.id)}function kt(at,ht){return 1-ht/rt.h}function yt(at,ht){return 1-(at+(rt.h-ht)/Math.sqrt(3))/rt.w}function mt(at,ht){return(at-(rt.h-ht)/Math.sqrt(3))/rt.w}function Ot(at,ht){var Lt=B+at*R,Mt=z+ht*j,_t=Math.max(0,Math.min(1,kt(0,z),kt(0,Mt))),St=Math.max(0,Math.min(1,yt(B,z),yt(Lt,Mt))),Dt=Math.max(0,Math.min(1,mt(B,z),mt(Lt,Mt))),ut=(_t/2+Dt)*rt.w,Tt=(1-_t/2-St)*rt.w,bt=(ut+Tt)/2,It=Tt-ut,zt=(1-_t)*rt.h,Ft=zt-It/M;It<_.MINZOOM?(et=G,Z.attr("d",X),tt.attr("d","M0,0Z")):(et={a:G.a+_t*V,b:G.b+St*V,c:G.c+Dt*V},Z.attr("d",X+"M"+ut+","+zt+"H"+Tt+"L"+bt+","+Ft+"L"+ut+","+zt+"Z"),tt.attr("d","M"+B+","+z+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+ut+","+zt+E+"M"+Tt+","+zt+S+"M"+bt+","+Ft+O)),Y||(Z.transition().style("fill",J>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),tt.transition().style("opacity",1).duration(200),Y=!0),ot.emit("plotly_relayouting",pt(et))}function vt(){U(ot),et!==G&&(r.call("_guiRelayout",ot,pt(et)),P&&ot.data&&ot._context.showTips&&(m.notifier(s(ot,"Double-click to zoom back out"),"long"),P=!1))}function xt(at,ht){var Lt=at/rt.xaxis._m,Mt=ht/rt.yaxis._m,_t=[(et={a:G.a-Mt,b:G.b+(Lt+Mt)/2,c:G.c-(Lt-Mt)/2}).a,et.b,et.c].sort(m.sorterAsc),St=_t.indexOf(et.a),Dt=_t.indexOf(et.b),ut=_t.indexOf(et.c);_t[0]<0&&(_t[1]+_t[0]/2<0?(_t[2]+=_t[0]+_t[1],_t[0]=_t[1]=0):(_t[2]+=_t[0]/2,_t[1]+=_t[0]/2,_t[0]=0),et={a:_t[St],b:_t[Dt],c:_t[ut]},ht=(G.a-et.a)*rt.yaxis._m,at=(G.c-et.c-G.b+et.b)*rt.xaxis._m);var Tt=h(rt.x0+at,rt.y0+ht);rt.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Tt);var bt=h(-at,-ht);rt.clipDefRelative.select("path").attr("transform",bt),rt.aaxis.range=[et.a,rt.sum-et.b-et.c],rt.baxis.range=[rt.sum-et.a-et.c,et.b],rt.caxis.range=[rt.sum-et.a-et.b,et.c],rt.drawAxes(!1),rt._hasClipOnAxisFalse&&rt.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,rt),ot.emit("plotly_relayouting",pt(et))}function st(){r.call("_guiRelayout",ot,pt(et))}this.dragOptions={element:nt,gd:ot,plotinfo:{id:rt.id,domain:ot._fullLayout[rt.id].domain,xaxis:rt.xaxis,yaxis:rt.yaxis},subplot:rt.id,prepFn:function(at,ht,Lt){rt.dragOptions.xaxes=[rt.xaxis],rt.dragOptions.yaxes=[rt.yaxis],R=ot._fullLayout._invScaleX,j=ot._fullLayout._invScaleY;var Mt=rt.dragOptions.dragmode=ot._fullLayout.dragmode;d(Mt)?rt.dragOptions.minDrag=1:rt.dragOptions.minDrag=void 0,Mt==="zoom"?(rt.dragOptions.moveFn=Ot,rt.dragOptions.clickFn=gt,rt.dragOptions.doneFn=vt,function(_t,St,Dt){var ut=nt.getBoundingClientRect();B=St-ut.left,z=Dt-ut.top,ot._fullLayout._calcInverseTransform(ot);var Tt=ot._fullLayout._invTransform,bt=m.apply3DTransform(Tt)(B,z);B=bt[0],z=bt[1],G={a:rt.aaxis.range[0],b:rt.baxis.range[1],c:rt.caxis.range[1]},et=G,V=rt.aaxis.range[1]-G.a,J=k(rt.graphDiv._fullLayout[rt.id].bgcolor).getLuminance(),X="M0,"+rt.h+"L"+rt.w/2+", 0L"+rt.w+","+rt.h+"Z",Y=!1,Z=ct.append("path").attr("class","zoombox").attr("transform",h(rt.x0,rt.y0)).style({fill:J>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",X),tt=ct.append("path").attr("class","zoombox-corners").attr("transform",h(rt.x0,rt.y0)).style({fill:e.background,stroke:e.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),rt.clearOutline(ot)}(0,ht,Lt)):Mt==="pan"?(rt.dragOptions.moveFn=xt,rt.dragOptions.clickFn=gt,rt.dragOptions.doneFn=st,G={a:rt.aaxis.range[0],b:rt.baxis.range[1],c:rt.caxis.range[1]},et=G,rt.clearOutline(ot)):(w(Mt)||d(Mt))&&p(at,ht,Lt,rt.dragOptions,Mt)}},nt.onmousemove=function(at){u.hover(ot,at,rt.id),ot._fullLayout._lasthover=nt,ot._fullLayout._hoversubplot=rt.id},nt.onmouseout=function(at){ot._dragging||l.unhover(ot,at)},l.init(this.dragOptions)}},73972:function(W,I,o){var T=o(47769),k=o(64213),r=o(75138),m=o(41965),h=o(24401).addStyleRule,s=o(1426),e=o(9012),t=o(10820),n=s.extendFlat,a=s.extendDeepAll;function i(y){var b=y.name,x=y.categories,_=y.meta;if(I.modules[b])T.log("Type "+b+" already registered");else{I.subplotsRegistry[y.basePlotModule.name]||function(P){var U=P.name;if(I.subplotsRegistry[U])T.log("Plot type "+U+" already registered.");else for(var R in f(P),I.subplotsRegistry[U]=P,I.componentsRegistry)v(R,P.name)}(y.basePlotModule);for(var g={},A=0;A<x.length;A++)g[x[A]]=!0,I.allCategories[x[A]]=!0;for(var M in I.modules[b]={_module:y,categories:g},_&&Object.keys(_).length&&(I.modules[b].meta=_),I.allTypes.push(b),I.componentsRegistry)d(M,b);y.layoutAttributes&&n(I.traceLayoutAttributes,y.layoutAttributes);var L=y.basePlotModule,E=L.name;if(E==="mapbox"){var S=L.constants.styleRules;for(var O in S)h(".js-plotly-plot .plotly .mapboxgl-"+O,S[O])}E!=="geo"&&E!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function c(y){if(typeof y.name!="string")throw new Error("Component module *name* must be a string.");var b=y.name;for(var x in I.componentsRegistry[b]=y,y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&r(I.layoutArrayContainers,b),f(y)),I.modules)d(b,x);for(var _ in I.subplotsRegistry)v(b,_);for(var g in I.transformsRegistry)w(b,g);y.schema&&y.schema.layout&&a(t,y.schema.layout)}function l(y){if(typeof y.name!="string")throw new Error("Transform module *name* must be a string.");var b="Transform module "+y.name,x=typeof y.transform=="function",_=typeof y.calcTransform=="function";if(!x&&!_)throw new Error(b+" is missing a *transform* or *calcTransform* method.");for(var g in x&&_&&T.log([b+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),m(y.attributes)||T.log(b+" registered without an *attributes* object."),typeof y.supplyDefaults!="function"&&T.log(b+" registered without a *supplyDefaults* method."),I.transformsRegistry[y.name]=y,I.componentsRegistry)w(g,y.name)}function u(y){var b=y.name,x=b.split("-")[0],_=y.dictionary,g=y.format,A=_&&Object.keys(_).length,M=g&&Object.keys(g).length,L=I.localeRegistry,E=L[b];if(E||(L[b]=E={}),x!==b){var S=L[x];S||(L[x]=S={}),A&&S.dictionary===E.dictionary&&(S.dictionary=_),M&&S.format===E.format&&(S.format=g)}A&&(E.dictionary=_),M&&(E.format=g)}function f(y){if(y.layoutAttributes){var b=y.layoutAttributes._arrayAttrRegexps;if(b)for(var x=0;x<b.length;x++)r(I.layoutArrayRegexes,b[x])}}function d(y,b){var x=I.componentsRegistry[y].schema;if(x&&x.traces){var _=x.traces[b];_&&a(I.modules[b]._module.attributes,_)}}function w(y,b){var x=I.componentsRegistry[y].schema;if(x&&x.transforms){var _=x.transforms[b];_&&a(I.transformsRegistry[b].attributes,_)}}function v(y,b){var x=I.componentsRegistry[y].schema;if(x&&x.subplots){var _=I.subplotsRegistry[b],g=_.layoutAttributes,A=_.attr==="subplot"?_.name:_.attr;Array.isArray(A)&&(A=A[0]);var M=x.subplots[A];g&&M&&a(g,M)}}function p(y){return typeof y=="object"&&(y=y.type),y}I.modules={},I.allCategories={},I.allTypes=[],I.subplotsRegistry={},I.transformsRegistry={},I.componentsRegistry={},I.layoutArrayContainers=[],I.layoutArrayRegexes=[],I.traceLayoutAttributes={},I.localeRegistry={},I.apiMethodRegistry={},I.collectableSubplotTypes=null,I.register=function(y){if(I.collectableSubplotTypes=null,!y)throw new Error("No argument passed to Plotly.register.");y&&!Array.isArray(y)&&(y=[y]);for(var b=0;b<y.length;b++){var x=y[b];if(!x)throw new Error("Invalid module was attempted to be registered!");switch(x.moduleType){case"trace":i(x);break;case"transform":l(x);break;case"component":c(x);break;case"locale":u(x);break;case"apiMethod":var _=x.name;I.apiMethodRegistry[_]=x.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},I.getModule=function(y){var b=I.modules[p(y)];return!!b&&b._module},I.traceIs=function(y,b){if((y=p(y))==="various")return!1;var x=I.modules[y];return x||(y&&T.log("Unrecognized trace type "+y+"."),x=I.modules[e.type.dflt]),!!x.categories[b]},I.getTransformIndices=function(y,b){for(var x=[],_=y.transforms||[],g=0;g<_.length;g++)_[g].type===b&&x.push(g);return x},I.hasTransform=function(y,b){for(var x=y.transforms||[],_=0;_<x.length;_++)if(x[_].type===b)return!0;return!1},I.getComponentMethod=function(y,b){var x=I.componentsRegistry[y];return x&&x[b]||k},I.call=function(){var y=arguments[0],b=[].slice.call(arguments,1);return I.apiMethodRegistry[y].apply(null,b)}},61914:function(W,I,o){var T=o(73972),k=o(71828),r=k.extendFlat,m=k.extendDeep;function h(s){var e;switch(s){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}W.exports=function(s,e){var t,n,a=s.data,i=s.layout,c=m([],a),l=m({},i,h(e.tileClass)),u=s._context||{};if(e.width&&(l.width=e.width),e.height&&(l.height=e.height),e.tileClass==="thumbnail"||e.tileClass==="themes__thumb"){l.annotations=[];var f=Object.keys(l);for(t=0;t<f.length;t++)n=f[t],["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))>-1&&(l[f[t]].title={text:""});for(t=0;t<c.length;t++){var d=c[t];d.showscale=!1,d.marker&&(d.marker.showscale=!1),T.traceIs(d,"pie-like")&&(d.textposition="none")}}if(Array.isArray(e.annotations))for(t=0;t<e.annotations.length;t++)l.annotations.push(e.annotations[t]);var w=Object.keys(l).filter(function(x){return x.match(/^scene\d*$/)});if(w.length){var v={};for(e.tileClass==="thumbnail"&&(v={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<w.length;t++){var p=l[w[t]];p.xaxis||(p.xaxis={}),p.yaxis||(p.yaxis={}),p.zaxis||(p.zaxis={}),r(p.xaxis,v),r(p.yaxis,v),r(p.zaxis,v),p._scene=null}}var y=document.createElement("div");e.tileClass&&(y.className=e.tileClass);var b={gd:y,td:y,layout:l,data:c,config:{staticPlot:e.staticPlot===void 0||e.staticPlot,plotGlPixelRatio:e.plotGlPixelRatio===void 0?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return e.setBackground!=="transparent"&&(b.config.setBackground=e.setBackground||"opaque"),b.gd.defaultLayout=h(e.tileClass),b}},7239:function(W,I,o){var T=o(71828),k=o(403),r=o(22435),m=o(25095);W.exports=function(h,s){var e;return T.isPlainObject(h)||(e=T.getGraphDiv(h)),(s=s||{}).format=s.format||"png",s.width=s.width||null,s.height=s.height||null,s.imageDataOnly=!0,new Promise(function(t,n){e&&e._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),T.isIE()&&s.format!=="svg"&&n(new Error(m.MSG_IE_BAD_FORMAT)),e&&(e._snapshotInProgress=!0);var a=k(h,s),i=s.filename||h.fn||"newplot";i+="."+s.format.replace("-","."),a.then(function(c){return e&&(e._snapshotInProgress=!1),r(c,i,s.format)}).then(function(c){t(c)}).catch(function(c){e&&(e._snapshotInProgress=!1),n(c)})})}},22435:function(W,I,o){var T=o(71828),k=o(25095);W.exports=function(r,m,h){var s=document.createElement("a"),e="download"in s;return new Promise(function(t,n){var a,i;if(T.isIE())return a=k.createBlob(r,"svg"),window.navigator.msSaveBlob(a,m),a=null,t(m);if(e)return a=k.createBlob(r,h),i=k.createObjectURL(a),s.href=i,s.download=m,document.body.appendChild(s),s.click(),document.body.removeChild(s),k.revokeObjectURL(i),a=null,t(m);if(T.isSafari()){var c=h==="svg"?",":";base64,";return k.octetStream(c+encodeURIComponent(r)),t(m)}n(new Error("download error"))})}},25095:function(W,I,o){var T=o(73972);I.getDelay=function(r){return r._has&&(r._has("gl3d")||r._has("gl2d")||r._has("mapbox"))?500:0},I.getRedrawFunc=function(r){return function(){T.getComponentMethod("colorbar","draw")(r)}},I.encodeSVG=function(r){return"data:image/svg+xml,"+encodeURIComponent(r)},I.encodeJSON=function(r){return"data:application/json,"+encodeURIComponent(r)};var k=window.URL||window.webkitURL;I.createObjectURL=function(r){return k.createObjectURL(r)},I.revokeObjectURL=function(r){return k.revokeObjectURL(r)},I.createBlob=function(r,m){if(m==="svg")return new window.Blob([r],{type:"image/svg+xml;charset=utf-8"});if(m==="full-json")return new window.Blob([r],{type:"application/json;charset=utf-8"});var h=function(s){for(var e=s.length,t=new ArrayBuffer(e),n=new Uint8Array(t),a=0;a<e;a++)n[a]=s.charCodeAt(a);return t}(window.atob(r));return new window.Blob([h],{type:"image/"+m})},I.octetStream=function(r){document.location.href="data:application/octet-stream"+r},I.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,I.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(W,I,o){var T=o(25095),k={getDelay:T.getDelay,getRedrawFunc:T.getRedrawFunc,clone:o(61914),toSVG:o(5900),svgToImg:o(70942),toImage:o(56395),downloadImage:o(7239)};W.exports=k},70942:function(W,I,o){var T=o(71828),k=o(15398).EventEmitter,r=o(25095);W.exports=function(m){var h=m.emitter||new k,s=new Promise(function(e,t){var n=window.Image,a=m.svg,i=m.format||"png";if(T.isIE()&&i!=="svg"){var c=new Error(r.MSG_IE_BAD_FORMAT);return t(c),m.promise?s:h.emit("error",c)}var l,u,f=m.canvas,d=m.scale||1,w=m.width||300,v=m.height||150,p=d*w,y=d*v,b=f.getContext("2d",{willReadFrequently:!0}),x=new n;i==="svg"||T.isSafari()?u=r.encodeSVG(a):(l=r.createBlob(a,"svg"),u=r.createObjectURL(l)),f.width=p,f.height=y,x.onload=function(){var _;switch(l=null,r.revokeObjectURL(u),i!=="svg"&&b.drawImage(x,0,0,p,y),i){case"jpeg":_=f.toDataURL("image/jpeg");break;case"png":_=f.toDataURL("image/png");break;case"webp":_=f.toDataURL("image/webp");break;case"svg":_=u;break;default:var g="Image format is not jpeg, png, svg or webp.";if(t(new Error(g)),!m.promise)return h.emit("error",g)}e(_),m.promise||h.emit("success",_)},x.onerror=function(_){if(l=null,r.revokeObjectURL(u),t(_),!m.promise)return h.emit("error",_)},x.src=u});return m.promise?s:h}},56395:function(W,I,o){var T=o(15398).EventEmitter,k=o(73972),r=o(71828),m=o(25095),h=o(61914),s=o(5900),e=o(70942);W.exports=function(t,n){var a=new T,i=h(t,{format:"png"}),c=i.gd;c.style.position="absolute",c.style.left="-5000px",document.body.appendChild(c);var l=m.getRedrawFunc(c);return k.call("_doPlot",c,i.data,i.layout,i.config).then(l).then(function(){var u=m.getDelay(c._fullLayout);setTimeout(function(){var f=s(c),d=document.createElement("canvas");d.id=r.randstr(),(a=e({format:n.format,width:c._fullLayout.width,height:c._fullLayout.height,canvas:d,emitter:a,svg:f})).clean=function(){c&&document.body.removeChild(c)}},u)}).catch(function(u){a.emit("error",u)}),a}},5900:function(W,I,o){var T=o(39898),k=o(71828),r=o(91424),m=o(7901),h=o(77922),s=/"/g,e="TOBESTRIPPED",t=new RegExp('("'+e+")|("+e+'")',"g");W.exports=function(n,a,i){var c,l=n._fullLayout,u=l._paper,f=l._toppaper,d=l.width,w=l.height;u.insert("rect",":first-child").call(r.setRect,0,0,d,w).call(m.fill,l.paper_bgcolor);var v=l._basePlotModules||[];for(c=0;c<v.length;c++){var p=v[c];p.toSVG&&p.toSVG(n)}if(f){var y=f.node().childNodes,b=Array.prototype.slice.call(y);for(c=0;c<b.length;c++){var x=b[c];x.childNodes.length&&u.node().appendChild(x)}}l._draggers&&l._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var g=T.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){g.style({visibility:null,display:null});var A=this.style.fontFamily;A&&A.indexOf('"')!==-1&&g.style("font-family",A.replace(s,e))}else g.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var g=T.select(this),A=this.style.fill;A&&A.indexOf("url(")!==-1&&g.style("fill",A.replace(s,e));var M=this.style.stroke;M&&M.indexOf("url(")!==-1&&g.style("stroke",M.replace(s,e))}),a!=="pdf"&&a!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(h.xmlns,"xmlns",h.svg),u.node().setAttributeNS(h.xmlns,"xmlns:xlink",h.xlink),a==="svg"&&i&&(u.attr("width",i*d),u.attr("height",i*w),u.attr("viewBox","0 0 "+d+" "+w));var _=new window.XMLSerializer().serializeToString(u.node());return _=(_=(_=function(g){var A=T.select("body").append("div").style({display:"none"}).html(""),M=g.replace(/(&[^;]*;)/gi,function(L){return L==="&lt;"?"&#60;":L==="&rt;"?"&#62;":L.indexOf("<")!==-1||L.indexOf(">")!==-1?"":A.html(L).text()});return A.remove(),M}(_)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},75341:function(W,I,o){var T=o(71828);W.exports=function(k,r){for(var m=0;m<k.length;m++)k[m].i=m;T.mergeArray(r.text,k,"tx"),T.mergeArray(r.hovertext,k,"htx");var h=r.marker;if(h){T.mergeArray(h.opacity,k,"mo",!0),T.mergeArray(h.color,k,"mc");var s=h.line;s&&(T.mergeArray(s.color,k,"mlc"),T.mergeArrayCastPositive(s.width,k,"mlw"))}}},1486:function(W,I,o){var T=o(82196),k=o(12663).axisHoverFormat,r=o(5386).fF,m=o(5386).si,h=o(50693),s=o(41940),e=o(97313),t=o(79952).u,n=o(1426).extendFlat,a=s({editType:"calc",arrayOk:!0,colorEditType:"style"}),i=n({},T.marker.line.width,{dflt:0}),c=n({width:i,editType:"calc"},h("marker.line")),l=n({line:c,editType:"calc"},h("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t});W.exports={x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:T.text,texttemplate:m({editType:"plot"},{keys:e.eventDataKeys}),hovertext:T.hovertext,hovertemplate:r({},{keys:e.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},a,{}),insidetextfont:n({},a,{}),outsidetextfont:n({},a,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},T.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:{marker:{opacity:T.selected.marker.opacity,color:T.selected.marker.color,editType:"style"},textfont:T.selected.textfont,editType:"style"},unselected:{marker:{opacity:T.unselected.marker.opacity,color:T.unselected.marker.color,editType:"style"},textfont:T.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(W,I,o){var T=o(89298),k=o(42973),r=o(52075).hasColorscale,m=o(78803),h=o(75341),s=o(66279);W.exports=function(e,t){var n,a,i,c,l,u,f=T.getFromId(e,t.xaxis||"x"),d=T.getFromId(e,t.yaxis||"y"),w={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(n=f.makeCalcdata(t,"x",w),i=d.makeCalcdata(t,"y"),c=k(t,d,"y",i),l=!!t.yperiodalignment,u="y"):(n=d.makeCalcdata(t,"y",w),i=f.makeCalcdata(t,"x"),c=k(t,f,"x",i),l=!!t.xperiodalignment,u="x"),a=c.vals;for(var v=Math.min(a.length,n.length),p=new Array(v),y=0;y<v;y++)p[y]={p:a[y],s:n[y]},l&&(p[y].orig_p=i[y],p[y][u+"End"]=c.ends[y],p[y][u+"Start"]=c.starts[y]),t.ids&&(p[y].id=String(t.ids[y]));return r(t,"marker")&&m(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&m(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),h(p,t),s(p,t),p}},97313:function(W){W.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(W,I,o){var T=o(92770),k=o(71828).isArrayOrTypedArray,r=o(50606).BADNUM,m=o(73972),h=o(89298),s=o(99082).getAxisGroup,e=o(61546);function t(v,p,y,b,x){if(b.length){var _,g,A,M;switch(function(L,E){var S,O;for(S=0;S<E.length;S++){var P,U=E[S],R=U[0].trace,j=R.type==="funnel"?R._base:R.base,B=R.orientation==="h"?R.xcalendar:R.ycalendar,z=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(k(j)){for(O=0;O<Math.min(j.length,U.length);O++)P=z(j[O],0,B),T(P)?(U[O].b=+P,U[O].hasB=1):U[O].b=0;for(;O<U.length;O++)U[O].b=0}else{P=z(j,0,B);var G=T(P);for(P=G?P:0,O=0;O<U.length;O++)U[O].b=P,G&&(U[O].hasB=1)}}}(y,b),x.mode){case"overlay":n(p,y,b,x);break;case"group":for(_=[],g=[],A=0;A<b.length;A++)(M=b[A])[0].trace.offset===void 0?g.push(M):_.push(M);g.length&&function(L,E,S,O,P){var U=new e(O,{posAxis:E,sepNegVal:!1,overlapNoMerge:!P.norm});(function(R,j,B,z){for(var G=R._fullLayout,V=B.positions,et=B.distinctPositions,J=B.minDiff,X=B.traces,Y=X.length,Z=V.length!==et.length,tt=J*(1-z.gap),rt=s(G,j._id)+X[0][0].trace.orientation,nt=G._alignmentOpts[rt]||{},ot=0;ot<Y;ot++){var ct,pt,gt=X[ot],kt=gt[0].trace,yt=nt[kt.alignmentgroup]||{},mt=Object.keys(yt.offsetGroups||{}).length,Ot=(ct=mt?tt/mt:Z?tt/Y:tt)*(1-(z.groupgap||0));pt=mt?((2*kt._offsetIndex+1-mt)*ct-Ot)/2:Z?((2*ot+1-Y)*ct-Ot)/2:-Ot/2;var vt=gt[0].t;vt.barwidth=Ot,vt.poffset=pt,vt.bargroupwidth=tt,vt.bardelta=J}B.binWidth=X[0][0].t.barwidth/100,i(B),c(j,B),l(j,B,Z)})(L,E,U,P),function(R,j){for(var B=R.traces,z=0;z<B.length;z++){var G=B[z];if(G[0].trace.base===void 0)for(var V=new e([G],{posAxis:j,sepNegVal:!0,overlapNoMerge:!0}),et=0;et<G.length;et++){var J=G[et];if(J.p!==r){var X=V.put(J.p,J.b+J.s);X&&(J.b=X)}}}}(U,E),P.norm?(f(U),d(S,U,P)):u(S,U)}(v,p,y,g,x),_.length&&n(p,y,_,x);break;case"stack":case"relative":for(_=[],g=[],A=0;A<b.length;A++)(M=b[A])[0].trace.base===void 0?g.push(M):_.push(M);g.length&&function(L,E,S,O,P){var U=new e(O,{posAxis:E,sepNegVal:P.mode==="relative",overlapNoMerge:!(P.norm||P.mode==="stack"||P.mode==="relative")});a(E,U,P),function(G,V,et){var J,X,Y,Z,tt,rt,nt=w(G),ot=V.traces;for(Z=0;Z<ot.length;Z++)if((X=(J=ot[Z])[0].trace).type==="funnel")for(tt=0;tt<J.length;tt++)(rt=J[tt]).s!==r&&V.put(rt.p,-.5*rt.s);for(Z=0;Z<ot.length;Z++){Y=(X=(J=ot[Z])[0].trace).type==="funnel";var ct=[];for(tt=0;tt<J.length;tt++)if((rt=J[tt]).s!==r){var pt;pt=Y?rt.s:rt.s+rt.b;var gt=V.put(rt.p,pt),kt=gt+pt;rt.b=gt,rt[nt]=kt,et.norm||(ct.push(kt),rt.hasB&&ct.push(gt))}et.norm||(X._extremes[G._id]=h.findExtremes(G,ct,{tozero:!0,padded:!0}))}}(S,U,P);for(var R=0;R<O.length;R++)for(var j=O[R],B=0;B<j.length;B++){var z=j[B];z.s!==r&&z.b+z.s===U.get(z.p,z.s)&&(z._outmost=!0)}P.norm&&d(S,U,P)}(0,p,y,g,x),_.length&&n(p,y,_,x)}(function(L,E){var S,O,P,U=w(E),R={},j=1/0,B=-1/0;for(S=0;S<L.length;S++)for(P=L[S],O=0;O<P.length;O++){var z=P[O].p;T(z)&&(j=Math.min(j,z),B=Math.max(B,z))}var G=1e4/(B-j),V=R.round=function(rt){return String(Math.round(G*(rt-j)))};for(S=0;S<L.length;S++){(P=L[S])[0].t.extents=R;var et=P[0].t.poffset,J=Array.isArray(et);for(O=0;O<P.length;O++){var X=P[O],Y=X[U]-X.w/2;if(T(Y)){var Z=X[U]+X.w/2,tt=V(X.p);R[tt]?R[tt]=[Math.min(Y,R[tt][0]),Math.max(Z,R[tt][1])]:R[tt]=[Y,Z]}X.p0=X.p+(J?et[O]:et),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s}}})(b,p)}}function n(v,p,y,b){for(var x=0;x<y.length;x++){var _=y[x],g=new e([_],{posAxis:v,sepNegVal:!1,overlapNoMerge:!b.norm});a(v,g,b),b.norm?(f(g),d(p,g,b)):u(p,g)}}function a(v,p,y){for(var b=p.minDiff,x=p.traces,_=b*(1-y.gap),g=_*(1-(y.groupgap||0)),A=-g/2,M=0;M<x.length;M++){var L=x[M][0].t;L.barwidth=g,L.poffset=A,L.bargroupwidth=_,L.bardelta=b}p.binWidth=x[0][0].t.barwidth/100,i(p),c(v,p),l(v,p)}function i(v){var p,y,b=v.traces;for(p=0;p<b.length;p++){var x,_=b[p],g=_[0],A=g.trace,M=g.t,L=A._offset||A.offset,E=M.poffset;if(k(L)){for(x=Array.prototype.slice.call(L,0,_.length),y=0;y<x.length;y++)T(x[y])||(x[y]=E);for(y=x.length;y<_.length;y++)x.push(E);M.poffset=x}else L!==void 0&&(M.poffset=L);var S=A._width||A.width,O=M.barwidth;if(k(S)){var P=Array.prototype.slice.call(S,0,_.length);for(y=0;y<P.length;y++)T(P[y])||(P[y]=O);for(y=P.length;y<_.length;y++)P.push(O);if(M.barwidth=P,L===void 0){for(x=[],y=0;y<_.length;y++)x.push(E+(O-P[y])/2);M.poffset=x}}else S!==void 0&&(M.barwidth=S,L===void 0&&(M.poffset=E+(O-S)/2))}}function c(v,p){for(var y=p.traces,b=w(v),x=0;x<y.length;x++)for(var _=y[x],g=_[0].t,A=g.poffset,M=Array.isArray(A),L=g.barwidth,E=Array.isArray(L),S=0;S<_.length;S++){var O=_[S],P=O.w=E?L[S]:L;O.p===void 0&&(O.p=O[b],O["orig_"+b]=O[b]);var U=(M?A[S]:A)+P/2;O[b]=O.p+U}}function l(v,p,y){var b=p.traces,x=p.minDiff/2;h.minDtick(v,p.minDiff,p.distinctPositions[0],y);for(var _=0;_<b.length;_++){var g,A,M,L,E=b[_],S=E[0],O=S.trace,P=[];for(L=0;L<E.length;L++)A=(g=E[L]).p-x,M=g.p+x,P.push(A,M);if(O.width||O.offset){var U=S.t,R=U.poffset,j=U.barwidth,B=Array.isArray(R),z=Array.isArray(j);for(L=0;L<E.length;L++){g=E[L];var G=B?R[L]:R,V=z?j[L]:j;M=(A=g.p+G)+V,P.push(A,M)}}O._extremes[v._id]=h.findExtremes(v,P,{padded:!1})}}function u(v,p){for(var y=p.traces,b=w(v),x=0;x<y.length;x++){for(var _=y[x],g=_[0].trace,A=g.type==="scatter",M=g.orientation==="v",L=[],E=!1,S=0;S<_.length;S++){var O=_[S],P=A?0:O.b,U=A?M?O.y:O.x:P+O.s;O[b]=U,L.push(U),O.hasB&&L.push(P),O.hasB&&O.b||(E=!0)}g._extremes[v._id]=h.findExtremes(v,L,{tozero:E,padded:!0})}}function f(v){for(var p=v.traces,y=0;y<p.length;y++)for(var b=p[y],x=0;x<b.length;x++){var _=b[x];_.s!==r&&v.put(_.p,_.b+_.s)}}function d(v,p,y){var b=p.traces,x=w(v),_=y.norm==="fraction"?1:100,g=_/1e9,A=v.l2c(v.c2l(0)),M=y.mode==="stack"?_:A;function L(et){return T(v.c2l(et))&&(et<A-g||et>M+g||!T(A))}for(var E=0;E<b.length;E++){for(var S=b[E],O=S[0].trace,P=[],U=!1,R=!1,j=0;j<S.length;j++){var B=S[j];if(B.s!==r){var z=Math.abs(_/p.get(B.p,B.s));B.b*=z,B.s*=z;var G=B.b,V=G+B.s;B[x]=V,P.push(V),R=R||L(V),B.hasB&&(P.push(G),R=R||L(G)),B.hasB&&B.b||(U=!0)}}O._extremes[v._id]=h.findExtremes(v,P,{tozero:U,padded:R})}}function w(v){return v._id.charAt(0)}W.exports={crossTraceCalc:function(v,p){for(var y=p.xaxis,b=p.yaxis,x=v._fullLayout,_=v._fullData,g=v.calcdata,A=[],M=[],L=0;L<_.length;L++){var E=_[L];if(E.visible===!0&&m.traceIs(E,"bar")&&E.xaxis===y._id&&E.yaxis===b._id&&(E.orientation==="h"?A.push(g[L]):M.push(g[L]),E._computePh))for(var S=v.calcdata[L],O=0;O<S.length;O++)typeof S[O].ph0=="function"&&(S[O].ph0=S[O].ph0()),typeof S[O].ph1=="function"&&(S[O].ph1=S[O].ph1())}var P={xCat:y.type==="category"||y.type==="multicategory",yCat:b.type==="category"||b.type==="multicategory",mode:x.barmode,norm:x.barnorm,gap:x.bargap,groupgap:x.bargroupgap};t(v,y,b,M,P),t(v,b,y,A,P)},setGroupPositions:t}},90769:function(W,I,o){var T=o(71828),k=o(7901),r=o(73972),m=o(67513),h=o(73927),s=o(98340),e=o(26125),t=o(1486),n=T.coerceFont;function a(i,c,l,u,f,d){var w=(d=d||{}).moduleHasSelected!==!1,v=d.moduleHasUnselected!==!1,p=d.moduleHasConstrain!==!1,y=d.moduleHasCliponaxis!==!1,b=d.moduleHasTextangle!==!1,x=d.moduleHasInsideanchor!==!1,_=!!d.hasPathbar,g=Array.isArray(f)||f==="auto",A=g||f==="inside",M=g||f==="outside";if(A||M){var L=n(u,"textfont",l.font),E=T.extendFlat({},L),S=!(i.textfont&&i.textfont.color);if(S&&delete E.color,n(u,"insidetextfont",E),_){var O=T.extendFlat({},L);S&&delete O.color,n(u,"pathbar.textfont",O)}M&&n(u,"outsidetextfont",L),w&&u("selected.textfont.color"),v&&u("unselected.textfont.color"),p&&u("constraintext"),y&&u("cliponaxis"),b&&u("textangle"),u("texttemplate")}A&&x&&u("insidetextanchor")}W.exports={supplyDefaults:function(i,c,l,u){function f(p,y){return T.coerce(i,c,t,p,y)}if(m(i,c,u,f)){h(i,c,u,f),f("xhoverformat"),f("yhoverformat"),f("orientation",c.x&&!c.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate");var d=f("textposition");a(i,0,u,f,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(i,c,f,l,u);var w=(c.marker.line||{}).color,v=r.getComponentMethod("errorbars","supplyDefaults");v(i,c,w||k.defaultLine,{axis:"y"}),v(i,c,w||k.defaultLine,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(c,f)}else c.visible=!1},crossTraceDefaults:function(i,c){var l,u;function f(w){return T.coerce(u._input,u,t,w)}if(c.barmode==="group")for(var d=0;d<i.length;d++)(u=i[d]).type==="bar"&&(l=u._input,e(l,u,c,f))},handleText:a}},58065:function(W){W.exports=function(I,o,T){return I.x="xVal"in o?o.xVal:o.x,I.y="yVal"in o?o.yVal:o.y,o.xa&&(I.xaxis=o.xa),o.ya&&(I.yaxis=o.ya),T.orientation==="h"?(I.label=I.y,I.value=I.x):(I.label=I.x,I.value=I.y),I}},69383:function(W,I,o){var T=o(92770),k=o(84267),r=o(71828).isArrayOrTypedArray;I.coerceString=function(m,h,s){if(typeof h=="string"){if(h||!m.noBlank)return h}else if((typeof h=="number"||h===!0)&&!m.strict)return String(h);return s!==void 0?s:m.dflt},I.coerceNumber=function(m,h,s){if(T(h)){h=+h;var e=m.min,t=m.max;if(!(e!==void 0&&h<e||t!==void 0&&h>t))return h}return s!==void 0?s:m.dflt},I.coerceColor=function(m,h,s){return k(h).isValid()?h:s!==void 0?s:m.dflt},I.coerceEnumerated=function(m,h,s){return m.coerceNumber&&(h=+h),m.values.indexOf(h)!==-1?h:s!==void 0?s:m.dflt},I.getValue=function(m,h){var s;return Array.isArray(m)?h<m.length&&(s=m[h]):s=m,s},I.getLineWidth=function(m,h){return 0<h.mlw?h.mlw:r(m.marker.line.width)?0:m.marker.line.width}},95423:function(W,I,o){var T=o(30211),k=o(73972),r=o(7901),m=o(71828).fillText,h=o(69383).getLineWidth,s=o(89298).hoverLabelText,e=o(50606).BADNUM;function t(a,i,c,l,u){var f,d,w,v,p,y,b,x=a.cd,_=x[0].trace,g=x[0].t,A=l==="closest",M=_.type==="waterfall",L=a.maxHoverDistance,E=a.maxSpikeDistance;_.orientation==="h"?(f=c,d=i,w="y",v="x",p=J,y=V):(f=i,d=c,w="x",v="y",y=J,p=V);var S=_[w+"period"],O=A||S;function P(ct){return R(ct,-1)}function U(ct){return R(ct,1)}function R(ct,pt){var gt=ct.w;return ct[w]+pt*gt/2}function j(ct){return ct[w+"End"]-ct[w+"Start"]}var B=A?P:S?function(ct){return ct.p-j(ct)/2}:function(ct){return Math.min(P(ct),ct.p-g.bardelta/2)},z=A?U:S?function(ct){return ct.p+j(ct)/2}:function(ct){return Math.max(U(ct),ct.p+g.bardelta/2)};function G(ct,pt,gt){return u.finiteRange&&(gt=0),T.inbox(ct-f,pt-f,gt+Math.min(1,Math.abs(pt-ct)/b)-1)}function V(ct){return G(B(ct),z(ct),L)}function et(ct){var pt=ct[v];if(M){var gt=Math.abs(ct.rawS)||0;d>0?pt+=gt:d<0&&(pt-=gt)}return pt}function J(ct){var pt=d,gt=ct.b,kt=et(ct);return T.inbox(gt-pt,kt-pt,L+(kt-pt)/(kt-gt)-1)}var X=a[w+"a"],Y=a[v+"a"];b=Math.abs(X.r2c(X.range[1])-X.r2c(X.range[0]));var Z=T.getDistanceFunction(l,p,y,function(ct){return(p(ct)+y(ct))/2});if(T.getClosest(x,Z,a),a.index!==!1&&x[a.index].p!==e){O||(B=function(ct){return Math.min(P(ct),ct.p-g.bargroupwidth/2)},z=function(ct){return Math.max(U(ct),ct.p+g.bargroupwidth/2)});var tt=x[a.index],rt=_.base?tt.b+tt.s:tt.s;a[v+"0"]=a[v+"1"]=Y.c2p(tt[v],!0),a[v+"LabelVal"]=rt;var nt=g.extents[g.extents.round(tt.p)];a[w+"0"]=X.c2p(A?B(tt):nt[0],!0),a[w+"1"]=X.c2p(A?z(tt):nt[1],!0);var ot=tt.orig_p!==void 0;return a[w+"LabelVal"]=ot?tt.orig_p:tt.p,a.labelLabel=s(X,a[w+"LabelVal"],_[w+"hoverformat"]),a.valueLabel=s(Y,a[v+"LabelVal"],_[v+"hoverformat"]),a.baseLabel=s(Y,tt.b,_[v+"hoverformat"]),a.spikeDistance=(function(ct){var pt=d,gt=ct.b,kt=et(ct);return T.inbox(gt-pt,kt-pt,E+(kt-pt)/(kt-gt)-1)}(tt)+function(ct){return G(P(ct),U(ct),E)}(tt))/2,a[w+"Spike"]=X.c2p(tt.p,!0),m(tt,_,a),a.hovertemplate=_.hovertemplate,a}}function n(a,i){var c=i.mcc||a.marker.color,l=i.mlcc||a.marker.line.color,u=h(a,i);return r.opacity(c)?c:r.opacity(l)&&u?l:void 0}W.exports={hoverPoints:function(a,i,c,l,u){var f=t(a,i,c,l,u);if(f){var d=f.cd,w=d[0].trace,v=d[f.index];return f.color=n(w,v),k.getComponentMethod("errorbars","hoverInfo")(v,w,f),[f]}},hoverOnBars:t,getTraceColor:n}},60822:function(W,I,o){W.exports={attributes:o(1486),layoutAttributes:o(43641),supplyDefaults:o(90769).supplyDefaults,crossTraceDefaults:o(90769).crossTraceDefaults,supplyLayoutDefaults:o(13957),calc:o(92290),crossTraceCalc:o(11661).crossTraceCalc,colorbar:o(4898),arraysToCalcdata:o(75341),plot:o(17295).plot,style:o(16688).style,styleOnSelect:o(16688).styleOnSelect,hoverPoints:o(95423).hoverPoints,eventData:o(58065),selectPoints:o(81974),moduleType:"trace",name:"bar",basePlotModule:o(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(W){W.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(W,I,o){var T=o(73972),k=o(89298),r=o(71828),m=o(43641);W.exports=function(h,s,e){function t(w,v){return r.coerce(h,s,m,w,v)}for(var n=!1,a=!1,i=!1,c={},l=t("barmode"),u=0;u<e.length;u++){var f=e[u];if(T.traceIs(f,"bar")&&f.visible){if(n=!0,l==="group"){var d=f.xaxis+f.yaxis;c[d]&&(i=!0),c[d]=!0}f.visible&&f.type==="histogram"&&k.getFromId({_fullLayout:s},f[f.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(a=!0)}}n?(l!=="overlay"&&t("barnorm"),t("bargap",a&&!i?0:.2),t("bargroupgap")):delete s.barmode}},17295:function(W,I,o){var T=o(39898),k=o(92770),r=o(71828),m=o(63893),h=o(7901),s=o(91424),e=o(73972),t=o(89298).tickText,n=o(72597),a=n.recordMinTextSize,i=n.clearMinTextSize,c=o(16688),l=o(69383),u=o(97313),f=o(1486),d=f.text,w=f.textposition,v=o(23469).appendArrayPointValue,p=u.TEXTPAD;function y(E){return E.id}function b(E){if(E.ids)return y}function x(E,S){return E<S?1:-1}function _(E,S,O,P){var U;return!S.uniformtext.mode&&g(O)?(P&&(U=P()),E.transition().duration(O.duration).ease(O.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()})):E}function g(E){return E&&E.duration>0}function A(E){return E==="auto"?0:E}function M(E,S){var O=Math.PI/180*S,P=Math.abs(Math.sin(O)),U=Math.abs(Math.cos(O));return{x:E.width*U+E.height*P,y:E.width*P+E.height*U}}function L(E,S,O,P,U,R){var j=!!R.isHorizontal,B=!!R.constrained,z=R.angle||0,G=R.anchor||"end",V=G==="end",et=G==="start",J=((R.leftToRight||0)+1)/2,X=1-J,Y=U.width,Z=U.height,tt=Math.abs(S-E),rt=Math.abs(P-O),nt=tt>2*p&&rt>2*p?p:0;tt-=2*nt,rt-=2*nt;var ot=A(z);z!=="auto"||Y<=tt&&Z<=rt||!(Y>tt||Z>rt)||(Y>rt||Z>tt)&&Y<Z==tt<rt||(ot+=90);var ct=M(U,ot),pt=1;B&&(pt=Math.min(1,tt/ct.x,rt/ct.y));var gt=U.left*X+U.right*J,kt=(U.top+U.bottom)/2,yt=(E+p)*X+(S-p)*J,mt=(O+P)/2,Ot=0,vt=0;if(et||V){var xt=(j?ct.x:ct.y)/2,st=j?x(E,S):x(O,P);j?et?(yt=E+st*nt,Ot=-st*xt):(yt=S-st*nt,Ot=st*xt):et?(mt=O+st*nt,vt=-st*xt):(mt=P-st*nt,vt=st*xt)}return{textX:gt,textY:kt,targetX:yt,targetY:mt,anchorX:Ot,anchorY:vt,scale:pt,rotate:ot}}W.exports={plot:function(E,S,O,P,U,R){var j=S.xaxis,B=S.yaxis,z=E._fullLayout,G=E._context.staticPlot;U||(U={mode:z.barmode,norm:z.barmode,gap:z.bargap,groupgap:z.bargroupgap},i("bar",z));var V=r.makeTraceGroups(P,O,"trace bars").each(function(et){var J=T.select(this),X=et[0].trace,Y=X.type==="waterfall",Z=X.type==="funnel",tt=X.type==="bar"||Z,rt=0;Y&&X.connector.visible&&X.connector.mode==="between"&&(rt=X.connector.line.width/2);var nt=X.orientation==="h",ot=g(U),ct=r.ensureSingle(J,"g","points"),pt=b(X),gt=ct.selectAll("g.point").data(r.identity,pt);gt.enter().append("g").classed("point",!0),gt.exit().remove(),gt.each(function(yt,mt){var Ot,vt,xt=T.select(this),st=function(It,zt,Ft,$t){var Wt=[],Xt=[],ae=$t?zt:Ft,Qt=$t?Ft:zt;return Wt[0]=ae.c2p(It.s0,!0),Xt[0]=Qt.c2p(It.p0,!0),Wt[1]=ae.c2p(It.s1,!0),Xt[1]=Qt.c2p(It.p1,!0),$t?[Wt,Xt]:[Xt,Wt]}(yt,j,B,nt),at=st[0][0],ht=st[0][1],Lt=st[1][0],Mt=st[1][1],_t=(nt?ht-at:Mt-Lt)==0;if(_t&&tt&&l.getLineWidth(X,yt)&&(_t=!1),_t||(_t=!(k(at)&&k(ht)&&k(Lt)&&k(Mt))),yt.isBlank=_t,_t&&(nt?ht=at:Mt=Lt),rt&&!_t&&(nt?(at-=x(at,ht)*rt,ht+=x(at,ht)*rt):(Lt-=x(Lt,Mt)*rt,Mt+=x(Lt,Mt)*rt)),X.type==="waterfall"){if(!_t){var St=X[yt.dir].marker;Ot=St.line.width,vt=St.color}}else Ot=l.getLineWidth(X,yt),vt=yt.mc||X.marker.color;function Dt(It){var zt=T.round(Ot/2%1,2);return U.gap===0&&U.groupgap===0?T.round(Math.round(It)-zt,2):It}if(!E._context.staticPlot){var ut=h.opacity(vt)<1||Ot>.01?Dt:function(It,zt,Ft){return Ft&&It===zt?It:Math.abs(It-zt)>=2?Dt(It):It>zt?Math.ceil(It):Math.floor(It)};at=ut(at,ht,nt),ht=ut(ht,at,nt),Lt=ut(Lt,Mt,!nt),Mt=ut(Mt,Lt,!nt)}var Tt=_(r.ensureSingle(xt,"path"),z,U,R);if(Tt.style("vector-effect",G?"none":"non-scaling-stroke").attr("d",isNaN((ht-at)*(Mt-Lt))||_t&&E._context.staticPlot?"M0,0Z":"M"+at+","+Lt+"V"+Mt+"H"+ht+"V"+Lt+"Z").call(s.setClipUrl,S.layerClipId,E),!z.uniformtext.mode&&ot){var bt=s.makePointStyleFns(X);s.singlePointStyle(yt,Tt,X,bt,E)}(function(It,zt,Ft,$t,Wt,Xt,ae,Qt,de,ye,ve){var ie,se=zt.xaxis,ke=zt.yaxis,Ae=It._fullLayout;function Ie(tr,Ge,Ze){return r.ensureSingle(tr,"text").text(Ge).attr({class:"bartext bartext-"+ie,"text-anchor":"middle","data-notex":1}).call(s.font,Ze).call(m.convertToTspans,It)}var Te=$t[0].trace,Vt=Te.orientation==="h",Zt=function(tr,Ge,Ze,We,pr){var xr,sr=Ge[0].trace;return xr=sr.texttemplate?function($e,ir,Ke,ar,fr){var mr=ir[0].trace,Cr=r.castOption(mr,Ke,"texttemplate");if(!Cr)return"";var Er,_r,Sr,Xr,en=mr.type==="histogram",sn=mr.type==="waterfall",tn=mr.type==="funnel",qr=mr.orientation==="h";function vn(Pr){return t(Xr,Xr.c2l(Pr),!0).text}qr?(Er="y",_r=fr,Sr="x",Xr=ar):(Er="x",_r=ar,Sr="y",Xr=fr);var je,nr=ir[Ke],hr={};hr.label=nr.p,hr.labelLabel=hr[Er+"Label"]=(je=nr.p,t(_r,_r.c2l(je),!0).text);var gr=r.castOption(mr,nr.i,"text");(gr===0||gr)&&(hr.text=gr),hr.value=nr.s,hr.valueLabel=hr[Sr+"Label"]=vn(nr.s);var Mr={};v(Mr,mr,nr.i),(en||Mr.x===void 0)&&(Mr.x=qr?hr.value:hr.label),(en||Mr.y===void 0)&&(Mr.y=qr?hr.label:hr.value),(en||Mr.xLabel===void 0)&&(Mr.xLabel=qr?hr.valueLabel:hr.labelLabel),(en||Mr.yLabel===void 0)&&(Mr.yLabel=qr?hr.labelLabel:hr.valueLabel),sn&&(hr.delta=+nr.rawS||nr.s,hr.deltaLabel=vn(hr.delta),hr.final=nr.v,hr.finalLabel=vn(hr.final),hr.initial=hr.final-hr.delta,hr.initialLabel=vn(hr.initial)),tn&&(hr.value=nr.s,hr.valueLabel=vn(hr.value),hr.percentInitial=nr.begR,hr.percentInitialLabel=r.formatPercent(nr.begR),hr.percentPrevious=nr.difR,hr.percentPreviousLabel=r.formatPercent(nr.difR),hr.percentTotal=nr.sumR,hr.percenTotalLabel=r.formatPercent(nr.sumR));var Hr=r.castOption(mr,nr.i,"customdata");return Hr&&(hr.customdata=Hr),r.texttemplateString(Cr,hr,$e._d3locale,Mr,hr,mr._meta||{})}(tr,Ge,Ze,We,pr):sr.textinfo?function($e,ir,Ke,ar){var fr=$e[0].trace,mr=fr.orientation==="h",Cr=fr.type==="waterfall",Er=fr.type==="funnel";function _r(Hr){return t(mr?Ke:ar,+Hr,!0).text}var Sr,Xr,en=fr.textinfo,sn=$e[ir],tn=en.split("+"),qr=[],vn=function(Hr){return tn.indexOf(Hr)!==-1};if(vn("label")&&qr.push((Xr=$e[ir].p,t(mr?ar:Ke,Xr,!0).text)),vn("text")&&((Sr=r.castOption(fr,sn.i,"text"))===0||Sr)&&qr.push(Sr),Cr){var je=+sn.rawS||sn.s,nr=sn.v,hr=nr-je;vn("initial")&&qr.push(_r(hr)),vn("delta")&&qr.push(_r(je)),vn("final")&&qr.push(_r(nr))}if(Er){vn("value")&&qr.push(_r(sn.s));var gr=0;vn("percent initial")&&gr++,vn("percent previous")&&gr++,vn("percent total")&&gr++;var Mr=gr>1;vn("percent initial")&&(Sr=r.formatPercent(sn.begR),Mr&&(Sr+=" of initial"),qr.push(Sr)),vn("percent previous")&&(Sr=r.formatPercent(sn.difR),Mr&&(Sr+=" of previous"),qr.push(Sr)),vn("percent total")&&(Sr=r.formatPercent(sn.sumR),Mr&&(Sr+=" of total"),qr.push(Sr))}return qr.join("<br>")}(Ge,Ze,We,pr):l.getValue(sr.text,Ze),l.coerceString(d,xr)}(Ae,$t,Wt,se,ke);ie=function(tr,Ge){var Ze=l.getValue(tr.textposition,Ge);return l.coerceEnumerated(w,Ze)}(Te,Wt);var Gt=ye.mode==="stack"||ye.mode==="relative",Yt=$t[Wt],ne=!Gt||Yt._outmost;if(Zt&&ie!=="none"&&(!Yt.isBlank&&Xt!==ae&&Qt!==de||ie!=="auto"&&ie!=="inside")){var re=Ae.font,Pt=c.getBarColor($t[Wt],Te),Nt=c.getInsideTextFont(Te,Wt,re,Pt),ee=c.getOutsideTextFont(Te,Wt,re),te=Ft.datum();Vt?se.type==="log"&&te.s0<=0&&(Xt=se.range[0]<se.range[1]?0:se._length):ke.type==="log"&&te.s0<=0&&(Qt=ke.range[0]<ke.range[1]?ke._length:0);var ge,pe,me,ce,we,ue=Math.abs(ae-Xt)-2*p,he=Math.abs(de-Qt)-2*p;if(ie==="outside"&&(ne||Yt.hasB||(ie="inside")),ie==="auto"&&(ne?(ie="inside",ge=Ie(Ft,Zt,we=r.ensureUniformFontSize(It,Nt)),me=(pe=s.bBox(ge.node())).width,ce=pe.height,me>0&&ce>0&&(me<=ue&&ce<=he||me<=he&&ce<=ue||(Vt?ue>=me*(he/ce):he>=ce*(ue/me)))?ie="inside":(ie="outside",ge.remove(),ge=null)):ie="inside"),!ge){var be=(ge=Ie(Ft,Zt,we=r.ensureUniformFontSize(It,ie==="outside"?ee:Nt))).attr("transform");if(ge.attr("transform",""),me=(pe=s.bBox(ge.node())).width,ce=pe.height,ge.attr("transform",be),me<=0||ce<=0)return void ge.remove()}var Pe,De=Te.textangle;Pe=ie==="outside"?function(tr,Ge,Ze,We,pr,xr){var sr,$e=!!xr.isHorizontal,ir=!!xr.constrained,Ke=xr.angle||0,ar=pr.width,fr=pr.height,mr=Math.abs(Ge-tr),Cr=Math.abs(We-Ze);sr=$e?Cr>2*p?p:0:mr>2*p?p:0;var Er=1;ir&&(Er=$e?Math.min(1,Cr/fr):Math.min(1,mr/ar));var _r=A(Ke),Sr=M(pr,_r),Xr=($e?Sr.x:Sr.y)/2,en=(pr.left+pr.right)/2,sn=(pr.top+pr.bottom)/2,tn=(tr+Ge)/2,qr=(Ze+We)/2,vn=0,je=0,nr=$e?x(Ge,tr):x(Ze,We);return $e?(tn=Ge-nr*sr,vn=nr*Xr):(qr=We+nr*sr,je=-nr*Xr),{textX:en,textY:sn,targetX:tn,targetY:qr,anchorX:vn,anchorY:je,scale:Er,rotate:_r}}(Xt,ae,Qt,de,pe,{isHorizontal:Vt,constrained:Te.constraintext==="both"||Te.constraintext==="outside",angle:De}):L(Xt,ae,Qt,de,pe,{isHorizontal:Vt,constrained:Te.constraintext==="both"||Te.constraintext==="inside",angle:De,anchor:Te.insidetextanchor}),Pe.fontSize=we.size,a(Te.type==="histogram"?"bar":Te.type,Pe,Ae),Yt.transform=Pe;var Ue=_(ge,Ae,ye,ve);r.setTransormAndDisplay(Ue,Pe)}else Ft.select("text").remove()})(E,S,xt,et,mt,at,ht,Lt,Mt,U,R),S.layerClipId&&s.hideOutsideRangePoint(yt,xt.select("text"),j,B,X.xcalendar,X.ycalendar)});var kt=X.cliponaxis===!1;s.setClipUrl(J,kt?null:S.layerClipId,E)});e.getComponentMethod("errorbars","plot")(E,V,S,U)},toMoveInsideBar:L}},81974:function(W){function I(o,T,k,r,m){var h=T.c2p(r?o.s0:o.p0,!0),s=T.c2p(r?o.s1:o.p1,!0),e=k.c2p(r?o.p0:o.s0,!0),t=k.c2p(r?o.p1:o.s1,!0);return m?[(h+s)/2,(e+t)/2]:r?[s,(e+t)/2]:[(h+s)/2,t]}W.exports=function(o,T){var k,r=o.cd,m=o.xaxis,h=o.yaxis,s=r[0].trace,e=s.type==="funnel",t=s.orientation==="h",n=[];if(T===!1)for(k=0;k<r.length;k++)r[k].selected=0;else for(k=0;k<r.length;k++){var a=r[k],i="ct"in a?a.ct:I(a,m,h,t,e);T.contains(i,!1,k,o)?(n.push({pointNumber:k,x:m.c2d(a.x),y:h.c2d(a.y)}),a.selected=1):a.selected=0}return n}},61546:function(W,I,o){W.exports=k;var T=o(71828).distinctVals;function k(r,m){this.traces=r,this.sepNegVal=m.sepNegVal,this.overlapNoMerge=m.overlapNoMerge;for(var h=1/0,s=m.posAxis._id.charAt(0),e=[],t=0;t<r.length;t++){for(var n=r[t],a=0;a<n.length;a++){var i=n[a],c=i.p;c===void 0&&(c=i[s]),c!==void 0&&e.push(c)}n[0]&&n[0].width1&&(h=Math.min(n[0].width1,h))}this.positions=e;var l=T(e);this.distinctPositions=l.vals,l.vals.length===1&&h!==1/0?this.minDiff=h:this.minDiff=Math.min(l.minDiff,h);var u=(m.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(r,m){var h=this.getLabel(r,m),s=this.bins[h]||0;return this.bins[h]=s+m,s},k.prototype.get=function(r,m){var h=this.getLabel(r,m);return this.bins[h]||0},k.prototype.getLabel=function(r,m){return(m<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?r:Math.round(r/this.binWidth))}},16688:function(W,I,o){var T=o(39898),k=o(7901),r=o(91424),m=o(71828),h=o(73972),s=o(72597).resizeText,e=o(1486),t=e.textfont,n=e.insidetextfont,a=e.outsidetextfont,i=o(69383);function c(y,b,x){r.pointStyle(y.selectAll("path"),b,x),l(y,b,x)}function l(y,b,x){y.selectAll("text").each(function(_){var g=T.select(this),A=m.ensureUniformFontSize(x,u(g,_,b,x));r.font(g,A)})}function u(y,b,x,_){var g=_._fullLayout.font,A=x.textfont;if(y.classed("bartext-inside")){var M=p(b,x);A=d(x,b.i,g,M)}else y.classed("bartext-outside")&&(A=w(x,b.i,g));return A}function f(y,b,x){return v(t,y.textfont,b,x)}function d(y,b,x,_){var g=f(y,b,x);return(y._input.textfont===void 0||y._input.textfont.color===void 0||Array.isArray(y.textfont.color)&&y.textfont.color[b]===void 0)&&(g={color:k.contrast(_),family:g.family,size:g.size}),v(n,y.insidetextfont,b,g)}function w(y,b,x){var _=f(y,b,x);return v(a,y.outsidetextfont,b,_)}function v(y,b,x,_){b=b||{};var g=i.getValue(b.family,x),A=i.getValue(b.size,x),M=i.getValue(b.color,x);return{family:i.coerceString(y.family,g,_.family),size:i.coerceNumber(y.size,A,_.size),color:i.coerceColor(y.color,M,_.color)}}function p(y,b){return b.type==="waterfall"?b[y.dir].marker.color:y.mcc||y.mc||b.marker.color}W.exports={style:function(y){var b=T.select(y).selectAll("g.barlayer").selectAll("g.trace");s(y,b,"bar");var x=b.size(),_=y._fullLayout;b.style("opacity",function(g){return g[0].trace.opacity}).each(function(g){(_.barmode==="stack"&&x>1||_.bargap===0&&_.bargroupgap===0&&!g[0].trace.marker.line.width)&&T.select(this).attr("shape-rendering","crispEdges")}),b.selectAll("g.points").each(function(g){c(T.select(this),g[0].trace,y)}),h.getComponentMethod("errorbars","style")(b)},styleTextPoints:l,styleOnSelect:function(y,b,x){var _=b[0].trace;_.selectedpoints?function(g,A,M){r.selectedPointStyle(g.selectAll("path"),A),function(L,E,S){L.each(function(O){var P,U=T.select(this);if(O.selected){P=m.ensureUniformFontSize(S,u(U,O,E,S));var R=E.selected.textfont&&E.selected.textfont.color;R&&(P.color=R),r.font(U,P)}else r.selectedTextStyle(U,E)})}(g.selectAll("text"),A,M)}(x,_,y):(c(x,_,y),h.getComponentMethod("errorbars","style")(x))},getInsideTextFont:d,getOutsideTextFont:w,getBarColor:p,resizeText:s}},98340:function(W,I,o){var T=o(7901),k=o(52075).hasColorscale,r=o(1586),m=o(71828).coercePattern;W.exports=function(h,s,e,t,n){var a=e("marker.color",t),i=k(h,"marker");i&&r(h,s,n,e,{prefix:"marker.",cLetter:"c"}),e("marker.line.color",T.defaultLine),k(h,"marker.line")&&r(h,s,n,e,{prefix:"marker.line.",cLetter:"c"}),e("marker.line.width"),e("marker.opacity"),m(e,"marker.pattern",a,i),e("selected.marker.color"),e("unselected.marker.color")}},72597:function(W,I,o){var T=o(39898),k=o(71828);function r(m){return"_"+m+"Text_minsize"}W.exports={recordMinTextSize:function(m,h,s){if(s.uniformtext.mode){var e=r(m),t=s.uniformtext.minsize,n=h.scale*h.fontSize;h.hide=n<t,s[e]=s[e]||1/0,h.hide||(s[e]=Math.min(s[e],Math.max(n,t)))}},clearMinTextSize:function(m,h){h[r(m)]=void 0},resizeText:function(m,h,s){var e=m._fullLayout,t=e["_"+s+"Text_minsize"];if(t){var n,a=e.uniformtext.mode==="hide";switch(s){case"funnelarea":case"pie":case"sunburst":n="g.slice";break;case"treemap":case"icicle":n="g.slice, g.pathbar";break;default:n="g.points > g.point"}h.selectAll(n).each(function(i){var c=i.transform;if(c){c.scale=a&&c.hide?0:t/c.fontSize;var l=T.select(this).select("text");k.setTransormAndDisplay(l,c)}})}}}},55023:function(W,I,o){var T=o(5386).fF,k=o(1426).extendFlat,r=o(81245),m=o(1486);W.exports={r:r.r,theta:r.theta,r0:r.r0,dr:r.dr,theta0:r.theta0,dtheta:r.dtheta,thetaunit:r.thetaunit,base:k({},m.base,{}),offset:k({},m.offset,{}),width:k({},m.width,{}),text:k({},m.text,{}),hovertext:k({},m.hovertext,{}),marker:m.marker,hoverinfo:r.hoverinfo,hovertemplate:T(),selected:m.selected,unselected:m.unselected}},74692:function(W,I,o){var T=o(52075).hasColorscale,k=o(78803),r=o(75341),m=o(11661).setGroupPositions,h=o(66279),s=o(73972).traceIs,e=o(71828).extendFlat;W.exports={calc:function(t,n){for(var a=t._fullLayout,i=n.subplot,c=a[i].radialaxis,l=a[i].angularaxis,u=c.makeCalcdata(n,"r"),f=l.makeCalcdata(n,"theta"),d=n._length,w=new Array(d),v=u,p=f,y=0;y<d;y++)w[y]={p:p[y],s:v[y]};function b(x){var _=n[x];_!==void 0&&(n["_"+x]=Array.isArray(_)?l.makeCalcdata(n,x):l.d2c(_,n.thetaunit))}return l.type==="linear"&&(b("width"),b("offset")),T(n,"marker")&&k(t,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),T(n,"marker.line")&&k(t,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),r(w,n),h(w,n),w},crossTraceCalc:function(t,n,a){for(var i=t.calcdata,c=[],l=0;l<i.length;l++){var u=i[l],f=u[0].trace;f.visible===!0&&s(f,"bar")&&f.subplot===a&&c.push(u)}var d=e({},n.radialaxis,{_id:"x"}),w=n.angularaxis;m(t,w,d,c,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},6135:function(W,I,o){var T=o(71828),k=o(22184).handleRThetaDefaults,r=o(98340),m=o(55023);W.exports=function(h,s,e,t){function n(a,i){return T.coerce(h,s,m,a,i)}k(h,s,t,n)?(n("thetaunit"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate"),r(h,s,n,e,t),T.coerceSelectionMarkerOpacity(s,n)):s.visible=!1}},27379:function(W,I,o){var T=o(30211),k=o(71828),r=o(95423).getTraceColor,m=k.fillText,h=o(59150).makeHoverPointText,s=o(10869).isPtInsidePolygon;W.exports=function(e,t,n){var a=e.cd,i=a[0].trace,c=e.subplot,l=c.radialAxis,u=c.angularAxis,f=c.vangles,d=f?s:k.isPtInsideSector,w=e.maxHoverDistance,v=u._period||2*Math.PI,p=Math.abs(l.g2p(Math.sqrt(t*t+n*n))),y=Math.atan2(n,t);if(l.range[0]>l.range[1]&&(y+=Math.PI),T.getClosest(a,function(_){return d(p,y,[_.rp0,_.rp1],[_.thetag0,_.thetag1],f)?w+Math.min(1,Math.abs(_.thetag1-_.thetag0)/v)-1+(_.rp1-p)/(_.rp1-_.rp0)-1:1/0},e),e.index!==!1){var b=a[e.index];e.x0=e.x1=b.ct[0],e.y0=e.y1=b.ct[1];var x=k.extendFlat({},b,{r:b.s,theta:b.p});return m(b,i,e),h(x,i,c,e),e.hovertemplate=i.hovertemplate,e.color=r(i,b),e.xLabelVal=e.yLabelVal=void 0,b.s<0&&(e.idealAlign="left"),[e]}}},23381:function(W,I,o){W.exports={moduleType:"trace",name:"barpolar",basePlotModule:o(23580),categories:["polar","bar","showLegend"],attributes:o(55023),layoutAttributes:o(40151),supplyDefaults:o(6135),supplyLayoutDefaults:o(19860),calc:o(74692).calc,crossTraceCalc:o(74692).crossTraceCalc,plot:o(60173),colorbar:o(4898),formatLabels:o(98608),style:o(16688).style,styleOnSelect:o(16688).styleOnSelect,hoverPoints:o(27379),selectPoints:o(81974),meta:{}}},40151:function(W){W.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(W,I,o){var T=o(71828),k=o(40151);W.exports=function(r,m,h){var s,e={};function t(i,c){return T.coerce(r[s]||{},m[s],k,i,c)}for(var n=0;n<h.length;n++){var a=h[n];a.type==="barpolar"&&a.visible===!0&&(e[s=a.subplot]||(t("barmode"),t("bargap"),e[s]=1))}}},60173:function(W,I,o){var T=o(39898),k=o(92770),r=o(71828),m=o(91424),h=o(10869);W.exports=function(s,e,t){var n=s._context.staticPlot,a=e.xaxis,i=e.yaxis,c=e.radialAxis,l=e.angularAxis,u=function(d){var w=d.cxx,v=d.cyy;return d.vangles?function(p,y,b,x){var _,g;r.angleDelta(b,x)>0?(_=b,g=x):(_=x,g=b);var A=[h.findEnclosingVertexAngles(_,d.vangles)[0],(_+g)/2,h.findEnclosingVertexAngles(g,d.vangles)[1]];return h.pathPolygonAnnulus(p,y,_,g,A,w,v)}:function(p,y,b,x){return r.pathAnnulus(p,y,b,x,w,v)}}(e),f=e.layers.frontplot.select("g.barlayer");r.makeTraceGroups(f,t,"trace bars").each(function(){var d=T.select(this),w=r.ensureSingle(d,"g","points").selectAll("g.point").data(r.identity);w.enter().append("g").style("vector-effect",n?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),w.exit().remove(),w.each(function(v){var p,y=T.select(this),b=v.rp0=c.c2p(v.s0),x=v.rp1=c.c2p(v.s1),_=v.thetag0=l.c2g(v.p0),g=v.thetag1=l.c2g(v.p1);if(k(b)&&k(x)&&k(_)&&k(g)&&b!==x&&_!==g){var A=c.c2g(v.s1),M=(_+g)/2;v.ct=[a.c2p(A*Math.cos(M)),i.c2p(A*Math.sin(M))],p=u(b,x,_,g)}else p="M0,0Z";r.ensureSingle(y,"path").attr("d",p)}),m.setClipUrl(d,e._hasClipOnAxisFalse?e.clipIds.forTraces:null,s)})}},53522:function(W,I,o){var T=o(82196),k=o(1486),r=o(22399),m=o(12663).axisHoverFormat,h=o(5386).fF,s=o(1426).extendFlat,e=T.marker,t=e.line;W.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:s({},e.symbol,{arrayOk:!1,editType:"plot"}),opacity:s({},e.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:s({},e.angle,{arrayOk:!1,editType:"calc"}),size:s({},e.size,{arrayOk:!1,editType:"calc"}),color:s({},e.color,{arrayOk:!1,editType:"style"}),line:{color:s({},t.color,{arrayOk:!1,dflt:r.defaultLine,editType:"style"}),width:s({},t.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:T.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:{marker:T.selected.marker,editType:"style"},unselected:{marker:T.unselected.marker,editType:"style"},text:s({},T.text,{}),hovertext:s({},T.hovertext,{}),hovertemplate:h({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(W,I,o){var T=o(92770),k=o(89298),r=o(42973),m=o(71828),h=o(50606).BADNUM,s=m._;W.exports=function(d,w){var v,p,y,b,x,_,g,A=d._fullLayout,M=k.getFromId(d,w.xaxis||"x"),L=k.getFromId(d,w.yaxis||"y"),E=[],S=w.type==="violin"?"_numViolins":"_numBoxes";w.orientation==="h"?(y=M,b="x",x=L,_="y",g=!!w.yperiodalignment):(y=L,b="y",x=M,_="x",g=!!w.xperiodalignment);var O,P,U,R,j,B,z=function(zt,Ft,$t,Wt){var Xt,ae=Ft+"0"in zt;if(Ft in zt||ae&&"d"+Ft in zt){var Qt=$t.makeCalcdata(zt,Ft);return[r(zt,$t,Ft,Qt).vals,Qt]}Xt=ae?zt[Ft+"0"]:"name"in zt&&($t.type==="category"||T(zt.name)&&["linear","log"].indexOf($t.type)!==-1||m.isDateTime(zt.name)&&$t.type==="date")?zt.name:Wt;for(var de=$t.type==="multicategory"?$t.r2c_just_indices(Xt):$t.d2c(Xt,0,zt[Ft+"calendar"]),ye=zt._length,ve=new Array(ye),ie=0;ie<ye;ie++)ve[ie]=de;return[ve]}(w,_,x,A[S]),G=z[0],V=z[1],et=m.distinctVals(G,x),J=et.vals,X=et.minDiff/2,Y=(w.boxpoints||w.points)==="all"?m.identity:function(zt){return zt.v<O.lf||zt.v>O.uf};if(w._hasPreCompStats){var Z=w[b],tt=function(zt){return y.d2c((w[zt]||[])[v])},rt=1/0,nt=-1/0;for(v=0;v<w._length;v++){var ot=G[v];if(T(ot)){if((O={}).pos=O[_]=ot,g&&V&&(O.orig_p=V[v]),O.q1=tt("q1"),O.med=tt("median"),O.q3=tt("q3"),P=[],Z&&m.isArrayOrTypedArray(Z[v]))for(p=0;p<Z[v].length;p++)(B=y.d2c(Z[v][p]))!==h&&(t(j={v:B,i:[v,p]},w,[v,p]),P.push(j));if(O.pts=P.sort(n),R=(U=O[b]=P.map(a)).length,O.med!==h&&O.q1!==h&&O.q3!==h&&O.med>=O.q1&&O.q3>=O.med){var ct=tt("lowerfence");O.lf=ct!==h&&ct<=O.q1?ct:i(O,U,R);var pt=tt("upperfence");O.uf=pt!==h&&pt>=O.q3?pt:c(O,U,R);var gt=tt("mean");O.mean=gt!==h?gt:R?m.mean(U,R):(O.q1+O.q3)/2;var kt=tt("sd");O.sd=gt!==h&&kt>=0?kt:R?m.stdev(U,R,O.mean):O.q3-O.q1,O.lo=l(O),O.uo=u(O);var yt=tt("notchspan");yt=yt!==h&&yt>0?yt:f(O,R),O.ln=O.med-yt,O.un=O.med+yt;var mt=O.lf,Ot=O.uf;w.boxpoints&&U.length&&(mt=Math.min(mt,U[0]),Ot=Math.max(Ot,U[R-1])),w.notched&&(mt=Math.min(mt,O.ln),Ot=Math.max(Ot,O.un)),O.min=mt,O.max=Ot}else{var vt;m.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+O.q1,"median = "+O.med,"q3 = "+O.q3].join(`
`)),vt=O.med!==h?O.med:O.q1!==h?O.q3!==h?(O.q1+O.q3)/2:O.q1:O.q3!==h?O.q3:0,O.med=vt,O.q1=O.q3=vt,O.lf=O.uf=vt,O.mean=O.sd=vt,O.ln=O.un=vt,O.min=O.max=vt}rt=Math.min(rt,O.min),nt=Math.max(nt,O.max),O.pts2=P.filter(Y),E.push(O)}}w._extremes[y._id]=k.findExtremes(y,[rt,nt],{padded:!0})}else{var xt=y.makeCalcdata(w,b),st=function(zt,Ft){for(var $t=zt.length,Wt=new Array($t+1),Xt=0;Xt<$t;Xt++)Wt[Xt]=zt[Xt]-Ft;return Wt[$t]=zt[$t-1]+Ft,Wt}(J,X),at=J.length,ht=function(zt){for(var Ft=new Array(zt),$t=0;$t<zt;$t++)Ft[$t]=[];return Ft}(at);for(v=0;v<w._length;v++)if(B=xt[v],T(B)){var Lt=m.findBin(G[v],st);Lt>=0&&Lt<at&&(t(j={v:B,i:v},w,v),ht[Lt].push(j))}var Mt=1/0,_t=-1/0,St=w.quartilemethod,Dt=St==="exclusive",ut=St==="inclusive";for(v=0;v<at;v++)if(ht[v].length>0){var Tt,bt;(O={}).pos=O[_]=J[v],P=O.pts=ht[v].sort(n),R=(U=O[b]=P.map(a)).length,O.min=U[0],O.max=U[R-1],O.mean=m.mean(U,R),O.sd=m.stdev(U,R,O.mean)*w.sdmultiple,O.med=m.interp(U,.5),R%2&&(Dt||ut)?(Dt?(Tt=U.slice(0,R/2),bt=U.slice(R/2+1)):ut&&(Tt=U.slice(0,R/2+1),bt=U.slice(R/2)),O.q1=m.interp(Tt,.5),O.q3=m.interp(bt,.5)):(O.q1=m.interp(U,.25),O.q3=m.interp(U,.75)),O.lf=i(O,U,R),O.uf=c(O,U,R),O.lo=l(O),O.uo=u(O);var It=f(O,R);O.ln=O.med-It,O.un=O.med+It,Mt=Math.min(Mt,O.ln),_t=Math.max(_t,O.un),O.pts2=P.filter(Y),E.push(O)}w._extremes[y._id]=k.findExtremes(y,w.notched?xt.concat([Mt,_t]):xt,{padded:!0})}return function(zt,Ft){if(m.isArrayOrTypedArray(Ft.selectedpoints))for(var $t=0;$t<zt.length;$t++){for(var Wt=zt[$t].pts||[],Xt={},ae=0;ae<Wt.length;ae++)Xt[Wt[ae].i]=ae;m.tagSelected(Wt,Ft,Xt)}}(E,w),E.length>0?(E[0].t={num:A[S],dPos:X,posLetter:_,valLetter:b,labels:{med:s(d,"median:"),min:s(d,"min:"),q1:s(d,"q1:"),q3:s(d,"q3:"),max:s(d,"max:"),mean:w.boxmean==="sd"||w.sizemode==="sd"?s(d,"mean \xB1 \u03C3:").replace("\u03C3",w.sdmultiple===1?"\u03C3":w.sdmultiple+"\u03C3"):s(d,"mean:"),lf:s(d,"lower fence:"),uf:s(d,"upper fence:")}},A[S]++,E):[{t:{empty:!0}}]};var e={text:"tx",hovertext:"htx"};function t(d,w,v){for(var p in e)m.isArrayOrTypedArray(w[p])&&(Array.isArray(v)?m.isArrayOrTypedArray(w[p][v[0]])&&(d[e[p]]=w[p][v[0]][v[1]]):d[e[p]]=w[p][v])}function n(d,w){return d.v-w.v}function a(d){return d.v}function i(d,w,v){return v===0?d.q1:Math.min(d.q1,w[Math.min(m.findBin(2.5*d.q1-1.5*d.q3,w,!0)+1,v-1)])}function c(d,w,v){return v===0?d.q3:Math.max(d.q3,w[Math.max(m.findBin(2.5*d.q3-1.5*d.q1,w),0)])}function l(d){return 4*d.q1-3*d.q3}function u(d){return 4*d.q3-3*d.q1}function f(d,w){return w===0?0:1.57*(d.q3-d.q1)/Math.sqrt(w)}},37188:function(W,I,o){var T=o(89298),k=o(71828),r=o(99082).getAxisGroup,m=["v","h"];function h(s,e,t,n){var a,i,c,l=e.calcdata,u=e._fullLayout,f=n._id,d=f.charAt(0),w=[],v=0;for(a=0;a<t.length;a++)for(c=l[t[a]],i=0;i<c.length;i++)w.push(n.c2l(c[i].pos,!0)),v+=(c[i].pts2||[]).length;if(w.length){var p=k.distinctVals(w);n.type!=="category"&&n.type!=="multicategory"||(p.minDiff=1);var y=p.minDiff/2;T.minDtick(n,p.minDiff,p.vals[0],!0);var b=u[s==="violin"?"_numViolins":"_numBoxes"],x=u[s+"mode"]==="group"&&b>1,_=1-u[s+"gap"],g=1-u[s+"groupgap"];for(a=0;a<t.length;a++){var A,M,L,E,S,O,P=(c=l[t[a]])[0].trace,U=c[0].t,R=P.width,j=P.side;if(R)A=M=E=R/2,L=0;else if(A=y,x){var B=r(u,n._id)+P.orientation,z=(u._alignmentOpts[B]||{})[P.alignmentgroup]||{},G=Object.keys(z.offsetGroups||{}).length,V=G||b;M=A*_*g/V,L=2*A*(((G?P._offsetIndex:U.num)+.5)/V-.5)*_,E=A*_/V}else M=A*_*g,L=0,E=A;U.dPos=A,U.bPos=L,U.bdPos=M,U.wHover=E;var et,J,X,Y,Z,tt,rt=L+M,nt=Boolean(R);if(j==="positive"?(S=A*(R?1:.5),et=rt,O=et=L):j==="negative"?(S=et=L,O=A*(R?1:.5),J=rt):(S=O=A,et=J=rt),(P.boxpoints||P.points)&&v>0){var ot=P.pointpos,ct=P.jitter,pt=P.marker.size/2,gt=0;ot+ct>=0&&((gt=rt*(ot+ct))>S?(nt=!0,Z=pt,X=gt):gt>et&&(Z=pt,X=S)),gt<=S&&(X=S);var kt=0;ot-ct<=0&&((kt=-rt*(ot-ct))>O?(nt=!0,tt=pt,Y=kt):kt>J&&(tt=pt,Y=O)),kt<=O&&(Y=O)}else X=S,Y=O;var yt=new Array(c.length);for(i=0;i<c.length;i++)yt[i]=c[i].pos;P._extremes[f]=T.findExtremes(n,yt,{padded:nt,vpadminus:Y,vpadplus:X,vpadLinearized:!0,ppadminus:{x:tt,y:Z}[d],ppadplus:{x:Z,y:tt}[d]})}}}W.exports={crossTraceCalc:function(s,e){for(var t=s.calcdata,n=e.xaxis,a=e.yaxis,i=0;i<m.length;i++){for(var c=m[i],l=c==="h"?a:n,u=[],f=0;f<t.length;f++){var d=t[f],w=d[0].t,v=d[0].trace;v.visible!==!0||v.type!=="box"&&v.type!=="candlestick"||w.empty||(v.orientation||"v")!==c||v.xaxis!==n._id||v.yaxis!==a._id||u.push(f)}h("box",s,u,l)}},setPositionOffset:h}},36411:function(W,I,o){var T=o(71828),k=o(73972),r=o(7901),m=o(73927),h=o(26125),s=o(4322),e=o(53522);function t(a,i,c,l){function u(j){var B=0;return j&&j.length&&(B+=1,T.isArrayOrTypedArray(j[0])&&j[0].length&&(B+=1)),B}function f(j){return T.validate(a[j],e[j])}var d,w=c("y"),v=c("x");if(i.type==="box"){var p=c("q1"),y=c("median"),b=c("q3");i._hasPreCompStats=p&&p.length&&y&&y.length&&b&&b.length,d=Math.min(T.minRowLength(p),T.minRowLength(y),T.minRowLength(b))}var x,_,g=u(w),A=u(v),M=g&&T.minRowLength(w),L=A&&T.minRowLength(v),E=l.calendar,S={autotypenumbers:l.autotypenumbers};if(i._hasPreCompStats)switch(String(A)+String(g)){case"00":var O=f("x0")||f("dx");x=!f("y0")&&!f("dy")||O?"v":"h",_=d;break;case"10":x="v",_=Math.min(d,L);break;case"20":x="h",_=Math.min(d,v.length);break;case"01":x="h",_=Math.min(d,M);break;case"02":x="v",_=Math.min(d,w.length);break;case"12":x="v",_=Math.min(d,L,w.length);break;case"21":x="h",_=Math.min(d,v.length,M);break;case"11":_=0;break;case"22":var P,U=!1;for(P=0;P<v.length;P++)if(s(v[P],E,S)==="category"){U=!0;break}if(U)x="v",_=Math.min(d,L,w.length);else{for(P=0;P<w.length;P++)if(s(w[P],E,S)==="category"){U=!0;break}U?(x="h",_=Math.min(d,v.length,M)):(x="v",_=Math.min(d,L,w.length))}}else g>0?(x="v",_=A>0?Math.min(L,M):Math.min(M)):A>0?(x="h",_=Math.min(L)):_=0;if(_){i._length=_;var R=c("orientation",x);i._hasPreCompStats?R==="v"&&A===0?(c("x0",0),c("dx",1)):R==="h"&&g===0&&(c("y0",0),c("dy",1)):R==="v"&&A===0?c("x0"):R==="h"&&g===0&&c("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(a,i,["x","y"],l)}else i.visible=!1}function n(a,i,c,l){var u=l.prefix,f=T.coerce2(a,i,e,"marker.outliercolor"),d=c("marker.line.outliercolor"),w="outliers";i._hasPreCompStats?w="all":(f||d)&&(w="suspectedoutliers");var v=c(u+"points",w);v?(c("jitter",v==="all"?.3:0),c("pointpos",v==="all"?-1.5:0),c("marker.symbol"),c("marker.opacity"),c("marker.size"),c("marker.angle"),c("marker.color",i.line.color),c("marker.line.color"),c("marker.line.width"),v==="suspectedoutliers"&&(c("marker.line.outliercolor",i.marker.color),c("marker.line.outlierwidth")),c("selected.marker.color"),c("unselected.marker.color"),c("selected.marker.size"),c("unselected.marker.size"),c("text"),c("hovertext")):delete i.marker;var p=c("hoveron");p!=="all"&&p.indexOf("points")===-1||c("hovertemplate"),T.coerceSelectionMarkerOpacity(i,c)}W.exports={supplyDefaults:function(a,i,c,l){function u(_,g){return T.coerce(a,i,e,_,g)}if(t(a,i,u,l),i.visible!==!1){m(a,i,l,u),u("xhoverformat"),u("yhoverformat");var f=i._hasPreCompStats;f&&(u("lowerfence"),u("upperfence")),u("line.color",(a.marker||{}).color||c),u("line.width"),u("fillcolor",r.addOpacity(i.line.color,.5));var d=!1;if(f){var w=u("mean"),v=u("sd");w&&w.length&&(d=!0,v&&v.length&&(d="sd"))}u("whiskerwidth");var p,y=u("sizemode");y==="quartiles"&&(p=u("boxmean",d)),u("showwhiskers",y==="quartiles"),y!=="sd"&&p!=="sd"||u("sdmultiple"),u("width"),u("quartilemethod");var b=!1;if(f){var x=u("notchspan");x&&x.length&&(b=!0)}else T.validate(a.notchwidth,e.notchwidth)&&(b=!0);u("notched",b)&&u("notchwidth"),n(a,i,u,{prefix:"box"})}},crossTraceDefaults:function(a,i){var c,l;function u(w){return T.coerce(l._input,l,e,w)}for(var f=0;f<a.length;f++){var d=(l=a[f]).type;d!=="box"&&d!=="violin"||(c=l._input,i[d+"mode"]==="group"&&h(c,l,i,u))}},handleSampleDefaults:t,handlePointsDefaults:n}},74907:function(W){W.exports=function(I,o){return o.hoverOnBox&&(I.hoverOnBox=o.hoverOnBox),"xVal"in o&&(I.x=o.xVal),"yVal"in o&&(I.y=o.yVal),o.xa&&(I.xaxis=o.xa),o.ya&&(I.yaxis=o.ya),I}},41868:function(W,I,o){var T=o(89298),k=o(71828),r=o(30211),m=o(7901),h=k.fillText;function s(t,n,a,i){var c,l,u,f,d,w,v,p,y,b,x,_,g,A,M=t.cd,L=t.xa,E=t.ya,S=M[0].trace,O=M[0].t,P=S.type==="violin",U=O.bdPos,R=O.wHover,j=function(vt){return u.c2l(vt.pos)+O.bPos-u.c2l(w)};P&&S.side!=="both"?(S.side==="positive"&&(y=function(vt){var xt=j(vt);return r.inbox(xt,xt+R,b)},_=U,g=0),S.side==="negative"&&(y=function(vt){var xt=j(vt);return r.inbox(xt-R,xt,b)},_=0,g=U)):(y=function(vt){var xt=j(vt);return r.inbox(xt-R,xt+R,b)},_=g=U),A=P?function(vt){return r.inbox(vt.span[0]-d,vt.span[1]-d,b)}:function(vt){return r.inbox(vt.min-d,vt.max-d,b)},S.orientation==="h"?(d=n,w=a,v=A,p=y,c="y",u=E,l="x",f=L):(d=a,w=n,v=y,p=A,c="x",u=L,l="y",f=E);var B=Math.min(1,U/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function z(vt){return(v(vt)+p(vt))/2}b=t.maxHoverDistance-B,x=t.maxSpikeDistance-B;var G=r.getDistanceFunction(i,v,p,z);if(r.getClosest(M,G,t),t.index===!1)return[];var V=M[t.index],et=S.line.color,J=(S.marker||{}).color;m.opacity(et)&&S.line.width?t.color=et:m.opacity(J)&&S.boxpoints?t.color=J:t.color=S.fillcolor,t[c+"0"]=u.c2p(V.pos+O.bPos-g,!0),t[c+"1"]=u.c2p(V.pos+O.bPos+_,!0),t[c+"LabelVal"]=V.orig_p!==void 0?V.orig_p:V.pos;var X=c+"Spike";t.spikeDistance=z(V)*x/b,t[X]=u.c2p(V.pos,!0);var Y=S.boxmean||S.sizemode==="sd"||(S.meanline||{}).visible,Z=S.boxpoints||S.points,tt=Z&&Y?["max","uf","q3","med","mean","q1","lf","min"]:Z&&!Y?["max","uf","q3","med","q1","lf","min"]:!Z&&Y?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],rt=f.range[1]<f.range[0];S.orientation===(rt?"v":"h")&&tt.reverse();for(var nt=t.spikeDistance,ot=t[X],ct=[],pt=0;pt<tt.length;pt++){var gt=tt[pt];if(gt in V){var kt=V[gt],yt=f.c2p(kt,!0),mt=k.extendFlat({},t);mt.attr=gt,mt[l+"0"]=mt[l+"1"]=yt,mt[l+"LabelVal"]=kt,mt[l+"Label"]=(O.labels?O.labels[gt]+" ":"")+T.hoverLabelText(f,kt,S[l+"hoverformat"]),mt.hoverOnBox=!0,gt!=="mean"||!("sd"in V)||S.boxmean!=="sd"&&S.sizemode!=="sd"||(mt[l+"err"]=V.sd),mt.hovertemplate=!1,ct.push(mt)}}t.name="",t.spikeDistance=void 0,t[X]=void 0;for(var Ot=0;Ot<ct.length;Ot++)ct[Ot].attr!=="med"?(ct[Ot].name="",ct[Ot].spikeDistance=void 0,ct[Ot][X]=void 0):(ct[Ot].spikeDistance=nt,ct[Ot][X]=ot);return ct}function e(t,n,a){for(var i,c,l,u=t.cd,f=t.xa,d=t.ya,w=u[0].trace,v=f.c2p(n),p=d.c2p(a),y=r.quadrature(function(P){var U=Math.max(3,P.mrc||0);return Math.max(Math.abs(f.c2p(P.x)-v)-U,1-3/U)},function(P){var U=Math.max(3,P.mrc||0);return Math.max(Math.abs(d.c2p(P.y)-p)-U,1-3/U)}),b=!1,x=0;x<u.length;x++){c=u[x];for(var _=0;_<(c.pts||[]).length;_++){var g=y(l=c.pts[_]);g<=t.distance&&(t.distance=g,b=[x,_])}}if(!b)return!1;l=(c=u[b[0]]).pts[b[1]];var A=f.c2p(l.x,!0),M=d.c2p(l.y,!0),L=l.mrc||1;i=k.extendFlat({},t,{index:l.i,color:(w.marker||{}).color,name:w.name,x0:A-L,x1:A+L,y0:M-L,y1:M+L,spikeDistance:t.distance,hovertemplate:w.hovertemplate});var E,S=c.orig_p,O=S!==void 0?S:c.pos;return w.orientation==="h"?(E=d,i.xLabelVal=l.x,i.yLabelVal=O):(E=f,i.xLabelVal=O,i.yLabelVal=l.y),i[E._id.charAt(0)+"Spike"]=E.c2p(c.pos,!0),h(l,w,i),i}W.exports={hoverPoints:function(t,n,a,i){var c,l=t.cd[0].trace.hoveron,u=[];return l.indexOf("boxes")!==-1&&(u=u.concat(s(t,n,a,i))),l.indexOf("points")!==-1&&(c=e(t,n,a)),i==="closest"?c?[c]:u:(c&&u.push(c),u)},hoverOnBoxes:s,hoverOnPoints:e}},83832:function(W,I,o){W.exports={attributes:o(53522),layoutAttributes:o(40094),supplyDefaults:o(36411).supplyDefaults,crossTraceDefaults:o(36411).crossTraceDefaults,supplyLayoutDefaults:o(4199).supplyLayoutDefaults,calc:o(48518),crossTraceCalc:o(37188).crossTraceCalc,plot:o(86047).plot,style:o(58063).style,styleOnSelect:o(58063).styleOnSelect,hoverPoints:o(41868).hoverPoints,eventData:o(74907),selectPoints:o(24626),moduleType:"trace",name:"box",basePlotModule:o(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(W){W.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(W,I,o){var T=o(73972),k=o(71828),r=o(40094);function m(h,s,e,t,n){for(var a=n+"Layout",i=!1,c=0;c<e.length;c++){var l=e[c];if(T.traceIs(l,a)){i=!0;break}}i&&(t(n+"mode"),t(n+"gap"),t(n+"groupgap"))}W.exports={supplyLayoutDefaults:function(h,s,e){m(0,0,e,function(t,n){return k.coerce(h,s,r,t,n)},"box")},_supply:m}},86047:function(W,I,o){var T=o(39898),k=o(71828),r=o(91424);function m(e,t,n,a,i){var c,l,u=n.orientation==="h",f=t.val,d=t.pos,w=!!d.rangebreaks,v=a.bPos,p=a.wdPos||0,y=a.bPosPxOffset||0,b=n.whiskerwidth||0,x=n.showwhiskers!==!1,_=n.notched||!1,g=_?1-2*n.notchwidth:1;Array.isArray(a.bdPos)?(c=a.bdPos[0],l=a.bdPos[1]):(c=a.bdPos,l=a.bdPos);var A=e.selectAll("path.box").data(n.type!=="violin"||n.box.visible?k.identity:[]);A.enter().append("path").style("vector-effect",i?"none":"non-scaling-stroke").attr("class","box"),A.exit().remove(),A.each(function(M){if(M.empty)return"M0,0Z";var L=d.c2l(M.pos+v,!0),E=d.l2p(L-c)+y,S=d.l2p(L+l)+y,O=w?(E+S)/2:d.l2p(L)+y,P=n.whiskerwidth,U=w?E*P+(1-P)*O:d.l2p(L-p)+y,R=w?S*P+(1-P)*O:d.l2p(L+p)+y,j=d.l2p(L-c*g)+y,B=d.l2p(L+l*g)+y,z=n.sizemode==="sd",G=f.c2p(z?M.mean-M.sd:M.q1,!0),V=z?f.c2p(M.mean+M.sd,!0):f.c2p(M.q3,!0),et=k.constrain(z?f.c2p(M.mean,!0):f.c2p(M.med,!0),Math.min(G,V)+1,Math.max(G,V)-1),J=M.lf===void 0||n.boxpoints===!1||z,X=f.c2p(J?M.min:M.lf,!0),Y=f.c2p(J?M.max:M.uf,!0),Z=f.c2p(M.ln,!0),tt=f.c2p(M.un,!0);u?T.select(this).attr("d","M"+et+","+j+"V"+B+"M"+G+","+E+"V"+S+(_?"H"+Z+"L"+et+","+B+"L"+tt+","+S:"")+"H"+V+"V"+E+(_?"H"+tt+"L"+et+","+j+"L"+Z+","+E:"")+"Z"+(x?"M"+G+","+O+"H"+X+"M"+V+","+O+"H"+Y+(b===0?"":"M"+X+","+U+"V"+R+"M"+Y+","+U+"V"+R):"")):T.select(this).attr("d","M"+j+","+et+"H"+B+"M"+E+","+G+"H"+S+(_?"V"+Z+"L"+B+","+et+"L"+S+","+tt:"")+"V"+V+"H"+E+(_?"V"+tt+"L"+j+","+et+"L"+E+","+Z:"")+"Z"+(x?"M"+O+","+G+"V"+X+"M"+O+","+V+"V"+Y+(b===0?"":"M"+U+","+X+"H"+R+"M"+U+","+Y+"H"+R):""))})}function h(e,t,n,a){var i=t.x,c=t.y,l=a.bdPos,u=a.bPos,f=n.boxpoints||n.points;k.seedPseudoRandom();var d=e.selectAll("g.points").data(f?function(v){return v.forEach(function(p){p.t=a,p.trace=n}),v}:[]);d.enter().append("g").attr("class","points"),d.exit().remove();var w=d.selectAll("path").data(function(v){var p,y,b=v.pts2,x=Math.max((v.max-v.min)/10,v.q3-v.q1),_=1e-9*x,g=.01*x,A=[],M=0;if(n.jitter){if(x===0)for(M=1,A=new Array(b.length),p=0;p<b.length;p++)A[p]=1;else for(p=0;p<b.length;p++){var L=Math.max(0,p-5),E=b[L].v,S=Math.min(b.length-1,p+5),O=b[S].v;f!=="all"&&(b[p].v<v.lf?O=Math.min(O,v.lf):E=Math.max(E,v.uf));var P=Math.sqrt(g*(S-L)/(O-E+_))||0;P=k.constrain(Math.abs(P),0,1),A.push(P),M=Math.max(P,M)}y=2*n.jitter/(M||1)}for(p=0;p<b.length;p++){var U=b[p],R=U.v,j=n.jitter?y*A[p]*(k.pseudoRandom()-.5):0,B=v.pos+u+l*(n.pointpos+j);n.orientation==="h"?(U.y=B,U.x=R):(U.x=B,U.y=R),f==="suspectedoutliers"&&R<v.uo&&R>v.lo&&(U.so=!0)}return b});w.enter().append("path").classed("point",!0),w.exit().remove(),w.call(r.translatePoints,i,c)}function s(e,t,n,a){var i,c,l=t.val,u=t.pos,f=!!u.rangebreaks,d=a.bPos,w=a.bPosPxOffset||0,v=n.boxmean||(n.meanline||{}).visible;Array.isArray(a.bdPos)?(i=a.bdPos[0],c=a.bdPos[1]):(i=a.bdPos,c=a.bdPos);var p=e.selectAll("path.mean").data(n.type==="box"&&n.boxmean||n.type==="violin"&&n.box.visible&&n.meanline.visible?k.identity:[]);p.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),p.exit().remove(),p.each(function(y){var b=u.c2l(y.pos+d,!0),x=u.l2p(b-i)+w,_=u.l2p(b+c)+w,g=f?(x+_)/2:u.l2p(b)+w,A=l.c2p(y.mean,!0),M=l.c2p(y.mean-y.sd,!0),L=l.c2p(y.mean+y.sd,!0);n.orientation==="h"?T.select(this).attr("d","M"+A+","+x+"V"+_+(v==="sd"?"m0,0L"+M+","+g+"L"+A+","+x+"L"+L+","+g+"Z":"")):T.select(this).attr("d","M"+x+","+A+"H"+_+(v==="sd"?"m0,0L"+g+","+M+"L"+x+","+A+"L"+g+","+L+"Z":""))})}W.exports={plot:function(e,t,n,a){var i=e._context.staticPlot,c=t.xaxis,l=t.yaxis;k.makeTraceGroups(a,n,"trace boxes").each(function(u){var f,d,w=T.select(this),v=u[0],p=v.t,y=v.trace;p.wdPos=p.bdPos*y.whiskerwidth,y.visible!==!0||p.empty?w.remove():(y.orientation==="h"?(f=l,d=c):(f=c,d=l),m(w,{pos:f,val:d},y,p,i),h(w,{x:c,y:l},y,p),s(w,{pos:f,val:d},y,p))})},plotBoxAndWhiskers:m,plotPoints:h,plotBoxMean:s}},24626:function(W){W.exports=function(I,o){var T,k,r=I.cd,m=I.xaxis,h=I.yaxis,s=[];if(o===!1)for(T=0;T<r.length;T++)for(k=0;k<(r[T].pts||[]).length;k++)r[T].pts[k].selected=0;else for(T=0;T<r.length;T++)for(k=0;k<(r[T].pts||[]).length;k++){var e=r[T].pts[k],t=m.c2p(e.x),n=h.c2p(e.y);o.contains([t,n],null,e.i,I)?(s.push({pointNumber:e.i,x:m.c2d(e.x),y:h.c2d(e.y)}),e.selected=1):e.selected=0}return s}},58063:function(W,I,o){var T=o(39898),k=o(7901),r=o(91424);W.exports={style:function(m,h,s){var e=s||T.select(m).selectAll("g.trace.boxes");e.style("opacity",function(t){return t[0].trace.opacity}),e.each(function(t){var n=T.select(this),a=t[0].trace,i=a.line.width;function c(f,d,w,v){f.style("stroke-width",d+"px").call(k.stroke,w).call(k.fill,v)}var l=n.selectAll("path.box");if(a.type==="candlestick")l.each(function(f){if(!f.empty){var d=T.select(this),w=a[f.dir];c(d,w.line.width,w.line.color,w.fillcolor),d.style("opacity",a.selectedpoints&&!f.selected?.3:1)}});else{c(l,i,a.line.color,a.fillcolor),n.selectAll("path.mean").style({"stroke-width":i,"stroke-dasharray":2*i+"px,"+i+"px"}).call(k.stroke,a.line.color);var u=n.selectAll("path.point");r.pointStyle(u,a,m)}})},styleOnSelect:function(m,h,s){var e=h[0].trace,t=s.selectAll("path.point");e.selectedpoints?r.selectedPointStyle(t,e):r.pointStyle(t,e,m)}}},75343:function(W,I,o){var T=o(71828).extendFlat,k=o(12663).axisHoverFormat,r=o(2522),m=o(53522);function h(s){return{line:{color:T({},m.line.color,{dflt:s}),width:m.line.width,editType:"style"},fillcolor:m.fillcolor,editType:"style"}}W.exports={xperiod:r.xperiod,xperiod0:r.xperiod0,xperiodalignment:r.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:r.x,open:r.open,high:r.high,low:r.low,close:r.close,line:{width:T({},m.line.width,{}),editType:"style"},increasing:h(r.increasing.line.color.dflt),decreasing:h(r.decreasing.line.color.dflt),text:r.text,hovertext:r.hovertext,whiskerwidth:T({},m.whiskerwidth,{dflt:0}),hoverlabel:r.hoverlabel}},41197:function(W,I,o){var T=o(71828),k=o(89298),r=o(42973),m=o(3485).calcCommon;function h(s,e,t,n){return{min:t,q1:Math.min(s,n),med:n,q3:Math.max(s,n),max:e}}W.exports=function(s,e){var t=s._fullLayout,n=k.getFromId(s,e.xaxis),a=k.getFromId(s,e.yaxis),i=n.makeCalcdata(e,"x"),c=r(e,n,"x",i).vals,l=m(s,e,i,c,a,h);return l.length?(T.extendFlat(l[0].t,{num:t._numBoxes,dPos:T.distinctVals(c).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,l):[{t:{empty:!0}}]}},1026:function(W,I,o){var T=o(71828),k=o(7901),r=o(14555),m=o(73927),h=o(75343);function s(e,t,n,a){var i=n(a+".line.color");n(a+".line.width",t.line.width),n(a+".fillcolor",k.addOpacity(i,.5))}W.exports=function(e,t,n,a){function i(c,l){return T.coerce(e,t,h,c,l)}r(e,t,i,a)?(m(e,t,a,i,{x:!0}),i("xhoverformat"),i("yhoverformat"),i("line.width"),s(0,t,i,"increasing"),s(0,t,i,"decreasing"),i("text"),i("hovertext"),i("whiskerwidth"),a._requestRangeslider[t.xaxis]=!0):t.visible=!1}},91815:function(W,I,o){W.exports={moduleType:"trace",name:"candlestick",basePlotModule:o(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:o(75343),layoutAttributes:o(40094),supplyLayoutDefaults:o(4199).supplyLayoutDefaults,crossTraceCalc:o(37188).crossTraceCalc,supplyDefaults:o(1026),calc:o(41197),plot:o(86047).plot,layerName:"boxlayer",style:o(58063).style,hoverPoints:o(66449).hoverPoints,selectPoints:o(67324)}},13145:function(W,I,o){var T=o(11500),k=o(44467);W.exports=function(r,m,h,s,e){s("a")||(s("da"),s("a0")),s("b")||(s("db"),s("b0")),function(t,n,a,i){["aaxis","baxis"].forEach(function(c){var l=c.charAt(0),u=t[c]||{},f=k.newContainer(n,c),d={noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:n.font,name:c,data:t[l],calendar:n.calendar,dfltColor:i,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};T(u,f,d),f._categories=f._categories||[],t[c]||u.type==="-"||(t[c]={type:u.type})})}(r,m,h,e)}},402:function(W,I,o){var T=o(71828).isArrayOrTypedArray;function k(r,m){if(!T(r)||m>=10)return null;for(var h=1/0,s=-1/0,e=r.length,t=0;t<e;t++){var n=r[t];if(T(n)){var a=k(n,m+1);a&&(h=Math.min(a[0],h),s=Math.max(a[1],s))}else h=Math.min(n,h),s=Math.max(n,s)}return[h,s]}W.exports=function(r){return k(r,0)}},99798:function(W,I,o){var T=o(41940),k=o(1928),r=o(22399),m=T({editType:"calc"});m.family.dflt='"Open Sans", verdana, arial, sans-serif',m.size.dflt=12,m.color.dflt=r.defaultLine,W.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:m,color:{valType:"color",dflt:r.defaultLine,editType:"plot"},transforms:void 0}},4536:function(W,I,o){var T=o(71828).isArrayOrTypedArray;W.exports=function(k,r,m,h){var s,e,t,n,a,i,c,l,u,f,d,w,v,p=T(m)?"a":"b",y=(p==="a"?k.aaxis:k.baxis).smoothing,b=p==="a"?k.a2i:k.b2j,x=p==="a"?m:h,_=p==="a"?h:m,g=p==="a"?r.a.length:r.b.length,A=p==="a"?r.b.length:r.a.length,M=Math.floor(p==="a"?k.b2j(_):k.a2i(_)),L=p==="a"?function(et){return k.evalxy([],et,M)}:function(et){return k.evalxy([],M,et)};y&&(t=Math.max(0,Math.min(A-2,M)),n=M-t,e=p==="a"?function(et,J){return k.dxydi([],et,t,J,n)}:function(et,J){return k.dxydj([],t,et,n,J)});var E=b(x[0]),S=b(x[1]),O=E<S?1:-1,P=1e-8*(S-E),U=O>0?Math.floor:Math.ceil,R=O>0?Math.ceil:Math.floor,j=O>0?Math.min:Math.max,B=O>0?Math.max:Math.min,z=U(E+P),G=R(S-P),V=[[c=L(E)]];for(s=z;s*O<G*O;s+=O)a=[],d=B(E,s),v=(w=j(S,s+O))-d,i=Math.max(0,Math.min(g-2,Math.floor(.5*(d+w)))),l=L(w),y&&(u=e(i,d-i),f=e(i,w-i),a.push([c[0]+u[0]/3*v,c[1]+u[1]/3*v]),a.push([l[0]-f[0]/3*v,l[1]-f[1]/3*v])),a.push(l),V.push(a),c=l;return V}},1928:function(W,I,o){var T=o(41940),k=o(22399),r=o(13838),m=o(12663).descriptionWithDates,h=o(30962).overrideAll,s=o(79952).P,e=o(1426).extendFlat;W.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:T({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:r.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:e({},r.labelalias,{editType:"calc"}),tickfont:T({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:m("tick label")},tickformatstops:h(r.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:e({},s,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:e({},s,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:T({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(W,I,o){var T=o(99798),k=o(7901).addOpacity,r=o(73972),m=o(71828),h=o(26218),s=o(96115),e=o(89426),t=o(15258),n=o(21994),a=o(4322);W.exports=function(i,c,l){var u=l.letter,f=l.font||{},d=T[u+"axis"];function w(O,P){return m.coerce(i,c,d,O,P)}function v(O,P){return m.coerce2(i,c,d,O,P)}l.name&&(c._name=l.name,c._id=l.name),w("autotypenumbers",l.autotypenumbersDflt);var p=w("type");p==="-"&&(l.data&&function(O,P){if(O.type==="-"){var U=O._id.charAt(0),R=O[U+"calendar"];O.type=a(P,R,{autotypenumbers:O.autotypenumbers})}}(c,l.data),c.type==="-"?c.type="linear":p=i.type=c.type),w("smoothing"),w("cheatertype"),w("showticklabels"),w("labelprefix",u+" = "),w("labelsuffix"),w("showtickprefix"),w("showticksuffix"),w("separatethousands"),w("tickformat"),w("exponentformat"),w("minexponent"),w("showexponent"),w("categoryorder"),w("tickmode"),w("tickvals"),w("ticktext"),w("tick0"),w("dtick"),c.tickmode==="array"&&(w("arraytick0"),w("arraydtick")),w("labelpadding"),c._hovertitle=u,p==="date"&&r.getComponentMethod("calendars","handleDefaults")(i,c,"calendar",l.calendar),n(c,l.fullLayout),c.c2p=m.identity;var y=w("color",l.dfltColor),b=y===i.color?y:f.color;w("title.text")&&(m.coerceFont(w,"title.font",{family:f.family,size:m.bigFont(f.size),color:b}),w("title.offset")),w("tickangle"),w("autorange",!c.isValidRange(i.range))&&w("rangemode"),w("range"),c.cleanRange(),w("fixedrange"),h(i,c,w,p),e(i,c,w,p,l),s(i,c,w,p,l),t(i,c,w,{data:l.data,dataAttr:u});var x=v("gridcolor",k(y,.3)),_=v("gridwidth"),g=v("griddash"),A=w("showgrid");A||(delete c.gridcolor,delete c.gridwidth,delete c.griddash);var M=v("startlinecolor",y),L=v("startlinewidth",_);w("startline",c.showgrid||!!M||!!L)||(delete c.startlinecolor,delete c.startlinewidth);var E=v("endlinecolor",y),S=v("endlinewidth",_);return w("endline",c.showgrid||!!E||!!S)||(delete c.endlinecolor,delete c.endlinewidth),A?(w("minorgridcount"),w("minorgridwidth",_),w("minorgriddash",g),w("minorgridcolor",k(x,.06)),c.minorgridcount||(delete c.minorgridwidth,delete c.minorgriddash,delete c.minorgridcolor)):(delete c.gridcolor,delete c.gridwidth,delete c.griddash),c.showticklabels==="none"&&(delete c.tickfont,delete c.tickangle,delete c.showexponent,delete c.exponentformat,delete c.minexponent,delete c.tickformat,delete c.showticksuffix,delete c.showtickprefix),c.showticksuffix||delete c.ticksuffix,c.showtickprefix||delete c.tickprefix,w("tickmode"),c}},25281:function(W,I,o){var T=o(89298),k=o(71828).isArray1D,r=o(53824),m=o(402),h=o(20347),s=o(83311),e=o(44807),t=o(4742),n=o(72505),a=o(68296),i=o(11435);W.exports=function(c,l){var u=T.getFromId(c,l.xaxis),f=T.getFromId(c,l.yaxis),d=l.aaxis,w=l.baxis,v=l.x,p=l.y,y=[];v&&k(v)&&y.push("x"),p&&k(p)&&y.push("y"),y.length&&a(l,d,w,"a","b",y);var b=l._a=l._a||l.a,x=l._b=l._b||l.b;v=l._x||l.x,p=l._y||l.y;var _={};if(l._cheater){var g=d.cheatertype==="index"?b.length:b,A=w.cheatertype==="index"?x.length:x;v=r(g,A,l.cheaterslope)}l._x=v=t(v),l._y=p=t(p),n(v,b,x),n(p,b,x),i(l),l.setScale();var M=m(v),L=m(p),E=.5*(M[1]-M[0]),S=.5*(M[1]+M[0]),O=.5*(L[1]-L[0]),P=.5*(L[1]+L[0]),U=1.3;return M=[S-E*U,S+E*U],L=[P-O*U,P+O*U],l._extremes[u._id]=T.findExtremes(u,M,{padded:!0}),l._extremes[f._id]=T.findExtremes(f,L,{padded:!0}),h(l,"a","b"),h(l,"b","a"),s(l,d),s(l,w),_.clipsegments=e(l._xctrl,l._yctrl,d,w),_.x=v,_.y=p,_.a=b,_.b=x,[_]}},44807:function(W){W.exports=function(I,o,T,k){var r,m,h,s=[],e=!!T.smoothing,t=!!k.smoothing,n=I[0].length-1,a=I.length-1;for(r=0,m=[],h=[];r<=n;r++)m[r]=I[0][r],h[r]=o[0][r];for(s.push({x:m,y:h,bicubic:e}),r=0,m=[],h=[];r<=a;r++)m[r]=I[r][n],h[r]=o[r][n];for(s.push({x:m,y:h,bicubic:t}),r=n,m=[],h=[];r>=0;r--)m[n-r]=I[a][r],h[n-r]=o[a][r];for(s.push({x:m,y:h,bicubic:e}),r=a,m=[],h=[];r>=0;r--)m[a-r]=I[r][0],h[a-r]=o[r][0];return s.push({x:m,y:h,bicubic:t}),s}},20347:function(W,I,o){var T=o(89298),k=o(1426).extendFlat;W.exports=function(r,m,h){var s,e,t,n,a,i,c,l,u,f,d,w,v,p,y=r["_"+m],b=r[m+"axis"],x=b._gridlines=[],_=b._minorgridlines=[],g=b._boundarylines=[],A=r["_"+h],M=r[h+"axis"];b.tickmode==="array"&&(b.tickvals=y.slice());var L=r._xctrl,E=r._yctrl,S=L[0].length,O=L.length,P=r._a.length,U=r._b.length;T.prepTicks(b),b.tickmode==="array"&&delete b.tickvals;var R=b.smoothing?3:1;function j(z){var G,V,et,J,X,Y,Z,tt,rt,nt,ot,ct,pt=[],gt=[],kt={};if(m==="b")for(V=r.b2j(z),et=Math.floor(Math.max(0,Math.min(U-2,V))),J=V-et,kt.length=U,kt.crossLength=P,kt.xy=function(yt){return r.evalxy([],yt,V)},kt.dxy=function(yt,mt){return r.dxydi([],yt,et,mt,J)},G=0;G<P;G++)Y=Math.min(P-2,G),Z=G-Y,tt=r.evalxy([],G,V),M.smoothing&&G>0&&(rt=r.dxydi([],G-1,et,0,J),pt.push(X[0]+rt[0]/3),gt.push(X[1]+rt[1]/3),nt=r.dxydi([],G-1,et,1,J),pt.push(tt[0]-nt[0]/3),gt.push(tt[1]-nt[1]/3)),pt.push(tt[0]),gt.push(tt[1]),X=tt;else for(G=r.a2i(z),Y=Math.floor(Math.max(0,Math.min(P-2,G))),Z=G-Y,kt.length=P,kt.crossLength=U,kt.xy=function(yt){return r.evalxy([],G,yt)},kt.dxy=function(yt,mt){return r.dxydj([],Y,yt,Z,mt)},V=0;V<U;V++)et=Math.min(U-2,V),J=V-et,tt=r.evalxy([],G,V),M.smoothing&&V>0&&(ot=r.dxydj([],Y,V-1,Z,0),pt.push(X[0]+ot[0]/3),gt.push(X[1]+ot[1]/3),ct=r.dxydj([],Y,V-1,Z,1),pt.push(tt[0]-ct[0]/3),gt.push(tt[1]-ct[1]/3)),pt.push(tt[0]),gt.push(tt[1]),X=tt;return kt.axisLetter=m,kt.axis=b,kt.crossAxis=M,kt.value=z,kt.constvar=h,kt.index=l,kt.x=pt,kt.y=gt,kt.smoothing=M.smoothing,kt}function B(z){var G,V,et,J,X,Y=[],Z=[],tt={};if(tt.length=y.length,tt.crossLength=A.length,m==="b")for(et=Math.max(0,Math.min(U-2,z)),X=Math.min(1,Math.max(0,z-et)),tt.xy=function(rt){return r.evalxy([],rt,z)},tt.dxy=function(rt,nt){return r.dxydi([],rt,et,nt,X)},G=0;G<S;G++)Y[G]=L[z*R][G],Z[G]=E[z*R][G];else for(V=Math.max(0,Math.min(P-2,z)),J=Math.min(1,Math.max(0,z-V)),tt.xy=function(rt){return r.evalxy([],z,rt)},tt.dxy=function(rt,nt){return r.dxydj([],V,rt,J,nt)},G=0;G<O;G++)Y[G]=L[G][z*R],Z[G]=E[G][z*R];return tt.axisLetter=m,tt.axis=b,tt.crossAxis=M,tt.value=y[z],tt.constvar=h,tt.index=z,tt.x=Y,tt.y=Z,tt.smoothing=M.smoothing,tt}if(b.tickmode==="array"){for(n=5e-15,i=(a=[Math.floor((y.length-1-b.arraytick0)/b.arraydtick*(1+n)),Math.ceil(-b.arraytick0/b.arraydtick/(1+n))].sort(function(z,G){return z-G}))[0]-1,c=a[1]+1,l=i;l<c;l++)(e=b.arraytick0+b.arraydtick*l)<0||e>y.length-1||x.push(k(B(e),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(l=i;l<c;l++)if(t=b.arraytick0+b.arraydtick*l,d=Math.min(t+b.arraydtick,y.length-1),!(t<0||t>y.length-1||d<0||d>y.length-1))for(w=y[t],v=y[d],s=0;s<b.minorgridcount;s++)(p=d-t)<=0||(f=w+(v-w)*(s+1)/(b.minorgridcount+1)*(b.arraydtick/p))<y[0]||f>y[y.length-1]||_.push(k(j(f),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash}));b.startline&&g.push(k(B(0),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&g.push(k(B(y.length-1),{color:b.endlinecolor,width:b.endlinewidth}))}else{for(n=5e-15,i=(a=[Math.floor((y[y.length-1]-b.tick0)/b.dtick*(1+n)),Math.ceil((y[0]-b.tick0)/b.dtick/(1+n))].sort(function(z,G){return z-G}))[0],c=a[1],l=i;l<=c;l++)u=b.tick0+b.dtick*l,x.push(k(j(u),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(l=i-1;l<c+1;l++)for(u=b.tick0+b.dtick*l,s=0;s<b.minorgridcount;s++)(f=u+b.dtick*(s+1)/(b.minorgridcount+1))<y[0]||f>y[y.length-1]||_.push(k(j(f),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash}));b.startline&&g.push(k(j(y[0]),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&g.push(k(j(y[y.length-1]),{color:b.endlinecolor,width:b.endlinewidth}))}}},83311:function(W,I,o){var T=o(89298),k=o(1426).extendFlat;W.exports=function(r,m){var h,s,e,t=m._labels=[],n=m._gridlines;for(h=0;h<n.length;h++)e=n[h],["start","both"].indexOf(m.showticklabels)!==-1&&(s=T.tickText(m,e.value),k(s,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:e.xy(0),dxy:e.dxy(0,0),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,isFirst:h===0,isLast:h===n.length-1}),t.push(s)),["end","both"].indexOf(m.showticklabels)!==-1&&(s=T.tickText(m,e.value),k(s,{endAnchor:!1,xy:e.xy(e.crossLength-1),dxy:e.dxy(e.crossLength-2,1),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,isFirst:h===0,isLast:h===n.length-1}),t.push(s))}},42048:function(W){W.exports=function(I,o,T,k){var r=I[0]-o[0],m=I[1]-o[1],h=T[0]-o[0],s=T[1]-o[1],e=Math.pow(r*r+m*m,.25),t=Math.pow(h*h+s*s,.25),n=(t*t*r-e*e*h)*k,a=(t*t*m-e*e*s)*k,i=t*(e+t)*3,c=e*(e+t)*3;return[[o[0]+(i&&n/i),o[1]+(i&&a/i)],[o[0]-(c&&n/c),o[1]-(c&&a/c)]]}},53824:function(W,I,o){var T=o(71828).isArrayOrTypedArray;W.exports=function(k,r,m){var h,s,e,t,n,a,i=[],c=T(k)?k.length:k,l=T(r)?r.length:r,u=T(k)?k:null,f=T(r)?r:null;u&&(e=(u.length-1)/(u[u.length-1]-u[0])/(c-1)),f&&(t=(f.length-1)/(f[f.length-1]-f[0])/(l-1));var d=1/0,w=-1/0;for(s=0;s<l;s++)for(i[s]=[],n=f?(f[s]-f[0])*t:s/(l-1),h=0;h<c;h++)a=(u?(u[h]-u[0])*e:h/(c-1))-n*m,d=Math.min(a,d),w=Math.max(a,w),i[s][h]=a;var v=1/(w-d),p=-d*v;for(s=0;s<l;s++)for(h=0;h<c;h++)i[s][h]=v*i[s][h]+p;return i}},45664:function(W,I,o){var T=o(42048),k=o(71828).ensureArray;function r(m,h,s){var e=-.5*s[0]+1.5*h[0],t=-.5*s[1]+1.5*h[1];return[(2*e+m[0])/3,(2*t+m[1])/3]}W.exports=function(m,h,s,e,t,n){var a,i,c,l,u,f,d,w,v,p,y=s[0].length,b=s.length,x=t?3*y-2:y,_=n?3*b-2:b;for(m=k(m,_),h=k(h,_),c=0;c<_;c++)m[c]=k(m[c],x),h[c]=k(h[c],x);for(i=0,l=0;i<b;i++,l+=n?3:1)for(u=m[l],f=h[l],d=s[i],w=e[i],a=0,c=0;a<y;a++,c+=t?3:1)u[c]=d[a],f[c]=w[a];if(t)for(i=0,l=0;i<b;i++,l+=n?3:1){for(a=1,c=3;a<y-1;a++,c+=3)v=T([s[i][a-1],e[i][a-1]],[s[i][a],e[i][a]],[s[i][a+1],e[i][a+1]],t),m[l][c-1]=v[0][0],h[l][c-1]=v[0][1],m[l][c+1]=v[1][0],h[l][c+1]=v[1][1];p=r([m[l][0],h[l][0]],[m[l][2],h[l][2]],[m[l][3],h[l][3]]),m[l][1]=p[0],h[l][1]=p[1],p=r([m[l][x-1],h[l][x-1]],[m[l][x-3],h[l][x-3]],[m[l][x-4],h[l][x-4]]),m[l][x-2]=p[0],h[l][x-2]=p[1]}if(n)for(c=0;c<x;c++){for(l=3;l<_-3;l+=3)v=T([m[l-3][c],h[l-3][c]],[m[l][c],h[l][c]],[m[l+3][c],h[l+3][c]],n),m[l-1][c]=v[0][0],h[l-1][c]=v[0][1],m[l+1][c]=v[1][0],h[l+1][c]=v[1][1];p=r([m[0][c],h[0][c]],[m[2][c],h[2][c]],[m[3][c],h[3][c]]),m[1][c]=p[0],h[1][c]=p[1],p=r([m[_-1][c],h[_-1][c]],[m[_-3][c],h[_-3][c]],[m[_-4][c],h[_-4][c]]),m[_-2][c]=p[0],h[_-2][c]=p[1]}if(t&&n)for(l=1;l<_;l+=(l+1)%3==0?2:1){for(c=3;c<x-3;c+=3)v=T([m[l][c-3],h[l][c-3]],[m[l][c],h[l][c]],[m[l][c+3],h[l][c+3]],t),m[l][c-1]=.5*(m[l][c-1]+v[0][0]),h[l][c-1]=.5*(h[l][c-1]+v[0][1]),m[l][c+1]=.5*(m[l][c+1]+v[1][0]),h[l][c+1]=.5*(h[l][c+1]+v[1][1]);p=r([m[l][0],h[l][0]],[m[l][2],h[l][2]],[m[l][3],h[l][3]]),m[l][1]=.5*(m[l][1]+p[0]),h[l][1]=.5*(h[l][1]+p[1]),p=r([m[l][x-1],h[l][x-1]],[m[l][x-3],h[l][x-3]],[m[l][x-4],h[l][x-4]]),m[l][x-2]=.5*(m[l][x-2]+p[0]),h[l][x-2]=.5*(h[l][x-2]+p[1])}return[m,h]}},35509:function(W){W.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(W){W.exports=function(I,o,T){return o&&T?function(k,r,m,h,s){var e,t,n,a,i,c;k||(k=[]),r*=3,m*=3;var l=h*h,u=1-h,f=u*u,d=u*h*2,w=-3*f,v=3*(f-d),p=3*(d-l),y=3*l,b=s*s,x=b*s,_=1-s,g=_*_,A=g*_;for(c=0;c<I.length;c++)e=w*(i=I[c])[m][r]+v*i[m][r+1]+p*i[m][r+2]+y*i[m][r+3],t=w*i[m+1][r]+v*i[m+1][r+1]+p*i[m+1][r+2]+y*i[m+1][r+3],n=w*i[m+2][r]+v*i[m+2][r+1]+p*i[m+2][r+2]+y*i[m+2][r+3],a=w*i[m+3][r]+v*i[m+3][r+1]+p*i[m+3][r+2]+y*i[m+3][r+3],k[c]=A*e+3*(g*s*t+_*b*n)+x*a;return k}:o?function(k,r,m,h,s){var e,t,n,a;k||(k=[]),r*=3;var i=h*h,c=1-h,l=c*c,u=c*h*2,f=-3*l,d=3*(l-u),w=3*(u-i),v=3*i,p=1-s;for(n=0;n<I.length;n++)e=f*(a=I[n])[m][r]+d*a[m][r+1]+w*a[m][r+2]+v*a[m][r+3],t=f*a[m+1][r]+d*a[m+1][r+1]+w*a[m+1][r+2]+v*a[m+1][r+3],k[n]=p*e+s*t;return k}:T?function(k,r,m,h,s){var e,t,n,a,i,c;k||(k=[]),m*=3;var l=s*s,u=l*s,f=1-s,d=f*f,w=d*f;for(i=0;i<I.length;i++)e=(c=I[i])[m][r+1]-c[m][r],t=c[m+1][r+1]-c[m+1][r],n=c[m+2][r+1]-c[m+2][r],a=c[m+3][r+1]-c[m+3][r],k[i]=w*e+3*(d*s*t+f*l*n)+u*a;return k}:function(k,r,m,h,s){var e,t,n,a;k||(k=[]);var i=1-s;for(n=0;n<I.length;n++)e=(a=I[n])[m][r+1]-a[m][r],t=a[m+1][r+1]-a[m+1][r],k[n]=i*e+s*t;return k}}},73057:function(W){W.exports=function(I,o,T){return o&&T?function(k,r,m,h,s){var e,t,n,a,i,c;k||(k=[]),r*=3,m*=3;var l=h*h,u=l*h,f=1-h,d=f*f,w=d*f,v=s*s,p=1-s,y=p*p,b=p*s*2,x=-3*y,_=3*(y-b),g=3*(b-v),A=3*v;for(c=0;c<I.length;c++)e=x*(i=I[c])[m][r]+_*i[m+1][r]+g*i[m+2][r]+A*i[m+3][r],t=x*i[m][r+1]+_*i[m+1][r+1]+g*i[m+2][r+1]+A*i[m+3][r+1],n=x*i[m][r+2]+_*i[m+1][r+2]+g*i[m+2][r+2]+A*i[m+3][r+2],a=x*i[m][r+3]+_*i[m+1][r+3]+g*i[m+2][r+3]+A*i[m+3][r+3],k[c]=w*e+3*(d*h*t+f*l*n)+u*a;return k}:o?function(k,r,m,h,s){var e,t,n,a,i,c;k||(k=[]),r*=3;var l=s*s,u=l*s,f=1-s,d=f*f,w=d*f;for(i=0;i<I.length;i++)e=(c=I[i])[m+1][r]-c[m][r],t=c[m+1][r+1]-c[m][r+1],n=c[m+1][r+2]-c[m][r+2],a=c[m+1][r+3]-c[m][r+3],k[i]=w*e+3*(d*s*t+f*l*n)+u*a;return k}:T?function(k,r,m,h,s){var e,t,n,a;k||(k=[]),m*=3;var i=1-h,c=s*s,l=1-s,u=l*l,f=l*s*2,d=-3*u,w=3*(u-f),v=3*(f-c),p=3*c;for(n=0;n<I.length;n++)e=d*(a=I[n])[m][r]+w*a[m+1][r]+v*a[m+2][r]+p*a[m+3][r],t=d*a[m][r+1]+w*a[m+1][r+1]+v*a[m+2][r+1]+p*a[m+3][r+1],k[n]=i*e+h*t;return k}:function(k,r,m,h,s){var e,t,n,a;k||(k=[]);var i=1-h;for(n=0;n<I.length;n++)e=(a=I[n])[m+1][r]-a[m][r],t=a[m+1][r+1]-a[m][r+1],k[n]=i*e+h*t;return k}}},20349:function(W){W.exports=function(I,o,T,k,r){var m=o-2,h=T-2;return k&&r?function(s,e,t){var n,a,i,c,l,u;s||(s=[]);var f=Math.max(0,Math.min(Math.floor(e),m)),d=Math.max(0,Math.min(Math.floor(t),h)),w=Math.max(0,Math.min(1,e-f)),v=Math.max(0,Math.min(1,t-d));f*=3,d*=3;var p=w*w,y=p*w,b=1-w,x=b*b,_=x*b,g=v*v,A=g*v,M=1-v,L=M*M,E=L*M;for(u=0;u<I.length;u++)n=_*(l=I[u])[d][f]+3*(x*w*l[d][f+1]+b*p*l[d][f+2])+y*l[d][f+3],a=_*l[d+1][f]+3*(x*w*l[d+1][f+1]+b*p*l[d+1][f+2])+y*l[d+1][f+3],i=_*l[d+2][f]+3*(x*w*l[d+2][f+1]+b*p*l[d+2][f+2])+y*l[d+2][f+3],c=_*l[d+3][f]+3*(x*w*l[d+3][f+1]+b*p*l[d+3][f+2])+y*l[d+3][f+3],s[u]=E*n+3*(L*v*a+M*g*i)+A*c;return s}:k?function(s,e,t){s||(s=[]);var n,a,i,c,l,u,f=Math.max(0,Math.min(Math.floor(e),m)),d=Math.max(0,Math.min(Math.floor(t),h)),w=Math.max(0,Math.min(1,e-f)),v=Math.max(0,Math.min(1,t-d));f*=3;var p=w*w,y=p*w,b=1-w,x=b*b,_=x*b,g=1-v;for(l=0;l<I.length;l++)n=g*(u=I[l])[d][f]+v*u[d+1][f],a=g*u[d][f+1]+v*u[d+1][f+1],i=g*u[d][f+2]+v*u[d+1][f+1],c=g*u[d][f+3]+v*u[d+1][f+1],s[l]=_*n+3*(x*w*a+b*p*i)+y*c;return s}:r?function(s,e,t){s||(s=[]);var n,a,i,c,l,u,f=Math.max(0,Math.min(Math.floor(e),m)),d=Math.max(0,Math.min(Math.floor(t),h)),w=Math.max(0,Math.min(1,e-f)),v=Math.max(0,Math.min(1,t-d));d*=3;var p=v*v,y=p*v,b=1-v,x=b*b,_=x*b,g=1-w;for(l=0;l<I.length;l++)n=g*(u=I[l])[d][f]+w*u[d][f+1],a=g*u[d+1][f]+w*u[d+1][f+1],i=g*u[d+2][f]+w*u[d+2][f+1],c=g*u[d+3][f]+w*u[d+3][f+1],s[l]=_*n+3*(x*v*a+b*p*i)+y*c;return s}:function(s,e,t){s||(s=[]);var n,a,i,c,l=Math.max(0,Math.min(Math.floor(e),m)),u=Math.max(0,Math.min(Math.floor(t),h)),f=Math.max(0,Math.min(1,e-l)),d=Math.max(0,Math.min(1,t-u)),w=1-d,v=1-f;for(i=0;i<I.length;i++)n=v*(c=I[i])[u][l]+f*c[u][l+1],a=v*c[u+1][l]+f*c[u+1][l+1],s[i]=w*n+d*a;return s}}},92087:function(W,I,o){var T=o(71828),k=o(19237),r=o(13145),m=o(99798),h=o(22399);W.exports=function(s,e,t,n){function a(c,l){return T.coerce(s,e,m,c,l)}e._clipPathId="clip"+e.uid+"carpet";var i=a("color",h.defaultLine);T.coerceFont(a,"font"),a("carpet"),r(s,e,n,a,i),e.a&&e.b?(e.a.length<3&&(e.aaxis.smoothing=0),e.b.length<3&&(e.baxis.smoothing=0),k(s,e,a)||(e.visible=!1),e._cheater&&a("cheaterslope")):e.visible=!1}},21462:function(W,I,o){W.exports={attributes:o(99798),supplyDefaults:o(92087),plot:o(89740),calc:o(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:o(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(W){W.exports=function(I,o){for(var T,k=I._fullData.length,r=0;r<k;r++){var m=I._fullData[r];if(m.index!==o.index&&m.type==="carpet"&&(T||(T=m),m.carpet===o.carpet))return m}return T}},67961:function(W){W.exports=function(I,o,T){if(I.length===0)return"";var k,r=[],m=T?3:1;for(k=0;k<I.length;k+=m)r.push(I[k]+","+o[k]),T&&k<I.length-m&&(r.push("C"),r.push([I[k+1]+","+o[k+1],I[k+2]+","+o[k+2]+" "].join(" ")));return r.join(T?"":"L")}},27669:function(W,I,o){var T=o(71828).isArrayOrTypedArray;W.exports=function(k,r,m){var h;for(T(k)?k.length>r.length&&(k=k.slice(0,r.length)):k=[],h=0;h<r.length;h++)k[h]=m(r[h]);return k}},11651:function(W){W.exports=function(I,o,T,k,r,m){var h=r[0]*I.dpdx(o),s=r[1]*I.dpdy(T),e=1,t=1;if(m){var n=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=Math.sqrt(m[0]*m[0]+m[1]*m[1]),i=(r[0]*m[0]+r[1]*m[1])/n/a;t=Math.max(0,i)}var c=180*Math.atan2(s,h)/Math.PI;return c<-90?(c+=180,e=-e):c>90&&(c-=180,e=-e),{angle:c,flip:e,p:I.c2p(k,o,T),offsetMultplier:t}}},89740:function(W,I,o){var T=o(39898),k=o(91424),r=o(27669),m=o(67961),h=o(11651),s=o(63893),e=o(71828),t=e.strRotate,n=e.strTranslate,a=o(18783);function i(d,w,v,p,y,b,x){var _="const-"+y+"-lines",g=v.selectAll("."+_).data(b);g.enter().append("path").classed(_,!0).style("vector-effect",x?"none":"non-scaling-stroke"),g.each(function(A){var M=A,L=M.x,E=M.y,S=r([],L,d.c2p),O=r([],E,w.c2p),P="M"+m(S,O,M.smoothing);T.select(this).attr("d",P).style("stroke-width",M.width).style("stroke",M.color).style("stroke-dasharray",k.dashStyle(M.dash,M.width)).style("fill","none")}),g.exit().remove()}function c(d,w,v,p,y,b,x,_){var g=b.selectAll("text."+_).data(x);g.enter().append("text").classed(_,!0);var A=0,M={};return g.each(function(L,E){var S;if(L.axis.tickangle==="auto")S=h(p,w,v,L.xy,L.dxy);else{var O=(L.axis.tickangle+180)*Math.PI/180;S=h(p,w,v,L.xy,[Math.cos(O),Math.sin(O)])}E||(M={angle:S.angle,flip:S.flip});var P=(L.endAnchor?-1:1)*S.flip,U=T.select(this).attr({"text-anchor":P>0?"start":"end","data-notex":1}).call(k.font,L.font).text(L.text).call(s.convertToTspans,d),R=k.bBox(this);U.attr("transform",n(S.p[0],S.p[1])+t(S.angle)+n(L.axis.labelpadding*P,.3*R.height)),A=Math.max(A,R.width+L.axis.labelpadding)}),g.exit().remove(),M.maxExtent=A,M}W.exports=function(d,w,v,p){var y=d._context.staticPlot,b=w.xaxis,x=w.yaxis,_=d._fullLayout._clips;e.makeTraceGroups(p,v,"trace").each(function(g){var A=T.select(this),M=g[0],L=M.trace,E=L.aaxis,S=L.baxis,O=e.ensureSingle(A,"g","minorlayer"),P=e.ensureSingle(A,"g","majorlayer"),U=e.ensureSingle(A,"g","boundarylayer"),R=e.ensureSingle(A,"g","labellayer");A.style("opacity",L.opacity),i(b,x,P,0,"a",E._gridlines,!0),i(b,x,P,0,"b",S._gridlines,!0),i(b,x,O,0,"a",E._minorgridlines,!0),i(b,x,O,0,"b",S._minorgridlines,!0),i(b,x,U,0,"a-boundary",E._boundarylines,y),i(b,x,U,0,"b-boundary",S._boundarylines,y);var j=c(d,b,x,L,0,R,E._labels,"a-label"),B=c(d,b,x,L,0,R,S._labels,"b-label");(function(z,G,V,et,J,X,Y,Z){var tt,rt,nt,ot,ct=e.aggNums(Math.min,null,V.a),pt=e.aggNums(Math.max,null,V.a),gt=e.aggNums(Math.min,null,V.b),kt=e.aggNums(Math.max,null,V.b);tt=.5*(ct+pt),rt=gt,nt=V.ab2xy(tt,rt,!0),ot=V.dxyda_rough(tt,rt),Y.angle===void 0&&e.extendFlat(Y,h(V,J,X,nt,V.dxydb_rough(tt,rt))),f(z,G,V,0,nt,ot,V.aaxis,J,X,Y,"a-title"),tt=ct,rt=.5*(gt+kt),nt=V.ab2xy(tt,rt,!0),ot=V.dxydb_rough(tt,rt),Z.angle===void 0&&e.extendFlat(Z,h(V,J,X,nt,V.dxyda_rough(tt,rt))),f(z,G,V,0,nt,ot,V.baxis,J,X,Z,"b-title")})(d,R,L,0,b,x,j,B),function(z,G,V,et,J){var X,Y,Z,tt,rt=V.select("#"+z._clipPathId);rt.size()||(rt=V.append("clipPath").classed("carpetclip",!0));var nt=e.ensureSingle(rt,"path","carpetboundary"),ot=G.clipsegments,ct=[];for(tt=0;tt<ot.length;tt++)X=ot[tt],Y=r([],X.x,et.c2p),Z=r([],X.y,J.c2p),ct.push(m(Y,Z,X.bicubic));var pt="M"+ct.join("L")+"Z";rt.attr("id",z._clipPathId),nt.attr("d",pt)}(L,M,_,b,x)})};var l=a.LINE_SPACING,u=(1-a.MID_SHIFT)/l+1;function f(d,w,v,p,y,b,x,_,g,A,M){var L=[];x.title.text&&L.push(x.title.text);var E=w.selectAll("text."+M).data(L),S=A.maxExtent;E.enter().append("text").classed(M,!0),E.each(function(){var O=h(v,_,g,y,b);["start","both"].indexOf(x.showticklabels)===-1&&(S=0);var P=x.title.font.size;S+=P+x.title.offset;var U=(A.angle+(A.flip<0?180:0)-O.angle+450)%360,R=U>90&&U<270,j=T.select(this);j.text(x.title.text).call(s.convertToTspans,d),R&&(S=(-s.lineCount(j)+u)*l*P-S),j.attr("transform",n(O.p[0],O.p[1])+t(O.angle)+n(0,S)).attr("text-anchor","middle").call(k.font,x.title.font)}),E.exit().remove()}},11435:function(W,I,o){var T=o(35509),k=o(65888).findBin,r=o(45664),m=o(20349),h=o(54495),s=o(73057);W.exports=function(e){var t=e._a,n=e._b,a=t.length,i=n.length,c=e.aaxis,l=e.baxis,u=t[0],f=t[a-1],d=n[0],w=n[i-1],v=t[t.length-1]-t[0],p=n[n.length-1]-n[0],y=v*T.RELATIVE_CULL_TOLERANCE,b=p*T.RELATIVE_CULL_TOLERANCE;u-=y,f+=y,d-=b,w+=b,e.isVisible=function(x,_){return x>u&&x<f&&_>d&&_<w},e.isOccluded=function(x,_){return x<u||x>f||_<d||_>w},e.setScale=function(){var x=e._x,_=e._y,g=r(e._xctrl,e._yctrl,x,_,c.smoothing,l.smoothing);e._xctrl=g[0],e._yctrl=g[1],e.evalxy=m([e._xctrl,e._yctrl],a,i,c.smoothing,l.smoothing),e.dxydi=h([e._xctrl,e._yctrl],c.smoothing,l.smoothing),e.dxydj=s([e._xctrl,e._yctrl],c.smoothing,l.smoothing)},e.i2a=function(x){var _=Math.max(0,Math.floor(x[0]),a-2),g=x[0]-_;return(1-g)*t[_]+g*t[_+1]},e.j2b=function(x){var _=Math.max(0,Math.floor(x[1]),a-2),g=x[1]-_;return(1-g)*n[_]+g*n[_+1]},e.ij2ab=function(x){return[e.i2a(x[0]),e.j2b(x[1])]},e.a2i=function(x){var _=Math.max(0,Math.min(k(x,t),a-2)),g=t[_],A=t[_+1];return Math.max(0,Math.min(a-1,_+(x-g)/(A-g)))},e.b2j=function(x){var _=Math.max(0,Math.min(k(x,n),i-2)),g=n[_],A=n[_+1];return Math.max(0,Math.min(i-1,_+(x-g)/(A-g)))},e.ab2ij=function(x){return[e.a2i(x[0]),e.b2j(x[1])]},e.i2c=function(x,_){return e.evalxy([],x,_)},e.ab2xy=function(x,_,g){if(!g&&(x<t[0]||x>t[a-1]|_<n[0]||_>n[i-1]))return[!1,!1];var A=e.a2i(x),M=e.b2j(_),L=e.evalxy([],A,M);if(g){var E,S,O,P,U=0,R=0,j=[];x<t[0]?(E=0,S=0,U=(x-t[0])/(t[1]-t[0])):x>t[a-1]?(E=a-2,S=1,U=(x-t[a-1])/(t[a-1]-t[a-2])):S=A-(E=Math.max(0,Math.min(a-2,Math.floor(A)))),_<n[0]?(O=0,P=0,R=(_-n[0])/(n[1]-n[0])):_>n[i-1]?(O=i-2,P=1,R=(_-n[i-1])/(n[i-1]-n[i-2])):P=M-(O=Math.max(0,Math.min(i-2,Math.floor(M)))),U&&(e.dxydi(j,E,O,S,P),L[0]+=j[0]*U,L[1]+=j[1]*U),R&&(e.dxydj(j,E,O,S,P),L[0]+=j[0]*R,L[1]+=j[1]*R)}return L},e.c2p=function(x,_,g){return[_.c2p(x[0]),g.c2p(x[1])]},e.p2x=function(x,_,g){return[_.p2c(x[0]),g.p2c(x[1])]},e.dadi=function(x){var _=Math.max(0,Math.min(t.length-2,x));return t[_+1]-t[_]},e.dbdj=function(x){var _=Math.max(0,Math.min(n.length-2,x));return n[_+1]-n[_]},e.dxyda=function(x,_,g,A){var M=e.dxydi(null,x,_,g,A),L=e.dadi(x,g);return[M[0]/L,M[1]/L]},e.dxydb=function(x,_,g,A){var M=e.dxydj(null,x,_,g,A),L=e.dbdj(_,A);return[M[0]/L,M[1]/L]},e.dxyda_rough=function(x,_,g){var A=v*(g||.1),M=e.ab2xy(x+A,_,!0),L=e.ab2xy(x-A,_,!0);return[.5*(M[0]-L[0])/A,.5*(M[1]-L[1])/A]},e.dxydb_rough=function(x,_,g){var A=p*(g||.1),M=e.ab2xy(x,_+A,!0),L=e.ab2xy(x,_-A,!0);return[.5*(M[0]-L[0])/A,.5*(M[1]-L[1])/A]},e.dpdx=function(x){return x._m},e.dpdy=function(x){return x._m}}},72505:function(W,I,o){var T=o(71828);W.exports=function(k,r,m){var h,s,e,t=[],n=[],a=k[0].length,i=k.length;function c(z,G){var V,et=0,J=0;return z>0&&(V=k[G][z-1])!==void 0&&(J++,et+=V),z<a-1&&(V=k[G][z+1])!==void 0&&(J++,et+=V),G>0&&(V=k[G-1][z])!==void 0&&(J++,et+=V),G<i-1&&(V=k[G+1][z])!==void 0&&(J++,et+=V),et/Math.max(1,J)}var l,u,f,d,w,v,p,y,b,x,_,g=0;for(h=0;h<a;h++)for(s=0;s<i;s++)k[s][h]===void 0&&(t.push(h),n.push(s),k[s][h]=c(h,s)),g=Math.max(g,Math.abs(k[s][h]));if(!t.length)return k;var A=0,M=0,L=t.length;do{for(A=0,e=0;e<L;e++){h=t[e],s=n[e];var E,S,O,P,U,R,j=0,B=0;h===0?(O=r[U=Math.min(a-1,2)],P=r[1],E=k[s][U],B+=(S=k[s][1])+(S-E)*(r[0]-P)/(P-O),j++):h===a-1&&(O=r[U=Math.max(0,a-3)],P=r[a-2],E=k[s][U],B+=(S=k[s][a-2])+(S-E)*(r[a-1]-P)/(P-O),j++),(h===0||h===a-1)&&s>0&&s<i-1&&(l=m[s+1]-m[s],B+=((u=m[s]-m[s-1])*k[s+1][h]+l*k[s-1][h])/(u+l),j++),s===0?(O=m[R=Math.min(i-1,2)],P=m[1],E=k[R][h],B+=(S=k[1][h])+(S-E)*(m[0]-P)/(P-O),j++):s===i-1&&(O=m[R=Math.max(0,i-3)],P=m[i-2],E=k[R][h],B+=(S=k[i-2][h])+(S-E)*(m[i-1]-P)/(P-O),j++),(s===0||s===i-1)&&h>0&&h<a-1&&(l=r[h+1]-r[h],B+=((u=r[h]-r[h-1])*k[s][h+1]+l*k[s][h-1])/(u+l),j++),j?B/=j:(f=r[h+1]-r[h],d=r[h]-r[h-1],y=(w=m[s+1]-m[s])*(v=m[s]-m[s-1])*(w+v),B=((p=f*d*(f+d))*(v*k[s+1][h]+w*k[s-1][h])+y*(d*k[s][h+1]+f*k[s][h-1]))/(y*(d+f)+p*(v+w))),A+=(x=(b=B-k[s][h])/g)*x,_=j?0:.85,k[s][h]+=b*(1+_)}A=Math.sqrt(A)}while(M++<100&&A>1e-5);return T.log("Smoother converged to",A,"after",M,"iterations"),k}},19237:function(W,I,o){var T=o(71828).isArray1D;W.exports=function(k,r,m){var h=m("x"),s=h&&h.length,e=m("y"),t=e&&e.length;if(!s&&!t)return!1;if(r._cheater=!h,s&&!T(h)||t&&!T(e))r._length=null;else{var n=s?h.length:1/0;t&&(n=Math.min(n,e.length)),r.a&&r.a.length&&(n=Math.min(n,r.a.length)),r.b&&r.b.length&&(n=Math.min(n,r.b.length)),r._length=n}return!0}},69568:function(W,I,o){var T=o(5386).fF,k=o(19316),r=o(50693),m=o(9012),h=o(22399).defaultLine,s=o(1426).extendFlat,e=k.marker.line;W.exports=s({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:s({},k.geojson,{}),featureidkey:k.featureidkey,text:s({},k.text,{}),hovertext:s({},k.hovertext,{}),marker:{line:{color:s({},e.color,{dflt:h}),width:s({},e.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:s({},m.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:T(),showlegend:s({},m.showlegend,{dflt:!1})},r("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(W,I,o){var T=o(92770),k=o(50606).BADNUM,r=o(78803),m=o(75225),h=o(66279);function s(e){return e&&typeof e=="string"}W.exports=function(e,t){var n,a=t._length,i=new Array(a);n=t.geojson?function(d){return s(d)||T(d)}:s;for(var c=0;c<a;c++){var l=i[c]={},u=t.locations[c],f=t.z[c];n(u)&&T(f)?(l.loc=u,l.z=f):(l.loc=null,l.z=k),l.index=c}return m(i,t),r(e,t,{vals:t.z,containerStr:"",cLetter:"z"}),h(i,t),i}},61869:function(W,I,o){var T=o(71828),k=o(1586),r=o(69568);W.exports=function(m,h,s,e){function t(l,u){return T.coerce(m,h,r,l,u)}var n=t("locations"),a=t("z");if(n&&n.length&&T.isArrayOrTypedArray(a)&&a.length){h._length=Math.min(n.length,a.length);var i,c=t("geojson");(typeof c=="string"&&c!==""||T.isPlainObject(c))&&(i="geojson-id"),t("locationmode",i)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(m,h,e,t,{prefix:"",cLetter:"z"}),T.coerceSelectionMarkerOpacity(h,t)}else h.visible=!1}},92069:function(W){W.exports=function(I,o,T,k,r){I.location=o.location,I.z=o.z;var m=k[r];return m.fIn&&m.fIn.properties&&(I.properties=m.fIn.properties),I.ct=m.ct,I}},42300:function(W,I,o){var T=o(89298),k=o(69568),r=o(71828).fillText;W.exports=function(m,h,s){var e,t,n,a,i=m.cd,c=i[0].trace,l=m.subplot,u=[h,s],f=[h+360,s];for(t=0;t<i.length;t++)if(a=!1,(e=i[t])._polygons){for(n=0;n<e._polygons.length;n++)e._polygons[n].contains(u)&&(a=!a),e._polygons[n].contains(f)&&(a=!a);if(a)break}if(a&&e)return m.x0=m.x1=m.xa.c2p(e.ct),m.y0=m.y1=m.ya.c2p(e.ct),m.index=e.index,m.location=e.loc,m.z=e.z,m.zLabel=T.tickText(l.mockAxis,l.mockAxis.c2l(e.z),"hover").text,m.hovertemplate=e.hovertemplate,function(d,w,v){if(!w.hovertemplate){var p=v.hi||w.hoverinfo,y=String(v.loc),b=p==="all"?k.hoverinfo.flags:p.split("+"),x=b.indexOf("name")!==-1,_=b.indexOf("location")!==-1,g=b.indexOf("z")!==-1,A=b.indexOf("text")!==-1,M=[];!x&&_?d.nameOverride=y:(x&&(d.nameOverride=w.name),_&&M.push(y)),g&&M.push(d.zLabel),A&&r(v,w,M),d.extraText=M.join("<br>")}}(m,c,e),[m]}},51319:function(W,I,o){W.exports={attributes:o(69568),supplyDefaults:o(61869),colorbar:o(61243),calc:o(38675),calcGeoJSON:o(99841).calcGeoJSON,plot:o(99841).plot,style:o(99636).style,styleOnSelect:o(99636).styleOnSelect,hoverPoints:o(42300),eventData:o(92069),selectPoints:o(81253),moduleType:"trace",name:"choropleth",basePlotModule:o(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(W,I,o){var T=o(39898),k=o(71828),r=o(41327),m=o(90973).getTopojsonFeatures,h=o(71739).findExtremes,s=o(99636).style;W.exports={calcGeoJSON:function(e,t){for(var n=e[0].trace,a=t[n.geo],i=a._subplot,c=n.locationmode,l=n._length,u=c==="geojson-id"?r.extractTraceFeature(e):m(n,i.topojson),f=[],d=[],w=0;w<l;w++){var v=e[w],p=c==="geojson-id"?v.fOut:r.locationToFeature(c,v.loc,u);if(p){v.geojson=p,v.ct=p.properties.ct,v._polygons=r.feature2polygons(p);var y=r.computeBbox(p);f.push(y[0],y[2]),d.push(y[1],y[3])}else v.geojson=null}if(a.fitbounds==="geojson"&&c==="geojson-id"){var b=r.computeBbox(r.getTraceGeojson(n));f=[b[0],b[2]],d=[b[1],b[3]]}var x={padded:!0};n._extremes.lon=h(a.lonaxis._ax,f,x),n._extremes.lat=h(a.lataxis._ax,d,x)},plot:function(e,t,n){var a=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(a,n,"trace choropleth").each(function(i){var c=T.select(this).selectAll("path.choroplethlocation").data(k.identity);c.enter().append("path").classed("choroplethlocation",!0),c.exit().remove(),s(e,i)})}}},81253:function(W){W.exports=function(I,o){var T,k,r,m,h,s=I.cd,e=I.xaxis,t=I.yaxis,n=[];if(o===!1)for(T=0;T<s.length;T++)s[T].selected=0;else for(T=0;T<s.length;T++)(r=(k=s[T]).ct)&&(m=e.c2p(r),h=t.c2p(r),o.contains([m,h],null,T,I)?(n.push({pointNumber:T,lon:r[0],lat:r[1]}),k.selected=1):k.selected=0);return n}},99636:function(W,I,o){var T=o(39898),k=o(7901),r=o(91424),m=o(21081);function h(s,e){var t=e[0].trace,n=e[0].node3.selectAll(".choroplethlocation"),a=t.marker||{},i=a.line||{},c=m.makeColorScaleFuncFromTrace(t);n.each(function(l){T.select(this).attr("fill",c(l.z)).call(k.stroke,l.mlc||i.color).call(r.dashLine,"",l.mlw||i.width||0).style("opacity",a.opacity)}),r.selectedPointStyle(n,t)}W.exports={style:function(s,e){e&&h(0,e)},styleOnSelect:function(s,e){var t=e[0].node3,n=e[0].trace;n.selectedpoints?r.selectedPointStyle(t.selectAll(".choroplethlocation"),n):h(0,e)}}},64496:function(W,I,o){var T=o(69568),k=o(50693),r=o(5386).fF,m=o(9012),h=o(1426).extendFlat;W.exports=h({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:h({},T.featureidkey,{}),below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,marker:{line:{color:h({},T.marker.line.color,{editType:"plot"}),width:h({},T.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:h({},T.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:h({},T.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:h({},T.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:T.hoverinfo,hovertemplate:r({},{keys:["properties"]}),showlegend:h({},m.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(W,I,o){var T=o(92770),k=o(71828),r=o(21081),m=o(91424),h=o(18214).makeBlank,s=o(41327);function e(t){var n,a=t[0].trace,i=a._opts;if(a.selectedpoints){for(var c=m.makeSelectedPointStyleFns(a),l=0;l<t.length;l++){var u=t[l];u.fOut&&(u.fOut.properties.mo2=c.selectedOpacityFn(u))}n={type:"identity",property:"mo2"}}else n=k.isArrayOrTypedArray(a.marker.opacity)?{type:"identity",property:"mo"}:a.marker.opacity;return k.extendFlat(i.fill.paint,{"fill-opacity":n}),k.extendFlat(i.line.paint,{"line-opacity":n}),i}W.exports={convert:function(t){var n=t[0].trace,a=n.visible===!0&&n._length!==0,i={layout:{visibility:"none"},paint:{}},c={layout:{visibility:"none"},paint:{}},l=n._opts={fill:i,line:c,geojson:h()};if(!a)return l;var u=s.extractTraceFeature(t);if(!u)return l;var f,d,w,v=r.makeColorScaleFuncFromTrace(n),p=n.marker,y=p.line||{};k.isArrayOrTypedArray(p.opacity)&&(f=function(M){var L=M.mo;return T(L)?+k.constrain(L,0,1):0}),k.isArrayOrTypedArray(y.color)&&(d=function(M){return M.mlc}),k.isArrayOrTypedArray(y.width)&&(w=function(M){return M.mlw});for(var b=0;b<t.length;b++){var x=t[b],_=x.fOut;if(_){var g=_.properties;g.fc=v(x.z),f&&(g.mo=f(x)),d&&(g.mlc=d(x)),w&&(g.mlw=w(x)),x.ct=g.ct,x._polygons=s.feature2polygons(_)}}var A=f?{type:"identity",property:"mo"}:p.opacity;return k.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":A}),k.extendFlat(c.paint,{"line-color":d?{type:"identity",property:"mlc"}:y.color,"line-width":w?{type:"identity",property:"mlw"}:y.width,"line-opacity":A}),i.layout.visibility="visible",c.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:u},e(t),l},convertOnSelect:e}},22654:function(W,I,o){var T=o(71828),k=o(1586),r=o(64496);W.exports=function(m,h,s,e){function t(c,l){return T.coerce(m,h,r,c,l)}var n=t("locations"),a=t("z"),i=t("geojson");T.isArrayOrTypedArray(n)&&n.length&&T.isArrayOrTypedArray(a)&&a.length&&(typeof i=="string"&&i!==""||T.isPlainObject(i))?(t("featureidkey"),h._length=Math.min(n.length,a.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(m,h,e,t,{prefix:"",cLetter:"z"}),T.coerceSelectionMarkerOpacity(h,t)):h.visible=!1}},57516:function(W,I,o){W.exports={attributes:o(64496),supplyDefaults:o(22654),colorbar:o(61243),calc:o(38675),plot:o(7852),hoverPoints:o(42300),eventData:o(92069),selectPoints:o(81253),styleOnSelect:function(T,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(T,k){for(var r=k.getMapLayers(),m=r.length-2;m>=0;m--){var h=r[m].id;if(typeof h=="string"&&h.indexOf("water")===0){for(var s=m+1;s<r.length;s++)if(typeof(h=r[s].id)=="string"&&h.indexOf("plotly-")===-1)return h}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:o(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(W,I,o){var T=o(82004).convert,k=o(82004).convertOnSelect,r=o(77734).traceLayerPrefix;function m(s,e){this.type="choroplethmapbox",this.subplot=s,this.uid=e,this.sourceId="source-"+e,this.layerList=[["fill",r+e+"-fill"],["line",r+e+"-line"]],this.below=null}var h=m.prototype;h.update=function(s){this._update(T(s)),s[0].trace._glTrace=this},h.updateOnSelect=function(s){this._update(k(s))},h._update=function(s){var e=this.subplot,t=this.layerList,n=e.belowLookup["trace-"+this.uid];e.map.getSource(this.sourceId).setData(s.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(s,n),this.below=n);for(var a=0;a<t.length;a++){var i=t[a],c=i[0],l=i[1],u=s[c];e.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&e.setOptions(l,"setPaintProperty",u.paint)}},h._addLayers=function(s,e){for(var t=this.subplot,n=this.layerList,a=this.sourceId,i=0;i<n.length;i++){var c=n[i],l=c[0],u=s[l];t.addLayer({type:l,id:c[1],source:a,layout:u.layout,paint:u.paint},e)}},h._removeLayers=function(){for(var s=this.subplot.map,e=this.layerList,t=e.length-1;t>=0;t--)s.removeLayer(e[t][1])},h.dispose=function(){var s=this.subplot.map;this._removeLayers(),s.removeSource(this.sourceId)},W.exports=function(s,e){var t=e[0].trace,n=new m(s,t.uid),a=n.sourceId,i=T(e),c=n.below=s.belowLookup["trace-"+t.uid];return s.map.addSource(a,{type:"geojson",data:i.geojson}),n._addLayers(i,c),e[0].trace._glTrace=n,n}},12674:function(W,I,o){var T=o(50693),k=o(12663).axisHoverFormat,r=o(5386).fF,m=o(2418),h=o(9012),s=o(1426).extendFlat,e={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:r({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:s({},h.showlegend,{dflt:!1})};s(e,T("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){e[t]=m[t]}),e.hoverinfo=s({},h.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),e.transforms=void 0,W.exports=e},31371:function(W,I,o){var T=o(78803);W.exports=function(k,r){for(var m=r.u,h=r.v,s=r.w,e=Math.min(r.x.length,r.y.length,r.z.length,m.length,h.length,s.length),t=-1/0,n=1/0,a=0;a<e;a++){var i=m[a],c=h[a],l=s[a],u=Math.sqrt(i*i+c*c+l*l);t=Math.max(t,u),n=Math.min(n,u)}r._len=e,r._normMax=t,T(k,r,{vals:[n,t],containerStr:"",cLetter:"c"})}},5453:function(W,I,o){var T=o(9330).gl_cone3d,k=o(9330).gl_cone3d.createConeMesh,r=o(71828).simpleMap,m=o(81697).parseColorScale,h=o(21081).extractOpts,s=o(90060);function e(l,u){this.scene=l,this.uid=u,this.mesh=null,this.data=null}var t=e.prototype;t.handlePick=function(l){if(l.object===this.mesh){var u=l.index=l.data.index,f=this.data.x[u],d=this.data.y[u],w=this.data.z[u],v=this.data.u[u],p=this.data.v[u],y=this.data.w[u];l.traceCoordinate=[f,d,w,v,p,y,Math.sqrt(v*v+p*p+y*y)];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&b[u]!==void 0?l.textLabel=b[u]:b&&(l.textLabel=b),!0}};var n={xaxis:0,yaxis:1,zaxis:2},a={tip:1,tail:0,cm:.25,center:.5},i={tip:1,tail:1,cm:.75,center:.5};function c(l,u){var f=l.fullSceneLayout,d=l.dataScale,w={};function v(x,_){var g=f[_],A=d[n[_]];return r(x,function(M){return g.d2l(M)*A})}w.vectors=s(v(u.u,"xaxis"),v(u.v,"yaxis"),v(u.w,"zaxis"),u._len),w.positions=s(v(u.x,"xaxis"),v(u.y,"yaxis"),v(u.z,"zaxis"),u._len);var p=h(u);w.colormap=m(u),w.vertexIntensityBounds=[p.min/u._normMax,p.max/u._normMax],w.coneOffset=a[u.anchor],u.sizemode==="scaled"?w.coneSize=u.sizeref||.5:w.coneSize=u.sizeref&&u._normMax?u.sizeref/u._normMax:.5;var y=T(w),b=u.lightposition;return y.lightPosition=[b.x,b.y,b.z],y.ambient=u.lighting.ambient,y.diffuse=u.lighting.diffuse,y.specular=u.lighting.specular,y.roughness=u.lighting.roughness,y.fresnel=u.lighting.fresnel,y.opacity=u.opacity,u._pad=i[u.anchor]*y.vectorScale*y.coneScale*u._normMax,y}t.update=function(l){this.data=l;var u=c(this.scene,l);this.mesh.update(u)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},W.exports=function(l,u){var f=l.glplot.gl,d=c(l,u),w=k(f,d),v=new e(l,u.uid);return v.mesh=w,v.data=u,w._trace=v,l.glplot.add(w),v}},91750:function(W,I,o){var T=o(71828),k=o(1586),r=o(12674);W.exports=function(m,h,s,e){function t(f,d){return T.coerce(m,h,r,f,d)}var n=t("u"),a=t("v"),i=t("w"),c=t("x"),l=t("y"),u=t("z");n&&n.length&&a&&a.length&&i&&i.length&&c&&c.length&&l&&l.length&&u&&u.length?(t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(m,h,e,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),h._length=null):h.visible=!1}},98128:function(W,I,o){W.exports={moduleType:"trace",name:"cone",basePlotModule:o(58547),categories:["gl3d","showLegend"],attributes:o(12674),supplyDefaults:o(91750),colorbar:{min:"cmin",max:"cmax"},calc:o(31371),plot:o(5453),eventData:function(T,k){return T.norm=k.traceCoordinate[6],T},meta:{}}},70600:function(W,I,o){var T=o(21606),k=o(82196),r=o(12663),m=r.axisHoverFormat,h=r.descriptionOnlyNumbers,s=o(50693),e=o(79952).P,t=o(41940),n=o(1426).extendFlat,a=o(74808),i=a.COMPARISON_OPS2,c=a.INTERVAL_OPS,l=k.line;W.exports=n({z:T.z,x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,text:T.text,hovertext:T.hovertext,transpose:T.transpose,xtype:T.xtype,ytype:T.ytype,xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z",1),hovertemplate:T.hovertemplate,texttemplate:n({},T.texttemplate,{}),textfont:n({},T.textfont,{}),hoverongaps:T.hoverongaps,connectgaps:n({},T.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:h("contour label")},operation:{valType:"enumerated",values:[].concat(i).concat(c),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:e,smoothing:n({},l.smoothing,{}),editType:"plot"}},s("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(W,I,o){var T=o(21081),k=o(90757),r=o(18670),m=o(53572);W.exports=function(h,s){var e=k(h,s),t=e[0].z;r(s,t);var n,a=s.contours,i=T.extractOpts(s);if(a.coloring==="heatmap"&&i.auto&&s.autocontour===!1){var c=a.start,l=m(a),u=a.size||1,f=Math.floor((l-c)/u)+1;isFinite(u)||(u=1,f=1);var d=c-u/2;n=[d,d+f*u]}else n=t;return T.calc(h,s,{vals:n,cLetter:"z"}),e}},20083:function(W){W.exports=function(I,o){var T,k=I[0],r=k.z;switch(o.type){case"levels":var m=Math.min(r[0][0],r[0][1]);for(T=0;T<I.length;T++){var h=I[T];h.prefixBoundary=!h.edgepaths.length&&(m>h.level||h.starts.length&&m===h.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var s=k.x.length,e=k.y.length,t=-1/0,n=1/0;for(T=0;T<e;T++)n=Math.min(n,r[T][0]),n=Math.min(n,r[T][s-1]),t=Math.max(t,r[T][0]),t=Math.max(t,r[T][s-1]);for(T=1;T<s-1;T++)n=Math.min(n,r[0][T]),n=Math.min(n,r[e-1][T]),t=Math.max(t,r[0][T]),t=Math.max(t,r[e-1][T]);var a,i,c=o.value;switch(o._operation){case">":c>t&&(k.prefixBoundary=!0);break;case"<":(c<n||k.starts.length&&c===n)&&(k.prefixBoundary=!0);break;case"[]":a=Math.min(c[0],c[1]),((i=Math.max(c[0],c[1]))<n||a>t||k.starts.length&&i===n)&&(k.prefixBoundary=!0);break;case"][":a=Math.min(c[0],c[1]),i=Math.max(c[0],c[1]),a<n&&i>t&&(k.prefixBoundary=!0)}}}},90654:function(W,I,o){var T=o(21081),k=o(86068),r=o(53572);W.exports={min:"zmin",max:"zmax",calc:function(m,h,s){var e=h.contours,t=h.line,n=e.size||1,a=e.coloring,i=k(h,{isColorbar:!0});if(a==="heatmap"){var c=T.extractOpts(h);s._fillgradient=c.reversescale?T.flipScale(c.colorscale):c.colorscale,s._zrange=[c.min,c.max]}else a==="fill"&&(s._fillcolor=i);s._line={color:a==="lines"?i:t.color,width:e.showlines!==!1?t.width:0,dash:t.dash},s._levels={start:e.start,end:r(e),size:n}}}},36914:function(W){W.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(W,I,o){var T=o(92770),k=o(14523),r=o(7901),m=r.addOpacity,h=r.opacity,s=o(74808),e=s.CONSTRAINT_REDUCTION,t=s.COMPARISON_OPS2;W.exports=function(n,a,i,c,l,u){var f,d,w,v=a.contours,p=i("contours.operation");v._operation=e[p],function(y,b){var x;t.indexOf(b.operation)===-1?(y("contours.value",[0,1]),Array.isArray(b.value)?b.value.length>2?b.value=b.value.slice(2):b.length===0?b.value=[0,1]:b.length<2?(x=parseFloat(b.value[0]),b.value=[x,x+1]):b.value=[parseFloat(b.value[0]),parseFloat(b.value[1])]:T(b.value)&&(x=parseFloat(b.value),b.value=[x,x+1])):(y("contours.value",0),T(b.value)||(Array.isArray(b.value)?b.value=parseFloat(b.value[0]):b.value=0))}(i,v),p==="="?f=v.showlines=!0:(f=i("contours.showlines"),w=i("fillcolor",m((n.line||{}).color||l,.5))),f&&(d=i("line.color",w&&h(w)?m(a.fillcolor,1):l),i("line.width",2),i("line.dash")),i("line.smoothing"),k(i,c,d,u)}},64237:function(W,I,o){var T=o(74808),k=o(92770);function r(s,e){var t,n=Array.isArray(e);function a(i){return k(i)?+i:null}return T.COMPARISON_OPS2.indexOf(s)!==-1?t=a(n?e[0]:e):T.INTERVAL_OPS.indexOf(s)!==-1?t=n?[a(e[0]),a(e[1])]:[a(e),a(e)]:T.SET_OPS.indexOf(s)!==-1&&(t=n?e.map(a):[a(e)]),t}function m(s){return function(e){e=r(s,e);var t=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]);return{start:t,end:n,size:n-t}}}function h(s){return function(e){return{start:e=r(s,e),end:1/0,size:1/0}}}W.exports={"[]":m("[]"),"][":m("]["),">":h(">"),"<":h("<"),"=":h("=")}},67217:function(W){W.exports=function(I,o,T,k){var r=k("contours.start"),m=k("contours.end"),h=r===!1||m===!1,s=T("contours.size");!(h?o.autocontour=!0:T("autocontour",!1))&&s||T("ncontours")}},84857:function(W,I,o){var T=o(71828);function k(r){return T.extendFlat({},r,{edgepaths:T.extendDeep([],r.edgepaths),paths:T.extendDeep([],r.paths),starts:T.extendDeep([],r.starts)})}W.exports=function(r,m){var h,s,e,t=function(i){return i.reverse()},n=function(i){return i};switch(m){case"=":case"<":return r;case">":for(r.length!==1&&T.warn("Contour data invalid for the specified inequality operation."),s=r[0],h=0;h<s.edgepaths.length;h++)s.edgepaths[h]=t(s.edgepaths[h]);for(h=0;h<s.paths.length;h++)s.paths[h]=t(s.paths[h]);for(h=0;h<s.starts.length;h++)s.starts[h]=t(s.starts[h]);return r;case"][":var a=t;t=n,n=a;case"[]":for(r.length!==2&&T.warn("Contour data invalid for the specified inequality range operation."),s=k(r[0]),e=k(r[1]),h=0;h<s.edgepaths.length;h++)s.edgepaths[h]=t(s.edgepaths[h]);for(h=0;h<s.paths.length;h++)s.paths[h]=t(s.paths[h]);for(h=0;h<s.starts.length;h++)s.starts[h]=t(s.starts[h]);for(;e.edgepaths.length;)s.edgepaths.push(n(e.edgepaths.shift()));for(;e.paths.length;)s.paths.push(n(e.paths.shift()));for(;e.starts.length;)s.starts.push(n(e.starts.shift()));return[s]}}},13031:function(W,I,o){var T=o(71828),k=o(67684),r=o(73927),m=o(83179),h=o(67217),s=o(8724),e=o(58623),t=o(70600);W.exports=function(n,a,i,c){function l(f,d){return T.coerce(n,a,t,f,d)}if(k(n,a,l,c)){r(n,a,c,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var u=l("contours.type")==="constraint";l("connectgaps",T.isArray1D(a.z)),u?m(n,a,l,c,i):(h(n,a,l,function(f){return T.coerce2(n,a,t,f)}),s(n,a,l,c)),a.contours&&a.contours.coloring==="heatmap"&&e(l,c)}else a.visible=!1}},87558:function(W,I,o){var T=o(71828),k=o(64237),r=o(53572);W.exports=function(m,h,s){for(var e=m.type==="constraint"?k[m._operation](m.value):m,t=e.size,n=[],a=r(e),i=s.trace._carpetTrace,c=i?{xaxis:i.aaxis,yaxis:i.baxis,x:s.a,y:s.b}:{xaxis:h.xaxis,yaxis:h.yaxis,x:s.x,y:s.y},l=e.start;l<a;l+=t)if(n.push(T.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:s.z,smoothing:s.trace.line.smoothing},c)),n.length>1e3){T.warn("Too many contours, clipping at 1000",m);break}return n}},53572:function(W){W.exports=function(I){return I.end+I.size/1e6}},81696:function(W,I,o){var T=o(71828),k=o(36914);function r(s,e,t,n){return Math.abs(s[0]-e[0])<t&&Math.abs(s[1]-e[1])<n}function m(s,e,t,n,a){var i,c=e.join(","),l=s.crossings[c],u=function(rt,nt,ot){var ct=0,pt=0;return rt>20&&nt?rt===208||rt===1114?ct=ot[0]===0?1:-1:pt=ot[1]===0?1:-1:k.BOTTOMSTART.indexOf(rt)!==-1?pt=1:k.LEFTSTART.indexOf(rt)!==-1?ct=1:k.TOPSTART.indexOf(rt)!==-1?pt=-1:ct=-1,[ct,pt]}(l,t,e),f=[h(s,e,[-u[0],-u[1]])],d=s.z.length,w=s.z[0].length,v=e.slice(),p=u.slice();for(i=0;i<1e4;i++){if(l>20?(l=k.CHOOSESADDLE[l][(u[0]||u[1])<0?0:1],s.crossings[c]=k.SADDLEREMAINDER[l]):delete s.crossings[c],!(u=k.NEWDELTA[l])){T.log("Found bad marching index:",l,e,s.level);break}f.push(h(s,e,u)),e[0]+=u[0],e[1]+=u[1],c=e.join(","),r(f[f.length-1],f[f.length-2],n,a)&&f.pop();var y=u[0]&&(e[0]<0||e[0]>w-2)||u[1]&&(e[1]<0||e[1]>d-2);if(e[0]===v[0]&&e[1]===v[1]&&u[0]===p[0]&&u[1]===p[1]||t&&y)break;l=s.crossings[c]}i===1e4&&T.log("Infinite loop in contour?");var b,x,_,g,A,M,L,E,S,O,P,U,R,j,B,z=r(f[0],f[f.length-1],n,a),G=0,V=.2*s.smoothing,et=[],J=0;for(i=1;i<f.length;i++)U=f[i],R=f[i-1],j=U[2]-R[2],B=U[3]-R[3],G+=L=Math.sqrt(j*j+B*B),et.push(L);var X=G/et.length*V;function Y(rt){return f[rt%f.length]}for(i=f.length-2;i>=J;i--)if((b=et[i])<X){for(_=0,x=i-1;x>=J&&b+et[x]<X;x--)b+=et[x];if(z&&i===f.length-2)for(_=0;_<x&&b+et[_]<X;_++)b+=et[_];A=i-x+_+1,M=Math.floor((i+x+_+2)/2),g=z||i!==f.length-2?z||x!==-1?A%2?Y(M):[(Y(M)[0]+Y(M+1)[0])/2,(Y(M)[1]+Y(M+1)[1])/2]:f[0]:f[f.length-1],f.splice(x+1,i-x+1,g),i=x+1,_&&(J=_),z&&(i===f.length-2?f[_]=f[f.length-1]:i===0&&(f[f.length-1]=f[0]))}for(f.splice(0,J),i=0;i<f.length;i++)f[i].length=2;if(!(f.length<2))if(z)f.pop(),s.paths.push(f);else{t||T.log("Unclosed interior contour?",s.level,v.join(","),f.join("L"));var Z=!1;for(E=0;E<s.edgepaths.length;E++)if(O=s.edgepaths[E],!Z&&r(O[0],f[f.length-1],n,a)){f.pop(),Z=!0;var tt=!1;for(S=0;S<s.edgepaths.length;S++)if(r((P=s.edgepaths[S])[P.length-1],f[0],n,a)){tt=!0,f.shift(),s.edgepaths.splice(E,1),S===E?s.paths.push(f.concat(P)):(S>E&&S--,s.edgepaths[S]=P.concat(f,O));break}tt||(s.edgepaths[E]=f.concat(O))}for(E=0;E<s.edgepaths.length&&!Z;E++)r((O=s.edgepaths[E])[O.length-1],f[0],n,a)&&(f.shift(),s.edgepaths[E]=O.concat(f),Z=!0);Z||s.edgepaths.push(f)}}function h(s,e,t){var n=e[0]+Math.max(t[0],0),a=e[1]+Math.max(t[1],0),i=s.z[a][n],c=s.xaxis,l=s.yaxis;if(t[1]){var u=(s.level-i)/(s.z[a][n+1]-i),f=(u!==1?(1-u)*c.c2l(s.x[n]):0)+(u!==0?u*c.c2l(s.x[n+1]):0);return[c.c2p(c.l2c(f),!0),l.c2p(s.y[a],!0),n+u,a]}var d=(s.level-i)/(s.z[a+1][n]-i),w=(d!==1?(1-d)*l.c2l(s.y[a]):0)+(d!==0?d*l.c2l(s.y[a+1]):0);return[c.c2p(s.x[n],!0),l.c2p(l.l2c(w),!0),n,a+d]}W.exports=function(s,e,t){var n,a,i,c;for(e=e||.01,t=t||.01,a=0;a<s.length;a++){for(i=s[a],c=0;c<i.starts.length;c++)m(i,i.starts[c],"edge",e,t);for(n=0;Object.keys(i.crossings).length&&n<1e4;)n++,m(i,Object.keys(i.crossings)[0].split(",").map(Number),void 0,e,t);n===1e4&&T.log("Infinite loop in contour?")}}},52421:function(W,I,o){var T=o(7901),k=o(46248);W.exports=function(r,m,h,s,e){e||(e={}),e.isContour=!0;var t=k(r,m,h,s,e);return t&&t.forEach(function(n){var a=n.trace;a.contours.type==="constraint"&&(a.fillcolor&&T.opacity(a.fillcolor)?n.color=T.addOpacity(a.fillcolor,1):a.contours.showlines&&T.opacity(a.line.color)&&(n.color=T.addOpacity(a.line.color,1)))}),t}},99442:function(W,I,o){W.exports={attributes:o(70600),supplyDefaults:o(13031),calc:o(27529),plot:o(29854).plot,style:o(84426),colorbar:o(90654),hoverPoints:o(52421),moduleType:"trace",name:"contour",basePlotModule:o(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(W,I,o){var T=o(71828);W.exports=function(k,r,m,h){if(h||(h={}),k("contours.showlabels")){var s=r.font;T.coerceFont(k,"contours.labelfont",{family:s.family,size:s.size,color:m}),k("contours.labelformat")}h.hasHover!==!1&&k("zhoverformat")}},86068:function(W,I,o){var T=o(39898),k=o(21081),r=o(53572);W.exports=function(m){var h=m.contours,s=h.start,e=r(h),t=h.size||1,n=Math.floor((e-s)/t)+1,a=h.coloring==="lines"?0:1,i=k.extractOpts(m);isFinite(t)||(t=1,n=1);var c,l,u=i.reversescale?k.flipScale(i.colorscale):i.colorscale,f=u.length,d=new Array(f),w=new Array(f),v=i.min,p=i.max;if(h.coloring==="heatmap"){for(l=0;l<f;l++)c=u[l],d[l]=c[0]*(p-v)+v,w[l]=c[1];var y=T.extent([v,p,h.start,h.start+t*(n-1)]),b=y[v<p?0:1],x=y[v<p?1:0];b!==v&&(d.splice(0,0,b),w.splice(0,0,w[0])),x!==p&&(d.push(x),w.push(w[w.length-1]))}else{var _=m._input&&typeof m._input.zmin=="number"&&typeof m._input.zmax=="number";for(_&&(s<=v||e>=p)&&(s<=v&&(s=v),e>=p&&(e=p),n=Math.floor((e-s)/t)+1,a=0),l=0;l<f;l++)c=u[l],d[l]=(c[0]*(n+a-1)-a/2)*t+s,w[l]=c[1];(_||m.autocontour)&&(d[0]>v&&(d.unshift(v),w.unshift(w[0])),d[d.length-1]<p&&(d.push(p),w.push(w[w.length-1])))}return k.makeColorScaleFunc({domain:d,range:w},{noNumericCheck:!0})}},87678:function(W,I,o){var T=o(36914);function k(r,m){var h=(m[0][0]>r?0:1)+(m[0][1]>r?0:2)+(m[1][1]>r?0:4)+(m[1][0]>r?0:8);return h===5||h===10?r>(m[0][0]+m[0][1]+m[1][0]+m[1][1])/4?h===5?713:1114:h===5?104:208:h===15?0:h}W.exports=function(r){var m,h,s,e,t,n,a,i,c,l=r[0].z,u=l.length,f=l[0].length,d=u===2||f===2;for(h=0;h<u-1;h++)for(e=[],h===0&&(e=e.concat(T.BOTTOMSTART)),h===u-2&&(e=e.concat(T.TOPSTART)),m=0;m<f-1;m++)for(s=e.slice(),m===0&&(s=s.concat(T.LEFTSTART)),m===f-2&&(s=s.concat(T.RIGHTSTART)),t=m+","+h,n=[[l[h][m],l[h][m+1]],[l[h+1][m],l[h+1][m+1]]],c=0;c<r.length;c++)(a=k((i=r[c]).level,n))&&(i.crossings[t]=a,s.indexOf(a)!==-1&&(i.starts.push([m,h]),d&&s.indexOf(a,s.indexOf(a)+1)!==-1&&i.starts.push([m,h])))}},29854:function(W,I,o){var T=o(39898),k=o(71828),r=o(91424),m=o(21081),h=o(63893),s=o(89298),e=o(21994),t=o(50347),n=o(87678),a=o(81696),i=o(87558),c=o(84857),l=o(20083),u=o(36914),f=u.LABELOPTIMIZER;function d(p,y){var b,x,_,g,A,M,L,E="",S=0,O=p.edgepaths.map(function(z,G){return G}),P=!0;function U(z){return Math.abs(z[1]-y[2][1])<.01}function R(z){return Math.abs(z[0]-y[0][0])<.01}function j(z){return Math.abs(z[0]-y[2][0])<.01}for(;O.length;){for(M=r.smoothopen(p.edgepaths[S],p.smoothing),E+=P?M:M.replace(/^M/,"L"),O.splice(O.indexOf(S),1),b=p.edgepaths[S][p.edgepaths[S].length-1],g=-1,_=0;_<4;_++){if(!b){k.log("Missing end?",S,p);break}for(L=b,Math.abs(L[1]-y[0][1])<.01&&!j(b)?x=y[1]:R(b)?x=y[0]:U(b)?x=y[3]:j(b)&&(x=y[2]),A=0;A<p.edgepaths.length;A++){var B=p.edgepaths[A][0];Math.abs(b[0]-x[0])<.01?Math.abs(b[0]-B[0])<.01&&(B[1]-b[1])*(x[1]-B[1])>=0&&(x=B,g=A):Math.abs(b[1]-x[1])<.01?Math.abs(b[1]-B[1])<.01&&(B[0]-b[0])*(x[0]-B[0])>=0&&(x=B,g=A):k.log("endpt to newendpt is not vert. or horz.",b,x,B)}if(b=x,g>=0)break;E+="L"+x}if(g===p.edgepaths.length){k.log("unclosed perimeter path");break}S=g,(P=O.indexOf(S)===-1)&&(S=O[0],E+="Z")}for(S=0;S<p.paths.length;S++)E+=r.smoothclosed(p.paths[S],p.smoothing);return E}function w(p,y,b,x){var _=y.width/2,g=y.height/2,A=p.x,M=p.y,L=p.theta,E=Math.cos(L)*_,S=Math.sin(L)*_,O=(A>x.center?x.right-A:A-x.left)/(E+Math.abs(Math.sin(L)*g)),P=(M>x.middle?x.bottom-M:M-x.top)/(Math.abs(S)+Math.cos(L)*g);if(O<1||P<1)return 1/0;var U=f.EDGECOST*(1/(O-1)+1/(P-1));U+=f.ANGLECOST*L*L;for(var R=A-E,j=M-S,B=A+E,z=M+S,G=0;G<b.length;G++){var V=b[G],et=Math.cos(V.theta)*V.width/2,J=Math.sin(V.theta)*V.width/2,X=2*k.segmentDistance(R,j,B,z,V.x-et,V.y-J,V.x+et,V.y+J)/(y.height+V.height),Y=V.level===y.level,Z=Y?f.SAMELEVELDISTANCE:1;if(X<=Z)return 1/0;U+=f.NEIGHBORCOST*(Y?f.SAMELEVELFACTOR:1)/(X-Z)}return U}function v(p){var y,b,x=p.trace._emptypoints,_=[],g=p.z.length,A=p.z[0].length,M=[];for(y=0;y<A;y++)M.push(1);for(y=0;y<g;y++)_.push(M.slice());for(y=0;y<x.length;y++)_[(b=x[y])[0]][b[1]]=0;return p.zmask=_,_}I.plot=function(p,y,b,x){var _=y.xaxis,g=y.yaxis;k.makeTraceGroups(x,b,"contour").each(function(A){var M=T.select(this),L=A[0],E=L.trace,S=L.x,O=L.y,P=E.contours,U=i(P,y,L),R=k.ensureSingle(M,"g","heatmapcoloring"),j=[];P.coloring==="heatmap"&&(j=[A]),t(p,y,j,R),n(U),a(U);var B=_.c2p(S[0],!0),z=_.c2p(S[S.length-1],!0),G=g.c2p(O[0],!0),V=g.c2p(O[O.length-1],!0),et=[[B,V],[z,V],[z,G],[B,G]],J=U;P.type==="constraint"&&(J=c(U,P._operation)),function(X,Y,Z){var tt=k.ensureSingle(X,"g","contourbg").selectAll("path").data(Z.coloring==="fill"?[0]:[]);tt.enter().append("path"),tt.exit().remove(),tt.attr("d","M"+Y.join("L")+"Z").style("stroke","none")}(M,et,P),function(X,Y,Z,tt){var rt=tt.coloring==="fill"||tt.type==="constraint"&&tt._operation!=="=",nt="M"+Z.join("L")+"Z";rt&&l(Y,tt);var ot=k.ensureSingle(X,"g","contourfill").selectAll("path").data(rt?Y:[]);ot.enter().append("path"),ot.exit().remove(),ot.each(function(ct){var pt=(ct.prefixBoundary?nt:"")+d(ct,Z);pt?T.select(this).attr("d",pt).style("stroke","none"):T.select(this).remove()})}(M,J,et,P),function(X,Y,Z,tt,rt){var nt=Z._context.staticPlot,ot=k.ensureSingle(X,"g","contourlines"),ct=rt.showlines!==!1,pt=rt.showlabels,gt=ct&&pt,kt=I.createLines(ot,ct||pt,Y,nt),yt=I.createLineClip(ot,gt,Z,tt.trace.uid),mt=X.selectAll("g.contourlabels").data(pt?[0]:[]);if(mt.exit().remove(),mt.enter().append("g").classed("contourlabels",!0),pt){var Ot=[],vt=[];k.clearLocationCache();var xt=I.labelFormatter(Z,tt),st=r.tester.append("text").attr("data-notex",1).call(r.font,rt.labelfont),at=Y[0].xaxis,ht=Y[0].yaxis,Lt=at._length,Mt=ht._length,_t=at.range,St=ht.range,Dt=k.aggNums(Math.min,null,tt.x),ut=k.aggNums(Math.max,null,tt.x),Tt=k.aggNums(Math.min,null,tt.y),bt=k.aggNums(Math.max,null,tt.y),It=Math.max(at.c2p(Dt,!0),0),zt=Math.min(at.c2p(ut,!0),Lt),Ft=Math.max(ht.c2p(bt,!0),0),$t=Math.min(ht.c2p(Tt,!0),Mt),Wt={};_t[0]<_t[1]?(Wt.left=It,Wt.right=zt):(Wt.left=zt,Wt.right=It),St[0]<St[1]?(Wt.top=Ft,Wt.bottom=$t):(Wt.top=$t,Wt.bottom=Ft),Wt.middle=(Wt.top+Wt.bottom)/2,Wt.center=(Wt.left+Wt.right)/2,Ot.push([[Wt.left,Wt.top],[Wt.right,Wt.top],[Wt.right,Wt.bottom],[Wt.left,Wt.bottom]]);var Xt=Math.sqrt(Lt*Lt+Mt*Mt),ae=u.LABELDISTANCE*Xt/Math.max(1,Y.length/u.LABELINCREASE);kt.each(function(Qt){var de=I.calcTextOpts(Qt.level,xt,st,Z);T.select(this).selectAll("path").each(function(){var ye=k.getVisibleSegment(this,Wt,de.height/2);if(ye&&!(ye.len<(de.width+de.height)*u.LABELMIN))for(var ve=Math.min(Math.ceil(ye.len/ae),u.LABELMAX),ie=0;ie<ve;ie++){var se=I.findBestTextLocation(this,ye,de,vt,Wt);if(!se)break;I.addLabelData(se,de,vt,Ot)}})}),st.remove(),I.drawLabels(mt,vt,Z,yt,gt?Ot:null)}pt&&!ct&&kt.remove()}(M,U,p,L,P),function(X,Y,Z,tt,rt){var nt=tt.trace,ot=Z._fullLayout._clips,ct="clip"+nt.uid,pt=ot.selectAll("#"+ct).data(nt.connectgaps?[]:[0]);if(pt.enter().append("clipPath").classed("contourclip",!0).attr("id",ct),pt.exit().remove(),nt.connectgaps===!1){var gt={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Y.xaxis,yaxis:Y.yaxis,x:tt.x,y:tt.y,z:v(tt),smoothing:0};n([gt]),a([gt]),l([gt],{type:"levels"}),k.ensureSingle(pt,"path","").attr("d",(gt.prefixBoundary?"M"+rt.join("L")+"Z":"")+d(gt,rt))}else ct=null;r.setClipUrl(X,ct,Z)}(M,y,p,L,et)})},I.createLines=function(p,y,b,x){var _=b[0].smoothing,g=p.selectAll("g.contourlevel").data(y?b:[]);if(g.exit().remove(),g.enter().append("g").classed("contourlevel",!0),y){var A=g.selectAll("path.openline").data(function(L){return L.pedgepaths||L.edgepaths});A.exit().remove(),A.enter().append("path").classed("openline",!0),A.attr("d",function(L){return r.smoothopen(L,_)}).style("stroke-miterlimit",1).style("vector-effect",x?"none":"non-scaling-stroke");var M=g.selectAll("path.closedline").data(function(L){return L.ppaths||L.paths});M.exit().remove(),M.enter().append("path").classed("closedline",!0),M.attr("d",function(L){return r.smoothclosed(L,_)}).style("stroke-miterlimit",1).style("vector-effect",x?"none":"non-scaling-stroke")}return g},I.createLineClip=function(p,y,b,x){var _=y?"clipline"+x:null,g=b._fullLayout._clips.selectAll("#"+_).data(y?[0]:[]);return g.exit().remove(),g.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),r.setClipUrl(p,_,b),g},I.labelFormatter=function(p,y){var b=p._fullLayout,x=y.trace,_=x.contours,g={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)g.tickformat=_.labelformat,e(g,b);else{var A=m.extractOpts(x);if(A&&A.colorbar&&A.colorbar._axis)g=A.colorbar._axis;else{if(_.type==="constraint"){var M=_.value;Array.isArray(M)?g.range=[M[0],M[M.length-1]]:g.range=[M,M]}else g.range=[_.start,_.end],g.nticks=(_.end-_.start)/_.size;g.range[0]===g.range[1]&&(g.range[1]+=g.range[0]||1),g.nticks||(g.nticks=1e3),e(g,b),s.prepTicks(g),g._tmin=null,g._tmax=null}}return function(L){return s.tickText(g,L).text}},I.calcTextOpts=function(p,y,b,x){var _=y(p);b.text(_).call(h.convertToTspans,x);var g=b.node(),A=r.bBox(g,!0);return{text:_,width:A.width,height:A.height,fontSize:+g.style["font-size"].replace("px",""),level:p,dy:(A.top+A.bottom)/2}},I.findBestTextLocation=function(p,y,b,x,_){var g,A,M,L,E,S=b.width;y.isClosed?(A=y.len/f.INITIALSEARCHPOINTS,g=y.min+A/2,M=y.max):(A=(y.len-S)/(f.INITIALSEARCHPOINTS+1),g=y.min+A+S/2,M=y.max-(A+S)/2);for(var O=1/0,P=0;P<f.ITERATIONS;P++){for(var U=g;U<M;U+=A){var R=k.getTextLocation(p,y.total,U,S),j=w(R,b,x,_);j<O&&(O=j,E=R,L=U)}if(O>2*f.MAXCOST)break;P&&(A/=2),M=(g=L-A/2)+1.5*A}if(O<=f.MAXCOST)return E},I.addLabelData=function(p,y,b,x){var _=y.fontSize,g=y.width+_/3,A=Math.max(0,y.height-_/3),M=p.x,L=p.y,E=p.theta,S=Math.sin(E),O=Math.cos(E),P=function(R,j){return[M+R*O-j*S,L+R*S+j*O]},U=[P(-g/2,-A/2),P(-g/2,A/2),P(g/2,A/2),P(g/2,-A/2)];b.push({text:y.text,x:M,y:L,dy:y.dy,theta:E,level:y.level,width:g,height:A}),x.push(U)},I.drawLabels=function(p,y,b,x,_){var g=p.selectAll("text").data(y,function(L){return L.text+","+L.x+","+L.y+","+L.theta});if(g.exit().remove(),g.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(L){var E=L.x+Math.sin(L.theta)*L.dy,S=L.y-Math.cos(L.theta)*L.dy;T.select(this).text(L.text).attr({x:E,y:S,transform:"rotate("+180*L.theta/Math.PI+" "+E+" "+S+")"}).call(h.convertToTspans,b)}),_){for(var A="",M=0;M<_.length;M++)A+="M"+_[M].join("L")+"Z";k.ensureSingle(x,"path","").attr("d",A)}}},18670:function(W,I,o){var T=o(89298),k=o(71828);function r(m,h,s){var e={type:"linear",range:[m,h]};return T.autoTicks(e,(h-m)/(s||15)),e}W.exports=function(m,h){var s=m.contours;if(m.autocontour){var e=m.zmin,t=m.zmax;(m.zauto||e===void 0)&&(e=k.aggNums(Math.min,null,h)),(m.zauto||t===void 0)&&(t=k.aggNums(Math.max,null,h));var n=r(e,t,m.ncontours);s.size=n.dtick,s.start=T.tickFirst(n),n.range.reverse(),s.end=T.tickFirst(n),s.start===e&&(s.start+=s.size),s.end===t&&(s.end-=s.size),s.start>s.end&&(s.start=s.end=(s.start+s.end)/2),m._input.contours||(m._input.contours={}),k.extendFlat(m._input.contours,{start:s.start,end:s.end,size:s.size}),m._input.autocontour=!0}else if(s.type!=="constraint"){var a,i=s.start,c=s.end,l=m._input.contours;i>c&&(s.start=l.start=c,c=s.end=l.end=i,i=s.start),s.size>0||(a=i===c?1:r(i,c,m.ncontours).dtick,l.size=s.size=a)}}},84426:function(W,I,o){var T=o(39898),k=o(91424),r=o(70035),m=o(86068);W.exports=function(h){var s=T.select(h).selectAll("g.contour");s.style("opacity",function(e){return e[0].trace.opacity}),s.each(function(e){var t=T.select(this),n=e[0].trace,a=n.contours,i=n.line,c=a.size||1,l=a.start,u=a.type==="constraint",f=!u&&a.coloring==="lines",d=!u&&a.coloring==="fill",w=f||d?m(n):null;t.selectAll("g.contourlevel").each(function(y){T.select(this).selectAll("path").call(k.lineGroupStyle,i.width,f?w(y.level):i.color,i.dash)});var v=a.labelfont;if(t.selectAll("g.contourlabels text").each(function(y){k.font(T.select(this),{family:v.family,size:v.size,color:v.color||(f?w(y.level):i.color)})}),u)t.selectAll("g.contourfill path").style("fill",n.fillcolor);else if(d){var p;t.selectAll("g.contourfill path").style("fill",function(y){return p===void 0&&(p=y.level),w(y.level+.5*c)}),p===void 0&&(p=l),t.selectAll("g.contourbg path").style("fill",w(p-.5*c))}}),r(h)}},8724:function(W,I,o){var T=o(1586),k=o(14523);W.exports=function(r,m,h,s,e){var t,n=h("contours.coloring"),a="";n==="fill"&&(t=h("contours.showlines")),t!==!1&&(n!=="lines"&&(a=h("line.color","#000")),h("line.width",.5),h("line.dash")),n!=="none"&&(r.showlegend!==!0&&(m.showlegend=!1),m._dfltShowLegend=!1,T(r,m,s,h,{prefix:"",cLetter:"z"})),h("line.smoothing"),k(h,s,a,e)}},88085:function(W,I,o){var T=o(21606),k=o(70600),r=o(50693),m=o(1426).extendFlat,h=k.contours;W.exports=m({carpet:{valType:"string",editType:"calc"},z:T.z,a:T.x,a0:T.x0,da:T.dx,b:T.y,b0:T.y0,db:T.dy,text:T.text,hovertext:T.hovertext,transpose:T.transpose,atype:T.xtype,btype:T.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:h.type,start:h.start,end:h.end,size:h.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:h.showlines,showlabels:h.showlabels,labelfont:h.labelfont,labelformat:h.labelformat,operation:h.operation,value:h.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},transforms:void 0},r("",{cLetter:"z",autoColorDflt:!1}))},59885:function(W,I,o){var T=o(78803),k=o(71828),r=o(68296),m=o(4742),h=o(824),s=o(43907),e=o(70769),t=o(75005),n=o(22882),a=o(18670);W.exports=function(i,c){var l=c._carpetTrace=n(i,c);if(l&&l.visible&&l.visible!=="legendonly"){if(!c.a||!c.b){var u=i.data[l.index],f=i.data[c.index];f.a||(f.a=u.a),f.b||(f.b=u.b),t(f,c,c._defaultColor,i._fullLayout)}var d=function(w,v){var p,y,b,x,_,g,A,M=v._carpetTrace,L=M.aaxis,E=M.baxis;L._minDtick=0,E._minDtick=0,k.isArray1D(v.z)&&r(v,L,E,"a","b",["z"]),p=v._a=v._a||v.a,x=v._b=v._b||v.b,p=p?L.makeCalcdata(v,"_a"):[],x=x?E.makeCalcdata(v,"_b"):[],y=v.a0||0,b=v.da||1,_=v.b0||0,g=v.db||1,A=v._z=m(v._z||v.z,v.transpose),v._emptypoints=s(A),h(A,v._emptypoints);var S=k.maxRowLength(A),O=v.xtype==="scaled"?"":p,P=e(v,O,y,b,S,L),U=v.ytype==="scaled"?"":x,R={a:P,b:e(v,U,_,g,A.length,E),z:A};return v.contours.type==="levels"&&v.contours.coloring!=="none"&&T(w,v,{vals:A,containerStr:"",cLetter:"z"}),[R]}(i,c);return a(c,c._z),d}}},75005:function(W,I,o){var T=o(71828),k=o(67684),r=o(88085),m=o(83179),h=o(67217),s=o(8724);W.exports=function(e,t,n,a){function i(c,l){return T.coerce(e,t,r,c,l)}if(i("carpet"),e.a&&e.b){if(!k(e,t,i,a,"a","b"))return void(t.visible=!1);i("text"),i("contours.type")==="constraint"?m(e,t,i,a,n,{hasHover:!1}):(h(e,t,i,function(c){return T.coerce2(e,t,r,c)}),s(e,t,i,a,{hasHover:!1}))}else t._defaultColor=n,t._length=null}},93740:function(W,I,o){W.exports={attributes:o(88085),supplyDefaults:o(75005),colorbar:o(90654),calc:o(59885),plot:o(51048),style:o(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:o(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(W,I,o){var T=o(39898),k=o(27669),r=o(67961),m=o(91424),h=o(71828),s=o(87678),e=o(81696),t=o(29854),n=o(36914),a=o(84857),i=o(87558),c=o(20083),l=o(22882),u=o(4536);function f(v,p,y){var b=v.getPointAtLength(p),x=v.getPointAtLength(y),_=x.x-b.x,g=x.y-b.y,A=Math.sqrt(_*_+g*g);return[_/A,g/A]}function d(v){var p=Math.sqrt(v[0]*v[0]+v[1]*v[1]);return[v[0]/p,v[1]/p]}function w(v,p){var y=Math.abs(v[0]*p[0]+v[1]*p[1]);return Math.sqrt(1-y*y)/y}W.exports=function(v,p,y,b){var x=p.xaxis,_=p.yaxis;h.makeTraceGroups(b,y,"contour").each(function(g){var A=T.select(this),M=g[0],L=M.trace,E=L._carpetTrace=l(v,L),S=v.calcdata[E.index][0];if(E.visible&&E.visible!=="legendonly"){var O=M.a,P=M.b,U=L.contours,R=i(U,p,M),j=U.type==="constraint",B=U._operation,z=j?B==="="?"lines":"fill":U.coloring,G=[[O[0],P[P.length-1]],[O[O.length-1],P[P.length-1]],[O[O.length-1],P[0]],[O[0],P[0]]];s(R);var V=1e-8*(O[O.length-1]-O[0]),et=1e-8*(P[P.length-1]-P[0]);e(R,V,et);var J,X,Y,Z,tt=R;U.type==="constraint"&&(tt=a(R,B)),function(ct,pt){var gt,kt,yt,mt,Ot,vt,xt,st,at;for(gt=0;gt<ct.length;gt++){for(Ot=(mt=ct[gt]).pedgepaths=[],vt=mt.ppaths=[],kt=0;kt<mt.edgepaths.length;kt++){for(at=mt.edgepaths[kt],xt=[],yt=0;yt<at.length;yt++)xt[yt]=pt(at[yt]);Ot.push(xt)}for(kt=0;kt<mt.paths.length;kt++){for(at=mt.paths[kt],st=[],yt=0;yt<at.length;yt++)st[yt]=pt(at[yt]);vt.push(st)}}}(R,ot);var rt=[];for(Z=S.clipsegments.length-1;Z>=0;Z--)J=S.clipsegments[Z],X=k([],J.x,x.c2p),Y=k([],J.y,_.c2p),X.reverse(),Y.reverse(),rt.push(r(X,Y,J.bicubic));var nt="M"+rt.join("L")+"Z";(function(ct,pt,gt,kt,yt,mt){var Ot,vt,xt,st,at=h.ensureSingle(ct,"g","contourbg").selectAll("path").data(mt!=="fill"||yt?[]:[0]);at.enter().append("path"),at.exit().remove();var ht=[];for(st=0;st<pt.length;st++)Ot=pt[st],vt=k([],Ot.x,gt.c2p),xt=k([],Ot.y,kt.c2p),ht.push(r(vt,xt,Ot.bicubic));at.attr("d","M"+ht.join("L")+"Z").style("stroke","none")})(A,S.clipsegments,x,_,j,z),function(ct,pt,gt,kt,yt,mt,Ot,vt,xt,st,at){var ht=st==="fill";ht&&c(yt,ct.contours);var Lt=h.ensureSingle(pt,"g","contourfill").selectAll("path").data(ht?yt:[]);Lt.enter().append("path"),Lt.exit().remove(),Lt.each(function(Mt){var _t=(Mt.prefixBoundary?at:"")+function(St,Dt,ut,Tt,bt,It,zt,Ft){var $t,Wt,Xt,ae,Qt,de,ye,ve="",ie=Dt.edgepaths.map(function(re,Pt){return Pt}),se=!0,ke=1e-4*Math.abs(ut[0][0]-ut[2][0]),Ae=1e-4*Math.abs(ut[0][1]-ut[2][1]);function Ie(re){return Math.abs(re[1]-ut[0][1])<Ae}function Te(re){return Math.abs(re[1]-ut[2][1])<Ae}function Vt(re){return Math.abs(re[0]-ut[0][0])<ke}function Zt(re){return Math.abs(re[0]-ut[2][0])<ke}function Gt(re,Pt){var Nt,ee,te,ge,pe="";for(Ie(re)&&!Zt(re)||Te(re)&&!Vt(re)?(ge=bt.aaxis,te=u(bt,It,[re[0],Pt[0]],.5*(re[1]+Pt[1]))):(ge=bt.baxis,te=u(bt,It,.5*(re[0]+Pt[0]),[re[1],Pt[1]])),Nt=1;Nt<te.length;Nt++)for(pe+=ge.smoothing?"C":"L",ee=0;ee<te[Nt].length;ee++){var me=te[Nt][ee];pe+=[zt.c2p(me[0]),Ft.c2p(me[1])]+" "}return pe}for($t=0,Wt=null;ie.length;){var Yt=Dt.edgepaths[$t][0];for(Wt&&(ve+=Gt(Wt,Yt)),ye=m.smoothopen(Dt.edgepaths[$t].map(Tt),Dt.smoothing),ve+=se?ye:ye.replace(/^M/,"L"),ie.splice(ie.indexOf($t),1),Wt=Dt.edgepaths[$t][Dt.edgepaths[$t].length-1],Qt=-1,ae=0;ae<4;ae++){if(!Wt){h.log("Missing end?",$t,Dt);break}for(Ie(Wt)&&!Zt(Wt)?Xt=ut[1]:Vt(Wt)?Xt=ut[0]:Te(Wt)?Xt=ut[3]:Zt(Wt)&&(Xt=ut[2]),de=0;de<Dt.edgepaths.length;de++){var ne=Dt.edgepaths[de][0];Math.abs(Wt[0]-Xt[0])<ke?Math.abs(Wt[0]-ne[0])<ke&&(ne[1]-Wt[1])*(Xt[1]-ne[1])>=0&&(Xt=ne,Qt=de):Math.abs(Wt[1]-Xt[1])<Ae?Math.abs(Wt[1]-ne[1])<Ae&&(ne[0]-Wt[0])*(Xt[0]-ne[0])>=0&&(Xt=ne,Qt=de):h.log("endpt to newendpt is not vert. or horz.",Wt,Xt,ne)}if(Qt>=0)break;ve+=Gt(Wt,Xt),Wt=Xt}if(Qt===Dt.edgepaths.length){h.log("unclosed perimeter path");break}$t=Qt,(se=ie.indexOf($t)===-1)&&($t=ie[0],ve+=Gt(Wt,Xt)+"Z",Wt=null)}for($t=0;$t<Dt.paths.length;$t++)ve+=m.smoothclosed(Dt.paths[$t].map(Tt),Dt.smoothing);return ve}(0,Mt,mt,Ot,vt,xt,gt,kt);_t?T.select(this).attr("d",_t).style("stroke","none"):T.select(this).remove()})}(L,A,x,_,tt,G,ot,E,S,z,nt),function(ct,pt,gt,kt,yt,mt,Ot){var vt=gt._context.staticPlot,xt=h.ensureSingle(ct,"g","contourlines"),st=yt.showlines!==!1,at=yt.showlabels,ht=st&&at,Lt=t.createLines(xt,st||at,pt,vt),Mt=t.createLineClip(xt,ht,gt,kt.trace.uid),_t=ct.selectAll("g.contourlabels").data(at?[0]:[]);if(_t.exit().remove(),_t.enter().append("g").classed("contourlabels",!0),at){var St=mt.xaxis,Dt=mt.yaxis,ut=St._length,Tt=Dt._length,bt=[[[0,0],[ut,0],[ut,Tt],[0,Tt]]],It=[];h.clearLocationCache();var zt=t.labelFormatter(gt,kt),Ft=m.tester.append("text").attr("data-notex",1).call(m.font,yt.labelfont),$t={left:0,right:ut,center:ut/2,top:0,bottom:Tt,middle:Tt/2},Wt=Math.sqrt(ut*ut+Tt*Tt),Xt=n.LABELDISTANCE*Wt/Math.max(1,pt.length/n.LABELINCREASE);Lt.each(function(ae){var Qt=t.calcTextOpts(ae.level,zt,Ft,gt);T.select(this).selectAll("path").each(function(de){var ye=this,ve=h.getVisibleSegment(ye,$t,Qt.height/2);if(ve&&(function(Ae,Ie,Te,Vt,Zt,Gt){for(var Yt,ne=0;ne<Te.pedgepaths.length;ne++)Ie===Te.pedgepaths[ne]&&(Yt=Te.edgepaths[ne]);if(Yt){var re=Zt.a[0],Pt=Zt.a[Zt.a.length-1],Nt=Zt.b[0],ee=Zt.b[Zt.b.length-1],te=f(Ae,0,1),ge=f(Ae,Vt.total,Vt.total-1),pe=ce(Yt[0],te),me=Vt.total-ce(Yt[Yt.length-1],ge);Vt.min<pe&&(Vt.min=pe),Vt.max>me&&(Vt.max=me),Vt.len=Vt.max-Vt.min}function ce(we,ue){var he,be=0,Pe=.1;return(Math.abs(we[0]-re)<Pe||Math.abs(we[0]-Pt)<Pe)&&(he=d(Zt.dxydb_rough(we[0],we[1],Pe)),be=Math.max(be,Gt*w(ue,he)/2)),(Math.abs(we[1]-Nt)<Pe||Math.abs(we[1]-ee)<Pe)&&(he=d(Zt.dxyda_rough(we[0],we[1],Pe)),be=Math.max(be,Gt*w(ue,he)/2)),be}}(ye,de,ae,ve,Ot,Qt.height),!(ve.len<(Qt.width+Qt.height)*n.LABELMIN)))for(var ie=Math.min(Math.ceil(ve.len/Xt),n.LABELMAX),se=0;se<ie;se++){var ke=t.findBestTextLocation(ye,ve,Qt,It,$t);if(!ke)break;t.addLabelData(ke,Qt,It,bt)}})}),Ft.remove(),t.drawLabels(_t,It,gt,Mt,ht?bt:null)}at&&!st&&Lt.remove()}(A,R,v,M,U,p,E),m.setClipUrl(A,E._clipPathId,v)}function ot(ct){var pt=E.ab2xy(ct[0],ct[1],!0);return[x.c2p(pt[0]),_.c2p(pt[1])]}})}},64096:function(W,I,o){var T=o(50693),k=o(5386).fF,r=o(9012),m=o(99181),h=o(1426).extendFlat;W.exports=h({lon:m.lon,lat:m.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:m.text,hovertext:m.hovertext,hoverinfo:h({},r.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:h({},r.showlegend,{dflt:!1})},T("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(W,I,o){var T=o(92770),k=o(71828).isArrayOrTypedArray,r=o(50606).BADNUM,m=o(78803),h=o(71828)._;W.exports=function(s,e){for(var t=e._length,n=new Array(t),a=e.z,i=k(a)&&a.length,c=0;c<t;c++){var l=n[c]={},u=e.lon[c],f=e.lat[c];if(l.lonlat=T(u)&&T(f)?[+u,+f]:[r,r],i){var d=a[c];l.z=T(d)?d:r}}return m(s,e,{vals:i?a:[0,1],containerStr:"",cLetter:"z"}),t&&(n[0].t={labels:{lat:h(s,"lat:")+" ",lon:h(s,"lon:")+" "}}),n}},52414:function(W,I,o){var T=o(92770),k=o(71828),r=o(7901),m=o(21081),h=o(50606).BADNUM,s=o(18214).makeBlank;W.exports=function(e){var t=e[0].trace,n=t.visible===!0&&t._length!==0,a=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:s()};if(!n)return a;var i,c=[],l=t.z,u=t.radius,f=k.isArrayOrTypedArray(l)&&l.length,d=k.isArrayOrTypedArray(u);for(i=0;i<e.length;i++){var w=e[i],v=w.lonlat;if(v[0]!==h){var p={};if(f){var y=w.z;p.z=y!==h?y:0}d&&(p.r=T(u[i])&&u[i]>0?+u[i]:0),c.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:p})}}var b=m.extractOpts(t),x=b.reversescale?m.flipScale(b.colorscale):b.colorscale,_=x[0][1],g=["interpolate",["linear"],["heatmap-density"],0,r.opacity(_)<1?_:r.addOpacity(_,0)];for(i=1;i<x.length;i++)g.push(x[i][0],x[i][1]);var A=["interpolate",["linear"],["get","z"],b.min,0,b.max,1];return k.extendFlat(a.heatmap.paint,{"heatmap-weight":f?A:1/(b.max-b.min),"heatmap-color":g,"heatmap-radius":d?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),a.geojson={type:"FeatureCollection",features:c},a.heatmap.layout.visibility="visible",a}},79429:function(W,I,o){var T=o(71828),k=o(1586),r=o(64096);W.exports=function(m,h,s,e){function t(c,l){return T.coerce(m,h,r,c,l)}var n=t("lon")||[],a=t("lat")||[],i=Math.min(n.length,a.length);i?(h._length=i,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(m,h,e,t,{prefix:"",cLetter:"z"})):h.visible=!1}},62474:function(W){W.exports=function(I,o){return I.lon=o.lon,I.lat=o.lat,I.z=o.z,I}},84684:function(W,I,o){var T=o(89298),k=o(28178).hoverPoints,r=o(28178).getExtraText;W.exports=function(m,h,s){var e=k(m,h,s);if(e){var t=e[0],n=t.cd,a=n[0].trace,i=n[t.index];if(delete t.color,"z"in i){var c=t.subplot.mockAxis;t.z=i.z,t.zLabel=T.tickText(c,c.c2l(i.z),"hover").text}return t.extraText=r(a,i,n[0].t.labels),[t]}}},93814:function(W,I,o){W.exports={attributes:o(64096),supplyDefaults:o(79429),colorbar:o(61243),formatLabels:o(15636),calc:o(85070),plot:o(7336),hoverPoints:o(84684),eventData:o(62474),getBelow:function(T,k){for(var r=k.getMapLayers(),m=0;m<r.length;m++){var h=r[m],s=h.id;if(h.type==="symbol"&&typeof s=="string"&&s.indexOf("plotly-")===-1)return s}},moduleType:"trace",name:"densitymapbox",basePlotModule:o(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(W,I,o){var T=o(52414),k=o(77734).traceLayerPrefix;function r(h,s){this.type="densitymapbox",this.subplot=h,this.uid=s,this.sourceId="source-"+s,this.layerList=[["heatmap",k+s+"-heatmap"]],this.below=null}var m=r.prototype;m.update=function(h){var s=this.subplot,e=this.layerList,t=T(h),n=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(t.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(t,n),this.below=n);for(var a=0;a<e.length;a++){var i=e[a],c=i[0],l=i[1],u=t[c];s.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&s.setOptions(l,"setPaintProperty",u.paint)}},m._addLayers=function(h,s){for(var e=this.subplot,t=this.layerList,n=this.sourceId,a=0;a<t.length;a++){var i=t[a],c=i[0],l=h[c];e.addLayer({type:c,id:i[1],source:n,layout:l.layout,paint:l.paint},s)}},m._removeLayers=function(){for(var h=this.subplot.map,s=this.layerList,e=s.length-1;e>=0;e--)h.removeLayer(s[e][1])},m.dispose=function(){var h=this.subplot.map;this._removeLayers(),h.removeSource(this.sourceId)},W.exports=function(h,s){var e=s[0].trace,t=new r(h,e.uid),n=t.sourceId,a=T(s),i=t.below=h.belowLookup["trace-"+e.uid];return h.map.addSource(n,{type:"geojson",data:a.geojson}),t._addLayers(a,i),t}},49789:function(W,I,o){var T=o(71828);W.exports=function(k,r){for(var m=0;m<k.length;m++)k[m].i=m;T.mergeArray(r.text,k,"tx"),T.mergeArray(r.hovertext,k,"htx");var h=r.marker;if(h){T.mergeArray(h.opacity,k,"mo"),T.mergeArray(h.color,k,"mc");var s=h.line;s&&(T.mergeArray(s.color,k,"mlc"),T.mergeArrayCastPositive(s.width,k,"mlw"))}}},1285:function(W,I,o){var T,k=o(1486),r=o(82196).line,m=o(9012),h=o(12663).axisHoverFormat,s=o(5386).fF,e=o(5386).si,t=o(18517),n=o(1426).extendFlat,a=o(7901);W.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:h("x"),yhoverformat:h("y"),hovertext:k.hovertext,hovertemplate:s({},{keys:t.eventDataKeys}),hoverinfo:n({},m.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:e({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:n({},k.insidetextanchor,{dflt:"middle"}),textangle:n({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:n({},k.orientation,{}),offset:n({},k.offset,{arrayOk:!1}),width:n({},k.width,{arrayOk:!1}),marker:(T=n({},k.marker),delete T.pattern,T),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},r.color,{dflt:a.defaultLine}),width:n({},r.width,{dflt:0,editType:"plot"}),dash:r.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup}},9532:function(W,I,o){var T=o(89298),k=o(42973),r=o(49789),m=o(66279),h=o(50606).BADNUM;function s(e){return e===h?0:e}W.exports=function(e,t){var n,a,i,c,l,u,f,d,w=T.getFromId(e,t.xaxis||"x"),v=T.getFromId(e,t.yaxis||"y");t.orientation==="h"?(n=w.makeCalcdata(t,"x"),i=v.makeCalcdata(t,"y"),c=k(t,v,"y",i),l=!!t.yperiodalignment,u="y"):(n=v.makeCalcdata(t,"y"),i=w.makeCalcdata(t,"x"),c=k(t,w,"x",i),l=!!t.xperiodalignment,u="x"),a=c.vals;var p,y=Math.min(a.length,n.length),b=new Array(y);for(t._base=[],f=0;f<y;f++){n[f]<0&&(n[f]=h);var x=!1;n[f]!==h&&f+1<y&&n[f+1]!==h&&(x=!0),d=b[f]={p:a[f],s:n[f],cNext:x},t._base[f]=-.5*d.s,l&&(b[f].orig_p=i[f],b[f][u+"End"]=c.ends[f],b[f][u+"Start"]=c.starts[f]),t.ids&&(d.id=String(t.ids[f])),f===0&&(b[0].vTotal=0),b[0].vTotal+=s(d.s),d.begR=s(d.s)/s(b[0].s)}for(f=0;f<y;f++)(d=b[f]).s!==h&&(d.sumR=d.s/b[0].vTotal,d.difR=p!==void 0?d.s/p:1,p=d.s);return r(b,t),m(b,t),b}},18517:function(W){W.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(W,I,o){var T=o(11661).setGroupPositions;W.exports=function(k,r){var m,h,s=k._fullLayout,e=k._fullData,t=k.calcdata,n=r.xaxis,a=r.yaxis,i=[],c=[],l=[];for(h=0;h<e.length;h++){var u=e[h],f=u.orientation==="h";u.visible===!0&&u.xaxis===n._id&&u.yaxis===a._id&&u.type==="funnel"&&(m=t[h],f?l.push(m):c.push(m),i.push(m))}var d={mode:s.funnelmode,norm:s.funnelnorm,gap:s.funnelgap,groupgap:s.funnelgroupgap};for(T(k,n,a,c,d),T(k,a,n,l,d),h=0;h<i.length;h++){m=i[h];for(var w=0;w<m.length;w++)w+1<m.length&&(m[w].nextP0=m[w+1].p0,m[w].nextS0=m[w+1].s0,m[w].nextP1=m[w+1].p1,m[w].nextS1=m[w+1].s1)}}},26199:function(W,I,o){var T=o(71828),k=o(26125),r=o(90769).handleText,m=o(67513),h=o(73927),s=o(1285),e=o(7901);W.exports={supplyDefaults:function(t,n,a,i){function c(d,w){return T.coerce(t,n,s,d,w)}if(m(t,n,i,c)){h(t,n,i,c),c("xhoverformat"),c("yhoverformat"),c("orientation",n.y&&!n.x?"v":"h"),c("offset"),c("width");var l=c("text");c("hovertext"),c("hovertemplate");var u=c("textposition");r(t,n,i,c,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n.textposition==="none"||n.texttemplate||c("textinfo",Array.isArray(l)?"text+value":"value");var f=c("marker.color",a);c("marker.line.color",e.defaultLine),c("marker.line.width"),c("connector.visible")&&(c("connector.fillcolor",function(d){var w=T.isArrayOrTypedArray(d)?"#000":d;return e.addOpacity(w,.5*e.opacity(w))}(f)),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else n.visible=!1},crossTraceDefaults:function(t,n){var a,i;function c(u){return T.coerce(i._input,i,s,u)}if(n.funnelmode==="group")for(var l=0;l<t.length;l++)a=(i=t[l])._input,k(a,i,n,c)}}},34598:function(W){W.exports=function(I,o){return I.x="xVal"in o?o.xVal:o.x,I.y="yVal"in o?o.yVal:o.y,"percentInitial"in o&&(I.percentInitial=o.percentInitial),"percentPrevious"in o&&(I.percentPrevious=o.percentPrevious),"percentTotal"in o&&(I.percentTotal=o.percentTotal),o.xa&&(I.xaxis=o.xa),o.ya&&(I.yaxis=o.ya),I}},63341:function(W,I,o){var T=o(7901).opacity,k=o(95423).hoverOnBars,r=o(71828).formatPercent;W.exports=function(m,h,s,e,t){var n=k(m,h,s,e,t);if(n){var a=n.cd,i=a[0].trace,c=i.orientation==="h",l=a[n.index];n[(c?"x":"y")+"LabelVal"]=l.s,n.percentInitial=l.begR,n.percentInitialLabel=r(l.begR,1),n.percentPrevious=l.difR,n.percentPreviousLabel=r(l.difR,1),n.percentTotal=l.sumR,n.percentTotalLabel=r(l.sumR,1);var u=l.hi||i.hoverinfo,f=[];if(u&&u!=="none"&&u!=="skip"){var d=u==="all",w=u.split("+"),v=function(p){return d||w.indexOf(p)!==-1};v("percent initial")&&f.push(n.percentInitialLabel+" of initial"),v("percent previous")&&f.push(n.percentPreviousLabel+" of previous"),v("percent total")&&f.push(n.percentTotalLabel+" of total")}return n.extraText=f.join("<br>"),n.color=function(p,y){var b=p.marker,x=y.mc||b.color,_=y.mlc||b.line.color,g=y.mlw||b.line.width;return T(x)?x:T(_)&&g?_:void 0}(i,l),[n]}}},51759:function(W,I,o){W.exports={attributes:o(1285),layoutAttributes:o(10440),supplyDefaults:o(26199).supplyDefaults,crossTraceDefaults:o(26199).crossTraceDefaults,supplyLayoutDefaults:o(93138),calc:o(9532),crossTraceCalc:o(8984),plot:o(80461),style:o(68266).style,hoverPoints:o(63341),eventData:o(34598),selectPoints:o(81974),moduleType:"trace",name:"funnel",basePlotModule:o(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(W){W.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(W,I,o){var T=o(71828),k=o(10440);W.exports=function(r,m,h){var s=!1;function e(a,i){return T.coerce(r,m,k,a,i)}for(var t=0;t<h.length;t++){var n=h[t];if(n.visible&&n.type==="funnel"){s=!0;break}}s&&(e("funnelmode"),e("funnelgap",.2),e("funnelgroupgap"))}},80461:function(W,I,o){var T=o(39898),k=o(71828),r=o(91424),m=o(50606).BADNUM,h=o(17295),s=o(72597).clearMinTextSize;function e(t,n,a,i){var c=[],l=[],u=i?n:a,f=i?a:n;return c[0]=u.c2p(t.s0,!0),l[0]=f.c2p(t.p0,!0),c[1]=u.c2p(t.s1,!0),l[1]=f.c2p(t.p1,!0),c[2]=u.c2p(t.nextS0,!0),l[2]=f.c2p(t.nextP0,!0),c[3]=u.c2p(t.nextS1,!0),l[3]=f.c2p(t.nextP1,!0),i?[c,l]:[l,c]}W.exports=function(t,n,a,i){var c=t._fullLayout;s("funnel",c),function(l,u,f,d){var w=u.xaxis,v=u.yaxis;k.makeTraceGroups(d,f,"trace bars").each(function(p){var y=T.select(this),b=p[0].trace,x=k.ensureSingle(y,"g","regions");if(b.connector&&b.connector.visible){var _=b.orientation==="h",g=x.selectAll("g.region").data(k.identity);g.enter().append("g").classed("region",!0),g.exit().remove();var A=g.size();g.each(function(M,L){if(L===A-1||M.cNext){var E=e(M,w,v,_),S=E[0],O=E[1],P="";S[0]!==m&&O[0]!==m&&S[1]!==m&&O[1]!==m&&S[2]!==m&&O[2]!==m&&S[3]!==m&&O[3]!==m&&(P+=_?"M"+S[0]+","+O[1]+"L"+S[2]+","+O[2]+"H"+S[3]+"L"+S[1]+","+O[1]+"Z":"M"+S[1]+","+O[1]+"L"+S[2]+","+O[3]+"V"+O[2]+"L"+S[1]+","+O[0]+"Z"),P===""&&(P="M0,0Z"),k.ensureSingle(T.select(this),"path").attr("d",P).call(r.setClipUrl,u.layerClipId,l)}})}else x.remove()})}(t,n,a,i),function(l,u,f,d){var w=u.xaxis,v=u.yaxis;k.makeTraceGroups(d,f,"trace bars").each(function(p){var y=T.select(this),b=p[0].trace,x=k.ensureSingle(y,"g","lines");if(b.connector&&b.connector.visible&&b.connector.line.width){var _=b.orientation==="h",g=x.selectAll("g.line").data(k.identity);g.enter().append("g").classed("line",!0),g.exit().remove();var A=g.size();g.each(function(M,L){if(L===A-1||M.cNext){var E=e(M,w,v,_),S=E[0],O=E[1],P="";S[3]!==void 0&&O[3]!==void 0&&(_?(P+="M"+S[0]+","+O[1]+"L"+S[2]+","+O[2],P+="M"+S[1]+","+O[1]+"L"+S[3]+","+O[2]):(P+="M"+S[1]+","+O[1]+"L"+S[2]+","+O[3],P+="M"+S[1]+","+O[0]+"L"+S[2]+","+O[2])),P===""&&(P="M0,0Z"),k.ensureSingle(T.select(this),"path").attr("d",P).call(r.setClipUrl,u.layerClipId,l)}})}else x.remove()})}(t,n,a,i),h.plot(t,n,a,i,{mode:c.funnelmode,norm:c.funnelmode,gap:c.funnelgap,groupgap:c.funnelgroupgap})}},68266:function(W,I,o){var T=o(39898),k=o(91424),r=o(7901),m=o(37822).DESELECTDIM,h=o(16688),s=o(72597).resizeText,e=h.styleTextPoints;W.exports={style:function(t,n,a){var i=a||T.select(t).selectAll("g.funnellayer").selectAll("g.trace");s(t,i,"funnel"),i.style("opacity",function(c){return c[0].trace.opacity}),i.each(function(c){var l=T.select(this),u=c[0].trace;l.selectAll(".point > path").each(function(f){if(!f.isBlank){var d=u.marker;T.select(this).call(r.fill,f.mc||d.color).call(r.stroke,f.mlc||d.line.color).call(k.dashLine,d.line.dash,f.mlw||d.line.width).style("opacity",u.selectedpoints&&!f.selected?m:1)}}),e(l,u,t),l.selectAll(".regions").each(function(){T.select(this).selectAll("path").style("stroke-width",0).call(r.fill,u.connector.fillcolor)}),l.selectAll(".lines").each(function(){var f=u.connector.line;k.lineGroupStyle(T.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},86807:function(W,I,o){var T=o(34e3),k=o(9012),r=o(27670).Y,m=o(5386).fF,h=o(5386).si,s=o(1426).extendFlat;W.exports={labels:T.labels,label0:T.label0,dlabel:T.dlabel,values:T.values,marker:{colors:T.marker.colors,line:{color:s({},T.marker.line.color,{dflt:null}),width:s({},T.marker.line.width,{dflt:1}),editType:"calc"},pattern:T.marker.pattern,editType:"calc"},text:T.text,hovertext:T.hovertext,scalegroup:s({},T.scalegroup,{}),textinfo:s({},T.textinfo,{flags:["label","text","value","percent"]}),texttemplate:h({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:s({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:m({},{keys:["label","color","value","text","percent"]}),textposition:s({},T.textposition,{values:["inside","none"],dflt:"inside"}),textfont:T.textfont,insidetextfont:T.insidetextfont,title:{text:T.title.text,font:T.title.font,position:s({},T.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:r({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(W,I,o){var T=o(74875);I.name="funnelarea",I.plot=function(k,r,m,h){T.plotBasePlot(I.name,k,r,m,h)},I.clean=function(k,r,m,h){T.cleanBasePlot(I.name,k,r,m,h)}},89574:function(W,I,o){var T=o(32354);W.exports={calc:function(k,r){return T.calc(k,r)},crossTraceCalc:function(k){T.crossTraceCalc(k,{type:"funnelarea"})}}},86282:function(W,I,o){var T=o(71828),k=o(86807),r=o(27670).c,m=o(90769).handleText,h=o(37434).handleLabelsAndValues,s=o(37434).handleMarkerDefaults;W.exports=function(e,t,n,a){function i(y,b){return T.coerce(e,t,k,y,b)}var c=i("labels"),l=i("values"),u=h(c,l),f=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(i("label0"),i("dlabel")),f){t._length=f,s(e,t,a,i),i("scalegroup");var d,w=i("text"),v=i("texttemplate");if(v||(d=i("textinfo",Array.isArray(w)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),v||d&&d!=="none"){var p=i("textposition");m(e,t,a,i,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}r(t,a,i),i("title.text")&&(i("title.position"),T.coerceFont(i,"title.font",a.font)),i("aspectratio"),i("baseratio")}else t.visible=!1}},10421:function(W,I,o){W.exports={moduleType:"trace",name:"funnelarea",basePlotModule:o(6452),categories:["pie-like","funnelarea","showLegend"],attributes:o(86807),layoutAttributes:o(80097),supplyDefaults:o(86282),supplyLayoutDefaults:o(57402),calc:o(89574).calc,crossTraceCalc:o(89574).crossTraceCalc,plot:o(79187),style:o(71858),styleOne:o(63463),meta:{}}},80097:function(W,I,o){var T=o(92774).hiddenlabels;W.exports={hiddenlabels:T,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(W,I,o){var T=o(71828),k=o(80097);W.exports=function(r,m){function h(s,e){return T.coerce(r,m,k,s,e)}h("hiddenlabels"),h("funnelareacolorway",m.colorway),h("extendfunnelareacolors")}},79187:function(W,I,o){var T=o(39898),k=o(91424),r=o(71828),m=r.strScale,h=r.strTranslate,s=o(63893),e=o(17295).toMoveInsideBar,t=o(72597),n=t.recordMinTextSize,a=t.clearMinTextSize,i=o(53581),c=o(14575),l=c.attachFxHandlers,u=c.determineInsideTextFont,f=c.layoutAreas,d=c.prerenderTitles,w=c.positionTitleOutside,v=c.formatSliceLabel;function p(y,b){return"l"+(b[0]-y[0])+","+(b[1]-y[1])}W.exports=function(y,b){var x=y._context.staticPlot,_=y._fullLayout;a("funnelarea",_),d(b,y),f(b,_._size),r.makeTraceGroups(_._funnelarealayer,b,"trace").each(function(g){var A=T.select(this),M=g[0],L=M.trace;(function(E){if(E.length){var S=E[0],O=S.trace,P=O.aspectratio,U=O.baseratio;U>.999&&(U=.999);var R,j,B,z=Math.pow(U,2),G=S.vTotal,V=G,et=G*z/(1-z)/G,J=[];for(J.push(xt()),j=E.length-1;j>-1;j--)if(!(B=E[j]).hidden){var X=B.v/V;et+=X,J.push(xt())}var Y=1/0,Z=-1/0;for(j=0;j<J.length;j++)R=J[j],Y=Math.min(Y,R[1]),Z=Math.max(Z,R[1]);for(j=0;j<J.length;j++)J[j][1]-=(Z+Y)/2;var tt=J[J.length-1][0],rt=S.r,nt=(Z-Y)/2,ot=rt/tt,ct=rt/nt*P;for(S.r=ct*nt,j=0;j<J.length;j++)J[j][0]*=ot,J[j][1]*=ct;var pt,gt,kt=[-(R=J[0])[0],R[1]],yt=[R[0],R[1]],mt=0;for(j=E.length-1;j>-1;j--)if(!(B=E[j]).hidden){var Ot=J[mt+=1][0],vt=J[mt][1];B.TL=[-Ot,vt],B.TR=[Ot,vt],B.BL=kt,B.BR=yt,B.pxmid=(pt=B.TR,gt=B.BR,[.5*(pt[0]+gt[0]),.5*(pt[1]+gt[1])]),kt=B.TL,yt=B.TR}}function xt(){var st,at={x:st=Math.sqrt(et),y:-st};return[at.x,at.y]}})(g),A.each(function(){var E=T.select(this).selectAll("g.slice").data(g);E.enter().append("g").classed("slice",!0),E.exit().remove(),E.each(function(O,P){if(O.hidden)T.select(this).selectAll("path,g").remove();else{O.pointNumber=O.i,O.curveNumber=L.index;var U=M.cx,R=M.cy,j=T.select(this),B=j.selectAll("path.surface").data([O]);B.enter().append("path").classed("surface",!0).style({"pointer-events":x?"none":"all"}),j.call(l,y,g);var z="M"+(U+O.TR[0])+","+(R+O.TR[1])+p(O.TR,O.BR)+p(O.BR,O.BL)+p(O.BL,O.TL)+"Z";B.attr("d",z),v(y,O,M);var G=i.castOption(L.textposition,O.pts),V=j.selectAll("g.slicetext").data(O.text&&G!=="none"?[0]:[]);V.enter().append("g").classed("slicetext",!0),V.exit().remove(),V.each(function(){var et=r.ensureSingle(T.select(this),"text","",function(ot){ot.attr("data-notex",1)}),J=r.ensureUniformFontSize(y,u(L,O,_.font));et.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,J).call(s.convertToTspans,y);var X,Y,Z,tt=k.bBox(et.node()),rt=Math.min(O.BL[1],O.BR[1])+R,nt=Math.max(O.TL[1],O.TR[1])+R;Y=Math.max(O.TL[0],O.BL[0])+U,Z=Math.min(O.TR[0],O.BR[0])+U,(X=e(Y,Z,rt,nt,tt,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=J.size,n(L.type,X,_),g[P].transform=X,r.setTransormAndDisplay(et,X)})}});var S=T.select(this).selectAll("g.titletext").data(L.title.text?[0]:[]);S.enter().append("g").classed("titletext",!0),S.exit().remove(),S.each(function(){var O=r.ensureSingle(T.select(this),"text","",function(R){R.attr("data-notex",1)}),P=L.title.text;L._meta&&(P=r.templateString(P,L._meta)),O.text(P).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,L.title.font).call(s.convertToTspans,y);var U=w(M,_._size);O.attr("transform",h(U.x,U.y)+m(Math.min(1,U.scale))+h(U.tx,U.ty))})})})}},71858:function(W,I,o){var T=o(39898),k=o(63463),r=o(72597).resizeText;W.exports=function(m){var h=m._fullLayout._funnelarealayer.selectAll(".trace");r(m,h,"funnelarea"),h.each(function(s){var e=s[0].trace,t=T.select(this);t.style({opacity:e.opacity}),t.selectAll("path.surface").each(function(n){T.select(this).call(k,n,e,m)})})}},21606:function(W,I,o){var T=o(82196),k=o(9012),r=o(41940),m=o(12663).axisHoverFormat,h=o(5386).fF,s=o(5386).si,e=o(50693),t=o(1426).extendFlat;W.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},T.x,{impliedEdits:{xtype:"array"}}),x0:t({},T.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},T.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},T.y,{impliedEdits:{ytype:"array"}}),y0:t({},T.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},T.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},T.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},T.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},T.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},T.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},T.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},T.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z",1),hovertemplate:h(),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:r({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1})},{transforms:void 0},e("",{cLetter:"z",autoColorDflt:!1}))},90757:function(W,I,o){var T=o(73972),k=o(71828),r=o(89298),m=o(42973),h=o(17562),s=o(78803),e=o(68296),t=o(4742),n=o(824),a=o(43907),i=o(70769),c=o(50606).BADNUM;function l(u){for(var f=[],d=u.length,w=0;w<d;w++){var v=u[w];v!==c&&f.push(v)}return f}W.exports=function(u,f){var d,w,v,p,y,b,x,_,g,A,M,L=r.getFromId(u,f.xaxis||"x"),E=r.getFromId(u,f.yaxis||"y"),S=T.traceIs(f,"contour"),O=T.traceIs(f,"histogram"),P=T.traceIs(f,"gl2d"),U=S?"best":f.zsmooth;if(L._minDtick=0,E._minDtick=0,O)p=(M=h(u,f)).orig_x,d=M.x,w=M.x0,v=M.dx,_=M.orig_y,y=M.y,b=M.y0,x=M.dy,g=M.z;else{var R=f.z;k.isArray1D(R)?(e(f,L,E,"x","y",["z"]),d=f._x,y=f._y,R=f._z):(p=f.x?L.makeCalcdata(f,"x"):[],_=f.y?E.makeCalcdata(f,"y"):[],d=m(f,L,"x",p).vals,y=m(f,E,"y",_).vals,f._x=d,f._y=y),w=f.x0,v=f.dx,b=f.y0,x=f.dy,g=t(R,f,L,E)}function j(Z){U=f._input.zsmooth=f.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+Z)}function B(Z){if(Z.length>1){var tt=(Z[Z.length-1]-Z[0])/(Z.length-1),rt=Math.abs(tt/100);for(A=0;A<Z.length-1;A++)if(Math.abs(Z[A+1]-Z[A]-tt)>rt)return!1}return!0}(L.rangebreaks||E.rangebreaks)&&(g=function(Z,tt,rt){for(var nt=[],ot=-1,ct=0;ct<rt.length;ct++)if(tt[ct]!==c){nt[++ot]=[];for(var pt=0;pt<rt[ct].length;pt++)Z[pt]!==c&&nt[ot].push(rt[ct][pt])}return nt}(d,y,g),O||(d=l(d),y=l(y),f._x=d,f._y=y)),O||!S&&!f.connectgaps||(f._emptypoints=a(g),n(g,f._emptypoints)),f._islinear=!1,L.type==="log"||E.type==="log"?U==="fast"&&j("log axis found"):B(d)?B(y)?f._islinear=!0:U==="fast"&&j("y scale is not linear"):U==="fast"&&j("x scale is not linear");var z=k.maxRowLength(g),G=f.xtype==="scaled"?"":d,V=i(f,G,w,v,z,L),et=f.ytype==="scaled"?"":y,J=i(f,et,b,x,g.length,E);P||(f._extremes[L._id]=r.findExtremes(L,V),f._extremes[E._id]=r.findExtremes(E,J));var X={x:V,y:J,z:g,text:f._text||f.text,hovertext:f._hovertext||f.hovertext};if(f.xperiodalignment&&p&&(X.orig_x=p),f.yperiodalignment&&_&&(X.orig_y=_),G&&G.length===V.length-1&&(X.xCenter=G),et&&et.length===J.length-1&&(X.yCenter=et),O&&(X.xRanges=M.xRanges,X.yRanges=M.yRanges,X.pts=M.pts),S||s(u,f,{vals:g,cLetter:"z"}),S&&f.contours&&f.contours.coloring==="heatmap"){var Y={type:f.type==="contour"?"heatmap":"histogram2d",xcalendar:f.xcalendar,ycalendar:f.ycalendar};X.xfill=i(Y,G,w,v,z,L),X.yfill=i(Y,et,b,x,g.length,E)}return[X]}},4742:function(W,I,o){var T=o(92770),k=o(71828),r=o(50606).BADNUM;W.exports=function(m,h,s,e){var t,n,a,i,c,l;function u(y){if(T(y))return+y}if(h&&h.transpose){for(t=0,c=0;c<m.length;c++)t=Math.max(t,m[c].length);if(t===0)return!1;a=function(y){return y.length},i=function(y,b,x){return(y[x]||[])[b]}}else t=m.length,a=function(y,b){return y[b].length},i=function(y,b,x){return(y[b]||[])[x]};var f=function(y,b,x){return b===r||x===r?r:i(y,b,x)};function d(y){if(h&&h.type!=="carpet"&&h.type!=="contourcarpet"&&y&&y.type==="category"&&h["_"+y._id.charAt(0)].length){var b=y._id.charAt(0),x={},_=h["_"+b+"CategoryMap"]||h[b];for(c=0;c<_.length;c++)x[_[c]]=c;return function(g){var A=x[y._categories[g]];return A+1?A:r}}return k.identity}var w=d(s),v=d(e);e&&e.type==="category"&&(t=e._categories.length);var p=new Array(t);for(c=0;c<t;c++)for(n=s&&s.type==="category"?s._categories.length:a(m,c),p[c]=new Array(n),l=0;l<n;l++)p[c][l]=u(f(m,v(c),w(l)));return p}},61243:function(W){W.exports={min:"zmin",max:"zmax"}},68296:function(W,I,o){var T=o(71828),k=o(50606).BADNUM,r=o(42973);W.exports=function(m,h,s,e,t,n){var a=m._length,i=h.makeCalcdata(m,e),c=s.makeCalcdata(m,t);i=r(m,h,e,i).vals,c=r(m,s,t,c).vals;var l,u,f,d,w=m.text,v=w!==void 0&&T.isArray1D(w),p=m.hovertext,y=p!==void 0&&T.isArray1D(p),b=T.distinctVals(i),x=b.vals,_=T.distinctVals(c),g=_.vals,A=[],M=g.length,L=x.length;for(l=0;l<n.length;l++)A[l]=T.init2dArray(M,L);v&&(f=T.init2dArray(M,L)),y&&(d=T.init2dArray(M,L));var E=T.init2dArray(M,L);for(l=0;l<a;l++)if(i[l]!==k&&c[l]!==k){var S=T.findBin(i[l]+b.minDiff/2,x),O=T.findBin(c[l]+_.minDiff/2,g);for(u=0;u<n.length;u++){var P=m[n[u]];A[u][O][S]=P[l],E[O][S]=l}v&&(f[O][S]=w[l]),y&&(d[O][S]=p[l])}for(m["_"+e]=x,m["_"+t]=g,u=0;u<n.length;u++)m["_"+n[u]]=A[u];v&&(m._text=f),y&&(m._hovertext=d),h&&h.type==="category"&&(m["_"+e+"CategoryMap"]=x.map(function(U){return h._categories[U]})),s&&s.type==="category"&&(m["_"+t+"CategoryMap"]=g.map(function(U){return s._categories[U]})),m._after2before=E}},76382:function(W,I,o){var T=o(71828),k=o(67684),r=o(58623),m=o(73927),h=o(49901),s=o(1586),e=o(21606);W.exports=function(t,n,a,i){function c(l,u){return T.coerce(t,n,e,l,u)}k(t,n,c,i)?(m(t,n,i,c),c("xhoverformat"),c("yhoverformat"),c("text"),c("hovertext"),c("hovertemplate"),r(c,i),h(t,n,c,i),c("hoverongaps"),c("connectgaps",T.isArray1D(n.z)&&n.zsmooth!==!1),s(t,n,i,c,{prefix:"",cLetter:"z"})):n.visible=!1}},43907:function(W,I,o){var T=o(71828).maxRowLength;W.exports=function(k){var r,m,h,s,e,t,n,a,i=[],c={},l=[],u=k[0],f=[],d=[0,0,0],w=T(k);for(m=0;m<k.length;m++)for(r=f,f=u,u=k[m+1]||[],h=0;h<w;h++)f[h]===void 0&&((t=(f[h-1]!==void 0?1:0)+(f[h+1]!==void 0?1:0)+(r[h]!==void 0?1:0)+(u[h]!==void 0?1:0))?(m===0&&t++,h===0&&t++,m===k.length-1&&t++,h===f.length-1&&t++,t<4&&(c[[m,h]]=[m,h,t]),i.push([m,h,t])):l.push([m,h]));for(;l.length;){for(n={},a=!1,e=l.length-1;e>=0;e--)(t=((c[[(m=(s=l[e])[0])-1,h=s[1]]]||d)[2]+(c[[m+1,h]]||d)[2]+(c[[m,h-1]]||d)[2]+(c[[m,h+1]]||d)[2])/20)&&(n[s]=[m,h,t],l.splice(e,1),a=!0);if(!a)throw"findEmpties iterated with no new neighbors";for(s in n)c[s]=n[s],i.push(n[s])}return i.sort(function(v,p){return p[2]-v[2]})}},46248:function(W,I,o){var T=o(30211),k=o(71828),r=o(89298),m=o(21081).extractOpts;W.exports=function(h,s,e,t,n){n||(n={});var a,i,c,l,u=n.isContour,f=h.cd[0],d=f.trace,w=h.xa,v=h.ya,p=f.x,y=f.y,b=f.z,x=f.xCenter,_=f.yCenter,g=f.zmask,A=d.zhoverformat,M=p,L=y;if(h.index!==!1){try{c=Math.round(h.index[1]),l=Math.round(h.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",h.index)}if(c<0||c>=b[0].length||l<0||l>b.length)return}else{if(T.inbox(s-p[0],s-p[p.length-1],0)>0||T.inbox(e-y[0],e-y[y.length-1],0)>0)return;if(u){var E;for(M=[2*p[0]-p[1]],E=1;E<p.length;E++)M.push((p[E]+p[E-1])/2);for(M.push([2*p[p.length-1]-p[p.length-2]]),L=[2*y[0]-y[1]],E=1;E<y.length;E++)L.push((y[E]+y[E-1])/2);L.push([2*y[y.length-1]-y[y.length-2]])}c=Math.max(0,Math.min(M.length-2,k.findBin(s,M))),l=Math.max(0,Math.min(L.length-2,k.findBin(e,L)))}var S,O,P=w.c2p(p[c]),U=w.c2p(p[c+1]),R=v.c2p(y[l]),j=v.c2p(y[l+1]);u?(S=f.orig_x||p,O=f.orig_y||y,U=P,a=S[c],j=R,i=O[l]):(S=f.orig_x||x||p,O=f.orig_y||_||y,a=x?S[c]:(S[c]+S[c+1])/2,i=_?O[l]:(O[l]+O[l+1])/2,w&&w.type==="category"&&(a=p[c]),v&&v.type==="category"&&(i=y[l]),d.zsmooth&&(P=U=w.c2p(a),R=j=v.c2p(i)));var B=b[l][c];if(g&&!g[l][c]&&(B=void 0),B!==void 0||d.hoverongaps){var z;Array.isArray(f.hovertext)&&Array.isArray(f.hovertext[l])?z=f.hovertext[l][c]:Array.isArray(f.text)&&Array.isArray(f.text[l])&&(z=f.text[l][c]);var G=m(d),V={type:"linear",range:[G.min,G.max],hoverformat:A,_separators:w._separators,_numFormat:w._numFormat},et=r.tickText(V,B,"hover").text;return[k.extendFlat(h,{index:d._after2before?d._after2before[l][c]:[l,c],distance:h.maxHoverDistance,spikeDistance:h.maxSpikeDistance,x0:P,x1:U,y0:R,y1:j,xLabelVal:a,yLabelVal:i,zLabelVal:B,zLabel:et,text:z})]}}},92165:function(W,I,o){W.exports={attributes:o(21606),supplyDefaults:o(76382),calc:o(90757),plot:o(50347),colorbar:o(61243),style:o(70035),hoverPoints:o(46248),moduleType:"trace",name:"heatmap",basePlotModule:o(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(W,I,o){var T=o(71828),k=[[-1,0],[1,0],[0,-1],[0,1]];function r(h){return .5-.25*Math.min(1,.5*h)}function m(h,s,e){var t,n,a,i,c,l,u,f,d,w,v,p,y,b=0;for(i=0;i<s.length;i++){for(n=(t=s[i])[0],a=t[1],v=h[n][a],w=0,d=0,c=0;c<4;c++)(u=h[n+(l=k[c])[0]])&&(f=u[a+l[1]])!==void 0&&(w===0?p=y=f:(p=Math.min(p,f),y=Math.max(y,f)),d++,w+=f);if(d===0)throw"iterateInterp2d order is wrong: no defined neighbors";h[n][a]=w/d,v===void 0?d<4&&(b=1):(h[n][a]=(1+e)*h[n][a]-e*v,y>p&&(b=Math.max(b,Math.abs(h[n][a]-v)/(y-p))))}return b}W.exports=function(h,s){var e,t=1;for(m(h,s),e=0;e<s.length&&!(s[e][2]<4);e++);for(s=s.slice(e),e=0;e<100&&t>.01;e++)t=m(h,s,r(t));return t>.01&&T.log("interp2d didn't converge quickly",t),h}},58623:function(W,I,o){var T=o(71828);W.exports=function(k,r){k("texttemplate");var m=T.extendFlat({},r.font,{color:"auto",size:"auto"});T.coerceFont(k,"textfont",m)}},70769:function(W,I,o){var T=o(73972),k=o(71828).isArrayOrTypedArray;W.exports=function(r,m,h,s,e,t){var n,a,i,c=[],l=T.traceIs(r,"contour"),u=T.traceIs(r,"histogram"),f=T.traceIs(r,"gl2d");if(k(m)&&m.length>1&&!u&&t.type!=="category"){var d=m.length;if(!(d<=e))return l?m.slice(0,e):m.slice(0,e+1);if(l||f)c=m.slice(0,e);else if(e===1)c=[m[0]-.5,m[0]+.5];else{for(c=[1.5*m[0]-.5*m[1]],i=1;i<d;i++)c.push(.5*(m[i-1]+m[i]));c.push(1.5*m[d-1]-.5*m[d-2])}if(d<e){var w=c[c.length-1],v=w-c[c.length-2];for(i=d;i<e;i++)w+=v,c.push(w)}}else{var p=r[t._id.charAt(0)+"calendar"];for(n=u?t.r2c(h,0,p):k(m)&&m.length===1?m[0]:h===void 0?0:(t.type==="log"?t.d2c:t.r2c)(h,0,p),a=s||1,i=l||f?0:-.5;i<e;i++)c.push(n+a*i)}return c}},50347:function(W,I,o){var T=o(39898),k=o(84267),r=o(73972),m=o(91424),h=o(89298),s=o(71828),e=o(63893),t=o(8225),n=o(7901),a=o(21081).extractOpts,i=o(21081).makeColorScaleFuncFromTrace,c=o(77922),l=o(18783).LINE_SPACING,u=o(3883),f=o(32396).STYLE,d="heatmap-label";function w(x){return x.selectAll("g."+d)}function v(x){w(x).remove()}function p(x,_){var g=_.length-2,A=s.constrain(s.findBin(x,_),0,g),M=_[A],L=_[A+1],E=s.constrain(A+(x-M)/(L-M)-.5,0,g),S=Math.round(E),O=Math.abs(E-S);return E&&E!==g&&O?{bin0:S,frac:O,bin1:Math.round(S+O/(E-S))}:{bin0:S,bin1:S,frac:0}}function y(x,_){var g=_.length-1,A=s.constrain(s.findBin(x,_),0,g),M=_[A],L=(x-M)/(_[A+1]-M)||0;return L<=0?{bin0:A,bin1:A,frac:0}:L<.5?{bin0:A,bin1:A+1,frac:L}:{bin0:A+1,bin1:A,frac:1-L}}function b(x,_,g){x[_]=g[0],x[_+1]=g[1],x[_+2]=g[2],x[_+3]=Math.round(255*g[3])}W.exports=function(x,_,g,A){var M=_.xaxis,L=_.yaxis;s.makeTraceGroups(A,g,"hm").each(function(E){var S,O,P,U,R,j,B,z,G=T.select(this),V=E[0],et=V.trace,J=et.xgap||0,X=et.ygap||0,Y=V.z,Z=V.x,tt=V.y,rt=V.xCenter,nt=V.yCenter,ot=r.traceIs(et,"contour"),ct=ot?"best":et.zsmooth,pt=Y.length,gt=s.maxRowLength(Y),kt=!1,yt=!1;for(j=0;S===void 0&&j<Z.length-1;)S=M.c2p(Z[j]),j++;for(j=Z.length-1;O===void 0&&j>0;)O=M.c2p(Z[j]),j--;for(O<S&&(P=O,O=S,S=P,kt=!0),j=0;U===void 0&&j<tt.length-1;)U=L.c2p(tt[j]),j++;for(j=tt.length-1;R===void 0&&j>0;)R=L.c2p(tt[j]),j--;R<U&&(P=U,U=R,R=P,yt=!0),ot&&(rt=Z,nt=tt,Z=V.xfill,tt=V.yfill);var mt="default";if(ct?mt=ct==="best"?"smooth":"fast":et._islinear&&J===0&&X===0&&u()&&(mt="fast"),mt!=="fast"){var Ot=ct==="best"?0:.5;S=Math.max(-Ot*M._length,S),O=Math.min((1+Ot)*M._length,O),U=Math.max(-Ot*L._length,U),R=Math.min((1+Ot)*L._length,R)}var vt,xt,st=Math.round(O-S),at=Math.round(R-U);if(S>=M._length||O<=0||U>=L._length||R<=0)return G.selectAll("image").data([]).exit().remove(),void v(G);mt==="fast"?(vt=gt,xt=pt):(vt=st,xt=at);var ht=document.createElement("canvas");ht.width=vt,ht.height=xt;var Lt,Mt,_t=ht.getContext("2d",{willReadFrequently:!0}),St=i(et,{noNumericCheck:!0,returnArray:!0});mt==="fast"?(Lt=kt?function(je){return gt-1-je}:s.identity,Mt=yt?function(je){return pt-1-je}:s.identity):(Lt=function(je){return s.constrain(Math.round(M.c2p(Z[je])-S),0,st)},Mt=function(je){return s.constrain(Math.round(L.c2p(tt[je])-U),0,at)});var Dt,ut,Tt,bt,It=Mt(0),zt=[It,It],Ft=kt?0:1,$t=yt?0:1,Wt=0,Xt=0,ae=0,Qt=0;function de(je,nr){if(je!==void 0){var hr=St(je);return hr[0]=Math.round(hr[0]),hr[1]=Math.round(hr[1]),hr[2]=Math.round(hr[2]),Wt+=nr,Xt+=hr[0]*nr,ae+=hr[1]*nr,Qt+=hr[2]*nr,hr}return[0,0,0,0]}function ye(je,nr,hr,gr){var Mr=je[hr.bin0];if(Mr===void 0)return de(void 0,1);var Hr,Pr=je[hr.bin1],Dr=nr[hr.bin0],Qr=nr[hr.bin1],He=Pr-Mr||0,wr=Dr-Mr||0;return Hr=Pr===void 0?Qr===void 0?0:Dr===void 0?2*(Qr-Mr):2*(2*Qr-Dr-Mr)/3:Qr===void 0?Dr===void 0?0:2*(2*Mr-Pr-Dr)/3:Dr===void 0?2*(2*Qr-Pr-Mr)/3:Qr+Mr-Pr-Dr,de(Mr+hr.frac*He+gr.frac*(wr+hr.frac*Hr))}if(mt!=="default"){var ve,ie=0;try{ve=new Uint8Array(vt*xt*4)}catch{ve=new Array(vt*xt*4)}if(mt==="smooth"){var se,ke,Ae,Ie=rt||Z,Te=nt||tt,Vt=new Array(Ie.length),Zt=new Array(Te.length),Gt=new Array(st),Yt=rt?y:p,ne=nt?y:p;for(j=0;j<Ie.length;j++)Vt[j]=Math.round(M.c2p(Ie[j])-S);for(j=0;j<Te.length;j++)Zt[j]=Math.round(L.c2p(Te[j])-U);for(j=0;j<st;j++)Gt[j]=Yt(j,Vt);for(B=0;B<at;B++)for(ke=Y[(se=ne(B,Zt)).bin0],Ae=Y[se.bin1],j=0;j<st;j++,ie+=4)b(ve,ie,bt=ye(ke,Ae,Gt[j],se))}else for(B=0;B<pt;B++)for(Tt=Y[B],zt=Mt(B),j=0;j<gt;j++)bt=de(Tt[j],1),b(ve,ie=4*(zt*gt+Lt(j)),bt);var re=_t.createImageData(vt,xt);try{re.data.set(ve)}catch{var Pt=re.data,Nt=Pt.length;for(B=0;B<Nt;B++)Pt[B]=ve[B]}_t.putImageData(re,0,0)}else{var ee=Math.floor(J/2),te=Math.floor(X/2);for(B=0;B<pt;B++)if(Tt=Y[B],zt.reverse(),zt[$t]=Mt(B+1),zt[0]!==zt[1]&&zt[0]!==void 0&&zt[1]!==void 0)for(Dt=[ut=Lt(0),ut],j=0;j<gt;j++)Dt.reverse(),Dt[Ft]=Lt(j+1),Dt[0]!==Dt[1]&&Dt[0]!==void 0&&Dt[1]!==void 0&&(bt=de(Tt[j],(Dt[1]-Dt[0])*(zt[1]-zt[0])),_t.fillStyle="rgba("+bt.join(",")+")",_t.fillRect(Dt[0]+ee,zt[0]+te,Dt[1]-Dt[0]-J,zt[1]-zt[0]-X))}Xt=Math.round(Xt/Wt),ae=Math.round(ae/Wt),Qt=Math.round(Qt/Wt);var ge=k("rgb("+Xt+","+ae+","+Qt+")");x._hmpixcount=(x._hmpixcount||0)+Wt,x._hmlumcount=(x._hmlumcount||0)+Wt*ge.getLuminance();var pe=G.selectAll("image").data(E);pe.enter().append("svg:image").attr({xmlns:c.svg,preserveAspectRatio:"none"}),pe.attr({height:at,width:st,x:S,y:U,"xlink:href":ht.toDataURL("image/png")}),mt!=="fast"||ct||pe.attr("style",f),v(G);var me=et.texttemplate;if(me){var ce=a(et),we={type:"linear",range:[ce.min,ce.max],_separators:M._separators,_numFormat:M._numFormat},ue=et.type==="histogram2dcontour",he=et.type==="contour",be=he?pt-1:pt,Pe=he?1:0,De=he?gt-1:gt,Ue=[];for(j=he?1:0;j<be;j++){var tr;if(he)tr=V.y[j];else if(ue){if(j===0||j===pt-1)continue;tr=V.y[j]}else if(V.yCenter)tr=V.yCenter[j];else{if(j+1===pt&&V.y[j+1]===void 0)continue;tr=(V.y[j]+V.y[j+1])/2}var Ge=Math.round(L.c2p(tr));if(!(0>Ge||Ge>L._length))for(B=Pe;B<De;B++){var Ze;if(he)Ze=V.x[B];else if(ue){if(B===0||B===gt-1)continue;Ze=V.x[B]}else if(V.xCenter)Ze=V.xCenter[B];else{if(B+1===gt&&V.x[B+1]===void 0)continue;Ze=(V.x[B]+V.x[B+1])/2}var We=Math.round(M.c2p(Ze));if(!(0>We||We>M._length)){var pr=t({x:Ze,y:tr},et,x._fullLayout);pr.x=Ze,pr.y=tr;var xr=V.z[j][B];xr===void 0?(pr.z="",pr.zLabel=""):(pr.z=xr,pr.zLabel=h.tickText(we,xr,"hover").text);var sr=V.text&&V.text[j]&&V.text[j][B];sr!==void 0&&sr!==!1||(sr=""),pr.text=sr;var $e=s.texttemplateString(me,pr,x._fullLayout._d3locale,pr,et._meta||{});if($e){var ir=$e.split("<br>"),Ke=ir.length,ar=0;for(z=0;z<Ke;z++)ar=Math.max(ar,ir[z].length);Ue.push({l:Ke,c:ar,t:$e,x:We,y:Ge,z:xr})}}}}var fr=et.textfont,mr=fr.family,Cr=fr.size,Er=x._fullLayout.font.size;if(!Cr||Cr==="auto"){var _r=1/0,Sr=1/0,Xr=0,en=0;for(z=0;z<Ue.length;z++){var sn=Ue[z];if(Xr=Math.max(Xr,sn.l),en=Math.max(en,sn.c),z<Ue.length-1){var tn=Ue[z+1],qr=Math.abs(tn.x-sn.x),vn=Math.abs(tn.y-sn.y);qr&&(_r=Math.min(_r,qr)),vn&&(Sr=Math.min(Sr,vn))}}isFinite(_r)&&isFinite(Sr)?(_r-=J,Sr-=X,_r/=en,Sr/=Xr,_r/=l/2,Sr/=l,Cr=Math.min(Math.floor(_r),Math.floor(Sr),Er)):Cr=Er}if(Cr<=0||!isFinite(Cr))return;w(G).data(Ue).enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each(function(je){var nr=T.select(this),hr=fr.color;hr&&hr!=="auto"||(hr=n.contrast("rgba("+St(je.z).join()+")")),nr.attr("data-notex",1).call(e.positionText,function(gr){return gr.x}(je),function(gr){return gr.y-Cr*(gr.l*l/2-1)}(je)).call(m.font,mr,Cr,hr).text(je.t).call(e.convertToTspans,x)})}})}},70035:function(W,I,o){var T=o(39898);W.exports=function(k){T.select(k).selectAll(".hm image").style("opacity",function(r){return r.trace.opacity})}},49901:function(W){W.exports=function(I,o,T){T("zsmooth")===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},67684:function(W,I,o){var T=o(92770),k=o(71828),r=o(73972);function m(h,s){var e=s(h);return(e?s(h+"type","array"):"scaled")==="scaled"&&(s(h+"0"),s("d"+h)),e}W.exports=function(h,s,e,t,n,a){var i,c,l=e("z");if(n=n||"x",a=a||"y",l===void 0||!l.length)return 0;if(k.isArray1D(h.z)){i=e(n),c=e(a);var u=k.minRowLength(i),f=k.minRowLength(c);if(u===0||f===0)return 0;s._length=Math.min(u,f,l.length)}else{if(i=m(n,e),c=m(a,e),!function(d){for(var w,v=!0,p=!1,y=!1,b=0;b<d.length;b++){if(w=d[b],!k.isArrayOrTypedArray(w)){v=!1;break}w.length>0&&(p=!0);for(var x=0;x<w.length;x++)if(T(w[x])){y=!0;break}}return v&&p&&y}(l))return 0;e("transpose"),s._length=null}return h.type==="heatmapgl"||r.getComponentMethod("calendars","handleTraceDefaults")(h,s,[n,a],t),!0}},16063:function(W,I,o){for(var T=o(21606),k=o(50693),r=o(1426).extendFlat,m=o(30962).overrideAll,h=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],s={},e=0;e<h.length;e++){var t=h[e];s[t]=T[t]}s.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},r(s,k("",{cLetter:"z",autoColorDflt:!1})),W.exports=m(s,"calc","nested")},59560:function(W,I,o){var T=o(9330).gl_heatmap2d,k=o(89298),r=o(78614);function m(s,e){this.scene=s,this.uid=e,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=T(s.glplot,this.options),this.heatmap._trace=this}var h=m.prototype;h.handlePick=function(s){var e=this.options,t=e.shape,n=s.pointId,a=n%t[0],i=Math.floor(n/t[0]),c=n;return{trace:this,dataCoord:s.dataCoord,traceCoord:[e.x[a],e.y[i],e.z[c]],textLabel:this.textLabels[n],name:this.name,pointIndex:[i,a],hoverinfo:this.hoverinfo}},h.update=function(s,e){var t=e[0];this.index=s.index,this.name=s.name,this.hoverinfo=s.hoverinfo;var n=t.z;this.options.z=[].concat.apply([],n);var a=n[0].length,i=n.length;this.options.shape=[a,i],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=s.zsmooth;var c=function(w){for(var v=w.colorscale,p=w.zmin,y=w.zmax,b=v.length,x=new Array(b),_=new Array(4*b),g=0;g<b;g++){var A=v[g],M=r(A[1]);x[g]=p+A[0]*(y-p);for(var L=0;L<4;L++)_[4*g+L]=M[L]}return{colorLevels:x,colorValues:_}}(s);this.options.colorLevels=c.colorLevels,this.options.colorValues=c.colorValues,this.textLabels=[].concat.apply([],s.text),this.heatmap.update(this.options);var l,u,f=this.scene.xaxis,d=this.scene.yaxis;s.zsmooth===!1&&(l={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),s._extremes[f._id]=k.findExtremes(f,t.x,l),s._extremes[d._id]=k.findExtremes(d,t.y,u)},h.dispose=function(){this.heatmap.dispose()},W.exports=function(s,e,t){var n=new m(s,e.uid);return n.update(e,t),n}},19600:function(W,I,o){var T=o(71828),k=o(67684),r=o(1586),m=o(16063);W.exports=function(h,s,e,t){function n(a,i){return T.coerce(h,s,m,a,i)}k(h,s,n,t)?(n("text"),n("zsmooth"),r(h,s,t,n,{prefix:"",cLetter:"z"})):s.visible=!1}},3325:function(W,I,o){W.exports={attributes:o(16063),supplyDefaults:o(19600),colorbar:o(61243),calc:o(90757),plot:o(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:o(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(W,I,o){var T=o(1486),k=o(12663).axisHoverFormat,r=o(5386).fF,m=o(5386).si,h=o(41940),s=o(17656),e=o(72406),t=o(1426).extendFlat;W.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},T.text,{}),hovertext:t({},T.hovertext,{}),orientation:T.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:s("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:s("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:r({},{keys:e.eventDataKeys}),texttemplate:m({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},T.textposition,{arrayOk:!1}),textfont:h({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:h({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:h({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:T.insidetextanchor,textangle:T.textangle,cliponaxis:T.cliponaxis,constraintext:T.constraintext,marker:T.marker,offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:T.selected,unselected:T.unselected,_deprecated:{bardir:T._deprecated.bardir}}},42174:function(W){W.exports=function(I,o){for(var T=I.length,k=0,r=0;r<T;r++)o[r]?(I[r]/=o[r],k+=I[r]):I[r]=null;return k}},17656:function(W){W.exports=function(I,o){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(W,I,o){var T=o(92770);W.exports={count:function(k,r,m){return m[k]++,1},sum:function(k,r,m,h){var s=h[r];return T(s)?(s=Number(s),m[k]+=s,s):0},avg:function(k,r,m,h,s){var e=h[r];return T(e)&&(e=Number(e),m[k]+=e,s[k]++),0},min:function(k,r,m,h){var s=h[r];if(T(s)){if(s=Number(s),!T(m[k]))return m[k]=s,s;if(m[k]>s){var e=s-m[k];return m[k]=s,e}}return 0},max:function(k,r,m,h){var s=h[r];if(T(s)){if(s=Number(s),!T(m[k]))return m[k]=s,s;if(m[k]<s){var e=s-m[k];return m[k]=s,e}}return 0}}},40965:function(W,I,o){var T=o(50606),k=T.ONEAVGYEAR,r=T.ONEAVGMONTH,m=T.ONEDAY,h=T.ONEHOUR,s=T.ONEMIN,e=T.ONESEC,t=o(89298).tickIncrement;function n(l,u,f,d){if(l*u<=0)return 1/0;for(var w=Math.abs(u-l),v=f.type==="date",p=a(w,v),y=0;y<10;y++){var b=a(80*p,v);if(p===b||!i(b,l,u,v,f,d))break;p=b}return p}function a(l,u){return u&&l>e?l>m?l>1.1*k?k:l>1.1*r?r:m:l>h?h:l>s?s:e:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function i(l,u,f,d,w,v){if(d&&l>m){var p=c(u,w,v),y=c(f,w,v),b=l===k?0:1;return p[b]!==y[b]}return Math.floor(f/l)-Math.floor(u/l)>.1}function c(l,u,f){var d=u.c2d(l,k,f).split("-");return d[0]===""&&(d.unshift(),d[0]="-"+d[0]),d}W.exports=function(l,u,f,d,w){var v,p,y=-1.1*u,b=-.1*u,x=l-b,_=f[0],g=f[1],A=Math.min(n(_+b,_+x,d,w),n(g+b,g+x,d,w)),M=Math.min(n(_+y,_+b,d,w),n(g+y,g+b,d,w));if(A>M&&M<Math.abs(g-_)/4e3?(v=A,p=!1):(v=Math.min(A,M),p=!0),d.type==="date"&&v>m){var L=v===k?1:6,E=v===k?"M12":"M1";return function(S,O){var P=d.c2d(S,k,w),U=P.indexOf("-",L);U>0&&(P=P.substr(0,U));var R=d.d2c(P,0,w);if(R<S){var j=t(R,E,!1,w);(R+j)/2<S+l&&(R=j)}return O&&p?t(R,E,!0,w):R}}return function(S,O){var P=v*Math.round(S/v);return P+v/10<S&&P+.9*v<S+l&&(P+=v),O&&p&&(P-=v),P}}},72138:function(W,I,o){var T=o(92770),k=o(71828),r=o(73972),m=o(89298),h=o(75341),s=o(59575),e=o(36362),t=o(42174),n=o(40965);function a(i,c,l,u,f){var d,w,v,p,y,b,x,_=u+"bins",g=i._fullLayout,A=c["_"+u+"bingroup"],M=g._histogramBinOpts[A],L=g.barmode==="overlay",E=function(yt){return l.r2c(yt,0,p)},S=function(yt){return l.c2r(yt,0,p)},O=l.type==="date"?function(yt){return yt||yt===0?k.cleanDate(yt,null,p):null}:function(yt){return T(yt)?Number(yt):null};function P(yt,mt,Ot){mt[yt+"Found"]?(mt[yt]=O(mt[yt]),mt[yt]===null&&(mt[yt]=Ot[yt])):(b[yt]=mt[yt]=Ot[yt],k.nestedProperty(w[0],_+"."+yt).set(Ot[yt]))}if(c["_"+u+"autoBinFinished"])delete c["_"+u+"autoBinFinished"];else{w=M.traces;var U=[],R=!0,j=!1,B=!1;for(d=0;d<w.length;d++)if((v=w[d]).visible){var z=M.dirs[d];y=v["_"+z+"pos0"]=l.makeCalcdata(v,z),U=k.concat(U,y),delete v["_"+u+"autoBinFinished"],c.visible===!0&&(R?R=!1:(delete v._autoBin,v["_"+u+"autoBinFinished"]=1),r.traceIs(v,"2dMap")&&(j=!0),v.type==="histogram2dcontour"&&(B=!0))}p=w[0][u+"calendar"];var G=m.autoBin(U,l,M.nbins,j,p,M.sizeFound&&M.size),V=w[0]._autoBin={};if(b=V[M.dirs[0]]={},B&&(M.size||(G.start=S(m.tickIncrement(E(G.start),G.size,!0,p))),M.end===void 0&&(G.end=S(m.tickIncrement(E(G.end),G.size,!1,p)))),L&&!r.traceIs(c,"2dMap")&&G._dataSpan===0&&l.type!=="category"&&l.type!=="multicategory"&&c.bingroup===""&&c.xbins===void 0){if(f)return[G,y,!0];G=function(yt,mt,Ot,vt,xt){var st,at,ht,Lt=yt._fullLayout,Mt=function(Xt,ae){for(var Qt=ae.xaxis,de=ae.yaxis,ye=ae.orientation,ve=[],ie=Xt._fullData,se=0;se<ie.length;se++){var ke=ie[se];ke.type==="histogram"&&ke.visible===!0&&ke.orientation===ye&&ke.xaxis===Qt&&ke.yaxis===de&&ve.push(ke)}return ve}(yt,mt),_t=!1,St=1/0,Dt=[mt];for(st=0;st<Mt.length;st++)if((at=Mt[st])===mt)_t=!0;else if(_t){var ut=a(yt,at,Ot,vt,!0),Tt=ut[0],bt=ut[2];at["_"+vt+"autoBinFinished"]=1,at["_"+vt+"pos0"]=ut[1],bt?Dt.push(at):St=Math.min(St,Tt.size)}else ht=Lt._histogramBinOpts[at["_"+vt+"bingroup"]],St=Math.min(St,ht.size||at[xt].size);var It=new Array(Dt.length);for(st=0;st<Dt.length;st++)for(var zt=Dt[st]["_"+vt+"pos0"],Ft=0;Ft<zt.length;Ft++)if(zt[Ft]!==void 0){It[st]=zt[Ft];break}for(isFinite(St)||(St=k.distinctVals(It).minDiff),st=0;st<Dt.length;st++){var $t=(at=Dt[st])[vt+"calendar"],Wt={start:Ot.c2r(It[st]-St/2,0,$t),end:Ot.c2r(It[st]+St/2,0,$t),size:St};at._input[xt]=at[xt]=Wt,(ht=Lt._histogramBinOpts[at["_"+vt+"bingroup"]])&&k.extendFlat(ht,Wt)}return mt[xt]}(i,c,l,u,_)}(x=v.cumulative||{}).enabled&&x.currentbin!=="include"&&(x.direction==="decreasing"?G.start=S(m.tickIncrement(E(G.start),G.size,!0,p)):G.end=S(m.tickIncrement(E(G.end),G.size,!1,p))),M.size=G.size,M.sizeFound||(b.size=G.size,k.nestedProperty(w[0],_+".size").set(G.size)),P("start",M,G),P("end",M,G)}y=c["_"+u+"pos0"],delete c["_"+u+"pos0"];var et=c._input[_]||{},J=k.extendFlat({},M),X=M.start,Y=l.r2l(et.start),Z=Y!==void 0;if((M.startFound||Z)&&Y!==l.r2l(X)){var tt=Z?Y:k.aggNums(Math.min,null,y),rt={type:l.type==="category"||l.type==="multicategory"?"linear":l.type,r2l:l.r2l,dtick:M.size,tick0:X,calendar:p,range:[tt,m.tickIncrement(tt,M.size,!1,p)].map(l.l2r)},nt=m.tickFirst(rt);nt>l.r2l(tt)&&(nt=m.tickIncrement(nt,M.size,!0,p)),J.start=l.l2r(nt),Z||k.nestedProperty(c,_+".start").set(J.start)}var ot=M.end,ct=l.r2l(et.end),pt=ct!==void 0;if((M.endFound||pt)&&ct!==l.r2l(ot)){var gt=pt?ct:k.aggNums(Math.max,null,y);J.end=l.l2r(gt),pt||k.nestedProperty(c,_+".start").set(J.end)}var kt="autobin"+u;return c._input[kt]===!1&&(c._input[_]=k.extendFlat({},c[_]||{}),delete c._input[kt],delete c[kt]),[J,y]}W.exports={calc:function(i,c){var l,u,f,d,w=[],v=[],p=c.orientation==="h",y=m.getFromId(i,p?c.yaxis:c.xaxis),b=p?"y":"x",x={x:"y",y:"x"}[b],_=c[b+"calendar"],g=c.cumulative,A=a(i,c,y,b),M=A[0],L=A[1],E=typeof M.size=="string",S=[],O=E?S:M,P=[],U=[],R=[],j=0,B=c.histnorm,z=c.histfunc,G=B.indexOf("density")!==-1;g.enabled&&G&&(B=B.replace(/ ?density$/,""),G=!1);var V,et=z==="max"||z==="min"?null:0,J=s.count,X=e[B],Y=!1,Z=function(at){return y.r2c(at,0,_)};for(k.isArrayOrTypedArray(c[x])&&z!=="count"&&(V=c[x],Y=z==="avg",J=s[z]),l=Z(M.start),f=Z(M.end)+(l-m.tickIncrement(l,M.size,!1,_))/1e6;l<f&&w.length<1e6&&(u=m.tickIncrement(l,M.size,!1,_),w.push((l+u)/2),v.push(et),R.push([]),S.push(l),G&&P.push(1/(u-l)),Y&&U.push(0),!(u<=l));)l=u;S.push(l),E||y.type!=="date"||(O={start:Z(O.start),end:Z(O.end),size:O.size}),i._fullLayout._roundFnOpts||(i._fullLayout._roundFnOpts={});var tt=c["_"+b+"bingroup"],rt={leftGap:1/0,rightGap:1/0};tt&&(i._fullLayout._roundFnOpts[tt]||(i._fullLayout._roundFnOpts[tt]=rt),rt=i._fullLayout._roundFnOpts[tt]);var nt,ot=v.length,ct=!0,pt=rt.leftGap,gt=rt.rightGap,kt={};for(l=0;l<L.length;l++){var yt=L[l];(d=k.findBin(yt,O))>=0&&d<ot&&(j+=J(d,l,v,V,U),ct&&R[d].length&&yt!==L[R[d][0]]&&(ct=!1),R[d].push(l),kt[l]=d,pt=Math.min(pt,yt-S[d]),gt=Math.min(gt,S[d+1]-yt))}rt.leftGap=pt,rt.rightGap=gt,ct||(nt=function(at,ht){return function(){var Lt=i._fullLayout._roundFnOpts[tt];return n(Lt.leftGap,Lt.rightGap,S,y,_)(at,ht)}}),Y&&(j=t(v,U)),X&&X(v,j,P),g.enabled&&function(at,ht,Lt){var Mt,_t,St;function Dt(Tt){St=at[Tt],at[Tt]/=2}function ut(Tt){_t=at[Tt],at[Tt]=St+_t/2,St+=_t}if(Lt==="half")if(ht==="increasing")for(Dt(0),Mt=1;Mt<at.length;Mt++)ut(Mt);else for(Dt(at.length-1),Mt=at.length-2;Mt>=0;Mt--)ut(Mt);else if(ht==="increasing"){for(Mt=1;Mt<at.length;Mt++)at[Mt]+=at[Mt-1];Lt==="exclude"&&(at.unshift(0),at.pop())}else{for(Mt=at.length-2;Mt>=0;Mt--)at[Mt]+=at[Mt+1];Lt==="exclude"&&(at.push(0),at.shift())}}(v,g.direction,g.currentbin);var mt=Math.min(w.length,v.length),Ot=[],vt=0,xt=mt-1;for(l=0;l<mt;l++)if(v[l]){vt=l;break}for(l=mt-1;l>=vt;l--)if(v[l]){xt=l;break}for(l=vt;l<=xt;l++)if(T(w[l])&&T(v[l])){var st={p:w[l],s:v[l],b:0};g.enabled||(st.pts=R[l],ct?st.ph0=st.ph1=R[l].length?L[R[l][0]]:w[l]:(c._computePh=!0,st.ph0=nt(S[l]),st.ph1=nt(S[l+1],!0))),Ot.push(st)}return Ot.length===1&&(Ot[0].width1=m.tickIncrement(Ot[0].p,M.size,!1,_)-Ot[0].p),h(Ot,c),k.isArrayOrTypedArray(c.selectedpoints)&&k.tagSelected(Ot,c,kt),Ot},calcAllAutoBins:a}},72406:function(W){W.exports={eventDataKeys:["binNumber"]}},82222:function(W,I,o){var T=o(71828),k=o(41675),r=o(73972).traceIs,m=o(26125),h=T.nestedProperty,s=o(99082).getAxisGroup,e=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];W.exports=function(n,a){var i,c,l,u,f,d,w,v=a._histogramBinOpts={},p=[],y={},b=[];function x(G,V){return T.coerce(i._input,i,i._module.attributes,G,V)}function _(G){return G.orientation==="v"?"x":"y"}function g(G,V,et){var J=G.uid+"__"+et;V||(V=J);var X=function(rt,nt){return k.getFromTrace({_fullLayout:a},rt,nt).type}(G,et),Y=G[et+"calendar"]||"",Z=v[V],tt=!0;Z&&(X===Z.axType&&Y===Z.calendar?(tt=!1,Z.traces.push(G),Z.dirs.push(et)):(V=J,X!==Z.axType&&T.warn(["Attempted to group the bins of trace",G.index,"set on a","type:"+X,"axis","with bins on","type:"+Z.axType,"axis."].join(" ")),Y!==Z.calendar&&T.warn(["Attempted to group the bins of trace",G.index,"set with a",Y,"calendar","with bins",Z.calendar?"on a "+Z.calendar+" calendar":"w/o a set calendar"].join(" ")))),tt&&(v[V]={traces:[G],dirs:[et],axType:X,calendar:G[et+"calendar"]||""}),G["_"+et+"bingroup"]=V}for(f=0;f<n.length;f++)i=n[f],r(i,"histogram")&&(p.push(i),delete i._xautoBinFinished,delete i._yautoBinFinished,r(i,"2dMap")||m(i._input,i,a,x));var A=a._alignmentOpts||{};for(f=0;f<p.length;f++){if(i=p[f],l="",!r(i,"2dMap")){if(u=_(i),a.barmode==="group"&&i.alignmentgroup){var M=i[u+"axis"],L=s(a,M)+i.orientation;(A[L]||{})[i.alignmentgroup]&&(l=L)}l||a.barmode==="overlay"||(l=s(a,i.xaxis)+s(a,i.yaxis)+_(i))}l?(y[l]||(y[l]=[]),y[l].push(i)):b.push(i)}for(l in y)if((c=y[l]).length!==1){var E=!1;for(c.length&&(i=c[0],E=x("bingroup")),l=E||l,f=0;f<c.length;f++){var S=(i=c[f])._input.bingroup;S&&S!==l&&T.warn(["Trace",i.index,"must match","within bingroup",l+".","Ignoring its bingroup:",S,"setting."].join(" ")),i.bingroup=l,g(i,l,_(i))}}else b.push(c[0]);for(f=0;f<b.length;f++){i=b[f];var O=x("bingroup");if(r(i,"2dMap"))for(w=0;w<2;w++){var P=x((u=t[w])+"bingroup",O?O+"__"+u:null);g(i,P,u)}else g(i,O,_(i))}for(l in v){var U=v[l];for(c=U.traces,d=0;d<e.length;d++){var R,j,B=e[d],z=B.name;if(z!=="nbins"||!U.sizeFound){for(f=0;f<c.length;f++){if(i=c[f],u=U.dirs[f],R=B.aStr[u],h(i._input,R).get()!==void 0){U[z]=x(R),U[z+"Found"]=!0;break}(j=(i._autoBin||{})[u]||{})[z]&&h(i,R).set(j[z])}if(z==="start"||z==="end")for(;f<c.length;f++)(i=c[f])["_"+u+"bingroup"]&&x(R,(j=(i._autoBin||{})[u]||{})[z]);z!=="nbins"||U.sizeFound||U.nbinsFound||(i=c[0],U[z]=x(R))}}}}},11385:function(W,I,o){var T=o(73972),k=o(71828),r=o(7901),m=o(90769).handleText,h=o(98340),s=o(7745);W.exports=function(e,t,n,a){function i(b,x){return k.coerce(e,t,s,b,x)}var c=i("x"),l=i("y");i("cumulative.enabled")&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var u=i("textposition");m(e,t,a,i,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var f=i("orientation",l&&!c?"h":"v"),d=f==="v"?"x":"y",w=f==="v"?"y":"x",v=c&&l?Math.min(k.minRowLength(c)&&k.minRowLength(l)):k.minRowLength(t[d]||[]);if(v){t._length=v,T.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],a),t[w]&&i("histfunc"),i("histnorm"),i("autobin"+d),h(e,t,i,n,a),k.coerceSelectionMarkerOpacity(t,i);var p=(t.marker.line||{}).color,y=T.getComponentMethod("errorbars","supplyDefaults");y(e,t,p||r.defaultLine,{axis:"y"}),y(e,t,p||r.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},84402:function(W){W.exports=function(I,o,T,k,r){if(I.x="xVal"in o?o.xVal:o.x,I.y="yVal"in o?o.yVal:o.y,"zLabelVal"in o&&(I.z=o.zLabelVal),o.xa&&(I.xaxis=o.xa),o.ya&&(I.yaxis=o.ya),!(T.cumulative||{}).enabled){var m,h=Array.isArray(r)?k[0].pts[r[0]][r[1]]:k[r].pts;if(I.pointNumbers=h,I.binNumber=I.pointNumber,delete I.pointNumber,delete I.pointIndex,T._indexToPoints){m=[];for(var s=0;s<h.length;s++)m=m.concat(T._indexToPoints[h[s]])}else m=h;I.pointIndices=m}return I}},76440:function(W,I,o){var T=o(95423).hoverPoints,k=o(89298).hoverLabelText;W.exports=function(r,m,h,s,e){var t=T(r,m,h,s,e);if(t){var n=(r=t[0]).cd[r.index],a=r.cd[0].trace;if(!a.cumulative.enabled){var i=a.orientation==="h"?"y":"x";r[i+"Label"]=k(r[i+"a"],[n.ph0,n.ph1],a[i+"hoverformat"])}return t}}},36071:function(W,I,o){W.exports={attributes:o(7745),layoutAttributes:o(43641),supplyDefaults:o(11385),crossTraceDefaults:o(82222),supplyLayoutDefaults:o(13957),calc:o(72138).calc,crossTraceCalc:o(11661).crossTraceCalc,plot:o(17295).plot,layerName:"barlayer",style:o(16688).style,styleOnSelect:o(16688).styleOnSelect,colorbar:o(4898),hoverPoints:o(76440),selectPoints:o(81974),eventData:o(84402),moduleType:"trace",name:"histogram",basePlotModule:o(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(W){W.exports={percent:function(I,o){for(var T=I.length,k=100/o,r=0;r<T;r++)I[r]*=k},probability:function(I,o){for(var T=I.length,k=0;k<T;k++)I[k]/=o},density:function(I,o,T,k){var r=I.length;k=k||1;for(var m=0;m<r;m++)I[m]*=T[m]*k},"probability density":function(I,o,T,k){var r=I.length;k&&(o/=k);for(var m=0;m<r;m++)I[m]*=T[m]/o}}},35361:function(W,I,o){var T=o(7745),k=o(17656),r=o(21606),m=o(9012),h=o(12663).axisHoverFormat,s=o(5386).fF,e=o(5386).si,t=o(50693),n=o(1426).extendFlat;W.exports=n({x:T.x,y:T.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:T.histnorm,histfunc:T.histfunc,nbinsx:T.nbinsx,xbins:k("x"),nbinsy:T.nbinsy,ybins:k("y"),autobinx:T.autobinx,autobiny:T.autobiny,bingroup:n({},T.bingroup,{}),xbingroup:n({},T.bingroup,{}),ybingroup:n({},T.bingroup,{}),xgap:r.xgap,ygap:r.ygap,zsmooth:r.zsmooth,xhoverformat:h("x"),yhoverformat:h("y"),zhoverformat:h("z",1),hovertemplate:s({},{keys:"z"}),texttemplate:e({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:r.textfont,showlegend:n({},m.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},17562:function(W,I,o){var T=o(71828),k=o(89298),r=o(59575),m=o(36362),h=o(42174),s=o(40965),e=o(72138).calcAllAutoBins;function t(i,c,l,u){var f,d=new Array(i);if(u)for(f=0;f<i;f++)d[f]=1/(c[f+1]-c[f]);else{var w=1/l;for(f=0;f<i;f++)d[f]=w}return d}function n(i,c){return{start:i(c.start),end:i(c.end),size:c.size}}function a(i,c,l,u,f,d){var w,v=i.length-1,p=new Array(v),y=s(l,u,i,f,d);for(w=0;w<v;w++){var b=(c||[])[w];p[w]=b===void 0?[y(i[w]),y(i[w+1],!0)]:[b,b]}return p}W.exports=function(i,c){var l,u,f,d,w=k.getFromId(i,c.xaxis),v=k.getFromId(i,c.yaxis),p=c.xcalendar,y=c.ycalendar,b=function(de){return w.r2c(de,0,p)},x=function(de){return v.r2c(de,0,y)},_=e(i,c,w,"x"),g=_[0],A=_[1],M=e(i,c,v,"y"),L=M[0],E=M[1],S=c._length;A.length>S&&A.splice(S,A.length-S),E.length>S&&E.splice(S,E.length-S);var O=[],P=[],U=[],R=typeof g.size=="string",j=typeof L.size=="string",B=[],z=[],G=R?B:g,V=j?z:L,et=0,J=[],X=[],Y=c.histnorm,Z=c.histfunc,tt=Y.indexOf("density")!==-1,rt=Z==="max"||Z==="min"?null:0,nt=r.count,ot=m[Y],ct=!1,pt=[],gt=[],kt="z"in c?c.z:"marker"in c&&Array.isArray(c.marker.color)?c.marker.color:"";kt&&Z!=="count"&&(ct=Z==="avg",nt=r[Z]);var yt=g.size,mt=b(g.start),Ot=b(g.end)+(mt-k.tickIncrement(mt,yt,!1,p))/1e6;for(l=mt;l<Ot;l=k.tickIncrement(l,yt,!1,p))P.push(rt),B.push(l),ct&&U.push(0);B.push(l);var vt,xt=P.length,st=(l-mt)/xt,at=(vt=mt+st/2,w.c2r(vt,0,p)),ht=L.size,Lt=x(L.start),Mt=x(L.end)+(Lt-k.tickIncrement(Lt,ht,!1,y))/1e6;for(l=Lt;l<Mt;l=k.tickIncrement(l,ht,!1,y)){O.push(P.slice()),z.push(l);var _t=new Array(xt);for(u=0;u<xt;u++)_t[u]=[];X.push(_t),ct&&J.push(U.slice())}z.push(l);var St=O.length,Dt=(l-Lt)/St,ut=function(de){return v.c2r(de,0,y)}(Lt+Dt/2);tt&&(pt=t(P.length,G,st,R),gt=t(O.length,V,Dt,j)),R||w.type!=="date"||(G=n(b,G)),j||v.type!=="date"||(V=n(x,V));var Tt=!0,bt=!0,It=new Array(xt),zt=new Array(St),Ft=1/0,$t=1/0,Wt=1/0,Xt=1/0;for(l=0;l<S;l++){var ae=A[l],Qt=E[l];f=T.findBin(ae,G),d=T.findBin(Qt,V),f>=0&&f<xt&&d>=0&&d<St&&(et+=nt(f,l,O[d],kt,J[d]),X[d][f].push(l),Tt&&(It[f]===void 0?It[f]=ae:It[f]!==ae&&(Tt=!1)),bt&&(zt[d]===void 0?zt[d]=Qt:zt[d]!==Qt&&(bt=!1)),Ft=Math.min(Ft,ae-B[f]),$t=Math.min($t,B[f+1]-ae),Wt=Math.min(Wt,Qt-z[d]),Xt=Math.min(Xt,z[d+1]-Qt))}if(ct)for(d=0;d<St;d++)et+=h(O[d],J[d]);if(ot)for(d=0;d<St;d++)ot(O[d],et,pt,gt[d]);return{x:A,xRanges:a(B,Tt&&It,Ft,$t,w,p),x0:at,dx:st,y:E,yRanges:a(z,bt&&zt,Wt,Xt,v,y),y0:ut,dy:Dt,z:O,pts:X}}},93888:function(W,I,o){var T=o(71828),k=o(75238),r=o(49901),m=o(1586),h=o(58623),s=o(35361);W.exports=function(e,t,n,a){function i(c,l){return T.coerce(e,t,s,c,l)}k(e,t,i,a),t.visible!==!1&&(r(e,t,i,a),m(e,t,a,i,{prefix:"",cLetter:"z"}),i("hovertemplate"),h(i,a),i("xhoverformat"),i("yhoverformat"))}},76128:function(W,I,o){var T=o(46248),k=o(89298).hoverLabelText;W.exports=function(r,m,h,s,e){var t=T(r,m,h,s,e);if(t){var n=(r=t[0]).index,a=n[0],i=n[1],c=r.cd[0],l=c.trace,u=c.xRanges[i],f=c.yRanges[a];return r.xLabel=k(r.xa,[u[0],u[1]],l.xhoverformat),r.yLabel=k(r.ya,[f[0],f[1]],l.yhoverformat),t}}},43905:function(W,I,o){W.exports={attributes:o(35361),supplyDefaults:o(93888),crossTraceDefaults:o(82222),calc:o(90757),plot:o(50347),layerName:"heatmaplayer",colorbar:o(61243),style:o(70035),hoverPoints:o(76128),eventData:o(84402),moduleType:"trace",name:"histogram2d",basePlotModule:o(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(W,I,o){var T=o(73972),k=o(71828);W.exports=function(r,m,h,s){var e=h("x"),t=h("y"),n=k.minRowLength(e),a=k.minRowLength(t);n&&a?(m._length=Math.min(n,a),T.getComponentMethod("calendars","handleTraceDefaults")(r,m,["x","y"],s),(h("z")||h("marker.color"))&&h("histfunc"),h("histnorm"),h("autobinx"),h("autobiny")):m.visible=!1}},99066:function(W,I,o){var T=o(35361),k=o(70600),r=o(50693),m=o(12663).axisHoverFormat,h=o(1426).extendFlat;W.exports=h({x:T.x,y:T.y,z:T.z,marker:T.marker,histnorm:T.histnorm,histfunc:T.histfunc,nbinsx:T.nbinsx,xbins:T.xbins,nbinsy:T.nbinsy,ybins:T.ybins,autobinx:T.autobinx,autobiny:T.autobiny,bingroup:T.bingroup,xbingroup:T.xbingroup,ybingroup:T.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:h({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z",1),hovertemplate:T.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},r("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(W,I,o){var T=o(71828),k=o(75238),r=o(67217),m=o(8724),h=o(58623),s=o(99066);W.exports=function(e,t,n,a){function i(c,l){return T.coerce(e,t,s,c,l)}k(e,t,i,a),t.visible!==!1&&(r(e,t,i,function(c){return T.coerce2(e,t,s,c)}),m(e,t,i,a),i("xhoverformat"),i("yhoverformat"),i("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&h(i,a))}},35902:function(W,I,o){W.exports={attributes:o(99066),supplyDefaults:o(62654),crossTraceDefaults:o(82222),calc:o(27529),plot:o(29854).plot,layerName:"contourlayer",style:o(84426),colorbar:o(90654),hoverPoints:o(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:o(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(W,I,o){var T=o(5386).fF,k=o(5386).si,r=o(50693),m=o(27670).Y,h=o(34e3),s=o(57564),e=o(45802),t=o(43473),n=o(1426).extendFlat,a=o(79952).u;W.exports={labels:s.labels,parents:s.parents,values:s.values,branchvalues:s.branchvalues,count:s.count,level:s.level,maxdepth:s.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:e.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:n({colors:s.marker.colors,line:s.marker.line,pattern:a,editType:"calc"},r("marker",{colorAttr:"colors",anim:!1})),leaf:s.leaf,pathbar:e.pathbar,text:h.text,textinfo:s.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:h.hovertext,hoverinfo:s.hoverinfo,hovertemplate:T({},{keys:t.eventDataKeys}),textfont:h.textfont,insidetextfont:h.insidetextfont,outsidetextfont:e.outsidetextfont,textposition:e.textposition,sort:h.sort,root:s.root,domain:m({name:"icicle",trace:!0,editType:"calc"})}},96346:function(W,I,o){var T=o(74875);I.name="icicle",I.plot=function(k,r,m,h){T.plotBasePlot(I.name,k,r,m,h)},I.clean=function(k,r,m,h){T.cleanBasePlot(I.name,k,r,m,h)}},46584:function(W,I,o){var T=o(52147);I.y=function(k,r){return T.calc(k,r)},I.T=function(k){return T._runCrossTraceCalc("icicle",k)}},56524:function(W,I,o){var T=o(71828),k=o(46291),r=o(7901),m=o(27670).c,h=o(90769).handleText,s=o(97313).TEXTPAD,e=o(37434).handleMarkerDefaults,t=o(21081),n=t.hasColorscale,a=t.handleDefaults;W.exports=function(i,c,l,u){function f(x,_){return T.coerce(i,c,k,x,_)}var d=f("labels"),w=f("parents");if(d&&d.length&&w&&w.length){var v=f("values");v&&v.length?f("branchvalues"):f("count"),f("level"),f("maxdepth"),f("tiling.orientation"),f("tiling.flip"),f("tiling.pad");var p=f("text");f("texttemplate"),c.texttemplate||f("textinfo",Array.isArray(p)?"text+label":"label"),f("hovertext"),f("hovertemplate");var y=f("pathbar.visible");h(i,c,u,f,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition"),e(i,c,u,f);var b=c._hasColorscale=n(i,"marker","colors")||(i.marker||{}).coloraxis;b&&a(i,c,u,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",b?1:.7),c._hovered={marker:{line:{width:2,color:r.contrast(u.paper_bgcolor)}}},y&&(f("pathbar.thickness",c.pathbar.textfont.size+2*s),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),m(c,u,f),c._length=null}else c.visible=!1}},90666:function(W,I,o){var T=o(39898),k=o(71828),r=o(91424),m=o(63893),h=o(21538),s=o(82454).styleOne,e=o(43473),t=o(2791),n=o(83523),a=o(24714).formatSliceLabel,i=!1;W.exports=function(c,l,u,f,d){var w=d.width,v=d.height,p=d.viewX,y=d.viewY,b=d.pathSlice,x=d.toMoveInsideSlice,_=d.strTransform,g=d.hasTransition,A=d.handleSlicesExit,M=d.makeUpdateSliceInterpolator,L=d.makeUpdateTextInterpolator,E=d.prevEntry,S=c._context.staticPlot,O=c._fullLayout,P=l[0].trace,U=P.textposition.indexOf("left")!==-1,R=P.textposition.indexOf("right")!==-1,j=P.textposition.indexOf("bottom")!==-1,B=h(u,[w,v],{flipX:P.tiling.flip.indexOf("x")>-1,flipY:P.tiling.flip.indexOf("y")>-1,orientation:P.tiling.orientation,pad:{inner:P.tiling.pad},maxDepth:P._maxDepth}).descendants(),z=1/0,G=-1/0;B.forEach(function(Y){var Z=Y.depth;Z>=P._maxDepth?(Y.x0=Y.x1=(Y.x0+Y.x1)/2,Y.y0=Y.y1=(Y.y0+Y.y1)/2):(z=Math.min(z,Z),G=Math.max(G,Z))}),f=f.data(B,t.getPtId),P._maxVisibleLayers=isFinite(G)?G-z+1:0,f.enter().append("g").classed("slice",!0),A(f,i,{},[w,v],b),f.order();var V=null;if(g&&E){var et=t.getPtId(E);f.each(function(Y){V===null&&t.getPtId(Y)===et&&(V={x0:Y.x0,x1:Y.x1,y0:Y.y0,y1:Y.y1})})}var J=function(){return V||{x0:0,x1:w,y0:0,y1:v}},X=f;return g&&(X=X.transition().each("end",function(){var Y=T.select(this);t.setSliceCursor(Y,c,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(Y){Y._x0=p(Y.x0),Y._x1=p(Y.x1),Y._y0=y(Y.y0),Y._y1=y(Y.y1),Y._hoverX=p(Y.x1-P.tiling.pad),Y._hoverY=y(j?Y.y1-P.tiling.pad/2:Y.y0+P.tiling.pad/2);var Z=T.select(this),tt=k.ensureSingle(Z,"path","surface",function(ct){ct.style("pointer-events",S?"none":"all")});g?tt.transition().attrTween("d",function(ct){var pt=M(ct,i,J(),[w,v],{orientation:P.tiling.orientation,flipX:P.tiling.flip.indexOf("x")>-1,flipY:P.tiling.flip.indexOf("y")>-1});return function(gt){return b(pt(gt))}}):tt.attr("d",b),Z.call(n,u,c,l,{styleOne:s,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,transitionEasing:e.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,c,{isTransitioning:c._transitioning}),tt.call(s,Y,P,c,{hovered:!1}),Y.x0===Y.x1||Y.y0===Y.y1?Y._text="":Y._text=a(Y,u,P,l,O)||"";var rt=k.ensureSingle(Z,"g","slicetext"),nt=k.ensureSingle(rt,"text","",function(ct){ct.attr("data-notex",1)}),ot=k.ensureUniformFontSize(c,t.determineTextFont(P,Y,O.font));nt.text(Y._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":U?"start":"middle").call(r.font,ot).call(m.convertToTspans,c),Y.textBB=r.bBox(nt.node()),Y.transform=x(Y,{fontSize:ot.size}),Y.transform.fontSize=ot.size,g?nt.transition().attrTween("transform",function(ct){var pt=L(ct,i,J(),[w,v]);return function(gt){return _(pt(gt))}}):nt.attr("transform",_(Y))}),V}},69816:function(W,I,o){W.exports={moduleType:"trace",name:"icicle",basePlotModule:o(96346),categories:[],animatable:!0,attributes:o(46291),layoutAttributes:o(92894),supplyDefaults:o(56524),supplyLayoutDefaults:o(21070),calc:o(46584).y,crossTraceCalc:o(46584).T,plot:o(85596),style:o(82454).style,colorbar:o(4898),meta:{}}},92894:function(W){W.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(W,I,o){var T=o(71828),k=o(92894);W.exports=function(r,m){function h(s,e){return T.coerce(r,m,k,s,e)}h("iciclecolorway",m.colorway),h("extendiciclecolors")}},21538:function(W,I,o){var T=o(674),k=o(14102);W.exports=function(r,m,h){var s=h.flipX,e=h.flipY,t=h.orientation==="h",n=h.maxDepth,a=m[0],i=m[1];n&&(a=(r.height+1)*m[0]/Math.min(r.height+1,n),i=(r.height+1)*m[1]/Math.min(r.height+1,n));var c=T.partition().padding(h.pad.inner).size(t?[m[1],a]:[m[0],i])(r);return(t||s||e)&&k(c,m,{swapXY:t,flipX:s,flipY:e}),c}},85596:function(W,I,o){var T=o(80694),k=o(90666);W.exports=function(r,m,h,s){return T(r,m,h,s,{type:"icicle",drawDescendants:k})}},82454:function(W,I,o){var T=o(39898),k=o(7901),r=o(71828),m=o(72597).resizeText,h=o(43467);function s(e,t,n,a){var i=t.data.data,c=!t.children,l=i.i,u=r.castOption(n,l,"marker.line.color")||k.defaultLine,f=r.castOption(n,l,"marker.line.width")||0;e.call(h,t,n,a).style("stroke-width",f).call(k.stroke,u).style("opacity",c?n.leaf.opacity:null)}W.exports={style:function(e){var t=e._fullLayout._iciclelayer.selectAll(".trace");m(e,t,"icicle"),t.each(function(n){var a=T.select(this),i=n[0].trace;a.style("opacity",i.opacity),a.selectAll("path.surface").each(function(c){T.select(this).call(s,c,i,e)})})},styleOne:s}},17230:function(W,I,o){for(var T=o(9012),k=o(5386).fF,r=o(1426).extendFlat,m=o(51877).colormodel,h=["rgb","rgba","rgba256","hsl","hsla"],s=[],e=[],t=0;t<h.length;t++){var n=m[h[t]];s.push("For the `"+h[t]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),e.push("For the `"+h[t]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}W.exports=r({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:h,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:r({},T.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:k({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(W,I,o){var T=o(71828),k=o(51877),r=o(92770),m=o(89298),h=o(71828).maxRowLength,s=o(67395).A;function e(n,a,i,c){return function(l){return T.constrain((l-n)*a,i,c)}}function t(n,a){return function(i){return T.constrain(i,n,a)}}W.exports=function(n,a){var i,c;if(a._hasZ)i=a.z.length,c=h(a.z);else if(a._hasSource){var l=s(a.source);i=l.height,c=l.width}var u,f=m.getFromId(n,a.xaxis||"x"),d=m.getFromId(n,a.yaxis||"y"),w=f.d2c(a.x0)-a.dx/2,v=d.d2c(a.y0)-a.dy/2,p=[w,w+c*a.dx],y=[v,v+i*a.dy];if(f&&f.type==="log")for(u=0;u<c;u++)p.push(w+u*a.dx);if(d&&d.type==="log")for(u=0;u<i;u++)y.push(v+u*a.dy);return a._extremes[f._id]=m.findExtremes(f,p),a._extremes[d._id]=m.findExtremes(d,y),a._scaler=function(b){var x=k.colormodel[b.colormodel],_=(x.colormodel||b.colormodel).length;b._sArray=[];for(var g=0;g<_;g++)x.min[g]!==b.zmin[g]||x.max[g]!==b.zmax[g]?b._sArray.push(e(b.zmin[g],(x.max[g]-x.min[g])/(b.zmax[g]-b.zmin[g]),x.min[g],x.max[g])):b._sArray.push(t(x.min[g],x.max[g]));return function(A){for(var M=A.slice(0,_),L=0;L<_;L++){var E=M[L];if(!r(E))return!1;M[L]=b._sArray[L](E)}return M}}(a),[{x0:w,y0:v,z:a.z,w:c,h:i}]}},51877:function(W){W.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(I){return I.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(I){return I.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(I){return I.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(I){var o=I.slice(0,3);return o[1]=o[1]+"%",o[2]=o[2]+"%",o},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(I){var o=I.slice(0,4);return o[1]=o[1]+"%",o[2]=o[2]+"%",o},suffix:["\xB0","%","%",""]}}}},13245:function(W,I,o){var T=o(71828),k=o(17230),r=o(51877),m=o(25095).IMAGE_URL_PREFIX;W.exports=function(h,s){function e(a,i){return T.coerce(h,s,k,a,i)}e("source"),s.source&&!s.source.match(m)&&delete s.source,s._hasSource=!!s.source;var t,n=e("z");s._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),s._hasZ||s._hasSource?(e("x0"),e("y0"),e("dx"),e("dy"),s._hasZ?(e("colormodel","rgb"),e("zmin",(t=r.colormodel[s.colormodel]).zminDflt||t.min),e("zmax",t.zmaxDflt||t.max)):s._hasSource&&(s.colormodel="rgba256",t=r.colormodel[s.colormodel],s.zmin=t.zminDflt,s.zmax=t.zmaxDflt),e("zsmooth"),e("text"),e("hovertext"),e("hovertemplate"),s._length=null):s.visible=!1}},30835:function(W){W.exports=function(I,o){return"xVal"in o&&(I.x=o.xVal),"yVal"in o&&(I.y=o.yVal),o.xa&&(I.xaxis=o.xa),o.ya&&(I.yaxis=o.ya),I.color=o.color,I.colormodel=o.trace.colormodel,I.z||(I.z=o.color),I}},67395:function(W,I,o){var T=o(33575),k=o(25095).IMAGE_URL_PREFIX,r=o(12856).Buffer;I.A=function(m){var h=m.replace(k,""),s=new r(h,"base64");return T(s)}},28749:function(W,I,o){var T=o(30211),k=o(71828),r=o(51877);W.exports=function(m,h,s){var e=m.cd[0],t=e.trace,n=m.xa,a=m.ya;if(!(T.inbox(h-e.x0,h-(e.x0+e.w*t.dx),0)>0||T.inbox(s-e.y0,s-(e.y0+e.h*t.dy),0)>0)){var i,c=Math.floor((h-e.x0)/t.dx),l=Math.floor(Math.abs(s-e.y0)/t.dy);if(t._hasZ?i=e.z[l][c]:t._hasSource&&(i=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(c,l,1,1).data),i){var u,f=e.hi||t.hoverinfo;if(f){var d=f.split("+");d.indexOf("all")!==-1&&(d=["color"]),d.indexOf("color")!==-1&&(u=!0)}var w,v=r.colormodel[t.colormodel],p=v.colormodel||t.colormodel,y=p.length,b=t._scaler(i),x=v.suffix,_=[];(t.hovertemplate||u)&&(_.push("["+[b[0]+x[0],b[1]+x[1],b[2]+x[2]].join(", ")),y===4&&_.push(", "+b[3]+x[3]),_.push("]"),_=_.join(""),m.extraText=p.toUpperCase()+": "+_),Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[l])?w=t.hovertext[l][c]:Array.isArray(t.text)&&Array.isArray(t.text[l])&&(w=t.text[l][c]);var g=a.c2p(e.y0+(l+.5)*t.dy),A=e.x0+(c+.5)*t.dx,M=e.y0+(l+.5)*t.dy,L="["+i.slice(0,t.colormodel.length).join(", ")+"]";return[k.extendFlat(m,{index:[l,c],x0:n.c2p(e.x0+c*t.dx),x1:n.c2p(e.x0+(c+1)*t.dx),y0:g,y1:g,color:b,xVal:A,xLabelVal:A,yVal:M,yLabelVal:M,zLabelVal:L,text:w,hovertemplateLabels:{zLabel:L,colorLabel:_,"color[0]Label":b[0]+x[0],"color[1]Label":b[1]+x[1],"color[2]Label":b[2]+x[2],"color[3]Label":b[3]+x[3]}})]}}}},94507:function(W,I,o){W.exports={attributes:o(17230),supplyDefaults:o(13245),calc:o(71113),plot:o(60775),style:o(12826),hoverPoints:o(28749),eventData:o(30835),moduleType:"trace",name:"image",basePlotModule:o(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(W,I,o){var T=o(39898),k=o(71828),r=k.strTranslate,m=o(77922),h=o(51877),s=o(3883),e=o(32396).STYLE;W.exports=function(t,n,a,i){var c=n.xaxis,l=n.yaxis,u=!t._context._exportedPlot&&s();k.makeTraceGroups(i,a,"im").each(function(f){var d=T.select(this),w=f[0],v=w.trace,p=(v.zsmooth==="fast"||v.zsmooth===!1&&u)&&!v._hasZ&&v._hasSource&&c.type==="linear"&&l.type==="linear";v._realImage=p;var y,b,x,_,g,A,M=w.z,L=w.x0,E=w.y0,S=w.w,O=w.h,P=v.dx,U=v.dy;for(A=0;y===void 0&&A<S;)y=c.c2p(L+A*P),A++;for(A=S;b===void 0&&A>0;)b=c.c2p(L+A*P),A--;for(A=0;_===void 0&&A<O;)_=l.c2p(E+A*U),A++;for(A=O;g===void 0&&A>0;)g=l.c2p(E+A*U),A--;b<y&&(x=b,b=y,y=x),g<_&&(x=_,_=g,g=x),p||(y=Math.max(-.5*c._length,y),b=Math.min(1.5*c._length,b),_=Math.max(-.5*l._length,_),g=Math.min(1.5*l._length,g));var R=Math.round(b-y),j=Math.round(g-_);if(R<=0||j<=0)d.selectAll("image").data([]).exit().remove();else{var B=d.selectAll("image").data([f]);B.enter().append("svg:image").attr({xmlns:m.svg,preserveAspectRatio:"none"}),B.exit().remove();var z=v.zsmooth===!1?e:"";if(p){var G=k.simpleMap(c.range,c.r2l),V=k.simpleMap(l.range,l.r2l),et=G[1]<G[0],J=V[1]>V[0];if(et||J){var X=y+R/2,Y=_+j/2;z+="transform:"+r(X+"px",Y+"px")+"scale("+(et?-1:1)+","+(J?-1:1)+")"+r(-X+"px",-Y+"px")+";"}}B.attr("style",z);var Z=new Promise(function(rt){if(v._hasZ)rt();else if(v._hasSource)if(v._canvas&&v._canvas.el.width===S&&v._canvas.el.height===O&&v._canvas.source===v.source)rt();else{var nt=document.createElement("canvas");nt.width=S,nt.height=O;var ot=nt.getContext("2d",{willReadFrequently:!0});v._image=v._image||new Image;var ct=v._image;ct.onload=function(){ot.drawImage(ct,0,0),v._canvas={el:nt,source:v.source},rt()},ct.setAttribute("src",v.source)}}).then(function(){var rt,nt;if(v._hasZ)nt=tt(function(ct,pt){return M[pt][ct]}),rt=nt.toDataURL("image/png");else if(v._hasSource)if(p)rt=v.source;else{var ot=v._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,S,O).data;nt=tt(function(ct,pt){var gt=4*(pt*S+ct);return[ot[gt],ot[gt+1],ot[gt+2],ot[gt+3]]}),rt=nt.toDataURL("image/png")}B.attr({"xlink:href":rt,height:j,width:R,x:y,y:_})});t._promises.push(Z)}function tt(rt){var nt=document.createElement("canvas");nt.width=R,nt.height=j;var ot,ct=nt.getContext("2d",{willReadFrequently:!0}),pt=function(ht){return k.constrain(Math.round(c.c2p(L+ht*P)-y),0,R)},gt=function(ht){return k.constrain(Math.round(l.c2p(E+ht*U)-_),0,j)},kt=h.colormodel[v.colormodel],yt=kt.colormodel||v.colormodel,mt=kt.fmt;for(A=0;A<w.w;A++){var Ot=pt(A),vt=pt(A+1);if(vt!==Ot&&!isNaN(vt)&&!isNaN(Ot))for(var xt=0;xt<w.h;xt++){var st=gt(xt),at=gt(xt+1);at===st||isNaN(at)||isNaN(st)||!rt(A,xt)||(ot=v._scaler(rt(A,xt)),ct.fillStyle=ot?yt+"("+mt(ot).join(",")+")":"rgba(0,0,0,0)",ct.fillRect(Ot,st,vt-Ot,at-st))}}return nt}})}},12826:function(W,I,o){var T=o(39898);W.exports=function(k){T.select(k).selectAll(".im image").style("opacity",function(r){return r[0].trace.opacity})}},54846:function(W,I,o){var T=o(1426).extendFlat,k=o(1426).extendDeep,r=o(30962).overrideAll,m=o(41940),h=o(22399),s=o(27670).Y,e=o(13838),t=o(44467).templatedArray,n=o(22372),a=o(12663).descriptionOnlyNumbers,i=m({editType:"plot",colorEditType:"plot"}),c={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:h.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",k({},c,{range:l}));W.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:s({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:T({},i,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:a("value")},font:T({},i,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:a("value")},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:T({},i,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},c,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:h.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:r({range:l,visible:T({},e.visible,{dflt:!0}),tickmode:e.minor.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:T({},e.ticks,{dflt:"outside"}),ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,ticklabelstep:e.ticklabelstep,showticklabels:e.showticklabels,labelalias:e.labelalias,tickfont:m({}),tickangle:e.tickangle,tickformat:e.tickformat,tickformatstops:e.tickformatstops,tickprefix:e.tickprefix,showtickprefix:e.showtickprefix,ticksuffix:e.ticksuffix,showticksuffix:e.showticksuffix,separatethousands:e.separatethousands,exponentformat:e.exponentformat,minexponent:e.minexponent,showexponent:e.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:T({},c.line.color,{}),width:T({},c.line.width,{dflt:1}),editType:"plot"},thickness:T({},c.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(W,I,o){var T=o(74875);I.name="indicator",I.plot=function(k,r,m,h){T.plotBasePlot(I.name,k,r,m,h)},I.clean=function(k,r,m,h){T.cleanBasePlot(I.name,k,r,m,h)}},24667:function(W){W.exports={calc:function(I,o){var T=[],k=o.value;typeof o._lastValue!="number"&&(o._lastValue=o.value);var r=o._lastValue,m=r;return o._hasDelta&&typeof o.delta.reference=="number"&&(m=o.delta.reference),T[0]={y:k,lastY:r,delta:k-m,relativeDelta:(k-m)/m},T}}},84577:function(W){W.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(W,I,o){var T=o(71828),k=o(54846),r=o(27670).c,m=o(44467),h=o(85501),s=o(84577),e=o(26218),t=o(38701),n=o(96115),a=o(89426);function i(c,l){function u(f,d){return T.coerce(c,l,k.gauge.steps,f,d)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}W.exports={supplyDefaults:function(c,l,u,f){function d(E,S){return T.coerce(c,l,k,E,S)}r(l,f,d),d("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var w=d("value");l._range=[0,typeof w=="number"?1.5*w:1];var v,p,y,b,x,_,g=new Array(2);function A(E,S){return T.coerce(y,b,k.gauge,E,S)}function M(E,S){return T.coerce(x,_,k.gauge.axis,E,S)}if(l._hasNumber&&(d("number.valueformat"),d("number.font.color",f.font.color),d("number.font.family",f.font.family),d("number.font.size"),l.number.font.size===void 0&&(l.number.font.size=s.defaultNumberFontSize,g[0]=!0),d("number.prefix"),d("number.suffix"),v=l.number.font.size),l._hasDelta&&(d("delta.font.color",f.font.color),d("delta.font.family",f.font.family),d("delta.font.size"),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(v||s.defaultNumberFontSize),g[1]=!0),d("delta.reference",l.value),d("delta.relative"),d("delta.valueformat",l.delta.relative?"2%":""),d("delta.increasing.symbol"),d("delta.increasing.color"),d("delta.decreasing.symbol"),d("delta.decreasing.color"),d("delta.position"),d("delta.prefix"),d("delta.suffix"),p=l.delta.font.size),l._scaleNumbers=(!l._hasNumber||g[0])&&(!l._hasDelta||g[1])||!1,d("title.font.color",f.font.color),d("title.font.family",f.font.family),d("title.font.size",.25*(v||p||s.defaultNumberFontSize)),d("title.text"),l._hasGauge){(y=c.gauge)||(y={}),b=m.newContainer(l,"gauge"),A("shape"),(l._isBullet=l.gauge.shape==="bullet")||d("title.align","center"),(l._isAngular=l.gauge.shape==="angular")||d("align","center"),A("bgcolor",f.paper_bgcolor),A("borderwidth"),A("bordercolor"),A("bar.color"),A("bar.line.color"),A("bar.line.width"),A("bar.thickness",s.valueThickness*(l.gauge.shape==="bullet"?.5:1)),h(y,b,{name:"steps",handleItemDefaults:i}),A("threshold.value"),A("threshold.thickness"),A("threshold.line.width"),A("threshold.line.color"),x={},y&&(x=y.axis||{}),_=m.newContainer(b,"axis"),M("visible"),l._range=M("range",l._range);var L={outerTicks:!0};e(x,_,M,"linear"),a(x,_,M,"linear",L),n(x,_,M,"linear",L),t(x,_,M,L)}else d("title.align","center"),d("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},15154:function(W,I,o){W.exports={moduleType:"trace",name:"indicator",basePlotModule:o(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:o(54846),supplyDefaults:o(94425).supplyDefaults,calc:o(24667).calc,plot:o(75634),meta:{}}},75634:function(W,I,o){var T=o(39898),k=o(81684).sX,r=o(81684).k4,m=o(71828),h=m.strScale,s=m.strTranslate,e=m.rad2deg,t=o(18783).MID_SHIFT,n=o(91424),a=o(84577),i=o(63893),c=o(89298),l=o(71453),u=o(52830),f=o(13838),d=o(7901),w={left:"start",center:"middle",right:"end"},v={left:0,center:.5,right:1},p=/[yzafpnmkMGTPEZY]/;function y(M){return M&&M.duration>0}function b(M){M.each(function(L){d.stroke(T.select(this),L.line.color)}).each(function(L){d.fill(T.select(this),L.color)}).style("stroke-width",function(L){return L.line.width})}function x(M,L,E){var S=M._fullLayout,O=m.extendFlat({type:"linear",ticks:"outside",range:E,showline:!0},L),P={type:"linear",_id:"x"+L._id},U={letter:"x",font:S.font,noHover:!0,noTickson:!0};function R(j,B){return m.coerce(O,P,f,j,B)}return l(O,P,R,U,S),u(O,P,R,U),P}function _(M,L,E){return[Math.min(L/M.width,E/M.height),M,L+"x"+E]}function g(M,L,E,S){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),P=T.select(O);return P.text(M).attr("x",0).attr("y",0).attr("text-anchor",E).attr("data-unformatted",M).call(i.convertToTspans,S).call(n.font,L),n.bBox(P.node())}function A(M,L,E,S,O,P){var U="_cache"+L;M[U]&&M[U].key===O||(M[U]={key:O,value:E});var R=m.aggNums(P,null,[M[U].value,S],2);return M[U].value=R,R}W.exports=function(M,L,E,S){var O,P=M._fullLayout;y(E)&&S&&(O=S()),m.makeTraceGroups(P._indicatorlayer,L,"trace").each(function(U){var R,j,B,z,G,V=U[0].trace,et=T.select(this),J=V._hasGauge,X=V._isAngular,Y=V._isBullet,Z=V.domain,tt={w:P._size.w*(Z.x[1]-Z.x[0]),h:P._size.h*(Z.y[1]-Z.y[0]),l:P._size.l+P._size.w*Z.x[0],r:P._size.r+P._size.w*(1-Z.x[1]),t:P._size.t+P._size.h*(1-Z.y[1]),b:P._size.b+P._size.h*Z.y[0]},rt=tt.l+tt.w/2,nt=tt.t+tt.h/2,ot=Math.min(tt.w/2,tt.h),ct=a.innerRadius*ot,pt=V.align||"center";if(j=nt,J){if(X&&(R=rt,j=nt+ot/2,B=function(st){return function(at,ht){return[ht/Math.sqrt(at.width/2*(at.width/2)+at.height*at.height),at,ht]}(st,.9*ct)}),Y){var gt=a.bulletPadding,kt=1-a.bulletNumberDomainSize+gt;R=tt.l+(kt+(1-kt)*v[pt])*tt.w,B=function(st){return _(st,(a.bulletNumberDomainSize-gt)*tt.w,tt.h)}}}else R=tt.l+v[pt]*tt.w,B=function(st){return _(st,tt.w,tt.h)};(function(st,at,ht,Lt){var Mt,_t,St,Dt=ht[0].trace,ut=Lt.numbersX,Tt=Lt.numbersY,bt=Dt.align||"center",It=w[bt],zt=Lt.transitionOpts,Ft=Lt.onComplete,$t=m.ensureSingle(at,"g","numbers"),Wt=[];Dt._hasNumber&&Wt.push("number"),Dt._hasDelta&&(Wt.push("delta"),Dt.delta.position==="left"&&Wt.reverse());var Xt=$t.selectAll("text").data(Wt);function ae(Ae,Ie,Te,Vt){if(!Ae.match("s")||Te>=0==Vt>=0||Ie(Te).slice(-1).match(p)||Ie(Vt).slice(-1).match(p))return Ie;var Zt=Ae.slice().replace("s","f").replace(/\d+/,function(Yt){return parseInt(Yt)-1}),Gt=x(st,{tickformat:Zt});return function(Yt){return Math.abs(Yt)<1?c.tickText(Gt,Yt).text:Ie(Yt)}}Xt.enter().append("text"),Xt.attr("text-anchor",function(){return It}).attr("class",function(Ae){return Ae}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Xt.exit().remove();var Qt,de=Dt.mode+Dt.align;if(Dt._hasDelta&&(Qt=function(){var Ae=x(st,{tickformat:Dt.delta.valueformat},Dt._range);Ae.setScale(),c.prepTicks(Ae);var Ie=function(Pt){return c.tickText(Ae,Pt).text},Te=Dt.delta.suffix,Vt=Dt.delta.prefix,Zt=function(Pt){return Dt.delta.relative?Pt.relativeDelta:Pt.delta},Gt=function(Pt,Nt){return Pt===0||typeof Pt!="number"||isNaN(Pt)?"-":(Pt>0?Dt.delta.increasing.symbol:Dt.delta.decreasing.symbol)+Vt+Nt(Pt)+Te},Yt=function(Pt){return Pt.delta>=0?Dt.delta.increasing.color:Dt.delta.decreasing.color};Dt._deltaLastValue===void 0&&(Dt._deltaLastValue=Zt(ht[0]));var ne=$t.select("text.delta");function re(){ne.text(Gt(Zt(ht[0]),Ie)).call(d.fill,Yt(ht[0])).call(i.convertToTspans,st)}return ne.call(n.font,Dt.delta.font).call(d.fill,Yt({delta:Dt._deltaLastValue})),y(zt)?ne.transition().duration(zt.duration).ease(zt.easing).tween("text",function(){var Pt=T.select(this),Nt=Zt(ht[0]),ee=Dt._deltaLastValue,te=ae(Dt.delta.valueformat,Ie,ee,Nt),ge=r(ee,Nt);return Dt._deltaLastValue=Nt,function(pe){Pt.text(Gt(ge(pe),te)),Pt.call(d.fill,Yt({delta:ge(pe)}))}}).each("end",function(){re(),Ft&&Ft()}).each("interrupt",function(){re(),Ft&&Ft()}):re(),_t=g(Gt(Zt(ht[0]),Ie),Dt.delta.font,It,st),ne}(),de+=Dt.delta.position+Dt.delta.font.size+Dt.delta.font.family+Dt.delta.valueformat,de+=Dt.delta.increasing.symbol+Dt.delta.decreasing.symbol,St=_t),Dt._hasNumber&&(function(){var Ae=x(st,{tickformat:Dt.number.valueformat},Dt._range);Ae.setScale(),c.prepTicks(Ae);var Ie=function(Yt){return c.tickText(Ae,Yt).text},Te=Dt.number.suffix,Vt=Dt.number.prefix,Zt=$t.select("text.number");function Gt(){var Yt=typeof ht[0].y=="number"?Vt+Ie(ht[0].y)+Te:"-";Zt.text(Yt).call(n.font,Dt.number.font).call(i.convertToTspans,st)}y(zt)?Zt.transition().duration(zt.duration).ease(zt.easing).each("end",function(){Gt(),Ft&&Ft()}).each("interrupt",function(){Gt(),Ft&&Ft()}).attrTween("text",function(){var Yt=T.select(this),ne=r(ht[0].lastY,ht[0].y);Dt._lastValue=ht[0].y;var re=ae(Dt.number.valueformat,Ie,ht[0].lastY,ht[0].y);return function(Pt){Yt.text(Vt+re(ne(Pt))+Te)}}):Gt(),Mt=g(Vt+Ie(ht[0].y)+Te,Dt.number.font,It,st)}(),de+=Dt.number.font.size+Dt.number.font.family+Dt.number.valueformat+Dt.number.suffix+Dt.number.prefix,St=Mt),Dt._hasDelta&&Dt._hasNumber){var ye,ve,ie=[(Mt.left+Mt.right)/2,(Mt.top+Mt.bottom)/2],se=[(_t.left+_t.right)/2,(_t.top+_t.bottom)/2],ke=.75*Dt.delta.font.size;Dt.delta.position==="left"&&(ye=A(Dt,"deltaPos",0,-1*(Mt.width*v[Dt.align]+_t.width*(1-v[Dt.align])+ke),de,Math.min),ve=ie[1]-se[1],St={width:Mt.width+_t.width+ke,height:Math.max(Mt.height,_t.height),left:_t.left+ye,right:Mt.right,top:Math.min(Mt.top,_t.top+ve),bottom:Math.max(Mt.bottom,_t.bottom+ve)}),Dt.delta.position==="right"&&(ye=A(Dt,"deltaPos",0,Mt.width*(1-v[Dt.align])+_t.width*v[Dt.align]+ke,de,Math.max),ve=ie[1]-se[1],St={width:Mt.width+_t.width+ke,height:Math.max(Mt.height,_t.height),left:Mt.left,right:_t.right+ye,top:Math.min(Mt.top,_t.top+ve),bottom:Math.max(Mt.bottom,_t.bottom+ve)}),Dt.delta.position==="bottom"&&(ye=null,ve=_t.height,St={width:Math.max(Mt.width,_t.width),height:Mt.height+_t.height,left:Math.min(Mt.left,_t.left),right:Math.max(Mt.right,_t.right),top:Mt.bottom-Mt.height,bottom:Mt.bottom+_t.height}),Dt.delta.position==="top"&&(ye=null,ve=Mt.top,St={width:Math.max(Mt.width,_t.width),height:Mt.height+_t.height,left:Math.min(Mt.left,_t.left),right:Math.max(Mt.right,_t.right),top:Mt.bottom-Mt.height-_t.height,bottom:Mt.bottom}),Qt.attr({dx:ye,dy:ve})}(Dt._hasNumber||Dt._hasDelta)&&$t.attr("transform",function(){var Ae=Lt.numbersScaler(St);de+=Ae[2];var Ie,Te=A(Dt,"numbersScale",1,Ae[0],de,Math.min);Dt._scaleNumbers||(Te=1),Ie=Dt._isAngular?Tt-Te*St.bottom:Tt-Te*(St.top+St.bottom)/2,Dt._numbersTop=Te*St.top+Ie;var Vt=St[bt];bt==="center"&&(Vt=(St.left+St.right)/2);var Zt=ut-Te*Vt;return Zt=A(Dt,"numbersTranslate",0,Zt,de,Math.max),s(Zt,Ie)+h(Te)})})(M,et,U,{numbersX:R,numbersY:j,numbersScaler:B,transitionOpts:E,onComplete:O}),J&&(z={range:V.gauge.axis.range,color:V.gauge.bgcolor,line:{color:V.gauge.bordercolor,width:0},thickness:1},G={range:V.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:V.gauge.bordercolor,width:V.gauge.borderwidth},thickness:1});var yt=et.selectAll("g.angular").data(X?U:[]);yt.exit().remove();var mt=et.selectAll("g.angularaxis").data(X?U:[]);mt.exit().remove(),X&&function(st,at,ht,Lt){var Mt,_t,St,Dt,ut=ht[0].trace,Tt=Lt.size,bt=Lt.radius,It=Lt.innerRadius,zt=Lt.gaugeBg,Ft=Lt.gaugeOutline,$t=[Tt.l+Tt.w/2,Tt.t+Tt.h/2+bt/2],Wt=Lt.gauge,Xt=Lt.layer,ae=Lt.transitionOpts,Qt=Lt.onComplete,de=Math.PI/2;function ye(pe){var me=ut.gauge.axis.range[0],ce=(pe-me)/(ut.gauge.axis.range[1]-me)*Math.PI-de;return ce<-de?-de:ce>de?de:ce}function ve(pe){return T.svg.arc().innerRadius((It+bt)/2-pe/2*(bt-It)).outerRadius((It+bt)/2+pe/2*(bt-It)).startAngle(-de)}function ie(pe){pe.attr("d",function(me){return ve(me.thickness).startAngle(ye(me.range[0])).endAngle(ye(me.range[1]))()})}Wt.enter().append("g").classed("angular",!0),Wt.attr("transform",s($t[0],$t[1])),Xt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Xt.selectAll("g.xangularaxistick,path,text").remove(),(Mt=x(st,ut.gauge.axis)).type="linear",Mt.range=ut.gauge.axis.range,Mt._id="xangularaxis",Mt.ticklabeloverflow="allow",Mt.setScale();var se=function(pe){return(Mt.range[0]-pe.x)/(Mt.range[1]-Mt.range[0])*Math.PI+Math.PI},ke={},Ae=c.makeLabelFns(Mt,0).labelStandoff;ke.xFn=function(pe){var me=se(pe);return Math.cos(me)*Ae},ke.yFn=function(pe){var me=se(pe),ce=Math.sin(me)>0?.2:1;return-Math.sin(me)*(Ae+pe.fontSize*ce)+Math.abs(Math.cos(me))*(pe.fontSize*t)},ke.anchorFn=function(pe){var me=se(pe),ce=Math.cos(me);return Math.abs(ce)<.1?"middle":ce>0?"start":"end"},ke.heightFn=function(pe,me,ce){var we=se(pe);return-.5*(1+Math.sin(we))*ce};var Ie=function(pe){return s($t[0]+bt*Math.cos(pe),$t[1]-bt*Math.sin(pe))};if(St=function(pe){return Ie(se(pe))},_t=c.calcTicks(Mt),Dt=c.getTickSigns(Mt)[2],Mt.visible){Dt=Mt.ticks==="inside"?-1:1;var Te=(Mt.linewidth||1)/2;c.drawTicks(st,Mt,{vals:_t,layer:Xt,path:"M"+Dt*Te+",0h"+Dt*Mt.ticklen,transFn:function(pe){var me=se(pe);return Ie(me)+"rotate("+-e(me)+")"}}),c.drawLabels(st,Mt,{vals:_t,layer:Xt,transFn:St,labelFns:ke})}var Vt=[zt].concat(ut.gauge.steps),Zt=Wt.selectAll("g.bg-arc").data(Vt);Zt.enter().append("g").classed("bg-arc",!0).append("path"),Zt.select("path").call(ie).call(b),Zt.exit().remove();var Gt=ve(ut.gauge.bar.thickness),Yt=Wt.selectAll("g.value-arc").data([ut.gauge.bar]);Yt.enter().append("g").classed("value-arc",!0).append("path");var ne,re,Pt,Nt=Yt.select("path");y(ae)?(Nt.transition().duration(ae.duration).ease(ae.easing).each("end",function(){Qt&&Qt()}).each("interrupt",function(){Qt&&Qt()}).attrTween("d",(ne=Gt,re=ye(ht[0].lastY),Pt=ye(ht[0].y),function(){var pe=k(re,Pt);return function(me){return ne.endAngle(pe(me))()}})),ut._lastValue=ht[0].y):Nt.attr("d",typeof ht[0].y=="number"?Gt.endAngle(ye(ht[0].y)):"M0,0Z"),Nt.call(b),Yt.exit().remove(),Vt=[];var ee=ut.gauge.threshold.value;(ee||ee===0)&&Vt.push({range:[ee,ee],color:ut.gauge.threshold.color,line:{color:ut.gauge.threshold.line.color,width:ut.gauge.threshold.line.width},thickness:ut.gauge.threshold.thickness});var te=Wt.selectAll("g.threshold-arc").data(Vt);te.enter().append("g").classed("threshold-arc",!0).append("path"),te.select("path").call(ie).call(b),te.exit().remove();var ge=Wt.selectAll("g.gauge-outline").data([Ft]);ge.enter().append("g").classed("gauge-outline",!0).append("path"),ge.select("path").call(ie).call(b),ge.exit().remove()}(M,0,U,{radius:ot,innerRadius:ct,gauge:yt,layer:mt,size:tt,gaugeBg:z,gaugeOutline:G,transitionOpts:E,onComplete:O});var Ot=et.selectAll("g.bullet").data(Y?U:[]);Ot.exit().remove();var vt=et.selectAll("g.bulletaxis").data(Y?U:[]);vt.exit().remove(),Y&&function(st,at,ht,Lt){var Mt,_t,St,Dt,ut,Tt=ht[0].trace,bt=Lt.gauge,It=Lt.layer,zt=Lt.gaugeBg,Ft=Lt.gaugeOutline,$t=Lt.size,Wt=Tt.domain,Xt=Lt.transitionOpts,ae=Lt.onComplete;bt.enter().append("g").classed("bullet",!0),bt.attr("transform",s($t.l,$t.t)),It.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),It.selectAll("g.xbulletaxistick,path,text").remove();var Qt=$t.h,de=Tt.gauge.bar.thickness*Qt,ye=Wt.x[0],ve=Wt.x[0]+(Wt.x[1]-Wt.x[0])*(Tt._hasNumber||Tt._hasDelta?1-a.bulletNumberDomainSize:1);function ie(Zt){Zt.attr("width",function(Gt){return Math.max(0,Mt.c2p(Gt.range[1])-Mt.c2p(Gt.range[0]))}).attr("x",function(Gt){return Mt.c2p(Gt.range[0])}).attr("y",function(Gt){return .5*(1-Gt.thickness)*Qt}).attr("height",function(Gt){return Gt.thickness*Qt})}(Mt=x(st,Tt.gauge.axis))._id="xbulletaxis",Mt.domain=[ye,ve],Mt.setScale(),_t=c.calcTicks(Mt),St=c.makeTransTickFn(Mt),Dt=c.getTickSigns(Mt)[2],ut=$t.t+$t.h,Mt.visible&&(c.drawTicks(st,Mt,{vals:Mt.ticks==="inside"?c.clipEnds(Mt,_t):_t,layer:It,path:c.makeTickPath(Mt,ut,Dt),transFn:St}),c.drawLabels(st,Mt,{vals:_t,layer:It,transFn:St,labelFns:c.makeLabelFns(Mt,ut)}));var se=[zt].concat(Tt.gauge.steps),ke=bt.selectAll("g.bg-bullet").data(se);ke.enter().append("g").classed("bg-bullet",!0).append("rect"),ke.select("rect").call(ie).call(b),ke.exit().remove();var Ae=bt.selectAll("g.value-bullet").data([Tt.gauge.bar]);Ae.enter().append("g").classed("value-bullet",!0).append("rect"),Ae.select("rect").attr("height",de).attr("y",(Qt-de)/2).call(b),y(Xt)?Ae.select("rect").transition().duration(Xt.duration).ease(Xt.easing).each("end",function(){ae&&ae()}).each("interrupt",function(){ae&&ae()}).attr("width",Math.max(0,Mt.c2p(Math.min(Tt.gauge.axis.range[1],ht[0].y)))):Ae.select("rect").attr("width",typeof ht[0].y=="number"?Math.max(0,Mt.c2p(Math.min(Tt.gauge.axis.range[1],ht[0].y))):0),Ae.exit().remove();var Ie=ht.filter(function(){return Tt.gauge.threshold.value||Tt.gauge.threshold.value===0}),Te=bt.selectAll("g.threshold-bullet").data(Ie);Te.enter().append("g").classed("threshold-bullet",!0).append("line"),Te.select("line").attr("x1",Mt.c2p(Tt.gauge.threshold.value)).attr("x2",Mt.c2p(Tt.gauge.threshold.value)).attr("y1",(1-Tt.gauge.threshold.thickness)/2*Qt).attr("y2",(1-(1-Tt.gauge.threshold.thickness)/2)*Qt).call(d.stroke,Tt.gauge.threshold.line.color).style("stroke-width",Tt.gauge.threshold.line.width),Te.exit().remove();var Vt=bt.selectAll("g.gauge-outline").data([Ft]);Vt.enter().append("g").classed("gauge-outline",!0).append("rect"),Vt.select("rect").call(ie).call(b),Vt.exit().remove()}(M,0,U,{gauge:Ot,layer:vt,size:tt,gaugeBg:z,gaugeOutline:G,transitionOpts:E,onComplete:O});var xt=et.selectAll("text.title").data(U);xt.exit().remove(),xt.enter().append("text").classed("title",!0),xt.attr("text-anchor",function(){return Y?w.right:w[V.title.align]}).text(V.title.text).call(n.font,V.title.font).call(i.convertToTspans,M),xt.attr("transform",function(){var st,at=tt.l+tt.w*v[V.title.align],ht=a.titlePadding,Lt=n.bBox(xt.node());return J?(X&&(st=V.gauge.axis.visible?n.bBox(mt.node()).top-ht-Lt.bottom:tt.t+tt.h/2-ot/2-Lt.bottom-ht),Y&&(st=j-(Lt.top+Lt.bottom)/2,at=tt.l-a.bulletPadding*tt.w)):st=V._numbersTop-ht-Lt.bottom,s(at,st)})})}},16249:function(W,I,o){var T=o(50693),k=o(12663).axisHoverFormat,r=o(5386).fF,m=o(2418),h=o(9012),s=o(1426).extendFlat,e=o(30962).overrideAll,t=W.exports=e(s({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:r(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:s({},h.showlegend,{dflt:!1})},T("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:m.opacity,lightposition:m.lightposition,lighting:m.lighting,flatshading:m.flatshading,contour:m.contour,hoverinfo:s({},h.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},56959:function(W,I,o){var T=o(78803),k=o(88489).processGrid,r=o(88489).filter;W.exports=function(m,h){h._len=Math.min(h.x.length,h.y.length,h.z.length,h.value.length),h._x=r(h.x,h._len),h._y=r(h.y,h._len),h._z=r(h.z,h._len),h._value=r(h.value,h._len);var s=k(h);h._gridFill=s.fill,h._Xs=s.Xs,h._Ys=s.Ys,h._Zs=s.Zs,h._len=s.len;for(var e=1/0,t=-1/0,n=0;n<h._len;n++){var a=h._value[n];e=Math.min(e,a),t=Math.max(t,a)}h._minValues=e,h._maxValues=t,h._vMin=h.isomin===void 0||h.isomin===null?e:h.isomin,h._vMax=h.isomax===void 0||h.isomin===null?t:h.isomax,T(m,h,{vals:[h._vMin,h._vMax],containerStr:"",cLetter:"c"})}},22674:function(W,I,o){var T=o(9330).gl_mesh3d,k=o(81697).parseColorScale,r=o(78614),m=o(21081).extractOpts,h=o(90060),s=function(i,c){for(var l=c.length-1;l>0;l--){var u=Math.min(c[l],c[l-1]),f=Math.max(c[l],c[l-1]);if(f>u&&u<i&&i<=f)return{id:l,distRatio:(f-i)/(f-u)}}return{id:0,distRatio:0}};function e(i,c,l){this.scene=i,this.uid=l,this.mesh=c,this.name="",this.data=null,this.showContour=!1}var t=e.prototype;t.handlePick=function(i){if(i.object===this.mesh){var c=i.data.index,l=this.data._meshX[c],u=this.data._meshY[c],f=this.data._meshZ[c],d=this.data._Ys.length,w=this.data._Zs.length,v=s(l,this.data._Xs).id,p=s(u,this.data._Ys).id,y=s(f,this.data._Zs).id,b=i.index=y+w*p+w*d*v;i.traceCoordinate=[this.data._meshX[b],this.data._meshY[b],this.data._meshZ[b],this.data._value[b]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[b]!==void 0?i.textLabel=x[b]:x&&(i.textLabel=x),!0}},t.update=function(i){var c=this.scene,l=c.fullSceneLayout;function u(w,v,p,y){return v.map(function(b){return w.d2l(b,0,y)*p})}this.data=a(i);var f={positions:h(u(l.xaxis,i._meshX,c.dataScale[0],i.xcalendar),u(l.yaxis,i._meshY,c.dataScale[1],i.ycalendar),u(l.zaxis,i._meshZ,c.dataScale[2],i.zcalendar)),cells:h(i._meshI,i._meshJ,i._meshK),lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,contourEnable:i.contour.show,contourColor:r(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},d=m(i);f.vertexIntensity=i._meshIntensity,f.vertexIntensityBounds=[d.min,d.max],f.colormap=k(i),this.mesh.update(f)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function a(i){i._meshI=[],i._meshJ=[],i._meshK=[];var c,l,u,f,d,w,v,p=i.surface.show,y=i.spaceframe.show,b=i.surface.fill,x=i.spaceframe.fill,_=!1,g=!1,A=0,M=i._Xs,L=i._Ys,E=i._Zs,S=M.length,O=L.length,P=E.length,U=n.indexOf(i._gridFill.replace(/-/g,"").replace(/\+/g,"")),R=function(bt,It,zt){switch(U){case 5:return zt+P*It+P*O*bt;case 4:return zt+P*bt+P*S*It;case 3:return It+O*zt+O*P*bt;case 2:return It+O*bt+O*S*zt;case 1:return bt+S*zt+S*P*It;default:return bt+S*It+S*O*zt}},j=i._minValues,B=i._maxValues,z=i._vMin,G=i._vMax;function V(bt,It,zt){for(var Ft=w.length,$t=l;$t<Ft;$t++)if(bt===u[$t]&&It===f[$t]&&zt===d[$t])return $t;return-1}function et(){l=c}function J(){u=[],f=[],d=[],w=[],c=0,et()}function X(bt,It,zt,Ft){return u.push(bt),f.push(It),d.push(zt),w.push(Ft),++c-1}function Y(bt,It,zt){for(var Ft=[],$t=0;$t<bt.length;$t++)Ft[$t]=bt[$t]*(1-zt)+zt*It[$t];return Ft}function Z(bt){v=bt}function tt(bt,It){return bt==="all"||bt===null||bt.indexOf(It)>-1}function rt(bt,It){return bt===null?It:bt}function nt(bt,It,zt){et();var Ft,$t,Wt,Xt=[It],ae=[zt];if(v>=1)Xt=[It],ae=[zt];else if(v>0){var Qt=function(Te,Vt){var Zt=Te[0],Gt=Te[1],Yt=Te[2],ne=function(me,ce,we){for(var ue=[],he=0;he<me.length;he++)ue[he]=(me[he]+ce[he]+we[he])/3;return ue}(Zt,Gt,Yt),re=Math.sqrt(1-v),Pt=Y(ne,Zt,re),Nt=Y(ne,Gt,re),ee=Y(ne,Yt,re),te=Vt[0],ge=Vt[1],pe=Vt[2];return{xyzv:[[Zt,Gt,Nt],[Nt,Pt,Zt],[Gt,Yt,ee],[ee,Nt,Gt],[Yt,Zt,Pt],[Pt,ee,Yt]],abc:[[te,ge,-1],[-1,-1,te],[ge,pe,-1],[-1,-1,ge],[pe,te,-1],[-1,-1,pe]]}}(It,zt);Xt=Qt.xyzv,ae=Qt.abc}for(var de=0;de<Xt.length;de++){It=Xt[de],zt=ae[de];for(var ye=[],ve=0;ve<3;ve++){var ie=It[ve][0],se=It[ve][1],ke=It[ve][2],Ae=It[ve][3],Ie=zt[ve]>-1?zt[ve]:V(ie,se,ke);ye[ve]=Ie>-1?Ie:X(ie,se,ke,rt(bt,Ae))}Ft=ye[0],$t=ye[1],Wt=ye[2],i._meshI.push(Ft),i._meshJ.push($t),i._meshK.push(Wt),++A}}function ot(bt,It,zt,Ft){var $t=bt[3];$t<zt&&($t=zt),$t>Ft&&($t=Ft);for(var Wt=(bt[3]-$t)/(bt[3]-It[3]+1e-9),Xt=[],ae=0;ae<4;ae++)Xt[ae]=(1-Wt)*bt[ae]+Wt*It[ae];return Xt}function ct(bt,It,zt){return bt>=It&&bt<=zt}function pt(bt){var It=.001*(G-z);return bt>=z-It&&bt<=G+It}function gt(bt){for(var It=[],zt=0;zt<4;zt++){var Ft=bt[zt];It.push([i._x[Ft],i._y[Ft],i._z[Ft],i._value[Ft]])}return It}var kt=3;function yt(bt,It,zt,Ft,$t,Wt){Wt||(Wt=1),zt=[-1,-1,-1];var Xt=!1,ae=[ct(It[0][3],Ft,$t),ct(It[1][3],Ft,$t),ct(It[2][3],Ft,$t)];if(!ae[0]&&!ae[1]&&!ae[2])return!1;var Qt=function(ye,ve,ie){return pt(ve[0][3])&&pt(ve[1][3])&&pt(ve[2][3])?(nt(ye,ve,ie),!0):Wt<kt&&yt(ye,ve,ie,z,G,++Wt)};if(ae[0]&&ae[1]&&ae[2])return Qt(bt,It,zt)||Xt;var de=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(ye){if(ae[ye[0]]&&ae[ye[1]]&&!ae[ye[2]]){var ve=It[ye[0]],ie=It[ye[1]],se=It[ye[2]],ke=ot(se,ve,Ft,$t),Ae=ot(se,ie,Ft,$t);Xt=Qt(bt,[Ae,ke,ve],[-1,-1,zt[ye[0]]])||Xt,Xt=Qt(bt,[ve,ie,Ae],[zt[ye[0]],zt[ye[1]],-1])||Xt,de=!0}}),de||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(ye){if(ae[ye[0]]&&!ae[ye[1]]&&!ae[ye[2]]){var ve=It[ye[0]],ie=It[ye[1]],se=It[ye[2]],ke=ot(ie,ve,Ft,$t),Ae=ot(se,ve,Ft,$t);Xt=Qt(bt,[Ae,ke,ve],[-1,-1,zt[ye[0]]])||Xt,de=!0}}),Xt}function mt(bt,It,zt,Ft){var $t=!1,Wt=gt(It),Xt=[ct(Wt[0][3],zt,Ft),ct(Wt[1][3],zt,Ft),ct(Wt[2][3],zt,Ft),ct(Wt[3][3],zt,Ft)];if(!(Xt[0]||Xt[1]||Xt[2]||Xt[3]))return $t;if(Xt[0]&&Xt[1]&&Xt[2]&&Xt[3])return g&&($t=function(Qt,de,ye){var ve=function(ie,se,ke){nt(Qt,[de[ie],de[se],de[ke]],[ye[ie],ye[se],ye[ke]])};ve(0,1,2),ve(3,0,1),ve(2,3,0),ve(1,2,3)}(bt,Wt,It)||$t),$t;var ae=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Qt){if(Xt[Qt[0]]&&Xt[Qt[1]]&&Xt[Qt[2]]&&!Xt[Qt[3]]){var de=Wt[Qt[0]],ye=Wt[Qt[1]],ve=Wt[Qt[2]],ie=Wt[Qt[3]];if(g)$t=nt(bt,[de,ye,ve],[It[Qt[0]],It[Qt[1]],It[Qt[2]]])||$t;else{var se=ot(ie,de,zt,Ft),ke=ot(ie,ye,zt,Ft),Ae=ot(ie,ve,zt,Ft);$t=nt(null,[se,ke,Ae],[-1,-1,-1])||$t}ae=!0}}),ae||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Qt){if(Xt[Qt[0]]&&Xt[Qt[1]]&&!Xt[Qt[2]]&&!Xt[Qt[3]]){var de=Wt[Qt[0]],ye=Wt[Qt[1]],ve=Wt[Qt[2]],ie=Wt[Qt[3]],se=ot(ve,de,zt,Ft),ke=ot(ve,ye,zt,Ft),Ae=ot(ie,ye,zt,Ft),Ie=ot(ie,de,zt,Ft);g?($t=nt(bt,[de,Ie,se],[It[Qt[0]],-1,-1])||$t,$t=nt(bt,[ye,ke,Ae],[It[Qt[1]],-1,-1])||$t):$t=function(Te,Vt,Zt){var Gt=function(Yt,ne,re){nt(null,[Vt[Yt],Vt[ne],Vt[re]],[Zt[Yt],Zt[ne],Zt[re]])};Gt(0,1,2),Gt(2,3,0)}(0,[se,ke,Ae,Ie],[-1,-1,-1,-1])||$t,ae=!0}}),ae||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Qt){if(Xt[Qt[0]]&&!Xt[Qt[1]]&&!Xt[Qt[2]]&&!Xt[Qt[3]]){var de=Wt[Qt[0]],ye=Wt[Qt[1]],ve=Wt[Qt[2]],ie=Wt[Qt[3]],se=ot(ye,de,zt,Ft),ke=ot(ve,de,zt,Ft),Ae=ot(ie,de,zt,Ft);g?($t=nt(bt,[de,se,ke],[It[Qt[0]],-1,-1])||$t,$t=nt(bt,[de,ke,Ae],[It[Qt[0]],-1,-1])||$t,$t=nt(bt,[de,Ae,se],[It[Qt[0]],-1,-1])||$t):$t=nt(null,[se,ke,Ae],[-1,-1,-1])||$t,ae=!0}})),$t}function Ot(bt,It,zt,Ft,$t,Wt,Xt,ae,Qt,de,ye){var ve=!1;return _&&(tt(bt,"A")&&(ve=mt(null,[It,zt,Ft,Wt],de,ye)||ve),tt(bt,"B")&&(ve=mt(null,[zt,Ft,$t,Qt],de,ye)||ve),tt(bt,"C")&&(ve=mt(null,[zt,Wt,Xt,Qt],de,ye)||ve),tt(bt,"D")&&(ve=mt(null,[Ft,Wt,ae,Qt],de,ye)||ve),tt(bt,"E")&&(ve=mt(null,[zt,Ft,Wt,Qt],de,ye)||ve)),g&&(ve=mt(bt,[zt,Ft,Wt,Qt],de,ye)||ve),ve}function vt(bt,It,zt,Ft,$t,Wt,Xt,ae){return[ae[0]===!0||yt(bt,gt([It,zt,Ft]),[It,zt,Ft],Wt,Xt),ae[1]===!0||yt(bt,gt([Ft,$t,It]),[Ft,$t,It],Wt,Xt)]}function xt(bt,It,zt,Ft,$t,Wt,Xt,ae,Qt){return ae?vt(bt,It,zt,$t,Ft,Wt,Xt,Qt):vt(bt,zt,$t,Ft,It,Wt,Xt,Qt)}function st(bt,It,zt,Ft,$t,Wt,Xt){var ae,Qt,de,ye,ve=!1,ie=function(){ve=yt(bt,[ae,Qt,de],[-1,-1,-1],$t,Wt)||ve,ve=yt(bt,[de,ye,ae],[-1,-1,-1],$t,Wt)||ve},se=Xt[0],ke=Xt[1],Ae=Xt[2];return se&&(ae=Y(gt([R(It,zt-0,Ft-0)])[0],gt([R(It-1,zt-0,Ft-0)])[0],se),Qt=Y(gt([R(It,zt-0,Ft-1)])[0],gt([R(It-1,zt-0,Ft-1)])[0],se),de=Y(gt([R(It,zt-1,Ft-1)])[0],gt([R(It-1,zt-1,Ft-1)])[0],se),ye=Y(gt([R(It,zt-1,Ft-0)])[0],gt([R(It-1,zt-1,Ft-0)])[0],se),ie()),ke&&(ae=Y(gt([R(It-0,zt,Ft-0)])[0],gt([R(It-0,zt-1,Ft-0)])[0],ke),Qt=Y(gt([R(It-0,zt,Ft-1)])[0],gt([R(It-0,zt-1,Ft-1)])[0],ke),de=Y(gt([R(It-1,zt,Ft-1)])[0],gt([R(It-1,zt-1,Ft-1)])[0],ke),ye=Y(gt([R(It-1,zt,Ft-0)])[0],gt([R(It-1,zt-1,Ft-0)])[0],ke),ie()),Ae&&(ae=Y(gt([R(It-0,zt-0,Ft)])[0],gt([R(It-0,zt-0,Ft-1)])[0],Ae),Qt=Y(gt([R(It-0,zt-1,Ft)])[0],gt([R(It-0,zt-1,Ft-1)])[0],Ae),de=Y(gt([R(It-1,zt-1,Ft)])[0],gt([R(It-1,zt-1,Ft-1)])[0],Ae),ye=Y(gt([R(It-1,zt-0,Ft)])[0],gt([R(It-1,zt-0,Ft-1)])[0],Ae),ie()),ve}function at(bt,It,zt,Ft,$t,Wt,Xt,ae,Qt,de,ye,ve){var ie=bt;return ve?(_&&bt==="even"&&(ie=null),Ot(ie,It,zt,Ft,$t,Wt,Xt,ae,Qt,de,ye)):(_&&bt==="odd"&&(ie=null),Ot(ie,Qt,ae,Xt,Wt,$t,Ft,zt,It,de,ye))}function ht(bt,It,zt,Ft,$t){for(var Wt=[],Xt=0,ae=0;ae<It.length;ae++)for(var Qt=It[ae],de=1;de<P;de++)for(var ye=1;ye<O;ye++)Wt.push(xt(bt,R(Qt,ye-1,de-1),R(Qt,ye-1,de),R(Qt,ye,de-1),R(Qt,ye,de),zt,Ft,(Qt+ye+de)%2,$t&&$t[Xt]?$t[Xt]:[])),Xt++;return Wt}function Lt(bt,It,zt,Ft,$t){for(var Wt=[],Xt=0,ae=0;ae<It.length;ae++)for(var Qt=It[ae],de=1;de<S;de++)for(var ye=1;ye<P;ye++)Wt.push(xt(bt,R(de-1,Qt,ye-1),R(de,Qt,ye-1),R(de-1,Qt,ye),R(de,Qt,ye),zt,Ft,(de+Qt+ye)%2,$t&&$t[Xt]?$t[Xt]:[])),Xt++;return Wt}function Mt(bt,It,zt,Ft,$t){for(var Wt=[],Xt=0,ae=0;ae<It.length;ae++)for(var Qt=It[ae],de=1;de<O;de++)for(var ye=1;ye<S;ye++)Wt.push(xt(bt,R(ye-1,de-1,Qt),R(ye-1,de,Qt),R(ye,de-1,Qt),R(ye,de,Qt),zt,Ft,(ye+de+Qt)%2,$t&&$t[Xt]?$t[Xt]:[])),Xt++;return Wt}function _t(bt,It,zt){for(var Ft=1;Ft<P;Ft++)for(var $t=1;$t<O;$t++)for(var Wt=1;Wt<S;Wt++)at(bt,R(Wt-1,$t-1,Ft-1),R(Wt-1,$t-1,Ft),R(Wt-1,$t,Ft-1),R(Wt-1,$t,Ft),R(Wt,$t-1,Ft-1),R(Wt,$t-1,Ft),R(Wt,$t,Ft-1),R(Wt,$t,Ft),It,zt,(Wt+$t+Ft)%2)}function St(bt,It,zt,Ft,$t,Wt){for(var Xt=[],ae=0,Qt=0;Qt<It.length;Qt++)for(var de=It[Qt],ye=1;ye<P;ye++)for(var ve=1;ve<O;ve++)Xt.push(st(bt,de,ve,ye,zt,Ft,$t[Qt],Wt&&Wt[ae]&&Wt[ae])),ae++;return Xt}function Dt(bt,It,zt,Ft,$t,Wt){for(var Xt=[],ae=0,Qt=0;Qt<It.length;Qt++)for(var de=It[Qt],ye=1;ye<S;ye++)for(var ve=1;ve<P;ve++)Xt.push(st(bt,ye,de,ve,zt,Ft,$t[Qt],Wt&&Wt[ae]&&Wt[ae])),ae++;return Xt}function ut(bt,It,zt,Ft,$t,Wt){for(var Xt=[],ae=0,Qt=0;Qt<It.length;Qt++)for(var de=It[Qt],ye=1;ye<O;ye++)for(var ve=1;ve<S;ve++)Xt.push(st(bt,ve,ye,de,zt,Ft,$t[Qt],Wt&&Wt[ae]&&Wt[ae])),ae++;return Xt}function Tt(bt,It){for(var zt=[],Ft=bt;Ft<It;Ft++)zt.push(Ft);return zt}return function(){J(),function(){for(var Qt=0;Qt<S;Qt++)for(var de=0;de<O;de++)for(var ye=0;ye<P;ye++){var ve=R(Qt,de,ye);X(i._x[ve],i._y[ve],i._z[ve],i._value[ve])}}();var bt=null;if(y&&x&&(Z(x),g=!0,_t(bt,z,G),g=!1),p&&b){Z(b);for(var It=i.surface.pattern,zt=i.surface.count,Ft=0;Ft<zt;Ft++){var $t=zt===1?.5:Ft/(zt-1),Wt=(1-$t)*z+$t*G,Xt=Math.abs(Wt-j)>Math.abs(Wt-B)?[j,Wt]:[Wt,B];_=!0,_t(It,Xt[0],Xt[1]),_=!1}}var ae=[[Math.min(z,B),Math.max(z,B)],[Math.min(j,G),Math.max(j,G)]];["x","y","z"].forEach(function(Qt){for(var de=[],ye=0;ye<ae.length;ye++){var ve=0,ie=ae[ye][0],se=ae[ye][1],ke=i.slices[Qt];if(ke.show&&ke.fill){Z(ke.fill);var Ae=[],Ie=[],Te=[];if(ke.locations.length)for(var Vt=0;Vt<ke.locations.length;Vt++){var Zt=s(ke.locations[Vt],Qt==="x"?M:Qt==="y"?L:E);Zt.distRatio===0?Ae.push(Zt.id):Zt.id>0&&(Ie.push(Zt.id),Qt==="x"?Te.push([Zt.distRatio,0,0]):Qt==="y"?Te.push([0,Zt.distRatio,0]):Te.push([0,0,Zt.distRatio]))}else Ae=Tt(1,Qt==="x"?S-1:Qt==="y"?O-1:P-1);Ie.length>0&&(de[ve]=Qt==="x"?St(bt,Ie,ie,se,Te,de[ve]):Qt==="y"?Dt(bt,Ie,ie,se,Te,de[ve]):ut(bt,Ie,ie,se,Te,de[ve]),ve++),Ae.length>0&&(de[ve]=Qt==="x"?ht(bt,Ae,ie,se,de[ve]):Qt==="y"?Lt(bt,Ae,ie,se,de[ve]):Mt(bt,Ae,ie,se,de[ve]),ve++)}var Gt=i.caps[Qt];Gt.show&&Gt.fill&&(Z(Gt.fill),de[ve]=Qt==="x"?ht(bt,[0,S-1],ie,se,de[ve]):Qt==="y"?Lt(bt,[0,O-1],ie,se,de[ve]):Mt(bt,[0,P-1],ie,se,de[ve]),ve++)}}),A===0&&J(),i._meshX=u,i._meshY=f,i._meshZ=d,i._meshIntensity=w,i._Xs=M,i._Ys=L,i._Zs=E}(),i}W.exports={findNearestOnAxis:s,generateIsoMeshes:a,createIsosurfaceTrace:function(i,c){var l=i.glplot.gl,u=T({gl:l}),f=new e(i,u,c.uid);return u._trace=f,f.update(c),i.glplot.add(u),f}}},82738:function(W,I,o){var T=o(71828),k=o(73972),r=o(16249),m=o(1586);function h(s,e,t,n,a){var i=a("isomin"),c=a("isomax");c!=null&&i!=null&&i>c&&(e.isomin=null,e.isomax=null);var l=a("x"),u=a("y"),f=a("z"),d=a("value");l&&l.length&&u&&u.length&&f&&f.length&&d&&d.length?(k.getComponentMethod("calendars","handleTraceDefaults")(s,e,["x","y","z"],n),a("valuehoverformat"),["x","y","z"].forEach(function(w){a(w+"hoverformat");var v="caps."+w;a(v+".show")&&a(v+".fill");var p="slices."+w;a(p+".show")&&(a(p+".fill"),a(p+".locations"))}),a("spaceframe.show")&&a("spaceframe.fill"),a("surface.show")&&(a("surface.count"),a("surface.fill"),a("surface.pattern")),a("contour.show")&&(a("contour.color"),a("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(w){a(w)}),m(s,e,n,a,{prefix:"",cLetter:"c"}),e._length=null):e.visible=!1}W.exports={supplyDefaults:function(s,e,t,n){h(s,e,0,n,function(a,i){return T.coerce(s,e,r,a,i)})},supplyIsoDefaults:h}},64943:function(W,I,o){W.exports={attributes:o(16249),supplyDefaults:o(82738).supplyDefaults,calc:o(56959),colorbar:{min:"cmin",max:"cmax"},plot:o(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:o(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(W,I,o){var T=o(50693),k=o(12663).axisHoverFormat,r=o(5386).fF,m=o(54532),h=o(9012),s=o(1426).extendFlat;W.exports=s({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:r({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},T("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:m.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:s({},m.contours.x.show,{}),color:m.contours.x.color,width:m.contours.x.width,editType:"calc"},lightposition:{x:s({},m.lightposition.x,{dflt:1e5}),y:s({},m.lightposition.y,{dflt:1e5}),z:s({},m.lightposition.z,{dflt:0}),editType:"calc"},lighting:s({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},m.lighting),hoverinfo:s({},h.hoverinfo,{editType:"calc"}),showlegend:s({},h.showlegend,{dflt:!1})})},82932:function(W,I,o){var T=o(78803);W.exports=function(k,r){r.intensity&&T(k,r,{vals:r.intensity,containerStr:"",cLetter:"c"})}},91134:function(W,I,o){var T=o(9330).gl_mesh3d,k=o(9330).delaunay_triangulate,r=o(9330).alpha_shape,m=o(9330).convex_hull,h=o(81697).parseColorScale,s=o(78614),e=o(21081).extractOpts,t=o(90060);function n(f,d,w){this.scene=f,this.uid=w,this.mesh=d,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var a=n.prototype;function i(f){for(var d=[],w=f.length,v=0;v<w;v++)d[v]=s(f[v]);return d}function c(f,d,w,v){for(var p=[],y=d.length,b=0;b<y;b++)p[b]=f.d2l(d[b],0,v)*w;return p}function l(f){for(var d=[],w=f.length,v=0;v<w;v++)d[v]=Math.round(f[v]);return d}function u(f,d){for(var w=f.length,v=0;v<w;v++)if(f[v]<=-.5||f[v]>=d-.5)return!1;return!0}a.handlePick=function(f){if(f.object===this.mesh){var d=f.index=f.data.index;f.data._cellCenter?f.traceCoordinate=f.data.dataCoordinate:f.traceCoordinate=[this.data.x[d],this.data.y[d],this.data.z[d]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[d]!==void 0?f.textLabel=w[d]:w&&(f.textLabel=w),!0}},a.update=function(f){var d=this.scene,w=d.fullSceneLayout;this.data=f;var v,p=f.x.length,y=t(c(w.xaxis,f.x,d.dataScale[0],f.xcalendar),c(w.yaxis,f.y,d.dataScale[1],f.ycalendar),c(w.zaxis,f.z,d.dataScale[2],f.zcalendar));if(f.i&&f.j&&f.k){if(f.i.length!==f.j.length||f.j.length!==f.k.length||!u(f.i,p)||!u(f.j,p)||!u(f.k,p))return;v=t(l(f.i),l(f.j),l(f.k))}else v=f.alphahull===0?m(y):f.alphahull>0?r(f.alphahull,y):function(g,A){for(var M=["x","y","z"].indexOf(g),L=[],E=A.length,S=0;S<E;S++)L[S]=[A[S][(M+1)%3],A[S][(M+2)%3]];return k(L)}(f.delaunayaxis,y);var b={positions:y,cells:v,lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,contourEnable:f.contour.show,contourColor:s(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading};if(f.intensity){var x=e(f);this.color="#fff";var _=f.intensitymode;b[_+"Intensity"]=f.intensity,b[_+"IntensityBounds"]=[x.min,x.max],b.colormap=h(f)}else f.vertexcolor?(this.color=f.vertexcolor[0],b.vertexColors=i(f.vertexcolor)):f.facecolor?(this.color=f.facecolor[0],b.cellColors=i(f.facecolor)):(this.color=f.color,b.meshColor=s(f.color));this.mesh.update(b)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},W.exports=function(f,d){var w=f.glplot.gl,v=T({gl:w}),p=new n(f,v,d.uid);return v._trace=p,p.update(d),f.glplot.add(v),p}},58669:function(W,I,o){var T=o(73972),k=o(71828),r=o(1586),m=o(2418);W.exports=function(h,s,e,t){function n(i,c){return k.coerce(h,s,m,i,c)}function a(i){var c=i.map(function(l){var u=n(l);return u&&k.isArrayOrTypedArray(u)?u:null});return c.every(function(l){return l&&l.length===c[0].length})&&c}a(["x","y","z"])?(a(["i","j","k"]),(!s.i||s.j&&s.k)&&(!s.j||s.k&&s.i)&&(!s.k||s.i&&s.j)?(T.getComponentMethod("calendars","handleTraceDefaults")(h,s,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(i){n(i)}),n("contour.show")&&(n("contour.color"),n("contour.width")),"intensity"in h?(n("intensity"),n("intensitymode"),r(h,s,t,n,{prefix:"",cLetter:"c"})):(s.showscale=!1,"facecolor"in h?n("facecolor"):"vertexcolor"in h?n("vertexcolor"):n("color",e)),n("text"),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),s._length=null):s.visible=!1):s.visible=!1}},21164:function(W,I,o){W.exports={attributes:o(2418),supplyDefaults:o(58669),calc:o(82932),colorbar:{min:"cmin",max:"cmax"},plot:o(91134),moduleType:"trace",name:"mesh3d",basePlotModule:o(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(W,I,o){var T=o(71828).extendFlat,k=o(82196),r=o(12663).axisHoverFormat,m=o(79952).P,h=o(77914),s=o(22372),e=s.INCREASING.COLOR,t=s.DECREASING.COLOR,n=k.line;function a(i){return{line:{color:T({},n.color,{dflt:i}),width:n.width,dash:m,editType:"style"},editType:"style"}}W.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:r("x"),yhoverformat:r("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:T({},n.width,{}),dash:T({},m,{}),editType:"style"},increasing:a(e),decreasing:a(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:T({},h.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(W,I,o){var T=o(71828),k=T._,r=o(89298),m=o(42973),h=o(50606).BADNUM;function s(t,n,a,i){return{o:t,h:n,l:a,c:i}}function e(t,n,a,i,c,l){for(var u=c.makeCalcdata(n,"open"),f=c.makeCalcdata(n,"high"),d=c.makeCalcdata(n,"low"),w=c.makeCalcdata(n,"close"),v=Array.isArray(n.text),p=Array.isArray(n.hovertext),y=!0,b=null,x=!!n.xperiodalignment,_=[],g=0;g<i.length;g++){var A=i[g],M=u[g],L=f[g],E=d[g],S=w[g];if(A!==h&&M!==h&&L!==h&&E!==h&&S!==h){S===M?b!==null&&S!==b&&(y=S>b):y=S>M,b=S;var O=l(M,L,E,S);O.pos=A,O.yc=(M+S)/2,O.i=g,O.dir=y?"increasing":"decreasing",O.x=O.pos,O.y=[E,L],x&&(O.orig_p=a[g]),v&&(O.tx=n.text[g]),p&&(O.htx=n.hovertext[g]),_.push(O)}else _.push({pos:A,empty:!0})}return n._extremes[c._id]=r.findExtremes(c,T.concat(d,f),{padded:!0}),_.length&&(_[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),_}W.exports={calc:function(t,n){var a=r.getFromId(t,n.xaxis),i=r.getFromId(t,n.yaxis),c=function(w,v,p){var y=p._minDiff;if(!y){var b,x=w._fullData,_=[];for(y=1/0,b=0;b<x.length;b++){var g=x[b];if(g.type==="ohlc"&&g.visible===!0&&g.xaxis===v._id){_.push(g);var A=v.makeCalcdata(g,"x");g._origX=A;var M=m(p,v,"x",A).vals;g._xcalc=M;var L=T.distinctVals(M).minDiff;L&&isFinite(L)&&(y=Math.min(y,L))}}for(y===1/0&&(y=1),b=0;b<_.length;b++)_[b]._minDiff=y}return y*p.tickwidth}(t,a,n),l=n._minDiff;n._minDiff=null;var u=n._origX;n._origX=null;var f=n._xcalc;n._xcalc=null;var d=e(t,n,u,f,i,s);return n._extremes[a._id]=r.findExtremes(a,f,{vpad:l/2}),d.length?(T.extendFlat(d[0].t,{wHover:l/2,tickLen:c}),d):[{t:{empty:!0}}]},calcCommon:e}},16169:function(W,I,o){var T=o(71828),k=o(14555),r=o(73927),m=o(2522);function h(s,e,t,n){t(n+".line.color"),t(n+".line.width",e.line.width),t(n+".line.dash",e.line.dash)}W.exports=function(s,e,t,n){function a(i,c){return T.coerce(s,e,m,i,c)}k(s,e,a,n)?(r(s,e,n,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),a("line.dash"),h(0,e,a,"increasing"),h(0,e,a,"decreasing"),a("text"),a("hovertext"),a("tickwidth"),n._requestRangeslider[e.xaxis]=!0):e.visible=!1}},66449:function(W,I,o){var T=o(89298),k=o(71828),r=o(30211),m=o(7901),h=o(71828).fillText,s=o(22372),e={increasing:s.INCREASING.SYMBOL,decreasing:s.DECREASING.SYMBOL};function t(i,c,l,u){var f,d,w=i.cd,v=i.xa,p=w[0].trace,y=w[0].t,b=p.type,x=b==="ohlc"?"l":"min",_=b==="ohlc"?"h":"max",g=y.bPos||0,A=function(z){return z.pos+g-c},M=y.bdPos||y.tickLen,L=y.wHover,E=Math.min(1,M/Math.abs(v.r2c(v.range[1])-v.r2c(v.range[0])));function S(z){var G=A(z);return r.inbox(G-L,G+L,f)}function O(z){var G=z[x],V=z[_];return G===V||r.inbox(G-l,V-l,f)}function P(z){return(S(z)+O(z))/2}f=i.maxHoverDistance-E,d=i.maxSpikeDistance-E;var U=r.getDistanceFunction(u,S,O,P);if(r.getClosest(w,U,i),i.index===!1)return null;var R=w[i.index];if(R.empty)return null;var j=p[R.dir],B=j.line.color;return m.opacity(B)&&j.line.width?i.color=B:i.color=j.fillcolor,i.x0=v.c2p(R.pos+g-M,!0),i.x1=v.c2p(R.pos+g+M,!0),i.xLabelVal=R.orig_p!==void 0?R.orig_p:R.pos,i.spikeDistance=P(R)*d/f,i.xSpike=v.c2p(R.pos,!0),i}function n(i,c,l,u){var f=i.cd,d=i.ya,w=f[0].trace,v=f[0].t,p=[],y=t(i,c,l,u);if(!y)return[];var b=f[y.index].hi||w.hoverinfo,x=b.split("+");if(b!=="all"&&x.indexOf("y")===-1)return[];for(var _=["high","open","close","low"],g={},A=0;A<_.length;A++){var M,L=_[A],E=w[L][y.index],S=d.c2p(E,!0);E in g?(M=g[E]).yLabel+="<br>"+v.labels[L]+T.hoverLabelText(d,E,w.yhoverformat):((M=k.extendFlat({},y)).y0=M.y1=S,M.yLabelVal=E,M.yLabel=v.labels[L]+T.hoverLabelText(d,E,w.yhoverformat),M.name="",p.push(M),g[E]=M)}return p}function a(i,c,l,u){var f=i.cd,d=i.ya,w=f[0].trace,v=f[0].t,p=t(i,c,l,u);if(!p)return[];var y=f[p.index],b=p.index=y.i,x=y.dir;function _(O){return v.labels[O]+T.hoverLabelText(d,w[O][b],w.yhoverformat)}var g=y.hi||w.hoverinfo,A=g.split("+"),M=g==="all",L=M||A.indexOf("y")!==-1,E=M||A.indexOf("text")!==-1,S=L?[_("open"),_("high"),_("low"),_("close")+"  "+e[x]]:[];return E&&h(y,w,S),p.extraText=S.join("<br>"),p.y0=p.y1=d.c2p(y.yc,!0),[p]}W.exports={hoverPoints:function(i,c,l,u){return i.cd[0].trace.hoverlabel.split?n(i,c,l,u):a(i,c,l,u)},hoverSplit:n,hoverOnPoints:a}},54186:function(W,I,o){W.exports={moduleType:"trace",name:"ohlc",basePlotModule:o(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:o(2522),supplyDefaults:o(16169),calc:o(3485).calc,plot:o(72314),style:o(53101),hoverPoints:o(66449).hoverPoints,selectPoints:o(67324)}},14555:function(W,I,o){var T=o(73972),k=o(71828);W.exports=function(r,m,h,s){var e=h("x"),t=h("open"),n=h("high"),a=h("low"),i=h("close");if(h("hoverlabel.split"),T.getComponentMethod("calendars","handleTraceDefaults")(r,m,["x"],s),t&&n&&a&&i){var c=Math.min(t.length,n.length,a.length,i.length);return e&&(c=Math.min(c,k.minRowLength(e))),m._length=c,c}}},72314:function(W,I,o){var T=o(39898),k=o(71828);W.exports=function(r,m,h,s){var e=m.yaxis,t=m.xaxis,n=!!t.rangebreaks;k.makeTraceGroups(s,h,"trace ohlc").each(function(a){var i=T.select(this),c=a[0],l=c.t;if(c.trace.visible!==!0||l.empty)i.remove();else{var u=l.tickLen,f=i.selectAll("path").data(k.identity);f.enter().append("path"),f.exit().remove(),f.attr("d",function(d){if(d.empty)return"M0,0Z";var w=t.c2p(d.pos-u,!0),v=t.c2p(d.pos+u,!0),p=n?(w+v)/2:t.c2p(d.pos,!0);return"M"+w+","+e.c2p(d.o,!0)+"H"+p+"M"+p+","+e.c2p(d.h,!0)+"V"+e.c2p(d.l,!0)+"M"+v+","+e.c2p(d.c,!0)+"H"+p})}})}},67324:function(W){W.exports=function(I,o){var T,k=I.cd,r=I.xaxis,m=I.yaxis,h=[],s=k[0].t.bPos||0;if(o===!1)for(T=0;T<k.length;T++)k[T].selected=0;else for(T=0;T<k.length;T++){var e=k[T];o.contains([r.c2p(e.pos+s),m.c2p(e.yc)],null,e.i,I)?(h.push({pointNumber:e.i,x:r.c2d(e.pos),y:m.c2d(e.yc)}),e.selected=1):e.selected=0}return h}},53101:function(W,I,o){var T=o(39898),k=o(91424),r=o(7901);W.exports=function(m,h,s){var e=s||T.select(m).selectAll("g.ohlclayer").selectAll("g.trace");e.style("opacity",function(t){return t[0].trace.opacity}),e.each(function(t){var n=t[0].trace;T.select(this).selectAll("path").each(function(a){if(!a.empty){var i=n[a.dir].line;T.select(this).style("fill","none").call(r.stroke,i.color).call(k.dashLine,i.dash,i.width).style("opacity",n.selectedpoints&&!a.selected?.3:1)}})})}},99506:function(W,I,o){var T=o(1426).extendFlat,k=o(9012),r=o(41940),m=o(50693),h=o(5386).fF,s=o(27670).Y,e=T({editType:"calc"},m("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:h({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});W.exports={domain:s({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:T({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:h({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:r({editType:"calc"}),tickfont:r({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:e,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(W,I,o){var T=o(27659).a0,k=o(45784),r="parcats";I.name=r,I.plot=function(m,h,s,e){var t=T(m.calcdata,r);if(t.length){var n=t[0];k(m,n,s,e)}},I.clean=function(m,h,s,e){var t=e._has&&e._has("parcats"),n=h._has&&h._has("parcats");t&&!n&&e._paperdiv.selectAll(".parcats").remove()}},28699:function(W,I,o){var T=o(28984).wrap,k=o(52075).hasColorscale,r=o(78803),m=o(75744),h=o(91424),s=o(71828),e=o(92770);function t(i,c,l){i.valueInds.push(c),i.count+=l}function n(i,c,l){return{categoryInds:i,color:c,rawColor:l,valueInds:[],count:0}}function a(i,c,l){i.valueInds.push(c),i.count+=l}W.exports=function(i,c){var l=s.filterVisible(c.dimensions);if(l.length===0)return[];var u,f,d,w=l.map(function(V){var et;if(V.categoryorder==="trace")et=null;else if(V.categoryorder==="array")et=V.categoryarray;else{et=m(V.values);for(var J=!0,X=0;X<et.length;X++)if(!e(et[X])){J=!1;break}et.sort(J?s.sorterAsc:void 0),V.categoryorder==="category descending"&&(et=et.reverse())}return function(Y,Z){Z=Z==null?[]:Z.map(function(kt){return kt});var tt={},rt={},nt=[];Z.forEach(function(kt,yt){tt[kt]=0,rt[kt]=yt});for(var ot=0;ot<Y.length;ot++){var ct,pt=Y[ot];tt[pt]===void 0?(tt[pt]=1,ct=Z.push(pt)-1,rt[pt]=ct):(tt[pt]++,ct=rt[pt]),nt.push(ct)}var gt=Z.map(function(kt){return tt[kt]});return{uniqueValues:Z,uniqueCounts:gt,inds:nt}}(V.values,et)});u=s.isArrayOrTypedArray(c.counts)?c.counts:[c.counts],function(V){var et,J=V.map(function(X){return X.displayindex});if(function(X){for(var Y=new Array(X.length),Z=0;Z<X.length;Z++){if(X[Z]<0||X[Z]>=X.length||Y[X[Z]]!==void 0)return!1;Y[X[Z]]=!0}return!0}(J))for(et=0;et<V.length;et++)V[et]._displayindex=V[et].displayindex;else for(et=0;et<V.length;et++)V[et]._displayindex=et}(l),l.forEach(function(V,et){(function(J,X){J._categoryarray=X.uniqueValues,J.ticktext===null||J.ticktext===void 0?J._ticktext=[]:J._ticktext=J.ticktext.slice();for(var Y=J._ticktext.length;Y<X.uniqueValues.length;Y++)J._ticktext.push(X.uniqueValues[Y])})(V,w[et])});var v,p=c.line;p?(k(c,"line")&&r(i,c,{vals:c.line.color,containerStr:"line",cLetter:"c"}),v=h.tryColorscale(p)):v=s.identity;var y,b,x,_,g,A=l[0].values.length,M={},L=w.map(function(V){return V.inds});for(d=0,y=0;y<A;y++){var E=[];for(b=0;b<L.length;b++)E.push(L[b][y]);f=u[y%u.length],d+=f;var S=(x=y,_=void 0,g=void 0,s.isArrayOrTypedArray(p.color)?g=_=p.color[x%p.color.length]:_=p.color,{color:v(_),rawColor:g}),O=E+"-"+S.rawColor;M[O]===void 0&&(M[O]=n(E,S.color,S.rawColor)),a(M[O],y,f)}var P,U=l.map(function(V,et){return function(J,X,Y,Z,tt){return{dimensionInd:J,containerInd:X,displayInd:Y,dimensionLabel:Z,count:tt,categories:[],dragX:null}}(et,V._index,V._displayindex,V.label,d)});for(y=0;y<A;y++)for(f=u[y%u.length],b=0;b<U.length;b++){var R=U[b].containerInd,j=w[b].inds[y],B=U[b].categories;if(B[j]===void 0){var z=c.dimensions[R]._categoryarray[j],G=c.dimensions[R]._ticktext[j];B[j]={dimensionInd:b,categoryInd:P=j,categoryValue:z,displayInd:P,categoryLabel:G,valueInds:[],count:0,dragY:null}}t(B[j],y,f)}return T(function(V,et,J){var X=V.map(function(Y){return Y.categories.length}).reduce(function(Y,Z){return Math.max(Y,Z)});return{dimensions:V,paths:et,trace:void 0,maxCats:X,count:J}}(U,M,d))}},14647:function(W,I,o){var T=o(71828),k=o(52075).hasColorscale,r=o(1586),m=o(27670).c,h=o(85501),s=o(99506),e=o(94397);function t(n,a){function i(v,p){return T.coerce(n,a,s.dimensions,v,p)}var c=i("values"),l=i("visible");if(c&&c.length||(l=a.visible=!1),l){i("label"),i("displayindex",a._index);var u,f=n.categoryarray,d=Array.isArray(f)&&f.length>0;d&&(u="array");var w=i("categoryorder",u);w==="array"?(i("categoryarray"),i("ticktext")):(delete n.categoryarray,delete n.ticktext),d||w!=="array"||(a.categoryorder="trace")}}W.exports=function(n,a,i,c){function l(v,p){return T.coerce(n,a,s,v,p)}var u=h(n,a,{name:"dimensions",handleItemDefaults:t}),f=function(v,p,y,b,x){x("line.shape"),x("line.hovertemplate");var _=x("line.color",b.colorway[0]);if(k(v,"line")&&T.isArrayOrTypedArray(_)){if(_.length)return x("line.colorscale"),r(v,p,b,x,{prefix:"line.",cLetter:"c"}),_.length;p.line.color=y}return 1/0}(n,a,i,c,l);m(a,c,l),Array.isArray(u)&&u.length||(a.visible=!1),e(a,u,"values",f),l("hoveron"),l("hovertemplate"),l("arrangement"),l("bundlecolors"),l("sortpaths"),l("counts");var d={family:c.font.family,size:Math.round(c.font.size),color:c.font.color};T.coerceFont(l,"labelfont",d);var w={family:c.font.family,size:Math.round(c.font.size/1.2),color:c.font.color};T.coerceFont(l,"tickfont",w)}},94873:function(W,I,o){W.exports={attributes:o(99506),supplyDefaults:o(14647),calc:o(28699),plot:o(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:o(27677),categories:["noOpacity"],meta:{}}},45460:function(W,I,o){var T=o(39898),k=o(81684).k4,r=o(72391),m=o(30211),h=o(71828),s=h.strTranslate,e=o(91424),t=o(84267),n=o(63893);function a(J,X,Y,Z){var tt=X._context.staticPlot,rt=J.map(B.bind(0,X,Y)),nt=Z.selectAll("g.parcatslayer").data([null]);nt.enter().append("g").attr("class","parcatslayer").style("pointer-events",tt?"none":"all");var ot=nt.selectAll("g.trace.parcats").data(rt,i),ct=ot.enter().append("g").attr("class","trace parcats");ot.attr("transform",function(st){return s(st.x,st.y)}),ct.append("g").attr("class","paths");var pt=ot.select("g.paths").selectAll("path.path").data(function(st){return st.paths},i);pt.attr("fill",function(st){return st.model.color});var gt=pt.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(st){return st.model.color}).attr("fill-opacity",0);p(gt),pt.attr("d",function(st){return st.svgD}),gt.empty()||pt.sort(l),pt.exit().remove(),pt.on("mouseover",u).on("mouseout",f).on("click",v),ct.append("g").attr("class","dimensions");var kt=ot.select("g.dimensions").selectAll("g.dimension").data(function(st){return st.dimensions},i);kt.enter().append("g").attr("class","dimension"),kt.attr("transform",function(st){return s(st.x,0)}),kt.exit().remove();var yt=kt.selectAll("g.category").data(function(st){return st.categories},i),mt=yt.enter().append("g").attr("class","category");yt.attr("transform",function(st){return s(0,st.y)}),mt.append("rect").attr("class","catrect").attr("pointer-events","none"),yt.select("rect.catrect").attr("fill","none").attr("width",function(st){return st.width}).attr("height",function(st){return st.height}),b(mt);var Ot=yt.selectAll("rect.bandrect").data(function(st){return st.bands},i);Ot.each(function(){h.raiseToTop(this)}),Ot.attr("fill",function(st){return st.color});var vt=Ot.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(st){return st.color}).attr("fill-opacity",0);Ot.attr("fill",function(st){return st.color}).attr("width",function(st){return st.width}).attr("height",function(st){return st.height}).attr("y",function(st){return st.y}).attr("cursor",function(st){return st.parcatsViewModel.arrangement==="fixed"?"default":st.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),x(vt),Ot.exit().remove(),mt.append("text").attr("class","catlabel").attr("pointer-events","none");var xt=X._fullLayout.paper_bgcolor;yt.select("text.catlabel").attr("text-anchor",function(st){return c(st)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",n.makeTextShadow(xt)).style("fill","rgb(0, 0, 0)").attr("x",function(st){return c(st)?st.width+5:-5}).attr("y",function(st){return st.height/2}).text(function(st){return st.model.categoryLabel}).each(function(st){e.font(T.select(this),st.parcatsViewModel.categorylabelfont),n.convertToTspans(T.select(this),X)}),mt.append("text").attr("class","dimlabel"),yt.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(st){return st.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(st){return st.width/2}).attr("y",-5).text(function(st,at){return at===0?st.parcatsViewModel.model.dimensions[st.model.dimensionInd].dimensionLabel:null}).each(function(st){e.font(T.select(this),st.parcatsViewModel.labelfont)}),yt.selectAll("rect.bandrect").on("mouseover",L).on("mouseout",E),yt.exit().remove(),kt.call(T.behavior.drag().origin(function(st){return{x:st.x,y:0}}).on("dragstart",S).on("drag",O).on("dragend",P)),ot.each(function(st){st.traceSelection=T.select(this),st.pathSelection=T.select(this).selectAll("g.paths").selectAll("path.path"),st.dimensionSelection=T.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ot.exit().remove()}function i(J){return J.key}function c(J){var X=J.parcatsViewModel.dimensions.length,Y=J.parcatsViewModel.dimensions[X-1].model.dimensionInd;return J.model.dimensionInd===Y}function l(J,X){return J.model.rawColor>X.model.rawColor?1:J.model.rawColor<X.model.rawColor?-1:0}function u(J){if(!J.parcatsViewModel.dragDimension&&J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){h.raiseToTop(this),y(T.select(this));var X=d(J),Y=w(J);if(J.parcatsViewModel.graphDiv.emit("plotly_hover",{points:X,event:T.event,constraints:Y}),J.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var Z,tt,rt,nt=T.mouse(this)[0],ot=J.parcatsViewModel.graphDiv,ct=J.parcatsViewModel.trace,pt=ot._fullLayout,gt=pt._paperdiv.node().getBoundingClientRect(),kt=J.parcatsViewModel.graphDiv.getBoundingClientRect();for(rt=0;rt<J.leftXs.length-1;rt++)if(J.leftXs[rt]+J.dimWidths[rt]-2<=nt&&nt<=J.leftXs[rt+1]+2){var yt=J.parcatsViewModel.dimensions[rt],mt=J.parcatsViewModel.dimensions[rt+1];Z=(yt.x+yt.width+mt.x)/2,tt=(J.topYs[rt]+J.topYs[rt+1]+J.height)/2;break}var Ot=J.parcatsViewModel.x+Z,vt=J.parcatsViewModel.y+tt,xt=t.mostReadable(J.model.color,["black","white"]),st=J.model.count,at=st/J.parcatsViewModel.model.count,ht={countLabel:st,probabilityLabel:at.toFixed(3)},Lt=[];J.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Lt.push(["Count:",ht.countLabel].join(" ")),J.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Lt.push(["P:",ht.probabilityLabel].join(" "));var Mt=Lt.join("<br>"),_t=T.mouse(ot)[0];m.loneHover({trace:ct,x:Ot-gt.left+kt.left,y:vt-gt.top+kt.top,text:Mt,color:J.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:xt,idealAlign:_t<Ot?"right":"left",hovertemplate:(ct.line||{}).hovertemplate,hovertemplateLabels:ht,eventData:[{data:ct._input,fullData:ct,count:st,probability:at}]},{container:pt._hoverlayer.node(),outerContainer:pt._paper.node(),gd:ot})}}}function f(J){if(!J.parcatsViewModel.dragDimension&&(p(T.select(this)),m.loneUnhover(J.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),J.parcatsViewModel.pathSelection.sort(l),J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var X=d(J),Y=w(J);J.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:X,event:T.event,constraints:Y})}}function d(J){for(var X=[],Y=U(J.parcatsViewModel),Z=0;Z<J.model.valueInds.length;Z++){var tt=J.model.valueInds[Z];X.push({curveNumber:Y,pointNumber:tt})}return X}function w(J){for(var X={},Y=J.parcatsViewModel.model.dimensions,Z=0;Z<Y.length;Z++){var tt=Y[Z],rt=tt.categories[J.model.categoryInds[Z]];X[tt.containerInd]=rt.categoryValue}return J.model.rawColor!==void 0&&(X.color=J.model.rawColor),X}function v(J){if(J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var X=d(J),Y=w(J);J.parcatsViewModel.graphDiv.emit("plotly_click",{points:X,event:T.event,constraints:Y})}}function p(J){J.attr("fill",function(X){return X.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function y(J){J.attr("fill-opacity",.8).attr("stroke",function(X){return t.mostReadable(X.model.color,["black","white"])}).attr("stroke-width",.3)}function b(J){J.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function x(J){J.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function _(J){var X=J.parcatsViewModel.pathSelection,Y=J.categoryViewModel.model.dimensionInd,Z=J.categoryViewModel.model.categoryInd;return X.filter(function(tt){return tt.model.categoryInds[Y]===Z&&tt.model.color===J.color})}function g(J,X,Y){var Z=T.select(J).datum(),tt=Z.categoryViewModel.model,rt=Z.parcatsViewModel.graphDiv,nt=T.select(J.parentNode).selectAll("rect.bandrect"),ot=[];nt.each(function(pt){_(pt).each(function(gt){Array.prototype.push.apply(ot,d(gt))})});var ct={};ct[tt.dimensionInd]=tt.categoryValue,rt.emit(X,{points:ot,event:Y,constraints:ct})}function A(J,X,Y){var Z=T.select(J).datum(),tt=Z.categoryViewModel.model,rt=Z.parcatsViewModel.graphDiv,nt=_(Z),ot=[];nt.each(function(pt){Array.prototype.push.apply(ot,d(pt))});var ct={};ct[tt.dimensionInd]=tt.categoryValue,Z.rawColor!==void 0&&(ct.color=Z.rawColor),rt.emit(X,{points:ot,event:Y,constraints:ct})}function M(J,X,Y){J._fullLayout._calcInverseTransform(J);var Z,tt,rt=J._fullLayout._invScaleX,nt=J._fullLayout._invScaleY,ot=T.select(Y.parentNode).select("rect.catrect"),ct=ot.node().getBoundingClientRect(),pt=ot.datum(),gt=pt.parcatsViewModel,kt=gt.model.dimensions[pt.model.dimensionInd],yt=gt.trace,mt=ct.top+ct.height/2;gt.dimensions.length>1&&kt.displayInd===gt.dimensions.length-1?(Z=ct.left,tt="left"):(Z=ct.left+ct.width,tt="right");var Ot=pt.model.count,vt=pt.model.categoryLabel,xt=Ot/pt.parcatsViewModel.model.count,st={countLabel:Ot,categoryLabel:vt,probabilityLabel:xt.toFixed(3)},at=[];pt.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&at.push(["Count:",st.countLabel].join(" ")),pt.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&at.push(["P("+st.categoryLabel+"):",st.probabilityLabel].join(" "));var ht=at.join("<br>");return{trace:yt,x:rt*(Z-X.left),y:nt*(mt-X.top),text:ht,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:tt,hovertemplate:yt.hovertemplate,hovertemplateLabels:st,eventData:[{data:yt._input,fullData:yt,count:Ot,category:vt,probability:xt}]}}function L(J){if(!J.parcatsViewModel.dragDimension&&J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(T.mouse(this)[1]<-1)return;var X,Y=J.parcatsViewModel.graphDiv,Z=Y._fullLayout,tt=Z._paperdiv.node().getBoundingClientRect(),rt=J.parcatsViewModel.hoveron,nt=this;rt==="color"?(function(ot){var ct=T.select(ot).datum(),pt=_(ct);y(pt),pt.each(function(){h.raiseToTop(this)}),T.select(ot.parentNode).selectAll("rect.bandrect").filter(function(gt){return gt.color===ct.color}).each(function(){h.raiseToTop(this),T.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(nt),A(nt,"plotly_hover",T.event)):(function(ot){T.select(ot.parentNode).selectAll("rect.bandrect").each(function(ct){var pt=_(ct);y(pt),pt.each(function(){h.raiseToTop(this)})}),T.select(ot.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(nt),g(nt,"plotly_hover",T.event)),J.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(rt==="category"?X=M(Y,tt,nt):rt==="color"?X=function(ot,ct,pt){ot._fullLayout._calcInverseTransform(ot);var gt,kt,yt=ot._fullLayout._invScaleX,mt=ot._fullLayout._invScaleY,Ot=pt.getBoundingClientRect(),vt=T.select(pt).datum(),xt=vt.categoryViewModel,st=xt.parcatsViewModel,at=st.model.dimensions[xt.model.dimensionInd],ht=st.trace,Lt=Ot.y+Ot.height/2;st.dimensions.length>1&&at.displayInd===st.dimensions.length-1?(gt=Ot.left,kt="left"):(gt=Ot.left+Ot.width,kt="right");var Mt=xt.model.categoryLabel,_t=vt.parcatsViewModel.model.count,St=0;vt.categoryViewModel.bands.forEach(function(Xt){Xt.color===vt.color&&(St+=Xt.count)});var Dt=xt.model.count,ut=0;st.pathSelection.each(function(Xt){Xt.model.color===vt.color&&(ut+=Xt.model.count)});var Tt=St/_t,bt=St/ut,It=St/Dt,zt={countLabel:_t,categoryLabel:Mt,probabilityLabel:Tt.toFixed(3)},Ft=[];xt.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ft.push(["Count:",zt.countLabel].join(" ")),xt.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ft.push("P(color \u2229 "+Mt+"): "+zt.probabilityLabel),Ft.push("P("+Mt+" | color): "+bt.toFixed(3)),Ft.push("P(color | "+Mt+"): "+It.toFixed(3)));var $t=Ft.join("<br>"),Wt=t.mostReadable(vt.color,["black","white"]);return{trace:ht,x:yt*(gt-ct.left),y:mt*(Lt-ct.top),text:$t,color:vt.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Wt,fontSize:10,idealAlign:kt,hovertemplate:ht.hovertemplate,hovertemplateLabels:zt,eventData:[{data:ht._input,fullData:ht,category:Mt,count:_t,probability:Tt,categorycount:Dt,colorcount:ut,bandcolorcount:St}]}}(Y,tt,nt):rt==="dimension"&&(X=function(ot,ct,pt){var gt=[];return T.select(pt.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){gt.push(M(ot,ct,this))}),gt}(Y,tt,nt)),X&&m.loneHover(X,{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:Y}))}}function E(J){var X=J.parcatsViewModel;X.dragDimension||(p(X.pathSelection),b(X.dimensionSelection.selectAll("g.category")),x(X.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),m.loneUnhover(X.graphDiv._fullLayout._hoverlayer.node()),X.pathSelection.sort(l),X.hoverinfoItems.indexOf("skip")!==-1)||(J.parcatsViewModel.hoveron==="color"?A(this,"plotly_unhover",T.event):g(this,"plotly_unhover",T.event))}function S(J){J.parcatsViewModel.arrangement!=="fixed"&&(J.dragDimensionDisplayInd=J.model.displayInd,J.initialDragDimensionDisplayInds=J.parcatsViewModel.model.dimensions.map(function(X){return X.displayInd}),J.dragHasMoved=!1,J.dragCategoryDisplayInd=null,T.select(this).selectAll("g.category").select("rect.catrect").each(function(X){var Y=T.mouse(this)[0],Z=T.mouse(this)[1];-2<=Y&&Y<=X.width+2&&-2<=Z&&Z<=X.height+2&&(J.dragCategoryDisplayInd=X.model.displayInd,J.initialDragCategoryDisplayInds=J.model.categories.map(function(tt){return tt.displayInd}),X.model.dragY=X.y,h.raiseToTop(this.parentNode),T.select(this.parentNode).selectAll("rect.bandrect").each(function(tt){tt.y<Z&&Z<=tt.y+tt.height&&(J.potentialClickBand=this)}))}),J.parcatsViewModel.dragDimension=J,m.loneUnhover(J.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function O(J){if(J.parcatsViewModel.arrangement!=="fixed"&&(J.dragHasMoved=!0,J.dragDimensionDisplayInd!==null)){var X=J.dragDimensionDisplayInd,Y=X-1,Z=X+1,tt=J.parcatsViewModel.dimensions[X];if(J.dragCategoryDisplayInd!==null){var rt=tt.categories[J.dragCategoryDisplayInd];rt.model.dragY+=T.event.dy;var nt=rt.model.dragY,ot=rt.model.displayInd,ct=tt.categories,pt=ct[ot-1],gt=ct[ot+1];pt!==void 0&&nt<pt.y+pt.height/2&&(rt.model.displayInd=pt.model.displayInd,pt.model.displayInd=ot),gt!==void 0&&nt+rt.height>gt.y+gt.height/2&&(rt.model.displayInd=gt.model.displayInd,gt.model.displayInd=ot),J.dragCategoryDisplayInd=rt.model.displayInd}if(J.dragCategoryDisplayInd===null||J.parcatsViewModel.arrangement==="freeform"){tt.model.dragX=T.event.x;var kt=J.parcatsViewModel.dimensions[Y],yt=J.parcatsViewModel.dimensions[Z];kt!==void 0&&tt.model.dragX<kt.x+kt.width&&(tt.model.displayInd=kt.model.displayInd,kt.model.displayInd=X),yt!==void 0&&tt.model.dragX+tt.width>yt.x&&(tt.model.displayInd=yt.model.displayInd,yt.model.displayInd=J.dragDimensionDisplayInd),J.dragDimensionDisplayInd=tt.model.displayInd}V(J.parcatsViewModel),G(J.parcatsViewModel),j(J.parcatsViewModel),R(J.parcatsViewModel)}}function P(J){if(J.parcatsViewModel.arrangement!=="fixed"&&J.dragDimensionDisplayInd!==null){T.select(this).selectAll("text").attr("font-weight","normal");var X={},Y=U(J.parcatsViewModel),Z=J.parcatsViewModel.model.dimensions.map(function(gt){return gt.displayInd}),tt=J.initialDragDimensionDisplayInds.some(function(gt,kt){return gt!==Z[kt]});tt&&Z.forEach(function(gt,kt){var yt=J.parcatsViewModel.model.dimensions[kt].containerInd;X["dimensions["+yt+"].displayindex"]=gt});var rt=!1;if(J.dragCategoryDisplayInd!==null){var nt=J.model.categories.map(function(gt){return gt.displayInd});if(rt=J.initialDragCategoryDisplayInds.some(function(gt,kt){return gt!==nt[kt]})){var ot=J.model.categories.slice().sort(function(gt,kt){return gt.displayInd-kt.displayInd}),ct=ot.map(function(gt){return gt.categoryValue}),pt=ot.map(function(gt){return gt.categoryLabel});X["dimensions["+J.model.containerInd+"].categoryarray"]=[ct],X["dimensions["+J.model.containerInd+"].ticktext"]=[pt],X["dimensions["+J.model.containerInd+"].categoryorder"]="array"}}J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!J.dragHasMoved&&J.potentialClickBand&&(J.parcatsViewModel.hoveron==="color"?A(J.potentialClickBand,"plotly_click",T.event.sourceEvent):g(J.potentialClickBand,"plotly_click",T.event.sourceEvent)),J.model.dragX=null,J.dragCategoryDisplayInd!==null&&(J.parcatsViewModel.dimensions[J.dragDimensionDisplayInd].categories[J.dragCategoryDisplayInd].model.dragY=null,J.dragCategoryDisplayInd=null),J.dragDimensionDisplayInd=null,J.parcatsViewModel.dragDimension=null,J.dragHasMoved=null,J.potentialClickBand=null,V(J.parcatsViewModel),G(J.parcatsViewModel),T.transition().duration(300).ease("cubic-in-out").each(function(){j(J.parcatsViewModel,!0),R(J.parcatsViewModel,!0)}).each("end",function(){(tt||rt)&&r.restyle(J.parcatsViewModel.graphDiv,X,[Y])})}}function U(J){for(var X,Y=J.graphDiv._fullData,Z=0;Z<Y.length;Z++)if(J.key===Y[Z].uid){X=Z;break}return X}function R(J,X){var Y;X===void 0&&(X=!1),J.pathSelection.data(function(Z){return Z.paths},i),(Y=J.pathSelection,X?Y.transition():Y).attr("d",function(Z){return Z.svgD})}function j(J,X){function Y(nt){return X?nt.transition():nt}X===void 0&&(X=!1),J.dimensionSelection.data(function(nt){return nt.dimensions},i);var Z=J.dimensionSelection.selectAll("g.category").data(function(nt){return nt.categories},i);Y(J.dimensionSelection).attr("transform",function(nt){return s(nt.x,0)}),Y(Z).attr("transform",function(nt){return s(0,nt.y)}),Z.select(".dimlabel").text(function(nt,ot){return ot===0?nt.parcatsViewModel.model.dimensions[nt.model.dimensionInd].dimensionLabel:null}),Z.select(".catlabel").attr("text-anchor",function(nt){return c(nt)?"start":"end"}).attr("x",function(nt){return c(nt)?nt.width+5:-5}).each(function(nt){var ot,ct;c(nt)?(ot=nt.width+5,ct="start"):(ot=-5,ct="end"),T.select(this).selectAll("tspan").attr("x",ot).attr("text-anchor",ct)});var tt=Z.selectAll("rect.bandrect").data(function(nt){return nt.bands},i),rt=tt.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(nt){return nt.color}).attr("fill-opacity",0);tt.attr("fill",function(nt){return nt.color}).attr("width",function(nt){return nt.width}).attr("height",function(nt){return nt.height}).attr("y",function(nt){return nt.y}),x(rt),tt.each(function(){h.raiseToTop(this)}),tt.exit().remove()}function B(J,X,Y){var Z,tt=Y[0],rt=X.margin||{l:80,r:80,t:100,b:80},nt=tt.trace,ot=nt.domain,ct=X.width,pt=X.height,gt=Math.floor(ct*(ot.x[1]-ot.x[0])),kt=Math.floor(pt*(ot.y[1]-ot.y[0])),yt=ot.x[0]*ct+rt.l,mt=X.height-ot.y[1]*X.height+rt.t,Ot=nt.line.shape;Z=nt.hoverinfo==="all"?["count","probability"]:(nt.hoverinfo||"").split("+");var vt={trace:nt,key:nt.uid,model:tt,x:yt,y:mt,width:gt,height:kt,hoveron:nt.hoveron,hoverinfoItems:Z,arrangement:nt.arrangement,bundlecolors:nt.bundlecolors,sortpaths:nt.sortpaths,labelfont:nt.labelfont,categorylabelfont:nt.tickfont,pathShape:Ot,dragDimension:null,margin:rt,paths:[],dimensions:[],graphDiv:J,traceSelection:null,pathSelection:null,dimensionSelection:null};return tt.dimensions&&(V(vt),G(vt)),vt}function z(J,X,Y,Z,tt){var rt,nt,ot=[],ct=[];for(nt=0;nt<Y.length-1;nt++)rt=k(Y[nt]+J[nt],J[nt+1]),ot.push(rt(tt)),ct.push(rt(1-tt));var pt="M "+J[0]+","+X[0];for(pt+="l"+Y[0]+",0 ",nt=1;nt<Y.length;nt++)pt+="C"+ot[nt-1]+","+X[nt-1]+" "+ct[nt-1]+","+X[nt]+" "+J[nt]+","+X[nt],pt+="l"+Y[nt]+",0 ";for(pt+="l0,"+Z+" ",pt+="l -"+Y[Y.length-1]+",0 ",nt=Y.length-2;nt>=0;nt--)pt+="C"+ct[nt]+","+(X[nt+1]+Z)+" "+ot[nt]+","+(X[nt]+Z)+" "+(J[nt]+Y[nt])+","+(X[nt]+Z),pt+="l-"+Y[nt]+",0 ";return pt+"Z"}function G(J){var X=J.dimensions,Y=J.model,Z=X.map(function(zt){return zt.categories.map(function(Ft){return Ft.y})}),tt=J.model.dimensions.map(function(zt){return zt.categories.map(function(Ft){return Ft.displayInd})}),rt=J.model.dimensions.map(function(zt){return zt.displayInd}),nt=J.dimensions.map(function(zt){return zt.model.dimensionInd}),ot=X.map(function(zt){return zt.x}),ct=X.map(function(zt){return zt.width}),pt=[];for(var gt in Y.paths)Y.paths.hasOwnProperty(gt)&&pt.push(Y.paths[gt]);function kt(zt){var Ft=zt.categoryInds.map(function($t,Wt){return tt[Wt][$t]});return nt.map(function($t){return Ft[$t]})}pt.sort(function(zt,Ft){var $t=kt(zt),Wt=kt(Ft);return J.sortpaths==="backward"&&($t.reverse(),Wt.reverse()),$t.push(zt.valueInds[0]),Wt.push(Ft.valueInds[0]),J.bundlecolors&&($t.unshift(zt.rawColor),Wt.unshift(Ft.rawColor)),$t<Wt?-1:$t>Wt?1:0});for(var yt=new Array(pt.length),mt=X[0].model.count,Ot=X[0].categories.map(function(zt){return zt.height}).reduce(function(zt,Ft){return zt+Ft}),vt=0;vt<pt.length;vt++){var xt,st=pt[vt];xt=mt>0?Ot*(st.count/mt):0;for(var at,ht=new Array(Z.length),Lt=0;Lt<st.categoryInds.length;Lt++){var Mt=st.categoryInds[Lt],_t=tt[Lt][Mt],St=rt[Lt];ht[St]=Z[St][_t],Z[St][_t]+=xt;var Dt=J.dimensions[St].categories[_t],ut=Dt.bands.length,Tt=Dt.bands[ut-1];if(Tt===void 0||st.rawColor!==Tt.rawColor){var bt=Tt===void 0?0:Tt.y+Tt.height;Dt.bands.push({key:bt,color:st.color,rawColor:st.rawColor,height:xt,width:Dt.width,count:st.count,y:bt,categoryViewModel:Dt,parcatsViewModel:J})}else{var It=Dt.bands[ut-1];It.height+=xt,It.count+=st.count}}at=J.pathShape==="hspline"?z(ot,ht,ct,xt,.5):z(ot,ht,ct,xt,0),yt[vt]={key:st.valueInds[0],model:st,height:xt,leftXs:ot,topYs:ht,dimWidths:ct,svgD:at,parcatsViewModel:J}}J.paths=yt}function V(J){var X=J.model.dimensions.map(function(nt){return{displayInd:nt.displayInd,dimensionInd:nt.dimensionInd}});X.sort(function(nt,ot){return nt.displayInd-ot.displayInd});var Y=[];for(var Z in X){var tt=X[Z].dimensionInd,rt=J.model.dimensions[tt];Y.push(et(J,rt))}J.dimensions=Y}function et(J,X){var Y,Z=J.model.dimensions.length,tt=X.displayInd;Y=40+(Z>1?(J.width-80-16)/(Z-1):0)*tt;var rt,nt,ot,ct,pt,gt=[],kt=J.model.maxCats,yt=X.categories.length,mt=X.count,Ot=J.height-8*(kt-1),vt=8*(kt-yt)/2,xt=X.categories.map(function(st){return{displayInd:st.displayInd,categoryInd:st.categoryInd}});for(xt.sort(function(st,at){return st.displayInd-at.displayInd}),pt=0;pt<yt;pt++)ct=xt[pt].categoryInd,nt=X.categories[ct],rt=mt>0?nt.count/mt*Ot:0,ot={key:nt.valueInds[0],model:nt,width:16,height:rt,y:nt.dragY!==null?nt.dragY:vt,bands:[],parcatsViewModel:J},vt=vt+rt+8,gt.push(ot);return{key:X.dimensionInd,x:X.dragX!==null?X.dragX:Y,y:0,width:16,model:X,categories:gt,parcatsViewModel:J,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}W.exports=function(J,X,Y,Z){a(Y,J,Z,X)}},45784:function(W,I,o){var T=o(45460);W.exports=function(k,r,m,h){var s=k._fullLayout,e=s._paper,t=s._size;T(k,e,r,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},m,h)}},73362:function(W,I,o){var T=o(50693),k=o(13838),r=o(41940),m=o(27670).Y,h=o(1426).extendFlat,s=o(44467).templatedArray;W.exports={domain:m({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:r({editType:"plot"}),tickfont:r({editType:"plot"}),rangefont:r({editType:"plot"}),dimensions:s("dimension",{label:{valType:"string",editType:"plot"},tickvals:h({},k.tickvals,{editType:"plot"}),ticktext:h({},k.ticktext,{editType:"plot"}),tickformat:h({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:h({editType:"calc"},T("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(W,I,o){var T=o(25706),k=o(39898),r=o(28984).keyFun,m=o(28984).repeat,h=o(71828).sorterAsc,s=o(71828).strTranslate,e=T.bar.snapRatio;function t(M,L){return M*(1-e)+L*e}var n=T.bar.snapClose;function a(M,L){return M*(1-n)+L*n}function i(M,L,E,S){if(function(et,J){for(var X=0;X<J.length;X++)if(et>=J[X][0]&&et<=J[X][1])return!0;return!1}(E,S))return E;var O=M?-1:1,P=0,U=L.length-1;if(O<0){var R=P;P=U,U=R}for(var j=L[P],B=j,z=P;O*z<O*U;z+=O){var G=z+O,V=L[G];if(O*E<O*a(j,V))return t(j,B);if(O*E<O*V||G===U)return t(V,j);B=j,j=V}}function c(M){M.attr("x",-T.bar.captureWidth/2).attr("width",T.bar.captureWidth)}function l(M){M.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(M){if(!M.brush.filterSpecified)return"0,"+M.height;for(var L,E,S,O=f(M.brush.filter.getConsolidated(),M.height),P=[0],U=O.length?O[0][0]:null,R=0;R<O.length;R++)E=(L=O[R])[1]-L[0],P.push(U),P.push(E),(S=R+1)<O.length&&(U=O[S][0]-L[1]);return P.push(M.height),P}function f(M,L){return M.map(function(E){return E.map(function(S){return Math.max(0,S*L)}).sort(h)})}function d(){k.select(document.body).style("cursor",null)}function w(M){M.attr("stroke-dasharray",u)}function v(M,L){var E=k.select(M).selectAll(".highlight, .highlight-shadow");w(L?E.transition().duration(T.bar.snapDuration).each("end",L):E)}function p(M,L){var E,S=M.brush,O=NaN,P={};if(S.filterSpecified){var U=M.height,R=S.filter.getConsolidated(),j=f(R,U),B=NaN,z=NaN,G=NaN;for(E=0;E<=j.length;E++){var V=j[E];if(V&&V[0]<=L&&L<=V[1]){B=E;break}if(z=E?E-1:NaN,V&&V[0]>L){G=E;break}}if(O=B,isNaN(O)&&(O=isNaN(z)||isNaN(G)?isNaN(z)?G:z:L-j[z][1]<j[G][0]-L?z:G),!isNaN(O)){var et=j[O],J=function(tt,rt){var nt=T.bar.handleHeight;if(!(rt>tt[1]+nt||rt<tt[0]-nt))return rt>=.9*tt[1]+.1*tt[0]?"n":rt<=.9*tt[0]+.1*tt[1]?"s":"ns"}(et,L);J&&(P.interval=R[O],P.intervalPix=et,P.region=J)}}if(M.ordinal&&!P.region){var X=M.unitTickvals,Y=M.unitToPaddedPx.invert(L);for(E=0;E<X.length;E++){var Z=[.25*X[Math.max(E-1,0)]+.75*X[E],.25*X[Math.min(E+1,X.length-1)]+.75*X[E]];if(Y>=Z[0]&&Y<=Z[1]){P.clickableOrdinalRange=Z;break}}}return P}function y(M,L){k.event.sourceEvent.stopPropagation();var E=L.height-k.mouse(M)[1]-2*T.verticalPadding,S=L.brush.svgBrush;S.wasDragged=!0,S._dragging=!0,S.grabbingBar?S.newExtent=[E-S.grabPoint,E+S.barLength-S.grabPoint].map(L.unitToPaddedPx.invert):S.newExtent=[S.startExtent,L.unitToPaddedPx.invert(E)].sort(h),L.brush.filterSpecified=!0,S.extent=S.stayingIntervals.concat([S.newExtent]),S.brushCallback(L),v(M.parentNode)}function b(M,L){var E=p(L,L.height-k.mouse(M)[1]-2*T.verticalPadding),S="crosshair";E.clickableOrdinalRange?S="pointer":E.region&&(S=E.region+"-resize"),k.select(document.body).style("cursor",S)}function x(M){M.on("mousemove",function(L){k.event.preventDefault(),L.parent.inBrushDrag||b(this,L)}).on("mouseleave",function(L){L.parent.inBrushDrag||d()}).call(k.behavior.drag().on("dragstart",function(L){(function(E,S){k.event.sourceEvent.stopPropagation();var O=S.height-k.mouse(E)[1]-2*T.verticalPadding,P=S.unitToPaddedPx.invert(O),U=S.brush,R=p(S,O),j=R.interval,B=U.svgBrush;if(B.wasDragged=!1,B.grabbingBar=R.region==="ns",B.grabbingBar){var z=j.map(S.unitToPaddedPx);B.grabPoint=O-z[0]-T.verticalPadding,B.barLength=z[1]-z[0]}B.clickableOrdinalRange=R.clickableOrdinalRange,B.stayingIntervals=S.multiselect&&U.filterSpecified?U.filter.getConsolidated():[],j&&(B.stayingIntervals=B.stayingIntervals.filter(function(G){return G[0]!==j[0]&&G[1]!==j[1]})),B.startExtent=R.region?j[R.region==="s"?1:0]:P,S.parent.inBrushDrag=!0,B.brushStartCallback()})(this,L)}).on("drag",function(L){y(this,L)}).on("dragend",function(L){(function(E,S){var O=S.brush,P=O.filter,U=O.svgBrush;U._dragging||(b(E,S),y(E,S),S.brush.svgBrush.wasDragged=!1),U._dragging=!1,k.event.sourceEvent.stopPropagation();var R=U.grabbingBar;if(U.grabbingBar=!1,U.grabLocation=void 0,S.parent.inBrushDrag=!1,d(),!U.wasDragged)return U.wasDragged=void 0,U.clickableOrdinalRange?O.filterSpecified&&S.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],O.filterSpecified=!0):R?(U.extent=U.stayingIntervals,U.extent.length===0&&g(O)):g(O),U.brushCallback(S),v(E.parentNode),void U.brushEndCallback(O.filterSpecified?P.getConsolidated():[]);var j=function(){P.set(P.getConsolidated())};if(S.ordinal){var B=S.unitTickvals;B[B.length-1]<B[0]&&B.reverse(),U.newExtent=[i(0,B,U.newExtent[0],U.stayingIntervals),i(1,B,U.newExtent[1],U.stayingIntervals)];var z=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(z?[U.newExtent]:[]),U.extent.length||g(O),U.brushCallback(S),z?v(E.parentNode,j):(j(),v(E.parentNode))}else j();U.brushEndCallback(O.filterSpecified?P.getConsolidated():[])})(this,L)}))}function _(M,L){return M[0]-L[0]}function g(M){M.filterSpecified=!1,M.svgBrush.extent=[[-1/0,1/0]]}function A(M){for(var L,E=M.slice(),S=[],O=E.shift();O;){for(L=O.slice();(O=E.shift())&&O[0]<=L[1];)L[1]=Math.max(L[1],O[1]);S.push(L)}return S.length===1&&S[0][0]>S[0][1]&&(S=[]),S}W.exports={makeBrush:function(M,L,E,S,O,P){var U,R=function(){var j,B,z=[];return{set:function(G){(z=G.map(function(V){return V.slice().sort(h)}).sort(_)).length===1&&z[0][0]===-1/0&&z[0][1]===1/0&&(z=[[0,-1]]),j=A(z),B=z.reduce(function(V,et){return[Math.min(V[0],et[0]),Math.max(V[1],et[1])]},[1/0,-1/0])},get:function(){return z.slice()},getConsolidated:function(){return j},getBounds:function(){return B}}}();return R.set(E),{filter:R,filterSpecified:L,svgBrush:{extent:[],brushStartCallback:S,brushCallback:(U=O,function(j){var B=j.brush,z=function(V){return V.svgBrush.extent.map(function(et){return et.slice()})}(B),G=z.slice();B.filter.set(G),U()}),brushEndCallback:P}}},ensureAxisBrush:function(M,L,E){var S=M.selectAll("."+T.cn.axisBrush).data(m,r);S.enter().append("g").classed(T.cn.axisBrush,!0),function(O,P,U){var R=U._context.staticPlot,j=O.selectAll(".background").data(m);j.enter().append("rect").classed("background",!0).call(c).call(l).style("pointer-events",R?"none":"auto").attr("transform",s(0,T.verticalPadding)),j.call(x).attr("height",function(G){return G.height-T.verticalPadding});var B=O.selectAll(".highlight-shadow").data(m);B.enter().append("line").classed("highlight-shadow",!0).attr("x",-T.bar.width/2).attr("stroke-width",T.bar.width+T.bar.strokeWidth).attr("stroke",P).attr("opacity",T.bar.strokeOpacity).attr("stroke-linecap","butt"),B.attr("y1",function(G){return G.height}).call(w);var z=O.selectAll(".highlight").data(m);z.enter().append("line").classed("highlight",!0).attr("x",-T.bar.width/2).attr("stroke-width",T.bar.width-T.bar.strokeWidth).attr("stroke",T.bar.fillColor).attr("opacity",T.bar.fillOpacity).attr("stroke-linecap","butt"),z.attr("y1",function(G){return G.height}).call(w)}(S,L,E)},cleanRanges:function(M,L){if(Array.isArray(M[0])?(M=M.map(function(S){return S.sort(h)}),M=L.multiselect?A(M.sort(_)):[M[0]]):M=[M.sort(h)],L.tickvals){var E=L.tickvals.slice().sort(h);if(!(M=M.map(function(S){var O=[i(0,E,S[0],[]),i(1,E,S[1],[])];if(O[1]>O[0])return O}).filter(function(S){return S})).length)return}return M.length>1?M:M[0]}}},71791:function(W,I,o){W.exports={attributes:o(73362),supplyDefaults:o(3633),calc:o(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:o(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(W,I,o){var T=o(39898),k=o(27659).a0,r=o(21341),m=o(77922);I.name="parcoords",I.plot=function(h){var s=k(h.calcdata,"parcoords")[0];s.length&&r(h,s)},I.clean=function(h,s,e,t){var n=t._has&&t._has("parcoords"),a=s._has&&s._has("parcoords");n&&!a&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},I.toSVG=function(h){var s=h._fullLayout._glimages,e=T.select(h).selectAll(".svg-container");e.filter(function(t,n){return n===e.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,n=t.toDataURL("image/png");s.append("svg:image").attr({xmlns:m.svg,"xlink:href":n,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){T.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(W,I,o){var T=o(71828).isArrayOrTypedArray,k=o(21081),r=o(28984).wrap;W.exports=function(m,h){var s,e;return k.hasColorscale(h,"line")&&T(h.line.color)?(s=h.line.color,e=k.extractOpts(h.line).colorscale,k.calc(m,h,{vals:s,containerStr:"line",cLetter:"c"})):(s=function(t){for(var n=new Array(t),a=0;a<t;a++)n[a]=.5;return n}(h._length),e=[[0,h.line.color],[1,h.line.color]]),r({lineColor:s,cscale:e})}},25706:function(W){W.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(W,I,o){var T=o(71828),k=o(52075).hasColorscale,r=o(1586),m=o(27670).c,h=o(85501),s=o(89298),e=o(73362),t=o(57920),n=o(25706).maxDimensionCount,a=o(94397);function i(c,l,u,f){function d(b,x){return T.coerce(c,l,e.dimensions,b,x)}var w=d("values"),v=d("visible");if(w&&w.length||(v=l.visible=!1),v){d("label"),d("tickvals"),d("ticktext"),d("tickformat");var p=d("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:p},s.setConvert(l._ax,f.layout),d("multiselect");var y=d("constraintrange");y&&(l.constraintrange=t.cleanRanges(y,l))}}W.exports=function(c,l,u,f){function d(b,x){return T.coerce(c,l,e,b,x)}var w=c.dimensions;Array.isArray(w)&&w.length>n&&(T.log("parcoords traces support up to "+n+" dimensions at the moment"),w.splice(n));var v=h(c,l,{name:"dimensions",layout:f,handleItemDefaults:i}),p=function(b,x,_,g,A){var M=A("line.color",_);if(k(b,"line")&&T.isArrayOrTypedArray(M)){if(M.length)return A("line.colorscale"),r(b,x,g,A,{prefix:"line.",cLetter:"c"}),M.length;x.line.color=_}return 1/0}(c,l,u,f,d);m(l,f,d),Array.isArray(v)&&v.length||(l.visible=!1),a(l,v,"values",p);var y={family:f.font.family,size:Math.round(f.font.size/1.2),color:f.font.color};T.coerceFont(d,"labelfont",y),T.coerceFont(d,"tickfont",y),T.coerceFont(d,"rangefont",y),d("labelangle"),d("labelside"),d("unselected.line.color"),d("unselected.line.opacity")}},1602:function(W,I,o){var T=o(71828).isTypedArray;I.convertTypedArray=function(k){return T(k)?Array.prototype.slice.call(k):k},I.isOrdinal=function(k){return!!k.tickvals},I.isVisible=function(k){return k.visible||!("visible"in k)}},67618:function(W,I,o){var T=o(71791);T.plot=o(21341),W.exports=T},83398:function(W,I,o){var T=o(56068),k=T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),r=T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),m=o(25706).maxDimensionCount,h=o(71828),s=1e-6,e=new Uint8Array(4),t=new Uint8Array(4),n={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function a(p,y,b,x,_){var g=p._gl;g.enable(g.SCISSOR_TEST),g.scissor(y,b,x,_),p.clear({color:[0,0,0,0],depth:1})}function i(p,y,b,x,_,g){var A=g.key;b.drawCompleted||(function(M){M.read({x:0,y:0,width:1,height:1,data:e})}(p),b.drawCompleted=!0),function M(L){var E=Math.min(x,_-L*x);L===0&&(window.cancelAnimationFrame(b.currentRafs[A]),delete b.currentRafs[A],a(p,g.scissorX,g.scissorY,g.scissorWidth,g.viewBoxSize[1])),b.clearOnly||(g.count=2*E,g.offset=2*L*x,y(g),L*x+E<_&&(b.currentRafs[A]=window.requestAnimationFrame(function(){M(L+1)})),b.drawCompleted=!1)}(0)}function c(p,y){for(var b=new Array(256),x=0;x<256;x++)b[x]=p(x/255).concat(y);return b}function l(p,y){return(p>>>8*y)%256/255}function u(p,y,b){for(var x=new Array(8*y),_=0,g=0;g<y;g++)for(var A=0;A<2;A++)for(var M=0;M<4;M++){var L=4*p+M,E=b[64*g+L];L===63&&A===0&&(E*=-1),x[_++]=E}return x}function f(p){var y="0"+p;return y.substr(y.length-2)}function d(p){return p<m?"p"+f(p+1)+"_"+f(p+4):"colors"}function w(p,y,b,x,_,g,A,M,L,E,S,O,P,U){for(var R=[[],[]],j=0;j<64;j++)R[0][j]=j===_?1:0,R[1][j]=j===g?1:0;A*=U,M*=U,L*=U,E*=U;var B=p.lines.canvasOverdrag*U,z=p.domain,G=p.canvasWidth*U,V=p.canvasHeight*U,et=p.pad.l*U,J=p.pad.b*U,X=p.layoutHeight*U,Y=p.layoutWidth*U,Z=p.deselectedLines.color,tt=p.deselectedLines.opacity;return h.extendFlat({key:S,resolution:[G,V],viewBoxPos:[A+B,M],viewBoxSize:[L,E],i0:_,i1:g,dim0A:R[0].slice(0,16),dim0B:R[0].slice(16,32),dim0C:R[0].slice(32,48),dim0D:R[0].slice(48,64),dim1A:R[1].slice(0,16),dim1B:R[1].slice(16,32),dim1C:R[1].slice(32,48),dim1D:R[1].slice(48,64),drwLayer:O,contextColor:[Z[0]/255,Z[1]/255,Z[2]/255,tt!=="auto"?Z[3]*tt:Math.max(.00392156862745098,Math.pow(1/p.lines.color.length,.3333333333333333))],scissorX:(x===y?0:A+B)+(et-B)+Y*z.x[0],scissorWidth:(x===b?G-A+B:L+.5)+(x===y?A+B:0),scissorY:M+J+X*z.y[0],scissorHeight:E,viewportX:et-B+Y*z.x[0],viewportY:J+X*z.y[0],viewportWidth:G,viewportHeight:V},P)}function v(p){var y=2047,b=Math.max(0,Math.floor(p[0]*y),0),x=Math.min(y,Math.ceil(p[1]*y),y);return[Math.min(b,x),Math.max(b,x)]}W.exports=function(p,y){var b,x,_,g,A,M=y.context,L=y.pick,E=y.regl,S=E._gl,O=S.getParameter(S.ALIASED_LINE_WIDTH_RANGE),P=Math.max(O[0],Math.min(O[1],y.viewModel.plotGlPixelRatio)),U={currentRafs:{},drawCompleted:!0,clearOnly:!1},R=function(V){for(var et={},J=0;J<=m;J+=4)et[d(J)]=V.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return et}(E),j=E.texture(n),B=[];G(y);var z=E({profile:!1,blend:{enable:M,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!M,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:k,frag:r,primitive:"lines",lineWidth:P,attributes:R,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:j,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function G(V){b=V.model,x=V.viewModel,_=x.dimensions.slice(),g=_[0]?_[0].values.length:0;var et=b.lines,J=L?et.color.map(function(Y,Z){return Z/et.color.length}):et.color,X=function(Y,Z,tt){for(var rt,nt=new Array(Y*(m+4)),ot=0,ct=0;ct<Y;ct++){for(var pt=0;pt<m;pt++)nt[ot++]=pt<Z.length?Z[pt].paddedUnitValues[ct]:.5;nt[ot++]=l(ct,2),nt[ot++]=l(ct,1),nt[ot++]=l(ct,0),nt[ot++]=(rt=tt[ct],Math.max(s,Math.min(.999999,rt)))}return nt}(g,_,J);(function(Y,Z,tt){for(var rt=0;rt<=m;rt+=4)Y[d(rt)](u(rt/4,Z,tt))})(R,g,X),M||L||(j=E.texture(h.extendFlat({data:c(b.unitToColor,255)},n)))}return{render:function(V,et,J){var X,Y,Z,tt=V.length,rt=1/0,nt=-1/0;for(X=0;X<tt;X++)V[X].dim0.canvasX<rt&&(rt=V[X].dim0.canvasX,Y=X),V[X].dim1.canvasX>nt&&(nt=V[X].dim1.canvasX,Z=X);tt===0&&a(E,0,0,b.canvasWidth,b.canvasHeight);var ot=function(st){var at,ht,Lt,Mt=[[],[]];for(Lt=0;Lt<64;Lt++){var _t=!st&&Lt<_.length?_[Lt].brush.filter.getBounds():[-1/0,1/0];Mt[0][Lt]=_t[0],Mt[1][Lt]=_t[1]}var St=new Array(16384);for(at=0;at<16384;at++)St[at]=255;if(!st)for(at=0;at<_.length;at++){var Dt=at%8,ut=(at-Dt)/8,Tt=Math.pow(2,Dt),bt=_[at].brush.filter.get();if(!(bt.length<2)){var It=v(bt[0])[1];for(ht=1;ht<bt.length;ht++){var zt=v(bt[ht]);for(Lt=It+1;Lt<zt[0];Lt++)St[8*Lt+ut]&=~Tt;It=Math.max(It,zt[1])}}}var Ft={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:St};return A?A(Ft):A=E.texture(Ft),{maskTexture:A,maskHeight:2048,loA:Mt[0].slice(0,16),loB:Mt[0].slice(16,32),loC:Mt[0].slice(32,48),loD:Mt[0].slice(48,64),hiA:Mt[1].slice(0,16),hiB:Mt[1].slice(16,32),hiC:Mt[1].slice(32,48),hiD:Mt[1].slice(48,64)}}(M);for(X=0;X<tt;X++){var ct=V[X],pt=ct.dim0.crossfilterDimensionIndex,gt=ct.dim1.crossfilterDimensionIndex,kt=ct.canvasX,yt=ct.canvasY,mt=kt+ct.panelSizeX,Ot=ct.plotGlPixelRatio;if(et||!B[pt]||B[pt][0]!==kt||B[pt][1]!==mt){B[pt]=[kt,mt];var vt=w(b,Y,Z,X,pt,gt,kt,yt,ct.panelSizeX,ct.panelSizeY,ct.dim0.crossfilterDimensionIndex,M?0:L?2:1,ot,Ot);U.clearOnly=J;var xt=et?b.lines.blockLineCount:g;i(E,z,U,xt,g,vt)}}},readPixel:function(V,et){return E.read({x:V,y:et,width:1,height:1,data:t}),t},readPixels:function(V,et,J,X){var Y=new Uint8Array(4*J*X);return E.read({x:V,y:et,width:J,height:X,data:Y}),Y},destroy:function(){for(var V in p.style["pointer-events"]="none",j.destroy(),A&&A.destroy(),R)R[V].destroy()},update:G}}},94397:function(W){W.exports=function(I,o,T,k){var r,m;for(k||(k=1/0),r=0;r<o.length;r++)(m=o[r]).visible&&(k=Math.min(k,m[T].length));for(k===1/0&&(k=0),I._length=k,r=0;r<o.length;r++)(m=o[r]).visible&&(m._length=k);return k}},17171:function(W,I,o){var T=o(39898),k=o(71828),r=k.numberFormat,m=o(36652),h=o(89298),s=k.strRotate,e=k.strTranslate,t=o(63893),n=o(91424),a=o(21081),i=o(28984),c=i.keyFun,l=i.repeat,u=i.unwrap,f=o(1602),d=o(25706),w=o(57920),v=o(83398);function p(j,B,z){return k.aggNums(j,null,B,z)}function y(j,B){return x(p(Math.min,j,B),p(Math.max,j,B))}function b(j){var B=j.range;return B?x(B[0],B[1]):y(j.values,j._length)}function x(j,B){return!isNaN(j)&&isFinite(j)||(j=0),!isNaN(B)&&isFinite(B)||(B=0),j===B&&(j===0?(j-=1,B+=1):(j*=.9,B*=1.1)),[j,B]}function _(j,B,z,G,V){var et,J,X=b(z);return G?T.scale.ordinal().domain(G.map((et=r(z.tickformat),J=V,J?function(Y,Z){var tt=J[Z];return tt??et(Y)}:et))).range(G.map(function(Y){var Z=(Y-X[0])/(X[1]-X[0]);return j-B+Z*(2*B-j)})):T.scale.linear().domain(X).range([j-B,B])}function g(j){if(j.tickvals){var B=b(j);return T.scale.ordinal().domain(j.tickvals).range(j.tickvals.map(function(z){return(z-B[0])/(B[1]-B[0])}))}}function A(j){var B=j.map(function(V){return V[0]}),z=j.map(function(V){var et=m(V[1]);return T.rgb("rgb("+et[0]+","+et[1]+","+et[2]+")")}),G="rgb".split("").map(function(V){return T.scale.linear().clamp(!0).domain(B).range(z.map((et=V,function(J){return J[et]})));var et});return function(V){return G.map(function(et){return et(V)})}}function M(j){return j.dimensions.some(function(B){return B.brush.filterSpecified})}function L(j,B,z){var G=u(B),V=G.trace,et=f.convertTypedArray(G.lineColor),J=V.line,X={color:m(V.unselected.line.color),opacity:V.unselected.line.opacity},Y=a.extractOpts(J),Z=Y.reversescale?a.flipScale(G.cscale):G.cscale,tt=V.domain,rt=V.dimensions,nt=j.width,ot=V.labelangle,ct=V.labelside,pt=V.labelfont,gt=V.tickfont,kt=V.rangefont,yt=k.extendDeepNoArrays({},J,{color:et.map(T.scale.linear().domain(b({values:et,range:[Y.min,Y.max],_length:V._length}))),blockLineCount:d.blockLineCount,canvasOverdrag:d.overdrag*d.canvasPixelRatio}),mt=Math.floor(nt*(tt.x[1]-tt.x[0])),Ot=Math.floor(j.height*(tt.y[1]-tt.y[0])),vt=j.margin||{l:80,r:80,t:100,b:80},xt=mt,st=Ot;return{key:z,colCount:rt.filter(f.isVisible).length,dimensions:rt,tickDistance:d.tickDistance,unitToColor:A(Z),lines:yt,deselectedLines:X,labelAngle:ot,labelSide:ct,labelFont:pt,tickFont:gt,rangeFont:kt,layoutWidth:nt,layoutHeight:j.height,domain:tt,translateX:tt.x[0]*nt,translateY:j.height-tt.y[1]*j.height,pad:vt,canvasWidth:xt*d.canvasPixelRatio+2*yt.canvasOverdrag,canvasHeight:st*d.canvasPixelRatio,width:xt,height:st,canvasPixelRatio:d.canvasPixelRatio}}function E(j,B,z){var G=z.width,V=z.height,et=z.dimensions,J=z.canvasPixelRatio,X=function(nt){return G*nt/Math.max(1,z.colCount-1)},Y=d.verticalPadding/V,Z=function(nt,ot){return T.scale.linear().range([ot,nt-ot])}(V,d.verticalPadding),tt={key:z.key,xScale:X,model:z,inBrushDrag:!1},rt={};return tt.dimensions=et.filter(f.isVisible).map(function(nt,ot){var ct=function(_t,St){return T.scale.linear().domain(b(_t)).range([St,1-St])}(nt,Y),pt=rt[nt.label];rt[nt.label]=(pt||0)+1;var gt=nt.label+(pt?"__"+pt:""),kt=nt.constraintrange,yt=kt&&kt.length;yt&&!Array.isArray(kt[0])&&(kt=[kt]);var mt=yt?kt.map(function(_t){return _t.map(ct)}):[[-1/0,1/0]],Ot=nt.values;Ot.length>nt._length&&(Ot=Ot.slice(0,nt._length));var vt,xt=nt.tickvals;function st(_t,St){return{val:_t,text:vt[St]}}function at(_t,St){return _t.val-St.val}if(Array.isArray(xt)&&xt.length){vt=nt.ticktext,Array.isArray(vt)&&vt.length?vt.length>xt.length?vt=vt.slice(0,xt.length):xt.length>vt.length&&(xt=xt.slice(0,vt.length)):vt=xt.map(r(nt.tickformat));for(var ht=1;ht<xt.length;ht++)if(xt[ht]<xt[ht-1]){for(var Lt=xt.map(st).sort(at),Mt=0;Mt<xt.length;Mt++)xt[Mt]=Lt[Mt].val,vt[Mt]=Lt[Mt].text;break}}else xt=void 0;return Ot=f.convertTypedArray(Ot),{key:gt,label:nt.label,tickFormat:nt.tickformat,tickvals:xt,ticktext:vt,ordinal:f.isOrdinal(nt),multiselect:nt.multiselect,xIndex:ot,crossfilterDimensionIndex:ot,visibleIndex:nt._index,height:V,values:Ot,paddedUnitValues:Ot.map(ct),unitTickvals:xt&&xt.map(ct),xScale:X,x:X(ot),canvasX:X(ot)*J,unitToPaddedPx:Z,domainScale:_(V,d.verticalPadding,nt,xt,vt),ordinalScale:g(nt),parent:tt,model:z,brush:w.makeBrush(j,yt,mt,function(){j.linePickActive(!1)},function(){var _t=tt;_t.focusLayer&&_t.focusLayer.render(_t.panels,!0);var St=M(_t);!j.contextShown()&&St?(_t.contextLayer&&_t.contextLayer.render(_t.panels,!0),j.contextShown(!0)):j.contextShown()&&!St&&(_t.contextLayer&&_t.contextLayer.render(_t.panels,!0,!0),j.contextShown(!1))},function(_t){if(tt.focusLayer.render(tt.panels,!0),tt.pickLayer&&tt.pickLayer.render(tt.panels,!0),j.linePickActive(!0),B&&B.filterChanged){var St=ct.invert,Dt=_t.map(function(ut){return ut.map(St).sort(k.sorterAsc)}).sort(function(ut,Tt){return ut[0]-Tt[0]});B.filterChanged(tt.key,nt._index,Dt)}})}}),tt}function S(j){j.classed(d.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function O(j,B){var z=B==="top"?1:-1,G=j*Math.PI/180;return{dir:z,dx:Math.sin(G),dy:Math.cos(G),degrees:j}}function P(j,B,z){for(var G=B.panels||(B.panels=[]),V=j.data(),et=0;et<V.length-1;et++){var J=G[et]||(G[et]={}),X=V[et],Y=V[et+1];J.dim0=X,J.dim1=Y,J.canvasX=X.canvasX,J.panelSizeX=Y.canvasX-X.canvasX,J.panelSizeY=B.model.canvasHeight,J.y=0,J.canvasY=0,J.plotGlPixelRatio=z}}function U(j,B){return h.tickText(j._ax,B,!1).text}function R(j,B){if(j.ordinal)return"";var z=j.domainScale.domain(),G=z[B?z.length-1:0];return U(j.model.dimensions[j.visibleIndex],G)}W.exports=function(j,B,z,G){var V=j._context.staticPlot,et=j._fullLayout,J=et._toppaper,X=et._glcontainer,Y=j._context.plotGlPixelRatio,Z=j._fullLayout.paper_bgcolor;(function(_t){for(var St=0;St<_t.length;St++)for(var Dt=0;Dt<_t[St].length;Dt++)for(var ut=_t[St][Dt].trace,Tt=ut.dimensions,bt=0;bt<Tt.length;bt++){var It=Tt[bt].values,zt=Tt[bt]._ax;zt&&(zt.range?zt.range=x(zt.range[0],zt.range[1]):zt.range=y(It,ut._length),zt.dtick||(zt.dtick=.01*(Math.abs(zt.range[1]-zt.range[0])||1)),zt.tickformat=Tt[bt].tickformat,h.calcTicks(zt),zt.cleanRange())}})(B);var tt,rt,nt=(tt=!0,rt=!1,{linePickActive:function(_t){return arguments.length?tt=!!_t:tt},contextShown:function(_t){return arguments.length?rt=!!_t:rt}}),ot=B.filter(function(_t){return u(_t).trace.visible}).map(L.bind(0,z)).map(E.bind(0,nt,G));X.each(function(_t,St){return k.extendFlat(_t,ot[St])});var ct=X.selectAll(".gl-canvas").each(function(_t){_t.viewModel=ot[0],_t.viewModel.plotGlPixelRatio=Y,_t.viewModel.paperColor=Z,_t.model=_t.viewModel?_t.viewModel.model:null}),pt=null;ct.filter(function(_t){return _t.pick}).style("pointer-events",V?"none":"auto").on("mousemove",function(_t){if(nt.linePickActive()&&_t.lineLayer&&G&&G.hover){var St=T.event,Dt=this.width,ut=this.height,Tt=T.mouse(this),bt=Tt[0],It=Tt[1];if(bt<0||It<0||bt>=Dt||It>=ut)return;var zt=_t.lineLayer.readPixel(bt,ut-1-It),Ft=zt[3]!==0,$t=Ft?zt[2]+256*(zt[1]+256*zt[0]):null,Wt={x:bt,y:It,clientX:St.clientX,clientY:St.clientY,dataIndex:_t.model.key,curveNumber:$t};$t!==pt&&(Ft?G.hover(Wt):G.unhover&&G.unhover(Wt),pt=$t)}}),ct.style("opacity",function(_t){return _t.pick?0:1}),J.style("background","rgba(255, 255, 255, 0)");var gt=J.selectAll("."+d.cn.parcoords).data(ot,c);gt.exit().remove(),gt.enter().append("g").classed(d.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),gt.attr("transform",function(_t){return e(_t.model.translateX,_t.model.translateY)});var kt=gt.selectAll("."+d.cn.parcoordsControlView).data(l,c);kt.enter().append("g").classed(d.cn.parcoordsControlView,!0),kt.attr("transform",function(_t){return e(_t.model.pad.l,_t.model.pad.t)});var yt=kt.selectAll("."+d.cn.yAxis).data(function(_t){return _t.dimensions},c);yt.enter().append("g").classed(d.cn.yAxis,!0),kt.each(function(_t){P(yt,_t,Y)}),ct.each(function(_t){if(_t.viewModel){!_t.lineLayer||G?_t.lineLayer=v(this,_t):_t.lineLayer.update(_t),(_t.key||_t.key===0)&&(_t.viewModel[_t.key]=_t.lineLayer);var St=!_t.context||G;_t.lineLayer.render(_t.viewModel.panels,St)}}),yt.attr("transform",function(_t){return e(_t.xScale(_t.xIndex),0)}),yt.call(T.behavior.drag().origin(function(_t){return _t}).on("drag",function(_t){var St=_t.parent;nt.linePickActive(!1),_t.x=Math.max(-d.overdrag,Math.min(_t.model.width+d.overdrag,T.event.x)),_t.canvasX=_t.x*_t.model.canvasPixelRatio,yt.sort(function(Dt,ut){return Dt.x-ut.x}).each(function(Dt,ut){Dt.xIndex=ut,Dt.x=_t===Dt?Dt.x:Dt.xScale(Dt.xIndex),Dt.canvasX=Dt.x*Dt.model.canvasPixelRatio}),P(yt,St,Y),yt.filter(function(Dt){return Math.abs(_t.xIndex-Dt.xIndex)!==0}).attr("transform",function(Dt){return e(Dt.xScale(Dt.xIndex),0)}),T.select(this).attr("transform",e(_t.x,0)),yt.each(function(Dt,ut,Tt){Tt===_t.parent.key&&(St.dimensions[ut]=Dt)}),St.contextLayer&&St.contextLayer.render(St.panels,!1,!M(St)),St.focusLayer.render&&St.focusLayer.render(St.panels)}).on("dragend",function(_t){var St=_t.parent;_t.x=_t.xScale(_t.xIndex),_t.canvasX=_t.x*_t.model.canvasPixelRatio,P(yt,St,Y),T.select(this).attr("transform",function(Dt){return e(Dt.x,0)}),St.contextLayer&&St.contextLayer.render(St.panels,!1,!M(St)),St.focusLayer&&St.focusLayer.render(St.panels),St.pickLayer&&St.pickLayer.render(St.panels,!0),nt.linePickActive(!0),G&&G.axesMoved&&G.axesMoved(St.key,St.dimensions.map(function(Dt){return Dt.crossfilterDimensionIndex}))})),yt.exit().remove();var mt=yt.selectAll("."+d.cn.axisOverlays).data(l,c);mt.enter().append("g").classed(d.cn.axisOverlays,!0),mt.selectAll("."+d.cn.axis).remove();var Ot=mt.selectAll("."+d.cn.axis).data(l,c);Ot.enter().append("g").classed(d.cn.axis,!0),Ot.each(function(_t){var St=_t.model.height/_t.model.tickDistance,Dt=_t.domainScale,ut=Dt.domain();T.select(this).call(T.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(St,_t.tickFormat).tickValues(_t.ordinal?ut:null).tickFormat(function(Tt){return f.isOrdinal(_t)?Tt:U(_t.model.dimensions[_t.visibleIndex],Tt)}).scale(Dt)),n.font(Ot.selectAll("text"),_t.model.tickFont)}),Ot.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Ot.selectAll("text").style("text-shadow",t.makeTextShadow(Z)).style("cursor","default");var vt=mt.selectAll("."+d.cn.axisHeading).data(l,c);vt.enter().append("g").classed(d.cn.axisHeading,!0);var xt=vt.selectAll("."+d.cn.axisTitle).data(l,c);xt.enter().append("text").classed(d.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",V?"none":"auto"),xt.text(function(_t){return _t.label}).each(function(_t){var St=T.select(this);n.font(St,_t.model.labelFont),t.convertToTspans(St,j)}).attr("transform",function(_t){var St=O(_t.model.labelAngle,_t.model.labelSide),Dt=d.axisTitleOffset;return(St.dir>0?"":e(0,2*Dt+_t.model.height))+s(St.degrees)+e(-Dt*St.dx,-Dt*St.dy)}).attr("text-anchor",function(_t){var St=O(_t.model.labelAngle,_t.model.labelSide);return 2*Math.abs(St.dx)>Math.abs(St.dy)?St.dir*St.dx<0?"start":"end":"middle"});var st=mt.selectAll("."+d.cn.axisExtent).data(l,c);st.enter().append("g").classed(d.cn.axisExtent,!0);var at=st.selectAll("."+d.cn.axisExtentTop).data(l,c);at.enter().append("g").classed(d.cn.axisExtentTop,!0),at.attr("transform",e(0,-d.axisExtentOffset));var ht=at.selectAll("."+d.cn.axisExtentTopText).data(l,c);ht.enter().append("text").classed(d.cn.axisExtentTopText,!0).call(S),ht.text(function(_t){return R(_t,!0)}).each(function(_t){n.font(T.select(this),_t.model.rangeFont)});var Lt=st.selectAll("."+d.cn.axisExtentBottom).data(l,c);Lt.enter().append("g").classed(d.cn.axisExtentBottom,!0),Lt.attr("transform",function(_t){return e(0,_t.model.height+d.axisExtentOffset)});var Mt=Lt.selectAll("."+d.cn.axisExtentBottomText).data(l,c);Mt.enter().append("text").classed(d.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(S),Mt.text(function(_t){return R(_t,!1)}).each(function(_t){n.font(T.select(this),_t.model.rangeFont)}),w.ensureAxisBrush(mt,Z,j)}},21341:function(W,I,o){var T=o(17171),k=o(79749),r=o(1602).isVisible,m={};function h(s,e,t){var n=e.indexOf(t),a=s.indexOf(n);return a===-1&&(a+=e.length),a}(W.exports=function(s,e){var t=s._fullLayout;if(k(s,[],m)){var n={},a={},i={},c={},l=t._size;e.forEach(function(u,f){var d=u[0].trace;i[f]=d.index;var w=c[f]=d._fullInput.index;n[f]=s.data[w].dimensions,a[f]=s.data[w].dimensions.slice()}),T(s,e,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:function(u,f,d){var w=a[u][f],v=d.map(function(g){return g.slice()}),p="dimensions["+f+"].constraintrange",y=t._tracePreGUI[s._fullData[i[u]]._fullInput.uid];if(y[p]===void 0){var b=w.constraintrange;y[p]=b||null}var x=s._fullData[i[u]].dimensions[f];v.length?(v.length===1&&(v=v[0]),w.constraintrange=v,x.constraintrange=v.slice(),v=[v]):(delete w.constraintrange,delete x.constraintrange,v=null);var _={};_[p]=v,s.emit("plotly_restyle",[_,[c[u]]])},hover:function(u){s.emit("plotly_hover",u)},unhover:function(u){s.emit("plotly_unhover",u)},axesMoved:function(u,f){var d=function(w,v){return function(p,y){return h(w,v,p)-h(w,v,y)}}(f,a[u].filter(r));n[u].sort(d),a[u].filter(function(w){return!r(w)}).sort(function(w){return a[u].indexOf(w)}).forEach(function(w){n[u].splice(n[u].indexOf(w),1),n[u].splice(a[u].indexOf(w),0,w)}),s.emit("plotly_restyle",[{dimensions:[n[u]]},[c[u]]])}})}}).reglPrecompiled=m},34e3:function(W,I,o){var T=o(9012),k=o(27670).Y,r=o(41940),m=o(22399),h=o(5386).fF,s=o(5386).si,e=o(1426).extendFlat,t=o(79952).u,n=r({editType:"plot",arrayOk:!0,colorEditType:"plot"});W.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:e({},T.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:h({},{keys:["label","color","value","percent","text"]}),texttemplate:s({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:e({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:e({},n,{}),outsidetextfont:e({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:e({},n,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:e({},n,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(W,I,o){var T=o(74875);I.name="pie",I.plot=function(k,r,m,h){T.plotBasePlot(I.name,k,r,m,h)},I.clean=function(k,r,m,h){T.cleanBasePlot(I.name,k,r,m,h)}},32354:function(W,I,o){var T=o(92770),k=o(84267),r=o(7901),m={};function h(e){return function(t,n){return!!t&&!!(t=k(t)).isValid()&&(t=r.addOpacity(t,t.getAlpha()),e[n]||(e[n]=t),t)}}function s(e,t){var n,a=JSON.stringify(e),i=t[a];if(!i){for(i=e.slice(),n=0;n<e.length;n++)i.push(k(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)i.push(k(e[n]).darken(20).toHexString());t[a]=i}return i}W.exports={calc:function(e,t){var n,a,i=[],c=e._fullLayout,l=c.hiddenlabels||[],u=t.labels,f=t.marker.colors||[],d=t.values,w=t._length,v=t._hasValues&&w;if(t.dlabel)for(u=new Array(w),n=0;n<w;n++)u[n]=String(t.label0+n*t.dlabel);var p={},y=h(c["_"+t.type+"colormap"]),b=0,x=!1;for(n=0;n<w;n++){var _,g,A;if(v){if(_=d[n],!T(_))continue;_=+_}else _=1;(g=u[n])!==void 0&&g!==""||(g=n);var M=p[g=String(g)];M===void 0?(p[g]=i.length,(A=l.indexOf(g)!==-1)||(b+=_),i.push({v:_,label:g,color:y(f[n],g),i:n,pts:[n],hidden:A})):(x=!0,(a=i[M]).v+=_,a.pts.push(n),a.hidden||(b+=_),a.color===!1&&f[n]&&(a.color=y(f[n],g)))}return i=i.filter(function(L){return L.v>=0}),(t.type==="funnelarea"?x:t.sort)&&i.sort(function(L,E){return E.v-L.v}),i[0]&&(i[0].vTotal=b),i},crossTraceCalc:function(e,t){var n=(t||{}).type;n||(n="pie");var a=e._fullLayout,i=e.calcdata,c=a[n+"colorway"],l=a["_"+n+"colormap"];a["extend"+n+"colors"]&&(c=s(c,m));for(var u=0,f=0;f<i.length;f++){var d=i[f];if(d[0].trace.type===n)for(var w=0;w<d.length;w++){var v=d[w];v.color===!1&&(l[v.label]?v.color=l[v.label]:(l[v.label]=v.color=c[u%c.length],u++))}}},makePullColorFn:h,generateExtendedColors:s}},37434:function(W,I,o){var T=o(92770),k=o(71828),r=o(34e3),m=o(27670).c,h=o(90769).handleText,s=o(71828).coercePattern;function e(n,a){var i=Array.isArray(n),c=k.isArrayOrTypedArray(a),l=Math.min(i?n.length:1/0,c?a.length:1/0);if(isFinite(l)||(l=0),l&&c){for(var u,f=0;f<l;f++){var d=a[f];if(T(d)&&d>0){u=!0;break}}u||(l=0)}return{hasLabels:i,hasValues:c,len:l}}function t(n,a,i,c,l){c("marker.line.width")&&c("marker.line.color",l?void 0:i.paper_bgcolor);var u=c("marker.colors");s(c,"marker.pattern",u),n.marker&&!a.marker.pattern.fgcolor&&(a.marker.pattern.fgcolor=n.marker.colors),a.marker.pattern.bgcolor||(a.marker.pattern.bgcolor=i.paper_bgcolor)}W.exports={handleLabelsAndValues:e,handleMarkerDefaults:t,supplyDefaults:function(n,a,i,c){function l(x,_){return k.coerce(n,a,r,x,_)}var u=e(l("labels"),l("values")),f=u.len;if(a._hasLabels=u.hasLabels,a._hasValues=u.hasValues,!a._hasLabels&&a._hasValues&&(l("label0"),l("dlabel")),f){a._length=f,t(n,a,c,l,!0),l("scalegroup");var d,w=l("text"),v=l("texttemplate");if(v||(d=l("textinfo",Array.isArray(w)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),v||d&&d!=="none"){var p=l("textposition");h(n,a,c,l,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(p)||p==="auto"||p==="outside")&&l("automargin"),(p==="inside"||p==="auto"||Array.isArray(p))&&l("insidetextorientation")}m(a,c,l);var y=l("hole");if(l("title.text")){var b=l("title.position",y?"middle center":"top center");y||b!=="middle center"||(a.title.position="top center"),k.coerceFont(l,"title.font",c.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else a.visible=!1}}},20007:function(W,I,o){var T=o(23469).appendArrayMultiPointValues;W.exports=function(k,r){var m={curveNumber:r.index,pointNumbers:k.pts,data:r._input,fullData:r,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(m.pointNumber=m.i=k.pts[0]),T(m,r,k.pts),r.type==="funnelarea"&&(delete m.v,delete m.i),m}},22209:function(W,I,o){var T=o(91424),k=o(7901);W.exports=function(r,m,h,s){var e=h.marker.pattern;e&&e.shape?T.pointStyle(r,h,s,m):k.fill(r,m.color)}},53581:function(W,I,o){var T=o(71828);function k(r){return r.indexOf("e")!==-1?r.replace(/[.]?0+e/,"e"):r.indexOf(".")!==-1?r.replace(/[.]?0+$/,""):r}I.formatPiePercent=function(r,m){var h=k((100*r).toPrecision(3));return T.numSeparate(h,m)+"%"},I.formatPieValue=function(r,m){var h=k(r.toPrecision(10));return T.numSeparate(h,m)},I.getFirstFilled=function(r,m){if(Array.isArray(r))for(var h=0;h<m.length;h++){var s=r[m[h]];if(s||s===0||s==="")return s}},I.castOption=function(r,m){return Array.isArray(r)?I.getFirstFilled(r,m):r||void 0},I.getRotationAngle=function(r){return(r==="auto"?0:r)*Math.PI/180}},58810:function(W,I,o){W.exports={attributes:o(34e3),supplyDefaults:o(37434).supplyDefaults,supplyLayoutDefaults:o(92097),layoutAttributes:o(92774),calc:o(32354).calc,crossTraceCalc:o(32354).crossTraceCalc,plot:o(14575).plot,style:o(68357),styleOne:o(63463),moduleType:"trace",name:"pie",basePlotModule:o(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(W){W.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(W,I,o){var T=o(71828),k=o(92774);W.exports=function(r,m){function h(s,e){return T.coerce(r,m,k,s,e)}h("hiddenlabels"),h("piecolorway",m.colorway),h("extendpiecolors")}},14575:function(W,I,o){var T=o(39898),k=o(74875),r=o(30211),m=o(7901),h=o(91424),s=o(71828),e=s.strScale,t=s.strTranslate,n=o(63893),a=o(72597),i=a.recordMinTextSize,c=a.clearMinTextSize,l=o(97313).TEXTPAD,u=o(53581),f=o(20007),d=o(71828).isValidTextValue;function w(B,z,G){var V=G[0],et=V.cx,J=V.cy,X=V.trace,Y=X.type==="funnelarea";"_hasHoverLabel"in X||(X._hasHoverLabel=!1),"_hasHoverEvent"in X||(X._hasHoverEvent=!1),B.on("mouseover",function(Z){var tt=z._fullLayout,rt=z._fullData[X.index];if(!z._dragging&&tt.hovermode!==!1){var nt=rt.hoverinfo;if(Array.isArray(nt)&&(nt=r.castHoverinfo({hoverinfo:[u.castOption(nt,Z.pts)],_module:X._module},tt,0)),nt==="all"&&(nt="label+text+value+percent+name"),rt.hovertemplate||nt!=="none"&&nt!=="skip"&&nt){var ot=Z.rInscribed||0,ct=et+Z.pxmid[0]*(1-ot),pt=J+Z.pxmid[1]*(1-ot),gt=tt.separators,kt=[];if(nt&&nt.indexOf("label")!==-1&&kt.push(Z.label),Z.text=u.castOption(rt.hovertext||rt.text,Z.pts),nt&&nt.indexOf("text")!==-1){var yt=Z.text;s.isValidTextValue(yt)&&kt.push(yt)}Z.value=Z.v,Z.valueLabel=u.formatPieValue(Z.v,gt),nt&&nt.indexOf("value")!==-1&&kt.push(Z.valueLabel),Z.percent=Z.v/V.vTotal,Z.percentLabel=u.formatPiePercent(Z.percent,gt),nt&&nt.indexOf("percent")!==-1&&kt.push(Z.percentLabel);var mt=rt.hoverlabel,Ot=mt.font,vt=[];r.loneHover({trace:X,x0:ct-ot*V.r,x1:ct+ot*V.r,y:pt,_x0:Y?et+Z.TL[0]:ct-ot*V.r,_x1:Y?et+Z.TR[0]:ct+ot*V.r,_y0:Y?J+Z.TL[1]:pt-ot*V.r,_y1:Y?J+Z.BL[1]:pt+ot*V.r,text:kt.join("<br>"),name:rt.hovertemplate||nt.indexOf("name")!==-1?rt.name:void 0,idealAlign:Z.pxmid[0]<0?"left":"right",color:u.castOption(mt.bgcolor,Z.pts)||Z.color,borderColor:u.castOption(mt.bordercolor,Z.pts),fontFamily:u.castOption(Ot.family,Z.pts),fontSize:u.castOption(Ot.size,Z.pts),fontColor:u.castOption(Ot.color,Z.pts),nameLength:u.castOption(mt.namelength,Z.pts),textAlign:u.castOption(mt.align,Z.pts),hovertemplate:u.castOption(rt.hovertemplate,Z.pts),hovertemplateLabels:Z,eventData:[f(Z,rt)]},{container:tt._hoverlayer.node(),outerContainer:tt._paper.node(),gd:z,inOut_bbox:vt}),Z.bbox=vt[0],X._hasHoverLabel=!0}X._hasHoverEvent=!0,z.emit("plotly_hover",{points:[f(Z,rt)],event:T.event})}}),B.on("mouseout",function(Z){var tt=z._fullLayout,rt=z._fullData[X.index],nt=T.select(this).datum();X._hasHoverEvent&&(Z.originalEvent=T.event,z.emit("plotly_unhover",{points:[f(nt,rt)],event:T.event}),X._hasHoverEvent=!1),X._hasHoverLabel&&(r.loneUnhover(tt._hoverlayer.node()),X._hasHoverLabel=!1)}),B.on("click",function(Z){var tt=z._fullLayout,rt=z._fullData[X.index];z._dragging||tt.hovermode===!1||(z._hoverdata=[f(Z,rt)],r.click(z,T.event))})}function v(B,z,G){var V=u.castOption(B.insidetextfont.color,z.pts);!V&&B._input.textfont&&(V=u.castOption(B._input.textfont.color,z.pts));var et=u.castOption(B.insidetextfont.family,z.pts)||u.castOption(B.textfont.family,z.pts)||G.family,J=u.castOption(B.insidetextfont.size,z.pts)||u.castOption(B.textfont.size,z.pts)||G.size;return{color:V||m.contrast(z.color),family:et,size:J}}function p(B,z){for(var G,V,et=0;et<B.length;et++)if((V=(G=B[et][0]).trace).title.text){var J=V.title.text;V._meta&&(J=s.templateString(J,V._meta));var X=h.tester.append("text").attr("data-notex",1).text(J).call(h.font,V.title.font).call(n.convertToTspans,z),Y=h.bBox(X.node(),!0);G.titleBox={width:Y.width,height:Y.height},X.remove()}}function y(B,z,G){var V=G.r||z.rpx1,et=z.rInscribed;if(z.startangle===z.stopangle)return{rCenter:1-et,scale:0,rotate:0,textPosAngle:0};var J,X=z.ring,Y=X===1&&Math.abs(z.startangle-z.stopangle)===2*Math.PI,Z=z.halfangle,tt=z.midangle,rt=G.trace.insidetextorientation,nt=rt==="horizontal",ot=rt==="tangential",ct=rt==="radial",pt=rt==="auto",gt=[];if(!pt){var kt,yt=function(at,ht){if(function(St,Dt){var ut=St.startangle,Tt=St.stopangle;return ut>Dt&&Dt>Tt||ut<Dt&&Dt<Tt}(z,at)){var Lt=Math.abs(at-z.startangle),Mt=Math.abs(at-z.stopangle),_t=Lt<Mt?Lt:Mt;(J=ht==="tan"?x(B,V,X,_t,0):b(B,V,X,_t,Math.PI/2)).textPosAngle=at,gt.push(J)}};if(nt||ot){for(kt=4;kt>=-4;kt-=2)yt(Math.PI*kt,"tan");for(kt=4;kt>=-4;kt-=2)yt(Math.PI*(kt+1),"tan")}if(nt||ct){for(kt=4;kt>=-4;kt-=2)yt(Math.PI*(kt+1.5),"rad");for(kt=4;kt>=-4;kt-=2)yt(Math.PI*(kt+.5),"rad")}}if(Y||pt||nt){var mt=Math.sqrt(B.width*B.width+B.height*B.height);if((J={scale:et*V*2/mt,rCenter:1-et,rotate:0}).textPosAngle=(z.startangle+z.stopangle)/2,J.scale>=1)return J;gt.push(J)}(pt||ct)&&((J=b(B,V,X,Z,tt)).textPosAngle=(z.startangle+z.stopangle)/2,gt.push(J)),(pt||ot)&&((J=x(B,V,X,Z,tt)).textPosAngle=(z.startangle+z.stopangle)/2,gt.push(J));for(var Ot=0,vt=0,xt=0;xt<gt.length;xt++){var st=gt[xt].scale;if(vt<st&&(vt=st,Ot=xt),!pt&&vt>=1)break}return gt[Ot]}function b(B,z,G,V,et){z=Math.max(0,z-2*l);var J=B.width/B.height,X=A(J,V,z,G);return{scale:2*X/B.height,rCenter:_(J,X/z),rotate:g(et)}}function x(B,z,G,V,et){z=Math.max(0,z-2*l);var J=B.height/B.width,X=A(J,V,z,G);return{scale:2*X/B.width,rCenter:_(J,X/z),rotate:g(et+Math.PI/2)}}function _(B,z){return Math.cos(z)-B*z}function g(B){return(180/Math.PI*B+720)%180-90}function A(B,z,G,V){var et=B+1/(2*Math.tan(z));return G*Math.min(1/(Math.sqrt(et*et+.5)+et),V/(Math.sqrt(B*B+V/2)+B))}function M(B,z){return B.v!==z.vTotal||z.trace.hole?Math.min(1/(1+1/Math.sin(B.halfangle)),B.ring/2):1}function L(B,z){var G=z.pxmid[0],V=z.pxmid[1],et=B.width/2,J=B.height/2;return G<0&&(et*=-1),V<0&&(J*=-1),{scale:1,rCenter:1,rotate:0,x:et+Math.abs(J)*(et>0?1:-1)/2,y:J/(1+G*G/(V*V)),outside:!0}}function E(B,z){var G,V,et,J=B.trace,X={x:B.cx,y:B.cy},Y={tx:0,ty:0};Y.ty+=J.title.font.size,et=O(J),J.title.position.indexOf("top")!==-1?(X.y-=(1+et)*B.r,Y.ty-=B.titleBox.height):J.title.position.indexOf("bottom")!==-1&&(X.y+=(1+et)*B.r);var Z,tt=B.r/((Z=B.trace.aspectratio)===void 0?1:Z),rt=z.w*(J.domain.x[1]-J.domain.x[0])/2;return J.title.position.indexOf("left")!==-1?(rt+=tt,X.x-=(1+et)*tt,Y.tx+=B.titleBox.width/2):J.title.position.indexOf("center")!==-1?rt*=2:J.title.position.indexOf("right")!==-1&&(rt+=tt,X.x+=(1+et)*tt,Y.tx-=B.titleBox.width/2),G=rt/B.titleBox.width,V=S(B,z)/B.titleBox.height,{x:X.x,y:X.y,scale:Math.min(G,V),tx:Y.tx,ty:Y.ty}}function S(B,z){var G=B.trace,V=z.h*(G.domain.y[1]-G.domain.y[0]);return Math.min(B.titleBox.height,V/2)}function O(B){var z,G=B.pull;if(!G)return 0;if(Array.isArray(G))for(G=0,z=0;z<B.pull.length;z++)B.pull[z]>G&&(G=B.pull[z]);return G}function P(B,z){for(var G=[],V=0;V<B.length;V++){var et=B[V][0],J=et.trace,X=J.domain,Y=z.w*(X.x[1]-X.x[0]),Z=z.h*(X.y[1]-X.y[0]);J.title.text&&J.title.position!=="middle center"&&(Z-=S(et,z));var tt=Y/2,rt=Z/2;J.type!=="funnelarea"||J.scalegroup||(rt/=J.aspectratio),et.r=Math.min(tt,rt)/(1+O(J)),et.cx=z.l+z.w*(J.domain.x[1]+J.domain.x[0])/2,et.cy=z.t+z.h*(1-J.domain.y[0])-Z/2,J.title.text&&J.title.position.indexOf("bottom")!==-1&&(et.cy-=S(et,z)),J.scalegroup&&G.indexOf(J.scalegroup)===-1&&G.push(J.scalegroup)}(function(nt,ot){for(var ct,pt,gt,kt=0;kt<ot.length;kt++){var yt=1/0,mt=ot[kt];for(pt=0;pt<nt.length;pt++)if((gt=(ct=nt[pt][0]).trace).scalegroup===mt){var Ot;if(gt.type==="pie")Ot=ct.r*ct.r;else if(gt.type==="funnelarea"){var vt,xt;gt.aspectratio>1?xt=(vt=ct.r)/gt.aspectratio:vt=(xt=ct.r)*gt.aspectratio,Ot=(vt*=(1+gt.baseratio)/2)*xt}yt=Math.min(yt,Ot/ct.vTotal)}for(pt=0;pt<nt.length;pt++)if((gt=(ct=nt[pt][0]).trace).scalegroup===mt){var st=yt*ct.vTotal;gt.type==="funnelarea"&&(st/=(1+gt.baseratio)/2,st/=gt.aspectratio),ct.r=Math.sqrt(st)}}})(B,G)}function U(B,z){return[B*Math.sin(z),-B*Math.cos(z)]}function R(B,z,G){var V=B._fullLayout,et=G.trace,J=et.texttemplate,X=et.textinfo;if(!J&&X&&X!=="none"){var Y,Z=X.split("+"),tt=function(Ot){return Z.indexOf(Ot)!==-1},rt=tt("label"),nt=tt("text"),ot=tt("value"),ct=tt("percent"),pt=V.separators;if(Y=rt?[z.label]:[],nt){var gt=u.getFirstFilled(et.text,z.pts);d(gt)&&Y.push(gt)}ot&&Y.push(u.formatPieValue(z.v,pt)),ct&&Y.push(u.formatPiePercent(z.v/G.vTotal,pt)),z.text=Y.join("<br>")}if(J){var kt=s.castOption(et,z.i,"texttemplate");if(kt){var yt=function(Ot){return{label:Ot.label,value:Ot.v,valueLabel:u.formatPieValue(Ot.v,V.separators),percent:Ot.v/G.vTotal,percentLabel:u.formatPiePercent(Ot.v/G.vTotal,V.separators),color:Ot.color,text:Ot.text,customdata:s.castOption(et,Ot.i,"customdata")}}(z),mt=u.getFirstFilled(et.text,z.pts);(d(mt)||mt==="")&&(yt.text=mt),z.text=s.texttemplateString(kt,yt,B._fullLayout._d3locale,yt,et._meta||{})}else z.text=""}}function j(B,z){var G=B.rotate*Math.PI/180,V=Math.cos(G),et=Math.sin(G),J=(z.left+z.right)/2,X=(z.top+z.bottom)/2;B.textX=J*V-X*et,B.textY=J*et+X*V,B.noCenter=!0}W.exports={plot:function(B,z){var G=B._context.staticPlot,V=B._fullLayout,et=V._size;c("pie",V),p(z,B),P(z,et);var J=s.makeTraceGroups(V._pielayer,z,"trace").each(function(X){var Y=T.select(this),Z=X[0],tt=Z.trace;(function(rt){var nt,ot,ct,pt=rt[0],gt=pt.r,kt=pt.trace,yt=u.getRotationAngle(kt.rotation),mt=2*Math.PI/pt.vTotal,Ot="px0",vt="px1";if(kt.direction==="counterclockwise"){for(nt=0;nt<rt.length&&rt[nt].hidden;nt++);if(nt===rt.length)return;yt+=mt*rt[nt].v,mt*=-1,Ot="px1",vt="px0"}for(ct=U(gt,yt),nt=0;nt<rt.length;nt++)(ot=rt[nt]).hidden||(ot[Ot]=ct,ot.startangle=yt,yt+=mt*ot.v/2,ot.pxmid=U(gt,yt),ot.midangle=yt,ct=U(gt,yt+=mt*ot.v/2),ot.stopangle=yt,ot[vt]=ct,ot.largeArc=ot.v>pt.vTotal/2?1:0,ot.halfangle=Math.PI*Math.min(ot.v/pt.vTotal,.5),ot.ring=1-kt.hole,ot.rInscribed=M(ot,pt))})(X),Y.attr("stroke-linejoin","round"),Y.each(function(){var rt=T.select(this).selectAll("g.slice").data(X);rt.enter().append("g").classed("slice",!0),rt.exit().remove();var nt=[[[],[]],[[],[]]],ot=!1;rt.each(function(vt,xt){if(vt.hidden)T.select(this).selectAll("path,g").remove();else{vt.pointNumber=vt.i,vt.curveNumber=tt.index,nt[vt.pxmid[1]<0?0:1][vt.pxmid[0]<0?0:1].push(vt);var st=Z.cx,at=Z.cy,ht=T.select(this),Lt=ht.selectAll("path.surface").data([vt]);if(Lt.enter().append("path").classed("surface",!0).style({"pointer-events":G?"none":"all"}),ht.call(w,B,X),tt.pull){var Mt=+u.castOption(tt.pull,vt.pts)||0;Mt>0&&(st+=Mt*vt.pxmid[0],at+=Mt*vt.pxmid[1])}vt.cxFinal=st,vt.cyFinal=at;var _t=tt.hole;if(vt.v===Z.vTotal){var St="M"+(st+vt.px0[0])+","+(at+vt.px0[1])+It(vt.px0,vt.pxmid,!0,1)+It(vt.pxmid,vt.px0,!0,1)+"Z";_t?Lt.attr("d","M"+(st+_t*vt.px0[0])+","+(at+_t*vt.px0[1])+It(vt.px0,vt.pxmid,!1,_t)+It(vt.pxmid,vt.px0,!1,_t)+"Z"+St):Lt.attr("d",St)}else{var Dt=It(vt.px0,vt.px1,!0,1);if(_t){var ut=1-_t;Lt.attr("d","M"+(st+_t*vt.px1[0])+","+(at+_t*vt.px1[1])+It(vt.px1,vt.px0,!1,_t)+"l"+ut*vt.px0[0]+","+ut*vt.px0[1]+Dt+"Z")}else Lt.attr("d","M"+st+","+at+"l"+vt.px0[0]+","+vt.px0[1]+Dt+"Z")}R(B,vt,Z);var Tt=u.castOption(tt.textposition,vt.pts),bt=ht.selectAll("g.slicetext").data(vt.text&&Tt!=="none"?[0]:[]);bt.enter().append("g").classed("slicetext",!0),bt.exit().remove(),bt.each(function(){var zt=s.ensureSingle(T.select(this),"text","",function(ye){ye.attr("data-notex",1)}),Ft=s.ensureUniformFontSize(B,Tt==="outside"?function(ye,ve,ie){return{color:u.castOption(ye.outsidetextfont.color,ve.pts)||u.castOption(ye.textfont.color,ve.pts)||ie.color,family:u.castOption(ye.outsidetextfont.family,ve.pts)||u.castOption(ye.textfont.family,ve.pts)||ie.family,size:u.castOption(ye.outsidetextfont.size,ve.pts)||u.castOption(ye.textfont.size,ve.pts)||ie.size}}(tt,vt,V.font):v(tt,vt,V.font));zt.text(vt.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(h.font,Ft).call(n.convertToTspans,B);var $t,Wt=h.bBox(zt.node());if(Tt==="outside")$t=L(Wt,vt);else if($t=y(Wt,vt,Z),Tt==="auto"&&$t.scale<1){var Xt=s.ensureUniformFontSize(B,tt.outsidetextfont);zt.call(h.font,Xt),$t=L(Wt=h.bBox(zt.node()),vt)}var ae=$t.textPosAngle,Qt=ae===void 0?vt.pxmid:U(Z.r,ae);if($t.targetX=st+Qt[0]*$t.rCenter+($t.x||0),$t.targetY=at+Qt[1]*$t.rCenter+($t.y||0),j($t,Wt),$t.outside){var de=$t.targetY;vt.yLabelMin=de-Wt.height/2,vt.yLabelMid=de,vt.yLabelMax=de+Wt.height/2,vt.labelExtraX=0,vt.labelExtraY=0,ot=!0}$t.fontSize=Ft.size,i(tt.type,$t,V),X[xt].transform=$t,s.setTransormAndDisplay(zt,$t)})}function It(zt,Ft,$t,Wt){var Xt=Wt*(Ft[0]-zt[0]),ae=Wt*(Ft[1]-zt[1]);return"a"+Wt*Z.r+","+Wt*Z.r+" 0 "+vt.largeArc+($t?" 1 ":" 0 ")+Xt+","+ae}});var ct=T.select(this).selectAll("g.titletext").data(tt.title.text?[0]:[]);if(ct.enter().append("g").classed("titletext",!0),ct.exit().remove(),ct.each(function(){var vt,xt=s.ensureSingle(T.select(this),"text","",function(at){at.attr("data-notex",1)}),st=tt.title.text;tt._meta&&(st=s.templateString(st,tt._meta)),xt.text(st).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(h.font,tt.title.font).call(n.convertToTspans,B),vt=tt.title.position==="middle center"?function(at){var ht=Math.sqrt(at.titleBox.width*at.titleBox.width+at.titleBox.height*at.titleBox.height);return{x:at.cx,y:at.cy,scale:at.trace.hole*at.r*2/ht,tx:0,ty:-at.titleBox.height/2+at.trace.title.font.size}}(Z):E(Z,et),xt.attr("transform",t(vt.x,vt.y)+e(Math.min(1,vt.scale))+t(vt.tx,vt.ty))}),ot&&function(vt,xt){var st,at,ht,Lt,Mt,_t,St,Dt,ut,Tt,bt,It,zt;function Ft(ae,Qt){return ae.pxmid[1]-Qt.pxmid[1]}function $t(ae,Qt){return Qt.pxmid[1]-ae.pxmid[1]}function Wt(ae,Qt){Qt||(Qt={});var de,ye,ve,ie,se=Qt.labelExtraY+(at?Qt.yLabelMax:Qt.yLabelMin),ke=at?ae.yLabelMin:ae.yLabelMax,Ae=at?ae.yLabelMax:ae.yLabelMin,Ie=ae.cyFinal+Mt(ae.px0[1],ae.px1[1]),Te=se-ke;if(Te*St>0&&(ae.labelExtraY=Te),Array.isArray(xt.pull))for(ye=0;ye<Tt.length;ye++)(ve=Tt[ye])===ae||(u.castOption(xt.pull,ae.pts)||0)>=(u.castOption(xt.pull,ve.pts)||0)||((ae.pxmid[1]-ve.pxmid[1])*St>0?(Te=ve.cyFinal+Mt(ve.px0[1],ve.px1[1])-ke-ae.labelExtraY)*St>0&&(ae.labelExtraY+=Te):(Ae+ae.labelExtraY-Ie)*St>0&&(de=3*_t*Math.abs(ye-Tt.indexOf(ae)),(ie=ve.cxFinal+Lt(ve.px0[0],ve.px1[0])+de-(ae.cxFinal+ae.pxmid[0])-ae.labelExtraX)*_t>0&&(ae.labelExtraX+=ie)))}for(at=0;at<2;at++)for(ht=at?Ft:$t,Mt=at?Math.max:Math.min,St=at?1:-1,st=0;st<2;st++){for(Lt=st?Math.max:Math.min,_t=st?1:-1,(Dt=vt[at][st]).sort(ht),ut=vt[1-at][st],Tt=ut.concat(Dt),It=[],bt=0;bt<Dt.length;bt++)Dt[bt].yLabelMid!==void 0&&It.push(Dt[bt]);for(zt=!1,bt=0;at&&bt<ut.length;bt++)if(ut[bt].yLabelMid!==void 0){zt=ut[bt];break}for(bt=0;bt<It.length;bt++){var Xt=bt&&It[bt-1];zt&&!bt&&(Xt=zt),Wt(It[bt],Xt)}}}(nt,tt),function(vt,xt){vt.each(function(st){var at=T.select(this);if(st.labelExtraX||st.labelExtraY){var ht=at.select("g.slicetext text");st.transform.targetX+=st.labelExtraX,st.transform.targetY+=st.labelExtraY,s.setTransormAndDisplay(ht,st.transform);var Lt=st.cxFinal+st.pxmid[0],Mt="M"+Lt+","+(st.cyFinal+st.pxmid[1]),_t=(st.yLabelMax-st.yLabelMin)*(st.pxmid[0]<0?-1:1)/4;if(st.labelExtraX){var St=st.labelExtraX*st.pxmid[1]/st.pxmid[0],Dt=st.yLabelMid+st.labelExtraY-(st.cyFinal+st.pxmid[1]);Math.abs(St)>Math.abs(Dt)?Mt+="l"+Dt*st.pxmid[0]/st.pxmid[1]+","+Dt+"H"+(Lt+st.labelExtraX+_t):Mt+="l"+st.labelExtraX+","+St+"v"+(Dt-St)+"h"+_t}else Mt+="V"+(st.yLabelMid+st.labelExtraY)+"h"+_t;s.ensureSingle(at,"path","textline").call(m.stroke,xt.outsidetextfont.color).attr({"stroke-width":Math.min(2,xt.outsidetextfont.size/8),d:Mt,fill:"none"})}else at.select("path.textline").remove()})}(rt,tt),ot&&tt.automargin){var pt=h.bBox(Y.node()),gt=tt.domain,kt=et.w*(gt.x[1]-gt.x[0]),yt=et.h*(gt.y[1]-gt.y[0]),mt=(.5*kt-Z.r)/et.w,Ot=(.5*yt-Z.r)/et.h;k.autoMargin(B,"pie."+tt.uid+".automargin",{xl:gt.x[0]-mt,xr:gt.x[1]+mt,yb:gt.y[0]-Ot,yt:gt.y[1]+Ot,l:Math.max(Z.cx-Z.r-pt.left,0),r:Math.max(pt.right-(Z.cx+Z.r),0),b:Math.max(pt.bottom-(Z.cy+Z.r),0),t:Math.max(Z.cy-Z.r-pt.top,0),pad:5})}})});setTimeout(function(){J.selectAll("tspan").each(function(){var X=T.select(this);X.attr("dy")&&X.attr("dy",X.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:y,determineInsideTextFont:v,positionTitleOutside:E,prerenderTitles:p,layoutAreas:P,attachFxHandlers:w,computeTransform:j}},68357:function(W,I,o){var T=o(39898),k=o(63463),r=o(72597).resizeText;W.exports=function(m){var h=m._fullLayout._pielayer.selectAll(".trace");r(m,h,"pie"),h.each(function(s){var e=s[0].trace,t=T.select(this);t.style({opacity:e.opacity}),t.selectAll("path.surface").each(function(n){T.select(this).call(k,n,e,m)})})}},63463:function(W,I,o){var T=o(7901),k=o(53581).castOption,r=o(22209);W.exports=function(m,h,s,e){var t=s.marker.line,n=k(t.color,h.pts)||T.defaultLine,a=k(t.width,h.pts)||0;m.call(r,h,s,e).style("stroke-width",a).call(T.stroke,n)}},10959:function(W,I,o){var T=o(82196);W.exports={x:T.x,y:T.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:T.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(W,I,o){var T=o(9330).gl_pointcloud2d,k=o(78614),r=o(71739).findExtremes,m=o(34603);function h(e,t){this.scene=e,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=T(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var s=h.prototype;s.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},s.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=m(e,{})},s.updateFast=function(e){var t,n,a,i,c,l,u=this.xData=this.pickXData=e.x,f=this.yData=this.pickYData=e.y,d=this.pickXYData=e.xy,w=e.xbounds&&e.ybounds,v=e.indices,p=this.bounds;if(d){if(a=d,t=d.length>>>1,w)p[0]=e.xbounds[0],p[2]=e.xbounds[1],p[1]=e.ybounds[0],p[3]=e.ybounds[1];else for(l=0;l<t;l++)i=a[2*l],c=a[2*l+1],i<p[0]&&(p[0]=i),i>p[2]&&(p[2]=i),c<p[1]&&(p[1]=c),c>p[3]&&(p[3]=c);if(v)n=v;else for(n=new Int32Array(t),l=0;l<t;l++)n[l]=l}else for(t=u.length,a=new Float32Array(2*t),n=new Int32Array(t),l=0;l<t;l++)i=u[l],c=f[l],n[l]=l,a[2*l]=i,a[2*l+1]=c,i<p[0]&&(p[0]=i),i>p[2]&&(p[2]=i),c<p[1]&&(p[1]=c),c>p[3]&&(p[3]=c);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=a;var y=k(e.marker.color),b=k(e.marker.border.color),x=e.opacity*e.marker.opacity;y[3]*=x,this.pointcloudOptions.color=y;var _=e.marker.blend;_===null&&(_=u.length<100||f.length<100),this.pointcloudOptions.blend=_,b[3]*=x,this.pointcloudOptions.borderColor=b;var g=e.marker.sizemin,A=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=g,this.pointcloudOptions.sizeMax=A,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var M=this.scene.xaxis,L=this.scene.yaxis,E=A/2||.5;e._extremes[M._id]=r(M,[p[0],p[2]],{ppad:E}),e._extremes[L._id]=r(L,[p[1],p[3]],{ppad:E})},s.dispose=function(){this.pointcloud.dispose()},W.exports=function(e,t){var n=new h(e,t.uid);return n.update(t),n}},33876:function(W,I,o){var T=o(71828),k=o(10959);W.exports=function(r,m,h){function s(e,t){return T.coerce(r,m,k,e,t)}s("x"),s("y"),s("xbounds"),s("ybounds"),r.xy&&r.xy instanceof Float32Array&&(m.xy=r.xy),r.indices&&r.indices instanceof Int32Array&&(m.indices=r.indices),s("text"),s("marker.color",h),s("marker.opacity"),s("marker.blend"),s("marker.sizemin"),s("marker.sizemax"),s("marker.border.color",h),s("marker.border.arearatio"),m._length=null}},20593:function(W,I,o){W.exports={attributes:o(10959),supplyDefaults:o(33876),calc:o(36563),plot:o(42743),moduleType:"trace",name:"pointcloud",basePlotModule:o(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(W,I,o){var T=o(41940),k=o(9012),r=o(22399),m=o(77914),h=o(27670).Y,s=o(5386).fF,e=o(50693),t=o(44467).templatedArray,n=o(12663).descriptionOnlyNumbers,a=o(1426).extendFlat,i=o(30962).overrideAll;(W.exports=i({hoverinfo:a({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:m.hoverlabel,domain:h({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:n("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:T({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:r.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:m.hoverlabel,hovertemplate:s({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:r.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:m.hoverlabel,hovertemplate:s({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:a(e().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(W,I,o){var T=o(30962).overrideAll,k=o(27659).a0,r=o(60436),m=o(528),h=o(6964),s=o(28569),e=o(47322).prepSelect,t=o(71828),n=o(73972),a="sankey";function i(c,l){var u=c._fullData[l],f=c._fullLayout,d=f.dragmode,w=f.dragmode==="pan"?"move":"crosshair",v=u._bgRect;if(v&&d!=="pan"&&d!=="zoom"){h(v,w);var p={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},y={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},b={gd:c,element:v.node(),plotinfo:{id:l,xaxis:p,yaxis:y,fillRangeItems:t.noop},subplot:l,xaxes:[p],yaxes:[y],doneFnCompleted:function(x){var _,g=c._fullData[l],A=g.node.groups.slice(),M=[];function L(P){for(var U=g._sankey.graph.nodes,R=0;R<U.length;R++)if(U[R].pointNumber===P)return U[R]}for(var E=0;E<x.length;E++){var S=L(x[E].pointNumber);if(S)if(S.group){for(var O=0;O<S.childrenNodes.length;O++)M.push(S.childrenNodes[O].pointNumber);A[S.pointNumber-g.node._count]=!1}else M.push(S.pointNumber)}_=A.filter(Boolean).concat([M]),n.call("_guiRestyle",c,{"node.groups":[_]},l)},prepFn:function(x,_,g){e(x,_,g,b,d)}};s.init(b)}}I.name=a,I.baseLayoutAttrOverrides=T({hoverlabel:m.hoverlabel},"plot","nested"),I.plot=function(c){var l=k(c.calcdata,a)[0];r(c,l),I.updateFx(c)},I.clean=function(c,l,u,f){var d=f._has&&f._has(a),w=l._has&&l._has(a);d&&!w&&(f._paperdiv.selectAll(".sankey").remove(),f._paperdiv.selectAll(".bgsankey").remove())},I.updateFx=function(c){for(var l=0;l<c._fullData.length;l++)i(c,l)}},92930:function(W,I,o){var T=o(68664),k=o(71828),r=o(28984).wrap,m=k.isArrayOrTypedArray,h=k.isIndex,s=o(21081);W.exports=function(e,t){var n=function(a){var i,c=a.node,l=a.link,u=[],f=m(l.color),d=m(l.customdata),w={},v={},p=l.colorscales.length;for(i=0;i<p;i++){var y=l.colorscales[i],b=s.extractScale(y,{cLetter:"c"}),x=s.makeColorScaleFunc(b);v[y.label]=x}var _=0;for(i=0;i<l.value.length;i++)l.source[i]>_&&(_=l.source[i]),l.target[i]>_&&(_=l.target[i]);var g,A=_+1;a.node._count=A;var M=a.node.groups,L={};for(i=0;i<M.length;i++){var E=M[i];for(g=0;g<E.length;g++){var S=E[g],O=A+i;L.hasOwnProperty(S)?k.warn("Node "+S+" is already part of a group."):L[S]=O}}var P={source:[],target:[]};for(i=0;i<l.value.length;i++){var U=l.value[i],R=l.source[i],j=l.target[i];if(U>0&&h(R,A)&&h(j,A)&&(!L.hasOwnProperty(R)||!L.hasOwnProperty(j)||L[R]!==L[j])){L.hasOwnProperty(j)&&(j=L[j]),L.hasOwnProperty(R)&&(R=L[R]),j=+j,w[R=+R]=w[j]=!0;var B="";l.label&&l.label[i]&&(B=l.label[i]);var z=null;B&&v.hasOwnProperty(B)&&(z=v[B]),u.push({pointNumber:i,label:B,color:f?l.color[i]:l.color,customdata:d?l.customdata[i]:l.customdata,concentrationscale:z,source:R,target:j,value:+U}),P.source.push(R),P.target.push(j)}}var G=A+M.length,V=m(c.color),et=m(c.customdata),J=[];for(i=0;i<G;i++)if(w[i]){var X=c.label[i];J.push({group:i>A-1,childrenNodes:[],pointNumber:i,label:X,color:V?c.color[i]:c.color,customdata:et?c.customdata[i]:c.customdata})}var Y=!1;return function(Z,tt,rt){for(var nt=k.init2dArray(Z,0),ot=0;ot<Math.min(tt.length,rt.length);ot++)if(k.isIndex(tt[ot],Z)&&k.isIndex(rt[ot],Z)){if(tt[ot]===rt[ot])return!0;nt[tt[ot]].push(rt[ot])}return T(nt).components.some(function(ct){return ct.length>1})}(G,P.source,P.target)&&(Y=!0),{circular:Y,links:u,nodes:J,groups:M,groupLookup:L}}(t);return r({circular:n.circular,_nodes:n.nodes,_links:n.links,_groups:n.groups,_groupLookup:n.groupLookup})}},85247:function(W){W.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(W,I,o){var T=o(71828),k=o(39953),r=o(7901),m=o(84267),h=o(27670).c,s=o(38048),e=o(44467),t=o(85501);function n(a,i){function c(l,u){return T.coerce(a,i,k.link.colorscales,l,u)}c("label"),c("cmin"),c("cmax"),c("colorscale")}W.exports=function(a,i,c,l){function u(A,M){return T.coerce(a,i,k,A,M)}var f=T.extendDeep(l.hoverlabel,a.hoverlabel),d=a.node,w=e.newContainer(i,"node");function v(A,M){return T.coerce(d,w,k.node,A,M)}v("label"),v("groups"),v("x"),v("y"),v("pad"),v("thickness"),v("line.color"),v("line.width"),v("hoverinfo",a.hoverinfo),s(d,w,v,f),v("hovertemplate");var p=l.colorway;v("color",w.label.map(function(A,M){return r.addOpacity(function(L){return p[L%p.length]}(M),.8)})),v("customdata");var y=a.link||{},b=e.newContainer(i,"link");function x(A,M){return T.coerce(y,b,k.link,A,M)}x("label"),x("arrowlen"),x("source"),x("target"),x("value"),x("line.color"),x("line.width"),x("hoverinfo",a.hoverinfo),s(y,b,x,f),x("hovertemplate");var _,g=m(l.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";x("color",T.repeat(g,b.value.length)),x("customdata"),t(y,b,{name:"colorscales",handleItemDefaults:n}),h(i,l,u),u("orientation"),u("valueformat"),u("valuesuffix"),w.x.length&&w.y.length&&(_="freeform"),u("arrangement",_),T.coerceFont(u,"textfont",T.extendFlat({},l.font)),i._length=null}},29396:function(W,I,o){W.exports={attributes:o(39953),supplyDefaults:o(26857),calc:o(92930),plot:o(60436),moduleType:"trace",name:"sankey",basePlotModule:o(75536),selectPoints:o(84564),categories:["noOpacity"],meta:{}}},60436:function(W,I,o){var T=o(39898),k=o(71828),r=k.numberFormat,m=o(3393),h=o(30211),s=o(7901),e=o(85247).cn,t=k._;function n(y){return y!==""}function a(y,b){return y.filter(function(x){return x.key===b.traceId})}function i(y,b){T.select(y).select("path").style("fill-opacity",b),T.select(y).select("rect").style("fill-opacity",b)}function c(y){T.select(y).select("text.name").style("fill","black")}function l(y){return function(b){return y.node.sourceLinks.indexOf(b.link)!==-1||y.node.targetLinks.indexOf(b.link)!==-1}}function u(y){return function(b){return b.node.sourceLinks.indexOf(y.link)!==-1||b.node.targetLinks.indexOf(y.link)!==-1}}function f(y,b,x){b&&x&&a(x,b).selectAll("."+e.sankeyLink).filter(l(b)).call(w.bind(0,b,x,!1))}function d(y,b,x){b&&x&&a(x,b).selectAll("."+e.sankeyLink).filter(l(b)).call(v.bind(0,b,x,!1))}function w(y,b,x,_){var g=_.datum().link.label;_.style("fill-opacity",function(A){if(!A.link.concentrationscale)return .4}),g&&a(b,y).selectAll("."+e.sankeyLink).filter(function(A){return A.link.label===g}).style("fill-opacity",function(A){if(!A.link.concentrationscale)return .4}),x&&a(b,y).selectAll("."+e.sankeyNode).filter(u(y)).call(f)}function v(y,b,x,_){var g=_.datum().link.label;_.style("fill-opacity",function(A){return A.tinyColorAlpha}),g&&a(b,y).selectAll("."+e.sankeyLink).filter(function(A){return A.link.label===g}).style("fill-opacity",function(A){return A.tinyColorAlpha}),x&&a(b,y).selectAll(e.sankeyNode).filter(u(y)).call(d)}function p(y,b){var x=y.hoverlabel||{},_=k.nestedProperty(x,b).get();return!Array.isArray(_)&&_}W.exports=function(y,b){for(var x=y._fullLayout,_=x._paper,g=x._size,A=0;A<y._fullData.length;A++)if(y._fullData[A].visible&&y._fullData[A].type===e.sankey&&!y._fullData[A]._viewInitial){var M=y._fullData[A].node;y._fullData[A]._viewInitial={node:{groups:M.groups.slice(),x:M.x.slice(),y:M.y.slice()}}}var L=t(y,"source:")+" ",E=t(y,"target:")+" ",S=t(y,"concentration:")+" ",O=t(y,"incoming flow count:")+" ",P=t(y,"outgoing flow count:")+" ";m(y,_,b,{width:g.w,height:g.h,margin:{t:g.t,r:g.r,b:g.b,l:g.l}},{linkEvents:{hover:function(U,R,j){y._fullLayout.hovermode!==!1&&(T.select(U).call(w.bind(0,R,j,!0)),R.link.trace.link.hoverinfo!=="skip"&&(R.link.fullData=R.link.trace,y.emit("plotly_hover",{event:T.event,points:[R.link]})))},follow:function(U,R){if(y._fullLayout.hovermode!==!1){var j=R.link.trace.link;if(j.hoverinfo!=="none"&&j.hoverinfo!=="skip"){for(var B=[],z=0,G=0;G<R.flow.links.length;G++){var V=R.flow.links[G];if(y._fullLayout.hovermode!=="closest"||R.link.pointNumber===V.pointNumber){R.link.pointNumber===V.pointNumber&&(z=G),V.fullData=V.trace,j=R.link.trace.link;var et=X(V),J={valueLabel:r(R.valueFormat)(V.value)+R.valueSuffix};B.push({x:et[0],y:et[1],name:J.valueLabel,text:[V.label||"",L+V.source.label,E+V.target.label,V.concentrationscale?S+r("%0.2f")(V.flow.labelConcentration):""].filter(n).join("<br>"),color:p(j,"bgcolor")||s.addOpacity(V.color,1),borderColor:p(j,"bordercolor"),fontFamily:p(j,"font.family"),fontSize:p(j,"font.size"),fontColor:p(j,"font.color"),nameLength:p(j,"namelength"),textAlign:p(j,"align"),idealAlign:T.event.x<et[0]?"right":"left",hovertemplate:j.hovertemplate,hovertemplateLabels:J,eventData:[V]})}}h.loneHover(B,{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:y,anchorIndex:z}).each(function(){R.link.concentrationscale||i(this,.65),c(this)})}}function X(Y){var Z,tt;Y.circular?(Z=(Y.circularPathData.leftInnerExtent+Y.circularPathData.rightInnerExtent)/2,tt=Y.circularPathData.verticalFullExtent):(Z=(Y.source.x1+Y.target.x0)/2,tt=(Y.y0+Y.y1)/2);var rt=[Z,tt];return Y.trace.orientation==="v"&&rt.reverse(),rt[0]+=R.parent.translateX,rt[1]+=R.parent.translateY,rt}},unhover:function(U,R,j){y._fullLayout.hovermode!==!1&&(T.select(U).call(v.bind(0,R,j,!0)),R.link.trace.link.hoverinfo!=="skip"&&(R.link.fullData=R.link.trace,y.emit("plotly_unhover",{event:T.event,points:[R.link]})),h.loneUnhover(x._hoverlayer.node()))},select:function(U,R){var j=R.link;j.originalEvent=T.event,y._hoverdata=[j],h.click(y,{target:!0})}},nodeEvents:{hover:function(U,R,j){y._fullLayout.hovermode!==!1&&(T.select(U).call(f,R,j),R.node.trace.node.hoverinfo!=="skip"&&(R.node.fullData=R.node.trace,y.emit("plotly_hover",{event:T.event,points:[R.node]})))},follow:function(U,R){if(y._fullLayout.hovermode!==!1){var j=R.node.trace.node;if(j.hoverinfo!=="none"&&j.hoverinfo!=="skip"){var B=T.select(U).select("."+e.nodeRect),z=y._fullLayout._paperdiv.node().getBoundingClientRect(),G=B.node().getBoundingClientRect(),V=G.left-2-z.left,et=G.right+2-z.left,J=G.top+G.height/4-z.top,X={valueLabel:r(R.valueFormat)(R.node.value)+R.valueSuffix};R.node.fullData=R.node.trace,y._fullLayout._calcInverseTransform(y);var Y=y._fullLayout._invScaleX,Z=y._fullLayout._invScaleY,tt=h.loneHover({x0:Y*V,x1:Y*et,y:Z*J,name:r(R.valueFormat)(R.node.value)+R.valueSuffix,text:[R.node.label,O+R.node.targetLinks.length,P+R.node.sourceLinks.length].filter(n).join("<br>"),color:p(j,"bgcolor")||R.tinyColorHue,borderColor:p(j,"bordercolor"),fontFamily:p(j,"font.family"),fontSize:p(j,"font.size"),fontColor:p(j,"font.color"),nameLength:p(j,"namelength"),textAlign:p(j,"align"),idealAlign:"left",hovertemplate:j.hovertemplate,hovertemplateLabels:X,eventData:[R.node]},{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:y});i(tt,.85),c(tt)}}},unhover:function(U,R,j){y._fullLayout.hovermode!==!1&&(T.select(U).call(d,R,j),R.node.trace.node.hoverinfo!=="skip"&&(R.node.fullData=R.node.trace,y.emit("plotly_unhover",{event:T.event,points:[R.node]})),h.loneUnhover(x._hoverlayer.node()))},select:function(U,R,j){var B=R.node;B.originalEvent=T.event,y._hoverdata=[B],T.select(U).call(d,R,j),h.click(y,{target:!0})}}})}},3393:function(W,I,o){var T=o(49887),k=o(81684).k4,r=o(39898),m=o(30838),h=o(86781),s=o(85247),e=o(84267),t=o(7901),n=o(91424),a=o(71828),i=a.strTranslate,c=a.strRotate,l=o(28984),u=l.keyFun,f=l.repeat,d=l.unwrap,w=o(63893),v=o(73972),p=o(18783),y=p.CAP_SHIFT,b=p.LINE_SPACING;function x(G,V,et){var J,X=d(V),Y=X.trace,Z=Y.domain,tt=Y.orientation==="h",rt=Y.node.pad,nt=Y.node.thickness,ot=G.width*(Z.x[1]-Z.x[0]),ct=G.height*(Z.y[1]-Z.y[0]),pt=X._nodes,gt=X._links,kt=X.circular;(J=kt?h.sankeyCircular().circularLinkGap(0):m.sankey()).iterations(s.sankeyIterations).size(tt?[ot,ct]:[ct,ot]).nodeWidth(nt).nodePadding(rt).nodeId(function(_t){return _t.pointNumber}).nodes(pt).links(gt);var yt,mt,Ot,vt=J();for(var xt in J.nodePadding()<rt&&a.warn("node.pad was reduced to ",J.nodePadding()," to fit within the figure."),X._groupLookup){var st,at=parseInt(X._groupLookup[xt]);for(yt=0;yt<vt.nodes.length;yt++)if(vt.nodes[yt].pointNumber===at){st=vt.nodes[yt];break}if(st){var ht={pointNumber:parseInt(xt),x0:st.x0,x1:st.x1,y0:st.y0,y1:st.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};vt.nodes.unshift(ht),st.childrenNodes.unshift(ht)}}if(function(){for(yt=0;yt<vt.nodes.length;yt++){var _t,St,Dt=vt.nodes[yt],ut={};for(mt=0;mt<Dt.targetLinks.length;mt++)_t=(St=Dt.targetLinks[mt]).source.pointNumber+":"+St.target.pointNumber,ut.hasOwnProperty(_t)||(ut[_t]=[]),ut[_t].push(St);var Tt=Object.keys(ut);for(mt=0;mt<Tt.length;mt++){var bt=ut[_t=Tt[mt]],It=0,zt={};for(Ot=0;Ot<bt.length;Ot++)zt[(St=bt[Ot]).label]||(zt[St.label]=0),zt[St.label]+=St.value,It+=St.value;for(Ot=0;Ot<bt.length;Ot++)(St=bt[Ot]).flow={value:It,labelConcentration:zt[St.label]/It,concentration:St.value/It,links:bt},St.concentrationscale&&(St.color=e(St.concentrationscale(St.flow.labelConcentration)))}var Ft=0;for(mt=0;mt<Dt.sourceLinks.length;mt++)Ft+=Dt.sourceLinks[mt].value;for(mt=0;mt<Dt.sourceLinks.length;mt++)(St=Dt.sourceLinks[mt]).concentrationOut=St.value/Ft;var $t=0;for(mt=0;mt<Dt.targetLinks.length;mt++)$t+=Dt.targetLinks[mt].value;for(mt=0;mt<Dt.targetLinks.length;mt++)(St=Dt.targetLinks[mt]).concenrationIn=St.value/$t}}(),Y.node.x.length&&Y.node.y.length){for(yt=0;yt<Math.min(Y.node.x.length,Y.node.y.length,vt.nodes.length);yt++)if(Y.node.x[yt]&&Y.node.y[yt]){var Lt=[Y.node.x[yt]*ot,Y.node.y[yt]*ct];vt.nodes[yt].x0=Lt[0]-nt/2,vt.nodes[yt].x1=Lt[0]+nt/2;var Mt=vt.nodes[yt].y1-vt.nodes[yt].y0;vt.nodes[yt].y0=Lt[1]-Mt/2,vt.nodes[yt].y1=Lt[1]+Mt/2}Y.arrangement==="snap"&&function(_t){var St,Dt,ut=_t.map(function(Ft,$t){return{x0:Ft.x0,index:$t}}).sort(function(Ft,$t){return Ft.x0-$t.x0}),Tt=[],bt=-1,It=-1/0;for(yt=0;yt<ut.length;yt++){var zt=_t[ut[yt].index];zt.x0>It+nt&&(bt+=1,St=zt.x0),It=zt.x0,Tt[bt]||(Tt[bt]=[]),Tt[bt].push(zt),Dt=St-zt.x0,zt.x0+=Dt,zt.x1+=Dt}return Tt}(pt=vt.nodes).forEach(function(_t){var St,Dt,ut,Tt=0,bt=_t.length;for(_t.sort(function(It,zt){return It.y0-zt.y0}),ut=0;ut<bt;++ut)(St=_t[ut]).y0>=Tt||(Dt=Tt-St.y0)>1e-6&&(St.y0+=Dt,St.y1+=Dt),Tt=St.y1+rt}),J.update(vt)}return{circular:kt,key:et,trace:Y,guid:a.randstr(),horizontal:tt,width:ot,height:ct,nodePad:Y.node.pad,nodeLineColor:Y.node.line.color,nodeLineWidth:Y.node.line.width,linkLineColor:Y.link.line.color,linkLineWidth:Y.link.line.width,linkArrowLength:Y.link.arrowlen,valueFormat:Y.valueformat,valueSuffix:Y.valuesuffix,textFont:Y.textfont,translateX:Z.x[0]*G.width+G.margin.l,translateY:G.height-Z.y[1]*G.height+G.margin.t,dragParallel:tt?ct:ot,dragPerpendicular:tt?ot:ct,arrangement:Y.arrangement,sankey:J,graph:vt,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(G,V,et){var J=e(V.color),X=V.source.label+"|"+V.target.label+"__"+et;return V.trace=G.trace,V.curveNumber=G.trace.index,{circular:G.circular,key:X,traceId:G.key,pointNumber:V.pointNumber,link:V,tinyColorHue:t.tinyRGB(J),tinyColorAlpha:J.getAlpha(),linkPath:g,linkLineColor:G.linkLineColor,linkLineWidth:G.linkLineWidth,linkArrowLength:G.linkArrowLength,valueFormat:G.valueFormat,valueSuffix:G.valueSuffix,sankey:G.sankey,parent:G,interactionState:G.interactionState,flow:V.flow}}function g(){return function(G){var V=G.linkArrowLength;if(G.link.circular)return function(mt,Ot){var vt=mt.width/2,xt=mt.circularPathData;return mt.circularLinkType==="top"?"M "+(xt.targetX-Ot)+" "+(xt.targetY+vt)+" L"+(xt.rightInnerExtent-Ot)+" "+(xt.targetY+vt)+"A"+(xt.rightLargeArcRadius+vt)+" "+(xt.rightSmallArcRadius+vt)+" 0 0 1 "+(xt.rightFullExtent-vt-Ot)+" "+(xt.targetY-xt.rightSmallArcRadius)+"L"+(xt.rightFullExtent-vt-Ot)+" "+xt.verticalRightInnerExtent+"A"+(xt.rightLargeArcRadius+vt)+" "+(xt.rightLargeArcRadius+vt)+" 0 0 1 "+(xt.rightInnerExtent-Ot)+" "+(xt.verticalFullExtent-vt)+"L"+xt.leftInnerExtent+" "+(xt.verticalFullExtent-vt)+"A"+(xt.leftLargeArcRadius+vt)+" "+(xt.leftLargeArcRadius+vt)+" 0 0 1 "+(xt.leftFullExtent+vt)+" "+xt.verticalLeftInnerExtent+"L"+(xt.leftFullExtent+vt)+" "+(xt.sourceY-xt.leftSmallArcRadius)+"A"+(xt.leftLargeArcRadius+vt)+" "+(xt.leftSmallArcRadius+vt)+" 0 0 1 "+xt.leftInnerExtent+" "+(xt.sourceY+vt)+"L"+xt.sourceX+" "+(xt.sourceY+vt)+"L"+xt.sourceX+" "+(xt.sourceY-vt)+"L"+xt.leftInnerExtent+" "+(xt.sourceY-vt)+"A"+(xt.leftLargeArcRadius-vt)+" "+(xt.leftSmallArcRadius-vt)+" 0 0 0 "+(xt.leftFullExtent-vt)+" "+(xt.sourceY-xt.leftSmallArcRadius)+"L"+(xt.leftFullExtent-vt)+" "+xt.verticalLeftInnerExtent+"A"+(xt.leftLargeArcRadius-vt)+" "+(xt.leftLargeArcRadius-vt)+" 0 0 0 "+xt.leftInnerExtent+" "+(xt.verticalFullExtent+vt)+"L"+(xt.rightInnerExtent-Ot)+" "+(xt.verticalFullExtent+vt)+"A"+(xt.rightLargeArcRadius-vt)+" "+(xt.rightLargeArcRadius-vt)+" 0 0 0 "+(xt.rightFullExtent+vt-Ot)+" "+xt.verticalRightInnerExtent+"L"+(xt.rightFullExtent+vt-Ot)+" "+(xt.targetY-xt.rightSmallArcRadius)+"A"+(xt.rightLargeArcRadius-vt)+" "+(xt.rightSmallArcRadius-vt)+" 0 0 0 "+(xt.rightInnerExtent-Ot)+" "+(xt.targetY-vt)+"L"+(xt.targetX-Ot)+" "+(xt.targetY-vt)+(Ot>0?"L"+xt.targetX+" "+xt.targetY:"")+"Z":"M "+(xt.targetX-Ot)+" "+(xt.targetY-vt)+" L"+(xt.rightInnerExtent-Ot)+" "+(xt.targetY-vt)+"A"+(xt.rightLargeArcRadius+vt)+" "+(xt.rightSmallArcRadius+vt)+" 0 0 0 "+(xt.rightFullExtent-vt-Ot)+" "+(xt.targetY+xt.rightSmallArcRadius)+"L"+(xt.rightFullExtent-vt-Ot)+" "+xt.verticalRightInnerExtent+"A"+(xt.rightLargeArcRadius+vt)+" "+(xt.rightLargeArcRadius+vt)+" 0 0 0 "+(xt.rightInnerExtent-Ot)+" "+(xt.verticalFullExtent+vt)+"L"+xt.leftInnerExtent+" "+(xt.verticalFullExtent+vt)+"A"+(xt.leftLargeArcRadius+vt)+" "+(xt.leftLargeArcRadius+vt)+" 0 0 0 "+(xt.leftFullExtent+vt)+" "+xt.verticalLeftInnerExtent+"L"+(xt.leftFullExtent+vt)+" "+(xt.sourceY+xt.leftSmallArcRadius)+"A"+(xt.leftLargeArcRadius+vt)+" "+(xt.leftSmallArcRadius+vt)+" 0 0 0 "+xt.leftInnerExtent+" "+(xt.sourceY-vt)+"L"+xt.sourceX+" "+(xt.sourceY-vt)+"L"+xt.sourceX+" "+(xt.sourceY+vt)+"L"+xt.leftInnerExtent+" "+(xt.sourceY+vt)+"A"+(xt.leftLargeArcRadius-vt)+" "+(xt.leftSmallArcRadius-vt)+" 0 0 1 "+(xt.leftFullExtent-vt)+" "+(xt.sourceY+xt.leftSmallArcRadius)+"L"+(xt.leftFullExtent-vt)+" "+xt.verticalLeftInnerExtent+"A"+(xt.leftLargeArcRadius-vt)+" "+(xt.leftLargeArcRadius-vt)+" 0 0 1 "+xt.leftInnerExtent+" "+(xt.verticalFullExtent-vt)+"L"+(xt.rightInnerExtent-Ot)+" "+(xt.verticalFullExtent-vt)+"A"+(xt.rightLargeArcRadius-vt)+" "+(xt.rightLargeArcRadius-vt)+" 0 0 1 "+(xt.rightFullExtent+vt-Ot)+" "+xt.verticalRightInnerExtent+"L"+(xt.rightFullExtent+vt-Ot)+" "+(xt.targetY+xt.rightSmallArcRadius)+"A"+(xt.rightLargeArcRadius-vt)+" "+(xt.rightSmallArcRadius-vt)+" 0 0 1 "+(xt.rightInnerExtent-Ot)+" "+(xt.targetY+vt)+"L"+(xt.targetX-Ot)+" "+(xt.targetY+vt)+(Ot>0?"L"+xt.targetX+" "+xt.targetY:"")+"Z"}(G.link,V);var et=Math.abs((G.link.target.x0-G.link.source.x1)/2);V>et&&(V=et);var J=G.link.source.x1,X=G.link.target.x0-V,Y=k(J,X),Z=Y(.5),tt=Y(.5),rt=G.link.y0-G.link.width/2,nt=G.link.y0+G.link.width/2,ot=G.link.y1-G.link.width/2,ct=G.link.y1+G.link.width/2,pt="M"+J+","+rt,gt="C"+Z+","+rt+" "+tt+","+ot+" "+X+","+ot,kt="C"+tt+","+ct+" "+Z+","+nt+" "+J+","+nt,yt=V>0?"L"+(X+V)+","+(ot+G.link.width/2):"";return pt+gt+(yt+="L"+X+","+ct)+kt+"Z"}}function A(G,V){var et=e(V.color),J=s.nodePadAcross,X=G.nodePad/2;V.dx=V.x1-V.x0,V.dy=V.y1-V.y0;var Y=V.dx,Z=Math.max(.5,V.dy),tt="node_"+V.pointNumber;return V.group&&(tt=a.randstr()),V.trace=G.trace,V.curveNumber=G.trace.index,{index:V.pointNumber,key:tt,partOfGroup:V.partOfGroup||!1,group:V.group,traceId:G.key,trace:G.trace,node:V,nodePad:G.nodePad,nodeLineColor:G.nodeLineColor,nodeLineWidth:G.nodeLineWidth,textFont:G.textFont,size:G.horizontal?G.height:G.width,visibleWidth:Math.ceil(Y),visibleHeight:Z,zoneX:-J,zoneY:-X,zoneWidth:Y+2*J,zoneHeight:Z+2*X,labelY:G.horizontal?V.dy/2+1:V.dx/2+1,left:V.originalLayer===1,sizeAcross:G.width,forceLayouts:G.forceLayouts,horizontal:G.horizontal,darkBackground:et.getBrightness()<=128,tinyColorHue:t.tinyRGB(et),tinyColorAlpha:et.getAlpha(),valueFormat:G.valueFormat,valueSuffix:G.valueSuffix,sankey:G.sankey,graph:G.graph,arrangement:G.arrangement,uniqueNodeLabelPathId:[G.guid,G.key,tt].join("_"),interactionState:G.interactionState,figure:G}}function M(G){G.attr("transform",function(V){return i(V.node.x0.toFixed(3),V.node.y0.toFixed(3))})}function L(G){G.call(M)}function E(G,V){G.call(L),V.attr("d",g())}function S(G){G.attr("width",function(V){return V.node.x1-V.node.x0}).attr("height",function(V){return V.visibleHeight})}function O(G){return G.link.width>1||G.linkLineWidth>0}function P(G){return i(G.translateX,G.translateY)+(G.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(G,V,et){G.on(".basic",null).on("mouseover.basic",function(J){J.interactionState.dragInProgress||J.partOfGroup||(et.hover(this,J,V),J.interactionState.hovered=[this,J])}).on("mousemove.basic",function(J){J.interactionState.dragInProgress||J.partOfGroup||(et.follow(this,J),J.interactionState.hovered=[this,J])}).on("mouseout.basic",function(J){J.interactionState.dragInProgress||J.partOfGroup||(et.unhover(this,J,V),J.interactionState.hovered=!1)}).on("click.basic",function(J){J.interactionState.hovered&&(et.unhover(this,J,V),J.interactionState.hovered=!1),J.interactionState.dragInProgress||J.partOfGroup||et.select(this,J,V)})}function R(G,V,et,J){var X=r.behavior.drag().origin(function(Y){return{x:Y.node.x0+Y.visibleWidth/2,y:Y.node.y0+Y.visibleHeight/2}}).on("dragstart",function(Y){if(Y.arrangement!=="fixed"&&(a.ensureSingle(J._fullLayout._infolayer,"g","dragcover",function(tt){J._fullLayout._dragCover=tt}),a.raiseToTop(this),Y.interactionState.dragInProgress=Y.node,B(Y.node),Y.interactionState.hovered&&(et.nodeEvents.unhover.apply(0,Y.interactionState.hovered),Y.interactionState.hovered=!1),Y.arrangement==="snap")){var Z=Y.traceId+"|"+Y.key;Y.forceLayouts[Z]?Y.forceLayouts[Z].alpha(1):function(tt,rt,nt,ot){(function(pt){for(var gt=0;gt<pt.length;gt++)pt[gt].y=(pt[gt].y0+pt[gt].y1)/2,pt[gt].x=(pt[gt].x0+pt[gt].x1)/2})(nt.graph.nodes);var ct=nt.graph.nodes.filter(function(pt){return pt.originalX===nt.node.originalX}).filter(function(pt){return!pt.partOfGroup});nt.forceLayouts[rt]=T.forceSimulation(ct).alphaDecay(0).force("collide",T.forceCollide().radius(function(pt){return pt.dy/2+nt.nodePad/2}).strength(1).iterations(s.forceIterations)).force("constrain",function(pt,gt,kt,yt){return function(){for(var mt=0,Ot=0;Ot<kt.length;Ot++){var vt=kt[Ot];vt===yt.interactionState.dragInProgress?(vt.x=vt.lastDraggedX,vt.y=vt.lastDraggedY):(vt.vx=(vt.originalX-vt.x)/s.forceTicksPerFrame,vt.y=Math.min(yt.size-vt.dy/2,Math.max(vt.dy/2,vt.y))),mt=Math.max(mt,Math.abs(vt.vx),Math.abs(vt.vy))}!yt.interactionState.dragInProgress&&mt<.1&&yt.forceLayouts[gt].alpha()>0&&yt.forceLayouts[gt].alpha(0)}}(0,rt,ct,nt)).stop()}(0,Z,Y),function(tt,rt,nt,ot,ct){window.requestAnimationFrame(function pt(){var gt;for(gt=0;gt<s.forceTicksPerFrame;gt++)nt.forceLayouts[ot].tick();if(function(yt){for(var mt=0;mt<yt.length;mt++)yt[mt].y0=yt[mt].y-yt[mt].dy/2,yt[mt].y1=yt[mt].y0+yt[mt].dy,yt[mt].x0=yt[mt].x-yt[mt].dx/2,yt[mt].x1=yt[mt].x0+yt[mt].dx}(nt.graph.nodes),nt.sankey.update(nt.graph),E(tt.filter(z(nt)),rt),nt.forceLayouts[ot].alpha()>0)window.requestAnimationFrame(pt);else{var kt=nt.node.originalX;nt.node.x0=kt-nt.visibleWidth/2,nt.node.x1=kt+nt.visibleWidth/2,j(nt,ct)}})}(G,V,Y,Z,J)}}).on("drag",function(Y){if(Y.arrangement!=="fixed"){var Z=r.event.x,tt=r.event.y;Y.arrangement==="snap"?(Y.node.x0=Z-Y.visibleWidth/2,Y.node.x1=Z+Y.visibleWidth/2,Y.node.y0=tt-Y.visibleHeight/2,Y.node.y1=tt+Y.visibleHeight/2):(Y.arrangement==="freeform"&&(Y.node.x0=Z-Y.visibleWidth/2,Y.node.x1=Z+Y.visibleWidth/2),tt=Math.max(0,Math.min(Y.size-Y.visibleHeight/2,tt)),Y.node.y0=tt-Y.visibleHeight/2,Y.node.y1=tt+Y.visibleHeight/2),B(Y.node),Y.arrangement!=="snap"&&(Y.sankey.update(Y.graph),E(G.filter(z(Y)),V))}}).on("dragend",function(Y){if(Y.arrangement!=="fixed"){Y.interactionState.dragInProgress=!1;for(var Z=0;Z<Y.node.childrenNodes.length;Z++)Y.node.childrenNodes[Z].x=Y.node.x,Y.node.childrenNodes[Z].y=Y.node.y;Y.arrangement!=="snap"&&j(Y,J)}});G.on(".drag",null).call(X)}function j(G,V){for(var et=[],J=[],X=0;X<G.graph.nodes.length;X++){var Y=(G.graph.nodes[X].x0+G.graph.nodes[X].x1)/2,Z=(G.graph.nodes[X].y0+G.graph.nodes[X].y1)/2;et.push(Y/G.figure.width),J.push(Z/G.figure.height)}v.call("_guiRestyle",V,{"node.x":[et],"node.y":[J]},G.trace.index).then(function(){V._fullLayout._dragCover&&V._fullLayout._dragCover.remove()})}function B(G){G.lastDraggedX=G.x0+G.dx/2,G.lastDraggedY=G.y0+G.dy/2}function z(G){return function(V){return V.node.originalX===G.node.originalX}}W.exports=function(G,V,et,J,X){var Y=G._context.staticPlot,Z=!1;a.ensureSingle(G._fullLayout._infolayer,"g","first-render",function(){Z=!0});var tt=G._fullLayout._dragCover,rt=et.filter(function(mt){return d(mt).trace.visible}).map(x.bind(null,J)),nt=V.selectAll("."+s.cn.sankey).data(rt,u);nt.exit().remove(),nt.enter().append("g").classed(s.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Y?"none":"auto").attr("transform",P),nt.each(function(mt,Ot){G._fullData[Ot]._sankey=mt;var vt="bgsankey-"+mt.trace.uid+"-"+Ot;a.ensureSingle(G._fullLayout._draggers,"rect",vt),G._fullData[Ot]._bgRect=r.select("."+vt),G._fullData[Ot]._bgRect.style("pointer-events",Y?"none":"all").attr("width",mt.width).attr("height",mt.height).attr("x",mt.translateX).attr("y",mt.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),nt.transition().ease(s.ease).duration(s.duration).attr("transform",P);var ot=nt.selectAll("."+s.cn.sankeyLinks).data(f,u);ot.enter().append("g").classed(s.cn.sankeyLinks,!0).style("fill","none");var ct=ot.selectAll("."+s.cn.sankeyLink).data(function(mt){return mt.graph.links.filter(function(Ot){return Ot.value}).map(_.bind(null,mt))},u);ct.enter().append("path").classed(s.cn.sankeyLink,!0).call(U,nt,X.linkEvents),ct.style("stroke",function(mt){return O(mt)?t.tinyRGB(e(mt.linkLineColor)):mt.tinyColorHue}).style("stroke-opacity",function(mt){return O(mt)?t.opacity(mt.linkLineColor):mt.tinyColorAlpha}).style("fill",function(mt){return mt.tinyColorHue}).style("fill-opacity",function(mt){return mt.tinyColorAlpha}).style("stroke-width",function(mt){return O(mt)?mt.linkLineWidth:1}).attr("d",g()),ct.style("opacity",function(){return G._context.staticPlot||Z||tt?1:0}).transition().ease(s.ease).duration(s.duration).style("opacity",1),ct.exit().transition().ease(s.ease).duration(s.duration).style("opacity",0).remove();var pt=nt.selectAll("."+s.cn.sankeyNodeSet).data(f,u);pt.enter().append("g").classed(s.cn.sankeyNodeSet,!0),pt.style("cursor",function(mt){switch(mt.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var gt=pt.selectAll("."+s.cn.sankeyNode).data(function(mt){var Ot=mt.graph.nodes;return function(vt){var xt,st=[];for(xt=0;xt<vt.length;xt++)vt[xt].originalX=(vt[xt].x0+vt[xt].x1)/2,vt[xt].originalY=(vt[xt].y0+vt[xt].y1)/2,st.indexOf(vt[xt].originalX)===-1&&st.push(vt[xt].originalX);for(st.sort(function(at,ht){return at-ht}),xt=0;xt<vt.length;xt++)vt[xt].originalLayerIndex=st.indexOf(vt[xt].originalX),vt[xt].originalLayer=vt[xt].originalLayerIndex/(st.length-1)}(Ot),Ot.map(A.bind(null,mt))},u);gt.enter().append("g").classed(s.cn.sankeyNode,!0).call(M).style("opacity",function(mt){return!G._context.staticPlot&&!Z||mt.partOfGroup?0:1}),gt.call(U,nt,X.nodeEvents).call(R,ct,X,G),gt.transition().ease(s.ease).duration(s.duration).call(M).style("opacity",function(mt){return mt.partOfGroup?0:1}),gt.exit().transition().ease(s.ease).duration(s.duration).style("opacity",0).remove();var kt=gt.selectAll("."+s.cn.nodeRect).data(f);kt.enter().append("rect").classed(s.cn.nodeRect,!0).call(S),kt.style("stroke-width",function(mt){return mt.nodeLineWidth}).style("stroke",function(mt){return t.tinyRGB(e(mt.nodeLineColor))}).style("stroke-opacity",function(mt){return t.opacity(mt.nodeLineColor)}).style("fill",function(mt){return mt.tinyColorHue}).style("fill-opacity",function(mt){return mt.tinyColorAlpha}),kt.transition().ease(s.ease).duration(s.duration).call(S);var yt=gt.selectAll("."+s.cn.nodeLabel).data(f);yt.enter().append("text").classed(s.cn.nodeLabel,!0).style("cursor","default"),yt.attr("data-notex",1).text(function(mt){return mt.node.label}).each(function(mt){var Ot=r.select(this);n.font(Ot,mt.textFont),w.convertToTspans(Ot,G)}).style("text-shadow",w.makeTextShadow(G._fullLayout.paper_bgcolor)).attr("text-anchor",function(mt){return mt.horizontal&&mt.left?"end":"start"}).attr("transform",function(mt){var Ot=r.select(this),vt=w.lineCount(Ot),xt=mt.textFont.size*((vt-1)*b-y),st=mt.nodeLineWidth/2+3,at=((mt.horizontal?mt.visibleHeight:mt.visibleWidth)-xt)/2;mt.horizontal&&(mt.left?st=-st:st+=mt.visibleWidth);var ht=mt.horizontal?"":"scale(-1,1)"+c(90);return i(mt.horizontal?st:at,mt.horizontal?at:st)+ht}),yt.transition().ease(s.ease).duration(s.duration)}},84564:function(W){W.exports=function(I,o){for(var T=[],k=I.cd[0].trace,r=k._sankey.graph.nodes,m=0;m<r.length;m++){var h=r[m];if(!h.partOfGroup){var s=[(h.x0+h.x1)/2,(h.y0+h.y1)/2];k.orientation==="v"&&s.reverse(),o&&o.contains(s,!1,m,I)&&T.push({pointNumber:h.pointNumber})}}return T}},75225:function(W,I,o){var T=o(71828);W.exports=function(k,r){for(var m=0;m<k.length;m++)k[m].i=m;T.mergeArray(r.text,k,"tx"),T.mergeArray(r.texttemplate,k,"txt"),T.mergeArray(r.hovertext,k,"htx"),T.mergeArray(r.customdata,k,"data"),T.mergeArray(r.textposition,k,"tp"),r.textfont&&(T.mergeArrayCastPositive(r.textfont.size,k,"ts"),T.mergeArray(r.textfont.color,k,"tc"),T.mergeArray(r.textfont.family,k,"tf"));var h=r.marker;if(h){T.mergeArrayCastPositive(h.size,k,"ms"),T.mergeArrayCastPositive(h.opacity,k,"mo"),T.mergeArray(h.symbol,k,"mx"),T.mergeArray(h.angle,k,"ma"),T.mergeArray(h.standoff,k,"mf"),T.mergeArray(h.color,k,"mc");var s=h.line;h.line&&(T.mergeArray(s.color,k,"mlc"),T.mergeArrayCastPositive(s.width,k,"mlw"));var e=h.gradient;e&&e.type!=="none"&&(T.mergeArray(e.type,k,"mgt"),T.mergeArray(e.color,k,"mgc"))}}},82196:function(W,I,o){var T=o(12663).axisHoverFormat,k=o(5386).si,r=o(5386).fF,m=o(50693),h=o(41940),s=o(79952).P,e=o(79952).u,t=o(91424),n=o(47581),a=o(1426).extendFlat;W.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:T("x"),yhoverformat:T("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:r({},{keys:n.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:a({},s,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:e,marker:a({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:a({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},m("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},m("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:h({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(W,I,o){var T=o(92770),k=o(71828),r=o(89298),m=o(42973),h=o(50606).BADNUM,s=o(34098),e=o(36922),t=o(75225),n=o(66279);function a(f,d,w,v,p,y,b){var x=d._length,_=f._fullLayout,g=w._id,A=v._id,M=_._firstScatter[l(d)]===d.uid,L=(u(d,_,w,v)||{}).orientation,E=d.fill;w._minDtick=0,v._minDtick=0;var S={padded:!0},O={padded:!0};b&&(S.ppad=O.ppad=b);var P=x<2||p[0]!==p[x-1]||y[0]!==y[x-1];P&&(E==="tozerox"||E==="tonextx"&&(M||L==="h"))?S.tozero=!0:(d.error_y||{}).visible||E!=="tonexty"&&E!=="tozeroy"&&(s.hasMarkers(d)||s.hasText(d))||(S.padded=!1,S.ppad=0),P&&(E==="tozeroy"||E==="tonexty"&&(M||L==="v"))?O.tozero=!0:E!=="tonextx"&&E!=="tozerox"||(O.padded=!1),g&&(d._extremes[g]=r.findExtremes(w,p,S)),A&&(d._extremes[A]=r.findExtremes(v,y,O))}function i(f,d){if(s.hasMarkers(f)){var w,v=f.marker,p=1.6*(f.marker.sizeref||1);if(w=f.marker.sizemode==="area"?function(g){return Math.max(Math.sqrt((g||0)/p),3)}:function(g){return Math.max((g||0)/p,3)},k.isArrayOrTypedArray(v.size)){var y={type:"linear"};r.setConvert(y);for(var b=y.makeCalcdata(f.marker,"size"),x=new Array(d),_=0;_<d;_++)x[_]=w(b[_]);return x}return w(v.size)}}function c(f,d){var w=l(d),v=f._firstScatter;v[w]||(v[w]=d.uid)}function l(f){var d=f.stackgroup;return f.xaxis+f.yaxis+f.type+(d?"-"+d:"")}function u(f,d,w,v){var p=f.stackgroup;if(p){var y=d._scatterStackOpts[w._id+v._id][p],b=y.orientation==="v"?v:w;return b.type==="linear"||b.type==="log"?y:void 0}}W.exports={calc:function(f,d){var w,v,p,y,b,x,_=f._fullLayout,g=d._xA=r.getFromId(f,d.xaxis||"x","x"),A=d._yA=r.getFromId(f,d.yaxis||"y","y"),M=g.makeCalcdata(d,"x"),L=A.makeCalcdata(d,"y"),E=m(d,g,"x",M),S=m(d,A,"y",L),O=E.vals,P=S.vals,U=d._length,R=new Array(U),j=d.ids,B=u(d,_,g,A),z=!1;c(_,d);var G,V="x",et="y";B?(k.pushUnique(B.traceIndices,d._expandedIndex),(w=B.orientation==="v")?(et="s",G="x"):(V="s",G="y"),b=B.stackgaps==="interpolate"):a(f,d,g,A,O,P,i(d,U));var J=!!d.xperiodalignment,X=!!d.yperiodalignment;for(v=0;v<U;v++){var Y=R[v]={},Z=T(O[v]),tt=T(P[v]);Z&&tt?(Y[V]=O[v],Y[et]=P[v],J&&(Y.orig_x=M[v],Y.xEnd=E.ends[v],Y.xStart=E.starts[v]),X&&(Y.orig_y=L[v],Y.yEnd=S.ends[v],Y.yStart=S.starts[v])):B&&(w?Z:tt)?(Y[G]=w?O[v]:P[v],Y.gap=!0,b?(Y.s=h,z=!0):Y.s=0):Y[V]=Y[et]=h,j&&(Y.id=String(j[v]))}if(t(R,d),e(f,d),n(R,d),B){for(v=0;v<R.length;)R[v][G]===h?R.splice(v,1):v++;if(k.sort(R,function(ct,pt){return ct[G]-pt[G]||ct.i-pt.i}),z){for(v=0;v<R.length-1&&R[v].gap;)v++;for((x=R[v].s)||(x=R[v].s=0),p=0;p<v;p++)R[p].s=x;for(y=R.length-1;y>v&&R[y].gap;)y--;for(x=R[y].s,p=R.length-1;p>y;p--)R[p].s=x;for(;v<y;)if(R[++v].gap){for(p=v+1;R[p].gap;)p++;for(var rt=R[v-1][G],nt=R[v-1].s,ot=(R[p].s-nt)/(R[p][G]-rt);v<p;)R[v].s=nt+(R[v][G]-rt)*ot,v++}}}return R},calcMarkerSize:i,calcAxisExpansion:a,setFirstScatter:c,getStackOpts:u}},66279:function(W,I,o){var T=o(71828);W.exports=function(k,r){T.isArrayOrTypedArray(r.selectedpoints)&&T.tagSelected(k,r)}},36922:function(W,I,o){var T=o(52075).hasColorscale,k=o(78803),r=o(34098);W.exports=function(m,h){r.hasLines(h)&&T(h,"line")&&k(m,h,{vals:h.line.color,containerStr:"line",cLetter:"c"}),r.hasMarkers(h)&&(T(h,"marker")&&k(m,h,{vals:h.marker.color,containerStr:"marker",cLetter:"c"}),T(h,"marker.line")&&k(m,h,{vals:h.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(W){W.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(W,I,o){var T=o(47761),k=o(11661).setGroupPositions;function r(m,h,s,e,t,n,a){t[e]=!0;var i={i:null,gap:!0,s:0};if(i[a]=s,m.splice(h,0,i),h&&s===m[h-1][a]){var c=m[h-1];i.s=c.s,i.i=c.i,i.gap=c.gap}else n&&(i.s=function(l,u,f,d){var w=l[u-1],v=l[u+1];return v?w?w.s+(v.s-w.s)*(f-w[d])/(v[d]-w[d]):v.s:w.s}(m,h,s,a));h||(m[0].t=m[1].t,m[0].trace=m[1].trace,delete m[1].t,delete m[1].trace)}W.exports=function(m,h){m._fullLayout.scattermode==="group"&&function(G,V){for(var et=V.xaxis,J=V.yaxis,X=G._fullLayout,Y=G._fullData,Z=G.calcdata,tt=[],rt=[],nt=0;nt<Y.length;nt++){var ot=Y[nt];ot.visible===!0&&ot.type==="scatter"&&ot.xaxis===et._id&&ot.yaxis===J._id&&(ot.orientation==="h"?tt.push(Z[nt]):ot.orientation==="v"&&rt.push(Z[nt]))}var ct={mode:X.scattermode,gap:X.scattergap};k(G,et,J,rt,ct),k(G,J,et,tt,ct)}(m,h);var s=h.xaxis,e=h.yaxis,t=s._id+e._id,n=m._fullLayout._scatterStackOpts[t];if(n){var a,i,c,l,u,f,d,w,v,p,y,b,x,_,g,A=m.calcdata;for(var M in n){var L=(p=n[M]).traceIndices;if(L.length){for(y=p.stackgaps==="interpolate",b=p.groupnorm,p.orientation==="v"?(x="x",_="y"):(x="y",_="x"),g=new Array(L.length),a=0;a<g.length;a++)g[a]=!1;f=A[L[0]];var E=new Array(f.length);for(a=0;a<f.length;a++)E[a]=f[a][x];for(a=1;a<L.length;a++){for(u=A[L[a]],i=c=0;i<u.length;i++){for(d=u[i][x];d>E[c]&&c<E.length;c++)r(u,i,E[c],a,g,y,x),i++;if(d!==E[c]){for(l=0;l<a;l++)r(A[L[l]],c,d,l,g,y,x);E.splice(c,0,d)}c++}for(;c<E.length;c++)r(u,i,E[c],a,g,y,x),i++}var S=E.length;for(i=0;i<f.length;i++){for(w=f[i][_]=f[i].s,a=1;a<L.length;a++)(u=A[L[a]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=S,w+=u[i].s,u[i][_]=w;if(b)for(v=(b==="fraction"?w:w/100)||1,a=0;a<L.length;a++){var O=A[L[a]][i];O[_]/=v,O.sNorm=O.s/v}}for(a=0;a<L.length;a++){var P=(u=A[L[a]])[0].trace,U=T.calcMarkerSize(P,P._rawLength),R=Array.isArray(U);if(U&&g[a]||R){var j=U;for(U=new Array(S),i=0;i<S;i++)U[i]=u[i].gap?0:R?j[u[i].i]:j}var B=new Array(S),z=new Array(S);for(i=0;i<S;i++)B[i]=u[i].x,z[i]=u[i].y;T.calcAxisExpansion(m,P,s,e,B,z,U),u[0].t.orientation=p.orientation}}}}}},34936:function(W,I,o){var T=o(71828),k=o(26125),r=o(82196);W.exports=function(m,h){var s,e,t;function n(u){return T.coerce(e._input,e,r,u)}if(h.scattermode==="group")for(t=0;t<m.length;t++)(e=m[t]).type==="scatter"&&(s=e._input,k(s,e,h,n));for(t=0;t<m.length;t++){var a=m[t];if(a.type==="scatter"){var i=a.fill;if(i!=="none"&&i!=="toself"&&(a.opacity=void 0,i==="tonexty"||i==="tonextx"))for(var c=t-1;c>=0;c--){var l=m[c];if(l.type==="scatter"&&l.xaxis===a.xaxis&&l.yaxis===a.yaxis){l.opacity=void 0;break}}}}}},17438:function(W,I,o){var T=o(71828),k=o(73972),r=o(82196),m=o(47581),h=o(34098),s=o(67513),e=o(73927),t=o(565),n=o(49508),a=o(11058),i=o(94039),c=o(82410),l=o(28908),u=o(71828).coercePattern;W.exports=function(f,d,w,v){function p(L,E){return T.coerce(f,d,r,L,E)}var y=s(f,d,v,p);if(y||(d.visible=!1),d.visible){e(f,d,v,p),p("xhoverformat"),p("yhoverformat");var b=t(f,d,v,p);v.scattermode==="group"&&d.orientation===void 0&&p("orientation","v");var x=!b&&y<m.PTS_LINESONLY?"lines+markers":"lines";p("text"),p("hovertext"),p("mode",x),h.hasLines(d)&&(a(f,d,w,v,p,{backoff:!0}),i(f,d,p),p("connectgaps"),p("line.simplify")),h.hasMarkers(d)&&n(f,d,w,v,p,{gradient:!0}),h.hasText(d)&&(p("texttemplate"),c(f,d,v,p));var _=[];(h.hasMarkers(d)||h.hasText(d))&&(p("cliponaxis"),p("marker.maxdisplayed"),_.push("points")),p("fill",b?b.fillDflt:"none"),d.fill!=="none"&&(l(f,d,w,p),h.hasLines(d)||i(f,d,p),u(p,"fillpattern",d.fillcolor,!1));var g=(d.line||{}).color,A=(d.marker||{}).color;d.fill!=="tonext"&&d.fill!=="toself"||_.push("fills"),p("hoveron",_.join("+")||"points"),d.hoveron!=="fills"&&p("hovertemplate");var M=k.getComponentMethod("errorbars","supplyDefaults");M(f,d,g||A||w,{axis:"y"}),M(f,d,g||A||w,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(d,p)}}},28908:function(W,I,o){var T=o(7901),k=o(71828).isArrayOrTypedArray;W.exports=function(r,m,h,s){var e=!1;if(m.marker){var t=m.marker.color,n=(m.marker.line||{}).color;t&&!k(t)?e=t:n&&!k(n)&&(e=n)}s("fillcolor",T.addOpacity((m.line||{}).color||e||h,.5))}},8225:function(W,I,o){var T=o(89298);W.exports=function(k,r,m){var h={},s={_fullLayout:m},e=T.getFromTrace(s,r,"x"),t=T.getFromTrace(s,r,"y"),n=k.orig_x;n===void 0&&(n=k.x);var a=k.orig_y;return a===void 0&&(a=k.y),h.xLabel=T.tickText(e,e.c2l(n),!0).text,h.yLabel=T.tickText(t,t.c2l(a),!0).text,h}},34603:function(W,I,o){var T=o(7901),k=o(34098);W.exports=function(r,m){var h,s;if(r.mode==="lines")return(h=r.line.color)&&T.opacity(h)?h:r.fillcolor;if(r.mode==="none")return r.fill?r.fillcolor:"";var e=m.mcc||(r.marker||{}).color,t=m.mlcc||((r.marker||{}).line||{}).color;return(s=e&&T.opacity(e)?e:t&&T.opacity(t)&&(m.mlw||((r.marker||{}).line||{}).width)?t:"")?T.opacity(s)<.3?T.addOpacity(s,.3):s:(h=(r.line||{}).color)&&T.opacity(h)&&k.hasLines(r)&&r.line.width?h:r.fillcolor}},26125:function(W,I,o){var T=o(99082).getAxisGroup;W.exports=function(k,r,m,h){var s=r.orientation,e=r[{v:"x",h:"y"}[s]+"axis"],t=T(m,e)+s,n=m._alignmentOpts||{},a=h("alignmentgroup"),i=n[t];i||(i=n[t]={});var c=i[a];c?c.traces.push(r):c=i[a]={traces:[r],alignmentIndex:Object.keys(i).length,offsetGroups:{}};var l=h("offsetgroup"),u=c.offsetGroups,f=u[l];l&&(f||(f=u[l]={offsetIndex:Object.keys(u).length}),r._offsetIndex=f.offsetIndex)}},33720:function(W,I,o){var T=o(71828),k=o(30211),r=o(73972),m=o(34603),h=o(7901),s=T.fillText;W.exports=function(e,t,n,a){var i=e.cd,c=i[0].trace,l=e.xa,u=e.ya,f=l.c2p(t),d=u.c2p(n),w=[f,d],v=c.hoveron||"",p=c.mode.indexOf("markers")!==-1?3:.5,y=!!c.xperiodalignment,b=!!c.yperiodalignment;if(v.indexOf("points")!==-1){var x=function(gt){var kt=Math.max(p,gt.mrc||0),yt=l.c2p(gt.x)-f,mt=u.c2p(gt.y)-d;return Math.max(Math.sqrt(yt*yt+mt*mt)-kt,1-p/kt)},_=k.getDistanceFunction(a,function(gt){if(y){var kt=l.c2p(gt.xStart),yt=l.c2p(gt.xEnd);return f>=Math.min(kt,yt)&&f<=Math.max(kt,yt)?0:1/0}var mt=Math.max(3,gt.mrc||0),Ot=1-1/mt,vt=Math.abs(l.c2p(gt.x)-f);return vt<mt?Ot*vt/mt:vt-mt+Ot},function(gt){if(b){var kt=u.c2p(gt.yStart),yt=u.c2p(gt.yEnd);return d>=Math.min(kt,yt)&&d<=Math.max(kt,yt)?0:1/0}var mt=Math.max(3,gt.mrc||0),Ot=1-1/mt,vt=Math.abs(u.c2p(gt.y)-d);return vt<mt?Ot*vt/mt:vt-mt+Ot},x);if(k.getClosest(i,_,e),e.index!==!1){var g=i[e.index],A=l.c2p(g.x,!0),M=u.c2p(g.y,!0),L=g.mrc||1;e.index=g.i;var E=i[0].t.orientation,S=E&&(g.sNorm||g.s),O=E==="h"?S:g.orig_x!==void 0?g.orig_x:g.x,P=E==="v"?S:g.orig_y!==void 0?g.orig_y:g.y;return T.extendFlat(e,{color:m(c,g),x0:A-L,x1:A+L,xLabelVal:O,y0:M-L,y1:M+L,yLabelVal:P,spikeDistance:x(g),hovertemplate:c.hovertemplate}),s(g,c,e),r.getComponentMethod("errorbars","hoverInfo")(g,c,e),[e]}}if(v.indexOf("fills")!==-1&&c._polygons){var U,R,j,B,z,G,V,et,J,X=c._polygons,Y=[],Z=!1,tt=1/0,rt=-1/0,nt=1/0,ot=-1/0;for(U=0;U<X.length;U++)(j=X[U]).contains(w)&&(Z=!Z,Y.push(j),nt=Math.min(nt,j.ymin),ot=Math.max(ot,j.ymax));if(Z){var ct=((nt=Math.max(nt,0))+(ot=Math.min(ot,u._length)))/2;for(U=0;U<Y.length;U++)for(B=Y[U].pts,R=1;R<B.length;R++)(et=B[R-1][1])>ct!=(J=B[R][1])>=ct&&(G=B[R-1][0],V=B[R][0],J-et&&(z=G+(V-G)*(ct-et)/(J-et),tt=Math.min(tt,z),rt=Math.max(rt,z)));tt=Math.max(tt,0),rt=Math.min(rt,l._length);var pt=h.defaultLine;return h.opacity(c.fillcolor)?pt=c.fillcolor:h.opacity((c.line||{}).color)&&(pt=c.line.color),T.extendFlat(e,{distance:e.maxHoverDistance,x0:tt,x1:rt,y0:ct,y1:ct,color:pt,hovertemplate:!1}),delete e.index,c.text&&!Array.isArray(c.text)?e.text=String(c.text):e.text=c.name,[e]}}}},67368:function(W,I,o){var T=o(34098);W.exports={hasLines:T.hasLines,hasMarkers:T.hasMarkers,hasText:T.hasText,isBubble:T.isBubble,attributes:o(82196),layoutAttributes:o(21479),supplyDefaults:o(17438),crossTraceDefaults:o(34936),supplyLayoutDefaults:o(79334),calc:o(47761).calc,crossTraceCalc:o(72626),arraysToCalcdata:o(75225),plot:o(32663),colorbar:o(4898),formatLabels:o(8225),style:o(16296).style,styleOnSelect:o(16296).styleOnSelect,hoverPoints:o(33720),selectPoints:o(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:o(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(W){W.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(W,I,o){var T=o(71828),k=o(21479);W.exports=function(r,m){var h,s=m.barmode==="group";m.scattermode==="group"&&(h=s?m.bargap:.2,T.coerce(r,m,k,"scattergap",h))}},11058:function(W,I,o){var T=o(71828).isArrayOrTypedArray,k=o(52075).hasColorscale,r=o(1586);W.exports=function(m,h,s,e,t,n){n||(n={});var a=(m.marker||{}).color;t("line.color",s),k(m,"line")?r(m,h,e,t,{prefix:"line.",cLetter:"c"}):t("line.color",!T(a)&&a||s),t("line.width"),n.noDash||t("line.dash"),n.backoff&&t("line.backoff")}},34621:function(W,I,o){var T=o(91424),k=o(50606),r=k.BADNUM,m=k.LOG_CLIP,h=m+.5,s=m-.5,e=o(71828),t=e.segmentsIntersect,n=e.constrain,a=o(47581);W.exports=function(i,c){var l,u,f,d,w,v,p,y,b,x,_,g,A,M,L,E,S,O,P=c.trace||{},U=c.xaxis,R=c.yaxis,j=U.type==="log",B=R.type==="log",z=U._length,G=R._length,V=c.backoff,et=P.marker,J=c.connectGaps,X=c.baseTolerance,Y=c.shape,Z=Y==="linear",tt=P.fill&&P.fill!=="none",rt=[],nt=a.minTolerance,ot=i.length,ct=new Array(ot),pt=0;function gt(Te){var Vt=i[Te];if(!Vt)return!1;var Zt=c.linearized?U.l2p(Vt.x):U.c2p(Vt.x),Gt=c.linearized?R.l2p(Vt.y):R.c2p(Vt.y);if(Zt===r){if(j&&(Zt=U.c2p(Vt.x,!0)),Zt===r)return!1;B&&Gt===r&&(Zt*=Math.abs(U._m*G*(U._m>0?h:s)/(R._m*z*(R._m>0?h:s)))),Zt*=1e3}if(Gt===r){if(B&&(Gt=R.c2p(Vt.y,!0)),Gt===r)return!1;Gt*=1e3}return[Zt,Gt]}function kt(Te,Vt,Zt,Gt){var Yt=Zt-Te,ne=Gt-Vt,re=.5-Te,Pt=.5-Vt,Nt=Yt*Yt+ne*ne,ee=Yt*re+ne*Pt;if(ee>0&&ee<Nt){var te=re*ne-Pt*Yt;if(te*te<Nt)return!0}}function yt(Te,Vt){var Zt=Te[0]/z,Gt=Te[1]/G,Yt=Math.max(0,-Zt,Zt-1,-Gt,Gt-1);return Yt&&S!==void 0&&kt(Zt,Gt,S,O)&&(Yt=0),Yt&&Vt&&kt(Zt,Gt,Vt[0]/z,Vt[1]/G)&&(Yt=0),(1+a.toleranceGrowth*Yt)*X}function mt(Te,Vt){var Zt=Te[0]-Vt[0],Gt=Te[1]-Vt[1];return Math.sqrt(Zt*Zt+Gt*Gt)}var Ot,vt,xt,st,at,ht,Lt,Mt=a.maxScreensAway,_t=-z*Mt,St=z*(1+Mt),Dt=-G*Mt,ut=G*(1+Mt),Tt=[[_t,Dt,St,Dt],[St,Dt,St,ut],[St,ut,_t,ut],[_t,ut,_t,Dt]];function bt(Te){if(Te[0]<_t||Te[0]>St||Te[1]<Dt||Te[1]>ut)return[n(Te[0],_t,St),n(Te[1],Dt,ut)]}function It(Te,Vt){return Te[0]===Vt[0]&&(Te[0]===_t||Te[0]===St)||Te[1]===Vt[1]&&(Te[1]===Dt||Te[1]===ut)||void 0}function zt(Te,Vt,Zt){return function(Gt,Yt){var ne=bt(Gt),re=bt(Yt),Pt=[];if(ne&&re&&It(ne,re))return Pt;ne&&Pt.push(ne),re&&Pt.push(re);var Nt=2*e.constrain((Gt[Te]+Yt[Te])/2,Vt,Zt)-((ne||Gt)[Te]+(re||Yt)[Te]);return Nt&&((ne&&re?Nt>0==ne[Te]>re[Te]?ne:re:ne||re)[Te]+=Nt),Pt}}function Ft(Te){var Vt=Te[0],Zt=Te[1],Gt=Vt===ct[pt-1][0],Yt=Zt===ct[pt-1][1];if(!Gt||!Yt)if(pt>1){var ne=Vt===ct[pt-2][0],re=Zt===ct[pt-2][1];Gt&&(Vt===_t||Vt===St)&&ne?re?pt--:ct[pt-1]=Te:Yt&&(Zt===Dt||Zt===ut)&&re?ne?pt--:ct[pt-1]=Te:ct[pt++]=Te}else ct[pt++]=Te}function $t(Te){ct[pt-1][0]!==Te[0]&&ct[pt-1][1]!==Te[1]&&Ft([xt,st]),Ft(Te),at=null,xt=st=0}Y==="linear"||Y==="spline"?Lt=function(Te,Vt){for(var Zt=[],Gt=0,Yt=0;Yt<4;Yt++){var ne=Tt[Yt],re=t(Te[0],Te[1],Vt[0],Vt[1],ne[0],ne[1],ne[2],ne[3]);re&&(!Gt||Math.abs(re.x-Zt[0][0])>1||Math.abs(re.y-Zt[0][1])>1)&&(re=[re.x,re.y],Gt&&mt(re,Te)<mt(Zt[0],Te)?Zt.unshift(re):Zt.push(re),Gt++)}return Zt}:Y==="hv"||Y==="vh"?Lt=function(Te,Vt){var Zt=[],Gt=bt(Te),Yt=bt(Vt);return Gt&&Yt&&It(Gt,Yt)||(Gt&&Zt.push(Gt),Yt&&Zt.push(Yt)),Zt}:Y==="hvh"?Lt=zt(0,_t,St):Y==="vhv"&&(Lt=zt(1,Dt,ut));var Wt=e.isArrayOrTypedArray(et);function Xt(Te){if(Te&&V&&(Te.i=l,Te.d=i,Te.trace=P,Te.marker=Wt?et[Te.i]:et,Te.backoff=V),S=Te[0]/z,O=Te[1]/G,Ot=Te[0]<_t?_t:Te[0]>St?St:0,vt=Te[1]<Dt?Dt:Te[1]>ut?ut:0,Ot||vt){if(pt)if(at){var Vt=Lt(at,Te);Vt.length>1&&($t(Vt[0]),ct[pt++]=Vt[1])}else ht=Lt(ct[pt-1],Te)[0],ct[pt++]=ht;else ct[pt++]=[Ot||Te[0],vt||Te[1]];var Zt=ct[pt-1];Ot&&vt&&(Zt[0]!==Ot||Zt[1]!==vt)?(at&&(xt!==Ot&&st!==vt?Ft(xt&&st?(Gt=at,ne=(Yt=Te)[0]-Gt[0],re=(Yt[1]-Gt[1])/ne,(Gt[1]*Yt[0]-Yt[1]*Gt[0])/ne>0?[re>0?_t:St,ut]:[re>0?St:_t,Dt]):[xt||Ot,st||vt]):xt&&st&&Ft([xt,st])),Ft([Ot,vt])):xt-Ot&&st-vt&&Ft([Ot||xt,vt||st]),at=Te,xt=Ot,st=vt}else at&&$t(Lt(at,Te)[0]),ct[pt++]=Te;var Gt,Yt,ne,re}for(l=0;l<ot;l++)if(u=gt(l)){for(pt=0,at=null,Xt(u),l++;l<ot;l++){if(!(d=gt(l))){if(J)continue;break}if(Z&&c.simplify){var ae=gt(l+1);if(x=mt(d,u),tt&&(pt===0||pt===ot-1)||!(x<yt(d,ae)*nt)){for(y=[(d[0]-u[0])/x,(d[1]-u[1])/x],w=u,_=x,g=M=L=0,p=!1,f=d,l++;l<i.length;l++){if(v=ae,ae=gt(l+1),!v){if(J)continue;break}if(E=(b=[v[0]-u[0],v[1]-u[1]])[0]*y[1]-b[1]*y[0],M=Math.min(M,E),(L=Math.max(L,E))-M>yt(v,ae))break;f=v,(A=b[0]*y[0]+b[1]*y[1])>_?(_=A,d=v,p=!1):A<g&&(g=A,w=v,p=!0)}if(p?(Xt(d),f!==w&&Xt(w)):(w!==u&&Xt(w),f!==d&&Xt(d)),Xt(f),l>=i.length||!v)break;Xt(v),u=v}}else Xt(d)}at&&Ft([xt||at[0],st||at[1]]),rt.push(ct.slice(0,pt))}var Qt=Y.slice(Y.length-1);if(V&&Qt!=="h"&&Qt!=="v"){for(var de=!1,ye=-1,ve=[],ie=0;ie<rt.length;ie++)for(var se=0;se<rt[ie].length-1;se++){var ke=rt[ie][se],Ae=rt[ie][se+1],Ie=T.applyBackoff(Ae,ke);Ie[0]===Ae[0]&&Ie[1]===Ae[1]||(de=!0),ve[ye+1]||(ve[++ye]=[ke,[Ie[0],Ie[1]]])}return de?ve:rt}return rt}},94039:function(W){W.exports=function(I,o,T){T("line.shape")==="spline"&&T("line.smoothing")}},68687:function(W){var I={tonextx:1,tonexty:1,tonext:1};W.exports=function(o,T,k){var r,m,h,s,e,t={},n=!1,a=-1,i=0,c=-1;for(m=0;m<k.length;m++)(h=(r=k[m][0].trace).stackgroup||"")?h in t?e=t[h]:(e=t[h]=i,i++):r.fill in I&&c>=0?e=c:(e=c=i,i++),e<a&&(n=!0),r._groupIndex=a=e;var l=k.slice();n&&l.sort(function(f,d){var w=f[0].trace,v=d[0].trace;return w._groupIndex-v._groupIndex||w.index-v.index});var u={};for(m=0;m<l.length;m++)h=(r=l[m][0].trace).stackgroup||"",r.visible===!0?(r._nexttrace=null,r.fill in I&&(s=u[h],r._prevtrace=s||null,s&&(s._nexttrace=r)),r._ownfill=r.fill&&(r.fill.substr(0,6)==="tozero"||r.fill==="toself"||r.fill.substr(0,2)==="to"&&!r._prevtrace),u[h]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return l}},39984:function(W,I,o){var T=o(92770);W.exports=function(k,r){r||(r=2);var m=k.marker,h=m.sizeref||1,s=m.sizemin||0,e=m.sizemode==="area"?function(t){return Math.sqrt(t/h)}:function(t){return t/h};return function(t){var n=e(t/r);return T(n)&&n>0?Math.max(n,s):0}}},4898:function(W){W.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(W,I,o){var T=o(7901),k=o(52075).hasColorscale,r=o(1586),m=o(34098);W.exports=function(h,s,e,t,n,a){var i=m.isBubble(h),c=(h.line||{}).color;a=a||{},c&&(e=c),n("marker.symbol"),n("marker.opacity",i?.7:1),n("marker.size"),a.noAngle||(n("marker.angle"),a.noAngleRef||n("marker.angleref"),a.noStandOff||n("marker.standoff")),n("marker.color",e),k(h,"marker")&&r(h,s,t,n,{prefix:"marker.",cLetter:"c"}),a.noSelect||(n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size")),a.noLine||(n("marker.line.color",c&&!Array.isArray(c)&&s.marker.color!==c?c:i?T.background:T.defaultLine),k(h,"marker.line")&&r(h,s,t,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width",i?1:0)),i&&(n("marker.sizeref"),n("marker.sizemin"),n("marker.sizemode")),a.gradient&&n("marker.gradient.type")!=="none"&&n("marker.gradient.color")}},73927:function(W,I,o){var T=o(71828).dateTick0,k=o(50606).ONEWEEK;function r(m,h){return T(h,m%k==0?1:0)}W.exports=function(m,h,s,e,t){if(t||(t={x:!0,y:!0}),t.x){var n=e("xperiod");n&&(e("xperiod0",r(n,h.xcalendar)),e("xperiodalignment"))}if(t.y){var a=e("yperiod");a&&(e("yperiod0",r(a,h.ycalendar)),e("yperiodalignment"))}}},32663:function(W,I,o){var T=o(39898),k=o(73972),r=o(71828),m=r.ensureSingle,h=r.identity,s=o(91424),e=o(34098),t=o(34621),n=o(68687),a=o(61082).tester;function i(c,l,u,f,d,w,v){var p,y=c._context.staticPlot;(function(Lt,Mt,_t,St,Dt){var ut=_t.xaxis,Tt=_t.yaxis,bt=T.extent(r.simpleMap(ut.range,ut.r2c)),It=T.extent(r.simpleMap(Tt.range,Tt.r2c)),zt=St[0].trace;if(e.hasMarkers(zt)){var Ft=zt.marker.maxdisplayed;if(Ft!==0){var $t=St.filter(function(Qt){return Qt.x>=bt[0]&&Qt.x<=bt[1]&&Qt.y>=It[0]&&Qt.y<=It[1]}),Wt=Math.ceil($t.length/Ft),Xt=0;Dt.forEach(function(Qt,de){var ye=Qt[0].trace;e.hasMarkers(ye)&&ye.marker.maxdisplayed>0&&de<Mt&&Xt++});var ae=Math.round(Xt*Wt/3+Math.floor(Xt/3)*Wt/7.1);St.forEach(function(Qt){delete Qt.vis}),$t.forEach(function(Qt,de){Math.round((de+ae)%Wt)===0&&(Qt.vis=!0)})}}})(0,l,u,f,d);var b=!!v&&v.duration>0;function x(Lt){return b?Lt.transition():Lt}var _=u.xaxis,g=u.yaxis,A=f[0].trace,M=A.line,L=T.select(w),E=m(L,"g","errorbars"),S=m(L,"g","lines"),O=m(L,"g","points"),P=m(L,"g","text");if(k.getComponentMethod("errorbars","plot")(c,E,u,v),A.visible===!0){var U,R;x(L).style("opacity",A.opacity);var j=A.fill.charAt(A.fill.length-1);j!=="x"&&j!=="y"&&(j=""),f[0][u.isRangePlot?"nodeRangePlot3":"node3"]=L;var B,z,G="",V=[],et=A._prevtrace;et&&(G=et._prevRevpath||"",R=et._nextFill,V=et._polygons);var J,X,Y,Z,tt,rt,nt,ot="",ct="",pt=[],gt=r.noop;if(U=A._ownFill,e.hasLines(A)||A.fill!=="none"){for(R&&R.datum(f),["hv","vh","hvh","vhv"].indexOf(M.shape)!==-1?(J=s.steps(M.shape),X=s.steps(M.shape.split("").reverse().join(""))):J=X=M.shape==="spline"?function(Lt){var Mt=Lt[Lt.length-1];return Lt.length>1&&Lt[0][0]===Mt[0]&&Lt[0][1]===Mt[1]?s.smoothclosed(Lt.slice(1),M.smoothing):s.smoothopen(Lt,M.smoothing)}:function(Lt){return"M"+Lt.join("L")},Y=function(Lt){return X(Lt.reverse())},pt=t(f,{xaxis:_,yaxis:g,trace:A,connectGaps:A.connectgaps,baseTolerance:Math.max(M.width||1,3)/4,shape:M.shape,backoff:M.backoff,simplify:M.simplify,fill:A.fill}),nt=A._polygons=new Array(pt.length),p=0;p<pt.length;p++)A._polygons[p]=a(pt[p]);pt.length&&(Z=pt[0][0],rt=(tt=pt[pt.length-1])[tt.length-1]),gt=function(Lt){return function(Mt){if(B=J(Mt),z=Y(Mt),ot?j?(ot+="L"+B.substr(1),ct=z+"L"+ct.substr(1)):(ot+="Z"+B,ct=z+"Z"+ct):(ot=B,ct=z),e.hasLines(A)){var _t=T.select(this);if(_t.datum(f),Lt)x(_t.style("opacity",0).attr("d",B).call(s.lineGroupStyle)).style("opacity",1);else{var St=x(_t);St.attr("d",B),s.singleLineStyle(f,St)}}}}}var kt=S.selectAll(".js-line").data(pt);x(kt.exit()).style("opacity",0).remove(),kt.each(gt(!1)),kt.enter().append("path").classed("js-line",!0).style("vector-effect",y?"none":"non-scaling-stroke").call(s.lineGroupStyle).each(gt(!0)),s.setClipUrl(kt,u.layerClipId,c),pt.length?(U?(U.datum(f),Z&&rt&&(j?(j==="y"?Z[1]=rt[1]=g.c2p(0,!0):j==="x"&&(Z[0]=rt[0]=_.c2p(0,!0)),x(U).attr("d","M"+rt+"L"+Z+"L"+ot.substr(1)).call(s.singleFillStyle,c)):x(U).attr("d",ot+"Z").call(s.singleFillStyle,c))):R&&(A.fill.substr(0,6)==="tonext"&&ot&&G?(A.fill==="tonext"?x(R).attr("d",ot+"Z"+G+"Z").call(s.singleFillStyle,c):x(R).attr("d",ot+"L"+G.substr(1)+"Z").call(s.singleFillStyle,c),A._polygons=A._polygons.concat(V)):(mt(R),A._polygons=null)),A._prevRevpath=ct,A._prevPolygons=nt):(U?mt(U):R&&mt(R),A._polygons=A._prevRevpath=A._prevPolygons=null),O.datum(f),P.datum(f),function(Lt,Mt,_t){var St,Dt=_t[0].trace,ut=e.hasMarkers(Dt),Tt=e.hasText(Dt),bt=at(Dt),It=ht,zt=ht;if(ut||Tt){var Ft=h,$t=Dt.stackgroup,Wt=$t&&c._fullLayout._scatterStackOpts[_._id+g._id][$t].stackgaps==="infer zero";Dt.marker.maxdisplayed||Dt._needsCull?Ft=Wt?vt:Ot:$t&&!Wt&&(Ft=xt),ut&&(It=Ft),Tt&&(zt=Ft)}var Xt,ae=(St=Lt.selectAll("path.point").data(It,bt)).enter().append("path").classed("point",!0);b&&ae.call(s.pointStyle,Dt,c).call(s.translatePoints,_,g).style("opacity",0).transition().style("opacity",1),St.order(),ut&&(Xt=s.makePointStyleFns(Dt)),St.each(function(Qt){var de=T.select(this),ye=x(de);s.translatePoint(Qt,ye,_,g)?(s.singlePointStyle(Qt,ye,Dt,Xt,c),u.layerClipId&&s.hideOutsideRangePoint(Qt,ye,_,g,Dt.xcalendar,Dt.ycalendar),Dt.customdata&&de.classed("plotly-customdata",Qt.data!==null&&Qt.data!==void 0)):ye.remove()}),b?St.exit().transition().style("opacity",0).remove():St.exit().remove(),(St=Mt.selectAll("g").data(zt,bt)).enter().append("g").classed("textpoint",!0).append("text"),St.order(),St.each(function(Qt){var de=T.select(this),ye=x(de.select("text"));s.translatePoint(Qt,ye,_,g)?u.layerClipId&&s.hideOutsideRangePoint(Qt,de,_,g,Dt.xcalendar,Dt.ycalendar):de.remove()}),St.selectAll("text").call(s.textPointStyle,Dt,c).each(function(Qt){var de=_.c2p(Qt.x),ye=g.c2p(Qt.y);T.select(this).selectAll("tspan.line").each(function(){x(T.select(this)).attr({x:de,y:ye})})}),St.exit().remove()}(O,P,f);var yt=A.cliponaxis===!1?null:u.layerClipId;s.setClipUrl(O,yt,c),s.setClipUrl(P,yt,c)}function mt(Lt){x(Lt).attr("d","M0,0Z")}function Ot(Lt){return Lt.filter(function(Mt){return!Mt.gap&&Mt.vis})}function vt(Lt){return Lt.filter(function(Mt){return Mt.vis})}function xt(Lt){return Lt.filter(function(Mt){return!Mt.gap})}function st(Lt){return Lt.id}function at(Lt){if(Lt.ids)return st}function ht(){return!1}}W.exports=function(c,l,u,f,d,w){var v,p,y=!d,b=!!d&&d.duration>0,x=n(c,l,u);(v=f.selectAll("g.trace").data(x,function(_){return _[0].trace.uid})).enter().append("g").attr("class",function(_){return"trace scatter trace"+_[0].trace.uid}).style("stroke-miterlimit",2),v.order(),function(_,g,A){g.each(function(M){var L=m(T.select(this),"g","fills");s.setClipUrl(L,A.layerClipId,_);var E=M[0].trace,S=[];E._ownfill&&S.push("_ownFill"),E._nexttrace&&S.push("_nextFill");var O=L.selectAll("g").data(S,h);O.enter().append("g"),O.exit().each(function(P){E[P]=null}).remove(),O.order().each(function(P){E[P]=m(T.select(this),"path","js-fill")})})}(c,v,l),b?(w&&(p=w()),T.transition().duration(d.duration).ease(d.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()}).each(function(){f.selectAll("g.trace").each(function(_,g){i(c,g,l,_,x,this,d)})})):v.each(function(_,g){i(c,g,l,_,x,this,d)}),y&&v.exit().remove(),f.selectAll("path:not([d])").remove()}},98002:function(W,I,o){var T=o(34098);W.exports=function(k,r){var m,h,s,e,t=k.cd,n=k.xaxis,a=k.yaxis,i=[],c=t[0].trace;if(!T.hasMarkers(c)&&!T.hasText(c))return[];if(r===!1)for(m=0;m<t.length;m++)t[m].selected=0;else for(m=0;m<t.length;m++)h=t[m],s=n.c2p(h.x),e=a.c2p(h.y),h.i!==null&&r.contains([s,e],!1,m,k)?(i.push({pointNumber:h.i,x:n.c2d(h.x),y:a.c2d(h.y)}),h.selected=1):h.selected=0;return i}},565:function(W){var I=["orientation","groupnorm","stackgaps"];W.exports=function(o,T,k,r){var m=k._scatterStackOpts,h=r("stackgroup");if(h){var s=T.xaxis+T.yaxis,e=m[s];e||(e=m[s]={});var t=e[h],n=!1;t?t.traces.push(T):(t=e[h]={traceIndices:[],traces:[T]},n=!0);for(var a={orientation:T.x&&!T.y?"h":"v"},i=0;i<I.length;i++){var c=I[i],l=c+"Found";if(!t[l]){var u=o[c]!==void 0,f=c==="orientation";if((u||n)&&(t[c]=r(c,a[c]),f&&(t.fillDflt=t[c]==="h"?"tonextx":"tonexty"),u&&(t[l]=!0,!n&&(delete t.traces[0][c],f))))for(var d=0;d<t.traces.length-1;d++){var w=t.traces[d];w._input.fill!==w.fill&&(w.fill=t.fillDflt)}}}return t}}},16296:function(W,I,o){var T=o(39898),k=o(91424),r=o(73972);function m(s,e,t){k.pointStyle(s.selectAll("path.point"),e,t)}function h(s,e,t){k.textPointStyle(s.selectAll("text"),e,t)}W.exports={style:function(s){var e=T.select(s).selectAll("g.trace.scatter");e.style("opacity",function(t){return t[0].trace.opacity}),e.selectAll("g.points").each(function(t){m(T.select(this),t.trace||t[0].trace,s)}),e.selectAll("g.text").each(function(t){h(T.select(this),t.trace||t[0].trace,s)}),e.selectAll("g.trace path.js-line").call(k.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,s),r.getComponentMethod("errorbars","style")(e)},stylePoints:m,styleText:h,styleOnSelect:function(s,e,t){var n=e[0].trace;n.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),n),k.selectedTextStyle(t.selectAll("text"),n)):(m(t,n,s),h(t,n,s))}}},34098:function(W,I,o){var T=o(71828);W.exports={hasLines:function(k){return k.visible&&k.mode&&k.mode.indexOf("lines")!==-1},hasMarkers:function(k){return k.visible&&(k.mode&&k.mode.indexOf("markers")!==-1||k.type==="splom")},hasText:function(k){return k.visible&&k.mode&&k.mode.indexOf("text")!==-1},isBubble:function(k){return T.isPlainObject(k.marker)&&T.isArrayOrTypedArray(k.marker.size)}}},82410:function(W,I,o){var T=o(71828);W.exports=function(k,r,m,h,s){s=s||{},h("textposition"),T.coerceFont(h,"textfont",s.font||m.font),s.noSelect||(h("selected.textfont.color"),h("unselected.textfont.color"))}},67513:function(W,I,o){var T=o(71828),k=o(73972);W.exports=function(r,m,h,s){var e,t=s("x"),n=s("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(r,m,["x","y"],h),t){var a=T.minRowLength(t);n?e=Math.min(a,T.minRowLength(n)):(e=a,s("y0"),s("dy"))}else{if(!n)return 0;e=T.minRowLength(n),s("x0"),s("dx")}return m._length=e,e}},44542:function(W,I,o){var T=o(82196),k=o(50693),r=o(12663).axisHoverFormat,m=o(5386).fF,h=o(5386).si,s=o(9012),e=o(29659),t=o(87381),n=o(1426).extendFlat,a=o(30962).overrideAll,i=o(78607),c=T.line,l=T.marker,u=l.line,f=n({width:c.width,dash:{valType:"enumerated",values:i(e),dflt:"solid"}},k("line")),d=W.exports=a({x:T.x,y:T.y,z:{valType:"data_array"},text:n({},T.text,{}),texttemplate:h({},{}),hovertext:n({},T.hovertext,{}),hovertemplate:m(),xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z"),mode:n({},T.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:T.connectgaps,line:f,marker:n({symbol:{valType:"enumerated",values:i(t),dflt:"circle",arrayOk:!0},size:n({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:n({},l.opacity,{arrayOk:!1}),colorbar:l.colorbar,line:n({width:n({},u.width,{arrayOk:!1})},k("marker.line"))},k("marker")),textposition:n({},T.textposition,{dflt:"top center"}),textfont:{color:T.textfont.color,size:T.textfont.size,family:n({},T.textfont.family,{arrayOk:!1})},opacity:s.opacity,hoverinfo:n({},s.hoverinfo)},"calc","nested");d.x.editType=d.y.editType=d.z.editType="calc+clearAxisTypes"},36563:function(W,I,o){var T=o(75225),k=o(36922);W.exports=function(r,m){var h=[{x:!1,y:!1,trace:m,t:{}}];return T(h,m),k(r,m),h}},67336:function(W,I,o){var T=o(73972);function k(r,m,h,s){if(!m||!m.visible)return null;for(var e=T.getComponentMethod("errorbars","makeComputeError")(m),t=new Array(r.length),n=0;n<r.length;n++){var a=e(+r[n],n);if(s.type==="log"){var i=s.c2l(r[n]),c=r[n]-a[0],l=r[n]+a[1];if(t[n]=[(s.c2l(c,!0)-i)*h,(s.c2l(l,!0)-i)*h],c>0){var u=s.c2l(c);s._lowerLogErrorBound||(s._lowerLogErrorBound=u),s._lowerErrorBound=Math.min(s._lowerLogErrorBound,u)}}else t[n]=[-a[0]*h,a[1]*h]}return t}W.exports=function(r,m,h){var s=[k(r.x,r.error_x,m[0],h.xaxis),k(r.y,r.error_y,m[1],h.yaxis),k(r.z,r.error_z,m[2],h.zaxis)],e=function(l){for(var u=0;u<l.length;u++)if(l[u])return l[u].length;return 0}(s);if(e===0)return null;for(var t=new Array(e),n=0;n<e;n++){for(var a=[[0,0,0],[0,0,0]],i=0;i<3;i++)if(s[i])for(var c=0;c<2;c++)a[c][i]=s[i][n][c];t[n]=a}return t}},58925:function(W,I,o){var T=o(9330).gl_line3d,k=o(9330).gl_scatter3d,r=o(9330).gl_error3d,m=o(9330).gl_mesh3d,h=o(9330).delaunay_triangulate,s=o(71828),e=o(78614),t=o(81697).formatColor,n=o(39984),a=o(29659),i=o(87381),c=o(89298),l=o(23469).appendArrayPointValue,u=o(67336);function f(g,A){this.scene=g,this.uid=A,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var d=f.prototype;function w(g){return g==null?0:g.indexOf("left")>-1?-1:g.indexOf("right")>-1?1:0}function v(g){return g==null?0:g.indexOf("top")>-1?-1:g.indexOf("bottom")>-1?1:0}function p(g,A){return A(4*g)}function y(g){return i[g]}function b(g,A,M,L,E){var S=null;if(s.isArrayOrTypedArray(g)){S=[];for(var O=0;O<A;O++)g[O]===void 0?S[O]=L:S[O]=M(g[O],E)}else S=M(g,s.identity);return S}function x(g){if(s.isArrayOrTypedArray(g)){var A=g[0];return s.isArrayOrTypedArray(A)&&(g=A),"rgb("+g.slice(0,3).map(function(M){return Math.round(255*M)})+")"}return null}function _(g){return s.isArrayOrTypedArray(g)?g.length===4&&typeof g[0]=="number"?x(g):g.map(x):null}d.handlePick=function(g){if(g.object&&(g.object===this.linePlot||g.object===this.delaunayMesh||g.object===this.textMarkers||g.object===this.scatterPlot)){var A=g.index=g.data.index;return g.object.highlight&&g.object.highlight(null),this.scatterPlot&&(g.object=this.scatterPlot,this.scatterPlot.highlight(g.data)),g.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[A]||this.textLabels[A]===0)&&(g.textLabel=this.textLabels[A]):g.textLabel=this.textLabels),g.traceCoordinate=[this.data.x[A],this.data.y[A],this.data.z[A]],!0}},d.update=function(g){var A,M,L,E,S=this.scene.glplot.gl,O=a.solid;this.data=g;var P=function(j,B){var z,G,V,et,J,X,Y=[],Z=j.fullSceneLayout,tt=j.dataScale,rt=Z.xaxis,nt=Z.yaxis,ot=Z.zaxis,ct=B.marker,pt=B.line,gt=B.x||[],kt=B.y||[],yt=B.z||[],mt=gt.length,Ot=B.xcalendar,vt=B.ycalendar,xt=B.zcalendar;for(J=0;J<mt;J++)z=rt.d2l(gt[J],0,Ot)*tt[0],G=nt.d2l(kt[J],0,vt)*tt[1],V=ot.d2l(yt[J],0,xt)*tt[2],Y[J]=[z,G,V];if(Array.isArray(B.text))X=B.text;else if(B.text!==void 0)for(X=new Array(mt),J=0;J<mt;J++)X[J]=B.text;function st($t,Wt){var Xt=Z[$t];return c.tickText(Xt,Xt.d2l(Wt),!0).text}var at=B.texttemplate;if(at){var ht=j.fullLayout._d3locale,Lt=Array.isArray(at),Mt=Lt?Math.min(at.length,mt):mt,_t=Lt?function($t){return at[$t]}:function(){return at};for(X=new Array(Mt),J=0;J<Mt;J++){var St={x:gt[J],y:kt[J],z:yt[J]},Dt={xLabel:st("xaxis",gt[J]),yLabel:st("yaxis",kt[J]),zLabel:st("zaxis",yt[J])},ut={};l(ut,B,J);var Tt=B._meta||{};X[J]=s.texttemplateString(_t(J),Dt,ht,ut,St,Tt)}}if(et={position:Y,mode:B.mode,text:X},"line"in B&&(et.lineColor=t(pt,1,mt),et.lineWidth=pt.width,et.lineDashes=pt.dash),"marker"in B){var bt=n(B);et.scatterColor=t(ct,1,mt),et.scatterSize=b(ct.size,mt,p,20,bt),et.scatterMarker=b(ct.symbol,mt,y,"\u25CF"),et.scatterLineWidth=ct.line.width,et.scatterLineColor=t(ct.line,1,mt),et.scatterAngle=0}"textposition"in B&&(et.textOffset=function($t){var Wt=[0,0];if(Array.isArray($t))for(var Xt=0;Xt<$t.length;Xt++)Wt[Xt]=[0,0],$t[Xt]&&(Wt[Xt][0]=w($t[Xt]),Wt[Xt][1]=v($t[Xt]));else Wt[0]=w($t),Wt[1]=v($t);return Wt}(B.textposition),et.textColor=t(B.textfont,1,mt),et.textSize=b(B.textfont.size,mt,s.identity,12),et.textFont=B.textfont.family,et.textAngle=0);var It=["x","y","z"];for(et.project=[!1,!1,!1],et.projectScale=[1,1,1],et.projectOpacity=[1,1,1],J=0;J<3;++J){var zt=B.projection[It[J]];(et.project[J]=zt.show)&&(et.projectOpacity[J]=zt.opacity,et.projectScale[J]=zt.scale)}et.errorBounds=u(B,tt,Z);var Ft=function($t){for(var Wt=[0,0,0],Xt=[[0,0,0],[0,0,0],[0,0,0]],ae=[1,1,1],Qt=0;Qt<3;Qt++){var de=$t[Qt];de&&de.copy_zstyle!==!1&&$t[2].visible!==!1&&(de=$t[2]),de&&de.visible&&(Wt[Qt]=de.width/2,Xt[Qt]=e(de.color),ae[Qt]=de.thickness)}return{capSize:Wt,color:Xt,lineWidth:ae}}([B.error_x,B.error_y,B.error_z]);return et.errorColor=Ft.color,et.errorLineWidth=Ft.lineWidth,et.errorCapSize=Ft.capSize,et.delaunayAxis=B.surfaceaxis,et.delaunayColor=e(B.surfacecolor),et}(this.scene,g);"mode"in P&&(this.mode=P.mode),"lineDashes"in P&&P.lineDashes in a&&(O=a[P.lineDashes]),this.color=_(P.scatterColor)||_(P.lineColor),this.dataPoints=P.position,A={gl:this.scene.glplot.gl,position:P.position,color:P.lineColor,lineWidth:P.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:g.opacity,connectGaps:g.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(A):(this.linePlot=T(A),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=g.opacity;if(g.marker&&g.marker.opacity!==void 0&&(U*=g.marker.opacity),M={gl:this.scene.glplot.gl,position:P.position,color:P.scatterColor,size:P.scatterSize,glyph:P.scatterMarker,opacity:U,orthographic:!0,lineWidth:P.scatterLineWidth,lineColor:P.scatterLineColor,project:P.project,projectScale:P.projectScale,projectOpacity:P.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(M):(this.scatterPlot=k(M),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),E={gl:this.scene.glplot.gl,position:P.position,glyph:P.text,color:P.textColor,size:P.textSize,angle:P.textAngle,alignment:P.textOffset,font:P.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:g.opacity},this.textLabels=g.hovertext||g.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(E):(this.textMarkers=k(E),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),L={gl:this.scene.glplot.gl,position:P.position,color:P.errorColor,error:P.errorBounds,lineWidth:P.errorLineWidth,capSize:P.errorCapSize,opacity:g.opacity},this.errorBars?P.errorBounds?this.errorBars.update(L):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):P.errorBounds&&(this.errorBars=r(L),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),P.delaunayAxis>=0){var R=function(j,B,z){var G,V=(z+1)%3,et=(z+2)%3,J=[],X=[];for(G=0;G<j.length;++G){var Y=j[G];!isNaN(Y[V])&&isFinite(Y[V])&&!isNaN(Y[et])&&isFinite(Y[et])&&(J.push([Y[V],Y[et]]),X.push(G))}var Z=h(J);for(G=0;G<Z.length;++G)for(var tt=Z[G],rt=0;rt<tt.length;++rt)tt[rt]=X[tt[rt]];return{positions:j,cells:Z,meshColor:B}}(P.position,P.delaunayColor,P.delaunayAxis);R.opacity=g.opacity,this.delaunayMesh?this.delaunayMesh.update(R):(R.gl=S,this.delaunayMesh=m(R),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},d.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},W.exports=function(g,A){var M=new f(g,A.uid);return M.update(A),M}},21428:function(W,I,o){var T=o(73972),k=o(71828),r=o(34098),m=o(49508),h=o(11058),s=o(82410),e=o(44542);W.exports=function(t,n,a,i){function c(y,b){return k.coerce(t,n,e,y,b)}var l=function(y,b,x,_){var g=0,A=x("x"),M=x("y"),L=x("z");return T.getComponentMethod("calendars","handleTraceDefaults")(y,b,["x","y","z"],_),A&&M&&L&&(g=Math.min(A.length,M.length,L.length),b._length=b._xlength=b._ylength=b._zlength=g),g}(t,n,c,i);if(l){c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"),c("zhoverformat"),c("mode"),r.hasLines(n)&&(c("connectgaps"),h(t,n,a,i,c)),r.hasMarkers(n)&&m(t,n,a,i,c,{noSelect:!0,noAngle:!0}),r.hasText(n)&&(c("texttemplate"),s(t,n,i,c,{noSelect:!0}));var u=(n.line||{}).color,f=(n.marker||{}).color;c("surfaceaxis")>=0&&c("surfacecolor",u||f);for(var d=["x","y","z"],w=0;w<3;++w){var v="projection."+d[w];c(v+".show")&&(c(v+".opacity"),c(v+".scale"))}var p=T.getComponentMethod("errorbars","supplyDefaults");p(t,n,u||f||a,{axis:"z"}),p(t,n,u||f||a,{axis:"y",inherit:"z"}),p(t,n,u||f||a,{axis:"x",inherit:"z"})}else n.visible=!1}},13551:function(W,I,o){W.exports={plot:o(58925),attributes:o(44542),markerSymbols:o(87381),supplyDefaults:o(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:o(36563),moduleType:"trace",name:"scatter3d",basePlotModule:o(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(W,I,o){var T=o(82196),k=o(9012),r=o(5386).fF,m=o(5386).si,h=o(50693),s=o(1426).extendFlat,e=T.marker,t=T.line,n=e.line;W.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:s({},T.mode,{dflt:"markers"}),text:s({},T.text,{}),texttemplate:m({editType:"plot"},{keys:["a","b","text"]}),hovertext:s({},T.hovertext,{}),line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:s({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:T.connectgaps,fill:s({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,marker:s({symbol:e.symbol,opacity:e.opacity,maxdisplayed:e.maxdisplayed,angle:e.angle,angleref:e.angleref,standoff:e.standoff,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,line:s({width:n.width,editType:"calc"},h("marker.line")),gradient:e.gradient,editType:"calc"},h("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:s({},k.hoverinfo,{flags:["a","b","text","name"]}),hoveron:T.hoveron,hovertemplate:r()}},34618:function(W,I,o){var T=o(92770),k=o(36922),r=o(75225),m=o(66279),h=o(47761).calcMarkerSize,s=o(22882);W.exports=function(e,t){var n=t._carpetTrace=s(e,t);if(n&&n.visible&&n.visible!=="legendonly"){var a;t.xaxis=n.xaxis,t.yaxis=n.yaxis;var i,c,l=t._length,u=new Array(l),f=!1;for(a=0;a<l;a++)if(i=t.a[a],c=t.b[a],T(i)&&T(c)){var d=n.ab2xy(+i,+c,!0),w=n.isVisible(+i,+c);w||(f=!0),u[a]={x:d[0],y:d[1],a:i,b:c,vis:w}}else u[a]={x:!1,y:!1};return t._needsCull=f,u[0].carpet=n,u[0].trace=t,h(t,l),k(e,t),r(u,t),m(u,t),u}}},98965:function(W,I,o){var T=o(71828),k=o(47581),r=o(34098),m=o(49508),h=o(11058),s=o(94039),e=o(82410),t=o(28908),n=o(97001);W.exports=function(a,i,c,l){function u(p,y){return T.coerce(a,i,n,p,y)}u("carpet"),i.xaxis="x",i.yaxis="y";var f=u("a"),d=u("b"),w=Math.min(f.length,d.length);if(w){i._length=w,u("text"),u("texttemplate"),u("hovertext"),u("mode",w<k.PTS_LINESONLY?"lines+markers":"lines"),r.hasLines(i)&&(h(a,i,c,l,u,{backoff:!0}),s(a,i,u),u("connectgaps")),r.hasMarkers(i)&&m(a,i,c,l,u,{gradient:!0}),r.hasText(i)&&e(a,i,l,u);var v=[];(r.hasMarkers(i)||r.hasText(i))&&(u("marker.maxdisplayed"),v.push("points")),u("fill"),i.fill!=="none"&&(t(a,i,c,u),r.hasLines(i)||s(a,i,u)),i.fill!=="tonext"&&i.fill!=="toself"||v.push("fills"),u("hoveron",v.join("+")||"points")!=="fills"&&u("hovertemplate"),T.coerceSelectionMarkerOpacity(i,u)}else i.visible=!1}},16165:function(W){W.exports=function(I,o,T,k,r){var m=k[r];return I.a=m.a,I.b=m.b,I.y=m.y,I}},48953:function(W){W.exports=function(I,o){var T={},k=o._carpet,r=k.ab2ij([I.a,I.b]),m=Math.floor(r[0]),h=r[0]-m,s=Math.floor(r[1]),e=r[1]-s,t=k.evalxy([],m,s,h,e);return T.yLabel=t[1].toFixed(3),T}},22931:function(W,I,o){var T=o(33720),k=o(71828).fillText;W.exports=function(r,m,h,s){var e=T(r,m,h,s);if(e&&e[0].index!==!1){var t=e[0];if(t.index===void 0){var n=1-t.y0/r.ya._length,a=r.xa._length,i=a*n/2,c=a-i;return t.x0=Math.max(Math.min(t.x0,c),i),t.x1=Math.max(Math.min(t.x1,c),i),e}var l=t.cd[t.index];t.a=l.a,t.b=l.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,f=u._carpet,d=u._module.formatLabels(l,u);t.yLabel=d.yLabel,delete t.text;var w=[];if(!u.hovertemplate){var v=(l.hi||u.hoverinfo).split("+");v.indexOf("all")!==-1&&(v=["a","b","text"]),v.indexOf("a")!==-1&&p(f.aaxis,l.a),v.indexOf("b")!==-1&&p(f.baxis,l.b),w.push("y: "+t.yLabel),v.indexOf("text")!==-1&&k(l,u,w),t.extraText=w.join("<br>")}return e}function p(y,b){var x;x=y.labelprefix&&y.labelprefix.length>0?y.labelprefix.replace(/ = $/,""):y._hovertitle,w.push(x+": "+b.toFixed(3)+y.labelsuffix)}}},46858:function(W,I,o){W.exports={attributes:o(97001),supplyDefaults:o(98965),colorbar:o(4898),formatLabels:o(48953),calc:o(34618),plot:o(1913),style:o(16296).style,styleOnSelect:o(16296).styleOnSelect,hoverPoints:o(22931),selectPoints:o(98002),eventData:o(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:o(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(W,I,o){var T=o(32663),k=o(89298),r=o(91424);W.exports=function(m,h,s,e){var t,n,a,i=s[0][0].carpet,c=k.getFromId(m,i.xaxis||"x"),l=k.getFromId(m,i.yaxis||"y"),u={xaxis:c,yaxis:l,plot:h.plot};for(t=0;t<s.length;t++)(n=s[t][0].trace)._xA=c,n._yA=l;for(T(m,u,s,e),t=0;t<s.length;t++)n=s[t][0].trace,a=e.selectAll("g.trace"+n.uid+" .js-line"),r.setClipUrl(a,s[t][0].carpet._clipPathId,m)}},19316:function(W,I,o){var T=o(5386).fF,k=o(5386).si,r=o(82196),m=o(9012),h=o(50693),s=o(79952).P,e=o(1426).extendFlat,t=o(30962).overrideAll,n=r.marker,a=r.line,i=n.line;W.exports=t({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:e({},r.mode,{dflt:"markers"}),text:e({},r.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:e({},r.hovertext,{}),textfont:r.textfont,textposition:r.textposition,line:{color:a.color,width:a.width,dash:s},connectgaps:r.connectgaps,marker:e({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:e({},n.angleref,{values:["previous","up","north"]}),standoff:n.standoff,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:e({width:i.width},h("marker.line")),gradient:n.gradient},h("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:r.fillcolor,selected:r.selected,unselected:r.unselected,hoverinfo:e({},m.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:T()},"calc","nested")},84622:function(W,I,o){var T=o(92770),k=o(50606).BADNUM,r=o(36922),m=o(75225),h=o(66279),s=o(71828)._;function e(t){return t&&typeof t=="string"}W.exports=function(t,n){var a,i=Array.isArray(n.locations),c=i?n.locations.length:n._length,l=new Array(c);a=n.geojson?function(p){return e(p)||T(p)}:e;for(var u=0;u<c;u++){var f=l[u]={};if(i){var d=n.locations[u];f.loc=a(d)?d:null}else{var w=n.lon[u],v=n.lat[u];T(w)&&T(v)?f.lonlat=[+w,+v]:f.lonlat=[k,k]}}return m(l,n),r(t,n),h(l,n),c&&(l[0].t={labels:{lat:s(t,"lat:")+" ",lon:s(t,"lon:")+" "}}),l}},10659:function(W,I,o){var T=o(71828),k=o(34098),r=o(49508),m=o(11058),h=o(82410),s=o(28908),e=o(19316);W.exports=function(t,n,a,i){function c(p,y){return T.coerce(t,n,e,p,y)}var l,u=c("locations");if(u&&u.length){var f,d=c("geojson");(typeof d=="string"&&d!==""||T.isPlainObject(d))&&(f="geojson-id"),c("locationmode",f)==="geojson-id"&&c("featureidkey"),l=u.length}else{var w=c("lon")||[],v=c("lat")||[];l=Math.min(w.length,v.length)}l?(n._length=l,c("text"),c("hovertext"),c("hovertemplate"),c("mode"),k.hasLines(n)&&(m(t,n,a,i,c),c("connectgaps")),k.hasMarkers(n)&&r(t,n,a,i,c,{gradient:!0}),k.hasText(n)&&(c("texttemplate"),h(t,n,i,c)),c("fill"),n.fill!=="none"&&s(t,n,a,c),T.coerceSelectionMarkerOpacity(n,c)):n.visible=!1}},84084:function(W){W.exports=function(I,o,T,k,r){I.lon=o.lon,I.lat=o.lat,I.location=o.loc?o.loc:null;var m=k[r];return m.fIn&&m.fIn.properties&&(I.properties=m.fIn.properties),I}},82719:function(W,I,o){var T=o(89298);W.exports=function(k,r,m){var h={},s=m[r.geo]._subplot.mockAxis,e=k.lonlat;return h.lonLabel=T.tickText(s,s.c2l(e[0]),!0).text,h.latLabel=T.tickText(s,s.c2l(e[1]),!0).text,h}},14977:function(W,I,o){var T=o(30211),k=o(50606).BADNUM,r=o(34603),m=o(71828).fillText,h=o(19316);W.exports=function(s,e,t){var n=s.cd,a=n[0].trace,i=s.xa,c=s.ya,l=s.subplot,u=l.projection.isLonLatOverEdges,f=l.project;if(T.getClosest(n,function(x){var _=x.lonlat;if(_[0]===k||u(_))return 1/0;var g=f(_),A=f([e,t]),M=Math.abs(g[0]-A[0]),L=Math.abs(g[1]-A[1]),E=Math.max(3,x.mrc||0);return Math.max(Math.sqrt(M*M+L*L)-E,1-3/E)},s),s.index!==!1){var d=n[s.index],w=d.lonlat,v=[i.c2p(w),c.c2p(w)],p=d.mrc||1;s.x0=v[0]-p,s.x1=v[0]+p,s.y0=v[1]-p,s.y1=v[1]+p,s.loc=d.loc,s.lon=w[0],s.lat=w[1];var y={};y[a.geo]={_subplot:l};var b=a._module.formatLabels(d,a,y);return s.lonLabel=b.lonLabel,s.latLabel=b.latLabel,s.color=r(a,d),s.extraText=function(x,_,g,A){if(!x.hovertemplate){var M=_.hi||x.hoverinfo,L=M==="all"?h.hoverinfo.flags:M.split("+"),E=L.indexOf("location")!==-1&&Array.isArray(x.locations),S=L.indexOf("lon")!==-1,O=L.indexOf("lat")!==-1,P=L.indexOf("text")!==-1,U=[];return E?U.push(_.loc):S&&O?U.push("("+R(g.latLabel)+", "+R(g.lonLabel)+")"):S?U.push(A.lon+R(g.lonLabel)):O&&U.push(A.lat+R(g.latLabel)),P&&m(_,x,U),U.join("<br>")}function R(j){return j+"\xB0"}}(a,d,s,n[0].t.labels),s.hovertemplate=a.hovertemplate,[s]}}},17988:function(W,I,o){W.exports={attributes:o(19316),supplyDefaults:o(10659),colorbar:o(4898),formatLabels:o(82719),calc:o(84622),calcGeoJSON:o(89171).calcGeoJSON,plot:o(89171).plot,style:o(33095),styleOnSelect:o(16296).styleOnSelect,hoverPoints:o(14977),eventData:o(84084),selectPoints:o(20548),moduleType:"trace",name:"scattergeo",basePlotModule:o(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(W,I,o){var T=o(39898),k=o(71828),r=o(90973).getTopojsonFeatures,m=o(18214),h=o(41327),s=o(71739).findExtremes,e=o(50606).BADNUM,t=o(47761).calcMarkerSize,n=o(34098),a=o(33095);W.exports={calcGeoJSON:function(i,c){var l,u,f=i[0].trace,d=c[f.geo],w=d._subplot,v=f._length;if(Array.isArray(f.locations)){var p=f.locationmode,y=p==="geojson-id"?h.extractTraceFeature(i):r(f,w.topojson);for(l=0;l<v;l++){u=i[l];var b=p==="geojson-id"?u.fOut:h.locationToFeature(p,u.loc,y);u.lonlat=b?b.properties.ct:[e,e]}}var x,_,g={padded:!0};if(d.fitbounds==="geojson"&&f.locationmode==="geojson-id"){var A=h.computeBbox(h.getTraceGeojson(f));x=[A[0],A[2]],_=[A[1],A[3]]}else{for(x=new Array(v),_=new Array(v),l=0;l<v;l++)u=i[l],x[l]=u.lonlat[0],_[l]=u.lonlat[1];g.ppad=t(f,v)}f._extremes.lon=s(d.lonaxis._ax,x,g),f._extremes.lat=s(d.lataxis._ax,_,g)},plot:function(i,c,l){var u=c.layers.frontplot.select(".scatterlayer"),f=k.makeTraceGroups(u,l,"trace scattergeo");function d(w,v){w.lonlat[0]===e&&T.select(v).remove()}f.selectAll("*").remove(),f.each(function(w){var v=T.select(this),p=w[0].trace;if(n.hasLines(p)||p.fill!=="none"){var y=m.calcTraceToLineCoords(w),b=p.fill!=="none"?m.makePolygon(y):m.makeLine(y);v.selectAll("path.js-line").data([{geojson:b,trace:p}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(p)&&v.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(x){d(x,this)}),n.hasText(p)&&v.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(x){d(x,this)}),a(i,w)})}}},20548:function(W,I,o){var T=o(34098),k=o(50606).BADNUM;W.exports=function(r,m){var h,s,e,t,n,a=r.cd,i=r.xaxis,c=r.yaxis,l=[],u=a[0].trace;if(!T.hasMarkers(u)&&!T.hasText(u))return[];if(m===!1)for(n=0;n<a.length;n++)a[n].selected=0;else for(n=0;n<a.length;n++)(s=(h=a[n]).lonlat)[0]!==k&&(e=i.c2p(s),t=c.c2p(s),m.contains([e,t],null,n,r)?(l.push({pointNumber:n,lon:s[0],lat:s[1]}),h.selected=1):h.selected=0);return l}},33095:function(W,I,o){var T=o(39898),k=o(91424),r=o(7901),m=o(16296),h=m.stylePoints,s=m.styleText;W.exports=function(e,t){t&&function(n,a){var i=a[0].trace,c=a[0].node3;c.style("opacity",a[0].trace.opacity),h(c,i,n),s(c,i,n),c.selectAll("path.js-line").style("fill","none").each(function(l){var u=T.select(this),f=l.trace,d=f.line||{};u.call(r.stroke,d.color).call(k.dashLine,d.dash||"",d.width||0),f.fill!=="none"&&u.call(r.fill,f.fillcolor)})}(e,t)}},42341:function(W,I,o){var T=o(9012),k=o(82196),r=o(12663).axisHoverFormat,m=o(50693),h=o(78607),s=o(1426).extendFlat,e=o(30962).overrideAll,t=o(78232).DASHES,n=k.line,a=k.marker,i=a.line,c=W.exports=e({x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:r("x"),yhoverformat:r("y"),text:k.text,hovertext:k.hovertext,textposition:k.textposition,textfont:k.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:h(t),dflt:"solid"}},marker:s({},m("marker"),{symbol:a.symbol,angle:a.angle,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:s({},m("marker.line"),{width:i.width})}),connectgaps:k.connectgaps,fill:s({},k.fill,{dflt:"none"}),fillcolor:k.fillcolor,selected:{marker:k.selected.marker,textfont:k.selected.textfont},unselected:{marker:k.unselected.marker,textfont:k.unselected.textfont},opacity:T.opacity},"calc","nested");c.x.editType=c.y.editType=c.x0.editType=c.y0.editType="calc+clearAxisTypes",c.hovertemplate=k.hovertemplate,c.texttemplate=k.texttemplate},72156:function(W,I,o){var T=o(20794);W.exports={moduleType:"trace",name:"scattergl",basePlotModule:o(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:o(42341),supplyDefaults:o(47148),crossTraceDefaults:o(34936),colorbar:o(4898),formatLabels:o(68101),calc:o(45032),hoverPoints:T.hoverPoints,selectPoints:o(58147),meta:{}}},45032:function(W,I,o){var T=o(88294),k=o(71828),r=o(41675),m=o(71739).findExtremes,h=o(42973),s=o(47761),e=s.calcMarkerSize,t=s.calcAxisExpansion,n=s.setFirstScatter,a=o(36922),i=o(19635),c=o(38967),l=o(50606).BADNUM,u=o(78232).TOO_MANY_POINTS;function f(d,w,v){var p=d._extremes[w._id],y=m(w,v._bnds,{padded:!0});p.min=p.min.concat(y.min),p.max=p.max.concat(y.max)}W.exports=function(d,w){var v,p=d._fullLayout,y=w._xA=r.getFromId(d,w.xaxis,"x"),b=w._yA=r.getFromId(d,w.yaxis,"y"),x=p._plots[w.xaxis+w.yaxis],_=w._length,g=_>=u,A=2*_,M={},L=y.makeCalcdata(w,"x"),E=b.makeCalcdata(w,"y"),S=h(w,y,"x",L),O=h(w,b,"y",E),P=S.vals,U=O.vals;w._x=P,w._y=U,w.xperiodalignment&&(w._origX=L,w._xStarts=S.starts,w._xEnds=S.ends),w.yperiodalignment&&(w._origY=E,w._yStarts=O.starts,w._yEnds=O.ends);var R=new Array(A),j=new Array(_);for(v=0;v<_;v++)R[2*v]=P[v]===l?NaN:P[v],R[2*v+1]=U[v]===l?NaN:U[v],j[v]=v;if(y.type==="log")for(v=0;v<A;v+=2)R[v]=y.c2l(R[v]);if(b.type==="log")for(v=1;v<A;v+=2)R[v]=b.c2l(R[v]);g&&y.type!=="log"&&b.type!=="log"?M.tree=T(R):M.ids=j,a(d,w);var B,z=function(V,et,J,X,Y,Z){var tt=i.style(V,J);if(tt.marker&&(tt.marker.positions=X),tt.line&&X.length>1&&k.extendFlat(tt.line,i.linePositions(V,J,X)),tt.errorX||tt.errorY){var rt=i.errorBarPositions(V,J,X,Y,Z);tt.errorX&&k.extendFlat(tt.errorX,rt.x),tt.errorY&&k.extendFlat(tt.errorY,rt.y)}return tt.text&&(k.extendFlat(tt.text,{positions:X},i.textPosition(V,J,tt.text,tt.marker)),k.extendFlat(tt.textSel,{positions:X},i.textPosition(V,J,tt.text,tt.markerSel)),k.extendFlat(tt.textUnsel,{positions:X},i.textPosition(V,J,tt.text,tt.markerUnsel))),tt}(d,0,w,R,P,U),G=c(d,x);return n(p,w),g?z.marker&&(B=z.marker.sizeAvg||Math.max(z.marker.size,3)):B=e(w,_),t(d,w,y,b,P,U,B),z.errorX&&f(w,y,z.errorX),z.errorY&&f(w,b,z.errorY),z.fill&&!G.fill2d&&(G.fill2d=!0),z.marker&&!G.scatter2d&&(G.scatter2d=!0),z.line&&!G.line2d&&(G.line2d=!0),!z.errorX&&!z.errorY||G.error2d||(G.error2d=!0),z.text&&!G.glText&&(G.glText=!0),z.marker&&(z.marker.snap=_),G.lineOptions.push(z.line),G.errorXOptions.push(z.errorX),G.errorYOptions.push(z.errorY),G.fillOptions.push(z.fill),G.markerOptions.push(z.marker),G.markerSelectedOptions.push(z.markerSel),G.markerUnselectedOptions.push(z.markerUnsel),G.textOptions.push(z.text),G.textSelectedOptions.push(z.textSel),G.textUnselectedOptions.push(z.textUnsel),G.selectBatch.push([]),G.unselectBatch.push([]),M._scene=G,M.index=G.count,M.x=P,M.y=U,M.positions=R,G.count++,[{x:!1,y:!1,t:M,trace:w}]}},78232:function(W){W.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(W,I,o){var T=o(92770),k=o(82019),r=o(25075),m=o(73972),h=o(71828),s=o(91424),e=o(41675),t=o(81697).formatColor,n=o(34098),a=o(39984),i=o(68645),c=o(78232),l=o(37822).DESELECTDIM,u={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},f=o(23469).appendArrayPointValue;function d(L,E){var S,O=L._fullLayout,P=E._length,U=E.textfont,R=E.textposition,j=Array.isArray(R)?R:[R],B=U.color,z=U.size,G=U.family,V={},et=L._context.plotGlPixelRatio,J=E.texttemplate;if(J){V.text=[];var X=O._d3locale,Y=Array.isArray(J),Z=Y?Math.min(J.length,P):P,tt=Y?function(kt){return J[kt]}:function(){return J};for(S=0;S<Z;S++){var rt={i:S},nt=E._module.formatLabels(rt,E,O),ot={};f(ot,E,S);var ct=E._meta||{};V.text.push(h.texttemplateString(tt(S),nt,X,ot,rt,ct))}}else Array.isArray(E.text)&&E.text.length<P?V.text=E.text.slice():V.text=E.text;if(Array.isArray(V.text))for(S=V.text.length;S<P;S++)V.text[S]="";for(V.opacity=E.opacity,V.font={},V.align=[],V.baseline=[],S=0;S<j.length;S++){var pt=j[S].split(/\s+/);switch(pt[1]){case"left":V.align.push("right");break;case"right":V.align.push("left");break;default:V.align.push(pt[1])}switch(pt[0]){case"top":V.baseline.push("bottom");break;case"bottom":V.baseline.push("top");break;default:V.baseline.push(pt[0])}}if(Array.isArray(B))for(V.color=new Array(P),S=0;S<P;S++)V.color[S]=B[S];else V.color=B;if(h.isArrayOrTypedArray(z)||Array.isArray(G))for(V.font=new Array(P),S=0;S<P;S++){var gt=V.font[S]={};gt.size=(h.isTypedArray(z)?z[S]:Array.isArray(z)?T(z[S])?z[S]:0:z)*et,gt.family=Array.isArray(G)?G[S]:G}else V.font={size:z*et,family:G};return V}function w(L,E){var S,O,P=E._length,U=E.marker,R={},j=h.isArrayOrTypedArray(U.symbol),B=h.isArrayOrTypedArray(U.angle),z=h.isArrayOrTypedArray(U.color),G=h.isArrayOrTypedArray(U.line.color),V=h.isArrayOrTypedArray(U.opacity),et=h.isArrayOrTypedArray(U.size),J=h.isArrayOrTypedArray(U.line.width);if(j||(O=i.isOpenSymbol(U.symbol)),j||z||G||V||B){R.symbols=new Array(P),R.angles=new Array(P),R.colors=new Array(P),R.borderColors=new Array(P);var X=U.symbol,Y=U.angle,Z=t(U,U.opacity,P),tt=t(U.line,U.opacity,P);if(!Array.isArray(tt[0])){var rt=tt;for(tt=Array(P),S=0;S<P;S++)tt[S]=rt}if(!Array.isArray(Z[0])){var nt=Z;for(Z=Array(P),S=0;S<P;S++)Z[S]=nt}if(!Array.isArray(X)){var ot=X;for(X=Array(P),S=0;S<P;S++)X[S]=ot}if(!Array.isArray(Y)){var ct=Y;for(Y=Array(P),S=0;S<P;S++)Y[S]=ct}for(R.symbols=X,R.angles=Y,R.colors=Z,R.borderColors=tt,S=0;S<P;S++)j&&(O=i.isOpenSymbol(U.symbol[S])),O&&(tt[S]=Z[S].slice(),Z[S]=Z[S].slice(),Z[S][3]=0);for(R.opacity=E.opacity,R.markers=new Array(P),S=0;S<P;S++)R.markers[S]=M({mx:R.symbols[S],ma:R.angles[S]},E)}else O?(R.color=r(U.color,"uint8"),R.color[3]=0,R.borderColor=r(U.color,"uint8")):(R.color=r(U.color,"uint8"),R.borderColor=r(U.line.color,"uint8")),R.opacity=E.opacity*U.opacity,R.marker=M({mx:U.symbol,ma:U.angle},E);var pt,gt=a(E,1);if(et||J){var kt,yt=R.sizes=new Array(P),mt=R.borderSizes=new Array(P),Ot=0;if(et){for(S=0;S<P;S++)yt[S]=gt(U.size[S]),Ot+=yt[S];kt=Ot/P}else for(pt=gt(U.size),S=0;S<P;S++)yt[S]=pt;if(J)for(S=0;S<P;S++)mt[S]=U.line.width[S];else for(pt=U.line.width,S=0;S<P;S++)mt[S]=pt;R.sizeAvg=kt}else R.size=gt(U&&U.size||10),R.borderSizes=gt(U.line.width);return R}function v(L,E,S){var O=E.marker,P={};return S&&(S.marker&&S.marker.symbol?P=w(0,h.extendFlat({},O,S.marker)):S.marker&&(S.marker.size&&(P.size=S.marker.size),S.marker.color&&(P.colors=S.marker.color),S.marker.opacity!==void 0&&(P.opacity=S.marker.opacity))),P}function p(L,E,S){var O={};if(!S)return O;if(S.textfont){var P={opacity:1,text:E.text,texttemplate:E.texttemplate,textposition:E.textposition,textfont:h.extendFlat({},E.textfont)};S.textfont&&h.extendFlat(P.textfont,S.textfont),O=d(L,P)}return O}function y(L,E,S){var O={capSize:2*E.width*S,lineWidth:E.thickness*S,color:E.color};return E.copy_ystyle&&(O=L.error_y),O}var b=c.SYMBOL_SDF_SIZE,x=c.SYMBOL_SIZE,_=c.SYMBOL_STROKE,g={},A=s.symbolFuncs[0](.05*x);function M(L,E){var S,O,P=L.mx;if(P==="circle")return null;var U=s.symbolNumber(P),R=s.symbolFuncs[U%100],j=!!s.symbolNoDot[U%100],B=!!s.symbolNoFill[U%100],z=i.isDotSymbol(P);if(L.ma&&(P+="_"+L.ma),g[P])return g[P];var G=s.getMarkerAngle(L,E);return S=z&&!j?R(1.1*x,G)+A:R(x,G),O=k(S,{w:b,h:b,viewBox:[-x,-x,x,x],stroke:B?_:-_}),g[P]=O,O||null}W.exports={style:function(L,E){var S,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},P=L._context.plotGlPixelRatio;if(E.visible!==!0)return O;if(n.hasText(E)&&(O.text=d(L,E),O.textSel=p(L,E,E.selected),O.textUnsel=p(L,E,E.unselected)),n.hasMarkers(E)&&(O.marker=w(0,E),O.markerSel=v(0,E,E.selected),O.markerUnsel=v(0,E,E.unselected),!E.unselected&&h.isArrayOrTypedArray(E.marker.opacity))){var U=E.marker.opacity;for(O.markerUnsel.opacity=new Array(U.length),S=0;S<U.length;S++)O.markerUnsel.opacity[S]=l*U[S]}if(n.hasLines(E)){O.line={overlay:!0,thickness:E.line.width*P,color:E.line.color,opacity:E.opacity};var R=(c.DASHES[E.line.dash]||[1]).slice();for(S=0;S<R.length;++S)R[S]*=E.line.width*P;O.line.dashes=R}return E.error_x&&E.error_x.visible&&(O.errorX=y(E,E.error_x,P)),E.error_y&&E.error_y.visible&&(O.errorY=y(E,E.error_y,P)),E.fill&&E.fill!=="none"&&(O.fill={closed:!0,fill:E.fillcolor,thickness:0}),O},markerStyle:w,markerSelection:v,linePositions:function(L,E,S){var O,P,U=S.length,R=U/2;if(n.hasLines(E)&&R)if(E.line.shape==="hv"){for(O=[],P=0;P<R-1;P++)isNaN(S[2*P])||isNaN(S[2*P+1])?O.push(NaN,NaN,NaN,NaN):(O.push(S[2*P],S[2*P+1]),isNaN(S[2*P+2])||isNaN(S[2*P+3])?O.push(NaN,NaN):O.push(S[2*P+2],S[2*P+1]));O.push(S[U-2],S[U-1])}else if(E.line.shape==="hvh"){for(O=[],P=0;P<R-1;P++)if(isNaN(S[2*P])||isNaN(S[2*P+1])||isNaN(S[2*P+2])||isNaN(S[2*P+3]))isNaN(S[2*P])||isNaN(S[2*P+1])?O.push(NaN,NaN):O.push(S[2*P],S[2*P+1]),O.push(NaN,NaN);else{var j=(S[2*P]+S[2*P+2])/2;O.push(S[2*P],S[2*P+1],j,S[2*P+1],j,S[2*P+3])}O.push(S[U-2],S[U-1])}else if(E.line.shape==="vhv"){for(O=[],P=0;P<R-1;P++)if(isNaN(S[2*P])||isNaN(S[2*P+1])||isNaN(S[2*P+2])||isNaN(S[2*P+3]))isNaN(S[2*P])||isNaN(S[2*P+1])?O.push(NaN,NaN):O.push(S[2*P],S[2*P+1]),O.push(NaN,NaN);else{var B=(S[2*P+1]+S[2*P+3])/2;O.push(S[2*P],S[2*P+1],S[2*P],B,S[2*P+2],B)}O.push(S[U-2],S[U-1])}else if(E.line.shape==="vh"){for(O=[],P=0;P<R-1;P++)isNaN(S[2*P])||isNaN(S[2*P+1])?O.push(NaN,NaN,NaN,NaN):(O.push(S[2*P],S[2*P+1]),isNaN(S[2*P+2])||isNaN(S[2*P+3])?O.push(NaN,NaN):O.push(S[2*P],S[2*P+3]));O.push(S[U-2],S[U-1])}else O=S;var z=!1;for(P=0;P<O.length;P++)if(isNaN(O[P])){z=!0;break}var G=z||O.length>c.TOO_MANY_POINTS||n.hasMarkers(E)?"rect":"round";if(z&&E.connectgaps){var V=O[0],et=O[1];for(P=0;P<O.length;P+=2)isNaN(O[P])||isNaN(O[P+1])?(O[P]=V,O[P+1]=et):(V=O[P],et=O[P+1])}return{join:G,positions:O}},errorBarPositions:function(L,E,S,O,P){var U=m.getComponentMethod("errorbars","makeComputeError"),R=e.getFromId(L,E.xaxis,"x"),j=e.getFromId(L,E.yaxis,"y"),B=S.length/2,z={};function G(V,et){var J=et._id.charAt(0),X=E["error_"+J];if(X&&X.visible&&(et.type==="linear"||et.type==="log")){for(var Y=U(X),Z={x:0,y:1}[J],tt={x:[0,1,2,3],y:[2,3,0,1]}[J],rt=new Float64Array(4*B),nt=1/0,ot=-1/0,ct=0,pt=0;ct<B;ct++,pt+=4){var gt=V[ct];if(T(gt)){var kt=S[2*ct+Z],yt=Y(gt,ct),mt=yt[0],Ot=yt[1];if(T(mt)&&T(Ot)){var vt=gt-mt,xt=gt+Ot;rt[pt+tt[0]]=kt-et.c2l(vt),rt[pt+tt[1]]=et.c2l(xt)-kt,rt[pt+tt[2]]=0,rt[pt+tt[3]]=0,nt=Math.min(nt,gt-mt),ot=Math.max(ot,gt+Ot)}}}z[J]={positions:S,errors:rt,_bnds:[nt,ot]}}}return G(O,R),G(P,j),z},textPosition:function(L,E,S,O){var P,U=E._length,R={};if(n.hasMarkers(E)){var j=S.font,B=S.align,z=S.baseline;for(R.offset=new Array(U),P=0;P<U;P++){var G=O.sizes?O.sizes[P]:O.size,V=Array.isArray(j)?j[P].size:j.size,et=Array.isArray(B)?B.length>1?B[P]:B[0]:B,J=Array.isArray(z)?z.length>1?z[P]:z[0]:z,X=u[et],Y=u[J],Z=G?G/.8+1:0,tt=-Y*Z-.5*Y;R.offset[P]=[X*Z/V,tt/V]}}return R}}},47148:function(W,I,o){var T=o(71828),k=o(73972),r=o(68645),m=o(42341),h=o(47581),s=o(34098),e=o(67513),t=o(73927),n=o(49508),a=o(11058),i=o(28908),c=o(82410);W.exports=function(l,u,f,d){function w(A,M){return T.coerce(l,u,m,A,M)}var v=!!l.marker&&r.isOpenSymbol(l.marker.symbol),p=s.isBubble(l),y=e(l,u,d,w);if(y){t(l,u,d,w),w("xhoverformat"),w("yhoverformat");var b=y<h.PTS_LINESONLY?"lines+markers":"lines";w("text"),w("hovertext"),w("hovertemplate"),w("mode",b),s.hasLines(u)&&(w("connectgaps"),a(l,u,f,d,w),w("line.shape")),s.hasMarkers(u)&&(n(l,u,f,d,w,{noAngleRef:!0,noStandOff:!0}),w("marker.line.width",v||p?1:0)),s.hasText(u)&&(w("texttemplate"),c(l,u,d,w));var x=(u.line||{}).color,_=(u.marker||{}).color;w("fill"),u.fill!=="none"&&i(l,u,f,w);var g=k.getComponentMethod("errorbars","supplyDefaults");g(l,u,x||_||f,{axis:"y"}),g(l,u,x||_||f,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(u,w)}else u.visible=!1}},5345:function(W,I,o){var T=o(71828),k=o(7901),r=o(37822).DESELECTDIM;W.exports={styleTextSelection:function(m){var h,s,e=m[0],t=e.trace,n=e.t,a=n._scene,i=n.index,c=a.selectBatch[i],l=a.unselectBatch[i],u=a.textOptions[i],f=a.textSelectedOptions[i]||{},d=a.textUnselectedOptions[i]||{},w=T.extendFlat({},u);if(c.length||l.length){var v=f.color,p=d.color,y=u.color,b=Array.isArray(y);for(w.color=new Array(t._length),h=0;h<c.length;h++)s=c[h],w.color[s]=v||(b?y[s]:y);for(h=0;h<l.length;h++){s=l[h];var x=b?y[s]:y;w.color[s]=p||(v?x:k.addOpacity(x,r))}}a.glText[i].update(w)}}},68101:function(W,I,o){var T=o(8225);W.exports=function(k,r,m){var h=k.i;return"x"in k||(k.x=r._x[h]),"y"in k||(k.y=r._y[h]),T(k,r,m)}},68645:function(W,I,o){var T=o(78232);I.isOpenSymbol=function(k){return typeof k=="string"?T.OPEN_RE.test(k):k%200>100},I.isDotSymbol=function(k){return typeof k=="string"?T.DOT_RE.test(k):k>200}},20794:function(W,I,o){var T=o(73972),k=o(71828),r=o(34603);function m(h,s,e,t){var n=h.xa,a=h.ya,i=h.distance,c=h.dxy,l=h.index,u={pointNumber:l,x:s[l],y:e[l]};u.tx=Array.isArray(t.text)?t.text[l]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[l]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[l]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[l]:t.textposition;var f=t.textfont;f&&(u.ts=k.isArrayOrTypedArray(f.size)?f.size[l]:f.size,u.tc=Array.isArray(f.color)?f.color[l]:f.color,u.tf=Array.isArray(f.family)?f.family[l]:f.family);var d=t.marker;d&&(u.ms=k.isArrayOrTypedArray(d.size)?d.size[l]:d.size,u.mo=k.isArrayOrTypedArray(d.opacity)?d.opacity[l]:d.opacity,u.mx=k.isArrayOrTypedArray(d.symbol)?d.symbol[l]:d.symbol,u.ma=k.isArrayOrTypedArray(d.angle)?d.angle[l]:d.angle,u.mc=k.isArrayOrTypedArray(d.color)?d.color[l]:d.color);var w=d&&d.line;w&&(u.mlc=Array.isArray(w.color)?w.color[l]:w.color,u.mlw=k.isArrayOrTypedArray(w.width)?w.width[l]:w.width);var v=d&&d.gradient;v&&v.type!=="none"&&(u.mgt=Array.isArray(v.type)?v.type[l]:v.type,u.mgc=Array.isArray(v.color)?v.color[l]:v.color);var p=n.c2p(u.x,!0),y=a.c2p(u.y,!0),b=u.mrc||1,x=t.hoverlabel;x&&(u.hbg=Array.isArray(x.bgcolor)?x.bgcolor[l]:x.bgcolor,u.hbc=Array.isArray(x.bordercolor)?x.bordercolor[l]:x.bordercolor,u.hts=k.isArrayOrTypedArray(x.font.size)?x.font.size[l]:x.font.size,u.htc=Array.isArray(x.font.color)?x.font.color[l]:x.font.color,u.htf=Array.isArray(x.font.family)?x.font.family[l]:x.font.family,u.hnl=k.isArrayOrTypedArray(x.namelength)?x.namelength[l]:x.namelength);var _=t.hoverinfo;_&&(u.hi=Array.isArray(_)?_[l]:_);var g=t.hovertemplate;g&&(u.ht=Array.isArray(g)?g[l]:g);var A={};A[h.index]=u;var M=t._origX,L=t._origY,E=k.extendFlat({},h,{color:r(t,u),x0:p-b,x1:p+b,xLabelVal:M?M[l]:u.x,y0:y-b,y1:y+b,yLabelVal:L?L[l]:u.y,cd:A,distance:i,spikeDistance:c,hovertemplate:u.ht});return u.htx?E.text=u.htx:u.tx?E.text=u.tx:t.text&&(E.text=t.text),k.fillText(u,t,E),T.getComponentMethod("errorbars","hoverInfo")(u,t,E),E}W.exports={hoverPoints:function(h,s,e,t){var n,a,i,c,l,u,f,d,w,v,p=h.cd,y=p[0].t,b=p[0].trace,x=h.xa,_=h.ya,g=y.x,A=y.y,M=x.c2p(s),L=_.c2p(e),E=h.distance;if(y.tree){var S=x.p2c(M-E),O=x.p2c(M+E),P=_.p2c(L-E),U=_.p2c(L+E);n=t==="x"?y.tree.range(Math.min(S,O),Math.min(_._rl[0],_._rl[1]),Math.max(S,O),Math.max(_._rl[0],_._rl[1])):y.tree.range(Math.min(S,O),Math.min(P,U),Math.max(S,O),Math.max(P,U))}else n=y.ids;var R=E;if(t==="x"){var j=!!b.xperiodalignment,B=!!b.yperiodalignment;for(u=0;u<n.length;u++){if(c=g[a=n[u]],f=Math.abs(x.c2p(c)-M),j){var z=x.c2p(b._xStarts[a]),G=x.c2p(b._xEnds[a]);f=M>=Math.min(z,G)&&M<=Math.max(z,G)?0:1/0}if(f<R){if(R=f,l=A[a],d=_.c2p(l)-L,B){var V=_.c2p(b._yStarts[a]),et=_.c2p(b._yEnds[a]);d=L>=Math.min(V,et)&&L<=Math.max(V,et)?0:1/0}v=Math.sqrt(f*f+d*d),i=n[u]}}}else for(u=n.length-1;u>-1;u--)c=g[a=n[u]],l=A[a],f=x.c2p(c)-M,d=_.c2p(l)-L,(w=Math.sqrt(f*f+d*d))<R&&(R=v=w,i=a);return h.index=i,h.distance=R,h.dxy=v,i===void 0?[h]:[m(h,g,A,b)]},calcHover:m}},68868:function(W,I,o){var T=o(72156);T.plot=o(26787),W.exports=T},26787:function(W,I,o){var T=o(11870),k=o(46075),r=o(3593),m=o(42505),h=o(71828),s=o(64505).selectMode,e=o(79749),t=o(34098),n=o(68687),a=o(5345).styleTextSelection,i={};function c(l,u,f,d){var w=l._size,v=l.width*d,p=l.height*d,y=w.l*d,b=w.b*d,x=w.r*d,_=w.t*d,g=w.w*d,A=w.h*d;return[y+u.domain[0]*g,b+f.domain[0]*A,v-x-(1-u.domain[1])*g,p-_-(1-f.domain[1])*A]}(W.exports=function(l,u,f){if(f.length){var d,w,v=l._fullLayout,p=u._scene,y=u.xaxis,b=u.yaxis;if(p)if(e(l,["ANGLE_instanced_arrays","OES_element_index_uint"],i)){var x=p.count,_=v._glcanvas.data()[0].regl;if(n(l,u,f),p.dirty){if(p.error2d===!0&&(p.error2d=r(_)),p.line2d===!0&&(p.line2d=k(_)),p.scatter2d===!0&&(p.scatter2d=T(_)),p.fill2d===!0&&(p.fill2d=k(_)),p.glText===!0)for(p.glText=new Array(x),d=0;d<x;d++)p.glText[d]=new m(_);if(p.glText){if(x>p.glText.length){var g=x-p.glText.length;for(d=0;d<g;d++)p.glText.push(new m(_))}else if(x<p.glText.length){var A=p.glText.length-x;p.glText.splice(x,A).forEach(function(rt){rt.destroy()})}for(d=0;d<x;d++)p.glText[d].update(p.textOptions[d])}if(p.line2d&&(p.line2d.update(p.lineOptions),p.lineOptions=p.lineOptions.map(function(rt){if(rt&&rt.positions){for(var nt=rt.positions,ot=0;ot<nt.length&&(isNaN(nt[ot])||isNaN(nt[ot+1]));)ot+=2;for(var ct=nt.length-2;ct>ot&&(isNaN(nt[ct])||isNaN(nt[ct+1]));)ct-=2;rt.positions=nt.slice(ot,ct+2)}return rt}),p.line2d.update(p.lineOptions)),p.error2d){var M=(p.errorXOptions||[]).concat(p.errorYOptions||[]);p.error2d.update(M)}p.scatter2d&&p.scatter2d.update(p.markerOptions),p.fillOrder=h.repeat(null,x),p.fill2d&&(p.fillOptions=p.fillOptions.map(function(rt,nt){var ot=f[nt];if(rt&&ot&&ot[0]&&ot[0].trace){var ct,pt,gt=ot[0],kt=gt.trace,yt=gt.t,mt=p.lineOptions[nt],Ot=[];kt._ownfill&&Ot.push(nt),kt._nexttrace&&Ot.push(nt+1),Ot.length&&(p.fillOrder[nt]=Ot);var vt,xt,st=[],at=mt&&mt.positions||yt.positions;if(kt.fill==="tozeroy"){for(vt=0;vt<at.length&&isNaN(at[vt+1]);)vt+=2;for(xt=at.length-2;xt>vt&&isNaN(at[xt+1]);)xt-=2;at[vt+1]!==0&&(st=[at[vt],0]),st=st.concat(at.slice(vt,xt+2)),at[xt+1]!==0&&(st=st.concat([at[xt],0]))}else if(kt.fill==="tozerox"){for(vt=0;vt<at.length&&isNaN(at[vt]);)vt+=2;for(xt=at.length-2;xt>vt&&isNaN(at[xt]);)xt-=2;at[vt]!==0&&(st=[0,at[vt+1]]),st=st.concat(at.slice(vt,xt+2)),at[xt]!==0&&(st=st.concat([0,at[xt+1]]))}else if(kt.fill==="toself"||kt.fill==="tonext"){for(st=[],ct=0,rt.splitNull=!0,pt=0;pt<at.length;pt+=2)(isNaN(at[pt])||isNaN(at[pt+1]))&&((st=st.concat(at.slice(ct,pt))).push(at[ct],at[ct+1]),st.push(null,null),ct=pt+2);st=st.concat(at.slice(ct)),ct&&st.push(at[ct],at[ct+1])}else{var ht=kt._nexttrace;if(ht){var Lt=p.lineOptions[nt+1];if(Lt){var Mt=Lt.positions;if(kt.fill==="tonexty"){for(st=at.slice(),nt=Math.floor(Mt.length/2);nt--;){var _t=Mt[2*nt],St=Mt[2*nt+1];isNaN(_t)||isNaN(St)||st.push(_t,St)}rt.fill=ht.fillcolor}}}}if(kt._prevtrace&&kt._prevtrace.fill==="tonext"){var Dt=p.lineOptions[nt-1].positions,ut=st.length/2,Tt=[ct=ut];for(pt=0;pt<Dt.length;pt+=2)(isNaN(Dt[pt])||isNaN(Dt[pt+1]))&&(Tt.push(pt/2+ut+1),ct=pt+2);st=st.concat(Dt),rt.hole=Tt}return rt.fillmode=kt.fill,rt.opacity=kt.opacity,rt.positions=st,rt}}),p.fill2d.update(p.fillOptions))}var L=v.dragmode,E=s(L),S=v.clickmode.indexOf("select")>-1;for(d=0;d<x;d++){var O=f[d][0],P=O.trace,U=O.t,R=U.index,j=P._length,B=U.x,z=U.y;if(P.selectedpoints||E||S){if(E||(E=!0),P.selectedpoints){var G=p.selectBatch[R]=h.selIndices2selPoints(P),V={};for(w=0;w<G.length;w++)V[G[w]]=1;var et=[];for(w=0;w<j;w++)V[w]||et.push(w);p.unselectBatch[R]=et}var J=U.xpx=new Array(j),X=U.ypx=new Array(j);for(w=0;w<j;w++)J[w]=y.c2p(B[w]),X[w]=b.c2p(z[w])}else U.xpx=U.ypx=null}if(E){if(p.select2d||(p.select2d=T(v._glcanvas.data()[1].regl)),p.scatter2d){var Y=new Array(x);for(d=0;d<x;d++)Y[d]=p.selectBatch[d].length||p.unselectBatch[d].length?p.markerUnselectedOptions[d]:{};p.scatter2d.update(Y)}p.select2d&&(p.select2d.update(p.markerOptions),p.select2d.update(p.markerSelectedOptions)),p.glText&&f.forEach(function(rt){var nt=((rt||[])[0]||{}).trace||{};t.hasText(nt)&&a(rt)})}else p.scatter2d&&p.scatter2d.update(p.markerOptions);var Z={viewport:c(v,y,b,l._context.plotGlPixelRatio),range:[(y._rl||y.range)[0],(b._rl||b.range)[0],(y._rl||y.range)[1],(b._rl||b.range)[1]]},tt=h.repeat(Z,p.count);p.fill2d&&p.fill2d.update(tt),p.line2d&&p.line2d.update(tt),p.error2d&&p.error2d.update(tt.concat(tt)),p.scatter2d&&p.scatter2d.update(tt),p.select2d&&p.select2d.update(tt),p.glText&&p.glText.forEach(function(rt){rt.update(Z)})}else p.init()}}).reglPrecompiled=i},38967:function(W,I,o){var T=o(71828);W.exports=function(k,r){var m=r._scene,h={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},s={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return r._scene||((m=r._scene={}).init=function(){T.extendFlat(m,s,h)},m.init(),m.update=function(e){var t=T.repeat(e,m.count);if(m.fill2d&&m.fill2d.update(t),m.scatter2d&&m.scatter2d.update(t),m.line2d&&m.line2d.update(t),m.error2d&&m.error2d.update(t.concat(t)),m.select2d&&m.select2d.update(t),m.glText)for(var n=0;n<m.count;n++)m.glText[n].update(e)},m.draw=function(){for(var e=m.count,t=m.fill2d,n=m.error2d,a=m.line2d,i=m.scatter2d,c=m.glText,l=m.select2d,u=m.selectBatch,f=m.unselectBatch,d=0;d<e;d++){if(t&&m.fillOrder[d]&&t.draw(m.fillOrder[d]),a&&m.lineOptions[d]&&a.draw(d),n&&(m.errorXOptions[d]&&n.draw(d),m.errorYOptions[d]&&n.draw(d+e)),i&&m.markerOptions[d])if(f[d].length){var w=T.repeat([],m.count);w[d]=f[d],i.draw(w)}else u[d].length||i.draw(d);c[d]&&m.textOptions[d]&&c[d].render()}l&&l.draw(u),m.dirty=!1},m.destroy=function(){m.fill2d&&m.fill2d.destroy&&m.fill2d.destroy(),m.scatter2d&&m.scatter2d.destroy&&m.scatter2d.destroy(),m.error2d&&m.error2d.destroy&&m.error2d.destroy(),m.line2d&&m.line2d.destroy&&m.line2d.destroy(),m.select2d&&m.select2d.destroy&&m.select2d.destroy(),m.glText&&m.glText.forEach(function(e){e.destroy&&e.destroy()}),m.lineOptions=null,m.fillOptions=null,m.markerOptions=null,m.markerSelectedOptions=null,m.markerUnselectedOptions=null,m.errorXOptions=null,m.errorYOptions=null,m.textOptions=null,m.textSelectedOptions=null,m.textUnselectedOptions=null,m.selectBatch=null,m.unselectBatch=null,r._scene=null}),m.dirty||T.extendFlat(m,h),m}},58147:function(W,I,o){var T=o(34098),k=o(5345).styleTextSelection;W.exports=function(r,m){var h=r.cd,s=r.xaxis,e=r.yaxis,t=[],n=h[0].trace,a=h[0].t,i=n._length,c=a.x,l=a.y,u=a._scene,f=a.index;if(!u)return t;var d=T.hasText(n),w=T.hasMarkers(n),v=!w&&!d;if(n.visible!==!0||v)return t;var p=[],y=[];if(m!==!1&&!m.degenerate)for(var b=0;b<i;b++)m.contains([a.xpx[b],a.ypx[b]],!1,b,r)?(p.push(b),t.push({pointNumber:b,x:s.c2d(c[b]),y:e.c2d(l[b])})):y.push(b);if(w){var x=u.scatter2d;if(p.length||y.length){if(!u.selectBatch[f].length&&!u.unselectBatch[f].length){var _=new Array(u.count);_[f]=u.markerUnselectedOptions[f],x.update.apply(x,_)}}else{var g=new Array(u.count);g[f]=u.markerOptions[f],x.update.apply(x,g)}}return u.selectBatch[f]=p,u.unselectBatch[f]=y,d&&k(h),t}},99181:function(W,I,o){var T=o(5386).fF,k=o(5386).si,r=o(19316),m=o(82196),h=o(23585),s=o(9012),e=o(50693),t=o(1426).extendFlat,n=o(30962).overrideAll,a=o(23585),i=r.line,c=r.marker;W.exports=n({lon:r.lon,lat:r.lat,cluster:{enabled:{valType:"boolean"},maxzoom:t({},a.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:t({},c.opacity,{dflt:1})},mode:t({},m.mode,{dflt:"markers"}),text:t({},m.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:t({},m.hovertext,{}),line:{color:i.color,width:i.width},connectgaps:m.connectgaps,marker:t({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:c.opacity,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode},e("marker")),fill:r.fill,fillcolor:m.fillcolor,textfont:h.layers.symbol.textfont,textposition:h.layers.symbol.textposition,below:{valType:"string"},selected:{marker:m.selected.marker},unselected:{marker:m.unselected.marker},hoverinfo:t({},s.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:T()},"calc","nested")},15790:function(W,I,o){var T=o(92770),k=o(71828),r=o(50606).BADNUM,m=o(18214),h=o(21081),s=o(91424),e=o(39984),t=o(34098),n=o(13056),a=o(23469).appendArrayPointValue,i=o(63893).NEWLINES,c=o(63893).BR_TAG_ALL;function l(v){return{type:v,geojson:m.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function u(v,p){return k.isArrayOrTypedArray(v)?p?function(y){return T(v[y])?+v[y]:0}:function(y){return v[y]}:v?function(){return v}:f}function f(){return""}function d(v){return v[0]===r}function w(v,p){var y;if(k.isArrayOrTypedArray(v)&&k.isArrayOrTypedArray(p)){y=["step",["get","point_count"],v[0]];for(var b=1;b<v.length;b++)y.push(p[b-1],v[b])}else y=v;return y}W.exports=function(v,p){var y,b=p[0].trace,x=b.visible===!0&&b._length!==0,_=b.fill!=="none",g=t.hasLines(b),A=t.hasMarkers(b),M=t.hasText(b),L=A&&b.marker.symbol==="circle",E=A&&b.marker.symbol!=="circle",S=b.cluster&&b.cluster.enabled,O=l("fill"),P=l("line"),U=l("circle"),R=l("symbol"),j={fill:O,line:P,circle:U,symbol:R};if(!x)return j;if((_||g)&&(y=m.calcTraceToLineCoords(p)),_&&(O.geojson=m.makePolygon(y),O.layout.visibility="visible",k.extendFlat(O.paint,{"fill-color":b.fillcolor})),g&&(P.geojson=m.makeLine(y),P.layout.visibility="visible",k.extendFlat(P.paint,{"line-width":b.line.width,"line-color":b.line.color,"line-opacity":b.opacity})),L){var B=function(V){var et,J,X,Y,Z=V[0].trace,tt=Z.marker,rt=Z.selectedpoints,nt=k.isArrayOrTypedArray(tt.color),ot=k.isArrayOrTypedArray(tt.size),ct=k.isArrayOrTypedArray(tt.opacity);function pt(st){return Z.opacity*st}nt&&(J=h.hasColorscale(Z,"marker")?h.makeColorScaleFuncFromTrace(tt):k.identity),ot&&(X=e(Z)),ct&&(Y=function(st){return pt(T(st)?+k.constrain(st,0,1):0)});var gt,kt,yt=[];for(et=0;et<V.length;et++){var mt=V[et],Ot=mt.lonlat;if(!d(Ot)){var vt={};J&&(vt.mcc=mt.mcc=J(mt.mc)),X&&(vt.mrc=mt.mrc=X(mt.ms)),Y&&(vt.mo=Y(mt.mo)),rt&&(vt.selected=mt.selected||0),yt.push({type:"Feature",id:et+1,geometry:{type:"Point",coordinates:Ot},properties:vt})}}if(rt)for(gt=s.makeSelectedPointStyleFns(Z),et=0;et<yt.length;et++){var xt=yt[et].properties;gt.selectedOpacityFn&&(xt.mo=pt(gt.selectedOpacityFn(xt))),gt.selectedColorFn&&(xt.mcc=gt.selectedColorFn(xt)),gt.selectedSizeFn&&(xt.mrc=gt.selectedSizeFn(xt))}return{geojson:{type:"FeatureCollection",features:yt},mcc:nt||gt&&gt.selectedColorFn?{type:"identity",property:"mcc"}:tt.color,mrc:ot||gt&&gt.selectedSizeFn?{type:"identity",property:"mrc"}:(kt=tt.size,kt/2),mo:ct||gt&&gt.selectedOpacityFn?{type:"identity",property:"mo"}:pt(tt.opacity)}}(p);U.geojson=B.geojson,U.layout.visibility="visible",S&&(U.filter=["!",["has","point_count"]],j.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":w(b.cluster.color,b.cluster.step),"circle-radius":w(b.cluster.size,b.cluster.step),"circle-opacity":w(b.cluster.opacity,b.cluster.step)}},j.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),k.extendFlat(U.paint,{"circle-color":B.mcc,"circle-radius":B.mrc,"circle-opacity":B.mo})}if(L&&S&&(U.filter=["!",["has","point_count"]]),(E||M)&&(R.geojson=function(V,et){for(var J=et._fullLayout,X=V[0].trace,Y=X.marker||{},Z=Y.symbol,tt=Y.angle,rt=Z!=="circle"?u(Z):f,nt=tt!=="auto"?u(tt,!0):f,ot=t.hasText(X)?u(X.text):f,ct=[],pt=0;pt<V.length;pt++){var gt=V[pt];if(!d(gt.lonlat)){var kt,yt=X.texttemplate;if(yt){var mt=Array.isArray(yt)?yt[pt]||"":yt,Ot=X._module.formatLabels(gt,X,J),vt={};a(vt,X,gt.i);var xt=X._meta||{};kt=k.texttemplateString(mt,Ot,J._d3locale,vt,gt,xt)}else kt=ot(pt);kt&&(kt=kt.replace(i,"").replace(c,`
`)),ct.push({type:"Feature",geometry:{type:"Point",coordinates:gt.lonlat},properties:{symbol:rt(pt),angle:nt(pt),text:kt}})}}return{type:"FeatureCollection",features:ct}}(p,v),k.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),E&&(k.extendFlat(R.layout,{"icon-size":b.marker.size/10}),"angle"in b.marker&&b.marker.angle!=="auto"&&k.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=b.marker.allowoverlap,k.extendFlat(R.paint,{"icon-opacity":b.opacity*b.marker.opacity,"icon-color":b.marker.color})),M)){var z=(b.marker||{}).size,G=n(b.textposition,z);k.extendFlat(R.layout,{"text-size":b.textfont.size,"text-anchor":G.anchor,"text-offset":G.offset,"text-font":b.textfont.family.split(", ")}),k.extendFlat(R.paint,{"text-color":b.textfont.color,"text-opacity":b.opacity})}return j}},76645:function(W,I,o){var T=o(71828),k=o(34098),r=o(49508),m=o(11058),h=o(82410),s=o(28908),e=o(99181),t=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];W.exports=function(n,a,i,c){function l(x,_){return T.coerce(n,a,e,x,_)}function u(x,_){return T.coerce2(n,a,e,x,_)}var f=function(x,_,g){var A=g("lon")||[],M=g("lat")||[],L=Math.min(A.length,M.length);return _._length=L,L}(0,a,l);if(f){if(l("text"),l("texttemplate"),l("hovertext"),l("hovertemplate"),l("mode"),l("below"),k.hasLines(a)&&(m(n,a,i,c,l,{noDash:!0}),l("connectgaps")),k.hasMarkers(a)){r(n,a,i,c,l,{noLine:!0,noAngle:!0}),l("marker.allowoverlap"),l("marker.angle");var d=a.marker;d.symbol!=="circle"&&(T.isArrayOrTypedArray(d.size)&&(d.size=d.size[0]),T.isArrayOrTypedArray(d.color)&&(d.color=d.color[0]))}var w=u("cluster.maxzoom"),v=u("cluster.step"),p=u("cluster.color",a.marker&&a.marker.color||i),y=u("cluster.size"),b=u("cluster.opacity");l("cluster.enabled",w!==!1||v!==!1||p!==!1||y!==!1||b!==!1),k.hasText(a)&&h(n,a,c,l,{noSelect:!0,font:{family:t.indexOf(c.font.family)!==-1?c.font.family:"Open Sans Regular",size:c.font.size,color:c.font.color}}),l("fill"),a.fill!=="none"&&s(n,a,i,l),T.coerceSelectionMarkerOpacity(a,l)}else a.visible=!1}},53353:function(W){W.exports=function(I,o){return I.lon=o.lon,I.lat=o.lat,I}},15636:function(W,I,o){var T=o(89298);W.exports=function(k,r,m){var h={},s=m[r.subplot]._subplot.mockAxis,e=k.lonlat;return h.lonLabel=T.tickText(s,s.c2l(e[0]),!0).text,h.latLabel=T.tickText(s,s.c2l(e[1]),!0).text,h}},28178:function(W,I,o){var T=o(30211),k=o(71828),r=o(34603),m=k.fillText,h=o(50606).BADNUM,s=o(77734).traceLayerPrefix;function e(t,n,a){if(!t.hovertemplate){var i=(n.hi||t.hoverinfo).split("+"),c=i.indexOf("all")!==-1,l=i.indexOf("lon")!==-1,u=i.indexOf("lat")!==-1,f=n.lonlat,d=[];return c||l&&u?d.push("("+w(f[1])+", "+w(f[0])+")"):l?d.push(a.lon+w(f[0])):u&&d.push(a.lat+w(f[1])),(c||i.indexOf("text")!==-1)&&m(n,t,d),d.join("<br>")}function w(v){return v+"\xB0"}}W.exports={hoverPoints:function(t,n,a){var i=t.cd,c=i[0].trace,l=t.xa,u=t.ya,f=t.subplot,d=[],w=s+c.uid+"-circle",v=c.cluster&&c.cluster.enabled;if(v){var p=f.map.queryRenderedFeatures(null,{layers:[w]});d=p.map(function(O){return O.id})}var y=360*(n>=0?Math.floor((n+180)/360):Math.ceil((n-180)/360)),b=n-y;if(T.getClosest(i,function(O){var P=O.lonlat;if(P[0]===h||v&&d.indexOf(O.i+1)===-1)return 1/0;var U=k.modHalf(P[0],360),R=P[1],j=f.project([U,R]),B=j.x-l.c2p([b,R]),z=j.y-u.c2p([U,a]),G=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(B*B+z*z)-G,1-3/G)},t),t.index!==!1){var x=i[t.index],_=x.lonlat,g=[k.modHalf(_[0],360)+y,_[1]],A=l.c2p(g),M=u.c2p(g),L=x.mrc||1;t.x0=A-L,t.x1=A+L,t.y0=M-L,t.y1=M+L;var E={};E[c.subplot]={_subplot:f};var S=c._module.formatLabels(x,c,E);return t.lonLabel=S.lonLabel,t.latLabel=S.latLabel,t.color=r(c,x),t.extraText=e(c,x,i[0].t.labels),t.hovertemplate=c.hovertemplate,[t]}},getExtraText:e}},20467:function(W,I,o){W.exports={attributes:o(99181),supplyDefaults:o(76645),colorbar:o(4898),formatLabels:o(15636),calc:o(84622),plot:o(86951),hoverPoints:o(28178).hoverPoints,eventData:o(53353),selectPoints:o(86387),styleOnSelect:function(T,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:o(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(W,I,o){var T=o(71828),k=o(15790),r=o(77734).traceLayerPrefix,m={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function h(e,t,n,a){this.type="scattermapbox",this.subplot=e,this.uid=t,this.clusterEnabled=n,this.isHidden=a,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:r+t+"-fill",line:r+t+"-line",circle:r+t+"-circle",symbol:r+t+"-symbol",cluster:r+t+"-cluster",clusterCount:r+t+"-cluster-count"},this.below=null}var s=h.prototype;s.addSource=function(e,t,n){var a={type:"geojson",data:t.geojson};n&&n.enabled&&T.extendFlat(a,{cluster:!0,clusterMaxZoom:n.maxzoom});var i=this.subplot.map.getSource(this.sourceIds[e]);i?i.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[e],a)},s.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)},s.addLayer=function(e,t,n){var a={type:t.type,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint};t.filter&&(a.filter=t.filter);for(var i,c=this.layerIds[e],l=this.subplot.getMapLayers(),u=0;u<l.length;u++)if(l[u].id===c){i=!0;break}i?(this.subplot.setOptions(c,"setLayoutProperty",a.layout),a.layout.visibility==="visible"&&this.subplot.setOptions(c,"setPaintProperty",a.paint)):this.subplot.addLayer(a,n)},s.update=function(e){var t=e[0].trace,n=this.subplot,a=n.map,i=k(n.gd,e),c=n.belowLookup["trace-"+this.uid],l=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,f=this;function d(b){u?function(x){for(var _=m.cluster,g=_.length-1;g>=0;g--){var A=_[g];a.removeLayer(f.layerIds[A])}x||a.removeSource(f.sourceIds.circle)}(b):function(x){for(var _=m.nonCluster,g=_.length-1;g>=0;g--){var A=_[g];a.removeLayer(f.layerIds[A]),x||a.removeSource(f.sourceIds[A])}}(b)}function w(b){l?function(x){x||f.addSource("circle",i.circle,t.cluster);for(var _=m.cluster,g=0;g<_.length;g++){var A=_[g],M=i[A];f.addLayer(A,M,c)}}(b):function(x){for(var _=m.nonCluster,g=0;g<_.length;g++){var A=_[g],M=i[A];x||f.addSource(A,M),f.addLayer(A,M,c)}}(b)}function v(){for(var b=l?m.cluster:m.nonCluster,x=0;x<b.length;x++){var _=b[x],g=i[_];g&&(n.setOptions(f.layerIds[_],"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&(_!=="cluster"&&f.setSourceData(_,g),n.setOptions(f.layerIds[_],"setPaintProperty",g.paint)))}}var p=this.isHidden,y=t.visible!==!0;y?p||d():p?y||w():u!==l?(d(),w()):(this.below!==c&&(d(!0),w(!0)),v()),this.clusterEnabled=l,this.isHidden=y,this.below=c,e[0].trace._glTrace=this},s.dispose=function(){for(var e=this.subplot.map,t=this.clusterEnabled?m.cluster:m.nonCluster,n=t.length-1;n>=0;n--){var a=t[n];e.removeLayer(this.layerIds[a]),e.removeSource(this.sourceIds[a])}},W.exports=function(e,t){var n,a,i,c=t[0].trace,l=c.cluster&&c.cluster.enabled,u=c.visible!==!0,f=new h(e,c.uid,l,u),d=k(e.gd,t),w=f.below=e.belowLookup["trace-"+c.uid];if(l)for(f.addSource("circle",d.circle,c.cluster),n=0;n<m.cluster.length;n++)i=d[a=m.cluster[n]],f.addLayer(a,i,w);else for(n=0;n<m.nonCluster.length;n++)i=d[a=m.nonCluster[n]],f.addSource(a,i,c.cluster),f.addLayer(a,i,w);return t[0].trace._glTrace=f,f}},86387:function(W,I,o){var T=o(71828),k=o(34098),r=o(50606).BADNUM;W.exports=function(m,h){var s,e=m.cd,t=m.xaxis,n=m.yaxis,a=[],i=e[0].trace;if(!k.hasMarkers(i))return[];if(h===!1)for(s=0;s<e.length;s++)e[s].selected=0;else for(s=0;s<e.length;s++){var c=e[s],l=c.lonlat;if(l[0]!==r){var u=[T.modHalf(l[0],360),l[1]],f=[t.c2p(u),n.c2p(u)];h.contains(f,null,s,m)?(a.push({pointNumber:s,lon:l[0],lat:l[1]}),c.selected=1):c.selected=0}}return a}},81245:function(W,I,o){var T=o(5386).fF,k=o(5386).si,r=o(1426).extendFlat,m=o(82196),h=o(9012),s=m.line;W.exports={mode:m.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:m.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:m.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:r({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:m.connectgaps,marker:m.marker,cliponaxis:r({},m.cliponaxis,{dflt:!1}),textposition:m.textposition,textfont:m.textfont,fill:r({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,hoverinfo:r({},h.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:m.hoveron,hovertemplate:T(),selected:m.selected,unselected:m.unselected}},26442:function(W,I,o){var T=o(92770),k=o(50606).BADNUM,r=o(89298),m=o(36922),h=o(75225),s=o(66279),e=o(47761).calcMarkerSize;W.exports=function(t,n){for(var a=t._fullLayout,i=n.subplot,c=a[i].radialaxis,l=a[i].angularaxis,u=c.makeCalcdata(n,"r"),f=l.makeCalcdata(n,"theta"),d=n._length,w=new Array(d),v=0;v<d;v++){var p=u[v],y=f[v],b=w[v]={};T(p)&&T(y)?(b.r=p,b.theta=y):b.r=k}var x=e(n,d);return n._extremes.x=r.findExtremes(c,u,{ppad:x}),m(t,n),h(w,n),s(w,n),w}},22184:function(W,I,o){var T=o(71828),k=o(34098),r=o(49508),m=o(11058),h=o(94039),s=o(82410),e=o(28908),t=o(47581).PTS_LINESONLY,n=o(81245);function a(i,c,l,u){var f,d=u("r"),w=u("theta");if(d)w?f=Math.min(d.length,w.length):(f=d.length,u("theta0"),u("dtheta"));else{if(!w)return 0;f=c.theta.length,u("r0"),u("dr")}return c._length=f,f}W.exports={handleRThetaDefaults:a,supplyDefaults:function(i,c,l,u){function f(v,p){return T.coerce(i,c,n,v,p)}var d=a(0,c,0,f);if(d){f("thetaunit"),f("mode",d<t?"lines+markers":"lines"),f("text"),f("hovertext"),c.hoveron!=="fills"&&f("hovertemplate"),k.hasLines(c)&&(m(i,c,l,u,f,{backoff:!0}),h(i,c,f),f("connectgaps")),k.hasMarkers(c)&&r(i,c,l,u,f,{gradient:!0}),k.hasText(c)&&(f("texttemplate"),s(i,c,u,f));var w=[];(k.hasMarkers(c)||k.hasText(c))&&(f("cliponaxis"),f("marker.maxdisplayed"),w.push("points")),f("fill"),c.fill!=="none"&&(e(i,c,l,f),k.hasLines(c)||h(i,c,f)),c.fill!=="tonext"&&c.fill!=="toself"||w.push("fills"),f("hoveron",w.join("+")||"points"),T.coerceSelectionMarkerOpacity(c,f)}else c.visible=!1}}},98608:function(W,I,o){var T=o(71828),k=o(89298);W.exports=function(r,m,h){var s,e,t={},n=h[m.subplot]._subplot;n?(s=n.radialAxis,e=n.angularAxis):(s=(n=h[m.subplot]).radialaxis,e=n.angularaxis);var a=s.c2l(r.r);t.rLabel=k.tickText(s,a,!0).text;var i=e.thetaunit==="degrees"?T.rad2deg(r.theta):r.theta;return t.thetaLabel=k.tickText(e,i,!0).text,t}},59150:function(W,I,o){var T=o(33720);function k(r,m,h,s){var e=h.radialAxis,t=h.angularAxis;e._hovertitle="r",t._hovertitle="\u03B8";var n={};n[m.subplot]={_subplot:h};var a=m._module.formatLabels(r,m,n);s.rLabel=a.rLabel,s.thetaLabel=a.thetaLabel;var i=r.hi||m.hoverinfo,c=[];function l(f,d){c.push(f._hovertitle+": "+d)}if(!m.hovertemplate){var u=i.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&l(e,s.rLabel),u.indexOf("theta")!==-1&&l(t,s.thetaLabel),u.indexOf("text")!==-1&&s.text&&(c.push(s.text),delete s.text),s.extraText=c.join("<br>")}}W.exports={hoverPoints:function(r,m,h,s){var e=T(r,m,h,s);if(e&&e[0].index!==!1){var t=e[0];if(t.index===void 0)return e;var n=r.subplot,a=t.cd[t.index],i=t.trace;if(n.isPtInside(a))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(a,i,n,t),t.hovertemplate=i.hovertemplate,e}},makeHoverPointText:k}},91271:function(W,I,o){W.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:o(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:o(81245),supplyDefaults:o(22184).supplyDefaults,colorbar:o(4898),formatLabels:o(98608),calc:o(26442),plot:o(45162),style:o(16296).style,styleOnSelect:o(16296).styleOnSelect,hoverPoints:o(59150).hoverPoints,selectPoints:o(98002),meta:{}}},45162:function(W,I,o){var T=o(32663),k=o(50606).BADNUM;W.exports=function(r,m,h){for(var s=m.layers.frontplot.select("g.scatterlayer"),e=m.xaxis,t=m.yaxis,n={xaxis:e,yaxis:t,plot:m.framework,layerClipId:m._hasClipOnAxisFalse?m.clipIds.forTraces:null},a=m.radialAxis,i=m.angularAxis,c=0;c<h.length;c++)for(var l=h[c],u=0;u<l.length;u++){u===0&&(l[0].trace._xA=e,l[0].trace._yA=t);var f=l[u],d=f.r;if(d===k)f.x=f.y=k;else{var w=a.c2g(d),v=i.c2g(f.theta);f.x=w*Math.cos(v),f.y=w*Math.sin(v)}}T(r,n,h,s)}},53286:function(W,I,o){var T=o(81245),k=o(42341),r=o(5386).si;W.exports={mode:T.mode,r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,text:T.text,texttemplate:r({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,hovertemplate:T.hovertemplate,line:k.line,connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:T.hoverinfo,selected:T.selected,unselected:T.unselected}},65746:function(W,I,o){W.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:o(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:o(53286),supplyDefaults:o(75485),colorbar:o(4898),formatLabels:o(46255),calc:o(37499),hoverPoints:o(29347).hoverPoints,selectPoints:o(58147),meta:{}}},37499:function(W,I,o){var T=o(36922),k=o(47761).calcMarkerSize,r=o(19635),m=o(89298),h=o(78232).TOO_MANY_POINTS;W.exports=function(s,e){var t=s._fullLayout,n=e.subplot,a=t[n].radialaxis,i=t[n].angularaxis,c=e._r=a.makeCalcdata(e,"r"),l=e._theta=i.makeCalcdata(e,"theta"),u=e._length,f={};u<c.length&&(c=c.slice(0,u)),u<l.length&&(l=l.slice(0,u)),f.r=c,f.theta=l,T(s,e);var d,w=f.opts=r.style(s,e);return u<h?d=k(e,u):w.marker&&(d=2*(w.marker.sizeAvg||Math.max(w.marker.size,3))),e._extremes.x=m.findExtremes(a,c,{ppad:d}),[{x:!1,y:!1,t:f,trace:e}]}},75485:function(W,I,o){var T=o(71828),k=o(34098),r=o(22184).handleRThetaDefaults,m=o(49508),h=o(11058),s=o(82410),e=o(28908),t=o(47581).PTS_LINESONLY,n=o(53286);W.exports=function(a,i,c,l){function u(d,w){return T.coerce(a,i,n,d,w)}var f=r(a,i,l,u);f?(u("thetaunit"),u("mode",f<t?"lines+markers":"lines"),u("text"),u("hovertext"),i.hoveron!=="fills"&&u("hovertemplate"),k.hasLines(i)&&(h(a,i,c,l,u),u("connectgaps")),k.hasMarkers(i)&&m(a,i,c,l,u,{noAngleRef:!0,noStandOff:!0}),k.hasText(i)&&(u("texttemplate"),s(a,i,l,u)),u("fill"),i.fill!=="none"&&e(a,i,c,u),T.coerceSelectionMarkerOpacity(i,u)):i.visible=!1}},46255:function(W,I,o){var T=o(98608);W.exports=function(k,r,m){var h=k.i;return"r"in k||(k.r=r._r[h]),"theta"in k||(k.theta=r._theta[h]),T(k,r,m)}},29347:function(W,I,o){var T=o(20794),k=o(59150).makeHoverPointText;W.exports={hoverPoints:function(r,m,h,s){var e=r.cd[0].t,t=e.r,n=e.theta,a=T.hoverPoints(r,m,h,s);if(a&&a[0].index!==!1){var i=a[0];if(i.index===void 0)return a;var c=r.subplot,l=i.cd[i.index],u=i.trace;if(l.r=t[i.index],l.theta=n[i.index],c.isPtInside(l))return i.xLabelVal=void 0,i.yLabelVal=void 0,k(l,u,c,i),a}}}},21461:function(W,I,o){var T=o(65746);T.plot=o(49741),W.exports=T},49741:function(W,I,o){var T=o(88294),k=o(92770),r=o(26787),m=o(38967),h=o(19635),s=o(71828),e=o(78232).TOO_MANY_POINTS;W.exports=function(t,n,a){if(a.length){var i=n.radialAxis,c=n.angularAxis,l=m(t,n);return a.forEach(function(u){if(u&&u[0]&&u[0].trace){var f,d=u[0],w=d.trace,v=d.t,p=w._length,y=v.r,b=v.theta,x=v.opts,_=y.slice(),g=b.slice();for(f=0;f<y.length;f++)n.isPtInside({r:y[f],theta:b[f]})||(_[f]=NaN,g[f]=NaN);var A=new Array(2*p),M=Array(p),L=Array(p);for(f=0;f<p;f++){var E,S,O=_[f];if(k(O)){var P=i.c2g(O),U=c.c2g(g[f],w.thetaunit);E=P*Math.cos(U),S=P*Math.sin(U)}else E=S=NaN;M[f]=A[2*f]=E,L[f]=A[2*f+1]=S}v.tree=T(A),x.marker&&p>=e&&(x.marker.cluster=v.tree),x.marker&&(x.markerSel.positions=x.markerUnsel.positions=x.marker.positions=A),x.line&&A.length>1&&s.extendFlat(x.line,h.linePositions(t,w,A)),x.text&&(s.extendFlat(x.text,{positions:A},h.textPosition(t,w,x.text,x.marker)),s.extendFlat(x.textSel,{positions:A},h.textPosition(t,w,x.text,x.markerSel)),s.extendFlat(x.textUnsel,{positions:A},h.textPosition(t,w,x.text,x.markerUnsel))),x.fill&&!l.fill2d&&(l.fill2d=!0),x.marker&&!l.scatter2d&&(l.scatter2d=!0),x.line&&!l.line2d&&(l.line2d=!0),x.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(x.line),l.fillOptions.push(x.fill),l.markerOptions.push(x.marker),l.markerSelectedOptions.push(x.markerSel),l.markerUnselectedOptions.push(x.markerUnsel),l.textOptions.push(x.text),l.textSelectedOptions.push(x.textSel),l.textUnselectedOptions.push(x.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),v.x=M,v.y=L,v.rawx=M,v.rawy=L,v.r=y,v.theta=b,v.positions=A,v._scene=l,v.index=l.count,l.count++}}),r(t,n,a)}},W.exports.reglPrecompiled={}},48300:function(W,I,o){var T=o(5386).fF,k=o(5386).si,r=o(1426).extendFlat,m=o(82196),h=o(9012),s=m.line;W.exports={mode:m.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:m.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:m.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:r({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:m.connectgaps,marker:m.marker,cliponaxis:r({},m.cliponaxis,{dflt:!1}),textposition:m.textposition,textfont:m.textfont,fill:r({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,hoverinfo:r({},h.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:m.hoveron,hovertemplate:T(),selected:m.selected,unselected:m.unselected}},30621:function(W,I,o){var T=o(92770),k=o(50606).BADNUM,r=o(36922),m=o(75225),h=o(66279),s=o(47761).calcMarkerSize;W.exports=function(e,t){for(var n=e._fullLayout,a=t.subplot,i=n[a].realaxis,c=n[a].imaginaryaxis,l=i.makeCalcdata(t,"real"),u=c.makeCalcdata(t,"imag"),f=t._length,d=new Array(f),w=0;w<f;w++){var v=l[w],p=u[w],y=d[w]={};T(v)&&T(p)?(y.real=v,y.imag=p):y.real=k}return s(t,f),r(e,t),m(d,t),h(d,t),d}},65269:function(W,I,o){var T=o(71828),k=o(34098),r=o(49508),m=o(11058),h=o(94039),s=o(82410),e=o(28908),t=o(47581).PTS_LINESONLY,n=o(48300);W.exports=function(a,i,c,l){function u(w,v){return T.coerce(a,i,n,w,v)}var f=function(w,v,p,y){var b,x=y("real"),_=y("imag");return x&&_&&(b=Math.min(x.length,_.length)),v._length=b,b}(0,i,0,u);if(f){u("mode",f<t?"lines+markers":"lines"),u("text"),u("hovertext"),i.hoveron!=="fills"&&u("hovertemplate"),k.hasLines(i)&&(m(a,i,c,l,u,{backoff:!0}),h(a,i,u),u("connectgaps")),k.hasMarkers(i)&&r(a,i,c,l,u,{gradient:!0}),k.hasText(i)&&(u("texttemplate"),s(a,i,l,u));var d=[];(k.hasMarkers(i)||k.hasText(i))&&(u("cliponaxis"),u("marker.maxdisplayed"),d.push("points")),u("fill"),i.fill!=="none"&&(e(a,i,c,u),k.hasLines(i)||h(a,i,u)),i.fill!=="tonext"&&i.fill!=="toself"||d.push("fills"),u("hoveron",d.join("+")||"points"),T.coerceSelectionMarkerOpacity(i,u)}else i.visible=!1}},62047:function(W,I,o){var T=o(89298);W.exports=function(k,r,m){var h={},s=m[r.subplot]._subplot;return h.realLabel=T.tickText(s.radialAxis,k.real,!0).text,h.imagLabel=T.tickText(s.angularAxis,k.imag,!0).text,h}},11350:function(W,I,o){var T=o(33720);function k(r,m,h,s){var e=h.radialAxis,t=h.angularAxis;e._hovertitle="real",t._hovertitle="imag";var n={};n[m.subplot]={_subplot:h};var a=m._module.formatLabels(r,m,n);s.realLabel=a.realLabel,s.imagLabel=a.imagLabel;var i=r.hi||m.hoverinfo,c=[];function l(f,d){c.push(f._hovertitle+": "+d)}if(!m.hovertemplate){var u=i.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&l(e,s.realLabel),u.indexOf("imag")!==-1&&l(t,s.imagLabel),u.indexOf("text")!==-1&&s.text&&(c.push(s.text),delete s.text),s.extraText=c.join("<br>")}}W.exports={hoverPoints:function(r,m,h,s){var e=T(r,m,h,s);if(e&&e[0].index!==!1){var t=e[0];if(t.index===void 0)return e;var n=r.subplot,a=t.cd[t.index],i=t.trace;if(n.isPtInside(a))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(a,i,n,t),t.hovertemplate=i.hovertemplate,e}},makeHoverPointText:k}},85956:function(W,I,o){W.exports={moduleType:"trace",name:"scattersmith",basePlotModule:o(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:o(48300),supplyDefaults:o(65269),colorbar:o(4898),formatLabels:o(62047),calc:o(30621),plot:o(12480),style:o(16296).style,styleOnSelect:o(16296).styleOnSelect,hoverPoints:o(11350).hoverPoints,selectPoints:o(98002),meta:{}}},12480:function(W,I,o){var T=o(32663),k=o(50606).BADNUM,r=o(23893).smith;W.exports=function(m,h,s){for(var e=h.layers.frontplot.select("g.scatterlayer"),t=h.xaxis,n=h.yaxis,a={xaxis:t,yaxis:n,plot:h.framework,layerClipId:h._hasClipOnAxisFalse?h.clipIds.forTraces:null},i=0;i<s.length;i++)for(var c=s[i],l=0;l<c.length;l++){l===0&&(c[0].trace._xA=t,c[0].trace._yA=n);var u=c[l],f=u.real;if(f===k)u.x=u.y=k;else{var d=r([f,u.imag]);u.x=d[0],u.y=d[1]}}T(m,a,s,e)}},50413:function(W,I,o){var T=o(5386).fF,k=o(5386).si,r=o(82196),m=o(9012),h=o(50693),s=o(79952).P,e=o(1426).extendFlat,t=r.marker,n=r.line,a=t.line;W.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:e({},r.mode,{dflt:"markers"}),text:e({},r.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:e({},r.hovertext,{}),line:{color:n.color,width:n.width,dash:s,backoff:n.backoff,shape:e({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:r.connectgaps,cliponaxis:r.cliponaxis,fill:e({},r.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:r.fillcolor,marker:e({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:t.angleref,standoff:t.standoff,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:e({width:a.width,editType:"calc"},h("marker.line")),gradient:t.gradient,editType:"calc"},h("marker")),textfont:r.textfont,textposition:r.textposition,selected:r.selected,unselected:r.unselected,hoverinfo:e({},m.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:r.hoveron,hovertemplate:T()}},54337:function(W,I,o){var T=o(92770),k=o(36922),r=o(75225),m=o(66279),h=o(47761).calcMarkerSize,s=["a","b","c"],e={a:["b","c"],b:["a","c"],c:["a","b"]};W.exports=function(t,n){var a,i,c,l,u,f,d=t._fullLayout[n.subplot].sum,w=n.sum||d,v={a:n.a,b:n.b,c:n.c};for(a=0;a<s.length;a++)if(!v[c=s[a]]){for(u=v[e[c][0]],f=v[e[c][1]],l=new Array(u.length),i=0;i<u.length;i++)l[i]=w-u[i]-f[i];v[c]=l}var p,y,b,x,_,g,A=n._length,M=new Array(A);for(a=0;a<A;a++)p=v.a[a],y=v.b[a],b=v.c[a],T(p)&&T(y)&&T(b)?((x=d/((p=+p)+(y=+y)+(b=+b)))!=1&&(p*=x,y*=x,b*=x),g=p,_=b-y,M[a]={x:_,y:g,a:p,b:y,c:b}):M[a]={x:!1,y:!1};return h(n,A),k(t,n),r(M,n),m(M,n),M}},46008:function(W,I,o){var T=o(71828),k=o(47581),r=o(34098),m=o(49508),h=o(11058),s=o(94039),e=o(82410),t=o(28908),n=o(50413);W.exports=function(a,i,c,l){function u(y,b){return T.coerce(a,i,n,y,b)}var f,d=u("a"),w=u("b"),v=u("c");if(d?(f=d.length,w?(f=Math.min(f,w.length),v&&(f=Math.min(f,v.length))):f=v?Math.min(f,v.length):0):w&&v&&(f=Math.min(w.length,v.length)),f){i._length=f,u("sum"),u("text"),u("hovertext"),i.hoveron!=="fills"&&u("hovertemplate"),u("mode",f<k.PTS_LINESONLY?"lines+markers":"lines"),r.hasLines(i)&&(h(a,i,c,l,u,{backoff:!0}),s(a,i,u),u("connectgaps")),r.hasMarkers(i)&&m(a,i,c,l,u,{gradient:!0}),r.hasText(i)&&(u("texttemplate"),e(a,i,l,u));var p=[];(r.hasMarkers(i)||r.hasText(i))&&(u("cliponaxis"),u("marker.maxdisplayed"),p.push("points")),u("fill"),i.fill!=="none"&&(t(a,i,c,u),r.hasLines(i)||s(a,i,u)),i.fill!=="tonext"&&i.fill!=="toself"||p.push("fills"),u("hoveron",p.join("+")||"points"),T.coerceSelectionMarkerOpacity(i,u)}else i.visible=!1}},4524:function(W){W.exports=function(I,o,T,k,r){if(o.xa&&(I.xaxis=o.xa),o.ya&&(I.yaxis=o.ya),k[r]){var m=k[r];I.a=m.a,I.b=m.b,I.c=m.c}else I.a=o.a,I.b=o.b,I.c=o.c;return I}},93645:function(W,I,o){var T=o(89298);W.exports=function(k,r,m){var h={},s=m[r.subplot]._subplot;return h.aLabel=T.tickText(s.aaxis,k.a,!0).text,h.bLabel=T.tickText(s.baxis,k.b,!0).text,h.cLabel=T.tickText(s.caxis,k.c,!0).text,h}},47250:function(W,I,o){var T=o(33720);W.exports=function(k,r,m,h){var s=T(k,r,m,h);if(s&&s[0].index!==!1){var e=s[0];if(e.index===void 0){var t=1-e.y0/k.ya._length,n=k.xa._length,a=n*t/2,i=n-a;return e.x0=Math.max(Math.min(e.x0,i),a),e.x1=Math.max(Math.min(e.x1,i),a),s}var c=e.cd[e.index],l=e.trace,u=e.subplot;e.a=c.a,e.b=c.b,e.c=c.c,e.xLabelVal=void 0,e.yLabelVal=void 0;var f={};f[l.subplot]={_subplot:u};var d=l._module.formatLabels(c,l,f);e.aLabel=d.aLabel,e.bLabel=d.bLabel,e.cLabel=d.cLabel;var w=c.hi||l.hoverinfo,v=[];if(!l.hovertemplate){var p=w.split("+");p.indexOf("all")!==-1&&(p=["a","b","c"]),p.indexOf("a")!==-1&&y(u.aaxis,e.aLabel),p.indexOf("b")!==-1&&y(u.baxis,e.bLabel),p.indexOf("c")!==-1&&y(u.caxis,e.cLabel)}return e.extraText=v.join("<br>"),e.hovertemplate=l.hovertemplate,s}function y(b,x){v.push(b._hovertitle+": "+x)}}},52979:function(W,I,o){W.exports={attributes:o(50413),supplyDefaults:o(46008),colorbar:o(4898),formatLabels:o(93645),calc:o(54337),plot:o(7507),style:o(16296).style,styleOnSelect:o(16296).styleOnSelect,hoverPoints:o(47250),selectPoints:o(98002),eventData:o(4524),moduleType:"trace",name:"scatterternary",basePlotModule:o(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(W,I,o){var T=o(32663);W.exports=function(k,r,m){var h=r.plotContainer;h.select(".scatterlayer").selectAll("*").remove();for(var s=r.xaxis,e=r.yaxis,t={xaxis:s,yaxis:e,plot:h,layerClipId:r._hasClipOnAxisFalse?r.clipIdRelative:null},n=r.layers.frontplot.select("g.scatterlayer"),a=0;a<m.length;a++){var i=m[a];i.length&&(i[0].trace._xA=s,i[0].trace._yA=e)}T(k,t,m,n)}},46880:function(W,I,o){var T=o(82196),k=o(50693),r=o(12663).axisHoverFormat,m=o(5386).fF,h=o(42341),s=o(85555).idRegex,e=o(44467).templatedArray,t=o(1426).extendFlat,n=T.marker,a=n.line,i=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},a.width,{editType:"calc"}),editType:"calc"}),c=t(k("marker"),{symbol:n.symbol,angle:n.angle,size:t({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:i,editType:"calc"});function l(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:s[u],editType:"plot"}}}c.color.editType=c.cmin.editType=c.cmax.editType="style",W.exports={dimensions:e("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},h.text,{}),hovertext:t({},h.hovertext,{}),hovertemplate:m(),xhoverformat:r("x"),yhoverformat:r("y"),marker:c,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:h.selected.marker,editType:"calc"},unselected:{marker:h.unselected.marker,editType:"calc"},opacity:h.opacity}},65017:function(W,I,o){var T=o(73972),k=o(83312);W.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:o(46880),supplyDefaults:o(25784),colorbar:o(4898),calc:o(87625),plot:o(79410),hoverPoints:o(8567).hoverPoints,selectPoints:o(8689),editStyle:o(28801),meta:{}},T.register(k)},16947:function(W,I,o){var T=o(46075),k=o(73972),r=o(79749),m=o(27659).a0,h=o(93612),s=o(41675).getFromId,e=o(89298).shouldShowZeroLine,t="splom",n={};function a(c,l,u){for(var f=u.matrixOptions.data.length,d=l._visibleDims,w=u.viewOpts.ranges=new Array(f),v=0;v<d.length;v++){var p=d[v],y=w[v]=new Array(4),b=s(c,l._diag[p][0]);b&&(y[0]=b.r2l(b.range[0]),y[2]=b.r2l(b.range[1]));var x=s(c,l._diag[p][1]);x&&(y[1]=x.r2l(x.range[0]),y[3]=x.r2l(x.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:w},{ranges:w}):u.matrix.update({ranges:w})}function i(c){var l=c._fullLayout,u=l._glcanvas.data()[0].regl,f=l._splomGrid;f||(f=l._splomGrid=T(u)),f.update(function(d){var w,v=d._context.plotGlPixelRatio,p=d._fullLayout,y=p._size,b=[0,0,p.width*v,p.height*v],x={};function _(V,et,J,X,Y,Z){J*=v,X*=v,Y*=v,Z*=v;var tt=et[V+"color"],rt=et[V+"width"],nt=String(tt+rt);nt in x?x[nt].data.push(NaN,NaN,J,X,Y,Z):x[nt]={data:[J,X,Y,Z],join:"rect",thickness:rt*v,color:tt,viewport:b,range:b,overlay:!1}}for(w in p._splomSubplots){var g,A,M=p._plots[w],L=M.xaxis,E=M.yaxis,S=L._gridVals,O=E._gridVals,P=L._offset,U=L._length,R=E._length,j=y.b+E.domain[0]*y.h,B=-E._m,z=-B*E.r2l(E.range[0],E.calendar);if(L.showgrid)for(w=0;w<S.length;w++)g=P+L.l2p(S[w].x),_("grid",L,g,j,g,j+R);if(E.showgrid)for(w=0;w<O.length;w++)_("grid",E,P,A=j+z+B*O[w].x,P+U,A);e(d,L,E)&&(g=P+L.l2p(0),_("zeroline",L,g,j,g,j+R)),e(d,E,L)&&_("zeroline",E,P,A=j+z+0,P+U,A)}var G=[];for(w in x)G.push(x[w]);return G}(c))}W.exports={name:t,attr:h.attr,attrRegex:h.attrRegex,layoutAttributes:h.layoutAttributes,supplyLayoutDefaults:h.supplyLayoutDefaults,drawFramework:h.drawFramework,plot:function(c){var l=c._fullLayout,u=k.getModule(t),f=m(c.calcdata,u)[0];r(c,["ANGLE_instanced_arrays","OES_element_index_uint"],n)&&(l._hasOnlyLargeSploms&&i(c),u.plot(c,{},f))},drag:function(c){var l=c.calcdata,u=c._fullLayout;u._hasOnlyLargeSploms&&i(c);for(var f=0;f<l.length;f++){var d=l[f][0].trace,w=u._splomScenes[d.uid];d.type==="splom"&&w&&w.matrix&&a(c,d,w)}},updateGrid:i,clean:function(c,l,u,f){var d,w={};if(f._splomScenes){for(d=0;d<c.length;d++){var v=c[d];v.type==="splom"&&(w[v.uid]=1)}for(d=0;d<u.length;d++){var p=u[d];if(!w[p.uid]){var y=f._splomScenes[p.uid];y&&y.destroy&&y.destroy(),f._splomScenes[p.uid]=null,delete f._splomScenes[p.uid]}}}Object.keys(f._splomScenes||{}).length===0&&delete f._splomScenes,f._splomGrid&&!l._hasOnlyLargeSploms&&f._hasOnlyLargeSploms&&(f._splomGrid.destroy(),f._splomGrid=null,delete f._splomGrid),h.clean(c,l,u,f)},updateFx:h.updateFx,toSVG:h.toSVG,reglPrecompiled:n}},87625:function(W,I,o){var T=o(71828),k=o(41675),r=o(47761).calcMarkerSize,m=o(47761).calcAxisExpansion,h=o(36922),s=o(19635).markerSelection,e=o(19635).markerStyle,t=o(10164),n=o(50606).BADNUM,a=o(78232).TOO_MANY_POINTS;W.exports=function(i,c){var l,u,f,d,w,v,p=c.dimensions,y=c._length,b={},x=b.cdata=[],_=b.data=[],g=c._visibleDims=[];function A(L,E){for(var S=L.makeCalcdata({v:E.values,vcalendar:c.calendar},"v"),O=0;O<S.length;O++)S[O]=S[O]===n?NaN:S[O];x.push(S),_.push(L.type==="log"?T.simpleMap(S,L.c2l):S)}for(l=0;l<p.length;l++)if((f=p[l]).visible){if(d=k.getFromId(i,c._diag[l][0]),w=k.getFromId(i,c._diag[l][1]),d&&w&&d.type!==w.type){T.log("Skipping splom dimension "+l+" with conflicting axis types");continue}d?(A(d,f),w&&w.type==="category"&&(w._categories=d._categories.slice())):A(w,f),g.push(l)}for(h(i,c),T.extendFlat(b,e(i,c)),v=x.length*y>a?b.sizeAvg||Math.max(b.size,3):r(c,y),u=0;u<g.length;u++)f=p[l=g[u]],d=k.getFromId(i,c._diag[l][0])||{},w=k.getFromId(i,c._diag[l][1])||{},m(i,c,d,w,x[u],x[u],v);var M=t(i,c);return M.matrix||(M.matrix=!0),M.matrixOptions=b,M.selectedOptions=s(i,c,c.selected),M.unselectedOptions=s(i,c,c.unselected),[{x:!1,y:!1,t:{},trace:c}]}},25784:function(W,I,o){var T=o(71828),k=o(85501),r=o(46880),m=o(34098),h=o(49508),s=o(94397),e=o(68645).isOpenSymbol;function t(n,a){function i(l,u){return T.coerce(n,a,r.dimensions,l,u)}i("label");var c=i("values");c&&c.length?i("visible"):a.visible=!1,i("axis.type"),i("axis.matches")}W.exports=function(n,a,i,c){function l(y,b){return T.coerce(n,a,r,y,b)}var u=k(n,a,{name:"dimensions",handleItemDefaults:t}),f=l("diagonal.visible"),d=l("showupperhalf"),w=l("showlowerhalf");if(s(a,u,"values")&&(f||d||w)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),h(n,a,i,c,l,{noAngleRef:!0,noStandOff:!0});var v=e(a.marker.symbol),p=m.isBubble(a);l("marker.line.width",v||p?1:0),function(y,b,x,_){var g,A,M=b.dimensions,L=M.length,E=b.showupperhalf,S=b.showlowerhalf,O=b.diagonal.visible,P=new Array(L),U=new Array(L);for(g=0;g<L;g++){var R=g?g+1:"";P[g]="x"+R,U[g]="y"+R}var j=_("xaxes",P),B=_("yaxes",U),z=b._diag=new Array(L);b._xaxes={},b._yaxes={};var G=[],V=[];function et(ct,pt,gt,kt){if(ct){var yt=ct.charAt(0),mt=x._splomAxes[yt];if(b["_"+yt+"axes"][ct]=1,kt.push(ct),!(ct in mt)){var Ot=mt[ct]={};gt&&(Ot.label=gt.label||"",gt.visible&&gt.axis&&(gt.axis.type&&(Ot.type=gt.axis.type),gt.axis.matches&&(Ot.matches=pt)))}}}var J=!O&&!S,X=!O&&!E;for(b._axesDim={},g=0;g<L;g++){var Y=M[g],Z=g===0,tt=g===L-1,rt=Z&&J||tt&&X?void 0:j[g],nt=Z&&X||tt&&J?void 0:B[g];et(rt,nt,Y,G),et(nt,rt,Y,V),z[g]=[rt,nt],b._axesDim[rt]=g,b._axesDim[nt]=g}for(g=0;g<G.length;g++)for(A=0;A<V.length;A++){var ot=G[g]+V[A];g>A&&E||g<A&&S?x._splomSubplots[ot]=1:g!==A||!O&&S&&E||(x._splomSubplots[ot]=1)}(!S||!O&&E&&S)&&(x._splomGridDflt.xside="bottom",x._splomGridDflt.yside="left")}(0,a,c,l),T.coerceSelectionMarkerOpacity(a,l)}else a.visible=!1}},28801:function(W,I,o){var T=o(71828),k=o(36922),r=o(19635).markerStyle;W.exports=function(m,h){var s=h.trace,e=m._fullLayout._splomScenes[s.uid];if(e){k(m,s),T.extendFlat(e.matrixOptions,r(m,s));var t=T.extendFlat({},e.matrixOptions,e.viewOpts);e.matrix.update(t,null)}}},35948:function(W,I){I.getDimIndex=function(o,T){for(var k=T._id,r={x:0,y:1}[k.charAt(0)],m=o._visibleDims,h=0;h<m.length;h++){var s=m[h];if(o._diag[s][r]===k)return h}return!1}},8567:function(W,I,o){var T=o(35948),k=o(20794).calcHover;W.exports={hoverPoints:function(r,m,h){var s=r.cd[0].trace,e=r.scene.matrixOptions.cdata,t=r.xa,n=r.ya,a=t.c2p(m),i=n.c2p(h),c=r.distance,l=T.getDimIndex(s,t),u=T.getDimIndex(s,n);if(l===!1||u===!1)return[r];for(var f,d,w=e[l],v=e[u],p=c,y=0;y<w.length;y++){var b=w[y],x=v[y],_=t.c2p(b)-a,g=n.c2p(x)-i,A=Math.sqrt(_*_+g*g);A<p&&(p=d=A,f=y)}return r.index=f,r.distance=p,r.dxy=d,f===void 0?[r]:[k(r,w,v,s)]}}},6419:function(W,I,o){var T=o(65017);T.basePlotModule=o(16947),W.exports=T},79410:function(W,I,o){var T=o(60487),k=o(71828),r=o(41675),m=o(64505).selectMode;function h(s,e){var t,n,a,i,c,l=s._fullLayout,u=l._size,f=e.trace,d=e.t,w=l._splomScenes[f.uid],v=w.matrixOptions,p=v.cdata,y=l._glcanvas.data()[0].regl,b=l.dragmode;if(p.length!==0){v.lower=f.showupperhalf,v.upper=f.showlowerhalf,v.diagonal=f.diagonal.visible;var x=f._visibleDims,_=p.length,g=w.viewOpts={};for(g.ranges=new Array(_),g.domains=new Array(_),c=0;c<x.length;c++){a=x[c];var A=g.ranges[c]=new Array(4),M=g.domains[c]=new Array(4);(t=r.getFromId(s,f._diag[a][0]))&&(A[0]=t._rl[0],A[2]=t._rl[1],M[0]=t.domain[0],M[2]=t.domain[1]),(n=r.getFromId(s,f._diag[a][1]))&&(A[1]=n._rl[0],A[3]=n._rl[1],M[1]=n.domain[0],M[3]=n.domain[1])}var L=s._context.plotGlPixelRatio,E=u.l*L,S=u.b*L,O=u.w*L,P=u.h*L;g.viewport=[E,S,O+E,P+S],w.matrix===!0&&(w.matrix=T(y));var U=l.clickmode.indexOf("select")>-1,R=!0;if(m(b)||f.selectedpoints||U){var j=f._length;if(f.selectedpoints){w.selectBatch=f.selectedpoints;var B=f.selectedpoints,z={};for(a=0;a<B.length;a++)z[B[a]]=!0;var G=[];for(a=0;a<j;a++)z[a]||G.push(a);w.unselectBatch=G}var V=d.xpx=new Array(_),et=d.ypx=new Array(_);for(c=0;c<x.length;c++){if(a=x[c],t=r.getFromId(s,f._diag[a][0]))for(V[c]=new Array(j),i=0;i<j;i++)V[c][i]=t.c2p(p[c][i]);if(n=r.getFromId(s,f._diag[a][1]))for(et[c]=new Array(j),i=0;i<j;i++)et[c][i]=n.c2p(p[c][i])}if(w.selectBatch.length||w.unselectBatch.length){var J=k.extendFlat({},v,w.unselectedOptions,g),X=k.extendFlat({},v,w.selectedOptions,g);w.matrix.update(J,X),R=!1}}else d.xpx=d.ypx=null;if(R){var Y=k.extendFlat({},v,g);w.matrix.update(Y,null)}}}W.exports=function(s,e,t){if(t.length)for(var n=0;n<t.length;n++)h(s,t[n][0])}},10164:function(W,I,o){var T=o(71828);W.exports=function(k,r){var m=k._fullLayout,h=r.uid,s=m._splomScenes;s||(s=m._splomScenes={});var e={dirty:!0,selectBatch:[],unselectBatch:[]},t=s[r.uid];return t||((t=s[h]=T.extendFlat({},e,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||T.extendFlat(t,e),t}},8689:function(W,I,o){var T=o(71828),k=T.pushUnique,r=o(34098),m=o(35948);W.exports=function(h,s){var e=h.cd,t=e[0].trace,n=e[0].t,a=h.scene,i=a.matrixOptions.cdata,c=h.xaxis,l=h.yaxis,u=[];if(!a)return u;var f=!r.hasMarkers(t)&&!r.hasText(t);if(t.visible!==!0||f)return u;var d=m.getDimIndex(t,c),w=m.getDimIndex(t,l);if(d===!1||w===!1)return u;var v=n.xpx[d],p=n.ypx[w],y=i[d],b=i[w],x=(h.scene.selectBatch||[]).slice(),_=[];if(s!==!1&&!s.degenerate)for(var g=0;g<y.length;g++)s.contains([v[g],p[g]],null,g,h)?(u.push({pointNumber:g,x:y[g],y:b[g]}),k(x,g)):x.indexOf(g)!==-1?k(x,g):_.push(g);var A=a.matrixOptions;return x.length||_.length?a.selectBatch.length||a.unselectBatch.length||a.matrix.update(a.unselectedOptions,T.extendFlat({},A,a.selectedOptions,a.viewOpts)):a.matrix.update(A,null),a.selectBatch=x,a.unselectBatch=_,u}},21850:function(W,I,o){var T=o(50693),k=o(12663).axisHoverFormat,r=o(5386).fF,m=o(2418),h=o(9012),s=o(1426).extendFlat,e={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:r({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:s({},h.showlegend,{dflt:!1})};s(e,T("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){e[t]=m[t]}),e.hoverinfo=s({},h.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),e.transforms=void 0,W.exports=e},88489:function(W,I,o){var T=o(71828),k=o(78803);function r(s){var e,t,n,a,i,c,l,u,f,d,w,v,p=s._x,y=s._y,b=s._z,x=s._len,_=-1/0,g=1/0,A=-1/0,M=1/0,L=-1/0,E=1/0,S="";for(x&&(l=p[0],f=y[0],w=b[0]),x>1&&(u=p[x-1],d=y[x-1],v=b[x-1]),e=0;e<x;e++)_=Math.max(_,p[e]),g=Math.min(g,p[e]),A=Math.max(A,y[e]),M=Math.min(M,y[e]),L=Math.max(L,b[e]),E=Math.min(E,b[e]),a||p[e]===l||(a=!0,S+="x"),i||y[e]===f||(i=!0,S+="y"),c||b[e]===w||(c=!0,S+="z");a||(S+="x"),i||(S+="y"),c||(S+="z");var O=m(s._x),P=m(s._y),U=m(s._z);S=(S=(S=S.replace("x",(l>u?"-":"+")+"x")).replace("y",(f>d?"-":"+")+"y")).replace("z",(w>v?"-":"+")+"z");var R=function(){x=0,O=[],P=[],U=[]};(!x||x<O.length*P.length*U.length)&&R();var j=function(yt){return yt==="x"?p:yt==="y"?y:b},B=function(yt){return yt==="x"?O:yt==="y"?P:U},z=function(yt){return yt[x-1]<yt[0]?-1:1},G=j(S[1]),V=j(S[3]),et=j(S[5]),J=B(S[1]).length,X=B(S[3]).length,Y=B(S[5]).length,Z=!1,tt=function(yt,mt,Ot){return J*(X*yt+mt)+Ot},rt=z(j(S[1])),nt=z(j(S[3])),ot=z(j(S[5]));for(e=0;e<Y-1;e++){for(t=0;t<X-1;t++){for(n=0;n<J-1;n++){var ct=tt(e,t,n),pt=tt(e,t,n+1),gt=tt(e,t+1,n),kt=tt(e+1,t,n);if(G[ct]*rt<G[pt]*rt&&V[ct]*nt<V[gt]*nt&&et[ct]*ot<et[kt]*ot||(Z=!0),Z)break}if(Z)break}if(Z)break}return Z&&(T.warn("Encountered arbitrary coordinates! Unable to input data grid."),R()),{xMin:g,yMin:M,zMin:E,xMax:_,yMax:A,zMax:L,Xs:O,Ys:P,Zs:U,len:x,fill:S}}function m(s){return T.distinctVals(s).vals}function h(s,e){if(e===void 0&&(e=s.length),T.isTypedArray(s))return s.subarray(0,e);for(var t=[],n=0;n<e;n++)t[n]=+s[n];return t}W.exports={calc:function(s,e){e._len=Math.min(e.u.length,e.v.length,e.w.length,e.x.length,e.y.length,e.z.length),e._u=h(e.u,e._len),e._v=h(e.v,e._len),e._w=h(e.w,e._len),e._x=h(e.x,e._len),e._y=h(e.y,e._len),e._z=h(e.z,e._len);var t=r(e);e._gridFill=t.fill,e._Xs=t.Xs,e._Ys=t.Ys,e._Zs=t.Zs,e._len=t.len;var n,a,i,c=0;e.starts&&(n=h(e.starts.x||[]),a=h(e.starts.y||[]),i=h(e.starts.z||[]),c=Math.min(n.length,a.length,i.length)),e._startsX=n||[],e._startsY=a||[],e._startsZ=i||[];var l,u=0,f=1/0;for(l=0;l<e._len;l++){var d=e._u[l],w=e._v[l],v=e._w[l],p=Math.sqrt(d*d+w*w+v*v);u=Math.max(u,p),f=Math.min(f,p)}for(k(s,e,{vals:[f,u],containerStr:"",cLetter:"c"}),l=0;l<c;l++){var y=n[l];t.xMax=Math.max(t.xMax,y),t.xMin=Math.min(t.xMin,y);var b=a[l];t.yMax=Math.max(t.yMax,b),t.yMin=Math.min(t.yMin,b);var x=i[l];t.zMax=Math.max(t.zMax,x),t.zMin=Math.min(t.zMin,x)}e._slen=c,e._normMax=u,e._xbnds=[t.xMin,t.xMax],e._ybnds=[t.yMin,t.yMax],e._zbnds=[t.zMin,t.zMax]},filter:h,processGrid:r}},90154:function(W,I,o){var T=o(9330).gl_streamtube3d,k=T.createTubeMesh,r=o(71828),m=o(81697).parseColorScale,h=o(21081).extractOpts,s=o(90060),e={xaxis:0,yaxis:1,zaxis:2};function t(l,u){this.scene=l,this.uid=u,this.mesh=null,this.data=null}var n=t.prototype;function a(l){var u=l.length;return u>2?l.slice(1,u-1):u===2?[(l[0]+l[1])/2]:l}function i(l){var u=l.length;return u===1?[.5,.5]:[l[1]-l[0],l[u-1]-l[u-2]]}function c(l,u){var f=l.fullSceneLayout,d=l.dataScale,w=u._len,v={};function p(J,X){var Y=f[X],Z=d[e[X]];return r.simpleMap(J,function(tt){return Y.d2l(tt)*Z})}if(v.vectors=s(p(u._u,"xaxis"),p(u._v,"yaxis"),p(u._w,"zaxis"),w),!w)return{positions:[],cells:[]};var y=p(u._Xs,"xaxis"),b=p(u._Ys,"yaxis"),x=p(u._Zs,"zaxis");if(v.meshgrid=[y,b,x],v.gridFill=u._gridFill,u._slen)v.startingPositions=s(p(u._startsX,"xaxis"),p(u._startsY,"yaxis"),p(u._startsZ,"zaxis"));else{for(var _=b[0],g=a(y),A=a(x),M=new Array(g.length*A.length),L=0,E=0;E<g.length;E++)for(var S=0;S<A.length;S++)M[L++]=[g[E],_,A[S]];v.startingPositions=M}v.colormap=m(u),v.tubeSize=u.sizeref,v.maxLength=u.maxdisplayed;var O=p(u._xbnds,"xaxis"),P=p(u._ybnds,"yaxis"),U=p(u._zbnds,"zaxis"),R=i(y),j=i(b),B=i(x),z=[[O[0]-R[0],P[0]-j[0],U[0]-B[0]],[O[1]+R[1],P[1]+j[1],U[1]+B[1]]],G=T(v,z),V=h(u);G.vertexIntensityBounds=[V.min/u._normMax,V.max/u._normMax];var et=u.lightposition;return G.lightPosition=[et.x,et.y,et.z],G.ambient=u.lighting.ambient,G.diffuse=u.lighting.diffuse,G.specular=u.lighting.specular,G.roughness=u.lighting.roughness,G.fresnel=u.lighting.fresnel,G.opacity=u.opacity,u._pad=G.tubeScale*u.sizeref*2,G}n.handlePick=function(l){var u=this.scene.fullSceneLayout,f=this.scene.dataScale;function d(p,y){var b=u[y],x=f[e[y]];return b.l2c(p)/x}if(l.object===this.mesh){var w=l.data.position,v=l.data.velocity;return l.traceCoordinate=[d(w[0],"xaxis"),d(w[1],"yaxis"),d(w[2],"zaxis"),d(v[0],"xaxis"),d(v[1],"yaxis"),d(v[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},n.update=function(l){this.data=l;var u=c(this.scene,l);this.mesh.update(u)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},W.exports=function(l,u){var f=l.glplot.gl,d=c(l,u),w=k(f,d),v=new t(l,u.uid);return v.mesh=w,v.data=u,w._trace=v,l.glplot.add(w),v}},22459:function(W,I,o){var T=o(71828),k=o(1586),r=o(21850);W.exports=function(m,h,s,e){function t(f,d){return T.coerce(m,h,r,f,d)}var n=t("u"),a=t("v"),i=t("w"),c=t("x"),l=t("y"),u=t("z");n&&n.length&&a&&a.length&&i&&i.length&&c&&c.length&&l&&l.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(m,h,e,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),h._length=null):h.visible=!1}},61510:function(W,I,o){W.exports={moduleType:"trace",name:"streamtube",basePlotModule:o(58547),categories:["gl3d","showLegend"],attributes:o(21850),supplyDefaults:o(22459),colorbar:{min:"cmin",max:"cmax"},calc:o(88489).calc,plot:o(90154),eventData:function(T,k){return T.tubex=T.x,T.tubey=T.y,T.tubez=T.z,T.tubeu=k.traceCoordinate[3],T.tubev=k.traceCoordinate[4],T.tubew=k.traceCoordinate[5],T.norm=k.traceCoordinate[6],T.divergence=k.traceCoordinate[7],delete T.x,delete T.y,delete T.z,T},meta:{}}},57564:function(W,I,o){var T=o(9012),k=o(5386).fF,r=o(5386).si,m=o(50693),h=o(27670).Y,s=o(34e3),e=o(7055),t=o(1426).extendFlat,n=o(79952).u;W.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},s.marker.line.color,{dflt:null}),width:t({},s.marker.line.width,{dflt:1}),editType:"calc"},pattern:n,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:s.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:r({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:t({},T.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:e.eventDataKeys}),textfont:s.textfont,insidetextorientation:s.insidetextorientation,insidetextfont:s.insidetextfont,outsidetextfont:t({},s.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:s.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:h({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(W,I,o){var T=o(74875);I.name="sunburst",I.plot=function(k,r,m,h){T.plotBasePlot(I.name,k,r,m,h)},I.clean=function(k,r,m,h){T.cleanBasePlot(I.name,k,r,m,h)}},52147:function(W,I,o){var T=o(674),k=o(92770),r=o(71828),m=o(21081).makeColorScaleFuncFromTrace,h=o(32354).makePullColorFn,s=o(32354).generateExtendedColors,e=o(21081).calc,t=o(50606).ALMOST_EQUAL,n={},a={},i={};function c(l,u,f){var d=0,w=l.children;if(w){for(var v=w.length,p=0;p<v;p++)d+=c(w[p],u,f);f.branches&&d++}else f.leaves&&d++;return l.value=l.data.data.value=d,u._values||(u._values=[]),u._values[l.data.data.i]=d,d}I.calc=function(l,u){var f,d,w,v,p,y,b=l._fullLayout,x=u.ids,_=r.isArrayOrTypedArray(x),g=u.labels,A=u.parents,M=u.values,L=r.isArrayOrTypedArray(M),E=[],S={},O={},P=function(ot){return ot||typeof ot=="number"},U=function(ot){return!L||k(M[ot])&&M[ot]>=0};_?(f=Math.min(x.length,A.length),d=function(ot){return P(x[ot])&&U(ot)},w=function(ot){return String(x[ot])}):(f=Math.min(g.length,A.length),d=function(ot){return P(g[ot])&&U(ot)},w=function(ot){return String(g[ot])}),L&&(f=Math.min(f,M.length));for(var R=0;R<f;R++)if(d(R)){var j=w(R),B=P(A[R])?String(A[R]):"",z={i:R,id:j,pid:B,label:P(g[R])?String(g[R]):""};L&&(z.v=+M[R]),E.push(z),p=j,S[v=B]?S[v].push(p):S[v]=[p],O[p]=1}if(S[""]){if(S[""].length>1){for(var G=r.randstr(),V=0;V<E.length;V++)E[V].pid===""&&(E[V].pid=G);E.unshift({hasMultipleRoots:!0,id:G,pid:"",label:""})}}else{var et,J=[];for(et in S)O[et]||J.push(et);if(J.length!==1)return r.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",J.join(", ")].join(" "));et=J[0],E.unshift({hasImpliedRoot:!0,id:et,pid:"",label:et})}try{y=T.stratify().id(function(ot){return ot.id}).parentId(function(ot){return ot.pid})(E)}catch(ot){return r.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",ot.message].join(" "))}var X=T.hierarchy(y),Y=!1;if(L)switch(u.branchvalues){case"remainder":X.sum(function(ot){return ot.data.v});break;case"total":X.each(function(ot){var ct=ot.data.data,pt=ct.v;if(ot.children){var gt=ot.children.reduce(function(kt,yt){return kt+yt.data.data.v},0);if((ct.hasImpliedRoot||ct.hasMultipleRoots)&&(pt=gt),pt<gt*t)return Y=!0,r.warn(["Total value for node",ot.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,pt,`
children sum =`,gt].join(" "))}ot.value=pt})}else c(X,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!Y){var Z,tt;u.sort&&X.sort(function(ot,ct){return ct.value-ot.value});var rt=u.marker.colors||[],nt=!!rt.length;return u._hasColorscale?(nt||(rt=L?u.values:u._values),e(l,u,{vals:rt,containerStr:"marker",cLetter:"c"}),tt=m(u.marker)):Z=h(b["_"+u.type+"colormap"]),X.each(function(ot){var ct=ot.data.data;ct.color=u._hasColorscale?tt(rt[ct.i]):Z(rt[ct.i],ct.id)}),E[0].hierarchy=X,E}},I._runCrossTraceCalc=function(l,u){var f=u._fullLayout,d=u.calcdata,w=f[l+"colorway"],v=f["_"+l+"colormap"];f["extend"+l+"colors"]&&(w=s(w,l==="icicle"?i:l==="treemap"?a:n));var p,y=0;function b(g){var A=g.data.data,M=A.id;A.color===!1&&(v[M]?A.color=v[M]:g.parent?g.parent.parent?A.color=g.parent.data.data.color:(v[M]=A.color=w[y%w.length],y++):A.color=p)}for(var x=0;x<d.length;x++){var _=d[x][0];_.trace.type===l&&_.hierarchy&&(p=_.trace.root.color,_.hierarchy.each(b))}},I.crossTraceCalc=function(l){return I._runCrossTraceCalc("sunburst",l)}},7055:function(W){W.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(W,I,o){var T=o(71828),k=o(57564),r=o(27670).c,m=o(90769).handleText,h=o(37434).handleMarkerDefaults,s=o(21081),e=s.hasColorscale,t=s.handleDefaults;W.exports=function(n,a,i,c){function l(p,y){return T.coerce(n,a,k,p,y)}var u=l("labels"),f=l("parents");if(u&&u.length&&f&&f.length){var d=l("values");d&&d.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),h(n,a,c,l);var w=a._hasColorscale=e(n,"marker","colors")||(n.marker||{}).coloraxis;w&&t(n,a,c,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",w?1:.7);var v=l("text");l("texttemplate"),a.texttemplate||l("textinfo",Array.isArray(v)?"text+label":"label"),l("hovertext"),l("hovertemplate"),m(n,a,c,l,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),r(a,c,l),a._length=null}else a.visible=!1}},43467:function(W,I,o){var T=o(91424),k=o(7901);W.exports=function(r,m,h,s,e){var t=m.data.data,n=t.i,a=e||t.color;if(n>=0){m.i=t.i;var i=h.marker;i.pattern&&i.colors&&i.pattern.shape||(i.color=a,m.color=a),T.pointStyle(r,h,s,m)}else k.fill(r,a)}},83523:function(W,I,o){var T=o(39898),k=o(73972),r=o(23469).appendArrayPointValue,m=o(30211),h=o(71828),s=o(11086),e=o(2791),t=o(53581).formatPieValue;function n(a,i,c){for(var l=a.data.data,u={curveNumber:i.index,pointNumber:l.i,data:i._input,fullData:i},f=0;f<c.length;f++){var d=c[f];d in a&&(u[d]=a[d])}return"parentString"in a&&!e.isHierarchyRoot(a)&&(u.parent=a.parentString),r(u,i,l.i),u}W.exports=function(a,i,c,l,u){var f=l[0],d=f.trace,w=f.hierarchy,v=d.type==="sunburst",p=d.type==="treemap"||d.type==="icicle";"_hasHoverLabel"in d||(d._hasHoverLabel=!1),"_hasHoverEvent"in d||(d._hasHoverEvent=!1),a.on("mouseover",function(y){var b=c._fullLayout;if(!c._dragging&&b.hovermode!==!1){var x,_=c._fullData[d.index],g=y.data.data,A=g.i,M=e.isHierarchyRoot(y),L=e.getParent(w,y),E=e.getValue(y),S=function(rt){return h.castOption(_,A,rt)},O=S("hovertemplate"),P=m.castHoverinfo(_,b,A),U=b.separators;if(O||P&&P!=="none"&&P!=="skip"){var R,j;v&&(R=f.cx+y.pxmid[0]*(1-y.rInscribed),j=f.cy+y.pxmid[1]*(1-y.rInscribed)),p&&(R=y._hoverX,j=y._hoverY);var B,z={},G=[],V=[],et=function(rt){return G.indexOf(rt)!==-1};P&&(G=P==="all"?_._module.attributes.hoverinfo.flags:P.split("+")),z.label=g.label,et("label")&&z.label&&V.push(z.label),g.hasOwnProperty("v")&&(z.value=g.v,z.valueLabel=t(z.value,U),et("value")&&V.push(z.valueLabel)),z.currentPath=y.currentPath=e.getPath(y.data),et("current path")&&!M&&V.push(z.currentPath);var J=[],X=function(){J.indexOf(B)===-1&&(V.push(B),J.push(B))};z.percentParent=y.percentParent=E/e.getValue(L),z.parent=y.parentString=e.getPtLabel(L),et("percent parent")&&(B=e.formatPercent(z.percentParent,U)+" of "+z.parent,X()),z.percentEntry=y.percentEntry=E/e.getValue(i),z.entry=y.entry=e.getPtLabel(i),!et("percent entry")||M||y.onPathbar||(B=e.formatPercent(z.percentEntry,U)+" of "+z.entry,X()),z.percentRoot=y.percentRoot=E/e.getValue(w),z.root=y.root=e.getPtLabel(w),et("percent root")&&!M&&(B=e.formatPercent(z.percentRoot,U)+" of "+z.root,X()),z.text=S("hovertext")||S("text"),et("text")&&(B=z.text,h.isValidTextValue(B)&&V.push(B)),x=[n(y,_,u.eventDataKeys)];var Y={trace:_,y:j,_x0:y._x0,_x1:y._x1,_y0:y._y0,_y1:y._y1,text:V.join("<br>"),name:O||et("name")?_.name:void 0,color:S("hoverlabel.bgcolor")||g.color,borderColor:S("hoverlabel.bordercolor"),fontFamily:S("hoverlabel.font.family"),fontSize:S("hoverlabel.font.size"),fontColor:S("hoverlabel.font.color"),nameLength:S("hoverlabel.namelength"),textAlign:S("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:z,eventData:x};v&&(Y.x0=R-y.rInscribed*y.rpx1,Y.x1=R+y.rInscribed*y.rpx1,Y.idealAlign=y.pxmid[0]<0?"left":"right"),p&&(Y.x=R,Y.idealAlign=R<0?"left":"right");var Z=[];m.loneHover(Y,{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:c,inOut_bbox:Z}),x[0].bbox=Z[0],d._hasHoverLabel=!0}if(p){var tt=a.select("path.surface");u.styleOne(tt,y,_,c,{hovered:!0})}d._hasHoverEvent=!0,c.emit("plotly_hover",{points:x||[n(y,_,u.eventDataKeys)],event:T.event})}}),a.on("mouseout",function(y){var b=c._fullLayout,x=c._fullData[d.index],_=T.select(this).datum();if(d._hasHoverEvent&&(y.originalEvent=T.event,c.emit("plotly_unhover",{points:[n(_,x,u.eventDataKeys)],event:T.event}),d._hasHoverEvent=!1),d._hasHoverLabel&&(m.loneUnhover(b._hoverlayer.node()),d._hasHoverLabel=!1),p){var g=a.select("path.surface");u.styleOne(g,_,x,c,{hovered:!1})}}),a.on("click",function(y){var b=c._fullLayout,x=c._fullData[d.index],_=v&&(e.isHierarchyRoot(y)||e.isLeaf(y)),g=e.getPtId(y),A=e.isEntry(y)?e.findEntryWithChild(w,g):e.findEntryWithLevel(w,g),M=e.getPtId(A),L={points:[n(y,x,u.eventDataKeys)],event:T.event};_||(L.nextLevel=M);var E=s.triggerHandler(c,"plotly_"+d.type+"click",L);if(E!==!1&&b.hovermode&&(c._hoverdata=[n(y,x,u.eventDataKeys)],m.click(c,T.event)),!_&&E!==!1&&!c._dragging&&!c._transitioning){k.call("_storeDirectGUIEdit",x,b._tracePreGUI[x.uid],{level:x.level});var S={data:[{level:M}],traces:[d.index]},O={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};m.loneUnhover(b._hoverlayer.node()),k.call("animate",c,S,O)}})}},2791:function(W,I,o){var T=o(71828),k=o(7901),r=o(6964),m=o(53581);function h(s){return s.data.data.pid}I.findEntryWithLevel=function(s,e){var t;return e&&s.eachAfter(function(n){if(I.getPtId(n)===e)return t=n.copy()}),t||s},I.findEntryWithChild=function(s,e){var t;return s.eachAfter(function(n){for(var a=n.children||[],i=0;i<a.length;i++){var c=a[i];if(I.getPtId(c)===e)return t=n.copy()}}),t||s},I.isEntry=function(s){return!s.parent},I.isLeaf=function(s){return!s.children},I.getPtId=function(s){return s.data.data.id},I.getPtLabel=function(s){return s.data.data.label},I.getValue=function(s){return s.value},I.isHierarchyRoot=function(s){return h(s)===""},I.setSliceCursor=function(s,e,t){var n=t.isTransitioning;if(!n){var a=s.datum();n=t.hideOnRoot&&I.isHierarchyRoot(a)||t.hideOnLeaves&&I.isLeaf(a)}r(s,n?null:"pointer")},I.getInsideTextFontKey=function(s,e,t,n,a){var i=(a||{}).onPathbar?"pathbar.textfont":"insidetextfont",c=t.data.data.i;return T.castOption(e,c,i+"."+s)||T.castOption(e,c,"textfont."+s)||n.size},I.getOutsideTextFontKey=function(s,e,t,n){var a=t.data.data.i;return T.castOption(e,a,"outsidetextfont."+s)||T.castOption(e,a,"textfont."+s)||n.size},I.isOutsideText=function(s,e){return!s._hasColorscale&&I.isHierarchyRoot(e)},I.determineTextFont=function(s,e,t,n){return I.isOutsideText(s,e)?function(a,i,c){return{color:I.getOutsideTextFontKey("color",a,i,c),family:I.getOutsideTextFontKey("family",a,i,c),size:I.getOutsideTextFontKey("size",a,i,c)}}(s,e,t):function(a,i,c,l){var u=(l||{}).onPathbar,f=i.data.data,d=f.i,w=T.castOption(a,d,(u?"pathbar.textfont":"insidetextfont")+".color");return!w&&a._input.textfont&&(w=T.castOption(a._input,d,"textfont.color")),{color:w||k.contrast(f.color),family:I.getInsideTextFontKey("family",a,i,c,l),size:I.getInsideTextFontKey("size",a,i,c,l)}}(s,e,t,n)},I.hasTransition=function(s){return!!(s&&s.duration>0)},I.getMaxDepth=function(s){return s.maxdepth>=0?s.maxdepth:1/0},I.isHeader=function(s,e){return!(I.isLeaf(s)||s.depth===e._maxDepth-1)},I.getParent=function(s,e){return I.findEntryWithLevel(s,h(e))},I.listPath=function(s,e){var t=s.parent;if(!t)return[];var n=e?[t.data[e]]:[t];return I.listPath(t,e).concat(n)},I.getPath=function(s){return I.listPath(s,"label").join("/")+"/"},I.formatValue=m.formatPieValue,I.formatPercent=function(s,e){var t=T.formatPercent(s,0);return t==="0%"&&(t=m.formatPiePercent(s,e)),t}},87619:function(W,I,o){W.exports={moduleType:"trace",name:"sunburst",basePlotModule:o(66888),categories:[],animatable:!0,attributes:o(57564),layoutAttributes:o(2654),supplyDefaults:o(17094),supplyLayoutDefaults:o(57034),calc:o(52147).calc,crossTraceCalc:o(52147).crossTraceCalc,plot:o(24714).plot,style:o(29969).style,colorbar:o(4898),meta:{}}},2654:function(W){W.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(W,I,o){var T=o(71828),k=o(2654);W.exports=function(r,m){function h(s,e){return T.coerce(r,m,k,s,e)}h("sunburstcolorway",m.colorway),h("extendsunburstcolors")}},24714:function(W,I,o){var T=o(39898),k=o(674),r=o(81684).sX,m=o(91424),h=o(71828),s=o(63893),e=o(72597),t=e.recordMinTextSize,n=e.clearMinTextSize,a=o(14575),i=o(53581).getRotationAngle,c=a.computeTransform,l=a.transformInsideText,u=o(29969).styleOne,f=o(16688).resizeText,d=o(83523),w=o(7055),v=o(2791);function p(b,x,_,g){var A=b._context.staticPlot,M=b._fullLayout,L=!M.uniformtext.mode&&v.hasTransition(g),E=T.select(_).selectAll("g.slice"),S=x[0],O=S.trace,P=S.hierarchy,U=v.findEntryWithLevel(P,O.level),R=v.getMaxDepth(O),j=M._size,B=O.domain,z=j.w*(B.x[1]-B.x[0]),G=j.h*(B.y[1]-B.y[0]),V=.5*Math.min(z,G),et=S.cx=j.l+j.w*(B.x[1]+B.x[0])/2,J=S.cy=j.t+j.h*(1-B.y[0])-G/2;if(!U)return E.remove();var X=null,Y={};L&&E.each(function(at){Y[v.getPtId(at)]={rpx0:at.rpx0,rpx1:at.rpx1,x0:at.x0,x1:at.x1,transform:at.transform},!X&&v.isEntry(at)&&(X=at)});var Z=function(at){return k.partition().size([2*Math.PI,at.height+1])(at)}(U).descendants(),tt=U.height+1,rt=0,nt=R;S.hasMultipleRoots&&v.isHierarchyRoot(U)&&(Z=Z.slice(1),tt-=1,rt=1,nt+=1),Z=Z.filter(function(at){return at.y1<=nt});var ot=i(O.rotation);ot&&Z.forEach(function(at){at.x0+=ot,at.x1+=ot});var ct=Math.min(tt,R),pt=function(at){return(at-rt)/ct*V},gt=function(at,ht){return[at*Math.cos(ht),-at*Math.sin(ht)]},kt=function(at){return h.pathAnnulus(at.rpx0,at.rpx1,at.x0,at.x1,et,J)},yt=function(at){return et+y(at)[0]*(at.transform.rCenter||0)+(at.transform.x||0)},mt=function(at){return J+y(at)[1]*(at.transform.rCenter||0)+(at.transform.y||0)};(E=E.data(Z,v.getPtId)).enter().append("g").classed("slice",!0),L?E.exit().transition().each(function(){var at=T.select(this);at.select("path.surface").transition().attrTween("d",function(ht){var Lt=function(Mt){var _t,St=v.getPtId(Mt),Dt=Y[St],ut=Y[v.getPtId(U)];if(ut){var Tt=(Mt.x1>ut.x1?2*Math.PI:0)+ot;_t=Mt.rpx1<ut.rpx1?{x0:Mt.x0,x1:Mt.x1,rpx0:0,rpx1:0}:{x0:Tt,x1:Tt,rpx0:Mt.rpx0,rpx1:Mt.rpx1}}else{var bt,It=v.getPtId(Mt.parent);E.each(function(Xt){if(v.getPtId(Xt)===It)return bt=Xt});var zt,Ft=bt.children;Ft.forEach(function(Xt,ae){if(v.getPtId(Xt)===St)return zt=ae});var $t=Ft.length,Wt=r(bt.x0,bt.x1);_t={rpx0:V,rpx1:V,x0:Wt(zt/$t),x1:Wt((zt+1)/$t)}}return r(Dt,_t)}(ht);return function(Mt){return kt(Lt(Mt))}}),at.select("g.slicetext").attr("opacity",0)}).remove():E.exit().remove(),E.order();var Ot=null;if(L&&X){var vt=v.getPtId(X);E.each(function(at){Ot===null&&v.getPtId(at)===vt&&(Ot=at.x1)})}var xt=E;function st(at){var ht=at.parent,Lt=Y[v.getPtId(ht)],Mt={};if(Lt){var _t=ht.children,St=_t.indexOf(at),Dt=_t.length,ut=r(Lt.x0,Lt.x1);Mt.x0=ut(St/Dt),Mt.x1=ut(St/Dt)}else Mt.x0=Mt.x1=0;return Mt}L&&(xt=xt.transition().each("end",function(){var at=T.select(this);v.setSliceCursor(at,b,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),xt.each(function(at){var ht=T.select(this),Lt=h.ensureSingle(ht,"path","surface",function(Tt){Tt.style("pointer-events",A?"none":"all")});at.rpx0=pt(at.y0),at.rpx1=pt(at.y1),at.xmid=(at.x0+at.x1)/2,at.pxmid=gt(at.rpx1,at.xmid),at.midangle=-(at.xmid-Math.PI/2),at.startangle=-(at.x0-Math.PI/2),at.stopangle=-(at.x1-Math.PI/2),at.halfangle=.5*Math.min(h.angleDelta(at.x0,at.x1)||Math.PI,Math.PI),at.ring=1-at.rpx0/at.rpx1,at.rInscribed=function(Tt){return Tt.rpx0===0&&h.isFullCircle([Tt.x0,Tt.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Tt.halfangle)),Tt.ring/2))}(at),L?Lt.transition().attrTween("d",function(Tt){var bt=function(It){var zt,Ft=Y[v.getPtId(It)],$t={x0:It.x0,x1:It.x1,rpx0:It.rpx0,rpx1:It.rpx1};if(Ft)zt=Ft;else if(X)if(It.parent)if(Ot){var Wt=(It.x1>Ot?2*Math.PI:0)+ot;zt={x0:Wt,x1:Wt}}else zt={rpx0:V,rpx1:V},h.extendFlat(zt,st(It));else zt={rpx0:0,rpx1:0};else zt={x0:ot,x1:ot};return r(zt,$t)}(Tt);return function(It){return kt(bt(It))}}):Lt.attr("d",kt),ht.call(d,U,b,x,{eventDataKeys:w.eventDataKeys,transitionTime:w.CLICK_TRANSITION_TIME,transitionEasing:w.CLICK_TRANSITION_EASING}).call(v.setSliceCursor,b,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:b._transitioning}),Lt.call(u,at,O,b);var Mt=h.ensureSingle(ht,"g","slicetext"),_t=h.ensureSingle(Mt,"text","",function(Tt){Tt.attr("data-notex",1)}),St=h.ensureUniformFontSize(b,v.determineTextFont(O,at,M.font));_t.text(I.formatSliceLabel(at,U,O,x,M)).classed("slicetext",!0).attr("text-anchor","middle").call(m.font,St).call(s.convertToTspans,b);var Dt=m.bBox(_t.node());at.transform=l(Dt,at,S),at.transform.targetX=yt(at),at.transform.targetY=mt(at);var ut=function(Tt,bt){var It=Tt.transform;return c(It,bt),It.fontSize=St.size,t(O.type,It,M),h.getTextTransform(It)};L?_t.transition().attrTween("transform",function(Tt){var bt=function(It){var zt,Ft=Y[v.getPtId(It)],$t=It.transform;if(Ft)zt=Ft;else if(zt={rpx1:It.rpx1,transform:{textPosAngle:$t.textPosAngle,scale:0,rotate:$t.rotate,rCenter:$t.rCenter,x:$t.x,y:$t.y}},X)if(It.parent)if(Ot){var Wt=It.x1>Ot?2*Math.PI:0;zt.x0=zt.x1=Wt}else h.extendFlat(zt,st(It));else zt.x0=zt.x1=ot;else zt.x0=zt.x1=ot;var Xt=r(zt.transform.textPosAngle,It.transform.textPosAngle),ae=r(zt.rpx1,It.rpx1),Qt=r(zt.x0,It.x0),de=r(zt.x1,It.x1),ye=r(zt.transform.scale,$t.scale),ve=r(zt.transform.rotate,$t.rotate),ie=$t.rCenter===0?3:zt.transform.rCenter===0?1/3:1,se=r(zt.transform.rCenter,$t.rCenter);return function(ke){var Ae=ae(ke),Ie=Qt(ke),Te=de(ke),Vt=function(Gt){return se(Math.pow(Gt,ie))}(ke),Zt={pxmid:gt(Ae,(Ie+Te)/2),rpx1:Ae,transform:{textPosAngle:Xt(ke),rCenter:Vt,x:$t.x,y:$t.y}};return t(O.type,$t,M),{transform:{targetX:yt(Zt),targetY:mt(Zt),scale:ye(ke),rotate:ve(ke),rCenter:Vt}}}}(Tt);return function(It){return ut(bt(It),Dt)}}):_t.attr("transform",ut(at,Dt))})}function y(b){return x=b.rpx1,_=b.transform.textPosAngle,[x*Math.sin(_),-x*Math.cos(_)];var x,_}I.plot=function(b,x,_,g){var A,M,L=b._fullLayout,E=L._sunburstlayer,S=!_,O=!L.uniformtext.mode&&v.hasTransition(_);n("sunburst",L),(A=E.selectAll("g.trace.sunburst").data(x,function(P){return P[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),A.order(),O?(g&&(M=g()),T.transition().duration(_.duration).ease(_.easing).each("end",function(){M&&M()}).each("interrupt",function(){M&&M()}).each(function(){E.selectAll("g.trace").each(function(P){p(b,P,this,_)})})):(A.each(function(P){p(b,P,this,_)}),L.uniformtext.mode&&f(b,L._sunburstlayer.selectAll(".trace"),"sunburst")),S&&A.exit().remove()},I.formatSliceLabel=function(b,x,_,g,A){var M=_.texttemplate,L=_.textinfo;if(!(M||L&&L!=="none"))return"";var E=A.separators,S=g[0],O=b.data.data,P=S.hierarchy,U=v.isHierarchyRoot(b),R=v.getParent(P,b),j=v.getValue(b);if(!M){var B,z=L.split("+"),G=function(nt){return z.indexOf(nt)!==-1},V=[];if(G("label")&&O.label&&V.push(O.label),O.hasOwnProperty("v")&&G("value")&&V.push(v.formatValue(O.v,E)),!U){G("current path")&&V.push(v.getPath(b.data));var et=0;G("percent parent")&&et++,G("percent entry")&&et++,G("percent root")&&et++;var J=et>1;if(et){var X,Y=function(nt){B=v.formatPercent(X,E),J&&(B+=" of "+nt),V.push(B)};G("percent parent")&&!U&&(X=j/v.getValue(R),Y("parent")),G("percent entry")&&(X=j/v.getValue(x),Y("entry")),G("percent root")&&(X=j/v.getValue(P),Y("root"))}}return G("text")&&(B=h.castOption(_,O.i,"text"),h.isValidTextValue(B)&&V.push(B)),V.join("<br>")}var Z=h.castOption(_,O.i,"texttemplate");if(!Z)return"";var tt={};O.label&&(tt.label=O.label),O.hasOwnProperty("v")&&(tt.value=O.v,tt.valueLabel=v.formatValue(O.v,E)),tt.currentPath=v.getPath(b.data),U||(tt.percentParent=j/v.getValue(R),tt.percentParentLabel=v.formatPercent(tt.percentParent,E),tt.parent=v.getPtLabel(R)),tt.percentEntry=j/v.getValue(x),tt.percentEntryLabel=v.formatPercent(tt.percentEntry,E),tt.entry=v.getPtLabel(x),tt.percentRoot=j/v.getValue(P),tt.percentRootLabel=v.formatPercent(tt.percentRoot,E),tt.root=v.getPtLabel(P),O.hasOwnProperty("color")&&(tt.color=O.color);var rt=h.castOption(_,O.i,"text");return(h.isValidTextValue(rt)||rt==="")&&(tt.text=rt),tt.customdata=h.castOption(_,O.i,"customdata"),h.texttemplateString(Z,tt,A._d3locale,tt,_._meta||{})}},29969:function(W,I,o){var T=o(39898),k=o(7901),r=o(71828),m=o(72597).resizeText,h=o(43467);function s(e,t,n,a){var i=t.data.data,c=!t.children,l=i.i,u=r.castOption(n,l,"marker.line.color")||k.defaultLine,f=r.castOption(n,l,"marker.line.width")||0;e.call(h,t,n,a).style("stroke-width",f).call(k.stroke,u).style("opacity",c?n.leaf.opacity:null)}W.exports={style:function(e){var t=e._fullLayout._sunburstlayer.selectAll(".trace");m(e,t,"sunburst"),t.each(function(n){var a=T.select(this),i=n[0].trace;a.style("opacity",i.opacity),a.selectAll("path.surface").each(function(c){T.select(this).call(s,c,i,e)})})},styleOne:s}},54532:function(W,I,o){var T=o(7901),k=o(50693),r=o(12663).axisHoverFormat,m=o(5386).fF,h=o(9012),s=o(1426).extendFlat,e=o(30962).overrideAll;function t(a){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:T.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:T.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var n=W.exports=e(s({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m(),xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:s({},k.zauto,{}),zmin:s({},k.zmin,{}),zmax:s({},k.zmax,{})},hoverinfo:s({},h.hoverinfo),showlegend:s({},h.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType="calc+clearAxisTypes",n.transforms=void 0},18396:function(W,I,o){var T=o(78803);W.exports=function(k,r){r.surfacecolor?T(k,r,{vals:r.surfacecolor,containerStr:"",cLetter:"c"}):T(k,r,{vals:r.z,containerStr:"",cLetter:"c"})}},43768:function(W,I,o){var T=o(9330).gl_surface3d,k=o(9330).ndarray,r=o(9330).ndarray_linear_interpolate.d2,m=o(824),h=o(43907),s=o(71828).isArrayOrTypedArray,e=o(81697).parseColorScale,t=o(78614),n=o(21081).extractOpts;function a(_,g,A){this.scene=_,this.uid=A,this.surface=g,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var i=a.prototype;i.getXat=function(_,g,A,M){var L=s(this.data.x)?s(this.data.x[0])?this.data.x[g][_]:this.data.x[_]:_;return A===void 0?L:M.d2l(L,0,A)},i.getYat=function(_,g,A,M){var L=s(this.data.y)?s(this.data.y[0])?this.data.y[g][_]:this.data.y[g]:g;return A===void 0?L:M.d2l(L,0,A)},i.getZat=function(_,g,A,M){var L=this.data.z[g][_];return L===null&&this.data.connectgaps&&this.data._interpolatedZ&&(L=this.data._interpolatedZ[g][_]),A===void 0?L:M.d2l(L,0,A)},i.handlePick=function(_){if(_.object===this.surface){var g=(_.data.index[0]-1)/this.dataScaleX-1,A=(_.data.index[1]-1)/this.dataScaleY-1,M=Math.max(Math.min(Math.round(g),this.data.z[0].length-1),0),L=Math.max(Math.min(Math.round(A),this.data._ylength-1),0);_.index=[M,L],_.traceCoordinate=[this.getXat(M,L),this.getYat(M,L),this.getZat(M,L)],_.dataCoordinate=[this.getXat(M,L,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(M,L,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(M,L,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var E=0;E<3;E++)_.dataCoordinate[E]!=null&&(_.dataCoordinate[E]*=this.scene.dataScale[E]);var S=this.data.hovertext||this.data.text;return Array.isArray(S)&&S[L]&&S[L][M]!==void 0?_.textLabel=S[L][M]:_.textLabel=S||"",_.data.dataCoordinate=_.dataCoordinate.slice(),this.surface.highlight(_.data),this.scene.glplot.spikes.position=_.dataCoordinate,!0}};var c=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(_,g){if(_<g)return 0;for(var A=0;Math.floor(_%g)===0;)_/=g,A++;return A}function u(_){for(var g=[],A=0;A<c.length;A++){var M=c[A];g.push(l(_,M))}return g}function f(_){for(var g=u(_),A=_,M=0;M<c.length;M++)if(g[M]>0){A=c[M];break}return A}function d(_,g){if(!(_<1||g<1)){for(var A=u(_),M=u(g),L=1,E=0;E<c.length;E++)L*=Math.pow(c[E],Math.max(A[E],M[E]));return L}}i.calcXnums=function(_){var g,A=[];for(g=1;g<_;g++){var M=this.getXat(g-1,0),L=this.getXat(g,0);A[g-1]=L!==M&&M!=null&&L!=null?Math.abs(L-M):0}var E=0;for(g=1;g<_;g++)E+=A[g-1];for(g=1;g<_;g++)A[g-1]===0?A[g-1]=1:A[g-1]=Math.round(E/A[g-1]);return A},i.calcYnums=function(_){var g,A=[];for(g=1;g<_;g++){var M=this.getYat(0,g-1),L=this.getYat(0,g);A[g-1]=L!==M&&M!=null&&L!=null?Math.abs(L-M):0}var E=0;for(g=1;g<_;g++)E+=A[g-1];for(g=1;g<_;g++)A[g-1]===0?A[g-1]=1:A[g-1]=Math.round(E/A[g-1]);return A};var w=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],v=w[9],p=w[13];function y(_,g,A){var M=A[8]+A[2]*g[0]+A[5]*g[1];return _[0]=(A[6]+A[0]*g[0]+A[3]*g[1])/M,_[1]=(A[7]+A[1]*g[0]+A[4]*g[1])/M,_}function b(_,g,A){return function(M,L,E,S){for(var O=[0,0],P=M.shape[0],U=M.shape[1],R=0;R<P;R++)for(var j=0;j<U;j++)E(O,[R,j],S),M.set(R,j,r(L,O[0],O[1]))}(_,g,y,A),_}function x(_,g){for(var A=!1,M=0;M<_.length;M++)if(g===_[M]){A=!0;break}A===!1&&_.push(g)}i.estimateScale=function(_,g){for(var A=1+function(L){if(L.length!==0){for(var E=1,S=0;S<L.length;S++)E=d(E,L[S]);return E}}(g===0?this.calcXnums(_):this.calcYnums(_));A<v;)A*=2;for(;A>p;)A--,A/=f(A),++A<v&&(A=p);var M=Math.round(A/_);return M>1?M:1},i.refineCoords=function(_){for(var g=this.dataScaleX,A=this.dataScaleY,M=_[0].shape[0],L=_[0].shape[1],E=0|Math.floor(_[0].shape[0]*g+1),S=0|Math.floor(_[0].shape[1]*A+1),O=1+M+1,P=1+L+1,U=k(new Float32Array(O*P),[O,P]),R=[1/g,0,0,0,1/A,0,0,0,1],j=0;j<_.length;++j){this.surface.padField(U,_[j]);var B=k(new Float32Array(E*S),[E,S]);b(B,U,R),_[j]=B}},i.setContourLevels=function(){var _,g,A,M=[[],[],[]],L=[!1,!1,!1],E=!1;for(_=0;_<3;++_)if(this.showContour[_]&&(E=!0,this.contourSize[_]>0&&this.contourStart[_]!==null&&this.contourEnd[_]!==null&&this.contourEnd[_]>this.contourStart[_]))for(L[_]=!0,g=this.contourStart[_];g<this.contourEnd[_];g+=this.contourSize[_])A=g*this.scene.dataScale[_],x(M[_],A);if(E){var S=[[],[],[]];for(_=0;_<3;++_)this.showContour[_]&&(S[_]=L[_]?M[_]:this.scene.contourLevels[_]);this.surface.update({levels:S})}},i.update=function(_){var g,A,M,L,E=this.scene,S=E.fullSceneLayout,O=this.surface,P=e(_),U=E.dataScale,R=_.z[0].length,j=_._ylength,B=E.contourLevels;this.data=_;var z=[];for(g=0;g<3;g++)for(z[g]=[],A=0;A<R;A++)z[g][A]=[];for(A=0;A<R;A++)for(M=0;M<j;M++)z[0][A][M]=this.getXat(A,M,_.xcalendar,S.xaxis),z[1][A][M]=this.getYat(A,M,_.ycalendar,S.yaxis),z[2][A][M]=this.getZat(A,M,_.zcalendar,S.zaxis);if(_.connectgaps)for(_._emptypoints=h(z[2]),m(z[2],_._emptypoints),_._interpolatedZ=[],A=0;A<R;A++)for(_._interpolatedZ[A]=[],M=0;M<j;M++)_._interpolatedZ[A][M]=z[2][A][M];for(g=0;g<3;g++)for(A=0;A<R;A++)for(M=0;M<j;M++)(L=z[g][A][M])==null?z[g][A][M]=NaN:L=z[g][A][M]*=U[g];for(g=0;g<3;g++)for(A=0;A<R;A++)for(M=0;M<j;M++)(L=z[g][A][M])!=null&&(this.minValues[g]>L&&(this.minValues[g]=L),this.maxValues[g]<L&&(this.maxValues[g]=L));for(g=0;g<3;g++)this.objectOffset[g]=.5*(this.minValues[g]+this.maxValues[g]);for(g=0;g<3;g++)for(A=0;A<R;A++)for(M=0;M<j;M++)(L=z[g][A][M])!=null&&(z[g][A][M]-=this.objectOffset[g]);var G=[k(new Float32Array(R*j),[R,j]),k(new Float32Array(R*j),[R,j]),k(new Float32Array(R*j),[R,j])];for(g=0;g<3;g++)for(A=0;A<R;A++)for(M=0;M<j;M++)G[g].set(A,M,z[g][A][M]);z=[];var V={colormap:P,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!_.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:_.opacityscale,opacity:_.opacity},et=n(_);if(V.intensityBounds=[et.min,et.max],_.surfacecolor){var J=k(new Float32Array(R*j),[R,j]);for(A=0;A<R;A++)for(M=0;M<j;M++)J.set(A,M,_.surfacecolor[M][A]);G.push(J)}else V.intensityBounds[0]*=U[2],V.intensityBounds[1]*=U[2];(p<G[0].shape[0]||p<G[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(G[0].shape[0],0),this.dataScaleY=this.estimateScale(G[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(G)),_.surfacecolor&&(V.intensity=G.pop());var X=[!0,!0,!0],Y=["x","y","z"];for(g=0;g<3;++g){var Z=_.contours[Y[g]];X[g]=Z.highlight,V.showContour[g]=Z.show||Z.highlight,V.showContour[g]&&(V.contourProject[g]=[Z.project.x,Z.project.y,Z.project.z],Z.show?(this.showContour[g]=!0,V.levels[g]=B[g],O.highlightColor[g]=V.contourColor[g]=t(Z.color),Z.usecolormap?O.highlightTint[g]=V.contourTint[g]=0:O.highlightTint[g]=V.contourTint[g]=1,V.contourWidth[g]=Z.width,this.contourStart[g]=Z.start,this.contourEnd[g]=Z.end,this.contourSize[g]=Z.size):(this.showContour[g]=!1,this.contourStart[g]=null,this.contourEnd[g]=null,this.contourSize[g]=0),Z.highlight&&(V.dynamicColor[g]=t(Z.highlightcolor),V.dynamicWidth[g]=Z.highlightwidth))}(function(tt){var rt=tt[0].rgb,nt=tt[tt.length-1].rgb;return rt[0]===nt[0]&&rt[1]===nt[1]&&rt[2]===nt[2]&&rt[3]===nt[3]})(P)&&(V.vertexColor=!0),V.objectOffset=this.objectOffset,V.coords=G,O.update(V),O.visible=_.visible,O.enableDynamic=X,O.enableHighlight=X,O.snapToData=!0,"lighting"in _&&(O.ambientLight=_.lighting.ambient,O.diffuseLight=_.lighting.diffuse,O.specularLight=_.lighting.specular,O.roughness=_.lighting.roughness,O.fresnel=_.lighting.fresnel),"lightposition"in _&&(O.lightPosition=[_.lightposition.x,_.lightposition.y,_.lightposition.z])},i.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},W.exports=function(_,g){var A=_.glplot.gl,M=T({gl:A}),L=new a(_,M,g.uid);return M._trace=L,L.update(g),_.glplot.add(M),L}},91831:function(W,I,o){var T=o(73972),k=o(71828),r=o(1586),m=o(54532);function h(e,t,n,a){var i=a("opacityscale");i==="max"?t.opacityscale=[[0,.1],[1,1]]:i==="min"?t.opacityscale=[[0,1],[1,.1]]:i==="extremes"?t.opacityscale=function(c,l){for(var u=[],f=0;f<32;f++){var d=f/31,w=.1+.9*(1-Math.pow(Math.sin(1*d*Math.PI),2));u.push([d,Math.max(0,Math.min(1,w))])}return u}():function(c){var l=0;if(!Array.isArray(c)||c.length<2||!c[0]||!c[c.length-1]||+c[0][0]!=0||+c[c.length-1][0]!=1)return!1;for(var u=0;u<c.length;u++){var f=c[u];if(f.length!==2||+f[0]<l)return!1;l=+f[0]}return!0}(i)||(t.opacityscale=void 0)}function s(e,t,n){t in e&&!(n in e)&&(e[n]=e[t])}W.exports={supplyDefaults:function(e,t,n,a){var i,c;function l(x,_){return k.coerce(e,t,m,x,_)}var u=l("x"),f=l("y"),d=l("z");if(!d||!d.length||u&&u.length<1||f&&f.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&k.isArrayOrTypedArray(u[0])?d.length:d[0].length,t._ylength=d.length,T.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],a),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(x){l(x)});var w=l("surfacecolor"),v=["x","y","z"];for(i=0;i<3;++i){var p="contours."+v[i],y=l(p+".show"),b=l(p+".highlight");if(y||b)for(c=0;c<3;++c)l(p+".project."+v[c]);y&&(l(p+".color"),l(p+".width"),l(p+".usecolormap")),b&&(l(p+".highlightcolor"),l(p+".highlightwidth")),l(p+".start"),l(p+".end"),l(p+".size")}w||(s(e,"zmin","cmin"),s(e,"zmax","cmax"),s(e,"zauto","cauto")),r(e,t,a,l,{prefix:"",cLetter:"c"}),h(0,t,0,l),t._length=null}},opacityscaleDefaults:h}},93601:function(W,I,o){W.exports={attributes:o(54532),supplyDefaults:o(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:o(18396),plot:o(43768),moduleType:"trace",name:"surface",basePlotModule:o(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(W,I,o){var T=o(50215),k=o(1426).extendFlat,r=o(30962).overrideAll,m=o(41940),h=o(27670).Y,s=o(12663).descriptionOnlyNumbers;(W.exports=r({domain:h({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:s("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},T.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},m({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:s("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},T.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},m({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(W,I,o){var T=o(27659).a0,k=o(36736),r="table";I.name=r,I.plot=function(m){var h=T(m.calcdata,r)[0];h.length&&k(m,h)},I.clean=function(m,h,s,e){var t=e._has&&e._has(r),n=h._has&&h._has(r);t&&!n&&e._paperdiv.selectAll(".table").remove()}},76333:function(W,I,o){var T=o(28984).wrap;W.exports=function(){return T({})}},49850:function(W){W.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(W,I,o){var T=o(49850),k=o(1426).extendFlat,r=o(92770);function m(i){if(Array.isArray(i)){for(var c=0,l=0;l<i.length;l++)c=Math.max(c,m(i[l]));return c}return i}function h(i,c){return i+c}function s(i){var c,l=i.slice(),u=1/0,f=0;for(c=0;c<l.length;c++)Array.isArray(l[c])||(l[c]=[l[c]]),u=Math.min(u,l[c].length),f=Math.max(f,l[c].length);if(u!==f)for(c=0;c<l.length;c++){var d=f-l[c].length;d&&(l[c]=l[c].concat(e(d)))}return l}function e(i){for(var c=new Array(i),l=0;l<i;l++)c[l]="";return c}function t(i){return i.calcdata.columns.reduce(function(c,l){return l.xIndex<i.xIndex?c+l.columnWidth:c},0)}function n(i,c){return Object.keys(i).map(function(l){return k({},i[l],{auxiliaryBlocks:c})})}function a(i,c){for(var l,u={},f=0,d=0,w={firstRowIndex:null,lastRowIndex:null,rows:[]},v=0,p=0,y=0;y<i.length;y++)l=i[y],w.rows.push({rowIndex:y,rowHeight:l}),((d+=l)>=c||y===i.length-1)&&(u[f]=w,w.key=p++,w.firstRowIndex=v,w.lastRowIndex=y,w={firstRowIndex:null,lastRowIndex:null,rows:[]},f+=d,v=y+1,d=0);return u}W.exports=function(i,c){var l=s(c.cells.values),u=function(U){return U.slice(c.header.values.length,U.length)},f=s(c.header.values);f.length&&!f[0].length&&(f[0]=[""],f=s(f));var d=f.concat(u(l).map(function(){return e((f[0]||[""]).length)})),w=c.domain,v=Math.floor(i._fullLayout._size.w*(w.x[1]-w.x[0])),p=Math.floor(i._fullLayout._size.h*(w.y[1]-w.y[0])),y=c.header.values.length?d[0].map(function(){return c.header.height}):[T.emptyHeaderHeight],b=l.length?l[0].map(function(){return c.cells.height}):[],x=y.reduce(h,0),_=a(b,p-x+T.uplift),g=n(a(y,x),[]),A=n(_,g),M={},L=c._fullInput.columnorder.concat(u(l.map(function(U,R){return R}))),E=d.map(function(U,R){var j=Array.isArray(c.columnwidth)?c.columnwidth[Math.min(R,c.columnwidth.length-1)]:c.columnwidth;return r(j)?Number(j):1}),S=E.reduce(h,0);E=E.map(function(U){return U/S*v});var O=Math.max(m(c.header.line.width),m(c.cells.line.width)),P={key:c.uid+i._context.staticPlot,translateX:w.x[0]*i._fullLayout._size.w,translateY:i._fullLayout._size.h*(1-w.y[1]),size:i._fullLayout._size,width:v,maxLineWidth:O,height:p,columnOrder:L,groupHeight:p,rowBlocks:A,headerRowBlocks:g,scrollY:0,cells:k({},c.cells,{values:l}),headerCells:k({},c.header,{values:d}),gdColumns:d.map(function(U){return U[0]}),gdColumnsOriginalOrder:d.map(function(U){return U[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:d.map(function(U,R){var j=M[U];return M[U]=(j||0)+1,{key:U+"__"+M[U],label:U,specIndex:R,xIndex:L[R],xScale:t,x:void 0,calcdata:void 0,columnWidth:E[R]}})};return P.columns.forEach(function(U){U.calcdata=P,U.x=t(U)}),P}},56269:function(W,I,o){var T=o(1426).extendFlat;I.splitToPanels=function(k){var r=[0,0],m=T({},k,{key:"header",type:"header",page:0,prevPages:r,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:T({},k.calcdata,{cells:k.calcdata.headerCells})});return[T({},k,{key:"cells1",type:"cells",page:0,prevPages:r,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T({},k,{key:"cells2",type:"cells",page:1,prevPages:r,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),m]},I.splitToCells=function(k){var r=function(m){var h=m.rowBlocks[m.page],s=h?h.rows[0].rowIndex:0;return[s,h?s+h.rows.length:0]}(k);return(k.values||[]).slice(r[0],r[1]).map(function(m,h){return{keyWithinBlock:h+(typeof m=="string"&&m.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:r[0]+h,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:m}})}},39754:function(W,I,o){var T=o(71828),k=o(44464),r=o(27670).c;W.exports=function(m,h,s,e){function t(n,a){return T.coerce(m,h,k,n,a)}r(h,e,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),T.coerceFont(t,"header.font",T.extendFlat({},e.font)),function(n,a){for(var i=n.columnorder||[],c=n.header.values.length,l=i.slice(0,c),u=l.slice().sort(function(w,v){return w-v}),f=l.map(function(w){return u.indexOf(w)}),d=f.length;d<c;d++)f.push(d);a("columnorder",f)}(h,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),T.coerceFont(t,"cells.font",T.extendFlat({},e.font)),h._length=null}},96595:function(W,I,o){W.exports={attributes:o(44464),supplyDefaults:o(39754),calc:o(76333),plot:o(36736),moduleType:"trace",name:"table",basePlotModule:o(99469),categories:["noOpacity"],meta:{}}},36736:function(W,I,o){var T=o(49850),k=o(39898),r=o(71828).numberFormat,m=o(28984),h=o(91424),s=o(63893),e=o(71828).raiseToTop,t=o(71828).strTranslate,n=o(71828).cancelTransition,a=o(51018),i=o(56269),c=o(7901);function l(G){return Math.ceil(G.calcdata.maxLineWidth/2)}function u(G,V){return"clip"+G._fullLayout._uid+"_scrollAreaBottomClip_"+V.key}function f(G,V){return"clip"+G._fullLayout._uid+"_columnBoundaryClippath_"+V.calcdata.key+"_"+V.specIndex}function d(G){return[].concat.apply([],G.map(function(V){return V})).map(function(V){return V.__data__})}function w(G,V,et){var J=G.selectAll("."+T.cn.scrollbarKit).data(m.repeat,m.keyFun);J.enter().append("g").classed(T.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),J.each(function(rt){var nt=rt.scrollbarState;nt.totalHeight=function(ot){var ct=ot.rowBlocks;return R(ct,ct.length-1)+(ct.length?j(ct[ct.length-1],1/0):1)}(rt),nt.scrollableAreaHeight=rt.groupHeight-A(rt),nt.currentlyVisibleHeight=Math.min(nt.totalHeight,nt.scrollableAreaHeight),nt.ratio=nt.currentlyVisibleHeight/nt.totalHeight,nt.barLength=Math.max(nt.ratio*nt.currentlyVisibleHeight,T.goldenRatio*T.scrollbarWidth),nt.barWiggleRoom=nt.currentlyVisibleHeight-nt.barLength,nt.wiggleRoom=Math.max(0,nt.totalHeight-nt.scrollableAreaHeight),nt.topY=nt.barWiggleRoom===0?0:rt.scrollY/nt.wiggleRoom*nt.barWiggleRoom,nt.bottomY=nt.topY+nt.barLength,nt.dragMultiplier=nt.wiggleRoom/nt.barWiggleRoom}).attr("transform",function(rt){var nt=rt.width+T.scrollbarWidth/2+T.scrollbarOffset;return t(nt,A(rt))});var X=J.selectAll("."+T.cn.scrollbar).data(m.repeat,m.keyFun);X.enter().append("g").classed(T.cn.scrollbar,!0);var Y=X.selectAll("."+T.cn.scrollbarSlider).data(m.repeat,m.keyFun);Y.enter().append("g").classed(T.cn.scrollbarSlider,!0),Y.attr("transform",function(rt){return t(0,rt.scrollbarState.topY||0)});var Z=Y.selectAll("."+T.cn.scrollbarGlyph).data(m.repeat,m.keyFun);Z.enter().append("line").classed(T.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",T.scrollbarWidth).attr("stroke-linecap","round").attr("y1",T.scrollbarWidth/2),Z.attr("y2",function(rt){return rt.scrollbarState.barLength-T.scrollbarWidth/2}).attr("stroke-opacity",function(rt){return rt.columnDragInProgress||!rt.scrollbarState.barWiggleRoom||et?0:.4}),Z.transition().delay(0).duration(0),Z.transition().delay(T.scrollbarHideDelay).duration(T.scrollbarHideDuration).attr("stroke-opacity",0);var tt=X.selectAll("."+T.cn.scrollbarCaptureZone).data(m.repeat,m.keyFun);tt.enter().append("line").classed(T.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",T.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(rt){var nt=k.event.y,ot=this.getBoundingClientRect(),ct=rt.scrollbarState,pt=nt-ot.top,gt=k.scale.linear().domain([0,ct.scrollableAreaHeight]).range([0,ct.totalHeight]).clamp(!0);ct.topY<=pt&&pt<=ct.bottomY||L(V,G,null,gt(pt-ct.barLength/2))(rt)}).call(k.behavior.drag().origin(function(rt){return k.event.stopPropagation(),rt.scrollbarState.scrollbarScrollInProgress=!0,rt}).on("drag",L(V,G)).on("dragend",function(){})),tt.attr("y2",function(rt){return rt.scrollbarState.scrollableAreaHeight}),V._context.staticPlot&&(Z.remove(),tt.remove())}function v(G,V,et,J){var X=function(nt){var ot=nt.selectAll("."+T.cn.columnCells).data(m.repeat,m.keyFun);return ot.enter().append("g").classed(T.cn.columnCells,!0),ot.exit().remove(),ot}(et),Y=function(nt){var ot=nt.selectAll("."+T.cn.columnCell).data(i.splitToCells,function(ct){return ct.keyWithinBlock});return ot.enter().append("g").classed(T.cn.columnCell,!0),ot.exit().remove(),ot}(X);(function(nt){nt.each(function(ot,ct){var pt=ot.calcdata.cells.font,gt=ot.column.specIndex,kt={size:b(pt.size,gt,ct),color:b(pt.color,gt,ct),family:b(pt.family,gt,ct)};ot.rowNumber=ot.key,ot.align=b(ot.calcdata.cells.align,gt,ct),ot.cellBorderWidth=b(ot.calcdata.cells.line.width,gt,ct),ot.font=kt})})(Y);var Z=function(nt){var ot=nt.selectAll("."+T.cn.cellRect).data(m.repeat,function(ct){return ct.keyWithinBlock});return ot.enter().append("rect").classed(T.cn.cellRect,!0),ot}(Y);(function(nt){nt.attr("width",function(ot){return ot.column.columnWidth}).attr("stroke-width",function(ot){return ot.cellBorderWidth}).each(function(ot){var ct=k.select(this);c.stroke(ct,b(ot.calcdata.cells.line.color,ot.column.specIndex,ot.rowNumber)),c.fill(ct,b(ot.calcdata.cells.fill.color,ot.column.specIndex,ot.rowNumber))})})(Z);var tt=function(nt){var ot=nt.selectAll("."+T.cn.cellTextHolder).data(m.repeat,function(ct){return ct.keyWithinBlock});return ot.enter().append("g").classed(T.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ot}(Y),rt=function(nt){var ot=nt.selectAll("."+T.cn.cellText).data(m.repeat,function(ct){return ct.keyWithinBlock});return ot.enter().append("text").classed(T.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ot}(tt);(function(nt){nt.each(function(ot){h.font(k.select(this),ot.font)})})(rt),p(rt,V,J,G),U(Y)}function p(G,V,et,J){G.text(function(X){var Y=X.column.specIndex,Z=X.rowNumber,tt=X.value,rt=typeof tt=="string",nt=rt&&tt.match(/<br>/i),ot=!rt||nt;X.mayHaveMarkup=rt&&tt.match(/[<&>]/);var ct,pt=typeof(ct=tt)=="string"&&ct.match(T.latexCheck);X.latex=pt;var gt,kt,yt=pt?"":b(X.calcdata.cells.prefix,Y,Z)||"",mt=pt?"":b(X.calcdata.cells.suffix,Y,Z)||"",Ot=pt?null:b(X.calcdata.cells.format,Y,Z)||null,vt=yt+(Ot?r(Ot)(X.value):X.value)+mt;if(X.wrappingNeeded=!X.wrapped&&!ot&&!pt&&(gt=y(vt)),X.cellHeightMayIncrease=nt||pt||X.mayHaveMarkup||(gt===void 0?y(vt):gt),X.needsConvertToTspans=X.mayHaveMarkup||X.wrappingNeeded||X.latex,X.wrappingNeeded){var xt=(T.wrapSplitCharacter===" "?vt.replace(/<a href=/gi,"<a_href="):vt).split(T.wrapSplitCharacter),st=T.wrapSplitCharacter===" "?xt.map(function(at){return at.replace(/<a_href=/gi,"<a href=")}):xt;X.fragments=st.map(function(at){return{text:at,width:null}}),X.fragments.push({fragment:T.wrapSpacer,width:null}),kt=st.join(T.lineBreaker)+T.lineBreaker+T.wrapSpacer}else delete X.fragments,kt=vt;return kt}).attr("dy",function(X){return X.needsConvertToTspans?0:"0.75em"}).each(function(X){var Y=this,Z=k.select(Y),tt=X.wrappingNeeded?S:O;X.needsConvertToTspans?s.convertToTspans(Z,J,tt(et,Y,V,J,X)):k.select(Y.parentNode).attr("transform",function(rt){return t(P(rt),T.cellPad)}).attr("text-anchor",function(rt){return{left:"start",center:"middle",right:"end"}[rt.align]})})}function y(G){return G.indexOf(T.wrapSplitCharacter)!==-1}function b(G,V,et){if(Array.isArray(G)){var J=G[Math.min(V,G.length-1)];return Array.isArray(J)?J[Math.min(et,J.length-1)]:J}return G}function x(G,V,et){G.transition().ease(T.releaseTransitionEase).duration(T.releaseTransitionDuration).attr("transform",t(V.x,et))}function _(G){return G.type==="cells"}function g(G){return G.type==="header"}function A(G){return(G.rowBlocks.length?G.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(V,et){return V+j(et,1/0)},0)}function M(G,V,et){var J=d(V)[0];if(J!==void 0){var X=J.rowBlocks,Y=J.calcdata,Z=R(X,X.length),tt=J.calcdata.groupHeight-A(J),rt=Y.scrollY=Math.max(0,Math.min(Z-tt,Y.scrollY)),nt=function(ot,ct,pt){for(var gt=[],kt=0,yt=0;yt<ot.length;yt++){for(var mt=ot[yt],Ot=mt.rows,vt=0,xt=0;xt<Ot.length;xt++)vt+=Ot[xt].rowHeight;mt.allRowsHeight=vt,ct<kt+vt&&ct+pt>kt&&gt.push(yt),kt+=vt}return gt}(X,rt,tt);nt.length===1&&(nt[0]===X.length-1?nt.unshift(nt[0]-1):nt.push(nt[0]+1)),nt[0]%2&&nt.reverse(),V.each(function(ot,ct){ot.page=nt[ct],ot.scrollY=rt}),V.attr("transform",function(ot){var ct=R(ot.rowBlocks,ot.page)-ot.scrollY;return t(0,ct)}),G&&(E(G,et,V,nt,J.prevPages,J,0),E(G,et,V,nt,J.prevPages,J,1),w(et,G))}}function L(G,V,et,J){return function(X){var Y=X.calcdata?X.calcdata:X,Z=V.filter(function(ot){return Y.key===ot.key}),tt=et||Y.scrollbarState.dragMultiplier,rt=Y.scrollY;Y.scrollY=J===void 0?Y.scrollY+tt*k.event.dy:J;var nt=Z.selectAll("."+T.cn.yColumn).selectAll("."+T.cn.columnBlock).filter(_);return M(G,nt,Z),Y.scrollY===rt}}function E(G,V,et,J,X,Y,Z){J[Z]!==X[Z]&&(clearTimeout(Y.currentRepaint[Z]),Y.currentRepaint[Z]=setTimeout(function(){var tt=et.filter(function(rt,nt){return nt===Z&&J[nt]!==X[nt]});v(G,V,tt,et),X[Z]=J[Z]}))}function S(G,V,et,J){return function(){var X=k.select(V.parentNode);X.each(function(Y){var Z=Y.fragments;X.selectAll("tspan.line").each(function(kt,yt){Z[yt].width=this.getComputedTextLength()});var tt,rt,nt=Z[Z.length-1].width,ot=Z.slice(0,-1),ct=[],pt=0,gt=Y.column.columnWidth-2*T.cellPad;for(Y.value="";ot.length;)pt+(rt=(tt=ot.shift()).width+nt)>gt&&(Y.value+=ct.join(T.wrapSpacer)+T.lineBreaker,ct=[],pt=0),ct.push(tt.text),pt+=rt;pt&&(Y.value+=ct.join(T.wrapSpacer)),Y.wrapped=!0}),X.selectAll("tspan.line").remove(),p(X.select("."+T.cn.cellText),et,G,J),k.select(V.parentNode.parentNode).call(U)}}function O(G,V,et,J,X){return function(){if(!X.settledY){var Y=k.select(V.parentNode),Z=z(X),tt=X.key-Z.firstRowIndex,rt=Z.rows[tt].rowHeight,nt=X.cellHeightMayIncrease?V.parentNode.getBoundingClientRect().height+2*T.cellPad:rt,ot=Math.max(nt,rt);ot-Z.rows[tt].rowHeight&&(Z.rows[tt].rowHeight=ot,G.selectAll("."+T.cn.columnCell).call(U),M(null,G.filter(_),0),w(et,J,!0)),Y.attr("transform",function(){var ct=this,pt=ct.parentNode.getBoundingClientRect(),gt=k.select(ct.parentNode).select("."+T.cn.cellRect).node().getBoundingClientRect(),kt=ct.transform.baseVal.consolidate(),yt=gt.top-pt.top+(kt?kt.matrix.f:T.cellPad);return t(P(X,k.select(ct.parentNode).select("."+T.cn.cellTextHolder).node().getBoundingClientRect().width),yt)}),X.settledY=!0}}}function P(G,V){switch(G.align){case"left":default:return T.cellPad;case"right":return G.column.columnWidth-(V||0)-T.cellPad;case"center":return(G.column.columnWidth-(V||0))/2}}function U(G){G.attr("transform",function(V){var et=V.rowBlocks[0].auxiliaryBlocks.reduce(function(X,Y){return X+j(Y,1/0)},0),J=j(z(V),V.key);return t(0,J+et)}).selectAll("."+T.cn.cellRect).attr("height",function(V){return(et=z(V),J=V.key,et.rows[J-et.firstRowIndex]).rowHeight;var et,J})}function R(G,V){for(var et=0,J=V-1;J>=0;J--)et+=B(G[J]);return et}function j(G,V){for(var et=0,J=0;J<G.rows.length&&G.rows[J].rowIndex<V;J++)et+=G.rows[J].rowHeight;return et}function B(G){var V=G.allRowsHeight;if(V!==void 0)return V;for(var et=0,J=0;J<G.rows.length;J++)et+=G.rows[J].rowHeight;return G.allRowsHeight=et,et}function z(G){return G.rowBlocks[G.page]}W.exports=function(G,V){var et=!G._context.staticPlot,J=G._fullLayout._paper.selectAll("."+T.cn.table).data(V.map(function(mt){var Ot=m.unwrap(mt).trace;return a(G,Ot)}),m.keyFun);J.exit().remove(),J.enter().append("g").classed(T.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),J.attr("width",function(mt){return mt.width+mt.size.l+mt.size.r}).attr("height",function(mt){return mt.height+mt.size.t+mt.size.b}).attr("transform",function(mt){return t(mt.translateX,mt.translateY)});var X=J.selectAll("."+T.cn.tableControlView).data(m.repeat,m.keyFun),Y=X.enter().append("g").classed(T.cn.tableControlView,!0).style("box-sizing","content-box");if(et){var Z="onwheel"in document?"wheel":"mousewheel";Y.on("mousemove",function(mt){X.filter(function(Ot){return mt===Ot}).call(w,G)}).on(Z,function(mt){if(!mt.scrollbarState.wheeling){mt.scrollbarState.wheeling=!0;var Ot=mt.scrollY+k.event.deltaY;L(G,X,null,Ot)(mt)||(k.event.stopPropagation(),k.event.preventDefault()),mt.scrollbarState.wheeling=!1}}).call(w,G,!0)}X.attr("transform",function(mt){return t(mt.size.l,mt.size.t)});var tt=X.selectAll("."+T.cn.scrollBackground).data(m.repeat,m.keyFun);tt.enter().append("rect").classed(T.cn.scrollBackground,!0).attr("fill","none"),tt.attr("width",function(mt){return mt.width}).attr("height",function(mt){return mt.height}),X.each(function(mt){h.setClipUrl(k.select(this),u(G,mt),G)});var rt=X.selectAll("."+T.cn.yColumn).data(function(mt){return mt.columns},m.keyFun);rt.enter().append("g").classed(T.cn.yColumn,!0),rt.exit().remove(),rt.attr("transform",function(mt){return t(mt.x,0)}),et&&rt.call(k.behavior.drag().origin(function(mt){return x(k.select(this),mt,-T.uplift),e(this),mt.calcdata.columnDragInProgress=!0,w(X.filter(function(Ot){return mt.calcdata.key===Ot.key}),G),mt}).on("drag",function(mt){var Ot=k.select(this),vt=function(xt){return(mt===xt?k.event.x:xt.x)+xt.columnWidth/2};mt.x=Math.max(-T.overdrag,Math.min(mt.calcdata.width+T.overdrag-mt.columnWidth,k.event.x)),d(rt).filter(function(xt){return xt.calcdata.key===mt.calcdata.key}).sort(function(xt,st){return vt(xt)-vt(st)}).forEach(function(xt,st){xt.xIndex=st,xt.x=mt===xt?xt.x:xt.xScale(xt)}),rt.filter(function(xt){return mt!==xt}).transition().ease(T.transitionEase).duration(T.transitionDuration).attr("transform",function(xt){return t(xt.x,0)}),Ot.call(n).attr("transform",t(mt.x,-T.uplift))}).on("dragend",function(mt){var Ot=k.select(this),vt=mt.calcdata;mt.x=mt.xScale(mt),mt.calcdata.columnDragInProgress=!1,x(Ot,mt,0),function(xt,st,at){var ht=st.gdColumnsOriginalOrder;st.gdColumns.sort(function(Lt,Mt){return at[ht.indexOf(Lt)]-at[ht.indexOf(Mt)]}),st.columnorder=at,xt.emit("plotly_restyle")}(G,vt,vt.columns.map(function(xt){return xt.xIndex}))})),rt.each(function(mt){h.setClipUrl(k.select(this),f(G,mt),G)});var nt=rt.selectAll("."+T.cn.columnBlock).data(i.splitToPanels,m.keyFun);nt.enter().append("g").classed(T.cn.columnBlock,!0).attr("id",function(mt){return mt.key}),nt.style("cursor",function(mt){return mt.dragHandle?"ew-resize":mt.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ot=nt.filter(g),ct=nt.filter(_);et&&ct.call(k.behavior.drag().origin(function(mt){return k.event.stopPropagation(),mt}).on("drag",L(G,X,-1)).on("dragend",function(){})),v(G,X,ot,nt),v(G,X,ct,nt);var pt=X.selectAll("."+T.cn.scrollAreaClip).data(m.repeat,m.keyFun);pt.enter().append("clipPath").classed(T.cn.scrollAreaClip,!0).attr("id",function(mt){return u(G,mt)});var gt=pt.selectAll("."+T.cn.scrollAreaClipRect).data(m.repeat,m.keyFun);gt.enter().append("rect").classed(T.cn.scrollAreaClipRect,!0).attr("x",-T.overdrag).attr("y",-T.uplift).attr("fill","none"),gt.attr("width",function(mt){return mt.width+2*T.overdrag}).attr("height",function(mt){return mt.height+T.uplift}),rt.selectAll("."+T.cn.columnBoundary).data(m.repeat,m.keyFun).enter().append("g").classed(T.cn.columnBoundary,!0);var kt=rt.selectAll("."+T.cn.columnBoundaryClippath).data(m.repeat,m.keyFun);kt.enter().append("clipPath").classed(T.cn.columnBoundaryClippath,!0),kt.attr("id",function(mt){return f(G,mt)});var yt=kt.selectAll("."+T.cn.columnBoundaryRect).data(m.repeat,m.keyFun);yt.enter().append("rect").classed(T.cn.columnBoundaryRect,!0).attr("fill","none"),yt.attr("width",function(mt){return mt.columnWidth+2*l(mt)}).attr("height",function(mt){return mt.calcdata.height+2*l(mt)+T.uplift}).attr("x",function(mt){return-l(mt)}).attr("y",function(mt){return-l(mt)}),M(null,ct,X)}},45802:function(W,I,o){var T=o(5386).fF,k=o(5386).si,r=o(50693),m=o(27670).Y,h=o(34e3),s=o(57564),e=o(43473),t=o(1426).extendFlat,n=o(79952).u;W.exports={labels:s.labels,parents:s.parents,values:s.values,branchvalues:s.branchvalues,count:s.count,level:s.level,maxdepth:s.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:s.marker.colors,pattern:n,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:s.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},r("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},h.textfont,{}),editType:"calc"},text:h.text,textinfo:s.textinfo,texttemplate:k({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),hovertext:h.hovertext,hoverinfo:s.hoverinfo,hovertemplate:T({},{keys:e.eventDataKeys}),textfont:h.textfont,insidetextfont:h.insidetextfont,outsidetextfont:t({},h.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:h.sort,root:s.root,domain:m({name:"treemap",trace:!0,editType:"calc"})}},78018:function(W,I,o){var T=o(74875);I.name="treemap",I.plot=function(k,r,m,h){T.plotBasePlot(I.name,k,r,m,h)},I.clean=function(k,r,m,h){T.cleanBasePlot(I.name,k,r,m,h)}},65039:function(W,I,o){var T=o(52147);I.y=function(k,r){return T.calc(k,r)},I.T=function(k){return T._runCrossTraceCalc("treemap",k)}},43473:function(W){W.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(W,I,o){var T=o(71828),k=o(45802),r=o(7901),m=o(27670).c,h=o(90769).handleText,s=o(97313).TEXTPAD,e=o(37434).handleMarkerDefaults,t=o(21081),n=t.hasColorscale,a=t.handleDefaults;W.exports=function(i,c,l,u){function f(_,g){return T.coerce(i,c,k,_,g)}var d=f("labels"),w=f("parents");if(d&&d.length&&w&&w.length){var v=f("values");v&&v.length?f("branchvalues"):f("count"),f("level"),f("maxdepth"),f("tiling.packing")==="squarify"&&f("tiling.squarifyratio"),f("tiling.flip"),f("tiling.pad");var p=f("text");f("texttemplate"),c.texttemplate||f("textinfo",Array.isArray(p)?"text+label":"label"),f("hovertext"),f("hovertemplate");var y=f("pathbar.visible");h(i,c,u,f,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition");var b=c.textposition.indexOf("bottom")!==-1;e(i,c,u,f),(c._hasColorscale=n(i,"marker","colors")||(i.marker||{}).coloraxis)?a(i,c,u,f,{prefix:"marker.",cLetter:"c"}):f("marker.depthfade",!(c.marker.colors||[]).length);var x=2*c.textfont.size;f("marker.pad.t",b?x/4:x),f("marker.pad.l",x/4),f("marker.pad.r",x/4),f("marker.pad.b",b?x:x/4),f("marker.cornerradius"),c._hovered={marker:{line:{width:2,color:r.contrast(u.paper_bgcolor)}}},y&&(f("pathbar.thickness",c.pathbar.textfont.size+2*s),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),m(c,u,f),c._length=null}else c.visible=!1}},80694:function(W,I,o){var T=o(39898),k=o(2791),r=o(72597).clearMinTextSize,m=o(16688).resizeText,h=o(46650);W.exports=function(s,e,t,n,a){var i,c,l=a.type,u=a.drawDescendants,f=s._fullLayout,d=f["_"+l+"layer"],w=!t;r(l,f),(i=d.selectAll("g.trace."+l).data(e,function(v){return v[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),i.order(),!f.uniformtext.mode&&k.hasTransition(t)?(n&&(c=n()),T.transition().duration(t.duration).ease(t.easing).each("end",function(){c&&c()}).each("interrupt",function(){c&&c()}).each(function(){d.selectAll("g.trace").each(function(v){h(s,v,this,t,u)})})):(i.each(function(v){h(s,v,this,t,u)}),f.uniformtext.mode&&m(s,d.selectAll(".trace"),l)),w&&i.exit().remove()}},66209:function(W,I,o){var T=o(39898),k=o(71828),r=o(91424),m=o(63893),h=o(37210),s=o(96362).styleOne,e=o(43473),t=o(2791),n=o(83523),a=!0;W.exports=function(i,c,l,u,f){var d=f.barDifY,w=f.width,v=f.height,p=f.viewX,y=f.viewY,b=f.pathSlice,x=f.toMoveInsideSlice,_=f.strTransform,g=f.hasTransition,A=f.handleSlicesExit,M=f.makeUpdateSliceInterpolator,L=f.makeUpdateTextInterpolator,E={},S=i._context.staticPlot,O=i._fullLayout,P=c[0],U=P.trace,R=P.hierarchy,j=w/U._entryDepth,B=t.listPath(l.data,"id"),z=h(R.copy(),[w,v],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(z=z.filter(function(V){var et=B.indexOf(V.data.id);return et!==-1&&(V.x0=j*et,V.x1=j*(et+1),V.y0=d,V.y1=d+v,V.onPathbar=!0,!0)})).reverse(),(u=u.data(z,t.getPtId)).enter().append("g").classed("pathbar",!0),A(u,a,E,[w,v],b),u.order();var G=u;g&&(G=G.transition().each("end",function(){var V=T.select(this);t.setSliceCursor(V,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),G.each(function(V){V._x0=p(V.x0),V._x1=p(V.x1),V._y0=y(V.y0),V._y1=y(V.y1),V._hoverX=p(V.x1-Math.min(w,v)/2),V._hoverY=y(V.y1-v/2);var et=T.select(this),J=k.ensureSingle(et,"path","surface",function(tt){tt.style("pointer-events",S?"none":"all")});g?J.transition().attrTween("d",function(tt){var rt=M(tt,a,E,[w,v]);return function(nt){return b(rt(nt))}}):J.attr("d",b),et.call(n,l,i,c,{styleOne:s,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,transitionEasing:e.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:i._transitioning}),J.call(s,V,U,i,{hovered:!1}),V._text=(t.getPtLabel(V)||"").split("<br>").join(" ")||"";var X=k.ensureSingle(et,"g","slicetext"),Y=k.ensureSingle(X,"text","",function(tt){tt.attr("data-notex",1)}),Z=k.ensureUniformFontSize(i,t.determineTextFont(U,V,O.font,{onPathbar:!0}));Y.text(V._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(r.font,Z).call(m.convertToTspans,i),V.textBB=r.bBox(Y.node()),V.transform=x(V,{fontSize:Z.size,onPathbar:!0}),V.transform.fontSize=Z.size,g?Y.transition().attrTween("transform",function(tt){var rt=L(tt,a,E,[w,v]);return function(nt){return _(rt(nt))}}):Y.attr("transform",_(V))})}},52583:function(W,I,o){var T=o(39898),k=o(71828),r=o(91424),m=o(63893),h=o(37210),s=o(96362).styleOne,e=o(43473),t=o(2791),n=o(83523),a=o(24714).formatSliceLabel,i=!1;W.exports=function(c,l,u,f,d){var w=d.width,v=d.height,p=d.viewX,y=d.viewY,b=d.pathSlice,x=d.toMoveInsideSlice,_=d.strTransform,g=d.hasTransition,A=d.handleSlicesExit,M=d.makeUpdateSliceInterpolator,L=d.makeUpdateTextInterpolator,E=d.prevEntry,S=c._context.staticPlot,O=c._fullLayout,P=l[0].trace,U=P.textposition.indexOf("left")!==-1,R=P.textposition.indexOf("right")!==-1,j=P.textposition.indexOf("bottom")!==-1,B=!j&&!P.marker.pad.t||j&&!P.marker.pad.b,z=h(u,[w,v],{packing:P.tiling.packing,squarifyratio:P.tiling.squarifyratio,flipX:P.tiling.flip.indexOf("x")>-1,flipY:P.tiling.flip.indexOf("y")>-1,pad:{inner:P.tiling.pad,top:P.marker.pad.t,left:P.marker.pad.l,right:P.marker.pad.r,bottom:P.marker.pad.b}}).descendants(),G=1/0,V=-1/0;z.forEach(function(Z){var tt=Z.depth;tt>=P._maxDepth?(Z.x0=Z.x1=(Z.x0+Z.x1)/2,Z.y0=Z.y1=(Z.y0+Z.y1)/2):(G=Math.min(G,tt),V=Math.max(V,tt))}),f=f.data(z,t.getPtId),P._maxVisibleLayers=isFinite(V)?V-G+1:0,f.enter().append("g").classed("slice",!0),A(f,i,{},[w,v],b),f.order();var et=null;if(g&&E){var J=t.getPtId(E);f.each(function(Z){et===null&&t.getPtId(Z)===J&&(et={x0:Z.x0,x1:Z.x1,y0:Z.y0,y1:Z.y1})})}var X=function(){return et||{x0:0,x1:w,y0:0,y1:v}},Y=f;return g&&(Y=Y.transition().each("end",function(){var Z=T.select(this);t.setSliceCursor(Z,c,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Y.each(function(Z){var tt=t.isHeader(Z,P);Z._x0=p(Z.x0),Z._x1=p(Z.x1),Z._y0=y(Z.y0),Z._y1=y(Z.y1),Z._hoverX=p(Z.x1-P.marker.pad.r),Z._hoverY=y(j?Z.y1-P.marker.pad.b/2:Z.y0+P.marker.pad.t/2);var rt=T.select(this),nt=k.ensureSingle(rt,"path","surface",function(gt){gt.style("pointer-events",S?"none":"all")});g?nt.transition().attrTween("d",function(gt){var kt=M(gt,i,X(),[w,v]);return function(yt){return b(kt(yt))}}):nt.attr("d",b),rt.call(n,u,c,l,{styleOne:s,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,transitionEasing:e.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,c,{isTransitioning:c._transitioning}),nt.call(s,Z,P,c,{hovered:!1}),Z.x0===Z.x1||Z.y0===Z.y1?Z._text="":Z._text=tt?B?"":t.getPtLabel(Z)||"":a(Z,u,P,l,O)||"";var ot=k.ensureSingle(rt,"g","slicetext"),ct=k.ensureSingle(ot,"text","",function(gt){gt.attr("data-notex",1)}),pt=k.ensureUniformFontSize(c,t.determineTextFont(P,Z,O.font));ct.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":U||tt?"start":"middle").call(r.font,pt).call(m.convertToTspans,c),Z.textBB=r.bBox(ct.node()),Z.transform=x(Z,{fontSize:pt.size,isHeader:tt}),Z.transform.fontSize=pt.size,g?ct.transition().attrTween("transform",function(gt){var kt=L(gt,i,X(),[w,v]);return function(yt){return _(kt(yt))}}):ct.attr("transform",_(Z))}),et}},14102:function(W){W.exports=function I(o,T,k){var r;k.swapXY&&(r=o.x0,o.x0=o.y0,o.y0=r,r=o.x1,o.x1=o.y1,o.y1=r),k.flipX&&(r=o.x0,o.x0=T[0]-o.x1,o.x1=T[0]-r),k.flipY&&(r=o.y0,o.y0=T[1]-o.y1,o.y1=T[1]-r);var m=o.children;if(m)for(var h=0;h<m.length;h++)I(m[h],T,k)}},70954:function(W,I,o){W.exports={moduleType:"trace",name:"treemap",basePlotModule:o(78018),categories:[],animatable:!0,attributes:o(45802),layoutAttributes:o(55479),supplyDefaults:o(91174),supplyLayoutDefaults:o(77182),calc:o(65039).y,crossTraceCalc:o(65039).T,plot:o(5893),style:o(96362).style,colorbar:o(4898),meta:{}}},55479:function(W){W.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(W,I,o){var T=o(71828),k=o(55479);W.exports=function(r,m){function h(s,e){return T.coerce(r,m,k,s,e)}h("treemapcolorway",m.colorway),h("extendtreemapcolors")}},37210:function(W,I,o){var T=o(674),k=o(14102);W.exports=function(r,m,h){var s,e=h.flipX,t=h.flipY,n=h.packing==="dice-slice",a=h.pad[t?"bottom":"top"],i=h.pad[e?"right":"left"],c=h.pad[e?"left":"right"],l=h.pad[t?"top":"bottom"];n&&(s=i,i=a,a=s,s=c,c=l,l=s);var u=T.treemap().tile(function(f,d){switch(f){case"squarify":return T.treemapSquarify.ratio(d);case"binary":return T.treemapBinary;case"dice":return T.treemapDice;case"slice":return T.treemapSlice;default:return T.treemapSliceDice}}(h.packing,h.squarifyratio)).paddingInner(h.pad.inner).paddingLeft(i).paddingRight(c).paddingTop(a).paddingBottom(l).size(n?[m[1],m[0]]:m)(r);return(n||e||t)&&k(u,m,{swapXY:n,flipX:e,flipY:t}),u}},5893:function(W,I,o){var T=o(80694),k=o(52583);W.exports=function(r,m,h,s){return T(r,m,h,s,{type:"treemap",drawDescendants:k})}},46650:function(W,I,o){var T=o(39898),k=o(81684).sX,r=o(2791),m=o(71828),h=o(97313).TEXTPAD,s=o(17295).toMoveInsideBar,e=o(72597).recordMinTextSize,t=o(43473),n=o(66209);function a(i){return r.isHierarchyRoot(i)?"":r.getPtId(i)}W.exports=function(i,c,l,u,f){var d=i._fullLayout,w=c[0],v=w.trace,p=v.type==="icicle",y=w.hierarchy,b=r.findEntryWithLevel(y,v.level),x=T.select(l),_=x.selectAll("g.pathbar"),g=x.selectAll("g.slice");if(!b)return _.remove(),void g.remove();var A=r.isHierarchyRoot(b),M=!d.uniformtext.mode&&r.hasTransition(u),L=r.getMaxDepth(v),E=d._size,S=v.domain,O=E.w*(S.x[1]-S.x[0]),P=E.h*(S.y[1]-S.y[0]),U=O,R=v.pathbar.thickness,j=v.marker.line.width+t.gapWithPathbar,B=v.pathbar.visible?v.pathbar.side.indexOf("bottom")>-1?P+j:-(R+j):0,z={x0:U,x1:U,y0:B,y1:B+R},G=function(bt,It,zt){var Ft=v.tiling.pad,$t=function(Qt){return Qt-Ft<=It.x0},Wt=function(Qt){return Qt+Ft>=It.x1},Xt=function(Qt){return Qt-Ft<=It.y0},ae=function(Qt){return Qt+Ft>=It.y1};return bt.x0===It.x0&&bt.x1===It.x1&&bt.y0===It.y0&&bt.y1===It.y1?{x0:bt.x0,x1:bt.x1,y0:bt.y0,y1:bt.y1}:{x0:$t(bt.x0-Ft)?0:Wt(bt.x0-Ft)?zt[0]:bt.x0,x1:$t(bt.x1+Ft)?0:Wt(bt.x1+Ft)?zt[0]:bt.x1,y0:Xt(bt.y0-Ft)?0:ae(bt.y0-Ft)?zt[1]:bt.y0,y1:Xt(bt.y1+Ft)?0:ae(bt.y1+Ft)?zt[1]:bt.y1}},V=null,et={},J={},X=null,Y=function(bt,It){return It?et[a(bt)]:J[a(bt)]};w.hasMultipleRoots&&A&&L++,v._maxDepth=L,v._backgroundColor=d.paper_bgcolor,v._entryDepth=b.data.depth,v._atRootLevel=A;var Z=-O/2+E.l+E.w*(S.x[1]+S.x[0])/2,tt=-P/2+E.t+E.h*(1-(S.y[1]+S.y[0])/2),rt=function(bt){return Z+bt},nt=function(bt){return tt+bt},ot=nt(0),ct=rt(0),pt=function(bt){return ct+bt},gt=function(bt){return ot+bt};function kt(bt,It){return bt+","+It}var yt=pt(0),mt=function(bt){bt.x=Math.max(yt,bt.x)},Ot=v.pathbar.edgeshape,vt=v[p?"tiling":"marker"].pad,xt=function(bt){return v.textposition.indexOf(bt)!==-1},st=xt("top"),at=xt("left"),ht=xt("right"),Lt=xt("bottom"),Mt=function(bt,It){var zt=bt.x0,Ft=bt.x1,$t=bt.y0,Wt=bt.y1,Xt=bt.textBB,ae=st||It.isHeader&&!Lt?"start":Lt?"end":"middle",Qt=xt("right"),de=xt("left")||It.onPathbar?-1:Qt?1:0;if(It.isHeader){if((zt+=(p?vt:vt.l)-h)>=(Ft-=(p?vt:vt.r)-h)){var ye=(zt+Ft)/2;zt=ye,Ft=ye}var ve;Lt?$t<(ve=Wt-(p?vt:vt.b))&&ve<Wt&&($t=ve):$t<(ve=$t+(p?vt:vt.t))&&ve<Wt&&(Wt=ve)}var ie=s(zt,Ft,$t,Wt,Xt,{isHorizontal:!1,constrained:!0,angle:0,anchor:ae,leftToRight:de});return ie.fontSize=It.fontSize,ie.targetX=rt(ie.targetX),ie.targetY=nt(ie.targetY),isNaN(ie.targetX)||isNaN(ie.targetY)?{}:(zt!==Ft&&$t!==Wt&&e(v.type,ie,d),{scale:ie.scale,rotate:ie.rotate,textX:ie.textX,textY:ie.textY,anchorX:ie.anchorX,anchorY:ie.anchorY,targetX:ie.targetX,targetY:ie.targetY})},_t=function(bt,It){for(var zt,Ft=0,$t=bt;!zt&&Ft<L;)Ft++,($t=$t.parent)?zt=Y($t,It):Ft=L;return zt||{}},St=function(bt,It,zt,Ft,$t){var Wt,Xt=Y(bt,It);if(Xt)Wt=Xt;else if(It)Wt=z;else if(V)if(bt.parent){var ae=X||zt;ae&&!It?Wt=G(bt,ae,Ft):(Wt={},m.extendFlat(Wt,_t(bt,It)))}else Wt=m.extendFlat({},bt),p&&($t.orientation==="h"?$t.flipX?Wt.x0=bt.x1:Wt.x1=0:$t.flipY?Wt.y0=bt.y1:Wt.y1=0);else Wt={};return k(Wt,{x0:bt.x0,x1:bt.x1,y0:bt.y0,y1:bt.y1})},Dt=function(bt,It,zt,Ft){var $t=Y(bt,It),Wt={},Xt=function(Qt,de,ye,ve){if(de)return et[a(y)]||z;var ie=J[v.level]||ye;return function(se){return se.data.depth-b.data.depth<L}(Qt)?G(Qt,ie,ve):{}}(bt,It,zt,Ft);m.extendFlat(Wt,{transform:Mt({x0:Xt.x0,x1:Xt.x1,y0:Xt.y0,y1:Xt.y1,textBB:bt.textBB,_text:bt._text},{isHeader:r.isHeader(bt,v)})}),$t?Wt=$t:bt.parent&&m.extendFlat(Wt,_t(bt,It));var ae=bt.transform;return bt.x0!==bt.x1&&bt.y0!==bt.y1&&e(v.type,ae,d),k(Wt,{transform:{scale:ae.scale,rotate:ae.rotate,textX:ae.textX,textY:ae.textY,anchorX:ae.anchorX,anchorY:ae.anchorY,targetX:ae.targetX,targetY:ae.targetY}})},ut=function(bt,It,zt,Ft,$t){var Wt=Ft[0],Xt=Ft[1];M?bt.exit().transition().each(function(){var ae=T.select(this);ae.select("path.surface").transition().attrTween("d",function(Qt){var de=function(ye,ve,ie,se){var ke,Ae=Y(ye,ve);if(ve)ke=z;else{var Ie=Y(b,ve);ke=Ie?G(ye,Ie,se):{}}return k(Ae,ke)}(Qt,It,0,[Wt,Xt]);return function(ye){return $t(de(ye))}}),ae.select("g.slicetext").attr("opacity",0)}).remove():bt.exit().remove()},Tt=function(bt){var It=bt.transform;return bt.x0!==bt.x1&&bt.y0!==bt.y1&&e(v.type,It,d),m.getTextTransform({textX:It.textX,textY:It.textY,anchorX:It.anchorX,anchorY:It.anchorY,targetX:It.targetX,targetY:It.targetY,scale:It.scale,rotate:It.rotate})};M&&(_.each(function(bt){et[a(bt)]={x0:bt.x0,x1:bt.x1,y0:bt.y0,y1:bt.y1},bt.transform&&(et[a(bt)].transform={textX:bt.transform.textX,textY:bt.transform.textY,anchorX:bt.transform.anchorX,anchorY:bt.transform.anchorY,targetX:bt.transform.targetX,targetY:bt.transform.targetY,scale:bt.transform.scale,rotate:bt.transform.rotate})}),g.each(function(bt){J[a(bt)]={x0:bt.x0,x1:bt.x1,y0:bt.y0,y1:bt.y1},bt.transform&&(J[a(bt)].transform={textX:bt.transform.textX,textY:bt.transform.textY,anchorX:bt.transform.anchorX,anchorY:bt.transform.anchorY,targetX:bt.transform.targetX,targetY:bt.transform.targetY,scale:bt.transform.scale,rotate:bt.transform.rotate}),!V&&r.isEntry(bt)&&(V=bt)})),X=f(i,c,b,g,{width:O,height:P,viewX:rt,viewY:nt,pathSlice:function(bt){var It=rt(bt.x0),zt=rt(bt.x1),Ft=nt(bt.y0),$t=nt(bt.y1),Wt=zt-It,Xt=$t-Ft;if(!Wt||!Xt)return"";var ae=v.marker.cornerradius||0,Qt=Math.min(ae,Wt/2,Xt/2);Qt&&bt.data&&bt.data.data&&bt.data.data.label&&(st&&(Qt=Math.min(Qt,vt.t)),at&&(Qt=Math.min(Qt,vt.l)),ht&&(Qt=Math.min(Qt,vt.r)),Lt&&(Qt=Math.min(Qt,vt.b)));var de=function(ye,ve){return Qt?"a"+kt(Qt,Qt)+" 0 0 1 "+kt(ye,ve):""};return"M"+kt(It,Ft+Qt)+de(Qt,-Qt)+"L"+kt(zt-Qt,Ft)+de(Qt,Qt)+"L"+kt(zt,$t-Qt)+de(-Qt,Qt)+"L"+kt(It+Qt,$t)+de(-Qt,-Qt)+"Z"},toMoveInsideSlice:Mt,prevEntry:V,makeUpdateSliceInterpolator:St,makeUpdateTextInterpolator:Dt,handleSlicesExit:ut,hasTransition:M,strTransform:Tt}),v.pathbar.visible?n(i,c,b,_,{barDifY:B,width:U,height:R,viewX:pt,viewY:gt,pathSlice:function(bt){var It=pt(Math.max(Math.min(bt.x0,bt.x0),0)),zt=pt(Math.min(Math.max(bt.x1,bt.x1),U)),Ft=gt(bt.y0),$t=gt(bt.y1),Wt=R/2,Xt={},ae={};Xt.x=It,ae.x=zt,Xt.y=ae.y=(Ft+$t)/2;var Qt={x:It,y:Ft},de={x:zt,y:Ft},ye={x:zt,y:$t},ve={x:It,y:$t};return Ot===">"?(Qt.x-=Wt,de.x-=Wt,ye.x-=Wt,ve.x-=Wt):Ot==="/"?(ye.x-=Wt,ve.x-=Wt,Xt.x-=Wt/2,ae.x-=Wt/2):Ot==="\\"?(Qt.x-=Wt,de.x-=Wt,Xt.x-=Wt/2,ae.x-=Wt/2):Ot==="<"&&(Xt.x-=Wt,ae.x-=Wt),mt(Qt),mt(ve),mt(Xt),mt(de),mt(ye),mt(ae),"M"+kt(Qt.x,Qt.y)+"L"+kt(de.x,de.y)+"L"+kt(ae.x,ae.y)+"L"+kt(ye.x,ye.y)+"L"+kt(ve.x,ve.y)+"L"+kt(Xt.x,Xt.y)+"Z"},toMoveInsideSlice:Mt,makeUpdateSliceInterpolator:St,makeUpdateTextInterpolator:Dt,handleSlicesExit:ut,hasTransition:M,strTransform:Tt}):_.remove()}},96362:function(W,I,o){var T=o(39898),k=o(7901),r=o(71828),m=o(2791),h=o(72597).resizeText,s=o(43467);function e(t,n,a,i,c){var l,u,f=(c||{}).hovered,d=n.data.data,w=d.i,v=d.color,p=m.isHierarchyRoot(n),y=1;if(f)l=a._hovered.marker.line.color,u=a._hovered.marker.line.width;else if(p&&v===a.root.color)y=100,l="rgba(0,0,0,0)",u=0;else if(l=r.castOption(a,w,"marker.line.color")||k.defaultLine,u=r.castOption(a,w,"marker.line.width")||0,!a._hasColorscale&&!n.onPathbar){var b=a.marker.depthfade;if(b){var x,_=k.combine(k.addOpacity(a._backgroundColor,.75),v);if(b===!0){var g=m.getMaxDepth(a);x=isFinite(g)?m.isLeaf(n)?0:a._maxVisibleLayers-(n.data.depth-a._entryDepth):n.data.height+1}else x=n.data.depth-a._entryDepth,a._atRootLevel||x++;if(x>0)for(var A=0;A<x;A++){var M=.5*A/x;v=k.combine(k.addOpacity(_,M),v)}}}t.call(s,n,a,i,v).style("stroke-width",u).call(k.stroke,l).style("opacity",y)}W.exports={style:function(t){var n=t._fullLayout._treemaplayer.selectAll(".trace");h(t,n,"treemap"),n.each(function(a){var i=T.select(this),c=a[0].trace;i.style("opacity",c.opacity),i.selectAll("path.surface").each(function(l){T.select(this).call(e,l,c,t,{hovered:!1})})})},styleOne:e}},68875:function(W,I,o){var T=o(53522),k=o(1426).extendFlat,r=o(12663).axisHoverFormat;W.exports={y:T.y,x:T.x,x0:T.x0,y0:T.y0,xhoverformat:r("x"),yhoverformat:r("y"),name:k({},T.name,{}),orientation:k({},T.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:T.fillcolor,points:k({},T.boxpoints,{}),jitter:k({},T.jitter,{}),pointpos:k({},T.pointpos,{}),width:k({},T.width,{}),marker:T.marker,text:T.text,hovertext:T.hovertext,hovertemplate:T.hovertemplate,quartilemethod:T.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:T.selected,unselected:T.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(W,I,o){var T=o(71828),k=o(89298),r=o(48518),m=o(60168),h=o(50606).BADNUM;function s(t,n,a){var i=n.max-n.min;if(!i)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,i/1e4);var c=a.length,l=T.stdev(a,c-1,n.mean);return Math.max(function(u,f,d){return 1.059*Math.min(f,d/1.349)*Math.pow(u,-.2)}(c,l,n.q3-n.q1),i/100)}function e(t,n,a,i){var c,l=t.spanmode,u=t.span||[],f=[n.min,n.max],d=[n.min-2*i,n.max+2*i];function w(p){var y=u[p],b=a.type==="multicategory"?a.r2c(y):a.d2c(y,0,t[n.valLetter+"calendar"]);return b===h?d[p]:b}var v={type:"linear",range:c=l==="soft"?d:l==="hard"?f:[w(0),w(1)]};return k.setConvert(v),v.cleanRange(),c}W.exports=function(t,n){var a=r(t,n);if(a[0].t.empty)return a;for(var i=t._fullLayout,c=k.getFromId(t,n[n.orientation==="h"?"xaxis":"yaxis"]),l=1/0,u=-1/0,f=0,d=0,w=0;w<a.length;w++){var v=a[w],p=v.pts.map(m.extractVal),y=v.bandwidth=s(n,v,p),b=v.span=e(n,v,c,y);if(v.min===v.max&&y===0)b=v.span=[v.min,v.max],v.density=[{v:1,t:b[0]}],v.bandwidth=y,f=Math.max(f,1);else{var x=b[1]-b[0],_=Math.ceil(x/(y/3)),g=x/_;if(!isFinite(g)||!isFinite(_))return T.error("Something went wrong with computing the violin span"),a[0].t.empty=!0,a;var A=m.makeKDE(v,n,p);v.density=new Array(_);for(var M=0,L=b[0];L<b[1]+g/2;M++,L+=g){var E=A(L);v.density[M]={v:E,t:L},f=Math.max(f,E)}}d=Math.max(d,p.length),l=Math.min(l,b[0]),u=Math.max(u,b[1])}var S=k.findExtremes(c,[l,u],{padded:!0});if(n._extremes[c._id]=S,n.width)a[0].t.maxKDE=f;else{var O=i._violinScaleGroupStats,P=n.scalegroup,U=O[P];U?(U.maxKDE=Math.max(U.maxKDE,f),U.maxCount=Math.max(U.maxCount,d)):O[P]={maxKDE:f,maxCount:d}}return a[0].t.labels.kde=T._(t,"kde:"),a}},86403:function(W,I,o){var T=o(37188).setPositionOffset,k=["v","h"];W.exports=function(r,m){for(var h=r.calcdata,s=m.xaxis,e=m.yaxis,t=0;t<k.length;t++){for(var n=k[t],a=n==="h"?e:s,i=[],c=0;c<h.length;c++){var l=h[c],u=l[0].t,f=l[0].trace;f.visible!==!0||f.type!=="violin"||u.empty||f.orientation!==n||f.xaxis!==s._id||f.yaxis!==e._id||i.push(c)}T("violin",r,i,a)}}},15899:function(W,I,o){var T=o(71828),k=o(7901),r=o(36411),m=o(68875);W.exports=function(h,s,e,t){function n(x,_){return T.coerce(h,s,m,x,_)}function a(x,_){return T.coerce2(h,s,m,x,_)}if(r.handleSampleDefaults(h,s,n,t),s.visible!==!1){n("bandwidth"),n("side"),n("width")||(n("scalegroup",s.name),n("scalemode"));var i,c=n("span");Array.isArray(c)&&(i="manual"),n("spanmode",i);var l=n("line.color",(h.marker||{}).color||e),u=n("line.width"),f=n("fillcolor",k.addOpacity(s.line.color,.5));r.handlePointsDefaults(h,s,n,{prefix:""});var d=a("box.width"),w=a("box.fillcolor",f),v=a("box.line.color",l),p=a("box.line.width",u);n("box.visible",Boolean(d||w||v||p))||(s.box={visible:!1});var y=a("meanline.color",l),b=a("meanline.width",u);n("meanline.visible",Boolean(y||b))||(s.meanline={visible:!1}),n("quartilemethod")}}},60168:function(W,I,o){var T=o(71828),k=function(r){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*r*r)};I.makeKDE=function(r,m,h){var s=h.length,e=k,t=r.bandwidth,n=1/(s*t);return function(a){for(var i=0,c=0;c<s;c++)i+=e((a-h[c])/t);return n*i}},I.getPositionOnKdePath=function(r,m,h){var s,e;m.orientation==="h"?(s="y",e="x"):(s="x",e="y");var t=T.findPointOnPath(r.path,h,e,{pathLength:r.pathLength}),n=r.posCenterPx,a=t[s];return[a,m.side==="both"?2*n-a:n]},I.getKdeValue=function(r,m,h){var s=r.pts.map(I.extractVal);return I.makeKDE(r,m,s)(h)/r.posDensityScale},I.extractVal=function(r){return r.v}},57634:function(W,I,o){var T=o(7901),k=o(71828),r=o(89298),m=o(41868),h=o(60168);W.exports=function(s,e,t,n,a){a||(a={});var i,c,l=a.hoverLayer,u=s.cd,f=u[0].trace,d=f.hoveron,w=d.indexOf("violins")!==-1,v=d.indexOf("kde")!==-1,p=[];if(w||v){var y=m.hoverOnBoxes(s,e,t,n);if(v&&y.length>0){var b,x,_,g,A,M=s.xa,L=s.ya;f.orientation==="h"?(A=e,b="y",_=L,x="x",g=M):(A=t,b="x",_=M,x="y",g=L);var E=u[s.index];if(A>=E.span[0]&&A<=E.span[1]){var S=k.extendFlat({},s),O=g.c2p(A,!0),P=h.getKdeValue(E,f,A),U=h.getPositionOnKdePath(E,f,O),R=_._offset,j=_._length;S[b+"0"]=U[0],S[b+"1"]=U[1],S[x+"0"]=S[x+"1"]=O,S[x+"Label"]=x+": "+r.hoverLabelText(g,A,f[x+"hoverformat"])+", "+u[0].t.labels.kde+" "+P.toFixed(3);for(var B=0,z=0;z<y.length;z++)if(y[z].attr==="med"){B=z;break}S.spikeDistance=y[B].spikeDistance;var G=b+"Spike";S[G]=y[B][G],y[B].spikeDistance=void 0,y[B][G]=void 0,S.hovertemplate=!1,p.push(S),(c={})[b+"1"]=k.constrain(R+U[0],R,R+j),c[b+"2"]=k.constrain(R+U[1],R,R+j),c[x+"1"]=c[x+"2"]=g._offset+O}}w&&(p=p.concat(y))}d.indexOf("points")!==-1&&(i=m.hoverOnPoints(s,e,t));var V=l.selectAll(".violinline-"+f.uid).data(c?[0]:[]);return V.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5),V.exit().remove(),V.attr(c).call(T.stroke,s.color),n==="closest"?i?[i]:p:(i&&p.push(i),p)}},47462:function(W,I,o){W.exports={attributes:o(68875),layoutAttributes:o(9228),supplyDefaults:o(15899),crossTraceDefaults:o(36411).crossTraceDefaults,supplyLayoutDefaults:o(33598),calc:o(38603),crossTraceCalc:o(86403),plot:o(28443),style:o(31847),styleOnSelect:o(16296).styleOnSelect,hoverPoints:o(57634),selectPoints:o(24626),moduleType:"trace",name:"violin",basePlotModule:o(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(W,I,o){var T=o(40094),k=o(71828).extendFlat;W.exports={violinmode:k({},T.boxmode,{}),violingap:k({},T.boxgap,{}),violingroupgap:k({},T.boxgroupgap,{})}},33598:function(W,I,o){var T=o(71828),k=o(9228),r=o(4199);W.exports=function(m,h,s){r._supply(m,h,s,function(e,t){return T.coerce(m,h,k,e,t)},"violin")}},28443:function(W,I,o){var T=o(39898),k=o(71828),r=o(91424),m=o(86047),h=o(34621),s=o(60168);W.exports=function(e,t,n,a){var i=e._context.staticPlot,c=e._fullLayout,l=t.xaxis,u=t.yaxis;function f(d,w){var v=h(d,{xaxis:l,yaxis:u,trace:w,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return r.smoothopen(v[0],1)}k.makeTraceGroups(a,n,"trace violins").each(function(d){var w=T.select(this),v=d[0],p=v.t,y=v.trace;if(y.visible!==!0||p.empty)w.remove();else{var b=p.bPos,x=p.bdPos,_=t[p.valLetter+"axis"],g=t[p.posLetter+"axis"],A=y.side==="both",M=A||y.side==="positive",L=A||y.side==="negative",E=w.selectAll("path.violin").data(k.identity);E.enter().append("path").style("vector-effect",i?"none":"non-scaling-stroke").attr("class","violin"),E.exit().remove(),E.each(function(z){var G,V,et,J,X,Y,Z,tt,rt=T.select(this),nt=z.density,ot=nt.length,ct=g.c2l(z.pos+b,!0),pt=g.l2p(ct);if(y.width)G=p.maxKDE/x;else{var gt=c._violinScaleGroupStats[y.scalegroup];G=y.scalemode==="count"?gt.maxKDE/x*(gt.maxCount/z.pts.length):gt.maxKDE/x}if(M){for(Z=new Array(ot),X=0;X<ot;X++)(tt=Z[X]={})[p.posLetter]=ct+nt[X].v/G,tt[p.valLetter]=_.c2l(nt[X].t,!0);V=f(Z,y)}if(L){for(Z=new Array(ot),Y=0,X=ot-1;Y<ot;Y++,X--)(tt=Z[Y]={})[p.posLetter]=ct-nt[X].v/G,tt[p.valLetter]=_.c2l(nt[X].t,!0);et=f(Z,y)}if(A)J=V+"L"+et.substr(1)+"Z";else{var kt=[pt,_.c2p(nt[0].t)],yt=[pt,_.c2p(nt[ot-1].t)];y.orientation==="h"&&(kt.reverse(),yt.reverse()),J=M?"M"+kt+"L"+V.substr(1)+"L"+yt:"M"+yt+"L"+et.substr(1)+"L"+kt}rt.attr("d",J),z.posCenterPx=pt,z.posDensityScale=G*x,z.path=rt.node(),z.pathLength=z.path.getTotalLength()/(A?2:1)});var S,O,P,U=y.box,R=U.width,j=(U.line||{}).width;A?(S=x*R,O=0):M?(S=[0,x*R/2],O=j*{x:1,y:-1}[p.posLetter]):(S=[x*R/2,0],O=j*{x:-1,y:1}[p.posLetter]),m.plotBoxAndWhiskers(w,{pos:g,val:_},y,{bPos:b,bdPos:S,bPosPxOffset:O}),m.plotBoxMean(w,{pos:g,val:_},y,{bPos:b,bdPos:S,bPosPxOffset:O}),!y.box.visible&&y.meanline.visible&&(P=k.identity);var B=w.selectAll("path.meanline").data(P||[]);B.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",i?"none":"non-scaling-stroke"),B.exit().remove(),B.each(function(z){var G=_.c2p(z.mean,!0),V=s.getPositionOnKdePath(z,y,G);T.select(this).attr("d",y.orientation==="h"?"M"+G+","+V[0]+"V"+V[1]:"M"+V[0]+","+G+"H"+V[1])}),m.plotPoints(w,{x:l,y:u},y,p)}})}},31847:function(W,I,o){var T=o(39898),k=o(7901),r=o(16296).stylePoints;W.exports=function(m){var h=T.select(m).selectAll("g.trace.violins");h.style("opacity",function(s){return s[0].trace.opacity}),h.each(function(s){var e=s[0].trace,t=T.select(this),n=e.box||{},a=n.line||{},i=e.meanline||{},c=i.width;t.selectAll("path.violin").style("stroke-width",e.line.width+"px").call(k.stroke,e.line.color).call(k.fill,e.fillcolor),t.selectAll("path.box").style("stroke-width",a.width+"px").call(k.stroke,a.color).call(k.fill,n.fillcolor);var l={"stroke-width":c+"px","stroke-dasharray":2*c+"px,"+c+"px"};t.selectAll("path.mean").style(l).call(k.stroke,i.color),t.selectAll("path.meanline").style(l).call(k.stroke,i.color),r(t,e,m)})}},16336:function(W,I,o){var T=o(50693),k=o(16249),r=o(54532),m=o(9012),h=o(1426).extendFlat,s=o(30962).overrideAll,e=W.exports=s(h({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},T("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:r.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:h({},m.hoverinfo),showlegend:h({},m.showlegend,{dflt:!1})}),"calc","nested");e.x.editType=e.y.editType=e.z.editType=e.value.editType="calc+clearAxisTypes",e.transforms=void 0},64809:function(W,I,o){var T=o(9330).gl_mesh3d,k=o(81697).parseColorScale,r=o(78614),m=o(21081).extractOpts,h=o(90060),s=o(22674).findNearestOnAxis,e=o(22674).generateIsoMeshes;function t(a,i,c){this.scene=a,this.uid=c,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var n=t.prototype;n.handlePick=function(a){if(a.object===this.mesh){var i=a.data.index,c=this.data._meshX[i],l=this.data._meshY[i],u=this.data._meshZ[i],f=this.data._Ys.length,d=this.data._Zs.length,w=s(c,this.data._Xs).id,v=s(l,this.data._Ys).id,p=s(u,this.data._Zs).id,y=a.index=p+d*v+d*f*w;a.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&b[y]!==void 0?a.textLabel=b[y]:b&&(a.textLabel=b),!0}},n.update=function(a){var i=this.scene,c=i.fullSceneLayout;function l(d,w,v,p){return w.map(function(y){return d.d2l(y,0,p)*v})}this.data=e(a);var u={positions:h(l(c.xaxis,a._meshX,i.dataScale[0],a.xcalendar),l(c.yaxis,a._meshY,i.dataScale[1],a.ycalendar),l(c.zaxis,a._meshZ,i.dataScale[2],a.zcalendar)),cells:h(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,opacityscale:a.opacityscale,contourEnable:a.contour.show,contourColor:r(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},f=m(a);u.vertexIntensity=a._meshIntensity,u.vertexIntensityBounds=[f.min,f.max],u.colormap=k(a),this.mesh.update(u)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},W.exports=function(a,i){var c=a.glplot.gl,l=T({gl:c}),u=new t(a,l,i.uid);return l._trace=u,u.update(i),a.glplot.add(l),u}},47651:function(W,I,o){var T=o(71828),k=o(16336),r=o(82738).supplyIsoDefaults,m=o(91831).opacityscaleDefaults;W.exports=function(h,s,e,t){function n(a,i){return T.coerce(h,s,k,a,i)}r(h,s,e,t,n),m(h,s,t,n)}},17659:function(W,I,o){W.exports={attributes:o(16336),supplyDefaults:o(47651),calc:o(56959),colorbar:{min:"cmin",max:"cmax"},plot:o(64809),moduleType:"trace",name:"volume",basePlotModule:o(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(W,I,o){var T=o(1486),k=o(82196).line,r=o(9012),m=o(12663).axisHoverFormat,h=o(5386).fF,s=o(5386).si,e=o(48334),t=o(1426).extendFlat,n=o(7901);function a(i){return{marker:{color:t({},T.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},T.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},T.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}W.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),hovertext:T.hovertext,hovertemplate:h({},{keys:e.eventDataKeys}),hoverinfo:t({},r.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:e.eventDataKeys.concat(["label"])}),text:T.text,textposition:T.textposition,insidetextanchor:T.insidetextanchor,textangle:T.textangle,textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:T.outsidetextfont,constraintext:T.constraintext,cliponaxis:T.cliponaxis,orientation:T.orientation,offset:T.offset,width:T.width,increasing:a(),decreasing:a(),totals:a(),connector:{line:{color:t({},k.color,{dflt:n.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup}},52752:function(W,I,o){var T=o(89298),k=o(42973),r=o(71828).mergeArray,m=o(66279),h=o(50606).BADNUM;function s(t){return t==="a"||t==="absolute"}function e(t){return t==="t"||t==="total"}W.exports=function(t,n){var a,i,c,l,u,f,d=T.getFromId(t,n.xaxis||"x"),w=T.getFromId(t,n.yaxis||"y");n.orientation==="h"?(a=d.makeCalcdata(n,"x"),c=w.makeCalcdata(n,"y"),l=k(n,w,"y",c),u=!!n.yperiodalignment,f="y"):(a=w.makeCalcdata(n,"y"),c=d.makeCalcdata(n,"x"),l=k(n,d,"x",c),u=!!n.xperiodalignment,f="x"),i=l.vals;for(var v,p=Math.min(i.length,a.length),y=new Array(p),b=0,x=!1,_=0;_<p;_++){var g=a[_]||0,A=!1;(a[_]!==h||e(n.measure[_])||s(n.measure[_]))&&_+1<p&&(a[_+1]!==h||e(n.measure[_+1])||s(n.measure[_+1]))&&(A=!0);var M=y[_]={i:_,p:i[_],s:g,rawS:g,cNext:A};s(n.measure[_])?(b=M.s,M.isSum=!0,M.dir="totals",M.s=b):e(n.measure[_])?(M.isSum=!0,M.dir="totals",M.s=b):(M.isSum=!1,M.dir=M.rawS<0?"decreasing":"increasing",v=M.s,M.s=b+v,b+=v),M.dir==="totals"&&(x=!0),u&&(y[_].orig_p=c[_],y[_][f+"End"]=l.ends[_],y[_][f+"Start"]=l.starts[_]),n.ids&&(M.id=String(n.ids[_])),M.v=(n.base||0)+b}return y.length&&(y[0].hasTotals=x),r(n.text,y,"tx"),r(n.hovertext,y,"htx"),m(y,n),y}},48334:function(W){W.exports={eventDataKeys:["initial","delta","final"]}},70766:function(W,I,o){var T=o(11661).setGroupPositions;W.exports=function(k,r){var m,h,s=k._fullLayout,e=k._fullData,t=k.calcdata,n=r.xaxis,a=r.yaxis,i=[],c=[],l=[];for(h=0;h<e.length;h++){var u=e[h];u.visible===!0&&u.xaxis===n._id&&u.yaxis===a._id&&u.type==="waterfall"&&(m=t[h],u.orientation==="h"?l.push(m):c.push(m),i.push(m))}var f={mode:s.waterfallmode,norm:s.waterfallnorm,gap:s.waterfallgap,groupgap:s.waterfallgroupgap};for(T(k,n,a,c,f),T(k,a,n,l,f),h=0;h<i.length;h++){m=i[h];for(var d=0;d<m.length;d++){var w=m[d];w.isSum===!1&&(w.s0+=d===0?0:m[d-1].s),d+1<m.length&&(m[d].nextP0=m[d+1].p0,m[d].nextS0=m[d+1].s0)}}}},83266:function(W,I,o){var T=o(71828),k=o(26125),r=o(90769).handleText,m=o(67513),h=o(73927),s=o(43037),e=o(7901),t=o(22372),n=t.INCREASING.COLOR,a=t.DECREASING.COLOR;function i(c,l,u){c(l+".marker.color",u),c(l+".marker.line.color",e.defaultLine),c(l+".marker.line.width")}W.exports={supplyDefaults:function(c,l,u,f){function d(v,p){return T.coerce(c,l,s,v,p)}if(m(c,l,f,d)){h(c,l,f,d),d("xhoverformat"),d("yhoverformat"),d("measure"),d("orientation",l.x&&!l.y?"h":"v"),d("base"),d("offset"),d("width"),d("text"),d("hovertext"),d("hovertemplate");var w=d("textposition");r(c,l,f,d,w,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&(d("texttemplate"),l.texttemplate||d("textinfo")),i(d,"increasing",n),i(d,"decreasing",a),i(d,"totals","#4499FF"),d("connector.visible")&&(d("connector.mode"),d("connector.line.width")&&(d("connector.line.color"),d("connector.line.dash")))}else l.visible=!1},crossTraceDefaults:function(c,l){var u,f;function d(v){return T.coerce(f._input,f,s,v)}if(l.waterfallmode==="group")for(var w=0;w<c.length;w++)u=(f=c[w])._input,k(u,f,l,d)}}},58593:function(W){W.exports=function(I,o){return I.x="xVal"in o?o.xVal:o.x,I.y="yVal"in o?o.yVal:o.y,"initial"in o&&(I.initial=o.initial),"delta"in o&&(I.delta=o.delta),"final"in o&&(I.final=o.final),o.xa&&(I.xaxis=o.xa),o.ya&&(I.yaxis=o.ya),I}},61326:function(W,I,o){var T=o(89298).hoverLabelText,k=o(7901).opacity,r=o(95423).hoverOnBars,m=o(22372),h=m.INCREASING.SYMBOL,s=m.DECREASING.SYMBOL;W.exports=function(e,t,n,a,i){var c=r(e,t,n,a,i);if(c){var l=c.cd,u=l[0].trace,f=u.orientation==="h",d=f?"x":"y",w=f?e.xa:e.ya,v=l[c.index],p=v.isSum?v.b+v.s:v.rawS;c.initial=v.b+v.s-p,c.delta=p,c.final=c.initial+c.delta;var y=M(Math.abs(c.delta));c.deltaLabel=p<0?"("+y+")":y,c.finalLabel=M(c.final),c.initialLabel=M(c.initial);var b=v.hi||u.hoverinfo,x=[];if(b&&b!=="none"&&b!=="skip"){var _=b==="all",g=b.split("+"),A=function(L){return _||g.indexOf(L)!==-1};v.isSum||(!A("final")||A(f?"x":"y")||x.push(c.finalLabel),A("delta")&&(p<0?x.push(c.deltaLabel+" "+s):x.push(c.deltaLabel+" "+h)),A("initial")&&x.push("Initial: "+c.initialLabel))}return x.length&&(c.extraText=x.join("<br>")),c.color=function(L,E){var S=L[E.dir].marker,O=S.color,P=S.line.color,U=S.line.width;return k(O)?O:k(P)&&U?P:void 0}(u,v),[c]}function M(L){return T(w,L,u[d+"hoverformat"])}}},19990:function(W,I,o){W.exports={attributes:o(43037),layoutAttributes:o(13494),supplyDefaults:o(83266).supplyDefaults,crossTraceDefaults:o(83266).crossTraceDefaults,supplyLayoutDefaults:o(5176),calc:o(52752),crossTraceCalc:o(70766),plot:o(30436),style:o(55750).style,hoverPoints:o(61326),eventData:o(58593),selectPoints:o(81974),moduleType:"trace",name:"waterfall",basePlotModule:o(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(W){W.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(W,I,o){var T=o(71828),k=o(13494);W.exports=function(r,m,h){var s=!1;function e(a,i){return T.coerce(r,m,k,a,i)}for(var t=0;t<h.length;t++){var n=h[t];if(n.visible&&n.type==="waterfall"){s=!0;break}}s&&(e("waterfallmode"),e("waterfallgap",.2),e("waterfallgroupgap"))}},30436:function(W,I,o){var T=o(39898),k=o(71828),r=o(91424),m=o(50606).BADNUM,h=o(17295),s=o(72597).clearMinTextSize;W.exports=function(e,t,n,a){var i=e._fullLayout;s("waterfall",i),h.plot(e,t,n,a,{mode:i.waterfallmode,norm:i.waterfallmode,gap:i.waterfallgap,groupgap:i.waterfallgroupgap}),function(c,l,u,f){var d=l.xaxis,w=l.yaxis;k.makeTraceGroups(f,u,"trace bars").each(function(v){var p=T.select(this),y=v[0].trace,b=k.ensureSingle(p,"g","lines");if(y.connector&&y.connector.visible){var x=y.orientation==="h",_=y.connector.mode,g=b.selectAll("g.line").data(k.identity);g.enter().append("g").classed("line",!0),g.exit().remove();var A=g.size();g.each(function(M,L){if(L===A-1||M.cNext){var E=function(U,R,j,B){var z=[],G=[],V=B?R:j,et=B?j:R;return z[0]=V.c2p(U.s0,!0),G[0]=et.c2p(U.p0,!0),z[1]=V.c2p(U.s1,!0),G[1]=et.c2p(U.p1,!0),z[2]=V.c2p(U.nextS0,!0),G[2]=et.c2p(U.nextP0,!0),B?[z,G]:[G,z]}(M,d,w,x),S=E[0],O=E[1],P="";S[0]!==m&&O[0]!==m&&S[1]!==m&&O[1]!==m&&(_==="spanning"&&!M.isSum&&L>0&&(P+=x?"M"+S[0]+","+O[1]+"V"+O[0]:"M"+S[1]+","+O[0]+"H"+S[0]),_!=="between"&&(M.isSum||L<A-1)&&(P+=x?"M"+S[1]+","+O[0]+"V"+O[1]:"M"+S[0]+","+O[1]+"H"+S[1]),S[2]!==m&&O[2]!==m&&(P+=x?"M"+S[1]+","+O[1]+"V"+O[2]:"M"+S[1]+","+O[1]+"H"+S[2])),P===""&&(P="M0,0Z"),k.ensureSingle(T.select(this),"path").attr("d",P).call(r.setClipUrl,l.layerClipId,c)}})}else b.remove()})}(e,t,n,a)}},55750:function(W,I,o){var T=o(39898),k=o(91424),r=o(7901),m=o(37822).DESELECTDIM,h=o(16688),s=o(72597).resizeText,e=h.styleTextPoints;W.exports={style:function(t,n,a){var i=a||T.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");s(t,i,"waterfall"),i.style("opacity",function(c){return c[0].trace.opacity}),i.each(function(c){var l=T.select(this),u=c[0].trace;l.selectAll(".point > path").each(function(f){if(!f.isBlank){var d=u[f.dir].marker;T.select(this).call(r.fill,d.color).call(r.stroke,d.line.color).call(k.dashLine,d.line.dash,d.line.width).style("opacity",u.selectedpoints&&!f.selected?m:1)}}),e(l,u,t),l.selectAll(".lines").each(function(){var f=u.connector.line;k.lineGroupStyle(T.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},82887:function(W,I,o){var T=o(89298),k=o(71828),r=o(86281),m=o(79344).p,h=o(50606).BADNUM;I.moduleType="transform",I.name="aggregate";var s=I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},e=s.aggregations;function t(c,l,u,f){if(f.enabled){for(var d=f.target,w=k.nestedProperty(l,d),v=w.get(),p=function(x,_){var g=x.func,A=_.d2c,M=_.c2d;switch(g){case"count":return n;case"first":return a;case"last":return i;case"sum":return function(L,E){for(var S=0,O=0;O<E.length;O++){var P=A(L[E[O]]);P!==h&&(S+=P)}return M(S)};case"avg":return function(L,E){for(var S=0,O=0,P=0;P<E.length;P++){var U=A(L[E[P]]);U!==h&&(S+=U,O++)}return O?M(S/O):h};case"min":return function(L,E){for(var S=1/0,O=0;O<E.length;O++){var P=A(L[E[O]]);P!==h&&(S=Math.min(S,P))}return S===1/0?h:M(S)};case"max":return function(L,E){for(var S=-1/0,O=0;O<E.length;O++){var P=A(L[E[O]]);P!==h&&(S=Math.max(S,P))}return S===-1/0?h:M(S)};case"range":return function(L,E){for(var S=1/0,O=-1/0,P=0;P<E.length;P++){var U=A(L[E[P]]);U!==h&&(S=Math.min(S,U),O=Math.max(O,U))}return O===-1/0||S===1/0?h:M(O-S)};case"change":return function(L,E){var S=A(L[E[0]]),O=A(L[E[E.length-1]]);return S===h||O===h?h:M(O-S)};case"median":return function(L,E){for(var S=[],O=0;O<E.length;O++){var P=A(L[E[O]]);P!==h&&S.push(P)}if(!S.length)return h;S.sort(k.sorterAsc);var U=(S.length-1)/2;return M((S[Math.floor(U)]+S[Math.ceil(U)])/2)};case"mode":return function(L,E){for(var S={},O=0,P=h,U=0;U<E.length;U++){var R=A(L[E[U]]);if(R!==h){var j=S[R]=(S[R]||0)+1;j>O&&(O=j,P=R)}}return O?M(P):h};case"rms":return function(L,E){for(var S=0,O=0,P=0;P<E.length;P++){var U=A(L[E[P]]);U!==h&&(S+=U*U,O++)}return O?M(Math.sqrt(S/O)):h};case"stddev":return function(L,E){var S,O=0,P=0,U=1,R=h;for(S=0;S<E.length&&R===h;S++)R=A(L[E[S]]);if(R===h)return h;for(;S<E.length;S++){var j=A(L[E[S]]);if(j!==h){var B=j-R;O+=B,P+=B*B,U++}}var z=x.funcmode==="sample"?U-1:U;return z?Math.sqrt((P-O*O/U)/z):0}}}(f,T.getDataConversions(c,l,d,v)),y=new Array(u.length),b=0;b<u.length;b++)y[b]=p(v,u[b]);w.set(y),f.func==="count"&&k.pushUnique(l._arrayAttrs,d)}}function n(c,l){return l.length}function a(c,l){return c[l[0]]}function i(c,l){return c[l[l.length-1]]}I.supplyDefaults=function(c,l){var u,f={};function d(M,L){return k.coerce(c,f,s,M,L)}if(!d("enabled"))return f;var w=r.findArrayAttributes(l),v={};for(u=0;u<w.length;u++)v[w[u]]=1;var p=d("groups");if(!Array.isArray(p)){if(!v[p])return f.enabled=!1,f;v[p]=0}var y,b=c.aggregations||[],x=f.aggregations=new Array(b.length);function _(M,L){return k.coerce(b[u],y,e,M,L)}for(u=0;u<b.length;u++){y={_index:u};var g=_("target"),A=_("func");_("enabled")&&g&&(v[g]||A==="count"&&v[g]===void 0)?(A==="stddev"&&_("funcmode"),v[g]=0,x[u]=y):x[u]={enabled:!1,_index:u}}for(u=0;u<w.length;u++)v[w[u]]&&x.push({target:w[u],func:e.func.dflt,enabled:!0,_index:-1});return f},I.calcTransform=function(c,l,u){if(u.enabled){var f=u.groups,d=k.getTargetArray(l,{target:f});if(d){var w,v,p,y,b={},x={},_=[],g=m(l.transforms,u),A=d.length;for(l._length&&(A=Math.min(A,l._length)),w=0;w<A;w++)(p=b[v=d[w]])===void 0?(b[v]=_.length,y=[w],_.push(y),x[b[v]]=g(w)):(_[p].push(w),x[b[v]]=(x[b[v]]||[]).concat(g(w)));u._indexToPoints=x;var M=u.aggregations;for(w=0;w<M.length;w++)t(c,l,_,M[w]);typeof f=="string"&&t(c,l,_,{target:f,func:"first",enabled:!0}),l._length=_.length}}}},14382:function(W,I,o){var T=o(71828),k=o(73972),r=o(89298),m=o(79344).p,h=o(74808),s=h.COMPARISON_OPS,e=h.INTERVAL_OPS,t=h.SET_OPS;I.moduleType="transform",I.name="filter",I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(s).concat(e).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},I.supplyDefaults=function(n){var a={};function i(u,f){return T.coerce(n,a,I.attributes,u,f)}if(i("enabled")){var c=i("target");if(T.isArrayOrTypedArray(c)&&c.length===0)return a.enabled=!1,a;i("preservegaps"),i("operation"),i("value");var l=k.getComponentMethod("calendars","handleDefaults");l(n,a,"valuecalendar",null),l(n,a,"targetcalendar",null)}return a},I.calcTransform=function(n,a,i){if(i.enabled){var c=T.getTargetArray(a,i);if(c){var l=i.target,u=c.length;a._length&&(u=Math.min(u,a._length));var f=i.targetcalendar,d=a._arrayAttrs,w=i.preservegaps;if(typeof l=="string"){var v=T.nestedProperty(a,l+"calendar").get();v&&(f=v)}var p,y,b=function(E,S,O){var P=E.operation,U=E.value,R=Array.isArray(U);function j(V){return V.indexOf(P)!==-1}var B,z=function(V){return S(V,0,E.valuecalendar)},G=function(V){return S(V,0,O)};switch(j(s)?B=z(R?U[0]:U):j(e)?B=R?[z(U[0]),z(U[1])]:[z(U),z(U)]:j(t)&&(B=R?U.map(z):[z(U)]),P){case"=":return function(V){return G(V)===B};case"!=":return function(V){return G(V)!==B};case"<":return function(V){return G(V)<B};case"<=":return function(V){return G(V)<=B};case">":return function(V){return G(V)>B};case">=":return function(V){return G(V)>=B};case"[]":return function(V){var et=G(V);return et>=B[0]&&et<=B[1]};case"()":return function(V){var et=G(V);return et>B[0]&&et<B[1]};case"[)":return function(V){var et=G(V);return et>=B[0]&&et<B[1]};case"(]":return function(V){var et=G(V);return et>B[0]&&et<=B[1]};case"][":return function(V){var et=G(V);return et<=B[0]||et>=B[1]};case")(":return function(V){var et=G(V);return et<B[0]||et>B[1]};case"](":return function(V){var et=G(V);return et<=B[0]||et>B[1]};case")[":return function(V){var et=G(V);return et<B[0]||et>=B[1]};case"{}":return function(V){return B.indexOf(G(V))!==-1};case"}{":return function(V){return B.indexOf(G(V))===-1}}}(i,r.getDataToCoordFunc(n,a,l,c),f),x={},_={},g=0;w?(p=function(E){x[E.astr]=T.extendDeep([],E.get()),E.set(new Array(u))},y=function(E,S){var O=x[E.astr][S];E.get()[S]=O}):(p=function(E){x[E.astr]=T.extendDeep([],E.get()),E.set([])},y=function(E,S){var O=x[E.astr][S];E.get().push(O)}),L(p);for(var A=m(a.transforms,i),M=0;M<u;M++)b(c[M])?(L(y,M),_[g++]=A(M)):w&&g++;i._indexToPoints=_,a._length=g}}function L(E,S){for(var O=0;O<d.length;O++)E(T.nestedProperty(a,d[O]),S)}}},43102:function(W,I,o){var T=o(71828),k=o(86281),r=o(74875),m=o(79344).p;function h(s,e){var t,n,a,i,c,l,u,f,d,w,v=e.transform,p=e.transformIndex,y=s.transforms[p].groups,b=m(s.transforms,v);if(!T.isArrayOrTypedArray(y)||y.length===0)return[s];var x=T.filterUnique(y),_=new Array(x.length),g=y.length,A=k.findArrayAttributes(s),M=v.styles||[],L={};for(t=0;t<M.length;t++)L[M[t].target]=M[t].value;v.styles&&(w=T.keyedContainer(v,"styles","target","value.name"));var E={},S={};for(t=0;t<x.length;t++){E[l=x[t]]=t,S[l]=0,(u=_[t]=T.extendDeepNoArrays({},s))._group=l,u.transforms[p]._indexToPoints={};var O=null;for(w&&(O=w.get(l)),u.name=O||O===""?O:T.templateString(v.nameformat,{trace:s.name,group:l}),f=u.transforms,u.transforms=[],n=0;n<f.length;n++)u.transforms[n]=T.extendDeepNoArrays({},f[n]);for(n=0;n<A.length;n++)T.nestedProperty(u,A[n]).set([])}for(a=0;a<A.length;a++){for(i=A[a],n=0,d=[];n<x.length;n++)d[n]=T.nestedProperty(_[n],i).get();for(c=T.nestedProperty(s,i).get(),n=0;n<g;n++)d[E[y[n]]].push(c[n])}for(n=0;n<g;n++)(u=_[E[y[n]]]).transforms[p]._indexToPoints[S[y[n]]]=b(n),S[y[n]]++;for(t=0;t<x.length;t++)l=x[t],u=_[t],r.clearExpandedTraceDefaultColors(u),u=T.extendDeepNoArrays(u,L[l]||{});return _}I.moduleType="transform",I.name="groupby",I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},I.supplyDefaults=function(s,e,t){var n,a={};function i(d,w){return T.coerce(s,a,I.attributes,d,w)}if(!i("enabled"))return a;i("groups"),i("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var c=s.styles,l=a.styles=[];if(c)for(n=0;n<c.length;n++){var u=l[n]={};T.coerce(c[n],l[n],I.attributes.styles,"target");var f=T.coerce(c[n],l[n],I.attributes.styles,"value");T.isPlainObject(f)?u.value=T.extendDeep({},f):f&&delete u.value}return a},I.transform=function(s,e){var t,n,a,i=[];for(n=0;n<s.length;n++)for(t=h(s[n],e),a=0;a<t.length;a++)i.push(t[a]);return i}},79344:function(W,I){I.p=function(o,T){for(var k,r,m=0;m<o.length&&(k=o[m])!==T;m++)k._indexToPoints&&k.enabled!==!1&&(r=k._indexToPoints);var h=r?function(s){return r[s]}:function(s){return[s]};return h}},32275:function(W,I,o){var T=o(71828),k=o(89298),r=o(79344).p,m=o(50606).BADNUM;I.moduleType="transform",I.name="sort",I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},I.supplyDefaults=function(h){var s={};function e(t,n){return T.coerce(h,s,I.attributes,t,n)}return e("enabled")&&(e("target"),e("order")),s},I.calcTransform=function(h,s,e){if(e.enabled){var t=T.getTargetArray(s,e);if(t){var n=e.target,a=t.length;s._length&&(a=Math.min(a,s._length));var i,c,l=s._arrayAttrs,u=function(y,b,x,_){var g,A=new Array(_),M=new Array(_);for(g=0;g<_;g++)A[g]={v:b[g],i:g};for(A.sort(function(L,E){switch(L.order){case"ascending":return function(S,O){var P=E(S.v),U=E(O.v);return P===m?1:U===m?-1:P-U};case"descending":return function(S,O){var P=E(S.v),U=E(O.v);return P===m?1:U===m?-1:U-P}}}(y,x)),g=0;g<_;g++)M[g]=A[g].i;return M}(e,t,k.getDataToCoordFunc(h,s,n,t),a),f=r(s.transforms,e),d={};for(i=0;i<l.length;i++){var w=T.nestedProperty(s,l[i]),v=w.get(),p=new Array(a);for(c=0;c<a;c++)p[c]=v[u[c]];w.set(p)}for(c=0;c<a;c++)d[c]=f(u[c]);e._indexToPoints=d,s._length=a}}}},11506:function(W,I){I.version="2.26.2"},9330:function(W,I,o){var T,k=o(90386);T=function(){return function(){var r={7386:function(s,e,t){s.exports={alpha_shape:t(2350),convex_hull:t(5537),delaunay_triangulate:t(4419),gl_cone3d:t(1140),gl_error3d:t(3110),gl_heatmap2d:t(6386),gl_line3d:t(6086),gl_mesh3d:t(8116),gl_plot2d:t(2117),gl_plot3d:t(1059),gl_pointcloud2d:t(8271),gl_scatter3d:t(2182),gl_select_box:t(6623),gl_spikes2d:t(3050),gl_streamtube3d:t(7307),gl_surface3d:t(3754),ndarray:t(5050),ndarray_linear_interpolate:t(3581)}},2146:function(s,e,t){function n(ut,Tt){for(var bt=0;bt<Tt.length;bt++){var It=Tt[bt];It.enumerable=It.enumerable||!1,It.configurable=!0,"value"in It&&(It.writable=!0),Object.defineProperty(ut,It.key,It)}}function a(ut,Tt){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(bt,It){return bt.__proto__=It,bt},a(ut,Tt)}function i(ut){if(ut===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ut}function c(ut){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Tt){return Tt.__proto__||Object.getPrototypeOf(Tt)},c(ut)}function l(ut){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tt){return typeof Tt}:function(Tt){return Tt&&typeof Symbol=="function"&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt},l(ut)}var u=t(3910),f=t(3187),d=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=p,e.h2=50;var w=2147483647;function v(ut){if(ut>w)throw new RangeError('The value "'+ut+'" is invalid for option "size"');var Tt=new Uint8Array(ut);return Object.setPrototypeOf(Tt,p.prototype),Tt}function p(ut,Tt,bt){if(typeof ut=="number"){if(typeof Tt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(ut)}return y(ut,Tt,bt)}function y(ut,Tt,bt){if(typeof ut=="string")return function(Ft,$t){if(typeof $t=="string"&&$t!==""||($t="utf8"),!p.isEncoding($t))throw new TypeError("Unknown encoding: "+$t);var Wt=0|M(Ft,$t),Xt=v(Wt),ae=Xt.write(Ft,$t);return ae!==Wt&&(Xt=Xt.slice(0,ae)),Xt}(ut,Tt);if(ArrayBuffer.isView(ut))return function(Ft){if(Lt(Ft,Uint8Array)){var $t=new Uint8Array(Ft);return g($t.buffer,$t.byteOffset,$t.byteLength)}return _(Ft)}(ut);if(ut==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(ut));if(Lt(ut,ArrayBuffer)||ut&&Lt(ut.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Lt(ut,SharedArrayBuffer)||ut&&Lt(ut.buffer,SharedArrayBuffer)))return g(ut,Tt,bt);if(typeof ut=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var It=ut.valueOf&&ut.valueOf();if(It!=null&&It!==ut)return p.from(It,Tt,bt);var zt=function(Ft){if(p.isBuffer(Ft)){var $t=0|A(Ft.length),Wt=v($t);return Wt.length===0||Ft.copy(Wt,0,0,$t),Wt}return Ft.length!==void 0?typeof Ft.length!="number"||Mt(Ft.length)?v(0):_(Ft):Ft.type==="Buffer"&&Array.isArray(Ft.data)?_(Ft.data):void 0}(ut);if(zt)return zt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ut[Symbol.toPrimitive]=="function")return p.from(ut[Symbol.toPrimitive]("string"),Tt,bt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(ut))}function b(ut){if(typeof ut!="number")throw new TypeError('"size" argument must be of type number');if(ut<0)throw new RangeError('The value "'+ut+'" is invalid for option "size"')}function x(ut){return b(ut),v(ut<0?0:0|A(ut))}function _(ut){for(var Tt=ut.length<0?0:0|A(ut.length),bt=v(Tt),It=0;It<Tt;It+=1)bt[It]=255&ut[It];return bt}function g(ut,Tt,bt){if(Tt<0||ut.byteLength<Tt)throw new RangeError('"offset" is outside of buffer bounds');if(ut.byteLength<Tt+(bt||0))throw new RangeError('"length" is outside of buffer bounds');var It;return It=Tt===void 0&&bt===void 0?new Uint8Array(ut):bt===void 0?new Uint8Array(ut,Tt):new Uint8Array(ut,Tt,bt),Object.setPrototypeOf(It,p.prototype),It}function A(ut){if(ut>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return 0|ut}function M(ut,Tt){if(p.isBuffer(ut))return ut.length;if(ArrayBuffer.isView(ut)||Lt(ut,ArrayBuffer))return ut.byteLength;if(typeof ut!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(ut));var bt=ut.length,It=arguments.length>2&&arguments[2]===!0;if(!It&&bt===0)return 0;for(var zt=!1;;)switch(Tt){case"ascii":case"latin1":case"binary":return bt;case"utf8":case"utf-8":return st(ut).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*bt;case"hex":return bt>>>1;case"base64":return at(ut).length;default:if(zt)return It?-1:st(ut).length;Tt=(""+Tt).toLowerCase(),zt=!0}}function L(ut,Tt,bt){var It=!1;if((Tt===void 0||Tt<0)&&(Tt=0),Tt>this.length||((bt===void 0||bt>this.length)&&(bt=this.length),bt<=0)||(bt>>>=0)<=(Tt>>>=0))return"";for(ut||(ut="utf8");;)switch(ut){case"hex":return X(this,Tt,bt);case"utf8":case"utf-8":return G(this,Tt,bt);case"ascii":return et(this,Tt,bt);case"latin1":case"binary":return J(this,Tt,bt);case"base64":return z(this,Tt,bt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,Tt,bt);default:if(It)throw new TypeError("Unknown encoding: "+ut);ut=(ut+"").toLowerCase(),It=!0}}function E(ut,Tt,bt){var It=ut[Tt];ut[Tt]=ut[bt],ut[bt]=It}function S(ut,Tt,bt,It,zt){if(ut.length===0)return-1;if(typeof bt=="string"?(It=bt,bt=0):bt>2147483647?bt=2147483647:bt<-2147483648&&(bt=-2147483648),Mt(bt=+bt)&&(bt=zt?0:ut.length-1),bt<0&&(bt=ut.length+bt),bt>=ut.length){if(zt)return-1;bt=ut.length-1}else if(bt<0){if(!zt)return-1;bt=0}if(typeof Tt=="string"&&(Tt=p.from(Tt,It)),p.isBuffer(Tt))return Tt.length===0?-1:O(ut,Tt,bt,It,zt);if(typeof Tt=="number")return Tt&=255,typeof Uint8Array.prototype.indexOf=="function"?zt?Uint8Array.prototype.indexOf.call(ut,Tt,bt):Uint8Array.prototype.lastIndexOf.call(ut,Tt,bt):O(ut,[Tt],bt,It,zt);throw new TypeError("val must be string, number or Buffer")}function O(ut,Tt,bt,It,zt){var Ft,$t=1,Wt=ut.length,Xt=Tt.length;if(It!==void 0&&((It=String(It).toLowerCase())==="ucs2"||It==="ucs-2"||It==="utf16le"||It==="utf-16le")){if(ut.length<2||Tt.length<2)return-1;$t=2,Wt/=2,Xt/=2,bt/=2}function ae(ve,ie){return $t===1?ve[ie]:ve.readUInt16BE(ie*$t)}if(zt){var Qt=-1;for(Ft=bt;Ft<Wt;Ft++)if(ae(ut,Ft)===ae(Tt,Qt===-1?0:Ft-Qt)){if(Qt===-1&&(Qt=Ft),Ft-Qt+1===Xt)return Qt*$t}else Qt!==-1&&(Ft-=Ft-Qt),Qt=-1}else for(bt+Xt>Wt&&(bt=Wt-Xt),Ft=bt;Ft>=0;Ft--){for(var de=!0,ye=0;ye<Xt;ye++)if(ae(ut,Ft+ye)!==ae(Tt,ye)){de=!1;break}if(de)return Ft}return-1}function P(ut,Tt,bt,It){bt=Number(bt)||0;var zt=ut.length-bt;It?(It=Number(It))>zt&&(It=zt):It=zt;var Ft,$t=Tt.length;for(It>$t/2&&(It=$t/2),Ft=0;Ft<It;++Ft){var Wt=parseInt(Tt.substr(2*Ft,2),16);if(Mt(Wt))return Ft;ut[bt+Ft]=Wt}return Ft}function U(ut,Tt,bt,It){return ht(st(Tt,ut.length-bt),ut,bt,It)}function R(ut,Tt,bt,It){return ht(function(zt){for(var Ft=[],$t=0;$t<zt.length;++$t)Ft.push(255&zt.charCodeAt($t));return Ft}(Tt),ut,bt,It)}function j(ut,Tt,bt,It){return ht(at(Tt),ut,bt,It)}function B(ut,Tt,bt,It){return ht(function(zt,Ft){for(var $t,Wt,Xt,ae=[],Qt=0;Qt<zt.length&&!((Ft-=2)<0);++Qt)Wt=($t=zt.charCodeAt(Qt))>>8,Xt=$t%256,ae.push(Xt),ae.push(Wt);return ae}(Tt,ut.length-bt),ut,bt,It)}function z(ut,Tt,bt){return Tt===0&&bt===ut.length?u.fromByteArray(ut):u.fromByteArray(ut.slice(Tt,bt))}function G(ut,Tt,bt){bt=Math.min(ut.length,bt);for(var It=[],zt=Tt;zt<bt;){var Ft=ut[zt],$t=null,Wt=Ft>239?4:Ft>223?3:Ft>191?2:1;if(zt+Wt<=bt){var Xt=void 0,ae=void 0,Qt=void 0,de=void 0;switch(Wt){case 1:Ft<128&&($t=Ft);break;case 2:(192&(Xt=ut[zt+1]))==128&&(de=(31&Ft)<<6|63&Xt)>127&&($t=de);break;case 3:Xt=ut[zt+1],ae=ut[zt+2],(192&Xt)==128&&(192&ae)==128&&(de=(15&Ft)<<12|(63&Xt)<<6|63&ae)>2047&&(de<55296||de>57343)&&($t=de);break;case 4:Xt=ut[zt+1],ae=ut[zt+2],Qt=ut[zt+3],(192&Xt)==128&&(192&ae)==128&&(192&Qt)==128&&(de=(15&Ft)<<18|(63&Xt)<<12|(63&ae)<<6|63&Qt)>65535&&de<1114112&&($t=de)}}$t===null?($t=65533,Wt=1):$t>65535&&($t-=65536,It.push($t>>>10&1023|55296),$t=56320|1023&$t),It.push($t),zt+=Wt}return function(ye){var ve=ye.length;if(ve<=V)return String.fromCharCode.apply(String,ye);for(var ie="",se=0;se<ve;)ie+=String.fromCharCode.apply(String,ye.slice(se,se+=V));return ie}(It)}p.TYPED_ARRAY_SUPPORT=function(){try{var ut=new Uint8Array(1),Tt={foo:function(){return 42}};return Object.setPrototypeOf(Tt,Uint8Array.prototype),Object.setPrototypeOf(ut,Tt),ut.foo()===42}catch{return!1}}(),p.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(ut,Tt,bt){return y(ut,Tt,bt)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(ut,Tt,bt){return function(It,zt,Ft){return b(It),It<=0?v(It):zt!==void 0?typeof Ft=="string"?v(It).fill(zt,Ft):v(It).fill(zt):v(It)}(ut,Tt,bt)},p.allocUnsafe=function(ut){return x(ut)},p.allocUnsafeSlow=function(ut){return x(ut)},p.isBuffer=function(ut){return ut!=null&&ut._isBuffer===!0&&ut!==p.prototype},p.compare=function(ut,Tt){if(Lt(ut,Uint8Array)&&(ut=p.from(ut,ut.offset,ut.byteLength)),Lt(Tt,Uint8Array)&&(Tt=p.from(Tt,Tt.offset,Tt.byteLength)),!p.isBuffer(ut)||!p.isBuffer(Tt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ut===Tt)return 0;for(var bt=ut.length,It=Tt.length,zt=0,Ft=Math.min(bt,It);zt<Ft;++zt)if(ut[zt]!==Tt[zt]){bt=ut[zt],It=Tt[zt];break}return bt<It?-1:It<bt?1:0},p.isEncoding=function(ut){switch(String(ut).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(ut,Tt){if(!Array.isArray(ut))throw new TypeError('"list" argument must be an Array of Buffers');if(ut.length===0)return p.alloc(0);var bt;if(Tt===void 0)for(Tt=0,bt=0;bt<ut.length;++bt)Tt+=ut[bt].length;var It=p.allocUnsafe(Tt),zt=0;for(bt=0;bt<ut.length;++bt){var Ft=ut[bt];if(Lt(Ft,Uint8Array))zt+Ft.length>It.length?(p.isBuffer(Ft)||(Ft=p.from(Ft)),Ft.copy(It,zt)):Uint8Array.prototype.set.call(It,Ft,zt);else{if(!p.isBuffer(Ft))throw new TypeError('"list" argument must be an Array of Buffers');Ft.copy(It,zt)}zt+=Ft.length}return It},p.byteLength=M,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var ut=this.length;if(ut%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Tt=0;Tt<ut;Tt+=2)E(this,Tt,Tt+1);return this},p.prototype.swap32=function(){var ut=this.length;if(ut%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Tt=0;Tt<ut;Tt+=4)E(this,Tt,Tt+3),E(this,Tt+1,Tt+2);return this},p.prototype.swap64=function(){var ut=this.length;if(ut%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Tt=0;Tt<ut;Tt+=8)E(this,Tt,Tt+7),E(this,Tt+1,Tt+6),E(this,Tt+2,Tt+5),E(this,Tt+3,Tt+4);return this},p.prototype.toString=function(){var ut=this.length;return ut===0?"":arguments.length===0?G(this,0,ut):L.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(ut){if(!p.isBuffer(ut))throw new TypeError("Argument must be a Buffer");return this===ut||p.compare(this,ut)===0},p.prototype.inspect=function(){var ut="",Tt=e.h2;return ut=this.toString("hex",0,Tt).replace(/(.{2})/g,"$1 ").trim(),this.length>Tt&&(ut+=" ... "),"<Buffer "+ut+">"},d&&(p.prototype[d]=p.prototype.inspect),p.prototype.compare=function(ut,Tt,bt,It,zt){if(Lt(ut,Uint8Array)&&(ut=p.from(ut,ut.offset,ut.byteLength)),!p.isBuffer(ut))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(ut));if(Tt===void 0&&(Tt=0),bt===void 0&&(bt=ut?ut.length:0),It===void 0&&(It=0),zt===void 0&&(zt=this.length),Tt<0||bt>ut.length||It<0||zt>this.length)throw new RangeError("out of range index");if(It>=zt&&Tt>=bt)return 0;if(It>=zt)return-1;if(Tt>=bt)return 1;if(this===ut)return 0;for(var Ft=(zt>>>=0)-(It>>>=0),$t=(bt>>>=0)-(Tt>>>=0),Wt=Math.min(Ft,$t),Xt=this.slice(It,zt),ae=ut.slice(Tt,bt),Qt=0;Qt<Wt;++Qt)if(Xt[Qt]!==ae[Qt]){Ft=Xt[Qt],$t=ae[Qt];break}return Ft<$t?-1:$t<Ft?1:0},p.prototype.includes=function(ut,Tt,bt){return this.indexOf(ut,Tt,bt)!==-1},p.prototype.indexOf=function(ut,Tt,bt){return S(this,ut,Tt,bt,!0)},p.prototype.lastIndexOf=function(ut,Tt,bt){return S(this,ut,Tt,bt,!1)},p.prototype.write=function(ut,Tt,bt,It){if(Tt===void 0)It="utf8",bt=this.length,Tt=0;else if(bt===void 0&&typeof Tt=="string")It=Tt,bt=this.length,Tt=0;else{if(!isFinite(Tt))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Tt>>>=0,isFinite(bt)?(bt>>>=0,It===void 0&&(It="utf8")):(It=bt,bt=void 0)}var zt=this.length-Tt;if((bt===void 0||bt>zt)&&(bt=zt),ut.length>0&&(bt<0||Tt<0)||Tt>this.length)throw new RangeError("Attempt to write outside buffer bounds");It||(It="utf8");for(var Ft=!1;;)switch(It){case"hex":return P(this,ut,Tt,bt);case"utf8":case"utf-8":return U(this,ut,Tt,bt);case"ascii":case"latin1":case"binary":return R(this,ut,Tt,bt);case"base64":return j(this,ut,Tt,bt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,ut,Tt,bt);default:if(Ft)throw new TypeError("Unknown encoding: "+It);It=(""+It).toLowerCase(),Ft=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var V=4096;function et(ut,Tt,bt){var It="";bt=Math.min(ut.length,bt);for(var zt=Tt;zt<bt;++zt)It+=String.fromCharCode(127&ut[zt]);return It}function J(ut,Tt,bt){var It="";bt=Math.min(ut.length,bt);for(var zt=Tt;zt<bt;++zt)It+=String.fromCharCode(ut[zt]);return It}function X(ut,Tt,bt){var It=ut.length;(!Tt||Tt<0)&&(Tt=0),(!bt||bt<0||bt>It)&&(bt=It);for(var zt="",Ft=Tt;Ft<bt;++Ft)zt+=_t[ut[Ft]];return zt}function Y(ut,Tt,bt){for(var It=ut.slice(Tt,bt),zt="",Ft=0;Ft<It.length-1;Ft+=2)zt+=String.fromCharCode(It[Ft]+256*It[Ft+1]);return zt}function Z(ut,Tt,bt){if(ut%1!=0||ut<0)throw new RangeError("offset is not uint");if(ut+Tt>bt)throw new RangeError("Trying to access beyond buffer length")}function tt(ut,Tt,bt,It,zt,Ft){if(!p.isBuffer(ut))throw new TypeError('"buffer" argument must be a Buffer instance');if(Tt>zt||Tt<Ft)throw new RangeError('"value" argument is out of bounds');if(bt+It>ut.length)throw new RangeError("Index out of range")}function rt(ut,Tt,bt,It,zt){mt(Tt,It,zt,ut,bt,7);var Ft=Number(Tt&BigInt(4294967295));ut[bt++]=Ft,Ft>>=8,ut[bt++]=Ft,Ft>>=8,ut[bt++]=Ft,Ft>>=8,ut[bt++]=Ft;var $t=Number(Tt>>BigInt(32)&BigInt(4294967295));return ut[bt++]=$t,$t>>=8,ut[bt++]=$t,$t>>=8,ut[bt++]=$t,$t>>=8,ut[bt++]=$t,bt}function nt(ut,Tt,bt,It,zt){mt(Tt,It,zt,ut,bt,7);var Ft=Number(Tt&BigInt(4294967295));ut[bt+7]=Ft,Ft>>=8,ut[bt+6]=Ft,Ft>>=8,ut[bt+5]=Ft,Ft>>=8,ut[bt+4]=Ft;var $t=Number(Tt>>BigInt(32)&BigInt(4294967295));return ut[bt+3]=$t,$t>>=8,ut[bt+2]=$t,$t>>=8,ut[bt+1]=$t,$t>>=8,ut[bt]=$t,bt+8}function ot(ut,Tt,bt,It,zt,Ft){if(bt+It>ut.length)throw new RangeError("Index out of range");if(bt<0)throw new RangeError("Index out of range")}function ct(ut,Tt,bt,It,zt){return Tt=+Tt,bt>>>=0,zt||ot(ut,0,bt,4),f.write(ut,Tt,bt,It,23,4),bt+4}function pt(ut,Tt,bt,It,zt){return Tt=+Tt,bt>>>=0,zt||ot(ut,0,bt,8),f.write(ut,Tt,bt,It,52,8),bt+8}p.prototype.slice=function(ut,Tt){var bt=this.length;(ut=~~ut)<0?(ut+=bt)<0&&(ut=0):ut>bt&&(ut=bt),(Tt=Tt===void 0?bt:~~Tt)<0?(Tt+=bt)<0&&(Tt=0):Tt>bt&&(Tt=bt),Tt<ut&&(Tt=ut);var It=this.subarray(ut,Tt);return Object.setPrototypeOf(It,p.prototype),It},p.prototype.readUintLE=p.prototype.readUIntLE=function(ut,Tt,bt){ut>>>=0,Tt>>>=0,bt||Z(ut,Tt,this.length);for(var It=this[ut],zt=1,Ft=0;++Ft<Tt&&(zt*=256);)It+=this[ut+Ft]*zt;return It},p.prototype.readUintBE=p.prototype.readUIntBE=function(ut,Tt,bt){ut>>>=0,Tt>>>=0,bt||Z(ut,Tt,this.length);for(var It=this[ut+--Tt],zt=1;Tt>0&&(zt*=256);)It+=this[ut+--Tt]*zt;return It},p.prototype.readUint8=p.prototype.readUInt8=function(ut,Tt){return ut>>>=0,Tt||Z(ut,1,this.length),this[ut]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(ut,Tt){return ut>>>=0,Tt||Z(ut,2,this.length),this[ut]|this[ut+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(ut,Tt){return ut>>>=0,Tt||Z(ut,2,this.length),this[ut]<<8|this[ut+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(ut,Tt){return ut>>>=0,Tt||Z(ut,4,this.length),(this[ut]|this[ut+1]<<8|this[ut+2]<<16)+16777216*this[ut+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(ut,Tt){return ut>>>=0,Tt||Z(ut,4,this.length),16777216*this[ut]+(this[ut+1]<<16|this[ut+2]<<8|this[ut+3])},p.prototype.readBigUInt64LE=St(function(ut){Ot(ut>>>=0,"offset");var Tt=this[ut],bt=this[ut+7];Tt!==void 0&&bt!==void 0||vt(ut,this.length-8);var It=Tt+this[++ut]*Math.pow(2,8)+this[++ut]*Math.pow(2,16)+this[++ut]*Math.pow(2,24),zt=this[++ut]+this[++ut]*Math.pow(2,8)+this[++ut]*Math.pow(2,16)+bt*Math.pow(2,24);return BigInt(It)+(BigInt(zt)<<BigInt(32))}),p.prototype.readBigUInt64BE=St(function(ut){Ot(ut>>>=0,"offset");var Tt=this[ut],bt=this[ut+7];Tt!==void 0&&bt!==void 0||vt(ut,this.length-8);var It=Tt*Math.pow(2,24)+this[++ut]*Math.pow(2,16)+this[++ut]*Math.pow(2,8)+this[++ut],zt=this[++ut]*Math.pow(2,24)+this[++ut]*Math.pow(2,16)+this[++ut]*Math.pow(2,8)+bt;return(BigInt(It)<<BigInt(32))+BigInt(zt)}),p.prototype.readIntLE=function(ut,Tt,bt){ut>>>=0,Tt>>>=0,bt||Z(ut,Tt,this.length);for(var It=this[ut],zt=1,Ft=0;++Ft<Tt&&(zt*=256);)It+=this[ut+Ft]*zt;return It>=(zt*=128)&&(It-=Math.pow(2,8*Tt)),It},p.prototype.readIntBE=function(ut,Tt,bt){ut>>>=0,Tt>>>=0,bt||Z(ut,Tt,this.length);for(var It=Tt,zt=1,Ft=this[ut+--It];It>0&&(zt*=256);)Ft+=this[ut+--It]*zt;return Ft>=(zt*=128)&&(Ft-=Math.pow(2,8*Tt)),Ft},p.prototype.readInt8=function(ut,Tt){return ut>>>=0,Tt||Z(ut,1,this.length),128&this[ut]?-1*(255-this[ut]+1):this[ut]},p.prototype.readInt16LE=function(ut,Tt){ut>>>=0,Tt||Z(ut,2,this.length);var bt=this[ut]|this[ut+1]<<8;return 32768&bt?4294901760|bt:bt},p.prototype.readInt16BE=function(ut,Tt){ut>>>=0,Tt||Z(ut,2,this.length);var bt=this[ut+1]|this[ut]<<8;return 32768&bt?4294901760|bt:bt},p.prototype.readInt32LE=function(ut,Tt){return ut>>>=0,Tt||Z(ut,4,this.length),this[ut]|this[ut+1]<<8|this[ut+2]<<16|this[ut+3]<<24},p.prototype.readInt32BE=function(ut,Tt){return ut>>>=0,Tt||Z(ut,4,this.length),this[ut]<<24|this[ut+1]<<16|this[ut+2]<<8|this[ut+3]},p.prototype.readBigInt64LE=St(function(ut){Ot(ut>>>=0,"offset");var Tt=this[ut],bt=this[ut+7];Tt!==void 0&&bt!==void 0||vt(ut,this.length-8);var It=this[ut+4]+this[ut+5]*Math.pow(2,8)+this[ut+6]*Math.pow(2,16)+(bt<<24);return(BigInt(It)<<BigInt(32))+BigInt(Tt+this[++ut]*Math.pow(2,8)+this[++ut]*Math.pow(2,16)+this[++ut]*Math.pow(2,24))}),p.prototype.readBigInt64BE=St(function(ut){Ot(ut>>>=0,"offset");var Tt=this[ut],bt=this[ut+7];Tt!==void 0&&bt!==void 0||vt(ut,this.length-8);var It=(Tt<<24)+this[++ut]*Math.pow(2,16)+this[++ut]*Math.pow(2,8)+this[++ut];return(BigInt(It)<<BigInt(32))+BigInt(this[++ut]*Math.pow(2,24)+this[++ut]*Math.pow(2,16)+this[++ut]*Math.pow(2,8)+bt)}),p.prototype.readFloatLE=function(ut,Tt){return ut>>>=0,Tt||Z(ut,4,this.length),f.read(this,ut,!0,23,4)},p.prototype.readFloatBE=function(ut,Tt){return ut>>>=0,Tt||Z(ut,4,this.length),f.read(this,ut,!1,23,4)},p.prototype.readDoubleLE=function(ut,Tt){return ut>>>=0,Tt||Z(ut,8,this.length),f.read(this,ut,!0,52,8)},p.prototype.readDoubleBE=function(ut,Tt){return ut>>>=0,Tt||Z(ut,8,this.length),f.read(this,ut,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(ut,Tt,bt,It){ut=+ut,Tt>>>=0,bt>>>=0,It||tt(this,ut,Tt,bt,Math.pow(2,8*bt)-1,0);var zt=1,Ft=0;for(this[Tt]=255&ut;++Ft<bt&&(zt*=256);)this[Tt+Ft]=ut/zt&255;return Tt+bt},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(ut,Tt,bt,It){ut=+ut,Tt>>>=0,bt>>>=0,It||tt(this,ut,Tt,bt,Math.pow(2,8*bt)-1,0);var zt=bt-1,Ft=1;for(this[Tt+zt]=255&ut;--zt>=0&&(Ft*=256);)this[Tt+zt]=ut/Ft&255;return Tt+bt},p.prototype.writeUint8=p.prototype.writeUInt8=function(ut,Tt,bt){return ut=+ut,Tt>>>=0,bt||tt(this,ut,Tt,1,255,0),this[Tt]=255&ut,Tt+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(ut,Tt,bt){return ut=+ut,Tt>>>=0,bt||tt(this,ut,Tt,2,65535,0),this[Tt]=255&ut,this[Tt+1]=ut>>>8,Tt+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(ut,Tt,bt){return ut=+ut,Tt>>>=0,bt||tt(this,ut,Tt,2,65535,0),this[Tt]=ut>>>8,this[Tt+1]=255&ut,Tt+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(ut,Tt,bt){return ut=+ut,Tt>>>=0,bt||tt(this,ut,Tt,4,4294967295,0),this[Tt+3]=ut>>>24,this[Tt+2]=ut>>>16,this[Tt+1]=ut>>>8,this[Tt]=255&ut,Tt+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(ut,Tt,bt){return ut=+ut,Tt>>>=0,bt||tt(this,ut,Tt,4,4294967295,0),this[Tt]=ut>>>24,this[Tt+1]=ut>>>16,this[Tt+2]=ut>>>8,this[Tt+3]=255&ut,Tt+4},p.prototype.writeBigUInt64LE=St(function(ut){return rt(this,ut,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=St(function(ut){return nt(this,ut,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(ut,Tt,bt,It){if(ut=+ut,Tt>>>=0,!It){var zt=Math.pow(2,8*bt-1);tt(this,ut,Tt,bt,zt-1,-zt)}var Ft=0,$t=1,Wt=0;for(this[Tt]=255&ut;++Ft<bt&&($t*=256);)ut<0&&Wt===0&&this[Tt+Ft-1]!==0&&(Wt=1),this[Tt+Ft]=(ut/$t>>0)-Wt&255;return Tt+bt},p.prototype.writeIntBE=function(ut,Tt,bt,It){if(ut=+ut,Tt>>>=0,!It){var zt=Math.pow(2,8*bt-1);tt(this,ut,Tt,bt,zt-1,-zt)}var Ft=bt-1,$t=1,Wt=0;for(this[Tt+Ft]=255&ut;--Ft>=0&&($t*=256);)ut<0&&Wt===0&&this[Tt+Ft+1]!==0&&(Wt=1),this[Tt+Ft]=(ut/$t>>0)-Wt&255;return Tt+bt},p.prototype.writeInt8=function(ut,Tt,bt){return ut=+ut,Tt>>>=0,bt||tt(this,ut,Tt,1,127,-128),ut<0&&(ut=255+ut+1),this[Tt]=255&ut,Tt+1},p.prototype.writeInt16LE=function(ut,Tt,bt){return ut=+ut,Tt>>>=0,bt||tt(this,ut,Tt,2,32767,-32768),this[Tt]=255&ut,this[Tt+1]=ut>>>8,Tt+2},p.prototype.writeInt16BE=function(ut,Tt,bt){return ut=+ut,Tt>>>=0,bt||tt(this,ut,Tt,2,32767,-32768),this[Tt]=ut>>>8,this[Tt+1]=255&ut,Tt+2},p.prototype.writeInt32LE=function(ut,Tt,bt){return ut=+ut,Tt>>>=0,bt||tt(this,ut,Tt,4,2147483647,-2147483648),this[Tt]=255&ut,this[Tt+1]=ut>>>8,this[Tt+2]=ut>>>16,this[Tt+3]=ut>>>24,Tt+4},p.prototype.writeInt32BE=function(ut,Tt,bt){return ut=+ut,Tt>>>=0,bt||tt(this,ut,Tt,4,2147483647,-2147483648),ut<0&&(ut=4294967295+ut+1),this[Tt]=ut>>>24,this[Tt+1]=ut>>>16,this[Tt+2]=ut>>>8,this[Tt+3]=255&ut,Tt+4},p.prototype.writeBigInt64LE=St(function(ut){return rt(this,ut,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=St(function(ut){return nt(this,ut,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(ut,Tt,bt){return ct(this,ut,Tt,!0,bt)},p.prototype.writeFloatBE=function(ut,Tt,bt){return ct(this,ut,Tt,!1,bt)},p.prototype.writeDoubleLE=function(ut,Tt,bt){return pt(this,ut,Tt,!0,bt)},p.prototype.writeDoubleBE=function(ut,Tt,bt){return pt(this,ut,Tt,!1,bt)},p.prototype.copy=function(ut,Tt,bt,It){if(!p.isBuffer(ut))throw new TypeError("argument should be a Buffer");if(bt||(bt=0),It||It===0||(It=this.length),Tt>=ut.length&&(Tt=ut.length),Tt||(Tt=0),It>0&&It<bt&&(It=bt),It===bt||ut.length===0||this.length===0)return 0;if(Tt<0)throw new RangeError("targetStart out of bounds");if(bt<0||bt>=this.length)throw new RangeError("Index out of range");if(It<0)throw new RangeError("sourceEnd out of bounds");It>this.length&&(It=this.length),ut.length-Tt<It-bt&&(It=ut.length-Tt+bt);var zt=It-bt;return this===ut&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Tt,bt,It):Uint8Array.prototype.set.call(ut,this.subarray(bt,It),Tt),zt},p.prototype.fill=function(ut,Tt,bt,It){if(typeof ut=="string"){if(typeof Tt=="string"?(It=Tt,Tt=0,bt=this.length):typeof bt=="string"&&(It=bt,bt=this.length),It!==void 0&&typeof It!="string")throw new TypeError("encoding must be a string");if(typeof It=="string"&&!p.isEncoding(It))throw new TypeError("Unknown encoding: "+It);if(ut.length===1){var zt=ut.charCodeAt(0);(It==="utf8"&&zt<128||It==="latin1")&&(ut=zt)}}else typeof ut=="number"?ut&=255:typeof ut=="boolean"&&(ut=Number(ut));if(Tt<0||this.length<Tt||this.length<bt)throw new RangeError("Out of range index");if(bt<=Tt)return this;var Ft;if(Tt>>>=0,bt=bt===void 0?this.length:bt>>>0,ut||(ut=0),typeof ut=="number")for(Ft=Tt;Ft<bt;++Ft)this[Ft]=ut;else{var $t=p.isBuffer(ut)?ut:p.from(ut,It),Wt=$t.length;if(Wt===0)throw new TypeError('The value "'+ut+'" is invalid for argument "value"');for(Ft=0;Ft<bt-Tt;++Ft)this[Ft+Tt]=$t[Ft%Wt]}return this};var gt={};function kt(ut,Tt,bt){gt[ut]=function(It){(function(Qt,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");Qt.prototype=Object.create(de&&de.prototype,{constructor:{value:Qt,writable:!0,configurable:!0}}),Object.defineProperty(Qt,"prototype",{writable:!1}),de&&a(Qt,de)})(ae,It);var zt,Ft,$t,Wt,Xt=($t=ae,Wt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Qt,de=c($t);if(Wt){var ye=c(this).constructor;Qt=Reflect.construct(de,arguments,ye)}else Qt=de.apply(this,arguments);return function(ve,ie){if(ie&&(l(ie)==="object"||typeof ie=="function"))return ie;if(ie!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(ve)}(this,Qt)});function ae(){var Qt;return function(de,ye){if(!(de instanceof ye))throw new TypeError("Cannot call a class as a function")}(this,ae),Qt=Xt.call(this),Object.defineProperty(i(Qt),"message",{value:Tt.apply(i(Qt),arguments),writable:!0,configurable:!0}),Qt.name="".concat(Qt.name," [").concat(ut,"]"),Qt.stack,delete Qt.name,Qt}return zt=ae,(Ft=[{key:"code",get:function(){return ut},set:function(Qt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Qt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ut,"]: ").concat(this.message)}}])&&n(zt.prototype,Ft),Object.defineProperty(zt,"prototype",{writable:!1}),ae}(bt)}function yt(ut){for(var Tt="",bt=ut.length,It=ut[0]==="-"?1:0;bt>=It+4;bt-=3)Tt="_".concat(ut.slice(bt-3,bt)).concat(Tt);return"".concat(ut.slice(0,bt)).concat(Tt)}function mt(ut,Tt,bt,It,zt,Ft){if(ut>bt||ut<Tt){var $t,Wt=typeof Tt=="bigint"?"n":"";throw $t=Ft>3?Tt===0||Tt===BigInt(0)?">= 0".concat(Wt," and < 2").concat(Wt," ** ").concat(8*(Ft+1)).concat(Wt):">= -(2".concat(Wt," ** ").concat(8*(Ft+1)-1).concat(Wt,") and < 2 ** ")+"".concat(8*(Ft+1)-1).concat(Wt):">= ".concat(Tt).concat(Wt," and <= ").concat(bt).concat(Wt),new gt.ERR_OUT_OF_RANGE("value",$t,ut)}(function(Xt,ae,Qt){Ot(ae,"offset"),Xt[ae]!==void 0&&Xt[ae+Qt]!==void 0||vt(ae,Xt.length-(Qt+1))})(It,zt,Ft)}function Ot(ut,Tt){if(typeof ut!="number")throw new gt.ERR_INVALID_ARG_TYPE(Tt,"number",ut)}function vt(ut,Tt,bt){throw Math.floor(ut)!==ut?(Ot(ut,bt),new gt.ERR_OUT_OF_RANGE(bt||"offset","an integer",ut)):Tt<0?new gt.ERR_BUFFER_OUT_OF_BOUNDS:new gt.ERR_OUT_OF_RANGE(bt||"offset",">= ".concat(bt?1:0," and <= ").concat(Tt),ut)}kt("ERR_BUFFER_OUT_OF_BOUNDS",function(ut){return ut?"".concat(ut," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),kt("ERR_INVALID_ARG_TYPE",function(ut,Tt){return'The "'.concat(ut,'" argument must be of type number. Received type ').concat(l(Tt))},TypeError),kt("ERR_OUT_OF_RANGE",function(ut,Tt,bt){var It='The value of "'.concat(ut,'" is out of range.'),zt=bt;return Number.isInteger(bt)&&Math.abs(bt)>Math.pow(2,32)?zt=yt(String(bt)):typeof bt=="bigint"&&(zt=String(bt),(bt>Math.pow(BigInt(2),BigInt(32))||bt<-Math.pow(BigInt(2),BigInt(32)))&&(zt=yt(zt)),zt+="n"),It+" It must be ".concat(Tt,". Received ").concat(zt)},RangeError);var xt=/[^+/0-9A-Za-z-_]/g;function st(ut,Tt){var bt;Tt=Tt||1/0;for(var It=ut.length,zt=null,Ft=[],$t=0;$t<It;++$t){if((bt=ut.charCodeAt($t))>55295&&bt<57344){if(!zt){if(bt>56319){(Tt-=3)>-1&&Ft.push(239,191,189);continue}if($t+1===It){(Tt-=3)>-1&&Ft.push(239,191,189);continue}zt=bt;continue}if(bt<56320){(Tt-=3)>-1&&Ft.push(239,191,189),zt=bt;continue}bt=65536+(zt-55296<<10|bt-56320)}else zt&&(Tt-=3)>-1&&Ft.push(239,191,189);if(zt=null,bt<128){if((Tt-=1)<0)break;Ft.push(bt)}else if(bt<2048){if((Tt-=2)<0)break;Ft.push(bt>>6|192,63&bt|128)}else if(bt<65536){if((Tt-=3)<0)break;Ft.push(bt>>12|224,bt>>6&63|128,63&bt|128)}else{if(!(bt<1114112))throw new Error("Invalid code point");if((Tt-=4)<0)break;Ft.push(bt>>18|240,bt>>12&63|128,bt>>6&63|128,63&bt|128)}}return Ft}function at(ut){return u.toByteArray(function(Tt){if((Tt=(Tt=Tt.split("=")[0]).trim().replace(xt,"")).length<2)return"";for(;Tt.length%4!=0;)Tt+="=";return Tt}(ut))}function ht(ut,Tt,bt,It){var zt;for(zt=0;zt<It&&!(zt+bt>=Tt.length||zt>=ut.length);++zt)Tt[zt+bt]=ut[zt];return zt}function Lt(ut,Tt){return ut instanceof Tt||ut!=null&&ut.constructor!=null&&ut.constructor.name!=null&&ut.constructor.name===Tt.name}function Mt(ut){return ut!=ut}var _t=function(){for(var ut="0123456789abcdef",Tt=new Array(256),bt=0;bt<16;++bt)for(var It=16*bt,zt=0;zt<16;++zt)Tt[It+zt]=ut[bt]+ut[zt];return Tt}();function St(ut){return typeof BigInt>"u"?Dt:ut}function Dt(){throw new Error("BigInt not supported")}},2321:function(s){s.exports=a,s.exports.isMobile=a,s.exports.default=a;var e=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,n=/android|ipad|playbook|silk/i;function a(i){i||(i={});var c=i.ua;if(c||typeof navigator>"u"||(c=navigator.userAgent),c&&c.headers&&typeof c.headers["user-agent"]=="string"&&(c=c.headers["user-agent"]),typeof c!="string")return!1;var l=e.test(c)&&!t.test(c)||!!i.tablet&&n.test(c);return!l&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&c.indexOf("Macintosh")!==-1&&c.indexOf("Safari")!==-1&&(l=!0),l}},3910:function(s,e){e.byteLength=function(f){var d=l(f),w=d[0],v=d[1];return 3*(w+v)/4-v},e.toByteArray=function(f){var d,w,v=l(f),p=v[0],y=v[1],b=new a(function(g,A,M){return 3*(A+M)/4-M}(0,p,y)),x=0,_=y>0?p-4:p;for(w=0;w<_;w+=4)d=n[f.charCodeAt(w)]<<18|n[f.charCodeAt(w+1)]<<12|n[f.charCodeAt(w+2)]<<6|n[f.charCodeAt(w+3)],b[x++]=d>>16&255,b[x++]=d>>8&255,b[x++]=255&d;return y===2&&(d=n[f.charCodeAt(w)]<<2|n[f.charCodeAt(w+1)]>>4,b[x++]=255&d),y===1&&(d=n[f.charCodeAt(w)]<<10|n[f.charCodeAt(w+1)]<<4|n[f.charCodeAt(w+2)]>>2,b[x++]=d>>8&255,b[x++]=255&d),b},e.fromByteArray=function(f){for(var d,w=f.length,v=w%3,p=[],y=16383,b=0,x=w-v;b<x;b+=y)p.push(u(f,b,b+y>x?x:b+y));return v===1?(d=f[w-1],p.push(t[d>>2]+t[d<<4&63]+"==")):v===2&&(d=(f[w-2]<<8)+f[w-1],p.push(t[d>>10]+t[d>>4&63]+t[d<<2&63]+"=")),p.join("")};for(var t=[],n=[],a=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0;c<64;++c)t[c]=i[c],n[i.charCodeAt(c)]=c;function l(f){var d=f.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=f.indexOf("=");return w===-1&&(w=d),[w,w===d?0:4-w%4]}function u(f,d,w){for(var v,p,y=[],b=d;b<w;b+=3)v=(f[b]<<16&16711680)+(f[b+1]<<8&65280)+(255&f[b+2]),y.push(t[(p=v)>>18&63]+t[p>>12&63]+t[p>>6&63]+t[63&p]);return y.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3187:function(s,e){e.read=function(t,n,a,i,c){var l,u,f=8*c-i-1,d=(1<<f)-1,w=d>>1,v=-7,p=a?c-1:0,y=a?-1:1,b=t[n+p];for(p+=y,l=b&(1<<-v)-1,b>>=-v,v+=f;v>0;l=256*l+t[n+p],p+=y,v-=8);for(u=l&(1<<-v)-1,l>>=-v,v+=i;v>0;u=256*u+t[n+p],p+=y,v-=8);if(l===0)l=1-w;else{if(l===d)return u?NaN:1/0*(b?-1:1);u+=Math.pow(2,i),l-=w}return(b?-1:1)*u*Math.pow(2,l-i)},e.write=function(t,n,a,i,c,l){var u,f,d,w=8*l-c-1,v=(1<<w)-1,p=v>>1,y=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:l-1,x=i?1:-1,_=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(f=isNaN(n)?1:0,u=v):(u=Math.floor(Math.log(n)/Math.LN2),n*(d=Math.pow(2,-u))<1&&(u--,d*=2),(n+=u+p>=1?y/d:y*Math.pow(2,1-p))*d>=2&&(u++,d/=2),u+p>=v?(f=0,u=v):u+p>=1?(f=(n*d-1)*Math.pow(2,c),u+=p):(f=n*Math.pow(2,p-1)*Math.pow(2,c),u=0));c>=8;t[a+b]=255&f,b+=x,f/=256,c-=8);for(u=u<<c|f,w+=c;w>0;t[a+b]=255&u,b+=x,u/=256,w-=8);t[a+b-x]|=128*_}},1152:function(s,e,t){s.exports=function(u){var f=(u=u||{}).eye||[0,0,1],d=u.center||[0,0,0],w=u.up||[0,1,0],v=u.distanceLimits||[0,1/0],p=u.mode||"turntable",y=n(),b=a(),x=i();return y.setDistanceLimits(v[0],v[1]),y.lookAt(0,f,d,w),b.setDistanceLimits(v[0],v[1]),b.lookAt(0,f,d,w),x.setDistanceLimits(v[0],v[1]),x.lookAt(0,f,d,w),new c({turntable:y,orbit:b,matrix:x},p)};var n=t(3440),a=t(7774),i=t(9298);function c(u,f){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(d){return u[d]}),this._mode=f,this._active=u[f],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var l=c.prototype;l.flush=function(u){for(var f=this._controllerList,d=0;d<f.length;++d)f[d].flush(u)},l.idle=function(u){for(var f=this._controllerList,d=0;d<f.length;++d)f[d].idle(u)},l.lookAt=function(u,f,d,w){for(var v=this._controllerList,p=0;p<v.length;++p)v[p].lookAt(u,f,d,w)},l.rotate=function(u,f,d,w){for(var v=this._controllerList,p=0;p<v.length;++p)v[p].rotate(u,f,d,w)},l.pan=function(u,f,d,w){for(var v=this._controllerList,p=0;p<v.length;++p)v[p].pan(u,f,d,w)},l.translate=function(u,f,d,w){for(var v=this._controllerList,p=0;p<v.length;++p)v[p].translate(u,f,d,w)},l.setMatrix=function(u,f){for(var d=this._controllerList,w=0;w<d.length;++w)d[w].setMatrix(u,f)},l.setDistanceLimits=function(u,f){for(var d=this._controllerList,w=0;w<d.length;++w)d[w].setDistanceLimits(u,f)},l.setDistance=function(u,f){for(var d=this._controllerList,w=0;w<d.length;++w)d[w].setDistance(u,f)},l.recalcMatrix=function(u){this._active.recalcMatrix(u)},l.getDistance=function(u){return this._active.getDistance(u)},l.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},l.lastT=function(){return this._active.lastT()},l.setMode=function(u){if(u!==this._mode){var f=this._controllerNames.indexOf(u);if(!(f<0)){var d=this._active,w=this._controllerList[f],v=Math.max(d.lastT(),w.lastT());d.recalcMatrix(v),w.setMatrix(v,d.computedMatrix),this._active=w,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},l.getMode=function(){return this._mode}},8126:function(s,e,t){var n=typeof WeakMap>"u"?t(5346):WeakMap,a=t(5827),i=t(2944),c=new n;s.exports=function(l){var u=c.get(l),f=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!f||!l.isBuffer(f)){var d=a(l,new Float32Array([-1,-1,-1,4,4,-1]));(u=i(l,[{buffer:d,type:l.FLOAT,size:2}]))._triangleBuffer=d,c.set(l,u)}u.bind(),l.drawArrays(l.TRIANGLES,0,3),u.unbind()}},8008:function(s,e,t){var n=t(4930);s.exports=function(a,i,c){i=typeof i=="number"?i:1,c=c||": ";var l=a.split(/\r?\n/),u=String(l.length+i-1).length;return l.map(function(f,d){var w=d+i,v=String(w).length;return n(w,u-v)+c+f}).join(`
`)}},2153:function(s,e,t){s.exports=function(i){var c=i.length;if(c===0)return[];if(c===1)return[0];for(var l=i[0].length,u=[i[0]],f=[0],d=1;d<c;++d)if(u.push(i[d]),a(u,l)){if(f.push(d),f.length===l+1)return f}else u.pop();return f};var n=t(417);function a(i,c){for(var l=new Array(c+1),u=0;u<i.length;++u)l[u]=i[u];for(u=0;u<=i.length;++u){for(var f=i.length;f<=c;++f){for(var d=new Array(c),w=0;w<c;++w)d[w]=Math.pow(f+1-u,w);l[f]=d}if(n.apply(void 0,l))return!0}return!1}},4653:function(s,e,t){s.exports=function(i,c){return n(c).filter(function(l){for(var u=new Array(l.length),f=0;f<l.length;++f)u[f]=c[l[f]];return a(u)*i<1})};var n=t(4419),a=t(1778)},2350:function(s,e,t){s.exports=function(i,c){return a(n(i,c))};var n=t(4653),a=t(8691)},7896:function(s){s.exports=function(e){return atob(e)}},957:function(s,e,t){s.exports=function(i,c){for(var l=c.length,u=new Array(l+1),f=0;f<l;++f){for(var d=new Array(l+1),w=0;w<=l;++w)d[w]=i[w][f];u[f]=d}for(u[l]=new Array(l+1),f=0;f<=l;++f)u[l][f]=1;var v=new Array(l+1);for(f=0;f<l;++f)v[f]=c[f];v[l]=1;var p=n(u,v),y=a(p[l+1]);y===0&&(y=1);var b=new Array(l+1);for(f=0;f<=l;++f)b[f]=a(p[f])/y;return b};var n=t(6606);function a(i){for(var c=0,l=0;l<i.length;++l)c+=i[l];return c}},1539:function(s,e,t){var n=t(8524);s.exports=function(a,i){return n(a[0].mul(i[1]).add(i[0].mul(a[1])),a[1].mul(i[1]))}},8846:function(s){s.exports=function(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}},9189:function(s,e,t){var n=t(8524);s.exports=function(a,i){return n(a[0].mul(i[1]),a[1].mul(i[0]))}},5125:function(s,e,t){var n=t(234),a=t(3218),i=t(5514),c=t(2813),l=t(8524),u=t(9189);s.exports=function f(d,w){if(n(d))return w?u(d,f(w)):[d[0].clone(),d[1].clone()];var v,p,y=0;if(a(d))v=d.clone();else if(typeof d=="string")v=c(d);else{if(d===0)return[i(0),i(1)];if(d===Math.floor(d))v=i(d);else{for(;d!==Math.floor(d);)d*=Math.pow(2,256),y-=256;v=i(d)}}if(n(w))v.mul(w[1]),p=w[0].clone();else if(a(w))p=w.clone();else if(typeof w=="string")p=c(w);else if(w)if(w===Math.floor(w))p=i(w);else{for(;w!==Math.floor(w);)w*=Math.pow(2,256),y+=256;p=i(w)}else p=i(1);return y>0?v=v.ushln(y):y<0&&(p=p.ushln(-y)),l(v,p)}},234:function(s,e,t){var n=t(3218);s.exports=function(a){return Array.isArray(a)&&a.length===2&&n(a[0])&&n(a[1])}},4275:function(s,e,t){var n=t(1928);s.exports=function(a){return a.cmp(new n(0))}},9958:function(s,e,t){var n=t(4275);s.exports=function(a){var i=a.length,c=a.words,l=0;if(i===1)l=c[0];else if(i===2)l=c[0]+67108864*c[1];else for(var u=0;u<i;u++)l+=c[u]*Math.pow(67108864,u);return n(a)*l}},1112:function(s,e,t){var n=t(8362),a=t(2288).countTrailingZeros;s.exports=function(i){var c=a(n.lo(i));if(c<32)return c;var l=a(n.hi(i));return l>20?52:l+32}},3218:function(s,e,t){t(1928),s.exports=function(n){return n&&typeof n=="object"&&Boolean(n.words)}},5514:function(s,e,t){var n=t(1928),a=t(8362);s.exports=function(i){var c=a.exponent(i);return c<52?new n(i):new n(i*Math.pow(2,52-c)).ushln(c-52)}},8524:function(s,e,t){var n=t(5514),a=t(4275);s.exports=function(i,c){var l=a(i),u=a(c);if(l===0)return[n(0),n(1)];if(u===0)return[n(0),n(0)];u<0&&(i=i.neg(),c=c.neg());var f=i.gcd(c);return f.cmpn(1)?[i.div(f),c.div(f)]:[i,c]}},2813:function(s,e,t){var n=t(1928);s.exports=function(a){return new n(a)}},3962:function(s,e,t){var n=t(8524);s.exports=function(a,i){return n(a[0].mul(i[0]),a[1].mul(i[1]))}},4951:function(s,e,t){var n=t(4275);s.exports=function(a){return n(a[0])*n(a[1])}},4354:function(s,e,t){var n=t(8524);s.exports=function(a,i){return n(a[0].mul(i[1]).sub(a[1].mul(i[0])),a[1].mul(i[1]))}},7999:function(s,e,t){var n=t(9958),a=t(1112);s.exports=function(i){var c=i[0],l=i[1];if(c.cmpn(0)===0)return 0;var u=c.abs().divmod(l.abs()),f=u.div,d=n(f),w=u.mod,v=c.negative!==l.negative?-1:1;if(w.cmpn(0)===0)return v*d;if(d){var p=a(d)+4;return v*(d+(b=n(w.ushln(p).divRound(l)))*Math.pow(2,-p))}var y=l.bitLength()-w.bitLength()+53,b=n(w.ushln(y).divRound(l));return y<1023?v*b*Math.pow(2,-y):v*(b*=Math.pow(2,-1023))*Math.pow(2,1023-y)}},5070:function(s){function e(l,u,f,d,w){for(var v=w+1;d<=w;){var p=d+w>>>1,y=l[p];(f!==void 0?f(y,u):y-u)>=0?(v=p,w=p-1):d=p+1}return v}function t(l,u,f,d,w){for(var v=w+1;d<=w;){var p=d+w>>>1,y=l[p];(f!==void 0?f(y,u):y-u)>0?(v=p,w=p-1):d=p+1}return v}function n(l,u,f,d,w){for(var v=d-1;d<=w;){var p=d+w>>>1,y=l[p];(f!==void 0?f(y,u):y-u)<0?(v=p,d=p+1):w=p-1}return v}function a(l,u,f,d,w){for(var v=d-1;d<=w;){var p=d+w>>>1,y=l[p];(f!==void 0?f(y,u):y-u)<=0?(v=p,d=p+1):w=p-1}return v}function i(l,u,f,d,w){for(;d<=w;){var v=d+w>>>1,p=l[v],y=f!==void 0?f(p,u):p-u;if(y===0)return v;y<=0?d=v+1:w=v-1}return-1}function c(l,u,f,d,w,v){return typeof f=="function"?v(l,u,f,d===void 0?0:0|d,w===void 0?l.length-1:0|w):v(l,u,void 0,f===void 0?0:0|f,d===void 0?l.length-1:0|d)}s.exports={ge:function(l,u,f,d,w){return c(l,u,f,d,w,e)},gt:function(l,u,f,d,w){return c(l,u,f,d,w,t)},lt:function(l,u,f,d,w){return c(l,u,f,d,w,n)},le:function(l,u,f,d,w){return c(l,u,f,d,w,a)},eq:function(l,u,f,d,w){return c(l,u,f,d,w,i)}}},2288:function(s,e){function t(a){var i=32;return(a&=-a)&&i--,65535&a&&(i-=16),16711935&a&&(i-=8),252645135&a&&(i-=4),858993459&a&&(i-=2),1431655765&a&&(i-=1),i}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-2147483648,e.sign=function(a){return(a>0)-(a<0)},e.abs=function(a){var i=a>>31;return(a^i)-i},e.min=function(a,i){return i^(a^i)&-(a<i)},e.max=function(a,i){return a^(a^i)&-(a<i)},e.isPow2=function(a){return!(a&a-1||!a)},e.log2=function(a){var i,c;return i=(a>65535)<<4,i|=c=((a>>>=i)>255)<<3,i|=c=((a>>>=c)>15)<<2,(i|=c=((a>>>=c)>3)<<1)|(a>>>=c)>>1},e.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},e.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},e.countTrailingZeros=t,e.nextPow2=function(a){return a+=a===0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,1+((a|=a>>>8)|a>>>16)},e.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},e.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var n=new Array(256);(function(a){for(var i=0;i<256;++i){var c=i,l=i,u=7;for(c>>>=1;c;c>>>=1)l<<=1,l|=1&c,--u;a[i]=l<<u&255}})(n),e.reverse=function(a){return n[255&a]<<24|n[a>>>8&255]<<16|n[a>>>16&255]<<8|n[a>>>24&255]},e.interleave2=function(a,i){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))<<1},e.deinterleave2=function(a,i){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>i&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},e.interleave3=function(a,i,c){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<1)|(c=1227133513&((c=3272356035&((c=251719695&((c=4278190335&((c&=1023)|c<<16))|c<<8))|c<<4))|c<<2))<<2},e.deinterleave3=function(a,i){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>i&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},e.nextCombination=function(a){var i=a|a-1;return i+1|(~i&-~i)-1>>>t(a)+1}},1928:function(s,e,t){(function(n,a){function i(R,j){if(!R)throw new Error(j||"Assertion failed")}function c(R,j){R.super_=j;var B=function(){};B.prototype=j.prototype,R.prototype=new B,R.prototype.constructor=R}function l(R,j,B){if(l.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&(j!=="le"&&j!=="be"||(B=j,j=10),this._init(R||0,j||10,B||"be"))}var u;typeof n=="object"?n.exports=l:a.BN=l,l.BN=l,l.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(6601).Buffer}catch{}function f(R,j){var B=R.charCodeAt(j);return B>=65&&B<=70?B-55:B>=97&&B<=102?B-87:B-48&15}function d(R,j,B){var z=f(R,B);return B-1>=j&&(z|=f(R,B-1)<<4),z}function w(R,j,B,z){for(var G=0,V=Math.min(R.length,B),et=j;et<V;et++){var J=R.charCodeAt(et)-48;G*=z,G+=J>=49?J-49+10:J>=17?J-17+10:J}return G}l.isBN=function(R){return R instanceof l||R!==null&&typeof R=="object"&&R.constructor.wordSize===l.wordSize&&Array.isArray(R.words)},l.max=function(R,j){return R.cmp(j)>0?R:j},l.min=function(R,j){return R.cmp(j)<0?R:j},l.prototype._init=function(R,j,B){if(typeof R=="number")return this._initNumber(R,j,B);if(typeof R=="object")return this._initArray(R,j,B);j==="hex"&&(j=16),i(j===(0|j)&&j>=2&&j<=36);var z=0;(R=R.toString().replace(/\s+/g,""))[0]==="-"&&(z++,this.negative=1),z<R.length&&(j===16?this._parseHex(R,z,B):(this._parseBase(R,j,z),B==="le"&&this._initArray(this.toArray(),j,B)))},l.prototype._initNumber=function(R,j,B){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[67108863&R],this.length=1):R<4503599627370496?(this.words=[67108863&R,R/67108864&67108863],this.length=2):(i(R<9007199254740992),this.words=[67108863&R,R/67108864&67108863,1],this.length=3),B==="le"&&this._initArray(this.toArray(),j,B)},l.prototype._initArray=function(R,j,B){if(i(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G,V,et=0;if(B==="be")for(z=R.length-1,G=0;z>=0;z-=3)V=R[z]|R[z-1]<<8|R[z-2]<<16,this.words[G]|=V<<et&67108863,this.words[G+1]=V>>>26-et&67108863,(et+=24)>=26&&(et-=26,G++);else if(B==="le")for(z=0,G=0;z<R.length;z+=3)V=R[z]|R[z+1]<<8|R[z+2]<<16,this.words[G]|=V<<et&67108863,this.words[G+1]=V>>>26-et&67108863,(et+=24)>=26&&(et-=26,G++);return this.strip()},l.prototype._parseHex=function(R,j,B){this.length=Math.ceil((R.length-j)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G,V=0,et=0;if(B==="be")for(z=R.length-1;z>=j;z-=2)G=d(R,j,z)<<V,this.words[et]|=67108863&G,V>=18?(V-=18,et+=1,this.words[et]|=G>>>26):V+=8;else for(z=(R.length-j)%2==0?j+1:j;z<R.length;z+=2)G=d(R,j,z)<<V,this.words[et]|=67108863&G,V>=18?(V-=18,et+=1,this.words[et]|=G>>>26):V+=8;this.strip()},l.prototype._parseBase=function(R,j,B){this.words=[0],this.length=1;for(var z=0,G=1;G<=67108863;G*=j)z++;z--,G=G/j|0;for(var V=R.length-B,et=V%z,J=Math.min(V,V-et)+B,X=0,Y=B;Y<J;Y+=z)X=w(R,Y,Y+z,j),this.imuln(G),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(et!==0){var Z=1;for(X=w(R,Y,R.length,j),Y=0;Y<et;Y++)Z*=j;this.imuln(Z),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},l.prototype.copy=function(R){R.words=new Array(this.length);for(var j=0;j<this.length;j++)R.words[j]=this.words[j];R.length=this.length,R.negative=this.negative,R.red=this.red},l.prototype.clone=function(){var R=new l(null);return this.copy(R),R},l.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function b(R,j,B){B.negative=j.negative^R.negative;var z=R.length+j.length|0;B.length=z,z=z-1|0;var G=0|R.words[0],V=0|j.words[0],et=G*V,J=67108863&et,X=et/67108864|0;B.words[0]=J;for(var Y=1;Y<z;Y++){for(var Z=X>>>26,tt=67108863&X,rt=Math.min(Y,j.length-1),nt=Math.max(0,Y-R.length+1);nt<=rt;nt++){var ot=Y-nt|0;Z+=(et=(G=0|R.words[ot])*(V=0|j.words[nt])+tt)/67108864|0,tt=67108863&et}B.words[Y]=0|tt,X=0|Z}return X!==0?B.words[Y]=0|X:B.length--,B.strip()}l.prototype.toString=function(R,j){var B;if(j=0|j||1,(R=R||10)===16||R==="hex"){B="";for(var z=0,G=0,V=0;V<this.length;V++){var et=this.words[V],J=(16777215&(et<<z|G)).toString(16);B=(G=et>>>24-z&16777215)!=0||V!==this.length-1?v[6-J.length]+J+B:J+B,(z+=2)>=26&&(z-=26,V--)}for(G!==0&&(B=G.toString(16)+B);B.length%j!=0;)B="0"+B;return this.negative!==0&&(B="-"+B),B}if(R===(0|R)&&R>=2&&R<=36){var X=p[R],Y=y[R];B="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var tt=Z.modn(Y).toString(R);B=(Z=Z.idivn(Y)).isZero()?tt+B:v[X-tt.length]+tt+B}for(this.isZero()&&(B="0"+B);B.length%j!=0;)B="0"+B;return this.negative!==0&&(B="-"+B),B}i(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=67108864*this.words[1]:this.length===3&&this.words[2]===1?R+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(R,j){return i(u!==void 0),this.toArrayLike(u,R,j)},l.prototype.toArray=function(R,j){return this.toArrayLike(Array,R,j)},l.prototype.toArrayLike=function(R,j,B){var z=this.byteLength(),G=B||Math.max(1,z);i(z<=G,"byte array longer than desired length"),i(G>0,"Requested array length <= 0"),this.strip();var V,et,J=j==="le",X=new R(G),Y=this.clone();if(J){for(et=0;!Y.isZero();et++)V=Y.andln(255),Y.iushrn(8),X[et]=V;for(;et<G;et++)X[et]=0}else{for(et=0;et<G-z;et++)X[et]=0;for(et=0;!Y.isZero();et++)V=Y.andln(255),Y.iushrn(8),X[G-et-1]=V}return X},Math.clz32?l.prototype._countBits=function(R){return 32-Math.clz32(R)}:l.prototype._countBits=function(R){var j=R,B=0;return j>=4096&&(B+=13,j>>>=13),j>=64&&(B+=7,j>>>=7),j>=8&&(B+=4,j>>>=4),j>=2&&(B+=2,j>>>=2),B+j},l.prototype._zeroBits=function(R){if(R===0)return 26;var j=R,B=0;return!(8191&j)&&(B+=13,j>>>=13),!(127&j)&&(B+=7,j>>>=7),!(15&j)&&(B+=4,j>>>=4),!(3&j)&&(B+=2,j>>>=2),!(1&j)&&B++,B},l.prototype.bitLength=function(){var R=this.words[this.length-1],j=this._countBits(R);return 26*(this.length-1)+j},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,j=0;j<this.length;j++){var B=this._zeroBits(this.words[j]);if(R+=B,B!==26)break}return R},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},l.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var j=0;j<R.length;j++)this.words[j]=this.words[j]|R.words[j];return this.strip()},l.prototype.ior=function(R){return i((this.negative|R.negative)==0),this.iuor(R)},l.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},l.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},l.prototype.iuand=function(R){var j;j=this.length>R.length?R:this;for(var B=0;B<j.length;B++)this.words[B]=this.words[B]&R.words[B];return this.length=j.length,this.strip()},l.prototype.iand=function(R){return i((this.negative|R.negative)==0),this.iuand(R)},l.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},l.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},l.prototype.iuxor=function(R){var j,B;this.length>R.length?(j=this,B=R):(j=R,B=this);for(var z=0;z<B.length;z++)this.words[z]=j.words[z]^B.words[z];if(this!==j)for(;z<j.length;z++)this.words[z]=j.words[z];return this.length=j.length,this.strip()},l.prototype.ixor=function(R){return i((this.negative|R.negative)==0),this.iuxor(R)},l.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},l.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},l.prototype.inotn=function(R){i(typeof R=="number"&&R>=0);var j=0|Math.ceil(R/26),B=R%26;this._expand(j),B>0&&j--;for(var z=0;z<j;z++)this.words[z]=67108863&~this.words[z];return B>0&&(this.words[z]=~this.words[z]&67108863>>26-B),this.strip()},l.prototype.notn=function(R){return this.clone().inotn(R)},l.prototype.setn=function(R,j){i(typeof R=="number"&&R>=0);var B=R/26|0,z=R%26;return this._expand(B+1),this.words[B]=j?this.words[B]|1<<z:this.words[B]&~(1<<z),this.strip()},l.prototype.iadd=function(R){var j,B,z;if(this.negative!==0&&R.negative===0)return this.negative=0,j=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,j=this.isub(R),R.negative=1,j._normSign();this.length>R.length?(B=this,z=R):(B=R,z=this);for(var G=0,V=0;V<z.length;V++)j=(0|B.words[V])+(0|z.words[V])+G,this.words[V]=67108863&j,G=j>>>26;for(;G!==0&&V<B.length;V++)j=(0|B.words[V])+G,this.words[V]=67108863&j,G=j>>>26;if(this.length=B.length,G!==0)this.words[this.length]=G,this.length++;else if(B!==this)for(;V<B.length;V++)this.words[V]=B.words[V];return this},l.prototype.add=function(R){var j;return R.negative!==0&&this.negative===0?(R.negative=0,j=this.sub(R),R.negative^=1,j):R.negative===0&&this.negative!==0?(this.negative=0,j=R.sub(this),this.negative=1,j):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},l.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var j=this.iadd(R);return R.negative=1,j._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var B,z,G=this.cmp(R);if(G===0)return this.negative=0,this.length=1,this.words[0]=0,this;G>0?(B=this,z=R):(B=R,z=this);for(var V=0,et=0;et<z.length;et++)V=(j=(0|B.words[et])-(0|z.words[et])+V)>>26,this.words[et]=67108863&j;for(;V!==0&&et<B.length;et++)V=(j=(0|B.words[et])+V)>>26,this.words[et]=67108863&j;if(V===0&&et<B.length&&B!==this)for(;et<B.length;et++)this.words[et]=B.words[et];return this.length=Math.max(this.length,et),B!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(R){return this.clone().isub(R)};var x=function(R,j,B){var z,G,V,et=R.words,J=j.words,X=B.words,Y=0,Z=0|et[0],tt=8191&Z,rt=Z>>>13,nt=0|et[1],ot=8191&nt,ct=nt>>>13,pt=0|et[2],gt=8191&pt,kt=pt>>>13,yt=0|et[3],mt=8191&yt,Ot=yt>>>13,vt=0|et[4],xt=8191&vt,st=vt>>>13,at=0|et[5],ht=8191&at,Lt=at>>>13,Mt=0|et[6],_t=8191&Mt,St=Mt>>>13,Dt=0|et[7],ut=8191&Dt,Tt=Dt>>>13,bt=0|et[8],It=8191&bt,zt=bt>>>13,Ft=0|et[9],$t=8191&Ft,Wt=Ft>>>13,Xt=0|J[0],ae=8191&Xt,Qt=Xt>>>13,de=0|J[1],ye=8191&de,ve=de>>>13,ie=0|J[2],se=8191&ie,ke=ie>>>13,Ae=0|J[3],Ie=8191&Ae,Te=Ae>>>13,Vt=0|J[4],Zt=8191&Vt,Gt=Vt>>>13,Yt=0|J[5],ne=8191&Yt,re=Yt>>>13,Pt=0|J[6],Nt=8191&Pt,ee=Pt>>>13,te=0|J[7],ge=8191&te,pe=te>>>13,me=0|J[8],ce=8191&me,we=me>>>13,ue=0|J[9],he=8191&ue,be=ue>>>13;B.negative=R.negative^j.negative,B.length=19;var Pe=(Y+(z=Math.imul(tt,ae))|0)+((8191&(G=(G=Math.imul(tt,Qt))+Math.imul(rt,ae)|0))<<13)|0;Y=((V=Math.imul(rt,Qt))+(G>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,z=Math.imul(ot,ae),G=(G=Math.imul(ot,Qt))+Math.imul(ct,ae)|0,V=Math.imul(ct,Qt);var De=(Y+(z=z+Math.imul(tt,ye)|0)|0)+((8191&(G=(G=G+Math.imul(tt,ve)|0)+Math.imul(rt,ye)|0))<<13)|0;Y=((V=V+Math.imul(rt,ve)|0)+(G>>>13)|0)+(De>>>26)|0,De&=67108863,z=Math.imul(gt,ae),G=(G=Math.imul(gt,Qt))+Math.imul(kt,ae)|0,V=Math.imul(kt,Qt),z=z+Math.imul(ot,ye)|0,G=(G=G+Math.imul(ot,ve)|0)+Math.imul(ct,ye)|0,V=V+Math.imul(ct,ve)|0;var Ue=(Y+(z=z+Math.imul(tt,se)|0)|0)+((8191&(G=(G=G+Math.imul(tt,ke)|0)+Math.imul(rt,se)|0))<<13)|0;Y=((V=V+Math.imul(rt,ke)|0)+(G>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,z=Math.imul(mt,ae),G=(G=Math.imul(mt,Qt))+Math.imul(Ot,ae)|0,V=Math.imul(Ot,Qt),z=z+Math.imul(gt,ye)|0,G=(G=G+Math.imul(gt,ve)|0)+Math.imul(kt,ye)|0,V=V+Math.imul(kt,ve)|0,z=z+Math.imul(ot,se)|0,G=(G=G+Math.imul(ot,ke)|0)+Math.imul(ct,se)|0,V=V+Math.imul(ct,ke)|0;var tr=(Y+(z=z+Math.imul(tt,Ie)|0)|0)+((8191&(G=(G=G+Math.imul(tt,Te)|0)+Math.imul(rt,Ie)|0))<<13)|0;Y=((V=V+Math.imul(rt,Te)|0)+(G>>>13)|0)+(tr>>>26)|0,tr&=67108863,z=Math.imul(xt,ae),G=(G=Math.imul(xt,Qt))+Math.imul(st,ae)|0,V=Math.imul(st,Qt),z=z+Math.imul(mt,ye)|0,G=(G=G+Math.imul(mt,ve)|0)+Math.imul(Ot,ye)|0,V=V+Math.imul(Ot,ve)|0,z=z+Math.imul(gt,se)|0,G=(G=G+Math.imul(gt,ke)|0)+Math.imul(kt,se)|0,V=V+Math.imul(kt,ke)|0,z=z+Math.imul(ot,Ie)|0,G=(G=G+Math.imul(ot,Te)|0)+Math.imul(ct,Ie)|0,V=V+Math.imul(ct,Te)|0;var Ge=(Y+(z=z+Math.imul(tt,Zt)|0)|0)+((8191&(G=(G=G+Math.imul(tt,Gt)|0)+Math.imul(rt,Zt)|0))<<13)|0;Y=((V=V+Math.imul(rt,Gt)|0)+(G>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,z=Math.imul(ht,ae),G=(G=Math.imul(ht,Qt))+Math.imul(Lt,ae)|0,V=Math.imul(Lt,Qt),z=z+Math.imul(xt,ye)|0,G=(G=G+Math.imul(xt,ve)|0)+Math.imul(st,ye)|0,V=V+Math.imul(st,ve)|0,z=z+Math.imul(mt,se)|0,G=(G=G+Math.imul(mt,ke)|0)+Math.imul(Ot,se)|0,V=V+Math.imul(Ot,ke)|0,z=z+Math.imul(gt,Ie)|0,G=(G=G+Math.imul(gt,Te)|0)+Math.imul(kt,Ie)|0,V=V+Math.imul(kt,Te)|0,z=z+Math.imul(ot,Zt)|0,G=(G=G+Math.imul(ot,Gt)|0)+Math.imul(ct,Zt)|0,V=V+Math.imul(ct,Gt)|0;var Ze=(Y+(z=z+Math.imul(tt,ne)|0)|0)+((8191&(G=(G=G+Math.imul(tt,re)|0)+Math.imul(rt,ne)|0))<<13)|0;Y=((V=V+Math.imul(rt,re)|0)+(G>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,z=Math.imul(_t,ae),G=(G=Math.imul(_t,Qt))+Math.imul(St,ae)|0,V=Math.imul(St,Qt),z=z+Math.imul(ht,ye)|0,G=(G=G+Math.imul(ht,ve)|0)+Math.imul(Lt,ye)|0,V=V+Math.imul(Lt,ve)|0,z=z+Math.imul(xt,se)|0,G=(G=G+Math.imul(xt,ke)|0)+Math.imul(st,se)|0,V=V+Math.imul(st,ke)|0,z=z+Math.imul(mt,Ie)|0,G=(G=G+Math.imul(mt,Te)|0)+Math.imul(Ot,Ie)|0,V=V+Math.imul(Ot,Te)|0,z=z+Math.imul(gt,Zt)|0,G=(G=G+Math.imul(gt,Gt)|0)+Math.imul(kt,Zt)|0,V=V+Math.imul(kt,Gt)|0,z=z+Math.imul(ot,ne)|0,G=(G=G+Math.imul(ot,re)|0)+Math.imul(ct,ne)|0,V=V+Math.imul(ct,re)|0;var We=(Y+(z=z+Math.imul(tt,Nt)|0)|0)+((8191&(G=(G=G+Math.imul(tt,ee)|0)+Math.imul(rt,Nt)|0))<<13)|0;Y=((V=V+Math.imul(rt,ee)|0)+(G>>>13)|0)+(We>>>26)|0,We&=67108863,z=Math.imul(ut,ae),G=(G=Math.imul(ut,Qt))+Math.imul(Tt,ae)|0,V=Math.imul(Tt,Qt),z=z+Math.imul(_t,ye)|0,G=(G=G+Math.imul(_t,ve)|0)+Math.imul(St,ye)|0,V=V+Math.imul(St,ve)|0,z=z+Math.imul(ht,se)|0,G=(G=G+Math.imul(ht,ke)|0)+Math.imul(Lt,se)|0,V=V+Math.imul(Lt,ke)|0,z=z+Math.imul(xt,Ie)|0,G=(G=G+Math.imul(xt,Te)|0)+Math.imul(st,Ie)|0,V=V+Math.imul(st,Te)|0,z=z+Math.imul(mt,Zt)|0,G=(G=G+Math.imul(mt,Gt)|0)+Math.imul(Ot,Zt)|0,V=V+Math.imul(Ot,Gt)|0,z=z+Math.imul(gt,ne)|0,G=(G=G+Math.imul(gt,re)|0)+Math.imul(kt,ne)|0,V=V+Math.imul(kt,re)|0,z=z+Math.imul(ot,Nt)|0,G=(G=G+Math.imul(ot,ee)|0)+Math.imul(ct,Nt)|0,V=V+Math.imul(ct,ee)|0;var pr=(Y+(z=z+Math.imul(tt,ge)|0)|0)+((8191&(G=(G=G+Math.imul(tt,pe)|0)+Math.imul(rt,ge)|0))<<13)|0;Y=((V=V+Math.imul(rt,pe)|0)+(G>>>13)|0)+(pr>>>26)|0,pr&=67108863,z=Math.imul(It,ae),G=(G=Math.imul(It,Qt))+Math.imul(zt,ae)|0,V=Math.imul(zt,Qt),z=z+Math.imul(ut,ye)|0,G=(G=G+Math.imul(ut,ve)|0)+Math.imul(Tt,ye)|0,V=V+Math.imul(Tt,ve)|0,z=z+Math.imul(_t,se)|0,G=(G=G+Math.imul(_t,ke)|0)+Math.imul(St,se)|0,V=V+Math.imul(St,ke)|0,z=z+Math.imul(ht,Ie)|0,G=(G=G+Math.imul(ht,Te)|0)+Math.imul(Lt,Ie)|0,V=V+Math.imul(Lt,Te)|0,z=z+Math.imul(xt,Zt)|0,G=(G=G+Math.imul(xt,Gt)|0)+Math.imul(st,Zt)|0,V=V+Math.imul(st,Gt)|0,z=z+Math.imul(mt,ne)|0,G=(G=G+Math.imul(mt,re)|0)+Math.imul(Ot,ne)|0,V=V+Math.imul(Ot,re)|0,z=z+Math.imul(gt,Nt)|0,G=(G=G+Math.imul(gt,ee)|0)+Math.imul(kt,Nt)|0,V=V+Math.imul(kt,ee)|0,z=z+Math.imul(ot,ge)|0,G=(G=G+Math.imul(ot,pe)|0)+Math.imul(ct,ge)|0,V=V+Math.imul(ct,pe)|0;var xr=(Y+(z=z+Math.imul(tt,ce)|0)|0)+((8191&(G=(G=G+Math.imul(tt,we)|0)+Math.imul(rt,ce)|0))<<13)|0;Y=((V=V+Math.imul(rt,we)|0)+(G>>>13)|0)+(xr>>>26)|0,xr&=67108863,z=Math.imul($t,ae),G=(G=Math.imul($t,Qt))+Math.imul(Wt,ae)|0,V=Math.imul(Wt,Qt),z=z+Math.imul(It,ye)|0,G=(G=G+Math.imul(It,ve)|0)+Math.imul(zt,ye)|0,V=V+Math.imul(zt,ve)|0,z=z+Math.imul(ut,se)|0,G=(G=G+Math.imul(ut,ke)|0)+Math.imul(Tt,se)|0,V=V+Math.imul(Tt,ke)|0,z=z+Math.imul(_t,Ie)|0,G=(G=G+Math.imul(_t,Te)|0)+Math.imul(St,Ie)|0,V=V+Math.imul(St,Te)|0,z=z+Math.imul(ht,Zt)|0,G=(G=G+Math.imul(ht,Gt)|0)+Math.imul(Lt,Zt)|0,V=V+Math.imul(Lt,Gt)|0,z=z+Math.imul(xt,ne)|0,G=(G=G+Math.imul(xt,re)|0)+Math.imul(st,ne)|0,V=V+Math.imul(st,re)|0,z=z+Math.imul(mt,Nt)|0,G=(G=G+Math.imul(mt,ee)|0)+Math.imul(Ot,Nt)|0,V=V+Math.imul(Ot,ee)|0,z=z+Math.imul(gt,ge)|0,G=(G=G+Math.imul(gt,pe)|0)+Math.imul(kt,ge)|0,V=V+Math.imul(kt,pe)|0,z=z+Math.imul(ot,ce)|0,G=(G=G+Math.imul(ot,we)|0)+Math.imul(ct,ce)|0,V=V+Math.imul(ct,we)|0;var sr=(Y+(z=z+Math.imul(tt,he)|0)|0)+((8191&(G=(G=G+Math.imul(tt,be)|0)+Math.imul(rt,he)|0))<<13)|0;Y=((V=V+Math.imul(rt,be)|0)+(G>>>13)|0)+(sr>>>26)|0,sr&=67108863,z=Math.imul($t,ye),G=(G=Math.imul($t,ve))+Math.imul(Wt,ye)|0,V=Math.imul(Wt,ve),z=z+Math.imul(It,se)|0,G=(G=G+Math.imul(It,ke)|0)+Math.imul(zt,se)|0,V=V+Math.imul(zt,ke)|0,z=z+Math.imul(ut,Ie)|0,G=(G=G+Math.imul(ut,Te)|0)+Math.imul(Tt,Ie)|0,V=V+Math.imul(Tt,Te)|0,z=z+Math.imul(_t,Zt)|0,G=(G=G+Math.imul(_t,Gt)|0)+Math.imul(St,Zt)|0,V=V+Math.imul(St,Gt)|0,z=z+Math.imul(ht,ne)|0,G=(G=G+Math.imul(ht,re)|0)+Math.imul(Lt,ne)|0,V=V+Math.imul(Lt,re)|0,z=z+Math.imul(xt,Nt)|0,G=(G=G+Math.imul(xt,ee)|0)+Math.imul(st,Nt)|0,V=V+Math.imul(st,ee)|0,z=z+Math.imul(mt,ge)|0,G=(G=G+Math.imul(mt,pe)|0)+Math.imul(Ot,ge)|0,V=V+Math.imul(Ot,pe)|0,z=z+Math.imul(gt,ce)|0,G=(G=G+Math.imul(gt,we)|0)+Math.imul(kt,ce)|0,V=V+Math.imul(kt,we)|0;var $e=(Y+(z=z+Math.imul(ot,he)|0)|0)+((8191&(G=(G=G+Math.imul(ot,be)|0)+Math.imul(ct,he)|0))<<13)|0;Y=((V=V+Math.imul(ct,be)|0)+(G>>>13)|0)+($e>>>26)|0,$e&=67108863,z=Math.imul($t,se),G=(G=Math.imul($t,ke))+Math.imul(Wt,se)|0,V=Math.imul(Wt,ke),z=z+Math.imul(It,Ie)|0,G=(G=G+Math.imul(It,Te)|0)+Math.imul(zt,Ie)|0,V=V+Math.imul(zt,Te)|0,z=z+Math.imul(ut,Zt)|0,G=(G=G+Math.imul(ut,Gt)|0)+Math.imul(Tt,Zt)|0,V=V+Math.imul(Tt,Gt)|0,z=z+Math.imul(_t,ne)|0,G=(G=G+Math.imul(_t,re)|0)+Math.imul(St,ne)|0,V=V+Math.imul(St,re)|0,z=z+Math.imul(ht,Nt)|0,G=(G=G+Math.imul(ht,ee)|0)+Math.imul(Lt,Nt)|0,V=V+Math.imul(Lt,ee)|0,z=z+Math.imul(xt,ge)|0,G=(G=G+Math.imul(xt,pe)|0)+Math.imul(st,ge)|0,V=V+Math.imul(st,pe)|0,z=z+Math.imul(mt,ce)|0,G=(G=G+Math.imul(mt,we)|0)+Math.imul(Ot,ce)|0,V=V+Math.imul(Ot,we)|0;var ir=(Y+(z=z+Math.imul(gt,he)|0)|0)+((8191&(G=(G=G+Math.imul(gt,be)|0)+Math.imul(kt,he)|0))<<13)|0;Y=((V=V+Math.imul(kt,be)|0)+(G>>>13)|0)+(ir>>>26)|0,ir&=67108863,z=Math.imul($t,Ie),G=(G=Math.imul($t,Te))+Math.imul(Wt,Ie)|0,V=Math.imul(Wt,Te),z=z+Math.imul(It,Zt)|0,G=(G=G+Math.imul(It,Gt)|0)+Math.imul(zt,Zt)|0,V=V+Math.imul(zt,Gt)|0,z=z+Math.imul(ut,ne)|0,G=(G=G+Math.imul(ut,re)|0)+Math.imul(Tt,ne)|0,V=V+Math.imul(Tt,re)|0,z=z+Math.imul(_t,Nt)|0,G=(G=G+Math.imul(_t,ee)|0)+Math.imul(St,Nt)|0,V=V+Math.imul(St,ee)|0,z=z+Math.imul(ht,ge)|0,G=(G=G+Math.imul(ht,pe)|0)+Math.imul(Lt,ge)|0,V=V+Math.imul(Lt,pe)|0,z=z+Math.imul(xt,ce)|0,G=(G=G+Math.imul(xt,we)|0)+Math.imul(st,ce)|0,V=V+Math.imul(st,we)|0;var Ke=(Y+(z=z+Math.imul(mt,he)|0)|0)+((8191&(G=(G=G+Math.imul(mt,be)|0)+Math.imul(Ot,he)|0))<<13)|0;Y=((V=V+Math.imul(Ot,be)|0)+(G>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,z=Math.imul($t,Zt),G=(G=Math.imul($t,Gt))+Math.imul(Wt,Zt)|0,V=Math.imul(Wt,Gt),z=z+Math.imul(It,ne)|0,G=(G=G+Math.imul(It,re)|0)+Math.imul(zt,ne)|0,V=V+Math.imul(zt,re)|0,z=z+Math.imul(ut,Nt)|0,G=(G=G+Math.imul(ut,ee)|0)+Math.imul(Tt,Nt)|0,V=V+Math.imul(Tt,ee)|0,z=z+Math.imul(_t,ge)|0,G=(G=G+Math.imul(_t,pe)|0)+Math.imul(St,ge)|0,V=V+Math.imul(St,pe)|0,z=z+Math.imul(ht,ce)|0,G=(G=G+Math.imul(ht,we)|0)+Math.imul(Lt,ce)|0,V=V+Math.imul(Lt,we)|0;var ar=(Y+(z=z+Math.imul(xt,he)|0)|0)+((8191&(G=(G=G+Math.imul(xt,be)|0)+Math.imul(st,he)|0))<<13)|0;Y=((V=V+Math.imul(st,be)|0)+(G>>>13)|0)+(ar>>>26)|0,ar&=67108863,z=Math.imul($t,ne),G=(G=Math.imul($t,re))+Math.imul(Wt,ne)|0,V=Math.imul(Wt,re),z=z+Math.imul(It,Nt)|0,G=(G=G+Math.imul(It,ee)|0)+Math.imul(zt,Nt)|0,V=V+Math.imul(zt,ee)|0,z=z+Math.imul(ut,ge)|0,G=(G=G+Math.imul(ut,pe)|0)+Math.imul(Tt,ge)|0,V=V+Math.imul(Tt,pe)|0,z=z+Math.imul(_t,ce)|0,G=(G=G+Math.imul(_t,we)|0)+Math.imul(St,ce)|0,V=V+Math.imul(St,we)|0;var fr=(Y+(z=z+Math.imul(ht,he)|0)|0)+((8191&(G=(G=G+Math.imul(ht,be)|0)+Math.imul(Lt,he)|0))<<13)|0;Y=((V=V+Math.imul(Lt,be)|0)+(G>>>13)|0)+(fr>>>26)|0,fr&=67108863,z=Math.imul($t,Nt),G=(G=Math.imul($t,ee))+Math.imul(Wt,Nt)|0,V=Math.imul(Wt,ee),z=z+Math.imul(It,ge)|0,G=(G=G+Math.imul(It,pe)|0)+Math.imul(zt,ge)|0,V=V+Math.imul(zt,pe)|0,z=z+Math.imul(ut,ce)|0,G=(G=G+Math.imul(ut,we)|0)+Math.imul(Tt,ce)|0,V=V+Math.imul(Tt,we)|0;var mr=(Y+(z=z+Math.imul(_t,he)|0)|0)+((8191&(G=(G=G+Math.imul(_t,be)|0)+Math.imul(St,he)|0))<<13)|0;Y=((V=V+Math.imul(St,be)|0)+(G>>>13)|0)+(mr>>>26)|0,mr&=67108863,z=Math.imul($t,ge),G=(G=Math.imul($t,pe))+Math.imul(Wt,ge)|0,V=Math.imul(Wt,pe),z=z+Math.imul(It,ce)|0,G=(G=G+Math.imul(It,we)|0)+Math.imul(zt,ce)|0,V=V+Math.imul(zt,we)|0;var Cr=(Y+(z=z+Math.imul(ut,he)|0)|0)+((8191&(G=(G=G+Math.imul(ut,be)|0)+Math.imul(Tt,he)|0))<<13)|0;Y=((V=V+Math.imul(Tt,be)|0)+(G>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,z=Math.imul($t,ce),G=(G=Math.imul($t,we))+Math.imul(Wt,ce)|0,V=Math.imul(Wt,we);var Er=(Y+(z=z+Math.imul(It,he)|0)|0)+((8191&(G=(G=G+Math.imul(It,be)|0)+Math.imul(zt,he)|0))<<13)|0;Y=((V=V+Math.imul(zt,be)|0)+(G>>>13)|0)+(Er>>>26)|0,Er&=67108863;var _r=(Y+(z=Math.imul($t,he))|0)+((8191&(G=(G=Math.imul($t,be))+Math.imul(Wt,he)|0))<<13)|0;return Y=((V=Math.imul(Wt,be))+(G>>>13)|0)+(_r>>>26)|0,_r&=67108863,X[0]=Pe,X[1]=De,X[2]=Ue,X[3]=tr,X[4]=Ge,X[5]=Ze,X[6]=We,X[7]=pr,X[8]=xr,X[9]=sr,X[10]=$e,X[11]=ir,X[12]=Ke,X[13]=ar,X[14]=fr,X[15]=mr,X[16]=Cr,X[17]=Er,X[18]=_r,Y!==0&&(X[19]=Y,B.length++),B};function _(R,j,B){return new g().mulp(R,j,B)}function g(R,j){this.x=R,this.y=j}Math.imul||(x=b),l.prototype.mulTo=function(R,j){var B,z=this.length+R.length;return B=this.length===10&&R.length===10?x(this,R,j):z<63?b(this,R,j):z<1024?function(G,V,et){et.negative=V.negative^G.negative,et.length=G.length+V.length;for(var J=0,X=0,Y=0;Y<et.length-1;Y++){var Z=X;X=0;for(var tt=67108863&J,rt=Math.min(Y,V.length-1),nt=Math.max(0,Y-G.length+1);nt<=rt;nt++){var ot=Y-nt,ct=(0|G.words[ot])*(0|V.words[nt]),pt=67108863&ct;tt=67108863&(pt=pt+tt|0),X+=(Z=(Z=Z+(ct/67108864|0)|0)+(pt>>>26)|0)>>>26,Z&=67108863}et.words[Y]=tt,J=Z,Z=X}return J!==0?et.words[Y]=J:et.length--,et.strip()}(this,R,j):_(this,R,j),B},g.prototype.makeRBT=function(R){for(var j=new Array(R),B=l.prototype._countBits(R)-1,z=0;z<R;z++)j[z]=this.revBin(z,B,R);return j},g.prototype.revBin=function(R,j,B){if(R===0||R===B-1)return R;for(var z=0,G=0;G<j;G++)z|=(1&R)<<j-G-1,R>>=1;return z},g.prototype.permute=function(R,j,B,z,G,V){for(var et=0;et<V;et++)z[et]=j[R[et]],G[et]=B[R[et]]},g.prototype.transform=function(R,j,B,z,G,V){this.permute(V,R,j,B,z,G);for(var et=1;et<G;et<<=1)for(var J=et<<1,X=Math.cos(2*Math.PI/J),Y=Math.sin(2*Math.PI/J),Z=0;Z<G;Z+=J)for(var tt=X,rt=Y,nt=0;nt<et;nt++){var ot=B[Z+nt],ct=z[Z+nt],pt=B[Z+nt+et],gt=z[Z+nt+et],kt=tt*pt-rt*gt;gt=tt*gt+rt*pt,pt=kt,B[Z+nt]=ot+pt,z[Z+nt]=ct+gt,B[Z+nt+et]=ot-pt,z[Z+nt+et]=ct-gt,nt!==J&&(kt=X*tt-Y*rt,rt=X*rt+Y*tt,tt=kt)}},g.prototype.guessLen13b=function(R,j){var B=1|Math.max(j,R),z=1&B,G=0;for(B=B/2|0;B;B>>>=1)G++;return 1<<G+1+z},g.prototype.conjugate=function(R,j,B){if(!(B<=1))for(var z=0;z<B/2;z++){var G=R[z];R[z]=R[B-z-1],R[B-z-1]=G,G=j[z],j[z]=-j[B-z-1],j[B-z-1]=-G}},g.prototype.normalize13b=function(R,j){for(var B=0,z=0;z<j/2;z++){var G=8192*Math.round(R[2*z+1]/j)+Math.round(R[2*z]/j)+B;R[z]=67108863&G,B=G<67108864?0:G/67108864|0}return R},g.prototype.convert13b=function(R,j,B,z){for(var G=0,V=0;V<j;V++)G+=0|R[V],B[2*V]=8191&G,G>>>=13,B[2*V+1]=8191&G,G>>>=13;for(V=2*j;V<z;++V)B[V]=0;i(G===0),i((-8192&G)==0)},g.prototype.stub=function(R){for(var j=new Array(R),B=0;B<R;B++)j[B]=0;return j},g.prototype.mulp=function(R,j,B){var z=2*this.guessLen13b(R.length,j.length),G=this.makeRBT(z),V=this.stub(z),et=new Array(z),J=new Array(z),X=new Array(z),Y=new Array(z),Z=new Array(z),tt=new Array(z),rt=B.words;rt.length=z,this.convert13b(R.words,R.length,et,z),this.convert13b(j.words,j.length,Y,z),this.transform(et,V,J,X,z,G),this.transform(Y,V,Z,tt,z,G);for(var nt=0;nt<z;nt++){var ot=J[nt]*Z[nt]-X[nt]*tt[nt];X[nt]=J[nt]*tt[nt]+X[nt]*Z[nt],J[nt]=ot}return this.conjugate(J,X,z),this.transform(J,X,rt,V,z,G),this.conjugate(rt,V,z),this.normalize13b(rt,z),B.negative=R.negative^j.negative,B.length=R.length+j.length,B.strip()},l.prototype.mul=function(R){var j=new l(null);return j.words=new Array(this.length+R.length),this.mulTo(R,j)},l.prototype.mulf=function(R){var j=new l(null);return j.words=new Array(this.length+R.length),_(this,R,j)},l.prototype.imul=function(R){return this.clone().mulTo(R,this)},l.prototype.imuln=function(R){i(typeof R=="number"),i(R<67108864);for(var j=0,B=0;B<this.length;B++){var z=(0|this.words[B])*R,G=(67108863&z)+(67108863&j);j>>=26,j+=z/67108864|0,j+=G>>>26,this.words[B]=67108863&G}return j!==0&&(this.words[B]=j,this.length++),this},l.prototype.muln=function(R){return this.clone().imuln(R)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(R){var j=function(V){for(var et=new Array(V.bitLength()),J=0;J<et.length;J++){var X=J/26|0,Y=J%26;et[J]=(V.words[X]&1<<Y)>>>Y}return et}(R);if(j.length===0)return new l(1);for(var B=this,z=0;z<j.length&&j[z]===0;z++,B=B.sqr());if(++z<j.length)for(var G=B.sqr();z<j.length;z++,G=G.sqr())j[z]!==0&&(B=B.mul(G));return B},l.prototype.iushln=function(R){i(typeof R=="number"&&R>=0);var j,B=R%26,z=(R-B)/26,G=67108863>>>26-B<<26-B;if(B!==0){var V=0;for(j=0;j<this.length;j++){var et=this.words[j]&G,J=(0|this.words[j])-et<<B;this.words[j]=J|V,V=et>>>26-B}V&&(this.words[j]=V,this.length++)}if(z!==0){for(j=this.length-1;j>=0;j--)this.words[j+z]=this.words[j];for(j=0;j<z;j++)this.words[j]=0;this.length+=z}return this.strip()},l.prototype.ishln=function(R){return i(this.negative===0),this.iushln(R)},l.prototype.iushrn=function(R,j,B){var z;i(typeof R=="number"&&R>=0),z=j?(j-j%26)/26:0;var G=R%26,V=Math.min((R-G)/26,this.length),et=67108863^67108863>>>G<<G,J=B;if(z-=V,z=Math.max(0,z),J){for(var X=0;X<V;X++)J.words[X]=this.words[X];J.length=V}if(V!==0)if(this.length>V)for(this.length-=V,X=0;X<this.length;X++)this.words[X]=this.words[X+V];else this.words[0]=0,this.length=1;var Y=0;for(X=this.length-1;X>=0&&(Y!==0||X>=z);X--){var Z=0|this.words[X];this.words[X]=Y<<26-G|Z>>>G,Y=Z&et}return J&&Y!==0&&(J.words[J.length++]=Y),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(R,j,B){return i(this.negative===0),this.iushrn(R,j,B)},l.prototype.shln=function(R){return this.clone().ishln(R)},l.prototype.ushln=function(R){return this.clone().iushln(R)},l.prototype.shrn=function(R){return this.clone().ishrn(R)},l.prototype.ushrn=function(R){return this.clone().iushrn(R)},l.prototype.testn=function(R){i(typeof R=="number"&&R>=0);var j=R%26,B=(R-j)/26,z=1<<j;return!(this.length<=B||!(this.words[B]&z))},l.prototype.imaskn=function(R){i(typeof R=="number"&&R>=0);var j=R%26,B=(R-j)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=B)return this;if(j!==0&&B++,this.length=Math.min(B,this.length),j!==0){var z=67108863^67108863>>>j<<j;this.words[this.length-1]&=z}return this.strip()},l.prototype.maskn=function(R){return this.clone().imaskn(R)},l.prototype.iaddn=function(R){return i(typeof R=="number"),i(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(0|this.words[0])<R?(this.words[0]=R-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},l.prototype._iaddn=function(R){this.words[0]+=R;for(var j=0;j<this.length&&this.words[j]>=67108864;j++)this.words[j]-=67108864,j===this.length-1?this.words[j+1]=1:this.words[j+1]++;return this.length=Math.max(this.length,j+1),this},l.prototype.isubn=function(R){if(i(typeof R=="number"),i(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var j=0;j<this.length&&this.words[j]<0;j++)this.words[j]+=67108864,this.words[j+1]-=1;return this.strip()},l.prototype.addn=function(R){return this.clone().iaddn(R)},l.prototype.subn=function(R){return this.clone().isubn(R)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(R,j,B){var z,G,V=R.length+B;this._expand(V);var et=0;for(z=0;z<R.length;z++){G=(0|this.words[z+B])+et;var J=(0|R.words[z])*j;et=((G-=67108863&J)>>26)-(J/67108864|0),this.words[z+B]=67108863&G}for(;z<this.length-B;z++)et=(G=(0|this.words[z+B])+et)>>26,this.words[z+B]=67108863&G;if(et===0)return this.strip();for(i(et===-1),et=0,z=0;z<this.length;z++)et=(G=-(0|this.words[z])+et)>>26,this.words[z]=67108863&G;return this.negative=1,this.strip()},l.prototype._wordDiv=function(R,j){var B=(this.length,R.length),z=this.clone(),G=R,V=0|G.words[G.length-1];(B=26-this._countBits(V))!=0&&(G=G.ushln(B),z.iushln(B),V=0|G.words[G.length-1]);var et,J=z.length-G.length;if(j!=="mod"){(et=new l(null)).length=J+1,et.words=new Array(et.length);for(var X=0;X<et.length;X++)et.words[X]=0}var Y=z.clone()._ishlnsubmul(G,1,J);Y.negative===0&&(z=Y,et&&(et.words[J]=1));for(var Z=J-1;Z>=0;Z--){var tt=67108864*(0|z.words[G.length+Z])+(0|z.words[G.length+Z-1]);for(tt=Math.min(tt/V|0,67108863),z._ishlnsubmul(G,tt,Z);z.negative!==0;)tt--,z.negative=0,z._ishlnsubmul(G,1,Z),z.isZero()||(z.negative^=1);et&&(et.words[Z]=tt)}return et&&et.strip(),z.strip(),j!=="div"&&B!==0&&z.iushrn(B),{div:et||null,mod:z}},l.prototype.divmod=function(R,j,B){return i(!R.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:this.negative!==0&&R.negative===0?(V=this.neg().divmod(R,j),j!=="mod"&&(z=V.div.neg()),j!=="div"&&(G=V.mod.neg(),B&&G.negative!==0&&G.iadd(R)),{div:z,mod:G}):this.negative===0&&R.negative!==0?(V=this.divmod(R.neg(),j),j!=="mod"&&(z=V.div.neg()),{div:z,mod:V.mod}):this.negative&R.negative?(V=this.neg().divmod(R.neg(),j),j!=="div"&&(G=V.mod.neg(),B&&G.negative!==0&&G.isub(R)),{div:V.div,mod:G}):R.length>this.length||this.cmp(R)<0?{div:new l(0),mod:this}:R.length===1?j==="div"?{div:this.divn(R.words[0]),mod:null}:j==="mod"?{div:null,mod:new l(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new l(this.modn(R.words[0]))}:this._wordDiv(R,j);var z,G,V},l.prototype.div=function(R){return this.divmod(R,"div",!1).div},l.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},l.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},l.prototype.divRound=function(R){var j=this.divmod(R);if(j.mod.isZero())return j.div;var B=j.div.negative!==0?j.mod.isub(R):j.mod,z=R.ushrn(1),G=R.andln(1),V=B.cmp(z);return V<0||G===1&&V===0?j.div:j.div.negative!==0?j.div.isubn(1):j.div.iaddn(1)},l.prototype.modn=function(R){i(R<=67108863);for(var j=67108864%R,B=0,z=this.length-1;z>=0;z--)B=(j*B+(0|this.words[z]))%R;return B},l.prototype.idivn=function(R){i(R<=67108863);for(var j=0,B=this.length-1;B>=0;B--){var z=(0|this.words[B])+67108864*j;this.words[B]=z/R|0,j=z%R}return this.strip()},l.prototype.divn=function(R){return this.clone().idivn(R)},l.prototype.egcd=function(R){i(R.negative===0),i(!R.isZero());var j=this,B=R.clone();j=j.negative!==0?j.umod(R):j.clone();for(var z=new l(1),G=new l(0),V=new l(0),et=new l(1),J=0;j.isEven()&&B.isEven();)j.iushrn(1),B.iushrn(1),++J;for(var X=B.clone(),Y=j.clone();!j.isZero();){for(var Z=0,tt=1;!(j.words[0]&tt)&&Z<26;++Z,tt<<=1);if(Z>0)for(j.iushrn(Z);Z-- >0;)(z.isOdd()||G.isOdd())&&(z.iadd(X),G.isub(Y)),z.iushrn(1),G.iushrn(1);for(var rt=0,nt=1;!(B.words[0]&nt)&&rt<26;++rt,nt<<=1);if(rt>0)for(B.iushrn(rt);rt-- >0;)(V.isOdd()||et.isOdd())&&(V.iadd(X),et.isub(Y)),V.iushrn(1),et.iushrn(1);j.cmp(B)>=0?(j.isub(B),z.isub(V),G.isub(et)):(B.isub(j),V.isub(z),et.isub(G))}return{a:V,b:et,gcd:B.iushln(J)}},l.prototype._invmp=function(R){i(R.negative===0),i(!R.isZero());var j=this,B=R.clone();j=j.negative!==0?j.umod(R):j.clone();for(var z,G=new l(1),V=new l(0),et=B.clone();j.cmpn(1)>0&&B.cmpn(1)>0;){for(var J=0,X=1;!(j.words[0]&X)&&J<26;++J,X<<=1);if(J>0)for(j.iushrn(J);J-- >0;)G.isOdd()&&G.iadd(et),G.iushrn(1);for(var Y=0,Z=1;!(B.words[0]&Z)&&Y<26;++Y,Z<<=1);if(Y>0)for(B.iushrn(Y);Y-- >0;)V.isOdd()&&V.iadd(et),V.iushrn(1);j.cmp(B)>=0?(j.isub(B),G.isub(V)):(B.isub(j),V.isub(G))}return(z=j.cmpn(1)===0?G:V).cmpn(0)<0&&z.iadd(R),z},l.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var j=this.clone(),B=R.clone();j.negative=0,B.negative=0;for(var z=0;j.isEven()&&B.isEven();z++)j.iushrn(1),B.iushrn(1);for(;;){for(;j.isEven();)j.iushrn(1);for(;B.isEven();)B.iushrn(1);var G=j.cmp(B);if(G<0){var V=j;j=B,B=V}else if(G===0||B.cmpn(1)===0)break;j.isub(B)}return B.iushln(z)},l.prototype.invm=function(R){return this.egcd(R).a.umod(R)},l.prototype.isEven=function(){return(1&this.words[0])==0},l.prototype.isOdd=function(){return(1&this.words[0])==1},l.prototype.andln=function(R){return this.words[0]&R},l.prototype.bincn=function(R){i(typeof R=="number");var j=R%26,B=(R-j)/26,z=1<<j;if(this.length<=B)return this._expand(B+1),this.words[B]|=z,this;for(var G=z,V=B;G!==0&&V<this.length;V++){var et=0|this.words[V];G=(et+=G)>>>26,et&=67108863,this.words[V]=et}return G!==0&&(this.words[V]=G,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(R){var j,B=R<0;if(this.negative!==0&&!B)return-1;if(this.negative===0&&B)return 1;if(this.strip(),this.length>1)j=1;else{B&&(R=-R),i(R<=67108863,"Number is too big");var z=0|this.words[0];j=z===R?0:z<R?-1:1}return this.negative!==0?0|-j:j},l.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var j=this.ucmp(R);return this.negative!==0?0|-j:j},l.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var j=0,B=this.length-1;B>=0;B--){var z=0|this.words[B],G=0|R.words[B];if(z!==G){z<G?j=-1:z>G&&(j=1);break}}return j},l.prototype.gtn=function(R){return this.cmpn(R)===1},l.prototype.gt=function(R){return this.cmp(R)===1},l.prototype.gten=function(R){return this.cmpn(R)>=0},l.prototype.gte=function(R){return this.cmp(R)>=0},l.prototype.ltn=function(R){return this.cmpn(R)===-1},l.prototype.lt=function(R){return this.cmp(R)===-1},l.prototype.lten=function(R){return this.cmpn(R)<=0},l.prototype.lte=function(R){return this.cmp(R)<=0},l.prototype.eqn=function(R){return this.cmpn(R)===0},l.prototype.eq=function(R){return this.cmp(R)===0},l.red=function(R){return new P(R)},l.prototype.toRed=function(R){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},l.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(R){return this.red=R,this},l.prototype.forceRed=function(R){return i(!this.red,"Already a number in reduction context"),this._forceRed(R)},l.prototype.redAdd=function(R){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},l.prototype.redIAdd=function(R){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},l.prototype.redSub=function(R){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},l.prototype.redISub=function(R){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},l.prototype.redShl=function(R){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},l.prototype.redMul=function(R){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},l.prototype.redIMul=function(R){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},l.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(R){return i(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var A={k256:null,p224:null,p192:null,p25519:null};function M(R,j){this.name=R,this.p=new l(j,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function L(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function P(R){if(typeof R=="string"){var j=l._prime(R);this.m=j.p,this.prime=j}else i(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function U(R){P.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var R=new l(null);return R.words=new Array(Math.ceil(this.n/13)),R},M.prototype.ireduce=function(R){var j,B=R;do this.split(B,this.tmp),j=(B=(B=this.imulK(B)).iadd(this.tmp)).bitLength();while(j>this.n);var z=j<this.n?-1:B.ucmp(this.p);return z===0?(B.words[0]=0,B.length=1):z>0?B.isub(this.p):B.strip!==void 0?B.strip():B._strip(),B},M.prototype.split=function(R,j){R.iushrn(this.n,0,j)},M.prototype.imulK=function(R){return R.imul(this.k)},c(L,M),L.prototype.split=function(R,j){for(var B=4194303,z=Math.min(R.length,9),G=0;G<z;G++)j.words[G]=R.words[G];if(j.length=z,R.length<=9)return R.words[0]=0,void(R.length=1);var V=R.words[9];for(j.words[j.length++]=V&B,G=10;G<R.length;G++){var et=0|R.words[G];R.words[G-10]=(et&B)<<4|V>>>22,V=et}V>>>=22,R.words[G-10]=V,V===0&&R.length>10?R.length-=10:R.length-=9},L.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var j=0,B=0;B<R.length;B++){var z=0|R.words[B];j+=977*z,R.words[B]=67108863&j,j=64*z+(j/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R},c(E,M),c(S,M),c(O,M),O.prototype.imulK=function(R){for(var j=0,B=0;B<R.length;B++){var z=19*(0|R.words[B])+j,G=67108863&z;z>>>=26,R.words[B]=G,j=z}return j!==0&&(R.words[R.length++]=j),R},l._prime=function(R){if(A[R])return A[R];var j;if(R==="k256")j=new L;else if(R==="p224")j=new E;else if(R==="p192")j=new S;else{if(R!=="p25519")throw new Error("Unknown prime "+R);j=new O}return A[R]=j,j},P.prototype._verify1=function(R){i(R.negative===0,"red works only with positives"),i(R.red,"red works only with red numbers")},P.prototype._verify2=function(R,j){i((R.negative|j.negative)==0,"red works only with positives"),i(R.red&&R.red===j.red,"red works only with red numbers")},P.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},P.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},P.prototype.add=function(R,j){this._verify2(R,j);var B=R.add(j);return B.cmp(this.m)>=0&&B.isub(this.m),B._forceRed(this)},P.prototype.iadd=function(R,j){this._verify2(R,j);var B=R.iadd(j);return B.cmp(this.m)>=0&&B.isub(this.m),B},P.prototype.sub=function(R,j){this._verify2(R,j);var B=R.sub(j);return B.cmpn(0)<0&&B.iadd(this.m),B._forceRed(this)},P.prototype.isub=function(R,j){this._verify2(R,j);var B=R.isub(j);return B.cmpn(0)<0&&B.iadd(this.m),B},P.prototype.shl=function(R,j){return this._verify1(R),this.imod(R.ushln(j))},P.prototype.imul=function(R,j){return this._verify2(R,j),this.imod(R.imul(j))},P.prototype.mul=function(R,j){return this._verify2(R,j),this.imod(R.mul(j))},P.prototype.isqr=function(R){return this.imul(R,R.clone())},P.prototype.sqr=function(R){return this.mul(R,R)},P.prototype.sqrt=function(R){if(R.isZero())return R.clone();var j=this.m.andln(3);if(i(j%2==1),j===3){var B=this.m.add(new l(1)).iushrn(2);return this.pow(R,B)}for(var z=this.m.subn(1),G=0;!z.isZero()&&z.andln(1)===0;)G++,z.iushrn(1);i(!z.isZero());var V=new l(1).toRed(this),et=V.redNeg(),J=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new l(2*X*X).toRed(this);this.pow(X,J).cmp(et)!==0;)X.redIAdd(et);for(var Y=this.pow(X,z),Z=this.pow(R,z.addn(1).iushrn(1)),tt=this.pow(R,z),rt=G;tt.cmp(V)!==0;){for(var nt=tt,ot=0;nt.cmp(V)!==0;ot++)nt=nt.redSqr();i(ot<rt);var ct=this.pow(Y,new l(1).iushln(rt-ot-1));Z=Z.redMul(ct),Y=ct.redSqr(),tt=tt.redMul(Y),rt=ot}return Z},P.prototype.invm=function(R){var j=R._invmp(this.m);return j.negative!==0?(j.negative=0,this.imod(j).redNeg()):this.imod(j)},P.prototype.pow=function(R,j){if(j.isZero())return new l(1).toRed(this);if(j.cmpn(1)===0)return R.clone();var B=new Array(16);B[0]=new l(1).toRed(this),B[1]=R;for(var z=2;z<B.length;z++)B[z]=this.mul(B[z-1],R);var G=B[0],V=0,et=0,J=j.bitLength()%26;for(J===0&&(J=26),z=j.length-1;z>=0;z--){for(var X=j.words[z],Y=J-1;Y>=0;Y--){var Z=X>>Y&1;G!==B[0]&&(G=this.sqr(G)),Z!==0||V!==0?(V<<=1,V|=Z,(++et==4||z===0&&Y===0)&&(G=this.mul(G,B[V]),et=0,V=0)):et=0}J=26}return G},P.prototype.convertTo=function(R){var j=R.umod(this.m);return j===R?j.clone():j},P.prototype.convertFrom=function(R){var j=R.clone();return j.red=null,j},l.mont=function(R){return new U(R)},c(U,P),U.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},U.prototype.convertFrom=function(R){var j=this.imod(R.mul(this.rinv));return j.red=null,j},U.prototype.imul=function(R,j){if(R.isZero()||j.isZero())return R.words[0]=0,R.length=1,R;var B=R.imul(j),z=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=B.isub(z).iushrn(this.shift),V=G;return G.cmp(this.m)>=0?V=G.isub(this.m):G.cmpn(0)<0&&(V=G.iadd(this.m)),V._forceRed(this)},U.prototype.mul=function(R,j){if(R.isZero()||j.isZero())return new l(0)._forceRed(this);var B=R.mul(j),z=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=B.isub(z).iushrn(this.shift),V=G;return G.cmp(this.m)>=0?V=G.isub(this.m):G.cmpn(0)<0&&(V=G.iadd(this.m)),V._forceRed(this)},U.prototype.invm=function(R){return this.imod(R._invmp(this.m).mul(this.r2))._forceRed(this)}})(s=t.nmd(s),this)},2692:function(s){s.exports=function(e){var t,n,a,i=e.length,c=0;for(t=0;t<i;++t)c+=e[t].length;var l=new Array(c),u=0;for(t=0;t<i;++t){var f=e[t],d=f.length;for(n=0;n<d;++n){var w=l[u++]=new Array(d-1),v=0;for(a=0;a<d;++a)a!==n&&(w[v++]=f[a]);if(1&n){var p=w[1];w[1]=w[0],w[0]=p}}}return l}},2569:function(s,e,t){s.exports=function(w,v,p){switch(arguments.length){case 1:return n=[],f(y=w,y,d,!0),n;case 2:return typeof v=="function"?f(w,w,v,!0):function(b,x){return n=[],f(b,x,d,!1),n}(w,v);case 3:return f(w,v,p,!1);default:throw new Error("box-intersect: Invalid arguments")}var y};var n,a=t(5306),i=t(1390),c=t(2337);function l(w,v){for(var p=0;p<w;++p)if(!(v[p]<=v[p+w]))return!0;return!1}function u(w,v,p,y){for(var b=0,x=0,_=0,g=w.length;_<g;++_){var A=w[_];if(!l(v,A)){for(var M=0;M<2*v;++M)p[b++]=A[M];y[x++]=_}}return x}function f(w,v,p,y){var b=w.length,x=v.length;if(!(b<=0||x<=0)){var _=w[0].length>>>1;if(!(_<=0)){var g,A=a.mallocDouble(2*_*b),M=a.mallocInt32(b);if((b=u(w,_,A,M))>0){if(_===1&&y)i.init(b),g=i.sweepComplete(_,p,0,b,A,M,0,b,A,M);else{var L=a.mallocDouble(2*_*x),E=a.mallocInt32(x);(x=u(v,_,L,E))>0&&(i.init(b+x),g=_===1?i.sweepBipartite(_,p,0,b,A,M,0,x,L,E):c(_,p,y,b,A,M,x,L,E),a.free(L),a.free(E))}a.free(A),a.free(M)}return g}}}function d(w,v){n.push([w,v])}},7333:function(s,e){function t(n){return n?function(a,i,c,l,u,f,d,w,v,p,y){return u-l>v-w?function(b,x,_,g,A,M,L,E,S,O,P){for(var U=2*b,R=g,j=U*g;R<A;++R,j+=U){var B=M[x+j],z=M[x+j+b],G=L[R];t:for(var V=E,et=U*E;V<S;++V,et+=U){var J=O[x+et],X=O[x+et+b],Y=P[V];if(!(X<B||z<J)){for(var Z=x+1;Z<b;++Z){var tt=M[Z+j],rt=M[Z+b+j],nt=O[Z+et],ot=O[Z+b+et];if(rt<nt||ot<tt)continue t}var ct=_(G,Y);if(ct!==void 0)return ct}}}}(a,i,c,l,u,f,d,w,v,p,y):function(b,x,_,g,A,M,L,E,S,O,P){for(var U=2*b,R=E,j=U*E;R<S;++R,j+=U){var B=O[x+j],z=O[x+j+b],G=P[R];t:for(var V=g,et=U*g;V<A;++V,et+=U){var J=M[x+et],X=M[x+et+b],Y=L[V];if(!(z<J||X<B)){for(var Z=x+1;Z<b;++Z){var tt=M[Z+et],rt=M[Z+b+et],nt=O[Z+j],ot=O[Z+b+j];if(rt<nt||ot<tt)continue t}var ct=_(Y,G);if(ct!==void 0)return ct}}}}(a,i,c,l,u,f,d,w,v,p,y)}:function(a,i,c,l,u,f,d,w,v,p,y,b){return f-u>p-v?l?function(x,_,g,A,M,L,E,S,O,P,U){for(var R=2*x,j=A,B=R*A;j<M;++j,B+=R){var z=L[_+B],G=L[_+B+x],V=E[j];t:for(var et=S,J=R*S;et<O;++et,J+=R){var X=P[_+J],Y=U[et];if(!(X<=z||G<X)){for(var Z=_+1;Z<x;++Z){var tt=L[Z+B],rt=L[Z+x+B],nt=P[Z+J],ot=P[Z+x+J];if(rt<nt||ot<tt)continue t}var ct=g(Y,V);if(ct!==void 0)return ct}}}}(a,i,c,u,f,d,w,v,p,y,b):function(x,_,g,A,M,L,E,S,O,P,U){for(var R=2*x,j=A,B=R*A;j<M;++j,B+=R){var z=L[_+B],G=L[_+B+x],V=E[j];t:for(var et=S,J=R*S;et<O;++et,J+=R){var X=P[_+J],Y=U[et];if(!(X<z||G<X)){for(var Z=_+1;Z<x;++Z){var tt=L[Z+B],rt=L[Z+x+B],nt=P[Z+J],ot=P[Z+x+J];if(rt<nt||ot<tt)continue t}var ct=g(V,Y);if(ct!==void 0)return ct}}}}(a,i,c,u,f,d,w,v,p,y,b):l?function(x,_,g,A,M,L,E,S,O,P,U){for(var R=2*x,j=S,B=R*S;j<O;++j,B+=R){var z=P[_+B],G=U[j];t:for(var V=A,et=R*A;V<M;++V,et+=R){var J=L[_+et],X=L[_+et+x],Y=E[V];if(!(z<=J||X<z)){for(var Z=_+1;Z<x;++Z){var tt=L[Z+et],rt=L[Z+x+et],nt=P[Z+B],ot=P[Z+x+B];if(rt<nt||ot<tt)continue t}var ct=g(G,Y);if(ct!==void 0)return ct}}}}(a,i,c,u,f,d,w,v,p,y,b):function(x,_,g,A,M,L,E,S,O,P,U){for(var R=2*x,j=S,B=R*S;j<O;++j,B+=R){var z=P[_+B],G=U[j];t:for(var V=A,et=R*A;V<M;++V,et+=R){var J=L[_+et],X=L[_+et+x],Y=E[V];if(!(z<J||X<z)){for(var Z=_+1;Z<x;++Z){var tt=L[Z+et],rt=L[Z+x+et],nt=P[Z+B],ot=P[Z+x+B];if(rt<nt||ot<tt)continue t}var ct=g(Y,G);if(ct!==void 0)return ct}}}}(a,i,c,u,f,d,w,v,p,y,b)}}e.partial=t(!1),e.full=t(!0)},2337:function(s,e,t){s.exports=function(R,j,B,z,G,V,et,J,X){(function(zt,Ft){var $t=8*a.log2(Ft+1)*(zt+1)|0,Wt=a.nextPow2(M*$t);E.length<Wt&&(n.free(E),E=n.mallocInt32(Wt));var Xt=a.nextPow2(L*$t);S.length<Xt&&(n.free(S),S=n.mallocDouble(Xt))})(R,z+et);var Y,Z=0,tt=2*R;for(O(Z++,0,0,z,0,et,B?16:0,-1/0,1/0),B||O(Z++,0,0,et,0,z,1,-1/0,1/0);Z>0;){var rt=(Z-=1)*M,nt=E[rt],ot=E[rt+1],ct=E[rt+2],pt=E[rt+3],gt=E[rt+4],kt=E[rt+5],yt=Z*L,mt=S[yt],Ot=S[yt+1],vt=1&kt,xt=!!(16&kt),st=G,at=V,ht=J,Lt=X;if(vt&&(st=J,at=X,ht=G,Lt=V),!(2&kt&&ot>=(ct=x(R,nt,ot,ct,st,at,Ot))||4&kt&&(ot=_(R,nt,ot,ct,st,at,mt))>=ct)){var Mt=ct-ot,_t=gt-pt;if(xt){if(R*Mt*(Mt+_t)<p){if((Y=u.scanComplete(R,nt,j,ot,ct,st,at,pt,gt,ht,Lt))!==void 0)return Y;continue}}else{if(R*Math.min(Mt,_t)<w){if((Y=c(R,nt,j,vt,ot,ct,st,at,pt,gt,ht,Lt))!==void 0)return Y;continue}if(R*Mt*_t<v){if((Y=u.scanBipartite(R,nt,j,vt,ot,ct,st,at,pt,gt,ht,Lt))!==void 0)return Y;continue}}var St=y(R,nt,ot,ct,st,at,mt,Ot);if(ot<St)if(R*(St-ot)<w){if((Y=l(R,nt+1,j,ot,St,st,at,pt,gt,ht,Lt))!==void 0)return Y}else if(nt===R-2){if((Y=vt?u.sweepBipartite(R,j,pt,gt,ht,Lt,ot,St,st,at):u.sweepBipartite(R,j,ot,St,st,at,pt,gt,ht,Lt))!==void 0)return Y}else O(Z++,nt+1,ot,St,pt,gt,vt,-1/0,1/0),O(Z++,nt+1,pt,gt,ot,St,1^vt,-1/0,1/0);if(St<ct){var Dt=f(R,nt,pt,gt,ht,Lt),ut=ht[tt*Dt+nt],Tt=b(R,nt,Dt,gt,ht,Lt,ut);if(Tt<gt&&O(Z++,nt,St,ct,Tt,gt,(4|vt)+(xt?16:0),ut,Ot),pt<Dt&&O(Z++,nt,St,ct,pt,Dt,(2|vt)+(xt?16:0),mt,ut),Dt+1===Tt){if((Y=xt?U(R,nt,j,St,ct,st,at,Dt,ht,Lt[Dt]):P(R,nt,j,vt,St,ct,st,at,Dt,ht,Lt[Dt]))!==void 0)return Y}else if(Dt<Tt){var bt;if(xt){if(St<(bt=g(R,nt,St,ct,st,at,ut))){var It=b(R,nt,St,bt,st,at,ut);if(nt===R-2){if(St<It&&(Y=u.sweepComplete(R,j,St,It,st,at,Dt,Tt,ht,Lt))!==void 0||It<bt&&(Y=u.sweepBipartite(R,j,It,bt,st,at,Dt,Tt,ht,Lt))!==void 0)return Y}else St<It&&O(Z++,nt+1,St,It,Dt,Tt,16,-1/0,1/0),It<bt&&(O(Z++,nt+1,It,bt,Dt,Tt,0,-1/0,1/0),O(Z++,nt+1,Dt,Tt,It,bt,1,-1/0,1/0))}}else St<(bt=vt?A(R,nt,St,ct,st,at,ut):g(R,nt,St,ct,st,at,ut))&&(nt===R-2?Y=vt?u.sweepBipartite(R,j,Dt,Tt,ht,Lt,St,bt,st,at):u.sweepBipartite(R,j,St,bt,st,at,Dt,Tt,ht,Lt):(O(Z++,nt+1,St,bt,Dt,Tt,vt,-1/0,1/0),O(Z++,nt+1,Dt,Tt,St,bt,1^vt,-1/0,1/0)))}}}}};var n=t(5306),a=t(2288),i=t(7333),c=i.partial,l=i.full,u=t(1390),f=t(2464),d=t(122),w=128,v=1<<22,p=1<<22,y=d("!(lo>=p0)&&!(p1>=hi)"),b=d("lo===p0"),x=d("lo<p0"),_=d("hi<=p0"),g=d("lo<=p0&&p0<=hi"),A=d("lo<p0&&p0<=hi"),M=6,L=2,E=n.mallocInt32(1024),S=n.mallocDouble(1024);function O(R,j,B,z,G,V,et,J,X){var Y=M*R;E[Y]=j,E[Y+1]=B,E[Y+2]=z,E[Y+3]=G,E[Y+4]=V,E[Y+5]=et;var Z=L*R;S[Z]=J,S[Z+1]=X}function P(R,j,B,z,G,V,et,J,X,Y,Z){var tt=2*R,rt=X*tt,nt=Y[rt+j];t:for(var ot=G,ct=G*tt;ot<V;++ot,ct+=tt){var pt=et[ct+j],gt=et[ct+j+R];if(!(nt<pt||gt<nt||z&&nt===pt)){for(var kt,yt=J[ot],mt=j+1;mt<R;++mt){pt=et[ct+mt],gt=et[ct+mt+R];var Ot=Y[rt+mt],vt=Y[rt+mt+R];if(gt<Ot||vt<pt)continue t}if((kt=z?B(Z,yt):B(yt,Z))!==void 0)return kt}}}function U(R,j,B,z,G,V,et,J,X,Y){var Z=2*R,tt=J*Z,rt=X[tt+j];t:for(var nt=z,ot=z*Z;nt<G;++nt,ot+=Z){var ct=et[nt];if(ct!==Y){var pt=V[ot+j],gt=V[ot+j+R];if(!(rt<pt||gt<rt)){for(var kt=j+1;kt<R;++kt){pt=V[ot+kt],gt=V[ot+kt+R];var yt=X[tt+kt],mt=X[tt+kt+R];if(gt<yt||mt<pt)continue t}var Ot=B(ct,Y);if(Ot!==void 0)return Ot}}}}},2464:function(s,e,t){s.exports=function(c,l,u,f,d,w){if(f<=u+1)return u;for(var v=u,p=f,y=f+u>>>1,b=2*c,x=y,_=d[b*y+l];v<p;){if(p-v<a){i(c,l,v,p,d,w),_=d[b*y+l];break}var g=p-v,A=Math.random()*g+v|0,M=d[b*A+l],L=Math.random()*g+v|0,E=d[b*L+l],S=Math.random()*g+v|0,O=d[b*S+l];M<=E?O>=E?(x=L,_=E):M>=O?(x=A,_=M):(x=S,_=O):E>=O?(x=L,_=E):O>=M?(x=A,_=M):(x=S,_=O);for(var P=b*(p-1),U=b*x,R=0;R<b;++R,++P,++U){var j=d[P];d[P]=d[U],d[U]=j}var B=w[p-1];for(w[p-1]=w[x],w[x]=B,P=b*(p-1),U=b*(x=n(c,l,v,p-1,d,w,_)),R=0;R<b;++R,++P,++U)j=d[P],d[P]=d[U],d[U]=j;if(B=w[p-1],w[p-1]=w[x],w[x]=B,y<x){for(p=x-1;v<p&&d[b*(p-1)+l]===_;)p-=1;p+=1}else{if(!(x<y))break;for(v=x+1;v<p&&d[b*v+l]===_;)v+=1}}return n(c,l,u,y,d,w,d[b*y+l])};var n=t(122)("lo<p0"),a=8;function i(c,l,u,f,d,w){for(var v=2*c,p=v*(u+1)+l,y=u+1;y<f;++y,p+=v)for(var b=d[p],x=y,_=v*(y-1);x>u&&d[_+l]>b;--x,_-=v){for(var g=_,A=_+v,M=0;M<v;++M,++g,++A){var L=d[g];d[g]=d[A],d[A]=L}var E=w[x];w[x]=w[x-1],w[x-1]=E}}},122:function(s){s.exports=function(t){return e[t]};var e={"lo===p0":function(t,n,a,i,c,l,u){for(var f=2*t,d=f*a,w=d,v=a,p=n,y=a;i>y;++y,d+=f)if(c[d+p]===u)if(v===y)v+=1,w+=f;else{for(var b=0;f>b;++b){var x=c[d+b];c[d+b]=c[w],c[w++]=x}var _=l[y];l[y]=l[v],l[v++]=_}return v},"lo<p0":function(t,n,a,i,c,l,u){for(var f=2*t,d=f*a,w=d,v=a,p=n,y=a;i>y;++y,d+=f)if(c[d+p]<u)if(v===y)v+=1,w+=f;else{for(var b=0;f>b;++b){var x=c[d+b];c[d+b]=c[w],c[w++]=x}var _=l[y];l[y]=l[v],l[v++]=_}return v},"lo<=p0":function(t,n,a,i,c,l,u){for(var f=2*t,d=f*a,w=d,v=a,p=t+n,y=a;i>y;++y,d+=f)if(c[d+p]<=u)if(v===y)v+=1,w+=f;else{for(var b=0;f>b;++b){var x=c[d+b];c[d+b]=c[w],c[w++]=x}var _=l[y];l[y]=l[v],l[v++]=_}return v},"hi<=p0":function(t,n,a,i,c,l,u){for(var f=2*t,d=f*a,w=d,v=a,p=t+n,y=a;i>y;++y,d+=f)if(c[d+p]<=u)if(v===y)v+=1,w+=f;else{for(var b=0;f>b;++b){var x=c[d+b];c[d+b]=c[w],c[w++]=x}var _=l[y];l[y]=l[v],l[v++]=_}return v},"lo<p0&&p0<=hi":function(t,n,a,i,c,l,u){for(var f=2*t,d=f*a,w=d,v=a,p=n,y=t+n,b=a;i>b;++b,d+=f){var x=c[d+p],_=c[d+y];if(x<u&&u<=_)if(v===b)v+=1,w+=f;else{for(var g=0;f>g;++g){var A=c[d+g];c[d+g]=c[w],c[w++]=A}var M=l[b];l[b]=l[v],l[v++]=M}}return v},"lo<=p0&&p0<=hi":function(t,n,a,i,c,l,u){for(var f=2*t,d=f*a,w=d,v=a,p=n,y=t+n,b=a;i>b;++b,d+=f){var x=c[d+p],_=c[d+y];if(x<=u&&u<=_)if(v===b)v+=1,w+=f;else{for(var g=0;f>g;++g){var A=c[d+g];c[d+g]=c[w],c[w++]=A}var M=l[b];l[b]=l[v],l[v++]=M}}return v},"!(lo>=p0)&&!(p1>=hi)":function(t,n,a,i,c,l,u,f){for(var d=2*t,w=d*a,v=w,p=a,y=n,b=t+n,x=a;i>x;++x,w+=d){var _=c[w+y],g=c[w+b];if(!(_>=u||f>=g))if(p===x)p+=1,v+=d;else{for(var A=0;d>A;++A){var M=c[w+A];c[w+A]=c[v],c[v++]=M}var L=l[x];l[x]=l[p],l[p++]=L}}return p}}},309:function(s){s.exports=function(d,w){w<=4*e?t(0,w-1,d):f(0,w-1,d)};var e=32;function t(d,w,v){for(var p=2*(d+1),y=d+1;y<=w;++y){for(var b=v[p++],x=v[p++],_=y,g=p-2;_-- >d;){var A=v[g-2],M=v[g-1];if(A<b||A===b&&M<x)break;v[g]=A,v[g+1]=M,g-=2}v[g]=b,v[g+1]=x}}function n(d,w,v){w*=2;var p=v[d*=2],y=v[d+1];v[d]=v[w],v[d+1]=v[w+1],v[w]=p,v[w+1]=y}function a(d,w,v){w*=2,v[d*=2]=v[w],v[d+1]=v[w+1]}function i(d,w,v,p){w*=2,v*=2;var y=p[d*=2],b=p[d+1];p[d]=p[w],p[d+1]=p[w+1],p[w]=p[v],p[w+1]=p[v+1],p[v]=y,p[v+1]=b}function c(d,w,v,p,y){w*=2,y[d*=2]=y[w],y[w]=v,y[d+1]=y[w+1],y[w+1]=p}function l(d,w,v){w*=2;var p=v[d*=2],y=v[w];return!(p<y)&&(p!==y||v[d+1]>v[w+1])}function u(d,w,v,p){var y=p[d*=2];return y<w||y===w&&p[d+1]<v}function f(d,w,v){var p=(w-d+1)/6|0,y=d+p,b=w-p,x=d+w>>1,_=x-p,g=x+p,A=y,M=_,L=x,E=g,S=b,O=d+1,P=w-1,U=0;l(A,M,v)&&(U=A,A=M,M=U),l(E,S,v)&&(U=E,E=S,S=U),l(A,L,v)&&(U=A,A=L,L=U),l(M,L,v)&&(U=M,M=L,L=U),l(A,E,v)&&(U=A,A=E,E=U),l(L,E,v)&&(U=L,L=E,E=U),l(M,S,v)&&(U=M,M=S,S=U),l(M,L,v)&&(U=M,M=L,L=U),l(E,S,v)&&(U=E,E=S,S=U);for(var R=v[2*M],j=v[2*M+1],B=v[2*E],z=v[2*E+1],G=2*A,V=2*L,et=2*S,J=2*y,X=2*x,Y=2*b,Z=0;Z<2;++Z){var tt=v[G+Z],rt=v[V+Z],nt=v[et+Z];v[J+Z]=tt,v[X+Z]=rt,v[Y+Z]=nt}a(_,d,v),a(g,w,v);for(var ot=O;ot<=P;++ot)if(u(ot,R,j,v))ot!==O&&n(ot,O,v),++O;else if(!u(ot,B,z,v))for(;;){if(u(P,B,z,v)){u(P,R,j,v)?(i(ot,O,P,v),++O,--P):(n(ot,P,v),--P);break}if(--P<ot)break}c(d,O-1,R,j,v),c(w,P+1,B,z,v),O-2-d<=e?t(d,O-2,v):f(d,O-2,v),w-(P+2)<=e?t(P+2,w,v):f(P+2,w,v),P-O<=e?t(O,P,v):f(O,P,v)}},1390:function(s,e,t){s.exports={init:function(_){var g=a.nextPow2(_);u.length<g&&(n.free(u),u=n.mallocInt32(g)),f.length<g&&(n.free(f),f=n.mallocInt32(g)),d.length<g&&(n.free(d),d=n.mallocInt32(g)),w.length<g&&(n.free(w),w=n.mallocInt32(g)),v.length<g&&(n.free(v),v=n.mallocInt32(g)),p.length<g&&(n.free(p),p=n.mallocInt32(g));var A=8*g;y.length<A&&(n.free(y),y=n.mallocDouble(A))},sweepBipartite:function(_,g,A,M,L,E,S,O,P,U){for(var R=0,j=2*_,B=_-1,z=j-1,G=A;G<M;++G){var V=E[G],et=j*G;y[R++]=L[et+B],y[R++]=-(V+1),y[R++]=L[et+z],y[R++]=V}for(G=S;G<O;++G){V=U[G]+c;var J=j*G;y[R++]=P[J+B],y[R++]=-V,y[R++]=P[J+z],y[R++]=V}var X=R>>>1;i(y,X);var Y=0,Z=0;for(G=0;G<X;++G){var tt=0|y[2*G+1];if(tt>=c)b(d,w,Z--,tt=tt-c|0);else if(tt>=0)b(u,f,Y--,tt);else if(tt<=-c){tt=-tt-c|0;for(var rt=0;rt<Y;++rt)if((nt=g(u[rt],tt))!==void 0)return nt;x(d,w,Z++,tt)}else{for(tt=-tt-1|0,rt=0;rt<Z;++rt){var nt;if((nt=g(tt,d[rt]))!==void 0)return nt}x(u,f,Y++,tt)}}},sweepComplete:function(_,g,A,M,L,E,S,O,P,U){for(var R=0,j=2*_,B=_-1,z=j-1,G=A;G<M;++G){var V=E[G]+1<<1,et=j*G;y[R++]=L[et+B],y[R++]=-V,y[R++]=L[et+z],y[R++]=V}for(G=S;G<O;++G){V=U[G]+1<<1;var J=j*G;y[R++]=P[J+B],y[R++]=1|-V,y[R++]=P[J+z],y[R++]=1|V}var X=R>>>1;i(y,X);var Y=0,Z=0,tt=0;for(G=0;G<X;++G){var rt=0|y[2*G+1],nt=1&rt;if(G<X-1&&rt>>1==y[2*G+3]>>1&&(nt=2,G+=1),rt<0){for(var ot=-(rt>>1)-1,ct=0;ct<tt;++ct)if((pt=g(v[ct],ot))!==void 0)return pt;if(nt!==0){for(ct=0;ct<Y;++ct)if((pt=g(u[ct],ot))!==void 0)return pt}if(nt!==1)for(ct=0;ct<Z;++ct){var pt;if((pt=g(d[ct],ot))!==void 0)return pt}nt===0?x(u,f,Y++,ot):nt===1?x(d,w,Z++,ot):nt===2&&x(v,p,tt++,ot)}else ot=(rt>>1)-1,nt===0?b(u,f,Y--,ot):nt===1?b(d,w,Z--,ot):nt===2&&b(v,p,tt--,ot)}},scanBipartite:function(_,g,A,M,L,E,S,O,P,U,R,j){var B=0,z=2*_,G=g,V=g+_,et=1,J=1;M?J=c:et=c;for(var X=L;X<E;++X){var Y=X+et,Z=z*X;y[B++]=S[Z+G],y[B++]=-Y,y[B++]=S[Z+V],y[B++]=Y}for(X=P;X<U;++X){Y=X+J;var tt=z*X;y[B++]=R[tt+G],y[B++]=-Y}var rt=B>>>1;i(y,rt);var nt=0;for(X=0;X<rt;++X){var ot=0|y[2*X+1];if(ot<0){var ct=!1;if((Y=-ot)>=c?(ct=!M,Y-=c):(ct=!!M,Y-=1),ct)x(u,f,nt++,Y);else{var pt=j[Y],gt=z*Y,kt=R[gt+g+1],yt=R[gt+g+1+_];t:for(var mt=0;mt<nt;++mt){var Ot=u[mt],vt=z*Ot;if(!(yt<S[vt+g+1]||S[vt+g+1+_]<kt)){for(var xt=g+2;xt<_;++xt)if(R[gt+xt+_]<S[vt+xt]||S[vt+xt+_]<R[gt+xt])continue t;var st,at=O[Ot];if((st=M?A(pt,at):A(at,pt))!==void 0)return st}}}}else b(u,f,nt--,ot-et)}},scanComplete:function(_,g,A,M,L,E,S,O,P,U,R){for(var j=0,B=2*_,z=g,G=g+_,V=M;V<L;++V){var et=V+c,J=B*V;y[j++]=E[J+z],y[j++]=-et,y[j++]=E[J+G],y[j++]=et}for(V=O;V<P;++V){et=V+1;var X=B*V;y[j++]=U[X+z],y[j++]=-et}var Y=j>>>1;i(y,Y);var Z=0;for(V=0;V<Y;++V){var tt=0|y[2*V+1];if(tt<0)if((et=-tt)>=c)u[Z++]=et-c;else{var rt=R[et-=1],nt=B*et,ot=U[nt+g+1],ct=U[nt+g+1+_];t:for(var pt=0;pt<Z;++pt){var gt=u[pt],kt=S[gt];if(kt===rt)break;var yt=B*gt;if(!(ct<E[yt+g+1]||E[yt+g+1+_]<ot)){for(var mt=g+2;mt<_;++mt)if(U[nt+mt+_]<E[yt+mt]||E[yt+mt+_]<U[nt+mt])continue t;var Ot=A(kt,rt);if(Ot!==void 0)return Ot}}}else{for(et=tt-c,pt=Z-1;pt>=0;--pt)if(u[pt]===et){for(mt=pt+1;mt<Z;++mt)u[mt-1]=u[mt];break}--Z}}}};var n=t(5306),a=t(2288),i=t(309),c=1<<28,l=1024,u=n.mallocInt32(l),f=n.mallocInt32(l),d=n.mallocInt32(l),w=n.mallocInt32(l),v=n.mallocInt32(l),p=n.mallocInt32(l),y=n.mallocDouble(8192);function b(_,g,A,M){var L=g[M],E=_[A-1];_[L]=E,g[E]=L}function x(_,g,A,M){_[A]=M,g[M]=A}},7761:function(s,e,t){var n=t(9971),a=t(743),i=t(2161),c=t(7098);function l(d){return[Math.min(d[0],d[1]),Math.max(d[0],d[1])]}function u(d,w){return d[0]-w[0]||d[1]-w[1]}function f(d,w,v){return w in d?d[w]:v}s.exports=function(d,w,v){Array.isArray(w)?(v=v||{},w=w||[]):(v=w||{},w=[]);var p=!!f(v,"delaunay",!0),y=!!f(v,"interior",!0),b=!!f(v,"exterior",!0),x=!!f(v,"infinity",!1);if(!y&&!b||d.length===0)return[];var _=n(d,w);if(p||y!==b||x){for(var g=a(d.length,function(L){return L.map(l).sort(u)}(w)),A=0;A<_.length;++A){var M=_[A];g.addTriangle(M[0],M[1],M[2])}return p&&i(d,g),b?y?x?c(g,0,x):g.cells():c(g,1,x):c(g,-1)}return _}},2161:function(s,e,t){var n=t(2227)[4];function a(i,c,l,u,f,d){var w=c.opposite(u,f);if(!(w<0)){if(f<u){var v=u;u=f,f=v,v=d,d=w,w=v}c.isConstraint(u,f)||n(i[u],i[f],i[d],i[w])<0&&l.push(u,f)}}t(5070),s.exports=function(i,c){for(var l=[],u=i.length,f=c.stars,d=0;d<u;++d)for(var w=f[d],v=1;v<w.length;v+=2)if(!((x=w[v])<d||c.isConstraint(d,x))){for(var p=w[v-1],y=-1,b=1;b<w.length;b+=2)if(w[b-1]===x){y=w[b];break}y<0||n(i[d],i[x],i[p],i[y])<0&&l.push(d,x)}for(;l.length>0;){for(var x=l.pop(),_=(p=-1,y=-1,w=f[d=l.pop()],1);_<w.length;_+=2){var g=w[_-1],A=w[_];g===x?y=A:A===x&&(p=g)}p<0||y<0||n(i[d],i[x],i[p],i[y])>=0||(c.flip(d,x),a(i,c,l,p,d,y),a(i,c,l,d,y,p),a(i,c,l,y,x,p),a(i,c,l,x,p,y))}}},7098:function(s,e,t){var n,a=t(5070);function i(l,u,f,d,w,v,p){this.cells=l,this.neighbor=u,this.flags=d,this.constraint=f,this.active=w,this.next=v,this.boundary=p}function c(l,u){return l[0]-u[0]||l[1]-u[1]||l[2]-u[2]}s.exports=function(l,u,f){var d=function(S,O){for(var P=S.cells(),U=P.length,R=0;R<U;++R){var j=(tt=P[R])[0],B=tt[1],z=tt[2];B<z?B<j&&(tt[0]=B,tt[1]=z,tt[2]=j):z<j&&(tt[0]=z,tt[1]=j,tt[2]=B)}P.sort(c);var G=new Array(U);for(R=0;R<G.length;++R)G[R]=0;var V=[],et=[],J=new Array(3*U),X=new Array(3*U),Y=null;O&&(Y=[]);var Z=new i(P,J,X,G,V,et,Y);for(R=0;R<U;++R)for(var tt=P[R],rt=0;rt<3;++rt){j=tt[rt],B=tt[(rt+1)%3];var nt=J[3*R+rt]=Z.locate(B,j,S.opposite(B,j)),ot=X[3*R+rt]=S.isConstraint(j,B);nt<0&&(ot?et.push(R):(V.push(R),G[R]=1),O&&Y.push([B,j,-1]))}return Z}(l,f);if(u===0)return f?d.cells.concat(d.boundary):d.cells;for(var w=1,v=d.active,p=d.next,y=d.flags,b=d.cells,x=d.constraint,_=d.neighbor;v.length>0||p.length>0;){for(;v.length>0;){var g=v.pop();if(y[g]!==-w){y[g]=w,b[g];for(var A=0;A<3;++A){var M=_[3*g+A];M>=0&&y[M]===0&&(x[3*g+A]?p.push(M):(v.push(M),y[M]=w))}}}var L=p;p=v,v=L,p.length=0,w=-w}var E=function(S,O,P){for(var U=0,R=0;R<S.length;++R)O[R]===P&&(S[U++]=S[R]);return S.length=U,S}(b,y,u);return f?E.concat(d.boundary):E},i.prototype.locate=(n=[0,0,0],function(l,u,f){var d=l,w=u,v=f;return u<f?u<l&&(d=u,w=f,v=l):f<l&&(d=f,w=l,v=u),d<0?-1:(n[0]=d,n[1]=w,n[2]=v,a.eq(this.cells,n,c))})},9971:function(s,e,t){var n=t(5070),a=t(417)[3];function i(p,y,b,x,_){this.a=p,this.b=y,this.idx=b,this.lowerIds=x,this.upperIds=_}function c(p,y,b,x){this.a=p,this.b=y,this.type=b,this.idx=x}function l(p,y){var b=p.a[0]-y.a[0]||p.a[1]-y.a[1]||p.type-y.type;return b||(p.type!==0&&(b=a(p.a,p.b,y.b))?b:p.idx-y.idx)}function u(p,y){return a(p.a,p.b,y)}function f(p,y,b,x,_){for(var g=n.lt(y,x,u),A=n.gt(y,x,u),M=g;M<A;++M){for(var L=y[M],E=L.lowerIds,S=E.length;S>1&&a(b[E[S-2]],b[E[S-1]],x)>0;)p.push([E[S-1],E[S-2],_]),S-=1;E.length=S,E.push(_);var O=L.upperIds;for(S=O.length;S>1&&a(b[O[S-2]],b[O[S-1]],x)<0;)p.push([O[S-2],O[S-1],_]),S-=1;O.length=S,O.push(_)}}function d(p,y){var b;return(b=p.a[0]<y.a[0]?a(p.a,p.b,y.a):a(y.b,y.a,p.a))?b:(b=y.b[0]<p.b[0]?a(p.a,p.b,y.b):a(y.b,y.a,p.b))||p.idx-y.idx}function w(p,y,b){var x=n.le(p,b,d),_=p[x],g=_.upperIds,A=g[g.length-1];_.upperIds=[A],p.splice(x+1,0,new i(b.a,b.b,b.idx,[A],g))}function v(p,y,b){var x=b.a;b.a=b.b,b.b=x;var _=n.eq(p,b,d),g=p[_];p[_-1].upperIds=g.upperIds,p.splice(_,1)}s.exports=function(p,y){for(var b=p.length,x=y.length,_=[],g=0;g<b;++g)_.push(new c(p[g],null,0,g));for(g=0;g<x;++g){var A=y[g],M=p[A[0]],L=p[A[1]];M[0]<L[0]?_.push(new c(M,L,2,g),new c(L,M,1,g)):M[0]>L[0]&&_.push(new c(L,M,2,g),new c(M,L,1,g))}_.sort(l);for(var E=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),S=[new i([E,1],[E,0],-1,[],[])],O=[],P=(g=0,_.length);g<P;++g){var U=_[g],R=U.type;R===0?f(O,S,p,U.a,U.idx):R===2?w(S,0,U):v(S,0,U)}return O}},743:function(s,e,t){var n=t(5070);function a(l,u){this.stars=l,this.edges=u}s.exports=function(l,u){for(var f=new Array(l),d=0;d<l;++d)f[d]=[];return new a(f,u)};var i=a.prototype;function c(l,u,f){for(var d=1,w=l.length;d<w;d+=2)if(l[d-1]===u&&l[d]===f)return l[d-1]=l[w-2],l[d]=l[w-1],void(l.length=w-2)}i.isConstraint=function(){var l=[0,0];function u(f,d){return f[0]-d[0]||f[1]-d[1]}return function(f,d){return l[0]=Math.min(f,d),l[1]=Math.max(f,d),n.eq(this.edges,l,u)>=0}}(),i.removeTriangle=function(l,u,f){var d=this.stars;c(d[l],u,f),c(d[u],f,l),c(d[f],l,u)},i.addTriangle=function(l,u,f){var d=this.stars;d[l].push(u,f),d[u].push(f,l),d[f].push(l,u)},i.opposite=function(l,u){for(var f=this.stars[u],d=1,w=f.length;d<w;d+=2)if(f[d]===l)return f[d-1];return-1},i.flip=function(l,u){var f=this.opposite(l,u),d=this.opposite(u,l);this.removeTriangle(l,u,f),this.removeTriangle(u,l,d),this.addTriangle(l,d,f),this.addTriangle(u,f,d)},i.edges=function(){for(var l=this.stars,u=[],f=0,d=l.length;f<d;++f)for(var w=l[f],v=0,p=w.length;v<p;v+=2)u.push([w[v],w[v+1]]);return u},i.cells=function(){for(var l=this.stars,u=[],f=0,d=l.length;f<d;++f)for(var w=l[f],v=0,p=w.length;v<p;v+=2){var y=w[v],b=w[v+1];f<Math.min(y,b)&&u.push([f,y,b])}return u}},9887:function(s){s.exports=function(e){for(var t=1,n=1;n<e.length;++n)for(var a=0;a<n;++a)if(e[n]<e[a])t=-t;else if(e[a]===e[n])return 0;return t}},9243:function(s,e,t){var n=t(3094),a=t(6606);function i(u,f){for(var d=0,w=u.length,v=0;v<w;++v)d+=u[v]*f[v];return d}function c(u){var f=u.length;if(f===0)return[];u[0].length;var d=n([u.length+1,u.length+1],1),w=n([u.length+1],1);d[f][f]=0;for(var v=0;v<f;++v){for(var p=0;p<=v;++p)d[p][v]=d[v][p]=2*i(u[v],u[p]);w[v]=i(u[v],u[v])}var y=a(d,w),b=0,x=y[f+1];for(v=0;v<x.length;++v)b+=x[v];var _=new Array(f);for(v=0;v<f;++v){x=y[v];var g=0;for(p=0;p<x.length;++p)g+=x[p];_[v]=g/b}return _}function l(u){if(u.length===0)return[];for(var f=u[0].length,d=n([f]),w=c(u),v=0;v<u.length;++v)for(var p=0;p<f;++p)d[p]+=u[v][p]*w[v];return d}l.barycenetric=c,s.exports=l},1778:function(s,e,t){s.exports=function(a){for(var i=n(a),c=0,l=0;l<a.length;++l)for(var u=a[l],f=0;f<i.length;++f)c+=Math.pow(u[f]-i[f],2);return Math.sqrt(c/a.length)};var n=t(9243)},197:function(s,e,t){s.exports=function(A,M,L){var E;if(L){E=M;for(var S=new Array(M.length),O=0;O<M.length;++O){var P=M[O];S[O]=[P[0],P[1],L[O]]}M=S}for(var U=function(R,j,B){var z=y(R,[],p(R));return _(j,z,B),!!z}(A,M,!!L);g(A,M,!!L);)U=!0;if(L&&U)for(E.length=0,L.length=0,O=0;O<M.length;++O)P=M[O],E.push([P[0],P[1]]),L.push(P[2]);return U};var n=t(1731),a=t(2569),i=t(4434),c=t(5125),l=t(8846),u=t(7999),f=t(2826),d=t(8551),w=t(5528);function v(A){var M=u(A);return[d(M,-1/0),d(M,1/0)]}function p(A){for(var M=new Array(A.length),L=0;L<A.length;++L){var E=A[L];M[L]=[d(E[0],-1/0),d(E[1],-1/0),d(E[0],1/0),d(E[1],1/0)]}return M}function y(A,M,L){for(var E=M.length,S=new n(E),O=[],P=0;P<M.length;++P){var U=M[P],R=v(U[0]),j=v(U[1]);O.push([d(R[0],-1/0),d(j[0],-1/0),d(R[1],1/0),d(j[1],1/0)])}a(O,function(et,J){S.link(et,J)});var B=!0,z=new Array(E);for(P=0;P<E;++P)(V=S.find(P))!==P&&(B=!1,A[V]=[Math.min(A[P][0],A[V][0]),Math.min(A[P][1],A[V][1])]);if(B)return null;var G=0;for(P=0;P<E;++P){var V;(V=S.find(P))===P?(z[P]=G,A[G++]=A[P]):z[P]=-1}for(A.length=G,P=0;P<E;++P)z[P]<0&&(z[P]=z[S.find(P)]);return z}function b(A,M){return A[0]-M[0]||A[1]-M[1]}function x(A,M){return A[0]-M[0]||A[1]-M[1]||(A[2]<M[2]?-1:A[2]>M[2]?1:0)}function _(A,M,L){if(A.length!==0){if(M)for(var E=0;E<A.length;++E){var S=M[(P=A[E])[0]],O=M[P[1]];P[0]=Math.min(S,O),P[1]=Math.max(S,O)}else for(E=0;E<A.length;++E){var P;S=(P=A[E])[0],O=P[1],P[0]=Math.min(S,O),P[1]=Math.max(S,O)}L?A.sort(x):A.sort(b);var U=1;for(E=1;E<A.length;++E){var R=A[E-1],j=A[E];(j[0]!==R[0]||j[1]!==R[1]||L&&j[2]!==R[2])&&(A[U++]=j)}A.length=U}}function g(A,M,L){var E=function(R,j){for(var B=new Array(j.length),z=0;z<j.length;++z){var G=j[z],V=R[G[0]],et=R[G[1]];B[z]=[d(Math.min(V[0],et[0]),-1/0),d(Math.min(V[1],et[1]),-1/0),d(Math.max(V[0],et[0]),1/0),d(Math.max(V[1],et[1]),1/0)]}return B}(A,M),S=function(R,j,B){var z=[];return a(B,function(G,V){var et=j[G],J=j[V];if(et[0]!==J[0]&&et[0]!==J[1]&&et[1]!==J[0]&&et[1]!==J[1]){var X=R[et[0]],Y=R[et[1]],Z=R[J[0]],tt=R[J[1]];i(X,Y,Z,tt)&&z.push([G,V])}}),z}(A,M,E),O=function(R,j,B,z){var G=[];return a(B,z,function(V,et){var J=j[V];if(J[0]!==et&&J[1]!==et){var X=R[et],Y=R[J[0]],Z=R[J[1]];i(Y,Z,X,X)&&G.push([V,et])}}),G}(A,M,E,p(A)),P=function(R,j,B,z,G){var V,et,J=R.map(function(st){return[c(st[0]),c(st[1])]});for(V=0;V<B.length;++V){var X=B[V];et=X[0];var Y=X[1],Z=j[et],tt=j[Y],rt=w(f(R[Z[0]]),f(R[Z[1]]),f(R[tt[0]]),f(R[tt[1]]));if(rt){var nt=R.length;R.push([u(rt[0]),u(rt[1])]),J.push(rt),z.push([et,nt],[Y,nt])}}for(z.sort(function(st,at){if(st[0]!==at[0])return st[0]-at[0];var ht=J[st[1]],Lt=J[at[1]];return l(ht[0],Lt[0])||l(ht[1],Lt[1])}),V=z.length-1;V>=0;--V){var ot=j[et=(vt=z[V])[0]],ct=ot[0],pt=ot[1],gt=R[ct],kt=R[pt];if((gt[0]-kt[0]||gt[1]-kt[1])<0){var yt=ct;ct=pt,pt=yt}ot[0]=ct;var mt,Ot=ot[1]=vt[1];for(G&&(mt=ot[2]);V>0&&z[V-1][0]===et;){var vt,xt=(vt=z[--V])[1];G?j.push([Ot,xt,mt]):j.push([Ot,xt]),Ot=xt}G?j.push([Ot,pt,mt]):j.push([Ot,pt])}return J}(A,M,S,O,L),U=y(A,P);return _(M,U,L),!!U||S.length>0||O.length>0}},5528:function(s,e,t){s.exports=function(w,v,p,y){var b=l(v,w),x=l(y,p),_=d(b,x);if(c(_)===0)return null;var g=d(x,l(w,p)),A=a(g,_),M=f(b,A);return u(w,M)};var n=t(3962),a=t(9189),i=t(4354),c=t(4951),l=t(6695),u=t(7584),f=t(4469);function d(w,v){return i(n(w[0],v[1]),n(w[1],v[0]))}},5692:function(s){s.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(s,e,t){var n=t(5692),a=t(3578);function i(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function c(u){for(var f,d="#",w=0;w<3;++w)d+=("00"+(f=(f=u[w]).toString(16))).substr(f.length);return d}function l(u){return"rgba("+u.join(",")+")"}s.exports=function(u){var f,d,w,v,p,y,b,x,_,g;if(u||(u={}),x=(u.nshades||72)-1,b=u.format||"hex",(y=u.colormap)||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!n[y])throw Error(y+" not a supported colorscale");p=n[y]}else{if(!Array.isArray(y))throw Error("unsupported colormap option",y);p=y.slice()}if(p.length>x+1)throw new Error(y+" map requires nshades to be at least size "+p.length);_=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],f=p.map(function(S){return Math.round(S.index*x)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var A=p.map(function(S,O){var P=p[O].index,U=p[O].rgb.slice();return U.length===4&&U[3]>=0&&U[3]<=1||(U[3]=_[0]+(_[1]-_[0])*P),U}),M=[];for(g=0;g<f.length-1;++g){v=f[g+1]-f[g],d=A[g],w=A[g+1];for(var L=0;L<v;L++){var E=L/v;M.push([Math.round(a(d[0],w[0],E)),Math.round(a(d[1],w[1],E)),Math.round(a(d[2],w[2],E)),a(d[3],w[3],E)])}}return M.push(p[p.length-1].rgb.concat(_[1])),b==="hex"?M=M.map(c):b==="rgbaString"?M=M.map(l):b==="float"&&(M=M.map(i)),M}},9398:function(s,e,t){s.exports=function(f,d,w,v){var p=n(d,w,v);if(p===0){var y=a(n(f,d,w)),b=a(n(f,d,v));if(y===b){if(y===0){var x=u(f,d,w);return x===u(f,d,v)?0:x?1:-1}return 0}return b===0?y>0||u(f,d,v)?-1:1:y===0?b>0||u(f,d,w)?1:-1:a(b-y)}var _=n(f,d,w);return _>0?p>0&&n(f,d,v)>0?1:-1:_<0?p>0||n(f,d,v)>0?1:-1:n(f,d,v)>0||u(f,d,w)?1:-1};var n=t(417),a=t(7538),i=t(87),c=t(2019),l=t(9662);function u(f,d,w){var v=i(f[0],-d[0]),p=i(f[1],-d[1]),y=i(w[0],-d[0]),b=i(w[1],-d[1]),x=l(c(v,y),c(p,b));return x[x.length-1]>=0}},7538:function(s){s.exports=function(e){return e<0?-1:e>0?1:0}},9209:function(s){s.exports=function(n,a){var i=n.length,c=n.length-a.length;if(c)return c;switch(i){case 0:return 0;case 1:return n[0]-a[0];case 2:return n[0]+n[1]-a[0]-a[1]||e(n[0],n[1])-e(a[0],a[1]);case 3:var l=n[0]+n[1],u=a[0]+a[1];if(c=l+n[2]-(u+a[2]))return c;var f=e(n[0],n[1]),d=e(a[0],a[1]);return e(f,n[2])-e(d,a[2])||e(f+n[2],l)-e(d+a[2],u);case 4:var w=n[0],v=n[1],p=n[2],y=n[3],b=a[0],x=a[1],_=a[2],g=a[3];return w+v+p+y-(b+x+_+g)||e(w,v,p,y)-e(b,x,_,g,b)||e(w+v,w+p,w+y,v+p,v+y,p+y)-e(b+x,b+_,b+g,x+_,x+g,_+g)||e(w+v+p,w+v+y,w+p+y,v+p+y)-e(b+x+_,b+x+g,b+_+g,x+_+g);default:for(var A=n.slice().sort(t),M=a.slice().sort(t),L=0;L<i;++L)if(c=A[L]-M[L])return c;return 0}};var e=Math.min;function t(n,a){return n-a}},1284:function(s,e,t){var n=t(9209),a=t(9887);s.exports=function(i,c){return n(i,c)||a(i)-a(c)}},5537:function(s,e,t){var n=t(8950),a=t(8722),i=t(3332);s.exports=function(c){var l=c.length;if(l===0)return[];if(l===1)return[[0]];var u=c[0].length;return u===0?[]:u===1?n(c):u===2?a(c):i(c,u)}},8950:function(s){s.exports=function(e){for(var t=0,n=0,a=1;a<e.length;++a)e[a][0]<e[t][0]&&(t=a),e[a][0]>e[n][0]&&(n=a);return t<n?[[t],[n]]:t>n?[[n],[t]]:[[t]]}},8722:function(s,e,t){s.exports=function(a){var i=n(a),c=i.length;if(c<=2)return[];for(var l=new Array(c),u=i[c-1],f=0;f<c;++f){var d=i[f];l[f]=[u,d],u=d}return l};var n=t(3266)},3332:function(s,e,t){s.exports=function(i,c){try{return n(i,!0)}catch{var l=a(i);if(l.length<=c)return[];var u=function(f,d){for(var w=f.length,v=new Array(w),p=0;p<d.length;++p)v[p]=f[d[p]];var y=d.length;for(p=0;p<w;++p)d.indexOf(p)<0&&(v[y++]=f[p]);return v}(i,l);return function(f,d){for(var w=f.length,v=d.length,p=0;p<w;++p)for(var y=f[p],b=0;b<y.length;++b){var x=y[b];if(x<v)y[b]=d[x];else{x-=v;for(var _=0;_<v;++_)x>=d[_]&&(x+=1);y[b]=x}}return f}(n(u,!0),l)}};var n=t(2183),a=t(2153)},9680:function(s){s.exports=function(e,t,n,a,i,c){var l=i-1,u=i*i,f=l*l,d=(1+2*i)*f,w=i*f,v=u*(3-2*i),p=u*l;if(e.length){c||(c=new Array(e.length));for(var y=e.length-1;y>=0;--y)c[y]=d*e[y]+w*t[y]+v*n[y]+p*a[y];return c}return d*e+w*t+v*n+p*a},s.exports.derivative=function(e,t,n,a,i,c){var l=6*i*i-6*i,u=3*i*i-4*i+1,f=-6*i*i+6*i,d=3*i*i-2*i;if(e.length){c||(c=new Array(e.length));for(var w=e.length-1;w>=0;--w)c[w]=l*e[w]+u*t[w]+f*n[w]+d*a[w];return c}return l*e+u*t+f*n[w]+d*a}},4419:function(s,e,t){var n=t(2183),a=t(1215);function i(l,u){this.point=l,this.index=u}function c(l,u){for(var f=l.point,d=u.point,w=f.length,v=0;v<w;++v){var p=d[v]-f[v];if(p)return p}return 0}s.exports=function(l,u){var f=l.length;if(f===0)return[];var d=l[0].length;if(d<1)return[];if(d===1)return function(P,U,R){if(P===1)return R?[[-1,0]]:[];var j=U.map(function(et,J){return[et[0],J]});j.sort(function(et,J){return et[0]-J[0]});for(var B=new Array(P-1),z=1;z<P;++z){var G=j[z-1],V=j[z];B[z-1]=[G[1],V[1]]}return R&&B.push([-1,B[0][1]],[B[P-1][1],-1]),B}(f,l,u);for(var w=new Array(f),v=1,p=0;p<f;++p){for(var y=l[p],b=new Array(d+1),x=0,_=0;_<d;++_){var g=y[_];b[_]=g,x+=g*g}b[d]=x,w[p]=new i(b,p),v=Math.max(x,v)}a(w,c),f=w.length;var A=new Array(f+d+1),M=new Array(f+d+1),L=(d+1)*(d+1)*v,E=new Array(d+1);for(p=0;p<=d;++p)E[p]=0;for(E[d]=L,A[0]=E.slice(),M[0]=-1,p=0;p<=d;++p)(b=E.slice())[p]=1,A[p+1]=b,M[p+1]=-1;for(p=0;p<f;++p){var S=w[p];A[p+d+1]=S.point,M[p+d+1]=S.index}var O=n(A,!1);if(O=u?O.filter(function(P){for(var U=0,R=0;R<=d;++R){var j=M[P[R]];if(j<0&&++U>=2)return!1;P[R]=j}return!0}):O.filter(function(P){for(var U=0;U<=d;++U){var R=M[P[U]];if(R<0)return!1;P[U]=R}return!0}),1&d)for(p=0;p<O.length;++p)b=(S=O[p])[0],S[0]=S[1],S[1]=b;return O}},8362:function(s){var e=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),n=new Uint32Array(t.buffer);t[0]=1,e=!0,n[1]===1072693248?(s.exports=function(i){return t[0]=i,[n[0],n[1]]},s.exports.pack=function(i,c){return n[0]=i,n[1]=c,t[0]},s.exports.lo=function(i){return t[0]=i,n[0]},s.exports.hi=function(i){return t[0]=i,n[1]}):n[0]===1072693248?(s.exports=function(i){return t[0]=i,[n[1],n[0]]},s.exports.pack=function(i,c){return n[1]=i,n[0]=c,t[0]},s.exports.lo=function(i){return t[0]=i,n[1]},s.exports.hi=function(i){return t[0]=i,n[0]}):e=!1}if(!e){var a=new Buffer(8);s.exports=function(i){return a.writeDoubleLE(i,0,!0),[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]},s.exports.pack=function(i,c){return a.writeUInt32LE(i,0,!0),a.writeUInt32LE(c,4,!0),a.readDoubleLE(0,!0)},s.exports.lo=function(i){return a.writeDoubleLE(i,0,!0),a.readUInt32LE(0,!0)},s.exports.hi=function(i){return a.writeDoubleLE(i,0,!0),a.readUInt32LE(4,!0)}}s.exports.sign=function(i){return s.exports.hi(i)>>>31},s.exports.exponent=function(i){return(s.exports.hi(i)<<1>>>21)-1023},s.exports.fraction=function(i){var c=s.exports.lo(i),l=s.exports.hi(i),u=1048575&l;return 2146435072&l&&(u+=1048576),[c,u]},s.exports.denormalized=function(i){return!(2146435072&s.exports.hi(i))}},3094:function(s){function e(t,n,a){var i=0|t[a];if(i<=0)return[];var c,l=new Array(i);if(a===t.length-1)for(c=0;c<i;++c)l[c]=n;else for(c=0;c<i;++c)l[c]=e(t,n,a+1);return l}s.exports=function(t,n){switch(n===void 0&&(n=0),typeof t){case"number":if(t>0)return function(a,i){var c,l;for(c=new Array(a),l=0;l<a;++l)c[l]=i;return c}(0|t,n);break;case"object":if(typeof t.length=="number")return e(t,n,0)}return[]}},8348:function(s,e,t){s.exports=function(a,i){var c=a.length;if(typeof i!="number"){i=0;for(var l=0;l<c;++l){var u=a[l];i=Math.max(i,u[0],u[1])}i=1+(0|i)}i|=0;var f=new Array(i);for(l=0;l<i;++l)f[l]=[];for(l=0;l<c;++l)f[(u=a[l])[0]].push(u[1]),f[u[1]].push(u[0]);for(var d=0;d<i;++d)n(f[d],function(w,v){return w-v});return f};var n=t(1215)},5795:function(s){s.exports=function(e,t,n){var a=t||0,i=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[a*e[12]+e[8],a*e[13]+e[9],a*e[14]+e[10],a*e[15]+e[11]],[i*e[12]-e[8],i*e[13]-e[9],i*e[14]-e[10],i*e[15]-e[11]]]}},8444:function(s,e,t){s.exports=function(f,d,w){switch(arguments.length){case 0:return new c([0],[0],0);case 1:return typeof f=="number"?new c(v=u(f),v,0):new c(f,u(f.length),0);case 2:var v;if(typeof d=="number")return new c(f,v=u(f.length),+d);w=0;case 3:if(f.length!==d.length)throw new Error("state and velocity lengths must match");return new c(f,d,w)}};var n=t(9680),a=t(5070);function i(f,d,w){return Math.min(d,Math.max(f,w))}function c(f,d,w){this.dimension=f.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var v=0;v<this.dimension;++v)this.bounds[0][v]=-1/0,this.bounds[1][v]=1/0;this._state=f.slice().reverse(),this._velocity=d.slice().reverse(),this._time=[w],this._scratch=[f.slice(),f.slice(),f.slice(),f.slice(),f.slice()]}var l=c.prototype;function u(f){for(var d=new Array(f),w=0;w<f;++w)d[w]=0;return d}l.flush=function(f){var d=a.gt(this._time,f)-1;d<=0||(this._time.splice(0,d),this._state.splice(0,d*this.dimension),this._velocity.splice(0,d*this.dimension))},l.curve=function(f){var d=this._time,w=d.length,v=a.le(d,f),p=this._scratch[0],y=this._state,b=this._velocity,x=this.dimension,_=this.bounds;if(v<0)for(var g=x-1,A=0;A<x;++A,--g)p[A]=y[g];else if(v>=w-1){g=y.length-1;var M=f-d[w-1];for(A=0;A<x;++A,--g)p[A]=y[g]+M*b[g]}else{g=x*(v+1)-1;var L=d[v],E=d[v+1]-L||1,S=this._scratch[1],O=this._scratch[2],P=this._scratch[3],U=this._scratch[4],R=!0;for(A=0;A<x;++A,--g)S[A]=y[g],P[A]=b[g]*E,O[A]=y[g+x],U[A]=b[g+x]*E,R=R&&S[A]===O[A]&&P[A]===U[A]&&P[A]===0;if(R)for(A=0;A<x;++A)p[A]=S[A];else n(S,P,O,U,(f-L)/E,p)}var j=_[0],B=_[1];for(A=0;A<x;++A)p[A]=i(j[A],B[A],p[A]);return p},l.dcurve=function(f){var d=this._time,w=d.length,v=a.le(d,f),p=this._scratch[0],y=this._state,b=this._velocity,x=this.dimension;if(v>=w-1)for(var _=y.length-1,g=(d[w-1],0);g<x;++g,--_)p[g]=b[_];else{_=x*(v+1)-1;var A=d[v],M=d[v+1]-A||1,L=this._scratch[1],E=this._scratch[2],S=this._scratch[3],O=this._scratch[4],P=!0;for(g=0;g<x;++g,--_)L[g]=y[_],S[g]=b[_]*M,E[g]=y[_+x],O[g]=b[_+x]*M,P=P&&L[g]===E[g]&&S[g]===O[g]&&S[g]===0;if(P)for(g=0;g<x;++g)p[g]=0;else for(n.derivative(L,S,E,O,(f-A)/M,p),g=0;g<x;++g)p[g]/=M}return p},l.lastT=function(){var f=this._time;return f[f.length-1]},l.stable=function(){for(var f=this._velocity,d=f.length,w=this.dimension-1;w>=0;--w)if(f[--d])return!1;return!0},l.jump=function(f){var d=this.lastT(),w=this.dimension;if(!(f<d||arguments.length!==w+1)){var v=this._state,p=this._velocity,y=v.length-this.dimension,b=this.bounds,x=b[0],_=b[1];this._time.push(d,f);for(var g=0;g<2;++g)for(var A=0;A<w;++A)v.push(v[y++]),p.push(0);for(this._time.push(f),A=w;A>0;--A)v.push(i(x[A-1],_[A-1],arguments[A])),p.push(0)}},l.push=function(f){var d=this.lastT(),w=this.dimension;if(!(f<d||arguments.length!==w+1)){var v=this._state,p=this._velocity,y=v.length-this.dimension,b=f-d,x=this.bounds,_=x[0],g=x[1],A=b>1e-6?1/b:0;this._time.push(f);for(var M=w;M>0;--M){var L=i(_[M-1],g[M-1],arguments[M]);v.push(L),p.push((L-v[y++])*A)}}},l.set=function(f){var d=this.dimension;if(!(f<this.lastT()||arguments.length!==d+1)){var w=this._state,v=this._velocity,p=this.bounds,y=p[0],b=p[1];this._time.push(f);for(var x=d;x>0;--x)w.push(i(y[x-1],b[x-1],arguments[x])),v.push(0)}},l.move=function(f){var d=this.lastT(),w=this.dimension;if(!(f<=d||arguments.length!==w+1)){var v=this._state,p=this._velocity,y=v.length-this.dimension,b=this.bounds,x=b[0],_=b[1],g=f-d,A=g>1e-6?1/g:0;this._time.push(f);for(var M=w;M>0;--M){var L=arguments[M];v.push(i(x[M-1],_[M-1],v[y++]+L)),p.push(L*A)}}},l.idle=function(f){var d=this.lastT();if(!(f<d)){var w=this.dimension,v=this._state,p=this._velocity,y=v.length-w,b=this.bounds,x=b[0],_=b[1],g=f-d;this._time.push(f);for(var A=w-1;A>=0;--A)v.push(i(x[A],_[A],v[y]+g*p[y])),p.push(0),y+=1}}},7080:function(s){function e(y,b,x,_,g,A){this._color=y,this.key=b,this.value=x,this.left=_,this.right=g,this._count=A}function t(y){return new e(y._color,y.key,y.value,y.left,y.right,y._count)}function n(y,b){return new e(y,b.key,b.value,b.left,b.right,b._count)}function a(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function i(y,b){this._compare=y,this.root=b}s.exports=function(y){return new i(y||p,null)};var c=i.prototype;function l(y,b){var x;return b.left&&(x=l(y,b.left))?x:(x=y(b.key,b.value))||(b.right?l(y,b.right):void 0)}function u(y,b,x,_){if(b(y,_.key)<=0){var g;if(_.left&&(g=u(y,b,x,_.left))||(g=x(_.key,_.value)))return g}if(_.right)return u(y,b,x,_.right)}function f(y,b,x,_,g){var A,M=x(y,g.key),L=x(b,g.key);if(M<=0&&(g.left&&(A=f(y,b,x,_,g.left))||L>0&&(A=_(g.key,g.value))))return A;if(L>0&&g.right)return f(y,b,x,_,g.right)}function d(y,b){this.tree=y,this._stack=b}Object.defineProperty(c,"keys",{get:function(){var y=[];return this.forEach(function(b,x){y.push(b)}),y}}),Object.defineProperty(c,"values",{get:function(){var y=[];return this.forEach(function(b,x){y.push(x)}),y}}),Object.defineProperty(c,"length",{get:function(){return this.root?this.root._count:0}}),c.insert=function(y,b){for(var x=this._compare,_=this.root,g=[],A=[];_;){var M=x(y,_.key);g.push(_),A.push(M),_=M<=0?_.left:_.right}g.push(new e(0,y,b,null,null,1));for(var L=g.length-2;L>=0;--L)_=g[L],A[L]<=0?g[L]=new e(_._color,_.key,_.value,g[L+1],_.right,_._count+1):g[L]=new e(_._color,_.key,_.value,_.left,g[L+1],_._count+1);for(L=g.length-1;L>1;--L){var E=g[L-1];if(_=g[L],E._color===1||_._color===1)break;var S=g[L-2];if(S.left===E)if(E.left===_){if(!(O=S.right)||O._color!==0){S._color=0,S.left=E.right,E._color=1,E.right=S,g[L-2]=E,g[L-1]=_,a(S),a(E),L>=3&&((P=g[L-3]).left===S?P.left=E:P.right=E);break}E._color=1,S.right=n(1,O),S._color=0,L-=1}else{if(!(O=S.right)||O._color!==0){E.right=_.left,S._color=0,S.left=_.right,_._color=1,_.left=E,_.right=S,g[L-2]=_,g[L-1]=E,a(S),a(E),a(_),L>=3&&((P=g[L-3]).left===S?P.left=_:P.right=_);break}E._color=1,S.right=n(1,O),S._color=0,L-=1}else if(E.right===_){if(!(O=S.left)||O._color!==0){S._color=0,S.right=E.left,E._color=1,E.left=S,g[L-2]=E,g[L-1]=_,a(S),a(E),L>=3&&((P=g[L-3]).right===S?P.right=E:P.left=E);break}E._color=1,S.left=n(1,O),S._color=0,L-=1}else{var O;if(!(O=S.left)||O._color!==0){var P;E.left=_.right,S._color=0,S.right=_.left,_._color=1,_.right=E,_.left=S,g[L-2]=_,g[L-1]=E,a(S),a(E),a(_),L>=3&&((P=g[L-3]).right===S?P.right=_:P.left=_);break}E._color=1,S.left=n(1,O),S._color=0,L-=1}}return g[0]._color=1,new i(x,g[0])},c.forEach=function(y,b,x){if(this.root)switch(arguments.length){case 1:return l(y,this.root);case 2:return u(b,this._compare,y,this.root);case 3:return this._compare(b,x)>=0?void 0:f(b,x,this._compare,y,this.root)}},Object.defineProperty(c,"begin",{get:function(){for(var y=[],b=this.root;b;)y.push(b),b=b.left;return new d(this,y)}}),Object.defineProperty(c,"end",{get:function(){for(var y=[],b=this.root;b;)y.push(b),b=b.right;return new d(this,y)}}),c.at=function(y){if(y<0)return new d(this,[]);for(var b=this.root,x=[];;){if(x.push(b),b.left){if(y<b.left._count){b=b.left;continue}y-=b.left._count}if(!y)return new d(this,x);if(y-=1,!b.right||y>=b.right._count)break;b=b.right}return new d(this,[])},c.ge=function(y){for(var b=this._compare,x=this.root,_=[],g=0;x;){var A=b(y,x.key);_.push(x),A<=0&&(g=_.length),x=A<=0?x.left:x.right}return _.length=g,new d(this,_)},c.gt=function(y){for(var b=this._compare,x=this.root,_=[],g=0;x;){var A=b(y,x.key);_.push(x),A<0&&(g=_.length),x=A<0?x.left:x.right}return _.length=g,new d(this,_)},c.lt=function(y){for(var b=this._compare,x=this.root,_=[],g=0;x;){var A=b(y,x.key);_.push(x),A>0&&(g=_.length),x=A<=0?x.left:x.right}return _.length=g,new d(this,_)},c.le=function(y){for(var b=this._compare,x=this.root,_=[],g=0;x;){var A=b(y,x.key);_.push(x),A>=0&&(g=_.length),x=A<0?x.left:x.right}return _.length=g,new d(this,_)},c.find=function(y){for(var b=this._compare,x=this.root,_=[];x;){var g=b(y,x.key);if(_.push(x),g===0)return new d(this,_);x=g<=0?x.left:x.right}return new d(this,[])},c.remove=function(y){var b=this.find(y);return b?b.remove():this},c.get=function(y){for(var b=this._compare,x=this.root;x;){var _=b(y,x.key);if(_===0)return x.value;x=_<=0?x.left:x.right}};var w=d.prototype;function v(y,b){y.key=b.key,y.value=b.value,y.left=b.left,y.right=b.right,y._color=b._color,y._count=b._count}function p(y,b){return y<b?-1:y>b?1:0}Object.defineProperty(w,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(w,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),w.clone=function(){return new d(this.tree,this._stack.slice())},w.remove=function(){var y=this._stack;if(y.length===0)return this.tree;var b=new Array(y.length),x=y[y.length-1];b[b.length-1]=new e(x._color,x.key,x.value,x.left,x.right,x._count);for(var _=y.length-2;_>=0;--_)(x=y[_]).left===y[_+1]?b[_]=new e(x._color,x.key,x.value,b[_+1],x.right,x._count):b[_]=new e(x._color,x.key,x.value,x.left,b[_+1],x._count);if((x=b[b.length-1]).left&&x.right){var g=b.length;for(x=x.left;x.right;)b.push(x),x=x.right;var A=b[g-1];for(b.push(new e(x._color,A.key,A.value,x.left,x.right,x._count)),b[g-1].key=x.key,b[g-1].value=x.value,_=b.length-2;_>=g;--_)x=b[_],b[_]=new e(x._color,x.key,x.value,x.left,b[_+1],x._count);b[g-1].left=b[g]}if((x=b[b.length-1])._color===0){var M=b[b.length-2];for(M.left===x?M.left=null:M.right===x&&(M.right=null),b.pop(),_=0;_<b.length;++_)b[_]._count--;return new i(this.tree._compare,b[0])}if(x.left||x.right){for(x.left?v(x,x.left):x.right&&v(x,x.right),x._color=1,_=0;_<b.length-1;++_)b[_]._count--;return new i(this.tree._compare,b[0])}if(b.length===1)return new i(this.tree._compare,null);for(_=0;_<b.length;++_)b[_]._count--;var L=b[b.length-2];return function(E){for(var S,O,P,U,R=E.length-1;R>=0;--R){if(S=E[R],R===0)return void(S._color=1);if((O=E[R-1]).left===S){if((P=O.right).right&&P.right._color===0)return U=(P=O.right=t(P)).right=t(P.right),O.right=P.left,P.left=O,P.right=U,P._color=O._color,S._color=1,O._color=1,U._color=1,a(O),a(P),R>1&&((j=E[R-2]).left===O?j.left=P:j.right=P),void(E[R-1]=P);if(P.left&&P.left._color===0)return U=(P=O.right=t(P)).left=t(P.left),O.right=U.left,P.left=U.right,U.left=O,U.right=P,U._color=O._color,O._color=1,P._color=1,S._color=1,a(O),a(P),a(U),R>1&&((j=E[R-2]).left===O?j.left=U:j.right=U),void(E[R-1]=U);if(P._color===1){if(O._color===0)return O._color=1,void(O.right=n(0,P));O.right=n(0,P);continue}P=t(P),O.right=P.left,P.left=O,P._color=O._color,O._color=0,a(O),a(P),R>1&&((j=E[R-2]).left===O?j.left=P:j.right=P),E[R-1]=P,E[R]=O,R+1<E.length?E[R+1]=S:E.push(S),R+=2}else{if((P=O.left).left&&P.left._color===0)return U=(P=O.left=t(P)).left=t(P.left),O.left=P.right,P.right=O,P.left=U,P._color=O._color,S._color=1,O._color=1,U._color=1,a(O),a(P),R>1&&((j=E[R-2]).right===O?j.right=P:j.left=P),void(E[R-1]=P);if(P.right&&P.right._color===0)return U=(P=O.left=t(P)).right=t(P.right),O.left=U.right,P.right=U.left,U.right=O,U.left=P,U._color=O._color,O._color=1,P._color=1,S._color=1,a(O),a(P),a(U),R>1&&((j=E[R-2]).right===O?j.right=U:j.left=U),void(E[R-1]=U);if(P._color===1){if(O._color===0)return O._color=1,void(O.left=n(0,P));O.left=n(0,P);continue}var j;P=t(P),O.left=P.right,P.right=O,P._color=O._color,O._color=0,a(O),a(P),R>1&&((j=E[R-2]).right===O?j.right=P:j.left=P),E[R-1]=P,E[R]=O,R+1<E.length?E[R+1]=S:E.push(S),R+=2}}}(b),L.left===x?L.left=null:L.right=null,new i(this.tree._compare,b[0])},Object.defineProperty(w,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(w,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(w,"index",{get:function(){var y=0,b=this._stack;if(b.length===0){var x=this.tree.root;return x?x._count:0}b[b.length-1].left&&(y=b[b.length-1].left._count);for(var _=b.length-2;_>=0;--_)b[_+1]===b[_].right&&(++y,b[_].left&&(y+=b[_].left._count));return y},enumerable:!0}),w.next=function(){var y=this._stack;if(y.length!==0){var b=y[y.length-1];if(b.right)for(b=b.right;b;)y.push(b),b=b.left;else for(y.pop();y.length>0&&y[y.length-1].right===b;)b=y[y.length-1],y.pop()}},Object.defineProperty(w,"hasNext",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].right)return!0;for(var b=y.length-1;b>0;--b)if(y[b-1].left===y[b])return!0;return!1}}),w.update=function(y){var b=this._stack;if(b.length===0)throw new Error("Can't update empty node!");var x=new Array(b.length),_=b[b.length-1];x[x.length-1]=new e(_._color,_.key,y,_.left,_.right,_._count);for(var g=b.length-2;g>=0;--g)(_=b[g]).left===b[g+1]?x[g]=new e(_._color,_.key,_.value,x[g+1],_.right,_._count):x[g]=new e(_._color,_.key,_.value,_.left,x[g+1],_._count);return new i(this.tree._compare,x[0])},w.prev=function(){var y=this._stack;if(y.length!==0){var b=y[y.length-1];if(b.left)for(b=b.left;b;)y.push(b),b=b.right;else for(y.pop();y.length>0&&y[y.length-1].left===b;)b=y[y.length-1],y.pop()}},Object.defineProperty(w,"hasPrev",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].left)return!0;for(var b=y.length-1;b>0;--b)if(y[b-1].right===y[b])return!0;return!1}})},7453:function(s,e,t){s.exports=function(M,L){var E=new d(M);return E.update(L),E};var n=t(9557),a=t(1681),i=t(1011),c=t(2864),l=t(8468),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function f(M,L){return M[0]=L[0],M[1]=L[1],M[2]=L[2],M}function d(M){this.gl=M,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(M)}var w=d.prototype;function v(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}w.update=function(M){function L(et,J,X){if(X in M){var Y,Z=M[X],tt=this[X];(et?Array.isArray(Z)&&Array.isArray(Z[0]):Array.isArray(Z))?this[X]=Y=[J(Z[0]),J(Z[1]),J(Z[2])]:this[X]=Y=[J(Z),J(Z),J(Z)];for(var rt=0;rt<3;++rt)if(Y[rt]!==tt[rt])return!0}return!1}M=M||{};var E,S=L.bind(this,!1,Number),O=L.bind(this,!1,Boolean),P=L.bind(this,!1,String),U=L.bind(this,!0,function(et){if(Array.isArray(et)){if(et.length===3)return[+et[0],+et[1],+et[2],1];if(et.length===4)return[+et[0],+et[1],+et[2],+et[3]]}return[0,0,0,1]}),R=!1,j=!1;if("bounds"in M)for(var B=M.bounds,z=0;z<2;++z)for(var G=0;G<3;++G)B[z][G]!==this.bounds[z][G]&&(j=!0),this.bounds[z][G]=B[z][G];if("ticks"in M)for(E=M.ticks,R=!0,this.autoTicks=!1,z=0;z<3;++z)this.tickSpacing[z]=0;else S("tickSpacing")&&(this.autoTicks=!0,j=!0);if(this._firstInit&&("ticks"in M||"tickSpacing"in M||(this.autoTicks=!0),j=!0,R=!0,this._firstInit=!1),j&&this.autoTicks&&(E=l.create(this.bounds,this.tickSpacing),R=!0),R){for(z=0;z<3;++z)E[z].sort(function(et,J){return et.x-J.x});l.equal(E,this.ticks)?R=!1:this.ticks=E}O("tickEnable"),P("tickFont")&&(R=!0),S("tickSize"),S("tickAngle"),S("tickPad"),U("tickColor");var V=P("labels");P("labelFont")&&(V=!0),O("labelEnable"),S("labelSize"),S("labelPad"),U("labelColor"),O("lineEnable"),O("lineMirror"),S("lineWidth"),U("lineColor"),O("lineTickEnable"),O("lineTickMirror"),S("lineTickLength"),S("lineTickWidth"),U("lineTickColor"),O("gridEnable"),S("gridWidth"),U("gridColor"),O("zeroEnable"),U("zeroLineColor"),S("zeroLineWidth"),O("backgroundEnable"),U("backgroundColor"),this._text?this._text&&(V||R)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=n(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&R&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};var p=[new v,new v,new v];function y(M,L,E,S,O){for(var P=M.primalOffset,U=M.primalMinor,R=M.mirrorOffset,j=M.mirrorMinor,B=S[L],z=0;z<3;++z)if(L!==z){var G=P,V=R,et=U,J=j;B&1<<z&&(G=R,V=P,et=j,J=U),G[z]=E[0][z],V[z]=E[1][z],O[z]>0?(et[z]=-1,J[z]=0):(et[z]=0,J[z]=1)}}var b=[0,0,0],x={model:u,view:u,projection:u,_ortho:!1};w.isOpaque=function(){return!0},w.isTransparent=function(){return!1},w.drawTransparent=function(M){};var _=[0,0,0],g=[0,0,0],A=[0,0,0];w.draw=function(M){M=M||x;for(var L=this.gl,E=M.model||u,S=M.view||u,O=M.projection||u,P=this.bounds,U=M._ortho||!1,R=c(E,S,O,P,U),j=R.cubeEdges,B=R.axis,z=S[12],G=S[13],V=S[14],et=S[15],J=(U?2:1)*this.pixelRatio*(O[3]*z+O[7]*G+O[11]*V+O[15]*et)/L.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=j[X],this.lastCubeProps.axis[X]=B[X];var Y=p;for(X=0;X<3;++X)y(p[X],X,this.bounds,j,B);L=this.gl;var Z,tt,rt,nt=b;for(X=0;X<3;++X)this.backgroundEnable[X]?nt[X]=B[X]:nt[X]=0;for(this._background.draw(E,S,O,P,nt,this.backgroundColor),this._lines.bind(E,S,O,this),X=0;X<3;++X){var ot=[0,0,0];B[X]>0?ot[X]=P[1][X]:ot[X]=P[0][X];for(var ct=0;ct<2;++ct){var pt=(X+1+ct)%3,gt=(X+1+(1^ct))%3;this.gridEnable[pt]&&this._lines.drawGrid(pt,gt,this.bounds,ot,this.gridColor[pt],this.gridWidth[pt]*this.pixelRatio)}for(ct=0;ct<2;++ct)pt=(X+1+ct)%3,gt=(X+1+(1^ct))%3,this.zeroEnable[gt]&&Math.min(P[0][gt],P[1][gt])<=0&&Math.max(P[0][gt],P[1][gt])>=0&&this._lines.drawZero(pt,gt,this.bounds,ot,this.zeroLineColor[gt],this.zeroLineWidth[gt]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,Y[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,Y[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var kt=f(_,Y[X].primalMinor),yt=f(g,Y[X].mirrorMinor),mt=this.lineTickLength;for(ct=0;ct<3;++ct){var Ot=J/E[5*ct];kt[ct]*=mt[ct]*Ot,yt[ct]*=mt[ct]*Ot}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,Y[X].primalOffset,kt,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,Y[X].mirrorOffset,yt,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function vt(Mt){(rt=[0,0,0])[Mt]=1}function xt(Mt,_t,St){var Dt=(Mt+1)%3,ut=(Mt+2)%3,Tt=_t[Dt],bt=_t[ut],It=St[Dt],zt=St[ut];Tt>0&&zt>0||Tt>0&&zt<0||Tt<0&&zt>0||Tt<0&&zt<0?vt(Dt):(bt>0&&It>0||bt>0&&It<0||bt<0&&It>0||bt<0&&It<0)&&vt(ut)}for(this._lines.unbind(),this._text.bind(E,S,O,this.pixelRatio),X=0;X<3;++X){var st=Y[X].primalMinor,at=Y[X].mirrorMinor,ht=f(A,Y[X].primalOffset);for(ct=0;ct<3;++ct)this.lineTickEnable[X]&&(ht[ct]+=J*st[ct]*Math.max(this.lineTickLength[ct],0)/E[5*ct]);var Lt=[0,0,0];if(Lt[X]=1,this.tickEnable[X]){for(this.tickAngle[X]===-3600?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,tt=1,(Z=[this.tickAlign[X],.5,tt])[0]==="auto"?Z[0]=0:Z[0]=parseInt(""+Z[0]),rt=[0,0,0],xt(X,st,at),ct=0;ct<3;++ct)ht[ct]+=J*st[ct]*this.tickPad[ct]/E[5*ct];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],ht,this.tickColor[X],Lt,rt,Z)}if(this.labelEnable[X]){for(tt=0,rt=[0,0,0],this.labels[X].length>4&&(vt(X),tt=1),(Z=[this.labelAlign[X],.5,tt])[0]==="auto"?Z[0]=0:Z[0]=parseInt(""+Z[0]),ct=0;ct<3;++ct)ht[ct]+=J*st[ct]*this.labelPad[ct]/E[5*ct];ht[X]+=.5*(P[0][X]+P[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],ht,this.labelColor[X],[0,0,0],rt,Z)}}this._text.unbind()},w.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(s,e,t){s.exports=function(u){for(var f=[],d=[],w=0,v=0;v<3;++v)for(var p=(v+1)%3,y=(v+2)%3,b=[0,0,0],x=[0,0,0],_=-1;_<=1;_+=2){d.push(w,w+2,w+1,w+1,w+2,w+3),b[v]=_,x[v]=_;for(var g=-1;g<=1;g+=2){b[p]=g;for(var A=-1;A<=1;A+=2)b[y]=A,f.push(b[0],b[1],b[2],x[0],x[1],x[2]),w+=1}var M=p;p=y,y=M}var L=n(u,new Float32Array(f)),E=n(u,new Uint16Array(d),u.ELEMENT_ARRAY_BUFFER),S=a(u,[{buffer:L,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:L,type:u.FLOAT,size:3,offset:12,stride:24}],E),O=i(u);return O.attributes.position.location=0,O.attributes.normal.location=1,new c(u,L,S,O)};var n=t(5827),a=t(2944),i=t(1943).bg;function c(u,f,d,w){this.gl=u,this.buffer=f,this.vao=d,this.shader=w}var l=c.prototype;l.draw=function(u,f,d,w,v,p){for(var y=!1,b=0;b<3;++b)y=y||v[b];if(y){var x=this.gl;x.enable(x.POLYGON_OFFSET_FILL),x.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:f,projection:d,bounds:w,enable:v,colors:p},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),x.disable(x.POLYGON_OFFSET_FILL)}},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(s,e,t){s.exports=function(g,A,M,L,E){a(l,A,g),a(l,M,l);for(var S=0,O=0;O<2;++O){d[2]=L[O][2];for(var P=0;P<2;++P){d[1]=L[P][1];for(var U=0;U<2;++U)d[0]=L[U][0],v(u[S],d,l),S+=1}}var R=-1;for(O=0;O<8;++O){for(var j=u[O][3],B=0;B<3;++B)f[O][B]=u[O][B]/j;E&&(f[O][2]*=-1),j<0&&(R<0||f[O][2]<f[R][2])&&(R=O)}if(R<0){R=0;for(var z=0;z<3;++z){for(var G=(z+2)%3,V=(z+1)%3,et=-1,J=-1,X=0;X<2;++X){var Y=(tt=X<<z)+(X<<G)+(1-X<<V),Z=tt+(1-X<<G)+(X<<V);c(f[tt],f[Y],f[Z],w)<0||(X?et=1:J=1)}if(et<0||J<0)J>et&&(R|=1<<z);else{for(X=0;X<2;++X){Y=(tt=X<<z)+(X<<G)+(1-X<<V),Z=tt+(1-X<<G)+(X<<V);var tt,rt=y([u[tt],u[Y],u[Z],u[tt+(1<<G)+(1<<V)]]);X?et=rt:J=rt}J>et&&(R|=1<<z)}}}var nt=7^R,ot=-1;for(O=0;O<8;++O)O!==R&&O!==nt&&(ot<0||f[ot][1]>f[O][1])&&(ot=O);var ct=-1;for(O=0;O<3;++O)(gt=ot^1<<O)!==R&&gt!==nt&&(ct<0&&(ct=gt),(V=f[gt])[0]<f[ct][0]&&(ct=gt));var pt=-1;for(O=0;O<3;++O){var gt;(gt=ot^1<<O)!==R&&gt!==nt&&gt!==ct&&(pt<0&&(pt=gt),(V=f[gt])[0]>f[pt][0]&&(pt=gt))}var kt=b;kt[0]=kt[1]=kt[2]=0,kt[n.log2(ct^ot)]=ot&ct,kt[n.log2(ot^pt)]=ot&pt;var yt=7^pt;yt===R||yt===nt?(yt=7^ct,kt[n.log2(pt^yt)]=yt&pt):kt[n.log2(ct^yt)]=yt&ct;var mt=x,Ot=R;for(z=0;z<3;++z)mt[z]=Ot&1<<z?-1:1;return _};var n=t(2288),a=t(104),i=t(4670),c=t(417),l=new Array(16),u=new Array(8),f=new Array(8),d=new Array(3),w=[0,0,0];function v(g,A,M){for(var L=0;L<4;++L){g[L]=M[12+L];for(var E=0;E<3;++E)g[L]+=A[E]*M[4*E+L]}}(function(){for(var g=0;g<8;++g)u[g]=[1,1,1,1],f[g]=[1,1,1]})();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function y(g){for(var A=0;A<p.length;++A)if((g=i.positive(g,p[A])).length<3)return 0;var M=g[0],L=M[0]/M[3],E=M[1]/M[3],S=0;for(A=1;A+1<g.length;++A){var O=g[A],P=g[A+1],U=O[0]/O[3]-L,R=O[1]/O[3]-E,j=P[0]/P[3]-L,B=P[1]/P[3]-E;S+=Math.abs(U*B-R*j)}return S}var b=[1,1,1],x=[0,0,0],_={cubeEdges:b,axis:x}},1681:function(s,e,t){s.exports=function(b,x,_){var g=[],A=[0,0,0],M=[0,0,0],L=[0,0,0],E=[0,0,0];g.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var S=0;S<3;++S){for(var O=g.length/3|0,P=0;P<_[S].length;++P){var U=+_[S][P].x;g.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1)}var R=g.length/3|0;A[S]=O,M[S]=R-O,O=g.length/3|0;for(var j=0;j<_[S].length;++j)U=+_[S][j].x,g.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1);R=g.length/3|0,L[S]=O,E[S]=R-O}var B=n(b,new Float32Array(g)),z=a(b,[{buffer:B,type:b.FLOAT,size:3,stride:0,offset:0}]),G=i(b);return G.attributes.position.location=0,new p(b,B,z,G,M,A,E,L)};var n=t(5827),a=t(2944),i=t(1943).j,c=[0,0,0],l=[0,0,0],u=[0,0,0],f=[0,0,0],d=[1,1];function w(b){return b[0]=b[1]=b[2]=0,b}function v(b,x){return b[0]=x[0],b[1]=x[1],b[2]=x[2],b}function p(b,x,_,g,A,M,L,E){this.gl=b,this.vertBuffer=x,this.vao=_,this.shader=g,this.tickCount=A,this.tickOffset=M,this.gridCount=L,this.gridOffset=E}var y=p.prototype;y.bind=function(b,x,_){this.shader.bind(),this.shader.uniforms.model=b,this.shader.uniforms.view=x,this.shader.uniforms.projection=_,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=d,this.vao.bind()},y.unbind=function(){this.vao.unbind()},y.drawAxisLine=function(b,x,_,g,A){var M=w(l);this.shader.uniforms.majorAxis=l,M[b]=x[1][b]-x[0][b],this.shader.uniforms.minorAxis=M;var L,E=v(f,_);E[b]+=x[0][b],this.shader.uniforms.offset=E,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=g,(L=w(u))[(b+2)%3]=1,this.shader.uniforms.screenAxis=L,this.vao.draw(this.gl.TRIANGLES,6),(L=w(u))[(b+1)%3]=1,this.shader.uniforms.screenAxis=L,this.vao.draw(this.gl.TRIANGLES,6)},y.drawAxisTicks=function(b,x,_,g,A){if(this.tickCount[b]){var M=w(c);M[b]=1,this.shader.uniforms.majorAxis=M,this.shader.uniforms.offset=x,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=g,this.shader.uniforms.lineWidth=A;var L=w(u);L[b]=1,this.shader.uniforms.screenAxis=L,this.vao.draw(this.gl.TRIANGLES,this.tickCount[b],this.tickOffset[b])}},y.drawGrid=function(b,x,_,g,A,M){if(this.gridCount[b]){var L=w(l);L[x]=_[1][x]-_[0][x],this.shader.uniforms.minorAxis=L;var E=v(f,g);E[x]+=_[0][x],this.shader.uniforms.offset=E;var S=w(c);S[b]=1,this.shader.uniforms.majorAxis=S;var O=w(u);O[b]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=A,this.vao.draw(this.gl.TRIANGLES,this.gridCount[b],this.gridOffset[b])}},y.drawZero=function(b,x,_,g,A,M){var L=w(l);this.shader.uniforms.majorAxis=L,L[b]=_[1][b]-_[0][b],this.shader.uniforms.minorAxis=L;var E=v(f,g);E[b]+=_[0][b],this.shader.uniforms.offset=E;var S=w(u);S[x]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=A,this.vao.draw(this.gl.TRIANGLES,6)},y.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(s,e,t){var n=t(6832),a=t(5158),i=n([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),c=n([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);e.j=function(w){return a(w,i,c,null,[{name:"position",type:"vec3"}])};var l=n([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),u=n([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);e.f=function(w){return a(w,l,u,null,[{name:"position",type:"vec3"}])};var f=n([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),d=n([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);e.bg=function(w){return a(w,f,d,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(s,e,t){s.exports=function(v,p,y,b,x,_){var g=n(v),A=a(v,[{buffer:g,size:3}]),M=c(v);M.attributes.position.location=0;var L=new f(v,M,g,A);return L.update(p,y,b,x,_),L};var n=t(5827),a=t(2944),i=t(875),c=t(1943).f,l=window||k.global||{},u=l.__TEXT_CACHE||{};function f(v,p,y,b){this.gl=v,this.shader=p,this.buffer=y,this.vao=b,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}l.__TEXT_CACHE={};var d=f.prototype,w=[0,0];d.bind=function(v,p,y,b){this.vao.bind(),this.shader.bind();var x=this.shader.uniforms;x.model=v,x.view=p,x.projection=y,x.pixelScale=b,w[0]=this.gl.drawingBufferWidth,w[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=w},d.unbind=function(){this.vao.unbind()},d.update=function(v,p,y,b,x){var _=[];function g(U,R,j,B,z,G){var V=u[j];V||(V=u[j]={});var et=V[R];et||(et=V[R]=function(ct,pt){try{return i(ct,pt)}catch(gt){return console.warn('error vectorizing text:"'+ct+'" error:',gt),{cells:[],positions:[]}}}(R,{triangles:!0,font:j,textAlign:"center",textBaseline:"middle",lineSpacing:z,styletags:G}));for(var J=(B||12)/12,X=et.positions,Y=et.cells,Z=0,tt=Y.length;Z<tt;++Z)for(var rt=Y[Z],nt=2;nt>=0;--nt){var ot=X[rt[nt]];_.push(J*ot[0],-J*ot[1],U)}}for(var A=[0,0,0],M=[0,0,0],L=[0,0,0],E=[0,0,0],S={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){L[O]=_.length/3|0,g(.5*(v[0][O]+v[1][O]),p[O],y[O],12,1.25,S),E[O]=(_.length/3|0)-L[O],A[O]=_.length/3|0;for(var P=0;P<b[O].length;++P)b[O][P].text&&g(b[O][P].x,b[O][P].text,b[O][P].font||x,b[O][P].fontSize||12,1.25,S);M[O]=(_.length/3|0)-A[O]}this.buffer.update(_),this.tickOffset=A,this.tickCount=M,this.labelOffset=L,this.labelCount=E},d.drawTicks=function(v,p,y,b,x,_,g,A){this.tickCount[v]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=x,this.shader.uniforms.angle=y,this.shader.uniforms.scale=p,this.shader.uniforms.offset=b,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=A,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v]))},d.drawLabel=function(v,p,y,b,x,_,g,A){this.labelCount[v]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=x,this.shader.uniforms.angle=y,this.shader.uniforms.scale=p,this.shader.uniforms.offset=b,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=A,this.vao.draw(this.gl.TRIANGLES,this.labelCount[v],this.labelOffset[v]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(s,e){function t(n,a){var i=n+"",c=i.indexOf("."),l=0;c>=0&&(l=i.length-c-1);var u=Math.pow(10,l),f=Math.round(n*a*u),d=f+"";if(d.indexOf("e")>=0)return d;var w=f/u,v=f%u;f<0?(w=0|-Math.ceil(w),v=0|-v):(w=0|Math.floor(w),v|=0);var p=""+w;if(f<0&&(p="-"+p),l){for(var y=""+v;y.length<l;)y="0"+y;return p+"."+y}return p}e.create=function(n,a){for(var i=[],c=0;c<3;++c){for(var l=[],u=(n[0][c],n[1][c],0);u*a[c]<=n[1][c];++u)l.push({x:u*a[c],text:t(a[c],u)});for(u=-1;u*a[c]>=n[0][c];--u)l.push({x:u*a[c],text:t(a[c],u)});i.push(l)}return i},e.equal=function(n,a){for(var i=0;i<3;++i){if(n[i].length!==a[i].length)return!1;for(var c=0;c<n[i].length;++c){var l=n[i][c],u=a[i][c];if(l.x!==u.x||l.text!==u.text||l.font!==u.font||l.fontColor!==u.fontColor||l.fontSize!==u.fontSize||l.dx!==u.dx||l.dy!==u.dy)return!1}}return!0}},2771:function(s,e,t){s.exports=function(_,g,A,M,L){var E=g.model||f,S=g.view||f,O=g.projection||f,P=g._ortho||!1,U=_.bounds,R=(L=L||i(E,S,O,U,P)).axis;c(d,S,E),c(d,O,d);for(var j=b,B=0;B<3;++B)j[B].lo=1/0,j[B].hi=-1/0,j[B].pixelsPerDataUnit=1/0;var z=n(l(d,d));l(d,d);for(var G=0;G<3;++G){var V=(G+1)%3,et=(G+2)%3,J=x;t:for(B=0;B<2;++B){var X=[];if(R[G]<0!=!!B){J[G]=U[B][G];for(var Y=0;Y<2;++Y){J[V]=U[Y^B][V];for(var Z=0;Z<2;++Z)J[et]=U[Z^Y^B][et],X.push(J.slice())}var tt=P?5:4;for(Y=tt;Y===tt;++Y){if(X.length===0)continue t;X=a.positive(X,z[Y])}for(Y=0;Y<X.length;++Y){et=X[Y];var rt=y(x,d,et,A,M);for(Z=0;Z<3;++Z)j[Z].lo=Math.min(j[Z].lo,et[Z]),j[Z].hi=Math.max(j[Z].hi,et[Z]),Z!==G&&(j[Z].pixelsPerDataUnit=Math.min(j[Z].pixelsPerDataUnit,Math.abs(rt[Z])))}}}}return j};var n=t(5795),a=t(4670),i=t(2864),c=t(104),l=t(2142),u=t(6342),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),d=new Float32Array(16);function w(_,g,A){this.lo=_,this.hi=g,this.pixelsPerDataUnit=A}var v=[0,0,0,1],p=[0,0,0,1];function y(_,g,A,M,L){for(var E=0;E<3;++E){for(var S=v,O=p,P=0;P<3;++P)O[P]=S[P]=A[P];O[3]=S[3]=1,O[E]+=1,u(O,O,g),O[3]<0&&(_[E]=1/0),S[E]-=1,u(S,S,g),S[3]<0&&(_[E]=1/0);var U=(S[0]/S[3]-O[0]/O[3])*M,R=(S[1]/S[3]-O[1]/O[3])*L;_[E]=.25*Math.sqrt(U*U+R*R)}return _}var b=[new w(1/0,-1/0,1/0),new w(1/0,-1/0,1/0),new w(1/0,-1/0,1/0)],x=[0,0,0]},5827:function(s,e,t){var n=t(5306),a=t(7498),i=t(5050),c=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(w,v,p,y,b){this.gl=w,this.type=v,this.handle=p,this.length=y,this.usage=b}var u=l.prototype;function f(w,v,p,y,b,x){var _=b.length*b.BYTES_PER_ELEMENT;if(x<0)return w.bufferData(v,b,y),_;if(_+x>p)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return w.bufferSubData(v,x,b),p}function d(w,v){for(var p=n.malloc(w.length,v),y=w.length,b=0;b<y;++b)p[b]=w[b];return p}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(w,v){if(typeof v!="number"&&(v=-1),this.bind(),typeof w=="object"&&w.shape!==void 0){var p=w.dtype;if(c.indexOf(p)<0&&(p="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(p=gl.getExtension("OES_element_index_uint")&&p!=="uint16"?"uint32":"uint16"),p===w.dtype&&function(_,g){for(var A=1,M=g.length-1;M>=0;--M){if(g[M]!==A)return!1;A*=_[M]}return!0}(w.shape,w.stride))w.offset===0&&w.data.length===w.shape[0]?this.length=f(this.gl,this.type,this.length,this.usage,w.data,v):this.length=f(this.gl,this.type,this.length,this.usage,w.data.subarray(w.offset,w.shape[0]),v);else{var y=n.malloc(w.size,p),b=i(y,w.shape);a.assign(b,w),this.length=f(this.gl,this.type,this.length,this.usage,v<0?y:y.subarray(0,w.size),v),n.free(y)}}else if(Array.isArray(w)){var x;x=this.type===this.gl.ELEMENT_ARRAY_BUFFER?d(w,"uint16"):d(w,"float32"),this.length=f(this.gl,this.type,this.length,this.usage,v<0?x:x.subarray(0,w.length),v),n.free(x)}else if(typeof w=="object"&&typeof w.length=="number")this.length=f(this.gl,this.type,this.length,this.usage,w,v);else{if(typeof w!="number"&&w!==void 0)throw new Error("gl-buffer: Invalid data type");if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(w|=0)<=0&&(w=1),this.gl.bufferData(this.type,0|w,this.usage),this.length=w}},s.exports=function(w,v,p,y){if(p=p||w.ARRAY_BUFFER,y=y||w.DYNAMIC_DRAW,p!==w.ARRAY_BUFFER&&p!==w.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==w.DYNAMIC_DRAW&&y!==w.STATIC_DRAW&&y!==w.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var b=w.createBuffer(),x=new l(w,p,b,0,y);return x.update(v),x}},1140:function(s,e,t){var n=t(2858);s.exports=function(i,c){var l=i.positions,u=i.vectors,f={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(i.positions.length===0)return c&&(c[0]=[0,0,0],c[1]=[0,0,0]),f;for(var d=0,w=1/0,v=-1/0,p=1/0,y=-1/0,b=1/0,x=-1/0,_=null,g=null,A=[],M=1/0,L=!1,E=0;E<l.length;E++){var S=l[E];w=Math.min(S[0],w),v=Math.max(S[0],v),p=Math.min(S[1],p),y=Math.max(S[1],y),b=Math.min(S[2],b),x=Math.max(S[2],x);var O=u[E];if(n.length(O)>d&&(d=n.length(O)),E){var P=2*n.distance(_,S)/(n.length(g)+n.length(O));P?(M=Math.min(M,P),L=!1):L=!0}L||(_=S,g=O),A.push(O)}var U=[w,p,b],R=[v,y,x];c&&(c[0]=U,c[1]=R),d===0&&(d=1);var j=1/d;isFinite(M)||(M=1),f.vectorScale=M;var B=i.coneSize||.5;i.absoluteConeSize&&(B=i.absoluteConeSize*j),f.coneScale=B,E=0;for(var z=0;E<l.length;E++)for(var G=(S=l[E])[0],V=S[1],et=S[2],J=A[E],X=n.length(J)*j,Y=0;Y<8;Y++){f.positions.push([G,V,et,z++]),f.positions.push([G,V,et,z++]),f.positions.push([G,V,et,z++]),f.positions.push([G,V,et,z++]),f.positions.push([G,V,et,z++]),f.positions.push([G,V,et,z++]),f.vectors.push(J),f.vectors.push(J),f.vectors.push(J),f.vectors.push(J),f.vectors.push(J),f.vectors.push(J),f.vertexIntensity.push(X,X,X),f.vertexIntensity.push(X,X,X);var Z=f.positions.length;f.cells.push([Z-6,Z-5,Z-4],[Z-3,Z-2,Z-1])}return f};var a=t(7234);s.exports.createMesh=t(5028),s.exports.createConeMesh=function(i,c){return s.exports.createMesh(i,c,{shaders:a,traceType:"cone"})}},5028:function(s,e,t){var n=t(5158),a=t(5827),i=t(2944),c=t(8931),l=t(104),u=t(7437),f=t(5050),d=t(9156),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(y,b,x,_,g,A,M,L,E,S,O){this.gl=y,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=b,this.dirty=!0,this.triShader=x,this.pickShader=_,this.trianglePositions=g,this.triangleVectors=A,this.triangleColors=L,this.triangleUVs=E,this.triangleIds=M,this.triangleVAO=S,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var p=v.prototype;p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(y){this.pickId=y},p.update=function(y){y=y||{};var b=this.gl;this.dirty=!0,"lightPosition"in y&&(this.lightPosition=y.lightPosition),"opacity"in y&&(this.opacity=y.opacity),"ambient"in y&&(this.ambientLight=y.ambient),"diffuse"in y&&(this.diffuseLight=y.diffuse),"specular"in y&&(this.specularLight=y.specular),"roughness"in y&&(this.roughness=y.roughness),"fresnel"in y&&(this.fresnel=y.fresnel),y.tubeScale!==void 0&&(this.tubeScale=y.tubeScale),y.vectorScale!==void 0&&(this.vectorScale=y.vectorScale),y.coneScale!==void 0&&(this.coneScale=y.coneScale),y.coneOffset!==void 0&&(this.coneOffset=y.coneOffset),y.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=b.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=b.LINEAR,this.texture.setPixels(function(rt){for(var nt=d({colormap:rt,nshades:256,format:"rgba"}),ot=new Uint8Array(1024),ct=0;ct<256;++ct){for(var pt=nt[ct],gt=0;gt<3;++gt)ot[4*ct+gt]=pt[gt];ot[4*ct+3]=255*pt[3]}return f(ot,[256,256,4],[4,0,1])}(y.colormap)),this.texture.generateMipmap());var x=y.cells,_=y.positions,g=y.vectors;if(_&&x&&g){var A=[],M=[],L=[],E=[],S=[];this.cells=x,this.positions=_,this.vectors=g;var O=y.meshColor||[1,1,1,1],P=y.vertexIntensity,U=1/0,R=-1/0;if(P)if(y.vertexIntensityBounds)U=+y.vertexIntensityBounds[0],R=+y.vertexIntensityBounds[1];else for(var j=0;j<P.length;++j){var B=P[j];U=Math.min(U,B),R=Math.max(R,B)}else for(j=0;j<_.length;++j)B=_[j][2],U=Math.min(U,B),R=Math.max(R,B);for(this.intensity=P||function(rt){for(var nt=rt.length,ot=new Array(nt),ct=0;ct<nt;++ct)ot[ct]=rt[ct][2];return ot}(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=0;j<_.length;++j)for(var z=_[j],G=0;G<3;++G)!isNaN(z[G])&&isFinite(z[G])&&(this.bounds[0][G]=Math.min(this.bounds[0][G],z[G]),this.bounds[1][G]=Math.max(this.bounds[1][G],z[G]));var V=0;t:for(j=0;j<x.length;++j){var et=x[j];if(et.length===3){for(G=0;G<3;++G){z=_[X=et[G]];for(var J=0;J<3;++J)if(isNaN(z[J])||!isFinite(z[J]))continue t}for(G=0;G<3;++G){var X;z=_[X=et[2-G]],A.push(z[0],z[1],z[2],z[3]);var Y=g[X];M.push(Y[0],Y[1],Y[2],Y[3]||0);var Z,tt=O;tt.length===3?L.push(tt[0],tt[1],tt[2],1):L.push(tt[0],tt[1],tt[2],tt[3]),Z=P?[(P[X]-U)/(R-U),0]:[(z[2]-U)/(R-U),0],E.push(Z[0],Z[1]),S.push(j)}V+=1}}this.triangleCount=V,this.trianglePositions.update(A),this.triangleVectors.update(M),this.triangleColors.update(L),this.triangleUVs.update(E),this.triangleIds.update(new Uint32Array(S))}},p.drawTransparent=p.draw=function(y){y=y||{};for(var b=this.gl,x=y.model||w,_=y.view||w,g=y.projection||w,A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)A[0][M]=Math.max(A[0][M],this.clipBounds[0][M]),A[1][M]=Math.min(A[1][M],this.clipBounds[1][M]);var L={model:x,view:_,projection:g,inverseModel:w.slice(),clipBounds:A,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};L.inverseModel=u(L.inverseModel,L.model),b.disable(b.CULL_FACE),this.texture.bind(0);var E=new Array(16);for(l(E,L.view,L.model),l(E,L.projection,E),u(E,E),M=0;M<3;++M)L.eyePosition[M]=E[12+M]/E[15];var S=E[15];for(M=0;M<3;++M)S+=this.lightPosition[M]*E[4*M+3];for(M=0;M<3;++M){for(var O=E[12+M],P=0;P<3;++P)O+=E[4*P+M]*this.lightPosition[P];L.lightPosition[M]=O/S}if(this.triangleCount>0){var U=this.triShader;U.bind(),U.uniforms=L,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},p.drawPick=function(y){y=y||{};for(var b=this.gl,x=y.model||w,_=y.view||w,g=y.projection||w,A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)A[0][M]=Math.max(A[0][M],this.clipBounds[0][M]),A[1][M]=Math.min(A[1][M],this.clipBounds[1][M]);this._model=[].slice.call(x),this._view=[].slice.call(_),this._projection=[].slice.call(g),this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];var L={model:x,view:_,projection:g,clipBounds:A,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},E=this.pickShader;E.bind(),E.uniforms=L,this.triangleCount>0&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},p.pick=function(y){if(!y||y.id!==this.pickId)return null;var b=y.value[0]+256*y.value[1]+65536*y.value[2],x=this.cells[b],_=this.positions[x[1]].slice(0,3),g={position:_,dataCoordinate:_,index:Math.floor(x[1]/48)};return this.traceType==="cone"?g.index=Math.floor(x[1]/48):this.traceType==="streamtube"&&(g.intensity=this.intensity[x[1]],g.velocity=this.vectors[x[1]].slice(0,3),g.divergence=this.vectors[x[1]][3],g.index=b),g},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},s.exports=function(y,b,x){var _=x.shaders;arguments.length===1&&(y=(b=y).gl);var g=function(R,j){var B=n(R,j.meshShader.vertex,j.meshShader.fragment,null,j.meshShader.attributes);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B.attributes.vector.location=4,B}(y,_),A=function(R,j){var B=n(R,j.pickShader.vertex,j.pickShader.fragment,null,j.pickShader.attributes);return B.attributes.position.location=0,B.attributes.id.location=1,B.attributes.vector.location=4,B}(y,_),M=c(y,f(new Uint8Array([255,255,255,255]),[1,1,4]));M.generateMipmap(),M.minFilter=y.LINEAR_MIPMAP_LINEAR,M.magFilter=y.LINEAR;var L=a(y),E=a(y),S=a(y),O=a(y),P=a(y),U=new v(y,M,g,A,L,E,P,S,O,i(y,[{buffer:L,type:y.FLOAT,size:4},{buffer:P,type:y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:S,type:y.FLOAT,size:4},{buffer:O,type:y.FLOAT,size:2},{buffer:E,type:y.FLOAT,size:4}]),x.traceType||"cone");return U.update(b),U}},7234:function(s,e,t){var n=t(6832),a=n([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=n([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),c=n([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);e.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},e.pickShader={vertex:c,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(s){s.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(s,e,t){var n=t(1950);s.exports=function(a){return n[a]}},3110:function(s,e,t){s.exports=function(v){var p=v.gl,y=n(p),b=a(p,[{buffer:y,type:p.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:p.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:p.FLOAT,size:3,offset:28,stride:40}]),x=i(p);x.attributes.position.location=0,x.attributes.color.location=1,x.attributes.offset.location=2;var _=new l(p,y,b,x);return _.update(v),_};var n=t(5827),a=t(2944),i=t(7667),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(v,p,y,b){this.gl=v,this.shader=b,this.buffer=p,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=l.prototype;function f(v,p){for(var y=0;y<3;++y)v[0][y]=Math.min(v[0][y],p[y]),v[1][y]=Math.max(v[1][y],p[y])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(v){var p=this.gl,y=this.shader.uniforms;this.shader.bind();var b=y.view=v.view||c,x=y.projection=v.projection||c;y.model=v.model||c,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var _=b[12],g=b[13],A=b[14],M=b[15],L=(v._ortho?2:1)*this.pixelRatio*(x[3]*_+x[7]*g+x[11]*A+x[15]*M)/p.drawingBufferHeight;this.vao.bind();for(var E=0;E<3;++E)p.lineWidth(this.lineWidth[E]*this.pixelRatio),y.capSize=this.capSize[E]*L,this.lineCount[E]&&p.drawArrays(p.LINES,this.lineOffset[E],this.lineCount[E]);this.vao.unbind()};var d=function(){for(var v=new Array(3),p=0;p<3;++p){for(var y=[],b=1;b<=2;++b)for(var x=-1;x<=1;x+=2){var _=[0,0,0];_[(b+p)%3]=x,y.push(_)}v[p]=y}return v}();function w(v,p,y,b){for(var x=d[b],_=0;_<x.length;++_){var g=x[_];v.push(p[0],p[1],p[2],y[0],y[1],y[2],y[3],g[0],g[1],g[2])}return x.length}u.update=function(v){"lineWidth"in(v=v||{})&&(this.lineWidth=v.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in v&&(this.capSize=v.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in v&&(this.opacity=+v.opacity,this.opacity<1&&(this.hasAlpha=!0));var p=v.color||[[0,0,0],[0,0,0],[0,0,0]],y=v.position,b=v.error;if(Array.isArray(p[0])||(p=[p,p,p]),y&&b){var x=[],_=y.length,g=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var A=0;A<3;++A){this.lineOffset[A]=g;t:for(var M=0;M<_;++M){for(var L=y[M],E=0;E<3;++E)if(isNaN(L[E])||!isFinite(L[E]))continue t;var S,O=b[M],P=p[A];Array.isArray(P[0])&&(P=p[M]),P.length===3?P=[P[0],P[1],P[2],1]:P.length===4&&(P=[P[0],P[1],P[2],P[3]],!this.hasAlpha&&P[3]<1&&(this.hasAlpha=!0)),isNaN(O[0][A])||isNaN(O[1][A])||(O[0][A]<0&&((S=L.slice())[A]+=O[0][A],x.push(L[0],L[1],L[2],P[0],P[1],P[2],P[3],0,0,0,S[0],S[1],S[2],P[0],P[1],P[2],P[3],0,0,0),f(this.bounds,S),g+=2+w(x,S,P,A)),O[1][A]>0&&((S=L.slice())[A]+=O[1][A],x.push(L[0],L[1],L[2],P[0],P[1],P[2],P[3],0,0,0,S[0],S[1],S[2],P[0],P[1],P[2],P[3],0,0,0),f(this.bounds,S),g+=2+w(x,S,P,A)))}this.lineCount[A]=g-this.lineOffset[A]}this.buffer.update(x)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(s,e,t){var n=t(6832),a=t(5158),i=n([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),c=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);s.exports=function(l){return a(l,i,c,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(s,e,t){var n=t(8931);s.exports=function(_,g,A,M){a||(a=_.FRAMEBUFFER_UNSUPPORTED,i=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,c=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,l=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=_.getExtension("WEBGL_draw_buffers");if(!u&&L&&function(j,B){var z=j.getParameter(B.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(z+1);for(var G=0;G<=z;++G){for(var V=new Array(z),et=0;et<G;++et)V[et]=j.COLOR_ATTACHMENT0+et;for(et=G;et<z;++et)V[et]=j.NONE;u[G]=V}}(_,L),Array.isArray(g)&&(M=A,A=0|g[1],g=0|g[0]),typeof g!="number")throw new Error("gl-fbo: Missing shape parameter");var E=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(g<0||g>E||A<0||A>E)throw new Error("gl-fbo: Parameters are too large for FBO");var S=1;if("color"in(M=M||{})){if((S=Math.max(0|M.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(S>1){if(!L)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(S>_.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+S+" draw buffers")}}var O=_.UNSIGNED_BYTE,P=_.getExtension("OES_texture_float");if(M.float&&S>0){if(!P)throw new Error("gl-fbo: Context does not support floating point textures");O=_.FLOAT}else M.preferFloat&&S>0&&P&&(O=_.FLOAT);var U=!0;"depth"in M&&(U=!!M.depth);var R=!1;return"stencil"in M&&(R=!!M.stencil),new y(_,g,A,O,S,U,R,L)};var a,i,c,l,u=null;function f(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function d(_,g){_.bindFramebuffer(_.FRAMEBUFFER,g[0]),_.bindRenderbuffer(_.RENDERBUFFER,g[1]),_.bindTexture(_.TEXTURE_2D,g[2])}function w(_){switch(_){case a:throw new Error("gl-fbo: Framebuffer unsupported");case i:throw new Error("gl-fbo: Framebuffer incomplete attachment");case c:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function v(_,g,A,M,L,E){if(!M)return null;var S=n(_,g,A,L,M);return S.magFilter=_.NEAREST,S.minFilter=_.NEAREST,S.mipSamples=1,S.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,E,_.TEXTURE_2D,S.handle,0),S}function p(_,g,A,M,L){var E=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,E),_.renderbufferStorage(_.RENDERBUFFER,M,g,A),_.framebufferRenderbuffer(_.FRAMEBUFFER,L,_.RENDERBUFFER,E),E}function y(_,g,A,M,L,E,S,O){this.gl=_,this._shape=[0|g,0|A],this._destroyed=!1,this._ext=O,this.color=new Array(L);for(var P=0;P<L;++P)this.color[P]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=M,this._useDepth=E,this._useStencil=S;var U=this,R=[0|g,0|A];Object.defineProperties(R,{0:{get:function(){return U._shape[0]},set:function(j){return U.width=j}},1:{get:function(){return U._shape[1]},set:function(j){return U.height=j}}}),this._shapeVector=R,function(j){var B=f(j.gl),z=j.gl,G=j.handle=z.createFramebuffer(),V=j._shape[0],et=j._shape[1],J=j.color.length,X=j._ext,Y=j._useStencil,Z=j._useDepth,tt=j._colorType;z.bindFramebuffer(z.FRAMEBUFFER,G);for(var rt=0;rt<J;++rt)j.color[rt]=v(z,V,et,tt,z.RGBA,z.COLOR_ATTACHMENT0+rt);J===0?(j._color_rb=p(z,V,et,z.RGBA4,z.COLOR_ATTACHMENT0),X&&X.drawBuffersWEBGL(u[0])):J>1&&X.drawBuffersWEBGL(u[J]);var nt=z.getExtension("WEBGL_depth_texture");nt?Y?j.depth=v(z,V,et,nt.UNSIGNED_INT_24_8_WEBGL,z.DEPTH_STENCIL,z.DEPTH_STENCIL_ATTACHMENT):Z&&(j.depth=v(z,V,et,z.UNSIGNED_SHORT,z.DEPTH_COMPONENT,z.DEPTH_ATTACHMENT)):Z&&Y?j._depth_rb=p(z,V,et,z.DEPTH_STENCIL,z.DEPTH_STENCIL_ATTACHMENT):Z?j._depth_rb=p(z,V,et,z.DEPTH_COMPONENT16,z.DEPTH_ATTACHMENT):Y&&(j._depth_rb=p(z,V,et,z.STENCIL_INDEX,z.STENCIL_ATTACHMENT));var ot=z.checkFramebufferStatus(z.FRAMEBUFFER);if(ot!==z.FRAMEBUFFER_COMPLETE){for(j._destroyed=!0,z.bindFramebuffer(z.FRAMEBUFFER,null),z.deleteFramebuffer(j.handle),j.handle=null,j.depth&&(j.depth.dispose(),j.depth=null),j._depth_rb&&(z.deleteRenderbuffer(j._depth_rb),j._depth_rb=null),rt=0;rt<j.color.length;++rt)j.color[rt].dispose(),j.color[rt]=null;j._color_rb&&(z.deleteRenderbuffer(j._color_rb),j._color_rb=null),d(z,B),w(ot)}d(z,B)}(this)}var b=y.prototype;function x(_,g,A){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==g||_._shape[1]!==A){var M=_.gl,L=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(g<0||g>L||A<0||A>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=g,_._shape[1]=A;for(var E=f(M),S=0;S<_.color.length;++S)_.color[S].shape=_._shape;_._color_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,_._color_rb),M.renderbufferStorage(M.RENDERBUFFER,M.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&M.renderbufferStorage(M.RENDERBUFFER,M.STENCIL_INDEX,_._shape[0],_._shape[1])),M.bindFramebuffer(M.FRAMEBUFFER,_.handle);var O=M.checkFramebufferStatus(M.FRAMEBUFFER);O!==M.FRAMEBUFFER_COMPLETE&&(_.dispose(),d(M,E),w(O)),d(M,E)}}Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var g=0|_[0],A=0|_[1];return x(this,g,A),[g,A]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return x(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _|=0,x(this,this._shape[0],_),_},enumerable:!1}}),b.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var g=0;g<this.color.length;++g)this.color[g].dispose(),this.color[g]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(s,e,t){var n=t(8974).sprintf,a=t(6603),i=t(9365),c=t(8008);s.exports=function(l,u,f){var d=i(u)||"of unknown name (see npm glsl-shader-name)",w="unknown type";f!==void 0&&(w=f===a.FRAGMENT_SHADER?"fragment":"vertex");for(var v=n(`Error compiling %s shader %s:
`,w,d),p=n("%s%s",v,l),y=l.split(`
`),b={},x=0;x<y.length;x++){var _=y[x];if(_!==""&&_!=="\0"){var g=parseInt(_.split(":")[2]);if(isNaN(g))throw new Error(n("Could not parse error: %s",_));b[g]=_}}var A=c(u).split(`
`);for(x=0;x<A.length;x++)if((b[x+3]||b[x+2]||b[x+1])&&(v+=A[x]+`
`,b[x+1])){var M=b[x+1];M=M.substr(M.split(":",3).join(":").length+1).trim(),v+=n(`^^^ %s

`,M)}return{long:v.trim(),short:p.trim()}}},6386:function(s,e,t){s.exports=function(p,y){var b=p.gl,x=new f(p,c(b,u.vertex,u.fragment),c(b,u.pickVertex,u.pickFragment),l(b),l(b),l(b),l(b));return x.update(y),p.addObject(x),x};var n=t(5070),a=t(9560),i=t(5306),c=t(5158),l=t(5827),u=t(1292);function f(p,y,b,x,_,g,A){this.plot=p,this.shader=y,this.pickShader=b,this.positionBuffer=x,this.weightBuffer=_,this.colorBuffer=g,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var d,w=f.prototype,v=[0,0,1,0,0,1,1,0,1,1,0,1];w.draw=(d=[1,0,0,0,1,0,0,0,1],function(){var p=this.plot,y=this.shader,b=this.bounds,x=this.numVertices;if(!(x<=0)){var _=p.gl,g=p.dataBox,A=b[2]-b[0],M=b[3]-b[1],L=g[2]-g[0],E=g[3]-g[1];d[0]=2*A/L,d[4]=2*M/E,d[6]=2*(b[0]-g[0])/L-1,d[7]=2*(b[1]-g[1])/E-1,y.bind();var S=y.uniforms;S.viewTransform=d,S.shape=this.shape;var O=y.attributes;this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),O.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,x)}}),w.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],y=[0,0,0,0];return function(b){var x=this.plot,_=this.pickShader,g=this.bounds,A=this.numVertices;if(!(A<=0)){var M=x.gl,L=x.dataBox,E=g[2]-g[0],S=g[3]-g[1],O=L[2]-L[0],P=L[3]-L[1];p[0]=2*E/O,p[4]=2*S/P,p[6]=2*(g[0]-L[0])/O-1,p[7]=2*(g[1]-L[1])/P-1;for(var U=0;U<4;++U)y[U]=b>>8*U&255;this.pickOffset=b,_.bind();var R=_.uniforms;R.viewTransform=p,R.pickOffset=y,R.shape=this.shape;var j=_.attributes;return this.positionBuffer.bind(),j.position.pointer(),this.weightBuffer.bind(),j.weight.pointer(M.UNSIGNED_BYTE,!1),this.idBuffer.bind(),j.pickId.pointer(M.UNSIGNED_BYTE,!1),M.drawArrays(M.TRIANGLES,0,A),b+this.shape[0]*this.shape[1]}}}(),w.pick=function(p,y,b){var x=this.pickOffset,_=this.shape[0]*this.shape[1];if(b<x||b>=x+_)return null;var g=b-x,A=this.xData,M=this.yData;return{object:this,pointId:g,dataCoord:[A[g%this.shape[0]],M[g/this.shape[0]|0]]}},w.update=function(p){var y=(p=p||{}).shape||[0,0],b=p.x||a(y[0]),x=p.y||a(y[1]),_=p.z||new Float32Array(y[0]*y[1]),g=p.zsmooth!==!1;this.xData=b,this.yData=x;var A,M,L,E,S=p.colorLevels||[0],O=p.colorValues||[0,0,0,1],P=S.length,U=this.bounds;g?(A=U[0]=b[0],M=U[1]=x[0],L=U[2]=b[b.length-1],E=U[3]=x[x.length-1]):(A=U[0]=b[0]+(b[1]-b[0])/2,M=U[1]=x[0]+(x[1]-x[0])/2,L=U[2]=b[b.length-1]+(b[b.length-1]-b[b.length-2])/2,E=U[3]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2);var R=1/(L-A),j=1/(E-M),B=y[0],z=y[1];this.shape=[B,z];var G=(g?(B-1)*(z-1):B*z)*(v.length>>>1);this.numVertices=G;for(var V=i.mallocUint8(4*G),et=i.mallocFloat32(2*G),J=i.mallocUint8(2*G),X=i.mallocUint32(G),Y=0,Z=g?B-1:B,tt=g?z-1:z,rt=0;rt<tt;++rt){var nt,ot;g?(nt=j*(x[rt]-M),ot=j*(x[rt+1]-M)):(nt=rt<z-1?j*(x[rt]-(x[rt+1]-x[rt])/2-M):j*(x[rt]-(x[rt]-x[rt-1])/2-M),ot=rt<z-1?j*(x[rt]+(x[rt+1]-x[rt])/2-M):j*(x[rt]+(x[rt]-x[rt-1])/2-M));for(var ct=0;ct<Z;++ct){var pt,gt;g?(pt=R*(b[ct]-A),gt=R*(b[ct+1]-A)):(pt=ct<B-1?R*(b[ct]-(b[ct+1]-b[ct])/2-A):R*(b[ct]-(b[ct]-b[ct-1])/2-A),gt=ct<B-1?R*(b[ct]+(b[ct+1]-b[ct])/2-A):R*(b[ct]+(b[ct]-b[ct-1])/2-A));for(var kt=0;kt<v.length;kt+=2){var yt,mt,Ot,vt,xt=v[kt],st=v[kt+1],at=_[g?(rt+st)*B+(ct+xt):rt*B+ct],ht=n.le(S,at);if(ht<0)yt=O[0],mt=O[1],Ot=O[2],vt=O[3];else if(ht===P-1)yt=O[4*P-4],mt=O[4*P-3],Ot=O[4*P-2],vt=O[4*P-1];else{var Lt=(at-S[ht])/(S[ht+1]-S[ht]),Mt=1-Lt,_t=4*ht,St=4*(ht+1);yt=Mt*O[_t]+Lt*O[St],mt=Mt*O[_t+1]+Lt*O[St+1],Ot=Mt*O[_t+2]+Lt*O[St+2],vt=Mt*O[_t+3]+Lt*O[St+3]}V[4*Y]=255*yt,V[4*Y+1]=255*mt,V[4*Y+2]=255*Ot,V[4*Y+3]=255*vt,et[2*Y]=.5*pt+.5*gt,et[2*Y+1]=.5*nt+.5*ot,J[2*Y]=xt,J[2*Y+1]=st,X[Y]=rt*B+ct,Y+=1}}}this.positionBuffer.update(et),this.weightBuffer.update(J),this.colorBuffer.update(V),this.idBuffer.update(X),i.free(et),i.free(V),i.free(J),i.free(X)},w.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(s,e,t){var n=t(6832);s.exports={fragment:n([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:n([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:n([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:n([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(s,e,t){var n=t(6832),a=t(5158),i=n([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),c=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),l=n([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];e.createShader=function(f){return a(f,i,c,null,u)},e.createPickShader=function(f){return a(f,i,l,null,u)}},6086:function(s,e,t){s.exports=function(A){var M=A.gl||A.scene&&A.scene.gl,L=w(M);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;var E=v(M);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;for(var S=n(M),O=a(M,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),P=f(new Array(1024),[256,1,4]),U=0;U<1024;++U)P.data[U]=255;var R=i(M,P);R.wrap=M.REPEAT;var j=new _(M,L,E,S,O,R);return j.update(A),j};var n=t(5827),a=t(2944),i=t(8931),c=new Uint8Array(4),l=new Float32Array(c.buffer),u=t(5070),f=t(5050),d=t(248),w=d.createShader,v=d.createPickShader,p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(A,M){for(var L=0,E=0;E<3;++E){var S=A[E]-M[E];L+=S*S}return Math.sqrt(L)}function b(A){for(var M=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)M[0][L]=Math.max(A[0][L],M[0][L]),M[1][L]=Math.min(A[1][L],M[1][L]);return M}function x(A,M,L,E){this.arcLength=A,this.position=M,this.index=L,this.dataCoordinate=E}function _(A,M,L,E,S,O){this.gl=A,this.shader=M,this.pickShader=L,this.buffer=E,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=O,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var g=_.prototype;g.isTransparent=function(){return this.hasAlpha},g.isOpaque=function(){return!this.hasAlpha},g.pickSlots=1,g.setPickBase=function(A){this.pickId=A},g.drawTransparent=g.draw=function(A){if(this.vertexCount){var M=this.gl,L=this.shader,E=this.vao;L.bind(),L.uniforms={model:A.model||p,view:A.view||p,projection:A.projection||p,clipBounds:b(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(M.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},g.drawPick=function(A){if(this.vertexCount){var M=this.gl,L=this.pickShader,E=this.vao;L.bind(),L.uniforms={model:A.model||p,view:A.view||p,projection:A.projection||p,pickId:this.pickId,clipBounds:b(this.clipBounds),screenShape:[M.drawingBufferWidth,M.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(M.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},g.update=function(A){var M,L;this.dirty=!0;var E=!!A.connectGaps;"dashScale"in A&&(this.dashScale=A.dashScale),this.hasAlpha=!1,"opacity"in A&&(this.opacity=+A.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],O=[],P=[],U=0,R=0,j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],B=A.position||A.positions;if(B){var z=A.color||A.colors||[0,0,0,1],G=A.lineWidth||1,V=!1;t:for(M=1;M<B.length;++M){var et,J,X,Y=B[M-1],Z=B[M];for(O.push(U),P.push(Y.slice()),L=0;L<3;++L){if(isNaN(Y[L])||isNaN(Z[L])||!isFinite(Y[L])||!isFinite(Z[L])){if(!E&&S.length>0){for(var tt=0;tt<24;++tt)S.push(S[S.length-12]);R+=2,V=!0}continue t}j[0][L]=Math.min(j[0][L],Y[L],Z[L]),j[1][L]=Math.max(j[1][L],Y[L],Z[L])}Array.isArray(z[0])?(et=z.length>M-1?z[M-1]:z.length>0?z[z.length-1]:[0,0,0,1],J=z.length>M?z[M]:z.length>0?z[z.length-1]:[0,0,0,1]):et=J=z,et.length===3&&(et=[et[0],et[1],et[2],1]),J.length===3&&(J=[J[0],J[1],J[2],1]),!this.hasAlpha&&et[3]<1&&(this.hasAlpha=!0),X=Array.isArray(G)?G.length>M-1?G[M-1]:G.length>0?G[G.length-1]:[0,0,0,1]:G;var rt=U;if(U+=y(Y,Z),V){for(L=0;L<2;++L)S.push(Y[0],Y[1],Y[2],Z[0],Z[1],Z[2],rt,X,et[0],et[1],et[2],et[3]);R+=2,V=!1}S.push(Y[0],Y[1],Y[2],Z[0],Z[1],Z[2],rt,X,et[0],et[1],et[2],et[3],Y[0],Y[1],Y[2],Z[0],Z[1],Z[2],rt,-X,et[0],et[1],et[2],et[3],Z[0],Z[1],Z[2],Y[0],Y[1],Y[2],U,-X,J[0],J[1],J[2],J[3],Z[0],Z[1],Z[2],Y[0],Y[1],Y[2],U,X,J[0],J[1],J[2],J[3]),R+=4}}if(this.buffer.update(S),O.push(U),P.push(B[B.length-1].slice()),this.bounds=j,this.vertexCount=R,this.points=P,this.arcLength=O,"dashes"in A){var nt=A.dashes.slice();for(nt.unshift(0),M=1;M<nt.length;++M)nt[M]=nt[M-1]+nt[M];var ot=f(new Array(1024),[256,1,4]);for(M=0;M<256;++M){for(L=0;L<4;++L)ot.set(M,0,L,0);1&u.le(nt,nt[nt.length-1]*M/255)?ot.set(M,0,0,0):ot.set(M,0,0,255)}this.texture.setPixels(ot)}},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},g.pick=function(A){if(!A||A.id!==this.pickId)return null;var M=function(B,z,G,V){return c[0]=0,c[1]=G,c[2]=z,c[3]=B,l[0]}(A.value[0],A.value[1],A.value[2]),L=u.le(this.arcLength,M);if(L<0)return null;if(L===this.arcLength.length-1)return new x(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),L);for(var E=this.points[L],S=this.points[Math.min(L+1,this.points.length-1)],O=(M-this.arcLength[L])/(this.arcLength[L+1]-this.arcLength[L]),P=1-O,U=[0,0,0],R=0;R<3;++R)U[R]=P*E[R]+O*S[R];var j=Math.min(O<.5?L:L+1,this.points.length-1);return new x(M,U,j,this.points[j])}},7332:function(s){s.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},9823:function(s){s.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7787:function(s){s.exports=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],c=e[4],l=e[5],u=e[6],f=e[7],d=e[8],w=e[9],v=e[10],p=e[11],y=e[12],b=e[13],x=e[14],_=e[15];return(t*l-n*c)*(v*_-p*x)-(t*u-a*c)*(w*_-p*b)+(t*f-i*c)*(w*x-v*b)+(n*u-a*l)*(d*_-p*y)-(n*f-i*l)*(d*x-v*y)+(a*f-i*u)*(d*b-w*y)}},5950:function(s){s.exports=function(e,t){var n=t[0],a=t[1],i=t[2],c=t[3],l=n+n,u=a+a,f=i+i,d=n*l,w=a*l,v=a*u,p=i*l,y=i*u,b=i*f,x=c*l,_=c*u,g=c*f;return e[0]=1-v-b,e[1]=w+g,e[2]=p-_,e[3]=0,e[4]=w-g,e[5]=1-d-b,e[6]=y+x,e[7]=0,e[8]=p+_,e[9]=y-x,e[10]=1-d-v,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7280:function(s){s.exports=function(e,t,n){var a=t[0],i=t[1],c=t[2],l=t[3],u=a+a,f=i+i,d=c+c,w=a*u,v=a*f,p=a*d,y=i*f,b=i*d,x=c*d,_=l*u,g=l*f,A=l*d;return e[0]=1-(y+x),e[1]=v+A,e[2]=p-g,e[3]=0,e[4]=v-A,e[5]=1-(w+x),e[6]=b+_,e[7]=0,e[8]=p+g,e[9]=b-_,e[10]=1-(w+y),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},9947:function(s){s.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7437:function(s){s.exports=function(e,t){var n=t[0],a=t[1],i=t[2],c=t[3],l=t[4],u=t[5],f=t[6],d=t[7],w=t[8],v=t[9],p=t[10],y=t[11],b=t[12],x=t[13],_=t[14],g=t[15],A=n*u-a*l,M=n*f-i*l,L=n*d-c*l,E=a*f-i*u,S=a*d-c*u,O=i*d-c*f,P=w*x-v*b,U=w*_-p*b,R=w*g-y*b,j=v*_-p*x,B=v*g-y*x,z=p*g-y*_,G=A*z-M*B+L*j+E*R-S*U+O*P;return G?(G=1/G,e[0]=(u*z-f*B+d*j)*G,e[1]=(i*B-a*z-c*j)*G,e[2]=(x*O-_*S+g*E)*G,e[3]=(p*S-v*O-y*E)*G,e[4]=(f*R-l*z-d*U)*G,e[5]=(n*z-i*R+c*U)*G,e[6]=(_*L-b*O-g*M)*G,e[7]=(w*O-p*L+y*M)*G,e[8]=(l*B-u*R+d*P)*G,e[9]=(a*R-n*B-c*P)*G,e[10]=(b*S-x*L+g*A)*G,e[11]=(v*L-w*S-y*A)*G,e[12]=(u*U-l*j-f*P)*G,e[13]=(n*j-a*U+i*P)*G,e[14]=(x*M-b*E-_*A)*G,e[15]=(w*E-v*M+p*A)*G,e):null}},3012:function(s,e,t){var n=t(9947);s.exports=function(a,i,c,l){var u,f,d,w,v,p,y,b,x,_,g=i[0],A=i[1],M=i[2],L=l[0],E=l[1],S=l[2],O=c[0],P=c[1],U=c[2];return Math.abs(g-O)<1e-6&&Math.abs(A-P)<1e-6&&Math.abs(M-U)<1e-6?n(a):(y=g-O,b=A-P,x=M-U,u=E*(x*=_=1/Math.sqrt(y*y+b*b+x*x))-S*(b*=_),f=S*(y*=_)-L*x,d=L*b-E*y,(_=Math.sqrt(u*u+f*f+d*d))?(u*=_=1/_,f*=_,d*=_):(u=0,f=0,d=0),w=b*d-x*f,v=x*u-y*d,p=y*f-b*u,(_=Math.sqrt(w*w+v*v+p*p))?(w*=_=1/_,v*=_,p*=_):(w=0,v=0,p=0),a[0]=u,a[1]=w,a[2]=y,a[3]=0,a[4]=f,a[5]=v,a[6]=b,a[7]=0,a[8]=d,a[9]=p,a[10]=x,a[11]=0,a[12]=-(u*g+f*A+d*M),a[13]=-(w*g+v*A+p*M),a[14]=-(y*g+b*A+x*M),a[15]=1,a)}},104:function(s){s.exports=function(e,t,n){var a=t[0],i=t[1],c=t[2],l=t[3],u=t[4],f=t[5],d=t[6],w=t[7],v=t[8],p=t[9],y=t[10],b=t[11],x=t[12],_=t[13],g=t[14],A=t[15],M=n[0],L=n[1],E=n[2],S=n[3];return e[0]=M*a+L*u+E*v+S*x,e[1]=M*i+L*f+E*p+S*_,e[2]=M*c+L*d+E*y+S*g,e[3]=M*l+L*w+E*b+S*A,M=n[4],L=n[5],E=n[6],S=n[7],e[4]=M*a+L*u+E*v+S*x,e[5]=M*i+L*f+E*p+S*_,e[6]=M*c+L*d+E*y+S*g,e[7]=M*l+L*w+E*b+S*A,M=n[8],L=n[9],E=n[10],S=n[11],e[8]=M*a+L*u+E*v+S*x,e[9]=M*i+L*f+E*p+S*_,e[10]=M*c+L*d+E*y+S*g,e[11]=M*l+L*w+E*b+S*A,M=n[12],L=n[13],E=n[14],S=n[15],e[12]=M*a+L*u+E*v+S*x,e[13]=M*i+L*f+E*p+S*_,e[14]=M*c+L*d+E*y+S*g,e[15]=M*l+L*w+E*b+S*A,e}},5268:function(s){s.exports=function(e,t,n,a,i,c,l){var u=1/(t-n),f=1/(a-i),d=1/(c-l);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+n)*u,e[13]=(i+a)*f,e[14]=(l+c)*d,e[15]=1,e}},1120:function(s){s.exports=function(e,t,n,a,i){var c=1/Math.tan(t/2),l=1/(a-i);return e[0]=c/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*a*l,e[15]=0,e}},4422:function(s){s.exports=function(e,t,n,a){var i,c,l,u,f,d,w,v,p,y,b,x,_,g,A,M,L,E,S,O,P,U,R,j,B=a[0],z=a[1],G=a[2],V=Math.sqrt(B*B+z*z+G*G);return Math.abs(V)<1e-6?null:(B*=V=1/V,z*=V,G*=V,i=Math.sin(n),l=1-(c=Math.cos(n)),u=t[0],f=t[1],d=t[2],w=t[3],v=t[4],p=t[5],y=t[6],b=t[7],x=t[8],_=t[9],g=t[10],A=t[11],M=B*B*l+c,L=z*B*l+G*i,E=G*B*l-z*i,S=B*z*l-G*i,O=z*z*l+c,P=G*z*l+B*i,U=B*G*l+z*i,R=z*G*l-B*i,j=G*G*l+c,e[0]=u*M+v*L+x*E,e[1]=f*M+p*L+_*E,e[2]=d*M+y*L+g*E,e[3]=w*M+b*L+A*E,e[4]=u*S+v*O+x*P,e[5]=f*S+p*O+_*P,e[6]=d*S+y*O+g*P,e[7]=w*S+b*O+A*P,e[8]=u*U+v*R+x*j,e[9]=f*U+p*R+_*j,e[10]=d*U+y*R+g*j,e[11]=w*U+b*R+A*j,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},6109:function(s){s.exports=function(e,t,n){var a=Math.sin(n),i=Math.cos(n),c=t[4],l=t[5],u=t[6],f=t[7],d=t[8],w=t[9],v=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=c*i+d*a,e[5]=l*i+w*a,e[6]=u*i+v*a,e[7]=f*i+p*a,e[8]=d*i-c*a,e[9]=w*i-l*a,e[10]=v*i-u*a,e[11]=p*i-f*a,e}},7115:function(s){s.exports=function(e,t,n){var a=Math.sin(n),i=Math.cos(n),c=t[0],l=t[1],u=t[2],f=t[3],d=t[8],w=t[9],v=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=c*i-d*a,e[1]=l*i-w*a,e[2]=u*i-v*a,e[3]=f*i-p*a,e[8]=c*a+d*i,e[9]=l*a+w*i,e[10]=u*a+v*i,e[11]=f*a+p*i,e}},5240:function(s){s.exports=function(e,t,n){var a=Math.sin(n),i=Math.cos(n),c=t[0],l=t[1],u=t[2],f=t[3],d=t[4],w=t[5],v=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=c*i+d*a,e[1]=l*i+w*a,e[2]=u*i+v*a,e[3]=f*i+p*a,e[4]=d*i-c*a,e[5]=w*i-l*a,e[6]=v*i-u*a,e[7]=p*i-f*a,e}},3668:function(s){s.exports=function(e,t,n){var a=n[0],i=n[1],c=n[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*c,e[9]=t[9]*c,e[10]=t[10]*c,e[11]=t[11]*c,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},998:function(s){s.exports=function(e,t,n){var a,i,c,l,u,f,d,w,v,p,y,b,x=n[0],_=n[1],g=n[2];return t===e?(e[12]=t[0]*x+t[4]*_+t[8]*g+t[12],e[13]=t[1]*x+t[5]*_+t[9]*g+t[13],e[14]=t[2]*x+t[6]*_+t[10]*g+t[14],e[15]=t[3]*x+t[7]*_+t[11]*g+t[15]):(a=t[0],i=t[1],c=t[2],l=t[3],u=t[4],f=t[5],d=t[6],w=t[7],v=t[8],p=t[9],y=t[10],b=t[11],e[0]=a,e[1]=i,e[2]=c,e[3]=l,e[4]=u,e[5]=f,e[6]=d,e[7]=w,e[8]=v,e[9]=p,e[10]=y,e[11]=b,e[12]=a*x+u*_+v*g+t[12],e[13]=i*x+f*_+p*g+t[13],e[14]=c*x+d*_+y*g+t[14],e[15]=l*x+w*_+b*g+t[15]),e}},2142:function(s){s.exports=function(e,t){if(e===t){var n=t[1],a=t[2],i=t[3],c=t[6],l=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=a,e[9]=c,e[11]=t[14],e[12]=i,e[13]=l,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},4340:function(s,e,t){var n=t(957),a=t(7309);function i(u,f){for(var d=[0,0,0,0],w=0;w<4;++w)for(var v=0;v<4;++v)d[v]+=u[4*w+v]*f[w];return d}function c(u,f,d,w,v){for(var p=i(w,i(d,i(f,[u[0],u[1],u[2],1]))),y=0;y<3;++y)p[y]/=p[3];return[.5*v[0]*(1+p[0]),.5*v[1]*(1-p[1])]}function l(u,f){for(var d=[0,0,0],w=0;w<u.length;++w)for(var v=u[w],p=f[w],y=0;y<3;++y)d[y]+=p*v[y];return d}s.exports=function(u,f,d,w,v,p){if(u.length===1)return[0,u[0].slice()];for(var y=new Array(u.length),b=0;b<u.length;++b)y[b]=c(u[b],d,w,v,p);var x=0,_=1/0;for(b=0;b<y.length;++b){for(var g=0,A=0;A<2;++A)g+=Math.pow(y[b][A]-f[A],2);g<_&&(_=g,x=b)}var M=function(E,S){if(E.length===2){for(var O=0,P=0,U=0;U<2;++U)O+=Math.pow(S[U]-E[0][U],2),P+=Math.pow(S[U]-E[1][U],2);return(O=Math.sqrt(O))+(P=Math.sqrt(P))<1e-6?[1,0]:[P/(O+P),O/(P+O)]}if(E.length===3){var R=[0,0];return a(E[0],E[1],E[2],S,R),n(E,R)}return[]}(y,f),L=0;for(b=0;b<3;++b){if(M[b]<-.001||M[b]>1.0001)return null;L+=M[b]}return Math.abs(L-1)>.001?null:[x,l(u,M),M]}},2056:function(s,e,t){var n=t(6832),a=n([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),i=n([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),c=n([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),f=n([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),d=n([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),w=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),v=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),p=n([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),y=n([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);e.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.wireShader={vertex:c,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.pointShader={vertex:u,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},e.pickShader={vertex:d,fragment:w,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},e.pointPickShader={vertex:v,fragment:w,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},e.contourShader={vertex:p,fragment:y,attributes:[{name:"position",type:"vec3"}]}},8116:function(s,e,t){var n=t(5158),a=t(5827),i=t(2944),c=t(8931),l=t(115),u=t(104),f=t(7437),d=t(5050),w=t(9156),v=t(7212),p=t(5306),y=t(2056),b=t(4340),x=y.meshShader,_=y.wireShader,g=y.pointShader,A=y.pickShader,M=y.pointPickShader,L=y.contourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(z,G,V,et,J,X,Y,Z,tt,rt,nt,ot,ct,pt,gt,kt,yt,mt,Ot,vt,xt,st,at,ht,Lt,Mt,_t){this.gl=z,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=G,this.dirty=!0,this.triShader=V,this.lineShader=et,this.pointShader=J,this.pickShader=X,this.pointPickShader=Y,this.contourShader=Z,this.trianglePositions=tt,this.triangleColors=nt,this.triangleNormals=ct,this.triangleUVs=ot,this.triangleIds=rt,this.triangleVAO=pt,this.triangleCount=0,this.lineWidth=1,this.edgePositions=gt,this.edgeColors=yt,this.edgeUVs=mt,this.edgeIds=kt,this.edgeVAO=Ot,this.edgeCount=0,this.pointPositions=vt,this.pointColors=st,this.pointUVs=at,this.pointSizes=ht,this.pointIds=xt,this.pointVAO=Lt,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Mt,this.contourVAO=_t,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=E,this._view=E,this._projection=E,this._resolution=[1,1]}var O=S.prototype;function P(z,G){if(!G||!G.length)return 1;for(var V=0;V<G.length;++V){if(G.length<2)return 1;if(G[V][0]===z)return G[V][1];if(G[V][0]>z&&V>0){var et=(G[V][0]-z)/(G[V][0]-G[V-1][0]);return G[V][1]*(1-et)+et*G[V-1][1]}}return 1}function U(z){var G=n(z,g.vertex,g.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G.attributes.pointSize.location=4,G}function R(z){var G=n(z,A.vertex,A.fragment);return G.attributes.position.location=0,G.attributes.id.location=1,G}function j(z){var G=n(z,M.vertex,M.fragment);return G.attributes.position.location=0,G.attributes.id.location=1,G.attributes.pointSize.location=4,G}function B(z){var G=n(z,L.vertex,L.fragment);return G.attributes.position.location=0,G}O.isOpaque=function(){return!this.hasAlpha},O.isTransparent=function(){return this.hasAlpha},O.pickSlots=1,O.setPickBase=function(z){this.pickId=z},O.highlight=function(z){if(z&&this.contourEnable){for(var G=v(this.cells,this.intensity,z.intensity),V=G.cells,et=G.vertexIds,J=G.vertexWeights,X=V.length,Y=p.mallocFloat32(6*X),Z=0,tt=0;tt<X;++tt)for(var rt=V[tt],nt=0;nt<2;++nt){var ot=rt[0];rt.length===2&&(ot=rt[nt]);for(var ct=et[ot][0],pt=et[ot][1],gt=J[ot],kt=1-gt,yt=this.positions[ct],mt=this.positions[pt],Ot=0;Ot<3;++Ot)Y[Z++]=gt*yt[Ot]+kt*mt[Ot]}this.contourCount=Z/3|0,this.contourPositions.update(Y.subarray(0,Z)),p.free(Y)}else this.contourCount=0},O.update=function(z){z=z||{};var G=this.gl;this.dirty=!0,"contourEnable"in z&&(this.contourEnable=z.contourEnable),"contourColor"in z&&(this.contourColor=z.contourColor),"lineWidth"in z&&(this.lineWidth=z.lineWidth),"lightPosition"in z&&(this.lightPosition=z.lightPosition),this.hasAlpha=!1,"opacity"in z&&(this.opacity=z.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in z&&(this.opacityscale=z.opacityscale,this.hasAlpha=!0),"ambient"in z&&(this.ambientLight=z.ambient),"diffuse"in z&&(this.diffuseLight=z.diffuse),"specular"in z&&(this.specularLight=z.specular),"roughness"in z&&(this.roughness=z.roughness),"fresnel"in z&&(this.fresnel=z.fresnel),z.texture?(this.texture.dispose(),this.texture=c(G,z.texture)):z.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=G.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=G.LINEAR,this.texture.setPixels(function(Ae,Ie){for(var Te=w({colormap:Ae,nshades:256,format:"rgba"}),Vt=new Uint8Array(1024),Zt=0;Zt<256;++Zt){for(var Gt=Te[Zt],Yt=0;Yt<3;++Yt)Vt[4*Zt+Yt]=Gt[Yt];Vt[4*Zt+3]=Ie?255*P(Zt/255,Ie):255*Gt[3]}return d(Vt,[256,256,4],[4,0,1])}(z.colormap,this.opacityscale)),this.texture.generateMipmap());var V=z.cells,et=z.positions;if(et&&V){var J=[],X=[],Y=[],Z=[],tt=[],rt=[],nt=[],ot=[],ct=[],pt=[],gt=[],kt=[],yt=[],mt=[];this.cells=V,this.positions=et;var Ot=z.vertexNormals,vt=z.cellNormals,xt=z.vertexNormalsEpsilon===void 0?1e-6:z.vertexNormalsEpsilon,st=z.faceNormalsEpsilon===void 0?1e-6:z.faceNormalsEpsilon;z.useFacetNormals&&!vt&&(vt=l.faceNormals(V,et,st)),vt||Ot||(Ot=l.vertexNormals(V,et,xt));var at=z.vertexColors,ht=z.cellColors,Lt=z.meshColor||[1,1,1,1],Mt=z.vertexUVs,_t=z.vertexIntensity,St=z.cellUVs,Dt=z.cellIntensity,ut=1/0,Tt=-1/0;if(!Mt&&!St)if(_t)if(z.vertexIntensityBounds)ut=+z.vertexIntensityBounds[0],Tt=+z.vertexIntensityBounds[1];else for(var bt=0;bt<_t.length;++bt){var It=_t[bt];ut=Math.min(ut,It),Tt=Math.max(Tt,It)}else if(Dt)if(z.cellIntensityBounds)ut=+z.cellIntensityBounds[0],Tt=+z.cellIntensityBounds[1];else for(bt=0;bt<Dt.length;++bt)It=Dt[bt],ut=Math.min(ut,It),Tt=Math.max(Tt,It);else for(bt=0;bt<et.length;++bt)It=et[bt][2],ut=Math.min(ut,It),Tt=Math.max(Tt,It);this.intensity=_t||Dt||function(Ae){for(var Ie=Ae.length,Te=new Array(Ie),Vt=0;Vt<Ie;++Vt)Te[Vt]=Ae[Vt][2];return Te}(et),this.pickVertex=!(Dt||ht);var zt=z.pointSizes,Ft=z.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],bt=0;bt<et.length;++bt)for(var $t=et[bt],Wt=0;Wt<3;++Wt)!isNaN($t[Wt])&&isFinite($t[Wt])&&(this.bounds[0][Wt]=Math.min(this.bounds[0][Wt],$t[Wt]),this.bounds[1][Wt]=Math.max(this.bounds[1][Wt],$t[Wt]));var Xt=0,ae=0,Qt=0;t:for(bt=0;bt<V.length;++bt){var de=V[bt];switch(de.length){case 1:for($t=et[ve=de[0]],Wt=0;Wt<3;++Wt)if(isNaN($t[Wt])||!isFinite($t[Wt]))continue t;pt.push($t[0],$t[1],$t[2]),ie=at?at[ve]:ht?ht[bt]:Lt,this.opacityscale&&_t?X.push(ie[0],ie[1],ie[2],this.opacity*P((_t[ve]-ut)/(Tt-ut),this.opacityscale)):ie.length===3?gt.push(ie[0],ie[1],ie[2],this.opacity):(gt.push(ie[0],ie[1],ie[2],ie[3]*this.opacity),ie[3]<1&&(this.hasAlpha=!0)),se=Mt?Mt[ve]:_t?[(_t[ve]-ut)/(Tt-ut),0]:St?St[bt]:Dt?[(Dt[bt]-ut)/(Tt-ut),0]:[($t[2]-ut)/(Tt-ut),0],kt.push(se[0],se[1]),zt?yt.push(zt[ve]):yt.push(Ft),mt.push(bt),Qt+=1;break;case 2:for(Wt=0;Wt<2;++Wt){$t=et[ve=de[Wt]];for(var ye=0;ye<3;++ye)if(isNaN($t[ye])||!isFinite($t[ye]))continue t}for(Wt=0;Wt<2;++Wt)$t=et[ve=de[Wt]],rt.push($t[0],$t[1],$t[2]),ie=at?at[ve]:ht?ht[bt]:Lt,this.opacityscale&&_t?X.push(ie[0],ie[1],ie[2],this.opacity*P((_t[ve]-ut)/(Tt-ut),this.opacityscale)):ie.length===3?nt.push(ie[0],ie[1],ie[2],this.opacity):(nt.push(ie[0],ie[1],ie[2],ie[3]*this.opacity),ie[3]<1&&(this.hasAlpha=!0)),se=Mt?Mt[ve]:_t?[(_t[ve]-ut)/(Tt-ut),0]:St?St[bt]:Dt?[(Dt[bt]-ut)/(Tt-ut),0]:[($t[2]-ut)/(Tt-ut),0],ot.push(se[0],se[1]),ct.push(bt);ae+=1;break;case 3:for(Wt=0;Wt<3;++Wt)for($t=et[ve=de[Wt]],ye=0;ye<3;++ye)if(isNaN($t[ye])||!isFinite($t[ye]))continue t;for(Wt=0;Wt<3;++Wt){var ve,ie,se,ke;$t=et[ve=de[2-Wt]],J.push($t[0],$t[1],$t[2]),(ie=at?at[ve]:ht?ht[bt]:Lt)?this.opacityscale&&_t?X.push(ie[0],ie[1],ie[2],this.opacity*P((_t[ve]-ut)/(Tt-ut),this.opacityscale)):ie.length===3?X.push(ie[0],ie[1],ie[2],this.opacity):(X.push(ie[0],ie[1],ie[2],ie[3]*this.opacity),ie[3]<1&&(this.hasAlpha=!0)):X.push(.5,.5,.5,1),se=Mt?Mt[ve]:_t?[(_t[ve]-ut)/(Tt-ut),0]:St?St[bt]:Dt?[(Dt[bt]-ut)/(Tt-ut),0]:[($t[2]-ut)/(Tt-ut),0],Z.push(se[0],se[1]),ke=Ot?Ot[ve]:vt[bt],Y.push(ke[0],ke[1],ke[2]),tt.push(bt)}Xt+=1}}this.pointCount=Qt,this.edgeCount=ae,this.triangleCount=Xt,this.pointPositions.update(pt),this.pointColors.update(gt),this.pointUVs.update(kt),this.pointSizes.update(yt),this.pointIds.update(new Uint32Array(mt)),this.edgePositions.update(rt),this.edgeColors.update(nt),this.edgeUVs.update(ot),this.edgeIds.update(new Uint32Array(ct)),this.trianglePositions.update(J),this.triangleColors.update(X),this.triangleUVs.update(Z),this.triangleNormals.update(Y),this.triangleIds.update(new Uint32Array(tt))}},O.drawTransparent=O.draw=function(z){z=z||{};for(var G=this.gl,V=z.model||E,et=z.view||E,J=z.projection||E,X=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Y=0;Y<3;++Y)X[0][Y]=Math.max(X[0][Y],this.clipBounds[0][Y]),X[1][Y]=Math.min(X[1][Y],this.clipBounds[1][Y]);var Z={model:V,view:et,projection:J,inverseModel:E.slice(),clipBounds:X,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Z.inverseModel=f(Z.inverseModel,Z.model),G.disable(G.CULL_FACE),this.texture.bind(0);var tt=new Array(16);for(u(tt,Z.view,Z.model),u(tt,Z.projection,tt),f(tt,tt),Y=0;Y<3;++Y)Z.eyePosition[Y]=tt[12+Y]/tt[15];var rt,nt=tt[15];for(Y=0;Y<3;++Y)nt+=this.lightPosition[Y]*tt[4*Y+3];for(Y=0;Y<3;++Y){for(var ot=tt[12+Y],ct=0;ct<3;++ct)ot+=tt[4*ct+Y]*this.lightPosition[ct];Z.lightPosition[Y]=ot/nt}this.triangleCount>0&&((rt=this.triShader).bind(),rt.uniforms=Z,this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((rt=this.lineShader).bind(),rt.uniforms=Z,this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((rt=this.pointShader).bind(),rt.uniforms=Z,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((rt=this.contourShader).bind(),rt.uniforms=Z,this.contourVAO.bind(),G.drawArrays(G.LINES,0,this.contourCount),this.contourVAO.unbind())},O.drawPick=function(z){z=z||{};for(var G=this.gl,V=z.model||E,et=z.view||E,J=z.projection||E,X=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Y=0;Y<3;++Y)X[0][Y]=Math.max(X[0][Y],this.clipBounds[0][Y]),X[1][Y]=Math.min(X[1][Y],this.clipBounds[1][Y]);this._model=[].slice.call(V),this._view=[].slice.call(et),this._projection=[].slice.call(J),this._resolution=[G.drawingBufferWidth,G.drawingBufferHeight];var Z,tt={model:V,view:et,projection:J,clipBounds:X,pickId:this.pickId/255};(Z=this.pickShader).bind(),Z.uniforms=tt,this.triangleCount>0&&(this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((Z=this.pointPickShader).bind(),Z.uniforms=tt,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind())},O.pick=function(z){if(!z||z.id!==this.pickId)return null;for(var G=z.value[0]+256*z.value[1]+65536*z.value[2],V=this.cells[G],et=this.positions,J=new Array(V.length),X=0;X<V.length;++X)J[X]=et[V[X]];var Y=z.coord[0],Z=z.coord[1];if(!this.pickVertex){var tt=this.positions[V[0]],rt=this.positions[V[1]],nt=this.positions[V[2]],ot=[(tt[0]+rt[0]+nt[0])/3,(tt[1]+rt[1]+nt[1])/3,(tt[2]+rt[2]+nt[2])/3];return{_cellCenter:!0,position:[Y,Z],index:G,cell:V,cellId:G,intensity:this.intensity[G],dataCoordinate:ot}}var ct=b(J,[Y*this.pixelRatio,this._resolution[1]-Z*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ct)return null;var pt=ct[2],gt=0;for(X=0;X<V.length;++X)gt+=pt[X]*this.intensity[V[X]];return{position:ct[1],index:V[ct[0]],cell:V,cellId:G,intensity:gt,dataCoordinate:this.positions[V[ct[0]]]}},O.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},s.exports=function(z,G){if(arguments.length===1&&(z=(G=z).gl),!(z.getExtension("OES_standard_derivatives")||z.getExtension("MOZ_OES_standard_derivatives")||z.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var V=function(Dt){var ut=n(Dt,x.vertex,x.fragment);return ut.attributes.position.location=0,ut.attributes.color.location=2,ut.attributes.uv.location=3,ut.attributes.normal.location=4,ut}(z),et=function(Dt){var ut=n(Dt,_.vertex,_.fragment);return ut.attributes.position.location=0,ut.attributes.color.location=2,ut.attributes.uv.location=3,ut}(z),J=U(z),X=R(z),Y=j(z),Z=B(z),tt=c(z,d(new Uint8Array([255,255,255,255]),[1,1,4]));tt.generateMipmap(),tt.minFilter=z.LINEAR_MIPMAP_LINEAR,tt.magFilter=z.LINEAR;var rt=a(z),nt=a(z),ot=a(z),ct=a(z),pt=a(z),gt=i(z,[{buffer:rt,type:z.FLOAT,size:3},{buffer:pt,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:nt,type:z.FLOAT,size:4},{buffer:ot,type:z.FLOAT,size:2},{buffer:ct,type:z.FLOAT,size:3}]),kt=a(z),yt=a(z),mt=a(z),Ot=a(z),vt=i(z,[{buffer:kt,type:z.FLOAT,size:3},{buffer:Ot,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:yt,type:z.FLOAT,size:4},{buffer:mt,type:z.FLOAT,size:2}]),xt=a(z),st=a(z),at=a(z),ht=a(z),Lt=a(z),Mt=i(z,[{buffer:xt,type:z.FLOAT,size:3},{buffer:Lt,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:st,type:z.FLOAT,size:4},{buffer:at,type:z.FLOAT,size:2},{buffer:ht,type:z.FLOAT,size:1}]),_t=a(z),St=new S(z,tt,V,et,J,X,Y,Z,rt,pt,nt,ot,ct,gt,kt,Ot,yt,mt,vt,xt,Lt,st,at,ht,Mt,_t,i(z,[{buffer:_t,type:z.FLOAT,size:3}]));return St.update(G),St}},4554:function(s,e,t){s.exports=function(d){var w=d.gl;return new c(d,n(w,[0,0,0,1,1,0,1,1]),a(w,i.boxVert,i.lineFrag))};var n=t(5827),a=t(5158),i=t(2709);function c(d,w,v){this.plot=d,this.vbo=w,this.shader=v}var l,u,f=c.prototype;f.bind=function(){var d=this.shader;this.vbo.bind(),this.shader.bind(),d.attributes.coord.pointer(),d.uniforms.screenBox=this.plot.screenBox},f.drawBox=(l=[0,0],u=[0,0],function(d,w,v,p,y){var b=this.plot,x=this.shader,_=b.gl;l[0]=d,l[1]=w,u[0]=v,u[1]=p,x.uniforms.lo=l,x.uniforms.hi=u,x.uniforms.color=y,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(s,e,t){s.exports=function(b){var x=b.gl;return new l(b,n(x),a(x,c.gridVert,c.gridFrag),a(x,c.tickVert,c.gridFrag))};var n=t(5827),a=t(5158),i=t(5070),c=t(2709);function l(b,x,_,g){this.plot=b,this.vbo=x,this.shader=_,this.tickShader=g,this.ticks=[[],[]]}function u(b,x){return b-x}var f,d,w,v,p,y=l.prototype;y.draw=(f=[0,0],d=[0,0],w=[0,0],function(){for(var b=this.plot,x=this.vbo,_=this.shader,g=this.ticks,A=b.gl,M=b._tickBounds,L=b.dataBox,E=b.viewBox,S=b.gridLineWidth,O=b.gridLineColor,P=b.gridLineEnable,U=b.pixelRatio,R=0;R<2;++R){var j=M[R],B=M[R+2]-j,z=.5*(L[R+2]+L[R]),G=L[R+2]-L[R];d[R]=2*B/G,f[R]=2*(j-z)/G}_.bind(),x.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=f,_.uniforms.dataScale=d;var V=0;for(R=0;R<2;++R){w[0]=w[1]=0,w[R]=1,_.uniforms.dataAxis=w,_.uniforms.lineWidth=S[R]/(E[R+2]-E[R])*U,_.uniforms.color=O[R];var et=6*g[R].length;P[R]&&et&&A.drawArrays(A.TRIANGLES,V,et),V+=et}}),y.drawTickMarks=function(){var b=[0,0],x=[0,0],_=[1,0],g=[0,1],A=[0,0],M=[0,0];return function(){for(var L=this.plot,E=this.vbo,S=this.tickShader,O=this.ticks,P=L.gl,U=L._tickBounds,R=L.dataBox,j=L.viewBox,B=L.pixelRatio,z=L.screenBox,G=z[2]-z[0],V=z[3]-z[1],et=j[2]-j[0],J=j[3]-j[1],X=0;X<2;++X){var Y=U[X],Z=U[X+2]-Y,tt=.5*(R[X+2]+R[X]),rt=R[X+2]-R[X];x[X]=2*Z/rt,b[X]=2*(Y-tt)/rt}x[0]*=et/G,b[0]*=et/G,x[1]*=J/V,b[1]*=J/V,S.bind(),E.bind(),S.attributes.dataCoord.pointer();var nt=S.uniforms;nt.dataShift=b,nt.dataScale=x;var ot=L.tickMarkLength,ct=L.tickMarkWidth,pt=L.tickMarkColor,gt=6*O[0].length,kt=Math.min(i.ge(O[0],(R[0]-U[0])/(U[2]-U[0]),u),O[0].length),yt=Math.min(i.gt(O[0],(R[2]-U[0])/(U[2]-U[0]),u),O[0].length),mt=0+6*kt,Ot=6*Math.max(0,yt-kt),vt=Math.min(i.ge(O[1],(R[1]-U[1])/(U[3]-U[1]),u),O[1].length),xt=Math.min(i.gt(O[1],(R[3]-U[1])/(U[3]-U[1]),u),O[1].length),st=gt+6*vt,at=6*Math.max(0,xt-vt);A[0]=2*(j[0]-ot[1])/G-1,A[1]=(j[3]+j[1])/V-1,M[0]=ot[1]*B/G,M[1]=ct[1]*B/V,at&&(nt.color=pt[1],nt.tickScale=M,nt.dataAxis=g,nt.screenOffset=A,P.drawArrays(P.TRIANGLES,st,at)),A[0]=(j[2]+j[0])/G-1,A[1]=2*(j[1]-ot[0])/V-1,M[0]=ct[0]*B/G,M[1]=ot[0]*B/V,Ot&&(nt.color=pt[0],nt.tickScale=M,nt.dataAxis=_,nt.screenOffset=A,P.drawArrays(P.TRIANGLES,mt,Ot)),A[0]=2*(j[2]+ot[3])/G-1,A[1]=(j[3]+j[1])/V-1,M[0]=ot[3]*B/G,M[1]=ct[3]*B/V,at&&(nt.color=pt[3],nt.tickScale=M,nt.dataAxis=g,nt.screenOffset=A,P.drawArrays(P.TRIANGLES,st,at)),A[0]=(j[2]+j[0])/G-1,A[1]=2*(j[3]+ot[2])/V-1,M[0]=ct[2]*B/G,M[1]=ot[2]*B/V,Ot&&(nt.color=pt[2],nt.tickScale=M,nt.dataAxis=_,nt.screenOffset=A,P.drawArrays(P.TRIANGLES,mt,Ot))}}(),y.update=(v=[1,1,-1,-1,1,-1],p=[1,-1,1,1,-1,-1],function(b){for(var x=b.ticks,_=b.bounds,g=new Float32Array(18*(x[0].length+x[1].length)),A=(this.plot.zeroLineEnable,0),M=[[],[]],L=0;L<2;++L)for(var E=M[L],S=x[L],O=_[L],P=_[L+2],U=0;U<S.length;++U){var R=(S[U].x-O)/(P-O);E.push(R);for(var j=0;j<6;++j)g[A++]=R,g[A++]=v[j],g[A++]=p[j]}this.ticks=M,this.vbo.update(g)}),y.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(s,e,t){s.exports=function(d){var w=d.gl;return new c(d,n(w,[-1,-1,-1,1,1,-1,1,1]),a(w,i.lineVert,i.lineFrag))};var n=t(5827),a=t(5158),i=t(2709);function c(d,w,v){this.plot=d,this.vbo=w,this.shader=v}var l,u,f=c.prototype;f.bind=function(){var d=this.shader;this.vbo.bind(),this.shader.bind(),d.attributes.coord.pointer(),d.uniforms.screenBox=this.plot.screenBox},f.drawLine=(l=[0,0],u=[0,0],function(d,w,v,p,y,b){var x=this.plot,_=this.shader,g=x.gl;l[0]=d,l[1]=w,u[0]=v,u[1]=p,_.uniforms.start=l,_.uniforms.end=u,_.uniforms.width=y*x.pixelRatio,_.uniforms.color=b,g.drawArrays(g.TRIANGLE_STRIP,0,4)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(s,e,t){var n=t(6832),a=n([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);s.exports={lineVert:n([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:n([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:n([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:n([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:n([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(s,e,t){s.exports=function(x){var _=x.gl;return new u(x,n(_),a(_,l.textVert,l.textFrag))};var n=t(5827),a=t(5158),i=t(6946),c=t(5070),l=t(2709);function u(x,_,g){this.plot=x,this.vbo=_,this.shader=g,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var f,d,w,v,p,y,b=u.prototype;b.drawTicks=(f=[0,0],d=[0,0],w=[0,0],function(x){var _=this.plot,g=this.shader,A=this.tickX[x],M=this.tickOffset[x],L=_.gl,E=_.viewBox,S=_.dataBox,O=_.screenBox,P=_.pixelRatio,U=_.tickEnable,R=_.tickPad,j=_.tickColor,B=_.tickAngle,z=_.labelEnable,G=_.labelPad,V=_.labelColor,et=_.labelAngle,J=this.labelOffset[x],X=this.labelCount[x],Y=c.lt(A,S[x]),Z=c.le(A,S[x+2]);f[0]=f[1]=0,f[x]=1,d[x]=(E[2+x]+E[x])/(O[2+x]-O[x])-1;var tt=2/O[2+(1^x)]-O[1^x];d[1^x]=tt*E[1^x]-1,U[x]&&(d[1^x]-=tt*P*R[x],Y<Z&&M[Z]>M[Y]&&(g.uniforms.dataAxis=f,g.uniforms.screenOffset=d,g.uniforms.color=j[x],g.uniforms.angle=B[x],L.drawArrays(L.TRIANGLES,M[Y],M[Z]-M[Y]))),z[x]&&X&&(d[1^x]-=tt*P*G[x],g.uniforms.dataAxis=w,g.uniforms.screenOffset=d,g.uniforms.color=V[x],g.uniforms.angle=et[x],L.drawArrays(L.TRIANGLES,J,X)),d[1^x]=tt*E[2+(1^x)]-1,U[x+2]&&(d[1^x]+=tt*P*R[x+2],Y<Z&&M[Z]>M[Y]&&(g.uniforms.dataAxis=f,g.uniforms.screenOffset=d,g.uniforms.color=j[x+2],g.uniforms.angle=B[x+2],L.drawArrays(L.TRIANGLES,M[Y],M[Z]-M[Y]))),z[x+2]&&X&&(d[1^x]+=tt*P*G[x+2],g.uniforms.dataAxis=w,g.uniforms.screenOffset=d,g.uniforms.color=V[x+2],g.uniforms.angle=et[x+2],L.drawArrays(L.TRIANGLES,J,X))}),b.drawTitle=function(){var x=[0,0],_=[0,0];return function(){var g=this.plot,A=this.shader,M=g.gl,L=g.screenBox,E=g.titleCenter,S=g.titleAngle,O=g.titleColor,P=g.pixelRatio;if(this.titleCount){for(var U=0;U<2;++U)_[U]=2*(E[U]*P-L[U])/(L[2+U]-L[U])-1;A.bind(),A.uniforms.dataAxis=x,A.uniforms.screenOffset=_,A.uniforms.angle=S,A.uniforms.color=O,M.drawArrays(M.TRIANGLES,this.titleOffset,this.titleCount)}}}(),b.bind=(v=[0,0],p=[0,0],y=[0,0],function(){var x=this.plot,_=this.shader,g=x._tickBounds,A=x.dataBox,M=x.screenBox,L=x.viewBox;_.bind();for(var E=0;E<2;++E){var S=g[E],O=g[E+2]-S,P=.5*(A[E+2]+A[E]),U=A[E+2]-A[E],R=L[E],j=L[E+2]-R,B=M[E],z=M[E+2]-B;p[E]=2*O/U*j/z,v[E]=2*(S-P)/U*j/z}y[1]=2*x.pixelRatio/(M[3]-M[1]),y[0]=y[1]*(M[3]-M[1])/(M[2]-M[0]),_.uniforms.dataScale=p,_.uniforms.dataShift=v,_.uniforms.textScale=y,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),b.update=function(x){var _,g,A,M,L,E=[],S=x.ticks,O=x.bounds;for(L=0;L<2;++L){var P=[Math.floor(E.length/3)],U=[-1/0],R=S[L];for(_=0;_<R.length;++_){var j=R[_],B=j.x,z=j.text,G=j.font||"sans-serif";M=j.fontSize||12;for(var V=1/(O[L+2]-O[L]),et=O[L],J=z.split(`
`),X=0;X<J.length;X++)for(A=i(G,J[X]).data,g=0;g<A.length;g+=2)E.push(A[g]*M,-A[g+1]*M-X*M*1.2,(B-et)*V);P.push(Math.floor(E.length/3)),U.push(B)}this.tickOffset[L]=P,this.tickX[L]=U}for(L=0;L<2;++L){for(this.labelOffset[L]=Math.floor(E.length/3),A=i(x.labelFont[L],x.labels[L],{textAlign:"center"}).data,M=x.labelSize[L],_=0;_<A.length;_+=2)E.push(A[_]*M,-A[_+1]*M,0);this.labelCount[L]=Math.floor(E.length/3)-this.labelOffset[L]}for(this.titleOffset=Math.floor(E.length/3),A=i(x.titleFont,x.title).data,M=x.titleSize,_=0;_<A.length;_+=2)E.push(A[_]*M,-A[_+1]*M,0);this.titleCount=Math.floor(E.length/3)-this.titleOffset,this.vbo.update(E)},b.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(s,e,t){s.exports=function(v){var p=v.gl,y=new u(p,n(p,[p.drawingBufferWidth,p.drawingBufferHeight]));return y.grid=a(y),y.text=i(y),y.line=c(y),y.box=l(y),y.update(v),y};var n=t(2611),a=t(3016),i=t(5613),c=t(1154),l=t(4554);function u(v,p){this.gl=v,this.pickBuffer=p,this.screenBox=[0,0,v.drawingBufferWidth,v.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var f=u.prototype;function d(v){for(var p=v.slice(),y=0;y<p.length;++y)p[y]=p[y].slice();return p}function w(v,p){return v.x-p.x}f.setDirty=function(){this.dirty=this.pickDirty=!0},f.setOverlayDirty=function(){this.dirty=!0},f.nextDepthValue=function(){return this._depthCounter++/65536},f.draw=function(){var v=this.gl,p=this.screenBox,y=this.viewBox,b=this.dataBox,x=this.pixelRatio,_=this.grid,g=this.line,A=this.text,M=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,v.bindFramebuffer(v.FRAMEBUFFER,null),v.enable(v.SCISSOR_TEST),v.disable(v.DEPTH_TEST),v.depthFunc(v.LESS),v.depthMask(!1),v.enable(v.BLEND),v.blendEquation(v.FUNC_ADD,v.FUNC_ADD),v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA),this.borderColor){v.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]);var L=this.borderColor;v.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT)}v.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),v.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var E=this.backgroundColor;v.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),v.clear(v.COLOR_BUFFER_BIT),_.draw();var S=this.zeroLineEnable,O=this.zeroLineColor,P=this.zeroLineWidth;if(S[0]||S[1]){g.bind();for(var U=0;U<2;++U)if(S[U]&&b[U]<=0&&b[U+2]>=0){var R=p[U]-b[U]*(p[U+2]-p[U])/(b[U+2]-b[U]);U===0?g.drawLine(R,p[1],R,p[3],P[U],O[U]):g.drawLine(p[0],R,p[2],R,P[U],O[U])}}for(U=0;U<M.length;++U)M[U].draw();v.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]),v.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),this.grid.drawTickMarks(),g.bind();var j=this.borderLineEnable,B=this.borderLineWidth,z=this.borderLineColor;for(j[1]&&g.drawLine(y[0],y[1]-.5*B[1]*x,y[0],y[3]+.5*B[3]*x,B[1],z[1]),j[0]&&g.drawLine(y[0]-.5*B[0]*x,y[1],y[2]+.5*B[2]*x,y[1],B[0],z[0]),j[3]&&g.drawLine(y[2],y[1]-.5*B[1]*x,y[2],y[3]+.5*B[3]*x,B[3],z[3]),j[2]&&g.drawLine(y[0]-.5*B[0]*x,y[3],y[2]+.5*B[2]*x,y[3],B[2],z[2]),A.bind(),U=0;U<2;++U)A.drawTicks(U);this.titleEnable&&A.drawTitle();var G=this.overlays;for(U=0;U<G.length;++U)G[U].draw();v.disable(v.SCISSOR_TEST),v.disable(v.BLEND),v.depthMask(!0)}},f.drawPick=function(){if(!this.static){var v=this.pickBuffer;this.gl,this._pickTimeout=null,v.begin();for(var p=1,y=this.objects,b=0;b<y.length;++b)p=y[b].drawPick(p);v.end()}},f.pick=function(v,p){if(!this.static){var y=this.pixelRatio,b=this.pickPixelRatio,x=this.viewBox,_=0|Math.round((v-x[0]/y)*b),g=0|Math.round((p-x[1]/y)*b),A=this.pickBuffer.query(_,g,this.pickRadius);if(!A)return null;for(var M=A.id+(A.value[0]<<8)+(A.value[1]<<16)+(A.value[2]<<24),L=this.objects,E=0;E<L.length;++E){var S=L[E].pick(_,g,M);if(S)return S}return null}},f.setScreenBox=function(v){var p=this.screenBox,y=this.pixelRatio;p[0]=0|Math.round(v[0]*y),p[1]=0|Math.round(v[1]*y),p[2]=0|Math.round(v[2]*y),p[3]=0|Math.round(v[3]*y),this.setDirty()},f.setDataBox=function(v){var p=this.dataBox;(p[0]!==v[0]||p[1]!==v[1]||p[2]!==v[2]||p[3]!==v[3])&&(p[0]=v[0],p[1]=v[1],p[2]=v[2],p[3]=v[3],this.setDirty())},f.setViewBox=function(v){var p=this.pixelRatio,y=this.viewBox;y[0]=0|Math.round(v[0]*p),y[1]=0|Math.round(v[1]*p),y[2]=0|Math.round(v[2]*p),y[3]=0|Math.round(v[3]*p);var b=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((v[2]-v[0])*b),0|Math.round((v[3]-v[1])*b)],this.setDirty()},f.update=function(v){v=v||{};var p=this.gl;this.pixelRatio=v.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(v.screenBox||[0,0,p.drawingBufferWidth/y,p.drawingBufferHeight/y]),this.screenBox,this.setViewBox(v.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var b=this.viewBox,x=(b[2]-b[0])/(b[3]-b[1]);this.setDataBox(v.dataBox||[-10,-10/x,10,10/x]),this.borderColor=v.borderColor!==!1&&(v.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(v.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(v.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(v.gridLineWidth||[1,1]).slice(),this.gridLineColor=d(v.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(v.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(v.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=d(v.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(v.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(v.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=d(v.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(v.titleCenter||[.5*(b[0]+b[2])/y,(b[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in v)||!!v.titleEnable,this.titleAngle=v.titleAngle||0,this.titleColor=(v.titleColor||[0,0,0,1]).slice(),this.labelPad=(v.labelPad||[15,15,15,15]).slice(),this.labelAngle=(v.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(v.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=d(v.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(v.tickPad||[15,15,15,15]).slice(),this.tickAngle=(v.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(v.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=d(v.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(v.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(v.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=d(v.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=v.ticks||[[],[]],g=this._tickBounds;g[0]=g[1]=1/0,g[2]=g[3]=-1/0;for(var A=0;A<2;++A){var M=_[A].slice(0);M.length!==0&&(M.sort(w),g[A]=Math.min(g[A],M[0].x),g[A+2]=Math.max(g[A+2],M[M.length-1].x))}this.grid.update({bounds:g,ticks:_}),this.text.update({bounds:g,ticks:_,labels:v.labels||["x","y"],labelSize:v.labelSize||[12,12],labelFont:v.labelFont||["sans-serif","sans-serif"],title:v.title||"",titleSize:v.titleSize||18,titleFont:v.titleFont||"sans-serif"}),this.static=!!v.static,this.setDirty()},f.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var v=this.objects.length-1;v>=0;--v)this.objects[v].dispose();for(this.objects.length=0,v=this.overlays.length-1;v>=0;--v)this.overlays[v].dispose();this.overlays.length=0,this.gl=null},f.addObject=function(v){this.objects.indexOf(v)<0&&(this.objects.push(v),this.setDirty())},f.removeObject=function(v){for(var p=this.objects,y=0;y<p.length;++y)if(p[y]===v){p.splice(y,1),this.setDirty();break}},f.addOverlay=function(v){this.overlays.indexOf(v)<0&&(this.overlays.push(v),this.setOverlayDirty())},f.removeOverlay=function(v){for(var p=this.overlays,y=0;y<p.length;++y)if(p[y]===v){p.splice(y,1),this.setOverlayDirty();break}}},4296:function(s,e,t){s.exports=function(f,d){f=f||document.body;var w=[.01,1/0];"distanceLimits"in(d=d||{})&&(w[0]=d.distanceLimits[0],w[1]=d.distanceLimits[1]),"zoomMin"in d&&(w[0]=d.zoomMin),"zoomMax"in d&&(w[1]=d.zoomMax);var v=a({center:d.center||[0,0,0],up:d.up||[0,1,0],eye:d.eye||[0,0,10],mode:d.mode||"orbit",distanceLimits:w}),p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,b=f.clientWidth,x=f.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:v,element:f,delay:d.delay||16,rotateSpeed:d.rotateSpeed||1,zoomSpeed:d.zoomSpeed||1,translateSpeed:d.translateSpeed||1,flipX:!!d.flipX,flipY:!!d.flipY,modes:v.modes,_ortho:d._ortho||d.projection&&d.projection.type==="orthographic"||!1,tick:function(){var g=n(),A=this.delay,M=g-2*A;v.idle(g-A),v.recalcMatrix(M),v.flush(g-(100+2*A));for(var L=!0,E=v.computedMatrix,S=0;S<16;++S)L=L&&p[S]===E[S],p[S]=E[S];var O=f.clientWidth===b&&f.clientHeight===x;return b=f.clientWidth,x=f.clientHeight,L?!O:(y=Math.exp(v.computedRadius[0]),!0)},lookAt:function(g,A,M){v.lookAt(v.lastT(),g,A,M)},rotate:function(g,A,M){v.rotate(v.lastT(),g,A,M)},pan:function(g,A,M){v.pan(v.lastT(),g,A,M)},translate:function(g,A,M){v.translate(v.lastT(),g,A,M)}};return Object.defineProperties(_,{matrix:{get:function(){return v.computedMatrix},set:function(g){return v.setMatrix(v.lastT(),g),v.computedMatrix},enumerable:!0},mode:{get:function(){return v.getMode()},set:function(g){var A=v.computedUp.slice(),M=v.computedEye.slice(),L=v.computedCenter.slice();if(v.setMode(g),g==="turntable"){var E=n();v._active.lookAt(E,M,L,A),v._active.lookAt(E+500,M,L,[0,0,1]),v._active.flush(E)}return v.getMode()},enumerable:!0},center:{get:function(){return v.computedCenter},set:function(g){return v.lookAt(v.lastT(),null,g),v.computedCenter},enumerable:!0},eye:{get:function(){return v.computedEye},set:function(g){return v.lookAt(v.lastT(),g),v.computedEye},enumerable:!0},up:{get:function(){return v.computedUp},set:function(g){return v.lookAt(v.lastT(),null,null,g),v.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(g){return v.setDistance(v.lastT(),g),g},enumerable:!0},distanceLimits:{get:function(){return v.getDistanceLimits(w)},set:function(g){return v.setDistanceLimits(g),g},enumerable:!0}}),f.addEventListener("contextmenu",function(g){return g.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function g(A,M,L,E){var S=_.keyBindingMode;if(S!==!1){var O=S==="rotate",P=S==="pan",U=S==="zoom",R=!!E.control,j=!!E.alt,B=!!E.shift,z=!!(1&A),G=!!(2&A),V=!!(4&A),et=1/f.clientHeight,J=et*(M-_._lastX),X=et*(L-_._lastY),Y=_.flipX?1:-1,Z=_.flipY?1:-1,tt=Math.PI*_.rotateSpeed,rt=n();if(_._lastX!==-1&&_._lastY!==-1&&((O&&z&&!R&&!j&&!B||z&&!R&&!j&&B)&&v.rotate(rt,Y*tt*J,-Z*tt*X,0),(P&&z&&!R&&!j&&!B||G||z&&R&&!j&&!B)&&v.pan(rt,-_.translateSpeed*J*y,_.translateSpeed*X*y,0),U&&z&&!R&&!j&&!B||V||z&&!R&&j&&!B)){var nt=-_.zoomSpeed*X/window.innerHeight*(rt-v.lastT())*100;v.pan(rt,0,0,y*(Math.exp(nt)-1))}return _._lastX=M,_._lastY=L,_._lastMods=E,!0}}_.mouseListener=i(f,g),f.addEventListener("touchstart",function(A){var M=l(A.changedTouches[0],f);g(0,M[0],M[1],_._lastMods),g(1,M[0],M[1],_._lastMods)},!!u&&{passive:!0}),f.addEventListener("touchmove",function(A){var M=l(A.changedTouches[0],f);g(1,M[0],M[1],_._lastMods),A.preventDefault()},!!u&&{passive:!1}),f.addEventListener("touchend",function(A){g(0,_._lastX,_._lastY,_._lastMods)},!!u&&{passive:!0}),_.wheelListener=c(f,function(A,M){if(_.keyBindingMode!==!1&&_.enableWheel){var L=_.flipX?1:-1,E=_.flipY?1:-1,S=n();if(Math.abs(A)>Math.abs(M))v.rotate(S,0,0,-A*L*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var O=-_.zoomSpeed*E*M/window.innerHeight*(S-v.lastT())/20;v.pan(S,0,0,y*(Math.exp(O)-1))}}},!0)},_.enableMouseListeners(),_};var n=t(8161),a=t(1152),i=t(6145),c=t(6475),l=t(2565),u=t(5233)},8245:function(s,e,t){var n=t(6832),a=t(5158),i=n([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),c=n([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);s.exports=function(l){return a(l,i,c,null,[{name:"position",type:"vec2"}])}},1059:function(s,e,t){var n=t(4296),a=t(7453),i=t(2771),c=t(6496),l=t(2611),u=t(4234),f=t(8126),d=t(6145),w=t(1120),v=t(5268),p=t(8245),y=t(2321)({tablet:!0,featureDetect:!0});function b(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function x(g){var A=Math.round(Math.log(Math.abs(g))/Math.log(10));if(A<0){var M=Math.round(Math.pow(10,-A));return Math.ceil(g*M)/M}return A>0?(M=Math.round(Math.pow(10,A)),Math.ceil(g/M)*M):Math.ceil(g)}function _(g){return typeof g!="boolean"||g}s.exports={createScene:function(g){(g=g||{}).camera=g.camera||{};var A=g.canvas;A||(A=document.createElement("canvas"),g.container?g.container.appendChild(A):document.body.appendChild(A));var M=g.gl;if(M||(g.glOptions&&(y=!!g.glOptions.preserveDrawingBuffer),M=function(Ot,vt){var xt=null;try{(xt=Ot.getContext("webgl",vt))||(xt=Ot.getContext("experimental-webgl",vt))}catch{return null}return xt}(A,g.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:y})),!M)throw new Error("webgl not supported");var L=g.bounds||[[-10,-10,-10],[10,10,10]],E=new b,S=u(M,M.drawingBufferWidth,M.drawingBufferHeight,{preferFloat:!y}),O=p(M),P=g.cameraObject&&g.cameraObject._ortho===!0||g.camera.projection&&g.camera.projection.type==="orthographic"||!1,U={eye:g.camera.eye||[2,0,0],center:g.camera.center||[0,0,0],up:g.camera.up||[0,1,0],zoomMin:g.camera.zoomMax||.1,zoomMax:g.camera.zoomMin||100,mode:g.camera.mode||"turntable",_ortho:P},R=g.axes||{},j=a(M,R);j.enable=!R.disable;var B=g.spikes||{},z=c(M,B),G=[],V=[],et=[],J=[],X=!0,Y=!0,Z={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},tt=(Y=!0,[M.drawingBufferWidth,M.drawingBufferHeight]),rt=g.cameraObject||n(A,U),nt={gl:M,contextLost:!1,pixelRatio:g.pixelRatio||1,canvas:A,selection:E,camera:rt,axes:j,axesPixels:null,spikes:z,bounds:L,objects:G,shape:tt,aspect:g.aspectRatio||[1,1,1],pickRadius:g.pickRadius||10,zNear:g.zNear||.01,zFar:g.zFar||1e3,fovy:g.fovy||Math.PI/4,clearColor:g.clearColor||[0,0,0,0],autoResize:_(g.autoResize),autoBounds:_(g.autoBounds),autoScale:!!g.autoScale,autoCenter:_(g.autoCenter),clipToBounds:_(g.clipToBounds),snapToData:!!g.snapToData,onselect:g.onselect||null,onrender:g.onrender||null,onclick:g.onclick||null,cameraParams:Z,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ot){this.aspect[0]=Ot.x,this.aspect[1]=Ot.y,this.aspect[2]=Ot.z,Y=!0},setBounds:function(Ot,vt){this.bounds[0][Ot]=vt.min,this.bounds[1][Ot]=vt.max},setClearColor:function(Ot){this.clearColor=Ot},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ot=[M.drawingBufferWidth/nt.pixelRatio|0,M.drawingBufferHeight/nt.pixelRatio|0];function ct(){if(!nt._stopped&&nt.autoResize){var Ot=A.parentNode,vt=1,xt=1;Ot&&Ot!==document.body?(vt=Ot.clientWidth,xt=Ot.clientHeight):(vt=window.innerWidth,xt=window.innerHeight);var st=0|Math.ceil(vt*nt.pixelRatio),at=0|Math.ceil(xt*nt.pixelRatio);if(st!==A.width||at!==A.height){A.width=st,A.height=at;var ht=A.style;ht.position=ht.position||"absolute",ht.left="0px",ht.top="0px",ht.width=vt+"px",ht.height=xt+"px",X=!0}}}function pt(){for(var Ot=G.length,vt=J.length,xt=0;xt<vt;++xt)et[xt]=0;t:for(xt=0;xt<Ot;++xt){var st=G[xt],at=st.pickSlots;if(at){for(var ht=0;ht<vt;++ht)if(et[ht]+at<255){V[xt]=ht,st.setPickBase(et[ht]+1),et[ht]+=at;continue t}var Lt=l(M,tt);V[xt]=vt,J.push(Lt),et.push(at),st.setPickBase(1),vt+=1}else V[xt]=-1}for(;vt>0&&et[vt-1]===0;)et.pop(),J.pop().dispose()}function gt(){if(nt.contextLost)return!0;M.isContextLost()&&(nt.contextLost=!0,nt.mouseListener.enabled=!1,nt.selection.object=null,nt.oncontextloss&&nt.oncontextloss())}nt.autoResize&&ct(),window.addEventListener("resize",ct),nt.update=function(Ot){nt._stopped||(X=!0,Y=!0)},nt.add=function(Ot){nt._stopped||(Ot.axes=j,G.push(Ot),V.push(-1),X=!0,Y=!0,pt())},nt.remove=function(Ot){if(!nt._stopped){var vt=G.indexOf(Ot);vt<0||(G.splice(vt,1),V.pop(),X=!0,Y=!0,pt())}},nt.dispose=function(){if(!nt._stopped&&(nt._stopped=!0,window.removeEventListener("resize",ct),A.removeEventListener("webglcontextlost",gt),nt.mouseListener.enabled=!1,!nt.contextLost)){j.dispose(),z.dispose();for(var Ot=0;Ot<G.length;++Ot)G[Ot].dispose();for(S.dispose(),Ot=0;Ot<J.length;++Ot)J[Ot].dispose();O.dispose(),M=null,j=null,z=null,G=[]}},nt._mouseRotating=!1,nt._prevButtons=0,nt.enableMouseListeners=function(){nt.mouseListener=d(A,function(Ot,vt,xt){if(!nt._stopped){var st=J.length,at=G.length,ht=E.object;E.distance=1/0,E.mouse[0]=vt,E.mouse[1]=xt,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var Lt=!1;if(Ot&&nt._prevButtons)nt._mouseRotating=!0;else{nt._mouseRotating&&(Y=!0),nt._mouseRotating=!1;for(var Mt=0;Mt<st;++Mt){var _t=J[Mt].query(vt,ot[1]-xt-1,nt.pickRadius);if(_t){if(_t.distance>E.distance)continue;for(var St=0;St<at;++St){var Dt=G[St];if(V[St]===Mt){var ut=Dt.pick(_t);ut&&(E.buttons=Ot,E.screen=_t.coord,E.distance=_t.distance,E.object=Dt,E.index=ut.distance,E.dataPosition=ut.position,E.dataCoordinate=ut.dataCoordinate,E.data=ut,Lt=!0)}}}}}ht&&ht!==E.object&&(ht.highlight&&ht.highlight(null),X=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),X=!0),(Lt=Lt||E.object!==ht)&&nt.onselect&&nt.onselect(E),1&Ot&&!(1&nt._prevButtons)&&nt.onclick&&nt.onclick(E),nt._prevButtons=Ot}})},A.addEventListener("webglcontextlost",gt);var kt=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],yt=[kt[0].slice(),kt[1].slice()];function mt(){if(!gt()){ct();var Ot=nt.camera.tick();Z.view=nt.camera.matrix,X=X||Ot,Y=Y||Ot,j.pixelRatio=nt.pixelRatio,z.pixelRatio=nt.pixelRatio;var vt=G.length,xt=kt[0],st=kt[1];xt[0]=xt[1]=xt[2]=1/0,st[0]=st[1]=st[2]=-1/0;for(var at=0;at<vt;++at){(Ft=G[at]).pixelRatio=nt.pixelRatio,Ft.axes=nt.axes,X=X||!!Ft.dirty,Y=Y||!!Ft.dirty;var ht=Ft.bounds;if(ht)for(var Lt=ht[0],Mt=ht[1],_t=0;_t<3;++_t)xt[_t]=Math.min(xt[_t],Lt[_t]),st[_t]=Math.max(st[_t],Mt[_t])}var St=nt.bounds;if(nt.autoBounds)for(_t=0;_t<3;++_t){if(st[_t]<xt[_t])xt[_t]=-1,st[_t]=1;else{xt[_t]===st[_t]&&(xt[_t]-=1,st[_t]+=1);var Dt=.05*(st[_t]-xt[_t]);xt[_t]=xt[_t]-Dt,st[_t]=st[_t]+Dt}St[0][_t]=xt[_t],St[1][_t]=st[_t]}var ut=!1;for(_t=0;_t<3;++_t)ut=ut||yt[0][_t]!==St[0][_t]||yt[1][_t]!==St[1][_t],yt[0][_t]=St[0][_t],yt[1][_t]=St[1][_t];if(Y=Y||ut,X=X||ut){if(ut){var Tt=[0,0,0];for(at=0;at<3;++at)Tt[at]=x((St[1][at]-St[0][at])/10);j.autoTicks?j.update({bounds:St,tickSpacing:Tt}):j.update({bounds:St})}var bt=M.drawingBufferWidth,It=M.drawingBufferHeight;for(tt[0]=bt,tt[1]=It,ot[0]=0|Math.max(bt/nt.pixelRatio,1),ot[1]=0|Math.max(It/nt.pixelRatio,1),function($t,Wt){var Xt=$t.bounds,ae=$t.cameraParams,Qt=ae.projection,de=ae.model,ye=$t.gl.drawingBufferWidth,ve=$t.gl.drawingBufferHeight,ie=$t.zNear,se=$t.zFar,ke=$t.fovy,Ae=ye/ve;Wt?(v(Qt,-Ae,Ae,-1,1,ie,se),ae._ortho=!0):(w(Qt,ke,Ae,ie,se),ae._ortho=!1);for(var Ie=0;Ie<16;++Ie)de[Ie]=0;de[15]=1;var Te=0;for(Ie=0;Ie<3;++Ie)Te=Math.max(Te,Xt[1][Ie]-Xt[0][Ie]);for(Ie=0;Ie<3;++Ie)$t.autoScale?de[5*Ie]=$t.aspect[Ie]/(Xt[1][Ie]-Xt[0][Ie]):de[5*Ie]=1/Te,$t.autoCenter&&(de[12+Ie]=.5*-de[5*Ie]*(Xt[0][Ie]+Xt[1][Ie]))}(nt,P),at=0;at<vt;++at)(Ft=G[at]).axesBounds=St,nt.clipToBounds&&(Ft.clipBounds=St);E.object&&(nt.snapToData?z.position=E.dataCoordinate:z.position=E.dataPosition,z.bounds=St),Y&&(Y=!1,function(){if(!gt()){M.colorMask(!0,!0,!0,!0),M.depthMask(!0),M.disable(M.BLEND),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL);for(var $t=G.length,Wt=J.length,Xt=0;Xt<Wt;++Xt){var ae=J[Xt];ae.shape=ot,ae.begin();for(var Qt=0;Qt<$t;++Qt)if(V[Qt]===Xt){var de=G[Qt];de.drawPick&&(de.pixelRatio=1,de.drawPick(Z))}ae.end()}}}()),nt.axesPixels=i(nt.axes,Z,bt,It),nt.onrender&&nt.onrender(),M.bindFramebuffer(M.FRAMEBUFFER,null),M.viewport(0,0,bt,It),nt.clearRGBA(),M.depthMask(!0),M.colorMask(!0,!0,!0,!0),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.disable(M.BLEND),M.disable(M.CULL_FACE);var zt=!1;for(j.enable&&(zt=zt||j.isTransparent(),j.draw(Z)),z.axes=j,E.object&&z.draw(Z),M.disable(M.CULL_FACE),at=0;at<vt;++at)(Ft=G[at]).axes=j,Ft.pixelRatio=nt.pixelRatio,Ft.isOpaque&&Ft.isOpaque()&&Ft.draw(Z),Ft.isTransparent&&Ft.isTransparent()&&(zt=!0);if(zt){for(S.shape=tt,S.bind(),M.clear(M.DEPTH_BUFFER_BIT),M.colorMask(!1,!1,!1,!1),M.depthMask(!0),M.depthFunc(M.LESS),j.enable&&j.isTransparent()&&j.drawTransparent(Z),at=0;at<vt;++at)(Ft=G[at]).isOpaque&&Ft.isOpaque()&&Ft.draw(Z);for(M.enable(M.BLEND),M.blendEquation(M.FUNC_ADD),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.colorMask(!0,!0,!0,!0),M.depthMask(!1),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),j.isTransparent()&&j.drawTransparent(Z),at=0;at<vt;++at){var Ft;(Ft=G[at]).isTransparent&&Ft.isTransparent()&&Ft.drawTransparent(Z)}M.bindFramebuffer(M.FRAMEBUFFER,null),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.disable(M.DEPTH_TEST),O.bind(),S.color[0].bind(0),O.uniforms.accumBuffer=0,f(M),M.disable(M.BLEND)}for(X=!1,at=0;at<vt;++at)G[at].dirty=!1}}}return nt.enableMouseListeners(),function Ot(){nt._stopped||nt.contextLost||(mt(),requestAnimationFrame(Ot))}(),nt.redraw=function(){nt._stopped||(X=!0,mt())},nt},createCamera:n}},8023:function(s,e,t){var n=t(6832);e.pointVertex=n([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),e.pointFragment=n([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),e.pickVertex=n([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),e.pickFragment=n([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(s,e,t){var n=t(5158),a=t(5827),i=t(5306),c=t(8023);function l(w,v,p,y,b){this.plot=w,this.offsetBuffer=v,this.pickBuffer=p,this.shader=y,this.pickShader=b,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}s.exports=function(w,v){var p=w.gl,y=new l(w,a(p),a(p),n(p,c.pointVertex,c.pointFragment),n(p,c.pickVertex,c.pickFragment));return y.update(v),w.addObject(y),y};var u,f,d=l.prototype;d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},d.update=function(w){var v;function p(M,L){return M in w?w[M]:L}w=w||{},this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var y=w.positions.length>>>1,b=w.positions instanceof Float32Array,x=w.idToIndex instanceof Int32Array&&w.idToIndex.length>=y,_=w.positions,g=b?_:i.mallocFloat32(_.length),A=x?w.idToIndex:i.mallocInt32(y);if(b||g.set(_),!x)for(g.set(_),v=0;v<y;v++)A[v]=v;this.points=_,this.offsetBuffer.update(g),this.pickBuffer.update(A),b||i.free(g),x||i.free(A),this.pointCount=y,this.pickOffset=0},d.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],f=[0,0,0,0],function(w){var v=w!==void 0,p=v?this.pickShader:this.shader,y=this.plot.gl,b=this.plot.dataBox;if(this.pointCount===0)return w;var x=b[2]-b[0],_=b[3]-b[1],g=function(E,S){var O,P=0,U=E.length>>>1;for(O=0;O<U;O++){var R=E[2*O],j=E[2*O+1];R>=S[0]&&R<=S[2]&&j>=S[1]&&j<=S[3]&&P++}return P}(this.points,b),A=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(g,.33333)));u[0]=2/x,u[4]=2/_,u[6]=-2*b[0]/x-1,u[7]=-2*b[1]/_-1,this.offsetBuffer.bind(),p.bind(),p.attributes.position.pointer(),p.uniforms.matrix=u,p.uniforms.color=this.color,p.uniforms.borderColor=this.borderColor,p.uniforms.pointCloud=A<5,p.uniforms.pointSize=A,p.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(f[0]=255&w,f[1]=w>>8&255,f[2]=w>>16&255,f[3]=w>>24&255,this.pickBuffer.bind(),p.attributes.pickId.pointer(y.UNSIGNED_BYTE),p.uniforms.pickOffset=f,this.pickOffset=w);var M=y.getParameter(y.BLEND),L=y.getParameter(y.DITHER);return M&&!this.blend&&y.disable(y.BLEND),L&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),M&&!this.blend&&y.enable(y.BLEND),L&&y.enable(y.DITHER),w+this.pointCount}),d.draw=d.unifiedDraw,d.drawPick=d.unifiedDraw,d.pick=function(w,v,p){var y=this.pickOffset,b=this.pointCount;if(p<y||p>=y+b)return null;var x=p-y,_=this.points;return{object:this,pointId:x,dataCoord:[_[2*x],_[2*x+1]]}}},6093:function(s){s.exports=function(e,t,n,a){var i,c,l,u,f,d=t[0],w=t[1],v=t[2],p=t[3],y=n[0],b=n[1],x=n[2],_=n[3];return(c=d*y+w*b+v*x+p*_)<0&&(c=-c,y=-y,b=-b,x=-x,_=-_),1-c>1e-6?(i=Math.acos(c),l=Math.sin(i),u=Math.sin((1-a)*i)/l,f=Math.sin(a*i)/l):(u=1-a,f=a),e[0]=u*d+f*y,e[1]=u*w+f*b,e[2]=u*v+f*x,e[3]=u*p+f*_,e}},8240:function(s){s.exports=function(e){return e||e===0?e.toString():""}},4123:function(s,e,t){var n=t(875);s.exports=function(i,c,l){var u=a[c];if(u||(u=a[c]={}),i in u)return u[i];var f={textAlign:"center",textBaseline:"middle",lineHeight:1,font:c,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},d=n(i,f);f.triangles=!1;var w,v,p=n(i,f);if(l&&l!==1){for(w=0;w<d.positions.length;++w)for(v=0;v<d.positions[w].length;++v)d.positions[w][v]/=l;for(w=0;w<p.positions.length;++w)for(v=0;v<p.positions[w].length;++v)p.positions[w][v]/=l}var y=[[1/0,1/0],[-1/0,-1/0]],b=p.positions.length;for(w=0;w<b;++w){var x=p.positions[w];for(v=0;v<2;++v)y[0][v]=Math.min(y[0][v],x[v]),y[1][v]=Math.max(y[1][v],x[v])}return u[i]=[d,p,y]};var a={}},9282:function(s,e,t){var n=t(5158),a=t(6832),i=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),c=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),d=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],w={vertex:i,fragment:u,attributes:d},v={vertex:c,fragment:u,attributes:d},p={vertex:l,fragment:u,attributes:d},y={vertex:i,fragment:f,attributes:d},b={vertex:c,fragment:f,attributes:d},x={vertex:l,fragment:f,attributes:d};function _(g,A){var M=n(g,A),L=M.attributes;return L.position.location=0,L.color.location=1,L.glyph.location=2,L.id.location=3,M}e.createPerspective=function(g){return _(g,w)},e.createOrtho=function(g){return _(g,v)},e.createProject=function(g){return _(g,p)},e.createPickPerspective=function(g){return _(g,y)},e.createPickOrtho=function(g){return _(g,b)},e.createPickProject=function(g){return _(g,x)}},2182:function(s,e,t){var n=t(3596),a=t(5827),i=t(2944),c=t(5306),l=t(104),u=t(9282),f=t(4123),d=t(8240),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(V,et){var J=V[0],X=V[1],Y=V[2],Z=V[3];return V[0]=et[0]*J+et[4]*X+et[8]*Y+et[12]*Z,V[1]=et[1]*J+et[5]*X+et[9]*Y+et[13]*Z,V[2]=et[2]*J+et[6]*X+et[10]*Y+et[14]*Z,V[3]=et[3]*J+et[7]*X+et[11]*Y+et[15]*Z,V}function p(V,et,J,X){return v(X,X),v(X,X),v(X,X)}function y(V,et){this.index=V,this.dataCoordinate=this.position=et}function b(V){return V===!0||V>1?1:V}function x(V,et,J,X,Y,Z,tt,rt,nt,ot,ct,pt){this.gl=V,this.pixelRatio=1,this.shader=et,this.orthoShader=J,this.projectShader=X,this.pointBuffer=Y,this.colorBuffer=Z,this.glyphBuffer=tt,this.idBuffer=rt,this.vao=nt,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ot,this.pickOrthoShader=ct,this.pickProjectShader=pt,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}s.exports=function(V){var et=V.gl,J=u.createPerspective(et),X=u.createOrtho(et),Y=u.createProject(et),Z=u.createPickPerspective(et),tt=u.createPickOrtho(et),rt=u.createPickProject(et),nt=a(et),ot=a(et),ct=a(et),pt=a(et),gt=new x(et,J,X,Y,nt,ot,ct,pt,i(et,[{buffer:nt,size:3,type:et.FLOAT},{buffer:ot,size:4,type:et.FLOAT},{buffer:ct,size:2,type:et.FLOAT},{buffer:pt,size:4,type:et.UNSIGNED_BYTE,normalized:!0}]),Z,tt,rt);return gt.update(V),gt};var _=x.prototype;_.pickSlots=1,_.setPickBase=function(V){this.pickId=V},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var V=0;V<3;++V)if(this.axesProject[V]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var V=0;V<3;++V)if(this.axesProject[V]&&!this.projectHasAlpha)return!0;return!1};var g=[0,0],A=[0,0,0],M=[0,0,0],L=[0,0,0,1],E=[0,0,0,1],S=w.slice(),O=[0,0,0],P=[[0,0,0],[0,0,0]];function U(V){return V[0]=V[1]=V[2]=0,V}function R(V,et){return V[0]=et[0],V[1]=et[1],V[2]=et[2],V[3]=1,V}function j(V,et,J,X){return V[0]=et[0],V[1]=et[1],V[2]=et[2],V[J]=X,V}var B=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function z(V,et,J,X,Y,Z,tt){var rt=J.gl;if((Z===J.projectHasAlpha||tt)&&function(ot,ct,pt,gt){var kt,yt=ct.axesProject,mt=ct.gl,Ot=ot.uniforms,vt=pt.model||w,xt=pt.view||w,st=pt.projection||w,at=ct.axesBounds,ht=function(Xt){for(var ae=P,Qt=0;Qt<2;++Qt)for(var de=0;de<3;++de)ae[Qt][de]=Math.max(Math.min(Xt[Qt][de],1e8),-1e8);return ae}(ct.clipBounds);kt=ct.axes&&ct.axes.lastCubeProps?ct.axes.lastCubeProps.axis:[1,1,1],g[0]=2/mt.drawingBufferWidth,g[1]=2/mt.drawingBufferHeight,ot.bind(),Ot.view=xt,Ot.projection=st,Ot.screenSize=g,Ot.highlightId=ct.highlightId,Ot.highlightScale=ct.highlightScale,Ot.clipBounds=ht,Ot.pickGroup=ct.pickId/255,Ot.pixelRatio=gt;for(var Lt=0;Lt<3;++Lt)if(yt[Lt]){Ot.scale=ct.projectScale[Lt],Ot.opacity=ct.projectOpacity[Lt];for(var Mt=S,_t=0;_t<16;++_t)Mt[_t]=0;for(_t=0;_t<4;++_t)Mt[5*_t]=1;Mt[5*Lt]=0,kt[Lt]<0?Mt[12+Lt]=at[0][Lt]:Mt[12+Lt]=at[1][Lt],l(Mt,vt,Mt),Ot.model=Mt;var St=(Lt+1)%3,Dt=(Lt+2)%3,ut=U(A),Tt=U(M);ut[St]=1,Tt[Dt]=1;var bt=p(0,0,0,R(L,ut)),It=p(0,0,0,R(E,Tt));if(Math.abs(bt[1])>Math.abs(It[1])){var zt=bt;bt=It,It=zt,zt=ut,ut=Tt,Tt=zt;var Ft=St;St=Dt,Dt=Ft}bt[0]<0&&(ut[St]=-1),It[1]>0&&(Tt[Dt]=-1);var $t=0,Wt=0;for(_t=0;_t<4;++_t)$t+=Math.pow(vt[4*St+_t],2),Wt+=Math.pow(vt[4*Dt+_t],2);ut[St]/=Math.sqrt($t),Tt[Dt]/=Math.sqrt(Wt),Ot.axes[0]=ut,Ot.axes[1]=Tt,Ot.fragClipBounds[0]=j(O,ht[0],Lt,-1e8),Ot.fragClipBounds[1]=j(O,ht[1],Lt,1e8),ct.vao.bind(),ct.vao.draw(mt.TRIANGLES,ct.vertexCount),ct.lineWidth>0&&(mt.lineWidth(ct.lineWidth*gt),ct.vao.draw(mt.LINES,ct.lineVertexCount,ct.vertexCount)),ct.vao.unbind()}}(et,J,X,Y),Z===J.hasAlpha||tt){V.bind();var nt=V.uniforms;nt.model=X.model||w,nt.view=X.view||w,nt.projection=X.projection||w,g[0]=2/rt.drawingBufferWidth,g[1]=2/rt.drawingBufferHeight,nt.screenSize=g,nt.highlightId=J.highlightId,nt.highlightScale=J.highlightScale,nt.fragClipBounds=B,nt.clipBounds=J.axes.bounds,nt.opacity=J.opacity,nt.pickGroup=J.pickId/255,nt.pixelRatio=Y,J.vao.bind(),J.vao.draw(rt.TRIANGLES,J.vertexCount),J.lineWidth>0&&(rt.lineWidth(J.lineWidth*Y),J.vao.draw(rt.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}function G(V,et,J,X){var Y;Y=Array.isArray(V)?et<V.length?V[et]:void 0:V,Y=d(Y);var Z=!0;n(Y)&&(Y="\u25BC",Z=!1);var tt=f(Y,J,X);return{mesh:tt[0],lines:tt[1],bounds:tt[2],visible:Z}}_.draw=function(V){z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,V,this.pixelRatio,!1,!1)},_.drawTransparent=function(V){z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,V,this.pixelRatio,!0,!1)},_.drawPick=function(V){z(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,V,1,!0,!0)},_.pick=function(V){if(!V||V.id!==this.pickId)return null;var et=V.value[2]+(V.value[1]<<8)+(V.value[0]<<16);if(et>=this.pointCount||et<0)return null;var J=this.points[et],X=this._selectResult;X.index=et;for(var Y=0;Y<3;++Y)X.position[Y]=X.dataCoordinate[Y]=J[Y];return X},_.highlight=function(V){if(V){var et=V.index,J=255&et,X=et>>8&255,Y=et>>16&255;this.highlightId=[J/255,X/255,Y/255,0]}else this.highlightId=[1,1,1,1]},_.update=function(V){if("perspective"in(V=V||{})&&(this.useOrtho=!V.perspective),"orthographic"in V&&(this.useOrtho=!!V.orthographic),"lineWidth"in V&&(this.lineWidth=V.lineWidth),"project"in V)if(Array.isArray(V.project))this.axesProject=V.project;else{var et=!!V.project;this.axesProject=[et,et,et]}if("projectScale"in V)if(Array.isArray(V.projectScale))this.projectScale=V.projectScale.slice();else{var J=+V.projectScale;this.projectScale=[J,J,J]}if(this.projectHasAlpha=!1,"projectOpacity"in V){Array.isArray(V.projectOpacity)?this.projectOpacity=V.projectOpacity.slice():(J=+V.projectOpacity,this.projectOpacity=[J,J,J]);for(var X=0;X<3;++X)this.projectOpacity[X]=b(this.projectOpacity[X]),this.projectOpacity[X]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in V&&(this.opacity=b(V.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Y,Z,tt=V.position,rt=V.font||"normal",nt=V.alignment||[0,0];if(nt.length===2)Y=nt[0],Z=nt[1];else for(Y=[],Z=[],X=0;X<nt.length;++X)Y[X]=nt[X][0],Z[X]=nt[X][1];var ot=[1/0,1/0,1/0],ct=[-1/0,-1/0,-1/0],pt=V.glyph,gt=V.color,kt=V.size,yt=V.angle,mt=V.lineColor,Ot=-1,vt=0,xt=0,st=0;if(tt.length){st=tt.length;t:for(X=0;X<st;++X){for(var at=tt[X],ht=0;ht<3;++ht)if(isNaN(at[ht])||!isFinite(at[ht]))continue t;var Lt=(ae=G(pt,X,rt,this.pixelRatio)).mesh,Mt=ae.lines,_t=ae.bounds;vt+=3*Lt.cells.length,xt+=2*Mt.edges.length}}var St=vt+xt,Dt=c.mallocFloat(3*St),ut=c.mallocFloat(4*St),Tt=c.mallocFloat(2*St),bt=c.mallocUint32(St);if(St>0){var It=0,zt=vt,Ft=[0,0,0,1],$t=[0,0,0,1],Wt=Array.isArray(gt)&&Array.isArray(gt[0]),Xt=Array.isArray(mt)&&Array.isArray(mt[0]);t:for(X=0;X<st;++X){for(Ot+=1,at=tt[X],ht=0;ht<3;++ht){if(isNaN(at[ht])||!isFinite(at[ht]))continue t;ct[ht]=Math.max(ct[ht],at[ht]),ot[ht]=Math.min(ot[ht],at[ht])}Lt=(ae=G(pt,X,rt,this.pixelRatio)).mesh,Mt=ae.lines,_t=ae.bounds;var ae,Qt=ae.visible;if(Qt)if(Array.isArray(gt)){if((de=Wt?X<gt.length?gt[X]:[0,0,0,0]:gt).length===3){for(ht=0;ht<3;++ht)Ft[ht]=de[ht];Ft[3]=1}else if(de.length===4){for(ht=0;ht<4;++ht)Ft[ht]=de[ht];!this.hasAlpha&&de[3]<1&&(this.hasAlpha=!0)}}else Ft[0]=Ft[1]=Ft[2]=0,Ft[3]=1;else Ft=[1,1,1,0];if(Qt)if(Array.isArray(mt)){var de;if((de=Xt?X<mt.length?mt[X]:[0,0,0,0]:mt).length===3){for(ht=0;ht<3;++ht)$t[ht]=de[ht];$t[ht]=1}else if(de.length===4){for(ht=0;ht<4;++ht)$t[ht]=de[ht];!this.hasAlpha&&de[3]<1&&(this.hasAlpha=!0)}}else $t[0]=$t[1]=$t[2]=0,$t[3]=1;else $t=[1,1,1,0];var ye=.5;Qt?Array.isArray(kt)?ye=X<kt.length?+kt[X]:12:kt?ye=+kt:this.useOrtho&&(ye=12):ye=0;var ve=0;Array.isArray(yt)?ve=X<yt.length?+yt[X]:0:yt&&(ve=+yt);var ie=Math.cos(ve),se=Math.sin(ve);for(at=tt[X],ht=0;ht<3;++ht)ct[ht]=Math.max(ct[ht],at[ht]),ot[ht]=Math.min(ot[ht],at[ht]);var ke=Y,Ae=Z;ke=0,Array.isArray(Y)?ke=X<Y.length?Y[X]:0:Y&&(ke=Y),Ae=0,Array.isArray(Z)?Ae=X<Z.length?Z[X]:0:Z&&(Ae=Z);var Ie=[ke*=ke>0?1-_t[0][0]:ke<0?1+_t[1][0]:1,Ae*=Ae>0?1-_t[0][1]:Ae<0?1+_t[1][1]:1],Te=Lt.cells||[],Vt=Lt.positions||[];for(ht=0;ht<Te.length;++ht)for(var Zt=Te[ht],Gt=0;Gt<3;++Gt){for(var Yt=0;Yt<3;++Yt)Dt[3*It+Yt]=at[Yt];for(Yt=0;Yt<4;++Yt)ut[4*It+Yt]=Ft[Yt];bt[It]=Ot;var ne=Vt[Zt[Gt]];Tt[2*It]=ye*(ie*ne[0]-se*ne[1]+Ie[0]),Tt[2*It+1]=ye*(se*ne[0]+ie*ne[1]+Ie[1]),It+=1}for(Te=Mt.edges,Vt=Mt.positions,ht=0;ht<Te.length;++ht)for(Zt=Te[ht],Gt=0;Gt<2;++Gt){for(Yt=0;Yt<3;++Yt)Dt[3*zt+Yt]=at[Yt];for(Yt=0;Yt<4;++Yt)ut[4*zt+Yt]=$t[Yt];bt[zt]=Ot,ne=Vt[Zt[Gt]],Tt[2*zt]=ye*(ie*ne[0]-se*ne[1]+Ie[0]),Tt[2*zt+1]=ye*(se*ne[0]+ie*ne[1]+Ie[1]),zt+=1}}}this.bounds=[ot,ct],this.points=tt,this.pointCount=tt.length,this.vertexCount=vt,this.lineVertexCount=xt,this.pointBuffer.update(Dt),this.colorBuffer.update(ut),this.glyphBuffer.update(Tt),this.idBuffer.update(bt),c.free(Dt),c.free(ut),c.free(Tt),c.free(bt)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(s,e,t){var n=t(6832);e.boxVertex=n([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),e.boxFragment=n([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(s,e,t){var n=t(5158),a=t(5827),i=t(1884);function c(u,f,d){this.plot=u,this.boxBuffer=f,this.boxShader=d,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}s.exports=function(u,f){var d=u.gl,w=new c(u,a(d,[0,0,0,1,1,0,1,1]),n(d,i.boxVertex,i.boxFragment));return w.update(f),u.addOverlay(w),w};var l=c.prototype;l.draw=function(){if(this.enabled){var u=this.plot,f=this.selectBox,d=this.borderWidth,w=(this.innerFill,this.innerColor),v=(this.outerFill,this.outerColor),p=this.borderColor,y=u.box,b=u.screenBox,x=u.dataBox,_=u.viewBox,g=u.pixelRatio,A=(f[0]-x[0])*(_[2]-_[0])/(x[2]-x[0])+_[0],M=(f[1]-x[1])*(_[3]-_[1])/(x[3]-x[1])+_[1],L=(f[2]-x[0])*(_[2]-_[0])/(x[2]-x[0])+_[0],E=(f[3]-x[1])*(_[3]-_[1])/(x[3]-x[1])+_[1];if(A=Math.max(A,_[0]),M=Math.max(M,_[1]),L=Math.min(L,_[2]),E=Math.min(E,_[3]),!(L<A||E<M)){y.bind();var S=b[2]-b[0],O=b[3]-b[1];if(this.outerFill&&(y.drawBox(0,0,S,M,v),y.drawBox(0,M,A,E,v),y.drawBox(0,E,S,O,v),y.drawBox(L,M,S,E,v)),this.innerFill&&y.drawBox(A,M,L,E,w),d>0){var P=d*g;y.drawBox(A-P,M-P,L+P,M+P,p),y.drawBox(A-P,E-P,L+P,E+P,p),y.drawBox(A-P,M-P,A+P,E+P,p),y.drawBox(L-P,M-P,L+P,E+P,p)}}}},l.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},l.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(s,e,t){s.exports=function(d,w){var v=w[0],p=w[1];return new u(d,n(d,v,p,{}),a.mallocUint8(v*p*4))};var n=t(4234),a=t(5306),i=t(5050),c=t(2288).nextPow2;function l(d,w,v,p,y){this.coord=[d,w],this.id=v,this.value=p,this.distance=y}function u(d,w,v){this.gl=d,this.fbo=w,this.buffer=v,this._readTimeout=null;var p=this;this._readCallback=function(){p.gl&&(w.bind(),d.readPixels(0,0,w.shape[0],w.shape[1],d.RGBA,d.UNSIGNED_BYTE,p.buffer),p._readTimeout=null)}}var f=u.prototype;Object.defineProperty(f,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(d){if(this.gl){this.fbo.shape=d;var w=this.fbo.shape[0],v=this.fbo.shape[1];if(v*w*4>this.buffer.length){a.free(this.buffer);for(var p=this.buffer=a.mallocUint8(c(v*w*4)),y=0;y<v*w*4;++y)p[y]=255}return d}}}),f.begin=function(){var d=this.gl;this.shape,d&&(this.fbo.bind(),d.clearColor(1,1,1,1),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT))},f.end=function(){var d=this.gl;d&&(d.bindFramebuffer(d.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},f.query=function(d,w,v){if(!this.gl)return null;var p=this.fbo.shape.slice();d|=0,w|=0,typeof v!="number"&&(v=1);var y=0|Math.min(Math.max(d-v,0),p[0]),b=0|Math.min(Math.max(d+v,0),p[0]),x=0|Math.min(Math.max(w-v,0),p[1]),_=0|Math.min(Math.max(w+v,0),p[1]);if(b<=y||_<=x)return null;var g=[b-y,_-x],A=i(this.buffer,[g[0],g[1],4],[4,4*p[0],1],4*(y+p[0]*x)),M=function(S,O,P){for(var U=1e8,R=-1,j=-1,B=S.shape[0],z=S.shape[1],G=0;G<B;G++)for(var V=0;V<z;V++){var et=S.get(G,V,0),J=S.get(G,V,1),X=S.get(G,V,2),Y=S.get(G,V,3);if(et<255||J<255||X<255||Y<255){var Z=O-G,tt=P-V,rt=Z*Z+tt*tt;rt<U&&(U=rt,R=G,j=V)}}return[R,j,U]}(A.hi(g[0],g[1],1),v,v),L=M[0],E=M[1];return L<0||Math.pow(this.radius,2)<M[2]?null:new l(L+y|0,E+x|0,A.get(L,E,0),[A.get(L,E,1),A.get(L,E,2),A.get(L,E,3)],Math.sqrt(M[2]))},f.dispose=function(){this.gl&&(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(s,e,t){var n=t(9016),a=t(4280),i=t(3984),c=t(1628),l=t(2631),u=t(9068);function f(v){this.gl=v,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var d=f.prototype;function w(v,p){return v.name<p.name?-1:1}d.bind=function(){var v;this.program||this._relink();var p=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(p>y)for(v=y;v<p;v++)this.gl.enableVertexAttribArray(v);else if(y>p)for(v=p;v<y;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=p,this.gl.useProgram(this.program)},d.dispose=function(){for(var v=this.gl.lastAttribCount,p=0;p<v;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},d.update=function(v,p,y,b){if(!p||arguments.length===1){var x=v;v=x.vertex,p=x.fragment,y=x.uniforms,b=x.attributes}var _=this,g=_.gl,A=_._vref;_._vref=c.shader(g,g.VERTEX_SHADER,v),A&&A.dispose(),_.vertShader=_._vref.shader;var M=this._fref;if(_._fref=c.shader(g,g.FRAGMENT_SHADER,p),M&&M.dispose(),_.fragShader=_._fref.shader,!y||!b){var L=g.createProgram();if(g.attachShader(L,_.fragShader),g.attachShader(L,_.vertShader),g.linkProgram(L),!g.getProgramParameter(L,g.LINK_STATUS)){var E=g.getProgramInfoLog(L);throw new u(E,"Error linking program:"+E)}y=y||l.uniforms(g,L),b=b||l.attributes(g,L),g.deleteProgram(L)}(b=b.slice()).sort(w);var S,O=[],P=[],U=[];for(S=0;S<b.length;++S){var R=b[S];if(R.type.indexOf("mat")>=0){for(var j=0|R.type.charAt(R.type.length-1),B=new Array(j),z=0;z<j;++z)B[z]=U.length,P.push(R.name+"["+z+"]"),typeof R.location=="number"?U.push(R.location+z):Array.isArray(R.location)&&R.location.length===j&&typeof R.location[z]=="number"?U.push(0|R.location[z]):U.push(-1);O.push({name:R.name,type:R.type,locations:B})}else O.push({name:R.name,type:R.type,locations:[U.length]}),P.push(R.name),typeof R.location=="number"?U.push(0|R.location):U.push(-1)}var G=0;for(S=0;S<U.length;++S)if(U[S]<0){for(;U.indexOf(G)>=0;)G+=1;U[S]=G}var V=new Array(y.length);function et(){_.program=c.program(g,_._vref,_._fref,P,U);for(var J=0;J<y.length;++J)V[J]=g.getUniformLocation(_.program,y[J].name)}et(),_._relink=et,_.types={uniforms:i(y),attributes:i(b)},_.attributes=a(g,_,O,U),Object.defineProperty(_,"uniforms",n(g,_,y,V))},s.exports=function(v,p,y,b,x){var _=new f(v);return _.update(p,y,b,x),_}},9068:function(s){function e(t,n,a){this.shortMessage=n||"",this.longMessage=a||"",this.rawError=t||"",this.message="gl-shader: "+(n||t||"")+(a?`
`+a:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,s.exports=e},4280:function(s,e,t){s.exports=function(f,d,w,v){for(var p={},y=0,b=w.length;y<b;++y){var x=w[y],_=x.name,g=x.type,A=x.locations;switch(g){case"bool":case"int":case"float":l(f,d,A[0],v,1,p,_);break;default:if(g.indexOf("vec")>=0){if((M=g.charCodeAt(g.length-1)-48)<2||M>4)throw new n("","Invalid data type for attribute "+_+": "+g);l(f,d,A[0],v,M,p,_)}else{if(!(g.indexOf("mat")>=0))throw new n("","Unknown data type for attribute "+_+": "+g);var M;if((M=g.charCodeAt(g.length-1)-48)<2||M>4)throw new n("","Invalid data type for attribute "+_+": "+g);u(f,d,A,v,M,p,_)}}}return p};var n=t(9068);function a(f,d,w,v,p,y){this._gl=f,this._wrapper=d,this._index=w,this._locations=v,this._dimension=p,this._constFunc=y}var i=a.prototype;i.pointer=function(f,d,w,v){var p=this,y=p._gl,b=p._locations[p._index];y.vertexAttribPointer(b,p._dimension,f||y.FLOAT,!!d,w||0,v||0),y.enableVertexAttribArray(b)},i.set=function(f,d,w,v){return this._constFunc(this._locations[this._index],f,d,w,v)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(f){return f!==this._locations[this._index]&&(this._locations[this._index]=0|f,this._wrapper.program=null),0|f}});var c=[function(f,d,w){return w.length===void 0?f.vertexAttrib1f(d,w):f.vertexAttrib1fv(d,w)},function(f,d,w,v){return w.length===void 0?f.vertexAttrib2f(d,w,v):f.vertexAttrib2fv(d,w)},function(f,d,w,v,p){return w.length===void 0?f.vertexAttrib3f(d,w,v,p):f.vertexAttrib3fv(d,w)},function(f,d,w,v,p,y){return w.length===void 0?f.vertexAttrib4f(d,w,v,p,y):f.vertexAttrib4fv(d,w)}];function l(f,d,w,v,p,y,b){var x=c[p],_=new a(f,d,w,v,p,x);Object.defineProperty(y,b,{set:function(g){return f.disableVertexAttribArray(v[w]),x(f,v[w],g),g},get:function(){return _},enumerable:!0})}function u(f,d,w,v,p,y,b){for(var x=new Array(p),_=new Array(p),g=0;g<p;++g)l(f,d,w[g],v,p,x,g),_[g]=x[g];Object.defineProperty(x,"location",{set:function(L){if(Array.isArray(L))for(var E=0;E<p;++E)_[E].location=L[E];else for(E=0;E<p;++E)_[E].location=L+E;return L},get:function(){for(var L=new Array(p),E=0;E<p;++E)L[E]=v[w[E]];return L},enumerable:!0}),x.pointer=function(L,E,S,O){L=L||f.FLOAT,E=!!E,S=S||p*p,O=O||0;for(var P=0;P<p;++P){var U=v[w[P]];f.vertexAttribPointer(U,p,L,E,S,O+P*p),f.enableVertexAttribArray(U)}};var A=new Array(p),M=f["vertexAttrib"+p+"fv"];Object.defineProperty(y,b,{set:function(L){for(var E=0;E<p;++E){var S=v[w[E]];if(f.disableVertexAttribArray(S),Array.isArray(L[0]))M.call(f,S,L[E]);else{for(var O=0;O<p;++O)A[O]=L[p*E+O];M.call(f,S,A)}}return L},get:function(){return x},enumerable:!0})}},9016:function(s,e,t){var n=t(3984),a=t(9068);function i(l){return function(){return l}}function c(l,u){for(var f=new Array(l),d=0;d<l;++d)f[d]=u;return f}s.exports=function(l,u,f,d){function w(x){return function(_){for(var g=v("",x),A=0;A<g.length;++A){var M=g[A],L=M[0],E=M[1];if(d[E]){var S=_;if(typeof L=="string"&&(L.indexOf(".")===0||L.indexOf("[")===0)){var O=L;if(L.indexOf(".")===0&&(O=L.slice(1)),O.indexOf("]")===O.length-1){var P=O.indexOf("["),U=O.slice(0,P),R=O.slice(P+1,O.length-1);S=U?_[U][R]:_[R]}else S=_[O]}var j,B=f[E].type;switch(B){case"bool":case"int":case"sampler2D":case"samplerCube":l.uniform1i(d[E],S);break;case"float":l.uniform1f(d[E],S);break;default:var z=B.indexOf("vec");if(!(0<=z&&z<=1&&B.length===4+z)){if(B.indexOf("mat")===0&&B.length===4){if((j=B.charCodeAt(B.length-1)-48)<2||j>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+B);l["uniformMatrix"+j+"fv"](d[E],!1,S);break}throw new a("","Unknown uniform data type for "+name+": "+B)}if((j=B.charCodeAt(B.length-1)-48)<2||j>4)throw new a("","Invalid data type");switch(B.charAt(0)){case"b":case"i":l["uniform"+j+"iv"](d[E],S);break;case"v":l["uniform"+j+"fv"](d[E],S);break;default:throw new a("","Unrecognized data type for vector "+name+": "+B)}}}}}}function v(x,_){if(typeof _!="object")return[[x,_]];var g=[];for(var A in _){var M=_[A],L=x;parseInt(A)+""===A?L+="["+A+"]":L+="."+A,typeof M=="object"?g.push.apply(g,v(L,M)):g.push([L,M])}return g}function p(x,_,g){if(typeof g=="object"){var A=y(g);Object.defineProperty(x,_,{get:i(A),set:w(g),enumerable:!0,configurable:!1})}else d[g]?Object.defineProperty(x,_,{get:(M=g,function(L,E,S){return L.getUniform(E.program,S[M])}),set:w(g),enumerable:!0,configurable:!1}):x[_]=function(L){switch(L){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var E=L.indexOf("vec");if(0<=E&&E<=1&&L.length===4+E){if((S=L.charCodeAt(L.length-1)-48)<2||S>4)throw new a("","Invalid data type");return L.charAt(0)==="b"?c(S,!1):c(S,0)}if(L.indexOf("mat")===0&&L.length===4){var S;if((S=L.charCodeAt(L.length-1)-48)<2||S>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+L);return c(S*S,0)}throw new a("","Unknown uniform data type for "+name+": "+L)}}(f[g].type);var M}function y(x){var _;if(Array.isArray(x)){_=new Array(x.length);for(var g=0;g<x.length;++g)p(_,g,x[g])}else for(var A in _={},x)p(_,A,x[A]);return _}var b=n(f,!0);return{get:i(y(b)),set:w(b),enumerable:!0,configurable:!0}}},3984:function(s){s.exports=function(e,t){for(var n={},a=0;a<e.length;++a)for(var i=e[a].name.split("."),c=n,l=0;l<i.length;++l){var u=i[l].split("[");if(u.length>1){u[0]in c||(c[u[0]]=[]),c=c[u[0]];for(var f=1;f<u.length;++f){var d=parseInt(u[f]);f<u.length-1||l<i.length-1?(d in c||(f<u.length-1?c[d]=[]:c[d]={}),c=c[d]):c[d]=t?a:e[a].type}}else l<i.length-1?(u[0]in c||(c[u[0]]={}),c=c[u[0]]):c[u[0]]=t?a:e[a].type}return n}},2631:function(s,e){e.uniforms=function(i,c){for(var l=i.getProgramParameter(c,i.ACTIVE_UNIFORMS),u=[],f=0;f<l;++f){var d=i.getActiveUniform(c,f);if(d){var w=a(i,d.type);if(d.size>1)for(var v=0;v<d.size;++v)u.push({name:d.name.replace("[0]","["+v+"]"),type:w});else u.push({name:d.name,type:w})}}return u},e.attributes=function(i,c){for(var l=i.getProgramParameter(c,i.ACTIVE_ATTRIBUTES),u=[],f=0;f<l;++f){var d=i.getActiveAttrib(c,f);d&&u.push({name:d.name,type:a(i,d.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function a(i,c){if(!n){var l=Object.keys(t);n={};for(var u=0;u<l.length;++u){var f=l[u];n[i[f]]=t[f]}}return n[c]}},1628:function(s,e,t){e.shader=function(w,v,p){return d(w).getShaderReference(v,p)},e.program=function(w,v,p,y,b){return d(w).getProgram(v,p,y,b)};var n=t(9068),a=t(3530),i=new(typeof WeakMap>"u"?t(4037):WeakMap),c=0;function l(w,v,p,y,b,x,_){this.id=w,this.src=v,this.type=p,this.shader=y,this.count=x,this.programs=[],this.cache=_}function u(w){this.gl=w,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(--this.count==0){for(var w=this.cache,v=w.gl,p=this.programs,y=0,b=p.length;y<b;++y){var x=w.programs[p[y]];x&&(delete w.programs[y],v.deleteProgram(x))}v.deleteShader(this.shader),delete w.shaders[this.type===v.FRAGMENT_SHADER|0][this.src]}};var f=u.prototype;function d(w){var v=i.get(w);return v||(v=new u(w),i.set(w,v)),v}f.getShaderReference=function(w,v){var p=this.gl,y=this.shaders[w===p.FRAGMENT_SHADER|0],b=y[v];if(b&&p.isShader(b.shader))b.count+=1;else{var x=function(_,g,A){var M=_.createShader(g);if(_.shaderSource(M,A),_.compileShader(M),!_.getShaderParameter(M,_.COMPILE_STATUS)){var L=_.getShaderInfoLog(M);try{var E=a(L,A,g)}catch(S){throw console.warn("Failed to format compiler error: "+S),new n(L,`Error compiling shader:
`+L)}throw new n(L,E.short,E.long)}return M}(p,w,v);b=y[v]=new l(c++,v,w,x,[],1,this)}return b},f.getProgram=function(w,v,p,y){var b=[w.id,v.id,p.join(":"),y.join(":")].join("@"),x=this.programs[b];return x&&this.gl.isProgram(x)||(this.programs[b]=x=function(_,g,A,M,L){var E=_.createProgram();_.attachShader(E,g),_.attachShader(E,A);for(var S=0;S<M.length;++S)_.bindAttribLocation(E,L[S],M[S]);if(_.linkProgram(E),!_.getProgramParameter(E,_.LINK_STATUS)){var O=_.getProgramInfoLog(E);throw new n(O,"Error linking program: "+O)}return E}(this.gl,w.shader,v.shader,p,y),w.programs.push(b),v.programs.push(b)),x}},3050:function(s){function e(n){this.plot=n,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}s.exports=function(n,a){var i=new e(n);return i.update(a),n.addOverlay(i),i};var t=e.prototype;t.update=function(n){n=n||{},this.enable=(n.enable||[!0,!0,!1,!1]).slice(),this.width=(n.width||[1,1,1,1]).slice(),this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(n.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var n=this.enable,a=this.width,i=this.color,c=this.center,l=this.plot,u=l.line,f=l.dataBox,d=l.viewBox;if(u.bind(),f[0]<=c[0]&&c[0]<=f[2]&&f[1]<=c[1]&&c[1]<=f[3]){var w=d[0]+(c[0]-f[0])/(f[2]-f[0])*(d[2]-d[0]),v=d[1]+(c[1]-f[1])/(f[3]-f[1])*(d[3]-d[1]);n[0]&&u.drawLine(w,v,d[0],v,a[0],i[0]),n[1]&&u.drawLine(w,v,w,d[1],a[1],i[1]),n[2]&&u.drawLine(w,v,d[2],v,a[2],i[2]),n[3]&&u.drawLine(w,v,w,d[3],a[3],i[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},3540:function(s,e,t){var n=t(6832),a=t(5158),i=n([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),c=n([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);s.exports=function(l){return a(l,i,c,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(s,e,t){var n=t(5827),a=t(2944),i=t(3540);s.exports=function(v,p){var y=[];function b(M,L,E,S,O,P){var U=[M,L,E,0,0,0,1];U[S+3]=1,U[S]=O,y.push.apply(y,U),U[6]=-1,y.push.apply(y,U),U[S]=P,y.push.apply(y,U),y.push.apply(y,U),U[6]=1,y.push.apply(y,U),U[S]=O,y.push.apply(y,U)}b(0,0,0,0,0,1),b(0,0,0,1,0,1),b(0,0,0,2,0,1),b(1,0,0,1,-1,1),b(1,0,0,2,-1,1),b(0,1,0,0,-1,1),b(0,1,0,2,-1,1),b(0,0,1,0,-1,1),b(0,0,1,1,-1,1);var x=n(v,y),_=a(v,[{type:v.FLOAT,buffer:x,size:3,offset:0,stride:28},{type:v.FLOAT,buffer:x,size:3,offset:12,stride:28},{type:v.FLOAT,buffer:x,size:1,offset:24,stride:28}]),g=i(v);g.attributes.position.location=0,g.attributes.color.location=1,g.attributes.weight.location=2;var A=new l(v,x,_,g);return A.update(p),A};var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(v,p,y,b){this.gl=v,this.buffer=p,this.vao=y,this.shader=b,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=l.prototype,f=[0,0,0],d=[0,0,0],w=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(v){},u.draw=function(v){var p=this.gl,y=this.vao,b=this.shader;y.bind(),b.bind();var x,_=v.model||c,g=v.view||c,A=v.projection||c;this.axes&&(x=this.axes.lastCubeProps.axis);for(var M=f,L=d,E=0;E<3;++E)x&&x[E]<0?(M[E]=this.bounds[0][E],L[E]=this.bounds[1][E]):(M[E]=this.bounds[1][E],L[E]=this.bounds[0][E]);for(w[0]=p.drawingBufferWidth,w[1]=p.drawingBufferHeight,b.uniforms.model=_,b.uniforms.view=g,b.uniforms.projection=A,b.uniforms.coordinates=[this.position,M,L],b.uniforms.colors=this.colors,b.uniforms.screenShape=w,E=0;E<3;++E)b.uniforms.lineWidth=this.lineWidth[E]*this.pixelRatio,this.enabled[E]&&(y.draw(p.TRIANGLES,6,6*E),this.drawSides[E]&&y.draw(p.TRIANGLES,12,18+12*E));y.unbind()},u.update=function(v){v&&("bounds"in v&&(this.bounds=v.bounds),"position"in v&&(this.position=v.position),"lineWidth"in v&&(this.lineWidth=v.lineWidth),"colors"in v&&(this.colors=v.colors),"enabled"in v&&(this.enabled=v.enabled),"drawSides"in v&&(this.drawSides=v.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(s,e,t){var n=t(6832),a=n([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=n([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),c=n([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);e.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},e.pickShader={vertex:c,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(s,e,t){var n=t(2858),a=t(4020),i=["xyz","xzy","yxz","yzx","zxy","zyx"],c=function(w,v){var p,y=w.length;for(p=0;p<y;p++){var b=w[p];if(b===v)return p;if(b>v)return p-1}return p},l=function(w,v,p){return w<v?v:w>p?p:w},u=function(w){var v=1/0;w.sort(function(x,_){return x-_});for(var p=w.length,y=1;y<p;y++){var b=Math.abs(w[y]-w[y-1]);b<v&&(v=b)}return v};s.exports=function(w,v){var p=w.startingPositions,y=w.maxLength||1e3,b=w.tubeSize||1,x=w.absoluteTubeSize,_=w.gridFill||"+x+y+z",g={};_.indexOf("-x")!==-1&&(g.reversedX=!0),_.indexOf("-y")!==-1&&(g.reversedY=!0),_.indexOf("-z")!==-1&&(g.reversedZ=!0),g.filled=i.indexOf(_.replace(/-/g,"").replace(/\+/g,""));var A=w.getVelocity||function(mt){return function(Ot,vt,xt){var st=vt.vectors,at=vt.meshgrid,ht=Ot[0],Lt=Ot[1],Mt=Ot[2],_t=at[0].length,St=at[1].length,Dt=at[2].length,ut=c(at[0],ht),Tt=c(at[1],Lt),bt=c(at[2],Mt),It=ut+1,zt=Tt+1,Ft=bt+1;if(ut=l(ut,0,_t-1),It=l(It,0,_t-1),Tt=l(Tt,0,St-1),zt=l(zt,0,St-1),bt=l(bt,0,Dt-1),Ft=l(Ft,0,Dt-1),ut<0||Tt<0||bt<0||It>_t-1||zt>St-1||Ft>Dt-1)return n.create();var $t,Wt,Xt,ae,Qt,de,ye=at[0][ut],ve=at[0][It],ie=at[1][Tt],se=at[1][zt],ke=at[2][bt],Ae=(ht-ye)/(ve-ye),Ie=(Lt-ie)/(se-ie),Te=(Mt-ke)/(at[2][Ft]-ke);switch(isFinite(Ae)||(Ae=.5),isFinite(Ie)||(Ie=.5),isFinite(Te)||(Te=.5),xt.reversedX&&(ut=_t-1-ut,It=_t-1-It),xt.reversedY&&(Tt=St-1-Tt,zt=St-1-zt),xt.reversedZ&&(bt=Dt-1-bt,Ft=Dt-1-Ft),xt.filled){case 5:Qt=bt,de=Ft,Xt=Tt*Dt,ae=zt*Dt,$t=ut*Dt*St,Wt=It*Dt*St;break;case 4:Qt=bt,de=Ft,$t=ut*Dt,Wt=It*Dt,Xt=Tt*Dt*_t,ae=zt*Dt*_t;break;case 3:Xt=Tt,ae=zt,Qt=bt*St,de=Ft*St,$t=ut*St*Dt,Wt=It*St*Dt;break;case 2:Xt=Tt,ae=zt,$t=ut*St,Wt=It*St,Qt=bt*St*_t,de=Ft*St*_t;break;case 1:$t=ut,Wt=It,Qt=bt*_t,de=Ft*_t,Xt=Tt*_t*Dt,ae=zt*_t*Dt;break;default:$t=ut,Wt=It,Xt=Tt*_t,ae=zt*_t,Qt=bt*_t*St,de=Ft*_t*St}var Vt=st[$t+Xt+Qt],Zt=st[$t+Xt+de],Gt=st[$t+ae+Qt],Yt=st[$t+ae+de],ne=st[Wt+Xt+Qt],re=st[Wt+Xt+de],Pt=st[Wt+ae+Qt],Nt=st[Wt+ae+de],ee=n.create(),te=n.create(),ge=n.create(),pe=n.create();n.lerp(ee,Vt,ne,Ae),n.lerp(te,Zt,re,Ae),n.lerp(ge,Gt,Pt,Ae),n.lerp(pe,Yt,Nt,Ae);var me=n.create(),ce=n.create();n.lerp(me,ee,ge,Ie),n.lerp(ce,te,pe,Ie);var we=n.create();return n.lerp(we,me,ce,Te),we}(mt,w,g)},M=w.getDivergence||function(mt,Ot){var vt=n.create(),xt=1e-4;n.add(vt,mt,[xt,0,0]);var st=A(vt);n.subtract(st,st,Ot),n.scale(st,st,1/xt),n.add(vt,mt,[0,xt,0]);var at=A(vt);n.subtract(at,at,Ot),n.scale(at,at,1/xt),n.add(vt,mt,[0,0,xt]);var ht=A(vt);return n.subtract(ht,ht,Ot),n.scale(ht,ht,1/xt),n.add(vt,st,at),n.add(vt,vt,ht),vt},L=[],E=v[0][0],S=v[0][1],O=v[0][2],P=v[1][0],U=v[1][1],R=v[1][2],j=function(mt){var Ot=mt[0],vt=mt[1],xt=mt[2];return!(Ot<E||Ot>P||vt<S||vt>U||xt<O||xt>R)},B=10*n.distance(v[0],v[1])/y,z=B*B,G=1,V=0,et=p.length;et>1&&(G=function(mt){for(var Ot=[],vt=[],xt=[],st={},at={},ht={},Lt=mt.length,Mt=0;Mt<Lt;Mt++){var _t=mt[Mt],St=_t[0],Dt=_t[1],ut=_t[2];st[St]||(Ot.push(St),st[St]=!0),at[Dt]||(vt.push(Dt),at[Dt]=!0),ht[ut]||(xt.push(ut),ht[ut]=!0)}var Tt=u(Ot),bt=u(vt),It=u(xt),zt=Math.min(Tt,bt,It);return isFinite(zt)?zt:1}(p));for(var J=0;J<et;J++){var X=n.create();n.copy(X,p[J]);var Y=[X],Z=[],tt=A(X),rt=X;Z.push(tt);var nt=[],ot=M(X,tt),ct=n.length(ot);isFinite(ct)&&ct>V&&(V=ct),nt.push(ct),L.push({points:Y,velocities:Z,divergences:nt});for(var pt=0;pt<100*y&&Y.length<y&&j(X);){pt++;var gt=n.clone(tt),kt=n.squaredLength(gt);if(kt===0)break;kt>z&&n.scale(gt,gt,B/Math.sqrt(kt)),n.add(gt,gt,X),tt=A(gt),n.squaredDistance(rt,gt)-z>-1e-4*z&&(Y.push(gt),rt=gt,Z.push(tt),ot=M(gt,tt),ct=n.length(ot),isFinite(ct)&&ct>V&&(V=ct),nt.push(ct)),X=gt}}var yt=function(mt,Ot,vt,xt){for(var st=0,at=0;at<mt.length;at++)for(var ht=mt[at].velocities,Lt=0;Lt<ht.length;Lt++)st=Math.max(st,n.length(ht[Lt]));var Mt=mt.map(function($t){return function(Wt,Xt,ae,Qt){for(var de=Wt.points,ye=Wt.velocities,ve=Wt.divergences,ie=[],se=[],ke=[],Ae=[],Ie=[],Te=[],Vt=0,Zt=0,Gt=a.create(),Yt=a.create(),ne=0;ne<de.length;ne++){var re=de[ne],Pt=ye[ne],Nt=ve[ne];Xt===0&&(Nt=.05*ae),Zt=n.length(Pt)/Qt,Gt=a.create(),n.copy(Gt,Pt),Gt[3]=Nt;for(var ee=0;ee<8;ee++)Ie[ee]=[re[0],re[1],re[2],ee];if(Ae.length>0)for(ee=0;ee<8;ee++){var te=(ee+1)%8;ie.push(Ae[ee],Ie[ee],Ie[te],Ie[te],Ae[te],Ae[ee]),ke.push(Yt,Gt,Gt,Gt,Yt,Yt),Te.push(Vt,Zt,Zt,Zt,Vt,Vt);var ge=ie.length;se.push([ge-6,ge-5,ge-4],[ge-3,ge-2,ge-1])}var pe=Ae;Ae=Ie,Ie=pe;var me=Yt;Yt=Gt,Gt=me;var ce=Vt;Vt=Zt,Zt=ce}return{positions:ie,cells:se,vectors:ke,vertexIntensity:Te}}($t,vt,xt,st)}),_t=[],St=[],Dt=[],ut=[];for(at=0;at<Mt.length;at++){var Tt=Mt[at],bt=_t.length;for(_t=_t.concat(Tt.positions),Dt=Dt.concat(Tt.vectors),ut=ut.concat(Tt.vertexIntensity),Lt=0;Lt<Tt.cells.length;Lt++){var It=Tt.cells[Lt],zt=[];St.push(zt);for(var Ft=0;Ft<It.length;Ft++)zt.push(It[Ft]+bt)}}return{positions:_t,cells:St,vectors:Dt,vertexIntensity:ut,colormap:Ot}}(L,w.colormap,V,G);return x?yt.tubeScale=x:(V===0&&(V=1),yt.tubeScale=.5*b*G/V),yt};var f=t(9578),d=t(1140).createMesh;s.exports.createTubeMesh=function(w,v){return d(w,v,{shaders:f,traceType:"streamtube"})}},9054:function(s,e,t){var n=t(5158),a=t(6832),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),c=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),l=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);e.createShader=function(f){var d=n(f,i,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d.attributes.normal.location=2,d},e.createPickShader=function(f){var d=n(f,i,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d.attributes.normal.location=2,d},e.createContourShader=function(f){var d=n(f,l,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d},e.createPickContourShader=function(f){var d=n(f,l,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d}},3754:function(s,e,t){s.exports=function(ot){var ct=ot.gl,pt=g(ct),gt=M(ct),kt=A(ct),yt=L(ct),mt=a(ct),Ot=i(ct,[{buffer:mt,size:4,stride:E,offset:0},{buffer:mt,size:3,stride:E,offset:16},{buffer:mt,size:3,stride:E,offset:28}]),vt=a(ct),xt=i(ct,[{buffer:vt,size:4,stride:20,offset:0},{buffer:vt,size:1,stride:20,offset:16}]),st=a(ct),at=i(ct,[{buffer:st,size:2,type:ct.FLOAT}]),ht=c(ct,1,R,ct.RGBA,ct.UNSIGNED_BYTE);ht.minFilter=ct.LINEAR,ht.magFilter=ct.LINEAR;var Lt=new j(ct,[0,0],[[0,0,0],[0,0,0]],pt,gt,mt,Ot,ht,kt,yt,vt,xt,st,at,[0,0,0]),Mt={levels:[[],[],[]]};for(var _t in ot)Mt[_t]=ot[_t];return Mt.colormap=Mt.colormap||"jet",Lt.update(Mt),Lt};var n=t(2288),a=t(5827),i=t(2944),c=t(8931),l=t(5306),u=t(9156),f=t(7498),d=t(7382),w=t(5050),v=t(4162),p=t(104),y=t(7437),b=t(5070),x=t(9144),_=t(9054),g=_.createShader,A=_.createContourShader,M=_.createPickShader,L=_.createPickContourShader,E=40,S=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],O=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function U(ot,ct,pt,gt,kt){this.position=ot,this.index=ct,this.uv=pt,this.level=gt,this.dataCoordinate=kt}(function(){for(var ot=0;ot<3;++ot){var ct=P[ot],pt=(ot+2)%3;ct[(ot+1)%3+0]=1,ct[pt+3]=1,ct[ot+6]=1}})();var R=256;function j(ot,ct,pt,gt,kt,yt,mt,Ot,vt,xt,st,at,ht,Lt,Mt){this.gl=ot,this.shape=ct,this.bounds=pt,this.objectOffset=Mt,this.intensityBounds=[],this._shader=gt,this._pickShader=kt,this._coordinateBuffer=yt,this._vao=mt,this._colorMap=Ot,this._contourShader=vt,this._contourPickShader=xt,this._contourBuffer=st,this._contourVAO=at,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new U([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ht,this._dynamicVAO=Lt,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[w(l.mallocFloat(1024),[0,0]),w(l.mallocFloat(1024),[0,0]),w(l.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var B=j.prototype;B.genColormap=function(ot,ct){var pt=!1,gt=d([u({colormap:ot,nshades:R,format:"rgba"}).map(function(kt,yt){var mt=ct?function(Ot,vt){if(!vt||!vt.length)return 1;for(var xt=0;xt<vt.length;++xt){if(vt.length<2)return 1;if(vt[xt][0]===Ot)return vt[xt][1];if(vt[xt][0]>Ot&&xt>0){var st=(vt[xt][0]-Ot)/(vt[xt][0]-vt[xt-1][0]);return vt[xt][1]*(1-st)+st*vt[xt-1][1]}}return 1}(yt/255,ct):kt[3];return mt<1&&(pt=!0),[kt[0],kt[1],kt[2],255*mt]})]);return f.divseq(gt,255),this.hasAlphaScale=pt,gt},B.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},B.isOpaque=function(){return!this.isTransparent()},B.pickSlots=1,B.setPickBase=function(ot){this.pickId=ot};var z=[0,0,0],G={showSurface:!1,showContour:!1,projections:[S.slice(),S.slice(),S.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function V(ot,ct){var pt,gt,kt,yt=ct.axes&&ct.axes.lastCubeProps.axis||z,mt=ct.showSurface,Ot=ct.showContour;for(pt=0;pt<3;++pt)for(mt=mt||ct.surfaceProject[pt],gt=0;gt<3;++gt)Ot=Ot||ct.contourProject[pt][gt];for(pt=0;pt<3;++pt){var vt=G.projections[pt];for(gt=0;gt<16;++gt)vt[gt]=0;for(gt=0;gt<4;++gt)vt[5*gt]=1;vt[5*pt]=0,vt[12+pt]=ct.axesBounds[+(yt[pt]>0)][pt],p(vt,ot.model,vt);var xt=G.clipBounds[pt];for(kt=0;kt<2;++kt)for(gt=0;gt<3;++gt)xt[kt][gt]=ot.clipBounds[kt][gt];xt[0][pt]=-1e8,xt[1][pt]=1e8}return G.showSurface=mt,G.showContour=Ot,G}var et={model:S,view:S,projection:S,inverseModel:S.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},J=S.slice(),X=[1,0,0,0,1,0,0,0,1];function Y(ot,ct){ot=ot||{};var pt=this.gl;pt.disable(pt.CULL_FACE),this._colorMap.bind(0);var gt=et;gt.model=ot.model||S,gt.view=ot.view||S,gt.projection=ot.projection||S,gt.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],gt.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],gt.objectOffset=this.objectOffset,gt.contourColor=this.contourColor[0],gt.inverseModel=y(gt.inverseModel,gt.model);for(var kt=0;kt<2;++kt)for(var yt=gt.clipBounds[kt],mt=0;mt<3;++mt)yt[mt]=Math.min(Math.max(this.clipBounds[kt][mt],-1e8),1e8);gt.kambient=this.ambientLight,gt.kdiffuse=this.diffuseLight,gt.kspecular=this.specularLight,gt.roughness=this.roughness,gt.fresnel=this.fresnel,gt.opacity=this.opacity,gt.height=0,gt.permutation=X,gt.vertexColor=this.vertexColor;var Ot=J;for(p(Ot,gt.view,gt.model),p(Ot,gt.projection,Ot),y(Ot,Ot),kt=0;kt<3;++kt)gt.eyePosition[kt]=Ot[12+kt]/Ot[15];var vt=Ot[15];for(kt=0;kt<3;++kt)vt+=this.lightPosition[kt]*Ot[4*kt+3];for(kt=0;kt<3;++kt){var xt=Ot[12+kt];for(mt=0;mt<3;++mt)xt+=Ot[4*mt+kt]*this.lightPosition[mt];gt.lightPosition[kt]=xt/vt}var st=V(gt,this);if(st.showSurface){for(this._shader.bind(),this._shader.uniforms=gt,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(pt.TRIANGLES,this._vertexCount),kt=0;kt<3;++kt)this.surfaceProject[kt]&&this.vertexCount&&(this._shader.uniforms.model=st.projections[kt],this._shader.uniforms.clipBounds=st.clipBounds[kt],this._vao.draw(pt.TRIANGLES,this._vertexCount));this._vao.unbind()}if(st.showContour){var at=this._contourShader;gt.kambient=1,gt.kdiffuse=0,gt.kspecular=0,gt.opacity=1,at.bind(),at.uniforms=gt;var ht=this._contourVAO;for(ht.bind(),kt=0;kt<3;++kt)for(at.uniforms.permutation=P[kt],pt.lineWidth(this.contourWidth[kt]*this.pixelRatio),mt=0;mt<this.contourLevels[kt].length;++mt)mt===this.highlightLevel[kt]?(at.uniforms.contourColor=this.highlightColor[kt],at.uniforms.contourTint=this.highlightTint[kt]):mt!==0&&mt-1!==this.highlightLevel[kt]||(at.uniforms.contourColor=this.contourColor[kt],at.uniforms.contourTint=this.contourTint[kt]),this._contourCounts[kt][mt]&&(at.uniforms.height=this.contourLevels[kt][mt],ht.draw(pt.LINES,this._contourCounts[kt][mt],this._contourOffsets[kt][mt]));for(kt=0;kt<3;++kt)for(at.uniforms.model=st.projections[kt],at.uniforms.clipBounds=st.clipBounds[kt],mt=0;mt<3;++mt)if(this.contourProject[kt][mt]){at.uniforms.permutation=P[mt],pt.lineWidth(this.contourWidth[mt]*this.pixelRatio);for(var Lt=0;Lt<this.contourLevels[mt].length;++Lt)Lt===this.highlightLevel[mt]?(at.uniforms.contourColor=this.highlightColor[mt],at.uniforms.contourTint=this.highlightTint[mt]):Lt!==0&&Lt-1!==this.highlightLevel[mt]||(at.uniforms.contourColor=this.contourColor[mt],at.uniforms.contourTint=this.contourTint[mt]),this._contourCounts[mt][Lt]&&(at.uniforms.height=this.contourLevels[mt][Lt],ht.draw(pt.LINES,this._contourCounts[mt][Lt],this._contourOffsets[mt][Lt]))}for(ht.unbind(),(ht=this._dynamicVAO).bind(),kt=0;kt<3;++kt)if(this._dynamicCounts[kt]!==0)for(at.uniforms.model=gt.model,at.uniforms.clipBounds=gt.clipBounds,at.uniforms.permutation=P[kt],pt.lineWidth(this.dynamicWidth[kt]*this.pixelRatio),at.uniforms.contourColor=this.dynamicColor[kt],at.uniforms.contourTint=this.dynamicTint[kt],at.uniforms.height=this.dynamicLevel[kt],ht.draw(pt.LINES,this._dynamicCounts[kt],this._dynamicOffsets[kt]),mt=0;mt<3;++mt)this.contourProject[mt][kt]&&(at.uniforms.model=st.projections[mt],at.uniforms.clipBounds=st.clipBounds[mt],ht.draw(pt.LINES,this._dynamicCounts[kt],this._dynamicOffsets[kt]));ht.unbind()}}B.draw=function(ot){return Y.call(this,ot,!1)},B.drawTransparent=function(ot){return Y.call(this,ot,!0)};var Z={model:S,view:S,projection:S,inverseModel:S,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function tt(ot,ct){return Array.isArray(ot)?[ct(ot[0]),ct(ot[1]),ct(ot[2])]:[ct(ot),ct(ot),ct(ot)]}function rt(ot){return Array.isArray(ot)?ot.length===3?[ot[0],ot[1],ot[2],1]:[ot[0],ot[1],ot[2],ot[3]]:[0,0,0,1]}function nt(ot){if(Array.isArray(ot)){if(Array.isArray(ot))return[rt(ot[0]),rt(ot[1]),rt(ot[2])];var ct=rt(ot);return[ct.slice(),ct.slice(),ct.slice()]}}B.drawPick=function(ot){ot=ot||{};var ct=this.gl;ct.disable(ct.CULL_FACE);var pt=Z;pt.model=ot.model||S,pt.view=ot.view||S,pt.projection=ot.projection||S,pt.shape=this._field[2].shape,pt.pickId=this.pickId/255,pt.lowerBound=this.bounds[0],pt.upperBound=this.bounds[1],pt.objectOffset=this.objectOffset,pt.permutation=X;for(var gt=0;gt<2;++gt)for(var kt=pt.clipBounds[gt],yt=0;yt<3;++yt)kt[yt]=Math.min(Math.max(this.clipBounds[gt][yt],-1e8),1e8);var mt=V(pt,this);if(mt.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=pt,this._vao.bind(),this._vao.draw(ct.TRIANGLES,this._vertexCount),gt=0;gt<3;++gt)this.surfaceProject[gt]&&(this._pickShader.uniforms.model=mt.projections[gt],this._pickShader.uniforms.clipBounds=mt.clipBounds[gt],this._vao.draw(ct.TRIANGLES,this._vertexCount));this._vao.unbind()}if(mt.showContour){var Ot=this._contourPickShader;Ot.bind(),Ot.uniforms=pt;var vt=this._contourVAO;for(vt.bind(),yt=0;yt<3;++yt)for(ct.lineWidth(this.contourWidth[yt]*this.pixelRatio),Ot.uniforms.permutation=P[yt],gt=0;gt<this.contourLevels[yt].length;++gt)this._contourCounts[yt][gt]&&(Ot.uniforms.height=this.contourLevels[yt][gt],vt.draw(ct.LINES,this._contourCounts[yt][gt],this._contourOffsets[yt][gt]));for(gt=0;gt<3;++gt)for(Ot.uniforms.model=mt.projections[gt],Ot.uniforms.clipBounds=mt.clipBounds[gt],yt=0;yt<3;++yt)if(this.contourProject[gt][yt]){Ot.uniforms.permutation=P[yt],ct.lineWidth(this.contourWidth[yt]*this.pixelRatio);for(var xt=0;xt<this.contourLevels[yt].length;++xt)this._contourCounts[yt][xt]&&(Ot.uniforms.height=this.contourLevels[yt][xt],vt.draw(ct.LINES,this._contourCounts[yt][xt],this._contourOffsets[yt][xt]))}vt.unbind()}},B.pick=function(ot){if(!ot||ot.id!==this.pickId)return null;var ct=this._field[2].shape,pt=this._pickResult,gt=ct[0]*(ot.value[0]+(ot.value[2]>>4)/16)/255,kt=Math.floor(gt),yt=gt-kt,mt=ct[1]*(ot.value[1]+(15&ot.value[2])/16)/255,Ot=Math.floor(mt),vt=mt-Ot;kt+=1,Ot+=1;var xt=pt.position;xt[0]=xt[1]=xt[2]=0;for(var st=0;st<2;++st)for(var at=st?yt:1-yt,ht=0;ht<2;++ht)for(var Lt=kt+st,Mt=Ot+ht,_t=at*(ht?vt:1-vt),St=0;St<3;++St)xt[St]+=this._field[St].get(Lt,Mt)*_t;for(var Dt=this._pickResult.level,ut=0;ut<3;++ut)if(Dt[ut]=b.le(this.contourLevels[ut],xt[ut]),Dt[ut]<0)this.contourLevels[ut].length>0&&(Dt[ut]=0);else if(Dt[ut]<this.contourLevels[ut].length-1){var Tt=this.contourLevels[ut][Dt[ut]],bt=this.contourLevels[ut][Dt[ut]+1];Math.abs(Tt-xt[ut])>Math.abs(bt-xt[ut])&&(Dt[ut]+=1)}for(pt.index[0]=yt<.5?kt:kt+1,pt.index[1]=vt<.5?Ot:Ot+1,pt.uv[0]=gt/ct[0],pt.uv[1]=mt/ct[1],St=0;St<3;++St)pt.dataCoordinate[St]=this._field[St].get(pt.index[0],pt.index[1]);return pt},B.padField=function(ot,ct){var pt=ct.shape.slice(),gt=ot.shape.slice();f.assign(ot.lo(1,1).hi(pt[0],pt[1]),ct),f.assign(ot.lo(1).hi(pt[0],1),ct.hi(pt[0],1)),f.assign(ot.lo(1,gt[1]-1).hi(pt[0],1),ct.lo(0,pt[1]-1).hi(pt[0],1)),f.assign(ot.lo(0,1).hi(1,pt[1]),ct.hi(1)),f.assign(ot.lo(gt[0]-1,1).hi(1,pt[1]),ct.lo(pt[0]-1)),ot.set(0,0,ct.get(0,0)),ot.set(0,gt[1]-1,ct.get(0,pt[1]-1)),ot.set(gt[0]-1,0,ct.get(pt[0]-1,0)),ot.set(gt[0]-1,gt[1]-1,ct.get(pt[0]-1,pt[1]-1))},B.update=function(ot){ot=ot||{},this.objectOffset=ot.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ot&&(this.contourWidth=tt(ot.contourWidth,Number)),"showContour"in ot&&(this.showContour=tt(ot.showContour,Boolean)),"showSurface"in ot&&(this.showSurface=!!ot.showSurface),"contourTint"in ot&&(this.contourTint=tt(ot.contourTint,Boolean)),"contourColor"in ot&&(this.contourColor=nt(ot.contourColor)),"contourProject"in ot&&(this.contourProject=tt(ot.contourProject,function(ir){return tt(ir,Boolean)})),"surfaceProject"in ot&&(this.surfaceProject=ot.surfaceProject),"dynamicColor"in ot&&(this.dynamicColor=nt(ot.dynamicColor)),"dynamicTint"in ot&&(this.dynamicTint=tt(ot.dynamicTint,Number)),"dynamicWidth"in ot&&(this.dynamicWidth=tt(ot.dynamicWidth,Number)),"opacity"in ot&&(this.opacity=ot.opacity),"opacityscale"in ot&&(this.opacityscale=ot.opacityscale),"colorBounds"in ot&&(this.colorBounds=ot.colorBounds),"vertexColor"in ot&&(this.vertexColor=ot.vertexColor?1:0),"colormap"in ot&&this._colorMap.setPixels(this.genColormap(ot.colormap,this.opacityscale));var ct=ot.field||ot.coords&&ot.coords[2]||null,pt=!1;if(ct||(ct=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ot||"coords"in ot){var gt=(ct.shape[0]+2)*(ct.shape[1]+2);gt>this._field[2].data.length&&(l.freeFloat(this._field[2].data),this._field[2].data=l.mallocFloat(n.nextPow2(gt))),this._field[2]=w(this._field[2].data,[ct.shape[0]+2,ct.shape[1]+2]),this.padField(this._field[2],ct),this.shape=ct.shape.slice();for(var kt=this.shape,yt=0;yt<2;++yt)this._field[2].size>this._field[yt].data.length&&(l.freeFloat(this._field[yt].data),this._field[yt].data=l.mallocFloat(this._field[2].size)),this._field[yt]=w(this._field[yt].data,[kt[0]+2,kt[1]+2]);if(ot.coords){var mt=ot.coords;if(!Array.isArray(mt)||mt.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(yt=0;yt<2;++yt){var Ot=mt[yt];for(ht=0;ht<2;++ht)if(Ot.shape[ht]!==kt[ht])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[yt],Ot)}}else if(ot.ticks){var vt=ot.ticks;if(!Array.isArray(vt)||vt.length!==2)throw new Error("gl-surface: invalid ticks");for(yt=0;yt<2;++yt){var xt=vt[yt];if((Array.isArray(xt)||xt.length)&&(xt=w(xt)),xt.shape[0]!==kt[yt])throw new Error("gl-surface: invalid tick length");var st=w(xt.data,kt);st.stride[yt]=xt.stride[0],st.stride[1^yt]=0,this.padField(this._field[yt],st)}}else{for(yt=0;yt<2;++yt){var at=[0,0];at[yt]=1,this._field[yt]=w(this._field[yt].data,[kt[0]+2,kt[1]+2],at,0)}this._field[0].set(0,0,0);for(var ht=0;ht<kt[0];++ht)this._field[0].set(ht+1,0,ht);for(this._field[0].set(kt[0]+1,0,kt[0]-1),this._field[1].set(0,0,0),ht=0;ht<kt[1];++ht)this._field[1].set(0,ht+1,ht);this._field[1].set(0,kt[1]+1,kt[1]-1)}var Lt=this._field,Mt=w(l.mallocFloat(3*Lt[2].size*2),[3,kt[0]+2,kt[1]+2,2]);for(yt=0;yt<3;++yt)x(Mt.pick(yt),Lt[yt],"mirror");var _t=w(l.mallocFloat(3*Lt[2].size),[kt[0]+2,kt[1]+2,3]);for(yt=0;yt<kt[0]+2;++yt)for(ht=0;ht<kt[1]+2;++ht){var St=Mt.get(0,yt,ht,0),Dt=Mt.get(0,yt,ht,1),ut=Mt.get(1,yt,ht,0),Tt=Mt.get(1,yt,ht,1),bt=Mt.get(2,yt,ht,0),It=Mt.get(2,yt,ht,1),zt=ut*It-Tt*bt,Ft=bt*Dt-It*St,$t=St*Tt-Dt*ut,Wt=Math.sqrt(zt*zt+Ft*Ft+$t*$t);Wt<1e-8?(Wt=Math.max(Math.abs(zt),Math.abs(Ft),Math.abs($t)))<1e-8?($t=1,Ft=zt=0,Wt=1):Wt=1/Wt:Wt=1/Math.sqrt(Wt),_t.set(yt,ht,0,zt*Wt),_t.set(yt,ht,1,Ft*Wt),_t.set(yt,ht,2,$t*Wt)}l.free(Mt.data);var Xt=[1/0,1/0,1/0],ae=[-1/0,-1/0,-1/0],Qt=1/0,de=-1/0,ye=(kt[0]-1)*(kt[1]-1)*6,ve=l.mallocFloat(n.nextPow2(10*ye)),ie=0,se=0;for(yt=0;yt<kt[0]-1;++yt)t:for(ht=0;ht<kt[1]-1;++ht){for(var ke=0;ke<2;++ke)for(var Ae=0;Ae<2;++Ae)for(var Ie=0;Ie<3;++Ie){var Te=this._field[Ie].get(1+yt+ke,1+ht+Ae);if(isNaN(Te)||!isFinite(Te))continue t}for(Ie=0;Ie<6;++Ie){var Vt=yt+O[Ie][0],Zt=ht+O[Ie][1],Gt=this._field[0].get(Vt+1,Zt+1),Yt=this._field[1].get(Vt+1,Zt+1);Te=this._field[2].get(Vt+1,Zt+1),zt=_t.get(Vt+1,Zt+1,0),Ft=_t.get(Vt+1,Zt+1,1),$t=_t.get(Vt+1,Zt+1,2),ot.intensity&&(ne=ot.intensity.get(Vt,Zt));var ne=ot.intensity?ot.intensity.get(Vt,Zt):Te+this.objectOffset[2];ve[ie++]=Vt,ve[ie++]=Zt,ve[ie++]=Gt,ve[ie++]=Yt,ve[ie++]=Te,ve[ie++]=0,ve[ie++]=ne,ve[ie++]=zt,ve[ie++]=Ft,ve[ie++]=$t,Xt[0]=Math.min(Xt[0],Gt+this.objectOffset[0]),Xt[1]=Math.min(Xt[1],Yt+this.objectOffset[1]),Xt[2]=Math.min(Xt[2],Te+this.objectOffset[2]),Qt=Math.min(Qt,ne),ae[0]=Math.max(ae[0],Gt+this.objectOffset[0]),ae[1]=Math.max(ae[1],Yt+this.objectOffset[1]),ae[2]=Math.max(ae[2],Te+this.objectOffset[2]),de=Math.max(de,ne),se+=1}}for(ot.intensityBounds&&(Qt=+ot.intensityBounds[0],de=+ot.intensityBounds[1]),yt=6;yt<ie;yt+=10)ve[yt]=(ve[yt]-Qt)/(de-Qt);this._vertexCount=se,this._coordinateBuffer.update(ve.subarray(0,ie)),l.freeFloat(ve),l.free(_t.data),this.bounds=[Xt,ae],this.intensity=ot.intensity||this._field[2],this.intensityBounds[0]===Qt&&this.intensityBounds[1]===de||(pt=!0),this.intensityBounds=[Qt,de]}if("levels"in ot){var re=ot.levels;for(re=Array.isArray(re[0])?re.slice():[[],[],re],yt=0;yt<3;++yt)re[yt]=re[yt].slice(),re[yt].sort(function(ir,Ke){return ir-Ke});for(yt=0;yt<3;++yt)for(ht=0;ht<re[yt].length;++ht)re[yt][ht]-=this.objectOffset[yt];t:for(yt=0;yt<3;++yt){if(re[yt].length!==this.contourLevels[yt].length){pt=!0;break}for(ht=0;ht<re[yt].length;++ht)if(re[yt][ht]!==this.contourLevels[yt][ht]){pt=!0;break t}}this.contourLevels=re}if(pt){Lt=this._field,kt=this.shape;for(var Pt=[],Nt=0;Nt<3;++Nt){var ee=this.contourLevels[Nt],te=[],ge=[],pe=[0,0,0];for(yt=0;yt<ee.length;++yt){var me=v(this._field[Nt],ee[yt]);te.push(Pt.length/5|0),se=0;t:for(ht=0;ht<me.cells.length;++ht){var ce=me.cells[ht];for(Ie=0;Ie<2;++Ie){var we=me.positions[ce[Ie]],ue=we[0],he=0|Math.floor(ue),be=ue-he,Pe=we[1],De=0|Math.floor(Pe),Ue=Pe-De,tr=!1;e:for(var Ge=0;Ge<3;++Ge){pe[Ge]=0;var Ze=(Nt+Ge+1)%3;for(ke=0;ke<2;++ke){var We=ke?be:1-be;for(Vt=0|Math.min(Math.max(he+ke,0),kt[0]),Ae=0;Ae<2;++Ae){var pr=Ae?Ue:1-Ue;if(Zt=0|Math.min(Math.max(De+Ae,0),kt[1]),Te=Ge<2?this._field[Ze].get(Vt,Zt):(this.intensity.get(Vt,Zt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Te)||isNaN(Te)){tr=!0;break e}var xr=We*pr;pe[Ge]+=xr*Te}}}if(tr){if(Ie>0){for(var sr=0;sr<5;++sr)Pt.pop();se-=1}continue t}Pt.push(pe[0],pe[1],we[0],we[1],pe[2]),se+=1}}ge.push(se)}this._contourOffsets[Nt]=te,this._contourCounts[Nt]=ge}var $e=l.mallocFloat(Pt.length);for(yt=0;yt<Pt.length;++yt)$e[yt]=Pt[yt];this._contourBuffer.update($e),l.freeFloat($e)}},B.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ot=0;ot<3;++ot)l.freeFloat(this._field[ot].data)},B.highlight=function(ot){var ct,pt;if(!ot)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ct=0;ct<3;++ct)this.enableHighlight[ct]?this.highlightLevel[ct]=ot.level[ct]:this.highlightLevel[ct]=-1;for(pt=this.snapToData?ot.dataCoordinate:ot.position,ct=0;ct<3;++ct)pt[ct]-=this.objectOffset[ct];if(this.enableDynamic[0]&&pt[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&pt[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&pt[2]!==this.dynamicLevel[2]){for(var gt=0,kt=this.shape,yt=l.mallocFloat(12*kt[0]*kt[1]),mt=0;mt<3;++mt)if(this.enableDynamic[mt]){this.dynamicLevel[mt]=pt[mt];var Ot=(mt+1)%3,vt=(mt+2)%3,xt=this._field[mt],st=this._field[Ot],at=this._field[vt],ht=v(xt,pt[mt]),Lt=ht.cells,Mt=ht.positions;for(this._dynamicOffsets[mt]=gt,ct=0;ct<Lt.length;++ct)for(var _t=Lt[ct],St=0;St<2;++St){var Dt=Mt[_t[St]],ut=+Dt[0],Tt=0|ut,bt=0|Math.min(Tt+1,kt[0]),It=ut-Tt,zt=1-It,Ft=+Dt[1],$t=0|Ft,Wt=0|Math.min($t+1,kt[1]),Xt=Ft-$t,ae=1-Xt,Qt=zt*ae,de=zt*Xt,ye=It*ae,ve=It*Xt,ie=Qt*st.get(Tt,$t)+de*st.get(Tt,Wt)+ye*st.get(bt,$t)+ve*st.get(bt,Wt),se=Qt*at.get(Tt,$t)+de*at.get(Tt,Wt)+ye*at.get(bt,$t)+ve*at.get(bt,Wt);if(isNaN(ie)||isNaN(se)){St&&(gt-=1);break}yt[2*gt+0]=ie,yt[2*gt+1]=se,gt+=1}this._dynamicCounts[mt]=gt-this._dynamicOffsets[mt]}else this.dynamicLevel[mt]=NaN,this._dynamicCounts[mt]=0;this._dynamicBuffer.update(yt.subarray(0,2*gt)),l.freeFloat(yt)}}},8931:function(s,e,t){var n=t(5050),a=t(7498),i=t(5306);s.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(c||function(M){c=[M.LINEAR,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_NEAREST],l=[M.NEAREST,M.LINEAR,M.NEAREST_MIPMAP_NEAREST,M.NEAREST_MIPMAP_LINEAR,M.LINEAR_MIPMAP_NEAREST,M.LINEAR_MIPMAP_LINEAR],u=[M.REPEAT,M.CLAMP_TO_EDGE,M.MIRRORED_REPEAT]}(_),typeof arguments[1]=="number")return x(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return x(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var g=arguments[1],A=f(g)?g:g.raw;if(A)return function(M,L,E,S,O,P){var U=b(M);return M.texImage2D(M.TEXTURE_2D,0,O,O,P,L),new v(M,U,E,S,O,P)}(_,A,0|g.width,0|g.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(g.shape&&g.data&&g.stride)return function(M,L){var E=L.dtype,S=L.shape.slice(),O=M.getParameter(M.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>O||S[1]<0||S[1]>O)throw new Error("gl-texture2d: Invalid texture size");var P=y(S,L.stride.slice()),U=0;E==="float32"?U=M.FLOAT:E==="float64"?(U=M.FLOAT,P=!1,E="float32"):E==="uint8"?U=M.UNSIGNED_BYTE:(U=M.UNSIGNED_BYTE,P=!1,E="uint8");var R,j,B=0;if(S.length===2)B=M.LUMINANCE,S=[S[0],S[1],1],L=n(L.data,S,[L.stride[0],L.stride[1],1],L.offset);else{if(S.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(S[2]===1)B=M.ALPHA;else if(S[2]===2)B=M.LUMINANCE_ALPHA;else if(S[2]===3)B=M.RGB;else{if(S[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");B=M.RGBA}}U!==M.FLOAT||M.getExtension("OES_texture_float")||(U=M.UNSIGNED_BYTE,P=!1);var z=L.size;if(P)R=L.offset===0&&L.data.length===z?L.data:L.data.subarray(L.offset,L.offset+z);else{var G=[S[2],S[2]*S[0],1];j=i.malloc(z,E);var V=n(j,S,G,0);E!=="float32"&&E!=="float64"||U!==M.UNSIGNED_BYTE?a.assign(V,L):d(V,L),R=j.subarray(0,z)}var et=b(M);return M.texImage2D(M.TEXTURE_2D,0,B,S[0],S[1],0,B,U,R),P||i.free(j),new v(M,et,S[0],S[1],B,U)}(_,g)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var c=null,l=null,u=null;function f(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var d=function(_,g){a.muls(_,g,255)};function w(_,g,A){var M=_.gl,L=M.getParameter(M.MAX_TEXTURE_SIZE);if(g<0||g>L||A<0||A>L)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[g,A],_.bind(),M.texImage2D(M.TEXTURE_2D,0,_.format,g,A,0,_.format,_.type,null),_._mipLevels=[0],_}function v(_,g,A,M,L,E){this.gl=_,this.handle=g,this.format=L,this.type=E,this._shape=[A,M],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var S=this,O=[this._wrapS,this._wrapT];Object.defineProperties(O,[{get:function(){return S._wrapS},set:function(U){return S.wrapS=U}},{get:function(){return S._wrapT},set:function(U){return S.wrapT=U}}]),this._wrapVector=O;var P=[this._shape[0],this._shape[1]];Object.defineProperties(P,[{get:function(){return S._shape[0]},set:function(U){return S.width=U}},{get:function(){return S._shape[1]},set:function(U){return S.height=U}}]),this._shapeVector=P}var p=v.prototype;function y(_,g){return _.length===3?g[2]===1&&g[1]===_[0]*_[2]&&g[0]===_[2]:g[0]===1&&g[1]===_[0]}function b(_){var g=_.createTexture();return _.bindTexture(_.TEXTURE_2D,g),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),g}function x(_,g,A,M,L){var E=_.getParameter(_.MAX_TEXTURE_SIZE);if(g<0||g>E||A<0||A>E)throw new Error("gl-texture2d: Invalid texture shape");if(L===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var S=b(_);return _.texImage2D(_.TEXTURE_2D,0,M,g,A,0,M,L,null),new v(_,S,g,A,M,L)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var g=this.gl;if(this.type===g.FLOAT&&c.indexOf(_)>=0&&(g.getExtension("OES_texture_float_linear")||(_=g.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var g=this.gl;if(this.type===g.FLOAT&&c.indexOf(_)>=0&&(g.getExtension("OES_texture_float_linear")||(_=g.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var g=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),g!==this._anisoSamples){var A=this.gl.getExtension("EXT_texture_filter_anisotropic");A&&this.gl.texParameterf(this.gl.TEXTURE_2D,A.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var g=0;g<2;++g)if(u.indexOf(_[g])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var A=this.gl;return this.bind(),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,this._wrapS),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return w(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return w(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,w(this,this._shape[0],_),_}}}),p.bind=function(_){var g=this.gl;return _!==void 0&&g.activeTexture(g.TEXTURE0+(0|_)),g.bindTexture(g.TEXTURE_2D,this.handle),_!==void 0?0|_:g.getParameter(g.ACTIVE_TEXTURE)-g.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),g=0;_>0;++g,_>>>=1)this._mipLevels.indexOf(g)<0&&this._mipLevels.push(g)},p.setPixels=function(_,g,A,M){var L=this.gl;this.bind(),Array.isArray(g)?(M=A,A=0|g[1],g=0|g[0]):(g=g||0,A=A||0),M=M||0;var E=f(_)?_:_.raw;if(E)this._mipLevels.indexOf(M)<0?(L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,this.type,E),this._mipLevels.push(M)):L.texSubImage2D(L.TEXTURE_2D,M,g,A,this.format,this.type,E);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||g+_.shape[1]>this._shape[1]>>>M||A+_.shape[0]>this._shape[0]>>>M||g<0||A<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(S,O,P,U,R,j,B,z){var G=z.dtype,V=z.shape.slice();if(V.length<2||V.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var et=0,J=0,X=y(V,z.stride.slice());if(G==="float32"?et=S.FLOAT:G==="float64"?(et=S.FLOAT,X=!1,G="float32"):G==="uint8"?et=S.UNSIGNED_BYTE:(et=S.UNSIGNED_BYTE,X=!1,G="uint8"),V.length===2)J=S.LUMINANCE,V=[V[0],V[1],1],z=n(z.data,V,[z.stride[0],z.stride[1],1],z.offset);else{if(V.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(V[2]===1)J=S.ALPHA;else if(V[2]===2)J=S.LUMINANCE_ALPHA;else if(V[2]===3)J=S.RGB;else{if(V[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");J=S.RGBA}V[2]}if(J!==S.LUMINANCE&&J!==S.ALPHA||R!==S.LUMINANCE&&R!==S.ALPHA||(J=R),J!==R)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Y=z.size,Z=B.indexOf(U)<0;if(Z&&B.push(U),et===j&&X)z.offset===0&&z.data.length===Y?Z?S.texImage2D(S.TEXTURE_2D,U,R,V[0],V[1],0,R,j,z.data):S.texSubImage2D(S.TEXTURE_2D,U,O,P,V[0],V[1],R,j,z.data):Z?S.texImage2D(S.TEXTURE_2D,U,R,V[0],V[1],0,R,j,z.data.subarray(z.offset,z.offset+Y)):S.texSubImage2D(S.TEXTURE_2D,U,O,P,V[0],V[1],R,j,z.data.subarray(z.offset,z.offset+Y));else{var tt;tt=j===S.FLOAT?i.mallocFloat32(Y):i.mallocUint8(Y);var rt=n(tt,V,[V[2],V[2]*V[0],1]);et===S.FLOAT&&j===S.UNSIGNED_BYTE?d(rt,z):a.assign(rt,z),Z?S.texImage2D(S.TEXTURE_2D,U,R,V[0],V[1],0,R,j,tt.subarray(0,Y)):S.texSubImage2D(S.TEXTURE_2D,U,O,P,V[0],V[1],R,j,tt.subarray(0,Y)),j===S.FLOAT?i.freeFloat32(tt):i.freeUint8(tt)}})(L,g,A,M,this.format,this.type,this._mipLevels,_)}}},3056:function(s){s.exports=function(e,t,n){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var a=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(n){if(n.length>a)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<n.length;++i){var c=n[i];if(c.buffer){var l=c.buffer,u=c.size||4,f=c.type||e.FLOAT,d=!!c.normalized,w=c.stride||0,v=c.offset||0;l.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,u,f,d,w,v)}else{if(typeof c=="number")e.vertexAttrib1f(i,c);else if(c.length===1)e.vertexAttrib1f(i,c[0]);else if(c.length===2)e.vertexAttrib2f(i,c[0],c[1]);else if(c.length===3)e.vertexAttrib3f(i,c[0],c[1],c[2]);else{if(c.length!==4)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,c[0],c[1],c[2],c[3])}e.disableVertexAttribArray(i)}}for(;i<a;++i)e.disableVertexAttribArray(i)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),i=0;i<a;++i)e.disableVertexAttribArray(i)}},7220:function(s,e,t){var n=t(3056);function a(i){this.gl=i,this._elements=null,this._attributes=null,this._elementsType=i.UNSIGNED_SHORT}a.prototype.bind=function(){n(this.gl,this._elements,this._attributes)},a.prototype.update=function(i,c,l){this._elements=c,this._attributes=i,this._elementsType=l||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(i,c,l){l=l||0;var u=this.gl;this._elements?u.drawElements(i,c,this._elementsType,l):u.drawArrays(i,l,c)},s.exports=function(i){return new a(i)}},3778:function(s,e,t){var n=t(3056);function a(c,l,u,f,d,w){this.location=c,this.dimension=l,this.a=u,this.b=f,this.c=d,this.d=w}function i(c,l,u){this.gl=c,this._ext=l,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=c.UNSIGNED_SHORT}a.prototype.bind=function(c){switch(this.dimension){case 1:c.vertexAttrib1f(this.location,this.a);break;case 2:c.vertexAttrib2f(this.location,this.a,this.b);break;case 3:c.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:c.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var c=0;c<this._attribs.length;++c)this._attribs[c].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(c,l,u){if(this.bind(),n(this.gl,l,c),this.unbind(),this._attribs.length=0,c)for(var f=0;f<c.length;++f){var d=c[f];typeof d=="number"?this._attribs.push(new a(f,1,d)):Array.isArray(d)&&this._attribs.push(new a(f,d.length,d[0],d[1],d[2],d[3]))}this._useElements=!!l,this._elementsType=u||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(c,l,u){u=u||0;var f=this.gl;this._useElements?f.drawElements(c,l,this._elementsType,u):f.drawArrays(c,u,l)},s.exports=function(c,l){return new i(c,l,l.createVertexArrayOES())}},2944:function(s,e,t){var n=t(3778),a=t(7220);function i(c){this.bindVertexArrayOES=c.bindVertexArray.bind(c),this.createVertexArrayOES=c.createVertexArray.bind(c),this.deleteVertexArrayOES=c.deleteVertexArray.bind(c)}s.exports=function(c,l,u,f){var d,w=c.createVertexArray?new i(c):c.getExtension("OES_vertex_array_object");return(d=w?n(c,w):a(c)).update(l,u,f),d}},2598:function(s){s.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},5879:function(s,e,t){s.exports=function(c,l){var u=n(c[0],c[1],c[2]),f=n(l[0],l[1],l[2]);a(u,u),a(f,f);var d=i(u,f);return d>1?0:Math.acos(d)};var n=t(5415),a=t(899),i=t(9305)},8827:function(s){s.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}},7622:function(s){s.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},8782:function(s){s.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},8501:function(s){s.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},903:function(s){s.exports=function(e,t,n){var a=t[0],i=t[1],c=t[2],l=n[0],u=n[1],f=n[2];return e[0]=i*f-c*u,e[1]=c*l-a*f,e[2]=a*u-i*l,e}},5981:function(s,e,t){s.exports=t(8288)},8288:function(s){s.exports=function(e,t){var n=t[0]-e[0],a=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+a*a+i*i)}},8629:function(s,e,t){s.exports=t(7979)},7979:function(s){s.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}},9305:function(s){s.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},154:function(s){s.exports=1e-6},4932:function(s,e,t){s.exports=function(a,i){var c=a[0],l=a[1],u=a[2],f=i[0],d=i[1],w=i[2];return Math.abs(c-f)<=n*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(l-d)<=n*Math.max(1,Math.abs(l),Math.abs(d))&&Math.abs(u-w)<=n*Math.max(1,Math.abs(u),Math.abs(w))};var n=t(154)},5777:function(s){s.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},3306:function(s){s.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}},7447:function(s,e,t){s.exports=function(a,i,c,l,u,f){var d,w;for(i||(i=3),c||(c=0),w=l?Math.min(l*i+c,a.length):a.length,d=c;d<w;d+=i)n[0]=a[d],n[1]=a[d+1],n[2]=a[d+2],u(n,n,f),a[d]=n[0],a[d+1]=n[1],a[d+2]=n[2];return a};var n=t(8501)()},5415:function(s){s.exports=function(e,t,n){var a=new Float32Array(3);return a[0]=e,a[1]=t,a[2]=n,a}},2858:function(s,e,t){s.exports={EPSILON:t(154),create:t(8501),clone:t(7622),angle:t(5879),fromValues:t(5415),copy:t(8782),set:t(831),equals:t(4932),exactEquals:t(5777),add:t(2598),subtract:t(911),sub:t(8921),multiply:t(105),mul:t(5733),divide:t(7979),div:t(8629),min:t(3605),max:t(1716),floor:t(3306),ceil:t(8827),round:t(1624),scale:t(5685),scaleAndAdd:t(6722),distance:t(8288),dist:t(5981),squaredDistance:t(6403),sqrDist:t(5294),length:t(4693),len:t(1468),squaredLength:t(4337),sqrLen:t(3303),negate:t(435),inverse:t(2073),normalize:t(899),dot:t(9305),cross:t(903),lerp:t(1868),random:t(6660),transformMat4:t(3255),transformMat3:t(9908),transformQuat:t(6568),rotateX:t(392),rotateY:t(3222),rotateZ:t(3388),forEach:t(7447)}},2073:function(s){s.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},1468:function(s,e,t){s.exports=t(4693)},4693:function(s){s.exports=function(e){var t=e[0],n=e[1],a=e[2];return Math.sqrt(t*t+n*n+a*a)}},1868:function(s){s.exports=function(e,t,n,a){var i=t[0],c=t[1],l=t[2];return e[0]=i+a*(n[0]-i),e[1]=c+a*(n[1]-c),e[2]=l+a*(n[2]-l),e}},1716:function(s){s.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}},3605:function(s){s.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}},5733:function(s,e,t){s.exports=t(105)},105:function(s){s.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}},435:function(s){s.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},899:function(s){s.exports=function(e,t){var n=t[0],a=t[1],i=t[2],c=n*n+a*a+i*i;return c>0&&(c=1/Math.sqrt(c),e[0]=t[0]*c,e[1]=t[1]*c,e[2]=t[2]*c),e}},6660:function(s){s.exports=function(e,t){t=t||1;var n=2*Math.random()*Math.PI,a=2*Math.random()-1,i=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=a*t,e}},392:function(s){s.exports=function(e,t,n,a){var i=n[1],c=n[2],l=t[1]-i,u=t[2]-c,f=Math.sin(a),d=Math.cos(a);return e[0]=t[0],e[1]=i+l*d-u*f,e[2]=c+l*f+u*d,e}},3222:function(s){s.exports=function(e,t,n,a){var i=n[0],c=n[2],l=t[0]-i,u=t[2]-c,f=Math.sin(a),d=Math.cos(a);return e[0]=i+u*f+l*d,e[1]=t[1],e[2]=c+u*d-l*f,e}},3388:function(s){s.exports=function(e,t,n,a){var i=n[0],c=n[1],l=t[0]-i,u=t[1]-c,f=Math.sin(a),d=Math.cos(a);return e[0]=i+l*d-u*f,e[1]=c+l*f+u*d,e[2]=t[2],e}},1624:function(s){s.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}},5685:function(s){s.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}},6722:function(s){s.exports=function(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e}},831:function(s){s.exports=function(e,t,n,a){return e[0]=t,e[1]=n,e[2]=a,e}},5294:function(s,e,t){s.exports=t(6403)},3303:function(s,e,t){s.exports=t(4337)},6403:function(s){s.exports=function(e,t){var n=t[0]-e[0],a=t[1]-e[1],i=t[2]-e[2];return n*n+a*a+i*i}},4337:function(s){s.exports=function(e){var t=e[0],n=e[1],a=e[2];return t*t+n*n+a*a}},8921:function(s,e,t){s.exports=t(911)},911:function(s){s.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},9908:function(s){s.exports=function(e,t,n){var a=t[0],i=t[1],c=t[2];return e[0]=a*n[0]+i*n[3]+c*n[6],e[1]=a*n[1]+i*n[4]+c*n[7],e[2]=a*n[2]+i*n[5]+c*n[8],e}},3255:function(s){s.exports=function(e,t,n){var a=t[0],i=t[1],c=t[2],l=n[3]*a+n[7]*i+n[11]*c+n[15];return l=l||1,e[0]=(n[0]*a+n[4]*i+n[8]*c+n[12])/l,e[1]=(n[1]*a+n[5]*i+n[9]*c+n[13])/l,e[2]=(n[2]*a+n[6]*i+n[10]*c+n[14])/l,e}},6568:function(s){s.exports=function(e,t,n){var a=t[0],i=t[1],c=t[2],l=n[0],u=n[1],f=n[2],d=n[3],w=d*a+u*c-f*i,v=d*i+f*a-l*c,p=d*c+l*i-u*a,y=-l*a-u*i-f*c;return e[0]=w*d+y*-l+v*-f-p*-u,e[1]=v*d+y*-u+p*-l-w*-f,e[2]=p*d+y*-f+w*-u-v*-l,e}},3433:function(s){s.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}},1413:function(s){s.exports=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},3470:function(s){s.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},5313:function(s){s.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},5446:function(s){s.exports=function(e,t){var n=t[0]-e[0],a=t[1]-e[1],i=t[2]-e[2],c=t[3]-e[3];return Math.sqrt(n*n+a*a+i*i+c*c)}},205:function(s){s.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}},4242:function(s){s.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},5680:function(s){s.exports=function(e,t,n,a){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=a,i}},4020:function(s,e,t){s.exports={create:t(5313),clone:t(1413),fromValues:t(5680),copy:t(3470),set:t(6453),add:t(3433),subtract:t(2705),multiply:t(746),divide:t(205),min:t(2170),max:t(3030),scale:t(5510),scaleAndAdd:t(4224),distance:t(5446),squaredDistance:t(1542),length:t(8177),squaredLength:t(9037),negate:t(6459),inverse:t(8057),normalize:t(381),dot:t(4242),lerp:t(8746),random:t(3770),transformMat4:t(6342),transformQuat:t(5022)}},8057:function(s){s.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}},8177:function(s){s.exports=function(e){var t=e[0],n=e[1],a=e[2],i=e[3];return Math.sqrt(t*t+n*n+a*a+i*i)}},8746:function(s){s.exports=function(e,t,n,a){var i=t[0],c=t[1],l=t[2],u=t[3];return e[0]=i+a*(n[0]-i),e[1]=c+a*(n[1]-c),e[2]=l+a*(n[2]-l),e[3]=u+a*(n[3]-u),e}},3030:function(s){s.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}},2170:function(s){s.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}},746:function(s){s.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}},6459:function(s){s.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}},381:function(s){s.exports=function(e,t){var n=t[0],a=t[1],i=t[2],c=t[3],l=n*n+a*a+i*i+c*c;return l>0&&(l=1/Math.sqrt(l),e[0]=n*l,e[1]=a*l,e[2]=i*l,e[3]=c*l),e}},3770:function(s,e,t){var n=t(381),a=t(5510);s.exports=function(i,c){return c=c||1,i[0]=Math.random(),i[1]=Math.random(),i[2]=Math.random(),i[3]=Math.random(),n(i,i),a(i,i,c),i}},5510:function(s){s.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}},4224:function(s){s.exports=function(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e}},6453:function(s){s.exports=function(e,t,n,a,i){return e[0]=t,e[1]=n,e[2]=a,e[3]=i,e}},1542:function(s){s.exports=function(e,t){var n=t[0]-e[0],a=t[1]-e[1],i=t[2]-e[2],c=t[3]-e[3];return n*n+a*a+i*i+c*c}},9037:function(s){s.exports=function(e){var t=e[0],n=e[1],a=e[2],i=e[3];return t*t+n*n+a*a+i*i}},2705:function(s){s.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}},6342:function(s){s.exports=function(e,t,n){var a=t[0],i=t[1],c=t[2],l=t[3];return e[0]=n[0]*a+n[4]*i+n[8]*c+n[12]*l,e[1]=n[1]*a+n[5]*i+n[9]*c+n[13]*l,e[2]=n[2]*a+n[6]*i+n[10]*c+n[14]*l,e[3]=n[3]*a+n[7]*i+n[11]*c+n[15]*l,e}},5022:function(s){s.exports=function(e,t,n){var a=t[0],i=t[1],c=t[2],l=n[0],u=n[1],f=n[2],d=n[3],w=d*a+u*c-f*i,v=d*i+f*a-l*c,p=d*c+l*i-u*a,y=-l*a-u*i-f*c;return e[0]=w*d+y*-l+v*-f-p*-u,e[1]=v*d+y*-u+p*-l-w*-f,e[2]=p*d+y*-f+w*-u-v*-l,e[3]=t[3],e}},9365:function(s,e,t){var n=t(8096),a=t(7896);s.exports=function(i){for(var c=Array.isArray(i)?i:n(i),l=0;l<c.length;l++){var u=c[l];if(u.type==="preprocessor"){var f=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(f&&f[2]){var d=f[1],w=f[2];return(d?a(w):w).trim()}}}}},3193:function(s,e,t){s.exports=function(S){var O,P,U,R=0,j=0,B=u,z=[],G=[],V=1,et=0,J=0,X=!1,Y=!1,Z="",tt=i,rt=n;(S=S||{}).version==="300 es"&&(tt=l,rt=c);var nt={},ot={};for(R=0;R<tt.length;R++)nt[tt[R]]=!0;for(R=0;R<rt.length;R++)ot[rt[R]]=!0;return function(ht){return G=[],ht!==null?function(Lt){var Mt;for(R=0,Lt.toString&&(Lt=Lt.toString()),Z+=Lt.replace(/\r\n/g,`
`),U=Z.length;O=Z[R],R<U;){switch(Mt=R,B){case d:R=yt();break;case w:case v:R=kt();break;case p:R=mt();break;case y:R=xt();break;case L:R=vt();break;case b:R=st();break;case f:R=at();break;case A:R=gt();break;case u:R=pt()}Mt!==R&&(Z[Mt]===`
`?(et=0,++V):++et)}return j+=R,Z=Z.slice(R),G}(ht):(z.length&&ct(z.join("")),B=M,ct("(eof)"),G)};function ct(ht){ht.length&&G.push({type:E[B],data:ht,position:J,line:V,column:et})}function pt(){return z=z.length?[]:z,P==="/"&&O==="*"?(J=j+R-1,B=d,P=O,R+1):P==="/"&&O==="/"?(J=j+R-1,B=w,P=O,R+1):O==="#"?(B=v,J=j+R,R):/\s/.test(O)?(B=A,J=j+R,R):(X=/\d/.test(O),Y=/[^\w_]/.test(O),J=j+R,B=X?y:Y?p:f,R)}function gt(){return/[^\s]/g.test(O)?(ct(z.join("")),B=u,R):(z.push(O),P=O,R+1)}function kt(){return O!=="\r"&&O!==`
`||P==="\\"?(z.push(O),P=O,R+1):(ct(z.join("")),B=u,R)}function yt(){return O==="/"&&P==="*"?(z.push(O),ct(z.join("")),B=u,R+1):(z.push(O),P=O,R+1)}function mt(){if(P==="."&&/\d/.test(O))return B=b,R;if(P==="/"&&O==="*")return B=d,R;if(P==="/"&&O==="/")return B=w,R;if(O==="."&&z.length){for(;Ot(z););return B=b,R}if(O===";"||O===")"||O==="("){if(z.length)for(;Ot(z););return ct(O),B=u,R+1}var ht=z.length===2&&O!=="=";if(/[\w_\d\s]/.test(O)||ht){for(;Ot(z););return B=u,R}return z.push(O),P=O,R+1}function Ot(ht){for(var Lt,Mt,_t=0;;){if(Lt=a.indexOf(ht.slice(0,ht.length+_t).join("")),Mt=a[Lt],Lt===-1){if(_t--+ht.length>0)continue;Mt=ht.slice(0,1).join("")}return ct(Mt),J+=Mt.length,(z=z.slice(Mt.length)).length}}function vt(){return/[^a-fA-F0-9]/.test(O)?(ct(z.join("")),B=u,R):(z.push(O),P=O,R+1)}function xt(){return O==="."||/[eE]/.test(O)?(z.push(O),B=b,P=O,R+1):O==="x"&&z.length===1&&z[0]==="0"?(B=L,z.push(O),P=O,R+1):/[^\d]/.test(O)?(ct(z.join("")),B=u,R):(z.push(O),P=O,R+1)}function st(){return O==="f"&&(z.push(O),P=O,R+=1),/[eE]/.test(O)?(z.push(O),P=O,R+1):(O!=="-"&&O!=="+"||!/[eE]/.test(P))&&/[^\d]/.test(O)?(ct(z.join("")),B=u,R):(z.push(O),P=O,R+1)}function at(){if(/[^\d\w_]/.test(O)){var ht=z.join("");return B=ot[ht]?g:nt[ht]?_:x,ct(z.join("")),B=u,R}return z.push(O),P=O,R+1}};var n=t(399),a=t(9746),i=t(9525),c=t(9458),l=t(3585),u=999,f=9999,d=0,w=1,v=2,p=3,y=4,b=5,x=6,_=7,g=8,A=9,M=10,L=11,E=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(s,e,t){var n=t(9525);n=n.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),s.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(s){s.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(s,e,t){var n=t(399);s.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(s){s.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(s){s.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(s,e,t){var n=t(3193);s.exports=function(a,i){var c=n(i),l=[];return(l=l.concat(c(a))).concat(c(null))}},6832:function(s){s.exports=function(e){typeof e=="string"&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],a=0;a<e.length-1;a++)n.push(e[a],t[a]||"");return n.push(e[a]),n.join("")}},5233:function(s,e,t){var n=t(4846);s.exports=n&&function(){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch{a=!1}return a}()},2183:function(s,e,t){s.exports=function(w,v){var p=w.length;if(p===0)throw new Error("Must have at least d+1 points");var y=w[0].length;if(p<=y)throw new Error("Must input at least d+1 points");var b=w.slice(0,y+1),x=n.apply(void 0,b);if(x===0)throw new Error("Input not in general position");for(var _=new Array(y+1),g=0;g<=y;++g)_[g]=g;x<0&&(_[0]=1,_[1]=0);var A=new i(_,new Array(y+1),!1),M=A.adjacent,L=new Array(y+2);for(g=0;g<=y;++g){for(var E=_.slice(),S=0;S<=y;++S)S===g&&(E[S]=-1);var O=E[0];E[0]=E[1],E[1]=O;var P=new i(E,new Array(y+1),!0);M[g]=P,L[g]=P}for(L[y+1]=A,g=0;g<=y;++g){E=M[g].vertices;var U=M[g].adjacent;for(S=0;S<=y;++S){var R=E[S];if(R<0)U[S]=A;else for(var j=0;j<=y;++j)M[j].vertices.indexOf(R)<0&&(U[S]=M[j])}}var B=new f(y,b,L),z=!!v;for(g=y+1;g<p;++g)B.insert(w[g],z);return B.boundary()};var n=t(417),a=t(8211).H;function i(w,v,p){this.vertices=w,this.adjacent=v,this.boundary=p,this.lastVisited=-1}function c(w,v,p){this.vertices=w,this.cell=v,this.index=p}function l(w,v){return a(w.vertices,v.vertices)}i.prototype.flip=function(){var w=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=w;var v=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=v};var u=[];function f(w,v,p){this.dimension=w,this.vertices=v,this.simplices=p,this.interior=p.filter(function(_){return!_.boundary}),this.tuple=new Array(w+1);for(var y=0;y<=w;++y)this.tuple[y]=this.vertices[y];var b,x=u[w];x||(x=u[w]=((b=n[w+1])||(b=n),function(_){return function(){var g=this.tuple;return _.apply(this,g)}}(b))),this.orient=x}var d=f.prototype;d.handleBoundaryDegeneracy=function(w,v){var p=this.dimension,y=this.vertices.length-1,b=this.tuple,x=this.vertices,_=[w];for(w.lastVisited=-y;_.length>0;)for(var g=(w=_.pop()).adjacent,A=0;A<=p;++A){var M=g[A];if(M.boundary&&!(M.lastVisited<=-y)){for(var L=M.vertices,E=0;E<=p;++E){var S=L[E];b[E]=S<0?v:x[S]}var O=this.orient();if(O>0)return M;M.lastVisited=-y,O===0&&_.push(M)}}return null},d.walk=function(w,v){var p=this.vertices.length-1,y=this.dimension,b=this.vertices,x=this.tuple,_=v?this.interior.length*Math.random()|0:this.interior.length-1,g=this.interior[_];t:for(;!g.boundary;){for(var A=g.vertices,M=g.adjacent,L=0;L<=y;++L)x[L]=b[A[L]];for(g.lastVisited=p,L=0;L<=y;++L){var E=M[L];if(!(E.lastVisited>=p)){var S=x[L];x[L]=w;var O=this.orient();if(x[L]=S,O<0){g=E;continue t}E.boundary?E.lastVisited=-p:E.lastVisited=p}}return}return g},d.addPeaks=function(w,v){var p=this.vertices.length-1,y=this.dimension,b=this.vertices,x=this.tuple,_=this.interior,g=this.simplices,A=[v];v.lastVisited=p,v.vertices[v.vertices.indexOf(-1)]=p,v.boundary=!1,_.push(v);for(var M=[];A.length>0;){var L=(v=A.pop()).vertices,E=v.adjacent,S=L.indexOf(p);if(!(S<0)){for(var O=0;O<=y;++O)if(O!==S){var P=E[O];if(P.boundary&&!(P.lastVisited>=p)){var U=P.vertices;if(P.lastVisited!==-p){for(var R=0,j=0;j<=y;++j)U[j]<0?(R=j,x[j]=w):x[j]=b[U[j]];if(this.orient()>0){U[R]=p,P.boundary=!1,_.push(P),A.push(P),P.lastVisited=p;continue}P.lastVisited=-p}var B=P.adjacent,z=L.slice(),G=E.slice(),V=new i(z,G,!0);g.push(V);var et=B.indexOf(v);if(!(et<0))for(B[et]=V,G[S]=P,z[O]=-1,G[O]=v,E[O]=V,V.flip(),j=0;j<=y;++j){var J=z[j];if(!(J<0||J===p)){for(var X=new Array(y-1),Y=0,Z=0;Z<=y;++Z){var tt=z[Z];tt<0||Z===j||(X[Y++]=tt)}M.push(new c(X,V,j))}}}}}}for(M.sort(l),O=0;O+1<M.length;O+=2){var rt=M[O],nt=M[O+1],ot=rt.index,ct=nt.index;ot<0||ct<0||(rt.cell.adjacent[rt.index]=nt.cell,nt.cell.adjacent[nt.index]=rt.cell)}},d.insert=function(w,v){var p=this.vertices;p.push(w);var y=this.walk(w,v);if(y){for(var b=this.dimension,x=this.tuple,_=0;_<=b;++_){var g=y.vertices[_];x[_]=g<0?w:p[g]}var A=this.orient(x);A<0||(A!==0||(y=this.handleBoundaryDegeneracy(y,w)))&&this.addPeaks(w,y)}},d.boundary=function(){for(var w=this.dimension,v=[],p=this.simplices,y=p.length,b=0;b<y;++b){var x=p[b];if(x.boundary){for(var _=new Array(w),g=x.vertices,A=0,M=0,L=0;L<=w;++L)g[L]>=0?_[A++]=g[L]:M=1&L;if(M===(1&w)){var E=_[0];_[0]=_[1],_[1]=E}v.push(_)}}return v}},9014:function(s,e,t){var n=t(5070);function a(A,M,L,E,S){this.mid=A,this.left=M,this.right=L,this.leftPoints=E,this.rightPoints=S,this.count=(M?M.count:0)+(L?L.count:0)+E.length}s.exports=function(A){return A&&A.length!==0?new _(x(A)):new _(null)};var i=a.prototype;function c(A,M){A.mid=M.mid,A.left=M.left,A.right=M.right,A.leftPoints=M.leftPoints,A.rightPoints=M.rightPoints,A.count=M.count}function l(A,M){var L=x(M);A.mid=L.mid,A.left=L.left,A.right=L.right,A.leftPoints=L.leftPoints,A.rightPoints=L.rightPoints,A.count=L.count}function u(A,M){var L=A.intervals([]);L.push(M),l(A,L)}function f(A,M){var L=A.intervals([]),E=L.indexOf(M);return E<0?0:(L.splice(E,1),l(A,L),1)}function d(A,M,L){for(var E=0;E<A.length&&A[E][0]<=M;++E){var S=L(A[E]);if(S)return S}}function w(A,M,L){for(var E=A.length-1;E>=0&&A[E][1]>=M;--E){var S=L(A[E]);if(S)return S}}function v(A,M){for(var L=0;L<A.length;++L){var E=M(A[L]);if(E)return E}}function p(A,M){return A-M}function y(A,M){return A[0]-M[0]||A[1]-M[1]}function b(A,M){return A[1]-M[1]||A[0]-M[0]}function x(A){if(A.length===0)return null;for(var M=[],L=0;L<A.length;++L)M.push(A[L][0],A[L][1]);M.sort(p);var E=M[M.length>>1],S=[],O=[],P=[];for(L=0;L<A.length;++L){var U=A[L];U[1]<E?S.push(U):E<U[0]?O.push(U):P.push(U)}var R=P,j=P.slice();return R.sort(y),j.sort(b),new a(E,x(S),x(O),R,j)}function _(A){this.root=A}i.intervals=function(A){return A.push.apply(A,this.leftPoints),this.left&&this.left.intervals(A),this.right&&this.right.intervals(A),A},i.insert=function(A){var M=this.count-this.leftPoints.length;if(this.count+=1,A[1]<this.mid)this.left?4*(this.left.count+1)>3*(M+1)?u(this,A):this.left.insert(A):this.left=x([A]);else if(A[0]>this.mid)this.right?4*(this.right.count+1)>3*(M+1)?u(this,A):this.right.insert(A):this.right=x([A]);else{var L=n.ge(this.leftPoints,A,y),E=n.ge(this.rightPoints,A,b);this.leftPoints.splice(L,0,A),this.rightPoints.splice(E,0,A)}},i.remove=function(A){var M=this.count-this.leftPoints;if(A[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(M-1)?f(this,A):(O=this.left.remove(A))===2?(this.left=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(A[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(M-1)?f(this,A):(O=this.right.remove(A))===2?(this.right=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(this.count===1)return this.leftPoints[0]===A?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===A){if(this.left&&this.right){for(var L=this,E=this.left;E.right;)L=E,E=E.right;if(L===this)E.right=this.right;else{var S=this.left,O=this.right;L.count-=E.count,L.right=E.left,E.left=S,E.right=O}c(this,E),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?c(this,this.left):c(this,this.right);return 1}for(S=n.ge(this.leftPoints,A,y);S<this.leftPoints.length&&this.leftPoints[S][0]===A[0];++S)if(this.leftPoints[S]===A){for(this.count-=1,this.leftPoints.splice(S,1),O=n.ge(this.rightPoints,A,b);O<this.rightPoints.length&&this.rightPoints[O][1]===A[1];++O)if(this.rightPoints[O]===A)return this.rightPoints.splice(O,1),1}return 0},i.queryPoint=function(A,M){return A<this.mid?this.left&&(L=this.left.queryPoint(A,M))?L:d(this.leftPoints,A,M):A>this.mid?this.right&&(L=this.right.queryPoint(A,M))?L:w(this.rightPoints,A,M):v(this.leftPoints,M);var L},i.queryInterval=function(A,M,L){var E;return A<this.mid&&this.left&&(E=this.left.queryInterval(A,M,L))||M>this.mid&&this.right&&(E=this.right.queryInterval(A,M,L))?E:M<this.mid?d(this.leftPoints,M,L):A>this.mid?w(this.rightPoints,A,L):v(this.leftPoints,L)};var g=_.prototype;g.insert=function(A){this.root?this.root.insert(A):this.root=new a(A[0],null,null,[A],[A])},g.remove=function(A){if(this.root){var M=this.root.remove(A);return M===2&&(this.root=null),M!==0}return!1},g.queryPoint=function(A,M){if(this.root)return this.root.queryPoint(A,M)},g.queryInterval=function(A,M,L){if(A<=M&&this.root)return this.root.queryInterval(A,M,L)},Object.defineProperty(g,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(g,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(s){s.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},4846:function(s){s.exports=!0},4780:function(s){function e(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}s.exports=function(t){return t!=null&&(e(t)||function(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}(t)||!!t._isBuffer)}},3596:function(s){s.exports=function(e){for(var t,n=e.length,a=0;a<n;a++)if(((t=e.charCodeAt(a))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},3578:function(s){s.exports=function(e,t,n){return e*(1-n)+t*n}},7191:function(s,e,t){var n=t(4690),a=t(9823),i=t(7332),c=t(7787),l=t(7437),u=t(2142),f={length:t(4693),normalize:t(899),dot:t(9305),cross:t(903)},d=a(),w=a(),v=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],y=[0,0,0];function b(x,_,g,A,M){x[0]=_[0]*A+g[0]*M,x[1]=_[1]*A+g[1]*M,x[2]=_[2]*A+g[2]*M}s.exports=function(x,_,g,A,M,L){if(_||(_=[0,0,0]),g||(g=[0,0,0]),A||(A=[0,0,0]),M||(M=[0,0,0,1]),L||(L=[0,0,0,1]),!n(d,x)||(i(w,d),w[3]=0,w[7]=0,w[11]=0,w[15]=1,Math.abs(c(w)<1e-8)))return!1;var E,S,O,P,U,R,j,B=d[3],z=d[7],G=d[11],V=d[12],et=d[13],J=d[14],X=d[15];if(B!==0||z!==0||G!==0){if(v[0]=B,v[1]=z,v[2]=G,v[3]=X,!l(w,w))return!1;u(w,w),E=M,O=w,P=(S=v)[0],U=S[1],R=S[2],j=S[3],E[0]=O[0]*P+O[4]*U+O[8]*R+O[12]*j,E[1]=O[1]*P+O[5]*U+O[9]*R+O[13]*j,E[2]=O[2]*P+O[6]*U+O[10]*R+O[14]*j,E[3]=O[3]*P+O[7]*U+O[11]*R+O[15]*j}else M[0]=M[1]=M[2]=0,M[3]=1;if(_[0]=V,_[1]=et,_[2]=J,function(Z,tt){Z[0][0]=tt[0],Z[0][1]=tt[1],Z[0][2]=tt[2],Z[1][0]=tt[4],Z[1][1]=tt[5],Z[1][2]=tt[6],Z[2][0]=tt[8],Z[2][1]=tt[9],Z[2][2]=tt[10]}(p,d),g[0]=f.length(p[0]),f.normalize(p[0],p[0]),A[0]=f.dot(p[0],p[1]),b(p[1],p[1],p[0],1,-A[0]),g[1]=f.length(p[1]),f.normalize(p[1],p[1]),A[0]/=g[1],A[1]=f.dot(p[0],p[2]),b(p[2],p[2],p[0],1,-A[1]),A[2]=f.dot(p[1],p[2]),b(p[2],p[2],p[1],1,-A[2]),g[2]=f.length(p[2]),f.normalize(p[2],p[2]),A[1]/=g[2],A[2]/=g[2],f.cross(y,p[1],p[2]),f.dot(p[0],y)<0)for(var Y=0;Y<3;Y++)g[Y]*=-1,p[Y][0]*=-1,p[Y][1]*=-1,p[Y][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(L[0]=-L[0]),p[0][2]>p[2][0]&&(L[1]=-L[1]),p[1][0]>p[0][1]&&(L[2]=-L[2]),!0}},4690:function(s){s.exports=function(e,t){var n=t[15];if(n===0)return!1;for(var a=1/n,i=0;i<16;i++)e[i]=t[i]*a;return!0}},7649:function(s,e,t){var n=t(1868),a=t(1102),i=t(7191),c=t(7787),l=t(1116),u=w(),f=w(),d=w();function w(){return{translate:v(),scale:v(1),skew:v(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function v(p){return[p||0,p||0,p||0]}s.exports=function(p,y,b,x){if(c(y)===0||c(b)===0)return!1;var _=i(y,u.translate,u.scale,u.skew,u.perspective,u.quaternion),g=i(b,f.translate,f.scale,f.skew,f.perspective,f.quaternion);return!(!_||!g||(n(d.translate,u.translate,f.translate,x),n(d.skew,u.skew,f.skew,x),n(d.scale,u.scale,f.scale,x),n(d.perspective,u.perspective,f.perspective,x),l(d.quaternion,u.quaternion,f.quaternion,x),a(p,d.translate,d.scale,d.skew,d.perspective,d.quaternion),0))}},1102:function(s,e,t){var n={identity:t(9947),translate:t(998),multiply:t(104),create:t(9823),scale:t(3668),fromRotationTranslation:t(7280)},a=(n.create(),n.create());s.exports=function(i,c,l,u,f,d){return n.identity(i),n.fromRotationTranslation(i,d,c),i[3]=f[0],i[7]=f[1],i[11]=f[2],i[15]=f[3],n.identity(a),u[2]!==0&&(a[9]=u[2],n.multiply(i,i,a)),u[1]!==0&&(a[9]=0,a[8]=u[1],n.multiply(i,i,a)),u[0]!==0&&(a[8]=0,a[4]=u[0],n.multiply(i,i,a)),n.scale(i,i,l),i}},9298:function(s,e,t){var n=t(5070),a=t(7649),i=t(7437),c=t(6109),l=t(7115),u=t(5240),f=t(3012),d=t(998),w=(t(3668),t(899)),v=[0,0,0];function p(x){this._components=x.slice(),this._time=[0],this.prevMatrix=x.slice(),this.nextMatrix=x.slice(),this.computedMatrix=x.slice(),this.computedInverse=x.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}s.exports=function(x){return new p((x=x||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var y=p.prototype;y.recalcMatrix=function(x){var _=this._time,g=n.le(_,x),A=this.computedMatrix;if(!(g<0)){var M=this._components;if(g===_.length-1)for(var L=16*g,E=0;E<16;++E)A[E]=M[L++];else{var S=_[g+1]-_[g],O=(L=16*g,this.prevMatrix),P=!0;for(E=0;E<16;++E)O[E]=M[L++];var U=this.nextMatrix;for(E=0;E<16;++E)U[E]=M[L++],P=P&&O[E]===U[E];if(S<1e-6||P)for(E=0;E<16;++E)A[E]=O[E];else a(A,O,U,(x-_[g])/S)}var R=this.computedUp;R[0]=A[1],R[1]=A[5],R[2]=A[9],w(R,R);var j=this.computedInverse;i(j,A);var B=this.computedEye,z=j[15];B[0]=j[12]/z,B[1]=j[13]/z,B[2]=j[14]/z;var G=this.computedCenter,V=Math.exp(this.computedRadius[0]);for(E=0;E<3;++E)G[E]=B[E]-A[2+4*E]*V}},y.idle=function(x){if(!(x<this.lastT())){for(var _=this._components,g=_.length-16,A=0;A<16;++A)_.push(_[g++]);this._time.push(x)}},y.flush=function(x){var _=n.gt(this._time,x)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},y.lastT=function(){return this._time[this._time.length-1]},y.lookAt=function(x,_,g,A){this.recalcMatrix(x),_=_||this.computedEye,g=g||v,A=A||this.computedUp,this.setMatrix(x,f(this.computedMatrix,_,g,A));for(var M=0,L=0;L<3;++L)M+=Math.pow(g[L]-_[L],2);M=Math.log(Math.sqrt(M)),this.computedRadius[0]=M},y.rotate=function(x,_,g,A){this.recalcMatrix(x);var M=this.computedInverse;_&&l(M,M,_),g&&c(M,M,g),A&&u(M,M,A),this.setMatrix(x,i(this.computedMatrix,M))};var b=[0,0,0];y.pan=function(x,_,g,A){b[0]=-(_||0),b[1]=-(g||0),b[2]=-(A||0),this.recalcMatrix(x);var M=this.computedInverse;d(M,M,b),this.setMatrix(x,i(M,M))},y.translate=function(x,_,g,A){b[0]=_||0,b[1]=g||0,b[2]=A||0,this.recalcMatrix(x);var M=this.computedMatrix;d(M,M,b),this.setMatrix(x,M)},y.setMatrix=function(x,_){if(!(x<this.lastT())){this._time.push(x);for(var g=0;g<16;++g)this._components.push(_[g])}},y.setDistance=function(x,_){this.computedRadius[0]=_},y.setDistanceLimits=function(x,_){var g=this._limits;g[0]=x,g[1]=_},y.getDistanceLimits=function(x){var _=this._limits;return x?(x[0]=_[0],x[1]=_[1],x):_}},3266:function(s,e,t){s.exports=function(a){var i=a.length;if(i<3){for(var c=new Array(i),l=0;l<i;++l)c[l]=l;return i===2&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:c}var u=new Array(i);for(l=0;l<i;++l)u[l]=l;u.sort(function(_,g){return a[_][0]-a[g][0]||a[_][1]-a[g][1]});var f=[u[0],u[1]],d=[u[0],u[1]];for(l=2;l<i;++l){for(var w=u[l],v=a[w],p=f.length;p>1&&n(a[f[p-2]],a[f[p-1]],v)<=0;)p-=1,f.pop();for(f.push(w),p=d.length;p>1&&n(a[d[p-2]],a[d[p-1]],v)>=0;)p-=1,d.pop();d.push(w)}c=new Array(d.length+f.length-2);for(var y=0,b=(l=0,f.length);l<b;++l)c[y++]=f[l];for(var x=d.length-2;x>0;--x)c[y++]=d[x];return c};var n=t(417)[3]},6145:function(s,e,t){s.exports=function(a,i){i||(i=a,a=window);var c=0,l=0,u=0,f={shift:!1,alt:!1,control:!1,meta:!1},d=!1;function w(L){var E=!1;return"altKey"in L&&(E=E||L.altKey!==f.alt,f.alt=!!L.altKey),"shiftKey"in L&&(E=E||L.shiftKey!==f.shift,f.shift=!!L.shiftKey),"ctrlKey"in L&&(E=E||L.ctrlKey!==f.control,f.control=!!L.ctrlKey),"metaKey"in L&&(E=E||L.metaKey!==f.meta,f.meta=!!L.metaKey),E}function v(L,E){var S=n.x(E),O=n.y(E);"buttons"in E&&(L=0|E.buttons),(L!==c||S!==l||O!==u||w(E))&&(c=0|L,l=S||0,u=O||0,i&&i(c,l,u,f))}function p(L){v(0,L)}function y(){(c||l||u||f.shift||f.alt||f.meta||f.control)&&(l=u=0,c=0,f.shift=f.alt=f.control=f.meta=!1,i&&i(0,0,0,f))}function b(L){w(L)&&i&&i(c,l,u,f)}function x(L){n.buttons(L)===0?v(0,L):v(c,L)}function _(L){v(c|n.buttons(L),L)}function g(L){v(c&~n.buttons(L),L)}function A(){d||(d=!0,a.addEventListener("mousemove",x),a.addEventListener("mousedown",_),a.addEventListener("mouseup",g),a.addEventListener("mouseleave",p),a.addEventListener("mouseenter",p),a.addEventListener("mouseout",p),a.addEventListener("mouseover",p),a.addEventListener("blur",y),a.addEventListener("keyup",b),a.addEventListener("keydown",b),a.addEventListener("keypress",b),a!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",b),window.addEventListener("keydown",b),window.addEventListener("keypress",b)))}A();var M={element:a};return Object.defineProperties(M,{enabled:{get:function(){return d},set:function(L){L?A():d&&(d=!1,a.removeEventListener("mousemove",x),a.removeEventListener("mousedown",_),a.removeEventListener("mouseup",g),a.removeEventListener("mouseleave",p),a.removeEventListener("mouseenter",p),a.removeEventListener("mouseout",p),a.removeEventListener("mouseover",p),a.removeEventListener("blur",y),a.removeEventListener("keyup",b),a.removeEventListener("keydown",b),a.removeEventListener("keypress",b),a!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",b),window.removeEventListener("keydown",b),window.removeEventListener("keypress",b)))},enumerable:!0},buttons:{get:function(){return c},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return f},enumerable:!0}}),M};var n=t(4110)},2565:function(s){var e={left:0,top:0};s.exports=function(t,n,a){n=n||t.currentTarget||t.srcElement,Array.isArray(a)||(a=[0,0]);var i,c=t.clientX||0,l=t.clientY||0,u=(i=n)===window||i===document||i===document.body?e:i.getBoundingClientRect();return a[0]=c-u.left,a[1]=l-u.top,a}},4110:function(s,e){function t(n){return n.target||n.srcElement||window}e.buttons=function(n){if(typeof n=="object"){if("buttons"in n)return n.buttons;if("which"in n){if((a=n.which)===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in n){var a;if((a=n.button)===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0},e.element=t,e.x=function(n){if(typeof n=="object"){if("offsetX"in n)return n.offsetX;var a=t(n).getBoundingClientRect();return n.clientX-a.left}return 0},e.y=function(n){if(typeof n=="object"){if("offsetY"in n)return n.offsetY;var a=t(n).getBoundingClientRect();return n.clientY-a.top}return 0}},6475:function(s,e,t){var n=t(14);s.exports=function(a,i,c){typeof a=="function"&&(c=!!i,i=a,a=window);var l=n("ex",a),u=function(f){c&&f.preventDefault();var d=f.deltaX||0,w=f.deltaY||0,v=f.deltaZ||0,p=1;switch(f.deltaMode){case 1:p=l;break;case 2:p=window.innerHeight}if(w*=p,v*=p,(d*=p)||w||v)return i(d,w,v,f)};return a.addEventListener("wheel",u),u}},9284:function(s,e,t){var n=t(5306);s.exports=function(i){function c(v){throw new Error("ndarray-extract-contour: "+v)}typeof i!="object"&&c("Must specify arguments");var l=i.order;Array.isArray(l)||c("Must specify order");var u=i.arrayArguments||1;u<1&&c("Must have at least one array argument"),(i.scalarArguments||0)<0&&c("Scalar arg count must be > 0"),typeof i.vertex!="function"&&c("Must specify vertex creation function"),typeof i.cell!="function"&&c("Must specify cell creation function"),typeof i.phase!="function"&&c("Must specify phase function");for(var f=i.getters||[],d=new Array(u),w=0;w<u;++w)f.indexOf(w)>=0?d[w]=!0:d[w]=!1;return function(v,p,y,b,x,_){var g=[_,x].join(",");return(0,a[g])(v,p,y,n.mallocUint32,n.freeUint32)}(i.vertex,i.cell,i.phase,0,l,d)};var a={"false,0,1":function(i,c,l,u,f){return function(d,w,v,p){var y,b=0|d.shape[0],x=0|d.shape[1],_=d.data,g=0|d.offset,A=0|d.stride[0],M=0|d.stride[1],L=g,E=0|-A,S=0,O=0|-M,P=0,U=-A-M|0,R=0,j=0|A,B=M-A*b|0,z=0,G=0,V=0,et=2*b|0,J=u(et),X=u(et),Y=0,Z=0,tt=-1,rt=-1,nt=0,ot=0|-b,ct=0|b,pt=0,gt=-b-1|0,kt=b-1|0,yt=0,mt=0,Ot=0;for(z=0;z<b;++z)J[Y++]=l(_[L],w,v,p),L+=j;if(L+=B,x>0){if(G=1,J[Y++]=l(_[L],w,v,p),L+=j,b>0)for(z=1,y=_[L],Z=J[Y]=l(y,w,v,p),nt=J[Y+tt],pt=J[Y+ot],yt=J[Y+gt],Z===nt&&Z===pt&&Z===yt||(S=_[L+E],P=_[L+O],R=_[L+U],i(z,G,y,S,P,R,Z,nt,pt,yt,w,v,p),mt=X[Y]=V++),Y+=1,L+=j,z=2;z<b;++z)y=_[L],Z=J[Y]=l(y,w,v,p),nt=J[Y+tt],pt=J[Y+ot],yt=J[Y+gt],Z===nt&&Z===pt&&Z===yt||(S=_[L+E],P=_[L+O],R=_[L+U],i(z,G,y,S,P,R,Z,nt,pt,yt,w,v,p),mt=X[Y]=V++,yt!==nt&&c(X[Y+tt],mt,R,S,yt,nt,w,v,p)),Y+=1,L+=j;for(L+=B,Y=0,Ot=tt,tt=rt,rt=Ot,Ot=ot,ot=ct,ct=Ot,Ot=gt,gt=kt,kt=Ot,G=2;G<x;++G){if(J[Y++]=l(_[L],w,v,p),L+=j,b>0)for(z=1,y=_[L],Z=J[Y]=l(y,w,v,p),nt=J[Y+tt],pt=J[Y+ot],yt=J[Y+gt],Z===nt&&Z===pt&&Z===yt||(S=_[L+E],P=_[L+O],R=_[L+U],i(z,G,y,S,P,R,Z,nt,pt,yt,w,v,p),mt=X[Y]=V++,yt!==pt&&c(X[Y+ot],mt,P,R,pt,yt,w,v,p)),Y+=1,L+=j,z=2;z<b;++z)y=_[L],Z=J[Y]=l(y,w,v,p),nt=J[Y+tt],pt=J[Y+ot],yt=J[Y+gt],Z===nt&&Z===pt&&Z===yt||(S=_[L+E],P=_[L+O],R=_[L+U],i(z,G,y,S,P,R,Z,nt,pt,yt,w,v,p),mt=X[Y]=V++,yt!==pt&&c(X[Y+ot],mt,P,R,pt,yt,w,v,p),yt!==nt&&c(X[Y+tt],mt,R,S,yt,nt,w,v,p)),Y+=1,L+=j;1&G&&(Y=0),Ot=tt,tt=rt,rt=Ot,Ot=ot,ot=ct,ct=Ot,Ot=gt,gt=kt,kt=Ot,L+=B}}f(X),f(J)}},"false,1,0":function(i,c,l,u,f){return function(d,w,v,p){var y,b=0|d.shape[0],x=0|d.shape[1],_=d.data,g=0|d.offset,A=0|d.stride[0],M=0|d.stride[1],L=g,E=0|-A,S=0,O=0|-M,P=0,U=-A-M|0,R=0,j=0|M,B=A-M*x|0,z=0,G=0,V=0,et=2*x|0,J=u(et),X=u(et),Y=0,Z=0,tt=-1,rt=-1,nt=0,ot=0|-x,ct=0|x,pt=0,gt=-x-1|0,kt=x-1|0,yt=0,mt=0,Ot=0;for(G=0;G<x;++G)J[Y++]=l(_[L],w,v,p),L+=j;if(L+=B,b>0){if(z=1,J[Y++]=l(_[L],w,v,p),L+=j,x>0)for(G=1,y=_[L],Z=J[Y]=l(y,w,v,p),pt=J[Y+ot],nt=J[Y+tt],yt=J[Y+gt],Z===pt&&Z===nt&&Z===yt||(S=_[L+E],P=_[L+O],R=_[L+U],i(z,G,y,S,P,R,Z,pt,nt,yt,w,v,p),mt=X[Y]=V++),Y+=1,L+=j,G=2;G<x;++G)y=_[L],Z=J[Y]=l(y,w,v,p),pt=J[Y+ot],nt=J[Y+tt],yt=J[Y+gt],Z===pt&&Z===nt&&Z===yt||(S=_[L+E],P=_[L+O],R=_[L+U],i(z,G,y,S,P,R,Z,pt,nt,yt,w,v,p),mt=X[Y]=V++,yt!==nt&&c(X[Y+tt],mt,P,R,nt,yt,w,v,p)),Y+=1,L+=j;for(L+=B,Y=0,Ot=ot,ot=ct,ct=Ot,Ot=tt,tt=rt,rt=Ot,Ot=gt,gt=kt,kt=Ot,z=2;z<b;++z){if(J[Y++]=l(_[L],w,v,p),L+=j,x>0)for(G=1,y=_[L],Z=J[Y]=l(y,w,v,p),pt=J[Y+ot],nt=J[Y+tt],yt=J[Y+gt],Z===pt&&Z===nt&&Z===yt||(S=_[L+E],P=_[L+O],R=_[L+U],i(z,G,y,S,P,R,Z,pt,nt,yt,w,v,p),mt=X[Y]=V++,yt!==pt&&c(X[Y+ot],mt,R,S,yt,pt,w,v,p)),Y+=1,L+=j,G=2;G<x;++G)y=_[L],Z=J[Y]=l(y,w,v,p),pt=J[Y+ot],nt=J[Y+tt],yt=J[Y+gt],Z===pt&&Z===nt&&Z===yt||(S=_[L+E],P=_[L+O],R=_[L+U],i(z,G,y,S,P,R,Z,pt,nt,yt,w,v,p),mt=X[Y]=V++,yt!==nt&&c(X[Y+tt],mt,P,R,nt,yt,w,v,p),yt!==pt&&c(X[Y+ot],mt,R,S,yt,pt,w,v,p)),Y+=1,L+=j;1&z&&(Y=0),Ot=ot,ot=ct,ct=Ot,Ot=tt,tt=rt,rt=Ot,Ot=gt,gt=kt,kt=Ot,L+=B}}f(X),f(J)}}}},9144:function(s,e,t){var n=t(3094),a={zero:function(b,x,_,g){var A=b[0];g|=0;var M=0,L=_[0];for(M=0;M<A;++M)x[g]=0,g+=L},fdTemplate1:function(b,x,_,g,A,M,L){var E=b[0],S=_[0],O=-1*S,P=S;g|=0,L|=0;var U=0,R=S,j=M[0];for(U=0;U<E;++U)A[L]=.5*(x[g+O]-x[g+P]),g+=R,L+=j},fdTemplate2:function(b,x,_,g,A,M,L,E,S,O){var P=b[0],U=b[1],R=_[0],j=_[1],B=M[0],z=M[1],G=S[0],V=S[1],et=-1*R,J=R,X=-1*j,Y=j;g|=0,L|=0,O|=0;var Z=0,tt=0,rt=j,nt=R-U*j,ot=z,ct=B-U*z,pt=V,gt=G-U*V;for(tt=0;tt<P;++tt){for(Z=0;Z<U;++Z)A[L]=.5*(x[g+et]-x[g+J]),E[O]=.5*(x[g+X]-x[g+Y]),g+=rt,L+=ot,O+=pt;g+=nt,L+=ct,O+=gt}}},i={cdiff:function(b){var x={};return function(_,g,A){var M=_.dtype,L=_.order,E=g.dtype,S=g.order,O=A.dtype,P=A.order,U=[M,L.join(),E,S.join(),O,P.join()].join(),R=x[U];return R||(x[U]=R=b([M,L,E,S,O,P])),R(_.shape.slice(0),_.data,_.stride,0|_.offset,g.data,g.stride,0|g.offset,A.data,A.stride,0|A.offset)}},zero:function(b){var x={};return function(_){var g=_.dtype,A=_.order,M=[g,A.join()].join(),L=x[M];return L||(x[M]=L=b([g,A])),L(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(b){var x={};return function(_,g){var A=_.dtype,M=_.order,L=g.dtype,E=g.order,S=[A,M.join(),L,E.join()].join(),O=x[S];return O||(x[S]=O=b([A,M,L,E])),O(_.shape.slice(0),_.data,_.stride,0|_.offset,g.data,g.stride,0|g.offset)}},fdTemplate2:function(b){var x={};return function(_,g,A){var M=_.dtype,L=_.order,E=g.dtype,S=g.order,O=A.dtype,P=A.order,U=[M,L.join(),E,S.join(),O,P.join()].join(),R=x[U];return R||(x[U]=R=b([M,L,E,S,O,P])),R(_.shape.slice(0),_.data,_.stride,0|_.offset,g.data,g.stride,0|g.offset,A.data,A.stride,0|A.offset)}}};function c(b){return(0,i[b.funcName])(l.bind(void 0,b))}function l(b){return a[b.funcName]}function u(b){return c({funcName:b.funcName})}var f={},d={},w=u({funcName:"cdiff"}),v=u({funcName:"zero"});function p(b){return b in f?f[b]:f[b]=u({funcName:"fdTemplate"+b})}function y(b,x,_,g){return function(A,M){var L=M.shape.slice();return L[0]>2&&L[1]>2&&g(M.pick(-1,-1).lo(1,1).hi(L[0]-2,L[1]-2),A.pick(-1,-1,0).lo(1,1).hi(L[0]-2,L[1]-2),A.pick(-1,-1,1).lo(1,1).hi(L[0]-2,L[1]-2)),L[1]>2&&(_(M.pick(0,-1).lo(1).hi(L[1]-2),A.pick(0,-1,1).lo(1).hi(L[1]-2)),x(A.pick(0,-1,0).lo(1).hi(L[1]-2))),L[1]>2&&(_(M.pick(L[0]-1,-1).lo(1).hi(L[1]-2),A.pick(L[0]-1,-1,1).lo(1).hi(L[1]-2)),x(A.pick(L[0]-1,-1,0).lo(1).hi(L[1]-2))),L[0]>2&&(_(M.pick(-1,0).lo(1).hi(L[0]-2),A.pick(-1,0,0).lo(1).hi(L[0]-2)),x(A.pick(-1,0,1).lo(1).hi(L[0]-2))),L[0]>2&&(_(M.pick(-1,L[1]-1).lo(1).hi(L[0]-2),A.pick(-1,L[1]-1,0).lo(1).hi(L[0]-2)),x(A.pick(-1,L[1]-1,1).lo(1).hi(L[0]-2))),A.set(0,0,0,0),A.set(0,0,1,0),A.set(L[0]-1,0,0,0),A.set(L[0]-1,0,1,0),A.set(0,L[1]-1,0,0),A.set(0,L[1]-1,1,0),A.set(L[0]-1,L[1]-1,0,0),A.set(L[0]-1,L[1]-1,1,0),A}}s.exports=function(b,x,_){return Array.isArray(_)||(_=n(x.dimension,typeof _=="string"?_:"clamp")),x.size===0?b:x.dimension===0?(b.set(0),b):function(g){var A=g.join();if(S=d[A])return S;for(var M=g.length,L=[w,v],E=1;E<=M;++E)L.push(p(E));var S=y.apply(void 0,L);return d[A]=S,S}(_)(b,x)}},3581:function(s){function e(i,c){var l=Math.floor(c),u=c-l,f=0<=l&&l<i.shape[0],d=0<=l+1&&l+1<i.shape[0];return(1-u)*(f?+i.get(l):0)+u*(d?+i.get(l+1):0)}function t(i,c,l){var u=Math.floor(c),f=c-u,d=0<=u&&u<i.shape[0],w=0<=u+1&&u+1<i.shape[0],v=Math.floor(l),p=l-v,y=0<=v&&v<i.shape[1],b=0<=v+1&&v+1<i.shape[1],x=d&&y?i.get(u,v):0,_=d&&b?i.get(u,v+1):0;return(1-p)*((1-f)*x+f*(w&&y?i.get(u+1,v):0))+p*((1-f)*_+f*(w&&b?i.get(u+1,v+1):0))}function n(i,c,l,u){var f=Math.floor(c),d=c-f,w=0<=f&&f<i.shape[0],v=0<=f+1&&f+1<i.shape[0],p=Math.floor(l),y=l-p,b=0<=p&&p<i.shape[1],x=0<=p+1&&p+1<i.shape[1],_=Math.floor(u),g=u-_,A=0<=_&&_<i.shape[2],M=0<=_+1&&_+1<i.shape[2],L=w&&b&&A?i.get(f,p,_):0,E=w&&x&&A?i.get(f,p+1,_):0,S=v&&b&&A?i.get(f+1,p,_):0,O=v&&x&&A?i.get(f+1,p+1,_):0,P=w&&b&&M?i.get(f,p,_+1):0,U=w&&x&&M?i.get(f,p+1,_+1):0;return(1-g)*((1-y)*((1-d)*L+d*S)+y*((1-d)*E+d*O))+g*((1-y)*((1-d)*P+d*(v&&b&&M?i.get(f+1,p,_+1):0))+y*((1-d)*U+d*(v&&x&&M?i.get(f+1,p+1,_+1):0)))}function a(i){var c,l,u=0|i.shape.length,f=new Array(u),d=new Array(u),w=new Array(u),v=new Array(u);for(c=0;c<u;++c)l=+arguments[c+1],f[c]=Math.floor(l),d[c]=l-f[c],w[c]=0<=f[c]&&f[c]<i.shape[c],v[c]=0<=f[c]+1&&f[c]+1<i.shape[c];var p,y,b,x=0;t:for(c=0;c<1<<u;++c){for(y=1,b=i.offset,p=0;p<u;++p)if(c&1<<p){if(!v[p])continue t;y*=d[p],b+=i.stride[p]*(f[p]+1)}else{if(!w[p])continue t;y*=1-d[p],b+=i.stride[p]*f[p]}x+=y*i.data[b]}return x}s.exports=function(i,c,l,u){switch(i.shape.length){case 0:return 0;case 1:return e(i,c);case 2:return t(i,c,l);case 3:return n(i,c,l,u);default:return a.apply(void 0,arguments)}},s.exports.d1=e,s.exports.d2=t,s.exports.d3=n},7498:function(s,e){var t={"float64,2,1,0":function(){return function(l,u,f,d,w){var v=l[0],p=l[1],y=l[2],b=f[0],x=f[1],_=f[2];d|=0;var g=0,A=0,M=0,L=_,E=x-y*_,S=b-p*x;for(M=0;M<v;++M){for(A=0;A<p;++A){for(g=0;g<y;++g)u[d]/=w,d+=L;d+=E}d+=S}}},"uint8,2,0,1,float64,2,1,0":function(){return function(l,u,f,d,w,v,p,y){for(var b=l[0],x=l[1],_=l[2],g=f[0],A=f[1],M=f[2],L=v[0],E=v[1],S=v[2],O=d|=0,P=p|=0,U=0|l[0];U>0;){U<64?(b=U,U=0):(b=64,U-=64);for(var R=0|l[1];R>0;){R<64?(x=R,R=0):(x=64,R-=64),d=O+U*g+R*A,p=P+U*L+R*E;var j=0,B=0,z=0,G=M,V=g-_*M,et=A-b*g,J=S,X=L-_*S,Y=E-b*L;for(z=0;z<x;++z){for(B=0;B<b;++B){for(j=0;j<_;++j)u[d]=w[p]*y,d+=G,p+=J;d+=V,p+=X}d+=et,p+=Y}}}}},"float32,1,0,float32,1,0":function(){return function(l,u,f,d,w,v,p){var y=l[0],b=l[1],x=f[0],_=f[1],g=v[0],A=v[1];d|=0,p|=0;var M=0,L=0,E=_,S=x-b*_,O=A,P=g-b*A;for(L=0;L<y;++L){for(M=0;M<b;++M)u[d]=w[p],d+=E,p+=O;d+=S,p+=P}}},"float32,1,0,float32,0,1":function(){return function(l,u,f,d,w,v,p){for(var y=l[0],b=l[1],x=f[0],_=f[1],g=v[0],A=v[1],M=d|=0,L=p|=0,E=0|l[1];E>0;){E<64?(b=E,E=0):(b=64,E-=64);for(var S=0|l[0];S>0;){S<64?(y=S,S=0):(y=64,S-=64),d=M+E*_+S*x,p=L+E*A+S*g;var O=0,P=0,U=_,R=x-b*_,j=A,B=g-b*A;for(P=0;P<y;++P){for(O=0;O<b;++O)u[d]=w[p],d+=U,p+=j;d+=R,p+=B}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(l,u,f,d,w,v,p){for(var y=l[0],b=l[1],x=l[2],_=f[0],g=f[1],A=f[2],M=v[0],L=v[1],E=v[2],S=d|=0,O=p|=0,P=0|l[2];P>0;){P<64?(x=P,P=0):(x=64,P-=64);for(var U=0|l[0];U>0;){U<64?(y=U,U=0):(y=64,U-=64);for(var R=0|l[1];R>0;){R<64?(b=R,R=0):(b=64,R-=64),d=S+P*A+U*_+R*g,p=O+P*E+U*M+R*L;var j=0,B=0,z=0,G=A,V=_-x*A,et=g-y*_,J=E,X=M-x*E,Y=L-y*M;for(z=0;z<b;++z){for(B=0;B<y;++B){for(j=0;j<x;++j)u[d]=w[p],d+=G,p+=J;d+=V,p+=X}d+=et,p+=Y}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(l,u,f,d,w,v,p){var y=l[0],b=l[1],x=l[2],_=f[0],g=f[1],A=f[2],M=v[0],L=v[1],E=v[2];d|=0,p|=0;var S=0,O=0,P=0,U=A,R=_-x*A,j=g-y*_,B=E,z=M-x*E,G=L-y*M;for(P=0;P<b;++P){for(O=0;O<y;++O){for(S=0;S<x;++S)u[d]=w[p],d+=U,p+=B;d+=R,p+=z}d+=j,p+=G}}}},n=function(l,u){var f=u.join(",");return(0,t[f])()},a={mul:function(l){var u={};return function(f,d,w){var v=f.dtype,p=f.order,y=d.dtype,b=d.order,x=w.dtype,_=w.order,g=[v,p.join(),y,b.join(),x,_.join()].join(),A=u[g];return A||(u[g]=A=l([v,p,y,b,x,_])),A(f.shape.slice(0),f.data,f.stride,0|f.offset,d.data,d.stride,0|d.offset,w.data,w.stride,0|w.offset)}},muls:function(l){var u={};return function(f,d,w){var v=f.dtype,p=f.order,y=d.dtype,b=d.order,x=[v,p.join(),y,b.join()].join(),_=u[x];return _||(u[x]=_=l([v,p,y,b])),_(f.shape.slice(0),f.data,f.stride,0|f.offset,d.data,d.stride,0|d.offset,w)}},mulseq:function(l){var u={};return function(f,d){var w=f.dtype,v=f.order,p=[w,v.join()].join(),y=u[p];return y||(u[p]=y=l([w,v])),y(f.shape.slice(0),f.data,f.stride,0|f.offset,d)}},div:function(l){var u={};return function(f,d,w){var v=f.dtype,p=f.order,y=d.dtype,b=d.order,x=w.dtype,_=w.order,g=[v,p.join(),y,b.join(),x,_.join()].join(),A=u[g];return A||(u[g]=A=l([v,p,y,b,x,_])),A(f.shape.slice(0),f.data,f.stride,0|f.offset,d.data,d.stride,0|d.offset,w.data,w.stride,0|w.offset)}},divs:function(l){var u={};return function(f,d,w){var v=f.dtype,p=f.order,y=d.dtype,b=d.order,x=[v,p.join(),y,b.join()].join(),_=u[x];return _||(u[x]=_=l([v,p,y,b])),_(f.shape.slice(0),f.data,f.stride,0|f.offset,d.data,d.stride,0|d.offset,w)}},divseq:function(l){var u={};return function(f,d){var w=f.dtype,v=f.order,p=[w,v.join()].join(),y=u[p];return y||(u[p]=y=l([w,v])),y(f.shape.slice(0),f.data,f.stride,0|f.offset,d)}},assign:function(l){var u={};return function(f,d){var w=f.dtype,v=f.order,p=d.dtype,y=d.order,b=[w,v.join(),p,y.join()].join(),x=u[b];return x||(u[b]=x=l([w,v,p,y])),x(f.shape.slice(0),f.data,f.stride,0|f.offset,d.data,d.stride,0|d.offset)}}};function i(l){return u={funcName:l.funcName},(0,a[u.funcName])(n.bind(void 0,u));var u}var c={mul:"*",div:"/"};(function(){for(var l in c)e[l]=i({funcName:l}),e[l+"s"]=i({funcName:l+"s"}),e[l+"seq"]=i({funcName:l+"seq"})})(),e.assign=i({funcName:"assign"})},7382:function(s,e,t){var n=t(5050),a=t(9262);s.exports=function(i,c){for(var l=[],u=i,f=1;Array.isArray(u);)l.push(u.length),f*=u.length,u=u[0];return l.length===0?n():(c||(c=n(new Float64Array(f),l)),a(c,i),c)}},9262:function(s){s.exports=function(e){var t={};return function(n,a){var i=n.dtype,c=n.order,l=[i,c.join()].join(),u=t[l];return u||(t[l]=u=e([i,c])),u(n.shape.slice(0),n.data,n.stride,0|n.offset,a)}}(function(){return function(e,t,n,a,i){var c=e[0],l=e[1],u=e[2],f=n[0],d=n[1],w=n[2],v=[0,0,0];a|=0;var p=0,y=0,b=0,x=w,_=d-u*w,g=f-l*d;for(b=0;b<c;++b){for(y=0;y<l;++y){for(p=0;p<u;++p){var A,M=i;for(A=0;A<v.length-1;++A)M=M[v[A]];t[a]=M[v[v.length-1]],a+=x,++v[2]}a+=_,v[2]-=u,++v[1]}a+=g,v[1]-=l,++v[0]}}}.bind(void 0,{funcName:"convert"}))},8139:function(s,e,t){var n=t(5306);function a(u){return u==="uint32"?[n.mallocUint32,n.freeUint32]:null}var i={"uint32,1,0":function(u,f){return function(d,w,v,p,y,b,x,_,g,A,M){var L,E,S,O,P,U,R,j,B=d*y+p,z=u(_);for(L=d+1;L<=w;++L){for(E=L,S=B+=y,P=0,U=B,O=0;O<_;++O)z[P++]=v[U],U+=g;t:for(;E-- >d;){P=0,U=S-y;e:for(O=0;O<_;++O){if((R=v[U])<(j=z[P]))break t;if(R>j)break e;U+=A,P+=M}for(P=S,U=S-y,O=0;O<_;++O)v[P]=v[U],P+=g,U+=g;S-=y}for(P=S,U=0,O=0;O<_;++O)v[P]=z[U++],P+=g}f(z)}}},c={"uint32,1,0":function(u,f,d){return function w(v,p,y,b,x,_,g,A,M,L,E){var S,O,P,U,R,j,B,z,G,V,et,J,X,Y,Z,tt,rt,nt,ot,ct,pt,gt,kt,yt,mt,Ot=(p-v+1)/6|0,vt=v+Ot,xt=p-Ot,st=v+p>>1,at=st-Ot,ht=st+Ot,Lt=vt,Mt=at,_t=st,St=ht,Dt=xt,ut=v+1,Tt=p-1,bt=!0,It=0,zt=0,Ft=0,$t=A,Wt=f($t),Xt=f($t);et=x*Lt,J=x*Mt,mt=b;t:for(V=0;V<A;++V){if(z=J+mt,(Ft=y[B=et+mt]-y[z])>0){O=Lt,Lt=Mt,Mt=O;break t}if(Ft<0)break t;mt+=L}et=x*St,J=x*Dt,mt=b;t:for(V=0;V<A;++V){if(z=J+mt,(Ft=y[B=et+mt]-y[z])>0){O=St,St=Dt,Dt=O;break t}if(Ft<0)break t;mt+=L}et=x*Lt,J=x*_t,mt=b;t:for(V=0;V<A;++V){if(z=J+mt,(Ft=y[B=et+mt]-y[z])>0){O=Lt,Lt=_t,_t=O;break t}if(Ft<0)break t;mt+=L}et=x*Mt,J=x*_t,mt=b;t:for(V=0;V<A;++V){if(z=J+mt,(Ft=y[B=et+mt]-y[z])>0){O=Mt,Mt=_t,_t=O;break t}if(Ft<0)break t;mt+=L}et=x*Lt,J=x*St,mt=b;t:for(V=0;V<A;++V){if(z=J+mt,(Ft=y[B=et+mt]-y[z])>0){O=Lt,Lt=St,St=O;break t}if(Ft<0)break t;mt+=L}et=x*_t,J=x*St,mt=b;t:for(V=0;V<A;++V){if(z=J+mt,(Ft=y[B=et+mt]-y[z])>0){O=_t,_t=St,St=O;break t}if(Ft<0)break t;mt+=L}et=x*Mt,J=x*Dt,mt=b;t:for(V=0;V<A;++V){if(z=J+mt,(Ft=y[B=et+mt]-y[z])>0){O=Mt,Mt=Dt,Dt=O;break t}if(Ft<0)break t;mt+=L}et=x*Mt,J=x*_t,mt=b;t:for(V=0;V<A;++V){if(z=J+mt,(Ft=y[B=et+mt]-y[z])>0){O=Mt,Mt=_t,_t=O;break t}if(Ft<0)break t;mt+=L}et=x*St,J=x*Dt,mt=b;t:for(V=0;V<A;++V){if(z=J+mt,(Ft=y[B=et+mt]-y[z])>0){O=St,St=Dt,Dt=O;break t}if(Ft<0)break t;mt+=L}for(et=x*Lt,J=x*Mt,X=x*_t,Y=x*St,Z=x*Dt,tt=x*vt,rt=x*st,nt=x*xt,yt=0,mt=b,V=0;V<A;++V)B=et+mt,z=J+mt,G=X+mt,ot=Y+mt,ct=Z+mt,pt=tt+mt,gt=rt+mt,kt=nt+mt,Wt[yt]=y[z],Xt[yt]=y[ot],bt=bt&&Wt[yt]===Xt[yt],P=y[B],U=y[G],R=y[ct],y[pt]=P,y[gt]=U,y[kt]=R,++yt,mt+=M;for(et=x*at,J=x*v,mt=b,V=0;V<A;++V)z=J+mt,y[B=et+mt]=y[z],mt+=M;for(et=x*ht,J=x*p,mt=b,V=0;V<A;++V)z=J+mt,y[B=et+mt]=y[z],mt+=M;if(bt)for(j=ut;j<=Tt;++j){for(B=b+j*x,yt=0,V=0;V<A&&(Ft=y[B]-Wt[yt])==0;++V)yt+=E,B+=L;if(Ft!==0)if(Ft<0){if(j!==ut)for(et=x*j,J=x*ut,mt=b,V=0;V<A;++V)z=J+mt,S=y[B=et+mt],y[B]=y[z],y[z]=S,mt+=M;++ut}else for(;;){for(B=b+Tt*x,yt=0,V=0;V<A&&(Ft=y[B]-Wt[yt])==0;++V)yt+=E,B+=L;if(!(Ft>0)){if(Ft<0){for(et=x*j,J=x*ut,X=x*Tt,mt=b,V=0;V<A;++V)z=J+mt,G=X+mt,S=y[B=et+mt],y[B]=y[z],y[z]=y[G],y[G]=S,mt+=M;++ut,--Tt;break}for(et=x*j,J=x*Tt,mt=b,V=0;V<A;++V)z=J+mt,S=y[B=et+mt],y[B]=y[z],y[z]=S,mt+=M;--Tt;break}Tt--}}else for(j=ut;j<=Tt;++j){for(B=b+j*x,yt=0,V=0;V<A&&(It=y[B]-Wt[yt])==0;++V)yt+=E,B+=L;if(It<0){if(j!==ut)for(et=x*j,J=x*ut,mt=b,V=0;V<A;++V)z=J+mt,S=y[B=et+mt],y[B]=y[z],y[z]=S,mt+=M;++ut}else{for(B=b+j*x,yt=0,V=0;V<A&&(zt=y[B]-Xt[yt])==0;++V)yt+=E,B+=L;if(zt>0)for(;;){for(B=b+Tt*x,yt=0,V=0;V<A&&(Ft=y[B]-Xt[yt])==0;++V)yt+=E,B+=L;if(!(Ft>0)){for(B=b+Tt*x,yt=0,V=0;V<A&&(Ft=y[B]-Wt[yt])==0;++V)yt+=E,B+=L;if(Ft<0){for(et=x*j,J=x*ut,X=x*Tt,mt=b,V=0;V<A;++V)z=J+mt,G=X+mt,S=y[B=et+mt],y[B]=y[z],y[z]=y[G],y[G]=S,mt+=M;++ut,--Tt}else{for(et=x*j,J=x*Tt,mt=b,V=0;V<A;++V)z=J+mt,S=y[B=et+mt],y[B]=y[z],y[z]=S,mt+=M;--Tt}break}if(--Tt<j)break}}}for(et=x*v,J=x*(ut-1),yt=0,mt=b,V=0;V<A;++V)z=J+mt,y[B=et+mt]=y[z],y[z]=Wt[yt],++yt,mt+=M;for(et=x*p,J=x*(Tt+1),yt=0,mt=b,V=0;V<A;++V)z=J+mt,y[B=et+mt]=y[z],y[z]=Xt[yt],++yt,mt+=M;if(ut-2-v<=32?u(v,ut-2,y,b,x,_,g,A,M,L,E):w(v,ut-2,y,b,x,_,g,A,M,L,E),p-(Tt+2)<=32?u(Tt+2,p,y,b,x,_,g,A,M,L,E):w(Tt+2,p,y,b,x,_,g,A,M,L,E),bt)return d(Wt),void d(Xt);if(ut<vt&&Tt>xt){t:for(;;){for(B=b+ut*x,yt=0,mt=b,V=0;V<A;++V){if(y[B]!==Wt[yt])break t;++yt,B+=M}++ut}t:for(;;){for(B=b+Tt*x,yt=0,mt=b,V=0;V<A;++V){if(y[B]!==Xt[yt])break t;++yt,B+=M}--Tt}for(j=ut;j<=Tt;++j){for(B=b+j*x,yt=0,V=0;V<A&&(It=y[B]-Wt[yt])==0;++V)yt+=E,B+=L;if(It===0){if(j!==ut)for(et=x*j,J=x*ut,mt=b,V=0;V<A;++V)z=J+mt,S=y[B=et+mt],y[B]=y[z],y[z]=S,mt+=M;++ut}else{for(B=b+j*x,yt=0,V=0;V<A&&(zt=y[B]-Xt[yt])==0;++V)yt+=E,B+=L;if(zt===0)for(;;){for(B=b+Tt*x,yt=0,V=0;V<A&&(Ft=y[B]-Xt[yt])==0;++V)yt+=E,B+=L;if(Ft!==0){for(B=b+Tt*x,yt=0,V=0;V<A&&(Ft=y[B]-Wt[yt])==0;++V)yt+=E,B+=L;if(Ft<0){for(et=x*j,J=x*ut,X=x*Tt,mt=b,V=0;V<A;++V)z=J+mt,G=X+mt,S=y[B=et+mt],y[B]=y[z],y[z]=y[G],y[G]=S,mt+=M;++ut,--Tt}else{for(et=x*j,J=x*Tt,mt=b,V=0;V<A;++V)z=J+mt,S=y[B=et+mt],y[B]=y[z],y[z]=S,mt+=M;--Tt}break}if(--Tt<j)break}}}}d(Wt),d(Xt),Tt-ut<=32?u(ut,Tt,y,b,x,_,g,A,M,L,E):w(ut,Tt,y,b,x,_,g,A,M,L,E)}}},l={"uint32,1,0":function(u,f){return function(d){var w=d.data,v=0|d.offset,p=d.shape,y=d.stride,b=0|y[0],x=0|p[0],_=0|y[1],g=0|p[1],A=_,M=_;x<=32?u(0,x-1,w,v,b,_,x,g,A,M,1):f(0,x-1,w,v,b,_,x,g,A,M,1)}}};s.exports=function(u,f){var d=[f,u].join(","),w=l[d],v=function(y,b){var x=a(b),_=[b,y].join(","),g=i[_];return x?g(x[0],x[1]):g()}(u,f),p=function(y,b,x){var _=a(b),g=[b,y].join(","),A=c[g];return y.length>1&&_?A(x,_[0],_[1]):A(x)}(u,f,v);return w(v,p)}},8729:function(s,e,t){var n=t(8139),a={};s.exports=function(i){var c=i.order,l=i.dtype,u=[c,l].join(":"),f=a[u];return f||(a[u]=f=n(c,l)),f(i),i}},5050:function(s,e,t){var n=t(4780),a=typeof Float64Array<"u";function i(d,w){return d[0]-w[0]}function c(){var d,w=this.stride,v=new Array(w.length);for(d=0;d<v.length;++d)v[d]=[Math.abs(w[d]),d];v.sort(i);var p=new Array(v.length);for(d=0;d<p.length;++d)p[d]=v[d][1];return p}var l={T:function(d){function w(p){this.data=p}var v=w.prototype;return v.dtype=d,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new w(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(p){return new w(p)}},0:function(d,w){function v(y,b){this.data=y,this.offset=b}var p=v.prototype;return p.dtype=d,p.index=function(){return this.offset},p.dimension=0,p.size=1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new v(this.data,this.offset)},p.pick=function(){return w(this.data)},p.valueOf=p.get=function(){return d==="generic"?this.data.get(this.offset):this.data[this.offset]},p.set=function(y){return d==="generic"?this.data.set(this.offset,y):this.data[this.offset]=y},function(y,b,x,_){return new v(y,_)}},1:function(d,w,v){function p(b,x,_,g){this.data=b,this.shape=[x],this.stride=[_],this.offset=0|g}var y=p.prototype;return y.dtype=d,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(b,x){return d==="generic"?this.data.set(this.offset+this.stride[0]*b,x):this.data[this.offset+this.stride[0]*b]=x},y.get=function(b){return d==="generic"?this.data.get(this.offset+this.stride[0]*b):this.data[this.offset+this.stride[0]*b]},y.index=function(b){return this.offset+this.stride[0]*b},y.hi=function(b){return new p(this.data,typeof b!="number"||b<0?this.shape[0]:0|b,this.stride[0],this.offset)},y.lo=function(b){var x=this.offset,_=0,g=this.shape[0],A=this.stride[0];return typeof b=="number"&&b>=0&&(x+=A*(_=0|b),g-=_),new p(this.data,g,A,x)},y.step=function(b){var x=this.shape[0],_=this.stride[0],g=this.offset,A=0,M=Math.ceil;return typeof b=="number"&&((A=0|b)<0?(g+=_*(x-1),x=M(-x/A)):x=M(x/A),_*=A),new p(this.data,x,_,g)},y.transpose=function(b){b=b===void 0?0:0|b;var x=this.shape,_=this.stride;return new p(this.data,x[b],_[b],this.offset)},y.pick=function(b){var x=[],_=[],g=this.offset;return typeof b=="number"&&b>=0?g=g+this.stride[0]*b|0:(x.push(this.shape[0]),_.push(this.stride[0])),(0,w[x.length+1])(this.data,x,_,g)},function(b,x,_,g){return new p(b,x[0],_[0],g)}},2:function(d,w,v){function p(b,x,_,g,A,M){this.data=b,this.shape=[x,_],this.stride=[g,A],this.offset=0|M}var y=p.prototype;return y.dtype=d,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(b,x,_){return d==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*x,_):this.data[this.offset+this.stride[0]*b+this.stride[1]*x]=_},y.get=function(b,x){return d==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*x):this.data[this.offset+this.stride[0]*b+this.stride[1]*x]},y.index=function(b,x){return this.offset+this.stride[0]*b+this.stride[1]*x},y.hi=function(b,x){return new p(this.data,typeof b!="number"||b<0?this.shape[0]:0|b,typeof x!="number"||x<0?this.shape[1]:0|x,this.stride[0],this.stride[1],this.offset)},y.lo=function(b,x){var _=this.offset,g=0,A=this.shape[0],M=this.shape[1],L=this.stride[0],E=this.stride[1];return typeof b=="number"&&b>=0&&(_+=L*(g=0|b),A-=g),typeof x=="number"&&x>=0&&(_+=E*(g=0|x),M-=g),new p(this.data,A,M,L,E,_)},y.step=function(b,x){var _=this.shape[0],g=this.shape[1],A=this.stride[0],M=this.stride[1],L=this.offset,E=0,S=Math.ceil;return typeof b=="number"&&((E=0|b)<0?(L+=A*(_-1),_=S(-_/E)):_=S(_/E),A*=E),typeof x=="number"&&((E=0|x)<0?(L+=M*(g-1),g=S(-g/E)):g=S(g/E),M*=E),new p(this.data,_,g,A,M,L)},y.transpose=function(b,x){b=b===void 0?0:0|b,x=x===void 0?1:0|x;var _=this.shape,g=this.stride;return new p(this.data,_[b],_[x],g[b],g[x],this.offset)},y.pick=function(b,x){var _=[],g=[],A=this.offset;return typeof b=="number"&&b>=0?A=A+this.stride[0]*b|0:(_.push(this.shape[0]),g.push(this.stride[0])),typeof x=="number"&&x>=0?A=A+this.stride[1]*x|0:(_.push(this.shape[1]),g.push(this.stride[1])),(0,w[_.length+1])(this.data,_,g,A)},function(b,x,_,g){return new p(b,x[0],x[1],_[0],_[1],g)}},3:function(d,w,v){function p(b,x,_,g,A,M,L,E){this.data=b,this.shape=[x,_,g],this.stride=[A,M,L],this.offset=0|E}var y=p.prototype;return y.dtype=d,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var b=Math.abs(this.stride[0]),x=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return b>x?x>_?[2,1,0]:b>_?[1,2,0]:[1,0,2]:b>_?[2,0,1]:_>x?[0,1,2]:[0,2,1]}}),y.set=function(b,x,_,g){return d==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_,g):this.data[this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_]=g},y.get=function(b,x,_){return d==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_):this.data[this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_]},y.index=function(b,x,_){return this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_},y.hi=function(b,x,_){return new p(this.data,typeof b!="number"||b<0?this.shape[0]:0|b,typeof x!="number"||x<0?this.shape[1]:0|x,typeof _!="number"||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(b,x,_){var g=this.offset,A=0,M=this.shape[0],L=this.shape[1],E=this.shape[2],S=this.stride[0],O=this.stride[1],P=this.stride[2];return typeof b=="number"&&b>=0&&(g+=S*(A=0|b),M-=A),typeof x=="number"&&x>=0&&(g+=O*(A=0|x),L-=A),typeof _=="number"&&_>=0&&(g+=P*(A=0|_),E-=A),new p(this.data,M,L,E,S,O,P,g)},y.step=function(b,x,_){var g=this.shape[0],A=this.shape[1],M=this.shape[2],L=this.stride[0],E=this.stride[1],S=this.stride[2],O=this.offset,P=0,U=Math.ceil;return typeof b=="number"&&((P=0|b)<0?(O+=L*(g-1),g=U(-g/P)):g=U(g/P),L*=P),typeof x=="number"&&((P=0|x)<0?(O+=E*(A-1),A=U(-A/P)):A=U(A/P),E*=P),typeof _=="number"&&((P=0|_)<0?(O+=S*(M-1),M=U(-M/P)):M=U(M/P),S*=P),new p(this.data,g,A,M,L,E,S,O)},y.transpose=function(b,x,_){b=b===void 0?0:0|b,x=x===void 0?1:0|x,_=_===void 0?2:0|_;var g=this.shape,A=this.stride;return new p(this.data,g[b],g[x],g[_],A[b],A[x],A[_],this.offset)},y.pick=function(b,x,_){var g=[],A=[],M=this.offset;return typeof b=="number"&&b>=0?M=M+this.stride[0]*b|0:(g.push(this.shape[0]),A.push(this.stride[0])),typeof x=="number"&&x>=0?M=M+this.stride[1]*x|0:(g.push(this.shape[1]),A.push(this.stride[1])),typeof _=="number"&&_>=0?M=M+this.stride[2]*_|0:(g.push(this.shape[2]),A.push(this.stride[2])),(0,w[g.length+1])(this.data,g,A,M)},function(b,x,_,g){return new p(b,x[0],x[1],x[2],_[0],_[1],_[2],g)}},4:function(d,w,v){function p(b,x,_,g,A,M,L,E,S,O){this.data=b,this.shape=[x,_,g,A],this.stride=[M,L,E,S],this.offset=0|O}var y=p.prototype;return y.dtype=d,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(b,x,_,g,A){return d==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_+this.stride[3]*g,A):this.data[this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_+this.stride[3]*g]=A},y.get=function(b,x,_,g){return d==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_+this.stride[3]*g):this.data[this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_+this.stride[3]*g]},y.index=function(b,x,_,g){return this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_+this.stride[3]*g},y.hi=function(b,x,_,g){return new p(this.data,typeof b!="number"||b<0?this.shape[0]:0|b,typeof x!="number"||x<0?this.shape[1]:0|x,typeof _!="number"||_<0?this.shape[2]:0|_,typeof g!="number"||g<0?this.shape[3]:0|g,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(b,x,_,g){var A=this.offset,M=0,L=this.shape[0],E=this.shape[1],S=this.shape[2],O=this.shape[3],P=this.stride[0],U=this.stride[1],R=this.stride[2],j=this.stride[3];return typeof b=="number"&&b>=0&&(A+=P*(M=0|b),L-=M),typeof x=="number"&&x>=0&&(A+=U*(M=0|x),E-=M),typeof _=="number"&&_>=0&&(A+=R*(M=0|_),S-=M),typeof g=="number"&&g>=0&&(A+=j*(M=0|g),O-=M),new p(this.data,L,E,S,O,P,U,R,j,A)},y.step=function(b,x,_,g){var A=this.shape[0],M=this.shape[1],L=this.shape[2],E=this.shape[3],S=this.stride[0],O=this.stride[1],P=this.stride[2],U=this.stride[3],R=this.offset,j=0,B=Math.ceil;return typeof b=="number"&&((j=0|b)<0?(R+=S*(A-1),A=B(-A/j)):A=B(A/j),S*=j),typeof x=="number"&&((j=0|x)<0?(R+=O*(M-1),M=B(-M/j)):M=B(M/j),O*=j),typeof _=="number"&&((j=0|_)<0?(R+=P*(L-1),L=B(-L/j)):L=B(L/j),P*=j),typeof g=="number"&&((j=0|g)<0?(R+=U*(E-1),E=B(-E/j)):E=B(E/j),U*=j),new p(this.data,A,M,L,E,S,O,P,U,R)},y.transpose=function(b,x,_,g){b=b===void 0?0:0|b,x=x===void 0?1:0|x,_=_===void 0?2:0|_,g=g===void 0?3:0|g;var A=this.shape,M=this.stride;return new p(this.data,A[b],A[x],A[_],A[g],M[b],M[x],M[_],M[g],this.offset)},y.pick=function(b,x,_,g){var A=[],M=[],L=this.offset;return typeof b=="number"&&b>=0?L=L+this.stride[0]*b|0:(A.push(this.shape[0]),M.push(this.stride[0])),typeof x=="number"&&x>=0?L=L+this.stride[1]*x|0:(A.push(this.shape[1]),M.push(this.stride[1])),typeof _=="number"&&_>=0?L=L+this.stride[2]*_|0:(A.push(this.shape[2]),M.push(this.stride[2])),typeof g=="number"&&g>=0?L=L+this.stride[3]*g|0:(A.push(this.shape[3]),M.push(this.stride[3])),(0,w[A.length+1])(this.data,A,M,L)},function(b,x,_,g){return new p(b,x[0],x[1],x[2],x[3],_[0],_[1],_[2],_[3],g)}},5:function(d,w,v){function p(b,x,_,g,A,M,L,E,S,O,P,U){this.data=b,this.shape=[x,_,g,A,M],this.stride=[L,E,S,O,P],this.offset=0|U}var y=p.prototype;return y.dtype=d,y.dimension=5,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(b,x,_,g,A,M){return d==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_+this.stride[3]*g+this.stride[4]*A,M):this.data[this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_+this.stride[3]*g+this.stride[4]*A]=M},y.get=function(b,x,_,g,A){return d==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_+this.stride[3]*g+this.stride[4]*A):this.data[this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_+this.stride[3]*g+this.stride[4]*A]},y.index=function(b,x,_,g,A){return this.offset+this.stride[0]*b+this.stride[1]*x+this.stride[2]*_+this.stride[3]*g+this.stride[4]*A},y.hi=function(b,x,_,g,A){return new p(this.data,typeof b!="number"||b<0?this.shape[0]:0|b,typeof x!="number"||x<0?this.shape[1]:0|x,typeof _!="number"||_<0?this.shape[2]:0|_,typeof g!="number"||g<0?this.shape[3]:0|g,typeof A!="number"||A<0?this.shape[4]:0|A,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},y.lo=function(b,x,_,g,A){var M=this.offset,L=0,E=this.shape[0],S=this.shape[1],O=this.shape[2],P=this.shape[3],U=this.shape[4],R=this.stride[0],j=this.stride[1],B=this.stride[2],z=this.stride[3],G=this.stride[4];return typeof b=="number"&&b>=0&&(M+=R*(L=0|b),E-=L),typeof x=="number"&&x>=0&&(M+=j*(L=0|x),S-=L),typeof _=="number"&&_>=0&&(M+=B*(L=0|_),O-=L),typeof g=="number"&&g>=0&&(M+=z*(L=0|g),P-=L),typeof A=="number"&&A>=0&&(M+=G*(L=0|A),U-=L),new p(this.data,E,S,O,P,U,R,j,B,z,G,M)},y.step=function(b,x,_,g,A){var M=this.shape[0],L=this.shape[1],E=this.shape[2],S=this.shape[3],O=this.shape[4],P=this.stride[0],U=this.stride[1],R=this.stride[2],j=this.stride[3],B=this.stride[4],z=this.offset,G=0,V=Math.ceil;return typeof b=="number"&&((G=0|b)<0?(z+=P*(M-1),M=V(-M/G)):M=V(M/G),P*=G),typeof x=="number"&&((G=0|x)<0?(z+=U*(L-1),L=V(-L/G)):L=V(L/G),U*=G),typeof _=="number"&&((G=0|_)<0?(z+=R*(E-1),E=V(-E/G)):E=V(E/G),R*=G),typeof g=="number"&&((G=0|g)<0?(z+=j*(S-1),S=V(-S/G)):S=V(S/G),j*=G),typeof A=="number"&&((G=0|A)<0?(z+=B*(O-1),O=V(-O/G)):O=V(O/G),B*=G),new p(this.data,M,L,E,S,O,P,U,R,j,B,z)},y.transpose=function(b,x,_,g,A){b=b===void 0?0:0|b,x=x===void 0?1:0|x,_=_===void 0?2:0|_,g=g===void 0?3:0|g,A=A===void 0?4:0|A;var M=this.shape,L=this.stride;return new p(this.data,M[b],M[x],M[_],M[g],M[A],L[b],L[x],L[_],L[g],L[A],this.offset)},y.pick=function(b,x,_,g,A){var M=[],L=[],E=this.offset;return typeof b=="number"&&b>=0?E=E+this.stride[0]*b|0:(M.push(this.shape[0]),L.push(this.stride[0])),typeof x=="number"&&x>=0?E=E+this.stride[1]*x|0:(M.push(this.shape[1]),L.push(this.stride[1])),typeof _=="number"&&_>=0?E=E+this.stride[2]*_|0:(M.push(this.shape[2]),L.push(this.stride[2])),typeof g=="number"&&g>=0?E=E+this.stride[3]*g|0:(M.push(this.shape[3]),L.push(this.stride[3])),typeof A=="number"&&A>=0?E=E+this.stride[4]*A|0:(M.push(this.shape[4]),L.push(this.stride[4])),(0,w[M.length+1])(this.data,M,L,E)},function(b,x,_,g){return new p(b,x[0],x[1],x[2],x[3],x[4],_[0],_[1],_[2],_[3],_[4],g)}}};function u(d,w){var v=w===-1?"T":String(w),p=l[v];return w===-1?p(d):w===0?p(d,f[d][0]):p(d,f[d],c)}var f={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};s.exports=function(d,w,v,p){if(d===void 0)return(0,f.array[0])([]);typeof d=="number"&&(d=[d]),w===void 0&&(w=[d.length]);var y=w.length;if(v===void 0){v=new Array(y);for(var b=y-1,x=1;b>=0;--b)v[b]=x,x*=w[b]}if(p===void 0)for(p=0,b=0;b<y;++b)v[b]<0&&(p-=(w[b]-1)*v[b]);for(var _=function(A){if(n(A))return"buffer";if(a)switch(Object.prototype.toString.call(A)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(A)?"array":"generic"}(d),g=f[_];g.length<=y+1;)g.push(u(_,g.length-1));return(0,g[y+1])(d,w,v,p)}},8551:function(s,e,t){var n=t(8362),a=Math.pow(2,-1074),i=-1>>>0;s.exports=function(c,l){if(isNaN(c)||isNaN(l))return NaN;if(c===l)return c;if(c===0)return l<0?-a:a;var u=n.hi(c),f=n.lo(c);return l>c==c>0?f===i?(u+=1,f=0):f+=1:f===0?(f=i,u-=1):f-=1,n.pack(f,u)}},115:function(s,e){e.vertexNormals=function(t,n,a){for(var i=n.length,c=new Array(i),l=a===void 0?1e-6:a,u=0;u<i;++u)c[u]=[0,0,0];for(u=0;u<t.length;++u)for(var f=t[u],d=0,w=f[f.length-1],v=f[0],p=0;p<f.length;++p){d=w,w=v,v=f[(p+1)%f.length];for(var y=n[d],b=n[w],x=n[v],_=new Array(3),g=0,A=new Array(3),M=0,L=0;L<3;++L)_[L]=y[L]-b[L],g+=_[L]*_[L],A[L]=x[L]-b[L],M+=A[L]*A[L];if(g*M>l){var E=c[w],S=1/Math.sqrt(g*M);for(L=0;L<3;++L){var O=(L+1)%3,P=(L+2)%3;E[L]+=S*(A[O]*_[P]-A[P]*_[O])}}}for(u=0;u<i;++u){E=c[u];var U=0;for(L=0;L<3;++L)U+=E[L]*E[L];if(U>l)for(S=1/Math.sqrt(U),L=0;L<3;++L)E[L]*=S;else for(L=0;L<3;++L)E[L]=0}return c},e.faceNormals=function(t,n,a){for(var i=t.length,c=new Array(i),l=a===void 0?1e-6:a,u=0;u<i;++u){for(var f=t[u],d=new Array(3),w=0;w<3;++w)d[w]=n[f[w]];var v=new Array(3),p=new Array(3);for(w=0;w<3;++w)v[w]=d[1][w]-d[0][w],p[w]=d[2][w]-d[0][w];var y=new Array(3),b=0;for(w=0;w<3;++w){var x=(w+1)%3,_=(w+2)%3;y[w]=v[x]*p[_]-v[_]*p[x],b+=y[w]*y[w]}for(b=b>l?1/Math.sqrt(b):0,w=0;w<3;++w)y[w]*=b;c[u]=y}return c}},567:function(s){s.exports=function(e,t,n,a,i,c,l,u,f,d){var w=t+c+d;if(v>0){var v=Math.sqrt(w+1);e[0]=.5*(l-f)/v,e[1]=.5*(u-a)/v,e[2]=.5*(n-c)/v,e[3]=.5*v}else{var p=Math.max(t,c,d);v=Math.sqrt(2*p-w+1),t>=p?(e[0]=.5*v,e[1]=.5*(i+n)/v,e[2]=.5*(u+a)/v,e[3]=.5*(l-f)/v):c>=p?(e[0]=.5*(n+i)/v,e[1]=.5*v,e[2]=.5*(f+l)/v,e[3]=.5*(u-a)/v):(e[0]=.5*(a+u)/v,e[1]=.5*(l+f)/v,e[2]=.5*v,e[3]=.5*(n-i)/v)}return e}},7774:function(s,e,t){s.exports=function(p){var y=(p=p||{}).center||[0,0,0],b=p.rotation||[0,0,0,1],x=p.radius||1;y=[].slice.call(y,0,3),d(b=[].slice.call(b,0,4),b);var _=new w(b,y,Math.log(x));return _.setDistanceLimits(p.zoomMin,p.zoomMax),("eye"in p||"up"in p)&&_.lookAt(0,p.eye,p.center,p.up),_};var n=t(8444),a=t(3012),i=t(5950),c=t(7437),l=t(567);function u(p,y,b){return Math.sqrt(Math.pow(p,2)+Math.pow(y,2)+Math.pow(b,2))}function f(p,y,b,x){return Math.sqrt(Math.pow(p,2)+Math.pow(y,2)+Math.pow(b,2)+Math.pow(x,2))}function d(p,y){var b=y[0],x=y[1],_=y[2],g=y[3],A=f(b,x,_,g);A>1e-6?(p[0]=b/A,p[1]=x/A,p[2]=_/A,p[3]=g/A):(p[0]=p[1]=p[2]=0,p[3]=1)}function w(p,y,b){this.radius=n([b]),this.center=n(y),this.rotation=n(p),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var v=w.prototype;v.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},v.recalcMatrix=function(p){this.radius.curve(p),this.center.curve(p),this.rotation.curve(p);var y=this.computedRotation;d(y,y);var b=this.computedMatrix;i(b,y);var x=this.computedCenter,_=this.computedEye,g=this.computedUp,A=Math.exp(this.computedRadius[0]);_[0]=x[0]+A*b[2],_[1]=x[1]+A*b[6],_[2]=x[2]+A*b[10],g[0]=b[1],g[1]=b[5],g[2]=b[9];for(var M=0;M<3;++M){for(var L=0,E=0;E<3;++E)L+=b[M+4*E]*_[E];b[12+M]=-L}},v.getMatrix=function(p,y){this.recalcMatrix(p);var b=this.computedMatrix;if(y){for(var x=0;x<16;++x)y[x]=b[x];return y}return b},v.idle=function(p){this.center.idle(p),this.radius.idle(p),this.rotation.idle(p)},v.flush=function(p){this.center.flush(p),this.radius.flush(p),this.rotation.flush(p)},v.pan=function(p,y,b,x){y=y||0,b=b||0,x=x||0,this.recalcMatrix(p);var _=this.computedMatrix,g=_[1],A=_[5],M=_[9],L=u(g,A,M);g/=L,A/=L,M/=L;var E=_[0],S=_[4],O=_[8],P=E*g+S*A+O*M,U=u(E-=g*P,S-=A*P,O-=M*P);E/=U,S/=U,O/=U,_[2],_[6],_[10];var R=E*y+g*b,j=S*y+A*b,B=O*y+M*b;this.center.move(p,R,j,B);var z=Math.exp(this.computedRadius[0]);z=Math.max(1e-4,z+x),this.radius.set(p,Math.log(z))},v.rotate=function(p,y,b,x){this.recalcMatrix(p),y=y||0,b=b||0;var _=this.computedMatrix,g=_[0],A=_[4],M=_[8],L=_[1],E=_[5],S=_[9],O=_[2],P=_[6],U=_[10],R=y*g+b*L,j=y*A+b*E,B=y*M+b*S,z=-(P*B-U*j),G=-(U*R-O*B),V=-(O*j-P*R),et=Math.sqrt(Math.max(0,1-Math.pow(z,2)-Math.pow(G,2)-Math.pow(V,2))),J=f(z,G,V,et);J>1e-6?(z/=J,G/=J,V/=J,et/=J):(z=G=V=0,et=1);var X=this.computedRotation,Y=X[0],Z=X[1],tt=X[2],rt=X[3],nt=Y*et+rt*z+Z*V-tt*G,ot=Z*et+rt*G+tt*z-Y*V,ct=tt*et+rt*V+Y*G-Z*z,pt=rt*et-Y*z-Z*G-tt*V;if(x){z=O,G=P,V=U;var gt=Math.sin(x)/u(z,G,V);z*=gt,G*=gt,V*=gt,pt=pt*(et=Math.cos(y))-(nt=nt*et+pt*z+ot*V-ct*G)*z-(ot=ot*et+pt*G+ct*z-nt*V)*G-(ct=ct*et+pt*V+nt*G-ot*z)*V}var kt=f(nt,ot,ct,pt);kt>1e-6?(nt/=kt,ot/=kt,ct/=kt,pt/=kt):(nt=ot=ct=0,pt=1),this.rotation.set(p,nt,ot,ct,pt)},v.lookAt=function(p,y,b,x){this.recalcMatrix(p),b=b||this.computedCenter,y=y||this.computedEye,x=x||this.computedUp;var _=this.computedMatrix;a(_,y,b,x);var g=this.computedRotation;l(g,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),d(g,g),this.rotation.set(p,g[0],g[1],g[2],g[3]);for(var A=0,M=0;M<3;++M)A+=Math.pow(b[M]-y[M],2);this.radius.set(p,.5*Math.log(Math.max(A,1e-6))),this.center.set(p,b[0],b[1],b[2])},v.translate=function(p,y,b,x){this.center.move(p,y||0,b||0,x||0)},v.setMatrix=function(p,y){var b=this.computedRotation;l(b,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),d(b,b),this.rotation.set(p,b[0],b[1],b[2],b[3]);var x=this.computedMatrix;c(x,y);var _=x[15];if(Math.abs(_)>1e-6){var g=x[12]/_,A=x[13]/_,M=x[14]/_;this.recalcMatrix(p);var L=Math.exp(this.computedRadius[0]);this.center.set(p,g-x[2]*L,A-x[6]*L,M-x[10]*L),this.radius.idle(p)}else this.center.idle(p),this.radius.idle(p)},v.setDistance=function(p,y){y>0&&this.radius.set(p,Math.log(y))},v.setDistanceLimits=function(p,y){p=p>0?Math.log(p):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=y},v.getDistanceLimits=function(p){var y=this.radius.bounds;return p?(p[0]=Math.exp(y[0][0]),p[1]=Math.exp(y[1][0]),p):[Math.exp(y[0][0]),Math.exp(y[1][0])]},v.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},v.fromJSON=function(p){var y=this.lastT(),b=p.center;b&&this.center.set(y,b[0],b[1],b[2]);var x=p.rotation;x&&this.rotation.set(y,x[0],x[1],x[2],x[3]);var _=p.distance;_&&_>0&&this.radius.set(y,Math.log(_)),this.setDistanceLimits(p.zoomMin,p.zoomMax)}},4930:function(s,e,t){var n=t(6184);s.exports=function(a,i,c){return n(c=c!==void 0?c+"":" ",i)+a}},4405:function(s){s.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},4166:function(s,e,t){s.exports=function(a,i){for(var c=0|i.length,l=a.length,u=[new Array(c),new Array(c)],f=0;f<c;++f)u[0][f]=[],u[1][f]=[];for(f=0;f<l;++f){var d=a[f];u[0][d[0]].push(d),u[1][d[1]].push(d)}var w=[];for(f=0;f<c;++f)u[0][f].length+u[1][f].length===0&&w.push([f]);function v(A,M){var L=u[M][A[M]];L.splice(L.indexOf(A),1)}function p(A,M,L){for(var E,S,O,P=0;P<2;++P)if(u[P][M].length>0){E=u[P][M][0],O=P;break}S=E[1^O];for(var U=0;U<2;++U)for(var R=u[U][M],j=0;j<R.length;++j){var B=R[j],z=B[1^U];n(i[A],i[M],i[S],i[z])>0&&(E=B,S=z,O=U)}return L||E&&v(E,O),S}function y(A,M){var L=u[M][A][0],E=[A];v(L,M);for(var S=L[1^M];;){for(;S!==A;)E.push(S),S=p(E[E.length-2],S,!1);if(u[0][A].length+u[1][A].length===0)break;var O=E[E.length-1],P=A,U=E[1],R=p(O,P,!0);if(n(i[O],i[P],i[U],i[R])<0)break;E.push(A),S=p(O,P)}return E}function b(A,M){return M[1]===M[M.length-1]}for(f=0;f<c;++f)for(var x=0;x<2;++x){for(var _=[];u[x][f].length>0;){u[0][f].length;var g=y(f,x);b(0,g)?_.push.apply(_,g):(_.length>0&&w.push(_),_=g)}_.length>0&&w.push(_)}return w};var n=t(9398)},3959:function(s,e,t){s.exports=function(a,i){for(var c=n(a,i.length),l=new Array(i.length),u=new Array(i.length),f=[],d=0;d<i.length;++d){var w=c[d].length;u[d]=w,l[d]=!0,w<=1&&f.push(d)}for(;f.length>0;){l[x=f.pop()]=!1;var v=c[x];for(d=0;d<v.length;++d){var p=v[d];--u[p]==0&&f.push(p)}}var y=new Array(i.length),b=[];for(d=0;d<i.length;++d)if(l[d]){var x=b.length;y[d]=x,b.push(i[d])}else y[d]=-1;var _=[];for(d=0;d<a.length;++d){var g=a[d];l[g[0]]&&l[g[1]]&&_.push([y[g[0]],y[g[1]]])}return[_,b]};var n=t(8348)},8040:function(s,e,t){s.exports=function(w,v){var p=f(w,v);w=p[0];for(var y=(v=p[1]).length,b=(w.length,n(w,v.length)),x=0;x<y;++x)if(b[x].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=a(w,v),g=(_=_.filter(function(Ot){for(var vt=Ot.length,xt=[0],st=0;st<vt;++st){var at=v[Ot[st]],ht=v[Ot[(st+1)%vt]],Lt=c(-at[0],at[1]),Mt=c(-at[0],ht[1]),_t=c(ht[0],at[1]),St=c(ht[0],ht[1]);xt=l(xt,l(l(Lt,Mt),l(_t,St)))}return xt[xt.length-1]>0})).length,A=new Array(g),M=new Array(g);for(x=0;x<g;++x){A[x]=x;var L=new Array(g),E=_[x].map(function(Ot){return v[Ot]}),S=i([E]),O=0;t:for(var P=0;P<g;++P)if(L[P]=0,x!==P){for(var U=(yt=_[P]).length,R=0;R<U;++R){var j=S(v[yt[R]]);if(j!==0){j<0&&(L[P]=1,O+=1);continue t}}L[P]=1,O+=1}M[x]=[O,x,L]}for(M.sort(function(Ot,vt){return vt[0]-Ot[0]}),x=0;x<g;++x){var B=(L=M[x])[1],z=L[2];for(P=0;P<g;++P)z[P]&&(A[P]=B)}var G=function(Ot){for(var vt=new Array(Ot),xt=0;xt<Ot;++xt)vt[xt]=[];return vt}(g);for(x=0;x<g;++x)G[x].push(A[x]),G[A[x]].push(x);var V={},et=d(y,!1);for(x=0;x<g;++x)for(U=(yt=_[x]).length,P=0;P<U;++P){var J=yt[P],X=yt[(P+1)%U],Y=Math.min(J,X)+":"+Math.max(J,X);if(Y in V){var Z=V[Y];G[Z].push(x),G[x].push(Z),et[J]=et[X]=!0}else V[Y]=x}function tt(Ot){for(var vt=Ot.length,xt=0;xt<vt;++xt)if(!et[Ot[xt]])return!1;return!0}var rt=[],nt=d(g,-1);for(x=0;x<g;++x)A[x]!==x||tt(_[x])?nt[x]=-1:(rt.push(x),nt[x]=0);for(p=[];rt.length>0;){var ot=rt.pop(),ct=G[ot];u(ct,function(Ot,vt){return Ot-vt});var pt,gt=ct.length,kt=nt[ot];for(kt===0&&(pt=[yt=_[ot]]),x=0;x<gt;++x){var yt,mt=ct[x];nt[mt]>=0||(nt[mt]=1^kt,rt.push(mt),kt===0&&(tt(yt=_[mt])||(yt.reverse(),pt.push(yt))))}kt===0&&p.push(pt)}return p};var n=t(8348),a=t(4166),i=t(211),c=t(9660),l=t(9662),u=t(1215),f=t(3959);function d(w,v){for(var p=new Array(w),y=0;y<w;++y)p[y]=v;return p}},211:function(s,e,t){s.exports=function(d){for(var w=d.length,v=[],p=[],y=0;y<w;++y)for(var b=d[y],x=b.length,_=x-1,g=0;g<x;_=g++){var A=b[_],M=b[g];A[0]===M[0]?p.push([A,M]):v.push([A,M])}if(v.length===0)return p.length===0?f:(L=u(p),function(O){return L(O[0],O[1])?0:1});var L,E=a(v),S=function(O,P){return function(U){var R=c.le(P,U[0]);if(R<0)return 1;var j=O[R];if(!j){if(!(R>0&&P[R]===U[0]))return 1;j=O[R-1]}for(var B=1;j;){var z=j.key,G=n(U,z[0],z[1]);if(z[0][0]<z[1][0])if(G<0)j=j.left;else{if(!(G>0))return 0;B=-1,j=j.right}else if(G>0)j=j.left;else{if(!(G<0))return 0;B=1,j=j.right}}return B}}(E.slabs,E.coordinates);return p.length===0?S:function(O,P){return function(U){return O(U[0],U[1])?0:P(U)}}(u(p),S)};var n=t(417)[3],a=t(4385),i=t(9014),c=t(5070);function l(){return!0}function u(d){for(var w={},v=0;v<d.length;++v){var p=d[v],y=p[0][0],b=p[0][1],x=p[1][1],_=[Math.min(b,x),Math.max(b,x)];y in w?w[y].push(_):w[y]=[_]}var g={},A=Object.keys(w);for(v=0;v<A.length;++v){var M=w[A[v]];g[A[v]]=i(M)}return function(L){return function(E,S){var O=L[E];return!!O&&!!O.queryPoint(S,l)}}(g)}function f(d){return 1}},7309:function(s){var e=new Float64Array(4),t=new Float64Array(4),n=new Float64Array(4);s.exports=function(a,i,c,l,u){e.length<l.length&&(e=new Float64Array(l.length),t=new Float64Array(l.length),n=new Float64Array(l.length));for(var f=0;f<l.length;++f)e[f]=a[f]-l[f],t[f]=i[f]-a[f],n[f]=c[f]-a[f];var d=0,w=0,v=0,p=0,y=0,b=0;for(f=0;f<l.length;++f){var x=t[f],_=n[f],g=e[f];d+=x*x,w+=x*_,v+=_*_,p+=g*x,y+=g*_,b+=g*g}var A,M,L,E,S,O=Math.abs(d*v-w*w),P=w*y-v*p,U=w*p-d*y;if(P+U<=O)if(P<0)U<0&&p<0?(U=0,-p>=d?(P=1,A=d+2*p+b):A=p*(P=-p/d)+b):(P=0,y>=0?(U=0,A=b):-y>=v?(U=1,A=v+2*y+b):A=y*(U=-y/v)+b);else if(U<0)U=0,p>=0?(P=0,A=b):-p>=d?(P=1,A=d+2*p+b):A=p*(P=-p/d)+b;else{var R=1/O;A=(P*=R)*(d*P+w*(U*=R)+2*p)+U*(w*P+v*U+2*y)+b}else P<0?(L=v+y)>(M=w+p)?(E=L-M)>=(S=d-2*w+v)?(P=1,U=0,A=d+2*p+b):A=(P=E/S)*(d*P+w*(U=1-P)+2*p)+U*(w*P+v*U+2*y)+b:(P=0,L<=0?(U=1,A=v+2*y+b):y>=0?(U=0,A=b):A=y*(U=-y/v)+b):U<0?(L=d+p)>(M=w+y)?(E=L-M)>=(S=d-2*w+v)?(U=1,P=0,A=v+2*y+b):A=(P=1-(U=E/S))*(d*P+w*U+2*p)+U*(w*P+v*U+2*y)+b:(U=0,L<=0?(P=1,A=d+2*p+b):p>=0?(P=0,A=b):A=p*(P=-p/d)+b):(E=v+y-w-p)<=0?(P=0,U=1,A=v+2*y+b):E>=(S=d-2*w+v)?(P=1,U=0,A=d+2*p+b):A=(P=E/S)*(d*P+w*(U=1-P)+2*p)+U*(w*P+v*U+2*y)+b;var j=1-P-U;for(f=0;f<l.length;++f)u[f]=j*a[f]+P*i[f]+U*c[f];return A<0?0:A}},1116:function(s,e,t){s.exports=t(6093)},7584:function(s,e,t){var n=t(1539);s.exports=function(a,i){for(var c=a.length,l=new Array(c),u=0;u<c;++u)l[u]=n(a[u],i[u]);return l}},2826:function(s,e,t){s.exports=function(a){for(var i=new Array(a.length),c=0;c<a.length;++c)i[c]=n(a[c]);return i};var n=t(5125)},4469:function(s,e,t){var n=t(5125),a=t(3962);s.exports=function(i,c){for(var l=n(c),u=i.length,f=new Array(u),d=0;d<u;++d)f[d]=a(i[d],l);return f}},6695:function(s,e,t){var n=t(4354);s.exports=function(a,i){for(var c=a.length,l=new Array(c),u=0;u<c;++u)l[u]=n(a[u],i[u]);return l}},7037:function(s,e,t){var n=t(9209),a=t(1284),i=t(9887);s.exports=function(c){c.sort(a);for(var l=c.length,u=0,f=0;f<l;++f){var d=c[f],w=i(d);if(w!==0){if(u>0){var v=c[u-1];if(n(d,v)===0&&i(v)!==w){u-=1;continue}}c[u++]=d}}return c.length=u,c}},6184:function(s){var e,t="";s.exports=function(n,a){if(typeof n!="string")throw new TypeError("expected a string");if(a===1)return n;if(a===2)return n+n;var i=n.length*a;if(e!==n||e===void 0)e=n,t="";else if(t.length>=i)return t.substr(0,i);for(;i>t.length&&a>1;)1&a&&(t+=n),a>>=1,n+=n;return t=(t+=n).substr(0,i)}},8161:function(s,e,t){s.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(s){s.exports=function(e){for(var t=e.length,n=e[e.length-1],a=t,i=t-2;i>=0;--i){var c=n;(f=(u=e[i])-((n=c+u)-c))&&(e[--a]=n,n=f)}var l=0;for(i=a;i<t;++i){var u,f;(f=(u=n)-((n=(c=e[i])+u)-c))&&(e[l++]=f)}return e[l++]=n,e.length=l,e}},8167:function(s,e,t){var n=t(9660),a=t(9662),i=t(8289),c=t(402);function l(y,b,x,_){return function(g){return _(y(x(g[0][0],g[1][1]),x(-g[0][1],g[1][0])))}}function u(y,b,x,_){return function(g){return _(y(b(y(x(g[1][1],g[2][2]),x(-g[1][2],g[2][1])),g[0][0]),y(b(y(x(g[1][0],g[2][2]),x(-g[1][2],g[2][0])),-g[0][1]),b(y(x(g[1][0],g[2][1]),x(-g[1][1],g[2][0])),g[0][2]))))}}function f(y,b,x,_){return function(g){return _(y(y(b(y(b(y(x(g[2][2],g[3][3]),x(-g[2][3],g[3][2])),g[1][1]),y(b(y(x(g[2][1],g[3][3]),x(-g[2][3],g[3][1])),-g[1][2]),b(y(x(g[2][1],g[3][2]),x(-g[2][2],g[3][1])),g[1][3]))),g[0][0]),b(y(b(y(x(g[2][2],g[3][3]),x(-g[2][3],g[3][2])),g[1][0]),y(b(y(x(g[2][0],g[3][3]),x(-g[2][3],g[3][0])),-g[1][2]),b(y(x(g[2][0],g[3][2]),x(-g[2][2],g[3][0])),g[1][3]))),-g[0][1])),y(b(y(b(y(x(g[2][1],g[3][3]),x(-g[2][3],g[3][1])),g[1][0]),y(b(y(x(g[2][0],g[3][3]),x(-g[2][3],g[3][0])),-g[1][1]),b(y(x(g[2][0],g[3][1]),x(-g[2][1],g[3][0])),g[1][3]))),g[0][2]),b(y(b(y(x(g[2][1],g[3][2]),x(-g[2][2],g[3][1])),g[1][0]),y(b(y(x(g[2][0],g[3][2]),x(-g[2][2],g[3][0])),-g[1][1]),b(y(x(g[2][0],g[3][1]),x(-g[2][1],g[3][0])),g[1][2]))),-g[0][3]))))}}function d(y,b,x,_){return function(g){return _(y(y(b(y(y(b(y(b(y(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][2]),y(b(y(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),-g[2][3]),b(y(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][4]))),g[1][1]),b(y(b(y(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][1]),y(b(y(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),-g[2][3]),b(y(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),g[2][4]))),-g[1][2])),y(b(y(b(y(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),g[2][1]),y(b(y(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),-g[2][2]),b(y(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][4]))),g[1][3]),b(y(b(y(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][1]),y(b(y(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),-g[2][2]),b(y(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][3]))),-g[1][4]))),g[0][0]),b(y(y(b(y(b(y(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][2]),y(b(y(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),-g[2][3]),b(y(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][4]))),g[1][0]),b(y(b(y(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][0]),y(b(y(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][3]),b(y(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),g[2][4]))),-g[1][2])),y(b(y(b(y(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),g[2][0]),y(b(y(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][2]),b(y(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),g[2][4]))),g[1][3]),b(y(b(y(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][0]),y(b(y(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),-g[2][2]),b(y(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),g[2][3]))),-g[1][4]))),-g[0][1])),y(b(y(y(b(y(b(y(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][1]),y(b(y(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),-g[2][3]),b(y(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),g[2][4]))),g[1][0]),b(y(b(y(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][0]),y(b(y(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][3]),b(y(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),g[2][4]))),-g[1][1])),y(b(y(b(y(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),g[2][0]),y(b(y(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][1]),b(y(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][4]))),g[1][3]),b(y(b(y(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),g[2][0]),y(b(y(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),-g[2][1]),b(y(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][3]))),-g[1][4]))),g[0][2]),y(b(y(y(b(y(b(y(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),g[2][1]),y(b(y(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),-g[2][2]),b(y(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][4]))),g[1][0]),b(y(b(y(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),g[2][0]),y(b(y(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][2]),b(y(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),g[2][4]))),-g[1][1])),y(b(y(b(y(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),g[2][0]),y(b(y(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][1]),b(y(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][4]))),g[1][2]),b(y(b(y(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][0]),y(b(y(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),-g[2][1]),b(y(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][2]))),-g[1][4]))),-g[0][3]),b(y(y(b(y(b(y(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][1]),y(b(y(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),-g[2][2]),b(y(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][3]))),g[1][0]),b(y(b(y(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][0]),y(b(y(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),-g[2][2]),b(y(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),g[2][3]))),-g[1][1])),y(b(y(b(y(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),g[2][0]),y(b(y(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),-g[2][1]),b(y(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][3]))),g[1][2]),b(y(b(y(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][0]),y(b(y(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),-g[2][1]),b(y(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][2]))),-g[1][3]))),g[0][4])))))}}function w(y){return(y===2?l:y===3?u:y===4?f:y===5?d:void 0)(a,i,n,c)}var v=[function(){return[0]},function(y){return[y[0][0]]}];function p(y,b,x,_,g,A,M,L){return function(E){switch(E.length){case 0:return y(E);case 1:return b(E);case 2:return x(E);case 3:return _(E);case 4:return g(E);case 5:return A(E)}var S=M[E.length];return S||(S=M[E.length]=L(E.length)),S(E)}}(function(){for(;v.length<6;)v.push(w(v.length));s.exports=p.apply(void 0,v.concat([v,w]));for(var y=0;y<v.length;++y)s.exports[y]=v[y]})()},9130:function(s,e,t){var n=t(9660),a=t(9662);s.exports=function(i,c){for(var l=n(i[0],c[0]),u=1;u<i.length;++u)l=a(l,n(i[u],c[u]));return l}},2227:function(s,e,t){var n=t(9660),a=t(9662),i=t(4078),c=t(8289);function l(b){return(b===3?u:b===4?f:b===5?d:w)(a,i,n,c)}function u(b,x,_,g){return function(A,M,L){var E=_(A[0],A[0]),S=g(E,M[0]),O=g(E,L[0]),P=_(M[0],M[0]),U=g(P,A[0]),R=g(P,L[0]),j=_(L[0],L[0]),B=g(j,A[0]),z=g(j,M[0]),G=b(x(z,R),x(U,S)),V=x(B,O),et=x(G,V);return et[et.length-1]}}function f(b,x,_,g){return function(A,M,L,E){var S=b(_(A[0],A[0]),_(A[1],A[1])),O=g(S,M[0]),P=g(S,L[0]),U=g(S,E[0]),R=b(_(M[0],M[0]),_(M[1],M[1])),j=g(R,A[0]),B=g(R,L[0]),z=g(R,E[0]),G=b(_(L[0],L[0]),_(L[1],L[1])),V=g(G,A[0]),et=g(G,M[0]),J=g(G,E[0]),X=b(_(E[0],E[0]),_(E[1],E[1])),Y=g(X,A[0]),Z=g(X,M[0]),tt=g(X,L[0]),rt=b(b(g(x(tt,J),M[1]),b(g(x(Z,z),-L[1]),g(x(et,B),E[1]))),b(g(x(Z,z),A[1]),b(g(x(Y,U),-M[1]),g(x(j,O),E[1])))),nt=b(b(g(x(tt,J),A[1]),b(g(x(Y,U),-L[1]),g(x(V,P),E[1]))),b(g(x(et,B),A[1]),b(g(x(V,P),-M[1]),g(x(j,O),L[1])))),ot=x(rt,nt);return ot[ot.length-1]}}function d(b,x,_,g){return function(A,M,L,E,S){var O=b(_(A[0],A[0]),b(_(A[1],A[1]),_(A[2],A[2]))),P=g(O,M[0]),U=g(O,L[0]),R=g(O,E[0]),j=g(O,S[0]),B=b(_(M[0],M[0]),b(_(M[1],M[1]),_(M[2],M[2]))),z=g(B,A[0]),G=g(B,L[0]),V=g(B,E[0]),et=g(B,S[0]),J=b(_(L[0],L[0]),b(_(L[1],L[1]),_(L[2],L[2]))),X=g(J,A[0]),Y=g(J,M[0]),Z=g(J,E[0]),tt=g(J,S[0]),rt=b(_(E[0],E[0]),b(_(E[1],E[1]),_(E[2],E[2]))),nt=g(rt,A[0]),ot=g(rt,M[0]),ct=g(rt,L[0]),pt=g(rt,S[0]),gt=b(_(S[0],S[0]),b(_(S[1],S[1]),_(S[2],S[2]))),kt=g(gt,A[0]),yt=g(gt,M[0]),mt=g(gt,L[0]),Ot=g(gt,E[0]),vt=b(b(b(g(b(g(x(Ot,pt),L[1]),b(g(x(mt,tt),-E[1]),g(x(ct,Z),S[1]))),M[2]),b(g(b(g(x(Ot,pt),M[1]),b(g(x(yt,et),-E[1]),g(x(ot,V),S[1]))),-L[2]),g(b(g(x(mt,tt),M[1]),b(g(x(yt,et),-L[1]),g(x(Y,G),S[1]))),E[2]))),b(g(b(g(x(ct,Z),M[1]),b(g(x(ot,V),-L[1]),g(x(Y,G),E[1]))),-S[2]),b(g(b(g(x(Ot,pt),M[1]),b(g(x(yt,et),-E[1]),g(x(ot,V),S[1]))),A[2]),g(b(g(x(Ot,pt),A[1]),b(g(x(kt,j),-E[1]),g(x(nt,R),S[1]))),-M[2])))),b(b(g(b(g(x(yt,et),A[1]),b(g(x(kt,j),-M[1]),g(x(z,P),S[1]))),E[2]),b(g(b(g(x(ot,V),A[1]),b(g(x(nt,R),-M[1]),g(x(z,P),E[1]))),-S[2]),g(b(g(x(ct,Z),M[1]),b(g(x(ot,V),-L[1]),g(x(Y,G),E[1]))),A[2]))),b(g(b(g(x(ct,Z),A[1]),b(g(x(nt,R),-L[1]),g(x(X,U),E[1]))),-M[2]),b(g(b(g(x(ot,V),A[1]),b(g(x(nt,R),-M[1]),g(x(z,P),E[1]))),L[2]),g(b(g(x(Y,G),A[1]),b(g(x(X,U),-M[1]),g(x(z,P),L[1]))),-E[2]))))),xt=b(b(b(g(b(g(x(Ot,pt),L[1]),b(g(x(mt,tt),-E[1]),g(x(ct,Z),S[1]))),A[2]),g(b(g(x(Ot,pt),A[1]),b(g(x(kt,j),-E[1]),g(x(nt,R),S[1]))),-L[2])),b(g(b(g(x(mt,tt),A[1]),b(g(x(kt,j),-L[1]),g(x(X,U),S[1]))),E[2]),g(b(g(x(ct,Z),A[1]),b(g(x(nt,R),-L[1]),g(x(X,U),E[1]))),-S[2]))),b(b(g(b(g(x(mt,tt),M[1]),b(g(x(yt,et),-L[1]),g(x(Y,G),S[1]))),A[2]),g(b(g(x(mt,tt),A[1]),b(g(x(kt,j),-L[1]),g(x(X,U),S[1]))),-M[2])),b(g(b(g(x(yt,et),A[1]),b(g(x(kt,j),-M[1]),g(x(z,P),S[1]))),L[2]),g(b(g(x(Y,G),A[1]),b(g(x(X,U),-M[1]),g(x(z,P),L[1]))),-S[2])))),st=x(vt,xt);return st[st.length-1]}}function w(b,x,_,g){return function(A,M,L,E,S,O){var P=b(b(_(A[0],A[0]),_(A[1],A[1])),b(_(A[2],A[2]),_(A[3],A[3]))),U=g(P,M[0]),R=g(P,L[0]),j=g(P,E[0]),B=g(P,S[0]),z=g(P,O[0]),G=b(b(_(M[0],M[0]),_(M[1],M[1])),b(_(M[2],M[2]),_(M[3],M[3]))),V=g(G,A[0]),et=g(G,L[0]),J=g(G,E[0]),X=g(G,S[0]),Y=g(G,O[0]),Z=b(b(_(L[0],L[0]),_(L[1],L[1])),b(_(L[2],L[2]),_(L[3],L[3]))),tt=g(Z,A[0]),rt=g(Z,M[0]),nt=g(Z,E[0]),ot=g(Z,S[0]),ct=g(Z,O[0]),pt=b(b(_(E[0],E[0]),_(E[1],E[1])),b(_(E[2],E[2]),_(E[3],E[3]))),gt=g(pt,A[0]),kt=g(pt,M[0]),yt=g(pt,L[0]),mt=g(pt,S[0]),Ot=g(pt,O[0]),vt=b(b(_(S[0],S[0]),_(S[1],S[1])),b(_(S[2],S[2]),_(S[3],S[3]))),xt=g(vt,A[0]),st=g(vt,M[0]),at=g(vt,L[0]),ht=g(vt,E[0]),Lt=g(vt,O[0]),Mt=b(b(_(O[0],O[0]),_(O[1],O[1])),b(_(O[2],O[2]),_(O[3],O[3]))),_t=g(Mt,A[0]),St=g(Mt,M[0]),Dt=g(Mt,L[0]),ut=g(Mt,E[0]),Tt=g(Mt,S[0]),bt=b(b(b(g(b(b(g(b(g(x(Tt,Lt),E[1]),b(g(x(ut,Ot),-S[1]),g(x(ht,mt),O[1]))),L[2]),g(b(g(x(Tt,Lt),L[1]),b(g(x(Dt,ct),-S[1]),g(x(at,ot),O[1]))),-E[2])),b(g(b(g(x(ut,Ot),L[1]),b(g(x(Dt,ct),-E[1]),g(x(yt,nt),O[1]))),S[2]),g(b(g(x(ht,mt),L[1]),b(g(x(at,ot),-E[1]),g(x(yt,nt),S[1]))),-O[2]))),M[3]),b(g(b(b(g(b(g(x(Tt,Lt),E[1]),b(g(x(ut,Ot),-S[1]),g(x(ht,mt),O[1]))),M[2]),g(b(g(x(Tt,Lt),M[1]),b(g(x(St,Y),-S[1]),g(x(st,X),O[1]))),-E[2])),b(g(b(g(x(ut,Ot),M[1]),b(g(x(St,Y),-E[1]),g(x(kt,J),O[1]))),S[2]),g(b(g(x(ht,mt),M[1]),b(g(x(st,X),-E[1]),g(x(kt,J),S[1]))),-O[2]))),-L[3]),g(b(b(g(b(g(x(Tt,Lt),L[1]),b(g(x(Dt,ct),-S[1]),g(x(at,ot),O[1]))),M[2]),g(b(g(x(Tt,Lt),M[1]),b(g(x(St,Y),-S[1]),g(x(st,X),O[1]))),-L[2])),b(g(b(g(x(Dt,ct),M[1]),b(g(x(St,Y),-L[1]),g(x(rt,et),O[1]))),S[2]),g(b(g(x(at,ot),M[1]),b(g(x(st,X),-L[1]),g(x(rt,et),S[1]))),-O[2]))),E[3]))),b(b(g(b(b(g(b(g(x(ut,Ot),L[1]),b(g(x(Dt,ct),-E[1]),g(x(yt,nt),O[1]))),M[2]),g(b(g(x(ut,Ot),M[1]),b(g(x(St,Y),-E[1]),g(x(kt,J),O[1]))),-L[2])),b(g(b(g(x(Dt,ct),M[1]),b(g(x(St,Y),-L[1]),g(x(rt,et),O[1]))),E[2]),g(b(g(x(yt,nt),M[1]),b(g(x(kt,J),-L[1]),g(x(rt,et),E[1]))),-O[2]))),-S[3]),g(b(b(g(b(g(x(ht,mt),L[1]),b(g(x(at,ot),-E[1]),g(x(yt,nt),S[1]))),M[2]),g(b(g(x(ht,mt),M[1]),b(g(x(st,X),-E[1]),g(x(kt,J),S[1]))),-L[2])),b(g(b(g(x(at,ot),M[1]),b(g(x(st,X),-L[1]),g(x(rt,et),S[1]))),E[2]),g(b(g(x(yt,nt),M[1]),b(g(x(kt,J),-L[1]),g(x(rt,et),E[1]))),-S[2]))),O[3])),b(g(b(b(g(b(g(x(Tt,Lt),E[1]),b(g(x(ut,Ot),-S[1]),g(x(ht,mt),O[1]))),M[2]),g(b(g(x(Tt,Lt),M[1]),b(g(x(St,Y),-S[1]),g(x(st,X),O[1]))),-E[2])),b(g(b(g(x(ut,Ot),M[1]),b(g(x(St,Y),-E[1]),g(x(kt,J),O[1]))),S[2]),g(b(g(x(ht,mt),M[1]),b(g(x(st,X),-E[1]),g(x(kt,J),S[1]))),-O[2]))),A[3]),g(b(b(g(b(g(x(Tt,Lt),E[1]),b(g(x(ut,Ot),-S[1]),g(x(ht,mt),O[1]))),A[2]),g(b(g(x(Tt,Lt),A[1]),b(g(x(_t,z),-S[1]),g(x(xt,B),O[1]))),-E[2])),b(g(b(g(x(ut,Ot),A[1]),b(g(x(_t,z),-E[1]),g(x(gt,j),O[1]))),S[2]),g(b(g(x(ht,mt),A[1]),b(g(x(xt,B),-E[1]),g(x(gt,j),S[1]))),-O[2]))),-M[3])))),b(b(b(g(b(b(g(b(g(x(Tt,Lt),M[1]),b(g(x(St,Y),-S[1]),g(x(st,X),O[1]))),A[2]),g(b(g(x(Tt,Lt),A[1]),b(g(x(_t,z),-S[1]),g(x(xt,B),O[1]))),-M[2])),b(g(b(g(x(St,Y),A[1]),b(g(x(_t,z),-M[1]),g(x(V,U),O[1]))),S[2]),g(b(g(x(st,X),A[1]),b(g(x(xt,B),-M[1]),g(x(V,U),S[1]))),-O[2]))),E[3]),g(b(b(g(b(g(x(ut,Ot),M[1]),b(g(x(St,Y),-E[1]),g(x(kt,J),O[1]))),A[2]),g(b(g(x(ut,Ot),A[1]),b(g(x(_t,z),-E[1]),g(x(gt,j),O[1]))),-M[2])),b(g(b(g(x(St,Y),A[1]),b(g(x(_t,z),-M[1]),g(x(V,U),O[1]))),E[2]),g(b(g(x(kt,J),A[1]),b(g(x(gt,j),-M[1]),g(x(V,U),E[1]))),-O[2]))),-S[3])),b(g(b(b(g(b(g(x(ht,mt),M[1]),b(g(x(st,X),-E[1]),g(x(kt,J),S[1]))),A[2]),g(b(g(x(ht,mt),A[1]),b(g(x(xt,B),-E[1]),g(x(gt,j),S[1]))),-M[2])),b(g(b(g(x(st,X),A[1]),b(g(x(xt,B),-M[1]),g(x(V,U),S[1]))),E[2]),g(b(g(x(kt,J),A[1]),b(g(x(gt,j),-M[1]),g(x(V,U),E[1]))),-S[2]))),O[3]),g(b(b(g(b(g(x(ut,Ot),L[1]),b(g(x(Dt,ct),-E[1]),g(x(yt,nt),O[1]))),M[2]),g(b(g(x(ut,Ot),M[1]),b(g(x(St,Y),-E[1]),g(x(kt,J),O[1]))),-L[2])),b(g(b(g(x(Dt,ct),M[1]),b(g(x(St,Y),-L[1]),g(x(rt,et),O[1]))),E[2]),g(b(g(x(yt,nt),M[1]),b(g(x(kt,J),-L[1]),g(x(rt,et),E[1]))),-O[2]))),A[3]))),b(b(g(b(b(g(b(g(x(ut,Ot),L[1]),b(g(x(Dt,ct),-E[1]),g(x(yt,nt),O[1]))),A[2]),g(b(g(x(ut,Ot),A[1]),b(g(x(_t,z),-E[1]),g(x(gt,j),O[1]))),-L[2])),b(g(b(g(x(Dt,ct),A[1]),b(g(x(_t,z),-L[1]),g(x(tt,R),O[1]))),E[2]),g(b(g(x(yt,nt),A[1]),b(g(x(gt,j),-L[1]),g(x(tt,R),E[1]))),-O[2]))),-M[3]),g(b(b(g(b(g(x(ut,Ot),M[1]),b(g(x(St,Y),-E[1]),g(x(kt,J),O[1]))),A[2]),g(b(g(x(ut,Ot),A[1]),b(g(x(_t,z),-E[1]),g(x(gt,j),O[1]))),-M[2])),b(g(b(g(x(St,Y),A[1]),b(g(x(_t,z),-M[1]),g(x(V,U),O[1]))),E[2]),g(b(g(x(kt,J),A[1]),b(g(x(gt,j),-M[1]),g(x(V,U),E[1]))),-O[2]))),L[3])),b(g(b(b(g(b(g(x(Dt,ct),M[1]),b(g(x(St,Y),-L[1]),g(x(rt,et),O[1]))),A[2]),g(b(g(x(Dt,ct),A[1]),b(g(x(_t,z),-L[1]),g(x(tt,R),O[1]))),-M[2])),b(g(b(g(x(St,Y),A[1]),b(g(x(_t,z),-M[1]),g(x(V,U),O[1]))),L[2]),g(b(g(x(rt,et),A[1]),b(g(x(tt,R),-M[1]),g(x(V,U),L[1]))),-O[2]))),-E[3]),g(b(b(g(b(g(x(yt,nt),M[1]),b(g(x(kt,J),-L[1]),g(x(rt,et),E[1]))),A[2]),g(b(g(x(yt,nt),A[1]),b(g(x(gt,j),-L[1]),g(x(tt,R),E[1]))),-M[2])),b(g(b(g(x(kt,J),A[1]),b(g(x(gt,j),-M[1]),g(x(V,U),E[1]))),L[2]),g(b(g(x(rt,et),A[1]),b(g(x(tt,R),-M[1]),g(x(V,U),L[1]))),-E[2]))),O[3]))))),It=b(b(b(g(b(b(g(b(g(x(Tt,Lt),E[1]),b(g(x(ut,Ot),-S[1]),g(x(ht,mt),O[1]))),L[2]),g(b(g(x(Tt,Lt),L[1]),b(g(x(Dt,ct),-S[1]),g(x(at,ot),O[1]))),-E[2])),b(g(b(g(x(ut,Ot),L[1]),b(g(x(Dt,ct),-E[1]),g(x(yt,nt),O[1]))),S[2]),g(b(g(x(ht,mt),L[1]),b(g(x(at,ot),-E[1]),g(x(yt,nt),S[1]))),-O[2]))),A[3]),b(g(b(b(g(b(g(x(Tt,Lt),E[1]),b(g(x(ut,Ot),-S[1]),g(x(ht,mt),O[1]))),A[2]),g(b(g(x(Tt,Lt),A[1]),b(g(x(_t,z),-S[1]),g(x(xt,B),O[1]))),-E[2])),b(g(b(g(x(ut,Ot),A[1]),b(g(x(_t,z),-E[1]),g(x(gt,j),O[1]))),S[2]),g(b(g(x(ht,mt),A[1]),b(g(x(xt,B),-E[1]),g(x(gt,j),S[1]))),-O[2]))),-L[3]),g(b(b(g(b(g(x(Tt,Lt),L[1]),b(g(x(Dt,ct),-S[1]),g(x(at,ot),O[1]))),A[2]),g(b(g(x(Tt,Lt),A[1]),b(g(x(_t,z),-S[1]),g(x(xt,B),O[1]))),-L[2])),b(g(b(g(x(Dt,ct),A[1]),b(g(x(_t,z),-L[1]),g(x(tt,R),O[1]))),S[2]),g(b(g(x(at,ot),A[1]),b(g(x(xt,B),-L[1]),g(x(tt,R),S[1]))),-O[2]))),E[3]))),b(b(g(b(b(g(b(g(x(ut,Ot),L[1]),b(g(x(Dt,ct),-E[1]),g(x(yt,nt),O[1]))),A[2]),g(b(g(x(ut,Ot),A[1]),b(g(x(_t,z),-E[1]),g(x(gt,j),O[1]))),-L[2])),b(g(b(g(x(Dt,ct),A[1]),b(g(x(_t,z),-L[1]),g(x(tt,R),O[1]))),E[2]),g(b(g(x(yt,nt),A[1]),b(g(x(gt,j),-L[1]),g(x(tt,R),E[1]))),-O[2]))),-S[3]),g(b(b(g(b(g(x(ht,mt),L[1]),b(g(x(at,ot),-E[1]),g(x(yt,nt),S[1]))),A[2]),g(b(g(x(ht,mt),A[1]),b(g(x(xt,B),-E[1]),g(x(gt,j),S[1]))),-L[2])),b(g(b(g(x(at,ot),A[1]),b(g(x(xt,B),-L[1]),g(x(tt,R),S[1]))),E[2]),g(b(g(x(yt,nt),A[1]),b(g(x(gt,j),-L[1]),g(x(tt,R),E[1]))),-S[2]))),O[3])),b(g(b(b(g(b(g(x(Tt,Lt),L[1]),b(g(x(Dt,ct),-S[1]),g(x(at,ot),O[1]))),M[2]),g(b(g(x(Tt,Lt),M[1]),b(g(x(St,Y),-S[1]),g(x(st,X),O[1]))),-L[2])),b(g(b(g(x(Dt,ct),M[1]),b(g(x(St,Y),-L[1]),g(x(rt,et),O[1]))),S[2]),g(b(g(x(at,ot),M[1]),b(g(x(st,X),-L[1]),g(x(rt,et),S[1]))),-O[2]))),A[3]),g(b(b(g(b(g(x(Tt,Lt),L[1]),b(g(x(Dt,ct),-S[1]),g(x(at,ot),O[1]))),A[2]),g(b(g(x(Tt,Lt),A[1]),b(g(x(_t,z),-S[1]),g(x(xt,B),O[1]))),-L[2])),b(g(b(g(x(Dt,ct),A[1]),b(g(x(_t,z),-L[1]),g(x(tt,R),O[1]))),S[2]),g(b(g(x(at,ot),A[1]),b(g(x(xt,B),-L[1]),g(x(tt,R),S[1]))),-O[2]))),-M[3])))),b(b(b(g(b(b(g(b(g(x(Tt,Lt),M[1]),b(g(x(St,Y),-S[1]),g(x(st,X),O[1]))),A[2]),g(b(g(x(Tt,Lt),A[1]),b(g(x(_t,z),-S[1]),g(x(xt,B),O[1]))),-M[2])),b(g(b(g(x(St,Y),A[1]),b(g(x(_t,z),-M[1]),g(x(V,U),O[1]))),S[2]),g(b(g(x(st,X),A[1]),b(g(x(xt,B),-M[1]),g(x(V,U),S[1]))),-O[2]))),L[3]),g(b(b(g(b(g(x(Dt,ct),M[1]),b(g(x(St,Y),-L[1]),g(x(rt,et),O[1]))),A[2]),g(b(g(x(Dt,ct),A[1]),b(g(x(_t,z),-L[1]),g(x(tt,R),O[1]))),-M[2])),b(g(b(g(x(St,Y),A[1]),b(g(x(_t,z),-M[1]),g(x(V,U),O[1]))),L[2]),g(b(g(x(rt,et),A[1]),b(g(x(tt,R),-M[1]),g(x(V,U),L[1]))),-O[2]))),-S[3])),b(g(b(b(g(b(g(x(at,ot),M[1]),b(g(x(st,X),-L[1]),g(x(rt,et),S[1]))),A[2]),g(b(g(x(at,ot),A[1]),b(g(x(xt,B),-L[1]),g(x(tt,R),S[1]))),-M[2])),b(g(b(g(x(st,X),A[1]),b(g(x(xt,B),-M[1]),g(x(V,U),S[1]))),L[2]),g(b(g(x(rt,et),A[1]),b(g(x(tt,R),-M[1]),g(x(V,U),L[1]))),-S[2]))),O[3]),g(b(b(g(b(g(x(ht,mt),L[1]),b(g(x(at,ot),-E[1]),g(x(yt,nt),S[1]))),M[2]),g(b(g(x(ht,mt),M[1]),b(g(x(st,X),-E[1]),g(x(kt,J),S[1]))),-L[2])),b(g(b(g(x(at,ot),M[1]),b(g(x(st,X),-L[1]),g(x(rt,et),S[1]))),E[2]),g(b(g(x(yt,nt),M[1]),b(g(x(kt,J),-L[1]),g(x(rt,et),E[1]))),-S[2]))),A[3]))),b(b(g(b(b(g(b(g(x(ht,mt),L[1]),b(g(x(at,ot),-E[1]),g(x(yt,nt),S[1]))),A[2]),g(b(g(x(ht,mt),A[1]),b(g(x(xt,B),-E[1]),g(x(gt,j),S[1]))),-L[2])),b(g(b(g(x(at,ot),A[1]),b(g(x(xt,B),-L[1]),g(x(tt,R),S[1]))),E[2]),g(b(g(x(yt,nt),A[1]),b(g(x(gt,j),-L[1]),g(x(tt,R),E[1]))),-S[2]))),-M[3]),g(b(b(g(b(g(x(ht,mt),M[1]),b(g(x(st,X),-E[1]),g(x(kt,J),S[1]))),A[2]),g(b(g(x(ht,mt),A[1]),b(g(x(xt,B),-E[1]),g(x(gt,j),S[1]))),-M[2])),b(g(b(g(x(st,X),A[1]),b(g(x(xt,B),-M[1]),g(x(V,U),S[1]))),E[2]),g(b(g(x(kt,J),A[1]),b(g(x(gt,j),-M[1]),g(x(V,U),E[1]))),-S[2]))),L[3])),b(g(b(b(g(b(g(x(at,ot),M[1]),b(g(x(st,X),-L[1]),g(x(rt,et),S[1]))),A[2]),g(b(g(x(at,ot),A[1]),b(g(x(xt,B),-L[1]),g(x(tt,R),S[1]))),-M[2])),b(g(b(g(x(st,X),A[1]),b(g(x(xt,B),-M[1]),g(x(V,U),S[1]))),L[2]),g(b(g(x(rt,et),A[1]),b(g(x(tt,R),-M[1]),g(x(V,U),L[1]))),-S[2]))),-E[3]),g(b(b(g(b(g(x(yt,nt),M[1]),b(g(x(kt,J),-L[1]),g(x(rt,et),E[1]))),A[2]),g(b(g(x(yt,nt),A[1]),b(g(x(gt,j),-L[1]),g(x(tt,R),E[1]))),-M[2])),b(g(b(g(x(kt,J),A[1]),b(g(x(gt,j),-M[1]),g(x(V,U),E[1]))),L[2]),g(b(g(x(rt,et),A[1]),b(g(x(tt,R),-M[1]),g(x(V,U),L[1]))),-E[2]))),S[3]))))),zt=x(bt,It);return zt[zt.length-1]}}var v=[function(){return 0},function(){return 0},function(){return 0}];function p(b){var x=v[b.length];return x||(x=v[b.length]=l(b.length)),x.apply(void 0,b)}function y(b,x,_,g,A,M,L,E){return function(S,O,P,U,R,j){switch(arguments.length){case 0:case 1:return 0;case 2:return g(S,O);case 3:return A(S,O,P);case 4:return M(S,O,P,U);case 5:return L(S,O,P,U,R);case 6:return E(S,O,P,U,R,j)}for(var B=new Array(arguments.length),z=0;z<arguments.length;++z)B[z]=arguments[z];return b(B)}}(function(){for(;v.length<=6;)v.push(l(v.length));s.exports=y.apply(void 0,[p].concat(v));for(var b=0;b<=6;++b)s.exports[b]=v[b]})()},6606:function(s,e,t){var n=t(8167);function a(v){return(v===2?i:v===3?c:v===4?l:v===5?u:f)(v<6?n[v]:n)}function i(v){return function(p,y){return[v([[+y[0],+p[0][1]],[+y[1],+p[1][1]]]),v([[+p[0][0],+y[0]],[+p[1][0],+y[1]]]),v(p)]}}function c(v){return function(p,y){return[v([[+y[0],+p[0][1],+p[0][2]],[+y[1],+p[1][1],+p[1][2]],[+y[2],+p[2][1],+p[2][2]]]),v([[+p[0][0],+y[0],+p[0][2]],[+p[1][0],+y[1],+p[1][2]],[+p[2][0],+y[2],+p[2][2]]]),v([[+p[0][0],+p[0][1],+y[0]],[+p[1][0],+p[1][1],+y[1]],[+p[2][0],+p[2][1],+y[2]]]),v(p)]}}function l(v){return function(p,y){return[v([[+y[0],+p[0][1],+p[0][2],+p[0][3]],[+y[1],+p[1][1],+p[1][2],+p[1][3]],[+y[2],+p[2][1],+p[2][2],+p[2][3]],[+y[3],+p[3][1],+p[3][2],+p[3][3]]]),v([[+p[0][0],+y[0],+p[0][2],+p[0][3]],[+p[1][0],+y[1],+p[1][2],+p[1][3]],[+p[2][0],+y[2],+p[2][2],+p[2][3]],[+p[3][0],+y[3],+p[3][2],+p[3][3]]]),v([[+p[0][0],+p[0][1],+y[0],+p[0][3]],[+p[1][0],+p[1][1],+y[1],+p[1][3]],[+p[2][0],+p[2][1],+y[2],+p[2][3]],[+p[3][0],+p[3][1],+y[3],+p[3][3]]]),v([[+p[0][0],+p[0][1],+p[0][2],+y[0]],[+p[1][0],+p[1][1],+p[1][2],+y[1]],[+p[2][0],+p[2][1],+p[2][2],+y[2]],[+p[3][0],+p[3][1],+p[3][2],+y[3]]]),v(p)]}}function u(v){return function(p,y){return[v([[+y[0],+p[0][1],+p[0][2],+p[0][3],+p[0][4]],[+y[1],+p[1][1],+p[1][2],+p[1][3],+p[1][4]],[+y[2],+p[2][1],+p[2][2],+p[2][3],+p[2][4]],[+y[3],+p[3][1],+p[3][2],+p[3][3],+p[3][4]],[+y[4],+p[4][1],+p[4][2],+p[4][3],+p[4][4]]]),v([[+p[0][0],+y[0],+p[0][2],+p[0][3],+p[0][4]],[+p[1][0],+y[1],+p[1][2],+p[1][3],+p[1][4]],[+p[2][0],+y[2],+p[2][2],+p[2][3],+p[2][4]],[+p[3][0],+y[3],+p[3][2],+p[3][3],+p[3][4]],[+p[4][0],+y[4],+p[4][2],+p[4][3],+p[4][4]]]),v([[+p[0][0],+p[0][1],+y[0],+p[0][3],+p[0][4]],[+p[1][0],+p[1][1],+y[1],+p[1][3],+p[1][4]],[+p[2][0],+p[2][1],+y[2],+p[2][3],+p[2][4]],[+p[3][0],+p[3][1],+y[3],+p[3][3],+p[3][4]],[+p[4][0],+p[4][1],+y[4],+p[4][3],+p[4][4]]]),v([[+p[0][0],+p[0][1],+p[0][2],+y[0],+p[0][4]],[+p[1][0],+p[1][1],+p[1][2],+y[1],+p[1][4]],[+p[2][0],+p[2][1],+p[2][2],+y[2],+p[2][4]],[+p[3][0],+p[3][1],+p[3][2],+y[3],+p[3][4]],[+p[4][0],+p[4][1],+p[4][2],+y[4],+p[4][4]]]),v([[+p[0][0],+p[0][1],+p[0][2],+p[0][3],+y[0]],[+p[1][0],+p[1][1],+p[1][2],+p[1][3],+y[1]],[+p[2][0],+p[2][1],+p[2][2],+p[2][3],+y[2]],[+p[3][0],+p[3][1],+p[3][2],+p[3][3],+y[3]],[+p[4][0],+p[4][1],+p[4][2],+p[4][3],+y[4]]]),v(p)]}}function f(v){return function(p,y){return[v([[+y[0],+p[0][1],+p[0][2],+p[0][3],+p[0][4],+p[0][5]],[+y[1],+p[1][1],+p[1][2],+p[1][3],+p[1][4],+p[1][5]],[+y[2],+p[2][1],+p[2][2],+p[2][3],+p[2][4],+p[2][5]],[+y[3],+p[3][1],+p[3][2],+p[3][3],+p[3][4],+p[3][5]],[+y[4],+p[4][1],+p[4][2],+p[4][3],+p[4][4],+p[4][5]],[+y[5],+p[5][1],+p[5][2],+p[5][3],+p[5][4],+p[5][5]]]),v([[+p[0][0],+y[0],+p[0][2],+p[0][3],+p[0][4],+p[0][5]],[+p[1][0],+y[1],+p[1][2],+p[1][3],+p[1][4],+p[1][5]],[+p[2][0],+y[2],+p[2][2],+p[2][3],+p[2][4],+p[2][5]],[+p[3][0],+y[3],+p[3][2],+p[3][3],+p[3][4],+p[3][5]],[+p[4][0],+y[4],+p[4][2],+p[4][3],+p[4][4],+p[4][5]],[+p[5][0],+y[5],+p[5][2],+p[5][3],+p[5][4],+p[5][5]]]),v([[+p[0][0],+p[0][1],+y[0],+p[0][3],+p[0][4],+p[0][5]],[+p[1][0],+p[1][1],+y[1],+p[1][3],+p[1][4],+p[1][5]],[+p[2][0],+p[2][1],+y[2],+p[2][3],+p[2][4],+p[2][5]],[+p[3][0],+p[3][1],+y[3],+p[3][3],+p[3][4],+p[3][5]],[+p[4][0],+p[4][1],+y[4],+p[4][3],+p[4][4],+p[4][5]],[+p[5][0],+p[5][1],+y[5],+p[5][3],+p[5][4],+p[5][5]]]),v([[+p[0][0],+p[0][1],+p[0][2],+y[0],+p[0][4],+p[0][5]],[+p[1][0],+p[1][1],+p[1][2],+y[1],+p[1][4],+p[1][5]],[+p[2][0],+p[2][1],+p[2][2],+y[2],+p[2][4],+p[2][5]],[+p[3][0],+p[3][1],+p[3][2],+y[3],+p[3][4],+p[3][5]],[+p[4][0],+p[4][1],+p[4][2],+y[4],+p[4][4],+p[4][5]],[+p[5][0],+p[5][1],+p[5][2],+y[5],+p[5][4],+p[5][5]]]),v([[+p[0][0],+p[0][1],+p[0][2],+p[0][3],+y[0],+p[0][5]],[+p[1][0],+p[1][1],+p[1][2],+p[1][3],+y[1],+p[1][5]],[+p[2][0],+p[2][1],+p[2][2],+p[2][3],+y[2],+p[2][5]],[+p[3][0],+p[3][1],+p[3][2],+p[3][3],+y[3],+p[3][5]],[+p[4][0],+p[4][1],+p[4][2],+p[4][3],+y[4],+p[4][5]],[+p[5][0],+p[5][1],+p[5][2],+p[5][3],+y[5],+p[5][5]]]),v([[+p[0][0],+p[0][1],+p[0][2],+p[0][3],+p[0][4],+y[0]],[+p[1][0],+p[1][1],+p[1][2],+p[1][3],+p[1][4],+y[1]],[+p[2][0],+p[2][1],+p[2][2],+p[2][3],+p[2][4],+y[2]],[+p[3][0],+p[3][1],+p[3][2],+p[3][3],+p[3][4],+y[3]],[+p[4][0],+p[4][1],+p[4][2],+p[4][3],+p[4][4],+y[4]],[+p[5][0],+p[5][1],+p[5][2],+p[5][3],+p[5][4],+y[5]]]),v(p)]}}var d=[function(){return[[0]]},function(v,p){return[[p[0]],[v[0][0]]]}];function w(v,p,y,b,x,_,g,A){return function(M,L){switch(M.length){case 0:return v(M,L);case 1:return p(M,L);case 2:return y(M,L);case 3:return b(M,L);case 4:return x(M,L);case 5:return _(M,L)}var E=g[M.length];return E||(E=g[M.length]=A(M.length)),E(M,L)}}(function(){for(;d.length<6;)d.push(a(d.length));s.exports=w.apply(void 0,d.concat([d,a]));for(var v=0;v<6;++v)s.exports[v]=d[v]})()},417:function(s,e,t){var n=t(9660),a=t(9662),i=t(8289),c=t(4078);function l(x,_,g,A){return function(M,L,E){var S=x(x(_(L[1],E[0]),_(-E[1],L[0])),x(_(M[1],L[0]),_(-L[1],M[0]))),O=x(_(M[1],E[0]),_(-E[1],M[0])),P=A(S,O);return P[P.length-1]}}function u(x,_,g,A){return function(M,L,E,S){var O=x(x(g(x(_(E[1],S[0]),_(-S[1],E[0])),L[2]),x(g(x(_(L[1],S[0]),_(-S[1],L[0])),-E[2]),g(x(_(L[1],E[0]),_(-E[1],L[0])),S[2]))),x(g(x(_(L[1],S[0]),_(-S[1],L[0])),M[2]),x(g(x(_(M[1],S[0]),_(-S[1],M[0])),-L[2]),g(x(_(M[1],L[0]),_(-L[1],M[0])),S[2])))),P=x(x(g(x(_(E[1],S[0]),_(-S[1],E[0])),M[2]),x(g(x(_(M[1],S[0]),_(-S[1],M[0])),-E[2]),g(x(_(M[1],E[0]),_(-E[1],M[0])),S[2]))),x(g(x(_(L[1],E[0]),_(-E[1],L[0])),M[2]),x(g(x(_(M[1],E[0]),_(-E[1],M[0])),-L[2]),g(x(_(M[1],L[0]),_(-L[1],M[0])),E[2])))),U=A(O,P);return U[U.length-1]}}function f(x,_,g,A){return function(M,L,E,S,O){var P=x(x(x(g(x(g(x(_(S[1],O[0]),_(-O[1],S[0])),E[2]),x(g(x(_(E[1],O[0]),_(-O[1],E[0])),-S[2]),g(x(_(E[1],S[0]),_(-S[1],E[0])),O[2]))),L[3]),x(g(x(g(x(_(S[1],O[0]),_(-O[1],S[0])),L[2]),x(g(x(_(L[1],O[0]),_(-O[1],L[0])),-S[2]),g(x(_(L[1],S[0]),_(-S[1],L[0])),O[2]))),-E[3]),g(x(g(x(_(E[1],O[0]),_(-O[1],E[0])),L[2]),x(g(x(_(L[1],O[0]),_(-O[1],L[0])),-E[2]),g(x(_(L[1],E[0]),_(-E[1],L[0])),O[2]))),S[3]))),x(g(x(g(x(_(E[1],S[0]),_(-S[1],E[0])),L[2]),x(g(x(_(L[1],S[0]),_(-S[1],L[0])),-E[2]),g(x(_(L[1],E[0]),_(-E[1],L[0])),S[2]))),-O[3]),x(g(x(g(x(_(S[1],O[0]),_(-O[1],S[0])),L[2]),x(g(x(_(L[1],O[0]),_(-O[1],L[0])),-S[2]),g(x(_(L[1],S[0]),_(-S[1],L[0])),O[2]))),M[3]),g(x(g(x(_(S[1],O[0]),_(-O[1],S[0])),M[2]),x(g(x(_(M[1],O[0]),_(-O[1],M[0])),-S[2]),g(x(_(M[1],S[0]),_(-S[1],M[0])),O[2]))),-L[3])))),x(x(g(x(g(x(_(L[1],O[0]),_(-O[1],L[0])),M[2]),x(g(x(_(M[1],O[0]),_(-O[1],M[0])),-L[2]),g(x(_(M[1],L[0]),_(-L[1],M[0])),O[2]))),S[3]),x(g(x(g(x(_(L[1],S[0]),_(-S[1],L[0])),M[2]),x(g(x(_(M[1],S[0]),_(-S[1],M[0])),-L[2]),g(x(_(M[1],L[0]),_(-L[1],M[0])),S[2]))),-O[3]),g(x(g(x(_(E[1],S[0]),_(-S[1],E[0])),L[2]),x(g(x(_(L[1],S[0]),_(-S[1],L[0])),-E[2]),g(x(_(L[1],E[0]),_(-E[1],L[0])),S[2]))),M[3]))),x(g(x(g(x(_(E[1],S[0]),_(-S[1],E[0])),M[2]),x(g(x(_(M[1],S[0]),_(-S[1],M[0])),-E[2]),g(x(_(M[1],E[0]),_(-E[1],M[0])),S[2]))),-L[3]),x(g(x(g(x(_(L[1],S[0]),_(-S[1],L[0])),M[2]),x(g(x(_(M[1],S[0]),_(-S[1],M[0])),-L[2]),g(x(_(M[1],L[0]),_(-L[1],M[0])),S[2]))),E[3]),g(x(g(x(_(L[1],E[0]),_(-E[1],L[0])),M[2]),x(g(x(_(M[1],E[0]),_(-E[1],M[0])),-L[2]),g(x(_(M[1],L[0]),_(-L[1],M[0])),E[2]))),-S[3]))))),U=x(x(x(g(x(g(x(_(S[1],O[0]),_(-O[1],S[0])),E[2]),x(g(x(_(E[1],O[0]),_(-O[1],E[0])),-S[2]),g(x(_(E[1],S[0]),_(-S[1],E[0])),O[2]))),M[3]),g(x(g(x(_(S[1],O[0]),_(-O[1],S[0])),M[2]),x(g(x(_(M[1],O[0]),_(-O[1],M[0])),-S[2]),g(x(_(M[1],S[0]),_(-S[1],M[0])),O[2]))),-E[3])),x(g(x(g(x(_(E[1],O[0]),_(-O[1],E[0])),M[2]),x(g(x(_(M[1],O[0]),_(-O[1],M[0])),-E[2]),g(x(_(M[1],E[0]),_(-E[1],M[0])),O[2]))),S[3]),g(x(g(x(_(E[1],S[0]),_(-S[1],E[0])),M[2]),x(g(x(_(M[1],S[0]),_(-S[1],M[0])),-E[2]),g(x(_(M[1],E[0]),_(-E[1],M[0])),S[2]))),-O[3]))),x(x(g(x(g(x(_(E[1],O[0]),_(-O[1],E[0])),L[2]),x(g(x(_(L[1],O[0]),_(-O[1],L[0])),-E[2]),g(x(_(L[1],E[0]),_(-E[1],L[0])),O[2]))),M[3]),g(x(g(x(_(E[1],O[0]),_(-O[1],E[0])),M[2]),x(g(x(_(M[1],O[0]),_(-O[1],M[0])),-E[2]),g(x(_(M[1],E[0]),_(-E[1],M[0])),O[2]))),-L[3])),x(g(x(g(x(_(L[1],O[0]),_(-O[1],L[0])),M[2]),x(g(x(_(M[1],O[0]),_(-O[1],M[0])),-L[2]),g(x(_(M[1],L[0]),_(-L[1],M[0])),O[2]))),E[3]),g(x(g(x(_(L[1],E[0]),_(-E[1],L[0])),M[2]),x(g(x(_(M[1],E[0]),_(-E[1],M[0])),-L[2]),g(x(_(M[1],L[0]),_(-L[1],M[0])),E[2]))),-O[3])))),R=A(P,U);return R[R.length-1]}}function d(x){return(x===3?l:x===4?u:f)(a,n,i,c)}var w=d(3),v=d(4),p=[function(){return 0},function(){return 0},function(x,_){return _[0]-x[0]},function(x,_,g){var A,M=(x[1]-g[1])*(_[0]-g[0]),L=(x[0]-g[0])*(_[1]-g[1]),E=M-L;if(M>0){if(L<=0)return E;A=M+L}else{if(!(M<0)||L>=0)return E;A=-(M+L)}var S=33306690738754716e-32*A;return E>=S||E<=-S?E:w(x,_,g)},function(x,_,g,A){var M=x[0]-A[0],L=_[0]-A[0],E=g[0]-A[0],S=x[1]-A[1],O=_[1]-A[1],P=g[1]-A[1],U=x[2]-A[2],R=_[2]-A[2],j=g[2]-A[2],B=L*P,z=E*O,G=E*S,V=M*P,et=M*O,J=L*S,X=U*(B-z)+R*(G-V)+j*(et-J),Y=7771561172376104e-31*((Math.abs(B)+Math.abs(z))*Math.abs(U)+(Math.abs(G)+Math.abs(V))*Math.abs(R)+(Math.abs(et)+Math.abs(J))*Math.abs(j));return X>Y||-X>Y?X:v(x,_,g,A)}];function y(x){var _=p[x.length];return _||(_=p[x.length]=d(x.length)),_.apply(void 0,x)}function b(x,_,g,A,M,L,E){return function(S,O,P,U,R){switch(arguments.length){case 0:case 1:return 0;case 2:return A(S,O);case 3:return M(S,O,P);case 4:return L(S,O,P,U);case 5:return E(S,O,P,U,R)}for(var j=new Array(arguments.length),B=0;B<arguments.length;++B)j[B]=arguments[B];return x(j)}}(function(){for(;p.length<=5;)p.push(d(p.length));s.exports=b.apply(void 0,[y].concat(p));for(var x=0;x<=5;++x)s.exports[x]=p[x]})()},2019:function(s,e,t){var n=t(9662),a=t(8289);s.exports=function(i,c){if(i.length===1)return a(c,i[0]);if(c.length===1)return a(i,c[0]);if(i.length===0||c.length===0)return[0];var l=[0];if(i.length<c.length)for(var u=0;u<i.length;++u)l=n(l,a(c,i[u]));else for(u=0;u<c.length;++u)l=n(l,a(i,c[u]));return l}},8289:function(s,e,t){var n=t(9660),a=t(87);s.exports=function(i,c){var l=i.length;if(l===1){var u=n(i[0],c);return u[0]?u:[u[1]]}var f=new Array(2*l),d=[.1,.1],w=[.1,.1],v=0;n(i[0],c,d),d[0]&&(f[v++]=d[0]);for(var p=1;p<l;++p){n(i[p],c,w);var y=d[1];a(y,w[0],d),d[0]&&(f[v++]=d[0]);var b=w[1],x=d[1],_=b+x,g=x-(_-b);d[1]=_,g&&(f[v++]=g)}return d[1]&&(f[v++]=d[1]),v===0&&(f[v++]=0),f.length=v,f}},4434:function(s,e,t){s.exports=function(a,i,c,l){var u=n(a,c,l),f=n(i,c,l);if(u>0&&f>0||u<0&&f<0)return!1;var d=n(c,a,i),w=n(l,a,i);return!(d>0&&w>0||d<0&&w<0)&&(u!==0||f!==0||d!==0||w!==0||function(v,p,y,b){for(var x=0;x<2;++x){var _=v[x],g=p[x],A=Math.min(_,g),M=Math.max(_,g),L=y[x],E=b[x],S=Math.min(L,E);if(Math.max(L,E)<A||M<S)return!1}return!0}(a,i,c,l))};var n=t(417)[3]},4078:function(s){s.exports=function(e,t){var n=0|e.length,a=0|t.length;if(n===1&&a===1)return function(S,O){var P=S+O,U=P-S,R=S-(P-U)+(O-U);return R?[R,P]:[P]}(e[0],-t[0]);var i,c,l=new Array(n+a),u=0,f=0,d=0,w=Math.abs,v=e[f],p=w(v),y=-t[d],b=w(y);p<b?(c=v,(f+=1)<n&&(p=w(v=e[f]))):(c=y,(d+=1)<a&&(b=w(y=-t[d]))),f<n&&p<b||d>=a?(i=v,(f+=1)<n&&(p=w(v=e[f]))):(i=y,(d+=1)<a&&(b=w(y=-t[d])));for(var x,_,g=i+c,A=g-i,M=c-A,L=M,E=g;f<n&&d<a;)p<b?(i=v,(f+=1)<n&&(p=w(v=e[f]))):(i=y,(d+=1)<a&&(b=w(y=-t[d]))),(M=(c=L)-(A=(g=i+c)-i))&&(l[u++]=M),L=E-((x=E+g)-(_=x-E))+(g-_),E=x;for(;f<n;)(M=(c=L)-(A=(g=(i=v)+c)-i))&&(l[u++]=M),L=E-((x=E+g)-(_=x-E))+(g-_),E=x,(f+=1)<n&&(v=e[f]);for(;d<a;)(M=(c=L)-(A=(g=(i=y)+c)-i))&&(l[u++]=M),L=E-((x=E+g)-(_=x-E))+(g-_),E=x,(d+=1)<a&&(y=-t[d]);return L&&(l[u++]=L),E&&(l[u++]=E),u||(l[u++]=0),l.length=u,l}},9662:function(s){s.exports=function(e,t){var n=0|e.length,a=0|t.length;if(n===1&&a===1)return function(S,O){var P=S+O,U=P-S,R=S-(P-U)+(O-U);return R?[R,P]:[P]}(e[0],t[0]);var i,c,l=new Array(n+a),u=0,f=0,d=0,w=Math.abs,v=e[f],p=w(v),y=t[d],b=w(y);p<b?(c=v,(f+=1)<n&&(p=w(v=e[f]))):(c=y,(d+=1)<a&&(b=w(y=t[d]))),f<n&&p<b||d>=a?(i=v,(f+=1)<n&&(p=w(v=e[f]))):(i=y,(d+=1)<a&&(b=w(y=t[d])));for(var x,_,g=i+c,A=g-i,M=c-A,L=M,E=g;f<n&&d<a;)p<b?(i=v,(f+=1)<n&&(p=w(v=e[f]))):(i=y,(d+=1)<a&&(b=w(y=t[d]))),(M=(c=L)-(A=(g=i+c)-i))&&(l[u++]=M),L=E-((x=E+g)-(_=x-E))+(g-_),E=x;for(;f<n;)(M=(c=L)-(A=(g=(i=v)+c)-i))&&(l[u++]=M),L=E-((x=E+g)-(_=x-E))+(g-_),E=x,(f+=1)<n&&(v=e[f]);for(;d<a;)(M=(c=L)-(A=(g=(i=y)+c)-i))&&(l[u++]=M),L=E-((x=E+g)-(_=x-E))+(g-_),E=x,(d+=1)<a&&(y=t[d]);return L&&(l[u++]=L),E&&(l[u++]=E),u||(l[u++]=0),l.length=u,l}},8691:function(s,e,t){s.exports=function(i){return a(n(i))};var n=t(2692),a=t(7037)},7212:function(s,e,t){s.exports=function(l,u,f,d){if(f=f||0,d===void 0&&(d=function(g){for(var A=g.length,M=0,L=0;L<A;++L)M=0|Math.max(M,g[L].length);return M-1}(l)),l.length===0||d<1)return{cells:[],vertexIds:[],vertexWeights:[]};var w=function(g,A){for(var M=g.length,L=a.mallocUint8(M),E=0;E<M;++E)L[E]=g[E]<A|0;return L}(u,+f),v=function(g,A){for(var M=g.length,L=A*(A+1)/2*M|0,E=a.mallocUint32(2*L),S=0,O=0;O<M;++O)for(var P=g[O],U=(A=P.length,0);U<A;++U)for(var R=0;R<U;++R){var j=P[R],B=P[U];E[S++]=0|Math.min(j,B),E[S++]=0|Math.max(j,B)}i(n(E,[S/2|0,2]));var z=2;for(O=2;O<S;O+=2)E[O-2]===E[O]&&E[O-1]===E[O+1]||(E[z++]=E[O],E[z++]=E[O+1]);return n(E,[z/2|0,2])}(l,d),p=function(g,A,M,L){for(var E=g.data,S=g.shape[0],O=a.mallocDouble(S),P=0,U=0;U<S;++U){var R=E[2*U],j=E[2*U+1];if(M[R]!==M[j]){var B=A[R],z=A[j];E[2*P]=R,E[2*P+1]=j,O[P++]=(z-L)/(z-B)}}return g.shape[0]=P,n(O,[P])}(v,u,w,+f),y=function(g,A){var M=a.mallocInt32(2*A),L=g.shape[0],E=g.data;M[0]=0;for(var S=0,O=0;O<L;++O){var P=E[2*O];if(P!==S){for(M[2*S+1]=O;++S<P;)M[2*S]=O,M[2*S+1]=O;M[2*S]=O}}for(M[2*S+1]=L;++S<A;)M[2*S]=M[2*S+1]=L;return M}(v,0|u.length),b=c(d)(l,v.data,y,w),x=function(g){for(var A=0|g.shape[0],M=g.data,L=new Array(A),E=0;E<A;++E)L[E]=[M[2*E],M[2*E+1]];return L}(v),_=[].slice.call(p.data,0,p.shape[0]);return a.free(w),a.free(v.data),a.free(p.data),a.free(y),{cells:b,vertexIds:x,vertexWeights:_}};var n=t(5050),a=t(5306),i=t(8729),c=t(1168)},1168:function(s){s.exports=function(t){return e[t]()};var e=[function(){return function(t,n,a,i){for(var c=t.length,l=0;l<c;++l)t[l].length;return[]}},function(){function t(n,a,i,c){for(var l=0|Math.min(i,c),u=0|Math.max(i,c),f=n[2*l],d=n[2*l+1];f<d;){var w=f+d>>1,v=a[2*w+1];if(v===u)return w;u<v?d=w:f=w+1}return f}return function(n,a,i,c){for(var l=n.length,u=[],f=0;f<l;++f){var d=n[f];if(d.length===2){var w=(c[d[0]]<<0)+(c[d[1]]<<1);if(w===0||w===3)continue;switch(w){case 0:case 3:break;case 1:u.push([t(i,a,d[0],d[1])]);break;case 2:u.push([t(i,a,d[1],d[0])])}}}return u}},function(){function t(n,a,i,c){for(var l=0|Math.min(i,c),u=0|Math.max(i,c),f=n[2*l],d=n[2*l+1];f<d;){var w=f+d>>1,v=a[2*w+1];if(v===u)return w;u<v?d=w:f=w+1}return f}return function(n,a,i,c){for(var l=n.length,u=[],f=0;f<l;++f){var d=n[f],w=d.length;if(w===3){if((v=(c[d[0]]<<0)+(c[d[1]]<<1)+(c[d[2]]<<2))==0||v===7)continue;switch(v){case 0:case 7:break;case 1:u.push([t(i,a,d[0],d[2]),t(i,a,d[0],d[1])]);break;case 2:u.push([t(i,a,d[1],d[0]),t(i,a,d[1],d[2])]);break;case 3:u.push([t(i,a,d[0],d[2]),t(i,a,d[1],d[2])]);break;case 4:u.push([t(i,a,d[2],d[1]),t(i,a,d[2],d[0])]);break;case 5:u.push([t(i,a,d[2],d[1]),t(i,a,d[0],d[1])]);break;case 6:u.push([t(i,a,d[1],d[0]),t(i,a,d[2],d[0])])}}else if(w===2){var v;if((v=(c[d[0]]<<0)+(c[d[1]]<<1))==0||v===3)continue;switch(v){case 0:case 3:break;case 1:u.push([t(i,a,d[0],d[1])]);break;case 2:u.push([t(i,a,d[1],d[0])])}}}return u}},function(){function t(n,a,i,c){for(var l=0|Math.min(i,c),u=0|Math.max(i,c),f=n[2*l],d=n[2*l+1];f<d;){var w=f+d>>1,v=a[2*w+1];if(v===u)return w;u<v?d=w:f=w+1}return f}return function(n,a,i,c){for(var l=n.length,u=[],f=0;f<l;++f){var d=n[f],w=d.length;if(w===4){if((v=(c[d[0]]<<0)+(c[d[1]]<<1)+(c[d[2]]<<2)+(c[d[3]]<<3))==0||v===15)continue;switch(v){case 0:case 15:break;case 1:u.push([t(i,a,d[0],d[1]),t(i,a,d[0],d[2]),t(i,a,d[0],d[3])]);break;case 2:u.push([t(i,a,d[1],d[2]),t(i,a,d[1],d[0]),t(i,a,d[1],d[3])]);break;case 3:u.push([t(i,a,d[1],d[2]),t(i,a,d[0],d[2]),t(i,a,d[0],d[3])],[t(i,a,d[1],d[3]),t(i,a,d[1],d[2]),t(i,a,d[0],d[3])]);break;case 4:u.push([t(i,a,d[2],d[0]),t(i,a,d[2],d[1]),t(i,a,d[2],d[3])]);break;case 5:u.push([t(i,a,d[0],d[1]),t(i,a,d[2],d[1]),t(i,a,d[0],d[3])],[t(i,a,d[2],d[1]),t(i,a,d[2],d[3]),t(i,a,d[0],d[3])]);break;case 6:u.push([t(i,a,d[2],d[0]),t(i,a,d[1],d[0]),t(i,a,d[1],d[3])],[t(i,a,d[2],d[3]),t(i,a,d[2],d[0]),t(i,a,d[1],d[3])]);break;case 7:u.push([t(i,a,d[0],d[3]),t(i,a,d[1],d[3]),t(i,a,d[2],d[3])]);break;case 8:u.push([t(i,a,d[3],d[1]),t(i,a,d[3],d[0]),t(i,a,d[3],d[2])]);break;case 9:u.push([t(i,a,d[3],d[1]),t(i,a,d[0],d[1]),t(i,a,d[0],d[2])],[t(i,a,d[3],d[2]),t(i,a,d[3],d[1]),t(i,a,d[0],d[2])]);break;case 10:u.push([t(i,a,d[1],d[0]),t(i,a,d[3],d[0]),t(i,a,d[1],d[2])],[t(i,a,d[3],d[0]),t(i,a,d[3],d[2]),t(i,a,d[1],d[2])]);break;case 11:u.push([t(i,a,d[1],d[2]),t(i,a,d[0],d[2]),t(i,a,d[3],d[2])]);break;case 12:u.push([t(i,a,d[3],d[0]),t(i,a,d[2],d[0]),t(i,a,d[2],d[1])],[t(i,a,d[3],d[1]),t(i,a,d[3],d[0]),t(i,a,d[2],d[1])]);break;case 13:u.push([t(i,a,d[0],d[1]),t(i,a,d[2],d[1]),t(i,a,d[3],d[1])]);break;case 14:u.push([t(i,a,d[2],d[0]),t(i,a,d[1],d[0]),t(i,a,d[3],d[0])])}}else if(w===3){if((v=(c[d[0]]<<0)+(c[d[1]]<<1)+(c[d[2]]<<2))==0||v===7)continue;switch(v){case 0:case 7:break;case 1:u.push([t(i,a,d[0],d[2]),t(i,a,d[0],d[1])]);break;case 2:u.push([t(i,a,d[1],d[0]),t(i,a,d[1],d[2])]);break;case 3:u.push([t(i,a,d[0],d[2]),t(i,a,d[1],d[2])]);break;case 4:u.push([t(i,a,d[2],d[1]),t(i,a,d[2],d[0])]);break;case 5:u.push([t(i,a,d[2],d[1]),t(i,a,d[0],d[1])]);break;case 6:u.push([t(i,a,d[1],d[0]),t(i,a,d[2],d[0])])}}else if(w===2){var v;if((v=(c[d[0]]<<0)+(c[d[1]]<<1))==0||v===3)continue;switch(v){case 0:case 3:break;case 1:u.push([t(i,a,d[0],d[1])]);break;case 2:u.push([t(i,a,d[1],d[0])])}}}return u}}]},8211:function(s,e,t){t(2288),t(1731),e.H=function(n,a){var i=n.length,c=n.length-a.length,l=Math.min;if(c)return c;switch(i){case 0:return 0;case 1:return n[0]-a[0];case 2:return(d=n[0]+n[1]-a[0]-a[1])||l(n[0],n[1])-l(a[0],a[1]);case 3:var u=n[0]+n[1],f=a[0]+a[1];if(d=u+n[2]-(f+a[2]))return d;var d,w=l(n[0],n[1]),v=l(a[0],a[1]);return(d=l(w,n[2])-l(v,a[2]))||l(w+n[2],u)-l(v+a[2],f);default:var p=n.slice(0);p.sort();var y=a.slice(0);y.sort();for(var b=0;b<i;++b)if(c=p[b]-y[b])return c;return 0}}},9392:function(s,e){function t(a){var i=32;return(a&=-a)&&i--,65535&a&&(i-=16),16711935&a&&(i-=8),252645135&a&&(i-=4),858993459&a&&(i-=2),1431655765&a&&(i-=1),i}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-2147483648,e.sign=function(a){return(a>0)-(a<0)},e.abs=function(a){var i=a>>31;return(a^i)-i},e.min=function(a,i){return i^(a^i)&-(a<i)},e.max=function(a,i){return a^(a^i)&-(a<i)},e.isPow2=function(a){return!(a&a-1||!a)},e.log2=function(a){var i,c;return i=(a>65535)<<4,i|=c=((a>>>=i)>255)<<3,i|=c=((a>>>=c)>15)<<2,(i|=c=((a>>>=c)>3)<<1)|(a>>>=c)>>1},e.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},e.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},e.countTrailingZeros=t,e.nextPow2=function(a){return a+=a===0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,1+((a|=a>>>8)|a>>>16)},e.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},e.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var n=new Array(256);(function(a){for(var i=0;i<256;++i){var c=i,l=i,u=7;for(c>>>=1;c;c>>>=1)l<<=1,l|=1&c,--u;a[i]=l<<u&255}})(n),e.reverse=function(a){return n[255&a]<<24|n[a>>>8&255]<<16|n[a>>>16&255]<<8|n[a>>>24&255]},e.interleave2=function(a,i){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))<<1},e.deinterleave2=function(a,i){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>i&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},e.interleave3=function(a,i,c){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<1)|(c=1227133513&((c=3272356035&((c=251719695&((c=4278190335&((c&=1023)|c<<16))|c<<8))|c<<4))|c<<2))<<2},e.deinterleave3=function(a,i){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>i&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},e.nextCombination=function(a){var i=a|a-1;return i+1|(~i&-~i)-1>>>t(a)+1}},6656:function(s,e,t){var n=t(9392),a=t(9521);function i(v,p){var y=v.length,b=v.length-p.length,x=Math.min;if(b)return b;switch(y){case 0:return 0;case 1:return v[0]-p[0];case 2:return(A=v[0]+v[1]-p[0]-p[1])||x(v[0],v[1])-x(p[0],p[1]);case 3:var _=v[0]+v[1],g=p[0]+p[1];if(A=_+v[2]-(g+p[2]))return A;var A,M=x(v[0],v[1]),L=x(p[0],p[1]);return(A=x(M,v[2])-x(L,p[2]))||x(M+v[2],_)-x(L+p[2],g);default:var E=v.slice(0);E.sort();var S=p.slice(0);S.sort();for(var O=0;O<y;++O)if(b=E[O]-S[O])return b;return 0}}function c(v,p){return i(v[0],p[0])}function l(v,p){if(p){for(var y=v.length,b=new Array(y),x=0;x<y;++x)b[x]=[v[x],p[x]];for(b.sort(c),x=0;x<y;++x)v[x]=b[x][0],p[x]=b[x][1];return v}return v.sort(i),v}function u(v){if(v.length===0)return[];for(var p=1,y=v.length,b=1;b<y;++b){var x=v[b];if(i(x,v[b-1])){if(b===p){p++;continue}v[p++]=x}}return v.length=p,v}function f(v,p){for(var y=0,b=v.length-1,x=-1;y<=b;){var _=y+b>>1,g=i(v[_],p);g<=0?(g===0&&(x=_),y=_+1):g>0&&(b=_-1)}return x}function d(v,p){for(var y=new Array(v.length),b=0,x=y.length;b<x;++b)y[b]=[];for(var _=[],g=(b=0,p.length);b<g;++b)for(var A=p[b],M=A.length,L=1,E=1<<M;L<E;++L){_.length=n.popCount(L);for(var S=0,O=0;O<M;++O)L&1<<O&&(_[S++]=A[O]);var P=f(v,_);if(!(P<0))for(;y[P++].push(b),!(P>=v.length||i(v[P],_)!==0););}return y}function w(v,p){if(p<0)return[];for(var y=[],b=(1<<p+1)-1,x=0;x<v.length;++x)for(var _=v[x],g=b;g<1<<_.length;g=n.nextCombination(g)){for(var A=new Array(p+1),M=0,L=0;L<_.length;++L)g&1<<L&&(A[M++]=_[L]);y.push(A)}return l(y)}e.dimension=function(v){for(var p=0,y=Math.max,b=0,x=v.length;b<x;++b)p=y(p,v[b].length);return p-1},e.countVertices=function(v){for(var p=-1,y=Math.max,b=0,x=v.length;b<x;++b)for(var _=v[b],g=0,A=_.length;g<A;++g)p=y(p,_[g]);return p+1},e.cloneCells=function(v){for(var p=new Array(v.length),y=0,b=v.length;y<b;++y)p[y]=v[y].slice(0);return p},e.compareCells=i,e.normalize=l,e.unique=u,e.findCell=f,e.incidence=d,e.dual=function(v,p){if(!p)return d(u(w(v,0)),v);for(var y=new Array(p),b=0;b<p;++b)y[b]=[];b=0;for(var x=v.length;b<x;++b)for(var _=v[b],g=0,A=_.length;g<A;++g)y[_[g]].push(b);return y},e.explode=function(v){for(var p=[],y=0,b=v.length;y<b;++y)for(var x=v[y],_=0|x.length,g=1,A=1<<_;g<A;++g){for(var M=[],L=0;L<_;++L)g>>>L&1&&M.push(x[L]);p.push(M)}return l(p)},e.skeleton=w,e.boundary=function(v){for(var p=[],y=0,b=v.length;y<b;++y)for(var x=v[y],_=0,g=x.length;_<g;++_){for(var A=new Array(x.length-1),M=0,L=0;M<g;++M)M!==_&&(A[L++]=x[M]);p.push(A)}return l(p)},e.connectedComponents=function(v,p){return p?function(y,b){for(var x=new a(b),_=0;_<y.length;++_)for(var g=y[_],A=0;A<g.length;++A)for(var M=A+1;M<g.length;++M)x.link(g[A],g[M]);var L=[],E=x.ranks;for(_=0;_<E.length;++_)E[_]=-1;for(_=0;_<y.length;++_){var S=x.find(y[_][0]);E[S]<0?(E[S]=L.length,L.push([y[_].slice(0)])):L[E[S]].push(y[_].slice(0))}return L}(v,p):function(y){for(var b=u(l(w(y,0))),x=new a(b.length),_=0;_<y.length;++_)for(var g=y[_],A=0;A<g.length;++A)for(var M=f(b,[g[A]]),L=A+1;L<g.length;++L)x.link(M,f(b,[g[L]]));var E=[],S=x.ranks;for(_=0;_<S.length;++_)S[_]=-1;for(_=0;_<y.length;++_){var O=x.find(f(b,[y[_][0]]));S[O]<0?(S[O]=E.length,E.push([y[_].slice(0)])):E[S[O]].push(y[_].slice(0))}return E}(v)}},9521:function(s){function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var n=0;n<t;++n)this.roots[n]=n,this.ranks[n]=0}s.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},e.prototype.find=function(t){for(var n=this.roots;n[t]!==t;){var a=n[t];n[t]=n[a],t=a}return t},e.prototype.link=function(t,n){var a=this.find(t),i=this.find(n);if(a!==i){var c=this.ranks,l=this.roots,u=c[a],f=c[i];u<f?l[a]=i:f<u?l[i]=a:(l[i]=a,++c[a])}}},8243:function(s,e,t){s.exports=function(i,c,l){for(var u=c.length,f=i.length,d=new Array(u),w=new Array(u),v=new Array(u),p=new Array(u),y=0;y<u;++y)d[y]=w[y]=-1,v[y]=1/0,p[y]=!1;for(y=0;y<f;++y){var b=i[y];if(b.length!==2)throw new Error("Input must be a graph");var x=b[1],_=b[0];w[_]!==-1?w[_]=-2:w[_]=x,d[x]!==-1?d[x]=-2:d[x]=_}function g(J){if(p[J])return 1/0;var X,Y,Z,tt=d[J],rt=w[J];return tt<0||rt<0?1/0:(X=c[J],Y=c[tt],Z=c[rt],Math.abs(n(X,Y,Z))/Math.sqrt(Math.pow(Y[0]-Z[0],2)+Math.pow(Y[1]-Z[1],2)))}function A(J,X){var Y=R[J],Z=R[X];R[J]=Z,R[X]=Y,j[Y]=X,j[Z]=J}function M(J){return v[R[J]]}function L(J){return 1&J?J-1>>1:(J>>1)-1}function E(J){for(var X=M(J);;){var Y=X,Z=2*J+1,tt=2*(J+1),rt=J;if(Z<B){var nt=M(Z);nt<Y&&(rt=Z,Y=nt)}if(tt<B&&M(tt)<Y&&(rt=tt),rt===J)return J;A(J,rt),J=rt}}function S(J){for(var X=M(J);J>0;){var Y=L(J);if(!(Y>=0&&X<M(Y)))return J;A(J,Y),J=Y}}function O(){if(B>0){var J=R[0];return A(0,B-1),B-=1,E(0),J}return-1}function P(J,X){var Y=R[J];return v[Y]===X?J:(v[Y]=-1/0,S(J),O(),v[Y]=X,S((B+=1)-1))}function U(J){if(!p[J]){p[J]=!0;var X=d[J],Y=w[J];d[Y]>=0&&(d[Y]=X),w[X]>=0&&(w[X]=Y),j[X]>=0&&P(j[X],g(X)),j[Y]>=0&&P(j[Y],g(Y))}}var R=[],j=new Array(u);for(y=0;y<u;++y)(v[y]=g(y))<1/0?(j[y]=R.length,R.push(y)):j[y]=-1;var B=R.length;for(y=B>>1;y>=0;--y)E(y);for(;;){var z=O();if(z<0||v[z]>l)break;U(z)}var G=[];for(y=0;y<u;++y)p[y]||(j[y]=G.length,G.push(c[y].slice()));function V(J,X){if(J[X]<0)return X;var Y=X,Z=X;do{var tt=J[Z];if(!p[Z]||tt<0||tt===Z||(tt=J[Z=tt],!p[Z]||tt<0||tt===Z))break;Z=tt,Y=J[Y]}while(Y!==Z);for(var rt=X;rt!==Z;rt=J[rt])J[rt]=Z;return Z}G.length;var et=[];return i.forEach(function(J){var X=V(d,J[0]),Y=V(w,J[1]);if(X>=0&&Y>=0&&X!==Y){var Z=j[X],tt=j[Y];Z!==tt&&et.push([Z,tt])}}),a.unique(a.normalize(et)),{positions:G,edges:et}};var n=t(417),a=t(6656)},6638:function(s,e,t){s.exports=function(i,c){var l,u,f,d;if(c[0][0]<c[1][0])l=c[0],u=c[1];else{if(!(c[0][0]>c[1][0]))return a(c,i);l=c[1],u=c[0]}if(i[0][0]<i[1][0])f=i[0],d=i[1];else{if(!(i[0][0]>i[1][0]))return-a(i,c);f=i[1],d=i[0]}var w=n(l,u,d),v=n(l,u,f);if(w<0){if(v<=0)return w}else if(w>0){if(v>=0)return w}else if(v)return v;if(w=n(d,f,u),v=n(d,f,l),w<0){if(v<=0)return w}else if(w>0){if(v>=0)return w}else if(v)return v;return u[0]-d[0]};var n=t(417);function a(i,c){var l,u,f,d;if(c[0][0]<c[1][0])l=c[0],u=c[1];else{if(!(c[0][0]>c[1][0])){var w=Math.min(i[0][1],i[1][1]),v=Math.max(i[0][1],i[1][1]),p=Math.min(c[0][1],c[1][1]),y=Math.max(c[0][1],c[1][1]);return v<p?v-p:w>y?w-y:v-y}l=c[1],u=c[0]}i[0][1]<i[1][1]?(f=i[0],d=i[1]):(f=i[1],d=i[0]);var b=n(u,l,f);return b||(b=n(u,l,d))||d-u}},4385:function(s,e,t){s.exports=function(v){for(var p=v.length,y=2*p,b=new Array(y),x=0;x<p;++x){var _=v[x],g=_[0][0]<_[1][0];b[2*x]=new w(_[0][0],_,g,x),b[2*x+1]=new w(_[1][0],_,!g,x)}b.sort(function(U,R){var j=U.x-R.x;return j||(j=U.create-R.create)||Math.min(U.segment[0][1],U.segment[1][1])-Math.min(R.segment[0][1],R.segment[1][1])});var A=a(c),M=[],L=[],E=[];for(x=0;x<y;){for(var S=b[x].x,O=[];x<y;){var P=b[x];if(P.x!==S)break;x+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(O.push(new d(P.segment[0][1],P.index,!0,!0)),O.push(new d(P.segment[1][1],P.index,!1,!1))):(O.push(new d(P.segment[1][1],P.index,!0,!1)),O.push(new d(P.segment[0][1],P.index,!1,!0)))):A=P.create?A.insert(P.segment,P.index):A.remove(P.segment)}M.push(A.root),L.push(S),E.push(O)}return new l(M,L,E)};var n=t(5070),a=t(7080),i=t(417),c=t(6638);function l(v,p,y){this.slabs=v,this.coordinates=p,this.horizontal=y}function u(v,p){return v.y-p}function f(v,p){for(var y=null;v;){var b,x,_=v.key;_[0][0]<_[1][0]?(b=_[0],x=_[1]):(b=_[1],x=_[0]);var g=i(b,x,p);if(g<0)v=v.left;else if(g>0)if(p[0]!==_[1][0])y=v,v=v.right;else{if(A=f(v.right,p))return A;v=v.left}else{if(p[0]!==_[1][0])return v;var A;if(A=f(v.right,p))return A;v=v.left}}return y}function d(v,p,y,b){this.y=v,this.index=p,this.start=y,this.closed=b}function w(v,p,y,b){this.x=v,this.segment=p,this.create=y,this.index=b}l.prototype.castUp=function(v){var p=n.le(this.coordinates,v[0]);if(p<0)return-1;this.slabs[p];var y=f(this.slabs[p],v),b=-1;if(y&&(b=y.value),this.coordinates[p]===v[0]){var x=null;if(y&&(x=y.key),p>0){var _=f(this.slabs[p-1],v);_&&(x?c(_.key,x)>0&&(x=_.key,b=_.value):(b=_.value,x=_.key))}var g=this.horizontal[p];if(g.length>0){var A=n.ge(g,v[1],u);if(A<g.length){var M=g[A];if(v[1]===M.y){if(M.closed)return M.index;for(;A<g.length-1&&g[A+1].y===v[1];)if((M=g[A+=1]).closed)return M.index;if(M.y===v[1]&&!M.start){if((A+=1)>=g.length)return b;M=g[A]}}if(M.start)if(x){var L=i(x[0],x[1],[v[0],M.y]);x[0][0]>x[1][0]&&(L=-L),L>0&&(b=M.index)}else b=M.index;else M.y!==v[1]&&(b=M.index)}}}return b}},4670:function(s,e,t){var n=t(9130),a=t(9662);function i(l,u){var f=a(n(l,u),[u[u.length-1]]);return f[f.length-1]}function c(l,u,f,d){var w=-u/(d-u);w<0?w=0:w>1&&(w=1);for(var v=1-w,p=l.length,y=new Array(p),b=0;b<p;++b)y[b]=w*l[b]+v*f[b];return y}s.exports=function(l,u){for(var f=[],d=[],w=i(l[l.length-1],u),v=l[l.length-1],p=l[0],y=0;y<l.length;++y,v=p){var b=i(p=l[y],u);if(w<0&&b>0||w>0&&b<0){var x=c(v,b,p,w);f.push(x),d.push(x.slice())}b<0?d.push(p.slice()):b>0?f.push(p.slice()):(f.push(p.slice()),d.push(p.slice())),w=b}return{positive:f,negative:d}},s.exports.positive=function(l,u){for(var f=[],d=i(l[l.length-1],u),w=l[l.length-1],v=l[0],p=0;p<l.length;++p,w=v){var y=i(v=l[p],u);(d<0&&y>0||d>0&&y<0)&&f.push(c(w,y,v,d)),y>=0&&f.push(v.slice()),d=y}return f},s.exports.negative=function(l,u){for(var f=[],d=i(l[l.length-1],u),w=l[l.length-1],v=l[0],p=0;p<l.length;++p,w=v){var y=i(v=l[p],u);(d<0&&y>0||d>0&&y<0)&&f.push(c(w,y,v,d)),y<=0&&f.push(v.slice()),d=y}return f}},8974:function(s,e,t){var n;(function(){var a={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(u){return function(f,d){var w,v,p,y,b,x,_,g,A,M=1,L=f.length,E="";for(v=0;v<L;v++)if(typeof f[v]=="string")E+=f[v];else if(typeof f[v]=="object"){if((y=f[v]).keys)for(w=d[M],p=0;p<y.keys.length;p++){if(w==null)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[p],y.keys[p-1]));w=w[y.keys[p]]}else w=y.param_no?d[y.param_no]:d[M++];if(a.not_type.test(y.type)&&a.not_primitive.test(y.type)&&w instanceof Function&&(w=w()),a.numeric_arg.test(y.type)&&typeof w!="number"&&isNaN(w))throw new TypeError(i("[sprintf] expecting number but found %T",w));switch(a.number.test(y.type)&&(g=w>=0),y.type){case"b":w=parseInt(w,10).toString(2);break;case"c":w=String.fromCharCode(parseInt(w,10));break;case"d":case"i":w=parseInt(w,10);break;case"j":w=JSON.stringify(w,null,y.width?parseInt(y.width):0);break;case"e":w=y.precision?parseFloat(w).toExponential(y.precision):parseFloat(w).toExponential();break;case"f":w=y.precision?parseFloat(w).toFixed(y.precision):parseFloat(w);break;case"g":w=y.precision?String(Number(w.toPrecision(y.precision))):parseFloat(w);break;case"o":w=(parseInt(w,10)>>>0).toString(8);break;case"s":w=String(w),w=y.precision?w.substring(0,y.precision):w;break;case"t":w=String(!!w),w=y.precision?w.substring(0,y.precision):w;break;case"T":w=Object.prototype.toString.call(w).slice(8,-1).toLowerCase(),w=y.precision?w.substring(0,y.precision):w;break;case"u":w=parseInt(w,10)>>>0;break;case"v":w=w.valueOf(),w=y.precision?w.substring(0,y.precision):w;break;case"x":w=(parseInt(w,10)>>>0).toString(16);break;case"X":w=(parseInt(w,10)>>>0).toString(16).toUpperCase()}a.json.test(y.type)?E+=w:(!a.number.test(y.type)||g&&!y.sign?A="":(A=g?"+":"-",w=w.toString().replace(a.sign,"")),x=y.pad_char?y.pad_char==="0"?"0":y.pad_char.charAt(1):" ",_=y.width-(A+w).length,b=y.width&&_>0?x.repeat(_):"",E+=y.align?A+w+b:x==="0"?A+b+w:b+A+w)}return E}(function(f){if(l[f])return l[f];for(var d,w=f,v=[],p=0;w;){if((d=a.text.exec(w))!==null)v.push(d[0]);else if((d=a.modulo.exec(w))!==null)v.push("%");else{if((d=a.placeholder.exec(w))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(d[2]){p|=1;var y=[],b=d[2],x=[];if((x=a.key.exec(b))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(y.push(x[1]);(b=b.substring(x[0].length))!=="";)if((x=a.key_access.exec(b))!==null)y.push(x[1]);else{if((x=a.index_access.exec(b))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");y.push(x[1])}d[2]=y}else p|=2;if(p===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");v.push({placeholder:d[0],param_no:d[1],keys:d[2],sign:d[3],pad_char:d[4],align:d[5],width:d[6],precision:d[7],type:d[8]})}w=w.substring(d[0].length)}return l[f]=v}(u),arguments)}function c(u,f){return i.apply(null,[u].concat(f||[]))}var l=Object.create(null);e.sprintf=i,e.vsprintf=c,typeof window<"u"&&(window.sprintf=i,window.vsprintf=c,(n=function(){return{sprintf:i,vsprintf:c}}.call(e,t,e,s))===void 0||(s.exports=n))})()},4162:function(s,e,t){s.exports=function(l,u){if(l.dimension<=0)return{positions:[],cells:[]};if(l.dimension===1)return function(w,v){for(var p=a(w,v),y=p.length,b=new Array(y),x=new Array(y),_=0;_<y;++_)b[_]=[p[_]],x[_]=[_];return{positions:b,cells:x}}(l,u);var f=l.order.join()+"-"+l.dtype,d=c[f];return u=+u||0,d||(d=c[f]=function(w,v){var p=w.length+"d",y=i[p];if(y)return y(n,w,v)}(l.order,l.dtype)),d(l,u)};var n=t(9284),a=t(9584),i={"2d":function(l,u,f){var d=l({order:u,scalarArguments:3,getters:f==="generic"?[0]:void 0,phase:function(w,v,p,y){return w>y|0},vertex:function(w,v,p,y,b,x,_,g,A,M,L,E,S){var O=(_<<0)+(g<<1)+(A<<2)+(M<<3)|0;if(O!==0&&O!==15)switch(O){case 0:case 15:L.push([w-.5,v-.5]);break;case 1:L.push([w-.25-.25*(y+p-2*S)/(p-y),v-.25-.25*(b+p-2*S)/(p-b)]);break;case 2:L.push([w-.75-.25*(-y-p+2*S)/(y-p),v-.25-.25*(x+y-2*S)/(y-x)]);break;case 3:L.push([w-.5,v-.5-.5*(b+p+x+y-4*S)/(p-b+y-x)]);break;case 4:L.push([w-.25-.25*(x+b-2*S)/(b-x),v-.75-.25*(-b-p+2*S)/(b-p)]);break;case 5:L.push([w-.5-.5*(y+p+x+b-4*S)/(p-y+b-x),v-.5]);break;case 6:L.push([w-.5-.25*(-y-p+x+b)/(y-p+b-x),v-.5-.25*(-b-p+x+y)/(b-p+y-x)]);break;case 7:L.push([w-.75-.25*(x+b-2*S)/(b-x),v-.75-.25*(x+y-2*S)/(y-x)]);break;case 8:L.push([w-.75-.25*(-x-b+2*S)/(x-b),v-.75-.25*(-x-y+2*S)/(x-y)]);break;case 9:L.push([w-.5-.25*(y+p+-x-b)/(p-y+x-b),v-.5-.25*(b+p+-x-y)/(p-b+x-y)]);break;case 10:L.push([w-.5-.5*(-y-p-x-b+4*S)/(y-p+x-b),v-.5]);break;case 11:L.push([w-.25-.25*(-x-b+2*S)/(x-b),v-.75-.25*(b+p-2*S)/(p-b)]);break;case 12:L.push([w-.5,v-.5-.5*(-b-p-x-y+4*S)/(b-p+x-y)]);break;case 13:L.push([w-.75-.25*(y+p-2*S)/(p-y),v-.25-.25*(-x-y+2*S)/(x-y)]);break;case 14:L.push([w-.25-.25*(-y-p+2*S)/(y-p),v-.25-.25*(-b-p+2*S)/(b-p)])}},cell:function(w,v,p,y,b,x,_,g,A){b?g.push([w,v]):g.push([v,w])}});return function(w,v){var p=[],y=[];return d(w,p,y,v),{positions:p,cells:y}}}},c={}},6946:function(s,e,t){s.exports=function c(l,u,f){f=f||{};var d=i[l];d||(d=i[l]={" ":{data:new Float32Array(0),shape:.2}});var w=d[u];if(!w)if(u.length<=1||!/\d/.test(u))w=d[u]=function(E){for(var S=E.cells,O=E.positions,P=new Float32Array(6*S.length),U=0,R=0,j=0;j<S.length;++j)for(var B=S[j],z=0;z<3;++z){var G=O[B[z]];P[U++]=G[0],P[U++]=G[1]+1.4,R=Math.max(G[0],R)}return{data:P,shape:R}}(n(u,{triangles:!0,font:l,textAlign:f.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=u.split(/(\d|\s)/),p=new Array(v.length),y=0,b=0,x=0;x<v.length;++x)p[x]=c(l,v[x]),y+=p[x].data.length,b+=p[x].shape,x>0&&(b+=.02);var _=new Float32Array(y),g=0,A=-.5*b;for(x=0;x<p.length;++x){for(var M=p[x].data,L=0;L<M.length;L+=2)_[g++]=M[L]+A,_[g++]=M[L+1];A+=p[x].shape+.02}w=d[u]={data:_,shape:b}}return w};var n=t(875),a=window||k.global||{},i=a.__TEXT_CACHE||{};a.__TEXT_CACHE={}},14:function(s,e,t){var n=t(4405);s.exports=c;var a=96;function i(l,u){var f=n(getComputedStyle(l).getPropertyValue(u));return f[0]*c(f[1],l)}function c(l,u){switch(u=u||document.body,l=(l||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),l){case"%":return u.clientHeight/100;case"ch":case"ex":return function(f,d){var w=document.createElement("div");w.style["font-size"]="128"+f,d.appendChild(w);var v=i(w,"font-size")/128;return d.removeChild(w),v}(l,u);case"em":return i(u,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},3440:function(s,e,t){s.exports=function(b){var x=(b=b||{}).center||[0,0,0],_=b.up||[0,1,0],g=b.right||w(_),A=b.radius||1,M=b.theta||0,L=b.phi||0;if(x=[].slice.call(x,0,3),_=[].slice.call(_,0,3),l(_,_),g=[].slice.call(g,0,3),l(g,g),"eye"in b){var E=b.eye,S=[E[0]-x[0],E[1]-x[1],E[2]-x[2]];c(g,S,_),f(g[0],g[1],g[2])<1e-6?g=w(_):l(g,g),A=f(S[0],S[1],S[2]);var O=u(_,S)/A,P=u(g,S)/A;L=Math.acos(O),M=Math.acos(P)}return A=Math.log(A),new v(b.zoomMin,b.zoomMax,x,_,g,A,M,L)};var n=t(8444),a=t(7437),i=t(4422),c=t(903),l=t(899),u=t(9305);function f(b,x,_){return Math.sqrt(Math.pow(b,2)+Math.pow(x,2)+Math.pow(_,2))}function d(b){return Math.min(1,Math.max(-1,b))}function w(b){var x=Math.abs(b[0]),_=Math.abs(b[1]),g=Math.abs(b[2]),A=[0,0,0];x>Math.max(_,g)?A[2]=1:_>Math.max(x,g)?A[0]=1:A[1]=1;for(var M=0,L=0,E=0;E<3;++E)M+=b[E]*b[E],L+=A[E]*b[E];for(E=0;E<3;++E)A[E]-=L/M*b[E];return l(A,A),A}function v(b,x,_,g,A,M,L,E){this.center=n(_),this.up=n(g),this.right=n(A),this.radius=n([M]),this.angle=n([L,E]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(b,x),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var S=0;S<16;++S)this.computedMatrix[S]=.5;this.recalcMatrix(0)}var p=v.prototype;p.setDistanceLimits=function(b,x){b=b>0?Math.log(b):-1/0,x=x>0?Math.log(x):1/0,x=Math.max(x,b),this.radius.bounds[0][0]=b,this.radius.bounds[1][0]=x},p.getDistanceLimits=function(b){var x=this.radius.bounds[0];return b?(b[0]=Math.exp(x[0][0]),b[1]=Math.exp(x[1][0]),b):[Math.exp(x[0][0]),Math.exp(x[1][0])]},p.recalcMatrix=function(b){this.center.curve(b),this.up.curve(b),this.right.curve(b),this.radius.curve(b),this.angle.curve(b);for(var x=this.computedUp,_=this.computedRight,g=0,A=0,M=0;M<3;++M)A+=x[M]*_[M],g+=x[M]*x[M];var L=Math.sqrt(g),E=0;for(M=0;M<3;++M)_[M]-=x[M]*A/g,E+=_[M]*_[M],x[M]/=L;var S=Math.sqrt(E);for(M=0;M<3;++M)_[M]/=S;var O=this.computedToward;c(O,x,_),l(O,O);var P=Math.exp(this.computedRadius[0]),U=this.computedAngle[0],R=this.computedAngle[1],j=Math.cos(U),B=Math.sin(U),z=Math.cos(R),G=Math.sin(R),V=this.computedCenter,et=j*z,J=B*z,X=G,Y=-j*G,Z=-B*G,tt=z,rt=this.computedEye,nt=this.computedMatrix;for(M=0;M<3;++M){var ot=et*_[M]+J*O[M]+X*x[M];nt[4*M+1]=Y*_[M]+Z*O[M]+tt*x[M],nt[4*M+2]=ot,nt[4*M+3]=0}var ct=nt[1],pt=nt[5],gt=nt[9],kt=nt[2],yt=nt[6],mt=nt[10],Ot=pt*mt-gt*yt,vt=gt*kt-ct*mt,xt=ct*yt-pt*kt,st=f(Ot,vt,xt);for(Ot/=st,vt/=st,xt/=st,nt[0]=Ot,nt[4]=vt,nt[8]=xt,M=0;M<3;++M)rt[M]=V[M]+nt[2+4*M]*P;for(M=0;M<3;++M){E=0;for(var at=0;at<3;++at)E+=nt[M+4*at]*rt[at];nt[12+M]=-E}nt[15]=1},p.getMatrix=function(b,x){this.recalcMatrix(b);var _=this.computedMatrix;if(x){for(var g=0;g<16;++g)x[g]=_[g];return x}return _};var y=[0,0,0];p.rotate=function(b,x,_,g){if(this.angle.move(b,x,_),g){this.recalcMatrix(b);var A=this.computedMatrix;y[0]=A[2],y[1]=A[6],y[2]=A[10];for(var M=this.computedUp,L=this.computedRight,E=this.computedToward,S=0;S<3;++S)A[4*S]=M[S],A[4*S+1]=L[S],A[4*S+2]=E[S];for(i(A,A,g,y),S=0;S<3;++S)M[S]=A[4*S],L[S]=A[4*S+1];this.up.set(b,M[0],M[1],M[2]),this.right.set(b,L[0],L[1],L[2])}},p.pan=function(b,x,_,g){x=x||0,_=_||0,g=g||0,this.recalcMatrix(b);var A=this.computedMatrix,M=(Math.exp(this.computedRadius[0]),A[1]),L=A[5],E=A[9],S=f(M,L,E);M/=S,L/=S,E/=S;var O=A[0],P=A[4],U=A[8],R=O*M+P*L+U*E,j=f(O-=M*R,P-=L*R,U-=E*R),B=(O/=j)*x+M*_,z=(P/=j)*x+L*_,G=(U/=j)*x+E*_;this.center.move(b,B,z,G);var V=Math.exp(this.computedRadius[0]);V=Math.max(1e-4,V+g),this.radius.set(b,Math.log(V))},p.translate=function(b,x,_,g){this.center.move(b,x||0,_||0,g||0)},p.setMatrix=function(b,x,_,g){var A=1;typeof _=="number"&&(A=0|_),(A<0||A>3)&&(A=1);var M=(A+2)%3;x||(this.recalcMatrix(b),x=this.computedMatrix);var L=x[A],E=x[A+4],S=x[A+8];if(g){var O=Math.abs(L),P=Math.abs(E),U=Math.abs(S),R=Math.max(O,P,U);O===R?(L=L<0?-1:1,E=S=0):U===R?(S=S<0?-1:1,L=E=0):(E=E<0?-1:1,L=S=0)}else{var j=f(L,E,S);L/=j,E/=j,S/=j}var B,z,G=x[M],V=x[M+4],et=x[M+8],J=G*L+V*E+et*S,X=f(G-=L*J,V-=E*J,et-=S*J),Y=E*(et/=X)-S*(V/=X),Z=S*(G/=X)-L*et,tt=L*V-E*G,rt=f(Y,Z,tt);if(Y/=rt,Z/=rt,tt/=rt,this.center.jump(b,_t,St,Dt),this.radius.idle(b),this.up.jump(b,L,E,S),this.right.jump(b,G,V,et),A===2){var nt=x[1],ot=x[5],ct=x[9],pt=nt*G+ot*V+ct*et,gt=nt*Y+ot*Z+ct*tt;B=Ot<0?-Math.PI/2:Math.PI/2,z=Math.atan2(gt,pt)}else{var kt=x[2],yt=x[6],mt=x[10],Ot=kt*L+yt*E+mt*S,vt=kt*G+yt*V+mt*et,xt=kt*Y+yt*Z+mt*tt;B=Math.asin(d(Ot)),z=Math.atan2(xt,vt)}this.angle.jump(b,z,B),this.recalcMatrix(b);var st=x[2],at=x[6],ht=x[10],Lt=this.computedMatrix;a(Lt,x);var Mt=Lt[15],_t=Lt[12]/Mt,St=Lt[13]/Mt,Dt=Lt[14]/Mt,ut=Math.exp(this.computedRadius[0]);this.center.jump(b,_t-st*ut,St-at*ut,Dt-ht*ut)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(b){this.center.idle(b),this.up.idle(b),this.right.idle(b),this.radius.idle(b),this.angle.idle(b)},p.flush=function(b){this.center.flush(b),this.up.flush(b),this.right.flush(b),this.radius.flush(b),this.angle.flush(b)},p.setDistance=function(b,x){x>0&&this.radius.set(b,Math.log(x))},p.lookAt=function(b,x,_,g){this.recalcMatrix(b),x=x||this.computedEye,_=_||this.computedCenter;var A=(g=g||this.computedUp)[0],M=g[1],L=g[2],E=f(A,M,L);if(!(E<1e-6)){A/=E,M/=E,L/=E;var S=x[0]-_[0],O=x[1]-_[1],P=x[2]-_[2],U=f(S,O,P);if(!(U<1e-6)){S/=U,O/=U,P/=U;var R=this.computedRight,j=R[0],B=R[1],z=R[2],G=A*j+M*B+L*z,V=f(j-=G*A,B-=G*M,z-=G*L);if(!(V<.01&&(V=f(j=M*P-L*O,B=L*S-A*P,z=A*O-M*S))<1e-6)){j/=V,B/=V,z/=V,this.up.set(b,A,M,L),this.right.set(b,j,B,z),this.center.set(b,_[0],_[1],_[2]),this.radius.set(b,Math.log(U));var et=M*z-L*B,J=L*j-A*z,X=A*B-M*j,Y=f(et,J,X),Z=A*S+M*O+L*P,tt=j*S+B*O+z*P,rt=(et/=Y)*S+(J/=Y)*O+(X/=Y)*P,nt=Math.asin(d(Z)),ot=Math.atan2(rt,tt),ct=this.angle._state,pt=ct[ct.length-1],gt=ct[ct.length-2];pt%=2*Math.PI;var kt=Math.abs(pt+2*Math.PI-ot),yt=Math.abs(pt-ot),mt=Math.abs(pt-2*Math.PI-ot);kt<yt&&(pt+=2*Math.PI),mt<yt&&(pt-=2*Math.PI),this.angle.jump(this.angle.lastT(),pt,gt),this.angle.set(b,ot,nt)}}}}},9660:function(s){s.exports=function(t,n,a){var i=t*n,c=e*t,l=c-(c-t),u=t-l,f=e*n,d=f-(f-n),w=n-d,v=u*w-(i-l*d-u*d-l*w);return a?(a[0]=v,a[1]=i,a):[v,i]};var e=+(Math.pow(2,27)+1)},87:function(s){s.exports=function(e,t,n){var a=e+t,i=a-e,c=t-i,l=e-(a-i);return n?(n[0]=l+c,n[1]=a,n):[l+c,a]}},5306:function(s,e,t){var n=t(2288),a=t(3094),i=t(2146).lW;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var c=typeof Uint8ClampedArray<"u",l=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",f=t.g.__TYPEDARRAY_POOL;f.UINT8C||(f.UINT8C=a([32,0])),f.BIGUINT64||(f.BIGUINT64=a([32,0])),f.BIGINT64||(f.BIGINT64=a([32,0])),f.BUFFER||(f.BUFFER=a([32,0]));var d=f.DATA,w=f.BUFFER;function v(R){if(R){var j=R.length||R.byteLength,B=n.log2(j);d[B].push(R)}}function p(R){R=n.nextPow2(R);var j=n.log2(R),B=d[j];return B.length>0?B.pop():new ArrayBuffer(R)}function y(R){return new Uint8Array(p(R),0,R)}function b(R){return new Uint16Array(p(2*R),0,R)}function x(R){return new Uint32Array(p(4*R),0,R)}function _(R){return new Int8Array(p(R),0,R)}function g(R){return new Int16Array(p(2*R),0,R)}function A(R){return new Int32Array(p(4*R),0,R)}function M(R){return new Float32Array(p(4*R),0,R)}function L(R){return new Float64Array(p(8*R),0,R)}function E(R){return c?new Uint8ClampedArray(p(R),0,R):y(R)}function S(R){return l?new BigUint64Array(p(8*R),0,R):null}function O(R){return u?new BigInt64Array(p(8*R),0,R):null}function P(R){return new DataView(p(R),0,R)}function U(R){R=n.nextPow2(R);var j=n.log2(R),B=w[j];return B.length>0?B.pop():new i(R)}e.free=function(R){if(i.isBuffer(R))w[n.log2(R.length)].push(R);else{if(Object.prototype.toString.call(R)!=="[object ArrayBuffer]"&&(R=R.buffer),!R)return;var j=R.length||R.byteLength,B=0|n.log2(j);d[B].push(R)}},e.freeUint8=e.freeUint16=e.freeUint32=e.freeBigUint64=e.freeInt8=e.freeInt16=e.freeInt32=e.freeBigInt64=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(R){v(R.buffer)},e.freeArrayBuffer=v,e.freeBuffer=function(R){w[n.log2(R.length)].push(R)},e.malloc=function(R,j){if(j===void 0||j==="arraybuffer")return p(R);switch(j){case"uint8":return y(R);case"uint16":return b(R);case"uint32":return x(R);case"int8":return _(R);case"int16":return g(R);case"int32":return A(R);case"float":case"float32":return M(R);case"double":case"float64":return L(R);case"uint8_clamped":return E(R);case"bigint64":return O(R);case"biguint64":return S(R);case"buffer":return U(R);case"data":case"dataview":return P(R);default:return null}return null},e.mallocArrayBuffer=p,e.mallocUint8=y,e.mallocUint16=b,e.mallocUint32=x,e.mallocInt8=_,e.mallocInt16=g,e.mallocInt32=A,e.mallocFloat32=e.mallocFloat=M,e.mallocFloat64=e.mallocDouble=L,e.mallocUint8Clamped=E,e.mallocBigUint64=S,e.mallocBigInt64=O,e.mallocDataView=P,e.mallocBuffer=U,e.clearCache=function(){for(var R=0;R<32;++R)f.UINT8[R].length=0,f.UINT16[R].length=0,f.UINT32[R].length=0,f.INT8[R].length=0,f.INT16[R].length=0,f.INT32[R].length=0,f.FLOAT[R].length=0,f.DOUBLE[R].length=0,f.BIGUINT64[R].length=0,f.BIGINT64[R].length=0,f.UINT8C[R].length=0,d[R].length=0,w[R].length=0}},1731:function(s){function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var a=0;a<n;++a)this.roots[a]=a,this.ranks[a]=0}s.exports=e;var t=e.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},t.find=function(n){for(var a=n,i=this.roots;i[n]!==n;)n=i[n];for(;i[a]!==n;){var c=i[a];i[a]=n,a=c}return n},t.link=function(n,a){var i=this.find(n),c=this.find(a);if(i!==c){var l=this.ranks,u=this.roots,f=l[i],d=l[c];f<d?u[i]=c:d<f?u[c]=i:(u[c]=i,++l[i])}}},1215:function(s){s.exports=function(e,t,n){return e.length===0?e:t?(n||e.sort(t),function(a,i){for(var c=1,l=a.length,u=a[0],f=a[0],d=1;d<l;++d)if(f=u,i(u=a[d],f)){if(d===c){c++;continue}a[c++]=u}return a.length=c,a}(e,t)):(n||e.sort(),function(a){for(var i=1,c=a.length,l=a[0],u=a[0],f=1;f<c;++f,u=l)if(u=l,(l=a[f])!==u){if(f===i){i++;continue}a[i++]=l}return a.length=i,a}(e))}},875:function(s,e,t){s.exports=function(c,l){return typeof l=="object"&&l!==null||(l={}),n(c,l.canvas||a,l.context||i,l)};var n=t(712),a=null,i=null;typeof document<"u"&&((a=document.createElement("canvas")).width=8192,a.height=1024,i=a.getContext("2d"))},712:function(s,e,t){s.exports=function(S,O,P,U){var R=64,j=1.25,B={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return U&&(U.size&&U.size>0&&(R=U.size),U.lineSpacing&&U.lineSpacing>0&&(j=U.lineSpacing),U.styletags&&U.styletags.breaklines&&(B.breaklines=!!U.styletags.breaklines),U.styletags&&U.styletags.bolds&&(B.bolds=!!U.styletags.bolds),U.styletags&&U.styletags.italics&&(B.italics=!!U.styletags.italics),U.styletags&&U.styletags.subscripts&&(B.subscripts=!!U.styletags.subscripts),U.styletags&&U.styletags.superscripts&&(B.superscripts=!!U.styletags.superscripts)),P.font=[U.fontStyle,U.fontVariant,U.fontWeight,R+"px",U.font].filter(function(z){return z}).join(" "),P.textAlign="start",P.textBaseline="alphabetic",P.direction="ltr",E(function(z,G,V,et,J,X){V=V.replace(/\n/g,""),V=X.breaklines===!0?V.replace(/\<br\>/g,`
`):V.replace(/\<br\>/g," ");var Y="",Z=[];for(ot=0;ot<V.length;++ot)Z[ot]=Y;X.bolds===!0&&(Z=A(f,d,V,Z)),X.italics===!0&&(Z=A(w,v,V,Z)),X.superscripts===!0&&(Z=A(p,b,V,Z)),X.subscripts===!0&&(Z=A(x,g,V,Z));var tt=[],rt="";for(ot=0;ot<V.length;++ot)Z[ot]!==null&&(rt+=V[ot],tt.push(Z[ot]));var nt,ot,ct,pt,gt,kt=rt.split(`
`),yt=kt.length,mt=Math.round(J*et),Ot=et,vt=2*et,xt=0,st=yt*mt+vt;z.height<st&&(z.height=st),G.fillStyle="#000",G.fillRect(0,0,z.width,z.height),G.fillStyle="#fff";var at=0,ht="";function Lt(){if(ht!==""){var It=G.measureText(ht).width;G.fillText(ht,Ot+ct,vt+pt),ct+=It}}function Mt(){return Math.round(gt)+"px "}function _t(It,zt){var Ft=""+G.font;if(X.subscripts===!0){var $t=It.indexOf(_),Wt=zt.indexOf(_),Xt=$t>-1?parseInt(It[1+$t]):0,ae=Wt>-1?parseInt(zt[1+Wt]):0;Xt!==ae&&(Ft=Ft.replace(Mt(),"?px "),gt*=Math.pow(.75,ae-Xt),Ft=Ft.replace("?px ",Mt())),pt+=.25*mt*(ae-Xt)}if(X.superscripts===!0){var Qt=It.indexOf(y),de=zt.indexOf(y),ye=Qt>-1?parseInt(It[1+Qt]):0,ve=de>-1?parseInt(zt[1+de]):0;ye!==ve&&(Ft=Ft.replace(Mt(),"?px "),gt*=Math.pow(.75,ve-ye),Ft=Ft.replace("?px ",Mt())),pt-=.25*mt*(ve-ye)}if(X.bolds===!0){var ie=It.indexOf(d)>-1,se=zt.indexOf(d)>-1;!ie&&se&&(Ft=ke?Ft.replace("italic ","italic bold "):"bold "+Ft),ie&&!se&&(Ft=Ft.replace("bold ",""))}if(X.italics===!0){var ke=It.indexOf(v)>-1,Ae=zt.indexOf(v)>-1;!ke&&Ae&&(Ft="italic "+Ft),ke&&!Ae&&(Ft=Ft.replace("italic ",""))}G.font=Ft}for(nt=0;nt<yt;++nt){var St=kt[nt]+`
`;for(ct=0,pt=nt*mt,gt=et,ht="",ot=0;ot<St.length;++ot){var Dt=ot+at<tt.length?tt[ot+at]:tt[tt.length-1];Y===Dt?ht+=St[ot]:(Lt(),ht=St[ot],Dt!==void 0&&(_t(Y,Dt),Y=Dt))}Lt(),at+=St.length;var ut=0|Math.round(ct+2*Ot);xt<ut&&(xt=ut)}var Tt=xt,bt=vt+mt*yt;return a(G.getImageData(0,0,Tt,bt).data,[bt,Tt,4]).pick(-1,-1,0).transpose(1,0)}(O,P,S,R,j,B),U,R)},s.exports.processPixels=E;var n=t(4162),a=t(5050),i=t(8243),c=t(197),l=t(7761),u=t(8040),f="b",d="b|",w="i",v="i|",p="sup",y="+",b="+1",x="sub",_="-",g="-1";function A(S,O,P,U){for(var R="<"+S+">",j="</"+S+">",B=R.length,z=j.length,G=O[0]===y||O[0]===_,V=0,et=-z;V>-1&&(V=P.indexOf(R,V))!==-1&&(et=P.indexOf(j,V+B))!==-1&&!(et<=V);){for(var J=V;J<et+z;++J)if(J<V+B||J>=et)U[J]=null,P=P.substr(0,J)+" "+P.substr(J+1);else if(U[J]!==null){var X=U[J].indexOf(O[0]);X===-1?U[J]+=O:G&&(U[J]=U[J].substr(0,X+1)+(1+parseInt(U[J][X+1]))+U[J].substr(X+2))}var Y=V+B,Z=P.substr(Y,et-Y).indexOf(R);V=Z!==-1?Z:et+z}return U}function M(S,O){var P=n(S,128);return O?i(P.cells,P.positions,.25):{edges:P.cells,positions:P.positions}}function L(S,O,P,U){var R=M(S,U),j=function(nt,ot,ct){for(var pt=ot.textAlign||"start",gt=ot.textBaseline||"alphabetic",kt=[1<<30,1<<30],yt=[0,0],mt=nt.length,Ot=0;Ot<mt;++Ot)for(var vt=nt[Ot],xt=0;xt<2;++xt)kt[xt]=0|Math.min(kt[xt],vt[xt]),yt[xt]=0|Math.max(yt[xt],vt[xt]);var st=0;switch(pt){case"center":st=-.5*(kt[0]+yt[0]);break;case"right":case"end":st=-yt[0];break;case"left":case"start":st=-kt[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+pt+"'")}var at=0;switch(gt){case"hanging":case"top":at=-kt[1];break;case"middle":at=-.5*(kt[1]+yt[1]);break;case"alphabetic":case"ideographic":at=-3*ct;break;case"bottom":at=-yt[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+gt+"'")}var ht=1/ct;return"lineHeight"in ot?ht*=+ot.lineHeight:"width"in ot?ht=ot.width/(yt[0]-kt[0]):"height"in ot&&(ht=ot.height/(yt[1]-kt[1])),nt.map(function(Lt){return[ht*(Lt[0]+st),ht*(Lt[1]+at)]})}(R.positions,O,P),B=R.edges,z=O.orientation==="ccw";if(c(j,B),O.polygons||O.polygon||O.polyline){for(var G=u(B,j),V=new Array(G.length),et=0;et<G.length;++et){for(var J=G[et],X=new Array(J.length),Y=0;Y<J.length;++Y){for(var Z=J[Y],tt=new Array(Z.length),rt=0;rt<Z.length;++rt)tt[rt]=j[Z[rt]].slice();z&&tt.reverse(),X[Y]=tt}V[et]=X}return V}return O.triangles||O.triangulate||O.triangle?{cells:l(j,B,{delaunay:!1,exterior:!1,interior:!0}),positions:j}:{edges:B,positions:j}}function E(S,O,P){try{return L(S,O,P,!0)}catch{}try{return L(S,O,P,!1)}catch{}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(s){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=x);var e=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var n=new t,a=Object.freeze({});if(n.set(a,1),n.get(a)===1)return void(s.exports=WeakMap);e=!0}}var i=Object.getOwnPropertyNames,c=Object.defineProperty,l=Object.isExtensible,u="weakmap:",f=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var d=new ArrayBuffer(25),w=new Uint8Array(d);crypto.getRandomValues(w),f=u+"rand:"+Array.prototype.map.call(w,function(L){return(L%36).toString(36)}).join("")+"___"}if(c(Object,"getOwnPropertyNames",{value:function(L){return i(L).filter(_)}}),"getPropertyNames"in Object){var v=Object.getPropertyNames;c(Object,"getPropertyNames",{value:function(L){return v(L).filter(_)}})}(function(){var L=Object.freeze;c(Object,"freeze",{value:function(O){return g(O),L(O)}});var E=Object.seal;c(Object,"seal",{value:function(O){return g(O),E(O)}});var S=Object.preventExtensions;c(Object,"preventExtensions",{value:function(O){return g(O),S(O)}})})();var p=!1,y=0,b=function(){this instanceof b||M();var L=[],E=[],S=y++;return Object.create(b.prototype,{get___:{value:A(function(O,P){var U,R=g(O);return R?S in R?R[S]:P:(U=L.indexOf(O))>=0?E[U]:P})},has___:{value:A(function(O){var P=g(O);return P?S in P:L.indexOf(O)>=0})},set___:{value:A(function(O,P){var U,R=g(O);return R?R[S]=P:(U=L.indexOf(O))>=0?E[U]=P:(U=L.length,E[U]=P,L[U]=O),this})},delete___:{value:A(function(O){var P,U,R=g(O);return R?S in R&&delete R[S]:!((P=L.indexOf(O))<0||(U=L.length-1,L[P]=void 0,E[P]=E[U],L[P]=L[U],L.length=U,E.length=U,0))})}})};b.prototype=Object.create(Object.prototype,{get:{value:function(L,E){return this.get___(L,E)},writable:!0,configurable:!0},has:{value:function(L){return this.has___(L)},writable:!0,configurable:!0},set:{value:function(L,E){return this.set___(L,E)},writable:!0,configurable:!0},delete:{value:function(L){return this.delete___(L)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function L(){this instanceof b||M();var E,S=new t,O=void 0,P=!1;return E=e?function(U,R){return S.set(U,R),S.has(U)||(O||(O=new b),O.set(U,R)),this}:function(U,R){if(P)try{S.set(U,R)}catch{O||(O=new b),O.set___(U,R)}else S.set(U,R);return this},Object.create(b.prototype,{get___:{value:A(function(U,R){return O?S.has(U)?S.get(U):O.get___(U,R):S.get(U,R)})},has___:{value:A(function(U){return S.has(U)||!!O&&O.has___(U)})},set___:{value:A(E)},delete___:{value:A(function(U){var R=!!S.delete(U);return O&&O.delete___(U)||R})},permitHostObjects___:{value:A(function(U){if(U!==x)throw new Error("bogus call to permitHostObjects___");P=!0})}})}e&&typeof Proxy<"u"&&(Proxy=void 0),L.prototype=b.prototype,s.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),s.exports=b)}function x(L){L.permitHostObjects___&&L.permitHostObjects___(x)}function _(L){return!(L.substr(0,8)==u&&L.substr(L.length-3)==="___")}function g(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var E=L[f];if(E&&E.key===L)return E;if(l(L)){E={key:L};try{return c(L,f,{value:E,writable:!1,enumerable:!1,configurable:!1}),E}catch{return}}}function A(L){return L.prototype=null,Object.freeze(L)}function M(){p||typeof console>"u"||(p=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(s,e,t){var n=t(7178);s.exports=function(){var a={};return function(i){if((typeof i!="object"||i===null)&&typeof i!="function")throw new Error("Weakmap-shim: Key must be object");var c=i.valueOf(a);return c&&c.identity===a?c:n(i,a)}}},7178:function(s){s.exports=function(e,t){var n={identity:t},a=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(i){return i!==t?a.apply(this,arguments):n},writable:!0}),n}},4037:function(s,e,t){var n=t(9222);s.exports=function(){var a=n();return{get:function(i,c){var l=a(i);return l.hasOwnProperty("value")?l.value:c},set:function(i,c){return a(i).value=c,this},has:function(i){return"value"in a(i)},delete:function(i){return delete a(i).value}}}},6183:function(s){s.exports=function(e){var t={};return function(n,a,i){var c=n.dtype,l=n.order,u=[c,l.join()].join(),f=t[u];return f||(t[u]=f=e([c,l])),f(n.shape.slice(0),n.data,n.stride,0|n.offset,a,i)}}(function(){return function(e,t,n,a,i,c){var l=e[0],u=n[0],f=[0],d=u;a|=0;var w=0,v=u;for(w=0;w<l;++w){var p=t[a]-c,y=t[a+d]-c;p>=0!=y>=0&&i.push(f[0]+.5+.5*(p+y)/(p-y)),a+=v,++f[0]}}}.bind(void 0,{funcName:"zeroCrossings"}))},9584:function(s,e,t){s.exports=function(a,i){var c=[];return i=+i||0,n(a.hi(a.shape[0]-1),c,i),c};var n=t(6183)},6601:function(){}},m={};function h(s){var e=m[s];if(e!==void 0)return e.exports;var t=m[s]={id:s,loaded:!1,exports:{}};return r[s].call(t.exports,t,t.exports,h),t.loaded=!0,t.exports}return h.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),h.nmd=function(s){return s.paths=[],s.children||(s.children=[]),s},h(7386)}()},W.exports=T()},12856:function(W,I,o){function T(st,at){for(var ht=0;ht<at.length;ht++){var Lt=at[ht];Lt.enumerable=Lt.enumerable||!1,Lt.configurable=!0,"value"in Lt&&(Lt.writable=!0),Object.defineProperty(st,(Mt=function(_t,St){if(h(_t)!=="object"||_t===null)return _t;var Dt=_t[Symbol.toPrimitive];if(Dt!==void 0){var ut=Dt.call(_t,"string");if(h(ut)!=="object")return ut;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_t)}(Lt.key),h(Mt)==="symbol"?Mt:String(Mt)),Lt)}var Mt}function k(st,at){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ht,Lt){return ht.__proto__=Lt,ht},k(st,at)}function r(st){if(st===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return st}function m(st){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(at){return at.__proto__||Object.getPrototypeOf(at)},m(st)}function h(st){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(at){return typeof at}:function(at){return at&&typeof Symbol=="function"&&at.constructor===Symbol&&at!==Symbol.prototype?"symbol":typeof at},h(st)}var s=o(95341),e=o(95280),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;I.Buffer=i,I.SlowBuffer=function(st){return+st!=st&&(st=0),i.alloc(+st)},I.INSPECT_MAX_BYTES=50;var n=2147483647;function a(st){if(st>n)throw new RangeError('The value "'+st+'" is invalid for option "size"');var at=new Uint8Array(st);return Object.setPrototypeOf(at,i.prototype),at}function i(st,at,ht){if(typeof st=="number"){if(typeof at=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(st)}return c(st,at,ht)}function c(st,at,ht){if(typeof st=="string")return function(_t,St){if(typeof St=="string"&&St!==""||(St="utf8"),!i.isEncoding(St))throw new TypeError("Unknown encoding: "+St);var Dt=0|v(_t,St),ut=a(Dt),Tt=ut.write(_t,St);return Tt!==Dt&&(ut=ut.slice(0,Tt)),ut}(st,at);if(ArrayBuffer.isView(st))return function(_t){if(yt(_t,Uint8Array)){var St=new Uint8Array(_t);return d(St.buffer,St.byteOffset,St.byteLength)}return f(_t)}(st);if(st==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(st));if(yt(st,ArrayBuffer)||st&&yt(st.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(yt(st,SharedArrayBuffer)||st&&yt(st.buffer,SharedArrayBuffer)))return d(st,at,ht);if(typeof st=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Lt=st.valueOf&&st.valueOf();if(Lt!=null&&Lt!==st)return i.from(Lt,at,ht);var Mt=function(_t){if(i.isBuffer(_t)){var St=0|w(_t.length),Dt=a(St);return Dt.length===0||_t.copy(Dt,0,0,St),Dt}return _t.length!==void 0?typeof _t.length!="number"||mt(_t.length)?a(0):f(_t):_t.type==="Buffer"&&Array.isArray(_t.data)?f(_t.data):void 0}(st);if(Mt)return Mt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof st[Symbol.toPrimitive]=="function")return i.from(st[Symbol.toPrimitive]("string"),at,ht);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(st))}function l(st){if(typeof st!="number")throw new TypeError('"size" argument must be of type number');if(st<0)throw new RangeError('The value "'+st+'" is invalid for option "size"')}function u(st){return l(st),a(st<0?0:0|w(st))}function f(st){for(var at=st.length<0?0:0|w(st.length),ht=a(at),Lt=0;Lt<at;Lt+=1)ht[Lt]=255&st[Lt];return ht}function d(st,at,ht){if(at<0||st.byteLength<at)throw new RangeError('"offset" is outside of buffer bounds');if(st.byteLength<at+(ht||0))throw new RangeError('"length" is outside of buffer bounds');var Lt;return Lt=at===void 0&&ht===void 0?new Uint8Array(st):ht===void 0?new Uint8Array(st,at):new Uint8Array(st,at,ht),Object.setPrototypeOf(Lt,i.prototype),Lt}function w(st){if(st>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|st}function v(st,at){if(i.isBuffer(st))return st.length;if(ArrayBuffer.isView(st)||yt(st,ArrayBuffer))return st.byteLength;if(typeof st!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+h(st));var ht=st.length,Lt=arguments.length>2&&arguments[2]===!0;if(!Lt&&ht===0)return 0;for(var Mt=!1;;)switch(at){case"ascii":case"latin1":case"binary":return ht;case"utf8":case"utf-8":return pt(st).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ht;case"hex":return ht>>>1;case"base64":return gt(st).length;default:if(Mt)return Lt?-1:pt(st).length;at=(""+at).toLowerCase(),Mt=!0}}function p(st,at,ht){var Lt=!1;if((at===void 0||at<0)&&(at=0),at>this.length||((ht===void 0||ht>this.length)&&(ht=this.length),ht<=0)||(ht>>>=0)<=(at>>>=0))return"";for(st||(st="utf8");;)switch(st){case"hex":return R(this,at,ht);case"utf8":case"utf-8":return S(this,at,ht);case"ascii":return P(this,at,ht);case"latin1":case"binary":return U(this,at,ht);case"base64":return E(this,at,ht);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,at,ht);default:if(Lt)throw new TypeError("Unknown encoding: "+st);st=(st+"").toLowerCase(),Lt=!0}}function y(st,at,ht){var Lt=st[at];st[at]=st[ht],st[ht]=Lt}function b(st,at,ht,Lt,Mt){if(st.length===0)return-1;if(typeof ht=="string"?(Lt=ht,ht=0):ht>2147483647?ht=2147483647:ht<-2147483648&&(ht=-2147483648),mt(ht=+ht)&&(ht=Mt?0:st.length-1),ht<0&&(ht=st.length+ht),ht>=st.length){if(Mt)return-1;ht=st.length-1}else if(ht<0){if(!Mt)return-1;ht=0}if(typeof at=="string"&&(at=i.from(at,Lt)),i.isBuffer(at))return at.length===0?-1:x(st,at,ht,Lt,Mt);if(typeof at=="number")return at&=255,typeof Uint8Array.prototype.indexOf=="function"?Mt?Uint8Array.prototype.indexOf.call(st,at,ht):Uint8Array.prototype.lastIndexOf.call(st,at,ht):x(st,[at],ht,Lt,Mt);throw new TypeError("val must be string, number or Buffer")}function x(st,at,ht,Lt,Mt){var _t,St=1,Dt=st.length,ut=at.length;if(Lt!==void 0&&((Lt=String(Lt).toLowerCase())==="ucs2"||Lt==="ucs-2"||Lt==="utf16le"||Lt==="utf-16le")){if(st.length<2||at.length<2)return-1;St=2,Dt/=2,ut/=2,ht/=2}function Tt(Ft,$t){return St===1?Ft[$t]:Ft.readUInt16BE($t*St)}if(Mt){var bt=-1;for(_t=ht;_t<Dt;_t++)if(Tt(st,_t)===Tt(at,bt===-1?0:_t-bt)){if(bt===-1&&(bt=_t),_t-bt+1===ut)return bt*St}else bt!==-1&&(_t-=_t-bt),bt=-1}else for(ht+ut>Dt&&(ht=Dt-ut),_t=ht;_t>=0;_t--){for(var It=!0,zt=0;zt<ut;zt++)if(Tt(st,_t+zt)!==Tt(at,zt)){It=!1;break}if(It)return _t}return-1}function _(st,at,ht,Lt){ht=Number(ht)||0;var Mt=st.length-ht;Lt?(Lt=Number(Lt))>Mt&&(Lt=Mt):Lt=Mt;var _t,St=at.length;for(Lt>St/2&&(Lt=St/2),_t=0;_t<Lt;++_t){var Dt=parseInt(at.substr(2*_t,2),16);if(mt(Dt))return _t;st[ht+_t]=Dt}return _t}function g(st,at,ht,Lt){return kt(pt(at,st.length-ht),st,ht,Lt)}function A(st,at,ht,Lt){return kt(function(Mt){for(var _t=[],St=0;St<Mt.length;++St)_t.push(255&Mt.charCodeAt(St));return _t}(at),st,ht,Lt)}function M(st,at,ht,Lt){return kt(gt(at),st,ht,Lt)}function L(st,at,ht,Lt){return kt(function(Mt,_t){for(var St,Dt,ut,Tt=[],bt=0;bt<Mt.length&&!((_t-=2)<0);++bt)Dt=(St=Mt.charCodeAt(bt))>>8,ut=St%256,Tt.push(ut),Tt.push(Dt);return Tt}(at,st.length-ht),st,ht,Lt)}function E(st,at,ht){return at===0&&ht===st.length?s.fromByteArray(st):s.fromByteArray(st.slice(at,ht))}function S(st,at,ht){ht=Math.min(st.length,ht);for(var Lt=[],Mt=at;Mt<ht;){var _t=st[Mt],St=null,Dt=_t>239?4:_t>223?3:_t>191?2:1;if(Mt+Dt<=ht){var ut=void 0,Tt=void 0,bt=void 0,It=void 0;switch(Dt){case 1:_t<128&&(St=_t);break;case 2:(192&(ut=st[Mt+1]))==128&&(It=(31&_t)<<6|63&ut)>127&&(St=It);break;case 3:ut=st[Mt+1],Tt=st[Mt+2],(192&ut)==128&&(192&Tt)==128&&(It=(15&_t)<<12|(63&ut)<<6|63&Tt)>2047&&(It<55296||It>57343)&&(St=It);break;case 4:ut=st[Mt+1],Tt=st[Mt+2],bt=st[Mt+3],(192&ut)==128&&(192&Tt)==128&&(192&bt)==128&&(It=(15&_t)<<18|(63&ut)<<12|(63&Tt)<<6|63&bt)>65535&&It<1114112&&(St=It)}}St===null?(St=65533,Dt=1):St>65535&&(St-=65536,Lt.push(St>>>10&1023|55296),St=56320|1023&St),Lt.push(St),Mt+=Dt}return function(zt){var Ft=zt.length;if(Ft<=O)return String.fromCharCode.apply(String,zt);for(var $t="",Wt=0;Wt<Ft;)$t+=String.fromCharCode.apply(String,zt.slice(Wt,Wt+=O));return $t}(Lt)}I.kMaxLength=n,i.TYPED_ARRAY_SUPPORT=function(){try{var st=new Uint8Array(1),at={foo:function(){return 42}};return Object.setPrototypeOf(at,Uint8Array.prototype),Object.setPrototypeOf(st,at),st.foo()===42}catch{return!1}}(),i.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(st,at,ht){return c(st,at,ht)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(st,at,ht){return function(Lt,Mt,_t){return l(Lt),Lt<=0?a(Lt):Mt!==void 0?typeof _t=="string"?a(Lt).fill(Mt,_t):a(Lt).fill(Mt):a(Lt)}(st,at,ht)},i.allocUnsafe=function(st){return u(st)},i.allocUnsafeSlow=function(st){return u(st)},i.isBuffer=function(st){return st!=null&&st._isBuffer===!0&&st!==i.prototype},i.compare=function(st,at){if(yt(st,Uint8Array)&&(st=i.from(st,st.offset,st.byteLength)),yt(at,Uint8Array)&&(at=i.from(at,at.offset,at.byteLength)),!i.isBuffer(st)||!i.isBuffer(at))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(st===at)return 0;for(var ht=st.length,Lt=at.length,Mt=0,_t=Math.min(ht,Lt);Mt<_t;++Mt)if(st[Mt]!==at[Mt]){ht=st[Mt],Lt=at[Mt];break}return ht<Lt?-1:Lt<ht?1:0},i.isEncoding=function(st){switch(String(st).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(st,at){if(!Array.isArray(st))throw new TypeError('"list" argument must be an Array of Buffers');if(st.length===0)return i.alloc(0);var ht;if(at===void 0)for(at=0,ht=0;ht<st.length;++ht)at+=st[ht].length;var Lt=i.allocUnsafe(at),Mt=0;for(ht=0;ht<st.length;++ht){var _t=st[ht];if(yt(_t,Uint8Array))Mt+_t.length>Lt.length?(i.isBuffer(_t)||(_t=i.from(_t)),_t.copy(Lt,Mt)):Uint8Array.prototype.set.call(Lt,_t,Mt);else{if(!i.isBuffer(_t))throw new TypeError('"list" argument must be an Array of Buffers');_t.copy(Lt,Mt)}Mt+=_t.length}return Lt},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var st=this.length;if(st%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var at=0;at<st;at+=2)y(this,at,at+1);return this},i.prototype.swap32=function(){var st=this.length;if(st%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var at=0;at<st;at+=4)y(this,at,at+3),y(this,at+1,at+2);return this},i.prototype.swap64=function(){var st=this.length;if(st%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var at=0;at<st;at+=8)y(this,at,at+7),y(this,at+1,at+6),y(this,at+2,at+5),y(this,at+3,at+4);return this},i.prototype.toString=function(){var st=this.length;return st===0?"":arguments.length===0?S(this,0,st):p.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(st){if(!i.isBuffer(st))throw new TypeError("Argument must be a Buffer");return this===st||i.compare(this,st)===0},i.prototype.inspect=function(){var st="",at=I.INSPECT_MAX_BYTES;return st=this.toString("hex",0,at).replace(/(.{2})/g,"$1 ").trim(),this.length>at&&(st+=" ... "),"<Buffer "+st+">"},t&&(i.prototype[t]=i.prototype.inspect),i.prototype.compare=function(st,at,ht,Lt,Mt){if(yt(st,Uint8Array)&&(st=i.from(st,st.offset,st.byteLength)),!i.isBuffer(st))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+h(st));if(at===void 0&&(at=0),ht===void 0&&(ht=st?st.length:0),Lt===void 0&&(Lt=0),Mt===void 0&&(Mt=this.length),at<0||ht>st.length||Lt<0||Mt>this.length)throw new RangeError("out of range index");if(Lt>=Mt&&at>=ht)return 0;if(Lt>=Mt)return-1;if(at>=ht)return 1;if(this===st)return 0;for(var _t=(Mt>>>=0)-(Lt>>>=0),St=(ht>>>=0)-(at>>>=0),Dt=Math.min(_t,St),ut=this.slice(Lt,Mt),Tt=st.slice(at,ht),bt=0;bt<Dt;++bt)if(ut[bt]!==Tt[bt]){_t=ut[bt],St=Tt[bt];break}return _t<St?-1:St<_t?1:0},i.prototype.includes=function(st,at,ht){return this.indexOf(st,at,ht)!==-1},i.prototype.indexOf=function(st,at,ht){return b(this,st,at,ht,!0)},i.prototype.lastIndexOf=function(st,at,ht){return b(this,st,at,ht,!1)},i.prototype.write=function(st,at,ht,Lt){if(at===void 0)Lt="utf8",ht=this.length,at=0;else if(ht===void 0&&typeof at=="string")Lt=at,ht=this.length,at=0;else{if(!isFinite(at))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");at>>>=0,isFinite(ht)?(ht>>>=0,Lt===void 0&&(Lt="utf8")):(Lt=ht,ht=void 0)}var Mt=this.length-at;if((ht===void 0||ht>Mt)&&(ht=Mt),st.length>0&&(ht<0||at<0)||at>this.length)throw new RangeError("Attempt to write outside buffer bounds");Lt||(Lt="utf8");for(var _t=!1;;)switch(Lt){case"hex":return _(this,st,at,ht);case"utf8":case"utf-8":return g(this,st,at,ht);case"ascii":case"latin1":case"binary":return A(this,st,at,ht);case"base64":return M(this,st,at,ht);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,st,at,ht);default:if(_t)throw new TypeError("Unknown encoding: "+Lt);Lt=(""+Lt).toLowerCase(),_t=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function P(st,at,ht){var Lt="";ht=Math.min(st.length,ht);for(var Mt=at;Mt<ht;++Mt)Lt+=String.fromCharCode(127&st[Mt]);return Lt}function U(st,at,ht){var Lt="";ht=Math.min(st.length,ht);for(var Mt=at;Mt<ht;++Mt)Lt+=String.fromCharCode(st[Mt]);return Lt}function R(st,at,ht){var Lt=st.length;(!at||at<0)&&(at=0),(!ht||ht<0||ht>Lt)&&(ht=Lt);for(var Mt="",_t=at;_t<ht;++_t)Mt+=Ot[st[_t]];return Mt}function j(st,at,ht){for(var Lt=st.slice(at,ht),Mt="",_t=0;_t<Lt.length-1;_t+=2)Mt+=String.fromCharCode(Lt[_t]+256*Lt[_t+1]);return Mt}function B(st,at,ht){if(st%1!=0||st<0)throw new RangeError("offset is not uint");if(st+at>ht)throw new RangeError("Trying to access beyond buffer length")}function z(st,at,ht,Lt,Mt,_t){if(!i.isBuffer(st))throw new TypeError('"buffer" argument must be a Buffer instance');if(at>Mt||at<_t)throw new RangeError('"value" argument is out of bounds');if(ht+Lt>st.length)throw new RangeError("Index out of range")}function G(st,at,ht,Lt,Mt){rt(at,Lt,Mt,st,ht,7);var _t=Number(at&BigInt(4294967295));st[ht++]=_t,_t>>=8,st[ht++]=_t,_t>>=8,st[ht++]=_t,_t>>=8,st[ht++]=_t;var St=Number(at>>BigInt(32)&BigInt(4294967295));return st[ht++]=St,St>>=8,st[ht++]=St,St>>=8,st[ht++]=St,St>>=8,st[ht++]=St,ht}function V(st,at,ht,Lt,Mt){rt(at,Lt,Mt,st,ht,7);var _t=Number(at&BigInt(4294967295));st[ht+7]=_t,_t>>=8,st[ht+6]=_t,_t>>=8,st[ht+5]=_t,_t>>=8,st[ht+4]=_t;var St=Number(at>>BigInt(32)&BigInt(4294967295));return st[ht+3]=St,St>>=8,st[ht+2]=St,St>>=8,st[ht+1]=St,St>>=8,st[ht]=St,ht+8}function et(st,at,ht,Lt,Mt,_t){if(ht+Lt>st.length)throw new RangeError("Index out of range");if(ht<0)throw new RangeError("Index out of range")}function J(st,at,ht,Lt,Mt){return at=+at,ht>>>=0,Mt||et(st,0,ht,4),e.write(st,at,ht,Lt,23,4),ht+4}function X(st,at,ht,Lt,Mt){return at=+at,ht>>>=0,Mt||et(st,0,ht,8),e.write(st,at,ht,Lt,52,8),ht+8}i.prototype.slice=function(st,at){var ht=this.length;(st=~~st)<0?(st+=ht)<0&&(st=0):st>ht&&(st=ht),(at=at===void 0?ht:~~at)<0?(at+=ht)<0&&(at=0):at>ht&&(at=ht),at<st&&(at=st);var Lt=this.subarray(st,at);return Object.setPrototypeOf(Lt,i.prototype),Lt},i.prototype.readUintLE=i.prototype.readUIntLE=function(st,at,ht){st>>>=0,at>>>=0,ht||B(st,at,this.length);for(var Lt=this[st],Mt=1,_t=0;++_t<at&&(Mt*=256);)Lt+=this[st+_t]*Mt;return Lt},i.prototype.readUintBE=i.prototype.readUIntBE=function(st,at,ht){st>>>=0,at>>>=0,ht||B(st,at,this.length);for(var Lt=this[st+--at],Mt=1;at>0&&(Mt*=256);)Lt+=this[st+--at]*Mt;return Lt},i.prototype.readUint8=i.prototype.readUInt8=function(st,at){return st>>>=0,at||B(st,1,this.length),this[st]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(st,at){return st>>>=0,at||B(st,2,this.length),this[st]|this[st+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(st,at){return st>>>=0,at||B(st,2,this.length),this[st]<<8|this[st+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(st,at){return st>>>=0,at||B(st,4,this.length),(this[st]|this[st+1]<<8|this[st+2]<<16)+16777216*this[st+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(st,at){return st>>>=0,at||B(st,4,this.length),16777216*this[st]+(this[st+1]<<16|this[st+2]<<8|this[st+3])},i.prototype.readBigUInt64LE=vt(function(st){nt(st>>>=0,"offset");var at=this[st],ht=this[st+7];at!==void 0&&ht!==void 0||ot(st,this.length-8);var Lt=at+this[++st]*Math.pow(2,8)+this[++st]*Math.pow(2,16)+this[++st]*Math.pow(2,24),Mt=this[++st]+this[++st]*Math.pow(2,8)+this[++st]*Math.pow(2,16)+ht*Math.pow(2,24);return BigInt(Lt)+(BigInt(Mt)<<BigInt(32))}),i.prototype.readBigUInt64BE=vt(function(st){nt(st>>>=0,"offset");var at=this[st],ht=this[st+7];at!==void 0&&ht!==void 0||ot(st,this.length-8);var Lt=at*Math.pow(2,24)+this[++st]*Math.pow(2,16)+this[++st]*Math.pow(2,8)+this[++st],Mt=this[++st]*Math.pow(2,24)+this[++st]*Math.pow(2,16)+this[++st]*Math.pow(2,8)+ht;return(BigInt(Lt)<<BigInt(32))+BigInt(Mt)}),i.prototype.readIntLE=function(st,at,ht){st>>>=0,at>>>=0,ht||B(st,at,this.length);for(var Lt=this[st],Mt=1,_t=0;++_t<at&&(Mt*=256);)Lt+=this[st+_t]*Mt;return Lt>=(Mt*=128)&&(Lt-=Math.pow(2,8*at)),Lt},i.prototype.readIntBE=function(st,at,ht){st>>>=0,at>>>=0,ht||B(st,at,this.length);for(var Lt=at,Mt=1,_t=this[st+--Lt];Lt>0&&(Mt*=256);)_t+=this[st+--Lt]*Mt;return _t>=(Mt*=128)&&(_t-=Math.pow(2,8*at)),_t},i.prototype.readInt8=function(st,at){return st>>>=0,at||B(st,1,this.length),128&this[st]?-1*(255-this[st]+1):this[st]},i.prototype.readInt16LE=function(st,at){st>>>=0,at||B(st,2,this.length);var ht=this[st]|this[st+1]<<8;return 32768&ht?4294901760|ht:ht},i.prototype.readInt16BE=function(st,at){st>>>=0,at||B(st,2,this.length);var ht=this[st+1]|this[st]<<8;return 32768&ht?4294901760|ht:ht},i.prototype.readInt32LE=function(st,at){return st>>>=0,at||B(st,4,this.length),this[st]|this[st+1]<<8|this[st+2]<<16|this[st+3]<<24},i.prototype.readInt32BE=function(st,at){return st>>>=0,at||B(st,4,this.length),this[st]<<24|this[st+1]<<16|this[st+2]<<8|this[st+3]},i.prototype.readBigInt64LE=vt(function(st){nt(st>>>=0,"offset");var at=this[st],ht=this[st+7];at!==void 0&&ht!==void 0||ot(st,this.length-8);var Lt=this[st+4]+this[st+5]*Math.pow(2,8)+this[st+6]*Math.pow(2,16)+(ht<<24);return(BigInt(Lt)<<BigInt(32))+BigInt(at+this[++st]*Math.pow(2,8)+this[++st]*Math.pow(2,16)+this[++st]*Math.pow(2,24))}),i.prototype.readBigInt64BE=vt(function(st){nt(st>>>=0,"offset");var at=this[st],ht=this[st+7];at!==void 0&&ht!==void 0||ot(st,this.length-8);var Lt=(at<<24)+this[++st]*Math.pow(2,16)+this[++st]*Math.pow(2,8)+this[++st];return(BigInt(Lt)<<BigInt(32))+BigInt(this[++st]*Math.pow(2,24)+this[++st]*Math.pow(2,16)+this[++st]*Math.pow(2,8)+ht)}),i.prototype.readFloatLE=function(st,at){return st>>>=0,at||B(st,4,this.length),e.read(this,st,!0,23,4)},i.prototype.readFloatBE=function(st,at){return st>>>=0,at||B(st,4,this.length),e.read(this,st,!1,23,4)},i.prototype.readDoubleLE=function(st,at){return st>>>=0,at||B(st,8,this.length),e.read(this,st,!0,52,8)},i.prototype.readDoubleBE=function(st,at){return st>>>=0,at||B(st,8,this.length),e.read(this,st,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(st,at,ht,Lt){st=+st,at>>>=0,ht>>>=0,Lt||z(this,st,at,ht,Math.pow(2,8*ht)-1,0);var Mt=1,_t=0;for(this[at]=255&st;++_t<ht&&(Mt*=256);)this[at+_t]=st/Mt&255;return at+ht},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(st,at,ht,Lt){st=+st,at>>>=0,ht>>>=0,Lt||z(this,st,at,ht,Math.pow(2,8*ht)-1,0);var Mt=ht-1,_t=1;for(this[at+Mt]=255&st;--Mt>=0&&(_t*=256);)this[at+Mt]=st/_t&255;return at+ht},i.prototype.writeUint8=i.prototype.writeUInt8=function(st,at,ht){return st=+st,at>>>=0,ht||z(this,st,at,1,255,0),this[at]=255&st,at+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(st,at,ht){return st=+st,at>>>=0,ht||z(this,st,at,2,65535,0),this[at]=255&st,this[at+1]=st>>>8,at+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(st,at,ht){return st=+st,at>>>=0,ht||z(this,st,at,2,65535,0),this[at]=st>>>8,this[at+1]=255&st,at+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(st,at,ht){return st=+st,at>>>=0,ht||z(this,st,at,4,4294967295,0),this[at+3]=st>>>24,this[at+2]=st>>>16,this[at+1]=st>>>8,this[at]=255&st,at+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(st,at,ht){return st=+st,at>>>=0,ht||z(this,st,at,4,4294967295,0),this[at]=st>>>24,this[at+1]=st>>>16,this[at+2]=st>>>8,this[at+3]=255&st,at+4},i.prototype.writeBigUInt64LE=vt(function(st){return G(this,st,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=vt(function(st){return V(this,st,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(st,at,ht,Lt){if(st=+st,at>>>=0,!Lt){var Mt=Math.pow(2,8*ht-1);z(this,st,at,ht,Mt-1,-Mt)}var _t=0,St=1,Dt=0;for(this[at]=255&st;++_t<ht&&(St*=256);)st<0&&Dt===0&&this[at+_t-1]!==0&&(Dt=1),this[at+_t]=(st/St>>0)-Dt&255;return at+ht},i.prototype.writeIntBE=function(st,at,ht,Lt){if(st=+st,at>>>=0,!Lt){var Mt=Math.pow(2,8*ht-1);z(this,st,at,ht,Mt-1,-Mt)}var _t=ht-1,St=1,Dt=0;for(this[at+_t]=255&st;--_t>=0&&(St*=256);)st<0&&Dt===0&&this[at+_t+1]!==0&&(Dt=1),this[at+_t]=(st/St>>0)-Dt&255;return at+ht},i.prototype.writeInt8=function(st,at,ht){return st=+st,at>>>=0,ht||z(this,st,at,1,127,-128),st<0&&(st=255+st+1),this[at]=255&st,at+1},i.prototype.writeInt16LE=function(st,at,ht){return st=+st,at>>>=0,ht||z(this,st,at,2,32767,-32768),this[at]=255&st,this[at+1]=st>>>8,at+2},i.prototype.writeInt16BE=function(st,at,ht){return st=+st,at>>>=0,ht||z(this,st,at,2,32767,-32768),this[at]=st>>>8,this[at+1]=255&st,at+2},i.prototype.writeInt32LE=function(st,at,ht){return st=+st,at>>>=0,ht||z(this,st,at,4,2147483647,-2147483648),this[at]=255&st,this[at+1]=st>>>8,this[at+2]=st>>>16,this[at+3]=st>>>24,at+4},i.prototype.writeInt32BE=function(st,at,ht){return st=+st,at>>>=0,ht||z(this,st,at,4,2147483647,-2147483648),st<0&&(st=4294967295+st+1),this[at]=st>>>24,this[at+1]=st>>>16,this[at+2]=st>>>8,this[at+3]=255&st,at+4},i.prototype.writeBigInt64LE=vt(function(st){return G(this,st,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=vt(function(st){return V(this,st,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function(st,at,ht){return J(this,st,at,!0,ht)},i.prototype.writeFloatBE=function(st,at,ht){return J(this,st,at,!1,ht)},i.prototype.writeDoubleLE=function(st,at,ht){return X(this,st,at,!0,ht)},i.prototype.writeDoubleBE=function(st,at,ht){return X(this,st,at,!1,ht)},i.prototype.copy=function(st,at,ht,Lt){if(!i.isBuffer(st))throw new TypeError("argument should be a Buffer");if(ht||(ht=0),Lt||Lt===0||(Lt=this.length),at>=st.length&&(at=st.length),at||(at=0),Lt>0&&Lt<ht&&(Lt=ht),Lt===ht||st.length===0||this.length===0)return 0;if(at<0)throw new RangeError("targetStart out of bounds");if(ht<0||ht>=this.length)throw new RangeError("Index out of range");if(Lt<0)throw new RangeError("sourceEnd out of bounds");Lt>this.length&&(Lt=this.length),st.length-at<Lt-ht&&(Lt=st.length-at+ht);var Mt=Lt-ht;return this===st&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(at,ht,Lt):Uint8Array.prototype.set.call(st,this.subarray(ht,Lt),at),Mt},i.prototype.fill=function(st,at,ht,Lt){if(typeof st=="string"){if(typeof at=="string"?(Lt=at,at=0,ht=this.length):typeof ht=="string"&&(Lt=ht,ht=this.length),Lt!==void 0&&typeof Lt!="string")throw new TypeError("encoding must be a string");if(typeof Lt=="string"&&!i.isEncoding(Lt))throw new TypeError("Unknown encoding: "+Lt);if(st.length===1){var Mt=st.charCodeAt(0);(Lt==="utf8"&&Mt<128||Lt==="latin1")&&(st=Mt)}}else typeof st=="number"?st&=255:typeof st=="boolean"&&(st=Number(st));if(at<0||this.length<at||this.length<ht)throw new RangeError("Out of range index");if(ht<=at)return this;var _t;if(at>>>=0,ht=ht===void 0?this.length:ht>>>0,st||(st=0),typeof st=="number")for(_t=at;_t<ht;++_t)this[_t]=st;else{var St=i.isBuffer(st)?st:i.from(st,Lt),Dt=St.length;if(Dt===0)throw new TypeError('The value "'+st+'" is invalid for argument "value"');for(_t=0;_t<ht-at;++_t)this[_t+at]=St[_t%Dt]}return this};var Y={};function Z(st,at,ht){Y[st]=function(Lt){(function(bt,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");bt.prototype=Object.create(It&&It.prototype,{constructor:{value:bt,writable:!0,configurable:!0}}),Object.defineProperty(bt,"prototype",{writable:!1}),It&&k(bt,It)})(Tt,Lt);var Mt,_t,St,Dt,ut=(St=Tt,Dt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var bt,It=m(St);if(Dt){var zt=m(this).constructor;bt=Reflect.construct(It,arguments,zt)}else bt=It.apply(this,arguments);return function(Ft,$t){if($t&&(h($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r(Ft)}(this,bt)});function Tt(){var bt;return function(It,zt){if(!(It instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Tt),bt=ut.call(this),Object.defineProperty(r(bt),"message",{value:at.apply(r(bt),arguments),writable:!0,configurable:!0}),bt.name="".concat(bt.name," [").concat(st,"]"),bt.stack,delete bt.name,bt}return Mt=Tt,(_t=[{key:"code",get:function(){return st},set:function(bt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:bt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(st,"]: ").concat(this.message)}}])&&T(Mt.prototype,_t),Object.defineProperty(Mt,"prototype",{writable:!1}),Tt}(ht)}function tt(st){for(var at="",ht=st.length,Lt=st[0]==="-"?1:0;ht>=Lt+4;ht-=3)at="_".concat(st.slice(ht-3,ht)).concat(at);return"".concat(st.slice(0,ht)).concat(at)}function rt(st,at,ht,Lt,Mt,_t){if(st>ht||st<at){var St,Dt=typeof at=="bigint"?"n":"";throw St=_t>3?at===0||at===BigInt(0)?">= 0".concat(Dt," and < 2").concat(Dt," ** ").concat(8*(_t+1)).concat(Dt):">= -(2".concat(Dt," ** ").concat(8*(_t+1)-1).concat(Dt,") and < 2 ** ")+"".concat(8*(_t+1)-1).concat(Dt):">= ".concat(at).concat(Dt," and <= ").concat(ht).concat(Dt),new Y.ERR_OUT_OF_RANGE("value",St,st)}(function(ut,Tt,bt){nt(Tt,"offset"),ut[Tt]!==void 0&&ut[Tt+bt]!==void 0||ot(Tt,ut.length-(bt+1))})(Lt,Mt,_t)}function nt(st,at){if(typeof st!="number")throw new Y.ERR_INVALID_ARG_TYPE(at,"number",st)}function ot(st,at,ht){throw Math.floor(st)!==st?(nt(st,ht),new Y.ERR_OUT_OF_RANGE(ht||"offset","an integer",st)):at<0?new Y.ERR_BUFFER_OUT_OF_BOUNDS:new Y.ERR_OUT_OF_RANGE(ht||"offset",">= ".concat(ht?1:0," and <= ").concat(at),st)}Z("ERR_BUFFER_OUT_OF_BOUNDS",function(st){return st?"".concat(st," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Z("ERR_INVALID_ARG_TYPE",function(st,at){return'The "'.concat(st,'" argument must be of type number. Received type ').concat(h(at))},TypeError),Z("ERR_OUT_OF_RANGE",function(st,at,ht){var Lt='The value of "'.concat(st,'" is out of range.'),Mt=ht;return Number.isInteger(ht)&&Math.abs(ht)>Math.pow(2,32)?Mt=tt(String(ht)):typeof ht=="bigint"&&(Mt=String(ht),(ht>Math.pow(BigInt(2),BigInt(32))||ht<-Math.pow(BigInt(2),BigInt(32)))&&(Mt=tt(Mt)),Mt+="n"),Lt+" It must be ".concat(at,". Received ").concat(Mt)},RangeError);var ct=/[^+/0-9A-Za-z-_]/g;function pt(st,at){var ht;at=at||1/0;for(var Lt=st.length,Mt=null,_t=[],St=0;St<Lt;++St){if((ht=st.charCodeAt(St))>55295&&ht<57344){if(!Mt){if(ht>56319){(at-=3)>-1&&_t.push(239,191,189);continue}if(St+1===Lt){(at-=3)>-1&&_t.push(239,191,189);continue}Mt=ht;continue}if(ht<56320){(at-=3)>-1&&_t.push(239,191,189),Mt=ht;continue}ht=65536+(Mt-55296<<10|ht-56320)}else Mt&&(at-=3)>-1&&_t.push(239,191,189);if(Mt=null,ht<128){if((at-=1)<0)break;_t.push(ht)}else if(ht<2048){if((at-=2)<0)break;_t.push(ht>>6|192,63&ht|128)}else if(ht<65536){if((at-=3)<0)break;_t.push(ht>>12|224,ht>>6&63|128,63&ht|128)}else{if(!(ht<1114112))throw new Error("Invalid code point");if((at-=4)<0)break;_t.push(ht>>18|240,ht>>12&63|128,ht>>6&63|128,63&ht|128)}}return _t}function gt(st){return s.toByteArray(function(at){if((at=(at=at.split("=")[0]).trim().replace(ct,"")).length<2)return"";for(;at.length%4!=0;)at+="=";return at}(st))}function kt(st,at,ht,Lt){var Mt;for(Mt=0;Mt<Lt&&!(Mt+ht>=at.length||Mt>=st.length);++Mt)at[Mt+ht]=st[Mt];return Mt}function yt(st,at){return st instanceof at||st!=null&&st.constructor!=null&&st.constructor.name!=null&&st.constructor.name===at.name}function mt(st){return st!=st}var Ot=function(){for(var st="0123456789abcdef",at=new Array(256),ht=0;ht<16;++ht)for(var Lt=16*ht,Mt=0;Mt<16;++Mt)at[Lt+Mt]=st[ht]+st[Mt];return at}();function vt(st){return typeof BigInt>"u"?xt:st}function xt(){throw new Error("BigInt not supported")}},35791:function(W){W.exports=k,W.exports.isMobile=k,W.exports.default=k;var I=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/CrOS/,T=/android|ipad|playbook|silk/i;function k(r){r||(r={});var m=r.ua;if(m||typeof navigator>"u"||(m=navigator.userAgent),m&&m.headers&&typeof m.headers["user-agent"]=="string"&&(m=m.headers["user-agent"]),typeof m!="string")return!1;var h=I.test(m)&&!o.test(m)||!!r.tablet&&T.test(m);return!h&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&m.indexOf("Macintosh")!==-1&&m.indexOf("Safari")!==-1&&(h=!0),h}},86781:function(W,I,o){o.r(I),o.d(I,{sankeyCenter:function(){return a},sankeyCircular:function(){return E},sankeyJustify:function(){return n},sankeyLeft:function(){return e},sankeyRight:function(){return t}});var T=o(33064),k=o(15140),r=o(45879),m=o(2502),h=o.n(m);function s(kt){return kt.target.depth}function e(kt){return kt.depth}function t(kt,yt){return yt-1-kt.height}function n(kt,yt){return kt.sourceLinks.length?kt.depth:yt-1}function a(kt){return kt.targetLinks.length?kt.depth:kt.sourceLinks.length?(0,T.VV)(kt.sourceLinks,s)-1:0}function i(kt){return function(){return kt}}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(kt){return typeof kt}:function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt};function l(kt,yt){return f(kt.source,yt.source)||kt.index-yt.index}function u(kt,yt){return f(kt.target,yt.target)||kt.index-yt.index}function f(kt,yt){return kt.partOfCycle===yt.partOfCycle?kt.y0-yt.y0:kt.circularLinkType==="top"||yt.circularLinkType==="bottom"?-1:1}function d(kt){return kt.value}function w(kt){return(kt.y0+kt.y1)/2}function v(kt){return w(kt.source)}function p(kt){return w(kt.target)}function y(kt){return kt.index}function b(kt){return kt.nodes}function x(kt){return kt.links}function _(kt,yt){var mt=kt.get(yt);if(!mt)throw new Error("missing: "+yt);return mt}function g(kt,yt){return yt(kt)}var A=25,M=10,L=.3;function E(){var kt,yt,mt=0,Ot=0,vt=1,xt=1,st=24,at=y,ht=n,Lt=b,Mt=x,_t=32,St=2,Dt=null;function ut(){var bt={nodes:Lt.apply(null,arguments),links:Mt.apply(null,arguments)};(function(zt){zt.nodes.forEach(function($t,Wt){$t.index=Wt,$t.sourceLinks=[],$t.targetLinks=[]});var Ft=(0,k.UI)(zt.nodes,at);zt.links.forEach(function($t,Wt){$t.index=Wt;var Xt=$t.source,ae=$t.target;(Xt===void 0?"undefined":c(Xt))!=="object"&&(Xt=$t.source=_(Ft,Xt)),(ae===void 0?"undefined":c(ae))!=="object"&&(ae=$t.target=_(Ft,ae)),Xt.sourceLinks.push($t),ae.targetLinks.push($t)})})(bt),function(zt,Ft,$t){var Wt=0;if($t===null){for(var Xt=[],ae=0;ae<zt.links.length;ae++){var Qt=zt.links[ae],de=Qt.source.index,ye=Qt.target.index;Xt[de]||(Xt[de]=[]),Xt[ye]||(Xt[ye]=[]),Xt[de].indexOf(ye)===-1&&Xt[de].push(ye)}var ve=h()(Xt);ve.sort(function(ke,Ae){return ke.length-Ae.length});var ie={};for(ae=0;ae<ve.length;ae++){var se=ve[ae].slice(-2);ie[se[0]]||(ie[se[0]]={}),ie[se[0]][se[1]]=!0}zt.links.forEach(function(ke){var Ae=ke.target.index,Ie=ke.source.index;Ae===Ie||ie[Ie]&&ie[Ie][Ae]?(ke.circular=!0,ke.circularLinkID=Wt,Wt+=1):ke.circular=!1})}else zt.links.forEach(function(ke){ke.source[$t]<ke.target[$t]?ke.circular=!1:(ke.circular=!0,ke.circularLinkID=Wt,Wt+=1)})}(bt,0,Dt),function(zt){zt.nodes.forEach(function(Ft){Ft.partOfCycle=!1,Ft.value=Math.max((0,T.Sm)(Ft.sourceLinks,d),(0,T.Sm)(Ft.targetLinks,d)),Ft.sourceLinks.forEach(function($t){$t.circular&&(Ft.partOfCycle=!0,Ft.circularLinkType=$t.circularLinkType)}),Ft.targetLinks.forEach(function($t){$t.circular&&(Ft.partOfCycle=!0,Ft.circularLinkType=$t.circularLinkType)})})}(bt),function(zt){var Ft,$t,Wt;for(Ft=zt.nodes,$t=[],Wt=0;Ft.length;++Wt,Ft=$t,$t=[])Ft.forEach(function(Xt){Xt.depth=Wt,Xt.sourceLinks.forEach(function(ae){$t.indexOf(ae.target)<0&&!ae.circular&&$t.push(ae.target)})});for(Ft=zt.nodes,$t=[],Wt=0;Ft.length;++Wt,Ft=$t,$t=[])Ft.forEach(function(Xt){Xt.height=Wt,Xt.targetLinks.forEach(function(ae){$t.indexOf(ae.source)<0&&!ae.circular&&$t.push(ae.source)})});zt.nodes.forEach(function(Xt){Xt.column=Math.floor(ht.call(null,Xt,Wt))})}(bt),S(bt,at),function(zt,Ft,$t){var Wt=(0,k.b1)().key(function(ye){return ye.column}).sortKeys(T.j2).entries(zt.nodes).map(function(ye){return ye.values});(function(ye){if(yt){var ve=1/0;Wt.forEach(function(Ae){var Ie=xt*yt/(Ae.length+1);ve=Ie<ve?Ie:ve}),kt=ve}var ie=(0,T.VV)(Wt,function(Ae){return(xt-Ot-(Ae.length-1)*kt)/(0,T.Sm)(Ae,d)});ie*=L,zt.links.forEach(function(Ae){Ae.width=Ae.value*ie});var se=function(Ae){var Ie=0,Te=0,Vt=0,Zt=0,Gt=(0,T.Fp)(Ae.nodes,function(Yt){return Yt.column});return Ae.links.forEach(function(Yt){Yt.circular&&(Yt.circularLinkType=="top"?Ie+=Yt.width:Te+=Yt.width,Yt.target.column==0&&(Zt+=Yt.width),Yt.source.column==Gt&&(Vt+=Yt.width))}),{top:Ie=Ie>0?Ie+A+M:Ie,bottom:Te=Te>0?Te+A+M:Te,left:Zt=Zt>0?Zt+A+M:Zt,right:Vt=Vt>0?Vt+A+M:Vt}}(zt),ke=function(Ae,Ie){var Te=(0,T.Fp)(Ae.nodes,function(ne){return ne.column}),Vt=vt-mt,Zt=xt-Ot,Gt=Vt/(Vt+Ie.right+Ie.left),Yt=Zt/(Zt+Ie.top+Ie.bottom);return mt=mt*Gt+Ie.left,vt=Ie.right==0?vt:vt*Gt,Ot=Ot*Yt+Ie.top,xt*=Yt,Ae.nodes.forEach(function(ne){ne.x0=mt+ne.column*((vt-mt-st)/Te),ne.x1=ne.x0+st}),Yt}(zt,se);ie*=ke,zt.links.forEach(function(Ae){Ae.width=Ae.value*ie}),Wt.forEach(function(Ae){var Ie=Ae.length;Ae.forEach(function(Te,Vt){Te.depth==Wt.length-1&&Ie==1||Te.depth==0&&Ie==1?(Te.y0=xt/2-Te.value*ie,Te.y1=Te.y0+Te.value*ie):Te.partOfCycle?P(Te,ye)==0?(Te.y0=xt/2+Vt,Te.y1=Te.y0+Te.value*ie):Te.circularLinkType=="top"?(Te.y0=Ot+Vt,Te.y1=Te.y0+Te.value*ie):(Te.y0=xt-Te.value*ie-Vt,Te.y1=Te.y0+Te.value*ie):se.top==0||se.bottom==0?(Te.y0=(xt-Ot)/Ie*Vt,Te.y1=Te.y0+Te.value*ie):(Te.y0=(xt-Ot)/2-Ie/2+Vt,Te.y1=Te.y0+Te.value*ie)})})})($t),de();for(var Xt=1,ae=Ft;ae>0;--ae)Qt(Xt*=.99,$t),de();function Qt(ye,ve){var ie=Wt.length;Wt.forEach(function(se){var ke=se.length,Ae=se[0].depth;se.forEach(function(Ie){var Te;if((Ie.sourceLinks.length||Ie.targetLinks.length)&&!(Ie.partOfCycle&&P(Ie,ve)>0))if(Ae==0&&ke==1)Te=Ie.y1-Ie.y0,Ie.y0=xt/2-Te/2,Ie.y1=xt/2+Te/2;else if(Ae==ie-1&&ke==1)Te=Ie.y1-Ie.y0,Ie.y0=xt/2-Te/2,Ie.y1=xt/2+Te/2;else{var Vt=(0,T.J6)(Ie.sourceLinks,p),Zt=(0,T.J6)(Ie.targetLinks,v),Gt=((Vt&&Zt?(Vt+Zt)/2:Vt||Zt)-w(Ie))*ye;Ie.y0+=Gt,Ie.y1+=Gt}})})}function de(){Wt.forEach(function(ye){var ve,ie,se,ke=Ot,Ae=ye.length;for(ye.sort(f),se=0;se<Ae;++se)(ie=ke-(ve=ye[se]).y0)>0&&(ve.y0+=ie,ve.y1+=ie),ke=ve.y1+kt;if((ie=ke-kt-xt)>0)for(ke=ve.y0-=ie,ve.y1-=ie,se=Ae-2;se>=0;--se)(ie=(ve=ye[se]).y1+kt-ke)>0&&(ve.y0-=ie,ve.y1-=ie),ke=ve.y0})}}(bt,_t,at),Tt(bt);for(var It=0;It<4;It++)nt(bt,xt,at),ot(bt,0,at),tt(bt,Ot,xt,at),nt(bt,xt,at),ot(bt,0,at);return function(zt,Ft,$t){var Wt=zt.nodes,Xt=zt.links,ae=!1,Qt=!1;if(Xt.forEach(function(ve){ve.circularLinkType=="top"?ae=!0:ve.circularLinkType=="bottom"&&(Qt=!0)}),ae==0||Qt==0){var de=(0,T.VV)(Wt,function(ve){return ve.y0}),ye=($t-Ft)/((0,T.Fp)(Wt,function(ve){return ve.y1})-de);Wt.forEach(function(ve){var ie=(ve.y1-ve.y0)*ye;ve.y0=(ve.y0-de)*ye,ve.y1=ve.y0+ie}),Xt.forEach(function(ve){ve.y0=(ve.y0-de)*ye,ve.y1=(ve.y1-de)*ye,ve.width=ve.width*ye})}}(bt,Ot,xt),j(bt,St,xt,at),bt}function Tt(bt){bt.nodes.forEach(function(It){It.sourceLinks.sort(u),It.targetLinks.sort(l)}),bt.nodes.forEach(function(It){var zt=It.y0,Ft=zt,$t=It.y1,Wt=$t;It.sourceLinks.forEach(function(Xt){Xt.circular?(Xt.y0=$t-Xt.width/2,$t-=Xt.width):(Xt.y0=zt+Xt.width/2,zt+=Xt.width)}),It.targetLinks.forEach(function(Xt){Xt.circular?(Xt.y1=Wt-Xt.width/2,Wt-=Xt.width):(Xt.y1=Ft+Xt.width/2,Ft+=Xt.width)})})}return ut.nodeId=function(bt){return arguments.length?(at=typeof bt=="function"?bt:i(bt),ut):at},ut.nodeAlign=function(bt){return arguments.length?(ht=typeof bt=="function"?bt:i(bt),ut):ht},ut.nodeWidth=function(bt){return arguments.length?(st=+bt,ut):st},ut.nodePadding=function(bt){return arguments.length?(kt=+bt,ut):kt},ut.nodes=function(bt){return arguments.length?(Lt=typeof bt=="function"?bt:i(bt),ut):Lt},ut.links=function(bt){return arguments.length?(Mt=typeof bt=="function"?bt:i(bt),ut):Mt},ut.size=function(bt){return arguments.length?(mt=Ot=0,vt=+bt[0],xt=+bt[1],ut):[vt-mt,xt-Ot]},ut.extent=function(bt){return arguments.length?(mt=+bt[0][0],vt=+bt[1][0],Ot=+bt[0][1],xt=+bt[1][1],ut):[[mt,Ot],[vt,xt]]},ut.iterations=function(bt){return arguments.length?(_t=+bt,ut):_t},ut.circularLinkGap=function(bt){return arguments.length?(St=+bt,ut):St},ut.nodePaddingRatio=function(bt){return arguments.length?(yt=+bt,ut):yt},ut.sortNodes=function(bt){return arguments.length?(Dt=bt,ut):Dt},ut.update=function(bt){return S(bt,at),Tt(bt),bt.links.forEach(function(It){It.circular&&(It.circularLinkType=It.y0+It.y1<xt?"top":"bottom",It.source.circularLinkType=It.circularLinkType,It.target.circularLinkType=It.circularLinkType)}),nt(bt,xt,at,!1),ot(bt,0,at),j(bt,St,xt,at),bt},ut}function S(kt,yt){var mt=0,Ot=0;kt.links.forEach(function(vt){vt.circular&&(vt.source.circularLinkType||vt.target.circularLinkType?vt.circularLinkType=vt.source.circularLinkType?vt.source.circularLinkType:vt.target.circularLinkType:vt.circularLinkType=mt<Ot?"top":"bottom",vt.circularLinkType=="top"?mt+=1:Ot+=1,kt.nodes.forEach(function(xt){g(xt,yt)!=g(vt.source,yt)&&g(xt,yt)!=g(vt.target,yt)||(xt.circularLinkType=vt.circularLinkType)}))}),kt.links.forEach(function(vt){vt.circular&&(vt.source.circularLinkType==vt.target.circularLinkType&&(vt.circularLinkType=vt.source.circularLinkType),gt(vt,yt)&&(vt.circularLinkType=vt.source.circularLinkType))})}function O(kt){var yt=Math.abs(kt.y1-kt.y0),mt=Math.abs(kt.target.x0-kt.source.x1);return Math.atan(mt/yt)}function P(kt,yt){var mt=0;kt.sourceLinks.forEach(function(vt){mt=vt.circular&&!gt(vt,yt)?mt+1:mt});var Ot=0;return kt.targetLinks.forEach(function(vt){Ot=vt.circular&&!gt(vt,yt)?Ot+1:Ot}),mt+Ot}function U(kt){var yt=kt.source.sourceLinks,mt=0;yt.forEach(function(xt){mt=xt.circular?mt+1:mt});var Ot=kt.target.targetLinks,vt=0;return Ot.forEach(function(xt){vt=xt.circular?vt+1:vt}),!(mt>1||vt>1)}function R(kt,yt,mt){return kt.sort(B),kt.forEach(function(Ot,vt){var xt,st,at=0;if(gt(Ot,mt)&&U(Ot))Ot.circularPathData.verticalBuffer=at+Ot.width/2;else{for(var ht=0;ht<vt;ht++)if(xt=kt[vt],st=kt[ht],!(xt.source.column<st.target.column||xt.target.column>st.source.column)){var Lt=kt[ht].circularPathData.verticalBuffer+kt[ht].width/2+yt;at=Lt>at?Lt:at}Ot.circularPathData.verticalBuffer=at+Ot.width/2}}),kt}function j(kt,yt,mt,Ot){var vt=(0,T.VV)(kt.links,function(xt){return xt.source.y0});kt.links.forEach(function(xt){xt.circular&&(xt.circularPathData={})}),R(kt.links.filter(function(xt){return xt.circularLinkType=="top"}),yt,Ot),R(kt.links.filter(function(xt){return xt.circularLinkType=="bottom"}),yt,Ot),kt.links.forEach(function(xt){if(xt.circular){if(xt.circularPathData.arcRadius=xt.width+M,xt.circularPathData.leftNodeBuffer=5,xt.circularPathData.rightNodeBuffer=5,xt.circularPathData.sourceWidth=xt.source.x1-xt.source.x0,xt.circularPathData.sourceX=xt.source.x0+xt.circularPathData.sourceWidth,xt.circularPathData.targetX=xt.target.x0,xt.circularPathData.sourceY=xt.y0,xt.circularPathData.targetY=xt.y1,gt(xt,Ot)&&U(xt))xt.circularPathData.leftSmallArcRadius=M+xt.width/2,xt.circularPathData.leftLargeArcRadius=M+xt.width/2,xt.circularPathData.rightSmallArcRadius=M+xt.width/2,xt.circularPathData.rightLargeArcRadius=M+xt.width/2,xt.circularLinkType=="bottom"?(xt.circularPathData.verticalFullExtent=xt.source.y1+A+xt.circularPathData.verticalBuffer,xt.circularPathData.verticalLeftInnerExtent=xt.circularPathData.verticalFullExtent-xt.circularPathData.leftLargeArcRadius,xt.circularPathData.verticalRightInnerExtent=xt.circularPathData.verticalFullExtent-xt.circularPathData.rightLargeArcRadius):(xt.circularPathData.verticalFullExtent=xt.source.y0-A-xt.circularPathData.verticalBuffer,xt.circularPathData.verticalLeftInnerExtent=xt.circularPathData.verticalFullExtent+xt.circularPathData.leftLargeArcRadius,xt.circularPathData.verticalRightInnerExtent=xt.circularPathData.verticalFullExtent+xt.circularPathData.rightLargeArcRadius);else{var st=xt.source.column,at=xt.circularLinkType,ht=kt.links.filter(function(_t){return _t.source.column==st&&_t.circularLinkType==at});xt.circularLinkType=="bottom"?ht.sort(G):ht.sort(z);var Lt=0;ht.forEach(function(_t,St){_t.circularLinkID==xt.circularLinkID&&(xt.circularPathData.leftSmallArcRadius=M+xt.width/2+Lt,xt.circularPathData.leftLargeArcRadius=M+xt.width/2+St*yt+Lt),Lt+=_t.width}),st=xt.target.column,ht=kt.links.filter(function(_t){return _t.target.column==st&&_t.circularLinkType==at}),xt.circularLinkType=="bottom"?ht.sort(et):ht.sort(V),Lt=0,ht.forEach(function(_t,St){_t.circularLinkID==xt.circularLinkID&&(xt.circularPathData.rightSmallArcRadius=M+xt.width/2+Lt,xt.circularPathData.rightLargeArcRadius=M+xt.width/2+St*yt+Lt),Lt+=_t.width}),xt.circularLinkType=="bottom"?(xt.circularPathData.verticalFullExtent=Math.max(mt,xt.source.y1,xt.target.y1)+A+xt.circularPathData.verticalBuffer,xt.circularPathData.verticalLeftInnerExtent=xt.circularPathData.verticalFullExtent-xt.circularPathData.leftLargeArcRadius,xt.circularPathData.verticalRightInnerExtent=xt.circularPathData.verticalFullExtent-xt.circularPathData.rightLargeArcRadius):(xt.circularPathData.verticalFullExtent=vt-A-xt.circularPathData.verticalBuffer,xt.circularPathData.verticalLeftInnerExtent=xt.circularPathData.verticalFullExtent+xt.circularPathData.leftLargeArcRadius,xt.circularPathData.verticalRightInnerExtent=xt.circularPathData.verticalFullExtent+xt.circularPathData.rightLargeArcRadius)}xt.circularPathData.leftInnerExtent=xt.circularPathData.sourceX+xt.circularPathData.leftNodeBuffer,xt.circularPathData.rightInnerExtent=xt.circularPathData.targetX-xt.circularPathData.rightNodeBuffer,xt.circularPathData.leftFullExtent=xt.circularPathData.sourceX+xt.circularPathData.leftLargeArcRadius+xt.circularPathData.leftNodeBuffer,xt.circularPathData.rightFullExtent=xt.circularPathData.targetX-xt.circularPathData.rightLargeArcRadius-xt.circularPathData.rightNodeBuffer}if(xt.circular)xt.path=function(_t){return _t.circularLinkType=="top"?"M"+_t.circularPathData.sourceX+" "+_t.circularPathData.sourceY+" L"+_t.circularPathData.leftInnerExtent+" "+_t.circularPathData.sourceY+" A"+_t.circularPathData.leftLargeArcRadius+" "+_t.circularPathData.leftSmallArcRadius+" 0 0 0 "+_t.circularPathData.leftFullExtent+" "+(_t.circularPathData.sourceY-_t.circularPathData.leftSmallArcRadius)+" L"+_t.circularPathData.leftFullExtent+" "+_t.circularPathData.verticalLeftInnerExtent+" A"+_t.circularPathData.leftLargeArcRadius+" "+_t.circularPathData.leftLargeArcRadius+" 0 0 0 "+_t.circularPathData.leftInnerExtent+" "+_t.circularPathData.verticalFullExtent+" L"+_t.circularPathData.rightInnerExtent+" "+_t.circularPathData.verticalFullExtent+" A"+_t.circularPathData.rightLargeArcRadius+" "+_t.circularPathData.rightLargeArcRadius+" 0 0 0 "+_t.circularPathData.rightFullExtent+" "+_t.circularPathData.verticalRightInnerExtent+" L"+_t.circularPathData.rightFullExtent+" "+(_t.circularPathData.targetY-_t.circularPathData.rightSmallArcRadius)+" A"+_t.circularPathData.rightLargeArcRadius+" "+_t.circularPathData.rightSmallArcRadius+" 0 0 0 "+_t.circularPathData.rightInnerExtent+" "+_t.circularPathData.targetY+" L"+_t.circularPathData.targetX+" "+_t.circularPathData.targetY:"M"+_t.circularPathData.sourceX+" "+_t.circularPathData.sourceY+" L"+_t.circularPathData.leftInnerExtent+" "+_t.circularPathData.sourceY+" A"+_t.circularPathData.leftLargeArcRadius+" "+_t.circularPathData.leftSmallArcRadius+" 0 0 1 "+_t.circularPathData.leftFullExtent+" "+(_t.circularPathData.sourceY+_t.circularPathData.leftSmallArcRadius)+" L"+_t.circularPathData.leftFullExtent+" "+_t.circularPathData.verticalLeftInnerExtent+" A"+_t.circularPathData.leftLargeArcRadius+" "+_t.circularPathData.leftLargeArcRadius+" 0 0 1 "+_t.circularPathData.leftInnerExtent+" "+_t.circularPathData.verticalFullExtent+" L"+_t.circularPathData.rightInnerExtent+" "+_t.circularPathData.verticalFullExtent+" A"+_t.circularPathData.rightLargeArcRadius+" "+_t.circularPathData.rightLargeArcRadius+" 0 0 1 "+_t.circularPathData.rightFullExtent+" "+_t.circularPathData.verticalRightInnerExtent+" L"+_t.circularPathData.rightFullExtent+" "+(_t.circularPathData.targetY+_t.circularPathData.rightSmallArcRadius)+" A"+_t.circularPathData.rightLargeArcRadius+" "+_t.circularPathData.rightSmallArcRadius+" 0 0 1 "+_t.circularPathData.rightInnerExtent+" "+_t.circularPathData.targetY+" L"+_t.circularPathData.targetX+" "+_t.circularPathData.targetY}(xt);else{var Mt=(0,r.h5)().source(function(_t){return[_t.source.x0+(_t.source.x1-_t.source.x0),_t.y0]}).target(function(_t){return[_t.target.x0,_t.y1]});xt.path=Mt(xt)}})}function B(kt,yt){return J(kt)==J(yt)?kt.circularLinkType=="bottom"?G(kt,yt):z(kt,yt):J(yt)-J(kt)}function z(kt,yt){return kt.y0-yt.y0}function G(kt,yt){return yt.y0-kt.y0}function V(kt,yt){return kt.y1-yt.y1}function et(kt,yt){return yt.y1-kt.y1}function J(kt){return kt.target.column-kt.source.column}function X(kt){return kt.target.x0-kt.source.x1}function Y(kt,yt){var mt=O(kt),Ot=X(yt)/Math.tan(mt);return pt(kt)=="up"?kt.y1+Ot:kt.y1-Ot}function Z(kt,yt){var mt=O(kt),Ot=X(yt)/Math.tan(mt);return pt(kt)=="up"?kt.y1-Ot:kt.y1+Ot}function tt(kt,yt,mt,Ot){kt.links.forEach(function(vt){if(!vt.circular&&vt.target.column-vt.source.column>1){var xt=vt.source.column+1,st=vt.target.column-1,at=1,ht=st-xt+1;for(at=1;xt<=st;xt++,at++)kt.nodes.forEach(function(Lt){if(Lt.column==xt){var Mt,_t=at/(ht+1),St=Math.pow(1-_t,3),Dt=3*_t*Math.pow(1-_t,2),ut=3*Math.pow(_t,2)*(1-_t),Tt=Math.pow(_t,3),bt=St*vt.y0+Dt*vt.y0+ut*vt.y1+Tt*vt.y1,It=bt-vt.width/2,zt=bt+vt.width/2;It>Lt.y0&&It<Lt.y1?(Mt=Lt.y1-It+10,Mt=Lt.circularLinkType=="bottom"?Mt:-Mt,Lt=rt(Lt,Mt,yt,mt),kt.nodes.forEach(function(Ft){var $t,Wt;g(Ft,Ot)!=g(Lt,Ot)&&Ft.column==Lt.column&&(Wt=Ft,($t=Lt).y0>Wt.y0&&$t.y0<Wt.y1||$t.y1>Wt.y0&&$t.y1<Wt.y1||$t.y0<Wt.y0&&$t.y1>Wt.y1)&&rt(Ft,Mt,yt,mt)})):(zt>Lt.y0&&zt<Lt.y1||It<Lt.y0&&zt>Lt.y1)&&(Mt=zt-Lt.y0+10,Lt=rt(Lt,Mt,yt,mt),kt.nodes.forEach(function(Ft){g(Ft,Ot)!=g(Lt,Ot)&&Ft.column==Lt.column&&Ft.y0<Lt.y1&&Ft.y1>Lt.y1&&rt(Ft,Mt,yt,mt)}))}})}})}function rt(kt,yt,mt,Ot){return kt.y0+yt>=mt&&kt.y1+yt<=Ot&&(kt.y0=kt.y0+yt,kt.y1=kt.y1+yt,kt.targetLinks.forEach(function(vt){vt.y1=vt.y1+yt}),kt.sourceLinks.forEach(function(vt){vt.y0=vt.y0+yt})),kt}function nt(kt,yt,mt,Ot){kt.nodes.forEach(function(vt){Ot&&vt.y+(vt.y1-vt.y0)>yt&&(vt.y=vt.y-(vt.y+(vt.y1-vt.y0)-yt));var xt=kt.links.filter(function(ht){return g(ht.source,mt)==g(vt,mt)}),st=xt.length;st>1&&xt.sort(function(ht,Lt){if(!ht.circular&&!Lt.circular){if(ht.target.column==Lt.target.column||!ct(ht,Lt))return ht.y1-Lt.y1;if(ht.target.column>Lt.target.column){var Mt=Z(Lt,ht);return ht.y1-Mt}if(Lt.target.column>ht.target.column)return Z(ht,Lt)-Lt.y1}return ht.circular&&!Lt.circular?ht.circularLinkType=="top"?-1:1:Lt.circular&&!ht.circular?Lt.circularLinkType=="top"?1:-1:ht.circular&&Lt.circular?ht.circularLinkType===Lt.circularLinkType&&ht.circularLinkType=="top"?ht.target.column===Lt.target.column?ht.target.y1-Lt.target.y1:Lt.target.column-ht.target.column:ht.circularLinkType===Lt.circularLinkType&&ht.circularLinkType=="bottom"?ht.target.column===Lt.target.column?Lt.target.y1-ht.target.y1:ht.target.column-Lt.target.column:ht.circularLinkType=="top"?-1:1:void 0});var at=vt.y0;xt.forEach(function(ht){ht.y0=at+ht.width/2,at+=ht.width}),xt.forEach(function(ht,Lt){if(ht.circularLinkType=="bottom"){for(var Mt=Lt+1,_t=0;Mt<st;Mt++)_t+=xt[Mt].width;ht.y0=vt.y1-_t-ht.width/2}})})}function ot(kt,yt,mt){kt.nodes.forEach(function(Ot){var vt=kt.links.filter(function(at){return g(at.target,mt)==g(Ot,mt)}),xt=vt.length;xt>1&&vt.sort(function(at,ht){if(!at.circular&&!ht.circular){if(at.source.column==ht.source.column||!ct(at,ht))return at.y0-ht.y0;if(ht.source.column<at.source.column){var Lt=Y(ht,at);return at.y0-Lt}if(at.source.column<ht.source.column)return Y(at,ht)-ht.y0}return at.circular&&!ht.circular?at.circularLinkType=="top"?-1:1:ht.circular&&!at.circular?ht.circularLinkType=="top"?1:-1:at.circular&&ht.circular?at.circularLinkType===ht.circularLinkType&&at.circularLinkType=="top"?at.source.column===ht.source.column?at.source.y1-ht.source.y1:at.source.column-ht.source.column:at.circularLinkType===ht.circularLinkType&&at.circularLinkType=="bottom"?at.source.column===ht.source.column?at.source.y1-ht.source.y1:ht.source.column-at.source.column:at.circularLinkType=="top"?-1:1:void 0});var st=Ot.y0;vt.forEach(function(at){at.y1=st+at.width/2,st+=at.width}),vt.forEach(function(at,ht){if(at.circularLinkType=="bottom"){for(var Lt=ht+1,Mt=0;Lt<xt;Lt++)Mt+=vt[Lt].width;at.y1=Ot.y1-Mt-at.width/2}})})}function ct(kt,yt){return pt(kt)==pt(yt)}function pt(kt){return kt.y0-kt.y1>0?"up":"down"}function gt(kt,yt){return g(kt.source,yt)==g(kt.target,yt)}},30838:function(W,I,o){o.r(I),o.d(I,{sankey:function(){return y},sankeyCenter:function(){return e},sankeyJustify:function(){return s},sankeyLeft:function(){return m},sankeyLinkHorizontal:function(){return g},sankeyRight:function(){return h}});var T=o(33064),k=o(15140);function r(A){return A.target.depth}function m(A){return A.depth}function h(A,M){return M-1-A.height}function s(A,M){return A.sourceLinks.length?A.depth:M-1}function e(A){return A.targetLinks.length?A.depth:A.sourceLinks.length?(0,T.VV)(A.sourceLinks,r)-1:0}function t(A){return function(){return A}}function n(A,M){return i(A.source,M.source)||A.index-M.index}function a(A,M){return i(A.target,M.target)||A.index-M.index}function i(A,M){return A.y0-M.y0}function c(A){return A.value}function l(A){return(A.y0+A.y1)/2}function u(A){return l(A.source)*A.value}function f(A){return l(A.target)*A.value}function d(A){return A.index}function w(A){return A.nodes}function v(A){return A.links}function p(A,M){var L=A.get(M);if(!L)throw new Error("missing: "+M);return L}function y(){var A=0,M=0,L=1,E=1,S=24,O=8,P=d,U=s,R=w,j=v,B=32;function z(){var V={nodes:R.apply(null,arguments),links:j.apply(null,arguments)};return function(et){et.nodes.forEach(function(X,Y){X.index=Y,X.sourceLinks=[],X.targetLinks=[]});var J=(0,k.UI)(et.nodes,P);et.links.forEach(function(X,Y){X.index=Y;var Z=X.source,tt=X.target;typeof Z!="object"&&(Z=X.source=p(J,Z)),typeof tt!="object"&&(tt=X.target=p(J,tt)),Z.sourceLinks.push(X),tt.targetLinks.push(X)})}(V),function(et){et.nodes.forEach(function(J){J.value=Math.max((0,T.Sm)(J.sourceLinks,c),(0,T.Sm)(J.targetLinks,c))})}(V),function(et){var J,X,Y;for(J=et.nodes,X=[],Y=0;J.length;++Y,J=X,X=[])J.forEach(function(tt){tt.depth=Y,tt.sourceLinks.forEach(function(rt){X.indexOf(rt.target)<0&&X.push(rt.target)})});for(J=et.nodes,X=[],Y=0;J.length;++Y,J=X,X=[])J.forEach(function(tt){tt.height=Y,tt.targetLinks.forEach(function(rt){X.indexOf(rt.source)<0&&X.push(rt.source)})});var Z=(L-A-S)/(Y-1);et.nodes.forEach(function(tt){tt.x1=(tt.x0=A+Math.max(0,Math.min(Y-1,Math.floor(U.call(null,tt,Y))))*Z)+S})}(V),function(et){var J=(0,k.b1)().key(function(nt){return nt.x0}).sortKeys(T.j2).entries(et.nodes).map(function(nt){return nt.values});(function(){var nt=(0,T.Fp)(J,function(pt){return pt.length}),ot=.6666666666666666*(E-M)/(nt-1);O>ot&&(O=ot);var ct=(0,T.VV)(J,function(pt){return(E-M-(pt.length-1)*O)/(0,T.Sm)(pt,c)});J.forEach(function(pt){pt.forEach(function(gt,kt){gt.y1=(gt.y0=kt)+gt.value*ct})}),et.links.forEach(function(pt){pt.width=pt.value*ct})})(),rt();for(var X=1,Y=B;Y>0;--Y)tt(X*=.99),rt(),Z(X),rt();function Z(nt){J.forEach(function(ot){ot.forEach(function(ct){if(ct.targetLinks.length){var pt=((0,T.Sm)(ct.targetLinks,u)/(0,T.Sm)(ct.targetLinks,c)-l(ct))*nt;ct.y0+=pt,ct.y1+=pt}})})}function tt(nt){J.slice().reverse().forEach(function(ot){ot.forEach(function(ct){if(ct.sourceLinks.length){var pt=((0,T.Sm)(ct.sourceLinks,f)/(0,T.Sm)(ct.sourceLinks,c)-l(ct))*nt;ct.y0+=pt,ct.y1+=pt}})})}function rt(){J.forEach(function(nt){var ot,ct,pt,gt=M,kt=nt.length;for(nt.sort(i),pt=0;pt<kt;++pt)(ct=gt-(ot=nt[pt]).y0)>0&&(ot.y0+=ct,ot.y1+=ct),gt=ot.y1+O;if((ct=gt-O-E)>0)for(gt=ot.y0-=ct,ot.y1-=ct,pt=kt-2;pt>=0;--pt)(ct=(ot=nt[pt]).y1+O-gt)>0&&(ot.y0-=ct,ot.y1-=ct),gt=ot.y0})}}(V),G(V),V}function G(V){V.nodes.forEach(function(et){et.sourceLinks.sort(a),et.targetLinks.sort(n)}),V.nodes.forEach(function(et){var J=et.y0,X=J;et.sourceLinks.forEach(function(Y){Y.y0=J+Y.width/2,J+=Y.width}),et.targetLinks.forEach(function(Y){Y.y1=X+Y.width/2,X+=Y.width})})}return z.update=function(V){return G(V),V},z.nodeId=function(V){return arguments.length?(P=typeof V=="function"?V:t(V),z):P},z.nodeAlign=function(V){return arguments.length?(U=typeof V=="function"?V:t(V),z):U},z.nodeWidth=function(V){return arguments.length?(S=+V,z):S},z.nodePadding=function(V){return arguments.length?(O=+V,z):O},z.nodes=function(V){return arguments.length?(R=typeof V=="function"?V:t(V),z):R},z.links=function(V){return arguments.length?(j=typeof V=="function"?V:t(V),z):j},z.size=function(V){return arguments.length?(A=M=0,L=+V[0],E=+V[1],z):[L-A,E-M]},z.extent=function(V){return arguments.length?(A=+V[0][0],L=+V[1][0],M=+V[0][1],E=+V[1][1],z):[[A,M],[L,E]]},z.iterations=function(V){return arguments.length?(B=+V,z):B},z}var b=o(45879);function x(A){return[A.source.x1,A.y0]}function _(A){return[A.target.x0,A.y1]}function g(){return(0,b.h5)().source(x).target(_)}},39898:function(W,I,o){var T,k;(function(){var r={version:"3.8.0"},m=[].slice,h=function(N){return m.call(N)},s=self.document;function e(N){return N&&(N.ownerDocument||N.document||N).documentElement}function t(N){return N&&(N.ownerDocument&&N.ownerDocument.defaultView||N.document&&N||N.defaultView)}if(s)try{h(s.documentElement.childNodes)[0].nodeType}catch{h=function(N){for(var Q=N.length,it=new Array(Q);Q--;)it[Q]=N[Q];return it}}if(Date.now||(Date.now=function(){return+new Date}),s)try{s.createElement("DIV").style.setProperty("opacity",0,"")}catch{var n=this.Element.prototype,a=n.setAttribute,i=n.setAttributeNS,c=this.CSSStyleDeclaration.prototype,l=c.setProperty;n.setAttribute=function(N,Q){a.call(this,N,Q+"")},n.setAttributeNS=function(N,Q,it){i.call(this,N,Q,it+"")},c.setProperty=function(N,Q,it){l.call(this,N,Q+"",it)}}function u(N,Q){return N<Q?-1:N>Q?1:N>=Q?0:NaN}function f(N){return N===null?NaN:+N}function d(N){return!isNaN(N)}function w(N){return{left:function(Q,it,dt,wt){for(arguments.length<3&&(dt=0),arguments.length<4&&(wt=Q.length);dt<wt;){var Et=dt+wt>>>1;N(Q[Et],it)<0?dt=Et+1:wt=Et}return dt},right:function(Q,it,dt,wt){for(arguments.length<3&&(dt=0),arguments.length<4&&(wt=Q.length);dt<wt;){var Et=dt+wt>>>1;N(Q[Et],it)>0?wt=Et:dt=Et+1}return dt}}}r.ascending=u,r.descending=function(N,Q){return Q<N?-1:Q>N?1:Q>=N?0:NaN},r.min=function(N,Q){var it,dt,wt=-1,Et=N.length;if(arguments.length===1){for(;++wt<Et;)if((dt=N[wt])!=null&&dt>=dt){it=dt;break}for(;++wt<Et;)(dt=N[wt])!=null&&it>dt&&(it=dt)}else{for(;++wt<Et;)if((dt=Q.call(N,N[wt],wt))!=null&&dt>=dt){it=dt;break}for(;++wt<Et;)(dt=Q.call(N,N[wt],wt))!=null&&it>dt&&(it=dt)}return it},r.max=function(N,Q){var it,dt,wt=-1,Et=N.length;if(arguments.length===1){for(;++wt<Et;)if((dt=N[wt])!=null&&dt>=dt){it=dt;break}for(;++wt<Et;)(dt=N[wt])!=null&&dt>it&&(it=dt)}else{for(;++wt<Et;)if((dt=Q.call(N,N[wt],wt))!=null&&dt>=dt){it=dt;break}for(;++wt<Et;)(dt=Q.call(N,N[wt],wt))!=null&&dt>it&&(it=dt)}return it},r.extent=function(N,Q){var it,dt,wt,Et=-1,Bt=N.length;if(arguments.length===1){for(;++Et<Bt;)if((dt=N[Et])!=null&&dt>=dt){it=wt=dt;break}for(;++Et<Bt;)(dt=N[Et])!=null&&(it>dt&&(it=dt),wt<dt&&(wt=dt))}else{for(;++Et<Bt;)if((dt=Q.call(N,N[Et],Et))!=null&&dt>=dt){it=wt=dt;break}for(;++Et<Bt;)(dt=Q.call(N,N[Et],Et))!=null&&(it>dt&&(it=dt),wt<dt&&(wt=dt))}return[it,wt]},r.sum=function(N,Q){var it,dt=0,wt=N.length,Et=-1;if(arguments.length===1)for(;++Et<wt;)d(it=+N[Et])&&(dt+=it);else for(;++Et<wt;)d(it=+Q.call(N,N[Et],Et))&&(dt+=it);return dt},r.mean=function(N,Q){var it,dt=0,wt=N.length,Et=-1,Bt=wt;if(arguments.length===1)for(;++Et<wt;)d(it=f(N[Et]))?dt+=it:--Bt;else for(;++Et<wt;)d(it=f(Q.call(N,N[Et],Et)))?dt+=it:--Bt;if(Bt)return dt/Bt},r.quantile=function(N,Q){var it=(N.length-1)*Q+1,dt=Math.floor(it),wt=+N[dt-1],Et=it-dt;return Et?wt+Et*(N[dt]-wt):wt},r.median=function(N,Q){var it,dt=[],wt=N.length,Et=-1;if(arguments.length===1)for(;++Et<wt;)d(it=f(N[Et]))&&dt.push(it);else for(;++Et<wt;)d(it=f(Q.call(N,N[Et],Et)))&&dt.push(it);if(dt.length)return r.quantile(dt.sort(u),.5)},r.variance=function(N,Q){var it,dt,wt=N.length,Et=0,Bt=0,Ut=-1,Ht=0;if(arguments.length===1)for(;++Ut<wt;)d(it=f(N[Ut]))&&(Bt+=(dt=it-Et)*(it-(Et+=dt/++Ht)));else for(;++Ut<wt;)d(it=f(Q.call(N,N[Ut],Ut)))&&(Bt+=(dt=it-Et)*(it-(Et+=dt/++Ht)));if(Ht>1)return Bt/(Ht-1)},r.deviation=function(){var N=r.variance.apply(this,arguments);return N&&Math.sqrt(N)};var v=w(u);function p(N){return N.length}r.bisectLeft=v.left,r.bisect=r.bisectRight=v.right,r.bisector=function(N){return w(N.length===1?function(Q,it){return u(N(Q),it)}:N)},r.shuffle=function(N,Q,it){(Et=arguments.length)<3&&(it=N.length,Et<2&&(Q=0));for(var dt,wt,Et=it-Q;Et;)wt=Math.random()*Et--|0,dt=N[Et+Q],N[Et+Q]=N[wt+Q],N[wt+Q]=dt;return N},r.permute=function(N,Q){for(var it=Q.length,dt=new Array(it);it--;)dt[it]=N[Q[it]];return dt},r.pairs=function(N){for(var Q=0,it=N.length-1,dt=N[0],wt=new Array(it<0?0:it);Q<it;)wt[Q]=[dt,dt=N[++Q]];return wt},r.transpose=function(N){if(!(wt=N.length))return[];for(var Q=-1,it=r.min(N,p),dt=new Array(it);++Q<it;)for(var wt,Et=-1,Bt=dt[Q]=new Array(wt);++Et<wt;)Bt[Et]=N[Et][Q];return dt},r.zip=function(){return r.transpose(arguments)},r.keys=function(N){var Q=[];for(var it in N)Q.push(it);return Q},r.values=function(N){var Q=[];for(var it in N)Q.push(N[it]);return Q},r.entries=function(N){var Q=[];for(var it in N)Q.push({key:it,value:N[it]});return Q},r.merge=function(N){for(var Q,it,dt,wt=N.length,Et=-1,Bt=0;++Et<wt;)Bt+=N[Et].length;for(it=new Array(Bt);--wt>=0;)for(Q=(dt=N[wt]).length;--Q>=0;)it[--Bt]=dt[Q];return it};var y=Math.abs;function b(N,Q){for(var it in Q)Object.defineProperty(N.prototype,it,{value:Q[it],enumerable:!1})}function x(){this._=Object.create(null)}r.range=function(N,Q,it){if(arguments.length<3&&(it=1,arguments.length<2&&(Q=N,N=0)),(Q-N)/it==1/0)throw new Error("infinite range");var dt,wt=[],Et=function(Ut){for(var Ht=1;Ut*Ht%1;)Ht*=10;return Ht}(y(it)),Bt=-1;if(N*=Et,Q*=Et,(it*=Et)<0)for(;(dt=N+it*++Bt)>Q;)wt.push(dt/Et);else for(;(dt=N+it*++Bt)<Q;)wt.push(dt/Et);return wt},r.map=function(N,Q){var it=new x;if(N instanceof x)N.forEach(function(Ut,Ht){it.set(Ut,Ht)});else if(Array.isArray(N)){var dt,wt=-1,Et=N.length;if(arguments.length===1)for(;++wt<Et;)it.set(wt,N[wt]);else for(;++wt<Et;)it.set(Q.call(N,dt=N[wt],wt),dt)}else for(var Bt in N)it.set(Bt,N[Bt]);return it};var _="__proto__",g="\0";function A(N){return(N+="")===_||N[0]===g?g+N:N}function M(N){return(N+="")[0]===g?N.slice(1):N}function L(N){return A(N)in this._}function E(N){return(N=A(N))in this._&&delete this._[N]}function S(){var N=[];for(var Q in this._)N.push(M(Q));return N}function O(){var N=0;for(var Q in this._)++N;return N}function P(){for(var N in this._)return!1;return!0}function U(){this._=Object.create(null)}function R(N){return N}function j(N,Q,it){return function(){var dt=it.apply(Q,arguments);return dt===Q?N:dt}}function B(N,Q){if(Q in N)return Q;Q=Q.charAt(0).toUpperCase()+Q.slice(1);for(var it=0,dt=z.length;it<dt;++it){var wt=z[it]+Q;if(wt in N)return wt}}b(x,{has:L,get:function(N){return this._[A(N)]},set:function(N,Q){return this._[A(N)]=Q},remove:E,keys:S,values:function(){var N=[];for(var Q in this._)N.push(this._[Q]);return N},entries:function(){var N=[];for(var Q in this._)N.push({key:M(Q),value:this._[Q]});return N},size:O,empty:P,forEach:function(N){for(var Q in this._)N.call(this,M(Q),this._[Q])}}),r.nest=function(){var N,Q,it={},dt=[],wt=[];function Et(Ut,Ht,qt){if(qt>=dt.length)return Q?Q.call(it,Ht):N?Ht.sort(N):Ht;for(var Jt,le,fe,Le,Se=-1,Ce=Ht.length,Ne=dt[qt++],Ee=new x;++Se<Ce;)(Le=Ee.get(Jt=Ne(le=Ht[Se])))?Le.push(le):Ee.set(Jt,[le]);return Ut?(le=Ut(),fe=function(rr,Ye){le.set(rr,Et(Ut,Ye,qt))}):(le={},fe=function(rr,Ye){le[rr]=Et(Ut,Ye,qt)}),Ee.forEach(fe),le}function Bt(Ut,Ht){if(Ht>=dt.length)return Ut;var qt=[],Jt=wt[Ht++];return Ut.forEach(function(le,fe){qt.push({key:le,values:Bt(fe,Ht)})}),Jt?qt.sort(function(le,fe){return Jt(le.key,fe.key)}):qt}return it.map=function(Ut,Ht){return Et(Ht,Ut,0)},it.entries=function(Ut){return Bt(Et(r.map,Ut,0),0)},it.key=function(Ut){return dt.push(Ut),it},it.sortKeys=function(Ut){return wt[dt.length-1]=Ut,it},it.sortValues=function(Ut){return N=Ut,it},it.rollup=function(Ut){return Q=Ut,it},it},r.set=function(N){var Q=new U;if(N)for(var it=0,dt=N.length;it<dt;++it)Q.add(N[it]);return Q},b(U,{has:L,add:function(N){return this._[A(N+="")]=!0,N},remove:E,values:S,size:O,empty:P,forEach:function(N){for(var Q in this._)N.call(this,M(Q))}}),r.behavior={},r.rebind=function(N,Q){for(var it,dt=1,wt=arguments.length;++dt<wt;)N[it=arguments[dt]]=j(N,Q,Q[it]);return N};var z=["webkit","ms","moz","Moz","o","O"];function G(){}function V(){}function et(N){var Q=[],it=new x;function dt(){for(var wt,Et=Q,Bt=-1,Ut=Et.length;++Bt<Ut;)(wt=Et[Bt].on)&&wt.apply(this,arguments);return N}return dt.on=function(wt,Et){var Bt,Ut=it.get(wt);return arguments.length<2?Ut&&Ut.on:(Ut&&(Ut.on=null,Q=Q.slice(0,Bt=Q.indexOf(Ut)).concat(Q.slice(Bt+1)),it.remove(wt)),Et&&Q.push(it.set(wt,{on:Et})),N)},dt}function J(){r.event.preventDefault()}function X(){for(var N,Q=r.event;N=Q.sourceEvent;)Q=N;return Q}function Y(N){for(var Q=new V,it=0,dt=arguments.length;++it<dt;)Q[arguments[it]]=et(Q);return Q.of=function(wt,Et){return function(Bt){try{var Ut=Bt.sourceEvent=r.event;Bt.target=N,r.event=Bt,Q[Bt.type].apply(wt,Et)}finally{r.event=Ut}}},Q}r.dispatch=function(){for(var N=new V,Q=-1,it=arguments.length;++Q<it;)N[arguments[Q]]=et(N);return N},V.prototype.on=function(N,Q){var it=N.indexOf("."),dt="";if(it>=0&&(dt=N.slice(it+1),N=N.slice(0,it)),N)return arguments.length<2?this[N].on(dt):this[N].on(dt,Q);if(arguments.length===2){if(Q==null)for(N in this)this.hasOwnProperty(N)&&this[N].on(dt,null);return this}},r.event=null,r.requote=function(N){return N.replace(Z,"\\$&")};var Z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,tt={}.__proto__?function(N,Q){N.__proto__=Q}:function(N,Q){for(var it in Q)N[it]=Q[it]};function rt(N){return tt(N,pt),N}var nt=function(N,Q){return Q.querySelector(N)},ot=function(N,Q){return Q.querySelectorAll(N)},ct=function(N,Q){var it=N.matches||N[B(N,"matchesSelector")];return ct=function(dt,wt){return it.call(dt,wt)},ct(N,Q)};typeof Sizzle=="function"&&(nt=function(N,Q){return Sizzle(N,Q)[0]||null},ot=Sizzle,ct=Sizzle.matchesSelector),r.selection=function(){return r.select(s.documentElement)};var pt=r.selection.prototype=[];function gt(N){return typeof N=="function"?N:function(){return nt(N,this)}}function kt(N){return typeof N=="function"?N:function(){return ot(N,this)}}pt.select=function(N){var Q,it,dt,wt,Et=[];N=gt(N);for(var Bt=-1,Ut=this.length;++Bt<Ut;){Et.push(Q=[]),Q.parentNode=(dt=this[Bt]).parentNode;for(var Ht=-1,qt=dt.length;++Ht<qt;)(wt=dt[Ht])?(Q.push(it=N.call(wt,wt.__data__,Ht,Bt)),it&&"__data__"in wt&&(it.__data__=wt.__data__)):Q.push(null)}return rt(Et)},pt.selectAll=function(N){var Q,it,dt=[];N=kt(N);for(var wt=-1,Et=this.length;++wt<Et;)for(var Bt=this[wt],Ut=-1,Ht=Bt.length;++Ut<Ht;)(it=Bt[Ut])&&(dt.push(Q=h(N.call(it,it.__data__,Ut,wt))),Q.parentNode=it);return rt(dt)};var yt="http://www.w3.org/1999/xhtml",mt={svg:"http://www.w3.org/2000/svg",xhtml:yt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ot(N,Q){return N=r.ns.qualify(N),Q==null?N.local?function(){this.removeAttributeNS(N.space,N.local)}:function(){this.removeAttribute(N)}:typeof Q=="function"?N.local?function(){var it=Q.apply(this,arguments);it==null?this.removeAttributeNS(N.space,N.local):this.setAttributeNS(N.space,N.local,it)}:function(){var it=Q.apply(this,arguments);it==null?this.removeAttribute(N):this.setAttribute(N,it)}:N.local?function(){this.setAttributeNS(N.space,N.local,Q)}:function(){this.setAttribute(N,Q)}}function vt(N){return N.trim().replace(/\s+/g," ")}function xt(N){return new RegExp("(?:^|\\s+)"+r.requote(N)+"(?:\\s+|$)","g")}function st(N){return(N+"").trim().split(/^|\s+/)}function at(N,Q){var it=(N=st(N).map(ht)).length;return typeof Q=="function"?function(){for(var dt=-1,wt=Q.apply(this,arguments);++dt<it;)N[dt](this,wt)}:function(){for(var dt=-1;++dt<it;)N[dt](this,Q)}}function ht(N){var Q=xt(N);return function(it,dt){if(wt=it.classList)return dt?wt.add(N):wt.remove(N);var wt=it.getAttribute("class")||"";dt?(Q.lastIndex=0,Q.test(wt)||it.setAttribute("class",vt(wt+" "+N))):it.setAttribute("class",vt(wt.replace(Q," ")))}}function Lt(N,Q,it){return Q==null?function(){this.style.removeProperty(N)}:typeof Q=="function"?function(){var dt=Q.apply(this,arguments);dt==null?this.style.removeProperty(N):this.style.setProperty(N,dt,it)}:function(){this.style.setProperty(N,Q,it)}}function Mt(N,Q){return Q==null?function(){delete this[N]}:typeof Q=="function"?function(){var it=Q.apply(this,arguments);it==null?delete this[N]:this[N]=it}:function(){this[N]=Q}}function _t(N){return typeof N=="function"?N:(N=r.ns.qualify(N)).local?function(){return this.ownerDocument.createElementNS(N.space,N.local)}:function(){var Q=this.ownerDocument,it=this.namespaceURI;return it===yt&&Q.documentElement.namespaceURI===yt?Q.createElement(N):Q.createElementNS(it,N)}}function St(){var N=this.parentNode;N&&N.removeChild(this)}function Dt(N){return{__data__:N}}function ut(N){return function(){return ct(this,N)}}function Tt(N){return arguments.length||(N=u),function(Q,it){return Q&&it?N(Q.__data__,it.__data__):!Q-!it}}function bt(N,Q){for(var it=0,dt=N.length;it<dt;it++)for(var wt,Et=N[it],Bt=0,Ut=Et.length;Bt<Ut;Bt++)(wt=Et[Bt])&&Q(wt,Bt,it);return N}function It(N){return tt(N,zt),N}r.ns={prefix:mt,qualify:function(N){var Q=N.indexOf(":"),it=N;return Q>=0&&(it=N.slice(0,Q))!=="xmlns"&&(N=N.slice(Q+1)),mt.hasOwnProperty(it)?{space:mt[it],local:N}:N}},pt.attr=function(N,Q){if(arguments.length<2){if(typeof N=="string"){var it=this.node();return(N=r.ns.qualify(N)).local?it.getAttributeNS(N.space,N.local):it.getAttribute(N)}for(Q in N)this.each(Ot(Q,N[Q]));return this}return this.each(Ot(N,Q))},pt.classed=function(N,Q){if(arguments.length<2){if(typeof N=="string"){var it=this.node(),dt=(N=st(N)).length,wt=-1;if(Q=it.classList){for(;++wt<dt;)if(!Q.contains(N[wt]))return!1}else for(Q=it.getAttribute("class");++wt<dt;)if(!xt(N[wt]).test(Q))return!1;return!0}for(Q in N)this.each(at(Q,N[Q]));return this}return this.each(at(N,Q))},pt.style=function(N,Q,it){var dt=arguments.length;if(dt<3){if(typeof N!="string"){for(it in dt<2&&(Q=""),N)this.each(Lt(it,N[it],Q));return this}if(dt<2){var wt=this.node();return t(wt).getComputedStyle(wt,null).getPropertyValue(N)}it=""}return this.each(Lt(N,Q,it))},pt.property=function(N,Q){if(arguments.length<2){if(typeof N=="string")return this.node()[N];for(Q in N)this.each(Mt(Q,N[Q]));return this}return this.each(Mt(N,Q))},pt.text=function(N){return arguments.length?this.each(typeof N=="function"?function(){var Q=N.apply(this,arguments);this.textContent=Q??""}:N==null?function(){this.textContent=""}:function(){this.textContent=N}):this.node().textContent},pt.html=function(N){return arguments.length?this.each(typeof N=="function"?function(){var Q=N.apply(this,arguments);this.innerHTML=Q??""}:N==null?function(){this.innerHTML=""}:function(){this.innerHTML=N}):this.node().innerHTML},pt.append=function(N){return N=_t(N),this.select(function(){return this.appendChild(N.apply(this,arguments))})},pt.insert=function(N,Q){return N=_t(N),Q=gt(Q),this.select(function(){return this.insertBefore(N.apply(this,arguments),Q.apply(this,arguments)||null)})},pt.remove=function(){return this.each(St)},pt.data=function(N,Q){var it,dt,wt=-1,Et=this.length;if(!arguments.length){for(N=new Array(Et=(it=this[0]).length);++wt<Et;)(dt=it[wt])&&(N[wt]=dt.__data__);return N}function Bt(Jt,le){var fe,Le,Se,Ce=Jt.length,Ne=le.length,Ee=Math.min(Ce,Ne),rr=new Array(Ne),Ye=new Array(Ne),Ve=new Array(Ce);if(Q){var dr,vr=new x,Fr=new Array(Ce);for(fe=-1;++fe<Ce;)(Le=Jt[fe])&&(vr.has(dr=Q.call(Le,Le.__data__,fe))?Ve[fe]=Le:vr.set(dr,Le),Fr[fe]=dr);for(fe=-1;++fe<Ne;)(Le=vr.get(dr=Q.call(le,Se=le[fe],fe)))?Le!==!0&&(rr[fe]=Le,Le.__data__=Se):Ye[fe]=Dt(Se),vr.set(dr,!0);for(fe=-1;++fe<Ce;)fe in Fr&&vr.get(Fr[fe])!==!0&&(Ve[fe]=Jt[fe])}else{for(fe=-1;++fe<Ee;)Le=Jt[fe],Se=le[fe],Le?(Le.__data__=Se,rr[fe]=Le):Ye[fe]=Dt(Se);for(;fe<Ne;++fe)Ye[fe]=Dt(le[fe]);for(;fe<Ce;++fe)Ve[fe]=Jt[fe]}Ye.update=rr,Ye.parentNode=rr.parentNode=Ve.parentNode=Jt.parentNode,Ut.push(Ye),Ht.push(rr),qt.push(Ve)}var Ut=It([]),Ht=rt([]),qt=rt([]);if(typeof N=="function")for(;++wt<Et;)Bt(it=this[wt],N.call(it,it.parentNode.__data__,wt));else for(;++wt<Et;)Bt(it=this[wt],N);return Ht.enter=function(){return Ut},Ht.exit=function(){return qt},Ht},pt.datum=function(N){return arguments.length?this.property("__data__",N):this.property("__data__")},pt.filter=function(N){var Q,it,dt,wt=[];typeof N!="function"&&(N=ut(N));for(var Et=0,Bt=this.length;Et<Bt;Et++){wt.push(Q=[]),Q.parentNode=(it=this[Et]).parentNode;for(var Ut=0,Ht=it.length;Ut<Ht;Ut++)(dt=it[Ut])&&N.call(dt,dt.__data__,Ut,Et)&&Q.push(dt)}return rt(wt)},pt.order=function(){for(var N=-1,Q=this.length;++N<Q;)for(var it,dt=this[N],wt=dt.length-1,Et=dt[wt];--wt>=0;)(it=dt[wt])&&(Et&&Et!==it.nextSibling&&Et.parentNode.insertBefore(it,Et),Et=it);return this},pt.sort=function(N){N=Tt.apply(this,arguments);for(var Q=-1,it=this.length;++Q<it;)this[Q].sort(N);return this.order()},pt.each=function(N){return bt(this,function(Q,it,dt){N.call(Q,Q.__data__,it,dt)})},pt.call=function(N){var Q=h(arguments);return N.apply(Q[0]=this,Q),this},pt.empty=function(){return!this.node()},pt.node=function(){for(var N=0,Q=this.length;N<Q;N++)for(var it=this[N],dt=0,wt=it.length;dt<wt;dt++){var Et=it[dt];if(Et)return Et}return null},pt.size=function(){var N=0;return bt(this,function(){++N}),N};var zt=[];function Ft(N,Q,it){var dt="__on"+N,wt=N.indexOf("."),Et=Wt;wt>0&&(N=N.slice(0,wt));var Bt=$t.get(N);function Ut(){var Ht=this[dt];Ht&&(this.removeEventListener(N,Ht,Ht.$),delete this[dt])}return Bt&&(N=Bt,Et=Xt),wt?Q?function(){var Ht=Et(Q,h(arguments));Ut.call(this),this.addEventListener(N,this[dt]=Ht,Ht.$=it),Ht._=Q}:Ut:Q?G:function(){var Ht,qt=new RegExp("^__on([^.]+)"+r.requote(N)+"$");for(var Jt in this)if(Ht=Jt.match(qt)){var le=this[Jt];this.removeEventListener(Ht[1],le,le.$),delete this[Jt]}}}r.selection.enter=It,r.selection.enter.prototype=zt,zt.append=pt.append,zt.empty=pt.empty,zt.node=pt.node,zt.call=pt.call,zt.size=pt.size,zt.select=function(N){for(var Q,it,dt,wt,Et,Bt=[],Ut=-1,Ht=this.length;++Ut<Ht;){dt=(wt=this[Ut]).update,Bt.push(Q=[]),Q.parentNode=wt.parentNode;for(var qt=-1,Jt=wt.length;++qt<Jt;)(Et=wt[qt])?(Q.push(dt[qt]=it=N.call(wt.parentNode,Et.__data__,qt,Ut)),it.__data__=Et.__data__):Q.push(null)}return rt(Bt)},zt.insert=function(N,Q){var it,dt,wt;return arguments.length<2&&(it=this,Q=function(Et,Bt,Ut){var Ht,qt=it[Ut].update,Jt=qt.length;for(Ut!=wt&&(wt=Ut,dt=0),Bt>=dt&&(dt=Bt+1);!(Ht=qt[dt])&&++dt<Jt;);return Ht}),pt.insert.call(this,N,Q)},r.select=function(N){var Q;return typeof N=="string"?(Q=[nt(N,s)]).parentNode=s.documentElement:(Q=[N]).parentNode=e(N),rt([Q])},r.selectAll=function(N){var Q;return typeof N=="string"?(Q=h(ot(N,s))).parentNode=s.documentElement:(Q=h(N)).parentNode=null,rt([Q])},pt.on=function(N,Q,it){var dt=arguments.length;if(dt<3){if(typeof N!="string"){for(it in dt<2&&(Q=!1),N)this.each(Ft(it,N[it],Q));return this}if(dt<2)return(dt=this.node()["__on"+N])&&dt._;it=!1}return this.each(Ft(N,Q,it))};var $t=r.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Wt(N,Q){return function(it){var dt=r.event;r.event=it,Q[0]=this.__data__;try{N.apply(this,Q)}finally{r.event=dt}}}function Xt(N,Q){var it=Wt(N,Q);return function(dt){var wt=this,Et=dt.relatedTarget;Et&&(Et===wt||8&Et.compareDocumentPosition(wt))||it.call(wt,dt)}}s&&$t.forEach(function(N){"on"+N in s&&$t.remove(N)});var ae,Qt=0;function de(N){var Q=".dragsuppress-"+ ++Qt,it="click"+Q,dt=r.select(t(N)).on("touchmove"+Q,J).on("dragstart"+Q,J).on("selectstart"+Q,J);if(ae==null&&(ae=!("onselectstart"in N)&&B(N.style,"userSelect")),ae){var wt=e(N).style,Et=wt[ae];wt[ae]="none"}return function(Bt){if(dt.on(Q,null),ae&&(wt[ae]=Et),Bt){var Ut=function(){dt.on(it,null)};dt.on(it,function(){J(),Ut()},!0),setTimeout(Ut,0)}}}r.mouse=function(N){return ve(N,X())};var ye=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ve(N,Q){Q.changedTouches&&(Q=Q.changedTouches[0]);var it=N.ownerSVGElement||N;if(it.createSVGPoint){var dt=it.createSVGPoint();if(ye<0){var wt=t(N);if(wt.scrollX||wt.scrollY){var Et=(it=r.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();ye=!(Et.f||Et.e),it.remove()}}return ye?(dt.x=Q.pageX,dt.y=Q.pageY):(dt.x=Q.clientX,dt.y=Q.clientY),[(dt=dt.matrixTransform(N.getScreenCTM().inverse())).x,dt.y]}var Bt=N.getBoundingClientRect();return[Q.clientX-Bt.left-N.clientLeft,Q.clientY-Bt.top-N.clientTop]}function ie(){return r.event.changedTouches[0].identifier}r.touch=function(N,Q,it){if(arguments.length<3&&(it=Q,Q=X().changedTouches),Q){for(var dt,wt=0,Et=Q.length;wt<Et;++wt)if((dt=Q[wt]).identifier===it)return ve(N,dt)}},r.behavior.drag=function(){var N=Y(wt,"drag","dragstart","dragend"),Q=null,it=Et(G,r.mouse,t,"mousemove","mouseup"),dt=Et(ie,r.touch,R,"touchmove","touchend");function wt(){this.on("mousedown.drag",it).on("touchstart.drag",dt)}function Et(Bt,Ut,Ht,qt,Jt){return function(){var le,fe=this,Le=r.event.target.correspondingElement||r.event.target,Se=fe.parentNode,Ce=N.of(fe,arguments),Ne=0,Ee=Bt(),rr=".drag"+(Ee==null?"":"-"+Ee),Ye=r.select(Ht(Le)).on(qt+rr,function(){var vr,Fr,zr=Ut(Se,Ee);zr&&(vr=zr[0]-dr[0],Fr=zr[1]-dr[1],Ne|=vr|Fr,dr=zr,Ce({type:"drag",x:zr[0]+le[0],y:zr[1]+le[1],dx:vr,dy:Fr}))}).on(Jt+rr,function(){Ut(Se,Ee)&&(Ye.on(qt+rr,null).on(Jt+rr,null),Ve(Ne),Ce({type:"dragend"}))}),Ve=de(Le),dr=Ut(Se,Ee);le=Q?[(le=Q.apply(fe,arguments)).x-dr[0],le.y-dr[1]]:[0,0],Ce({type:"dragstart"})}}return wt.origin=function(Bt){return arguments.length?(Q=Bt,wt):Q},r.rebind(wt,N,"on")},r.touches=function(N,Q){return arguments.length<2&&(Q=X().touches),Q?h(Q).map(function(it){var dt=ve(N,it);return dt.identifier=it.identifier,dt}):[]};var se=1e-6,ke=se*se,Ae=Math.PI,Ie=2*Ae,Te=Ie-se,Vt=Ae/2,Zt=Ae/180,Gt=180/Ae;function Yt(N){return N>1?Vt:N<-1?-Vt:Math.asin(N)}function ne(N){return((N=Math.exp(N))+1/N)/2}var re=Math.SQRT2;r.interpolateZoom=function(N,Q){var it,dt,wt=N[0],Et=N[1],Bt=N[2],Ut=Q[0],Ht=Q[1],qt=Q[2],Jt=Ut-wt,le=Ht-Et,fe=Jt*Jt+le*le;if(fe<ke)dt=Math.log(qt/Bt)/re,it=function(rr){return[wt+rr*Jt,Et+rr*le,Bt*Math.exp(re*rr*dt)]};else{var Le=Math.sqrt(fe),Se=(qt*qt-Bt*Bt+4*fe)/(2*Bt*2*Le),Ce=(qt*qt-Bt*Bt-4*fe)/(2*qt*2*Le),Ne=Math.log(Math.sqrt(Se*Se+1)-Se),Ee=Math.log(Math.sqrt(Ce*Ce+1)-Ce);dt=(Ee-Ne)/re,it=function(rr){var Ye,Ve=rr*dt,dr=ne(Ne),vr=Bt/(2*Le)*(dr*(Ye=re*Ve+Ne,((Ye=Math.exp(2*Ye))-1)/(Ye+1))-function(Fr){return((Fr=Math.exp(Fr))-1/Fr)/2}(Ne));return[wt+vr*Jt,Et+vr*le,Bt*dr/ne(re*Ve+Ne)]}}return it.duration=1e3*dt,it},r.behavior.zoom=function(){var N,Q,it,dt,wt,Et,Bt,Ut,Ht,qt={x:0,y:0,k:1},Jt=[960,500],le=ee,fe=250,Le=0,Se="mousedown.zoom",Ce="mousemove.zoom",Ne="mouseup.zoom",Ee="touchstart.zoom",rr=Y(Ye,"zoomstart","zoom","zoomend");function Ye(Br){Br.on(Se,ln).on(Nt+".zoom",bn).on("dblclick.zoom",On).on(Ee,pn)}function Ve(Br){return[(Br[0]-qt.x)/qt.k,(Br[1]-qt.y)/qt.k]}function dr(Br){qt.k=Math.max(le[0],Math.min(le[1],Br))}function vr(Br,on){on=function(dn){return[dn[0]*qt.k+qt.x,dn[1]*qt.k+qt.y]}(on),qt.x+=Br[0]-on[0],qt.y+=Br[1]-on[1]}function Fr(Br,on,dn,_n){Br.__chart__={x:qt.x,y:qt.y,k:qt.k},dr(Math.pow(2,_n)),vr(Q=on,dn),Br=r.select(Br),fe>0&&(Br=Br.transition().duration(fe)),Br.call(Ye.event)}function zr(){Bt&&Bt.domain(Et.range().map(function(Br){return(Br-qt.x)/qt.k}).map(Et.invert)),Ht&&Ht.domain(Ut.range().map(function(Br){return(Br-qt.y)/qt.k}).map(Ut.invert))}function $r(Br){Le++||Br({type:"zoomstart"})}function Zr(Br){zr(),Br({type:"zoom",scale:qt.k,translate:[qt.x,qt.y]})}function cn(Br){--Le||(Br({type:"zoomend"}),Q=null)}function ln(){var Br=this,on=rr.of(Br,arguments),dn=0,_n=r.select(t(Br)).on(Ce,function(){dn=1,vr(r.mouse(Br),En),Zr(on)}).on(Ne,function(){_n.on(Ce,null).on(Ne,null),Nn(dn),cn(on)}),En=Ve(r.mouse(Br)),Nn=de(Br);ta.call(Br),$r(on)}function pn(){var Br,on=this,dn=rr.of(on,arguments),_n={},En=0,Nn=".zoom-"+r.event.changedTouches[0].identifier,$n="touchmove"+Nn,Kn="touchend"+Nn,hi=[],fi=r.select(on),Jn=de(on);function Ci(){var Wn=r.touches(on);return Br=qt.k,Wn.forEach(function(Gn){Gn.identifier in _n&&(_n[Gn.identifier]=Ve(Gn))}),Wn}function Zi(){var Wn=r.event.target;r.select(Wn).on($n,Pi).on(Kn,Ui),hi.push(Wn);for(var Gn=r.event.changedTouches,pi=0,oi=Gn.length;pi<oi;++pi)_n[Gn[pi].identifier]=null;var mi=Ci(),pa=Date.now();if(mi.length===1){if(pa-wt<500){var wi=mi[0];Fr(on,wi,_n[wi.identifier],Math.floor(Math.log(qt.k)/Math.LN2)+1),J()}wt=pa}else if(mi.length>1){wi=mi[0];var Qn=mi[1],os=wi[0]-Qn[0],_a=wi[1]-Qn[1];En=os*os+_a*_a}}function Pi(){var Wn,Gn,pi,oi,mi=r.touches(on);ta.call(on);for(var pa=0,wi=mi.length;pa<wi;++pa,oi=null)if(pi=mi[pa],oi=_n[pi.identifier]){if(Gn)break;Wn=pi,Gn=oi}if(oi){var Qn=(Qn=pi[0]-Wn[0])*Qn+(Qn=pi[1]-Wn[1])*Qn,os=En&&Math.sqrt(Qn/En);Wn=[(Wn[0]+pi[0])/2,(Wn[1]+pi[1])/2],Gn=[(Gn[0]+oi[0])/2,(Gn[1]+oi[1])/2],dr(os*Br)}wt=null,vr(Wn,Gn),Zr(dn)}function Ui(){if(r.event.touches.length){for(var Wn=r.event.changedTouches,Gn=0,pi=Wn.length;Gn<pi;++Gn)delete _n[Wn[Gn].identifier];for(var oi in _n)return void Ci()}r.selectAll(hi).on(Nn,null),fi.on(Se,ln).on(Ee,pn),Jn(),cn(dn)}Zi(),$r(dn),fi.on(Se,null).on(Ee,Zi)}function bn(){var Br=rr.of(this,arguments);dt?clearTimeout(dt):(ta.call(this),N=Ve(Q=it||r.mouse(this)),$r(Br)),dt=setTimeout(function(){dt=null,cn(Br)},50),J(),dr(Math.pow(2,.002*Pt())*qt.k),vr(Q,N),Zr(Br)}function On(){var Br=r.mouse(this),on=Math.log(qt.k)/Math.LN2;Fr(this,Br,Ve(Br),r.event.shiftKey?Math.ceil(on)-1:Math.floor(on)+1)}return Nt||(Nt="onwheel"in s?(Pt=function(){return-r.event.deltaY*(r.event.deltaMode?120:1)},"wheel"):"onmousewheel"in s?(Pt=function(){return r.event.wheelDelta},"mousewheel"):(Pt=function(){return-r.event.detail},"MozMousePixelScroll")),Ye.event=function(Br){Br.each(function(){var on=rr.of(this,arguments),dn=qt;No?r.select(this).transition().each("start.zoom",function(){qt=this.__chart__||{x:0,y:0,k:1},$r(on)}).tween("zoom:zoom",function(){var _n=Jt[0],En=Jt[1],Nn=Q?Q[0]:_n/2,$n=Q?Q[1]:En/2,Kn=r.interpolateZoom([(Nn-qt.x)/qt.k,($n-qt.y)/qt.k,_n/qt.k],[(Nn-dn.x)/dn.k,($n-dn.y)/dn.k,_n/dn.k]);return function(hi){var fi=Kn(hi),Jn=_n/fi[2];this.__chart__=qt={x:Nn-fi[0]*Jn,y:$n-fi[1]*Jn,k:Jn},Zr(on)}}).each("interrupt.zoom",function(){cn(on)}).each("end.zoom",function(){cn(on)}):(this.__chart__=qt,$r(on),Zr(on),cn(on))})},Ye.translate=function(Br){return arguments.length?(qt={x:+Br[0],y:+Br[1],k:qt.k},zr(),Ye):[qt.x,qt.y]},Ye.scale=function(Br){return arguments.length?(qt={x:qt.x,y:qt.y,k:null},dr(+Br),zr(),Ye):qt.k},Ye.scaleExtent=function(Br){return arguments.length?(le=Br==null?ee:[+Br[0],+Br[1]],Ye):le},Ye.center=function(Br){return arguments.length?(it=Br&&[+Br[0],+Br[1]],Ye):it},Ye.size=function(Br){return arguments.length?(Jt=Br&&[+Br[0],+Br[1]],Ye):Jt},Ye.duration=function(Br){return arguments.length?(fe=+Br,Ye):fe},Ye.x=function(Br){return arguments.length?(Bt=Br,Et=Br.copy(),qt={x:0,y:0,k:1},Ye):Bt},Ye.y=function(Br){return arguments.length?(Ht=Br,Ut=Br.copy(),qt={x:0,y:0,k:1},Ye):Ht},r.rebind(Ye,rr,"on")};var Pt,Nt,ee=[0,1/0];function te(){}function ge(N,Q,it){return this instanceof ge?(this.h=+N,this.s=+Q,void(this.l=+it)):arguments.length<2?N instanceof ge?new ge(N.h,N.s,N.l):ar(""+N,fr,ge):new ge(N,Q,it)}r.color=te,te.prototype.toString=function(){return this.rgb()+""},r.hsl=ge;var pe=ge.prototype=new te;function me(N,Q,it){var dt,wt;function Et(Bt){return Math.round(255*function(Ut){return Ut>360?Ut-=360:Ut<0&&(Ut+=360),Ut<60?dt+(wt-dt)*Ut/60:Ut<180?wt:Ut<240?dt+(wt-dt)*(240-Ut)/60:dt}(Bt))}return N=isNaN(N)?0:(N%=360)<0?N+360:N,Q=isNaN(Q)||Q<0?0:Q>1?1:Q,dt=2*(it=it<0?0:it>1?1:it)-(wt=it<=.5?it*(1+Q):it+Q-it*Q),new xr(Et(N+120),Et(N),Et(N-120))}function ce(N,Q,it){return this instanceof ce?(this.h=+N,this.c=+Q,void(this.l=+it)):arguments.length<2?N instanceof ce?new ce(N.h,N.c,N.l):function(dt,wt,Et){return dt>0?new ce(Math.atan2(Et,wt)*Gt,Math.sqrt(wt*wt+Et*Et),dt):new ce(NaN,NaN,dt)}(N instanceof he?N.l:(N=mr((N=r.rgb(N)).r,N.g,N.b)).l,N.a,N.b):new ce(N,Q,it)}pe.brighter=function(N){return N=Math.pow(.7,arguments.length?N:1),new ge(this.h,this.s,this.l/N)},pe.darker=function(N){return N=Math.pow(.7,arguments.length?N:1),new ge(this.h,this.s,N*this.l)},pe.rgb=function(){return me(this.h,this.s,this.l)},r.hcl=ce;var we=ce.prototype=new te;function ue(N,Q,it){return isNaN(N)&&(N=0),isNaN(Q)&&(Q=0),new he(it,Math.cos(N*=Zt)*Q,Math.sin(N)*Q)}function he(N,Q,it){return this instanceof he?(this.l=+N,this.a=+Q,void(this.b=+it)):arguments.length<2?N instanceof he?new he(N.l,N.a,N.b):N instanceof ce?ue(N.h,N.c,N.l):mr((N=xr(N)).r,N.g,N.b):new he(N,Q,it)}we.brighter=function(N){return new ce(this.h,this.c,Math.min(100,this.l+be*(arguments.length?N:1)))},we.darker=function(N){return new ce(this.h,this.c,Math.max(0,this.l-be*(arguments.length?N:1)))},we.rgb=function(){return ue(this.h,this.c,this.l).rgb()},r.lab=he;var be=18,Pe=.95047,De=1,Ue=1.08883,tr=he.prototype=new te;function Ge(N,Q,it){var dt=(N+16)/116,wt=dt+Q/500,Et=dt-it/200;return new xr(pr(3.2404542*(wt=Ze(wt)*Pe)-1.5371385*(dt=Ze(dt)*De)-.4985314*(Et=Ze(Et)*Ue)),pr(-.969266*wt+1.8760108*dt+.041556*Et),pr(.0556434*wt-.2040259*dt+1.0572252*Et))}function Ze(N){return N>.206893034?N*N*N:(N-.13793103448275862)/7.787037}function We(N){return N>.008856?Math.pow(N,.3333333333333333):7.787037*N+.13793103448275862}function pr(N){return Math.round(255*(N<=.00304?12.92*N:1.055*Math.pow(N,.4166666666666667)-.055))}function xr(N,Q,it){return this instanceof xr?(this.r=~~N,this.g=~~Q,void(this.b=~~it)):arguments.length<2?N instanceof xr?new xr(N.r,N.g,N.b):ar(""+N,xr,me):new xr(N,Q,it)}function sr(N){return new xr(N>>16,N>>8&255,255&N)}function $e(N){return sr(N)+""}tr.brighter=function(N){return new he(Math.min(100,this.l+be*(arguments.length?N:1)),this.a,this.b)},tr.darker=function(N){return new he(Math.max(0,this.l-be*(arguments.length?N:1)),this.a,this.b)},tr.rgb=function(){return Ge(this.l,this.a,this.b)},r.rgb=xr;var ir=xr.prototype=new te;function Ke(N){return N<16?"0"+Math.max(0,N).toString(16):Math.min(255,N).toString(16)}function ar(N,Q,it){var dt,wt,Et,Bt=0,Ut=0,Ht=0;if(dt=/([a-z]+)\((.*)\)/.exec(N=N.toLowerCase()))switch(wt=dt[2].split(","),dt[1]){case"hsl":return it(parseFloat(wt[0]),parseFloat(wt[1])/100,parseFloat(wt[2])/100);case"rgb":return Q(Er(wt[0]),Er(wt[1]),Er(wt[2]))}return(Et=_r.get(N))?Q(Et.r,Et.g,Et.b):(N==null||N.charAt(0)!=="#"||isNaN(Et=parseInt(N.slice(1),16))||(N.length===4?(Bt=(3840&Et)>>4,Bt|=Bt>>4,Ut=240&Et,Ut|=Ut>>4,Ht=15&Et,Ht|=Ht<<4):N.length===7&&(Bt=(16711680&Et)>>16,Ut=(65280&Et)>>8,Ht=255&Et)),Q(Bt,Ut,Ht))}function fr(N,Q,it){var dt,wt,Et=Math.min(N/=255,Q/=255,it/=255),Bt=Math.max(N,Q,it),Ut=Bt-Et,Ht=(Bt+Et)/2;return Ut?(wt=Ht<.5?Ut/(Bt+Et):Ut/(2-Bt-Et),dt=N==Bt?(Q-it)/Ut+(Q<it?6:0):Q==Bt?(it-N)/Ut+2:(N-Q)/Ut+4,dt*=60):(dt=NaN,wt=Ht>0&&Ht<1?0:dt),new ge(dt,wt,Ht)}function mr(N,Q,it){var dt=We((.4124564*(N=Cr(N))+.3575761*(Q=Cr(Q))+.1804375*(it=Cr(it)))/Pe),wt=We((.2126729*N+.7151522*Q+.072175*it)/De);return he(116*wt-16,500*(dt-wt),200*(wt-We((.0193339*N+.119192*Q+.9503041*it)/Ue)))}function Cr(N){return(N/=255)<=.04045?N/12.92:Math.pow((N+.055)/1.055,2.4)}function Er(N){var Q=parseFloat(N);return N.charAt(N.length-1)==="%"?Math.round(2.55*Q):Q}ir.brighter=function(N){N=Math.pow(.7,arguments.length?N:1);var Q=this.r,it=this.g,dt=this.b,wt=30;return Q||it||dt?(Q&&Q<wt&&(Q=wt),it&&it<wt&&(it=wt),dt&&dt<wt&&(dt=wt),new xr(Math.min(255,Q/N),Math.min(255,it/N),Math.min(255,dt/N))):new xr(wt,wt,wt)},ir.darker=function(N){return new xr((N=Math.pow(.7,arguments.length?N:1))*this.r,N*this.g,N*this.b)},ir.hsl=function(){return fr(this.r,this.g,this.b)},ir.toString=function(){return"#"+Ke(this.r)+Ke(this.g)+Ke(this.b)};var _r=r.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Sr(N){return typeof N=="function"?N:function(){return N}}function Xr(N){return function(Q,it,dt){return arguments.length===2&&typeof it=="function"&&(dt=it,it=null),en(Q,it,N,dt)}}function en(N,Q,it,dt){var wt={},Et=r.dispatch("beforesend","progress","load","error"),Bt={},Ut=new XMLHttpRequest,Ht=null;function qt(){var Jt,le=Ut.status;if(!le&&function(fe){var Le=fe.responseType;return Le&&Le!=="text"?fe.response:fe.responseText}(Ut)||le>=200&&le<300||le===304){try{Jt=it.call(wt,Ut)}catch(fe){return void Et.error.call(wt,fe)}Et.load.call(wt,Jt)}else Et.error.call(wt,Ut)}return self.XDomainRequest&&!("withCredentials"in Ut)&&/^(http(s)?:)?\/\//.test(N)&&(Ut=new XDomainRequest),"onload"in Ut?Ut.onload=Ut.onerror=qt:Ut.onreadystatechange=function(){Ut.readyState>3&&qt()},Ut.onprogress=function(Jt){var le=r.event;r.event=Jt;try{Et.progress.call(wt,Ut)}finally{r.event=le}},wt.header=function(Jt,le){return Jt=(Jt+"").toLowerCase(),arguments.length<2?Bt[Jt]:(le==null?delete Bt[Jt]:Bt[Jt]=le+"",wt)},wt.mimeType=function(Jt){return arguments.length?(Q=Jt==null?null:Jt+"",wt):Q},wt.responseType=function(Jt){return arguments.length?(Ht=Jt,wt):Ht},wt.response=function(Jt){return it=Jt,wt},["get","post"].forEach(function(Jt){wt[Jt]=function(){return wt.send.apply(wt,[Jt].concat(h(arguments)))}}),wt.send=function(Jt,le,fe){if(arguments.length===2&&typeof le=="function"&&(fe=le,le=null),Ut.open(Jt,N,!0),Q==null||"accept"in Bt||(Bt.accept=Q+",*/*"),Ut.setRequestHeader)for(var Le in Bt)Ut.setRequestHeader(Le,Bt[Le]);return Q!=null&&Ut.overrideMimeType&&Ut.overrideMimeType(Q),Ht!=null&&(Ut.responseType=Ht),fe!=null&&wt.on("error",fe).on("load",function(Se){fe(null,Se)}),Et.beforesend.call(wt,Ut),Ut.send(le??null),wt},wt.abort=function(){return Ut.abort(),wt},r.rebind(wt,Et,"on"),dt==null?wt:wt.get(function(Jt){return Jt.length===1?function(le,fe){Jt(le==null?fe:null)}:Jt}(dt))}_r.forEach(function(N,Q){_r.set(N,sr(Q))}),r.functor=Sr,r.xhr=Xr(R),r.dsv=function(N,Q){var it=new RegExp('["'+N+`
]`),dt=N.charCodeAt(0);function wt(qt,Jt,le){arguments.length<3&&(le=Jt,Jt=null);var fe=en(qt,Q,Jt==null?Et:Bt(Jt),le);return fe.row=function(Le){return arguments.length?fe.response((Jt=Le)==null?Et:Bt(Le)):Jt},fe}function Et(qt){return wt.parse(qt.responseText)}function Bt(qt){return function(Jt){return wt.parse(Jt.responseText,qt)}}function Ut(qt){return qt.map(Ht).join(N)}function Ht(qt){return it.test(qt)?'"'+qt.replace(/\"/g,'""')+'"':qt}return wt.parse=function(qt,Jt){var le;return wt.parseRows(qt,function(fe,Le){if(le)return le(fe,Le-1);var Se=function(Ce){for(var Ne={},Ee=fe.length,rr=0;rr<Ee;++rr)Ne[fe[rr]]=Ce[rr];return Ne};le=Jt?function(Ce,Ne){return Jt(Se(Ce),Ne)}:Se})},wt.parseRows=function(qt,Jt){var le,fe,Le={},Se={},Ce=[],Ne=qt.length,Ee=0,rr=0;function Ye(){if(Ee>=Ne)return Se;if(fe)return fe=!1,Le;var dr=Ee;if(qt.charCodeAt(dr)===34){for(var vr=dr;vr++<Ne;)if(qt.charCodeAt(vr)===34){if(qt.charCodeAt(vr+1)!==34)break;++vr}return Ee=vr+2,(Fr=qt.charCodeAt(vr+1))===13?(fe=!0,qt.charCodeAt(vr+2)===10&&++Ee):Fr===10&&(fe=!0),qt.slice(dr+1,vr).replace(/""/g,'"')}for(;Ee<Ne;){var Fr,zr=1;if((Fr=qt.charCodeAt(Ee++))===10)fe=!0;else if(Fr===13)fe=!0,qt.charCodeAt(Ee)===10&&(++Ee,++zr);else if(Fr!==dt)continue;return qt.slice(dr,Ee-zr)}return qt.slice(dr)}for(;(le=Ye())!==Se;){for(var Ve=[];le!==Le&&le!==Se;)Ve.push(le),le=Ye();Jt&&(Ve=Jt(Ve,rr++))==null||Ce.push(Ve)}return Ce},wt.format=function(qt){if(Array.isArray(qt[0]))return wt.formatRows(qt);var Jt=new U,le=[];return qt.forEach(function(fe){for(var Le in fe)Jt.has(Le)||le.push(Jt.add(Le))}),[le.map(Ht).join(N)].concat(qt.map(function(fe){return le.map(function(Le){return Ht(fe[Le])}).join(N)})).join(`
`)},wt.formatRows=function(qt){return qt.map(Ut).join(`
`)},wt},r.csv=r.dsv(",","text/csv"),r.tsv=r.dsv("	","text/tab-separated-values");var sn,tn,qr,vn,je=this[B(this,"requestAnimationFrame")]||function(N){setTimeout(N,17)};function nr(N,Q,it){var dt=arguments.length;dt<2&&(Q=0),dt<3&&(it=Date.now());var wt={c:N,t:it+Q,n:null};return tn?tn.n=wt:sn=wt,tn=wt,qr||(vn=clearTimeout(vn),qr=1,je(hr)),wt}function hr(){var N=gr(),Q=Mr()-N;Q>24?(isFinite(Q)&&(clearTimeout(vn),vn=setTimeout(hr,Q)),qr=0):(qr=1,je(hr))}function gr(){for(var N=Date.now(),Q=sn;Q;)N>=Q.t&&Q.c(N-Q.t)&&(Q.c=null),Q=Q.n;return N}function Mr(){for(var N,Q=sn,it=1/0;Q;)Q.c?(Q.t<it&&(it=Q.t),Q=(N=Q).n):Q=N?N.n=Q.n:sn=Q.n;return tn=N,it}function Hr(N){return N[0]}function Pr(N){return N[1]}function Dr(N){for(var Q,it,dt,wt=N.length,Et=[0,1],Bt=2,Ut=2;Ut<wt;Ut++){for(;Bt>1&&(Q=N[Et[Bt-2]],it=N[Et[Bt-1]],dt=N[Ut],(it[0]-Q[0])*(dt[1]-Q[1])-(it[1]-Q[1])*(dt[0]-Q[0])<=0);)--Bt;Et[Bt++]=Ut}return Et.slice(0,Bt)}function Qr(N,Q){return N[0]-Q[0]||N[1]-Q[1]}r.timer=function(){nr.apply(this,arguments)},r.timer.flush=function(){gr(),Mr()},r.round=function(N,Q){return Q?Math.round(N*(Q=Math.pow(10,Q)))/Q:Math.round(N)},r.geom={},r.geom.hull=function(N){var Q=Hr,it=Pr;if(arguments.length)return dt(N);function dt(wt){if(wt.length<3)return[];var Et,Bt=Sr(Q),Ut=Sr(it),Ht=wt.length,qt=[],Jt=[];for(Et=0;Et<Ht;Et++)qt.push([+Bt.call(this,wt[Et],Et),+Ut.call(this,wt[Et],Et),Et]);for(qt.sort(Qr),Et=0;Et<Ht;Et++)Jt.push([qt[Et][0],-qt[Et][1]]);var le=Dr(qt),fe=Dr(Jt),Le=fe[0]===le[0],Se=fe[fe.length-1]===le[le.length-1],Ce=[];for(Et=le.length-1;Et>=0;--Et)Ce.push(wt[qt[le[Et]][2]]);for(Et=+Le;Et<fe.length-Se;++Et)Ce.push(wt[qt[fe[Et]][2]]);return Ce}return dt.x=function(wt){return arguments.length?(Q=wt,dt):Q},dt.y=function(wt){return arguments.length?(it=wt,dt):it},dt},r.geom.polygon=function(N){return tt(N,He),N};var He=r.geom.polygon.prototype=[];function wr(N,Q,it){return(it[0]-Q[0])*(N[1]-Q[1])<(it[1]-Q[1])*(N[0]-Q[0])}function Me(N,Q,it,dt){var wt=N[0],Et=it[0],Bt=Q[0]-wt,Ut=dt[0]-Et,Ht=N[1],qt=it[1],Jt=Q[1]-Ht,le=dt[1]-qt,fe=(Ut*(Ht-qt)-le*(wt-Et))/(le*Bt-Ut*Jt);return[wt+fe*Bt,Ht+fe*Jt]}function qe(N){var Q=N[0],it=N[N.length-1];return!(Q[0]-it[0]||Q[1]-it[1])}He.area=function(){for(var N,Q=-1,it=this.length,dt=this[it-1],wt=0;++Q<it;)N=dt,dt=this[Q],wt+=N[1]*dt[0]-N[0]*dt[1];return .5*wt},He.centroid=function(N){var Q,it,dt=-1,wt=this.length,Et=0,Bt=0,Ut=this[wt-1];for(arguments.length||(N=-1/(6*this.area()));++dt<wt;)Q=Ut,Ut=this[dt],it=Q[0]*Ut[1]-Ut[0]*Q[1],Et+=(Q[0]+Ut[0])*it,Bt+=(Q[1]+Ut[1])*it;return[Et*N,Bt*N]},He.clip=function(N){for(var Q,it,dt,wt,Et,Bt,Ut=qe(N),Ht=-1,qt=this.length-qe(this),Jt=this[qt-1];++Ht<qt;){for(Q=N.slice(),N.length=0,wt=this[Ht],Et=Q[(dt=Q.length-Ut)-1],it=-1;++it<dt;)wr(Bt=Q[it],Jt,wt)?(wr(Et,Jt,wt)||N.push(Me(Et,Bt,Jt,wt)),N.push(Bt)):wr(Et,Jt,wt)&&N.push(Me(Et,Bt,Jt,wt)),Et=Bt;Ut&&N.push(N[0]),Jt=wt}return N};var Qe,yr,br,Ar,cr,Xe=[],Je=[];function lr(){ui(this),this.edge=this.site=this.circle=null}function ur(N){var Q=Xe.pop()||new lr;return Q.site=N,Q}function Lr(N){hn(N),br.remove(N),Xe.push(N),ui(N)}function Ir(N){var Q=N.circle,it=Q.x,dt=Q.cy,wt={x:it,y:dt},Et=N.P,Bt=N.N,Ut=[N];Lr(N);for(var Ht=Et;Ht.circle&&y(it-Ht.circle.x)<se&&y(dt-Ht.circle.cy)<se;)Et=Ht.P,Ut.unshift(Ht),Lr(Ht),Ht=Et;Ut.unshift(Ht),hn(Ht);for(var qt=Bt;qt.circle&&y(it-qt.circle.x)<se&&y(dt-qt.circle.cy)<se;)Bt=qt.N,Ut.push(qt),Lr(qt),qt=Bt;Ut.push(qt),hn(qt);var Jt,le=Ut.length;for(Jt=1;Jt<le;++Jt)qt=Ut[Jt],Ht=Ut[Jt-1],mn(qt.edge,Ht.site,qt.site,wt);Ht=Ut[0],(qt=Ut[le-1]).edge=Yr(Ht.site,qt.site,null,wt),nn(Ht),nn(qt)}function Gr(N){for(var Q,it,dt,wt,Et=N.x,Bt=N.y,Ut=br._;Ut;)if((dt=Nr(Ut,Bt)-Et)>se)Ut=Ut.L;else{if(!((wt=Et-Kr(Ut,Bt))>se)){dt>-se?(Q=Ut.P,it=Ut):wt>-se?(Q=Ut,it=Ut.N):Q=it=Ut;break}if(!Ut.R){Q=Ut;break}Ut=Ut.R}var Ht=ur(N);if(br.insert(Q,Ht),Q||it){if(Q===it)return hn(Q),it=ur(Q.site),br.insert(Ht,it),Ht.edge=it.edge=Yr(Q.site,Ht.site),nn(Q),void nn(it);if(it){hn(Q),hn(it);var qt=Q.site,Jt=qt.x,le=qt.y,fe=N.x-Jt,Le=N.y-le,Se=it.site,Ce=Se.x-Jt,Ne=Se.y-le,Ee=2*(fe*Ne-Le*Ce),rr=fe*fe+Le*Le,Ye=Ce*Ce+Ne*Ne,Ve={x:(Ne*rr-Le*Ye)/Ee+Jt,y:(fe*Ye-Ce*rr)/Ee+le};mn(it.edge,qt,Se,Ve),Ht.edge=Yr(qt,N,null,Ve),it.edge=Yr(N,Se,null,Ve),nn(Q),nn(it)}else Ht.edge=Yr(Q.site,Ht.site)}}function Nr(N,Q){var it=N.site,dt=it.x,wt=it.y,Et=wt-Q;if(!Et)return dt;var Bt=N.P;if(!Bt)return-1/0;var Ut=(it=Bt.site).x,Ht=it.y,qt=Ht-Q;if(!qt)return Ut;var Jt=Ut-dt,le=1/Et-1/qt,fe=Jt/qt;return le?(-fe+Math.sqrt(fe*fe-2*le*(Jt*Jt/(-2*qt)-Ht+qt/2+wt-Et/2)))/le+dt:(dt+Ut)/2}function Kr(N,Q){var it=N.N;if(it)return Nr(it,Q);var dt=N.site;return dt.y===Q?dt.x:1/0}function Vr(N){this.site=N,this.edges=[]}function an(N,Q){return Q.angle-N.angle}function rn(){ui(this),this.x=this.y=this.arc=this.site=this.cy=null}function nn(N){var Q=N.P,it=N.N;if(Q&&it){var dt=Q.site,wt=N.site,Et=it.site;if(dt!==Et){var Bt=wt.x,Ut=wt.y,Ht=dt.x-Bt,qt=dt.y-Ut,Jt=Et.x-Bt,le=2*(Ht*(Ne=Et.y-Ut)-qt*Jt);if(!(le>=-ke)){var fe=Ht*Ht+qt*qt,Le=Jt*Jt+Ne*Ne,Se=(Ne*fe-qt*Le)/le,Ce=(Ht*Le-Jt*fe)/le,Ne=Ce+Ut,Ee=Je.pop()||new rn;Ee.arc=N,Ee.site=wt,Ee.x=Se+Bt,Ee.y=Ne+Math.sqrt(Se*Se+Ce*Ce),Ee.cy=Ne,N.circle=Ee;for(var rr=null,Ye=cr._;Ye;)if(Ee.y<Ye.y||Ee.y===Ye.y&&Ee.x<=Ye.x){if(!Ye.L){rr=Ye.P;break}Ye=Ye.L}else{if(!Ye.R){rr=Ye;break}Ye=Ye.R}cr.insert(rr,Ee),rr||(Ar=Ee)}}}}function hn(N){var Q=N.circle;Q&&(Q.P||(Ar=Q.N),cr.remove(Q),Je.push(Q),ui(Q),N.circle=null)}function fn(N,Q){var it=N.b;if(it)return!0;var dt,wt,Et=N.a,Bt=Q[0][0],Ut=Q[1][0],Ht=Q[0][1],qt=Q[1][1],Jt=N.l,le=N.r,fe=Jt.x,Le=Jt.y,Se=le.x,Ce=le.y,Ne=(fe+Se)/2,Ee=(Le+Ce)/2;if(Ce===Le){if(Ne<Bt||Ne>=Ut)return;if(fe>Se){if(Et){if(Et.y>=qt)return}else Et={x:Ne,y:Ht};it={x:Ne,y:qt}}else{if(Et){if(Et.y<Ht)return}else Et={x:Ne,y:qt};it={x:Ne,y:Ht}}}else if(wt=Ee-(dt=(fe-Se)/(Ce-Le))*Ne,dt<-1||dt>1)if(fe>Se){if(Et){if(Et.y>=qt)return}else Et={x:(Ht-wt)/dt,y:Ht};it={x:(qt-wt)/dt,y:qt}}else{if(Et){if(Et.y<Ht)return}else Et={x:(qt-wt)/dt,y:qt};it={x:(Ht-wt)/dt,y:Ht}}else if(Le<Ce){if(Et){if(Et.x>=Ut)return}else Et={x:Bt,y:dt*Bt+wt};it={x:Ut,y:dt*Ut+wt}}else{if(Et){if(Et.x<Bt)return}else Et={x:Ut,y:dt*Ut+wt};it={x:Bt,y:dt*Bt+wt}}return N.a=Et,N.b=it,!0}function kn(N,Q){this.l=N,this.r=Q,this.a=this.b=null}function Yr(N,Q,it,dt){var wt=new kn(N,Q);return Qe.push(wt),it&&mn(wt,N,Q,it),dt&&mn(wt,Q,N,dt),yr[N.i].edges.push(new Sn(wt,N,Q)),yr[Q.i].edges.push(new Sn(wt,Q,N)),wt}function mn(N,Q,it,dt){N.a||N.b?N.l===it?N.b=dt:N.a=dt:(N.a=dt,N.l=Q,N.r=it)}function Sn(N,Q,it){var dt=N.a,wt=N.b;this.edge=N,this.site=Q,this.angle=it?Math.atan2(it.y-Q.y,it.x-Q.x):N.l===Q?Math.atan2(wt.x-dt.x,dt.y-wt.y):Math.atan2(dt.x-wt.x,wt.y-dt.y)}function Xn(){this._=null}function ui(N){N.U=N.C=N.L=N.R=N.P=N.N=null}function si(N,Q){var it=Q,dt=Q.R,wt=it.U;wt?wt.L===it?wt.L=dt:wt.R=dt:N._=dt,dt.U=wt,it.U=dt,it.R=dt.L,it.R&&(it.R.U=it),dt.L=it}function gi(N,Q){var it=Q,dt=Q.L,wt=it.U;wt?wt.L===it?wt.L=dt:wt.R=dt:N._=dt,dt.U=wt,it.U=dt,it.L=dt.R,it.L&&(it.L.U=it),dt.R=it}function ri(N){for(;N.L;)N=N.L;return N}function Mi(N,Q){var it,dt,wt,Et=N.sort(Xa).pop();for(Qe=[],yr=new Array(N.length),br=new Xn,cr=new Xn;;)if(wt=Ar,Et&&(!wt||Et.y<wt.y||Et.y===wt.y&&Et.x<wt.x))Et.x===it&&Et.y===dt||(yr[Et.i]=new Vr(Et),Gr(Et),it=Et.x,dt=Et.y),Et=N.pop();else{if(!wt)break;Ir(wt.arc)}Q&&(function(Ut){for(var Ht,qt,Jt,le,fe,Le=Qe,Se=(qt=Ut[0][0],Jt=Ut[0][1],le=Ut[1][0],fe=Ut[1][1],function(Ne){var Ee,rr=Ne.a,Ye=Ne.b,Ve=rr.x,dr=rr.y,vr=0,Fr=1,zr=Ye.x-Ve,$r=Ye.y-dr;if(Ee=qt-Ve,zr||!(Ee>0)){if(Ee/=zr,zr<0){if(Ee<vr)return;Ee<Fr&&(Fr=Ee)}else if(zr>0){if(Ee>Fr)return;Ee>vr&&(vr=Ee)}if(Ee=le-Ve,zr||!(Ee<0)){if(Ee/=zr,zr<0){if(Ee>Fr)return;Ee>vr&&(vr=Ee)}else if(zr>0){if(Ee<vr)return;Ee<Fr&&(Fr=Ee)}if(Ee=Jt-dr,$r||!(Ee>0)){if(Ee/=$r,$r<0){if(Ee<vr)return;Ee<Fr&&(Fr=Ee)}else if($r>0){if(Ee>Fr)return;Ee>vr&&(vr=Ee)}if(Ee=fe-dr,$r||!(Ee<0)){if(Ee/=$r,$r<0){if(Ee>Fr)return;Ee>vr&&(vr=Ee)}else if($r>0){if(Ee<vr)return;Ee<Fr&&(Fr=Ee)}return vr>0&&(Ne.a={x:Ve+vr*zr,y:dr+vr*$r}),Fr<1&&(Ne.b={x:Ve+Fr*zr,y:dr+Fr*$r}),Ne}}}}}),Ce=Le.length;Ce--;)(!fn(Ht=Le[Ce],Ut)||!Se(Ht)||y(Ht.a.x-Ht.b.x)<se&&y(Ht.a.y-Ht.b.y)<se)&&(Ht.a=Ht.b=null,Le.splice(Ce,1))}(Q),function(Ut){for(var Ht,qt,Jt,le,fe,Le,Se,Ce,Ne,Ee,rr=Ut[0][0],Ye=Ut[1][0],Ve=Ut[0][1],dr=Ut[1][1],vr=yr,Fr=vr.length;Fr--;)if((fe=vr[Fr])&&fe.prepare())for(Ce=(Se=fe.edges).length,Le=0;Le<Ce;)Jt=(Ee=Se[Le].end()).x,le=Ee.y,Ht=(Ne=Se[++Le%Ce].start()).x,qt=Ne.y,(y(Jt-Ht)>se||y(le-qt)>se)&&(Se.splice(Le,0,new Sn((zr=fe.site,$r=Ee,Zr=y(Jt-rr)<se&&dr-le>se?{x:rr,y:y(Ht-rr)<se?qt:dr}:y(le-dr)<se&&Ye-Jt>se?{x:y(qt-dr)<se?Ht:Ye,y:dr}:y(Jt-Ye)<se&&le-Ve>se?{x:Ye,y:y(Ht-Ye)<se?qt:Ve}:y(le-Ve)<se&&Jt-rr>se?{x:y(qt-Ve)<se?Ht:rr,y:Ve}:null,cn=void 0,(cn=new kn(zr,null)).a=$r,cn.b=Zr,Qe.push(cn),cn),fe.site,null)),++Ce);var zr,$r,Zr,cn}(Q));var Bt={cells:yr,edges:Qe};return br=cr=Qe=yr=null,Bt}function Xa(N,Q){return Q.y-N.y||Q.x-N.x}Vr.prototype.prepare=function(){for(var N,Q=this.edges,it=Q.length;it--;)(N=Q[it].edge).b&&N.a||Q.splice(it,1);return Q.sort(an),Q.length},Sn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Xn.prototype={insert:function(N,Q){var it,dt,wt;if(N){if(Q.P=N,Q.N=N.N,N.N&&(N.N.P=Q),N.N=Q,N.R){for(N=N.R;N.L;)N=N.L;N.L=Q}else N.R=Q;it=N}else this._?(N=ri(this._),Q.P=null,Q.N=N,N.P=N.L=Q,it=N):(Q.P=Q.N=null,this._=Q,it=null);for(Q.L=Q.R=null,Q.U=it,Q.C=!0,N=Q;it&&it.C;)it===(dt=it.U).L?(wt=dt.R)&&wt.C?(it.C=wt.C=!1,dt.C=!0,N=dt):(N===it.R&&(si(this,it),it=(N=it).U),it.C=!1,dt.C=!0,gi(this,dt)):(wt=dt.L)&&wt.C?(it.C=wt.C=!1,dt.C=!0,N=dt):(N===it.L&&(gi(this,it),it=(N=it).U),it.C=!1,dt.C=!0,si(this,dt)),it=N.U;this._.C=!1},remove:function(N){N.N&&(N.N.P=N.P),N.P&&(N.P.N=N.N),N.N=N.P=null;var Q,it,dt,wt=N.U,Et=N.L,Bt=N.R;if(it=Et?Bt?ri(Bt):Et:Bt,wt?wt.L===N?wt.L=it:wt.R=it:this._=it,Et&&Bt?(dt=it.C,it.C=N.C,it.L=Et,Et.U=it,it!==Bt?(wt=it.U,it.U=N.U,N=it.R,wt.L=N,it.R=Bt,Bt.U=it):(it.U=wt,wt=it,N=it.R)):(dt=N.C,N=it),N&&(N.U=wt),!dt)if(N&&N.C)N.C=!1;else{do{if(N===this._)break;if(N===wt.L){if((Q=wt.R).C&&(Q.C=!1,wt.C=!0,si(this,wt),Q=wt.R),Q.L&&Q.L.C||Q.R&&Q.R.C){Q.R&&Q.R.C||(Q.L.C=!1,Q.C=!0,gi(this,Q),Q=wt.R),Q.C=wt.C,wt.C=Q.R.C=!1,si(this,wt),N=this._;break}}else if((Q=wt.L).C&&(Q.C=!1,wt.C=!0,gi(this,wt),Q=wt.L),Q.L&&Q.L.C||Q.R&&Q.R.C){Q.L&&Q.L.C||(Q.R.C=!1,Q.C=!0,si(this,Q),Q=wt.L),Q.C=wt.C,wt.C=Q.L.C=!1,gi(this,wt),N=this._;break}Q.C=!0,N=wt,wt=wt.U}while(!N.C);N&&(N.C=!1)}}},r.geom.voronoi=function(N){var Q=Hr,it=Pr,dt=Q,wt=it,Et=ya;if(N)return Bt(N);function Bt(Ht){var qt=new Array(Ht.length),Jt=Et[0][0],le=Et[0][1],fe=Et[1][0],Le=Et[1][1];return Mi(Ut(Ht),Et).cells.forEach(function(Se,Ce){var Ne=Se.edges,Ee=Se.site;(qt[Ce]=Ne.length?Ne.map(function(rr){var Ye=rr.start();return[Ye.x,Ye.y]}):Ee.x>=Jt&&Ee.x<=fe&&Ee.y>=le&&Ee.y<=Le?[[Jt,Le],[fe,Le],[fe,le],[Jt,le]]:[]).point=Ht[Ce]}),qt}function Ut(Ht){return Ht.map(function(qt,Jt){return{x:Math.round(dt(qt,Jt)/se)*se,y:Math.round(wt(qt,Jt)/se)*se,i:Jt}})}return Bt.links=function(Ht){return Mi(Ut(Ht)).edges.filter(function(qt){return qt.l&&qt.r}).map(function(qt){return{source:Ht[qt.l.i],target:Ht[qt.r.i]}})},Bt.triangles=function(Ht){var qt=[];return Mi(Ut(Ht)).cells.forEach(function(Jt,le){for(var fe,Le,Se,Ce,Ne=Jt.site,Ee=Jt.edges.sort(an),rr=-1,Ye=Ee.length,Ve=Ee[Ye-1].edge,dr=Ve.l===Ne?Ve.r:Ve.l;++rr<Ye;)fe=dr,dr=(Ve=Ee[rr].edge).l===Ne?Ve.r:Ve.l,le<fe.i&&le<dr.i&&(Se=fe,Ce=dr,((Le=Ne).x-Ce.x)*(Se.y-Le.y)-(Le.x-Se.x)*(Ce.y-Le.y)<0)&&qt.push([Ht[le],Ht[fe.i],Ht[dr.i]])}),qt},Bt.x=function(Ht){return arguments.length?(dt=Sr(Q=Ht),Bt):Q},Bt.y=function(Ht){return arguments.length?(wt=Sr(it=Ht),Bt):it},Bt.clipExtent=function(Ht){return arguments.length?(Et=Ht??ya,Bt):Et===ya?null:Et},Bt.size=function(Ht){return arguments.length?Bt.clipExtent(Ht&&[[0,0],Ht]):Et===ya?null:Et&&Et[1]},Bt};var ya=[[-1e6,-1e6],[1e6,1e6]];function so(N){return N.x}function Ys(N){return N.y}function $o(N,Q,it,dt,wt,Et){if(!N(Q,it,dt,wt,Et)){var Bt=.5*(it+wt),Ut=.5*(dt+Et),Ht=Q.nodes;Ht[0]&&$o(N,Ht[0],it,dt,Bt,Ut),Ht[1]&&$o(N,Ht[1],Bt,dt,wt,Ut),Ht[2]&&$o(N,Ht[2],it,Ut,Bt,Et),Ht[3]&&$o(N,Ht[3],Bt,Ut,wt,Et)}}function xs(N,Q){N=r.rgb(N),Q=r.rgb(Q);var it=N.r,dt=N.g,wt=N.b,Et=Q.r-it,Bt=Q.g-dt,Ut=Q.b-wt;return function(Ht){return"#"+Ke(Math.round(it+Et*Ht))+Ke(Math.round(dt+Bt*Ht))+Ke(Math.round(wt+Ut*Ht))}}function Zs(N,Q){var it,dt={},wt={};for(it in N)it in Q?dt[it]=Ja(N[it],Q[it]):wt[it]=N[it];for(it in Q)it in N||(wt[it]=Q[it]);return function(Et){for(it in dt)wt[it]=dt[it](Et);return wt}}function Ka(N,Q){return N=+N,Q=+Q,function(it){return N*(1-it)+Q*it}}function ul(N,Q){var it,dt,wt,Et=Ho.lastIndex=Vo.lastIndex=0,Bt=-1,Ut=[],Ht=[];for(N+="",Q+="";(it=Ho.exec(N))&&(dt=Vo.exec(Q));)(wt=dt.index)>Et&&(wt=Q.slice(Et,wt),Ut[Bt]?Ut[Bt]+=wt:Ut[++Bt]=wt),(it=it[0])===(dt=dt[0])?Ut[Bt]?Ut[Bt]+=dt:Ut[++Bt]=dt:(Ut[++Bt]=null,Ht.push({i:Bt,x:Ka(it,dt)})),Et=Vo.lastIndex;return Et<Q.length&&(wt=Q.slice(Et),Ut[Bt]?Ut[Bt]+=wt:Ut[++Bt]=wt),Ut.length<2?Ht[0]?(Q=Ht[0].x,function(qt){return Q(qt)+""}):function(){return Q}:(Q=Ht.length,function(qt){for(var Jt,le=0;le<Q;++le)Ut[(Jt=Ht[le]).i]=Jt.x(qt);return Ut.join("")})}r.geom.delaunay=function(N){return r.geom.voronoi().triangles(N)},r.geom.quadtree=function(N,Q,it,dt,wt){var Et,Bt=Hr,Ut=Pr;if(Et=arguments.length)return Bt=so,Ut=Ys,Et===3&&(wt=it,dt=Q,it=Q=0),Ht(N);function Ht(qt){var Jt,le,fe,Le,Se,Ce,Ne,Ee,rr,Ye=Sr(Bt),Ve=Sr(Ut);if(Q!=null)Ce=Q,Ne=it,Ee=dt,rr=wt;else if(Ee=rr=-(Ce=Ne=1/0),le=[],fe=[],Se=qt.length,Et)for(Le=0;Le<Se;++Le)(Jt=qt[Le]).x<Ce&&(Ce=Jt.x),Jt.y<Ne&&(Ne=Jt.y),Jt.x>Ee&&(Ee=Jt.x),Jt.y>rr&&(rr=Jt.y),le.push(Jt.x),fe.push(Jt.y);else for(Le=0;Le<Se;++Le){var dr=+Ye(Jt=qt[Le],Le),vr=+Ve(Jt,Le);dr<Ce&&(Ce=dr),vr<Ne&&(Ne=vr),dr>Ee&&(Ee=dr),vr>rr&&(rr=vr),le.push(dr),fe.push(vr)}var Fr=Ee-Ce,zr=rr-Ne;function $r(ln,pn,bn,On,Br,on,dn,_n){if(!isNaN(bn)&&!isNaN(On))if(ln.leaf){var En=ln.x,Nn=ln.y;if(En!=null)if(y(En-bn)+y(Nn-On)<.01)Zr(ln,pn,bn,On,Br,on,dn,_n);else{var $n=ln.point;ln.x=ln.y=ln.point=null,Zr(ln,$n,En,Nn,Br,on,dn,_n),Zr(ln,pn,bn,On,Br,on,dn,_n)}else ln.x=bn,ln.y=On,ln.point=pn}else Zr(ln,pn,bn,On,Br,on,dn,_n)}function Zr(ln,pn,bn,On,Br,on,dn,_n){var En=.5*(Br+dn),Nn=.5*(on+_n),$n=bn>=En,Kn=On>=Nn,hi=Kn<<1|$n;ln.leaf=!1,$n?Br=En:dn=En,Kn?on=Nn:_n=Nn,$r(ln=ln.nodes[hi]||(ln.nodes[hi]={leaf:!0,nodes:[],point:null,x:null,y:null}),pn,bn,On,Br,on,dn,_n)}Fr>zr?rr=Ne+Fr:Ee=Ce+zr;var cn={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(ln){$r(cn,ln,+Ye(ln,++Le),+Ve(ln,Le),Ce,Ne,Ee,rr)}};if(cn.visit=function(ln){$o(ln,cn,Ce,Ne,Ee,rr)},cn.find=function(ln){return function(pn,bn,On,Br,on,dn,_n){var En,Nn=1/0;return function $n(Kn,hi,fi,Jn,Ci){if(!(hi>dn||fi>_n||Jn<Br||Ci<on)){if(Zi=Kn.point){var Zi,Pi=bn-Kn.x,Ui=On-Kn.y,Wn=Pi*Pi+Ui*Ui;if(Wn<Nn){var Gn=Math.sqrt(Nn=Wn);Br=bn-Gn,on=On-Gn,dn=bn+Gn,_n=On+Gn,En=Zi}}for(var pi=Kn.nodes,oi=.5*(hi+Jn),mi=.5*(fi+Ci),pa=(On>=mi)<<1|bn>=oi,wi=pa+4;pa<wi;++pa)if(Kn=pi[3&pa])switch(3&pa){case 0:$n(Kn,hi,fi,oi,mi);break;case 1:$n(Kn,oi,fi,Jn,mi);break;case 2:$n(Kn,hi,mi,oi,Ci);break;case 3:$n(Kn,oi,mi,Jn,Ci)}}}(pn,Br,on,dn,_n),En}(cn,ln[0],ln[1],Ce,Ne,Ee,rr)},Le=-1,Q==null){for(;++Le<Se;)$r(cn,qt[Le],le[Le],fe[Le],Ce,Ne,Ee,rr);--Le}else qt.forEach(cn.add);return le=fe=qt=Jt=null,cn}return Ht.x=function(qt){return arguments.length?(Bt=qt,Ht):Bt},Ht.y=function(qt){return arguments.length?(Ut=qt,Ht):Ut},Ht.extent=function(qt){return arguments.length?(qt==null?Q=it=dt=wt=null:(Q=+qt[0][0],it=+qt[0][1],dt=+qt[1][0],wt=+qt[1][1]),Ht):Q==null?null:[[Q,it],[dt,wt]]},Ht.size=function(qt){return arguments.length?(qt==null?Q=it=dt=wt=null:(Q=it=0,dt=+qt[0],wt=+qt[1]),Ht):Q==null?null:[dt-Q,wt-it]},Ht},r.interpolateRgb=xs,r.interpolateObject=Zs,r.interpolateNumber=Ka,r.interpolateString=ul;var Ho=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vo=new RegExp(Ho.source,"g");function Ja(N,Q){for(var it,dt=r.interpolators.length;--dt>=0&&!(it=r.interpolators[dt](N,Q)););return it}function Oi(N,Q){var it,dt=[],wt=[],Et=N.length,Bt=Q.length,Ut=Math.min(N.length,Q.length);for(it=0;it<Ut;++it)dt.push(Ja(N[it],Q[it]));for(;it<Et;++it)wt[it]=N[it];for(;it<Bt;++it)wt[it]=Q[it];return function(Ht){for(it=0;it<Ut;++it)wt[it]=dt[it](Ht);return wt}}r.interpolate=Ja,r.interpolators=[function(N,Q){var it=typeof Q;return(it==="string"?_r.has(Q.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Q)?xs:ul:Q instanceof te?xs:Array.isArray(Q)?Oi:it==="object"&&isNaN(Q)?Zs:Ka)(N,Q)}],r.interpolateArray=Oi;var bs=function(){return R},qn=r.map({linear:bs,poly:function(N){return function(Q){return Math.pow(Q,N)}},quad:function(){return ja},cubic:function(){return To},sin:function(){return uo},exp:function(){return Fs},circle:function(){return hl},elastic:function(N,Q){var it;return arguments.length<2&&(Q=.45),arguments.length?it=Q/Ie*Math.asin(1/N):(N=1,it=Q/4),function(dt){return 1+N*Math.pow(2,-10*dt)*Math.sin((dt-it)*Ie/Q)}},back:function(N){return N||(N=1.70158),function(Q){return Q*Q*((N+1)*Q-N)}},bounce:function(){return Mo}}),Qa=r.map({in:R,out:Aa,"in-out":lo,"out-in":function(N){return lo(Aa(N))}});function Aa(N){return function(Q){return 1-N(1-Q)}}function lo(N){return function(Q){return .5*(Q<.5?N(2*Q):2-N(2-2*Q))}}function ja(N){return N*N}function To(N){return N*N*N}function co(N){if(N<=0)return 0;if(N>=1)return 1;var Q=N*N,it=Q*N;return 4*(N<.5?it:3*(N-Q)+it-.75)}function uo(N){return 1-Math.cos(N*Vt)}function Fs(N){return Math.pow(2,10*(N-1))}function hl(N){return 1-Math.sqrt(1-N*N)}function Mo(N){return N<.3636363636363637?7.5625*N*N:N<.7272727272727273?7.5625*(N-=.5454545454545454)*N+.75:N<.9090909090909092?7.5625*(N-=.8181818181818182)*N+.9375:7.5625*(N-=.9545454545454546)*N+.984375}function fl(N,Q){return Q-=N,function(it){return Math.round(N+Q*it)}}function Xs(N){var Q,it,dt,wt=[N.a,N.b],Et=[N.c,N.d],Bt=Ks(wt),Ut=pl(wt,Et),Ht=Ks(((Q=Et)[0]+=(dt=-Ut)*(it=wt)[0],Q[1]+=dt*it[1],Q))||0;wt[0]*Et[1]<Et[0]*wt[1]&&(wt[0]*=-1,wt[1]*=-1,Bt*=-1,Ut*=-1),this.rotate=(Bt?Math.atan2(wt[1],wt[0]):Math.atan2(-Et[0],Et[1]))*Gt,this.translate=[N.e,N.f],this.scale=[Bt,Ht],this.skew=Ht?Math.atan2(Ut,Ht)*Gt:0}function pl(N,Q){return N[0]*Q[0]+N[1]*Q[1]}function Ks(N){var Q=Math.sqrt(pl(N,N));return Q&&(N[0]/=Q,N[1]/=Q),Q}r.ease=function(N){var Q,it=N.indexOf("-"),dt=it>=0?N.slice(0,it):N,wt=it>=0?N.slice(it+1):"in";return dt=qn.get(dt)||bs,wt=Qa.get(wt)||R,Q=wt(dt.apply(null,m.call(arguments,1))),function(Et){return Et<=0?0:Et>=1?1:Q(Et)}},r.interpolateHcl=function(N,Q){N=r.hcl(N),Q=r.hcl(Q);var it=N.h,dt=N.c,wt=N.l,Et=Q.h-it,Bt=Q.c-dt,Ut=Q.l-wt;return isNaN(Bt)&&(Bt=0,dt=isNaN(dt)?Q.c:dt),isNaN(Et)?(Et=0,it=isNaN(it)?Q.h:it):Et>180?Et-=360:Et<-180&&(Et+=360),function(Ht){return ue(it+Et*Ht,dt+Bt*Ht,wt+Ut*Ht)+""}},r.interpolateHsl=function(N,Q){N=r.hsl(N),Q=r.hsl(Q);var it=N.h,dt=N.s,wt=N.l,Et=Q.h-it,Bt=Q.s-dt,Ut=Q.l-wt;return isNaN(Bt)&&(Bt=0,dt=isNaN(dt)?Q.s:dt),isNaN(Et)?(Et=0,it=isNaN(it)?Q.h:it):Et>180?Et-=360:Et<-180&&(Et+=360),function(Ht){return me(it+Et*Ht,dt+Bt*Ht,wt+Ut*Ht)+""}},r.interpolateLab=function(N,Q){N=r.lab(N),Q=r.lab(Q);var it=N.l,dt=N.a,wt=N.b,Et=Q.l-it,Bt=Q.a-dt,Ut=Q.b-wt;return function(Ht){return Ge(it+Et*Ht,dt+Bt*Ht,wt+Ut*Ht)+""}},r.interpolateRound=fl,r.transform=function(N){var Q=s.createElementNS(r.ns.prefix.svg,"g");return(r.transform=function(it){if(it!=null){Q.setAttribute("transform",it);var dt=Q.transform.baseVal.consolidate()}return new Xs(dt?dt.matrix:dl)})(N)},Xs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var dl={a:1,b:0,c:0,d:1,e:0,f:0};function ss(N){return N.length?N.pop()+",":""}function Ao(N,Q){var it=[],dt=[];return N=r.transform(N),Q=r.transform(Q),function(wt,Et,Bt,Ut){if(wt[0]!==Et[0]||wt[1]!==Et[1]){var Ht=Bt.push("translate(",null,",",null,")");Ut.push({i:Ht-4,x:Ka(wt[0],Et[0])},{i:Ht-2,x:Ka(wt[1],Et[1])})}else(Et[0]||Et[1])&&Bt.push("translate("+Et+")")}(N.translate,Q.translate,it,dt),function(wt,Et,Bt,Ut){wt!==Et?(wt-Et>180?Et+=360:Et-wt>180&&(wt+=360),Ut.push({i:Bt.push(ss(Bt)+"rotate(",null,")")-2,x:Ka(wt,Et)})):Et&&Bt.push(ss(Bt)+"rotate("+Et+")")}(N.rotate,Q.rotate,it,dt),function(wt,Et,Bt,Ut){wt!==Et?Ut.push({i:Bt.push(ss(Bt)+"skewX(",null,")")-2,x:Ka(wt,Et)}):Et&&Bt.push(ss(Bt)+"skewX("+Et+")")}(N.skew,Q.skew,it,dt),function(wt,Et,Bt,Ut){if(wt[0]!==Et[0]||wt[1]!==Et[1]){var Ht=Bt.push(ss(Bt)+"scale(",null,",",null,")");Ut.push({i:Ht-4,x:Ka(wt[0],Et[0])},{i:Ht-2,x:Ka(wt[1],Et[1])})}else Et[0]===1&&Et[1]===1||Bt.push(ss(Bt)+"scale("+Et+")")}(N.scale,Q.scale,it,dt),N=Q=null,function(wt){for(var Et,Bt=-1,Ut=dt.length;++Bt<Ut;)it[(Et=dt[Bt]).i]=Et.x(wt);return it.join("")}}function Wo(N,Q){return Q=(Q-=N=+N)||1/Q,function(it){return(it-N)/Q}}function ls(N,Q){return Q=(Q-=N=+N)||1/Q,function(it){return Math.max(0,Math.min(1,(it-N)/Q))}}function zs(N){for(var Q=N.source,it=N.target,dt=function(Bt,Ut){if(Bt===Ut)return Bt;for(var Ht=Js(Bt),qt=Js(Ut),Jt=Ht.pop(),le=qt.pop(),fe=null;Jt===le;)fe=Jt,Jt=Ht.pop(),le=qt.pop();return fe}(Q,it),wt=[Q];Q!==dt;)Q=Q.parent,wt.push(Q);for(var Et=wt.length;it!==dt;)wt.splice(Et,0,it),it=it.parent;return wt}function Js(N){for(var Q=[],it=N.parent;it!=null;)Q.push(N),N=it,it=it.parent;return Q.push(N),Q}function Qs(N){N.fixed|=2}function Ia(N){N.fixed&=-7}function qo(N){N.fixed|=4,N.px=N.x,N.py=N.y}function to(N){N.fixed&=-5}function ho(N,Q,it){var dt=0,wt=0;if(N.charge=0,!N.leaf)for(var Et,Bt=N.nodes,Ut=Bt.length,Ht=-1;++Ht<Ut;)(Et=Bt[Ht])!=null&&(ho(Et,Q,it),N.charge+=Et.charge,dt+=Et.charge*Et.cx,wt+=Et.charge*Et.cy);if(N.point){N.leaf||(N.point.x+=Math.random()-.5,N.point.y+=Math.random()-.5);var qt=Q*it[N.point.index];N.charge+=N.pointCharge=qt,dt+=qt*N.point.x,wt+=qt*N.point.y}N.cx=dt/N.charge,N.cy=wt/N.charge}r.interpolateTransform=Ao,r.layout={},r.layout.bundle=function(){return function(N){for(var Q=[],it=-1,dt=N.length;++it<dt;)Q.push(zs(N[it]));return Q}},r.layout.chord=function(){var N,Q,it,dt,wt,Et,Bt,Ut={},Ht=0;function qt(){var le,fe,Le,Se,Ce,Ne={},Ee=[],rr=r.range(dt),Ye=[];for(N=[],Q=[],le=0,Se=-1;++Se<dt;){for(fe=0,Ce=-1;++Ce<dt;)fe+=it[Se][Ce];Ee.push(fe),Ye.push(r.range(dt)),le+=fe}for(wt&&rr.sort(function(cn,ln){return wt(Ee[cn],Ee[ln])}),Et&&Ye.forEach(function(cn,ln){cn.sort(function(pn,bn){return Et(it[ln][pn],it[ln][bn])})}),le=(Ie-Ht*dt)/le,fe=0,Se=-1;++Se<dt;){for(Le=fe,Ce=-1;++Ce<dt;){var Ve=rr[Se],dr=Ye[Ve][Ce],vr=it[Ve][dr],Fr=fe,zr=fe+=vr*le;Ne[Ve+"-"+dr]={index:Ve,subindex:dr,startAngle:Fr,endAngle:zr,value:vr}}Q[Ve]={index:Ve,startAngle:Le,endAngle:fe,value:Ee[Ve]},fe+=Ht}for(Se=-1;++Se<dt;)for(Ce=Se-1;++Ce<dt;){var $r=Ne[Se+"-"+Ce],Zr=Ne[Ce+"-"+Se];($r.value||Zr.value)&&N.push($r.value<Zr.value?{source:Zr,target:$r}:{source:$r,target:Zr})}Bt&&Jt()}function Jt(){N.sort(function(le,fe){return Bt((le.source.value+le.target.value)/2,(fe.source.value+fe.target.value)/2)})}return Ut.matrix=function(le){return arguments.length?(dt=(it=le)&&it.length,N=Q=null,Ut):it},Ut.padding=function(le){return arguments.length?(Ht=le,N=Q=null,Ut):Ht},Ut.sortGroups=function(le){return arguments.length?(wt=le,N=Q=null,Ut):wt},Ut.sortSubgroups=function(le){return arguments.length?(Et=le,N=null,Ut):Et},Ut.sortChords=function(le){return arguments.length?(Bt=le,N&&Jt(),Ut):Bt},Ut.chords=function(){return N||qt(),N},Ut.groups=function(){return Q||qt(),Q},Ut},r.layout.force=function(){var N,Q,it,dt,wt,Et,Bt={},Ut=r.dispatch("start","tick","end"),Ht=[1,1],qt=.9,Jt=ml,le=Co,fe=-30,Le=ni,Se=.1,Ce=.64,Ne=[],Ee=[];function rr(Ve){return function(dr,vr,Fr,zr){if(dr.point!==Ve){var $r=dr.cx-Ve.x,Zr=dr.cy-Ve.y,cn=zr-vr,ln=$r*$r+Zr*Zr;if(cn*cn/Ce<ln){if(ln<Le){var pn=dr.charge/ln;Ve.px-=$r*pn,Ve.py-=Zr*pn}return!0}dr.point&&ln&&ln<Le&&(pn=dr.pointCharge/ln,Ve.px-=$r*pn,Ve.py-=Zr*pn)}return!dr.charge}}function Ye(Ve){Ve.px=r.event.x,Ve.py=r.event.y,Bt.resume()}return Bt.tick=function(){if((it*=.99)<.005)return N=null,Ut.end({type:"end",alpha:it=0}),!0;var Ve,dr,vr,Fr,zr,$r,Zr,cn,ln,pn=Ne.length,bn=Ee.length;for(dr=0;dr<bn;++dr)Fr=(vr=Ee[dr]).source,($r=(cn=(zr=vr.target).x-Fr.x)*cn+(ln=zr.y-Fr.y)*ln)&&(cn*=$r=it*wt[dr]*(($r=Math.sqrt($r))-dt[dr])/$r,ln*=$r,zr.x-=cn*(Zr=Fr.weight+zr.weight?Fr.weight/(Fr.weight+zr.weight):.5),zr.y-=ln*Zr,Fr.x+=cn*(Zr=1-Zr),Fr.y+=ln*Zr);if((Zr=it*Se)&&(cn=Ht[0]/2,ln=Ht[1]/2,dr=-1,Zr))for(;++dr<pn;)(vr=Ne[dr]).x+=(cn-vr.x)*Zr,vr.y+=(ln-vr.y)*Zr;if(fe)for(ho(Ve=r.geom.quadtree(Ne),it,Et),dr=-1;++dr<pn;)(vr=Ne[dr]).fixed||Ve.visit(rr(vr));for(dr=-1;++dr<pn;)(vr=Ne[dr]).fixed?(vr.x=vr.px,vr.y=vr.py):(vr.x-=(vr.px-(vr.px=vr.x))*qt,vr.y-=(vr.py-(vr.py=vr.y))*qt);Ut.tick({type:"tick",alpha:it})},Bt.nodes=function(Ve){return arguments.length?(Ne=Ve,Bt):Ne},Bt.links=function(Ve){return arguments.length?(Ee=Ve,Bt):Ee},Bt.size=function(Ve){return arguments.length?(Ht=Ve,Bt):Ht},Bt.linkDistance=function(Ve){return arguments.length?(Jt=typeof Ve=="function"?Ve:+Ve,Bt):Jt},Bt.distance=Bt.linkDistance,Bt.linkStrength=function(Ve){return arguments.length?(le=typeof Ve=="function"?Ve:+Ve,Bt):le},Bt.friction=function(Ve){return arguments.length?(qt=+Ve,Bt):qt},Bt.charge=function(Ve){return arguments.length?(fe=typeof Ve=="function"?Ve:+Ve,Bt):fe},Bt.chargeDistance=function(Ve){return arguments.length?(Le=Ve*Ve,Bt):Math.sqrt(Le)},Bt.gravity=function(Ve){return arguments.length?(Se=+Ve,Bt):Se},Bt.theta=function(Ve){return arguments.length?(Ce=Ve*Ve,Bt):Math.sqrt(Ce)},Bt.alpha=function(Ve){return arguments.length?(Ve=+Ve,it?Ve>0?it=Ve:(N.c=null,N.t=NaN,N=null,Ut.end({type:"end",alpha:it=0})):Ve>0&&(Ut.start({type:"start",alpha:it=Ve}),N=nr(Bt.tick)),Bt):it},Bt.start=function(){var Ve,dr,vr,Fr=Ne.length,zr=Ee.length,$r=Ht[0],Zr=Ht[1];for(Ve=0;Ve<Fr;++Ve)(vr=Ne[Ve]).index=Ve,vr.weight=0;for(Ve=0;Ve<zr;++Ve)typeof(vr=Ee[Ve]).source=="number"&&(vr.source=Ne[vr.source]),typeof vr.target=="number"&&(vr.target=Ne[vr.target]),++vr.source.weight,++vr.target.weight;for(Ve=0;Ve<Fr;++Ve)vr=Ne[Ve],isNaN(vr.x)&&(vr.x=cn("x",$r)),isNaN(vr.y)&&(vr.y=cn("y",Zr)),isNaN(vr.px)&&(vr.px=vr.x),isNaN(vr.py)&&(vr.py=vr.y);if(dt=[],typeof Jt=="function")for(Ve=0;Ve<zr;++Ve)dt[Ve]=+Jt.call(this,Ee[Ve],Ve);else for(Ve=0;Ve<zr;++Ve)dt[Ve]=Jt;if(wt=[],typeof le=="function")for(Ve=0;Ve<zr;++Ve)wt[Ve]=+le.call(this,Ee[Ve],Ve);else for(Ve=0;Ve<zr;++Ve)wt[Ve]=le;if(Et=[],typeof fe=="function")for(Ve=0;Ve<Fr;++Ve)Et[Ve]=+fe.call(this,Ne[Ve],Ve);else for(Ve=0;Ve<Fr;++Ve)Et[Ve]=fe;function cn(ln,pn){if(!dr){for(dr=new Array(Fr),on=0;on<Fr;++on)dr[on]=[];for(on=0;on<zr;++on){var bn=Ee[on];dr[bn.source.index].push(bn.target),dr[bn.target.index].push(bn.source)}}for(var On,Br=dr[Ve],on=-1,dn=Br.length;++on<dn;)if(!isNaN(On=Br[on][ln]))return On;return Math.random()*pn}return Bt.resume()},Bt.resume=function(){return Bt.alpha(.1)},Bt.stop=function(){return Bt.alpha(0)},Bt.drag=function(){if(Q||(Q=r.behavior.drag().origin(R).on("dragstart.force",Qs).on("drag.force",Ye).on("dragend.force",Ia)),!arguments.length)return Q;this.on("mouseover.force",qo).on("mouseout.force",to).call(Q)},r.rebind(Bt,Ut,"on")};var ml=20,Co=1,ni=1/0;function Ua(N,Q){return r.rebind(N,Q,"sort","children","value"),N.nodes=N,N.links=vl,N}function _s(N,Q){for(var it=[N];(N=it.pop())!=null;)if(Q(N),(wt=N.children)&&(dt=wt.length))for(var dt,wt;--dt>=0;)it.push(wt[dt])}function Oa(N,Q){for(var it=[N],dt=[];(N=it.pop())!=null;)if(dt.push(N),(Et=N.children)&&(wt=Et.length))for(var wt,Et,Bt=-1;++Bt<wt;)it.push(Et[Bt]);for(;(N=dt.pop())!=null;)Q(N)}function Yo(N){return N.children}function Al(N){return N.value}function Ns(N,Q){return Q.value-N.value}function vl(N){return r.merge(N.map(function(Q){return(Q.children||[]).map(function(it){return{source:Q,target:it}})}))}r.layout.hierarchy=function(){var N=Ns,Q=Yo,it=Al;function dt(wt){var Et,Bt=[wt],Ut=[];for(wt.depth=0;(Et=Bt.pop())!=null;)if(Ut.push(Et),(qt=Q.call(dt,Et,Et.depth))&&(Ht=qt.length)){for(var Ht,qt,Jt;--Ht>=0;)Bt.push(Jt=qt[Ht]),Jt.parent=Et,Jt.depth=Et.depth+1;it&&(Et.value=0),Et.children=qt}else it&&(Et.value=+it.call(dt,Et,Et.depth)||0),delete Et.children;return Oa(wt,function(le){var fe,Le;N&&(fe=le.children)&&fe.sort(N),it&&(Le=le.parent)&&(Le.value+=le.value)}),Ut}return dt.sort=function(wt){return arguments.length?(N=wt,dt):N},dt.children=function(wt){return arguments.length?(Q=wt,dt):Q},dt.value=function(wt){return arguments.length?(it=wt,dt):it},dt.revalue=function(wt){return it&&(_s(wt,function(Et){Et.children&&(Et.value=0)}),Oa(wt,function(Et){var Bt;Et.children||(Et.value=+it.call(dt,Et,Et.depth)||0),(Bt=Et.parent)&&(Bt.value+=Et.value)})),wt},dt},r.layout.partition=function(){var N=r.layout.hierarchy(),Q=[1,1];function it(Et,Bt,Ut,Ht){var qt=Et.children;if(Et.x=Bt,Et.y=Et.depth*Ht,Et.dx=Ut,Et.dy=Ht,qt&&(Jt=qt.length)){var Jt,le,fe,Le=-1;for(Ut=Et.value?Ut/Et.value:0;++Le<Jt;)it(le=qt[Le],Bt,fe=le.value*Ut,Ht),Bt+=fe}}function dt(Et){var Bt=Et.children,Ut=0;if(Bt&&(Ht=Bt.length))for(var Ht,qt=-1;++qt<Ht;)Ut=Math.max(Ut,dt(Bt[qt]));return 1+Ut}function wt(Et,Bt){var Ut=N.call(this,Et,Bt);return it(Ut[0],0,Q[0],Q[1]/dt(Ut[0])),Ut}return wt.size=function(Et){return arguments.length?(Q=Et,wt):Q},Ua(wt,N)},r.layout.pie=function(){var N=Number,Q=yl,it=0,dt=Ie,wt=0;function Et(Bt){var Ut,Ht=Bt.length,qt=Bt.map(function(rr,Ye){return+N.call(Et,rr,Ye)}),Jt=+(typeof it=="function"?it.apply(this,arguments):it),le=(typeof dt=="function"?dt.apply(this,arguments):dt)-Jt,fe=Math.min(Math.abs(le)/Ht,+(typeof wt=="function"?wt.apply(this,arguments):wt)),Le=fe*(le<0?-1:1),Se=r.sum(qt),Ce=Se?(le-Ht*Le)/Se:0,Ne=r.range(Ht),Ee=[];return Q!=null&&Ne.sort(Q===yl?function(rr,Ye){return qt[Ye]-qt[rr]}:function(rr,Ye){return Q(Bt[rr],Bt[Ye])}),Ne.forEach(function(rr){Ee[rr]={data:Bt[rr],value:Ut=qt[rr],startAngle:Jt,endAngle:Jt+=Ut*Ce+Le,padAngle:fe}}),Ee}return Et.value=function(Bt){return arguments.length?(N=Bt,Et):N},Et.sort=function(Bt){return arguments.length?(Q=Bt,Et):Q},Et.startAngle=function(Bt){return arguments.length?(it=Bt,Et):it},Et.endAngle=function(Bt){return arguments.length?(dt=Bt,Et):dt},Et.padAngle=function(Bt){return arguments.length?(wt=Bt,Et):wt},Et};var yl={};function ws(N){return N.x}function cs(N){return N.y}function ks(N,Q,it){N.y0=Q,N.y=it}r.layout.stack=function(){var N=R,Q=Eo,it=po,dt=ks,wt=ws,Et=cs;function Bt(Ut,Ht){if(!(fe=Ut.length))return Ut;var qt=Ut.map(function(rr,Ye){return N.call(Bt,rr,Ye)}),Jt=qt.map(function(rr){return rr.map(function(Ye,Ve){return[wt.call(Bt,Ye,Ve),Et.call(Bt,Ye,Ve)]})}),le=Q.call(Bt,Jt,Ht);qt=r.permute(qt,le),Jt=r.permute(Jt,le);var fe,Le,Se,Ce,Ne=it.call(Bt,Jt,Ht),Ee=qt[0].length;for(Se=0;Se<Ee;++Se)for(dt.call(Bt,qt[0][Se],Ce=Ne[Se],Jt[0][Se][1]),Le=1;Le<fe;++Le)dt.call(Bt,qt[Le][Se],Ce+=Jt[Le-1][Se][1],Jt[Le][Se][1]);return Ut}return Bt.values=function(Ut){return arguments.length?(N=Ut,Bt):N},Bt.order=function(Ut){return arguments.length?(Q=typeof Ut=="function"?Ut:Lo.get(Ut)||Eo,Bt):Q},Bt.offset=function(Ut){return arguments.length?(it=typeof Ut=="function"?Ut:fo.get(Ut)||po,Bt):it},Bt.x=function(Ut){return arguments.length?(wt=Ut,Bt):wt},Bt.y=function(Ut){return arguments.length?(Et=Ut,Bt):Et},Bt.out=function(Ut){return arguments.length?(dt=Ut,Bt):dt},Bt};var Lo=r.map({"inside-out":function(N){var Q,it,dt=N.length,wt=N.map(Bs),Et=N.map(Ga),Bt=r.range(dt).sort(function(le,fe){return wt[le]-wt[fe]}),Ut=0,Ht=0,qt=[],Jt=[];for(Q=0;Q<dt;++Q)it=Bt[Q],Ut<Ht?(Ut+=Et[it],qt.push(it)):(Ht+=Et[it],Jt.push(it));return Jt.reverse().concat(qt)},reverse:function(N){return r.range(N.length).reverse()},default:Eo}),fo=r.map({silhouette:function(N){var Q,it,dt,wt=N.length,Et=N[0].length,Bt=[],Ut=0,Ht=[];for(it=0;it<Et;++it){for(Q=0,dt=0;Q<wt;Q++)dt+=N[Q][it][1];dt>Ut&&(Ut=dt),Bt.push(dt)}for(it=0;it<Et;++it)Ht[it]=(Ut-Bt[it])/2;return Ht},wiggle:function(N){var Q,it,dt,wt,Et,Bt,Ut,Ht,qt,Jt=N.length,le=N[0],fe=le.length,Le=[];for(Le[0]=Ht=qt=0,it=1;it<fe;++it){for(Q=0,wt=0;Q<Jt;++Q)wt+=N[Q][it][1];for(Q=0,Et=0,Ut=le[it][0]-le[it-1][0];Q<Jt;++Q){for(dt=0,Bt=(N[Q][it][1]-N[Q][it-1][1])/(2*Ut);dt<Q;++dt)Bt+=(N[dt][it][1]-N[dt][it-1][1])/Ut;Et+=Bt*N[Q][it][1]}Le[it]=Ht-=wt?Et/wt*Ut:0,Ht<qt&&(qt=Ht)}for(it=0;it<fe;++it)Le[it]-=qt;return Le},expand:function(N){var Q,it,dt,wt=N.length,Et=N[0].length,Bt=1/wt,Ut=[];for(it=0;it<Et;++it){for(Q=0,dt=0;Q<wt;Q++)dt+=N[Q][it][1];if(dt)for(Q=0;Q<wt;Q++)N[Q][it][1]/=dt;else for(Q=0;Q<wt;Q++)N[Q][it][1]=Bt}for(it=0;it<Et;++it)Ut[it]=0;return Ut},zero:po});function Eo(N){return r.range(N.length)}function po(N){for(var Q=-1,it=N[0].length,dt=[];++Q<it;)dt[Q]=0;return dt}function Bs(N){for(var Q,it=1,dt=0,wt=N[0][1],Et=N.length;it<Et;++it)(Q=N[it][1])>wt&&(dt=it,wt=Q);return dt}function Ga(N){return N.reduce(xl,0)}function xl(N,Q){return N+Q[1]}function bl(N,Q){return js(N,Math.ceil(Math.log(Q.length)/Math.LN2+1))}function js(N,Q){for(var it=-1,dt=+N[0],wt=(N[1]-dt)/Q,Et=[];++it<=Q;)Et[it]=wt*it+dt;return Et}function So(N){return[r.min(N),r.max(N)]}function Us(N,Q){return N.value-Q.value}function Zo(N,Q){var it=N._pack_next;N._pack_next=Q,Q._pack_prev=N,Q._pack_next=it,it._pack_prev=Q}function tl(N,Q){N._pack_next=Q,Q._pack_prev=N}function us(N,Q){var it=Q.x-N.x,dt=Q.y-N.y,wt=N.r+Q.r;return .999*wt*wt>it*it+dt*dt}function Xo(N){if((Q=N.children)&&(Ht=Q.length)){var Q,it,dt,wt,Et,Bt,Ut,Ht,qt=1/0,Jt=-1/0,le=1/0,fe=-1/0;if(Q.forEach(Ts),(it=Q[0]).x=-it.r,it.y=0,Ye(it),Ht>1&&((dt=Q[1]).x=dt.r,dt.y=0,Ye(dt),Ht>2))for(Io(it,dt,wt=Q[2]),Ye(wt),Zo(it,wt),it._pack_prev=wt,Zo(wt,dt),dt=it._pack_next,Et=3;Et<Ht;Et++){Io(it,dt,wt=Q[Et]);var Le=0,Se=1,Ce=1;for(Bt=dt._pack_next;Bt!==dt;Bt=Bt._pack_next,Se++)if(us(Bt,wt)){Le=1;break}if(Le==1)for(Ut=it._pack_prev;Ut!==Bt._pack_prev&&!us(Ut,wt);Ut=Ut._pack_prev,Ce++);Le?(Se<Ce||Se==Ce&&dt.r<it.r?tl(it,dt=Bt):tl(it=Ut,dt),Et--):(Zo(it,wt),dt=wt,Ye(wt))}var Ne=(qt+Jt)/2,Ee=(le+fe)/2,rr=0;for(Et=0;Et<Ht;Et++)(wt=Q[Et]).x-=Ne,wt.y-=Ee,rr=Math.max(rr,wt.r+Math.sqrt(wt.x*wt.x+wt.y*wt.y));N.r=rr,Q.forEach(hs)}function Ye(Ve){qt=Math.min(Ve.x-Ve.r,qt),Jt=Math.max(Ve.x+Ve.r,Jt),le=Math.min(Ve.y-Ve.r,le),fe=Math.max(Ve.y+Ve.r,fe)}}function Ts(N){N._pack_next=N._pack_prev=N}function hs(N){delete N._pack_next,delete N._pack_prev}function ii(N,Q,it,dt){var wt=N.children;if(N.x=Q+=dt*N.x,N.y=it+=dt*N.y,N.r*=dt,wt)for(var Et=-1,Bt=wt.length;++Et<Bt;)ii(wt[Et],Q,it,dt)}function Io(N,Q,it){var dt=N.r+it.r,wt=Q.x-N.x,Et=Q.y-N.y;if(dt&&(wt||Et)){var Bt=Q.r+it.r,Ut=wt*wt+Et*Et,Ht=.5+((dt*=dt)-(Bt*=Bt))/(2*Ut),qt=Math.sqrt(Math.max(0,2*Bt*(dt+Ut)-(dt-=Ut)*dt-Bt*Bt))/(2*Ut);it.x=N.x+Ht*wt+qt*Et,it.y=N.y+Ht*Et-qt*wt}else it.x=N.x+dt,it.y=N.y}function go(N,Q){return N.parent==Q.parent?1:2}function Vi(N){var Q=N.children;return Q.length?Q[0]:N.t}function Hn(N){var Q,it=N.children;return(Q=it.length)?it[Q-1]:N.t}function Yn(N,Q,it){var dt=it/(Q.i-N.i);Q.c-=dt,Q.s+=it,N.c+=dt,Q.z+=it,Q.m+=it}function Oo(N,Q,it){return N.a.parent===Q.parent?N.a:it}function mo(N){var Q=N.children;return Q&&Q.length?mo(Q[0]):N}function el(N){var Q,it=N.children;return it&&(Q=it.length)?el(it[Q-1]):N}function Ms(N){return{x:N.x,y:N.y,dx:N.dx,dy:N.dy}}function Ro(N,Q){var it=N.x+Q[3],dt=N.y+Q[0],wt=N.dx-Q[1]-Q[3],Et=N.dy-Q[0]-Q[2];return wt<0&&(it+=wt/2,wt=0),Et<0&&(dt+=Et/2,Et=0),{x:it,y:dt,dx:wt,dy:Et}}function As(N){var Q=N[0],it=N[N.length-1];return Q<it?[Q,it]:[it,Q]}function vo(N){return N.rangeExtent?N.rangeExtent():As(N.range())}function Ko(N,Q,it,dt){var wt=it(N[0],N[1]),Et=dt(Q[0],Q[1]);return function(Bt){return Et(wt(Bt))}}function Po(N,Q){var it,dt=0,wt=N.length-1,Et=N[dt],Bt=N[wt];return Bt<Et&&(it=dt,dt=wt,wt=it,it=Et,Et=Bt,Bt=it),N[dt]=Q.floor(Et),N[wt]=Q.ceil(Bt),N}function xi(N){return N?{floor:function(Q){return Math.floor(Q/N)*N},ceil:function(Q){return Math.ceil(Q/N)*N}}:Jo}r.layout.histogram=function(){var N=!0,Q=Number,it=So,dt=bl;function wt(Et,Bt){for(var Ut,Ht,qt=[],Jt=Et.map(Q,this),le=it.call(this,Jt,Bt),fe=dt.call(this,le,Jt,Bt),Le=(Bt=-1,Jt.length),Se=fe.length-1,Ce=N?1:1/Le;++Bt<Se;)(Ut=qt[Bt]=[]).dx=fe[Bt+1]-(Ut.x=fe[Bt]),Ut.y=0;if(Se>0)for(Bt=-1;++Bt<Le;)(Ht=Jt[Bt])>=le[0]&&Ht<=le[1]&&((Ut=qt[r.bisect(fe,Ht,1,Se)-1]).y+=Ce,Ut.push(Et[Bt]));return qt}return wt.value=function(Et){return arguments.length?(Q=Et,wt):Q},wt.range=function(Et){return arguments.length?(it=Sr(Et),wt):it},wt.bins=function(Et){return arguments.length?(dt=typeof Et=="number"?function(Bt){return js(Bt,Et)}:Sr(Et),wt):dt},wt.frequency=function(Et){return arguments.length?(N=!!Et,wt):N},wt},r.layout.pack=function(){var N,Q=r.layout.hierarchy().sort(Us),it=0,dt=[1,1];function wt(Et,Bt){var Ut=Q.call(this,Et,Bt),Ht=Ut[0],qt=dt[0],Jt=dt[1],le=N==null?Math.sqrt:typeof N=="function"?N:function(){return N};if(Ht.x=Ht.y=0,Oa(Ht,function(Le){Le.r=+le(Le.value)}),Oa(Ht,Xo),it){var fe=it*(N?1:Math.max(2*Ht.r/qt,2*Ht.r/Jt))/2;Oa(Ht,function(Le){Le.r+=fe}),Oa(Ht,Xo),Oa(Ht,function(Le){Le.r-=fe})}return ii(Ht,qt/2,Jt/2,N?1:1/Math.max(2*Ht.r/qt,2*Ht.r/Jt)),Ut}return wt.size=function(Et){return arguments.length?(dt=Et,wt):dt},wt.radius=function(Et){return arguments.length?(N=Et==null||typeof Et=="function"?Et:+Et,wt):N},wt.padding=function(Et){return arguments.length?(it=+Et,wt):it},Ua(wt,Q)},r.layout.tree=function(){var N=r.layout.hierarchy().sort(null).value(null),Q=go,it=[1,1],dt=null;function wt(Ht,qt){var Jt=N.call(this,Ht,qt),le=Jt[0],fe=function(Ye){for(var Ve,dr={A:null,children:[Ye]},vr=[dr];(Ve=vr.pop())!=null;)for(var Fr,zr=Ve.children,$r=0,Zr=zr.length;$r<Zr;++$r)vr.push((zr[$r]=Fr={_:zr[$r],parent:Ve,children:(Fr=zr[$r].children)&&Fr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:$r}).a=Fr);return dr.children[0]}(le);if(Oa(fe,Et),fe.parent.m=-fe.z,_s(fe,Bt),dt)_s(le,Ut);else{var Le=le,Se=le,Ce=le;_s(le,function(Ye){Ye.x<Le.x&&(Le=Ye),Ye.x>Se.x&&(Se=Ye),Ye.depth>Ce.depth&&(Ce=Ye)});var Ne=Q(Le,Se)/2-Le.x,Ee=it[0]/(Se.x+Q(Se,Le)/2+Ne),rr=it[1]/(Ce.depth||1);_s(le,function(Ye){Ye.x=(Ye.x+Ne)*Ee,Ye.y=Ye.depth*rr})}return Jt}function Et(Ht){var qt=Ht.children,Jt=Ht.parent.children,le=Ht.i?Jt[Ht.i-1]:null;if(qt.length){(function(Le){for(var Se,Ce=0,Ne=0,Ee=Le.children,rr=Ee.length;--rr>=0;)(Se=Ee[rr]).z+=Ce,Se.m+=Ce,Ce+=Se.s+(Ne+=Se.c)})(Ht);var fe=(qt[0].z+qt[qt.length-1].z)/2;le?(Ht.z=le.z+Q(Ht._,le._),Ht.m=Ht.z-fe):Ht.z=fe}else le&&(Ht.z=le.z+Q(Ht._,le._));Ht.parent.A=function(Le,Se,Ce){if(Se){for(var Ne,Ee=Le,rr=Le,Ye=Se,Ve=Ee.parent.children[0],dr=Ee.m,vr=rr.m,Fr=Ye.m,zr=Ve.m;Ye=Hn(Ye),Ee=Vi(Ee),Ye&&Ee;)Ve=Vi(Ve),(rr=Hn(rr)).a=Le,(Ne=Ye.z+Fr-Ee.z-dr+Q(Ye._,Ee._))>0&&(Yn(Oo(Ye,Le,Ce),Le,Ne),dr+=Ne,vr+=Ne),Fr+=Ye.m,dr+=Ee.m,zr+=Ve.m,vr+=rr.m;Ye&&!Hn(rr)&&(rr.t=Ye,rr.m+=Fr-vr),Ee&&!Vi(Ve)&&(Ve.t=Ee,Ve.m+=dr-zr,Ce=Le)}return Ce}(Ht,le,Ht.parent.A||Jt[0])}function Bt(Ht){Ht._.x=Ht.z+Ht.parent.m,Ht.m+=Ht.parent.m}function Ut(Ht){Ht.x*=it[0],Ht.y=Ht.depth*it[1]}return wt.separation=function(Ht){return arguments.length?(Q=Ht,wt):Q},wt.size=function(Ht){return arguments.length?(dt=(it=Ht)==null?Ut:null,wt):dt?null:it},wt.nodeSize=function(Ht){return arguments.length?(dt=(it=Ht)==null?null:Ut,wt):dt?it:null},Ua(wt,N)},r.layout.cluster=function(){var N=r.layout.hierarchy().sort(null).value(null),Q=go,it=[1,1],dt=!1;function wt(Et,Bt){var Ut,Ht=N.call(this,Et,Bt),qt=Ht[0],Jt=0;Oa(qt,function(Ce){var Ne=Ce.children;Ne&&Ne.length?(Ce.x=function(Ee){return Ee.reduce(function(rr,Ye){return rr+Ye.x},0)/Ee.length}(Ne),Ce.y=function(Ee){return 1+r.max(Ee,function(rr){return rr.y})}(Ne)):(Ce.x=Ut?Jt+=Q(Ce,Ut):0,Ce.y=0,Ut=Ce)});var le=mo(qt),fe=el(qt),Le=le.x-Q(le,fe)/2,Se=fe.x+Q(fe,le)/2;return Oa(qt,dt?function(Ce){Ce.x=(Ce.x-qt.x)*it[0],Ce.y=(qt.y-Ce.y)*it[1]}:function(Ce){Ce.x=(Ce.x-Le)/(Se-Le)*it[0],Ce.y=(1-(qt.y?Ce.y/qt.y:1))*it[1]}),Ht}return wt.separation=function(Et){return arguments.length?(Q=Et,wt):Q},wt.size=function(Et){return arguments.length?(dt=(it=Et)==null,wt):dt?null:it},wt.nodeSize=function(Et){return arguments.length?(dt=(it=Et)!=null,wt):dt?it:null},Ua(wt,N)},r.layout.treemap=function(){var N,Q=r.layout.hierarchy(),it=Math.round,dt=[1,1],wt=null,Et=Ms,Bt=!1,Ut="squarify",Ht=.5*(1+Math.sqrt(5));function qt(Ce,Ne){for(var Ee,rr,Ye=-1,Ve=Ce.length;++Ye<Ve;)rr=(Ee=Ce[Ye]).value*(Ne<0?0:Ne),Ee.area=isNaN(rr)||rr<=0?0:rr}function Jt(Ce){var Ne=Ce.children;if(Ne&&Ne.length){var Ee,rr,Ye,Ve=Et(Ce),dr=[],vr=Ne.slice(),Fr=1/0,zr=Ut==="slice"?Ve.dx:Ut==="dice"?Ve.dy:Ut==="slice-dice"?1&Ce.depth?Ve.dy:Ve.dx:Math.min(Ve.dx,Ve.dy);for(qt(vr,Ve.dx*Ve.dy/Ce.value),dr.area=0;(Ye=vr.length)>0;)dr.push(Ee=vr[Ye-1]),dr.area+=Ee.area,Ut!=="squarify"||(rr=fe(dr,zr))<=Fr?(vr.pop(),Fr=rr):(dr.area-=dr.pop().area,Le(dr,zr,Ve,!1),zr=Math.min(Ve.dx,Ve.dy),dr.length=dr.area=0,Fr=1/0);dr.length&&(Le(dr,zr,Ve,!0),dr.length=dr.area=0),Ne.forEach(Jt)}}function le(Ce){var Ne=Ce.children;if(Ne&&Ne.length){var Ee,rr=Et(Ce),Ye=Ne.slice(),Ve=[];for(qt(Ye,rr.dx*rr.dy/Ce.value),Ve.area=0;Ee=Ye.pop();)Ve.push(Ee),Ve.area+=Ee.area,Ee.z!=null&&(Le(Ve,Ee.z?rr.dx:rr.dy,rr,!Ye.length),Ve.length=Ve.area=0);Ne.forEach(le)}}function fe(Ce,Ne){for(var Ee,rr=Ce.area,Ye=0,Ve=1/0,dr=-1,vr=Ce.length;++dr<vr;)(Ee=Ce[dr].area)&&(Ee<Ve&&(Ve=Ee),Ee>Ye&&(Ye=Ee));return Ne*=Ne,(rr*=rr)?Math.max(Ne*Ye*Ht/rr,rr/(Ne*Ve*Ht)):1/0}function Le(Ce,Ne,Ee,rr){var Ye,Ve=-1,dr=Ce.length,vr=Ee.x,Fr=Ee.y,zr=Ne?it(Ce.area/Ne):0;if(Ne==Ee.dx){for((rr||zr>Ee.dy)&&(zr=Ee.dy);++Ve<dr;)(Ye=Ce[Ve]).x=vr,Ye.y=Fr,Ye.dy=zr,vr+=Ye.dx=Math.min(Ee.x+Ee.dx-vr,zr?it(Ye.area/zr):0);Ye.z=!0,Ye.dx+=Ee.x+Ee.dx-vr,Ee.y+=zr,Ee.dy-=zr}else{for((rr||zr>Ee.dx)&&(zr=Ee.dx);++Ve<dr;)(Ye=Ce[Ve]).x=vr,Ye.y=Fr,Ye.dx=zr,Fr+=Ye.dy=Math.min(Ee.y+Ee.dy-Fr,zr?it(Ye.area/zr):0);Ye.z=!1,Ye.dy+=Ee.y+Ee.dy-Fr,Ee.x+=zr,Ee.dx-=zr}}function Se(Ce){var Ne=N||Q(Ce),Ee=Ne[0];return Ee.x=Ee.y=0,Ee.value?(Ee.dx=dt[0],Ee.dy=dt[1]):Ee.dx=Ee.dy=0,N&&Q.revalue(Ee),qt([Ee],Ee.dx*Ee.dy/Ee.value),(N?le:Jt)(Ee),Bt&&(N=Ne),Ne}return Se.size=function(Ce){return arguments.length?(dt=Ce,Se):dt},Se.padding=function(Ce){if(!arguments.length)return wt;function Ne(rr){return Ro(rr,Ce)}var Ee;return Et=(wt=Ce)==null?Ms:(Ee=typeof Ce)=="function"?function(rr){var Ye=Ce.call(Se,rr,rr.depth);return Ye==null?Ms(rr):Ro(rr,typeof Ye=="number"?[Ye,Ye,Ye,Ye]:Ye)}:(Ee==="number"&&(Ce=[Ce,Ce,Ce,Ce]),Ne),Se},Se.round=function(Ce){return arguments.length?(it=Ce?Math.round:Number,Se):it!=Number},Se.sticky=function(Ce){return arguments.length?(Bt=Ce,N=null,Se):Bt},Se.ratio=function(Ce){return arguments.length?(Ht=Ce,Se):Ht},Se.mode=function(Ce){return arguments.length?(Ut=Ce+"",Se):Ut},Ua(Se,Q)},r.random={normal:function(N,Q){var it=arguments.length;return it<2&&(Q=1),it<1&&(N=0),function(){var dt,wt,Et;do Et=(dt=2*Math.random()-1)*dt+(wt=2*Math.random()-1)*wt;while(!Et||Et>1);return N+Q*dt*Math.sqrt(-2*Math.log(Et)/Et)}},logNormal:function(){var N=r.random.normal.apply(r,arguments);return function(){return Math.exp(N())}},bates:function(N){var Q=r.random.irwinHall(N);return function(){return Q()/N}},irwinHall:function(N){return function(){for(var Q=0,it=0;it<N;it++)Q+=Math.random();return Q}}},r.scale={};var Jo={floor:R,ceil:R};function Qo(N,Q,it,dt){var wt=[],Et=[],Bt=0,Ut=Math.min(N.length,Q.length)-1;for(N[Ut]<N[0]&&(N=N.slice().reverse(),Q=Q.slice().reverse());++Bt<=Ut;)wt.push(it(N[Bt-1],N[Bt])),Et.push(dt(Q[Bt-1],Q[Bt]));return function(Ht){var qt=r.bisect(N,Ht,1,Ut)-1;return Et[qt](wt[qt](Ht))}}function Fi(N,Q,it,dt){var wt,Et;function Bt(){var Ht=Math.min(N.length,Q.length)>2?Qo:Ko,qt=dt?ls:Wo;return wt=Ht(N,Q,qt,it),Et=Ht(Q,N,qt,Ja),Ut}function Ut(Ht){return wt(Ht)}return Ut.invert=function(Ht){return Et(Ht)},Ut.domain=function(Ht){return arguments.length?(N=Ht.map(Number),Bt()):N},Ut.range=function(Ht){return arguments.length?(Q=Ht,Bt()):Q},Ut.rangeRound=function(Ht){return Ut.range(Ht).interpolate(fl)},Ut.clamp=function(Ht){return arguments.length?(dt=Ht,Bt()):dt},Ut.interpolate=function(Ht){return arguments.length?(it=Ht,Bt()):it},Ut.ticks=function(Ht){return ca(N,Ht)},Ut.tickFormat=function(Ht,qt){return d3_scale_linearTickFormat(N,Ht,qt)},Ut.nice=function(Ht){return Ji(N,Ht),Bt()},Ut.copy=function(){return Fi(N,Q,it,dt)},Bt()}function ra(N,Q){return r.rebind(N,Q,"range","rangeRound","interpolate","clamp")}function Ji(N,Q){return Po(N,xi(zi(N,Q)[2])),Po(N,xi(zi(N,Q)[2])),N}function zi(N,Q){Q==null&&(Q=10);var it=As(N),dt=it[1]-it[0],wt=Math.pow(10,Math.floor(Math.log(dt/Q)/Math.LN10)),Et=Q/dt*wt;return Et<=.15?wt*=10:Et<=.35?wt*=5:Et<=.75&&(wt*=2),it[0]=Math.ceil(it[0]/wt)*wt,it[1]=Math.floor(it[1]/wt)*wt+.5*wt,it[2]=wt,it}function ca(N,Q){return r.range.apply(r,zi(N,Q))}function Do(N,Q,it,dt){function wt(Ut){return(it?Math.log(Ut<0?0:Ut):-Math.log(Ut>0?0:-Ut))/Math.log(Q)}function Et(Ut){return it?Math.pow(Q,Ut):-Math.pow(Q,-Ut)}function Bt(Ut){return N(wt(Ut))}return Bt.invert=function(Ut){return Et(N.invert(Ut))},Bt.domain=function(Ut){return arguments.length?(it=Ut[0]>=0,N.domain((dt=Ut.map(Number)).map(wt)),Bt):dt},Bt.base=function(Ut){return arguments.length?(Q=+Ut,N.domain(dt.map(wt)),Bt):Q},Bt.nice=function(){var Ut=Po(dt.map(wt),it?Math:$a);return N.domain(Ut),dt=Ut.map(Et),Bt},Bt.ticks=function(){var Ut=As(dt),Ht=[],qt=Ut[0],Jt=Ut[1],le=Math.floor(wt(qt)),fe=Math.ceil(wt(Jt)),Le=Q%1?2:Q;if(isFinite(fe-le)){if(it){for(;le<fe;le++)for(var Se=1;Se<Le;Se++)Ht.push(Et(le)*Se);Ht.push(Et(le))}else for(Ht.push(Et(le));le++<fe;)for(Se=Le-1;Se>0;Se--)Ht.push(Et(le)*Se);for(le=0;Ht[le]<qt;le++);for(fe=Ht.length;Ht[fe-1]>Jt;fe--);Ht=Ht.slice(le,fe)}return Ht},Bt.copy=function(){return Do(N.copy(),Q,it,dt)},ra(Bt,N)}r.scale.linear=function(){return Fi([0,1],[0,1],Ja,!1)},r.scale.log=function(){return Do(r.scale.linear().domain([0,1]),10,!0,[1,10])};var $a={floor:function(N){return-Math.ceil(-N)},ceil:function(N){return-Math.floor(-N)}};function Wi(N,Q,it){var dt=Ca(Q),wt=Ca(1/Q);function Et(Bt){return N(dt(Bt))}return Et.invert=function(Bt){return wt(N.invert(Bt))},Et.domain=function(Bt){return arguments.length?(N.domain((it=Bt.map(Number)).map(dt)),Et):it},Et.ticks=function(Bt){return ca(it,Bt)},Et.tickFormat=function(Bt,Ut){return d3_scale_linearTickFormat(it,Bt,Ut)},Et.nice=function(Bt){return Et.domain(Ji(it,Bt))},Et.exponent=function(Bt){return arguments.length?(dt=Ca(Q=Bt),wt=Ca(1/Q),N.domain(it.map(dt)),Et):Q},Et.copy=function(){return Wi(N.copy(),Q,it)},ra(Et,N)}function Ca(N){return function(Q){return Q<0?-Math.pow(-Q,N):Math.pow(Q,N)}}function Ra(N,Q){var it,dt,wt;function Et(Ut){return dt[((it.get(Ut)||(Q.t==="range"?it.set(Ut,N.push(Ut)):NaN))-1)%dt.length]}function Bt(Ut,Ht){return r.range(N.length).map(function(qt){return Ut+Ht*qt})}return Et.domain=function(Ut){if(!arguments.length)return N;N=[],it=new x;for(var Ht,qt=-1,Jt=Ut.length;++qt<Jt;)it.has(Ht=Ut[qt])||it.set(Ht,N.push(Ht));return Et[Q.t].apply(Et,Q.a)},Et.range=function(Ut){return arguments.length?(dt=Ut,wt=0,Q={t:"range",a:arguments},Et):dt},Et.rangePoints=function(Ut,Ht){arguments.length<2&&(Ht=0);var qt=Ut[0],Jt=Ut[1],le=N.length<2?(qt=(qt+Jt)/2,0):(Jt-qt)/(N.length-1+Ht);return dt=Bt(qt+le*Ht/2,le),wt=0,Q={t:"rangePoints",a:arguments},Et},Et.rangeRoundPoints=function(Ut,Ht){arguments.length<2&&(Ht=0);var qt=Ut[0],Jt=Ut[1],le=N.length<2?(qt=Jt=Math.round((qt+Jt)/2),0):(Jt-qt)/(N.length-1+Ht)|0;return dt=Bt(qt+Math.round(le*Ht/2+(Jt-qt-(N.length-1+Ht)*le)/2),le),wt=0,Q={t:"rangeRoundPoints",a:arguments},Et},Et.rangeBands=function(Ut,Ht,qt){arguments.length<2&&(Ht=0),arguments.length<3&&(qt=Ht);var Jt=Ut[1]<Ut[0],le=Ut[Jt-0],fe=(Ut[1-Jt]-le)/(N.length-Ht+2*qt);return dt=Bt(le+fe*qt,fe),Jt&&dt.reverse(),wt=fe*(1-Ht),Q={t:"rangeBands",a:arguments},Et},Et.rangeRoundBands=function(Ut,Ht,qt){arguments.length<2&&(Ht=0),arguments.length<3&&(qt=Ht);var Jt=Ut[1]<Ut[0],le=Ut[Jt-0],fe=Ut[1-Jt],Le=Math.floor((fe-le)/(N.length-Ht+2*qt));return dt=Bt(le+Math.round((fe-le-(N.length-Ht)*Le)/2),Le),Jt&&dt.reverse(),wt=Math.round(Le*(1-Ht)),Q={t:"rangeRoundBands",a:arguments},Et},Et.rangeBand=function(){return wt},Et.rangeExtent=function(){return As(Q.a[0])},Et.copy=function(){return Ra(N,Q)},Et.domain(N)}r.scale.pow=function(){return Wi(r.scale.linear(),1,[0,1])},r.scale.sqrt=function(){return r.scale.pow().exponent(.5)},r.scale.ordinal=function(){return Ra([],{t:"range",a:[[]]})},r.scale.category10=function(){return r.scale.ordinal().range(Gs)},r.scale.category20=function(){return r.scale.ordinal().range(Pa)},r.scale.category20b=function(){return r.scale.ordinal().range(qi)},r.scale.category20c=function(){return r.scale.ordinal().range(wn)};var Gs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map($e),Pa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map($e),qi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map($e),wn=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map($e);function na(N,Q){var it;function dt(){var Et=0,Bt=Q.length;for(it=[];++Et<Bt;)it[Et-1]=r.quantile(N,Et/Bt);return wt}function wt(Et){if(!isNaN(Et=+Et))return Q[r.bisect(it,Et)]}return wt.domain=function(Et){return arguments.length?(N=Et.map(f).filter(d).sort(u),dt()):N},wt.range=function(Et){return arguments.length?(Q=Et,dt()):Q},wt.quantiles=function(){return it},wt.invertExtent=function(Et){return(Et=Q.indexOf(Et))<0?[NaN,NaN]:[Et>0?it[Et-1]:N[0],Et<it.length?it[Et]:N[N.length-1]]},wt.copy=function(){return na(N,Q)},dt()}function Cs(N,Q,it){var dt,wt;function Et(Ut){return it[Math.max(0,Math.min(wt,Math.floor(dt*(Ut-N))))]}function Bt(){return dt=it.length/(Q-N),wt=it.length-1,Et}return Et.domain=function(Ut){return arguments.length?(N=+Ut[0],Q=+Ut[Ut.length-1],Bt()):[N,Q]},Et.range=function(Ut){return arguments.length?(it=Ut,Bt()):it},Et.invertExtent=function(Ut){return[Ut=(Ut=it.indexOf(Ut))<0?NaN:Ut/dt+N,Ut+1/dt]},Et.copy=function(){return Cs(N,Q,it)},Bt()}function $s(N,Q){function it(dt){if(dt<=dt)return Q[r.bisect(N,dt)]}return it.domain=function(dt){return arguments.length?(N=dt,it):N},it.range=function(dt){return arguments.length?(Q=dt,it):Q},it.invertExtent=function(dt){return dt=Q.indexOf(dt),[N[dt-1],N[dt]]},it.copy=function(){return $s(N,Q)},it}function ts(N){function Q(it){return+it}return Q.invert=Q,Q.domain=Q.range=function(it){return arguments.length?(N=it.map(Q),Q):N},Q.ticks=function(it){return ca(N,it)},Q.tickFormat=function(it,dt){return d3_scale_linearTickFormat(N,it,dt)},Q.copy=function(){return ts(N)},Q}function es(){return 0}r.scale.quantile=function(){return na([],[])},r.scale.quantize=function(){return Cs(0,1,[0,1])},r.scale.threshold=function(){return $s([.5],[0,1])},r.scale.identity=function(){return ts([0,1])},r.svg={},r.svg.arc=function(){var N=xn,Q=Ha,it=es,dt=yo,wt=fs,Et=Ls,Bt=ia;function Ut(){var qt=Math.max(0,+N.apply(this,arguments)),Jt=Math.max(0,+Q.apply(this,arguments)),le=wt.apply(this,arguments)-Vt,fe=Et.apply(this,arguments)-Vt,Le=Math.abs(fe-le),Se=le>fe?0:1;if(Jt<qt&&(Ce=Jt,Jt=qt,qt=Ce),Le>=Te)return Ht(Jt,Se)+(qt?Ht(qt,1-Se):"")+"Z";var Ce,Ne,Ee,rr,Ye,Ve,dr,vr,Fr,zr,$r,Zr,cn=0,ln=0,pn=[];if((rr=(+Bt.apply(this,arguments)||0)/2)&&(Ee=dt===yo?Math.sqrt(qt*qt+Jt*Jt):+dt.apply(this,arguments),Se||(ln*=-1),Jt&&(ln=Yt(Ee/Jt*Math.sin(rr))),qt&&(cn=Yt(Ee/qt*Math.sin(rr)))),Jt){Ye=Jt*Math.cos(le+ln),Ve=Jt*Math.sin(le+ln),dr=Jt*Math.cos(fe-ln),vr=Jt*Math.sin(fe-ln);var bn=Math.abs(fe-le-2*ln)<=Ae?0:1;if(ln&&Va(Ye,Ve,dr,vr)===Se^bn){var On=(le+fe)/2;Ye=Jt*Math.cos(On),Ve=Jt*Math.sin(On),dr=vr=null}}else Ye=Ve=0;if(qt){Fr=qt*Math.cos(fe-cn),zr=qt*Math.sin(fe-cn),$r=qt*Math.cos(le+cn),Zr=qt*Math.sin(le+cn);var Br=Math.abs(le-fe+2*cn)<=Ae?0:1;if(cn&&Va(Fr,zr,$r,Zr)===1-Se^Br){var on=(le+fe)/2;Fr=qt*Math.cos(on),zr=qt*Math.sin(on),$r=Zr=null}}else Fr=zr=0;if(Le>se&&(Ce=Math.min(Math.abs(Jt-qt)/2,+it.apply(this,arguments)))>.001){Ne=qt<Jt^Se?0:1;var dn=Ce,_n=Ce;if(Le<Ae){var En=$r==null?[Fr,zr]:dr==null?[Ye,Ve]:Me([Ye,Ve],[$r,Zr],[dr,vr],[Fr,zr]),Nn=Ye-En[0],$n=Ve-En[1],Kn=dr-En[0],hi=vr-En[1],fi=1/Math.sin(Math.acos((Nn*Kn+$n*hi)/(Math.sqrt(Nn*Nn+$n*$n)*Math.sqrt(Kn*Kn+hi*hi)))/2),Jn=Math.sqrt(En[0]*En[0]+En[1]*En[1]);_n=Math.min(Ce,(qt-Jn)/(fi-1)),dn=Math.min(Ce,(Jt-Jn)/(fi+1))}if(dr!=null){var Ci=Da($r==null?[Fr,zr]:[$r,Zr],[Ye,Ve],Jt,dn,Se),Zi=Da([dr,vr],[Fr,zr],Jt,dn,Se);Ce===dn?pn.push("M",Ci[0],"A",dn,",",dn," 0 0,",Ne," ",Ci[1],"A",Jt,",",Jt," 0 ",1-Se^Va(Ci[1][0],Ci[1][1],Zi[1][0],Zi[1][1]),",",Se," ",Zi[1],"A",dn,",",dn," 0 0,",Ne," ",Zi[0]):pn.push("M",Ci[0],"A",dn,",",dn," 0 1,",Ne," ",Zi[0])}else pn.push("M",Ye,",",Ve);if($r!=null){var Pi=Da([Ye,Ve],[$r,Zr],qt,-_n,Se),Ui=Da([Fr,zr],dr==null?[Ye,Ve]:[dr,vr],qt,-_n,Se);Ce===_n?pn.push("L",Ui[0],"A",_n,",",_n," 0 0,",Ne," ",Ui[1],"A",qt,",",qt," 0 ",Se^Va(Ui[1][0],Ui[1][1],Pi[1][0],Pi[1][1]),",",1-Se," ",Pi[1],"A",_n,",",_n," 0 0,",Ne," ",Pi[0]):pn.push("L",Ui[0],"A",_n,",",_n," 0 0,",Ne," ",Pi[0])}else pn.push("L",Fr,",",zr)}else pn.push("M",Ye,",",Ve),dr!=null&&pn.push("A",Jt,",",Jt," 0 ",bn,",",Se," ",dr,",",vr),pn.push("L",Fr,",",zr),$r!=null&&pn.push("A",qt,",",qt," 0 ",Br,",",1-Se," ",$r,",",Zr);return pn.push("Z"),pn.join("")}function Ht(qt,Jt){return"M0,"+qt+"A"+qt+","+qt+" 0 1,"+Jt+" 0,"+-qt+"A"+qt+","+qt+" 0 1,"+Jt+" 0,"+qt}return Ut.innerRadius=function(qt){return arguments.length?(N=Sr(qt),Ut):N},Ut.outerRadius=function(qt){return arguments.length?(Q=Sr(qt),Ut):Q},Ut.cornerRadius=function(qt){return arguments.length?(it=Sr(qt),Ut):it},Ut.padRadius=function(qt){return arguments.length?(dt=qt==yo?yo:Sr(qt),Ut):dt},Ut.startAngle=function(qt){return arguments.length?(wt=Sr(qt),Ut):wt},Ut.endAngle=function(qt){return arguments.length?(Et=Sr(qt),Ut):Et},Ut.padAngle=function(qt){return arguments.length?(Bt=Sr(qt),Ut):Bt},Ut.centroid=function(){var qt=(+N.apply(this,arguments)+ +Q.apply(this,arguments))/2,Jt=(+wt.apply(this,arguments)+ +Et.apply(this,arguments))/2-Vt;return[Math.cos(Jt)*qt,Math.sin(Jt)*qt]},Ut};var yo="auto";function xn(N){return N.innerRadius}function Ha(N){return N.outerRadius}function fs(N){return N.startAngle}function Ls(N){return N.endAngle}function ia(N){return N&&N.padAngle}function Va(N,Q,it,dt){return(N-it)*Q-(Q-dt)*N>0?0:1}function Da(N,Q,it,dt,wt){var Et=N[0]-Q[0],Bt=N[1]-Q[1],Ut=(wt?dt:-dt)/Math.sqrt(Et*Et+Bt*Bt),Ht=Ut*Bt,qt=-Ut*Et,Jt=N[0]+Ht,le=N[1]+qt,fe=Q[0]+Ht,Le=Q[1]+qt,Se=(Jt+fe)/2,Ce=(le+Le)/2,Ne=fe-Jt,Ee=Le-le,rr=Ne*Ne+Ee*Ee,Ye=it-dt,Ve=Jt*Le-fe*le,dr=(Ee<0?-1:1)*Math.sqrt(Math.max(0,Ye*Ye*rr-Ve*Ve)),vr=(Ve*Ee-Ne*dr)/rr,Fr=(-Ve*Ne-Ee*dr)/rr,zr=(Ve*Ee+Ne*dr)/rr,$r=(-Ve*Ne+Ee*dr)/rr,Zr=vr-Se,cn=Fr-Ce,ln=zr-Se,pn=$r-Ce;return Zr*Zr+cn*cn>ln*ln+pn*pn&&(vr=zr,Fr=$r),[[vr-Ht,Fr-qt],[vr*it/Ye,Fr*it/Ye]]}function La(){return!0}function eo(N){var Q=Hr,it=Pr,dt=La,wt=Ni,Et=wt.key,Bt=.7;function Ut(Ht){var qt,Jt=[],le=[],fe=-1,Le=Ht.length,Se=Sr(Q),Ce=Sr(it);function Ne(){Jt.push("M",wt(N(le),Bt))}for(;++fe<Le;)dt.call(this,qt=Ht[fe],fe)?le.push([+Se.call(this,qt,fe),+Ce.call(this,qt,fe)]):le.length&&(Ne(),le=[]);return le.length&&Ne(),Jt.length?Jt.join(""):null}return Ut.x=function(Ht){return arguments.length?(Q=Ht,Ut):Q},Ut.y=function(Ht){return arguments.length?(it=Ht,Ut):it},Ut.defined=function(Ht){return arguments.length?(dt=Ht,Ut):dt},Ut.interpolate=function(Ht){return arguments.length?(Et=typeof Ht=="function"?wt=Ht:(wt=xo.get(Ht)||Ni).key,Ut):Et},Ut.tension=function(Ht){return arguments.length?(Bt=Ht,Ut):Bt},Ut}r.svg.line=function(){return eo(R)};var xo=r.map({linear:Ni,"linear-closed":rs,step:function(N){for(var Q=0,it=N.length,dt=N[0],wt=[dt[0],",",dt[1]];++Q<it;)wt.push("H",(dt[0]+(dt=N[Q])[0])/2,"V",dt[1]);return it>1&&wt.push("H",dt[0]),wt.join("")},"step-before":ps,"step-after":Yi,basis:xa,"basis-open":function(N){if(N.length<4)return Ni(N);for(var Q,it=[],dt=-1,wt=N.length,Et=[0],Bt=[0];++dt<3;)Q=N[dt],Et.push(Q[0]),Bt.push(Q[1]);for(it.push(Bi(Ai,Et)+","+Bi(Ai,Bt)),--dt;++dt<wt;)Q=N[dt],Et.shift(),Et.push(Q[0]),Bt.shift(),Bt.push(Q[1]),ti(it,Et,Bt);return it.join("")},"basis-closed":function(N){for(var Q,it,dt=-1,wt=N.length,Et=wt+4,Bt=[],Ut=[];++dt<4;)it=N[dt%wt],Bt.push(it[0]),Ut.push(it[1]);for(Q=[Bi(Ai,Bt),",",Bi(Ai,Ut)],--dt;++dt<Et;)it=N[dt%wt],Bt.shift(),Bt.push(it[0]),Ut.shift(),Ut.push(it[1]),ti(Q,Bt,Ut);return Q.join("")},bundle:function(N,Q){var it=N.length-1;if(it)for(var dt,wt,Et=N[0][0],Bt=N[0][1],Ut=N[it][0]-Et,Ht=N[it][1]-Bt,qt=-1;++qt<=it;)wt=qt/it,(dt=N[qt])[0]=Q*dt[0]+(1-Q)*(Et+wt*Ut),dt[1]=Q*dt[1]+(1-Q)*(Bt+wt*Ht);return xa(N)},cardinal:function(N,Q){return N.length<3?Ni(N):N[0]+ai(N,Es(N,Q))},"cardinal-open":function(N,Q){return N.length<4?Ni(N):N[1]+ai(N.slice(1,-1),Es(N,Q))},"cardinal-closed":function(N,Q){return N.length<3?rs(N):N[0]+ai((N.push(N[0]),N),Es([N[N.length-2]].concat(N,[N[1]]),Q))},monotone:function(N){return N.length<3?Ni(N):N[0]+ai(N,function(Q){for(var it,dt,wt,Et,Bt=[],Ut=function(Jt){for(var le=0,fe=Jt.length-1,Le=[],Se=Jt[0],Ce=Jt[1],Ne=Le[0]=Ea(Se,Ce);++le<fe;)Le[le]=(Ne+(Ne=Ea(Se=Ce,Ce=Jt[le+1])))/2;return Le[le]=Ne,Le}(Q),Ht=-1,qt=Q.length-1;++Ht<qt;)it=Ea(Q[Ht],Q[Ht+1]),y(it)<se?Ut[Ht]=Ut[Ht+1]=0:(Et=(dt=Ut[Ht]/it)*dt+(wt=Ut[Ht+1]/it)*wt)>9&&(Et=3*it/Math.sqrt(Et),Ut[Ht]=Et*dt,Ut[Ht+1]=Et*wt);for(Ht=-1;++Ht<=qt;)Et=(Q[Math.min(qt,Ht+1)][0]-Q[Math.max(0,Ht-1)][0])/(6*(1+Ut[Ht]*Ut[Ht])),Bt.push([Et||0,Ut[Ht]*Et||0]);return Bt}(N))}});function Ni(N){return N.length>1?N.join("L"):N+"Z"}function rs(N){return N.join("L")+"Z"}function ps(N){for(var Q=0,it=N.length,dt=N[0],wt=[dt[0],",",dt[1]];++Q<it;)wt.push("V",(dt=N[Q])[1],"H",dt[0]);return wt.join("")}function Yi(N){for(var Q=0,it=N.length,dt=N[0],wt=[dt[0],",",dt[1]];++Q<it;)wt.push("H",(dt=N[Q])[0],"V",dt[1]);return wt.join("")}function ai(N,Q){if(Q.length<1||N.length!=Q.length&&N.length!=Q.length+2)return Ni(N);var it=N.length!=Q.length,dt="",wt=N[0],Et=N[1],Bt=Q[0],Ut=Bt,Ht=1;if(it&&(dt+="Q"+(Et[0]-2*Bt[0]/3)+","+(Et[1]-2*Bt[1]/3)+","+Et[0]+","+Et[1],wt=N[1],Ht=2),Q.length>1){Ut=Q[1],Et=N[Ht],Ht++,dt+="C"+(wt[0]+Bt[0])+","+(wt[1]+Bt[1])+","+(Et[0]-Ut[0])+","+(Et[1]-Ut[1])+","+Et[0]+","+Et[1];for(var qt=2;qt<Q.length;qt++,Ht++)Et=N[Ht],Ut=Q[qt],dt+="S"+(Et[0]-Ut[0])+","+(Et[1]-Ut[1])+","+Et[0]+","+Et[1]}if(it){var Jt=N[Ht];dt+="Q"+(Et[0]+2*Ut[0]/3)+","+(Et[1]+2*Ut[1]/3)+","+Jt[0]+","+Jt[1]}return dt}function Es(N,Q){for(var it,dt=[],wt=(1-Q)/2,Et=N[0],Bt=N[1],Ut=1,Ht=N.length;++Ut<Ht;)it=Et,Et=Bt,Bt=N[Ut],dt.push([wt*(Bt[0]-it[0]),wt*(Bt[1]-it[1])]);return dt}function xa(N){if(N.length<3)return Ni(N);var Q=1,it=N.length,dt=N[0],wt=dt[0],Et=dt[1],Bt=[wt,wt,wt,(dt=N[1])[0]],Ut=[Et,Et,Et,dt[1]],Ht=[wt,",",Et,"L",Bi(Ai,Bt),",",Bi(Ai,Ut)];for(N.push(N[it-1]);++Q<=it;)dt=N[Q],Bt.shift(),Bt.push(dt[0]),Ut.shift(),Ut.push(dt[1]),ti(Ht,Bt,Ut);return N.pop(),Ht.push("L",dt),Ht.join("")}function Bi(N,Q){return N[0]*Q[0]+N[1]*Q[1]+N[2]*Q[2]+N[3]*Q[3]}xo.forEach(function(N,Q){Q.key=N,Q.closed=/-closed$/.test(N)});var ro=[0,2/3,1/3,0],rl=[0,1/3,2/3,0],Ai=[0,1/6,2/3,1/6];function ti(N,Q,it){N.push("C",Bi(ro,Q),",",Bi(ro,it),",",Bi(rl,Q),",",Bi(rl,it),",",Bi(Ai,Q),",",Bi(Ai,it))}function Ea(N,Q){return(Q[1]-N[1])/(Q[0]-N[0])}function no(N){for(var Q,it,dt,wt=-1,Et=N.length;++wt<Et;)it=(Q=N[wt])[0],dt=Q[1]-Vt,Q[0]=it*Math.cos(dt),Q[1]=it*Math.sin(dt);return N}function Wa(N){var Q=Hr,it=Hr,dt=0,wt=Pr,Et=La,Bt=Ni,Ut=Bt.key,Ht=Bt,qt="L",Jt=.7;function le(fe){var Le,Se,Ce,Ne=[],Ee=[],rr=[],Ye=-1,Ve=fe.length,dr=Sr(Q),vr=Sr(dt),Fr=Q===it?function(){return Se}:Sr(it),zr=dt===wt?function(){return Ce}:Sr(wt);function $r(){Ne.push("M",Bt(N(rr),Jt),qt,Ht(N(Ee.reverse()),Jt),"Z")}for(;++Ye<Ve;)Et.call(this,Le=fe[Ye],Ye)?(Ee.push([Se=+dr.call(this,Le,Ye),Ce=+vr.call(this,Le,Ye)]),rr.push([+Fr.call(this,Le,Ye),+zr.call(this,Le,Ye)])):Ee.length&&($r(),Ee=[],rr=[]);return Ee.length&&$r(),Ne.length?Ne.join(""):null}return le.x=function(fe){return arguments.length?(Q=it=fe,le):it},le.x0=function(fe){return arguments.length?(Q=fe,le):Q},le.x1=function(fe){return arguments.length?(it=fe,le):it},le.y=function(fe){return arguments.length?(dt=wt=fe,le):wt},le.y0=function(fe){return arguments.length?(dt=fe,le):dt},le.y1=function(fe){return arguments.length?(wt=fe,le):wt},le.defined=function(fe){return arguments.length?(Et=fe,le):Et},le.interpolate=function(fe){return arguments.length?(Ut=typeof fe=="function"?Bt=fe:(Bt=xo.get(fe)||Ni).key,Ht=Bt.reverse||Bt,qt=Bt.closed?"M":"L",le):Ut},le.tension=function(fe){return arguments.length?(Jt=fe,le):Jt},le}function Hs(N){return N.source}function Fo(N){return N.target}function ns(N){return N.radius}function Ri(N){return[N.x,N.y]}function Qi(){return 64}function An(){return"circle"}function Ln(N){var Q=Math.sqrt(N/Ae);return"M0,"+Q+"A"+Q+","+Q+" 0 1,1 0,"+-Q+"A"+Q+","+Q+" 0 1,1 0,"+Q+"Z"}r.svg.line.radial=function(){var N=eo(no);return N.radius=N.x,delete N.x,N.angle=N.y,delete N.y,N},ps.reverse=Yi,Yi.reverse=ps,r.svg.area=function(){return Wa(R)},r.svg.area.radial=function(){var N=Wa(no);return N.radius=N.x,delete N.x,N.innerRadius=N.x0,delete N.x0,N.outerRadius=N.x1,delete N.x1,N.angle=N.y,delete N.y,N.startAngle=N.y0,delete N.y0,N.endAngle=N.y1,delete N.y1,N},r.svg.chord=function(){var N=Hs,Q=Fo,it=ns,dt=fs,wt=Ls;function Et(qt,Jt){var le,fe,Le=Bt(this,N,qt,Jt),Se=Bt(this,Q,qt,Jt);return"M"+Le.p0+Ut(Le.r,Le.p1,Le.a1-Le.a0)+(fe=Se,((le=Le).a0==fe.a0&&le.a1==fe.a1?Ht(Le.r,Le.p1,Le.r,Le.p0):Ht(Le.r,Le.p1,Se.r,Se.p0)+Ut(Se.r,Se.p1,Se.a1-Se.a0)+Ht(Se.r,Se.p1,Le.r,Le.p0))+"Z")}function Bt(qt,Jt,le,fe){var Le=Jt.call(qt,le,fe),Se=it.call(qt,Le,fe),Ce=dt.call(qt,Le,fe)-Vt,Ne=wt.call(qt,Le,fe)-Vt;return{r:Se,a0:Ce,a1:Ne,p0:[Se*Math.cos(Ce),Se*Math.sin(Ce)],p1:[Se*Math.cos(Ne),Se*Math.sin(Ne)]}}function Ut(qt,Jt,le){return"A"+qt+","+qt+" 0 "+ +(le>Ae)+",1 "+Jt}function Ht(qt,Jt,le,fe){return"Q 0,0 "+fe}return Et.radius=function(qt){return arguments.length?(it=Sr(qt),Et):it},Et.source=function(qt){return arguments.length?(N=Sr(qt),Et):N},Et.target=function(qt){return arguments.length?(Q=Sr(qt),Et):Q},Et.startAngle=function(qt){return arguments.length?(dt=Sr(qt),Et):dt},Et.endAngle=function(qt){return arguments.length?(wt=Sr(qt),Et):wt},Et},r.svg.diagonal=function(){var N=Hs,Q=Fo,it=Ri;function dt(wt,Et){var Bt=N.call(this,wt,Et),Ut=Q.call(this,wt,Et),Ht=(Bt.y+Ut.y)/2,qt=[Bt,{x:Bt.x,y:Ht},{x:Ut.x,y:Ht},Ut];return"M"+(qt=qt.map(it))[0]+"C"+qt[1]+" "+qt[2]+" "+qt[3]}return dt.source=function(wt){return arguments.length?(N=Sr(wt),dt):N},dt.target=function(wt){return arguments.length?(Q=Sr(wt),dt):Q},dt.projection=function(wt){return arguments.length?(it=wt,dt):it},dt},r.svg.diagonal.radial=function(){var N=r.svg.diagonal(),Q=Ri,it=N.projection;return N.projection=function(dt){return arguments.length?it(function(wt){return function(){var Et=wt.apply(this,arguments),Bt=Et[0],Ut=Et[1]-Vt;return[Bt*Math.cos(Ut),Bt*Math.sin(Ut)]}}(Q=dt)):Q},N},r.svg.symbol=function(){var N=An,Q=Qi;function it(dt,wt){return(ds.get(N.call(this,dt,wt))||Ln)(Q.call(this,dt,wt))}return it.type=function(dt){return arguments.length?(N=Sr(dt),it):N},it.size=function(dt){return arguments.length?(Q=Sr(dt),it):Q},it};var ds=r.map({circle:Ln,cross:function(N){var Q=Math.sqrt(N/5)/2;return"M"+-3*Q+","+-Q+"H"+-Q+"V"+-3*Q+"H"+Q+"V"+-Q+"H"+3*Q+"V"+Q+"H"+Q+"V"+3*Q+"H"+-Q+"V"+Q+"H"+-3*Q+"Z"},diamond:function(N){var Q=Math.sqrt(N/(2*zo)),it=Q*zo;return"M0,"+-Q+"L"+it+",0 0,"+Q+" "+-it+",0Z"},square:function(N){var Q=Math.sqrt(N)/2;return"M"+-Q+","+-Q+"L"+Q+","+-Q+" "+Q+","+Q+" "+-Q+","+Q+"Z"},"triangle-down":function(N){var Q=Math.sqrt(N/ua),it=Q*ua/2;return"M0,"+it+"L"+Q+","+-it+" "+-Q+","+-it+"Z"},"triangle-up":function(N){var Q=Math.sqrt(N/ua),it=Q*ua/2;return"M0,"+-it+"L"+Q+","+it+" "+-Q+","+it+"Z"}});r.svg.symbolTypes=ds.keys();var ua=Math.sqrt(3),zo=Math.tan(30*Zt);pt.transition=function(N){for(var Q,it,dt=No||++ji,wt=is(N),Et=[],Bt=Bo||{time:Date.now(),ease:co,delay:0,duration:250},Ut=-1,Ht=this.length;++Ut<Ht;){Et.push(Q=[]);for(var qt=this[Ut],Jt=-1,le=qt.length;++Jt<le;)(it=qt[Jt])&&ms(it,Jt,wt,dt,Bt),Q.push(it)}return ea(Et,wt,dt)},pt.interrupt=function(N){return this.each(N==null?ta:gs(is(N)))};var ta=gs(is());function gs(N){return function(){var Q,it,dt;(Q=this[N])&&(dt=Q[it=Q.active])&&(dt.timer.c=null,dt.timer.t=NaN,--Q.count?delete Q[it]:delete this[N],Q.active+=.5,dt.event&&dt.event.interrupt.call(this,this.__data__,dt.index))}}function ea(N,Q,it){return tt(N,Pn),N.namespace=Q,N.id=it,N}var No,Bo,Pn=[],ji=0;function io(N,Q,it,dt){var wt=N.id,Et=N.namespace;return bt(N,typeof it=="function"?function(Bt,Ut,Ht){Bt[Et][wt].tween.set(Q,dt(it.call(Bt,Bt.__data__,Ut,Ht)))}:(it=dt(it),function(Bt){Bt[Et][wt].tween.set(Q,it)}))}function ba(N){return N==null&&(N=""),function(){this.textContent=N}}function is(N){return N==null?"__transition__":"__transition_"+N+"__"}function ms(N,Q,it,dt,wt){var Et,Bt,Ut,Ht,qt,Jt=N[it]||(N[it]={active:0,count:0}),le=Jt[dt];function fe(Se){var Ce=Jt.active,Ne=Jt[Ce];for(var Ee in Ne&&(Ne.timer.c=null,Ne.timer.t=NaN,--Jt.count,delete Jt[Ce],Ne.event&&Ne.event.interrupt.call(N,N.__data__,Ne.index)),Jt)if(+Ee<dt){var rr=Jt[Ee];rr.timer.c=null,rr.timer.t=NaN,--Jt.count,delete Jt[Ee]}Bt.c=Le,nr(function(){return Bt.c&&Le(Se||1)&&(Bt.c=null,Bt.t=NaN),1},0,Et),Jt.active=dt,le.event&&le.event.start.call(N,N.__data__,Q),qt=[],le.tween.forEach(function(Ye,Ve){(Ve=Ve.call(N,N.__data__,Q))&&qt.push(Ve)}),Ht=le.ease,Ut=le.duration}function Le(Se){for(var Ce=Se/Ut,Ne=Ht(Ce),Ee=qt.length;Ee>0;)qt[--Ee].call(N,Ne);if(Ce>=1)return le.event&&le.event.end.call(N,N.__data__,Q),--Jt.count?delete Jt[dt]:delete N[it],1}le||(Et=wt.time,Bt=nr(function(Se){var Ce=le.delay;if(Bt.t=Ce+Et,Ce<=Se)return fe(Se-Ce);Bt.c=fe},0,Et),le=Jt[dt]={tween:new x,time:Et,timer:Bt,delay:wt.delay,duration:wt.duration,ease:wt.ease,index:Q},wt=null,++Jt.count)}Pn.call=pt.call,Pn.empty=pt.empty,Pn.node=pt.node,Pn.size=pt.size,r.transition=function(N,Q){return N&&N.transition?No?N.transition(Q):N:r.selection().transition(N)},r.transition.prototype=Pn,Pn.select=function(N){var Q,it,dt,wt=this.id,Et=this.namespace,Bt=[];N=gt(N);for(var Ut=-1,Ht=this.length;++Ut<Ht;){Bt.push(Q=[]);for(var qt=this[Ut],Jt=-1,le=qt.length;++Jt<le;)(dt=qt[Jt])&&(it=N.call(dt,dt.__data__,Jt,Ut))?("__data__"in dt&&(it.__data__=dt.__data__),ms(it,Jt,Et,wt,dt[Et][wt]),Q.push(it)):Q.push(null)}return ea(Bt,Et,wt)},Pn.selectAll=function(N){var Q,it,dt,wt,Et,Bt=this.id,Ut=this.namespace,Ht=[];N=kt(N);for(var qt=-1,Jt=this.length;++qt<Jt;)for(var le=this[qt],fe=-1,Le=le.length;++fe<Le;)if(dt=le[fe]){Et=dt[Ut][Bt],it=N.call(dt,dt.__data__,fe,qt),Ht.push(Q=[]);for(var Se=-1,Ce=it.length;++Se<Ce;)(wt=it[Se])&&ms(wt,Se,Ut,Bt,Et),Q.push(wt)}return ea(Ht,Ut,Bt)},Pn.filter=function(N){var Q,it,dt=[];typeof N!="function"&&(N=ut(N));for(var wt=0,Et=this.length;wt<Et;wt++){dt.push(Q=[]);for(var Bt,Ut=0,Ht=(Bt=this[wt]).length;Ut<Ht;Ut++)(it=Bt[Ut])&&N.call(it,it.__data__,Ut,wt)&&Q.push(it)}return ea(dt,this.namespace,this.id)},Pn.tween=function(N,Q){var it=this.id,dt=this.namespace;return arguments.length<2?this.node()[dt][it].tween.get(N):bt(this,Q==null?function(wt){wt[dt][it].tween.remove(N)}:function(wt){wt[dt][it].tween.set(N,Q)})},Pn.attr=function(N,Q){if(arguments.length<2){for(Q in N)this.attr(Q,N[Q]);return this}var it=N=="transform"?Ao:Ja,dt=r.ns.qualify(N);function wt(){this.removeAttribute(dt)}function Et(){this.removeAttributeNS(dt.space,dt.local)}return io(this,"attr."+N,Q,dt.local?function(Bt){return Bt==null?Et:(Bt+="",function(){var Ut,Ht=this.getAttributeNS(dt.space,dt.local);return Ht!==Bt&&(Ut=it(Ht,Bt),function(qt){this.setAttributeNS(dt.space,dt.local,Ut(qt))})})}:function(Bt){return Bt==null?wt:(Bt+="",function(){var Ut,Ht=this.getAttribute(dt);return Ht!==Bt&&(Ut=it(Ht,Bt),function(qt){this.setAttribute(dt,Ut(qt))})})})},Pn.attrTween=function(N,Q){var it=r.ns.qualify(N);return this.tween("attr."+N,it.local?function(dt,wt){var Et=Q.call(this,dt,wt,this.getAttributeNS(it.space,it.local));return Et&&function(Bt){this.setAttributeNS(it.space,it.local,Et(Bt))}}:function(dt,wt){var Et=Q.call(this,dt,wt,this.getAttribute(it));return Et&&function(Bt){this.setAttribute(it,Et(Bt))}})},Pn.style=function(N,Q,it){var dt=arguments.length;if(dt<3){if(typeof N!="string"){for(it in dt<2&&(Q=""),N)this.style(it,N[it],Q);return this}it=""}function wt(){this.style.removeProperty(N)}return io(this,"style."+N,Q,function(Et){return Et==null?wt:(Et+="",function(){var Bt,Ut=t(this).getComputedStyle(this,null).getPropertyValue(N);return Ut!==Et&&(Bt=Ja(Ut,Et),function(Ht){this.style.setProperty(N,Bt(Ht),it)})})})},Pn.styleTween=function(N,Q,it){return arguments.length<3&&(it=""),this.tween("style."+N,function(dt,wt){var Et=Q.call(this,dt,wt,t(this).getComputedStyle(this,null).getPropertyValue(N));return Et&&function(Bt){this.style.setProperty(N,Et(Bt),it)}})},Pn.text=function(N){return io(this,"text",N,ba)},Pn.remove=function(){var N=this.namespace;return this.each("end.transition",function(){var Q;this[N].count<2&&(Q=this.parentNode)&&Q.removeChild(this)})},Pn.ease=function(N){var Q=this.id,it=this.namespace;return arguments.length<1?this.node()[it][Q].ease:(typeof N!="function"&&(N=r.ease.apply(r,arguments)),bt(this,function(dt){dt[it][Q].ease=N}))},Pn.delay=function(N){var Q=this.id,it=this.namespace;return arguments.length<1?this.node()[it][Q].delay:bt(this,typeof N=="function"?function(dt,wt,Et){dt[it][Q].delay=+N.call(dt,dt.__data__,wt,Et)}:(N=+N,function(dt){dt[it][Q].delay=N}))},Pn.duration=function(N){var Q=this.id,it=this.namespace;return arguments.length<1?this.node()[it][Q].duration:bt(this,typeof N=="function"?function(dt,wt,Et){dt[it][Q].duration=Math.max(1,N.call(dt,dt.__data__,wt,Et))}:(N=Math.max(1,N),function(dt){dt[it][Q].duration=N}))},Pn.each=function(N,Q){var it=this.id,dt=this.namespace;if(arguments.length<2){var wt=Bo,Et=No;try{No=it,bt(this,function(Bt,Ut,Ht){Bo=Bt[dt][it],N.call(Bt,Bt.__data__,Ut,Ht)})}finally{Bo=wt,No=Et}}else bt(this,function(Bt){var Ut=Bt[dt][it];(Ut.event||(Ut.event=r.dispatch("start","end","interrupt"))).on(N,Q)});return this},Pn.transition=function(){for(var N,Q,it,dt=this.id,wt=++ji,Et=this.namespace,Bt=[],Ut=0,Ht=this.length;Ut<Ht;Ut++){Bt.push(N=[]);for(var qt,Jt=0,le=(qt=this[Ut]).length;Jt<le;Jt++)(Q=qt[Jt])&&ms(Q,Jt,Et,wt,{time:(it=Q[Et][dt]).time,ease:it.ease,delay:it.delay+it.duration,duration:it.duration}),N.push(Q)}return ea(Bt,Et,wt)},r.svg.axis=function(){var N,Q=r.scale.linear(),it=as,dt=6,wt=6,Et=3,Bt=[10],Ut=null;function Ht(qt){qt.each(function(){var Jt,le=r.select(this),fe=this.__chart__||Q,Le=this.__chart__=Q.copy(),Se=Ut??(Le.ticks?Le.ticks.apply(Le,Bt):Le.domain()),Ce=N??(Le.tickFormat?Le.tickFormat.apply(Le,Bt):R),Ne=le.selectAll(".tick").data(Se,Le),Ee=Ne.enter().insert("g",".domain").attr("class","tick").style("opacity",se),rr=r.transition(Ne.exit()).style("opacity",se).remove(),Ye=r.transition(Ne.order()).style("opacity",1),Ve=Math.max(dt,0)+Et,dr=vo(Le),vr=le.selectAll(".domain").data([0]),Fr=(vr.enter().append("path").attr("class","domain"),r.transition(vr));Ee.append("line"),Ee.append("text");var zr,$r,Zr,cn,ln=Ee.select("line"),pn=Ye.select("line"),bn=Ne.select("text").text(Ce),On=Ee.select("text"),Br=Ye.select("text"),on=it==="top"||it==="left"?-1:1;if(it==="bottom"||it==="top"?(Jt=F,zr="x",Zr="y",$r="x2",cn="y2",bn.attr("dy",on<0?"0em":".71em").style("text-anchor","middle"),Fr.attr("d","M"+dr[0]+","+on*wt+"V0H"+dr[1]+"V"+on*wt)):(Jt=H,zr="y",Zr="x",$r="y2",cn="x2",bn.attr("dy",".32em").style("text-anchor",on<0?"end":"start"),Fr.attr("d","M"+on*wt+","+dr[0]+"H0V"+dr[1]+"H"+on*wt)),ln.attr(cn,on*dt),On.attr(Zr,on*Ve),pn.attr($r,0).attr(cn,on*dt),Br.attr(zr,0).attr(Zr,on*Ve),Le.rangeBand){var dn=Le,_n=dn.rangeBand()/2;fe=Le=function(En){return dn(En)+_n}}else fe.rangeBand?fe=Le:rr.call(Jt,Le,fe);Ee.call(Jt,fe,Le),Ye.call(Jt,Le,Le)})}return Ht.scale=function(qt){return arguments.length?(Q=qt,Ht):Q},Ht.orient=function(qt){return arguments.length?(it=qt in bo?qt+"":as,Ht):it},Ht.ticks=function(){return arguments.length?(Bt=h(arguments),Ht):Bt},Ht.tickValues=function(qt){return arguments.length?(Ut=qt,Ht):Ut},Ht.tickFormat=function(qt){return arguments.length?(N=qt,Ht):N},Ht.tickSize=function(qt){var Jt=arguments.length;return Jt?(dt=+qt,wt=+arguments[Jt-1],Ht):dt},Ht.innerTickSize=function(qt){return arguments.length?(dt=+qt,Ht):dt},Ht.outerTickSize=function(qt){return arguments.length?(wt=+qt,Ht):wt},Ht.tickPadding=function(qt){return arguments.length?(Et=+qt,Ht):Et},Ht.tickSubdivide=function(){return arguments.length&&Ht},Ht};var as="bottom",bo={top:1,right:1,bottom:1,left:1};function F(N,Q,it){N.attr("transform",function(dt){var wt=Q(dt);return"translate("+(isFinite(wt)?wt:it(dt))+",0)"})}function H(N,Q,it){N.attr("transform",function(dt){var wt=Q(dt);return"translate(0,"+(isFinite(wt)?wt:it(dt))+")"})}r.svg.brush=function(){var N,Q,it=Y(Jt,"brushstart","brush","brushend"),dt=null,wt=null,Et=[0,0],Bt=[0,0],Ut=!0,Ht=!0,qt=K[0];function Jt(Ce){Ce.each(function(){var Ne=r.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Se).on("touchstart.brush",Se),Ee=Ne.selectAll(".background").data([0]);Ee.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ne.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var rr=Ne.selectAll(".resize").data(qt,R);rr.exit().remove(),rr.enter().append("g").attr("class",function(vr){return"resize "+vr}).style("cursor",function(vr){return $[vr]}).append("rect").attr("x",function(vr){return/[ew]$/.test(vr)?-3:null}).attr("y",function(vr){return/^[ns]/.test(vr)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),rr.style("display",Jt.empty()?"none":null);var Ye,Ve=r.transition(Ne),dr=r.transition(Ee);dt&&(Ye=vo(dt),dr.attr("x",Ye[0]).attr("width",Ye[1]-Ye[0]),fe(Ve)),wt&&(Ye=vo(wt),dr.attr("y",Ye[0]).attr("height",Ye[1]-Ye[0]),Le(Ve)),le(Ve)})}function le(Ce){Ce.selectAll(".resize").attr("transform",function(Ne){return"translate("+Et[+/e$/.test(Ne)]+","+Bt[+/^s/.test(Ne)]+")"})}function fe(Ce){Ce.select(".extent").attr("x",Et[0]),Ce.selectAll(".extent,.n>rect,.s>rect").attr("width",Et[1]-Et[0])}function Le(Ce){Ce.select(".extent").attr("y",Bt[0]),Ce.selectAll(".extent,.e>rect,.w>rect").attr("height",Bt[1]-Bt[0])}function Se(){var Ce,Ne,Ee=this,rr=r.select(r.event.target),Ye=it.of(Ee,arguments),Ve=r.select(Ee),dr=rr.datum(),vr=!/^(n|s)$/.test(dr)&&dt,Fr=!/^(e|w)$/.test(dr)&&wt,zr=rr.classed("extent"),$r=de(Ee),Zr=r.mouse(Ee),cn=r.select(t(Ee)).on("keydown.brush",function(){r.event.keyCode==32&&(zr||(Ce=null,Zr[0]-=Et[1],Zr[1]-=Bt[1],zr=2),J())}).on("keyup.brush",function(){r.event.keyCode==32&&zr==2&&(Zr[0]+=Et[1],Zr[1]+=Bt[1],zr=0,J())});if(r.event.changedTouches?cn.on("touchmove.brush",bn).on("touchend.brush",Br):cn.on("mousemove.brush",bn).on("mouseup.brush",Br),Ve.interrupt().selectAll("*").interrupt(),zr)Zr[0]=Et[0]-Zr[0],Zr[1]=Bt[0]-Zr[1];else if(dr){var ln=+/w$/.test(dr),pn=+/^n/.test(dr);Ne=[Et[1-ln]-Zr[0],Bt[1-pn]-Zr[1]],Zr[0]=Et[ln],Zr[1]=Bt[pn]}else r.event.altKey&&(Ce=Zr.slice());function bn(){var on=r.mouse(Ee),dn=!1;Ne&&(on[0]+=Ne[0],on[1]+=Ne[1]),zr||(r.event.altKey?(Ce||(Ce=[(Et[0]+Et[1])/2,(Bt[0]+Bt[1])/2]),Zr[0]=Et[+(on[0]<Ce[0])],Zr[1]=Bt[+(on[1]<Ce[1])]):Ce=null),vr&&On(on,dt,0)&&(fe(Ve),dn=!0),Fr&&On(on,wt,1)&&(Le(Ve),dn=!0),dn&&(le(Ve),Ye({type:"brush",mode:zr?"move":"resize"}))}function On(on,dn,_n){var En,Nn,$n=vo(dn),Kn=$n[0],hi=$n[1],fi=Zr[_n],Jn=_n?Bt:Et,Ci=Jn[1]-Jn[0];if(zr&&(Kn-=fi,hi-=Ci+fi),En=(_n?Ht:Ut)?Math.max(Kn,Math.min(hi,on[_n])):on[_n],zr?Nn=(En+=fi)+Ci:(Ce&&(fi=Math.max(Kn,Math.min(hi,2*Ce[_n]-En))),fi<En?(Nn=En,En=fi):Nn=fi),Jn[0]!=En||Jn[1]!=Nn)return _n?Q=null:N=null,Jn[0]=En,Jn[1]=Nn,!0}function Br(){bn(),Ve.style("pointer-events","all").selectAll(".resize").style("display",Jt.empty()?"none":null),r.select("body").style("cursor",null),cn.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),$r(),Ye({type:"brushend"})}Ve.style("pointer-events","none").selectAll(".resize").style("display",null),r.select("body").style("cursor",rr.style("cursor")),Ye({type:"brushstart"}),bn()}return Jt.event=function(Ce){Ce.each(function(){var Ne=it.of(this,arguments),Ee={x:Et,y:Bt,i:N,j:Q},rr=this.__chart__||Ee;this.__chart__=Ee,No?r.select(this).transition().each("start.brush",function(){N=rr.i,Q=rr.j,Et=rr.x,Bt=rr.y,Ne({type:"brushstart"})}).tween("brush:brush",function(){var Ye=Oi(Et,Ee.x),Ve=Oi(Bt,Ee.y);return N=Q=null,function(dr){Et=Ee.x=Ye(dr),Bt=Ee.y=Ve(dr),Ne({type:"brush",mode:"resize"})}}).each("end.brush",function(){N=Ee.i,Q=Ee.j,Ne({type:"brush",mode:"resize"}),Ne({type:"brushend"})}):(Ne({type:"brushstart"}),Ne({type:"brush",mode:"resize"}),Ne({type:"brushend"}))})},Jt.x=function(Ce){return arguments.length?(qt=K[!(dt=Ce)<<1|!wt],Jt):dt},Jt.y=function(Ce){return arguments.length?(qt=K[!dt<<1|!(wt=Ce)],Jt):wt},Jt.clamp=function(Ce){return arguments.length?(dt&&wt?(Ut=!!Ce[0],Ht=!!Ce[1]):dt?Ut=!!Ce:wt&&(Ht=!!Ce),Jt):dt&&wt?[Ut,Ht]:dt?Ut:wt?Ht:null},Jt.extent=function(Ce){var Ne,Ee,rr,Ye,Ve;return arguments.length?(dt&&(Ne=Ce[0],Ee=Ce[1],wt&&(Ne=Ne[0],Ee=Ee[0]),N=[Ne,Ee],dt.invert&&(Ne=dt(Ne),Ee=dt(Ee)),Ee<Ne&&(Ve=Ne,Ne=Ee,Ee=Ve),Ne==Et[0]&&Ee==Et[1]||(Et=[Ne,Ee])),wt&&(rr=Ce[0],Ye=Ce[1],dt&&(rr=rr[1],Ye=Ye[1]),Q=[rr,Ye],wt.invert&&(rr=wt(rr),Ye=wt(Ye)),Ye<rr&&(Ve=rr,rr=Ye,Ye=Ve),rr==Bt[0]&&Ye==Bt[1]||(Bt=[rr,Ye])),Jt):(dt&&(N?(Ne=N[0],Ee=N[1]):(Ne=Et[0],Ee=Et[1],dt.invert&&(Ne=dt.invert(Ne),Ee=dt.invert(Ee)),Ee<Ne&&(Ve=Ne,Ne=Ee,Ee=Ve))),wt&&(Q?(rr=Q[0],Ye=Q[1]):(rr=Bt[0],Ye=Bt[1],wt.invert&&(rr=wt.invert(rr),Ye=wt.invert(Ye)),Ye<rr&&(Ve=rr,rr=Ye,Ye=Ve))),dt&&wt?[[Ne,rr],[Ee,Ye]]:dt?[Ne,Ee]:wt&&[rr,Ye])},Jt.clear=function(){return Jt.empty()||(Et=[0,0],Bt=[0,0],N=Q=null),Jt},Jt.empty=function(){return!!dt&&Et[0]==Et[1]||!!wt&&Bt[0]==Bt[1]},r.rebind(Jt,it,"on")};var $={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},K=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function ft(N){return JSON.parse(N.responseText)}function At(N){var Q=s.createRange();return Q.selectNode(s.body),Q.createContextualFragment(N.responseText)}r.text=Xr(function(N){return N.responseText}),r.json=function(N,Q){return en(N,"application/json",ft,Q)},r.html=function(N,Q){return en(N,"text/html",At,Q)},r.xml=Xr(function(N){return N.responseXML}),(k=typeof(T=r)=="function"?T.call(I,o,I,W):T)===void 0||(W.exports=k)}).apply(self)},88294:function(W,I,o){W.exports=o(62849)},62849:function(W,I,o){var T=o(91358),k=o(53435),r=o(18863),m=o(21527),h=o(71299),s=o(46775),e=o(30120),t=o(64941),n=o(90660),a=o(27084);function i(c,l){for(var u=l[0],f=l[1],d=1/(l[2]-u),w=1/(l[3]-f),v=new Array(c.length),p=0,y=c.length/2;p<y;p++)v[2*p]=k((c[2*p]-u)*d,0,1),v[2*p+1]=k((c[2*p+1]-f)*w,0,1);return v}W.exports=function(c,l){l||(l={}),c=e(c,"float64"),l=h(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=s(l.maxDepth,255),f=s(l.bounds,m(c,2));f[0]===f[2]&&f[2]++,f[1]===f[3]&&f[3]++;var d,w=i(c,f),v=c.length>>>1;l.dtype||(l.dtype="array"),typeof l.dtype=="string"?d=new(n(l.dtype))(v):l.dtype&&(d=l.dtype,Array.isArray(d)&&(d.length=v));for(var p=0;p<v;++p)d[p]=p;var y=[],b=[],x=[],_=[];(function P(U,R,j,B,z,G){if(!B.length)return null;var V=y[z]||(y[z]=[]),et=x[z]||(x[z]=[]),J=b[z]||(b[z]=[]),X=V.length;if(++z>u||G>1073741824){for(var Y=0;Y<B.length;Y++)V.push(B[Y]),et.push(G),J.push(null,null,null,null);return X}if(V.push(B[0]),et.push(G),B.length<=1)return J.push(null,null,null,null),X;for(var Z=.5*j,tt=U+Z,rt=R+Z,nt=[],ot=[],ct=[],pt=[],gt=1,kt=B.length;gt<kt;gt++){var yt=B[gt],mt=w[2*yt],Ot=w[2*yt+1];mt<tt?Ot<rt?nt.push(yt):ot.push(yt):Ot<rt?ct.push(yt):pt.push(yt)}return G<<=2,J.push(P(U,R,Z,nt,z,G),P(U,rt,Z,ot,z,G+1),P(tt,R,Z,ct,z,G+2),P(tt,rt,Z,pt,z,G+3)),X})(0,0,1,d,0,1);for(var g=0,A=0;A<y.length;A++){var M=y[A];if(d.set)d.set(M,g);else for(var L=0,E=M.length;L<E;L++)d[L+g]=M[L];var S=g+y[A].length;_[A]=[g,S],g=S}return d.range=function(){for(var P,U=[],R=arguments.length;R--;)U[R]=arguments[R];if(t(U[U.length-1])){var j=U.pop();U.length||j.x==null&&j.l==null&&j.left==null||(U=[j],P={}),P=h(j,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else P={};U.length||(U=f);var B,z=r.apply(void 0,U),G=[Math.min(z.x,z.x+z.width),Math.min(z.y,z.y+z.height),Math.max(z.x,z.x+z.width),Math.max(z.y,z.y+z.height)],V=G[0],et=G[1],J=G[2],X=G[3],Y=i([V,et,J,X],f),Z=Y[0],tt=Y[1],rt=Y[2],nt=Y[3],ot=s(P.level,y.length);if(P.d!=null&&(typeof P.d=="number"?B=[P.d,P.d]:P.d.length&&(B=P.d),ot=Math.min(Math.max(Math.ceil(-a(Math.abs(B[0])/(f[2]-f[0]))),Math.ceil(-a(Math.abs(B[1])/(f[3]-f[1])))),ot)),ot=Math.min(ot,y.length),P.lod)return function(pt,gt,kt,yt,mt){for(var Ot=[],vt=0;vt<mt;vt++){var xt=x[vt],st=_[vt][0],at=O(pt,gt,vt),ht=O(kt,yt,vt),Lt=T.ge(xt,at),Mt=T.gt(xt,ht,Lt,xt.length-1);Ot[vt]=[Lt+st,Mt+st]}return Ot}(Z,tt,rt,nt,ot);var ct=[];return function pt(gt,kt,yt,mt,Ot,vt){if(Ot!==null&&vt!==null&&!(Z>gt+yt||tt>kt+yt||rt<gt||nt<kt||mt>=ot||Ot===vt)){var xt=y[mt];vt===void 0&&(vt=xt.length);for(var st=Ot;st<vt;st++){var at=xt[st],ht=c[2*at],Lt=c[2*at+1];ht>=V&&ht<=J&&Lt>=et&&Lt<=X&&ct.push(at)}var Mt=b[mt],_t=Mt[4*Ot+0],St=Mt[4*Ot+1],Dt=Mt[4*Ot+2],ut=Mt[4*Ot+3],Tt=function(zt,Ft){for(var $t=null,Wt=0;$t===null;)if($t=zt[4*Ft+Wt],++Wt>zt.length)return null;return $t}(Mt,Ot+1),bt=.5*yt,It=mt+1;pt(gt,kt,bt,It,_t,St||Dt||ut||Tt),pt(gt,kt+bt,bt,It,St,Dt||ut||Tt),pt(gt+bt,kt,bt,It,Dt,ut||Tt),pt(gt+bt,kt+bt,bt,It,ut,Tt)}}(0,0,1,0,0,1),ct},d;function O(P,U,R){for(var j=1,B=.5,z=.5,G=.5,V=0;V<R;V++)j<<=2,j+=P<B?U<z?0:1:U<z?2:3,G*=.5,B+=P<B?-G:G,z+=U<z?-G:G;return j}}},30774:function(W,I,o){Object.defineProperty(I,"__esModule",{value:!0});var T=o(60302),k=6378137;function r(s){var e=0;if(s&&s.length>0){e+=Math.abs(m(s[0]));for(var t=1;t<s.length;t++)e-=Math.abs(m(s[t]))}return e}function m(s){var e,t,n,a,i,c,l=0,u=s.length;if(u>2){for(c=0;c<u;c++)c===u-2?(n=u-2,a=u-1,i=0):c===u-1?(n=u-1,a=0,i=1):(n=c,a=c+1,i=c+2),e=s[n],t=s[a],l+=(h(s[i][0])-h(e[0]))*Math.sin(h(t[1]));l=l*k*k/2}return l}function h(s){return s*Math.PI/180}I.default=function(s){return T.geomReduce(s,function(e,t){return e+function(n){var a,i=0;switch(n.type){case"Polygon":return r(n.coordinates);case"MultiPolygon":for(a=0;a<n.coordinates.length;a++)i+=r(n.coordinates[a]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},23132:function(W,I){function o(c,l,u){u===void 0&&(u={});var f={type:"Feature"};return(u.id===0||u.id)&&(f.id=u.id),u.bbox&&(f.bbox=u.bbox),f.properties=l||{},f.geometry=c,f}function T(c,l,u){if(u===void 0&&(u={}),!c)throw new Error("coordinates is required");if(!Array.isArray(c))throw new Error("coordinates must be an Array");if(c.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(c[0])||!i(c[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:c},l,u)}function k(c,l,u){u===void 0&&(u={});for(var f=0,d=c;f<d.length;f++){var w=d[f];if(w.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<w[w.length-1].length;v++)if(w[w.length-1][v]!==w[0][v])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:c},l,u)}function r(c,l,u){if(u===void 0&&(u={}),c.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:c},l,u)}function m(c,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=c,u}function h(c,l,u){return u===void 0&&(u={}),o({type:"MultiLineString",coordinates:c},l,u)}function s(c,l,u){return u===void 0&&(u={}),o({type:"MultiPoint",coordinates:c},l,u)}function e(c,l,u){return u===void 0&&(u={}),o({type:"MultiPolygon",coordinates:c},l,u)}function t(c,l){l===void 0&&(l="kilometers");var u=I.factors[l];if(!u)throw new Error(l+" units is invalid");return c*u}function n(c,l){l===void 0&&(l="kilometers");var u=I.factors[l];if(!u)throw new Error(l+" units is invalid");return c/u}function a(c){return c%(2*Math.PI)*180/Math.PI}function i(c){return!isNaN(c)&&c!==null&&!Array.isArray(c)}Object.defineProperty(I,"__esModule",{value:!0}),I.earthRadius=63710088e-1,I.factors={centimeters:100*I.earthRadius,centimetres:100*I.earthRadius,degrees:I.earthRadius/111325,feet:3.28084*I.earthRadius,inches:39.37*I.earthRadius,kilometers:I.earthRadius/1e3,kilometres:I.earthRadius/1e3,meters:I.earthRadius,metres:I.earthRadius,miles:I.earthRadius/1609.344,millimeters:1e3*I.earthRadius,millimetres:1e3*I.earthRadius,nauticalmiles:I.earthRadius/1852,radians:1,yards:1.0936*I.earthRadius},I.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/I.earthRadius,yards:1.0936133},I.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},I.feature=o,I.geometry=function(c,l,u){switch(c){case"Point":return T(l).geometry;case"LineString":return r(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return s(l).geometry;case"MultiLineString":return h(l).geometry;case"MultiPolygon":return e(l).geometry;default:throw new Error(c+" is invalid")}},I.point=T,I.points=function(c,l,u){return u===void 0&&(u={}),m(c.map(function(f){return T(f,l)}),u)},I.polygon=k,I.polygons=function(c,l,u){return u===void 0&&(u={}),m(c.map(function(f){return k(f,l)}),u)},I.lineString=r,I.lineStrings=function(c,l,u){return u===void 0&&(u={}),m(c.map(function(f){return r(f,l)}),u)},I.featureCollection=m,I.multiLineString=h,I.multiPoint=s,I.multiPolygon=e,I.geometryCollection=function(c,l,u){return u===void 0&&(u={}),o({type:"GeometryCollection",geometries:c},l,u)},I.round=function(c,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(c*u)/u},I.radiansToLength=t,I.lengthToRadians=n,I.lengthToDegrees=function(c,l){return a(n(c,l))},I.bearingToAzimuth=function(c){var l=c%360;return l<0&&(l+=360),l},I.radiansToDegrees=a,I.degreesToRadians=function(c){return c%360*Math.PI/180},I.convertLength=function(c,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(c>=0))throw new Error("length must be a positive number");return t(n(c,l),u)},I.convertArea=function(c,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(c>=0))throw new Error("area must be a positive number");var f=I.areaFactors[l];if(!f)throw new Error("invalid original units");var d=I.areaFactors[u];if(!d)throw new Error("invalid final units");return c/f*d},I.isNumber=i,I.isObject=function(c){return!!c&&c.constructor===Object},I.validateBBox=function(c){if(!c)throw new Error("bbox is required");if(!Array.isArray(c))throw new Error("bbox must be an Array");if(c.length!==4&&c.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");c.forEach(function(l){if(!i(l))throw new Error("bbox must only contain numbers")})},I.validateId=function(c){if(!c)throw new Error("id is required");if(["string","number"].indexOf(typeof c)===-1)throw new Error("id must be a number or a string")}},60302:function(W,I,o){Object.defineProperty(I,"__esModule",{value:!0});var T=o(23132);function k(n,a,i){if(n!==null)for(var c,l,u,f,d,w,v,p,y=0,b=0,x=n.type,_=x==="FeatureCollection",g=x==="Feature",A=_?n.features.length:1,M=0;M<A;M++){d=(p=!!(v=_?n.features[M].geometry:g?n.geometry:n)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var L=0;L<d;L++){var E=0,S=0;if((f=p?v.geometries[L]:v)!==null){w=f.coordinates;var O=f.type;switch(y=!i||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(a(w,b,M,E,S)===!1)return!1;b++,E++;break;case"LineString":case"MultiPoint":for(c=0;c<w.length;c++){if(a(w[c],b,M,E,S)===!1)return!1;b++,O==="MultiPoint"&&E++}O==="LineString"&&E++;break;case"Polygon":case"MultiLineString":for(c=0;c<w.length;c++){for(l=0;l<w[c].length-y;l++){if(a(w[c][l],b,M,E,S)===!1)return!1;b++}O==="MultiLineString"&&E++,O==="Polygon"&&S++}O==="Polygon"&&E++;break;case"MultiPolygon":for(c=0;c<w.length;c++){for(S=0,l=0;l<w[c].length;l++){for(u=0;u<w[c][l].length-y;u++){if(a(w[c][l][u],b,M,E,S)===!1)return!1;b++}S++}E++}break;case"GeometryCollection":for(c=0;c<f.geometries.length;c++)if(k(f.geometries[c],a,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(n,a){var i;switch(n.type){case"FeatureCollection":for(i=0;i<n.features.length&&a(n.features[i].properties,i)!==!1;i++);break;case"Feature":a(n.properties,0)}}function m(n,a){if(n.type==="Feature")a(n,0);else if(n.type==="FeatureCollection")for(var i=0;i<n.features.length&&a(n.features[i],i)!==!1;i++);}function h(n,a){var i,c,l,u,f,d,w,v,p,y,b=0,x=n.type==="FeatureCollection",_=n.type==="Feature",g=x?n.features.length:1;for(i=0;i<g;i++){for(d=x?n.features[i].geometry:_?n.geometry:n,v=x?n.features[i].properties:_?n.properties:{},p=x?n.features[i].bbox:_?n.bbox:void 0,y=x?n.features[i].id:_?n.id:void 0,f=(w=!!d&&d.type==="GeometryCollection")?d.geometries.length:1,l=0;l<f;l++)if((u=w?d.geometries[l]:d)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(a(u,b,v,p,y)===!1)return!1;break;case"GeometryCollection":for(c=0;c<u.geometries.length;c++)if(a(u.geometries[c],b,v,p,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(a(null,b,v,p,y)===!1)return!1;b++}}function s(n,a){h(n,function(i,c,l,u,f){var d,w=i===null?null:i.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return a(T.feature(i,l,{bbox:u,id:f}),c,0)!==!1&&void 0}switch(w){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon"}for(var v=0;v<i.coordinates.length;v++){var p={type:d,coordinates:i.coordinates[v]};if(a(T.feature(p,l),c,v)===!1)return!1}})}function e(n,a){s(n,function(i,c,l){var u=0;if(i.geometry){var f=i.geometry.type;if(f!=="Point"&&f!=="MultiPoint"){var d,w=0,v=0,p=0;return k(i,function(y,b,x,_,g){if(d===void 0||c>w||_>v||g>p)return d=y,w=c,v=_,p=g,void(u=0);var A=T.lineString([d,y],i.properties);if(a(A,c,l,g,u)===!1)return!1;u++,d=y})!==!1&&void 0}}})}function t(n,a){if(!n)throw new Error("geojson is required");s(n,function(i,c,l){if(i.geometry!==null){var u=i.geometry.type,f=i.geometry.coordinates;switch(u){case"LineString":if(a(i,c,l,0,0)===!1)return!1;break;case"Polygon":for(var d=0;d<f.length;d++)if(a(T.lineString(f[d],i.properties),c,l,d)===!1)return!1}}})}I.coordEach=k,I.coordReduce=function(n,a,i,c){var l=i;return k(n,function(u,f,d,w,v){l=f===0&&i===void 0?u:a(l,u,f,d,w,v)},c),l},I.propEach=r,I.propReduce=function(n,a,i){var c=i;return r(n,function(l,u){c=u===0&&i===void 0?l:a(c,l,u)}),c},I.featureEach=m,I.featureReduce=function(n,a,i){var c=i;return m(n,function(l,u){c=u===0&&i===void 0?l:a(c,l,u)}),c},I.coordAll=function(n){var a=[];return k(n,function(i){a.push(i)}),a},I.geomEach=h,I.geomReduce=function(n,a,i){var c=i;return h(n,function(l,u,f,d,w){c=u===0&&i===void 0?l:a(c,l,u,f,d,w)}),c},I.flattenEach=s,I.flattenReduce=function(n,a,i){var c=i;return s(n,function(l,u,f){c=u===0&&f===0&&i===void 0?l:a(c,l,u,f)}),c},I.segmentEach=e,I.segmentReduce=function(n,a,i){var c=i,l=!1;return e(n,function(u,f,d,w,v){c=l===!1&&i===void 0?u:a(c,u,f,d,w,v),l=!0}),c},I.lineEach=t,I.lineReduce=function(n,a,i){var c=i;return t(n,function(l,u,f,d){c=u===0&&i===void 0?l:a(c,l,u,f,d)}),c},I.findSegment=function(n,a){if(a=a||{},!T.isObject(a))throw new Error("options is invalid");var i,c=a.featureIndex||0,l=a.multiFeatureIndex||0,u=a.geometryIndex||0,f=a.segmentIndex||0,d=a.properties;switch(n.type){case"FeatureCollection":c<0&&(c=n.features.length+c),d=d||n.features[c].properties,i=n.features[c].geometry;break;case"Feature":d=d||n.properties,i=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=n;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var w=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=w.length+f-1),T.lineString([w[f],w[f+1]],d,a);case"Polygon":return u<0&&(u=w.length+u),f<0&&(f=w[u].length+f-1),T.lineString([w[u][f],w[u][f+1]],d,a);case"MultiLineString":return l<0&&(l=w.length+l),f<0&&(f=w[l].length+f-1),T.lineString([w[l][f],w[l][f+1]],d,a);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),f<0&&(f=w[l][u].length-f-1),T.lineString([w[l][u][f],w[l][u][f+1]],d,a)}throw new Error("geojson is invalid")},I.findPoint=function(n,a){if(a=a||{},!T.isObject(a))throw new Error("options is invalid");var i,c=a.featureIndex||0,l=a.multiFeatureIndex||0,u=a.geometryIndex||0,f=a.coordIndex||0,d=a.properties;switch(n.type){case"FeatureCollection":c<0&&(c=n.features.length+c),d=d||n.features[c].properties,i=n.features[c].geometry;break;case"Feature":d=d||n.properties,i=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=n;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var w=i.coordinates;switch(i.type){case"Point":return T.point(w,d,a);case"MultiPoint":return l<0&&(l=w.length+l),T.point(w[l],d,a);case"LineString":return f<0&&(f=w.length+f),T.point(w[f],d,a);case"Polygon":return u<0&&(u=w.length+u),f<0&&(f=w[u].length+f),T.point(w[u][f],d,a);case"MultiLineString":return l<0&&(l=w.length+l),f<0&&(f=w[l].length+f),T.point(w[l][f],d,a);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),f<0&&(f=w[l][u].length-f),T.point(w[l][u][f],d,a)}throw new Error("geojson is invalid")}},85268:function(W,I,o){Object.defineProperty(I,"__esModule",{value:!0});var T=o(27138);function k(r){var m=[1/0,1/0,-1/0,-1/0];return T.coordEach(r,function(h){m[0]>h[0]&&(m[0]=h[0]),m[1]>h[1]&&(m[1]=h[1]),m[2]<h[0]&&(m[2]=h[0]),m[3]<h[1]&&(m[3]=h[1])}),m}k.default=k,I.default=k},94228:function(W,I){function o(c,l,u){u===void 0&&(u={});var f={type:"Feature"};return(u.id===0||u.id)&&(f.id=u.id),u.bbox&&(f.bbox=u.bbox),f.properties=l||{},f.geometry=c,f}function T(c,l,u){if(u===void 0&&(u={}),!c)throw new Error("coordinates is required");if(!Array.isArray(c))throw new Error("coordinates must be an Array");if(c.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(c[0])||!i(c[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:c},l,u)}function k(c,l,u){u===void 0&&(u={});for(var f=0,d=c;f<d.length;f++){var w=d[f];if(w.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<w[w.length-1].length;v++)if(w[w.length-1][v]!==w[0][v])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:c},l,u)}function r(c,l,u){if(u===void 0&&(u={}),c.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:c},l,u)}function m(c,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=c,u}function h(c,l,u){return u===void 0&&(u={}),o({type:"MultiLineString",coordinates:c},l,u)}function s(c,l,u){return u===void 0&&(u={}),o({type:"MultiPoint",coordinates:c},l,u)}function e(c,l,u){return u===void 0&&(u={}),o({type:"MultiPolygon",coordinates:c},l,u)}function t(c,l){l===void 0&&(l="kilometers");var u=I.factors[l];if(!u)throw new Error(l+" units is invalid");return c*u}function n(c,l){l===void 0&&(l="kilometers");var u=I.factors[l];if(!u)throw new Error(l+" units is invalid");return c/u}function a(c){return c%(2*Math.PI)*180/Math.PI}function i(c){return!isNaN(c)&&c!==null&&!Array.isArray(c)}Object.defineProperty(I,"__esModule",{value:!0}),I.earthRadius=63710088e-1,I.factors={centimeters:100*I.earthRadius,centimetres:100*I.earthRadius,degrees:I.earthRadius/111325,feet:3.28084*I.earthRadius,inches:39.37*I.earthRadius,kilometers:I.earthRadius/1e3,kilometres:I.earthRadius/1e3,meters:I.earthRadius,metres:I.earthRadius,miles:I.earthRadius/1609.344,millimeters:1e3*I.earthRadius,millimetres:1e3*I.earthRadius,nauticalmiles:I.earthRadius/1852,radians:1,yards:1.0936*I.earthRadius},I.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/I.earthRadius,yards:1.0936133},I.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},I.feature=o,I.geometry=function(c,l,u){switch(c){case"Point":return T(l).geometry;case"LineString":return r(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return s(l).geometry;case"MultiLineString":return h(l).geometry;case"MultiPolygon":return e(l).geometry;default:throw new Error(c+" is invalid")}},I.point=T,I.points=function(c,l,u){return u===void 0&&(u={}),m(c.map(function(f){return T(f,l)}),u)},I.polygon=k,I.polygons=function(c,l,u){return u===void 0&&(u={}),m(c.map(function(f){return k(f,l)}),u)},I.lineString=r,I.lineStrings=function(c,l,u){return u===void 0&&(u={}),m(c.map(function(f){return r(f,l)}),u)},I.featureCollection=m,I.multiLineString=h,I.multiPoint=s,I.multiPolygon=e,I.geometryCollection=function(c,l,u){return u===void 0&&(u={}),o({type:"GeometryCollection",geometries:c},l,u)},I.round=function(c,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(c*u)/u},I.radiansToLength=t,I.lengthToRadians=n,I.lengthToDegrees=function(c,l){return a(n(c,l))},I.bearingToAzimuth=function(c){var l=c%360;return l<0&&(l+=360),l},I.radiansToDegrees=a,I.degreesToRadians=function(c){return c%360*Math.PI/180},I.convertLength=function(c,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(c>=0))throw new Error("length must be a positive number");return t(n(c,l),u)},I.convertArea=function(c,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(c>=0))throw new Error("area must be a positive number");var f=I.areaFactors[l];if(!f)throw new Error("invalid original units");var d=I.areaFactors[u];if(!d)throw new Error("invalid final units");return c/f*d},I.isNumber=i,I.isObject=function(c){return!!c&&c.constructor===Object},I.validateBBox=function(c){if(!c)throw new Error("bbox is required");if(!Array.isArray(c))throw new Error("bbox must be an Array");if(c.length!==4&&c.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");c.forEach(function(l){if(!i(l))throw new Error("bbox must only contain numbers")})},I.validateId=function(c){if(!c)throw new Error("id is required");if(["string","number"].indexOf(typeof c)===-1)throw new Error("id must be a number or a string")}},27138:function(W,I,o){Object.defineProperty(I,"__esModule",{value:!0});var T=o(94228);function k(n,a,i){if(n!==null)for(var c,l,u,f,d,w,v,p,y=0,b=0,x=n.type,_=x==="FeatureCollection",g=x==="Feature",A=_?n.features.length:1,M=0;M<A;M++){d=(p=!!(v=_?n.features[M].geometry:g?n.geometry:n)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var L=0;L<d;L++){var E=0,S=0;if((f=p?v.geometries[L]:v)!==null){w=f.coordinates;var O=f.type;switch(y=!i||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(a(w,b,M,E,S)===!1)return!1;b++,E++;break;case"LineString":case"MultiPoint":for(c=0;c<w.length;c++){if(a(w[c],b,M,E,S)===!1)return!1;b++,O==="MultiPoint"&&E++}O==="LineString"&&E++;break;case"Polygon":case"MultiLineString":for(c=0;c<w.length;c++){for(l=0;l<w[c].length-y;l++){if(a(w[c][l],b,M,E,S)===!1)return!1;b++}O==="MultiLineString"&&E++,O==="Polygon"&&S++}O==="Polygon"&&E++;break;case"MultiPolygon":for(c=0;c<w.length;c++){for(S=0,l=0;l<w[c].length;l++){for(u=0;u<w[c][l].length-y;u++){if(a(w[c][l][u],b,M,E,S)===!1)return!1;b++}S++}E++}break;case"GeometryCollection":for(c=0;c<f.geometries.length;c++)if(k(f.geometries[c],a,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(n,a){var i;switch(n.type){case"FeatureCollection":for(i=0;i<n.features.length&&a(n.features[i].properties,i)!==!1;i++);break;case"Feature":a(n.properties,0)}}function m(n,a){if(n.type==="Feature")a(n,0);else if(n.type==="FeatureCollection")for(var i=0;i<n.features.length&&a(n.features[i],i)!==!1;i++);}function h(n,a){var i,c,l,u,f,d,w,v,p,y,b=0,x=n.type==="FeatureCollection",_=n.type==="Feature",g=x?n.features.length:1;for(i=0;i<g;i++){for(d=x?n.features[i].geometry:_?n.geometry:n,v=x?n.features[i].properties:_?n.properties:{},p=x?n.features[i].bbox:_?n.bbox:void 0,y=x?n.features[i].id:_?n.id:void 0,f=(w=!!d&&d.type==="GeometryCollection")?d.geometries.length:1,l=0;l<f;l++)if((u=w?d.geometries[l]:d)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(a(u,b,v,p,y)===!1)return!1;break;case"GeometryCollection":for(c=0;c<u.geometries.length;c++)if(a(u.geometries[c],b,v,p,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(a(null,b,v,p,y)===!1)return!1;b++}}function s(n,a){h(n,function(i,c,l,u,f){var d,w=i===null?null:i.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return a(T.feature(i,l,{bbox:u,id:f}),c,0)!==!1&&void 0}switch(w){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon"}for(var v=0;v<i.coordinates.length;v++){var p={type:d,coordinates:i.coordinates[v]};if(a(T.feature(p,l),c,v)===!1)return!1}})}function e(n,a){s(n,function(i,c,l){var u=0;if(i.geometry){var f=i.geometry.type;if(f!=="Point"&&f!=="MultiPoint"){var d,w=0,v=0,p=0;return k(i,function(y,b,x,_,g){if(d===void 0||c>w||_>v||g>p)return d=y,w=c,v=_,p=g,void(u=0);var A=T.lineString([d,y],i.properties);if(a(A,c,l,g,u)===!1)return!1;u++,d=y})!==!1&&void 0}}})}function t(n,a){if(!n)throw new Error("geojson is required");s(n,function(i,c,l){if(i.geometry!==null){var u=i.geometry.type,f=i.geometry.coordinates;switch(u){case"LineString":if(a(i,c,l,0,0)===!1)return!1;break;case"Polygon":for(var d=0;d<f.length;d++)if(a(T.lineString(f[d],i.properties),c,l,d)===!1)return!1}}})}I.coordEach=k,I.coordReduce=function(n,a,i,c){var l=i;return k(n,function(u,f,d,w,v){l=f===0&&i===void 0?u:a(l,u,f,d,w,v)},c),l},I.propEach=r,I.propReduce=function(n,a,i){var c=i;return r(n,function(l,u){c=u===0&&i===void 0?l:a(c,l,u)}),c},I.featureEach=m,I.featureReduce=function(n,a,i){var c=i;return m(n,function(l,u){c=u===0&&i===void 0?l:a(c,l,u)}),c},I.coordAll=function(n){var a=[];return k(n,function(i){a.push(i)}),a},I.geomEach=h,I.geomReduce=function(n,a,i){var c=i;return h(n,function(l,u,f,d,w){c=u===0&&i===void 0?l:a(c,l,u,f,d,w)}),c},I.flattenEach=s,I.flattenReduce=function(n,a,i){var c=i;return s(n,function(l,u,f){c=u===0&&f===0&&i===void 0?l:a(c,l,u,f)}),c},I.segmentEach=e,I.segmentReduce=function(n,a,i){var c=i,l=!1;return e(n,function(u,f,d,w,v){c=l===!1&&i===void 0?u:a(c,u,f,d,w,v),l=!0}),c},I.lineEach=t,I.lineReduce=function(n,a,i){var c=i;return t(n,function(l,u,f,d){c=u===0&&i===void 0?l:a(c,l,u,f,d)}),c},I.findSegment=function(n,a){if(a=a||{},!T.isObject(a))throw new Error("options is invalid");var i,c=a.featureIndex||0,l=a.multiFeatureIndex||0,u=a.geometryIndex||0,f=a.segmentIndex||0,d=a.properties;switch(n.type){case"FeatureCollection":c<0&&(c=n.features.length+c),d=d||n.features[c].properties,i=n.features[c].geometry;break;case"Feature":d=d||n.properties,i=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=n;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var w=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=w.length+f-1),T.lineString([w[f],w[f+1]],d,a);case"Polygon":return u<0&&(u=w.length+u),f<0&&(f=w[u].length+f-1),T.lineString([w[u][f],w[u][f+1]],d,a);case"MultiLineString":return l<0&&(l=w.length+l),f<0&&(f=w[l].length+f-1),T.lineString([w[l][f],w[l][f+1]],d,a);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),f<0&&(f=w[l][u].length-f-1),T.lineString([w[l][u][f],w[l][u][f+1]],d,a)}throw new Error("geojson is invalid")},I.findPoint=function(n,a){if(a=a||{},!T.isObject(a))throw new Error("options is invalid");var i,c=a.featureIndex||0,l=a.multiFeatureIndex||0,u=a.geometryIndex||0,f=a.coordIndex||0,d=a.properties;switch(n.type){case"FeatureCollection":c<0&&(c=n.features.length+c),d=d||n.features[c].properties,i=n.features[c].geometry;break;case"Feature":d=d||n.properties,i=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=n;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var w=i.coordinates;switch(i.type){case"Point":return T.point(w,d,a);case"MultiPoint":return l<0&&(l=w.length+l),T.point(w[l],d,a);case"LineString":return f<0&&(f=w.length+f),T.point(w[f],d,a);case"Polygon":return u<0&&(u=w.length+u),f<0&&(f=w[u].length+f),T.point(w[u][f],d,a);case"MultiLineString":return l<0&&(l=w.length+l),f<0&&(f=w[l].length+f),T.point(w[l][f],d,a);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),f<0&&(f=w[l][u].length-f),T.point(w[l][u][f],d,a)}throw new Error("geojson is invalid")}},29261:function(W,I,o){Object.defineProperty(I,"__esModule",{value:!0});var T=o(88553),k=o(64182);I.default=function(r,m){m===void 0&&(m={});var h=0,s=0,e=0;return T.coordEach(r,function(t){h+=t[0],s+=t[1],e++}),k.point([h/e,s/e],m.properties)}},64182:function(W,I){function o(c,l,u){u===void 0&&(u={});var f={type:"Feature"};return(u.id===0||u.id)&&(f.id=u.id),u.bbox&&(f.bbox=u.bbox),f.properties=l||{},f.geometry=c,f}function T(c,l,u){return u===void 0&&(u={}),o({type:"Point",coordinates:c},l,u)}function k(c,l,u){u===void 0&&(u={});for(var f=0,d=c;f<d.length;f++){var w=d[f];if(w.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<w[w.length-1].length;v++)if(w[w.length-1][v]!==w[0][v])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:c},l,u)}function r(c,l,u){if(u===void 0&&(u={}),c.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:c},l,u)}function m(c,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=c,u}function h(c,l,u){return u===void 0&&(u={}),o({type:"MultiLineString",coordinates:c},l,u)}function s(c,l,u){return u===void 0&&(u={}),o({type:"MultiPoint",coordinates:c},l,u)}function e(c,l,u){return u===void 0&&(u={}),o({type:"MultiPolygon",coordinates:c},l,u)}function t(c,l){l===void 0&&(l="kilometers");var u=I.factors[l];if(!u)throw new Error(l+" units is invalid");return c*u}function n(c,l){l===void 0&&(l="kilometers");var u=I.factors[l];if(!u)throw new Error(l+" units is invalid");return c/u}function a(c){return c%(2*Math.PI)*180/Math.PI}function i(c){return!isNaN(c)&&c!==null&&!Array.isArray(c)&&!/^\s*$/.test(c)}Object.defineProperty(I,"__esModule",{value:!0}),I.earthRadius=63710088e-1,I.factors={centimeters:100*I.earthRadius,centimetres:100*I.earthRadius,degrees:I.earthRadius/111325,feet:3.28084*I.earthRadius,inches:39.37*I.earthRadius,kilometers:I.earthRadius/1e3,kilometres:I.earthRadius/1e3,meters:I.earthRadius,metres:I.earthRadius,miles:I.earthRadius/1609.344,millimeters:1e3*I.earthRadius,millimetres:1e3*I.earthRadius,nauticalmiles:I.earthRadius/1852,radians:1,yards:I.earthRadius/1.0936},I.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/I.earthRadius,yards:.91441111923921},I.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},I.feature=o,I.geometry=function(c,l,u){switch(c){case"Point":return T(l).geometry;case"LineString":return r(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return s(l).geometry;case"MultiLineString":return h(l).geometry;case"MultiPolygon":return e(l).geometry;default:throw new Error(c+" is invalid")}},I.point=T,I.points=function(c,l,u){return u===void 0&&(u={}),m(c.map(function(f){return T(f,l)}),u)},I.polygon=k,I.polygons=function(c,l,u){return u===void 0&&(u={}),m(c.map(function(f){return k(f,l)}),u)},I.lineString=r,I.lineStrings=function(c,l,u){return u===void 0&&(u={}),m(c.map(function(f){return r(f,l)}),u)},I.featureCollection=m,I.multiLineString=h,I.multiPoint=s,I.multiPolygon=e,I.geometryCollection=function(c,l,u){return u===void 0&&(u={}),o({type:"GeometryCollection",geometries:c},l,u)},I.round=function(c,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(c*u)/u},I.radiansToLength=t,I.lengthToRadians=n,I.lengthToDegrees=function(c,l){return a(n(c,l))},I.bearingToAzimuth=function(c){var l=c%360;return l<0&&(l+=360),l},I.radiansToDegrees=a,I.degreesToRadians=function(c){return c%360*Math.PI/180},I.convertLength=function(c,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(c>=0))throw new Error("length must be a positive number");return t(n(c,l),u)},I.convertArea=function(c,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(c>=0))throw new Error("area must be a positive number");var f=I.areaFactors[l];if(!f)throw new Error("invalid original units");var d=I.areaFactors[u];if(!d)throw new Error("invalid final units");return c/f*d},I.isNumber=i,I.isObject=function(c){return!!c&&c.constructor===Object},I.validateBBox=function(c){if(!c)throw new Error("bbox is required");if(!Array.isArray(c))throw new Error("bbox must be an Array");if(c.length!==4&&c.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");c.forEach(function(l){if(!i(l))throw new Error("bbox must only contain numbers")})},I.validateId=function(c){if(!c)throw new Error("id is required");if(["string","number"].indexOf(typeof c)===-1)throw new Error("id must be a number or a string")},I.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},I.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},I.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},I.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},I.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},I.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},I.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function(W,I,o){Object.defineProperty(I,"__esModule",{value:!0});var T=o(64182);function k(n,a,i){if(n!==null)for(var c,l,u,f,d,w,v,p,y=0,b=0,x=n.type,_=x==="FeatureCollection",g=x==="Feature",A=_?n.features.length:1,M=0;M<A;M++){d=(p=!!(v=_?n.features[M].geometry:g?n.geometry:n)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var L=0;L<d;L++){var E=0,S=0;if((f=p?v.geometries[L]:v)!==null){w=f.coordinates;var O=f.type;switch(y=!i||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(a(w,b,M,E,S)===!1)return!1;b++,E++;break;case"LineString":case"MultiPoint":for(c=0;c<w.length;c++){if(a(w[c],b,M,E,S)===!1)return!1;b++,O==="MultiPoint"&&E++}O==="LineString"&&E++;break;case"Polygon":case"MultiLineString":for(c=0;c<w.length;c++){for(l=0;l<w[c].length-y;l++){if(a(w[c][l],b,M,E,S)===!1)return!1;b++}O==="MultiLineString"&&E++,O==="Polygon"&&S++}O==="Polygon"&&E++;break;case"MultiPolygon":for(c=0;c<w.length;c++){for(S=0,l=0;l<w[c].length;l++){for(u=0;u<w[c][l].length-y;u++){if(a(w[c][l][u],b,M,E,S)===!1)return!1;b++}S++}E++}break;case"GeometryCollection":for(c=0;c<f.geometries.length;c++)if(k(f.geometries[c],a,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(n,a){var i;switch(n.type){case"FeatureCollection":for(i=0;i<n.features.length&&a(n.features[i].properties,i)!==!1;i++);break;case"Feature":a(n.properties,0)}}function m(n,a){if(n.type==="Feature")a(n,0);else if(n.type==="FeatureCollection")for(var i=0;i<n.features.length&&a(n.features[i],i)!==!1;i++);}function h(n,a){var i,c,l,u,f,d,w,v,p,y,b=0,x=n.type==="FeatureCollection",_=n.type==="Feature",g=x?n.features.length:1;for(i=0;i<g;i++){for(d=x?n.features[i].geometry:_?n.geometry:n,v=x?n.features[i].properties:_?n.properties:{},p=x?n.features[i].bbox:_?n.bbox:void 0,y=x?n.features[i].id:_?n.id:void 0,f=(w=!!d&&d.type==="GeometryCollection")?d.geometries.length:1,l=0;l<f;l++)if((u=w?d.geometries[l]:d)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(a(u,b,v,p,y)===!1)return!1;break;case"GeometryCollection":for(c=0;c<u.geometries.length;c++)if(a(u.geometries[c],b,v,p,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(a(null,b,v,p,y)===!1)return!1;b++}}function s(n,a){h(n,function(i,c,l,u,f){var d,w=i===null?null:i.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return a(T.feature(i,l,{bbox:u,id:f}),c,0)!==!1&&void 0}switch(w){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon"}for(var v=0;v<i.coordinates.length;v++){var p={type:d,coordinates:i.coordinates[v]};if(a(T.feature(p,l),c,v)===!1)return!1}})}function e(n,a){s(n,function(i,c,l){var u=0;if(i.geometry){var f=i.geometry.type;if(f!=="Point"&&f!=="MultiPoint"){var d,w=0,v=0,p=0;return k(i,function(y,b,x,_,g){if(d===void 0||c>w||_>v||g>p)return d=y,w=c,v=_,p=g,void(u=0);var A=T.lineString([d,y],i.properties);if(a(A,c,l,g,u)===!1)return!1;u++,d=y})!==!1&&void 0}}})}function t(n,a){if(!n)throw new Error("geojson is required");s(n,function(i,c,l){if(i.geometry!==null){var u=i.geometry.type,f=i.geometry.coordinates;switch(u){case"LineString":if(a(i,c,l,0,0)===!1)return!1;break;case"Polygon":for(var d=0;d<f.length;d++)if(a(T.lineString(f[d],i.properties),c,l,d)===!1)return!1}}})}I.coordEach=k,I.coordReduce=function(n,a,i,c){var l=i;return k(n,function(u,f,d,w,v){l=f===0&&i===void 0?u:a(l,u,f,d,w,v)},c),l},I.propEach=r,I.propReduce=function(n,a,i){var c=i;return r(n,function(l,u){c=u===0&&i===void 0?l:a(c,l,u)}),c},I.featureEach=m,I.featureReduce=function(n,a,i){var c=i;return m(n,function(l,u){c=u===0&&i===void 0?l:a(c,l,u)}),c},I.coordAll=function(n){var a=[];return k(n,function(i){a.push(i)}),a},I.geomEach=h,I.geomReduce=function(n,a,i){var c=i;return h(n,function(l,u,f,d,w){c=u===0&&i===void 0?l:a(c,l,u,f,d,w)}),c},I.flattenEach=s,I.flattenReduce=function(n,a,i){var c=i;return s(n,function(l,u,f){c=u===0&&f===0&&i===void 0?l:a(c,l,u,f)}),c},I.segmentEach=e,I.segmentReduce=function(n,a,i){var c=i,l=!1;return e(n,function(u,f,d,w,v){c=l===!1&&i===void 0?u:a(c,u,f,d,w,v),l=!0}),c},I.lineEach=t,I.lineReduce=function(n,a,i){var c=i;return t(n,function(l,u,f,d){c=u===0&&i===void 0?l:a(c,l,u,f,d)}),c},I.findSegment=function(n,a){if(a=a||{},!T.isObject(a))throw new Error("options is invalid");var i,c=a.featureIndex||0,l=a.multiFeatureIndex||0,u=a.geometryIndex||0,f=a.segmentIndex||0,d=a.properties;switch(n.type){case"FeatureCollection":c<0&&(c=n.features.length+c),d=d||n.features[c].properties,i=n.features[c].geometry;break;case"Feature":d=d||n.properties,i=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=n;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var w=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=w.length+f-1),T.lineString([w[f],w[f+1]],d,a);case"Polygon":return u<0&&(u=w.length+u),f<0&&(f=w[u].length+f-1),T.lineString([w[u][f],w[u][f+1]],d,a);case"MultiLineString":return l<0&&(l=w.length+l),f<0&&(f=w[l].length+f-1),T.lineString([w[l][f],w[l][f+1]],d,a);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),f<0&&(f=w[l][u].length-f-1),T.lineString([w[l][u][f],w[l][u][f+1]],d,a)}throw new Error("geojson is invalid")},I.findPoint=function(n,a){if(a=a||{},!T.isObject(a))throw new Error("options is invalid");var i,c=a.featureIndex||0,l=a.multiFeatureIndex||0,u=a.geometryIndex||0,f=a.coordIndex||0,d=a.properties;switch(n.type){case"FeatureCollection":c<0&&(c=n.features.length+c),d=d||n.features[c].properties,i=n.features[c].geometry;break;case"Feature":d=d||n.properties,i=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=n;break;default:throw new Error("geojson is invalid")}if(i===null)return null;var w=i.coordinates;switch(i.type){case"Point":return T.point(w,d,a);case"MultiPoint":return l<0&&(l=w.length+l),T.point(w[l],d,a);case"LineString":return f<0&&(f=w.length+f),T.point(w[f],d,a);case"Polygon":return u<0&&(u=w.length+u),f<0&&(f=w[u].length+f),T.point(w[u][f],d,a);case"MultiLineString":return l<0&&(l=w.length+l),f<0&&(f=w[l].length+f),T.point(w[l][f],d,a);case"MultiPolygon":return l<0&&(l=w.length+l),u<0&&(u=w[l].length+u),f<0&&(f=w[l][u].length-f),T.point(w[l][u][f],d,a)}throw new Error("geojson is invalid")}},65185:function(W){W.exports=function(I){var o=0,T=0,k=0,r=0;return I.map(function(m){var h=(m=m.slice())[0],s=h.toUpperCase();if(h!=s)switch(m[0]=s,h){case"a":m[6]+=k,m[7]+=r;break;case"v":m[1]+=r;break;case"h":m[1]+=k;break;default:for(var e=1;e<m.length;)m[e++]+=k,m[e++]+=r}switch(s){case"Z":k=o,r=T;break;case"H":k=m[1];break;case"V":r=m[1];break;case"M":k=o=m[1],r=T=m[2];break;default:k=m[m.length-2],r=m[m.length-1]}return m})}},21527:function(W){W.exports=function(I,o){if(!I||I.length==null)throw Error("Argument should be an array");o=o==null?1:Math.floor(o);for(var T=Array(2*o),k=0;k<o;k++){for(var r=-1/0,m=1/0,h=k,s=I.length;h<s;h+=o)I[h]>r&&(r=I[h]),I[h]<m&&(m=I[h]);T[k]=m,T[o+k]=r}return T}},6851:function(W){W.exports=function(I,o,T){if(typeof Array.prototype.findIndex=="function")return I.findIndex(o,T);if(typeof o!="function")throw new TypeError("predicate must be a function");var k=Object(I),r=k.length;if(r===0)return-1;for(var m=0;m<r;m++)if(o.call(T,k[m],m,k))return m;return-1}},54:function(W,I,o){var T=o(21527);W.exports=function(k,r,m){if(!k||k.length==null)throw Error("Argument should be an array");r==null&&(r=1),m==null&&(m=T(k,r));for(var h=0;h<r;h++){var s=m[r+h],e=m[h],t=h,n=k.length;if(s===1/0&&e===-1/0)for(t=h;t<n;t+=r)k[t]=k[t]===s?1:k[t]===e?0:.5;else if(s===1/0)for(t=h;t<n;t+=r)k[t]=k[t]===s?1:0;else if(e===-1/0)for(t=h;t<n;t+=r)k[t]=k[t]===e?0:1;else{var a=s-e;for(t=h;t<n;t+=r)isNaN(k[t])||(k[t]=a===0?.5:(k[t]-e)/a)}}return k}},57471:function(W){W.exports=function(I,o){var T=typeof I=="number",k=typeof o=="number";T&&!k?(o=I,I=0):T||k||(I=0,o=0);var r=(o|=0)-(I|=0);if(r<0)throw new Error("array length must be positive");for(var m=new Array(r),h=0,s=I;h<r;h++,s++)m[h]=s;return m}},32791:function(W,I,o){var T=o(90386);function k(R){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},k(R)}var r,m,h=o(79616).codes,s=h.ERR_AMBIGUOUS_ARGUMENT,e=h.ERR_INVALID_ARG_TYPE,t=h.ERR_INVALID_ARG_VALUE,n=h.ERR_INVALID_RETURN_VALUE,a=h.ERR_MISSING_ARGS,i=o(73894),c=o(43827).inspect,l=o(43827).types,u=l.isPromise,f=l.isRegExp,d=Object.assign?Object.assign:o(73523).assign,w=Object.is?Object.is:o(64003);function v(){var R=o(74061);r=R.isDeepEqual,m=R.isDeepStrictEqual}var p=!1,y=W.exports=g,b={};function x(R){throw R.message instanceof Error?R.message:new i(R)}function _(R,j,B,z){if(!B){var G=!1;if(j===0)G=!0,z="No value argument passed to `assert.ok()`";else if(z instanceof Error)throw z;var V=new i({actual:B,expected:!0,message:z,operator:"==",stackStartFn:R});throw V.generatedMessage=G,V}}function g(){for(var R=arguments.length,j=new Array(R),B=0;B<R;B++)j[B]=arguments[B];_.apply(void 0,[g,j.length].concat(j))}y.fail=function R(j,B,z,G,V){var et,J=arguments.length;if(J===0?et="Failed":J===1?(z=j,j=void 0):(p===!1&&(p=!0,(T.emitWarning?T.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),J===2&&(G="!=")),z instanceof Error)throw z;var X={actual:j,expected:B,operator:G===void 0?"fail":G,stackStartFn:V||R};z!==void 0&&(X.message=z);var Y=new i(X);throw et&&(Y.message=et,Y.generatedMessage=!0),Y},y.AssertionError=i,y.ok=g,y.equal=function R(j,B,z){if(arguments.length<2)throw new a("actual","expected");j!=B&&x({actual:j,expected:B,message:z,operator:"==",stackStartFn:R})},y.notEqual=function R(j,B,z){if(arguments.length<2)throw new a("actual","expected");j==B&&x({actual:j,expected:B,message:z,operator:"!=",stackStartFn:R})},y.deepEqual=function R(j,B,z){if(arguments.length<2)throw new a("actual","expected");r===void 0&&v(),r(j,B)||x({actual:j,expected:B,message:z,operator:"deepEqual",stackStartFn:R})},y.notDeepEqual=function R(j,B,z){if(arguments.length<2)throw new a("actual","expected");r===void 0&&v(),r(j,B)&&x({actual:j,expected:B,message:z,operator:"notDeepEqual",stackStartFn:R})},y.deepStrictEqual=function R(j,B,z){if(arguments.length<2)throw new a("actual","expected");r===void 0&&v(),m(j,B)||x({actual:j,expected:B,message:z,operator:"deepStrictEqual",stackStartFn:R})},y.notDeepStrictEqual=function R(j,B,z){if(arguments.length<2)throw new a("actual","expected");r===void 0&&v(),m(j,B)&&x({actual:j,expected:B,message:z,operator:"notDeepStrictEqual",stackStartFn:R})},y.strictEqual=function R(j,B,z){if(arguments.length<2)throw new a("actual","expected");w(j,B)||x({actual:j,expected:B,message:z,operator:"strictEqual",stackStartFn:R})},y.notStrictEqual=function R(j,B,z){if(arguments.length<2)throw new a("actual","expected");w(j,B)&&x({actual:j,expected:B,message:z,operator:"notStrictEqual",stackStartFn:R})};var A=function R(j,B,z){var G=this;(function(V,et){if(!(V instanceof et))throw new TypeError("Cannot call a class as a function")})(this,R),B.forEach(function(V){V in j&&(z!==void 0&&typeof z[V]=="string"&&f(j[V])&&j[V].test(z[V])?G[V]=z[V]:G[V]=j[V])})};function M(R,j,B,z){if(typeof j!="function"){if(f(j))return j.test(R);if(arguments.length===2)throw new e("expected",["Function","RegExp"],j);if(k(R)!=="object"||R===null){var G=new i({actual:R,expected:j,message:B,operator:"deepStrictEqual",stackStartFn:z});throw G.operator=z.name,G}var V=Object.keys(j);if(j instanceof Error)V.push("name","message");else if(V.length===0)throw new t("error",j,"may not be an empty object");return r===void 0&&v(),V.forEach(function(et){typeof R[et]=="string"&&f(j[et])&&j[et].test(R[et])||function(J,X,Y,Z,tt,rt){if(!(Y in J)||!m(J[Y],X[Y])){if(!Z){var nt=new A(J,tt),ot=new A(X,tt,J),ct=new i({actual:nt,expected:ot,operator:"deepStrictEqual",stackStartFn:rt});throw ct.actual=J,ct.expected=X,ct.operator=rt.name,ct}x({actual:J,expected:X,message:Z,operator:rt.name,stackStartFn:rt})}}(R,j,et,B,V,z)}),!0}return j.prototype!==void 0&&R instanceof j||!Error.isPrototypeOf(j)&&j.call({},R)===!0}function L(R){if(typeof R!="function")throw new e("fn","Function",R);try{R()}catch(j){return j}return b}function E(R){return u(R)||R!==null&&k(R)==="object"&&typeof R.then=="function"&&typeof R.catch=="function"}function S(R){return Promise.resolve().then(function(){var j;if(typeof R=="function"){if(!E(j=R()))throw new n("instance of Promise","promiseFn",j)}else{if(!E(R))throw new e("promiseFn",["Function","Promise"],R);j=R}return Promise.resolve().then(function(){return j}).then(function(){return b}).catch(function(B){return B})})}function O(R,j,B,z){if(typeof B=="string"){if(arguments.length===4)throw new e("error",["Object","Error","Function","RegExp"],B);if(k(j)==="object"&&j!==null){if(j.message===B)throw new s("error/message",'The error message "'.concat(j.message,'" is identical to the message.'))}else if(j===B)throw new s("error/message",'The error "'.concat(j,'" is identical to the message.'));z=B,B=void 0}else if(B!=null&&k(B)!=="object"&&typeof B!="function")throw new e("error",["Object","Error","Function","RegExp"],B);if(j===b){var G="";B&&B.name&&(G+=" (".concat(B.name,")")),G+=z?": ".concat(z):".";var V=R.name==="rejects"?"rejection":"exception";x({actual:void 0,expected:B,operator:R.name,message:"Missing expected ".concat(V).concat(G),stackStartFn:R})}if(B&&!M(j,B,z,R))throw j}function P(R,j,B,z){if(j!==b){if(typeof B=="string"&&(z=B,B=void 0),!B||M(j,B)){var G=z?": ".concat(z):".",V=R.name==="doesNotReject"?"rejection":"exception";x({actual:j,expected:B,operator:R.name,message:"Got unwanted ".concat(V).concat(G,`
`)+'Actual message: "'.concat(j&&j.message,'"'),stackStartFn:R})}throw j}}function U(){for(var R=arguments.length,j=new Array(R),B=0;B<R;B++)j[B]=arguments[B];_.apply(void 0,[U,j.length].concat(j))}y.throws=function R(j){for(var B=arguments.length,z=new Array(B>1?B-1:0),G=1;G<B;G++)z[G-1]=arguments[G];O.apply(void 0,[R,L(j)].concat(z))},y.rejects=function R(j){for(var B=arguments.length,z=new Array(B>1?B-1:0),G=1;G<B;G++)z[G-1]=arguments[G];return S(j).then(function(V){return O.apply(void 0,[R,V].concat(z))})},y.doesNotThrow=function R(j){for(var B=arguments.length,z=new Array(B>1?B-1:0),G=1;G<B;G++)z[G-1]=arguments[G];P.apply(void 0,[R,L(j)].concat(z))},y.doesNotReject=function R(j){for(var B=arguments.length,z=new Array(B>1?B-1:0),G=1;G<B;G++)z[G-1]=arguments[G];return S(j).then(function(V){return P.apply(void 0,[R,V].concat(z))})},y.ifError=function R(j){if(j!=null){var B="ifError got unwanted exception: ";k(j)==="object"&&typeof j.message=="string"?j.message.length===0&&j.constructor?B+=j.constructor.name:B+=j.message:B+=c(j);var z=new i({actual:j,expected:null,operator:"ifError",message:B,stackStartFn:R}),G=j.stack;if(typeof G=="string"){var V=G.split(`
`);V.shift();for(var et=z.stack.split(`
`),J=0;J<V.length;J++){var X=et.indexOf(V[J]);if(X!==-1){et=et.slice(0,X);break}}z.stack="".concat(et.join(`
`),`
`).concat(V.join(`
`))}throw z}},y.strict=d(U,y,{equal:y.strictEqual,deepEqual:y.deepStrictEqual,notEqual:y.notStrictEqual,notDeepEqual:y.notDeepStrictEqual}),y.strict.strict=y.strict},73894:function(W,I,o){var T=o(90386);function k(x,_,g){return _ in x?Object.defineProperty(x,_,{value:g,enumerable:!0,configurable:!0,writable:!0}):x[_]=g,x}function r(x,_){for(var g=0;g<_.length;g++){var A=_[g];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(x,A.key,A)}}function m(x,_){return!_||a(_)!=="object"&&typeof _!="function"?h(x):_}function h(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function s(x){var _=typeof Map=="function"?new Map:void 0;return s=function(g){if(g===null||(A=g,Function.toString.call(A).indexOf("[native code]")===-1))return g;var A;if(typeof g!="function")throw new TypeError("Super expression must either be null or a function");if(_!==void 0){if(_.has(g))return _.get(g);_.set(g,M)}function M(){return e(g,arguments,n(this).constructor)}return M.prototype=Object.create(g.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),t(M,g)},s(x)}function e(x,_,g){return e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(A,M,L){var E=[null];E.push.apply(E,M);var S=new(Function.bind.apply(A,E));return L&&t(S,L.prototype),S},e.apply(null,arguments)}function t(x,_){return t=Object.setPrototypeOf||function(g,A){return g.__proto__=A,g},t(x,_)}function n(x){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},n(x)}function a(x){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},a(x)}var i=o(43827).inspect,c=o(79616).codes.ERR_INVALID_ARG_TYPE;function l(x,_,g){return(g===void 0||g>x.length)&&(g=x.length),x.substring(g-_.length,g)===_}var u="",f="",d="",w="",v={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function p(x){var _=Object.keys(x),g=Object.create(Object.getPrototypeOf(x));return _.forEach(function(A){g[A]=x[A]}),Object.defineProperty(g,"message",{value:x.message}),g}function y(x){return i(x,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var b=function(x){function _(M){var L;if(function(et,J){if(!(et instanceof J))throw new TypeError("Cannot call a class as a function")}(this,_),a(M)!=="object"||M===null)throw new c("options","Object",M);var E=M.message,S=M.operator,O=M.stackStartFn,P=M.actual,U=M.expected,R=Error.stackTraceLimit;if(Error.stackTraceLimit=0,E!=null)L=m(this,n(_).call(this,String(E)));else if(T.stderr&&T.stderr.isTTY&&(T.stderr&&T.stderr.getColorDepth&&T.stderr.getColorDepth()!==1?(u="\x1B[34m",f="\x1B[32m",w="\x1B[39m",d="\x1B[31m"):(u="",f="",w="",d="")),a(P)==="object"&&P!==null&&a(U)==="object"&&U!==null&&"stack"in P&&P instanceof Error&&"stack"in U&&U instanceof Error&&(P=p(P),U=p(U)),S==="deepStrictEqual"||S==="strictEqual")L=m(this,n(_).call(this,function(et,J,X){var Y="",Z="",tt=0,rt="",nt=!1,ot=y(et),ct=ot.split(`
`),pt=y(J).split(`
`),gt=0,kt="";if(X==="strictEqual"&&a(et)==="object"&&a(J)==="object"&&et!==null&&J!==null&&(X="strictEqualObject"),ct.length===1&&pt.length===1&&ct[0]!==pt[0]){var yt=ct[0].length+pt[0].length;if(yt<=10){if(!(a(et)==="object"&&et!==null||a(J)==="object"&&J!==null||et===0&&J===0))return"".concat(v[X],`

`)+"".concat(ct[0]," !== ").concat(pt[0],`
`)}else if(X!=="strictEqualObject"&&yt<(T.stderr&&T.stderr.isTTY?T.stderr.columns:80)){for(;ct[0][gt]===pt[0][gt];)gt++;gt>2&&(kt=`
  `.concat(function(Dt,ut){if(ut=Math.floor(ut),Dt.length==0||ut==0)return"";var Tt=Dt.length*ut;for(ut=Math.floor(Math.log(ut)/Math.log(2));ut;)Dt+=Dt,ut--;return Dt+Dt.substring(0,Tt-Dt.length)}(" ",gt),"^"),gt=0)}}for(var mt=ct[ct.length-1],Ot=pt[pt.length-1];mt===Ot&&(gt++<2?rt=`
  `.concat(mt).concat(rt):Y=mt,ct.pop(),pt.pop(),ct.length!==0&&pt.length!==0);)mt=ct[ct.length-1],Ot=pt[pt.length-1];var vt=Math.max(ct.length,pt.length);if(vt===0){var xt=ot.split(`
`);if(xt.length>30)for(xt[26]="".concat(u,"...").concat(w);xt.length>27;)xt.pop();return"".concat(v.notIdentical,`

`).concat(xt.join(`
`),`
`)}gt>3&&(rt=`
`.concat(u,"...").concat(w).concat(rt),nt=!0),Y!==""&&(rt=`
  `.concat(Y).concat(rt),Y="");var st=0,at=v[X]+`
`.concat(f,"+ actual").concat(w," ").concat(d,"- expected").concat(w),ht=" ".concat(u,"...").concat(w," Lines skipped");for(gt=0;gt<vt;gt++){var Lt=gt-tt;if(ct.length<gt+1)Lt>1&&gt>2&&(Lt>4?(Z+=`
`.concat(u,"...").concat(w),nt=!0):Lt>3&&(Z+=`
  `.concat(pt[gt-2]),st++),Z+=`
  `.concat(pt[gt-1]),st++),tt=gt,Y+=`
`.concat(d,"-").concat(w," ").concat(pt[gt]),st++;else if(pt.length<gt+1)Lt>1&&gt>2&&(Lt>4?(Z+=`
`.concat(u,"...").concat(w),nt=!0):Lt>3&&(Z+=`
  `.concat(ct[gt-2]),st++),Z+=`
  `.concat(ct[gt-1]),st++),tt=gt,Z+=`
`.concat(f,"+").concat(w," ").concat(ct[gt]),st++;else{var Mt=pt[gt],_t=ct[gt],St=_t!==Mt&&(!l(_t,",")||_t.slice(0,-1)!==Mt);St&&l(Mt,",")&&Mt.slice(0,-1)===_t&&(St=!1,_t+=","),St?(Lt>1&&gt>2&&(Lt>4?(Z+=`
`.concat(u,"...").concat(w),nt=!0):Lt>3&&(Z+=`
  `.concat(ct[gt-2]),st++),Z+=`
  `.concat(ct[gt-1]),st++),tt=gt,Z+=`
`.concat(f,"+").concat(w," ").concat(_t),Y+=`
`.concat(d,"-").concat(w," ").concat(Mt),st+=2):(Z+=Y,Y="",Lt!==1&&gt!==0||(Z+=`
  `.concat(_t),st++))}if(st>20&&gt<vt-2)return"".concat(at).concat(ht,`
`).concat(Z,`
`).concat(u,"...").concat(w).concat(Y,`
`)+"".concat(u,"...").concat(w)}return"".concat(at).concat(nt?ht:"",`
`).concat(Z).concat(Y).concat(rt).concat(kt)}(P,U,S)));else if(S==="notDeepStrictEqual"||S==="notStrictEqual"){var j=v[S],B=y(P).split(`
`);if(S==="notStrictEqual"&&a(P)==="object"&&P!==null&&(j=v.notStrictEqualObject),B.length>30)for(B[26]="".concat(u,"...").concat(w);B.length>27;)B.pop();L=B.length===1?m(this,n(_).call(this,"".concat(j," ").concat(B[0]))):m(this,n(_).call(this,"".concat(j,`

`).concat(B.join(`
`),`
`)))}else{var z=y(P),G="",V=v[S];S==="notDeepEqual"||S==="notEqual"?(z="".concat(v[S],`

`).concat(z)).length>1024&&(z="".concat(z.slice(0,1021),"...")):(G="".concat(y(U)),z.length>512&&(z="".concat(z.slice(0,509),"...")),G.length>512&&(G="".concat(G.slice(0,509),"...")),S==="deepEqual"||S==="equal"?z="".concat(V,`

`).concat(z,`

should equal

`):G=" ".concat(S," ").concat(G)),L=m(this,n(_).call(this,"".concat(z).concat(G)))}return Error.stackTraceLimit=R,L.generatedMessage=!E,Object.defineProperty(h(L),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),L.code="ERR_ASSERTION",L.actual=P,L.expected=U,L.operator=S,Error.captureStackTrace&&Error.captureStackTrace(h(L),O),L.stack,L.name="AssertionError",m(L)}var g,A;return function(M,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(L&&L.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),L&&t(M,L)}(_,x),g=_,A=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:i.custom,value:function(M,L){return i(this,function(E){for(var S=1;S<arguments.length;S++){var O=arguments[S]!=null?arguments[S]:{},P=Object.keys(O);typeof Object.getOwnPropertySymbols=="function"&&(P=P.concat(Object.getOwnPropertySymbols(O).filter(function(U){return Object.getOwnPropertyDescriptor(O,U).enumerable}))),P.forEach(function(U){k(E,U,O[U])})}return E}({},L,{customInspect:!1,depth:0}))}}],A&&r(g.prototype,A),_}(s(Error));W.exports=b},79616:function(W,I,o){function T(n){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},T(n)}function k(n){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},k(n)}function r(n,a){return r=Object.setPrototypeOf||function(i,c){return i.__proto__=c,i},r(n,a)}var m,h,s={};function e(n,a,i){i||(i=Error);var c=function(l){function u(f,d,w){var v;return function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}(this,u),v=function(p,y){return!y||T(y)!=="object"&&typeof y!="function"?function(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(p):y}(this,k(u).call(this,function(p,y,b){return typeof a=="string"?a:a(p,y,b)}(f,d,w))),v.code=n,v}return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),d&&r(f,d)}(u,l),u}(i);s[n]=c}function t(n,a){if(Array.isArray(n)){var i=n.length;return n=n.map(function(c){return String(c)}),i>2?"one of ".concat(a," ").concat(n.slice(0,i-1).join(", "),", or ")+n[i-1]:i===2?"one of ".concat(a," ").concat(n[0]," or ").concat(n[1]):"of ".concat(a," ").concat(n[0])}return"of ".concat(a," ").concat(String(n))}e("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),e("ERR_INVALID_ARG_TYPE",function(n,a,i){var c,l,u,f,d;if(m===void 0&&(m=o(32791)),m(typeof n=="string","'name' must be a string"),typeof a=="string"&&(l="not ",a.substr(0,4)===l)?(c="must not be",a=a.replace(/^not /,"")):c="must be",function(v,p,y){return(y===void 0||y>v.length)&&(y=v.length),v.substring(y-9,y)===p}(n," argument"))u="The ".concat(n," ").concat(c," ").concat(t(a,"type"));else{var w=(typeof d!="number"&&(d=0),d+1>(f=n).length||f.indexOf(".",d)===-1?"argument":"property");u='The "'.concat(n,'" ').concat(w," ").concat(c," ").concat(t(a,"type"))}return u+". Received type ".concat(T(i))},TypeError),e("ERR_INVALID_ARG_VALUE",function(n,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";h===void 0&&(h=o(43827));var c=h.inspect(a);return c.length>128&&(c="".concat(c.slice(0,128),"...")),"The argument '".concat(n,"' ").concat(i,". Received ").concat(c)},TypeError),e("ERR_INVALID_RETURN_VALUE",function(n,a,i){var c;return c=i&&i.constructor&&i.constructor.name?"instance of ".concat(i.constructor.name):"type ".concat(T(i)),"Expected ".concat(n,' to be returned from the "').concat(a,'"')+" function but got ".concat(c,".")},TypeError),e("ERR_MISSING_ARGS",function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];m===void 0&&(m=o(32791)),m(a.length>0,"At least one arg needs to be specified");var c="The ",l=a.length;switch(a=a.map(function(u){return'"'.concat(u,'"')}),l){case 1:c+="".concat(a[0]," argument");break;case 2:c+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:c+=a.slice(0,l-1).join(", "),c+=", and ".concat(a[l-1]," arguments")}return"".concat(c," must be specified")},TypeError),W.exports.codes=s},74061:function(W,I,o){function T(tt,rt){return function(nt){if(Array.isArray(nt))return nt}(tt)||function(nt,ot){var ct=[],pt=!0,gt=!1,kt=void 0;try{for(var yt,mt=nt[Symbol.iterator]();!(pt=(yt=mt.next()).done)&&(ct.push(yt.value),!ot||ct.length!==ot);pt=!0);}catch(Ot){gt=!0,kt=Ot}finally{try{pt||mt.return==null||mt.return()}finally{if(gt)throw kt}}return ct}(tt,rt)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(tt){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},k(tt)}var r=/a/g.flags!==void 0,m=function(tt){var rt=[];return tt.forEach(function(nt){return rt.push(nt)}),rt},h=function(tt){var rt=[];return tt.forEach(function(nt,ot){return rt.push([ot,nt])}),rt},s=Object.is?Object.is:o(64003),e=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:o(15567);function n(tt){return tt.call.bind(tt)}var a=n(Object.prototype.hasOwnProperty),i=n(Object.prototype.propertyIsEnumerable),c=n(Object.prototype.toString),l=o(43827).types,u=l.isAnyArrayBuffer,f=l.isArrayBufferView,d=l.isDate,w=l.isMap,v=l.isRegExp,p=l.isSet,y=l.isNativeError,b=l.isBoxedPrimitive,x=l.isNumberObject,_=l.isStringObject,g=l.isBooleanObject,A=l.isBigIntObject,M=l.isSymbolObject,L=l.isFloat32Array,E=l.isFloat64Array;function S(tt){if(tt.length===0||tt.length>10)return!0;for(var rt=0;rt<tt.length;rt++){var nt=tt.charCodeAt(rt);if(nt<48||nt>57)return!0}return tt.length===10&&tt>=Math.pow(2,32)}function O(tt){return Object.keys(tt).filter(S).concat(e(tt).filter(Object.prototype.propertyIsEnumerable.bind(tt)))}function P(tt,rt){if(tt===rt)return 0;for(var nt=tt.length,ot=rt.length,ct=0,pt=Math.min(nt,ot);ct<pt;++ct)if(tt[ct]!==rt[ct]){nt=tt[ct],ot=rt[ct];break}return nt<ot?-1:ot<nt?1:0}var U=0,R=1,j=2,B=3;function z(tt,rt,nt,ot){if(tt===rt)return tt!==0||!nt||s(tt,rt);if(nt){if(k(tt)!=="object")return typeof tt=="number"&&t(tt)&&t(rt);if(k(rt)!=="object"||tt===null||rt===null||Object.getPrototypeOf(tt)!==Object.getPrototypeOf(rt))return!1}else{if(tt===null||k(tt)!=="object")return(rt===null||k(rt)!=="object")&&tt==rt;if(rt===null||k(rt)!=="object")return!1}var ct,pt,gt,kt,yt=c(tt);if(yt!==c(rt))return!1;if(Array.isArray(tt)){if(tt.length!==rt.length)return!1;var mt=O(tt),Ot=O(rt);return mt.length===Ot.length&&V(tt,rt,nt,ot,R,mt)}if(yt==="[object Object]"&&(!w(tt)&&w(rt)||!p(tt)&&p(rt)))return!1;if(d(tt)){if(!d(rt)||Date.prototype.getTime.call(tt)!==Date.prototype.getTime.call(rt))return!1}else if(v(tt)){if(!v(rt)||(gt=tt,kt=rt,!(r?gt.source===kt.source&&gt.flags===kt.flags:RegExp.prototype.toString.call(gt)===RegExp.prototype.toString.call(kt))))return!1}else if(y(tt)||tt instanceof Error){if(tt.message!==rt.message||tt.name!==rt.name)return!1}else{if(f(tt)){if(nt||!L(tt)&&!E(tt)){if(!function(st,at){return st.byteLength===at.byteLength&&P(new Uint8Array(st.buffer,st.byteOffset,st.byteLength),new Uint8Array(at.buffer,at.byteOffset,at.byteLength))===0}(tt,rt))return!1}else if(!function(st,at){if(st.byteLength!==at.byteLength)return!1;for(var ht=0;ht<st.byteLength;ht++)if(st[ht]!==at[ht])return!1;return!0}(tt,rt))return!1;var vt=O(tt),xt=O(rt);return vt.length===xt.length&&V(tt,rt,nt,ot,U,vt)}if(p(tt))return!(!p(rt)||tt.size!==rt.size)&&V(tt,rt,nt,ot,j);if(w(tt))return!(!w(rt)||tt.size!==rt.size)&&V(tt,rt,nt,ot,B);if(u(tt)){if(pt=rt,(ct=tt).byteLength!==pt.byteLength||P(new Uint8Array(ct),new Uint8Array(pt))!==0)return!1}else if(b(tt)&&!function(st,at){return x(st)?x(at)&&s(Number.prototype.valueOf.call(st),Number.prototype.valueOf.call(at)):_(st)?_(at)&&String.prototype.valueOf.call(st)===String.prototype.valueOf.call(at):g(st)?g(at)&&Boolean.prototype.valueOf.call(st)===Boolean.prototype.valueOf.call(at):A(st)?A(at)&&BigInt.prototype.valueOf.call(st)===BigInt.prototype.valueOf.call(at):M(at)&&Symbol.prototype.valueOf.call(st)===Symbol.prototype.valueOf.call(at)}(tt,rt))return!1}return V(tt,rt,nt,ot,U)}function G(tt,rt){return rt.filter(function(nt){return i(tt,nt)})}function V(tt,rt,nt,ot,ct,pt){if(arguments.length===5){pt=Object.keys(tt);var gt=Object.keys(rt);if(pt.length!==gt.length)return!1}for(var kt=0;kt<pt.length;kt++)if(!a(rt,pt[kt]))return!1;if(nt&&arguments.length===5){var yt=e(tt);if(yt.length!==0){var mt=0;for(kt=0;kt<yt.length;kt++){var Ot=yt[kt];if(i(tt,Ot)){if(!i(rt,Ot))return!1;pt.push(Ot),mt++}else if(i(rt,Ot))return!1}var vt=e(rt);if(yt.length!==vt.length&&G(rt,vt).length!==mt)return!1}else{var xt=e(rt);if(xt.length!==0&&G(rt,xt).length!==0)return!1}}if(pt.length===0&&(ct===U||ct===R&&tt.length===0||tt.size===0))return!0;if(ot===void 0)ot={val1:new Map,val2:new Map,position:0};else{var st=ot.val1.get(tt);if(st!==void 0){var at=ot.val2.get(rt);if(at!==void 0)return st===at}ot.position++}ot.val1.set(tt,ot.position),ot.val2.set(rt,ot.position);var ht=function(Lt,Mt,_t,St,Dt,ut){var Tt=0;if(ut===j){if(!function(Ft,$t,Wt,Xt){for(var ae=null,Qt=m(Ft),de=0;de<Qt.length;de++){var ye=Qt[de];if(k(ye)==="object"&&ye!==null)ae===null&&(ae=new Set),ae.add(ye);else if(!$t.has(ye)){if(Wt||!X(Ft,$t,ye))return!1;ae===null&&(ae=new Set),ae.add(ye)}}if(ae!==null){for(var ve=m($t),ie=0;ie<ve.length;ie++){var se=ve[ie];if(k(se)==="object"&&se!==null){if(!et(ae,se,Wt,Xt))return!1}else if(!Wt&&!Ft.has(se)&&!et(ae,se,Wt,Xt))return!1}return ae.size===0}return!0}(Lt,Mt,_t,Dt))return!1}else if(ut===B){if(!function(Ft,$t,Wt,Xt){for(var ae=null,Qt=h(Ft),de=0;de<Qt.length;de++){var ye=T(Qt[de],2),ve=ye[0],ie=ye[1];if(k(ve)==="object"&&ve!==null)ae===null&&(ae=new Set),ae.add(ve);else{var se=$t.get(ve);if(se===void 0&&!$t.has(ve)||!z(ie,se,Wt,Xt)){if(Wt||!Y(Ft,$t,ve,ie,Xt))return!1;ae===null&&(ae=new Set),ae.add(ve)}}}if(ae!==null){for(var ke=h($t),Ae=0;Ae<ke.length;Ae++){var Ie=T(ke[Ae],2),Te=(ve=Ie[0],Ie[1]);if(k(ve)==="object"&&ve!==null){if(!Z(ae,Ft,ve,Te,Wt,Xt))return!1}else if(!(Wt||Ft.has(ve)&&z(Ft.get(ve),Te,!1,Xt)||Z(ae,Ft,ve,Te,!1,Xt)))return!1}return ae.size===0}return!0}(Lt,Mt,_t,Dt))return!1}else if(ut===R)for(;Tt<Lt.length;Tt++){if(!a(Lt,Tt)){if(a(Mt,Tt))return!1;for(var bt=Object.keys(Lt);Tt<bt.length;Tt++){var It=bt[Tt];if(!a(Mt,It)||!z(Lt[It],Mt[It],_t,Dt))return!1}return bt.length===Object.keys(Mt).length}if(!a(Mt,Tt)||!z(Lt[Tt],Mt[Tt],_t,Dt))return!1}for(Tt=0;Tt<St.length;Tt++){var zt=St[Tt];if(!z(Lt[zt],Mt[zt],_t,Dt))return!1}return!0}(tt,rt,nt,pt,ot,ct);return ot.val1.delete(tt),ot.val2.delete(rt),ht}function et(tt,rt,nt,ot){for(var ct=m(tt),pt=0;pt<ct.length;pt++){var gt=ct[pt];if(z(rt,gt,nt,ot))return tt.delete(gt),!0}return!1}function J(tt){switch(k(tt)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":tt=+tt;case"number":if(t(tt))return!1}return!0}function X(tt,rt,nt){var ot=J(nt);return ot??(rt.has(ot)&&!tt.has(ot))}function Y(tt,rt,nt,ot,ct){var pt=J(nt);if(pt!=null)return pt;var gt=rt.get(pt);return!(gt===void 0&&!rt.has(pt)||!z(ot,gt,!1,ct))&&!tt.has(pt)&&z(ot,gt,!1,ct)}function Z(tt,rt,nt,ot,ct,pt){for(var gt=m(tt),kt=0;kt<gt.length;kt++){var yt=gt[kt];if(z(nt,yt,ct,pt)&&z(ot,rt.get(yt),ct,pt))return tt.delete(yt),!0}return!1}W.exports={isDeepEqual:function(tt,rt){return z(tt,rt,!1)},isDeepStrictEqual:function(tt,rt){return z(tt,rt,!0)}}},95341:function(W,I){I.byteLength=function(e){var t=h(e),n=t[0],a=t[1];return 3*(n+a)/4-a},I.toByteArray=function(e){var t,n,a=h(e),i=a[0],c=a[1],l=new k(function(d,w,v){return 3*(w+v)/4-v}(0,i,c)),u=0,f=c>0?i-4:i;for(n=0;n<f;n+=4)t=T[e.charCodeAt(n)]<<18|T[e.charCodeAt(n+1)]<<12|T[e.charCodeAt(n+2)]<<6|T[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return c===2&&(t=T[e.charCodeAt(n)]<<2|T[e.charCodeAt(n+1)]>>4,l[u++]=255&t),c===1&&(t=T[e.charCodeAt(n)]<<10|T[e.charCodeAt(n+1)]<<4|T[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},I.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],c=16383,l=0,u=n-a;l<u;l+=c)i.push(s(e,l,l+c>u?u:l+c));return a===1?(t=e[n-1],i.push(o[t>>2]+o[t<<4&63]+"==")):a===2&&(t=(e[n-2]<<8)+e[n-1],i.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),i.join("")};for(var o=[],T=[],k=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0;m<64;++m)o[m]=r[m],T[r.charCodeAt(m)]=m;function h(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return n===-1&&(n=t),[n,n===t?0:4-n%4]}function s(e,t,n){for(var a,i,c=[],l=t;l<n;l+=3)a=(e[l]<<16&16711680)+(e[l+1]<<8&65280)+(255&e[l+2]),c.push(o[(i=a)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return c.join("")}T["-".charCodeAt(0)]=62,T["_".charCodeAt(0)]=63},91358:function(W){function I(h,s,e,t,n){for(var a=n+1;t<=n;){var i=t+n>>>1,c=h[i];(e!==void 0?e(c,s):c-s)>=0?(a=i,n=i-1):t=i+1}return a}function o(h,s,e,t,n){for(var a=n+1;t<=n;){var i=t+n>>>1,c=h[i];(e!==void 0?e(c,s):c-s)>0?(a=i,n=i-1):t=i+1}return a}function T(h,s,e,t,n){for(var a=t-1;t<=n;){var i=t+n>>>1,c=h[i];(e!==void 0?e(c,s):c-s)<0?(a=i,t=i+1):n=i-1}return a}function k(h,s,e,t,n){for(var a=t-1;t<=n;){var i=t+n>>>1,c=h[i];(e!==void 0?e(c,s):c-s)<=0?(a=i,t=i+1):n=i-1}return a}function r(h,s,e,t,n){for(;t<=n;){var a=t+n>>>1,i=h[a],c=e!==void 0?e(i,s):i-s;if(c===0)return a;c<=0?t=a+1:n=a-1}return-1}function m(h,s,e,t,n,a){return typeof e=="function"?a(h,s,e,t===void 0?0:0|t,n===void 0?h.length-1:0|n):a(h,s,void 0,e===void 0?0:0|e,t===void 0?h.length-1:0|t)}W.exports={ge:function(h,s,e,t,n){return m(h,s,e,t,n,I)},gt:function(h,s,e,t,n){return m(h,s,e,t,n,o)},lt:function(h,s,e,t,n){return m(h,s,e,t,n,T)},le:function(h,s,e,t,n){return m(h,s,e,t,n,k)},eq:function(h,s,e,t,n){return m(h,s,e,t,n,r)}}},13547:function(W,I){function o(k){var r=32;return(k&=-k)&&r--,65535&k&&(r-=16),16711935&k&&(r-=8),252645135&k&&(r-=4),858993459&k&&(r-=2),1431655765&k&&(r-=1),r}I.INT_BITS=32,I.INT_MAX=2147483647,I.INT_MIN=-2147483648,I.sign=function(k){return(k>0)-(k<0)},I.abs=function(k){var r=k>>31;return(k^r)-r},I.min=function(k,r){return r^(k^r)&-(k<r)},I.max=function(k,r){return k^(k^r)&-(k<r)},I.isPow2=function(k){return!(k&k-1||!k)},I.log2=function(k){var r,m;return r=(k>65535)<<4,r|=m=((k>>>=r)>255)<<3,r|=m=((k>>>=m)>15)<<2,(r|=m=((k>>>=m)>3)<<1)|(k>>>=m)>>1},I.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},I.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},I.countTrailingZeros=o,I.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},I.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},I.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var T=new Array(256);(function(k){for(var r=0;r<256;++r){var m=r,h=r,s=7;for(m>>>=1;m;m>>>=1)h<<=1,h|=1&m,--s;k[r]=h<<s&255}})(T),I.reverse=function(k){return T[255&k]<<24|T[k>>>8&255]<<16|T[k>>>16&255]<<8|T[k>>>24&255]},I.interleave2=function(k,r){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},I.deinterleave2=function(k,r){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>r&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},I.interleave3=function(k,r,m){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(m=1227133513&((m=3272356035&((m=251719695&((m=4278190335&((m&=1023)|m<<16))|m<<8))|m<<4))|m<<2))<<2},I.deinterleave3=function(k,r){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>r&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},I.nextCombination=function(k){var r=k|k-1;return r+1|(~r&-~r)-1>>>o(k)+1}},44781:function(W,I,o){var T=o(53435);W.exports=function(h,s){s||(s={});var e,t,n,a,i,c,l,u,f,d,w,v=s.cutoff==null?.25:s.cutoff,p=s.radius==null?8:s.radius,y=s.channel||0;if(ArrayBuffer.isView(h)||Array.isArray(h)){if(!s.width||!s.height)throw Error("For raw data width and height should be provided by options");e=s.width,t=s.height,a=h,c=s.stride?s.stride:Math.floor(h.length/e/t)}else window.HTMLCanvasElement&&h instanceof window.HTMLCanvasElement?(l=(u=h).getContext("2d"),e=u.width,t=u.height,a=(f=l.getImageData(0,0,e,t)).data,c=4):window.CanvasRenderingContext2D&&h instanceof window.CanvasRenderingContext2D?(l=h,e=(u=h.canvas).width,t=u.height,a=(f=l.getImageData(0,0,e,t)).data,c=4):window.ImageData&&h instanceof window.ImageData&&(f=h,e=h.width,t=h.height,a=f.data,c=4);if(n=Math.max(e,t),window.Uint8ClampedArray&&a instanceof window.Uint8ClampedArray||window.Uint8Array&&a instanceof window.Uint8Array)for(i=a,a=Array(e*t),d=0,w=i.length;d<w;d++)a[d]=i[d*c+y]/255;else if(c!==1)throw Error("Raw data can have only 1 value per pixel");var b=Array(e*t),x=Array(e*t),_=Array(n),g=Array(n),A=Array(n+1),M=Array(n);for(d=0,w=e*t;d<w;d++){var L=a[d];b[d]=L===1?0:L===0?k:Math.pow(Math.max(0,.5-L),2),x[d]=L===1?k:L===0?0:Math.pow(Math.max(0,L-.5),2)}r(b,e,t,_,g,M,A),r(x,e,t,_,g,M,A);var E=window.Float32Array?new Float32Array(e*t):new Array(e*t);for(d=0,w=e*t;d<w;d++)E[d]=T(1-((b[d]-x[d])/p+v),0,1);return E};var k=1e20;function r(h,s,e,t,n,a,i){for(var c=0;c<s;c++){for(var l=0;l<e;l++)t[l]=h[l*s+c];for(m(t,n,a,i,e),l=0;l<e;l++)h[l*s+c]=n[l]}for(l=0;l<e;l++){for(c=0;c<s;c++)t[c]=h[l*s+c];for(m(t,n,a,i,s),c=0;c<s;c++)h[l*s+c]=Math.sqrt(n[c])}}function m(h,s,e,t,n){e[0]=0,t[0]=-k,t[1]=+k;for(var a=1,i=0;a<n;a++){for(var c=(h[a]+a*a-(h[e[i]]+e[i]*e[i]))/(2*a-2*e[i]);c<=t[i];)i--,c=(h[a]+a*a-(h[e[i]]+e[i]*e[i]))/(2*a-2*e[i]);e[++i]=a,t[i]=c,t[i+1]=+k}for(a=0,i=0;a<n;a++){for(;t[i+1]<a;)i++;s[a]=(a-e[i])*(a-e[i])+h[e[i]]}}},6614:function(W,I,o){var T=o(68318),k=o(68222),r=k(T("String.prototype.indexOf"));W.exports=function(m,h){var s=T(m,!!h);return typeof s=="function"&&r(m,".prototype.")>-1?k(s):s}},68222:function(W,I,o){var T=o(77575),k=o(68318),r=k("%Function.prototype.apply%"),m=k("%Function.prototype.call%"),h=k("%Reflect.apply%",!0)||T.call(m,r),s=k("%Object.getOwnPropertyDescriptor%",!0),e=k("%Object.defineProperty%",!0),t=k("%Math.max%");if(e)try{e({},"a",{value:1})}catch{e=null}W.exports=function(a){var i=h(T,m,arguments);return s&&e&&s(i,"length").configurable&&e(i,"length",{value:1+t(0,a.length-(arguments.length-1))}),i};var n=function(){return h(T,r,arguments)};e?e(W.exports,"apply",{value:n}):W.exports.apply=n},53435:function(W){W.exports=function(I,o,T){return o<T?I<o?o:I>T?T:I:I<T?T:I>o?o:I}},6475:function(W,I,o){var T=o(53435);function k(r,m){m==null&&(m=!0);var h=r[0],s=r[1],e=r[2],t=r[3];return t==null&&(t=m?1:255),m&&(h*=255,s*=255,e*=255,t*=255),16777216*(h=255&T(h,0,255))+((s=255&T(s,0,255))<<16)+((e=255&T(e,0,255))<<8)+(255&T(t,0,255))}W.exports=k,W.exports.to=k,W.exports.from=function(r,m){var h=(r=+r)>>>24,s=(16711680&r)>>>16,e=(65280&r)>>>8,t=255&r;return m===!1?[h,s,e,t]:[h/255,s/255,e/255,t/255]}},76857:function(W){W.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(W,I,o){var T=o(36652),k=o(53435),r=o(90660);W.exports=function(m,h){h!=="float"&&h||(h="array"),h==="uint"&&(h="uint8"),h==="uint_clamped"&&(h="uint8_clamped");var s=new(r(h))(4),e=h!=="uint8"&&h!=="uint8_clamped";return m.length&&typeof m!="string"||((m=T(m))[0]/=255,m[1]/=255,m[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(m)?(s[0]=m[0],s[1]=m[1],s[2]=m[2],s[3]=m[3]!=null?m[3]:255,e&&(s[0]/=255,s[1]/=255,s[2]/=255,s[3]/=255),s):(e?(s[0]=m[0],s[1]=m[1],s[2]=m[2],s[3]=m[3]!=null?m[3]:1):(s[0]=k(Math.floor(255*m[0]),0,255),s[1]=k(Math.floor(255*m[1]),0,255),s[2]=k(Math.floor(255*m[2]),0,255),s[3]=m[3]==null?255:k(Math.floor(255*m[3]),0,255)),s)}},90736:function(W,I,o){var T=o(76857),k=o(10973),r=o(46775);W.exports=function(h){var s,e,t=[],n=1;if(typeof h=="string")if(T[h])t=T[h].slice(),e="rgb";else if(h==="transparent")n=0,e="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(h)){var a=h.slice(1);n=1,(l=a.length)<=4?(t=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],l===4&&(n=parseInt(a[3]+a[3],16)/255)):(t=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],l===8&&(n=parseInt(a[6]+a[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),e="rgb"}else if(s=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(h)){var i=s[1],c=i==="rgb";e=a=i.replace(/a$/,"");var l=a==="cmyk"?4:a==="gray"?1:3;t=s[2].trim().split(/\s*,\s*/).map(function(f,d){if(/%$/.test(f))return d===l?parseFloat(f)/100:a==="rgb"?255*parseFloat(f)/100:parseFloat(f);if(a[d]==="h"){if(/deg$/.test(f))return parseFloat(f);if(m[f]!==void 0)return m[f]}return parseFloat(f)}),i===a&&t.push(1),n=c||t[l]===void 0?1:t[l],t=t.slice(0,l)}else h.length>10&&/[0-9](?:\s|\/)/.test(h)&&(t=h.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),e=h.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(h))if(k(h)){var u=r(h.r,h.red,h.R,null);u!==null?(e="rgb",t=[u,r(h.g,h.green,h.G),r(h.b,h.blue,h.B)]):(e="hsl",t=[r(h.h,h.hue,h.H),r(h.s,h.saturation,h.S),r(h.l,h.lightness,h.L,h.b,h.brightness)]),n=r(h.a,h.alpha,h.opacity,1),h.opacity!=null&&(n/=100)}else(Array.isArray(h)||o.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(h))&&(t=[h[0],h[1],h[2]],e="rgb",n=h.length===4?h[3]:1);else e="rgb",t=[h>>>16,(65280&h)>>>8,255&h];return{space:e,values:t,alpha:n}};var m={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(W,I,o){var T=o(90736),k=o(80009),r=o(53435);W.exports=function(m){var h,s=T(m);return s.space?((h=Array(3))[0]=r(s.values[0],0,255),h[1]=r(s.values[1],0,255),h[2]=r(s.values[2],0,255),s.space[0]==="h"&&(h=k.rgb(h)),h.push(r(s.alpha,0,1)),h):[]}},80009:function(W,I,o){var T=o(6866);W.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var r,m,h,s,e,t=k[0]/360,n=k[1]/100,a=k[2]/100;if(n===0)return[e=255*a,e,e];r=2*a-(m=a<.5?a*(1+n):a+n-a*n),s=[0,0,0];for(var i=0;i<3;i++)(h=t+.3333333333333333*-(i-1))<0?h++:h>1&&h--,e=6*h<1?r+6*(m-r)*h:2*h<1?m:3*h<2?r+(m-r)*(.6666666666666666-h)*6:r,s[i]=255*e;return s}},T.hsl=function(k){var r,m,h=k[0]/255,s=k[1]/255,e=k[2]/255,t=Math.min(h,s,e),n=Math.max(h,s,e),a=n-t;return n===t?r=0:h===n?r=(s-e)/a:s===n?r=2+(e-h)/a:e===n&&(r=4+(h-s)/a),(r=Math.min(60*r,360))<0&&(r+=360),m=(t+n)/2,[r,100*(n===t?0:m<=.5?a/(n+t):a/(2-n-t)),100*m]}},6866:function(W){W.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(W){W.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(W,I,o){W.exports={parse:o(41004),stringify:o(53313)}},63625:function(W,I,o){var T=o(40402);W.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||T.indexOf(k)!==-1}}},41004:function(W,I,o){var T=o(90448),k=o(38732),r=o(41901),m=o(15659),h=o(96209),s=o(83794),e=o(99011),t=o(63625).isSize;W.exports=a;var n=a.cache={};function a(c){if(typeof c!="string")throw new Error("Font argument must be a string.");if(n[c])return n[c];if(c==="")throw new Error("Cannot parse an empty string.");if(r.indexOf(c)!==-1)return n[c]={system:c};for(var l,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},f=e(c,/\s+/);l=f.shift();){if(k.indexOf(l)!==-1)return["style","variant","weight","stretch"].forEach(function(w){u[w]=l}),n[c]=u;if(h.indexOf(l)===-1)if(l!=="normal"&&l!=="small-caps")if(s.indexOf(l)===-1){if(m.indexOf(l)===-1){if(t(l)){var d=e(l,"/");if(u.size=d[0],d[1]!=null?u.lineHeight=i(d[1]):f[0]==="/"&&(f.shift(),u.lineHeight=i(f.shift())),!f.length)throw new Error("Missing required font-family.");return u.family=e(f.join(" "),/\s*,\s*/).map(T),n[c]=u}throw new Error("Unknown or unsupported font token: "+l)}u.weight=l}else u.stretch=l;else u.variant=l;else u.style=l}throw new Error("Missing required font-size.")}function i(c){var l=parseFloat(c);return l.toString()===c?l:c}},53313:function(W,I,o){var T=o(71299),k=o(63625).isSize,r=c(o(38732)),m=c(o(41901)),h=c(o(15659)),s=c(o(96209)),e=c(o(83794)),t={normal:1,"small-caps":1},n={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},a="serif";function i(l,u){if(l&&!u[l]&&!r[l])throw Error("Unknown keyword `"+l+"`");return l}function c(l){for(var u={},f=0;f<l.length;f++)u[l[f]]=1;return u}W.exports=function(l){if((l=T(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return l.system&&i(l.system,m),l.system;if(i(l.style,s),i(l.variant,t),i(l.weight,h),i(l.stretch,e),l.size==null&&(l.size="1rem"),typeof l.size=="number"&&(l.size+="px"),!k)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=a),Array.isArray(l.family)&&(l.family.length||(l.family=[a]),l.family=l.family.map(function(f){return n[f]?f:'"'+f+'"'}).join(", "));var u=[];return u.push(l.style),l.variant!==l.style&&u.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&u.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&u.push(l.stretch),u.push(l.size+(l.lineHeight==null||l.lineHeight==="normal"||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),u.push(l.family),u.filter(Boolean).join(" ")}},55174:function(W,I,o){var T,k=o(24582),r=o(10424),m=o(82527),h=o(19012),s=o(21780),e=o(16906),t=Function.prototype.bind,n=Object.defineProperty,a=Object.prototype.hasOwnProperty;T=function(i,c,l){var u,f=r(c)&&m(c.value);return delete(u=h(c)).writable,delete u.value,u.get=function(){return!l.overwriteDefinition&&a.call(this,i)?f:(c.value=t.call(f,l.resolveContext?l.resolveContext(this):this),n(this,i,c),this[i])},u},W.exports=function(i){var c=s(arguments[1]);return k(c.resolveContext)&&m(c.resolveContext),e(i,function(l,u){return T(u,l,c)})}},62072:function(W,I,o){var T=o(24582),k=o(84985),r=o(95879),m=o(21780),h=o(66741),s=W.exports=function(e,t){var n,a,i,c,l;return arguments.length<2||typeof e!="string"?(c=t,t=e,e=null):c=arguments[2],T(e)?(n=h.call(e,"c"),a=h.call(e,"e"),i=h.call(e,"w")):(n=i=!0,a=!1),l={value:t,configurable:n,enumerable:a,writable:i},c?r(m(c),l):l};s.gs=function(e,t,n){var a,i,c,l;return typeof e!="string"?(c=n,n=t,t=e,e=null):c=arguments[3],T(t)?k(t)?T(n)?k(n)||(c=n,n=void 0):n=void 0:(c=t,t=n=void 0):t=void 0,T(e)?(a=h.call(e,"c"),i=h.call(e,"e")):(a=!0,i=!1),l={get:t,set:n,configurable:a,enumerable:i},c?r(m(c),l):l}},33064:function(W,I,o){function T(i,c){return i<c?-1:i>c?1:i>=c?0:NaN}o.d(I,{j2:function(){return T},Fp:function(){return m},J6:function(){return s},TS:function(){return e},VV:function(){return t},w6:function(){return n},Sm:function(){return a}}),(k=T).length===1&&(r=k,k=function(i,c){return T(r(i),c)});var k,r;function m(i,c){var l,u,f=i.length,d=-1;if(c==null){for(;++d<f;)if((l=i[d])!=null&&l>=l)for(u=l;++d<f;)(l=i[d])!=null&&l>u&&(u=l)}else for(;++d<f;)if((l=c(i[d],d,i))!=null&&l>=l)for(u=l;++d<f;)(l=c(i[d],d,i))!=null&&l>u&&(u=l);return u}function h(i){return i===null?NaN:+i}function s(i,c){var l,u=i.length,f=u,d=-1,w=0;if(c==null)for(;++d<u;)isNaN(l=h(i[d]))?--f:w+=l;else for(;++d<u;)isNaN(l=h(c(i[d],d,i)))?--f:w+=l;if(f)return w/f}function e(i){for(var c,l,u,f=i.length,d=-1,w=0;++d<f;)w+=i[d].length;for(l=new Array(w);--f>=0;)for(c=(u=i[f]).length;--c>=0;)l[--w]=u[c];return l}function t(i,c){var l,u,f=i.length,d=-1;if(c==null){for(;++d<f;)if((l=i[d])!=null&&l>=l)for(u=l;++d<f;)(l=i[d])!=null&&u>l&&(u=l)}else for(;++d<f;)if((l=c(i[d],d,i))!=null&&l>=l)for(u=l;++d<f;)(l=c(i[d],d,i))!=null&&u>l&&(u=l);return u}function n(i,c,l){i=+i,c=+c,l=(f=arguments.length)<2?(c=i,i=0,1):f<3?1:+l;for(var u=-1,f=0|Math.max(0,Math.ceil((c-i)/l)),d=new Array(f);++u<f;)d[u]=i+u*l;return d}function a(i,c){var l,u=i.length,f=-1,d=0;if(c==null)for(;++f<u;)(l=+i[f])&&(d+=l);else for(;++f<u;)(l=+c(i[f],f,i))&&(d+=l);return d}},15140:function(W,I,o){o.d(I,{UI:function(){return m},b1:function(){return h}});var T="$";function k(){}function r(c,l){var u=new k;if(c instanceof k)c.each(function(p,y){u.set(y,p)});else if(Array.isArray(c)){var f,d=-1,w=c.length;if(l==null)for(;++d<w;)u.set(d,c[d]);else for(;++d<w;)u.set(l(f=c[d],d,c),f)}else if(c)for(var v in c)u.set(v,c[v]);return u}k.prototype=r.prototype={constructor:k,has:function(c){return T+c in this},get:function(c){return this[T+c]},set:function(c,l){return this[T+c]=l,this},remove:function(c){var l=T+c;return l in this&&delete this[l]},clear:function(){for(var c in this)c[0]===T&&delete this[c]},keys:function(){var c=[];for(var l in this)l[0]===T&&c.push(l.slice(1));return c},values:function(){var c=[];for(var l in this)l[0]===T&&c.push(this[l]);return c},entries:function(){var c=[];for(var l in this)l[0]===T&&c.push({key:l.slice(1),value:this[l]});return c},size:function(){var c=0;for(var l in this)l[0]===T&&++c;return c},empty:function(){for(var c in this)if(c[0]===T)return!1;return!0},each:function(c){for(var l in this)l[0]===T&&c(this[l],l.slice(1),this)}};var m=r;function h(){var c,l,u,f=[],d=[];function w(p,y,b,x){if(y>=f.length)return c!=null&&p.sort(c),l!=null?l(p):p;for(var _,g,A,M=-1,L=p.length,E=f[y++],S=m(),O=b();++M<L;)(A=S.get(_=E(g=p[M])+""))?A.push(g):S.set(_,[g]);return S.each(function(P,U){x(O,U,w(P,y,b,x))}),O}function v(p,y){if(++y>f.length)return p;var b,x=d[y-1];return l!=null&&y>=f.length?b=p.entries():(b=[],p.each(function(_,g){b.push({key:g,values:v(_,y)})})),x!=null?b.sort(function(_,g){return x(_.key,g.key)}):b}return u={object:function(p){return w(p,0,s,e)},map:function(p){return w(p,0,t,n)},entries:function(p){return v(w(p,0,t,n),0)},key:function(p){return f.push(p),u},sortKeys:function(p){return d[f.length-1]=p,u},sortValues:function(p){return c=p,u},rollup:function(p){return l=p,u}}}function s(){return{}}function e(c,l,u){c[l]=u}function t(){return m()}function n(c,l,u){c.set(l,u)}function a(){}var i=m.prototype;a.prototype={constructor:a,has:i.has,add:function(c){return this[T+(c+="")]=c,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each}},49887:function(W,I,o){function T(yt,mt){var Ot;function vt(){var xt,st,at=Ot.length,ht=0,Lt=0;for(xt=0;xt<at;++xt)ht+=(st=Ot[xt]).x,Lt+=st.y;for(ht=ht/at-yt,Lt=Lt/at-mt,xt=0;xt<at;++xt)(st=Ot[xt]).x-=ht,st.y-=Lt}return yt==null&&(yt=0),mt==null&&(mt=0),vt.initialize=function(xt){Ot=xt},vt.x=function(xt){return arguments.length?(yt=+xt,vt):yt},vt.y=function(xt){return arguments.length?(mt=+xt,vt):mt},vt}function k(yt){return function(){return yt}}function r(){return 1e-6*(Math.random()-.5)}function m(yt,mt,Ot,vt){if(isNaN(mt)||isNaN(Ot))return yt;var xt,st,at,ht,Lt,Mt,_t,St,Dt,ut=yt._root,Tt={data:vt},bt=yt._x0,It=yt._y0,zt=yt._x1,Ft=yt._y1;if(!ut)return yt._root=Tt,yt;for(;ut.length;)if((Mt=mt>=(st=(bt+zt)/2))?bt=st:zt=st,(_t=Ot>=(at=(It+Ft)/2))?It=at:Ft=at,xt=ut,!(ut=ut[St=_t<<1|Mt]))return xt[St]=Tt,yt;if(ht=+yt._x.call(null,ut.data),Lt=+yt._y.call(null,ut.data),mt===ht&&Ot===Lt)return Tt.next=ut,xt?xt[St]=Tt:yt._root=Tt,yt;do xt=xt?xt[St]=new Array(4):yt._root=new Array(4),(Mt=mt>=(st=(bt+zt)/2))?bt=st:zt=st,(_t=Ot>=(at=(It+Ft)/2))?It=at:Ft=at;while((St=_t<<1|Mt)==(Dt=(Lt>=at)<<1|ht>=st));return xt[Dt]=ut,xt[St]=Tt,yt}function h(yt,mt,Ot,vt,xt){this.node=yt,this.x0=mt,this.y0=Ot,this.x1=vt,this.y1=xt}function s(yt){return yt[0]}function e(yt){return yt[1]}function t(yt,mt,Ot){var vt=new n(mt??s,Ot??e,NaN,NaN,NaN,NaN);return yt==null?vt:vt.addAll(yt)}function n(yt,mt,Ot,vt,xt,st){this._x=yt,this._y=mt,this._x0=Ot,this._y0=vt,this._x1=xt,this._y1=st,this._root=void 0}function a(yt){for(var mt={data:yt.data},Ot=mt;yt=yt.next;)Ot=Ot.next={data:yt.data};return mt}o.r(I),o.d(I,{forceCenter:function(){return T},forceCollide:function(){return u},forceLink:function(){return v},forceManyBody:function(){return ct},forceRadial:function(){return pt},forceSimulation:function(){return ot},forceX:function(){return gt},forceY:function(){return kt}});var i=t.prototype=n.prototype;function c(yt){return yt.x+yt.vx}function l(yt){return yt.y+yt.vy}function u(yt){var mt,Ot,vt=1,xt=1;function st(){for(var Lt,Mt,_t,St,Dt,ut,Tt,bt=mt.length,It=0;It<xt;++It)for(Mt=t(mt,c,l).visitAfter(at),Lt=0;Lt<bt;++Lt)_t=mt[Lt],ut=Ot[_t.index],Tt=ut*ut,St=_t.x+_t.vx,Dt=_t.y+_t.vy,Mt.visit(zt);function zt(Ft,$t,Wt,Xt,ae){var Qt=Ft.data,de=Ft.r,ye=ut+de;if(!Qt)return $t>St+ye||Xt<St-ye||Wt>Dt+ye||ae<Dt-ye;if(Qt.index>_t.index){var ve=St-Qt.x-Qt.vx,ie=Dt-Qt.y-Qt.vy,se=ve*ve+ie*ie;se<ye*ye&&(ve===0&&(se+=(ve=r())*ve),ie===0&&(se+=(ie=r())*ie),se=(ye-(se=Math.sqrt(se)))/se*vt,_t.vx+=(ve*=se)*(ye=(de*=de)/(Tt+de)),_t.vy+=(ie*=se)*ye,Qt.vx-=ve*(ye=1-ye),Qt.vy-=ie*ye)}}}function at(Lt){if(Lt.data)return Lt.r=Ot[Lt.data.index];for(var Mt=Lt.r=0;Mt<4;++Mt)Lt[Mt]&&Lt[Mt].r>Lt.r&&(Lt.r=Lt[Mt].r)}function ht(){if(mt){var Lt,Mt,_t=mt.length;for(Ot=new Array(_t),Lt=0;Lt<_t;++Lt)Mt=mt[Lt],Ot[Mt.index]=+yt(Mt,Lt,mt)}}return typeof yt!="function"&&(yt=k(yt==null?1:+yt)),st.initialize=function(Lt){mt=Lt,ht()},st.iterations=function(Lt){return arguments.length?(xt=+Lt,st):xt},st.strength=function(Lt){return arguments.length?(vt=+Lt,st):vt},st.radius=function(Lt){return arguments.length?(yt=typeof Lt=="function"?Lt:k(+Lt),ht(),st):yt},st}i.copy=function(){var yt,mt,Ot=new n(this._x,this._y,this._x0,this._y0,this._x1,this._y1),vt=this._root;if(!vt)return Ot;if(!vt.length)return Ot._root=a(vt),Ot;for(yt=[{source:vt,target:Ot._root=new Array(4)}];vt=yt.pop();)for(var xt=0;xt<4;++xt)(mt=vt.source[xt])&&(mt.length?yt.push({source:mt,target:vt.target[xt]=new Array(4)}):vt.target[xt]=a(mt));return Ot},i.add=function(yt){var mt=+this._x.call(null,yt),Ot=+this._y.call(null,yt);return m(this.cover(mt,Ot),mt,Ot,yt)},i.addAll=function(yt){var mt,Ot,vt,xt,st=yt.length,at=new Array(st),ht=new Array(st),Lt=1/0,Mt=1/0,_t=-1/0,St=-1/0;for(Ot=0;Ot<st;++Ot)isNaN(vt=+this._x.call(null,mt=yt[Ot]))||isNaN(xt=+this._y.call(null,mt))||(at[Ot]=vt,ht[Ot]=xt,vt<Lt&&(Lt=vt),vt>_t&&(_t=vt),xt<Mt&&(Mt=xt),xt>St&&(St=xt));if(Lt>_t||Mt>St)return this;for(this.cover(Lt,Mt).cover(_t,St),Ot=0;Ot<st;++Ot)m(this,at[Ot],ht[Ot],yt[Ot]);return this},i.cover=function(yt,mt){if(isNaN(yt=+yt)||isNaN(mt=+mt))return this;var Ot=this._x0,vt=this._y0,xt=this._x1,st=this._y1;if(isNaN(Ot))xt=(Ot=Math.floor(yt))+1,st=(vt=Math.floor(mt))+1;else{for(var at,ht,Lt=xt-Ot,Mt=this._root;Ot>yt||yt>=xt||vt>mt||mt>=st;)switch(ht=(mt<vt)<<1|yt<Ot,(at=new Array(4))[ht]=Mt,Mt=at,Lt*=2,ht){case 0:xt=Ot+Lt,st=vt+Lt;break;case 1:Ot=xt-Lt,st=vt+Lt;break;case 2:xt=Ot+Lt,vt=st-Lt;break;case 3:Ot=xt-Lt,vt=st-Lt}this._root&&this._root.length&&(this._root=Mt)}return this._x0=Ot,this._y0=vt,this._x1=xt,this._y1=st,this},i.data=function(){var yt=[];return this.visit(function(mt){if(!mt.length)do yt.push(mt.data);while(mt=mt.next)}),yt},i.extent=function(yt){return arguments.length?this.cover(+yt[0][0],+yt[0][1]).cover(+yt[1][0],+yt[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},i.find=function(yt,mt,Ot){var vt,xt,st,at,ht,Lt,Mt,_t=this._x0,St=this._y0,Dt=this._x1,ut=this._y1,Tt=[],bt=this._root;for(bt&&Tt.push(new h(bt,_t,St,Dt,ut)),Ot==null?Ot=1/0:(_t=yt-Ot,St=mt-Ot,Dt=yt+Ot,ut=mt+Ot,Ot*=Ot);Lt=Tt.pop();)if(!(!(bt=Lt.node)||(xt=Lt.x0)>Dt||(st=Lt.y0)>ut||(at=Lt.x1)<_t||(ht=Lt.y1)<St))if(bt.length){var It=(xt+at)/2,zt=(st+ht)/2;Tt.push(new h(bt[3],It,zt,at,ht),new h(bt[2],xt,zt,It,ht),new h(bt[1],It,st,at,zt),new h(bt[0],xt,st,It,zt)),(Mt=(mt>=zt)<<1|yt>=It)&&(Lt=Tt[Tt.length-1],Tt[Tt.length-1]=Tt[Tt.length-1-Mt],Tt[Tt.length-1-Mt]=Lt)}else{var Ft=yt-+this._x.call(null,bt.data),$t=mt-+this._y.call(null,bt.data),Wt=Ft*Ft+$t*$t;if(Wt<Ot){var Xt=Math.sqrt(Ot=Wt);_t=yt-Xt,St=mt-Xt,Dt=yt+Xt,ut=mt+Xt,vt=bt.data}}return vt},i.remove=function(yt){if(isNaN(st=+this._x.call(null,yt))||isNaN(at=+this._y.call(null,yt)))return this;var mt,Ot,vt,xt,st,at,ht,Lt,Mt,_t,St,Dt,ut=this._root,Tt=this._x0,bt=this._y0,It=this._x1,zt=this._y1;if(!ut)return this;if(ut.length)for(;;){if((Mt=st>=(ht=(Tt+It)/2))?Tt=ht:It=ht,(_t=at>=(Lt=(bt+zt)/2))?bt=Lt:zt=Lt,mt=ut,!(ut=ut[St=_t<<1|Mt]))return this;if(!ut.length)break;(mt[St+1&3]||mt[St+2&3]||mt[St+3&3])&&(Ot=mt,Dt=St)}for(;ut.data!==yt;)if(vt=ut,!(ut=ut.next))return this;return(xt=ut.next)&&delete ut.next,vt?(xt?vt.next=xt:delete vt.next,this):mt?(xt?mt[St]=xt:delete mt[St],(ut=mt[0]||mt[1]||mt[2]||mt[3])&&ut===(mt[3]||mt[2]||mt[1]||mt[0])&&!ut.length&&(Ot?Ot[Dt]=ut:this._root=ut),this):(this._root=xt,this)},i.removeAll=function(yt){for(var mt=0,Ot=yt.length;mt<Ot;++mt)this.remove(yt[mt]);return this},i.root=function(){return this._root},i.size=function(){var yt=0;return this.visit(function(mt){if(!mt.length)do++yt;while(mt=mt.next)}),yt},i.visit=function(yt){var mt,Ot,vt,xt,st,at,ht=[],Lt=this._root;for(Lt&&ht.push(new h(Lt,this._x0,this._y0,this._x1,this._y1));mt=ht.pop();)if(!yt(Lt=mt.node,vt=mt.x0,xt=mt.y0,st=mt.x1,at=mt.y1)&&Lt.length){var Mt=(vt+st)/2,_t=(xt+at)/2;(Ot=Lt[3])&&ht.push(new h(Ot,Mt,_t,st,at)),(Ot=Lt[2])&&ht.push(new h(Ot,vt,_t,Mt,at)),(Ot=Lt[1])&&ht.push(new h(Ot,Mt,xt,st,_t)),(Ot=Lt[0])&&ht.push(new h(Ot,vt,xt,Mt,_t))}return this},i.visitAfter=function(yt){var mt,Ot=[],vt=[];for(this._root&&Ot.push(new h(this._root,this._x0,this._y0,this._x1,this._y1));mt=Ot.pop();){var xt=mt.node;if(xt.length){var st,at=mt.x0,ht=mt.y0,Lt=mt.x1,Mt=mt.y1,_t=(at+Lt)/2,St=(ht+Mt)/2;(st=xt[0])&&Ot.push(new h(st,at,ht,_t,St)),(st=xt[1])&&Ot.push(new h(st,_t,ht,Lt,St)),(st=xt[2])&&Ot.push(new h(st,at,St,_t,Mt)),(st=xt[3])&&Ot.push(new h(st,_t,St,Lt,Mt))}vt.push(mt)}for(;mt=vt.pop();)yt(mt.node,mt.x0,mt.y0,mt.x1,mt.y1);return this},i.x=function(yt){return arguments.length?(this._x=yt,this):this._x},i.y=function(yt){return arguments.length?(this._y=yt,this):this._y};var f=o(15140);function d(yt){return yt.index}function w(yt,mt){var Ot=yt.get(mt);if(!Ot)throw new Error("missing: "+mt);return Ot}function v(yt){var mt,Ot,vt,xt,st,at=d,ht=function(Tt){return 1/Math.min(xt[Tt.source.index],xt[Tt.target.index])},Lt=k(30),Mt=1;function _t(Tt){for(var bt=0,It=yt.length;bt<Mt;++bt)for(var zt,Ft,$t,Wt,Xt,ae,Qt,de=0;de<It;++de)Ft=(zt=yt[de]).source,Wt=($t=zt.target).x+$t.vx-Ft.x-Ft.vx||r(),Xt=$t.y+$t.vy-Ft.y-Ft.vy||r(),Wt*=ae=((ae=Math.sqrt(Wt*Wt+Xt*Xt))-Ot[de])/ae*Tt*mt[de],Xt*=ae,$t.vx-=Wt*(Qt=st[de]),$t.vy-=Xt*Qt,Ft.vx+=Wt*(Qt=1-Qt),Ft.vy+=Xt*Qt}function St(){if(vt){var Tt,bt,It=vt.length,zt=yt.length,Ft=(0,f.UI)(vt,at);for(Tt=0,xt=new Array(It);Tt<zt;++Tt)(bt=yt[Tt]).index=Tt,typeof bt.source!="object"&&(bt.source=w(Ft,bt.source)),typeof bt.target!="object"&&(bt.target=w(Ft,bt.target)),xt[bt.source.index]=(xt[bt.source.index]||0)+1,xt[bt.target.index]=(xt[bt.target.index]||0)+1;for(Tt=0,st=new Array(zt);Tt<zt;++Tt)bt=yt[Tt],st[Tt]=xt[bt.source.index]/(xt[bt.source.index]+xt[bt.target.index]);mt=new Array(zt),Dt(),Ot=new Array(zt),ut()}}function Dt(){if(vt)for(var Tt=0,bt=yt.length;Tt<bt;++Tt)mt[Tt]=+ht(yt[Tt],Tt,yt)}function ut(){if(vt)for(var Tt=0,bt=yt.length;Tt<bt;++Tt)Ot[Tt]=+Lt(yt[Tt],Tt,yt)}return yt==null&&(yt=[]),_t.initialize=function(Tt){vt=Tt,St()},_t.links=function(Tt){return arguments.length?(yt=Tt,St(),_t):yt},_t.id=function(Tt){return arguments.length?(at=Tt,_t):at},_t.iterations=function(Tt){return arguments.length?(Mt=+Tt,_t):Mt},_t.strength=function(Tt){return arguments.length?(ht=typeof Tt=="function"?Tt:k(+Tt),Dt(),_t):ht},_t.distance=function(Tt){return arguments.length?(Lt=typeof Tt=="function"?Tt:k(+Tt),ut(),_t):Lt},_t}var p={value:function(){}};function y(){for(var yt,mt=0,Ot=arguments.length,vt={};mt<Ot;++mt){if(!(yt=arguments[mt]+"")||yt in vt||/[\s.]/.test(yt))throw new Error("illegal type: "+yt);vt[yt]=[]}return new b(vt)}function b(yt){this._=yt}function x(yt,mt){for(var Ot,vt=0,xt=yt.length;vt<xt;++vt)if((Ot=yt[vt]).name===mt)return Ot.value}function _(yt,mt,Ot){for(var vt=0,xt=yt.length;vt<xt;++vt)if(yt[vt].name===mt){yt[vt]=p,yt=yt.slice(0,vt).concat(yt.slice(vt+1));break}return Ot!=null&&yt.push({name:mt,value:Ot}),yt}b.prototype=y.prototype={constructor:b,on:function(yt,mt){var Ot,vt,xt=this._,st=(vt=xt,(yt+"").trim().split(/^|\s+/).map(function(Lt){var Mt="",_t=Lt.indexOf(".");if(_t>=0&&(Mt=Lt.slice(_t+1),Lt=Lt.slice(0,_t)),Lt&&!vt.hasOwnProperty(Lt))throw new Error("unknown type: "+Lt);return{type:Lt,name:Mt}})),at=-1,ht=st.length;if(!(arguments.length<2)){if(mt!=null&&typeof mt!="function")throw new Error("invalid callback: "+mt);for(;++at<ht;)if(Ot=(yt=st[at]).type)xt[Ot]=_(xt[Ot],yt.name,mt);else if(mt==null)for(Ot in xt)xt[Ot]=_(xt[Ot],yt.name,null);return this}for(;++at<ht;)if((Ot=(yt=st[at]).type)&&(Ot=x(xt[Ot],yt.name)))return Ot},copy:function(){var yt={},mt=this._;for(var Ot in mt)yt[Ot]=mt[Ot].slice();return new b(yt)},call:function(yt,mt){if((Ot=arguments.length-2)>0)for(var Ot,vt,xt=new Array(Ot),st=0;st<Ot;++st)xt[st]=arguments[st+2];if(!this._.hasOwnProperty(yt))throw new Error("unknown type: "+yt);for(st=0,Ot=(vt=this._[yt]).length;st<Ot;++st)vt[st].value.apply(mt,xt)},apply:function(yt,mt,Ot){if(!this._.hasOwnProperty(yt))throw new Error("unknown type: "+yt);for(var vt=this._[yt],xt=0,st=vt.length;xt<st;++xt)vt[xt].value.apply(mt,Ot)}};var g,A,M=y,L=0,E=0,S=0,O=1e3,P=0,U=0,R=0,j=typeof performance=="object"&&performance.now?performance:Date,B=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(yt){setTimeout(yt,17)};function z(){return U||(B(G),U=j.now()+R)}function G(){U=0}function V(){this._call=this._time=this._next=null}function et(yt,mt,Ot){var vt=new V;return vt.restart(yt,mt,Ot),vt}function J(){U=(P=j.now())+R,L=E=0;try{(function(){z(),++L;for(var yt,mt=g;mt;)(yt=U-mt._time)>=0&&mt._call.call(null,yt),mt=mt._next;--L})()}finally{L=0,function(){for(var yt,mt,Ot=g,vt=1/0;Ot;)Ot._call?(vt>Ot._time&&(vt=Ot._time),yt=Ot,Ot=Ot._next):(mt=Ot._next,Ot._next=null,Ot=yt?yt._next=mt:g=mt);A=yt,Y(vt)}(),U=0}}function X(){var yt=j.now(),mt=yt-P;mt>O&&(R-=mt,P=yt)}function Y(yt){L||(E&&(E=clearTimeout(E)),yt-U>24?(yt<1/0&&(E=setTimeout(J,yt-j.now()-R)),S&&(S=clearInterval(S))):(S||(P=j.now(),S=setInterval(X,O)),L=1,B(J)))}function Z(yt){return yt.x}function tt(yt){return yt.y}V.prototype=et.prototype={constructor:V,restart:function(yt,mt,Ot){if(typeof yt!="function")throw new TypeError("callback is not a function");Ot=(Ot==null?z():+Ot)+(mt==null?0:+mt),this._next||A===this||(A?A._next=this:g=this,A=this),this._call=yt,this._time=Ot,Y()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y())}};var rt=10,nt=Math.PI*(3-Math.sqrt(5));function ot(yt){var mt,Ot=1,vt=.001,xt=1-Math.pow(vt,1/300),st=0,at=.6,ht=(0,f.UI)(),Lt=et(_t),Mt=M("tick","end");function _t(){St(),Mt.call("tick",mt),Ot<vt&&(Lt.stop(),Mt.call("end",mt))}function St(Tt){var bt,It,zt=yt.length;Tt===void 0&&(Tt=1);for(var Ft=0;Ft<Tt;++Ft)for(Ot+=(st-Ot)*xt,ht.each(function($t){$t(Ot)}),bt=0;bt<zt;++bt)(It=yt[bt]).fx==null?It.x+=It.vx*=at:(It.x=It.fx,It.vx=0),It.fy==null?It.y+=It.vy*=at:(It.y=It.fy,It.vy=0);return mt}function Dt(){for(var Tt,bt=0,It=yt.length;bt<It;++bt){if((Tt=yt[bt]).index=bt,Tt.fx!=null&&(Tt.x=Tt.fx),Tt.fy!=null&&(Tt.y=Tt.fy),isNaN(Tt.x)||isNaN(Tt.y)){var zt=rt*Math.sqrt(bt),Ft=bt*nt;Tt.x=zt*Math.cos(Ft),Tt.y=zt*Math.sin(Ft)}(isNaN(Tt.vx)||isNaN(Tt.vy))&&(Tt.vx=Tt.vy=0)}}function ut(Tt){return Tt.initialize&&Tt.initialize(yt),Tt}return yt==null&&(yt=[]),Dt(),mt={tick:St,restart:function(){return Lt.restart(_t),mt},stop:function(){return Lt.stop(),mt},nodes:function(Tt){return arguments.length?(yt=Tt,Dt(),ht.each(ut),mt):yt},alpha:function(Tt){return arguments.length?(Ot=+Tt,mt):Ot},alphaMin:function(Tt){return arguments.length?(vt=+Tt,mt):vt},alphaDecay:function(Tt){return arguments.length?(xt=+Tt,mt):+xt},alphaTarget:function(Tt){return arguments.length?(st=+Tt,mt):st},velocityDecay:function(Tt){return arguments.length?(at=1-Tt,mt):1-at},force:function(Tt,bt){return arguments.length>1?(bt==null?ht.remove(Tt):ht.set(Tt,ut(bt)),mt):ht.get(Tt)},find:function(Tt,bt,It){var zt,Ft,$t,Wt,Xt,ae=0,Qt=yt.length;for(It==null?It=1/0:It*=It,ae=0;ae<Qt;++ae)($t=(zt=Tt-(Wt=yt[ae]).x)*zt+(Ft=bt-Wt.y)*Ft)<It&&(Xt=Wt,It=$t);return Xt},on:function(Tt,bt){return arguments.length>1?(Mt.on(Tt,bt),mt):Mt.on(Tt)}}}function ct(){var yt,mt,Ot,vt,xt=k(-30),st=1,at=1/0,ht=.81;function Lt(Dt){var ut,Tt=yt.length,bt=t(yt,Z,tt).visitAfter(_t);for(Ot=Dt,ut=0;ut<Tt;++ut)mt=yt[ut],bt.visit(St)}function Mt(){if(yt){var Dt,ut,Tt=yt.length;for(vt=new Array(Tt),Dt=0;Dt<Tt;++Dt)ut=yt[Dt],vt[ut.index]=+xt(ut,Dt,yt)}}function _t(Dt){var ut,Tt,bt,It,zt,Ft=0,$t=0;if(Dt.length){for(bt=It=zt=0;zt<4;++zt)(ut=Dt[zt])&&(Tt=Math.abs(ut.value))&&(Ft+=ut.value,$t+=Tt,bt+=Tt*ut.x,It+=Tt*ut.y);Dt.x=bt/$t,Dt.y=It/$t}else{(ut=Dt).x=ut.data.x,ut.y=ut.data.y;do Ft+=vt[ut.data.index];while(ut=ut.next)}Dt.value=Ft}function St(Dt,ut,Tt,bt){if(!Dt.value)return!0;var It=Dt.x-mt.x,zt=Dt.y-mt.y,Ft=bt-ut,$t=It*It+zt*zt;if(Ft*Ft/ht<$t)return $t<at&&(It===0&&($t+=(It=r())*It),zt===0&&($t+=(zt=r())*zt),$t<st&&($t=Math.sqrt(st*$t)),mt.vx+=It*Dt.value*Ot/$t,mt.vy+=zt*Dt.value*Ot/$t),!0;if(!(Dt.length||$t>=at)){(Dt.data!==mt||Dt.next)&&(It===0&&($t+=(It=r())*It),zt===0&&($t+=(zt=r())*zt),$t<st&&($t=Math.sqrt(st*$t)));do Dt.data!==mt&&(Ft=vt[Dt.data.index]*Ot/$t,mt.vx+=It*Ft,mt.vy+=zt*Ft);while(Dt=Dt.next)}}return Lt.initialize=function(Dt){yt=Dt,Mt()},Lt.strength=function(Dt){return arguments.length?(xt=typeof Dt=="function"?Dt:k(+Dt),Mt(),Lt):xt},Lt.distanceMin=function(Dt){return arguments.length?(st=Dt*Dt,Lt):Math.sqrt(st)},Lt.distanceMax=function(Dt){return arguments.length?(at=Dt*Dt,Lt):Math.sqrt(at)},Lt.theta=function(Dt){return arguments.length?(ht=Dt*Dt,Lt):Math.sqrt(ht)},Lt}function pt(yt,mt,Ot){var vt,xt,st,at=k(.1);function ht(Mt){for(var _t=0,St=vt.length;_t<St;++_t){var Dt=vt[_t],ut=Dt.x-mt||1e-6,Tt=Dt.y-Ot||1e-6,bt=Math.sqrt(ut*ut+Tt*Tt),It=(st[_t]-bt)*xt[_t]*Mt/bt;Dt.vx+=ut*It,Dt.vy+=Tt*It}}function Lt(){if(vt){var Mt,_t=vt.length;for(xt=new Array(_t),st=new Array(_t),Mt=0;Mt<_t;++Mt)st[Mt]=+yt(vt[Mt],Mt,vt),xt[Mt]=isNaN(st[Mt])?0:+at(vt[Mt],Mt,vt)}}return typeof yt!="function"&&(yt=k(+yt)),mt==null&&(mt=0),Ot==null&&(Ot=0),ht.initialize=function(Mt){vt=Mt,Lt()},ht.strength=function(Mt){return arguments.length?(at=typeof Mt=="function"?Mt:k(+Mt),Lt(),ht):at},ht.radius=function(Mt){return arguments.length?(yt=typeof Mt=="function"?Mt:k(+Mt),Lt(),ht):yt},ht.x=function(Mt){return arguments.length?(mt=+Mt,ht):mt},ht.y=function(Mt){return arguments.length?(Ot=+Mt,ht):Ot},ht}function gt(yt){var mt,Ot,vt,xt=k(.1);function st(ht){for(var Lt,Mt=0,_t=mt.length;Mt<_t;++Mt)(Lt=mt[Mt]).vx+=(vt[Mt]-Lt.x)*Ot[Mt]*ht}function at(){if(mt){var ht,Lt=mt.length;for(Ot=new Array(Lt),vt=new Array(Lt),ht=0;ht<Lt;++ht)Ot[ht]=isNaN(vt[ht]=+yt(mt[ht],ht,mt))?0:+xt(mt[ht],ht,mt)}}return typeof yt!="function"&&(yt=k(yt==null?0:+yt)),st.initialize=function(ht){mt=ht,at()},st.strength=function(ht){return arguments.length?(xt=typeof ht=="function"?ht:k(+ht),at(),st):xt},st.x=function(ht){return arguments.length?(yt=typeof ht=="function"?ht:k(+ht),at(),st):yt},st}function kt(yt){var mt,Ot,vt,xt=k(.1);function st(ht){for(var Lt,Mt=0,_t=mt.length;Mt<_t;++Mt)(Lt=mt[Mt]).vy+=(vt[Mt]-Lt.y)*Ot[Mt]*ht}function at(){if(mt){var ht,Lt=mt.length;for(Ot=new Array(Lt),vt=new Array(Lt),ht=0;ht<Lt;++ht)Ot[ht]=isNaN(vt[ht]=+yt(mt[ht],ht,mt))?0:+xt(mt[ht],ht,mt)}}return typeof yt!="function"&&(yt=k(yt==null?0:+yt)),st.initialize=function(ht){mt=ht,at()},st.strength=function(ht){return arguments.length?(xt=typeof ht=="function"?ht:k(+ht),at(),st):xt},st.y=function(ht){return arguments.length?(yt=typeof ht=="function"?ht:k(+ht),at(),st):yt},st}},60721:function(W,I,o){function T(u,f){if((d=(u=f?u.toExponential(f-1):u.toExponential()).indexOf("e"))<0)return null;var d,w=u.slice(0,d);return[w.length>1?w[0]+w.slice(2):w,+u.slice(d+1)]}o.d(I,{WU:function(){return a},FF:function(){return l}});var k,r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function m(u){if(!(f=r.exec(u)))throw new Error("invalid format: "+u);var f;return new h({fill:f[1],align:f[2],sign:f[3],symbol:f[4],zero:f[5],width:f[6],comma:f[7],precision:f[8]&&f[8].slice(1),trim:f[9],type:f[10]})}function h(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function s(u,f){var d=T(u,f);if(!d)return u+"";var w=d[0],v=d[1];return v<0?"0."+new Array(-v).join("0")+w:w.length>v+1?w.slice(0,v+1)+"."+w.slice(v+1):w+new Array(v-w.length+2).join("0")}m.prototype=h.prototype,h.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var e={"%":function(u,f){return(100*u).toFixed(f)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,f){return u.toExponential(f)},f:function(u,f){return u.toFixed(f)},g:function(u,f){return u.toPrecision(f)},o:function(u){return Math.round(u).toString(8)},p:function(u,f){return s(100*u,f)},r:s,s:function(u,f){var d=T(u,f);if(!d)return u+"";var w=d[0],v=d[1],p=v-(k=3*Math.max(-8,Math.min(8,Math.floor(v/3))))+1,y=w.length;return p===y?w:p>y?w+new Array(p-y+1).join("0"):p>0?w.slice(0,p)+"."+w.slice(p):"0."+new Array(1-p).join("0")+T(u,Math.max(0,f+p-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var n,a,i=Array.prototype.map,c=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(u){var f,d,w=u.grouping===void 0||u.thousands===void 0?t:(f=i.call(u.grouping,Number),d=u.thousands+"",function(M,L){for(var E=M.length,S=[],O=0,P=f[0],U=0;E>0&&P>0&&(U+P+1>L&&(P=Math.max(1,L-U)),S.push(M.substring(E-=P,E+P)),!((U+=P+1)>L));)P=f[O=(O+1)%f.length];return S.reverse().join(d)}),v=u.currency===void 0?"":u.currency[0]+"",p=u.currency===void 0?"":u.currency[1]+"",y=u.decimal===void 0?".":u.decimal+"",b=u.numerals===void 0?t:function(M){return function(L){return L.replace(/[0-9]/g,function(E){return M[+E]})}}(i.call(u.numerals,String)),x=u.percent===void 0?"%":u.percent+"",_=u.minus===void 0?"-":u.minus+"",g=u.nan===void 0?"NaN":u.nan+"";function A(M){var L=(M=m(M)).fill,E=M.align,S=M.sign,O=M.symbol,P=M.zero,U=M.width,R=M.comma,j=M.precision,B=M.trim,z=M.type;z==="n"?(R=!0,z="g"):e[z]||(j===void 0&&(j=12),B=!0,z="g"),(P||L==="0"&&E==="=")&&(P=!0,L="0",E="=");var G=O==="$"?v:O==="#"&&/[boxX]/.test(z)?"0"+z.toLowerCase():"",V=O==="$"?p:/[%p]/.test(z)?x:"",et=e[z],J=/[defgprs%]/.test(z);function X(Y){var Z,tt,rt,nt=G,ot=V;if(z==="c")ot=et(Y)+ot,Y="";else{var ct=(Y=+Y)<0||1/Y<0;if(Y=isNaN(Y)?g:et(Math.abs(Y),j),B&&(Y=function(kt){t:for(var yt,mt=kt.length,Ot=1,vt=-1;Ot<mt;++Ot)switch(kt[Ot]){case".":vt=yt=Ot;break;case"0":vt===0&&(vt=Ot),yt=Ot;break;default:if(!+kt[Ot])break t;vt>0&&(vt=0)}return vt>0?kt.slice(0,vt)+kt.slice(yt+1):kt}(Y)),ct&&+Y==0&&S!=="+"&&(ct=!1),nt=(ct?S==="("?S:_:S==="-"||S==="("?"":S)+nt,ot=(z==="s"?c[8+k/3]:"")+ot+(ct&&S==="("?")":""),J){for(Z=-1,tt=Y.length;++Z<tt;)if(48>(rt=Y.charCodeAt(Z))||rt>57){ot=(rt===46?y+Y.slice(Z+1):Y.slice(Z))+ot,Y=Y.slice(0,Z);break}}}R&&!P&&(Y=w(Y,1/0));var pt=nt.length+Y.length+ot.length,gt=pt<U?new Array(U-pt+1).join(L):"";switch(R&&P&&(Y=w(gt+Y,gt.length?U-ot.length:1/0),gt=""),E){case"<":Y=nt+Y+ot+gt;break;case"=":Y=nt+gt+Y+ot;break;case"^":Y=gt.slice(0,pt=gt.length>>1)+nt+Y+ot+gt.slice(pt);break;default:Y=gt+nt+Y+ot}return b(Y)}return j=j===void 0?6:/[gprs]/.test(z)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j)),X.toString=function(){return M+""},X}return{format:A,formatPrefix:function(M,L){var E,S=A(((M=m(M)).type="f",M)),O=3*Math.max(-8,Math.min(8,Math.floor((E=L,((E=T(Math.abs(E)))?E[1]:NaN)/3)))),P=Math.pow(10,-O),U=c[8+O/3];return function(R){return S(P*R)+U}}}}n=l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),a=n.format,n.formatPrefix},65704:function(W,I,o){o.r(I),o.d(I,{geoAiry:function(){return R},geoAiryRaw:function(){return U},geoAitoff:function(){return B},geoAitoffRaw:function(){return j},geoArmadillo:function(){return G},geoArmadilloRaw:function(){return z},geoAugust:function(){return et},geoAugustRaw:function(){return V},geoBaker:function(){return Z},geoBakerRaw:function(){return Y},geoBerghaus:function(){return nt},geoBerghausRaw:function(){return rt},geoBertin1953:function(){return Ot},geoBertin1953Raw:function(){return mt},geoBoggs:function(){return _t},geoBoggsRaw:function(){return Mt},geoBonne:function(){return bt},geoBonneRaw:function(){return Tt},geoBottomley:function(){return zt},geoBottomleyRaw:function(){return It},geoBromley:function(){return $t},geoBromleyRaw:function(){return Ft},geoChamberlin:function(){return se},geoChamberlinAfrica:function(){return ie},geoChamberlinRaw:function(){return ye},geoCollignon:function(){return Ae},geoCollignonRaw:function(){return ke},geoCraig:function(){return Te},geoCraigRaw:function(){return Ie},geoCraster:function(){return Gt},geoCrasterRaw:function(){return Zt},geoCylindricalEqualArea:function(){return ne},geoCylindricalEqualAreaRaw:function(){return Yt},geoCylindricalStereographic:function(){return Pt},geoCylindricalStereographicRaw:function(){return re},geoEckert1:function(){return ee},geoEckert1Raw:function(){return Nt},geoEckert2:function(){return ge},geoEckert2Raw:function(){return te},geoEckert3:function(){return me},geoEckert3Raw:function(){return pe},geoEckert4:function(){return we},geoEckert4Raw:function(){return ce},geoEckert5:function(){return he},geoEckert5Raw:function(){return ue},geoEckert6:function(){return Pe},geoEckert6Raw:function(){return be},geoEisenlohr:function(){return tr},geoEisenlohrRaw:function(){return Ue},geoFahey:function(){return We},geoFaheyRaw:function(){return Ze},geoFoucaut:function(){return xr},geoFoucautRaw:function(){return pr},geoFoucautSinusoidal:function(){return $e},geoFoucautSinusoidalRaw:function(){return sr},geoGilbert:function(){return mr},geoGingery:function(){return Sr},geoGingeryRaw:function(){return Cr},geoGinzburg4:function(){return sn},geoGinzburg4Raw:function(){return en},geoGinzburg5:function(){return qr},geoGinzburg5Raw:function(){return tn},geoGinzburg6:function(){return je},geoGinzburg6Raw:function(){return vn},geoGinzburg8:function(){return hr},geoGinzburg8Raw:function(){return nr},geoGinzburg9:function(){return Mr},geoGinzburg9Raw:function(){return gr},geoGringorten:function(){return Dr},geoGringortenQuincuncial:function(){return Ra},geoGringortenRaw:function(){return Pr},geoGuyou:function(){return Me},geoGuyouRaw:function(){return wr},geoHammer:function(){return gt},geoHammerRaw:function(){return ct},geoHammerRetroazimuthal:function(){return br},geoHammerRetroazimuthalRaw:function(){return Qe},geoHealpix:function(){return Gr},geoHealpixRaw:function(){return lr},geoHill:function(){return Kr},geoHillRaw:function(){return Nr},geoHomolosine:function(){return fn},geoHomolosineRaw:function(){return hn},geoHufnagel:function(){return Yr},geoHufnagelRaw:function(){return kn},geoHyperelliptical:function(){return ui},geoHyperellipticalRaw:function(){return Xn},geoInterrupt:function(){return ri},geoInterruptedBoggs:function(){return Xa},geoInterruptedHomolosine:function(){return so},geoInterruptedMollweide:function(){return $o},geoInterruptedMollweideHemispheres:function(){return Zs},geoInterruptedQuarticAuthalic:function(){return ws},geoInterruptedSinuMollweide:function(){return ul},geoInterruptedSinusoidal:function(){return Vo},geoKavrayskiy7:function(){return Oi},geoKavrayskiy7Raw:function(){return Ja},geoLagrange:function(){return qn},geoLagrangeRaw:function(){return bs},geoLarrivee:function(){return lo},geoLarriveeRaw:function(){return Aa},geoLaskowski:function(){return To},geoLaskowskiRaw:function(){return ja},geoLittrow:function(){return uo},geoLittrowRaw:function(){return co},geoLoximuthal:function(){return hl},geoLoximuthalRaw:function(){return Fs},geoMiller:function(){return fl},geoMillerRaw:function(){return Mo},geoModifiedStereographic:function(){return Ia},geoModifiedStereographicAlaska:function(){return Wo},geoModifiedStereographicGs48:function(){return ls},geoModifiedStereographicGs50:function(){return zs},geoModifiedStereographicLee:function(){return Qs},geoModifiedStereographicMiller:function(){return Js},geoModifiedStereographicRaw:function(){return Xs},geoMollweide:function(){return at},geoMollweideRaw:function(){return st},geoMtFlatPolarParabolic:function(){return ml},geoMtFlatPolarParabolicRaw:function(){return ho},geoMtFlatPolarQuartic:function(){return ni},geoMtFlatPolarQuarticRaw:function(){return Co},geoMtFlatPolarSinusoidal:function(){return _s},geoMtFlatPolarSinusoidalRaw:function(){return Ua},geoNaturalEarth:function(){return Oa.Z},geoNaturalEarth2:function(){return Al},geoNaturalEarth2Raw:function(){return Yo},geoNaturalEarthRaw:function(){return Oa.K},geoNellHammer:function(){return vl},geoNellHammerRaw:function(){return Ns},geoNicolosi:function(){return ks},geoNicolosiRaw:function(){return cs},geoPatterson:function(){return Us},geoPattersonRaw:function(){return So},geoPeirceQuincuncial:function(){return Gs},geoPierceQuincuncial:function(){return Gs},geoPolyconic:function(){return tl},geoPolyconicRaw:function(){return Zo},geoPolyhedral:function(){return Io},geoPolyhedralButterfly:function(){return el},geoPolyhedralCollignon:function(){return As},geoPolyhedralWaterman:function(){return vo},geoProject:function(){return Qo},geoQuantize:function(){return Pa},geoQuincuncial:function(){return Ca},geoRectangularPolyconic:function(){return wn},geoRectangularPolyconicRaw:function(){return qi},geoRobinson:function(){return $s},geoRobinsonRaw:function(){return Cs},geoSatellite:function(){return es},geoSatelliteRaw:function(){return ts},geoSinuMollweide:function(){return nn},geoSinuMollweideRaw:function(){return rn},geoSinusoidal:function(){return ut},geoSinusoidalRaw:function(){return Dt},geoStitch:function(){return Bi},geoTimes:function(){return rl},geoTimesRaw:function(){return ro},geoTwoPointAzimuthal:function(){return no},geoTwoPointAzimuthalRaw:function(){return ti},geoTwoPointAzimuthalUsa:function(){return Ea},geoTwoPointEquidistant:function(){return Fo},geoTwoPointEquidistantRaw:function(){return Wa},geoTwoPointEquidistantUsa:function(){return Hs},geoVanDerGrinten:function(){return Ri},geoVanDerGrinten2:function(){return An},geoVanDerGrinten2Raw:function(){return Qi},geoVanDerGrinten3:function(){return ds},geoVanDerGrinten3Raw:function(){return Ln},geoVanDerGrinten4:function(){return zo},geoVanDerGrinten4Raw:function(){return ua},geoVanDerGrintenRaw:function(){return ns},geoWagner:function(){return gs},geoWagner4:function(){return ji},geoWagner4Raw:function(){return Pn},geoWagner6:function(){return ba},geoWagner6Raw:function(){return io},geoWagner7:function(){return ea},geoWagnerRaw:function(){return ta},geoWiechel:function(){return ms},geoWiechelRaw:function(){return is},geoWinkel3:function(){return bo},geoWinkel3Raw:function(){return as}});var T=o(15002),k=Math.abs,r=Math.atan,m=Math.atan2,h=Math.cos,s=Math.exp,e=Math.floor,t=Math.log,n=Math.max,a=Math.min,i=Math.pow,c=Math.round,l=Math.sign||function(F){return F>0?1:F<0?-1:0},u=Math.sin,f=Math.tan,d=1e-6,w=1e-12,v=Math.PI,p=v/2,y=v/4,b=Math.SQRT1_2,x=S(2),_=S(v),g=2*v,A=180/v,M=v/180;function L(F){return F>1?p:F<-1?-p:Math.asin(F)}function E(F){return F>1?0:F<-1?v:Math.acos(F)}function S(F){return F>0?Math.sqrt(F):0}function O(F){return(s(F)-s(-F))/2}function P(F){return(s(F)+s(-F))/2}function U(F){var H=f(F/2),$=2*t(h(F/2))/(H*H);function K(ft,At){var N=h(ft),Q=h(At),it=u(At),dt=Q*N,wt=-((1-dt?t((1+dt)/2)/(1-dt):-.5)+$/(1+dt));return[wt*Q*u(ft),wt*it]}return K.invert=function(ft,At){var N,Q=S(ft*ft+At*At),it=-F/2,dt=50;if(!Q)return[0,0];do{var wt=it/2,Et=h(wt),Bt=u(wt),Ut=Bt/Et,Ht=-t(k(Et));it-=N=(2/Ut*Ht-$*Ut-Q)/(-Ht/(Bt*Bt)+1-$/(2*Et*Et))*(Et<0?.7:1)}while(k(N)>d&&--dt>0);var qt=u(it);return[m(ft*qt,Q*h(it)),L(At*qt/Q)]},K}function R(){var F=p,H=(0,T.r)(U),$=H(F);return $.radius=function(K){return arguments.length?H(F=K*M):F*A},$.scale(179.976).clipAngle(147)}function j(F,H){var $=h(H),K=function(ft){return ft?ft/Math.sin(ft):1}(E($*h(F/=2)));return[2*$*u(F)*K,u(H)*K]}function B(){return(0,T.Z)(j).scale(152.63)}function z(F){var H=u(F),$=h(F),K=F>=0?1:-1,ft=f(K*F),At=(1+H-$)/2;function N(Q,it){var dt=h(it),wt=h(Q/=2);return[(1+dt)*u(Q),(K*it>-m(wt,ft)-.001?0:10*-K)+At+u(it)*$-(1+dt)*H*wt]}return N.invert=function(Q,it){var dt=0,wt=0,Et=50;do{var Bt=h(dt),Ut=u(dt),Ht=h(wt),qt=u(wt),Jt=1+Ht,le=Jt*Ut-Q,fe=At+qt*$-Jt*H*Bt-it,Le=Jt*Bt/2,Se=-Ut*qt,Ce=H*Jt*Ut/2,Ne=$*Ht+H*Bt*qt,Ee=Se*Ce-Ne*Le,rr=(fe*Se-le*Ne)/Ee/2,Ye=(le*Ce-fe*Le)/Ee;k(Ye)>2&&(Ye/=2),dt-=rr,wt-=Ye}while((k(rr)>d||k(Ye)>d)&&--Et>0);return K*wt>-m(h(dt),ft)-.001?[2*dt,wt]:null},N}function G(){var F=20*M,H=F>=0?1:-1,$=f(H*F),K=(0,T.r)(z),ft=K(F),At=ft.stream;return ft.parallel=function(N){return arguments.length?($=f((H=(F=N*M)>=0?1:-1)*F),K(F)):F*A},ft.stream=function(N){var Q=ft.rotate(),it=At(N),dt=(ft.rotate([0,0]),At(N)),wt=ft.precision();return ft.rotate(Q),it.sphere=function(){dt.polygonStart(),dt.lineStart();for(var Et=-180*H;H*Et<180;Et+=90*H)dt.point(Et,90*H);if(F)for(;H*(Et-=3*H*wt)>=-180;)dt.point(Et,H*-m(h(Et*M/2),$)*A);dt.lineEnd(),dt.polygonEnd()},it},ft.scale(218.695).center([0,28.0974])}function V(F,H){var $=f(H/2),K=S(1-$*$),ft=1+K*h(F/=2),At=u(F)*K/ft,N=$/ft,Q=At*At,it=N*N;return[1.3333333333333333*At*(3+Q-3*it),1.3333333333333333*N*(3+3*Q-it)]}function et(){return(0,T.Z)(V).scale(66.1603)}j.invert=function(F,H){if(!(F*F+4*H*H>v*v+d)){var $=F,K=H,ft=25;do{var At,N=u($),Q=u($/2),it=h($/2),dt=u(K),wt=h(K),Et=u(2*K),Bt=dt*dt,Ut=wt*wt,Ht=Q*Q,qt=1-Ut*it*it,Jt=qt?E(wt*it)*S(At=1/qt):At=0,le=2*Jt*wt*Q-F,fe=Jt*dt-H,Le=At*(Ut*Ht+Jt*wt*it*Bt),Se=At*(.5*N*Et-2*Jt*dt*Q),Ce=.25*At*(Et*Q-Jt*dt*Ut*N),Ne=At*(Bt*it+Jt*Ht*wt),Ee=Se*Ce-Ne*Le;if(!Ee)break;var rr=(fe*Se-le*Ne)/Ee,Ye=(le*Ce-fe*Le)/Ee;$-=rr,K-=Ye}while((k(rr)>d||k(Ye)>d)&&--ft>0);return[$,K]}},V.invert=function(F,H){if(H*=.375,!(F*=.375)&&k(H)>1)return null;var $=1+F*F+H*H,K=S(($-S($*$-4*H*H))/2),ft=L(K)/3,At=K?function(dt){return t(dt+S(dt*dt-1))}(k(H/K))/3:function(dt){return t(dt+S(dt*dt+1))}(k(F))/3,N=h(ft),Q=P(At),it=Q*Q-N*N;return[2*l(F)*m(O(At)*N,.25-it),2*l(H)*m(Q*u(ft),.25+it)]};var J=S(8),X=t(1+x);function Y(F,H){var $=k(H);return $<y?[F,t(f(y+H/2))]:[F*h($)*(2*x-1/u($)),l(H)*(2*x*($-y)-t(f($/2)))]}function Z(){return(0,T.Z)(Y).scale(112.314)}Y.invert=function(F,H){if((K=k(H))<X)return[F,2*r(s(H))-p];var $,K,ft=y,At=25;do{var N=h(ft/2),Q=f(ft/2);ft-=$=(J*(ft-y)-t(Q)-K)/(J-N*N/(2*Q))}while(k($)>w&&--At>0);return[F/(h(ft)*(J-1/u(ft))),l(H)*ft]};var tt=o(17889);function rt(F){var H=2*v/F;function $(K,ft){var At=(0,tt.N)(K,ft);if(k(K)>p){var N=m(At[1],At[0]),Q=S(At[0]*At[0]+At[1]*At[1]),it=H*c((N-p)/H)+p,dt=m(u(N-=it),2-h(N));N=it+L(v/Q*u(dt))-dt,At[0]=Q*h(N),At[1]=Q*u(N)}return At}return $.invert=function(K,ft){var At=S(K*K+ft*ft);if(At>p){var N=m(ft,K),Q=H*c((N-p)/H)+p,it=N>Q?-1:1,dt=At*h(Q-N),wt=1/f(it*E((dt-v)/S(v*(v-2*dt)+At*At)));N=Q+2*r((wt+it*S(wt*wt-3))/3),K=At*h(N),ft=At*u(N)}return tt.N.invert(K,ft)},$}function nt(){var F=5,H=(0,T.r)(rt),$=H(F),K=$.stream,ft=.01,At=-h(ft*M),N=u(ft*M);return $.lobes=function(Q){return arguments.length?H(F=+Q):F},$.stream=function(Q){var it=$.rotate(),dt=K(Q),wt=($.rotate([0,0]),K(Q));return $.rotate(it),dt.sphere=function(){wt.polygonStart(),wt.lineStart();for(var Et=0,Bt=360/F,Ut=2*v/F,Ht=90-180/F,qt=p;Et<F;++Et,Ht-=Bt,qt-=Ut)wt.point(m(N*h(qt),At)*A,L(N*u(qt))*A),Ht<-90?(wt.point(-90,-180-Ht-ft),wt.point(-90,-180-Ht+ft)):(wt.point(90,Ht+ft),wt.point(90,Ht-ft));wt.lineEnd(),wt.polygonEnd()},dt},$.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ot=o(12956);function ct(F,H){if(arguments.length<2&&(H=F),H===1)return ot.l;if(H===1/0)return pt;function $(K,ft){var At=(0,ot.l)(K/H,ft);return At[0]*=F,At}return $.invert=function(K,ft){var At=ot.l.invert(K/F,ft);return At[0]*=H,At},$}function pt(F,H){return[F*h(H)/h(H/=2),2*u(H)]}function gt(){var F=2,H=(0,T.r)(ct),$=H(F);return $.coefficient=function(K){return arguments.length?H(F=+K):F},$.scale(169.529)}function kt(F,H,$){var K,ft,At,N=100;$=$===void 0?0:+$,H=+H;do(ft=F($))===(At=F($+d))&&(At=ft+d),$-=K=-1*d*(ft-H)/(ft-At);while(N-- >0&&k(K)>d);return N<0?NaN:$}function yt(F,H,$){return H===void 0&&(H=40),$===void 0&&($=w),function(K,ft,At,N){var Q,it,dt;At=At===void 0?0:+At,N=N===void 0?0:+N;for(var wt=0;wt<H;wt++){var Et=F(At,N),Bt=Et[0]-K,Ut=Et[1]-ft;if(k(Bt)<$&&k(Ut)<$)break;var Ht=Bt*Bt+Ut*Ut;if(Ht>Q)At-=it/=2,N-=dt/=2;else{Q=Ht;var qt=(At>0?-1:1)*$,Jt=(N>0?-1:1)*$,le=F(At+qt,N),fe=F(At,N+Jt),Le=(le[0]-Et[0])/qt,Se=(le[1]-Et[1])/qt,Ce=(fe[0]-Et[0])/Jt,Ne=(fe[1]-Et[1])/Jt,Ee=Ne*Le-Se*Ce,rr=(k(Ee)<.5?.5:1)/Ee;if(At+=it=(Ut*Ce-Bt*Ne)*rr,N+=dt=(Bt*Se-Ut*Le)*rr,k(it)<$&&k(dt)<$)break}}return[At,N]}}function mt(){var F=ct(1.68,2);function H($,K){if($+K<-1.4){var ft=($-K+1.6)*($+K+1.4)/8;$+=ft,K-=.8*ft*u(K+v/2)}var At=F($,K),N=(1-h($*K))/12;return At[1]<0&&(At[0]*=1+N),At[1]>0&&(At[1]*=1+N/1.5*At[0]*At[0]),At}return H.invert=yt(H),H}function Ot(){return(0,T.Z)(mt()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function vt(F,H){var $,K=F*u(H),ft=30;do H-=$=(H+u(H)-K)/(1+h(H));while(k($)>d&&--ft>0);return H/2}function xt(F,H,$){function K(ft,At){return[F*ft*h(At=vt($,At)),H*u(At)]}return K.invert=function(ft,At){return At=L(At/H),[ft/(F*h(At)),L((2*At+u(2*At))/$)]},K}pt.invert=function(F,H){var $=2*L(H/2);return[F*h($/2)/h($),$]};var st=xt(x/p,x,v);function at(){return(0,T.Z)(st).scale(169.529)}var ht=2.00276,Lt=1.11072;function Mt(F,H){var $=vt(v,H);return[ht*F/(1/h(H)+Lt/h($)),(H+x*u($))/ht]}function _t(){return(0,T.Z)(Mt).scale(160.857)}function St(F){var H=0,$=(0,T.r)(F),K=$(H);return K.parallel=function(ft){return arguments.length?$(H=ft*M):H*A},K}function Dt(F,H){return[F*h(H),H]}function ut(){return(0,T.Z)(Dt).scale(152.63)}function Tt(F){if(!F)return Dt;var H=1/f(F);function $(K,ft){var At=H+F-ft,N=At&&K*h(ft)/At;return[At*u(N),H-At*h(N)]}return $.invert=function(K,ft){var At=S(K*K+(ft=H-ft)*ft),N=H+F-At;return[At/h(N)*m(K,ft),N]},$}function bt(){return St(Tt).scale(123.082).center([0,26.1441]).parallel(45)}function It(F){function H($,K){var ft=p-K,At=ft&&$*F*u(ft)/ft;return[ft*u(At)/F,p-ft*h(At)]}return H.invert=function($,K){var ft=$*F,At=p-K,N=S(ft*ft+At*At),Q=m(ft,At);return[(N?N/u(N):1)*Q/F,p-N]},H}function zt(){var F=.5,H=(0,T.r)(It),$=H(F);return $.fraction=function(K){return arguments.length?H(F=+K):F},$.scale(158.837)}Mt.invert=function(F,H){var $,K,ft=ht*H,At=H<0?-y:y,N=25;do K=ft-x*u(At),At-=$=(u(2*At)+2*At-v*u(K))/(2*h(2*At)+2+v*h(K)*x*h(At));while(k($)>d&&--N>0);return K=ft-x*u(At),[F*(1/h(K)+Lt/h(At))/ht,K]},Dt.invert=function(F,H){return[F/h(H),H]};var Ft=xt(1,4/v,v);function $t(){return(0,T.Z)(Ft).scale(152.63)}var Wt=o(66624),Xt=o(49386);function ae(F,H,$,K,ft,At){var N,Q=h(At);if(k(F)>1||k(At)>1)N=E($*ft+H*K*Q);else{var it=u(F/2),dt=u(At/2);N=2*L(S(it*it+H*K*dt*dt))}return k(N)>d?[N,m(K*u(At),H*ft-$*K*Q)]:[0,0]}function Qt(F,H,$){return E((F*F+H*H-$*$)/(2*F*H))}function de(F){return F-2*v*e((F+v)/(2*v))}function ye(F,H,$){for(var K,ft=[[F[0],F[1],u(F[1]),h(F[1])],[H[0],H[1],u(H[1]),h(H[1])],[$[0],$[1],u($[1]),h($[1])]],At=ft[2],N=0;N<3;++N,At=K)K=ft[N],At.v=ae(K[1]-At[1],At[3],At[2],K[3],K[2],K[0]-At[0]),At.point=[0,0];var Q=Qt(ft[0].v[0],ft[2].v[0],ft[1].v[0]),it=Qt(ft[0].v[0],ft[1].v[0],ft[2].v[0]),dt=v-Q;ft[2].point[1]=0,ft[0].point[0]=-(ft[1].point[0]=ft[0].v[0]/2);var wt=[ft[2].point[0]=ft[0].point[0]+ft[2].v[0]*h(Q),2*(ft[0].point[1]=ft[1].point[1]=ft[2].v[0]*u(Q))];return function(Et,Bt){var Ut,Ht=u(Bt),qt=h(Bt),Jt=new Array(3);for(Ut=0;Ut<3;++Ut){var le=ft[Ut];if(Jt[Ut]=ae(Bt-le[1],le[3],le[2],qt,Ht,Et-le[0]),!Jt[Ut][0])return le.point;Jt[Ut][1]=de(Jt[Ut][1]-le.v[1])}var fe=wt.slice();for(Ut=0;Ut<3;++Ut){var Le=Ut==2?0:Ut+1,Se=Qt(ft[Ut].v[0],Jt[Ut][0],Jt[Le][0]);Jt[Ut][1]<0&&(Se=-Se),Ut?Ut==1?(Se=it-Se,fe[0]-=Jt[Ut][0]*h(Se),fe[1]-=Jt[Ut][0]*u(Se)):(Se=dt-Se,fe[0]+=Jt[Ut][0]*h(Se),fe[1]+=Jt[Ut][0]*u(Se)):(fe[0]+=Jt[Ut][0]*h(Se),fe[1]-=Jt[Ut][0]*u(Se))}return fe[0]/=3,fe[1]/=3,fe}}function ve(F){return F[0]*=M,F[1]*=M,F}function ie(){return se([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function se(F,H,$){var K=(0,Wt.Z)({type:"MultiPoint",coordinates:[F,H,$]}),ft=[-K[0],-K[1]],At=(0,Xt.Z)(ft),N=ye(ve(At(F)),ve(At(H)),ve(At($)));N.invert=yt(N);var Q=(0,T.Z)(N).rotate(ft),it=Q.center;return delete Q.rotate,Q.center=function(dt){return arguments.length?it(At(dt)):At.invert(it())},Q.clipAngle(90)}function ke(F,H){var $=S(1-u(H));return[2/_*F*$,_*(1-$)]}function Ae(){return(0,T.Z)(ke).scale(95.6464).center([0,30])}function Ie(F){var H=f(F);function $(K,ft){return[K,(K?K/u(K):1)*(u(ft)*h(K)-H*h(ft))]}return $.invert=H?function(K,ft){K&&(ft*=u(K)/K);var At=h(K);return[K,2*m(S(At*At+H*H-ft*ft)-At,H-ft)]}:function(K,ft){return[K,L(K?ft*f(K)/K:ft)]},$}function Te(){return St(Ie).scale(249.828).clipAngle(90)}ke.invert=function(F,H){var $=($=H/_-1)*$;return[$>0?F*S(v/$)/2:0,L(1-$)]};var Vt=S(3);function Zt(F,H){return[Vt*F*(2*h(2*H/3)-1)/_,Vt*_*u(H/3)]}function Gt(){return(0,T.Z)(Zt).scale(156.19)}function Yt(F){var H=h(F);function $(K,ft){return[K*H,u(ft)/H]}return $.invert=function(K,ft){return[K/H,L(ft*H)]},$}function ne(){return St(Yt).parallel(38.58).scale(195.044)}function re(F){var H=h(F);function $(K,ft){return[K*H,(1+H)*f(ft/2)]}return $.invert=function(K,ft){return[K/H,2*r(ft/(1+H))]},$}function Pt(){return St(re).scale(124.75)}function Nt(F,H){var $=S(8/(3*v));return[$*F*(1-k(H)/v),$*H]}function ee(){return(0,T.Z)(Nt).scale(165.664)}function te(F,H){var $=S(4-3*u(k(H)));return[2/S(6*v)*F*$,l(H)*S(2*v/3)*(2-$)]}function ge(){return(0,T.Z)(te).scale(165.664)}function pe(F,H){var $=S(v*(4+v));return[2/$*F*(1+S(1-4*H*H/(v*v))),4/$*H]}function me(){return(0,T.Z)(pe).scale(180.739)}function ce(F,H){var $=(2+p)*u(H);H/=2;for(var K=0,ft=1/0;K<10&&k(ft)>d;K++){var At=h(H);H-=ft=(H+u(H)*(At+2)-$)/(2*At*(1+At))}return[2/S(v*(4+v))*F*(1+h(H)),2*S(v/(4+v))*u(H)]}function we(){return(0,T.Z)(ce).scale(180.739)}function ue(F,H){return[F*(1+h(H))/S(2+v),2*H/S(2+v)]}function he(){return(0,T.Z)(ue).scale(173.044)}function be(F,H){for(var $=(1+p)*u(H),K=0,ft=1/0;K<10&&k(ft)>d;K++)H-=ft=(H+u(H)-$)/(1+h(H));return $=S(2+v),[F*(1+h(H))/$,2*H/$]}function Pe(){return(0,T.Z)(be).scale(173.044)}Zt.invert=function(F,H){var $=3*L(H/(Vt*_));return[_*F/(Vt*(2*h(2*$/3)-1)),$]},Nt.invert=function(F,H){var $=S(8/(3*v)),K=H/$;return[F/($*(1-k(K)/v)),K]},te.invert=function(F,H){var $=2-k(H)/S(2*v/3);return[F*S(6*v)/(2*$),l(H)*L((4-$*$)/3)]},pe.invert=function(F,H){var $=S(v*(4+v))/2;return[F*$/(1+S(1-H*H*(4+v)/(4*v))),H*$/2]},ce.invert=function(F,H){var $=H*S((4+v)/v)/2,K=L($),ft=h(K);return[F/(2/S(v*(4+v))*(1+ft)),L((K+$*(ft+2))/(2+p))]},ue.invert=function(F,H){var $=S(2+v),K=H*$/2;return[$*F/(1+h(K)),K]},be.invert=function(F,H){var $=1+p,K=S($/2);return[2*F*K/(1+h(H*=K)),L((H+u(H))/$)]};var De=3+2*x;function Ue(F,H){var $=u(F/=2),K=h(F),ft=S(h(H)),At=h(H/=2),N=u(H)/(At+x*K*ft),Q=S(2/(1+N*N)),it=S((x*At+(K+$)*ft)/(x*At+(K-$)*ft));return[De*(Q*(it-1/it)-2*t(it)),De*(Q*N*(it+1/it)-2*r(N))]}function tr(){return(0,T.Z)(Ue).scale(62.5271)}Ue.invert=function(F,H){if(!($=V.invert(F/1.2,1.065*H)))return null;var $,K=$[0],ft=$[1],At=20;F/=De,H/=De;do{var N=K/2,Q=ft/2,it=u(N),dt=h(N),wt=u(Q),Et=h(Q),Bt=h(ft),Ut=S(Bt),Ht=wt/(Et+x*dt*Ut),qt=Ht*Ht,Jt=S(2/(1+qt)),le=(x*Et+(dt+it)*Ut)/(x*Et+(dt-it)*Ut),fe=S(le),Le=fe-1/fe,Se=fe+1/fe,Ce=Jt*Le-2*t(fe)-F,Ne=Jt*Ht*Se-2*r(Ht)-H,Ee=wt&&b*Ut*it*qt/wt,rr=(x*dt*Et+Ut)/(2*(Et+x*dt*Ut)*(Et+x*dt*Ut)*Ut),Ye=-.5*Ht*Jt*Jt*Jt,Ve=Ye*Ee,dr=Ye*rr,vr=(vr=2*Et+x*Ut*(dt-it))*vr*fe,Fr=(x*dt*Et*Ut+Bt)/vr,zr=-x*it*wt/(Ut*vr),$r=Le*Ve-2*Fr/fe+Jt*(Fr+Fr/le),Zr=Le*dr-2*zr/fe+Jt*(zr+zr/le),cn=Ht*Se*Ve-2*Ee/(1+qt)+Jt*Se*Ee+Jt*Ht*(Fr-Fr/le),ln=Ht*Se*dr-2*rr/(1+qt)+Jt*Se*rr+Jt*Ht*(zr-zr/le),pn=Zr*cn-ln*$r;if(!pn)break;var bn=(Ne*Zr-Ce*ln)/pn,On=(Ce*cn-Ne*$r)/pn;K-=bn,ft=n(-p,a(p,ft-On))}while((k(bn)>d||k(On)>d)&&--At>0);return k(k(ft)-p)<d?[0,ft]:At&&[K,ft]};var Ge=h(35*M);function Ze(F,H){var $=f(H/2);return[F*Ge*S(1-$*$),(1+Ge)*$]}function We(){return(0,T.Z)(Ze).scale(137.152)}function pr(F,H){var $=H/2,K=h($);return[2*F/_*h(H)*K*K,_*f($)]}function xr(){return(0,T.Z)(pr).scale(135.264)}function sr(F){var H=1-F,$=ft(v,0)[0]-ft(-v,0)[0],K=S(2*(ft(0,p)[1]-ft(0,-p)[1])/$);function ft(Q,it){var dt=h(it),wt=u(it);return[dt/(H+F*dt)*Q,H*it+F*wt]}function At(Q,it){var dt=ft(Q,it);return[dt[0]*K,dt[1]/K]}function N(Q){return At(0,Q)[1]}return At.invert=function(Q,it){var dt=kt(N,it);return[Q/K*(F+H/h(dt)),dt]},At}function $e(){var F=.5,H=(0,T.r)(sr),$=H(F);return $.alpha=function(K){return arguments.length?H(F=+K):F},$.scale(168.725)}Ze.invert=function(F,H){var $=H/(1+Ge);return[F&&F/(Ge*S(1-$*$)),2*r($)]},pr.invert=function(F,H){var $=r(H/_),K=h($),ft=2*$;return[F*_/2/(h(ft)*K*K),ft]};var ir=o(57962),Ke=o(97492);function ar(F){return[F[0]/2,L(f(F[1]/2*M))*A]}function fr(F){return[2*F[0],2*r(u(F[1]*M))*A]}function mr(F){F==null&&(F=ir.Z);var H=F(),$=(0,Ke.Z)().scale(A).precision(0).clipAngle(null).translate([0,0]);function K(At){return H(ar(At))}function ft(At){K[At]=function(){return arguments.length?(H[At].apply(H,arguments),K):H[At]()}}return H.invert&&(K.invert=function(At){return fr(H.invert(At))}),K.stream=function(At){var N=H.stream(At),Q=$.stream({point:function(it,dt){N.point(it/2,L(f(-dt/2*M))*A)},lineStart:function(){N.lineStart()},lineEnd:function(){N.lineEnd()},polygonStart:function(){N.polygonStart()},polygonEnd:function(){N.polygonEnd()}});return Q.sphere=N.sphere,Q},K.rotate=function(At){return arguments.length?($.rotate(At),K):$.rotate()},K.center=function(At){return arguments.length?(H.center(ar(At)),K):fr(H.center())},ft("angle"),ft("clipAngle"),ft("clipExtent"),ft("fitExtent"),ft("fitHeight"),ft("fitSize"),ft("fitWidth"),ft("scale"),ft("translate"),ft("precision"),K.scale(249.5)}function Cr(F,H){var $=2*v/H,K=F*F;function ft(At,N){var Q=(0,tt.N)(At,N),it=Q[0],dt=Q[1],wt=it*it+dt*dt;if(wt>K){var Et=S(wt),Bt=m(dt,it),Ut=$*c(Bt/$),Ht=Bt-Ut,qt=F*h(Ht),Jt=(F*u(Ht)-Ht*u(qt))/(p-qt),le=Er(Ht,Jt),fe=(v-F)/_r(le,qt,v);it=Et;var Le,Se=50;do it-=Le=(F+_r(le,qt,it)*fe-Et)/(le(it)*fe);while(k(Le)>d&&--Se>0);dt=Ht*u(it),it<p&&(dt-=Jt*(it-p));var Ce=u(Ut),Ne=h(Ut);Q[0]=it*Ne-dt*Ce,Q[1]=it*Ce+dt*Ne}return Q}return ft.invert=function(At,N){var Q=At*At+N*N;if(Q>K){var it=S(Q),dt=m(N,At),wt=$*c(dt/$),Et=dt-wt;At=it*h(Et),N=it*u(Et);for(var Bt=At-p,Ut=u(At),Ht=N/Ut,qt=At<p?1/0:0,Jt=10;;){var le=F*u(Ht),fe=F*h(Ht),Le=u(fe),Se=p-fe,Ce=(le-Ht*Le)/Se,Ne=Er(Ht,Ce);if(k(qt)<w||!--Jt)break;Ht-=qt=(Ht*Ut-Ce*Bt-N)/(Ut-2*Bt*(Se*(fe+Ht*le*h(fe)-Le)-le*(le-Ht*Le))/(Se*Se))}At=(it=F+_r(Ne,fe,At)*(v-F)/_r(Ne,fe,v))*h(dt=wt+Ht),N=it*u(dt)}return tt.N.invert(At,N)},ft}function Er(F,H){return function($){var K=F*h($);return $<p&&(K-=H),S(1+K*K)}}function _r(F,H,$){for(var K=($-H)/50,ft=F(H)+F($),At=1,N=H;At<50;++At)ft+=2*F(N+=K);return .5*ft*K}function Sr(){var F=6,H=30*M,$=h(H),K=u(H),ft=(0,T.r)(Cr),At=ft(H,F),N=At.stream,Q=-h(.01*M),it=u(.01*M);return At.radius=function(dt){return arguments.length?($=h(H=dt*M),K=u(H),ft(H,F)):H*A},At.lobes=function(dt){return arguments.length?ft(H,F=+dt):F},At.stream=function(dt){var wt=At.rotate(),Et=N(dt),Bt=(At.rotate([0,0]),N(dt));return At.rotate(wt),Et.sphere=function(){Bt.polygonStart(),Bt.lineStart();for(var Ut=0,Ht=2*v/F,qt=0;Ut<F;++Ut,qt-=Ht)Bt.point(m(it*h(qt),Q)*A,L(it*u(qt))*A),Bt.point(m(K*h(qt-Ht/2),$)*A,L(K*u(qt-Ht/2))*A);Bt.lineEnd(),Bt.polygonEnd()},Et},At.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Xr(F,H,$,K,ft,At,N,Q){function it(dt,wt){if(!wt)return[F*dt/v,0];var Et=wt*wt,Bt=F+Et*(H+Et*($+Et*K)),Ut=wt*(ft-1+Et*(At-Q+Et*N)),Ht=(Bt*Bt+Ut*Ut)/(2*Ut),qt=dt*L(Bt/Ht)/v;return[Ht*u(qt),wt*(1+Et*Q)+Ht*(1-h(qt))]}return arguments.length<8&&(Q=0),it.invert=function(dt,wt){var Et,Bt,Ut=v*dt/F,Ht=wt,qt=50;do{var Jt=Ht*Ht,le=F+Jt*(H+Jt*($+Jt*K)),fe=Ht*(ft-1+Jt*(At-Q+Jt*N)),Le=le*le+fe*fe,Se=2*fe,Ce=Le/Se,Ne=Ce*Ce,Ee=L(le/Ce)/v,rr=Ut*Ee,Ye=le*le,Ve=(2*H+Jt*(4*$+6*Jt*K))*Ht,dr=ft+Jt*(3*At+5*Jt*N),vr=(2*(le*Ve+fe*(dr-1))*Se-Le*(2*(dr-1)))/(Se*Se),Fr=h(rr),zr=u(rr),$r=Ce*Fr,Zr=Ce*zr,cn=Ut/v*(1/S(1-Ye/Ne))*(Ve*Ce-le*vr)/Ne,ln=Zr-dt,pn=Ht*(1+Jt*Q)+Ce-$r-wt,bn=vr*zr+$r*cn,On=$r*Ee,Br=1+vr-(vr*Fr-Zr*cn),on=Zr*Ee,dn=bn*on-Br*On;if(!dn)break;Ut-=Et=(pn*bn-ln*Br)/dn,Ht-=Bt=(ln*on-pn*On)/dn}while((k(Et)>d||k(Bt)>d)&&--qt>0);return[Ut,Ht]},it}var en=Xr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function sn(){return(0,T.Z)(en).scale(149.995)}var tn=Xr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function qr(){return(0,T.Z)(tn).scale(153.93)}var vn=Xr(5/6*v,-.62636,-.0344,0,1.3493,-.05524,0,.045);function je(){return(0,T.Z)(vn).scale(130.945)}function nr(F,H){var $=F*F,K=H*H;return[F*(1-.162388*K)*(.87-952426e-9*$*$),H*(1+K/12)]}function hr(){return(0,T.Z)(nr).scale(131.747)}nr.invert=function(F,H){var $,K=F,ft=H,At=50;do{var N=ft*ft;ft-=$=(ft*(1+N/12)-H)/(1+N/4)}while(k($)>d&&--At>0);At=50,F/=1-.162388*N;do{var Q=(Q=K*K)*Q;K-=$=(K*(.87-952426e-9*Q)-F)/(.87-.00476213*Q)}while(k($)>d&&--At>0);return[K,ft]};var gr=Xr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Mr(){return(0,T.Z)(gr).scale(131.087)}function Hr(F){var H=F(p,0)[0]-F(-p,0)[0];function $(K,ft){var At=K>0?-.5:.5,N=F(K+At*v,ft);return N[0]-=At*H,N}return F.invert&&($.invert=function(K,ft){var At=K>0?-.5:.5,N=F.invert(K+At*H,ft),Q=N[0]-At*v;return Q<-v?Q+=2*v:Q>v&&(Q-=2*v),N[0]=Q,N}),$}function Pr(F,H){var $=l(F),K=l(H),ft=h(H),At=h(F)*ft,N=u(F)*ft,Q=u(K*H);F=k(m(N,Q)),H=L(At),k(F-p)>d&&(F%=p);var it=function(dt,wt){if(wt===p)return[0,0];var Et,Bt,Ut=u(wt),Ht=Ut*Ut,qt=Ht*Ht,Jt=1+qt,le=1+3*qt,fe=1-qt,Le=L(1/S(Jt)),Se=fe+Ht*Jt*Le,Ce=(1-Ut)/Se,Ne=S(Ce),Ee=Ce*Jt,rr=S(Ee),Ye=Ne*fe;if(dt===0)return[0,-(Ye+Ht*rr)];var Ve,dr=h(wt),vr=1/dr,Fr=2*Ut*dr,zr=(-Se*dr-(1-Ut)*((-3*Ht+Le*le)*Fr))/(Se*Se),$r=-vr*Fr,Zr=-vr*(Ht*Jt*zr+Ce*le*Fr),cn=-2*vr*(fe*(.5*zr/Ne)-2*Ht*Ne*Fr),ln=4*dt/v;if(dt>.222*v||wt<v/4&&dt>.175*v){if(Et=(Ye+Ht*S(Ee*(1+qt)-Ye*Ye))/(1+qt),dt>v/4)return[Et,Et];var pn=Et,bn=.5*Et;Et=.5*(bn+pn),Bt=50;do{var On=Et*(cn+$r*S(Ee-Et*Et))+Zr*L(Et/rr)-ln;if(!On)break;On<0?bn=Et:pn=Et,Et=.5*(bn+pn)}while(k(pn-bn)>d&&--Bt>0)}else{Et=d,Bt=25;do{var Br=Et*Et,on=S(Ee-Br),dn=cn+$r*on,_n=Et*dn+Zr*L(Et/rr)-ln;Et-=Ve=on?_n/(dn+(Zr-$r*Br)/on):0}while(k(Ve)>d&&--Bt>0)}return[Et,-Ye-Ht*S(Ee-Et*Et)]}(F>v/4?p-F:F,H);return F>v/4&&(Q=it[0],it[0]=-it[1],it[1]=-Q),it[0]*=$,it[1]*=-K,it}function Dr(){return(0,T.Z)(Hr(Pr)).scale(239.75)}function Qr(F,H){var $,K,ft,At,N,Q;if(H<d)return[(At=u(F))-($=H*(F-At*(K=h(F)))/4)*K,K+$*At,1-H*At*At/2,F-$];if(H>=1-d)return $=(1-H)/4,ft=1/(K=P(F)),[(At=((Q=s(2*(Q=F)))-1)/(Q+1))+$*((N=K*O(F))-F)/(K*K),ft-$*At*ft*(N-F),ft+$*At*ft*(N+F),2*r(s(F))-p+$*(N-F)/K];var it=[1,0,0,0,0,0,0,0,0],dt=[S(H),0,0,0,0,0,0,0,0],wt=0;for(K=S(1-H),N=1;k(dt[wt]/it[wt])>d&&wt<8;)$=it[wt++],dt[wt]=($-K)/2,it[wt]=($+K)/2,K=S($*K),N*=2;ft=N*it[wt]*F;do ft=(L(At=dt[wt]*u(K=ft)/it[wt])+ft)/2;while(--wt);return[u(ft),At=h(ft),At/h(ft-K),ft]}function He(F,H){if(!H)return F;if(H===1)return t(f(F/2+y));for(var $=1,K=S(1-H),ft=S(H),At=0;k(ft)>d;At++){if(F%v){var N=r(K*f(F)/$);N<0&&(N+=v),F+=N+~~(F/v)*v}else F+=F;ft=($+K)/2,K=S($*K),ft=(($=ft)-K)/2}return F/(i(2,At)*$)}function wr(F,H){var $=(x-1)/(x+1),K=S(1-$*$),ft=He(p,K*K),At=t(f(v/4+k(H)/2)),N=s(-1*At)/S($),Q=function(dt,wt){var Et=dt*dt,Bt=wt+1,Ut=1-Et-wt*wt;return[.5*((dt>=0?p:-p)-m(Ut,2*dt)),-.25*t(Ut*Ut+4*Et)+.5*t(Bt*Bt+Et)]}(N*h(-1*F),N*u(-1*F)),it=function(dt,wt,Et){var Bt=k(dt),Ut=O(k(wt));if(Bt){var Ht=1/u(Bt),qt=1/(f(Bt)*f(Bt)),Jt=-(qt+Et*(Ut*Ut*Ht*Ht)-1+Et),le=(-Jt+S(Jt*Jt-(Et-1)*qt*4))/2;return[He(r(1/S(le)),Et)*l(dt),He(r(S((le/qt-1)/Et)),1-Et)*l(wt)]}return[0,He(r(Ut),1-Et)*l(wt)]}(Q[0],Q[1],K*K);return[-it[1],(H>=0?1:-1)*(.5*ft-it[0])]}function Me(){return(0,T.Z)(Hr(wr)).scale(151.496)}Pr.invert=function(F,H){k(F)>1&&(F=2*l(F)-F),k(H)>1&&(H=2*l(H)-H);var $=l(F),K=l(H),ft=-$*F,At=-K*H,N=At/ft<1,Q=function(Et,Bt){for(var Ut=0,Ht=1,qt=.5,Jt=50;;){var le=qt*qt,fe=S(qt),Le=L(1/S(1+le)),Se=1-le+qt*(1+le)*Le,Ce=(1-fe)/Se,Ne=S(Ce),Ee=Ce*(1+le),rr=Ne*(1-le),Ye=S(Ee-Et*Et),Ve=Bt+rr+qt*Ye;if(k(Ht-Ut)<w||--Jt==0||Ve===0)break;Ve>0?Ut=qt:Ht=qt,qt=.5*(Ut+Ht)}if(!Jt)return null;var dr=L(fe),vr=h(dr),Fr=1/vr,zr=2*fe*vr,$r=(-Se*vr-(-3*qt+Le*(1+3*le))*zr*(1-fe))/(Se*Se);return[v/4*(Et*(-2*Fr*((1-le)*(.5*$r/Ne)-2*qt*Ne*zr)+-Fr*zr*Ye)+-Fr*(qt*(1+le)*$r+Ce*(1+3*le)*zr)*L(Et/S(Ee))),dr]}(N?At:ft,N?ft:At),it=Q[0],dt=Q[1],wt=h(dt);return N&&(it=-p-it),[$*(m(u(it)*wt,-u(dt))+v),K*L(h(it)*wt)]},wr.invert=function(F,H){var $,K,ft,At,N,Q,it=(x-1)/(x+1),dt=S(1-it*it),wt=(K=-F,ft=dt*dt,($=.5*He(p,dt*dt)-H)?(At=Qr($,ft),K?(Q=(N=Qr(K,1-ft))[1]*N[1]+ft*At[0]*At[0]*N[0]*N[0],[[At[0]*N[2]/Q,At[1]*At[2]*N[0]*N[1]/Q],[At[1]*N[1]/Q,-At[0]*At[2]*N[0]*N[2]/Q],[At[2]*N[1]*N[2]/Q,-ft*At[0]*At[1]*N[0]/Q]]):[[At[0],0],[At[1],0],[At[2],0]]):[[0,(N=Qr(K,1-ft))[0]/N[1]],[1/N[1],0],[N[2]/N[1],0]]),Et=function(Bt,Ut){var Ht=Ut[0]*Ut[0]+Ut[1]*Ut[1];return[(Bt[0]*Ut[0]+Bt[1]*Ut[1])/Ht,(Bt[1]*Ut[0]-Bt[0]*Ut[1])/Ht]}(wt[0],wt[1]);return[m(Et[1],Et[0])/-1,2*r(s(-.5*t(it*Et[0]*Et[0]+it*Et[1]*Et[1])))-p]};var qe=o(7613);function Qe(F){var H=u(F),$=h(F),K=yr(F);function ft(At,N){var Q=K(At,N);At=Q[0],N=Q[1];var it=u(N),dt=h(N),wt=h(At),Et=E(H*it+$*dt*wt),Bt=u(Et),Ut=k(Bt)>d?Et/Bt:1;return[Ut*$*u(At),(k(At)>p?Ut:-Ut)*(H*dt-$*it*wt)]}return K.invert=yr(-F),ft.invert=function(At,N){var Q=S(At*At+N*N),it=-u(Q),dt=h(Q),wt=Q*dt,Et=-N*it,Bt=Q*H,Ut=S(wt*wt+Et*Et-Bt*Bt),Ht=m(wt*Bt+Et*Ut,Et*Bt-wt*Ut),qt=(Q>p?-1:1)*m(At*it,Q*h(Ht)*dt+N*u(Ht)*it);return K.invert(qt,Ht)},ft}function yr(F){var H=u(F),$=h(F);return function(K,ft){var At=h(ft),N=h(K)*At,Q=u(K)*At,it=u(ft);return[m(Q,N*$-it*H),L(it*$+N*H)]}}function br(){var F=0,H=(0,T.r)(Qe),$=H(F),K=$.rotate,ft=$.stream,At=(0,qe.Z)();return $.parallel=function(N){if(!arguments.length)return F*A;var Q=$.rotate();return H(F=N*M).rotate(Q)},$.rotate=function(N){return arguments.length?(K.call($,[N[0],N[1]-F*A]),At.center([-N[0],-N[1]]),$):((N=K.call($))[1]+=F*A,N)},$.stream=function(N){return(N=ft(N)).sphere=function(){N.polygonStart();var Q,it=At.radius(89.99)().coordinates[0],dt=it.length-1,wt=-1;for(N.lineStart();++wt<dt;)N.point((Q=it[wt])[0],Q[1]);for(N.lineEnd(),dt=(it=At.radius(90.01)().coordinates[0]).length-1,N.lineStart();--wt>=0;)N.point((Q=it[wt])[0],Q[1]);N.lineEnd(),N.polygonEnd()},N},$.scale(79.4187).parallel(45).clipAngle(179.999)}var Ar=o(33064),cr=o(72736),Xe=L(1-1/3)*A,Je=Yt(0);function lr(F){var H=Xe*M,$=ke(v,H)[0]-ke(-v,H)[0],K=Je(0,H)[1],ft=ke(0,H)[1],At=_-ft,N=g/F,Q=4/g,it=K+At*At*4/g;function dt(wt,Et){var Bt,Ut=k(Et);if(Ut>H){var Ht=a(F-1,n(0,e((wt+v)/N)));(Bt=ke(wt+=v*(F-1)/F-Ht*N,Ut))[0]=Bt[0]*g/$-g*(F-1)/(2*F)+Ht*g/F,Bt[1]=K+4*(Bt[1]-ft)*At/g,Et<0&&(Bt[1]=-Bt[1])}else Bt=Je(wt,Et);return Bt[0]*=Q,Bt[1]/=it,Bt}return dt.invert=function(wt,Et){wt/=Q;var Bt=k(Et*=it);if(Bt>K){var Ut=a(F-1,n(0,e((wt+v)/N)));wt=(wt+v*(F-1)/F-Ut*N)*$/g;var Ht=ke.invert(wt,.25*(Bt-K)*g/At+ft);return Ht[0]-=v*(F-1)/F-Ut*N,Et<0&&(Ht[1]=-Ht[1]),Ht}return Je.invert(wt,Et)},dt}function ur(F,H){return[F,1&H?90-d:Xe]}function Lr(F,H){return[F,1&H?-90+d:-Xe]}function Ir(F){return[F[0]*(1-d),F[1]]}function Gr(){var F=4,H=(0,T.r)(lr),$=H(F),K=$.stream;return $.lobes=function(ft){return arguments.length?H(F=+ft):F},$.stream=function(ft){var At=$.rotate(),N=K(ft),Q=($.rotate([0,0]),K(ft));return $.rotate(At),N.sphere=function(){var it,dt;(0,cr.Z)((it=180/F,dt=[].concat((0,Ar.w6)(-180,180+it/2,it).map(ur),(0,Ar.w6)(180,-180-it/2,-it).map(Lr)),{type:"Polygon",coordinates:[it===180?dt.map(Ir):dt]}),Q)},N},$.scale(239.75)}function Nr(F){var H,$=1+F,K=L(u(1/$)),ft=2*S(v/(H=v+4*K*$)),At=.5*ft*($+S(F*(2+F))),N=F*F,Q=$*$;function it(dt,wt){var Et,Bt,Ut=1-u(wt);if(Ut&&Ut<2){var Ht,qt=p-wt,Jt=25;do{var le=u(qt),fe=h(qt),Le=K+m(le,$-fe),Se=1+Q-2*$*fe;qt-=Ht=(qt-N*K-$*le+Se*Le-.5*Ut*H)/(2*$*le*Le)}while(k(Ht)>w&&--Jt>0);Et=ft*S(Se),Bt=dt*Le/v}else Et=ft*(F+Ut),Bt=dt*K/v;return[Et*u(Bt),At-Et*h(Bt)]}return it.invert=function(dt,wt){var Et=dt*dt+(wt-=At)*wt,Bt=(1+Q-Et/(ft*ft))/(2*$),Ut=E(Bt),Ht=u(Ut),qt=K+m(Ht,$-Bt);return[L(dt/S(Et))*v/qt,L(1-2*(Ut-N*K-$*Ht+(1+Q-2*$*Bt)*qt)/H)]},it}function Kr(){var F=1,H=(0,T.r)(Nr),$=H(F);return $.ratio=function(K){return arguments.length?H(F=+K):F},$.scale(167.774).center([0,18.67])}var Vr=.7109889596207567,an=.0528035274542;function rn(F,H){return H>-Vr?((F=st(F,H))[1]+=an,F):Dt(F,H)}function nn(){return(0,T.Z)(rn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function hn(F,H){return k(H)>Vr?((F=st(F,H))[1]-=H>0?an:-an,F):Dt(F,H)}function fn(){return(0,T.Z)(hn).scale(152.63)}function kn(F,H,$,K){var ft=S(4*v/(2*$+(1+F-H/2)*u(2*$)+(F+H)/2*u(4*$)+H/2*u(6*$))),At=S(K*u($)*S((1+F*h(2*$)+H*h(4*$))/(1+F+H))),N=$*it(1);function Q(Et){return S(1+F*h(2*Et)+H*h(4*Et))}function it(Et){var Bt=Et*$;return(2*Bt+(1+F-H/2)*u(2*Bt)+(F+H)/2*u(4*Bt)+H/2*u(6*Bt))/$}function dt(Et){return Q(Et)*u(Et)}var wt=function(Et,Bt){var Ut=$*kt(it,N*u(Bt)/$,Bt/v);isNaN(Ut)&&(Ut=$*l(Bt));var Ht=ft*Q(Ut);return[Ht*At*Et/v*h(Ut),Ht/At*u(Ut)]};return wt.invert=function(Et,Bt){var Ut=kt(dt,Bt*At/ft);return[Et*v/(h(Ut)*ft*At*Q(Ut)),L($*it(Ut/$)/N)]},$===0&&(ft=S(K/v),(wt=function(Et,Bt){return[Et*ft,u(Bt)/ft]}).invert=function(Et,Bt){return[Et/ft,L(Bt*ft)]}),wt}function Yr(){var F=1,H=0,$=45*M,K=2,ft=(0,T.r)(kn),At=ft(F,H,$,K);return At.a=function(N){return arguments.length?ft(F=+N,H,$,K):F},At.b=function(N){return arguments.length?ft(F,H=+N,$,K):H},At.psiMax=function(N){return arguments.length?ft(F,H,$=+N*M,K):$*A},At.ratio=function(N){return arguments.length?ft(F,H,$,K=+N):K},At.scale(180.739)}function mn(F,H,$,K,ft,At,N,Q,it,dt,wt){if(wt.nanEncountered)return NaN;var Et,Bt,Ut,Ht,qt,Jt,le,fe,Le,Se;if(Bt=F(H+.25*(Et=$-H)),Ut=F($-.25*Et),isNaN(Bt))wt.nanEncountered=!0;else{if(!isNaN(Ut))return Se=((Jt=(Ht=Et*(K+4*Bt+ft)/12)+(qt=Et*(ft+4*Ut+At)/12))-N)/15,dt>it?(wt.maxDepthCount++,Jt+Se):Math.abs(Se)<Q?Jt+Se:(fe=mn(F,H,le=H+.5*Et,K,Bt,ft,Ht,.5*Q,it,dt+1,wt),isNaN(fe)?(wt.nanEncountered=!0,NaN):(Le=mn(F,le,$,ft,Ut,At,qt,.5*Q,it,dt+1,wt),isNaN(Le)?(wt.nanEncountered=!0,NaN):fe+Le));wt.nanEncountered=!0}}function Sn(F,H,$,K,ft){K===void 0&&(K=1e-8),ft===void 0&&(ft=20);var At=F(H),N=F(.5*(H+$)),Q=F($);return mn(F,H,$,At,N,Q,(At+4*N+Q)*($-H)/6,K,ft,1,{maxDepthCount:0,nanEncountered:!1})}function Xn(F,H,$){function K(Ut){return F+(1-F)*i(1-i(Ut,H),1/H)}function ft(Ut){return Sn(K,0,Ut,1e-4)}for(var At=1/ft(1),N=1e3,Q=1.00000001*At,it=[],dt=0;dt<=N;dt++)it.push(ft(dt/N)*Q);function wt(Ut){var Ht=0,qt=N,Jt=500;do it[Jt]>Ut?qt=Jt:Ht=Jt,Jt=Ht+qt>>1;while(Jt>Ht);var le=it[Jt+1]-it[Jt];return le&&(le=(Ut-it[Jt+1])/le),(Jt+1+le)/N}var Et=2*wt(1)/v*At/$,Bt=function(Ut,Ht){var qt=wt(k(u(Ht))),Jt=K(qt)*Ut;return qt/=Et,[Jt,Ht>=0?qt:-qt]};return Bt.invert=function(Ut,Ht){var qt;return k(Ht*=Et)<1&&(qt=l(Ht)*L(ft(k(Ht))*At)),[Ut/K(k(Ht)),qt]},Bt}function ui(){var F=0,H=2.5,$=1.183136,K=(0,T.r)(Xn),ft=K(F,H,$);return ft.alpha=function(At){return arguments.length?K(F=+At,H,$):F},ft.k=function(At){return arguments.length?K(F,H=+At,$):H},ft.gamma=function(At){return arguments.length?K(F,H,$=+At):$},ft.scale(152.63)}function si(F,H){return k(F[0]-H[0])<d&&k(F[1]-H[1])<d}function gi(F,H){for(var $,K,ft,At=-1,N=F.length,Q=F[0],it=[];++At<N;){K=(($=F[At])[0]-Q[0])/H,ft=($[1]-Q[1])/H;for(var dt=0;dt<H;++dt)it.push([Q[0]+dt*K,Q[1]+dt*ft]);Q=$}return it.push($),it}function ri(F,H,$){var K,ft;function At(it,dt){for(var wt=dt<0?-1:1,Et=H[+(dt<0)],Bt=0,Ut=Et.length-1;Bt<Ut&&it>Et[Bt][2][0];++Bt);var Ht=F(it-Et[Bt][1][0],dt);return Ht[0]+=F(Et[Bt][1][0],wt*dt>wt*Et[Bt][0][1]?Et[Bt][0][1]:dt)[0],Ht}$?At.invert=$(At):F.invert&&(At.invert=function(it,dt){for(var wt=ft[+(dt<0)],Et=H[+(dt<0)],Bt=0,Ut=wt.length;Bt<Ut;++Bt){var Ht=wt[Bt];if(Ht[0][0]<=it&&it<Ht[1][0]&&Ht[0][1]<=dt&&dt<Ht[1][1]){var qt=F.invert(it-F(Et[Bt][1][0],0)[0],dt);return qt[0]+=Et[Bt][1][0],si(At(qt[0],qt[1]),[it,dt])?qt:null}}});var N=(0,T.Z)(At),Q=N.stream;return N.stream=function(it){var dt=N.rotate(),wt=Q(it),Et=(N.rotate([0,0]),Q(it));return N.rotate(dt),wt.sphere=function(){(0,cr.Z)(K,Et)},wt},N.lobes=function(it){return arguments.length?(K=function(dt){var wt,Et,Bt,Ut,Ht,qt,Jt,le=[],fe=dt[0].length;for(Jt=0;Jt<fe;++Jt)Et=(wt=dt[0][Jt])[0][0],Bt=wt[0][1],Ut=wt[1][1],Ht=wt[2][0],qt=wt[2][1],le.push(gi([[Et+d,Bt+d],[Et+d,Ut-d],[Ht-d,Ut-d],[Ht-d,qt+d]],30));for(Jt=dt[1].length-1;Jt>=0;--Jt)Et=(wt=dt[1][Jt])[0][0],Bt=wt[0][1],Ut=wt[1][1],Ht=wt[2][0],qt=wt[2][1],le.push(gi([[Ht-d,qt-d],[Ht-d,Ut+d],[Et+d,Ut+d],[Et+d,Bt-d]],30));return{type:"Polygon",coordinates:[(0,Ar.TS)(le)]}}(it),H=it.map(function(dt){return dt.map(function(wt){return[[wt[0][0]*M,wt[0][1]*M],[wt[1][0]*M,wt[1][1]*M],[wt[2][0]*M,wt[2][1]*M]]})}),ft=H.map(function(dt){return dt.map(function(wt){var Et,Bt=F(wt[0][0],wt[0][1])[0],Ut=F(wt[2][0],wt[2][1])[0],Ht=F(wt[1][0],wt[0][1])[1],qt=F(wt[1][0],wt[1][1])[1];return Ht>qt&&(Et=Ht,Ht=qt,qt=Et),[[Bt,Ht],[Ut,qt]]})}),N):H.map(function(dt){return dt.map(function(wt){return[[wt[0][0]*A,wt[0][1]*A],[wt[1][0]*A,wt[1][1]*A],[wt[2][0]*A,wt[2][1]*A]]})})},H!=null&&N.lobes(H),N}rn.invert=function(F,H){return H>-Vr?st.invert(F,H-an):Dt.invert(F,H)},hn.invert=function(F,H){return k(H)>Vr?st.invert(F,H+(H>0?an:-an)):Dt.invert(F,H)};var Mi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Xa(){return ri(Mt,Mi).scale(160.857)}var ya=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function so(){return ri(hn,ya).scale(152.63)}var Ys=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function $o(){return ri(st,Ys).scale(169.529)}var xs=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Zs(){return ri(st,xs).scale(169.529).rotate([20,0])}var Ka=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function ul(){return ri(rn,Ka,yt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ho=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Vo(){return ri(Dt,Ho).scale(152.63).rotate([-20,0])}function Ja(F,H){return[3/g*F*S(v*v/3-H*H),H]}function Oi(){return(0,T.Z)(Ja).scale(158.837)}function bs(F){function H($,K){if(k(k(K)-p)<d)return[0,K<0?-2:2];var ft=u(K),At=i((1+ft)/(1-ft),F/2),N=.5*(At+1/At)+h($*=F);return[2*u($)/N,(At-1/At)/N]}return H.invert=function($,K){var ft=k(K);if(k(ft-2)<d)return $?null:[0,l(K)*p];if(ft>2)return null;var At=($/=2)*$,N=(K/=2)*K,Q=2*K/(1+At+N);return Q=i((1+Q)/(1-Q),1/F),[m(2*$,1-At-N)/F,L((Q-1)/(Q+1))]},H}function qn(){var F=.5,H=(0,T.r)(bs),$=H(F);return $.spacing=function(K){return arguments.length?H(F=+K):F},$.scale(124.75)}Ja.invert=function(F,H){return[g/3*F/S(v*v/3-H*H),H]};var Qa=v/x;function Aa(F,H){return[F*(1+S(h(H)))/2,H/(h(H/2)*h(F/6))]}function lo(){return(0,T.Z)(Aa).scale(97.2672)}function ja(F,H){var $=F*F,K=H*H;return[F*(.975534+K*(-.0143059*$-.119161+-.0547009*K)),H*(1.00384+$*(.0802894+-.02855*K+199025e-9*$)+K*(.0998909+-.0491032*K))]}function To(){return(0,T.Z)(ja).scale(139.98)}function co(F,H){return[u(F)/h(H),f(H)*h(F)]}function uo(){return(0,T.Z)(co).scale(144.049).clipAngle(89.999)}function Fs(F){var H=h(F),$=f(y+F/2);function K(ft,At){var N=At-F,Q=k(N)<d?ft*H:k(Q=y+At/2)<d||k(k(Q)-p)<d?0:ft*N/t(f(Q)/$);return[Q,N]}return K.invert=function(ft,At){var N,Q=At+F;return[k(At)<d?ft/H:k(N=y+Q/2)<d||k(k(N)-p)<d?0:ft*t(f(N)/$)/At,Q]},K}function hl(){return St(Fs).parallel(40).scale(158.837)}function Mo(F,H){return[F,1.25*t(f(y+.4*H))]}function fl(){return(0,T.Z)(Mo).scale(108.318)}function Xs(F){var H=F.length-1;function $(K,ft){for(var At,N=h(ft),Q=2/(1+N*h(K)),it=Q*N*u(K),dt=Q*u(ft),wt=H,Et=F[wt],Bt=Et[0],Ut=Et[1];--wt>=0;)Bt=(Et=F[wt])[0]+it*(At=Bt)-dt*Ut,Ut=Et[1]+it*Ut+dt*At;return[Bt=it*(At=Bt)-dt*Ut,Ut=it*Ut+dt*At]}return $.invert=function(K,ft){var At=20,N=K,Q=ft;do{for(var it,dt=H,wt=F[dt],Et=wt[0],Bt=wt[1],Ut=0,Ht=0;--dt>=0;)Ut=Et+N*(it=Ut)-Q*Ht,Ht=Bt+N*Ht+Q*it,Et=(wt=F[dt])[0]+N*(it=Et)-Q*Bt,Bt=wt[1]+N*Bt+Q*it;var qt,Jt,le=(Ut=Et+N*(it=Ut)-Q*Ht)*Ut+(Ht=Bt+N*Ht+Q*it)*Ht;N-=qt=((Et=N*(it=Et)-Q*Bt-K)*Ut+(Bt=N*Bt+Q*it-ft)*Ht)/le,Q-=Jt=(Bt*Ut-Et*Ht)/le}while(k(qt)+k(Jt)>d*d&&--At>0);if(At){var fe=S(N*N+Q*Q),Le=2*r(.5*fe),Se=u(Le);return[m(N*Se,fe*h(Le)),fe?L(Q*Se/fe):0]}},$}Aa.invert=function(F,H){var $=k(F),K=k(H),ft=d,At=p;K<Qa?At*=K/Qa:ft+=6*E(Qa/K);for(var N=0;N<25;N++){var Q=u(At),it=S(h(At)),dt=u(At/2),wt=h(At/2),Et=u(ft/6),Bt=h(ft/6),Ut=.5*ft*(1+it)-$,Ht=At/(wt*Bt)-K,qt=it?-.25*ft*Q/it:0,Jt=.5*(1+it),le=(1+.5*At*dt/wt)/(wt*Bt),fe=At/wt*(Et/6)/(Bt*Bt),Le=qt*fe-le*Jt,Se=(Ut*fe-Ht*Jt)/Le,Ce=(Ht*qt-Ut*le)/Le;if(At-=Se,ft-=Ce,k(Se)<d&&k(Ce)<d)break}return[F<0?-ft:ft,H<0?-At:At]},ja.invert=function(F,H){var $=l(F)*v,K=H/2,ft=50;do{var At=$*$,N=K*K,Q=$*K,it=$*(.975534+N*(-.0143059*At-.119161+-.0547009*N))-F,dt=K*(1.00384+At*(.0802894+-.02855*N+199025e-9*At)+N*(.0998909+-.0491032*N))-H,wt=.975534-N*(.119161+3*At*.0143059+.0547009*N),Et=-Q*(.238322+.2188036*N+.0286118*At),Bt=Q*(.1605788+7961e-7*At+-.0571*N),Ut=1.00384+At*(.0802894+199025e-9*At)+N*(3*(.0998909-.02855*At)-.245516*N),Ht=Et*Bt-Ut*wt,qt=(dt*Et-it*Ut)/Ht,Jt=(it*Bt-dt*wt)/Ht;$-=qt,K-=Jt}while((k(qt)>d||k(Jt)>d)&&--ft>0);return ft&&[$,K]},co.invert=function(F,H){var $=F*F,K=H*H+1,ft=$+K,At=F?b*S((ft-S(ft*ft-4*$))/$):1/S(K);return[L(F*At),l(H)*E(At)]},Mo.invert=function(F,H){return[F,2.5*r(s(.8*H))-.625*v]};var pl=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Ks=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],dl=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ss=[[.9245,0],[0,0],[.01943,0]],Ao=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Wo(){return Ia(pl,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function ls(){return Ia(Ks,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function zs(){return Ia(dl,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Js(){return Ia(ss,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Qs(){return Ia(Ao,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Ia(F,H){var $=(0,T.Z)(Xs(F)).rotate(H).clipAngle(90),K=(0,Xt.Z)(H),ft=$.center;return delete $.rotate,$.center=function(At){return arguments.length?ft(K(At)):K.invert(ft())},$}var qo=S(6),to=S(7);function ho(F,H){var $=L(7*u(H)/(3*qo));return[qo*F*(2*h(2*$/3)-1)/to,9*u($/3)/to]}function ml(){return(0,T.Z)(ho).scale(164.859)}function Co(F,H){for(var $,K=(1+b)*u(H),ft=H,At=0;At<25&&(ft-=$=(u(ft/2)+u(ft)-K)/(.5*h(ft/2)+h(ft)),!(k($)<d));At++);return[F*(1+2*h(ft)/h(ft/2))/(3*x),2*S(3)*u(ft/2)/S(2+x)]}function ni(){return(0,T.Z)(Co).scale(188.209)}function Ua(F,H){for(var $,K=S(6/(4+v)),ft=(1+v/4)*u(H),At=H/2,N=0;N<25&&(At-=$=(At/2+u(At)-ft)/(.5+h(At)),!(k($)<d));N++);return[K*(.5+h(At))*F/1.5,K*At]}function _s(){return(0,T.Z)(Ua).scale(166.518)}ho.invert=function(F,H){var $=3*L(H*to/9);return[F*to/(qo*(2*h(2*$/3)-1)),L(3*u($)*qo/7)]},Co.invert=function(F,H){var $=H*S(2+x)/(2*S(3)),K=2*L($);return[3*x*F/(1+2*h(K)/h(K/2)),L(($+u(K))/(1+b))]},Ua.invert=function(F,H){var $=S(6/(4+v)),K=H/$;return k(k(K)-p)<d&&(K=K<0?-p:p),[1.5*F/($*(.5+h(K))),L((K/2+u(K))/(1+v/4))]};var Oa=o(26867);function Yo(F,H){var $=H*H,K=$*$,ft=$*K;return[F*(.84719-.13063*$+ft*ft*(.05494*$-.04515-.02326*K+.00331*ft)),H*(1.01183+K*K*(.01926*$-.02625-.00396*K))]}function Al(){return(0,T.Z)(Yo).scale(175.295)}function Ns(F,H){return[F*(1+h(H))/2,2*(H-f(H/2))]}function vl(){return(0,T.Z)(Ns).scale(152.63)}Yo.invert=function(F,H){var $,K,ft,At,N=H,Q=25;do N-=$=(N*(1.01183+(ft=(K=N*N)*K)*ft*(.01926*K-.02625-.00396*ft))-H)/(1.01183+ft*ft*(.21186*K-.23625+-.05148*ft));while(k($)>w&&--Q>0);return[F/(.84719-.13063*(K=N*N)+(At=K*(ft=K*K))*At*(.05494*K-.04515-.02326*ft+.00331*At)),N]},Ns.invert=function(F,H){for(var $=H/2,K=0,ft=1/0;K<10&&k(ft)>d;++K){var At=h(H/2);H-=ft=(H-f(H/2)-$)/(1-.5/(At*At))}return[2*F/(1+h(H)),H]};var yl=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function ws(){return ri(ct(1/0),yl).rotate([20,0]).scale(152.63)}function cs(F,H){var $=u(H),K=h(H),ft=l(F);if(F===0||k(H)===p)return[0,H];if(H===0)return[F,0];if(k(F)===p)return[F*K,p*$];var At=v/(2*F)-2*F/v,N=2*H/v,Q=(1-N*N)/($-N),it=At*At,dt=Q*Q,wt=1+it/dt,Et=1+dt/it,Bt=(At*$/Q-At/2)/wt,Ut=(dt*$/it+Q/2)/Et,Ht=Ut*Ut-(dt*$*$/it+Q*$-1)/Et;return[p*(Bt+S(Bt*Bt+K*K/wt)*ft),p*(Ut+S(Ht<0?0:Ht)*l(-H*At)*ft)]}function ks(){return(0,T.Z)(cs).scale(127.267)}cs.invert=function(F,H){var $=(F/=p)*F,K=$+(H/=p)*H,ft=v*v;return[F?(K-1+S((1-K)*(1-K)+4*$))/(2*F)*p:0,kt(function(At){return K*(v*u(At)-2*At)*v+4*At*At*(H-u(At))+2*v*At-ft*H},0)]};var Lo=1.0148,fo=.23185,Eo=-.14499,po=.02406,Bs=Lo,Ga=5*fo,xl=7*Eo,bl=9*po,js=1.790857183;function So(F,H){var $=H*H;return[F,H*(Lo+$*$*(fo+$*(Eo+po*$)))]}function Us(){return(0,T.Z)(So).scale(139.319)}function Zo(F,H){if(k(H)<d)return[F,0];var $=f(H),K=F*u(H);return[u(K)/$,H+(1-h(K))/$]}function tl(){return(0,T.Z)(Zo).scale(103.74)}So.invert=function(F,H){H>js?H=js:H<-1.790857183&&(H=-1.790857183);var $,K=H;do{var ft=K*K;K-=$=(K*(Lo+ft*ft*(fo+ft*(Eo+po*ft)))-H)/(Bs+ft*ft*(Ga+ft*(xl+bl*ft)))}while(k($)>d);return[F,K]},Zo.invert=function(F,H){if(k(H)<d)return[F,0];var $,K=F*F+H*H,ft=.5*H,At=10;do{var N=f(ft),Q=1/h(ft),it=K-2*H*ft+ft*ft;ft-=$=(N*it+2*(ft-H))/(2+it*Q*Q+2*(ft-H)*N)}while(k($)>d&&--At>0);return N=f(ft),[(k(H)<k(ft+1/N)?L(F*N):l(H)*l(F)*(E(k(F*N))+p))/u(ft),ft]};var us=o(77338),Xo=o(83074);function Ts(F,H){return[F[0]*H[0]+F[1]*H[3],F[0]*H[1]+F[1]*H[4],F[0]*H[2]+F[1]*H[5]+F[2],F[3]*H[0]+F[4]*H[3],F[3]*H[1]+F[4]*H[4],F[3]*H[2]+F[4]*H[5]+F[5]]}function hs(F,H){return[F[0]-H[0],F[1]-H[1]]}function ii(F){return S(F[0]*F[0]+F[1]*F[1])}function Io(F,H,$){function K(Q,it){var dt,wt=H(Q,it),Et=wt.project([Q*A,it*A]);return(dt=wt.transform)?[dt[0]*Et[0]+dt[1]*Et[1]+dt[2],-(dt[3]*Et[0]+dt[4]*Et[1]+dt[5])]:(Et[1]=-Et[1],Et)}function ft(Q,it){var dt=Q.project.invert,wt=Q.transform,Et=it;if(wt&&(wt=function(Jt){var le=1/(Jt[0]*Jt[4]-Jt[1]*Jt[3]);return[le*Jt[4],-le*Jt[1],le*(Jt[1]*Jt[5]-Jt[2]*Jt[4]),-le*Jt[3],le*Jt[0],le*(Jt[2]*Jt[3]-Jt[0]*Jt[5])]}(wt),Et=[wt[0]*Et[0]+wt[1]*Et[1]+wt[2],wt[3]*Et[0]+wt[4]*Et[1]+wt[5]]),dt&&Q===function(Jt){return H(Jt[0]*M,Jt[1]*M)}(Bt=dt(Et)))return Bt;for(var Bt,Ut=Q.children,Ht=0,qt=Ut&&Ut.length;Ht<qt;++Ht)if(Bt=ft(Ut[Ht],it))return Bt}(function Q(it,dt){if(it.edges=function(Ce){for(var Ne=Ce.length,Ee=[],rr=Ce[Ne-1],Ye=0;Ye<Ne;++Ye)Ee.push([rr,rr=Ce[Ye]]);return Ee}(it.face),dt.face){var wt=it.shared=function(Ce,Ne){for(var Ee,rr,Ye=Ce.length,Ve=null,dr=0;dr<Ye;++dr){Ee=Ce[dr];for(var vr=Ne.length;--vr>=0;)if(rr=Ne[vr],Ee[0]===rr[0]&&Ee[1]===rr[1]){if(Ve)return[Ve,Ee];Ve=Ee}}}(it.face,dt.face),Et=(qt=wt.map(dt.project),Jt=wt.map(it.project),le=hs(qt[1],qt[0]),fe=hs(Jt[1],Jt[0]),Le=function(Ce,Ne){return m(Ce[0]*Ne[1]-Ce[1]*Ne[0],Ce[0]*Ne[0]+Ce[1]*Ne[1])}(le,fe),Se=ii(le)/ii(fe),Ts([1,0,qt[0][0],0,1,qt[0][1]],Ts([Se,0,0,0,Se,0],Ts([h(Le),u(Le),0,-u(Le),h(Le),0],[1,0,-Jt[0][0],0,1,-Jt[0][1]]))));it.transform=dt.transform?Ts(dt.transform,Et):Et;for(var Bt=dt.edges,Ut=0,Ht=Bt.length;Ut<Ht;++Ut)Vi(wt[0],Bt[Ut][1])&&Vi(wt[1],Bt[Ut][0])&&(Bt[Ut]=it),Vi(wt[0],Bt[Ut][0])&&Vi(wt[1],Bt[Ut][1])&&(Bt[Ut]=it);for(Ut=0,Ht=(Bt=it.edges).length;Ut<Ht;++Ut)Vi(wt[0],Bt[Ut][0])&&Vi(wt[1],Bt[Ut][1])&&(Bt[Ut]=dt),Vi(wt[0],Bt[Ut][1])&&Vi(wt[1],Bt[Ut][0])&&(Bt[Ut]=dt)}else it.transform=dt.transform;var qt,Jt,le,fe,Le,Se;return it.children&&it.children.forEach(function(Ce){Q(Ce,it)}),it})(F,{transform:null}),Hn(F)&&(K.invert=function(Q,it){var dt=ft(F,[Q,-it]);return dt&&(dt[0]*=M,dt[1]*=M,dt)});var At=(0,T.Z)(K),N=At.stream;return At.stream=function(Q){var it=At.rotate(),dt=N(Q),wt=(At.rotate([0,0]),N(Q));return At.rotate(it),dt.sphere=function(){wt.polygonStart(),wt.lineStart(),go(wt,F),wt.lineEnd(),wt.polygonEnd()},dt},At.angle($==null?-30:$*A)}function go(F,H,$){var K,ft,At=H.edges,N=At.length,Q={type:"MultiPoint",coordinates:H.face},it=H.face.filter(function(qt){return k(qt[1])!==90}),dt=(0,us.Z)({type:"MultiPoint",coordinates:it}),wt=!1,Et=-1,Bt=dt[1][0]-dt[0][0],Ut=Bt===180||Bt===360?[(dt[0][0]+dt[1][0])/2,(dt[0][1]+dt[1][1])/2]:(0,Wt.Z)(Q);if($)for(;++Et<N&&At[Et]!==$;);++Et;for(var Ht=0;Ht<N;++Ht)ft=At[(Ht+Et)%N],Array.isArray(ft)?(wt||(F.point((K=(0,Xo.Z)(ft[0],Ut)(d))[0],K[1]),wt=!0),F.point((K=(0,Xo.Z)(ft[1],Ut)(d))[0],K[1])):(wt=!1,ft!==$&&go(F,ft,H))}function Vi(F,H){return F&&H&&F[0]===H[0]&&F[1]===H[1]}function Hn(F){return F.project.invert||F.children&&F.children.some(Hn)}var Yn=o(98936),Oo=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],mo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(F){return F.map(function(H){return Oo[H]})});function el(F){F=F||function($){var K=(0,Wt.Z)({type:"MultiPoint",coordinates:$});return(0,Yn.Z)().scale(1).translate([0,0]).rotate([-K[0],-K[1]])};var H=mo.map(function($){return{face:$,project:F($)}});return[-1,0,0,1,0,1,4,5].forEach(function($,K){var ft=H[$];ft&&(ft.children||(ft.children=[])).push(H[K])}),Io(H[0],function($,K){return H[$<-v/2?K<0?6:4:$<0?K<0?2:0:$<v/2?K<0?3:1:K<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Ms=2/S(3);function Ro(F,H){var $=ke(F,H);return[$[0]*Ms,$[1]]}function As(F){F=F||function($){var K=(0,Wt.Z)({type:"MultiPoint",coordinates:$});return(0,T.Z)(Ro).translate([0,0]).scale(1).rotate(K[1]>0?[-K[0],0]:[180-K[0],180])};var H=mo.map(function($){return{face:$,project:F($)}});return[-1,0,0,1,0,1,4,5].forEach(function($,K){var ft=H[$];ft&&(ft.children||(ft.children=[])).push(H[K])}),Io(H[0],function($,K){return H[$<-v/2?K<0?6:4:$<0?K<0?2:0:$<v/2?K<0?3:1:K<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function vo(F){F=F||function(At){var N=At.length===6?(0,Wt.Z)({type:"MultiPoint",coordinates:At}):At[0];return(0,Yn.Z)().scale(1).translate([0,0]).rotate([-N[0],-N[1]])};var H=mo.map(function(At){for(var N,Q=At.map(xi),it=Q.length,dt=Q[it-1],wt=[],Et=0;Et<it;++Et)N=Q[Et],wt.push(Po([.9486832980505138*dt[0]+.31622776601683794*N[0],.9486832980505138*dt[1]+.31622776601683794*N[1],.9486832980505138*dt[2]+.31622776601683794*N[2]]),Po([.9486832980505138*N[0]+.31622776601683794*dt[0],.9486832980505138*N[1]+.31622776601683794*dt[1],.9486832980505138*N[2]+.31622776601683794*dt[2]])),dt=N;return wt}),$=[],K=[-1,0,0,1,0,1,4,5];H.forEach(function(At,N){for(var Q,it,dt=mo[N],wt=dt.length,Et=$[N]=[],Bt=0;Bt<wt;++Bt)H.push([dt[Bt],At[(2*Bt+2)%(2*wt)],At[(2*Bt+1)%(2*wt)]]),K.push(N),Et.push((Q=xi(At[(2*Bt+2)%(2*wt)]),it=xi(At[(2*Bt+1)%(2*wt)]),[Q[1]*it[2]-Q[2]*it[1],Q[2]*it[0]-Q[0]*it[2],Q[0]*it[1]-Q[1]*it[0]]))});var ft=H.map(function(At){return{project:F(At),face:At}});return K.forEach(function(At,N){var Q=ft[At];Q&&(Q.children||(Q.children=[])).push(ft[N])}),Io(ft[0],function(At,N){var Q=h(N),it=[Q*h(At),Q*u(At),u(N)],dt=At<-v/2?N<0?6:4:At<0?N<0?2:0:At<v/2?N<0?3:1:N<0?7:5,wt=$[dt];return ft[Ko(wt[0],it)<0?8+3*dt:Ko(wt[1],it)<0?8+3*dt+1:Ko(wt[2],it)<0?8+3*dt+2:dt]}).angle(-30).scale(110.625).center([0,45])}function Ko(F,H){for(var $=0,K=F.length,ft=0;$<K;++$)ft+=F[$]*H[$];return ft}function Po(F){return[m(F[1],F[0])*A,L(n(-1,a(1,F[2])))*A]}function xi(F){var H=F[0]*M,$=F[1]*M,K=h($);return[K*h(H),K*u(H),u($)]}function Jo(){}function Qo(F,H){var $,K=H.stream;if(!K)throw new Error("invalid projection");switch(F&&F.type){case"Feature":$=ra;break;case"FeatureCollection":$=Fi;break;default:$=Ji}return $(F,K)}function Fi(F,H){return{type:"FeatureCollection",features:F.features.map(function($){return ra($,H)})}}function ra(F,H){return{type:"Feature",id:F.id,properties:F.properties,geometry:Ji(F.geometry,H)}}function Ji(F,H){if(!F)return null;if(F.type==="GeometryCollection")return function(K,ft){return{type:"GeometryCollection",geometries:K.geometries.map(function(At){return Ji(At,ft)})}}(F,H);var $;switch(F.type){case"Point":case"MultiPoint":$=Do;break;case"LineString":case"MultiLineString":$=$a;break;case"Polygon":case"MultiPolygon":case"Sphere":$=Wi;break;default:return null}return(0,cr.Z)(F,H($)),$.result()}Ro.invert=function(F,H){return ke.invert(F/Ms,H)};var zi=[],ca=[],Do={point:function(F,H){zi.push([F,H])},result:function(){var F=zi.length?zi.length<2?{type:"Point",coordinates:zi[0]}:{type:"MultiPoint",coordinates:zi}:null;return zi=[],F}},$a={lineStart:Jo,point:function(F,H){zi.push([F,H])},lineEnd:function(){zi.length&&(ca.push(zi),zi=[])},result:function(){var F=ca.length?ca.length<2?{type:"LineString",coordinates:ca[0]}:{type:"MultiLineString",coordinates:ca}:null;return ca=[],F}},Wi={polygonStart:Jo,lineStart:Jo,point:function(F,H){zi.push([F,H])},lineEnd:function(){var F=zi.length;if(F){do zi.push(zi[0].slice());while(++F<4);ca.push(zi),zi=[]}},polygonEnd:Jo,result:function(){if(!ca.length)return null;var F=[],H=[];return ca.forEach(function($){(function(K){if((ft=K.length)<4)return!1;for(var ft,At=0,N=K[ft-1][1]*K[0][0]-K[ft-1][0]*K[0][1];++At<ft;)N+=K[At-1][1]*K[At][0]-K[At-1][0]*K[At][1];return N<=0})($)?F.push([$]):H.push($)}),H.forEach(function($){var K=$[0];F.some(function(ft){if(function(At,N){for(var Q=N[0],it=N[1],dt=!1,wt=0,Et=At.length,Bt=Et-1;wt<Et;Bt=wt++){var Ut=At[wt],Ht=Ut[0],qt=Ut[1],Jt=At[Bt],le=Jt[0],fe=Jt[1];qt>it^fe>it&&Q<(le-Ht)*(it-qt)/(fe-qt)+Ht&&(dt=!dt)}return dt}(ft[0],K))return ft.push($),!0})||F.push([$])}),ca=[],F.length?F.length>1?{type:"MultiPolygon",coordinates:F}:{type:"Polygon",coordinates:F[0]}:null}};function Ca(F){var H=F(p,0)[0]-F(-p,0)[0];function $(K,ft){var At=k(K)<p,N=F(At?K:K>0?K-v:K+v,ft),Q=(N[0]-N[1])*b,it=(N[0]+N[1])*b;if(At)return[Q,it];var dt=H*b,wt=Q>0^it>0?-1:1;return[wt*Q-l(it)*dt,wt*it-l(Q)*dt]}return F.invert&&($.invert=function(K,ft){var At=(K+ft)*b,N=(ft-K)*b,Q=k(At)<.5*H&&k(N)<.5*H;if(!Q){var it=H*b,dt=At>0^N>0?-1:1,wt=-dt*K+(N>0?1:-1)*it,Et=-dt*ft+(At>0?1:-1)*it;At=(-wt-Et)*b,N=(wt-Et)*b}var Bt=F.invert(At,N);return Q||(Bt[0]+=At>0?v:-v),Bt}),(0,T.Z)($).rotate([-90,-90,45]).clipAngle(179.999)}function Ra(){return Ca(Pr).scale(176.423)}function Gs(){return Ca(wr).scale(111.48)}function Pa(F,H){if(!(0<=(H=+H)&&H<=20))throw new Error("invalid digits");function $(dt){var wt=dt.length,Et=2,Bt=new Array(wt);for(Bt[0]=+dt[0].toFixed(H),Bt[1]=+dt[1].toFixed(H);Et<wt;)Bt[Et]=dt[Et],++Et;return Bt}function K(dt){return dt.map($)}function ft(dt){for(var wt=$(dt[0]),Et=[wt],Bt=1;Bt<dt.length;Bt++){var Ut=$(dt[Bt]);(Ut.length>2||Ut[0]!=wt[0]||Ut[1]!=wt[1])&&(Et.push(Ut),wt=Ut)}return Et.length===1&&dt.length>1&&Et.push($(dt[dt.length-1])),Et}function At(dt){return dt.map(ft)}function N(dt){if(dt==null)return dt;var wt;switch(dt.type){case"GeometryCollection":wt={type:"GeometryCollection",geometries:dt.geometries.map(N)};break;case"Point":wt={type:"Point",coordinates:$(dt.coordinates)};break;case"MultiPoint":wt={type:dt.type,coordinates:K(dt.coordinates)};break;case"LineString":wt={type:dt.type,coordinates:ft(dt.coordinates)};break;case"MultiLineString":case"Polygon":wt={type:dt.type,coordinates:At(dt.coordinates)};break;case"MultiPolygon":wt={type:"MultiPolygon",coordinates:dt.coordinates.map(At)};break;default:return dt}return dt.bbox!=null&&(wt.bbox=dt.bbox),wt}function Q(dt){var wt={type:"Feature",properties:dt.properties,geometry:N(dt.geometry)};return dt.id!=null&&(wt.id=dt.id),dt.bbox!=null&&(wt.bbox=dt.bbox),wt}if(F!=null)switch(F.type){case"Feature":return Q(F);case"FeatureCollection":var it={type:"FeatureCollection",features:F.features.map(Q)};return F.bbox!=null&&(it.bbox=F.bbox),it;default:return N(F)}return F}function qi(F){var H=u(F);function $(K,ft){var At=H?f(K*H/2)/H:K/2;if(!ft)return[2*At,-F];var N=2*r(At*u(ft)),Q=1/f(ft);return[u(N)*Q,ft+(1-h(N))*Q-F]}return $.invert=function(K,ft){if(k(ft+=F)<d)return[H?2*r(H*K/2)/H:K,0];var At,N=K*K+ft*ft,Q=0,it=10;do{var dt=f(Q),wt=1/h(Q),Et=N-2*ft*Q+Q*Q;Q-=At=(dt*Et+2*(Q-ft))/(2+Et*wt*wt+2*(Q-ft)*dt)}while(k(At)>d&&--it>0);var Bt=K*(dt=f(Q)),Ut=f(k(ft)<k(Q+1/dt)?.5*L(Bt):.5*E(Bt)+v/4)/u(Q);return[H?2*r(H*Ut)/H:2*Ut,Q]},$}function wn(){return St(qi).scale(131.215)}var na=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Cs(F,H){var $,K=a(18,36*k(H)/v),ft=e(K),At=K-ft,N=($=na[ft])[0],Q=$[1],it=($=na[++ft])[0],dt=$[1],wt=($=na[a(19,++ft)])[0],Et=$[1];return[F*(it+At*(wt-N)/2+At*At*(wt-2*it+N)/2),(H>0?p:-p)*(dt+At*(Et-Q)/2+At*At*(Et-2*dt+Q)/2)]}function $s(){return(0,T.Z)(Cs).scale(152.63)}function ts(F,H){var $=function(N){function Q(it,dt){var wt=h(dt),Et=(N-1)/(N-wt*h(it));return[Et*wt*u(it),Et*u(dt)]}return Q.invert=function(it,dt){var wt=it*it+dt*dt,Et=S(wt),Bt=(N-S(1-wt*(N+1)/(N-1)))/((N-1)/Et+Et/(N-1));return[m(it*Bt,Et*S(1-Bt*Bt)),Et?L(dt*Bt/Et):0]},Q}(F);if(!H)return $;var K=h(H),ft=u(H);function At(N,Q){var it=$(N,Q),dt=it[1],wt=dt*ft/(F-1)+K;return[it[0]*K/wt,dt/wt]}return At.invert=function(N,Q){var it=(F-1)/(F-1-Q*ft);return $.invert(it*N,it*Q*K)},At}function es(){var F=2,H=0,$=(0,T.r)(ts),K=$(F,H);return K.distance=function(ft){return arguments.length?$(F=+ft,H):F},K.tilt=function(ft){return arguments.length?$(F,H=ft*M):H*A},K.scale(432.147).clipAngle(E(1/F)*A-1e-6)}na.forEach(function(F){F[1]*=1.0144}),Cs.invert=function(F,H){var $=H/p,K=90*$,ft=a(18,k(K/5)),At=n(0,e(ft));do{var N=na[At][1],Q=na[At+1][1],it=na[a(19,At+2)][1],dt=it-N,wt=it-2*Q+N,Et=2*(k($)-Q)/dt,Bt=wt/dt,Ut=Et*(1-Bt*Et*(1-2*Bt*Et));if(Ut>=0||At===1){K=(H>=0?5:-5)*(Ut+ft);var Ht,qt=50;do Ut=(ft=a(18,k(K)/5))-(At=e(ft)),N=na[At][1],Q=na[At+1][1],it=na[a(19,At+2)][1],K-=(Ht=(H>=0?p:-p)*(Q+Ut*(it-N)/2+Ut*Ut*(it-2*Q+N)/2)-H)*A;while(k(Ht)>w&&--qt>0);break}}while(--At>=0);var Jt=na[At][0],le=na[At+1][0],fe=na[a(19,At+2)][0];return[F/(le+Ut*(fe-Jt)/2+Ut*Ut*(fe-2*le+Jt)/2),K*M]};var yo=1e-4,xn=1e4,Ha=-180,fs=Ha+yo,Ls=180,ia=Ls-yo,Va=-90,Da=Va+yo,La=90,eo=La-yo;function xo(F){return F.length>0}function Ni(F){return F===Va||F===La?[0,F]:[Ha,(H=F,Math.floor(H*xn)/xn)];var H}function rs(F){var H=F[0],$=F[1],K=!1;return H<=fs?(H=Ha,K=!0):H>=ia&&(H=Ls,K=!0),$<=Da?($=Va,K=!0):$>=eo&&($=La,K=!0),K?[H,$]:F}function ps(F){return F.map(rs)}function Yi(F,H,$){for(var K=0,ft=F.length;K<ft;++K){var At=F[K].slice();$.push({index:-1,polygon:H,ring:At});for(var N=0,Q=At.length;N<Q;++N){var it=At[N],dt=it[0],wt=it[1];if(dt<=fs||dt>=ia||wt<=Da||wt>=eo){At[N]=rs(it);for(var Et=N+1;Et<Q;++Et){var Bt=At[Et],Ut=Bt[0],Ht=Bt[1];if(Ut>fs&&Ut<ia&&Ht>Da&&Ht<eo)break}if(Et===N+1)continue;if(N){var qt={index:-1,polygon:H,ring:At.slice(0,N+1)};qt.ring[qt.ring.length-1]=Ni(wt),$[$.length-1]=qt}else $.pop();if(Et>=Q)break;$.push({index:-1,polygon:H,ring:At=At.slice(Et-1)}),At[0]=Ni(At[0][1]),N=-1,Q=At.length}}}}function ai(F){var H,$,K,ft,At,N,Q=F.length,it={},dt={};for(H=0;H<Q;++H)K=($=F[H]).ring[0],At=$.ring[$.ring.length-1],K[0]!==At[0]||K[1]!==At[1]?($.index=H,it[K]=dt[At]=$):($.polygon.push($.ring),F[H]=null);for(H=0;H<Q;++H)if($=F[H]){if(K=$.ring[0],At=$.ring[$.ring.length-1],ft=dt[K],N=it[At],delete it[K],delete dt[At],K[0]===At[0]&&K[1]===At[1]){$.polygon.push($.ring);continue}ft?(delete dt[K],delete it[ft.ring[0]],ft.ring.pop(),F[ft.index]=null,$={index:-1,polygon:ft.polygon,ring:ft.ring.concat($.ring)},ft===N?$.polygon.push($.ring):($.index=Q++,F.push(it[$.ring[0]]=dt[$.ring[$.ring.length-1]]=$))):N?(delete it[At],delete dt[N.ring[N.ring.length-1]],$.ring.pop(),$={index:Q++,polygon:N.polygon,ring:$.ring.concat(N.ring)},F[N.index]=null,F.push(it[$.ring[0]]=dt[$.ring[$.ring.length-1]]=$)):($.ring.push($.ring[0]),$.polygon.push($.ring))}}function Es(F){var H={type:"Feature",geometry:xa(F.geometry)};return F.id!=null&&(H.id=F.id),F.bbox!=null&&(H.bbox=F.bbox),F.properties!=null&&(H.properties=F.properties),H}function xa(F){if(F==null)return F;var H,$,K,ft;switch(F.type){case"GeometryCollection":H={type:"GeometryCollection",geometries:F.geometries.map(xa)};break;case"Point":H={type:"Point",coordinates:rs(F.coordinates)};break;case"MultiPoint":case"LineString":H={type:F.type,coordinates:ps(F.coordinates)};break;case"MultiLineString":H={type:"MultiLineString",coordinates:F.coordinates.map(ps)};break;case"Polygon":var At=[];Yi(F.coordinates,At,$=[]),ai($),H={type:"Polygon",coordinates:At};break;case"MultiPolygon":$=[],K=-1,ft=F.coordinates.length;for(var N=new Array(ft);++K<ft;)Yi(F.coordinates[K],N[K]=[],$);ai($),H={type:"MultiPolygon",coordinates:N.filter(xo)};break;default:return F}return F.bbox!=null&&(H.bbox=F.bbox),H}function Bi(F){if(F==null)return F;switch(F.type){case"Feature":return Es(F);case"FeatureCollection":var H={type:"FeatureCollection",features:F.features.map(Es)};return F.bbox!=null&&(H.bbox=F.bbox),H;default:return xa(F)}}function ro(F,H){var $=f(H/2),K=u(y*$);return[F*(.74482-.34588*K*K),1.70711*$]}function rl(){return(0,T.Z)(ro).scale(146.153)}function Ai(F,H,$){var K=(0,Xo.Z)(H,$),ft=K(.5),At=(0,Xt.Z)([-ft[0],-ft[1]])(H),N=K.distance/2,Q=-L(u(At[1]*M)/u(N)),it=[-ft[0],-ft[1],-(At[0]>0?v-Q:Q)*A],dt=(0,T.Z)(F(N)).rotate(it),wt=(0,Xt.Z)(it),Et=dt.center;return delete dt.rotate,dt.center=function(Bt){return arguments.length?Et(wt(Bt)):wt.invert(Et())},dt.clipAngle(90)}function ti(F){var H=h(F);function $(K,ft){var At=(0,Yn.M)(K,ft);return At[0]*=H,At}return $.invert=function(K,ft){return Yn.M.invert(K/H,ft)},$}function Ea(){return no([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function no(F,H){return Ai(ti,F,H)}function Wa(F){if(!(F*=2))return tt.N;var H=-F/2,$=-H,K=F*F,ft=f($),At=.5/u($);function N(Q,it){var dt=E(h(it)*h(Q-H)),wt=E(h(it)*h(Q-$));return[((dt*=dt)-(wt*=wt))/(2*F),(it<0?-1:1)*S(4*K*wt-(K-dt+wt)*(K-dt+wt))/(2*F)]}return N.invert=function(Q,it){var dt,wt,Et=it*it,Bt=h(S(Et+(dt=Q+H)*dt)),Ut=h(S(Et+(dt=Q+$)*dt));return[m(wt=Bt-Ut,dt=(Bt+Ut)*ft),(it<0?-1:1)*E(S(dt*dt+wt*wt)*At)]},N}function Hs(){return Fo([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Fo(F,H){return Ai(Wa,F,H)}function ns(F,H){if(k(H)<d)return[F,0];var $=k(H/p),K=L($);if(k(F)<d||k(k(H)-p)<d)return[0,l(H)*v*f(K/2)];var ft=h(K),At=k(v/F-F/v)/2,N=At*At,Q=ft/($+ft-1),it=Q*(2/$-1),dt=it*it,wt=dt+N,Et=Q-dt,Bt=N+Q;return[l(F)*v*(At*Et+S(N*Et*Et-wt*(Q*Q-dt)))/wt,l(H)*v*(it*Bt-At*S((N+1)*wt-Bt*Bt))/wt]}function Ri(){return(0,T.Z)(ns).scale(79.4183)}function Qi(F,H){if(k(H)<d)return[F,0];var $=k(H/p),K=L($);if(k(F)<d||k(k(H)-p)<d)return[0,l(H)*v*f(K/2)];var ft=h(K),At=k(v/F-F/v)/2,N=At*At,Q=ft*(S(1+N)-At*ft)/(1+N*$*$);return[l(F)*v*Q,l(H)*v*S(1-Q*(2*At+Q))]}function An(){return(0,T.Z)(Qi).scale(79.4183)}function Ln(F,H){if(k(H)<d)return[F,0];var $=H/p,K=L($);if(k(F)<d||k(k(H)-p)<d)return[0,v*f(K/2)];var ft=(v/F-F/v)/2,At=$/(1+h(K));return[v*(l(F)*S(ft*ft+1-At*At)-ft),v*At]}function ds(){return(0,T.Z)(Ln).scale(79.4183)}function ua(F,H){if(!H)return[F,0];var $=k(H);if(!F||$===p)return[0,H];var K=$/p,ft=K*K,At=(8*K-ft*(ft+2)-5)/(2*ft*(K-1)),N=At*At,Q=K*At,it=ft+N+2*Q,dt=K+3*At,wt=F/p,Et=wt+1/wt,Bt=l(k(F)-p)*S(Et*Et-4),Ut=Bt*Bt,Ht=(Bt*(it+N-1)+2*S(it*(ft+N*Ut-1)+(1-ft)*(ft*(dt*dt+4*N)+12*Q*N+4*N*N)))/(4*it+Ut);return[l(F)*p*Ht,l(H)*p*S(1+Bt*k(Ht)-Ht*Ht)]}function zo(){return(0,T.Z)(ua).scale(127.16)}function ta(F,H,$,K){var ft=v/3;F=n(F,d),H=n(H,d),F=a(F,p),H=a(H,v-d),$=n($,0),$=a($,100-d);var At=(K=n(K,d))/100,N=E(($/100+1)*h(ft))/ft,Q=u(F)/u(N*p),it=H/v,dt=S(At*u(F/2)/u(H/2));return function(wt,Et,Bt,Ut,Ht){function qt(Jt,le){var fe=Bt*u(Ut*le),Le=S(1-fe*fe),Se=S(2/(1+Le*h(Jt*=Ht)));return[wt*Le*Se*u(Jt),Et*fe*Se]}return qt.invert=function(Jt,le){var fe=Jt/wt,Le=le/Et,Se=S(fe*fe+Le*Le),Ce=2*L(Se/2);return[m(Jt*f(Ce),wt*Se)/Ht,Se&&L(le*u(Ce)/(Et*Bt*Se))/Ut]},qt}(dt/S(it*Q*N),1/(dt*S(it*Q*N)),Q,N,it)}function gs(){var F=65*M,H=60*M,$=20,K=200,ft=(0,T.r)(ta),At=ft(F,H,$,K);return At.poleline=function(N){return arguments.length?ft(F=+N*M,H,$,K):F*A},At.parallels=function(N){return arguments.length?ft(F,H=+N*M,$,K):H*A},At.inflation=function(N){return arguments.length?ft(F,H,$=+N,K):$},At.ratio=function(N){return arguments.length?ft(F,H,$,K=+N):K},At.scale(163.775)}function ea(){return gs().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}ro.invert=function(F,H){var $=H/1.70711,K=u(y*$);return[F/(.74482-.34588*K*K),2*r($)]},ns.invert=function(F,H){if(k(H)<d)return[F,0];if(k(F)<d)return[0,p*u(2*r(H/v))];var $=(F/=v)*F,K=(H/=v)*H,ft=$+K,At=ft*ft,N=-k(H)*(1+ft),Q=N-2*K+$,it=-2*N+1+2*K+At,dt=K/it+(2*Q*Q*Q/(it*it*it)-9*N*Q/(it*it))/27,wt=(N-Q*Q/(3*it))/it,Et=2*S(-wt/3),Bt=E(3*dt/(wt*Et))/3;return[v*(ft-1+S(1+2*($-K)+At))/(2*F),l(H)*v*(-Et*h(Bt+v/3)-Q/(3*it))]},Qi.invert=function(F,H){if(!F)return[0,p*u(2*r(H/v))];var $=k(F/v),K=(1-$*$-(H/=v)*H)/(2*$),ft=S(K*K+1);return[l(F)*v*(ft-K),l(H)*p*u(2*m(S((1-2*K*$)*(K+ft)-$),S(ft+K+$)))]},Ln.invert=function(F,H){if(!H)return[F,0];var $=H/v,K=(v*v*(1-$*$)-F*F)/(2*v*F);return[F?v*(l(F)*S(K*K+1)-K):0,p*u(2*r($))]},ua.invert=function(F,H){var $;if(!F||!H)return[F,H];H/=v;var K=l(F)*F/p,ft=(K*K-1+4*H*H)/k(K),At=ft*ft,N=2*H,Q=50;do{var it=N*N,dt=(8*N-it*(it+2)-5)/(2*it*(N-1)),wt=(3*N-it*N-10)/(2*it*N),Et=dt*dt,Bt=N*dt,Ut=N+dt,Ht=Ut*Ut,qt=N+3*dt,Jt=-2*Ut*(4*Bt*Et+(1-4*it+3*it*it)*(1+wt)+Et*(14*it-6-At+(8*it-8-2*At)*wt)+Bt*(12*it-8+(10*it-10-At)*wt)),le=S(Ht*(it+Et*At-1)+(1-it)*(it*(qt*qt+4*Et)+Et*(12*Bt+4*Et)));N-=$=(ft*(Ht+Et-1)+2*le-K*(4*Ht+At))/(ft*(2*dt*wt+2*Ut*(1+wt))+Jt/le-8*Ut*(ft*(-1+Et+Ht)+2*le)*(1+wt)/(At+4*Ht))}while($>d&&--Q>0);return[l(F)*(S(ft*ft+4)+ft)*v/4,p*N]};var No=4*v+3*S(3),Bo=2*S(2*v*S(3)/No),Pn=xt(Bo*S(3)/v,Bo,No/6);function ji(){return(0,T.Z)(Pn).scale(176.84)}function io(F,H){return[F*S(1-3*H*H/(v*v)),H]}function ba(){return(0,T.Z)(io).scale(152.63)}function is(F,H){var $=h(H),K=h(F)*$,ft=1-K,At=h(F=m(u(F)*$,-u(H))),N=u(F);return[N*($=S(1-K*K))-At*ft,-At*$-N*ft]}function ms(){return(0,T.Z)(is).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function as(F,H){var $=j(F,H);return[($[0]+F/p)/2,($[1]+H)/2]}function bo(){return(0,T.Z)(as).scale(158.837)}io.invert=function(F,H){return[F/S(1-3*H*H/(v*v)),H]},is.invert=function(F,H){var $=(F*F+H*H)/-2,K=S(-$*(2+$)),ft=H*$+F*K,At=F*$-H*K,N=S(At*At+ft*ft);return[m(K*ft,N*(1+$)),N?-L(K*At/N):0]},as.invert=function(F,H){var $=F,K=H,ft=25;do{var At,N=h(K),Q=u(K),it=u(2*K),dt=Q*Q,wt=N*N,Et=u($),Bt=h($/2),Ut=u($/2),Ht=Ut*Ut,qt=1-wt*Bt*Bt,Jt=qt?E(N*Bt)*S(At=1/qt):At=0,le=.5*(2*Jt*N*Ut+$/p)-F,fe=.5*(Jt*Q+K)-H,Le=.5*At*(wt*Ht+Jt*N*Bt*dt)+.5/p,Se=At*(Et*it/4-Jt*Q*Ut),Ce=.125*At*(it*Ut-Jt*Q*wt*Et),Ne=.5*At*(dt*Bt+Jt*Ht*N)+.5,Ee=Se*Ce-Ne*Le,rr=(fe*Se-le*Ne)/Ee,Ye=(le*Ce-fe*Le)/Ee;$-=rr,K-=Ye}while((k(rr)>d||k(Ye)>d)&&--ft>0);return[$,K]}},33940:function(W,I,o){function T(){return new k}function k(){this.reset()}o.d(I,{Z:function(){return T}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(h){m(r,h,this.t),m(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new k;function m(h,s,e){var t=h.s=s+e,n=t-s,a=t-n;h.t=s-a+(e-n)}},97860:function(W,I,o){o.d(I,{L9:function(){return a},ZP:function(){return w},gL:function(){return c}});var T,k,r,m,h,s=o(33940),e=o(39695),t=o(73182),n=o(72736),a=(0,s.Z)(),i=(0,s.Z)(),c={point:t.Z,lineStart:t.Z,lineEnd:t.Z,polygonStart:function(){a.reset(),c.lineStart=l,c.lineEnd=u},polygonEnd:function(){var v=+a;i.add(v<0?e.BZ+v:v),this.lineStart=this.lineEnd=this.point=t.Z},sphere:function(){i.add(e.BZ)}};function l(){c.point=f}function u(){d(T,k)}function f(v,p){c.point=d,T=v,k=p,v*=e.uR,p*=e.uR,r=v,m=(0,e.mC)(p=p/2+e.pu),h=(0,e.O$)(p)}function d(v,p){v*=e.uR,p=(p*=e.uR)/2+e.pu;var y=v-r,b=y>=0?1:-1,x=b*y,_=(0,e.mC)(p),g=(0,e.O$)(p),A=h*g,M=m*_+A*(0,e.mC)(x),L=A*b*(0,e.O$)(x);a.add((0,e.fv)(L,M)),r=v,m=_,h=g}function w(v){return i.reset(),(0,n.Z)(v,c),2*i}},77338:function(W,I,o){o.d(I,{Z:function(){return E}});var T,k,r,m,h,s,e,t,n,a,i=o(33940),c=o(97860),l=o(7620),u=o(39695),f=o(72736),d=(0,i.Z)(),w={point:v,lineStart:y,lineEnd:b,polygonStart:function(){w.point=x,w.lineStart=_,w.lineEnd=g,d.reset(),c.gL.polygonStart()},polygonEnd:function(){c.gL.polygonEnd(),w.point=v,w.lineStart=y,w.lineEnd=b,c.L9<0?(T=-(r=180),k=-(m=90)):d>u.Ho?m=90:d<-u.Ho&&(k=-90),a[0]=T,a[1]=r},sphere:function(){T=-(r=180),k=-(m=90)}};function v(S,O){n.push(a=[T=S,r=S]),O<k&&(k=O),O>m&&(m=O)}function p(S,O){var P=(0,l.Og)([S*u.uR,O*u.uR]);if(t){var U=(0,l.T5)(t,P),R=[U[1],-U[0],0],j=(0,l.T5)(R,U);(0,l.iJ)(j),j=(0,l.Y1)(j);var B,z=S-h,G=z>0?1:-1,V=j[0]*u.RW*G,et=(0,u.Wn)(z)>180;et^(G*h<V&&V<G*S)?(B=j[1]*u.RW)>m&&(m=B):et^(G*h<(V=(V+360)%360-180)&&V<G*S)?(B=-j[1]*u.RW)<k&&(k=B):(O<k&&(k=O),O>m&&(m=O)),et?S<h?A(T,S)>A(T,r)&&(r=S):A(S,r)>A(T,r)&&(T=S):r>=T?(S<T&&(T=S),S>r&&(r=S)):S>h?A(T,S)>A(T,r)&&(r=S):A(S,r)>A(T,r)&&(T=S)}else n.push(a=[T=S,r=S]);O<k&&(k=O),O>m&&(m=O),t=P,h=S}function y(){w.point=p}function b(){a[0]=T,a[1]=r,w.point=v,t=null}function x(S,O){if(t){var P=S-h;d.add((0,u.Wn)(P)>180?P+(P>0?360:-360):P)}else s=S,e=O;c.gL.point(S,O),p(S,O)}function _(){c.gL.lineStart()}function g(){x(s,e),c.gL.lineEnd(),(0,u.Wn)(d)>u.Ho&&(T=-(r=180)),a[0]=T,a[1]=r,t=null}function A(S,O){return(O-=S)<0?O+360:O}function M(S,O){return S[0]-O[0]}function L(S,O){return S[0]<=S[1]?S[0]<=O&&O<=S[1]:O<S[0]||S[1]<O}function E(S){var O,P,U,R,j,B,z;if(m=r=-(T=k=1/0),n=[],(0,f.Z)(S,w),P=n.length){for(n.sort(M),O=1,j=[U=n[0]];O<P;++O)L(U,(R=n[O])[0])||L(U,R[1])?(A(U[0],R[1])>A(U[0],U[1])&&(U[1]=R[1]),A(R[0],U[1])>A(U[0],U[1])&&(U[0]=R[0])):j.push(U=R);for(B=-1/0,O=0,U=j[P=j.length-1];O<=P;U=R,++O)R=j[O],(z=A(U[1],R[0]))>B&&(B=z,T=R[0],r=U[1])}return n=a=null,T===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[T,k],[r,m]]}},7620:function(W,I,o){o.d(I,{Og:function(){return r},T:function(){return e},T5:function(){return h},Y1:function(){return k},iJ:function(){return t},j9:function(){return m},s0:function(){return s}});var T=o(39695);function k(n){return[(0,T.fv)(n[1],n[0]),(0,T.ZR)(n[2])]}function r(n){var a=n[0],i=n[1],c=(0,T.mC)(i);return[c*(0,T.mC)(a),c*(0,T.O$)(a),(0,T.O$)(i)]}function m(n,a){return n[0]*a[0]+n[1]*a[1]+n[2]*a[2]}function h(n,a){return[n[1]*a[2]-n[2]*a[1],n[2]*a[0]-n[0]*a[2],n[0]*a[1]-n[1]*a[0]]}function s(n,a){n[0]+=a[0],n[1]+=a[1],n[2]+=a[2]}function e(n,a){return[n[0]*a,n[1]*a,n[2]*a]}function t(n){var a=(0,T._b)(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=a,n[1]/=a,n[2]/=a}},66624:function(W,I,o){o.d(I,{Z:function(){return P}});var T,k,r,m,h,s,e,t,n,a,i,c,l,u,f,d,w=o(39695),v=o(73182),p=o(72736),y={sphere:v.Z,point:b,lineStart:_,lineEnd:M,polygonStart:function(){y.lineStart=L,y.lineEnd=E},polygonEnd:function(){y.lineStart=_,y.lineEnd=M}};function b(U,R){U*=w.uR,R*=w.uR;var j=(0,w.mC)(R);x(j*(0,w.mC)(U),j*(0,w.O$)(U),(0,w.O$)(R))}function x(U,R,j){++T,r+=(U-r)/T,m+=(R-m)/T,h+=(j-h)/T}function _(){y.point=g}function g(U,R){U*=w.uR,R*=w.uR;var j=(0,w.mC)(R);u=j*(0,w.mC)(U),f=j*(0,w.O$)(U),d=(0,w.O$)(R),y.point=A,x(u,f,d)}function A(U,R){U*=w.uR,R*=w.uR;var j=(0,w.mC)(R),B=j*(0,w.mC)(U),z=j*(0,w.O$)(U),G=(0,w.O$)(R),V=(0,w.fv)((0,w._b)((V=f*G-d*z)*V+(V=d*B-u*G)*V+(V=u*z-f*B)*V),u*B+f*z+d*G);k+=V,s+=V*(u+(u=B)),e+=V*(f+(f=z)),t+=V*(d+(d=G)),x(u,f,d)}function M(){y.point=b}function L(){y.point=S}function E(){O(c,l),y.point=b}function S(U,R){c=U,l=R,U*=w.uR,R*=w.uR,y.point=O;var j=(0,w.mC)(R);u=j*(0,w.mC)(U),f=j*(0,w.O$)(U),d=(0,w.O$)(R),x(u,f,d)}function O(U,R){U*=w.uR,R*=w.uR;var j=(0,w.mC)(R),B=j*(0,w.mC)(U),z=j*(0,w.O$)(U),G=(0,w.O$)(R),V=f*G-d*z,et=d*B-u*G,J=u*z-f*B,X=(0,w._b)(V*V+et*et+J*J),Y=(0,w.ZR)(X),Z=X&&-Y/X;n+=Z*V,a+=Z*et,i+=Z*J,k+=Y,s+=Y*(u+(u=B)),e+=Y*(f+(f=z)),t+=Y*(d+(d=G)),x(u,f,d)}function P(U){T=k=r=m=h=s=e=t=n=a=i=0,(0,p.Z)(U,y);var R=n,j=a,B=i,z=R*R+j*j+B*B;return z<w.aW&&(R=s,j=e,B=t,k<w.Ho&&(R=r,j=m,B=h),(z=R*R+j*j+B*B)<w.aW)?[NaN,NaN]:[(0,w.fv)(j,R)*w.RW,(0,w.ZR)(B/(0,w._b)(z))*w.RW]}},7613:function(W,I,o){o.d(I,{m:function(){return h},Z:function(){return e}});var T=o(7620);function k(t){return function(){return t}}var r=o(39695),m=o(49386);function h(t,n,a,i,c,l){if(a){var u=(0,r.mC)(n),f=(0,r.O$)(n),d=i*a;c==null?(c=n+i*r.BZ,l=n-d/2):(c=s(u,c),l=s(u,l),(i>0?c<l:c>l)&&(c+=i*r.BZ));for(var w,v=c;i>0?v>l:v<l;v-=d)w=(0,T.Y1)([u,-f*(0,r.mC)(v),-f*(0,r.O$)(v)]),t.point(w[0],w[1])}}function s(t,n){(n=(0,T.Og)(n))[0]-=t,(0,T.iJ)(n);var a=(0,r.Kh)(-n[1]);return((-n[2]<0?-a:a)+r.BZ-r.Ho)%r.BZ}function e(){var t,n,a=k([0,0]),i=k(90),c=k(6),l={point:function(f,d){t.push(f=n(f,d)),f[0]*=r.RW,f[1]*=r.RW}};function u(){var f=a.apply(this,arguments),d=i.apply(this,arguments)*r.uR,w=c.apply(this,arguments)*r.uR;return t=[],n=(0,m.I)(-f[0]*r.uR,-f[1]*r.uR,0).invert,h(l,d,w,1),f={type:"Polygon",coordinates:[t]},t=n=null,f}return u.center=function(f){return arguments.length?(a=typeof f=="function"?f:k([+f[0],+f[1]]),u):a},u.radius=function(f){return arguments.length?(i=typeof f=="function"?f:k(+f),u):i},u.precision=function(f){return arguments.length?(c=typeof f=="function"?f:k(+f),u):c},u}},87070:function(W,I,o){var T=o(97023),k=o(39695);I.Z=(0,T.Z)(function(){return!0},function(r){var m,h=NaN,s=NaN,e=NaN;return{lineStart:function(){r.lineStart(),m=1},point:function(t,n){var a=t>0?k.pi:-k.pi,i=(0,k.Wn)(t-h);(0,k.Wn)(i-k.pi)<k.Ho?(r.point(h,s=(s+n)/2>0?k.ou:-k.ou),r.point(e,s),r.lineEnd(),r.lineStart(),r.point(a,s),r.point(t,s),m=0):e!==a&&i>=k.pi&&((0,k.Wn)(h-e)<k.Ho&&(h-=e*k.Ho),(0,k.Wn)(t-a)<k.Ho&&(t-=a*k.Ho),s=function(c,l,u,f){var d,w,v=(0,k.O$)(c-u);return(0,k.Wn)(v)>k.Ho?(0,k.z4)(((0,k.O$)(l)*(w=(0,k.mC)(f))*(0,k.O$)(u)-(0,k.O$)(f)*(d=(0,k.mC)(l))*(0,k.O$)(c))/(d*w*v)):(l+f)/2}(h,s,t,n),r.point(e,s),r.lineEnd(),r.lineStart(),r.point(a,s),m=0),r.point(h=t,s=n),e=a},lineEnd:function(){r.lineEnd(),h=s=NaN},clean:function(){return 2-m}}},function(r,m,h,s){var e;if(r==null)e=h*k.ou,s.point(-k.pi,e),s.point(0,e),s.point(k.pi,e),s.point(k.pi,0),s.point(k.pi,-e),s.point(0,-e),s.point(-k.pi,-e),s.point(-k.pi,0),s.point(-k.pi,e);else if((0,k.Wn)(r[0]-m[0])>k.Ho){var t=r[0]<m[0]?k.pi:-k.pi;e=h*t/2,s.point(-t,e),s.point(0,e),s.point(t,e)}else s.point(m[0],m[1])},[-k.pi,-k.ou])},85272:function(W,I,o){o.d(I,{Z:function(){return k}});var T=o(73182);function k(){var r,m=[];return{point:function(h,s,e){r.push([h,s,e])},lineStart:function(){m.push(r=[])},lineEnd:T.Z,rejoin:function(){m.length>1&&m.push(m.pop().concat(m.shift()))},result:function(){var h=m;return m=[],r=null,h}}}},1457:function(W,I,o){o.d(I,{Z:function(){return s}});var T=o(7620),k=o(7613),r=o(39695),m=o(67108),h=o(97023);function s(e){var t=(0,r.mC)(e),n=6*r.uR,a=t>0,i=(0,r.Wn)(t)>r.Ho;function c(f,d){return(0,r.mC)(f)*(0,r.mC)(d)>t}function l(f,d,w){var v=(0,T.Og)(f),p=(0,T.Og)(d),y=[1,0,0],b=(0,T.T5)(v,p),x=(0,T.j9)(b,b),_=b[0],g=x-_*_;if(!g)return!w&&f;var A=t*x/g,M=-t*_/g,L=(0,T.T5)(y,b),E=(0,T.T)(y,A),S=(0,T.T)(b,M);(0,T.s0)(E,S);var O=L,P=(0,T.j9)(E,O),U=(0,T.j9)(O,O),R=P*P-U*((0,T.j9)(E,E)-1);if(!(R<0)){var j=(0,r._b)(R),B=(0,T.T)(O,(-P-j)/U);if((0,T.s0)(B,E),B=(0,T.Y1)(B),!w)return B;var z,G=f[0],V=d[0],et=f[1],J=d[1];V<G&&(z=G,G=V,V=z);var X=V-G,Y=(0,r.Wn)(X-r.pi)<r.Ho;if(!Y&&J<et&&(z=et,et=J,J=z),Y||X<r.Ho?Y?et+J>0^B[1]<((0,r.Wn)(B[0]-G)<r.Ho?et:J):et<=B[1]&&B[1]<=J:X>r.pi^(G<=B[0]&&B[0]<=V)){var Z=(0,T.T)(O,(-P+j)/U);return(0,T.s0)(Z,E),[B,(0,T.Y1)(Z)]}}}function u(f,d){var w=a?e:r.pi-e,v=0;return f<-w?v|=1:f>w&&(v|=2),d<-w?v|=4:d>w&&(v|=8),v}return(0,h.Z)(c,function(f){var d,w,v,p,y;return{lineStart:function(){p=v=!1,y=1},point:function(b,x){var _,g=[b,x],A=c(b,x),M=a?A?0:u(b,x):A?u(b+(b<0?r.pi:-r.pi),x):0;if(!d&&(p=v=A)&&f.lineStart(),A!==v&&(!(_=l(d,g))||(0,m.Z)(d,_)||(0,m.Z)(g,_))&&(g[2]=1),A!==v)y=0,A?(f.lineStart(),_=l(g,d),f.point(_[0],_[1])):(_=l(d,g),f.point(_[0],_[1],2),f.lineEnd()),d=_;else if(i&&d&&a^A){var L;M&w||!(L=l(g,d,!0))||(y=0,a?(f.lineStart(),f.point(L[0][0],L[0][1]),f.point(L[1][0],L[1][1]),f.lineEnd()):(f.point(L[1][0],L[1][1]),f.lineEnd(),f.lineStart(),f.point(L[0][0],L[0][1],3)))}!A||d&&(0,m.Z)(d,g)||f.point(g[0],g[1]),d=g,v=A,w=M},lineEnd:function(){v&&f.lineEnd(),d=null},clean:function(){return y|(p&&v)<<1}}},function(f,d,w,v){(0,k.m)(v,e,n,w,f,d)},a?[0,-e]:[-r.pi,e-r.pi])}},97023:function(W,I,o){o.d(I,{Z:function(){return s}});var T=o(85272),k=o(46225),r=o(39695),m=o(23071),h=o(33064);function s(n,a,i,c){return function(l){var u,f,d,w=a(l),v=(0,T.Z)(),p=a(v),y=!1,b={point:x,lineStart:g,lineEnd:A,polygonStart:function(){b.point=M,b.lineStart=L,b.lineEnd=E,f=[],u=[]},polygonEnd:function(){b.point=x,b.lineStart=g,b.lineEnd=A,f=(0,h.TS)(f);var S=(0,m.Z)(u,c);f.length?(y||(l.polygonStart(),y=!0),(0,k.Z)(f,t,S,i,l)):S&&(y||(l.polygonStart(),y=!0),l.lineStart(),i(null,null,1,l),l.lineEnd()),y&&(l.polygonEnd(),y=!1),f=u=null},sphere:function(){l.polygonStart(),l.lineStart(),i(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function x(S,O){n(S,O)&&l.point(S,O)}function _(S,O){w.point(S,O)}function g(){b.point=_,w.lineStart()}function A(){b.point=x,w.lineEnd()}function M(S,O){d.push([S,O]),p.point(S,O)}function L(){p.lineStart(),d=[]}function E(){M(d[0][0],d[0][1]),p.lineEnd();var S,O,P,U,R=p.clean(),j=v.result(),B=j.length;if(d.pop(),u.push(d),d=null,B)if(1&R){if((O=(P=j[0]).length-1)>0){for(y||(l.polygonStart(),y=!0),l.lineStart(),S=0;S<O;++S)l.point((U=P[S])[0],U[1]);l.lineEnd()}}else B>1&&2&R&&j.push(j.pop().concat(j.shift())),f.push(j.filter(e))}return b}}function e(n){return n.length>1}function t(n,a){return((n=n.x)[0]<0?n[1]-r.ou-r.Ho:r.ou-n[1])-((a=a.x)[0]<0?a[1]-r.ou-r.Ho:r.ou-a[1])}},87605:function(W,I,o){o.d(I,{Z:function(){return e}});var T=o(39695),k=o(85272),r=o(46225),m=o(33064),h=1e9,s=-h;function e(t,n,a,i){function c(w,v){return t<=w&&w<=a&&n<=v&&v<=i}function l(w,v,p,y){var b=0,x=0;if(w==null||(b=u(w,p))!==(x=u(v,p))||d(w,v)<0^p>0)do y.point(b===0||b===3?t:a,b>1?i:n);while((b=(b+p+4)%4)!==x);else y.point(v[0],v[1])}function u(w,v){return(0,T.Wn)(w[0]-t)<T.Ho?v>0?0:3:(0,T.Wn)(w[0]-a)<T.Ho?v>0?2:1:(0,T.Wn)(w[1]-n)<T.Ho?v>0?1:0:v>0?3:2}function f(w,v){return d(w.x,v.x)}function d(w,v){var p=u(w,1),y=u(v,1);return p!==y?p-y:p===0?v[1]-w[1]:p===1?w[0]-v[0]:p===2?w[1]-v[1]:v[0]-w[0]}return function(w){var v,p,y,b,x,_,g,A,M,L,E,S=w,O=(0,k.Z)(),P={point:U,lineStart:function(){P.point=R,p&&p.push(y=[]),L=!0,M=!1,g=A=NaN},lineEnd:function(){v&&(R(b,x),_&&M&&O.rejoin(),v.push(O.result())),P.point=U,M&&S.lineEnd()},polygonStart:function(){S=O,v=[],p=[],E=!0},polygonEnd:function(){var j=function(){for(var G=0,V=0,et=p.length;V<et;++V)for(var J,X,Y=p[V],Z=1,tt=Y.length,rt=Y[0],nt=rt[0],ot=rt[1];Z<tt;++Z)J=nt,X=ot,nt=(rt=Y[Z])[0],ot=rt[1],X<=i?ot>i&&(nt-J)*(i-X)>(ot-X)*(t-J)&&++G:ot<=i&&(nt-J)*(i-X)<(ot-X)*(t-J)&&--G;return G}(),B=E&&j,z=(v=(0,m.TS)(v)).length;(B||z)&&(w.polygonStart(),B&&(w.lineStart(),l(null,null,1,w),w.lineEnd()),z&&(0,r.Z)(v,f,j,l,w),w.polygonEnd()),S=w,v=p=y=null}};function U(j,B){c(j,B)&&S.point(j,B)}function R(j,B){var z=c(j,B);if(p&&y.push([j,B]),L)b=j,x=B,_=z,L=!1,z&&(S.lineStart(),S.point(j,B));else if(z&&M)S.point(j,B);else{var G=[g=Math.max(s,Math.min(h,g)),A=Math.max(s,Math.min(h,A))],V=[j=Math.max(s,Math.min(h,j)),B=Math.max(s,Math.min(h,B))];(function(et,J,X,Y,Z,tt){var rt,nt=et[0],ot=et[1],ct=0,pt=1,gt=J[0]-nt,kt=J[1]-ot;if(rt=X-nt,gt||!(rt>0)){if(rt/=gt,gt<0){if(rt<ct)return;rt<pt&&(pt=rt)}else if(gt>0){if(rt>pt)return;rt>ct&&(ct=rt)}if(rt=Z-nt,gt||!(rt<0)){if(rt/=gt,gt<0){if(rt>pt)return;rt>ct&&(ct=rt)}else if(gt>0){if(rt<ct)return;rt<pt&&(pt=rt)}if(rt=Y-ot,kt||!(rt>0)){if(rt/=kt,kt<0){if(rt<ct)return;rt<pt&&(pt=rt)}else if(kt>0){if(rt>pt)return;rt>ct&&(ct=rt)}if(rt=tt-ot,kt||!(rt<0)){if(rt/=kt,kt<0){if(rt>pt)return;rt>ct&&(ct=rt)}else if(kt>0){if(rt<ct)return;rt<pt&&(pt=rt)}return ct>0&&(et[0]=nt+ct*gt,et[1]=ot+ct*kt),pt<1&&(J[0]=nt+pt*gt,J[1]=ot+pt*kt),!0}}}}})(G,V,t,n,a,i)?(M||(S.lineStart(),S.point(G[0],G[1])),S.point(V[0],V[1]),z||S.lineEnd(),E=!1):z&&(S.lineStart(),S.point(j,B),E=!1)}g=j,A=B,M=z}return P}}},46225:function(W,I,o){o.d(I,{Z:function(){return m}});var T=o(67108),k=o(39695);function r(s,e,t,n){this.x=s,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function m(s,e,t,n,a){var i,c,l=[],u=[];if(s.forEach(function(y){if(!((b=y.length-1)<=0)){var b,x,_=y[0],g=y[b];if((0,T.Z)(_,g)){if(!_[2]&&!g[2]){for(a.lineStart(),i=0;i<b;++i)a.point((_=y[i])[0],_[1]);return void a.lineEnd()}g[0]+=2*k.Ho}l.push(x=new r(_,y,null,!0)),u.push(x.o=new r(_,null,x,!1)),l.push(x=new r(g,y,null,!1)),u.push(x.o=new r(g,null,x,!0))}}),l.length){for(u.sort(e),h(l),h(u),i=0,c=u.length;i<c;++i)u[i].e=t=!t;for(var f,d,w=l[0];;){for(var v=w,p=!0;v.v;)if((v=v.n)===w)return;f=v.z,a.lineStart();do{if(v.v=v.o.v=!0,v.e){if(p)for(i=0,c=f.length;i<c;++i)a.point((d=f[i])[0],d[1]);else n(v.x,v.n.x,1,a);v=v.n}else{if(p)for(f=v.p.z,i=f.length-1;i>=0;--i)a.point((d=f[i])[0],d[1]);else n(v.x,v.p.x,-1,a);v=v.p}f=(v=v.o).z,p=!p}while(!v.v);a.lineEnd()}}}function h(s){if(e=s.length){for(var e,t,n=0,a=s[0];++n<e;)a.n=t=s[n],t.p=a,a=t;a.n=t=s[0],t.p=a}}},96059:function(W,I,o){function T(k,r){function m(h,s){return h=k(h,s),r(h[0],h[1])}return k.invert&&r.invert&&(m.invert=function(h,s){return(h=r.invert(h,s))&&k.invert(h[0],h[1])}),m}o.d(I,{Z:function(){return T}})},8593:function(W,I,o){function T(k){return k}o.d(I,{Z:function(){return T}})},27362:function(W,I,o){o.r(I),o.d(I,{geoAlbers:function(){return me},geoAlbersUsa:function(){return we},geoArea:function(){return T.ZP},geoAzimuthalEqualArea:function(){return ue.Z},geoAzimuthalEqualAreaRaw:function(){return ue.l},geoAzimuthalEquidistant:function(){return he.Z},geoAzimuthalEquidistantRaw:function(){return he.N},geoBounds:function(){return k.Z},geoCentroid:function(){return r.Z},geoCircle:function(){return m.Z},geoClipAntimeridian:function(){return h.Z},geoClipCircle:function(){return s.Z},geoClipExtent:function(){return t},geoClipRectangle:function(){return e.Z},geoConicConformal:function(){return Ze},geoConicConformalRaw:function(){return Ge},geoConicEqualArea:function(){return pe},geoConicEqualAreaRaw:function(){return ge},geoConicEquidistant:function(){return xr},geoConicEquidistantRaw:function(){return pr},geoContains:function(){return j},geoDistance:function(){return A},geoEqualEarth:function(){return mr},geoEqualEarthRaw:function(){return fr},geoEquirectangular:function(){return We.Z},geoEquirectangularRaw:function(){return We.k},geoGnomonic:function(){return Cr.Z},geoGnomonicRaw:function(){return Cr.M},geoGraticule:function(){return V},geoGraticule10:function(){return et},geoIdentity:function(){return _r},geoInterpolate:function(){return tt.Z},geoLength:function(){return x},geoMercator:function(){return De},geoMercatorRaw:function(){return Pe},geoNaturalEarth1:function(){return Sr.Z},geoNaturalEarth1Raw:function(){return Sr.K},geoOrthographic:function(){return Xr.Z},geoOrthographicRaw:function(){return Xr.I},geoPath:function(){return Nt},geoProjection:function(){return ee.Z},geoProjectionMutator:function(){return ee.r},geoRotation:function(){return be.Z},geoStereographic:function(){return tn},geoStereographicRaw:function(){return sn},geoStream:function(){return d.Z},geoTransform:function(){return Er.Z},geoTransverseMercator:function(){return vn},geoTransverseMercatorRaw:function(){return qr}});var T=o(97860),k=o(77338),r=o(66624),m=o(7613),h=o(87070),s=o(1457),e=o(87605);function t(){var je,nr,hr,gr=0,Mr=0,Hr=960,Pr=500;return hr={stream:function(Dr){return je&&nr===Dr?je:je=(0,e.Z)(gr,Mr,Hr,Pr)(nr=Dr)},extent:function(Dr){return arguments.length?(gr=+Dr[0][0],Mr=+Dr[0][1],Hr=+Dr[1][0],Pr=+Dr[1][1],je=nr=null,hr):[[gr,Mr],[Hr,Pr]]}}}var n,a,i,c=o(23071),l=o(33940),u=o(39695),f=o(73182),d=o(72736),w=(0,l.Z)(),v={sphere:f.Z,point:f.Z,lineStart:function(){v.point=y,v.lineEnd=p},lineEnd:f.Z,polygonStart:f.Z,polygonEnd:f.Z};function p(){v.point=v.lineEnd=f.Z}function y(je,nr){je*=u.uR,nr*=u.uR,n=je,a=(0,u.O$)(nr),i=(0,u.mC)(nr),v.point=b}function b(je,nr){je*=u.uR,nr*=u.uR;var hr=(0,u.O$)(nr),gr=(0,u.mC)(nr),Mr=(0,u.Wn)(je-n),Hr=(0,u.mC)(Mr),Pr=gr*(0,u.O$)(Mr),Dr=i*hr-a*gr*Hr,Qr=a*hr+i*gr*Hr;w.add((0,u.fv)((0,u._b)(Pr*Pr+Dr*Dr),Qr)),n=je,a=hr,i=gr}function x(je){return w.reset(),(0,d.Z)(je,v),+w}var _=[null,null],g={type:"LineString",coordinates:_};function A(je,nr){return _[0]=je,_[1]=nr,x(g)}var M={Feature:function(je,nr){return E(je.geometry,nr)},FeatureCollection:function(je,nr){for(var hr=je.features,gr=-1,Mr=hr.length;++gr<Mr;)if(E(hr[gr].geometry,nr))return!0;return!1}},L={Sphere:function(){return!0},Point:function(je,nr){return S(je.coordinates,nr)},MultiPoint:function(je,nr){for(var hr=je.coordinates,gr=-1,Mr=hr.length;++gr<Mr;)if(S(hr[gr],nr))return!0;return!1},LineString:function(je,nr){return O(je.coordinates,nr)},MultiLineString:function(je,nr){for(var hr=je.coordinates,gr=-1,Mr=hr.length;++gr<Mr;)if(O(hr[gr],nr))return!0;return!1},Polygon:function(je,nr){return P(je.coordinates,nr)},MultiPolygon:function(je,nr){for(var hr=je.coordinates,gr=-1,Mr=hr.length;++gr<Mr;)if(P(hr[gr],nr))return!0;return!1},GeometryCollection:function(je,nr){for(var hr=je.geometries,gr=-1,Mr=hr.length;++gr<Mr;)if(E(hr[gr],nr))return!0;return!1}};function E(je,nr){return!(!je||!L.hasOwnProperty(je.type))&&L[je.type](je,nr)}function S(je,nr){return A(je,nr)===0}function O(je,nr){for(var hr,gr,Mr,Hr=0,Pr=je.length;Hr<Pr;Hr++){if((gr=A(je[Hr],nr))===0||Hr>0&&(Mr=A(je[Hr],je[Hr-1]))>0&&hr<=Mr&&gr<=Mr&&(hr+gr-Mr)*(1-Math.pow((hr-gr)/Mr,2))<u.aW*Mr)return!0;hr=gr}return!1}function P(je,nr){return!!(0,c.Z)(je.map(U),R(nr))}function U(je){return(je=je.map(R)).pop(),je}function R(je){return[je[0]*u.uR,je[1]*u.uR]}function j(je,nr){return(je&&M.hasOwnProperty(je.type)?M[je.type]:E)(je,nr)}var B=o(33064);function z(je,nr,hr){var gr=(0,B.w6)(je,nr-u.Ho,hr).concat(nr);return function(Mr){return gr.map(function(Hr){return[Mr,Hr]})}}function G(je,nr,hr){var gr=(0,B.w6)(je,nr-u.Ho,hr).concat(nr);return function(Mr){return gr.map(function(Hr){return[Hr,Mr]})}}function V(){var je,nr,hr,gr,Mr,Hr,Pr,Dr,Qr,He,wr,Me,qe=10,Qe=qe,yr=90,br=360,Ar=2.5;function cr(){return{type:"MultiLineString",coordinates:Xe()}}function Xe(){return(0,B.w6)((0,u.mD)(gr/yr)*yr,hr,yr).map(wr).concat((0,B.w6)((0,u.mD)(Dr/br)*br,Pr,br).map(Me)).concat((0,B.w6)((0,u.mD)(nr/qe)*qe,je,qe).filter(function(Je){return(0,u.Wn)(Je%yr)>u.Ho}).map(Qr)).concat((0,B.w6)((0,u.mD)(Hr/Qe)*Qe,Mr,Qe).filter(function(Je){return(0,u.Wn)(Je%br)>u.Ho}).map(He))}return cr.lines=function(){return Xe().map(function(Je){return{type:"LineString",coordinates:Je}})},cr.outline=function(){return{type:"Polygon",coordinates:[wr(gr).concat(Me(Pr).slice(1),wr(hr).reverse().slice(1),Me(Dr).reverse().slice(1))]}},cr.extent=function(Je){return arguments.length?cr.extentMajor(Je).extentMinor(Je):cr.extentMinor()},cr.extentMajor=function(Je){return arguments.length?(gr=+Je[0][0],hr=+Je[1][0],Dr=+Je[0][1],Pr=+Je[1][1],gr>hr&&(Je=gr,gr=hr,hr=Je),Dr>Pr&&(Je=Dr,Dr=Pr,Pr=Je),cr.precision(Ar)):[[gr,Dr],[hr,Pr]]},cr.extentMinor=function(Je){return arguments.length?(nr=+Je[0][0],je=+Je[1][0],Hr=+Je[0][1],Mr=+Je[1][1],nr>je&&(Je=nr,nr=je,je=Je),Hr>Mr&&(Je=Hr,Hr=Mr,Mr=Je),cr.precision(Ar)):[[nr,Hr],[je,Mr]]},cr.step=function(Je){return arguments.length?cr.stepMajor(Je).stepMinor(Je):cr.stepMinor()},cr.stepMajor=function(Je){return arguments.length?(yr=+Je[0],br=+Je[1],cr):[yr,br]},cr.stepMinor=function(Je){return arguments.length?(qe=+Je[0],Qe=+Je[1],cr):[qe,Qe]},cr.precision=function(Je){return arguments.length?(Ar=+Je,Qr=z(Hr,Mr,90),He=G(nr,je,Ar),wr=z(Dr,Pr,90),Me=G(gr,hr,Ar),cr):Ar},cr.extentMajor([[-180,-90+u.Ho],[180,90-u.Ho]]).extentMinor([[-180,-80-u.Ho],[180,80+u.Ho]])}function et(){return V()()}var J,X,Y,Z,tt=o(83074),rt=o(8593),nt=(0,l.Z)(),ot=(0,l.Z)(),ct={point:f.Z,lineStart:f.Z,lineEnd:f.Z,polygonStart:function(){ct.lineStart=pt,ct.lineEnd=yt},polygonEnd:function(){ct.lineStart=ct.lineEnd=ct.point=f.Z,nt.add((0,u.Wn)(ot)),ot.reset()},result:function(){var je=nt/2;return nt.reset(),je}};function pt(){ct.point=gt}function gt(je,nr){ct.point=kt,J=Y=je,X=Z=nr}function kt(je,nr){ot.add(Z*je-Y*nr),Y=je,Z=nr}function yt(){kt(J,X)}var mt,Ot,vt,xt,st=ct,at=o(3559),ht=0,Lt=0,Mt=0,_t=0,St=0,Dt=0,ut=0,Tt=0,bt=0,It={point:zt,lineStart:Ft,lineEnd:Xt,polygonStart:function(){It.lineStart=ae,It.lineEnd=Qt},polygonEnd:function(){It.point=zt,It.lineStart=Ft,It.lineEnd=Xt},result:function(){var je=bt?[ut/bt,Tt/bt]:Dt?[_t/Dt,St/Dt]:Mt?[ht/Mt,Lt/Mt]:[NaN,NaN];return ht=Lt=Mt=_t=St=Dt=ut=Tt=bt=0,je}};function zt(je,nr){ht+=je,Lt+=nr,++Mt}function Ft(){It.point=$t}function $t(je,nr){It.point=Wt,zt(vt=je,xt=nr)}function Wt(je,nr){var hr=je-vt,gr=nr-xt,Mr=(0,u._b)(hr*hr+gr*gr);_t+=Mr*(vt+je)/2,St+=Mr*(xt+nr)/2,Dt+=Mr,zt(vt=je,xt=nr)}function Xt(){It.point=zt}function ae(){It.point=de}function Qt(){ye(mt,Ot)}function de(je,nr){It.point=ye,zt(mt=vt=je,Ot=xt=nr)}function ye(je,nr){var hr=je-vt,gr=nr-xt,Mr=(0,u._b)(hr*hr+gr*gr);_t+=Mr*(vt+je)/2,St+=Mr*(xt+nr)/2,Dt+=Mr,ut+=(Mr=xt*je-vt*nr)*(vt+je),Tt+=Mr*(xt+nr),bt+=3*Mr,zt(vt=je,xt=nr)}var ve=It;function ie(je){this._context=je}ie.prototype={_radius:4.5,pointRadius:function(je){return this._radius=je,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(je,nr){switch(this._point){case 0:this._context.moveTo(je,nr),this._point=1;break;case 1:this._context.lineTo(je,nr);break;default:this._context.moveTo(je+this._radius,nr),this._context.arc(je,nr,this._radius,0,u.BZ)}},result:f.Z};var se,ke,Ae,Ie,Te,Vt=(0,l.Z)(),Zt={point:f.Z,lineStart:function(){Zt.point=Gt},lineEnd:function(){se&&Yt(ke,Ae),Zt.point=f.Z},polygonStart:function(){se=!0},polygonEnd:function(){se=null},result:function(){var je=+Vt;return Vt.reset(),je}};function Gt(je,nr){Zt.point=Yt,ke=Ie=je,Ae=Te=nr}function Yt(je,nr){Ie-=je,Te-=nr,Vt.add((0,u._b)(Ie*Ie+Te*Te)),Ie=je,Te=nr}var ne=Zt;function re(){this._string=[]}function Pt(je){return"m0,"+je+"a"+je+","+je+" 0 1,1 0,"+-2*je+"a"+je+","+je+" 0 1,1 0,"+2*je+"z"}function Nt(je,nr){var hr,gr,Mr=4.5;function Hr(Pr){return Pr&&(typeof Mr=="function"&&gr.pointRadius(+Mr.apply(this,arguments)),(0,d.Z)(Pr,hr(gr))),gr.result()}return Hr.area=function(Pr){return(0,d.Z)(Pr,hr(st)),st.result()},Hr.measure=function(Pr){return(0,d.Z)(Pr,hr(ne)),ne.result()},Hr.bounds=function(Pr){return(0,d.Z)(Pr,hr(at.Z)),at.Z.result()},Hr.centroid=function(Pr){return(0,d.Z)(Pr,hr(ve)),ve.result()},Hr.projection=function(Pr){return arguments.length?(hr=Pr==null?(je=null,rt.Z):(je=Pr).stream,Hr):je},Hr.context=function(Pr){return arguments.length?(gr=Pr==null?(nr=null,new re):new ie(nr=Pr),typeof Mr!="function"&&gr.pointRadius(Mr),Hr):nr},Hr.pointRadius=function(Pr){return arguments.length?(Mr=typeof Pr=="function"?Pr:(gr.pointRadius(+Pr),+Pr),Hr):Mr},Hr.projection(je).context(nr)}re.prototype={_radius:4.5,_circle:Pt(4.5),pointRadius:function(je){return(je=+je)!==this._radius&&(this._radius=je,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(je,nr){switch(this._point){case 0:this._string.push("M",je,",",nr),this._point=1;break;case 1:this._string.push("L",je,",",nr);break;default:this._circle==null&&(this._circle=Pt(this._radius)),this._string.push("M",je,",",nr,this._circle)}},result:function(){if(this._string.length){var je=this._string.join("");return this._string=[],je}return null}};var ee=o(15002);function te(je){var nr=0,hr=u.pi/3,gr=(0,ee.r)(je),Mr=gr(nr,hr);return Mr.parallels=function(Hr){return arguments.length?gr(nr=Hr[0]*u.uR,hr=Hr[1]*u.uR):[nr*u.RW,hr*u.RW]},Mr}function ge(je,nr){var hr=(0,u.O$)(je),gr=(hr+(0,u.O$)(nr))/2;if((0,u.Wn)(gr)<u.Ho)return function(Dr){var Qr=(0,u.mC)(Dr);function He(wr,Me){return[wr*Qr,(0,u.O$)(Me)/Qr]}return He.invert=function(wr,Me){return[wr/Qr,(0,u.ZR)(Me*Qr)]},He}(je);var Mr=1+hr*(2*gr-hr),Hr=(0,u._b)(Mr)/gr;function Pr(Dr,Qr){var He=(0,u._b)(Mr-2*gr*(0,u.O$)(Qr))/gr;return[He*(0,u.O$)(Dr*=gr),Hr-He*(0,u.mC)(Dr)]}return Pr.invert=function(Dr,Qr){var He=Hr-Qr,wr=(0,u.fv)(Dr,(0,u.Wn)(He))*(0,u.Xx)(He);return He*gr<0&&(wr-=u.pi*(0,u.Xx)(Dr)*(0,u.Xx)(He)),[wr/gr,(0,u.ZR)((Mr-(Dr*Dr+He*He)*gr*gr)/(2*gr))]},Pr}function pe(){return te(ge).scale(155.424).center([0,33.6442])}function me(){return pe().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ce=o(47589);function we(){var je,nr,hr,gr,Mr,Hr,Pr=me(),Dr=pe().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Qr=pe().rotate([157,0]).center([-3,19.9]).parallels([8,18]),He={point:function(qe,Qe){Hr=[qe,Qe]}};function wr(qe){var Qe=qe[0],yr=qe[1];return Hr=null,hr.point(Qe,yr),Hr||(gr.point(Qe,yr),Hr)||(Mr.point(Qe,yr),Hr)}function Me(){return je=nr=null,wr}return wr.invert=function(qe){var Qe=Pr.scale(),yr=Pr.translate(),br=(qe[0]-yr[0])/Qe,Ar=(qe[1]-yr[1])/Qe;return(Ar>=.12&&Ar<.234&&br>=-.425&&br<-.214?Dr:Ar>=.166&&Ar<.234&&br>=-.214&&br<-.115?Qr:Pr).invert(qe)},wr.stream=function(qe){return je&&nr===qe?je:(Qe=[Pr.stream(nr=qe),Dr.stream(qe),Qr.stream(qe)],yr=Qe.length,je={point:function(br,Ar){for(var cr=-1;++cr<yr;)Qe[cr].point(br,Ar)},sphere:function(){for(var br=-1;++br<yr;)Qe[br].sphere()},lineStart:function(){for(var br=-1;++br<yr;)Qe[br].lineStart()},lineEnd:function(){for(var br=-1;++br<yr;)Qe[br].lineEnd()},polygonStart:function(){for(var br=-1;++br<yr;)Qe[br].polygonStart()},polygonEnd:function(){for(var br=-1;++br<yr;)Qe[br].polygonEnd()}});var Qe,yr},wr.precision=function(qe){return arguments.length?(Pr.precision(qe),Dr.precision(qe),Qr.precision(qe),Me()):Pr.precision()},wr.scale=function(qe){return arguments.length?(Pr.scale(qe),Dr.scale(.35*qe),Qr.scale(qe),wr.translate(Pr.translate())):Pr.scale()},wr.translate=function(qe){if(!arguments.length)return Pr.translate();var Qe=Pr.scale(),yr=+qe[0],br=+qe[1];return hr=Pr.translate(qe).clipExtent([[yr-.455*Qe,br-.238*Qe],[yr+.455*Qe,br+.238*Qe]]).stream(He),gr=Dr.translate([yr-.307*Qe,br+.201*Qe]).clipExtent([[yr-.425*Qe+u.Ho,br+.12*Qe+u.Ho],[yr-.214*Qe-u.Ho,br+.234*Qe-u.Ho]]).stream(He),Mr=Qr.translate([yr-.205*Qe,br+.212*Qe]).clipExtent([[yr-.214*Qe+u.Ho,br+.166*Qe+u.Ho],[yr-.115*Qe-u.Ho,br+.234*Qe-u.Ho]]).stream(He),Me()},wr.fitExtent=function(qe,Qe){return(0,ce.qg)(wr,qe,Qe)},wr.fitSize=function(qe,Qe){return(0,ce.mF)(wr,qe,Qe)},wr.fitWidth=function(qe,Qe){return(0,ce.V6)(wr,qe,Qe)},wr.fitHeight=function(qe,Qe){return(0,ce.rf)(wr,qe,Qe)},wr.scale(1070)}var ue=o(12956),he=o(17889),be=o(49386);function Pe(je,nr){return[je,(0,u.cM)((0,u.OR)((u.ou+nr)/2))]}function De(){return Ue(Pe).scale(961/u.BZ)}function Ue(je){var nr,hr,gr,Mr=(0,ee.Z)(je),Hr=Mr.center,Pr=Mr.scale,Dr=Mr.translate,Qr=Mr.clipExtent,He=null;function wr(){var Me=u.pi*Pr(),qe=Mr((0,be.Z)(Mr.rotate()).invert([0,0]));return Qr(He==null?[[qe[0]-Me,qe[1]-Me],[qe[0]+Me,qe[1]+Me]]:je===Pe?[[Math.max(qe[0]-Me,He),nr],[Math.min(qe[0]+Me,hr),gr]]:[[He,Math.max(qe[1]-Me,nr)],[hr,Math.min(qe[1]+Me,gr)]])}return Mr.scale=function(Me){return arguments.length?(Pr(Me),wr()):Pr()},Mr.translate=function(Me){return arguments.length?(Dr(Me),wr()):Dr()},Mr.center=function(Me){return arguments.length?(Hr(Me),wr()):Hr()},Mr.clipExtent=function(Me){return arguments.length?(Me==null?He=nr=hr=gr=null:(He=+Me[0][0],nr=+Me[0][1],hr=+Me[1][0],gr=+Me[1][1]),wr()):He==null?null:[[He,nr],[hr,gr]]},wr()}function tr(je){return(0,u.OR)((u.ou+je)/2)}function Ge(je,nr){var hr=(0,u.mC)(je),gr=je===nr?(0,u.O$)(je):(0,u.cM)(hr/(0,u.mC)(nr))/(0,u.cM)(tr(nr)/tr(je)),Mr=hr*(0,u.sQ)(tr(je),gr)/gr;if(!gr)return Pe;function Hr(Pr,Dr){Mr>0?Dr<-u.ou+u.Ho&&(Dr=-u.ou+u.Ho):Dr>u.ou-u.Ho&&(Dr=u.ou-u.Ho);var Qr=Mr/(0,u.sQ)(tr(Dr),gr);return[Qr*(0,u.O$)(gr*Pr),Mr-Qr*(0,u.mC)(gr*Pr)]}return Hr.invert=function(Pr,Dr){var Qr=Mr-Dr,He=(0,u.Xx)(gr)*(0,u._b)(Pr*Pr+Qr*Qr),wr=(0,u.fv)(Pr,(0,u.Wn)(Qr))*(0,u.Xx)(Qr);return Qr*gr<0&&(wr-=u.pi*(0,u.Xx)(Pr)*(0,u.Xx)(Qr)),[wr/gr,2*(0,u.z4)((0,u.sQ)(Mr/He,1/gr))-u.ou]},Hr}function Ze(){return te(Ge).scale(109.5).parallels([30,30])}Pe.invert=function(je,nr){return[je,2*(0,u.z4)((0,u.Qq)(nr))-u.ou]};var We=o(97492);function pr(je,nr){var hr=(0,u.mC)(je),gr=je===nr?(0,u.O$)(je):(hr-(0,u.mC)(nr))/(nr-je),Mr=hr/gr+je;if((0,u.Wn)(gr)<u.Ho)return We.k;function Hr(Pr,Dr){var Qr=Mr-Dr,He=gr*Pr;return[Qr*(0,u.O$)(He),Mr-Qr*(0,u.mC)(He)]}return Hr.invert=function(Pr,Dr){var Qr=Mr-Dr,He=(0,u.fv)(Pr,(0,u.Wn)(Qr))*(0,u.Xx)(Qr);return Qr*gr<0&&(He-=u.pi*(0,u.Xx)(Pr)*(0,u.Xx)(Qr)),[He/gr,Mr-(0,u.Xx)(gr)*(0,u._b)(Pr*Pr+Qr*Qr)]},Hr}function xr(){return te(pr).scale(131.154).center([0,13.9389])}var sr=1.340264,$e=-.081106,ir=893e-6,Ke=.003796,ar=(0,u._b)(3)/2;function fr(je,nr){var hr=(0,u.ZR)(ar*(0,u.O$)(nr)),gr=hr*hr,Mr=gr*gr*gr;return[je*(0,u.mC)(hr)/(ar*(sr+3*$e*gr+Mr*(7*ir+9*Ke*gr))),hr*(sr+$e*gr+Mr*(ir+Ke*gr))]}function mr(){return(0,ee.Z)(fr).scale(177.158)}fr.invert=function(je,nr){for(var hr,gr=nr,Mr=gr*gr,Hr=Mr*Mr*Mr,Pr=0;Pr<12&&(Hr=(Mr=(gr-=hr=(gr*(sr+$e*Mr+Hr*(ir+Ke*Mr))-nr)/(sr+3*$e*Mr+Hr*(7*ir+9*Ke*Mr)))*gr)*Mr*Mr,!((0,u.Wn)(hr)<u.aW));++Pr);return[ar*je*(sr+3*$e*Mr+Hr*(7*ir+9*Ke*Mr))/(0,u.mC)(gr),(0,u.ZR)((0,u.O$)(gr)/ar)]};var Cr=o(98936),Er=o(64684);function _r(){var je,nr,hr,gr,Mr,Hr,Pr,Dr=1,Qr=0,He=0,wr=1,Me=1,qe=0,Qe=null,yr=1,br=1,Ar=(0,Er.l)({point:function(lr,ur){var Lr=Je([lr,ur]);this.stream.point(Lr[0],Lr[1])}}),cr=rt.Z;function Xe(){return yr=Dr*wr,br=Dr*Me,Hr=Pr=null,Je}function Je(lr){var ur=lr[0]*yr,Lr=lr[1]*br;if(qe){var Ir=Lr*je-ur*nr;ur=ur*je+Lr*nr,Lr=Ir}return[ur+Qr,Lr+He]}return Je.invert=function(lr){var ur=lr[0]-Qr,Lr=lr[1]-He;if(qe){var Ir=Lr*je+ur*nr;ur=ur*je-Lr*nr,Lr=Ir}return[ur/yr,Lr/br]},Je.stream=function(lr){return Hr&&Pr===lr?Hr:Hr=Ar(cr(Pr=lr))},Je.postclip=function(lr){return arguments.length?(cr=lr,Qe=hr=gr=Mr=null,Xe()):cr},Je.clipExtent=function(lr){return arguments.length?(cr=lr==null?(Qe=hr=gr=Mr=null,rt.Z):(0,e.Z)(Qe=+lr[0][0],hr=+lr[0][1],gr=+lr[1][0],Mr=+lr[1][1]),Xe()):Qe==null?null:[[Qe,hr],[gr,Mr]]},Je.scale=function(lr){return arguments.length?(Dr=+lr,Xe()):Dr},Je.translate=function(lr){return arguments.length?(Qr=+lr[0],He=+lr[1],Xe()):[Qr,He]},Je.angle=function(lr){return arguments.length?(qe=lr%360*u.uR,nr=(0,u.O$)(qe),je=(0,u.mC)(qe),Xe()):qe*u.RW},Je.reflectX=function(lr){return arguments.length?(wr=lr?-1:1,Xe()):wr<0},Je.reflectY=function(lr){return arguments.length?(Me=lr?-1:1,Xe()):Me<0},Je.fitExtent=function(lr,ur){return(0,ce.qg)(Je,lr,ur)},Je.fitSize=function(lr,ur){return(0,ce.mF)(Je,lr,ur)},Je.fitWidth=function(lr,ur){return(0,ce.V6)(Je,lr,ur)},Je.fitHeight=function(lr,ur){return(0,ce.rf)(Je,lr,ur)},Je}var Sr=o(26867),Xr=o(57962),en=o(25382);function sn(je,nr){var hr=(0,u.mC)(nr),gr=1+(0,u.mC)(je)*hr;return[hr*(0,u.O$)(je)/gr,(0,u.O$)(nr)/gr]}function tn(){return(0,ee.Z)(sn).scale(250).clipAngle(142)}function qr(je,nr){return[(0,u.cM)((0,u.OR)((u.ou+nr)/2)),-je]}function vn(){var je=Ue(qr),nr=je.center,hr=je.rotate;return je.center=function(gr){return arguments.length?nr([-gr[1],gr[0]]):[(gr=nr())[1],-gr[0]]},je.rotate=function(gr){return arguments.length?hr([gr[0],gr[1],gr.length>2?gr[2]+90:90]):[(gr=hr())[0],gr[1],gr[2]-90]},hr([0,0,90]).scale(159.155)}sn.invert=(0,en.O)(function(je){return 2*(0,u.z4)(je)}),qr.invert=function(je,nr){return[-nr,2*(0,u.z4)((0,u.Qq)(je))-u.ou]}},83074:function(W,I,o){o.d(I,{Z:function(){return k}});var T=o(39695);function k(r,m){var h=r[0]*T.uR,s=r[1]*T.uR,e=m[0]*T.uR,t=m[1]*T.uR,n=(0,T.mC)(s),a=(0,T.O$)(s),i=(0,T.mC)(t),c=(0,T.O$)(t),l=n*(0,T.mC)(h),u=n*(0,T.O$)(h),f=i*(0,T.mC)(e),d=i*(0,T.O$)(e),w=2*(0,T.ZR)((0,T._b)((0,T.Jy)(t-s)+n*i*(0,T.Jy)(e-h))),v=(0,T.O$)(w),p=w?function(y){var b=(0,T.O$)(y*=w)/v,x=(0,T.O$)(w-y)/v,_=x*l+b*f,g=x*u+b*d,A=x*a+b*c;return[(0,T.fv)(g,_)*T.RW,(0,T.fv)(A,(0,T._b)(_*_+g*g))*T.RW]}:function(){return[h*T.RW,s*T.RW]};return p.distance=w,p}},39695:function(W,I,o){o.d(I,{BZ:function(){return s},Ho:function(){return T},Jy:function(){return _},Kh:function(){return b},O$:function(){return w},OR:function(){return y},Qq:function(){return u},RW:function(){return e},Wn:function(){return n},Xx:function(){return v},ZR:function(){return x},_b:function(){return p},aW:function(){return k},cM:function(){return f},fv:function(){return i},mC:function(){return c},mD:function(){return l},ou:function(){return m},pi:function(){return r},pu:function(){return h},sQ:function(){return d},uR:function(){return t},z4:function(){return a}});var T=1e-6,k=1e-12,r=Math.PI,m=r/2,h=r/4,s=2*r,e=180/r,t=r/180,n=Math.abs,a=Math.atan,i=Math.atan2,c=Math.cos,l=Math.ceil,u=Math.exp,f=Math.log,d=Math.pow,w=Math.sin,v=Math.sign||function(g){return g>0?1:g<0?-1:0},p=Math.sqrt,y=Math.tan;function b(g){return g>1?0:g<-1?r:Math.acos(g)}function x(g){return g>1?m:g<-1?-m:Math.asin(g)}function _(g){return(g=w(g/2))*g}},73182:function(W,I,o){function T(){}o.d(I,{Z:function(){return T}})},3559:function(W,I,o){var T=o(73182),k=1/0,r=k,m=-k,h=m,s={point:function(e,t){e<k&&(k=e),e>m&&(m=e),t<r&&(r=t),t>h&&(h=t)},lineStart:T.Z,lineEnd:T.Z,polygonStart:T.Z,polygonEnd:T.Z,result:function(){var e=[[k,r],[m,h]];return m=h=-(r=k=1/0),e}};I.Z=s},67108:function(W,I,o){o.d(I,{Z:function(){return k}});var T=o(39695);function k(r,m){return(0,T.Wn)(r[0]-m[0])<T.Ho&&(0,T.Wn)(r[1]-m[1])<T.Ho}},23071:function(W,I,o){o.d(I,{Z:function(){return s}});var T=o(33940),k=o(7620),r=o(39695),m=(0,T.Z)();function h(e){return(0,r.Wn)(e[0])<=r.pi?e[0]:(0,r.Xx)(e[0])*(((0,r.Wn)(e[0])+r.pi)%r.BZ-r.pi)}function s(e,t){var n=h(t),a=t[1],i=(0,r.O$)(a),c=[(0,r.O$)(n),-(0,r.mC)(n),0],l=0,u=0;m.reset(),i===1?a=r.ou+r.Ho:i===-1&&(a=-r.ou-r.Ho);for(var f=0,d=e.length;f<d;++f)if(v=(w=e[f]).length)for(var w,v,p=w[v-1],y=h(p),b=p[1]/2+r.pu,x=(0,r.O$)(b),_=(0,r.mC)(b),g=0;g<v;++g,y=M,x=E,_=S,p=A){var A=w[g],M=h(A),L=A[1]/2+r.pu,E=(0,r.O$)(L),S=(0,r.mC)(L),O=M-y,P=O>=0?1:-1,U=P*O,R=U>r.pi,j=x*E;if(m.add((0,r.fv)(j*P*(0,r.O$)(U),_*S+j*(0,r.mC)(U))),l+=R?O+P*r.BZ:O,R^y>=n^M>=n){var B=(0,k.T5)((0,k.Og)(p),(0,k.Og)(A));(0,k.iJ)(B);var z=(0,k.T5)(c,B);(0,k.iJ)(z);var G=(R^O>=0?-1:1)*(0,r.ZR)(z[2]);(a>G||a===G&&(B[0]||B[1]))&&(u+=R^O>=0?1:-1)}}return(l<-r.Ho||l<r.Ho&&m<-r.Ho)^1&u}},25382:function(W,I,o){o.d(I,{O:function(){return r},W:function(){return k}});var T=o(39695);function k(m){return function(h,s){var e=(0,T.mC)(h),t=(0,T.mC)(s),n=m(e*t);return[n*t*(0,T.O$)(h),n*(0,T.O$)(s)]}}function r(m){return function(h,s){var e=(0,T._b)(h*h+s*s),t=m(e),n=(0,T.O$)(t),a=(0,T.mC)(t);return[(0,T.fv)(h*n,e*a),(0,T.ZR)(e&&s*n/e)]}}},12956:function(W,I,o){o.d(I,{Z:function(){return h},l:function(){return m}});var T=o(39695),k=o(25382),r=o(15002),m=(0,k.W)(function(s){return(0,T._b)(2/(1+s))});function h(){return(0,r.Z)(m).scale(124.75).clipAngle(179.999)}m.invert=(0,k.O)(function(s){return 2*(0,T.ZR)(s/2)})},17889:function(W,I,o){o.d(I,{N:function(){return m},Z:function(){return h}});var T=o(39695),k=o(25382),r=o(15002),m=(0,k.W)(function(s){return(s=(0,T.Kh)(s))&&s/(0,T.O$)(s)});function h(){return(0,r.Z)(m).scale(79.4188).clipAngle(179.999)}m.invert=(0,k.O)(function(s){return s})},97492:function(W,I,o){o.d(I,{Z:function(){return r},k:function(){return k}});var T=o(15002);function k(m,h){return[m,h]}function r(){return(0,T.Z)(k).scale(152.63)}k.invert=k},47589:function(W,I,o){o.d(I,{V6:function(){return s},mF:function(){return h},qg:function(){return m},rf:function(){return e}});var T=o(72736),k=o(3559);function r(t,n,a){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),(0,T.Z)(a,t.stream(k.Z)),n(k.Z.result()),i!=null&&t.clipExtent(i),t}function m(t,n,a){return r(t,function(i){var c=n[1][0]-n[0][0],l=n[1][1]-n[0][1],u=Math.min(c/(i[1][0]-i[0][0]),l/(i[1][1]-i[0][1])),f=+n[0][0]+(c-u*(i[1][0]+i[0][0]))/2,d=+n[0][1]+(l-u*(i[1][1]+i[0][1]))/2;t.scale(150*u).translate([f,d])},a)}function h(t,n,a){return m(t,[[0,0],n],a)}function s(t,n,a){return r(t,function(i){var c=+n,l=c/(i[1][0]-i[0][0]),u=(c-l*(i[1][0]+i[0][0]))/2,f=-l*i[0][1];t.scale(150*l).translate([u,f])},a)}function e(t,n,a){return r(t,function(i){var c=+n,l=c/(i[1][1]-i[0][1]),u=-l*i[0][0],f=(c-l*(i[1][1]+i[0][1]))/2;t.scale(150*l).translate([u,f])},a)}},98936:function(W,I,o){o.d(I,{M:function(){return m},Z:function(){return h}});var T=o(39695),k=o(25382),r=o(15002);function m(s,e){var t=(0,T.mC)(e),n=(0,T.mC)(s)*t;return[t*(0,T.O$)(s)/n,(0,T.O$)(e)/n]}function h(){return(0,r.Z)(m).scale(144.049).clipAngle(60)}m.invert=(0,k.O)(T.z4)},15002:function(W,I,o){o.d(I,{Z:function(){return w},r:function(){return v}});var T=o(87070),k=o(1457),r=o(87605),m=o(96059),h=o(8593),s=o(39695),e=o(49386),t=o(64684),n=o(47589),a=o(7620),i=16,c=(0,s.mC)(30*s.uR);function l(p,y){return+y?function(b,x){function _(g,A,M,L,E,S,O,P,U,R,j,B,z,G){var V=O-g,et=P-A,J=V*V+et*et;if(J>4*x&&z--){var X=L+R,Y=E+j,Z=S+B,tt=(0,s._b)(X*X+Y*Y+Z*Z),rt=(0,s.ZR)(Z/=tt),nt=(0,s.Wn)((0,s.Wn)(Z)-1)<s.Ho||(0,s.Wn)(M-U)<s.Ho?(M+U)/2:(0,s.fv)(Y,X),ot=b(nt,rt),ct=ot[0],pt=ot[1],gt=ct-g,kt=pt-A,yt=et*gt-V*kt;(yt*yt/J>x||(0,s.Wn)((V*gt+et*kt)/J-.5)>.3||L*R+E*j+S*B<c)&&(_(g,A,M,L,E,S,ct,pt,nt,X/=tt,Y/=tt,Z,z,G),G.point(ct,pt),_(ct,pt,nt,X,Y,Z,O,P,U,R,j,B,z,G))}}return function(g){var A,M,L,E,S,O,P,U,R,j,B,z,G={point:V,lineStart:et,lineEnd:X,polygonStart:function(){g.polygonStart(),G.lineStart=Y},polygonEnd:function(){g.polygonEnd(),G.lineStart=et}};function V(rt,nt){rt=b(rt,nt),g.point(rt[0],rt[1])}function et(){U=NaN,G.point=J,g.lineStart()}function J(rt,nt){var ot=(0,a.Og)([rt,nt]),ct=b(rt,nt);_(U,R,P,j,B,z,U=ct[0],R=ct[1],P=rt,j=ot[0],B=ot[1],z=ot[2],i,g),g.point(U,R)}function X(){G.point=V,g.lineEnd()}function Y(){et(),G.point=Z,G.lineEnd=tt}function Z(rt,nt){J(A=rt,nt),M=U,L=R,E=j,S=B,O=z,G.point=J}function tt(){_(U,R,P,j,B,z,M,L,A,E,S,O,i,g),G.lineEnd=X,X()}return G}}(p,y):function(b){return(0,t.l)({point:function(x,_){x=b(x,_),this.stream.point(x[0],x[1])}})}(p)}var u=(0,t.l)({point:function(p,y){this.stream.point(p*s.uR,y*s.uR)}});function f(p,y,b,x,_){function g(A,M){return[y+p*(A*=x),b-p*(M*=_)]}return g.invert=function(A,M){return[(A-y)/p*x,(b-M)/p*_]},g}function d(p,y,b,x,_,g){var A=(0,s.mC)(g),M=(0,s.O$)(g),L=A*p,E=M*p,S=A/p,O=M/p,P=(M*b-A*y)/p,U=(M*y+A*b)/p;function R(j,B){return[L*(j*=x)-E*(B*=_)+y,b-E*j-L*B]}return R.invert=function(j,B){return[x*(S*j-O*B+P),_*(U-O*j-S*B)]},R}function w(p){return v(function(){return p})()}function v(p){var y,b,x,_,g,A,M,L,E,S,O=150,P=480,U=250,R=0,j=0,B=0,z=0,G=0,V=0,et=1,J=1,X=null,Y=T.Z,Z=null,tt=h.Z,rt=.5;function nt(gt){return L(gt[0]*s.uR,gt[1]*s.uR)}function ot(gt){return(gt=L.invert(gt[0],gt[1]))&&[gt[0]*s.RW,gt[1]*s.RW]}function ct(){var gt=d(O,0,0,et,J,V).apply(null,y(R,j)),kt=(V?d:f)(O,P-gt[0],U-gt[1],et,J,V);return b=(0,e.I)(B,z,G),M=(0,m.Z)(y,kt),L=(0,m.Z)(b,M),A=l(M,rt),pt()}function pt(){return E=S=null,nt}return nt.stream=function(gt){return E&&S===gt?E:E=u(function(kt){return(0,t.l)({point:function(yt,mt){var Ot=kt(yt,mt);return this.stream.point(Ot[0],Ot[1])}})}(b)(Y(A(tt(S=gt)))))},nt.preclip=function(gt){return arguments.length?(Y=gt,X=void 0,pt()):Y},nt.postclip=function(gt){return arguments.length?(tt=gt,Z=x=_=g=null,pt()):tt},nt.clipAngle=function(gt){return arguments.length?(Y=+gt?(0,k.Z)(X=gt*s.uR):(X=null,T.Z),pt()):X*s.RW},nt.clipExtent=function(gt){return arguments.length?(tt=gt==null?(Z=x=_=g=null,h.Z):(0,r.Z)(Z=+gt[0][0],x=+gt[0][1],_=+gt[1][0],g=+gt[1][1]),pt()):Z==null?null:[[Z,x],[_,g]]},nt.scale=function(gt){return arguments.length?(O=+gt,ct()):O},nt.translate=function(gt){return arguments.length?(P=+gt[0],U=+gt[1],ct()):[P,U]},nt.center=function(gt){return arguments.length?(R=gt[0]%360*s.uR,j=gt[1]%360*s.uR,ct()):[R*s.RW,j*s.RW]},nt.rotate=function(gt){return arguments.length?(B=gt[0]%360*s.uR,z=gt[1]%360*s.uR,G=gt.length>2?gt[2]%360*s.uR:0,ct()):[B*s.RW,z*s.RW,G*s.RW]},nt.angle=function(gt){return arguments.length?(V=gt%360*s.uR,ct()):V*s.RW},nt.reflectX=function(gt){return arguments.length?(et=gt?-1:1,ct()):et<0},nt.reflectY=function(gt){return arguments.length?(J=gt?-1:1,ct()):J<0},nt.precision=function(gt){return arguments.length?(A=l(M,rt=gt*gt),pt()):(0,s._b)(rt)},nt.fitExtent=function(gt,kt){return(0,n.qg)(nt,gt,kt)},nt.fitSize=function(gt,kt){return(0,n.mF)(nt,gt,kt)},nt.fitWidth=function(gt,kt){return(0,n.V6)(nt,gt,kt)},nt.fitHeight=function(gt,kt){return(0,n.rf)(nt,gt,kt)},function(){return y=p.apply(this,arguments),nt.invert=y.invert&&ot,ct()}}},26867:function(W,I,o){o.d(I,{K:function(){return r},Z:function(){return m}});var T=o(15002),k=o(39695);function r(h,s){var e=s*s,t=e*e;return[h*(.8707-.131979*e+t*(t*(.003971*e-.001529*t)-.013791)),s*(1.007226+e*(.015085+t*(.028874*e-.044475-.005916*t)))]}function m(){return(0,T.Z)(r).scale(175.295)}r.invert=function(h,s){var e,t=s,n=25;do{var a=t*t,i=a*a;t-=e=(t*(1.007226+a*(.015085+i*(.028874*a-.044475-.005916*i)))-s)/(1.007226+a*(.045255+i*(.259866*a-.311325-.06507600000000001*i)))}while((0,k.Wn)(e)>k.Ho&&--n>0);return[h/(.8707+(a=t*t)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),t]}},57962:function(W,I,o){o.d(I,{I:function(){return m},Z:function(){return h}});var T=o(39695),k=o(25382),r=o(15002);function m(s,e){return[(0,T.mC)(e)*(0,T.O$)(s),(0,T.O$)(e)]}function h(){return(0,r.Z)(m).scale(249.5).clipAngle(90+T.Ho)}m.invert=(0,k.O)(T.ZR)},49386:function(W,I,o){o.d(I,{I:function(){return m},Z:function(){return t}});var T=o(96059),k=o(39695);function r(n,a){return[(0,k.Wn)(n)>k.pi?n+Math.round(-n/k.BZ)*k.BZ:n,a]}function m(n,a,i){return(n%=k.BZ)?a||i?(0,T.Z)(s(n),e(a,i)):s(n):a||i?e(a,i):r}function h(n){return function(a,i){return[(a+=n)>k.pi?a-k.BZ:a<-k.pi?a+k.BZ:a,i]}}function s(n){var a=h(n);return a.invert=h(-n),a}function e(n,a){var i=(0,k.mC)(n),c=(0,k.O$)(n),l=(0,k.mC)(a),u=(0,k.O$)(a);function f(d,w){var v=(0,k.mC)(w),p=(0,k.mC)(d)*v,y=(0,k.O$)(d)*v,b=(0,k.O$)(w),x=b*i+p*c;return[(0,k.fv)(y*l-x*u,p*i-b*c),(0,k.ZR)(x*l+y*u)]}return f.invert=function(d,w){var v=(0,k.mC)(w),p=(0,k.mC)(d)*v,y=(0,k.O$)(d)*v,b=(0,k.O$)(w),x=b*l-y*u;return[(0,k.fv)(y*l+b*u,p*i+x*c),(0,k.ZR)(x*i-p*c)]},f}function t(n){function a(i){return(i=n(i[0]*k.uR,i[1]*k.uR))[0]*=k.RW,i[1]*=k.RW,i}return n=m(n[0]*k.uR,n[1]*k.uR,n.length>2?n[2]*k.uR:0),a.invert=function(i){return(i=n.invert(i[0]*k.uR,i[1]*k.uR))[0]*=k.RW,i[1]*=k.RW,i},a}r.invert=r},72736:function(W,I,o){function T(e,t){e&&r.hasOwnProperty(e.type)&&r[e.type](e,t)}o.d(I,{Z:function(){return s}});var k={Feature:function(e,t){T(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,a=-1,i=n.length;++a<i;)T(n[a].geometry,t)}},r={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)e=n[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){m(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)m(n[a],t,0)},Polygon:function(e,t){h(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)h(n[a],t)},GeometryCollection:function(e,t){for(var n=e.geometries,a=-1,i=n.length;++a<i;)T(n[a],t)}};function m(e,t,n){var a,i=-1,c=e.length-n;for(t.lineStart();++i<c;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function h(e,t){var n=-1,a=e.length;for(t.polygonStart();++n<a;)m(e[n],t,1);t.polygonEnd()}function s(e,t){e&&k.hasOwnProperty(e.type)?k[e.type](e,t):T(e,t)}},64684:function(W,I,o){function T(m){return{stream:k(m)}}function k(m){return function(h){var s=new r;for(var e in m)s[e]=m[e];return s.stream=h,s}}function r(){}o.d(I,{Z:function(){return T},l:function(){return k}}),r.prototype={constructor:r,point:function(m,h){this.stream.point(m,h)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(W,I,o){function T(at,ht){return at.parent===ht.parent?1:2}function k(at,ht){return at+ht.x}function r(at,ht){return Math.max(at,ht.y)}function m(){var at=T,ht=1,Lt=1,Mt=!1;function _t(St){var Dt,ut=0;St.eachAfter(function(Ft){var $t=Ft.children;$t?(Ft.x=function(Wt){return Wt.reduce(k,0)/Wt.length}($t),Ft.y=function(Wt){return 1+Wt.reduce(r,0)}($t)):(Ft.x=Dt?ut+=at(Ft,Dt):0,Ft.y=0,Dt=Ft)});var Tt=function(Ft){for(var $t;$t=Ft.children;)Ft=$t[0];return Ft}(St),bt=function(Ft){for(var $t;$t=Ft.children;)Ft=$t[$t.length-1];return Ft}(St),It=Tt.x-at(Tt,bt)/2,zt=bt.x+at(bt,Tt)/2;return St.eachAfter(Mt?function(Ft){Ft.x=(Ft.x-St.x)*ht,Ft.y=(St.y-Ft.y)*Lt}:function(Ft){Ft.x=(Ft.x-It)/(zt-It)*ht,Ft.y=(1-(St.y?Ft.y/St.y:1))*Lt})}return _t.separation=function(St){return arguments.length?(at=St,_t):at},_t.size=function(St){return arguments.length?(Mt=!1,ht=+St[0],Lt=+St[1],_t):Mt?null:[ht,Lt]},_t.nodeSize=function(St){return arguments.length?(Mt=!0,ht=+St[0],Lt=+St[1],_t):Mt?[ht,Lt]:null},_t}function h(at){var ht=0,Lt=at.children,Mt=Lt&&Lt.length;if(Mt)for(;--Mt>=0;)ht+=Lt[Mt].value;else ht=1;at.value=ht}function s(at,ht){var Lt,Mt,_t,St,Dt,ut=new a(at),Tt=+at.value&&(ut.value=at.value),bt=[ut];for(ht==null&&(ht=e);Lt=bt.pop();)if(Tt&&(Lt.value=+Lt.data.value),(_t=ht(Lt.data))&&(Dt=_t.length))for(Lt.children=new Array(Dt),St=Dt-1;St>=0;--St)bt.push(Mt=Lt.children[St]=new a(_t[St])),Mt.parent=Lt,Mt.depth=Lt.depth+1;return ut.eachBefore(n)}function e(at){return at.children}function t(at){at.data=at.data.data}function n(at){var ht=0;do at.height=ht;while((at=at.parent)&&at.height<++ht)}function a(at){this.data=at,this.depth=this.height=0,this.parent=null}o.r(I),o.d(I,{cluster:function(){return m},hierarchy:function(){return s},pack:function(){return O},packEnclose:function(){return c},packSiblings:function(){return A},partition:function(){return z},stratify:function(){return Y},tree:function(){return pt},treemap:function(){return Ot},treemapBinary:function(){return vt},treemapDice:function(){return B},treemapResquarify:function(){return st},treemapSlice:function(){return gt},treemapSliceDice:function(){return xt},treemapSquarify:function(){return mt}}),a.prototype=s.prototype={constructor:a,count:function(){return this.eachAfter(h)},each:function(at){var ht,Lt,Mt,_t,St=this,Dt=[St];do for(ht=Dt.reverse(),Dt=[];St=ht.pop();)if(at(St),Lt=St.children)for(Mt=0,_t=Lt.length;Mt<_t;++Mt)Dt.push(Lt[Mt]);while(Dt.length);return this},eachAfter:function(at){for(var ht,Lt,Mt,_t=this,St=[_t],Dt=[];_t=St.pop();)if(Dt.push(_t),ht=_t.children)for(Lt=0,Mt=ht.length;Lt<Mt;++Lt)St.push(ht[Lt]);for(;_t=Dt.pop();)at(_t);return this},eachBefore:function(at){for(var ht,Lt,Mt=this,_t=[Mt];Mt=_t.pop();)if(at(Mt),ht=Mt.children)for(Lt=ht.length-1;Lt>=0;--Lt)_t.push(ht[Lt]);return this},sum:function(at){return this.eachAfter(function(ht){for(var Lt=+at(ht.data)||0,Mt=ht.children,_t=Mt&&Mt.length;--_t>=0;)Lt+=Mt[_t].value;ht.value=Lt})},sort:function(at){return this.eachBefore(function(ht){ht.children&&ht.children.sort(at)})},path:function(at){for(var ht=this,Lt=function(St,Dt){if(St===Dt)return St;var ut=St.ancestors(),Tt=Dt.ancestors(),bt=null;for(St=ut.pop(),Dt=Tt.pop();St===Dt;)bt=St,St=ut.pop(),Dt=Tt.pop();return bt}(ht,at),Mt=[ht];ht!==Lt;)ht=ht.parent,Mt.push(ht);for(var _t=Mt.length;at!==Lt;)Mt.splice(_t,0,at),at=at.parent;return Mt},ancestors:function(){for(var at=this,ht=[at];at=at.parent;)ht.push(at);return ht},descendants:function(){var at=[];return this.each(function(ht){at.push(ht)}),at},leaves:function(){var at=[];return this.eachBefore(function(ht){ht.children||at.push(ht)}),at},links:function(){var at=this,ht=[];return at.each(function(Lt){Lt!==at&&ht.push({source:Lt.parent,target:Lt})}),ht},copy:function(){return s(this).eachBefore(t)}};var i=Array.prototype.slice;function c(at){for(var ht,Lt,Mt=0,_t=(at=function(Dt){for(var ut,Tt,bt=Dt.length;bt;)Tt=Math.random()*bt--|0,ut=Dt[bt],Dt[bt]=Dt[Tt],Dt[Tt]=ut;return Dt}(i.call(at))).length,St=[];Mt<_t;)ht=at[Mt],Lt&&f(Lt,ht)?++Mt:(Lt=w(St=l(St,ht)),Mt=0);return Lt}function l(at,ht){var Lt,Mt;if(d(ht,at))return[ht];for(Lt=0;Lt<at.length;++Lt)if(u(ht,at[Lt])&&d(v(at[Lt],ht),at))return[at[Lt],ht];for(Lt=0;Lt<at.length-1;++Lt)for(Mt=Lt+1;Mt<at.length;++Mt)if(u(v(at[Lt],at[Mt]),ht)&&u(v(at[Lt],ht),at[Mt])&&u(v(at[Mt],ht),at[Lt])&&d(p(at[Lt],at[Mt],ht),at))return[at[Lt],at[Mt],ht];throw new Error}function u(at,ht){var Lt=at.r-ht.r,Mt=ht.x-at.x,_t=ht.y-at.y;return Lt<0||Lt*Lt<Mt*Mt+_t*_t}function f(at,ht){var Lt=at.r-ht.r+1e-6,Mt=ht.x-at.x,_t=ht.y-at.y;return Lt>0&&Lt*Lt>Mt*Mt+_t*_t}function d(at,ht){for(var Lt=0;Lt<ht.length;++Lt)if(!f(at,ht[Lt]))return!1;return!0}function w(at){switch(at.length){case 1:return{x:(ht=at[0]).x,y:ht.y,r:ht.r};case 2:return v(at[0],at[1]);case 3:return p(at[0],at[1],at[2])}var ht}function v(at,ht){var Lt=at.x,Mt=at.y,_t=at.r,St=ht.x,Dt=ht.y,ut=ht.r,Tt=St-Lt,bt=Dt-Mt,It=ut-_t,zt=Math.sqrt(Tt*Tt+bt*bt);return{x:(Lt+St+Tt/zt*It)/2,y:(Mt+Dt+bt/zt*It)/2,r:(zt+_t+ut)/2}}function p(at,ht,Lt){var Mt=at.x,_t=at.y,St=at.r,Dt=ht.x,ut=ht.y,Tt=ht.r,bt=Lt.x,It=Lt.y,zt=Lt.r,Ft=Mt-Dt,$t=Mt-bt,Wt=_t-ut,Xt=_t-It,ae=Tt-St,Qt=zt-St,de=Mt*Mt+_t*_t-St*St,ye=de-Dt*Dt-ut*ut+Tt*Tt,ve=de-bt*bt-It*It+zt*zt,ie=$t*Wt-Ft*Xt,se=(Wt*ve-Xt*ye)/(2*ie)-Mt,ke=(Xt*ae-Wt*Qt)/ie,Ae=($t*ye-Ft*ve)/(2*ie)-_t,Ie=(Ft*Qt-$t*ae)/ie,Te=ke*ke+Ie*Ie-1,Vt=2*(St+se*ke+Ae*Ie),Zt=se*se+Ae*Ae-St*St,Gt=-(Te?(Vt+Math.sqrt(Vt*Vt-4*Te*Zt))/(2*Te):Zt/Vt);return{x:Mt+se+ke*Gt,y:_t+Ae+Ie*Gt,r:Gt}}function y(at,ht,Lt){var Mt,_t,St,Dt,ut=at.x-ht.x,Tt=at.y-ht.y,bt=ut*ut+Tt*Tt;bt?(_t=ht.r+Lt.r,_t*=_t,Dt=at.r+Lt.r,_t>(Dt*=Dt)?(Mt=(bt+Dt-_t)/(2*bt),St=Math.sqrt(Math.max(0,Dt/bt-Mt*Mt)),Lt.x=at.x-Mt*ut-St*Tt,Lt.y=at.y-Mt*Tt+St*ut):(Mt=(bt+_t-Dt)/(2*bt),St=Math.sqrt(Math.max(0,_t/bt-Mt*Mt)),Lt.x=ht.x+Mt*ut-St*Tt,Lt.y=ht.y+Mt*Tt+St*ut)):(Lt.x=ht.x+Lt.r,Lt.y=ht.y)}function b(at,ht){var Lt=at.r+ht.r-1e-6,Mt=ht.x-at.x,_t=ht.y-at.y;return Lt>0&&Lt*Lt>Mt*Mt+_t*_t}function x(at){var ht=at._,Lt=at.next._,Mt=ht.r+Lt.r,_t=(ht.x*Lt.r+Lt.x*ht.r)/Mt,St=(ht.y*Lt.r+Lt.y*ht.r)/Mt;return _t*_t+St*St}function _(at){this._=at,this.next=null,this.previous=null}function g(at){if(!(_t=at.length))return 0;var ht,Lt,Mt,_t,St,Dt,ut,Tt,bt,It,zt;if((ht=at[0]).x=0,ht.y=0,!(_t>1))return ht.r;if(Lt=at[1],ht.x=-Lt.r,Lt.x=ht.r,Lt.y=0,!(_t>2))return ht.r+Lt.r;y(Lt,ht,Mt=at[2]),ht=new _(ht),Lt=new _(Lt),Mt=new _(Mt),ht.next=Mt.previous=Lt,Lt.next=ht.previous=Mt,Mt.next=Lt.previous=ht;t:for(ut=3;ut<_t;++ut){y(ht._,Lt._,Mt=at[ut]),Mt=new _(Mt),Tt=Lt.next,bt=ht.previous,It=Lt._.r,zt=ht._.r;do if(It<=zt){if(b(Tt._,Mt._)){Lt=Tt,ht.next=Lt,Lt.previous=ht,--ut;continue t}It+=Tt._.r,Tt=Tt.next}else{if(b(bt._,Mt._)){(ht=bt).next=Lt,Lt.previous=ht,--ut;continue t}zt+=bt._.r,bt=bt.previous}while(Tt!==bt.next);for(Mt.previous=ht,Mt.next=Lt,ht.next=Lt.previous=Lt=Mt,St=x(ht);(Mt=Mt.next)!==Lt;)(Dt=x(Mt))<St&&(ht=Mt,St=Dt);Lt=ht.next}for(ht=[Lt._],Mt=Lt;(Mt=Mt.next)!==Lt;)ht.push(Mt._);for(Mt=c(ht),ut=0;ut<_t;++ut)(ht=at[ut]).x-=Mt.x,ht.y-=Mt.y;return Mt.r}function A(at){return g(at),at}function M(at){if(typeof at!="function")throw new Error;return at}function L(){return 0}function E(at){return function(){return at}}function S(at){return Math.sqrt(at.value)}function O(){var at=null,ht=1,Lt=1,Mt=L;function _t(St){return St.x=ht/2,St.y=Lt/2,at?St.eachBefore(P(at)).eachAfter(U(Mt,.5)).eachBefore(R(1)):St.eachBefore(P(S)).eachAfter(U(L,1)).eachAfter(U(Mt,St.r/Math.min(ht,Lt))).eachBefore(R(Math.min(ht,Lt)/(2*St.r))),St}return _t.radius=function(St){return arguments.length?(at=(Dt=St)==null?null:M(Dt),_t):at;var Dt},_t.size=function(St){return arguments.length?(ht=+St[0],Lt=+St[1],_t):[ht,Lt]},_t.padding=function(St){return arguments.length?(Mt=typeof St=="function"?St:E(+St),_t):Mt},_t}function P(at){return function(ht){ht.children||(ht.r=Math.max(0,+at(ht)||0))}}function U(at,ht){return function(Lt){if(Mt=Lt.children){var Mt,_t,St,Dt=Mt.length,ut=at(Lt)*ht||0;if(ut)for(_t=0;_t<Dt;++_t)Mt[_t].r+=ut;if(St=g(Mt),ut)for(_t=0;_t<Dt;++_t)Mt[_t].r-=ut;Lt.r=St+ut}}}function R(at){return function(ht){var Lt=ht.parent;ht.r*=at,Lt&&(ht.x=Lt.x+at*ht.x,ht.y=Lt.y+at*ht.y)}}function j(at){at.x0=Math.round(at.x0),at.y0=Math.round(at.y0),at.x1=Math.round(at.x1),at.y1=Math.round(at.y1)}function B(at,ht,Lt,Mt,_t){for(var St,Dt=at.children,ut=-1,Tt=Dt.length,bt=at.value&&(Mt-ht)/at.value;++ut<Tt;)(St=Dt[ut]).y0=Lt,St.y1=_t,St.x0=ht,St.x1=ht+=St.value*bt}function z(){var at=1,ht=1,Lt=0,Mt=!1;function _t(St){var Dt=St.height+1;return St.x0=St.y0=Lt,St.x1=at,St.y1=ht/Dt,St.eachBefore(function(ut,Tt){return function(bt){bt.children&&B(bt,bt.x0,ut*(bt.depth+1)/Tt,bt.x1,ut*(bt.depth+2)/Tt);var It=bt.x0,zt=bt.y0,Ft=bt.x1-Lt,$t=bt.y1-Lt;Ft<It&&(It=Ft=(It+Ft)/2),$t<zt&&(zt=$t=(zt+$t)/2),bt.x0=It,bt.y0=zt,bt.x1=Ft,bt.y1=$t}}(ht,Dt)),Mt&&St.eachBefore(j),St}return _t.round=function(St){return arguments.length?(Mt=!!St,_t):Mt},_t.size=function(St){return arguments.length?(at=+St[0],ht=+St[1],_t):[at,ht]},_t.padding=function(St){return arguments.length?(Lt=+St,_t):Lt},_t}var G="$",V={depth:-1},et={};function J(at){return at.id}function X(at){return at.parentId}function Y(){var at=J,ht=X;function Lt(Mt){var _t,St,Dt,ut,Tt,bt,It,zt=Mt.length,Ft=new Array(zt),$t={};for(St=0;St<zt;++St)_t=Mt[St],Tt=Ft[St]=new a(_t),(bt=at(_t,St,Mt))!=null&&(bt+="")&&($t[It=G+(Tt.id=bt)]=It in $t?et:Tt);for(St=0;St<zt;++St)if(Tt=Ft[St],(bt=ht(Mt[St],St,Mt))!=null&&(bt+="")){if(!(ut=$t[G+bt]))throw new Error("missing: "+bt);if(ut===et)throw new Error("ambiguous: "+bt);ut.children?ut.children.push(Tt):ut.children=[Tt],Tt.parent=ut}else{if(Dt)throw new Error("multiple roots");Dt=Tt}if(!Dt)throw new Error("no root");if(Dt.parent=V,Dt.eachBefore(function(Wt){Wt.depth=Wt.parent.depth+1,--zt}).eachBefore(n),Dt.parent=null,zt>0)throw new Error("cycle");return Dt}return Lt.id=function(Mt){return arguments.length?(at=M(Mt),Lt):at},Lt.parentId=function(Mt){return arguments.length?(ht=M(Mt),Lt):ht},Lt}function Z(at,ht){return at.parent===ht.parent?1:2}function tt(at){var ht=at.children;return ht?ht[0]:at.t}function rt(at){var ht=at.children;return ht?ht[ht.length-1]:at.t}function nt(at,ht,Lt){var Mt=Lt/(ht.i-at.i);ht.c-=Mt,ht.s+=Lt,at.c+=Mt,ht.z+=Lt,ht.m+=Lt}function ot(at,ht,Lt){return at.a.parent===ht.parent?at.a:Lt}function ct(at,ht){this._=at,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ht}function pt(){var at=Z,ht=1,Lt=1,Mt=null;function _t(Tt){var bt=function(Qt){for(var de,ye,ve,ie,se,ke=new ct(Qt,0),Ae=[ke];de=Ae.pop();)if(ve=de._.children)for(de.children=new Array(se=ve.length),ie=se-1;ie>=0;--ie)Ae.push(ye=de.children[ie]=new ct(ve[ie],ie)),ye.parent=de;return(ke.parent=new ct(null,0)).children=[ke],ke}(Tt);if(bt.eachAfter(St),bt.parent.m=-bt.z,bt.eachBefore(Dt),Mt)Tt.eachBefore(ut);else{var It=Tt,zt=Tt,Ft=Tt;Tt.eachBefore(function(Qt){Qt.x<It.x&&(It=Qt),Qt.x>zt.x&&(zt=Qt),Qt.depth>Ft.depth&&(Ft=Qt)});var $t=It===zt?1:at(It,zt)/2,Wt=$t-It.x,Xt=ht/(zt.x+$t+Wt),ae=Lt/(Ft.depth||1);Tt.eachBefore(function(Qt){Qt.x=(Qt.x+Wt)*Xt,Qt.y=Qt.depth*ae})}return Tt}function St(Tt){var bt=Tt.children,It=Tt.parent.children,zt=Tt.i?It[Tt.i-1]:null;if(bt){(function($t){for(var Wt,Xt=0,ae=0,Qt=$t.children,de=Qt.length;--de>=0;)(Wt=Qt[de]).z+=Xt,Wt.m+=Xt,Xt+=Wt.s+(ae+=Wt.c)})(Tt);var Ft=(bt[0].z+bt[bt.length-1].z)/2;zt?(Tt.z=zt.z+at(Tt._,zt._),Tt.m=Tt.z-Ft):Tt.z=Ft}else zt&&(Tt.z=zt.z+at(Tt._,zt._));Tt.parent.A=function($t,Wt,Xt){if(Wt){for(var ae,Qt=$t,de=$t,ye=Wt,ve=Qt.parent.children[0],ie=Qt.m,se=de.m,ke=ye.m,Ae=ve.m;ye=rt(ye),Qt=tt(Qt),ye&&Qt;)ve=tt(ve),(de=rt(de)).a=$t,(ae=ye.z+ke-Qt.z-ie+at(ye._,Qt._))>0&&(nt(ot(ye,$t,Xt),$t,ae),ie+=ae,se+=ae),ke+=ye.m,ie+=Qt.m,Ae+=ve.m,se+=de.m;ye&&!rt(de)&&(de.t=ye,de.m+=ke-se),Qt&&!tt(ve)&&(ve.t=Qt,ve.m+=ie-Ae,Xt=$t)}return Xt}(Tt,zt,Tt.parent.A||It[0])}function Dt(Tt){Tt._.x=Tt.z+Tt.parent.m,Tt.m+=Tt.parent.m}function ut(Tt){Tt.x*=ht,Tt.y=Tt.depth*Lt}return _t.separation=function(Tt){return arguments.length?(at=Tt,_t):at},_t.size=function(Tt){return arguments.length?(Mt=!1,ht=+Tt[0],Lt=+Tt[1],_t):Mt?null:[ht,Lt]},_t.nodeSize=function(Tt){return arguments.length?(Mt=!0,ht=+Tt[0],Lt=+Tt[1],_t):Mt?[ht,Lt]:null},_t}function gt(at,ht,Lt,Mt,_t){for(var St,Dt=at.children,ut=-1,Tt=Dt.length,bt=at.value&&(_t-Lt)/at.value;++ut<Tt;)(St=Dt[ut]).x0=ht,St.x1=Mt,St.y0=Lt,St.y1=Lt+=St.value*bt}ct.prototype=Object.create(a.prototype);var kt=(1+Math.sqrt(5))/2;function yt(at,ht,Lt,Mt,_t,St){for(var Dt,ut,Tt,bt,It,zt,Ft,$t,Wt,Xt,ae,Qt=[],de=ht.children,ye=0,ve=0,ie=de.length,se=ht.value;ye<ie;){Tt=_t-Lt,bt=St-Mt;do It=de[ve++].value;while(!It&&ve<ie);for(zt=Ft=It,ae=It*It*(Xt=Math.max(bt/Tt,Tt/bt)/(se*at)),Wt=Math.max(Ft/ae,ae/zt);ve<ie;++ve){if(It+=ut=de[ve].value,ut<zt&&(zt=ut),ut>Ft&&(Ft=ut),ae=It*It*Xt,($t=Math.max(Ft/ae,ae/zt))>Wt){It-=ut;break}Wt=$t}Qt.push(Dt={value:It,dice:Tt<bt,children:de.slice(ye,ve)}),Dt.dice?B(Dt,Lt,Mt,_t,se?Mt+=bt*It/se:St):gt(Dt,Lt,Mt,se?Lt+=Tt*It/se:_t,St),se-=It,ye=ve}return Qt}var mt=function at(ht){function Lt(Mt,_t,St,Dt,ut){yt(ht,Mt,_t,St,Dt,ut)}return Lt.ratio=function(Mt){return at((Mt=+Mt)>1?Mt:1)},Lt}(kt);function Ot(){var at=mt,ht=!1,Lt=1,Mt=1,_t=[0],St=L,Dt=L,ut=L,Tt=L,bt=L;function It(Ft){return Ft.x0=Ft.y0=0,Ft.x1=Lt,Ft.y1=Mt,Ft.eachBefore(zt),_t=[0],ht&&Ft.eachBefore(j),Ft}function zt(Ft){var $t=_t[Ft.depth],Wt=Ft.x0+$t,Xt=Ft.y0+$t,ae=Ft.x1-$t,Qt=Ft.y1-$t;ae<Wt&&(Wt=ae=(Wt+ae)/2),Qt<Xt&&(Xt=Qt=(Xt+Qt)/2),Ft.x0=Wt,Ft.y0=Xt,Ft.x1=ae,Ft.y1=Qt,Ft.children&&($t=_t[Ft.depth+1]=St(Ft)/2,Wt+=bt(Ft)-$t,Xt+=Dt(Ft)-$t,(ae-=ut(Ft)-$t)<Wt&&(Wt=ae=(Wt+ae)/2),(Qt-=Tt(Ft)-$t)<Xt&&(Xt=Qt=(Xt+Qt)/2),at(Ft,Wt,Xt,ae,Qt))}return It.round=function(Ft){return arguments.length?(ht=!!Ft,It):ht},It.size=function(Ft){return arguments.length?(Lt=+Ft[0],Mt=+Ft[1],It):[Lt,Mt]},It.tile=function(Ft){return arguments.length?(at=M(Ft),It):at},It.padding=function(Ft){return arguments.length?It.paddingInner(Ft).paddingOuter(Ft):It.paddingInner()},It.paddingInner=function(Ft){return arguments.length?(St=typeof Ft=="function"?Ft:E(+Ft),It):St},It.paddingOuter=function(Ft){return arguments.length?It.paddingTop(Ft).paddingRight(Ft).paddingBottom(Ft).paddingLeft(Ft):It.paddingTop()},It.paddingTop=function(Ft){return arguments.length?(Dt=typeof Ft=="function"?Ft:E(+Ft),It):Dt},It.paddingRight=function(Ft){return arguments.length?(ut=typeof Ft=="function"?Ft:E(+Ft),It):ut},It.paddingBottom=function(Ft){return arguments.length?(Tt=typeof Ft=="function"?Ft:E(+Ft),It):Tt},It.paddingLeft=function(Ft){return arguments.length?(bt=typeof Ft=="function"?Ft:E(+Ft),It):bt},It}function vt(at,ht,Lt,Mt,_t){var St,Dt,ut=at.children,Tt=ut.length,bt=new Array(Tt+1);for(bt[0]=Dt=St=0;St<Tt;++St)bt[St+1]=Dt+=ut[St].value;(function It(zt,Ft,$t,Wt,Xt,ae,Qt){if(zt>=Ft-1){var de=ut[zt];return de.x0=Wt,de.y0=Xt,de.x1=ae,void(de.y1=Qt)}for(var ye=bt[zt],ve=$t/2+ye,ie=zt+1,se=Ft-1;ie<se;){var ke=ie+se>>>1;bt[ke]<ve?ie=ke+1:se=ke}ve-bt[ie-1]<bt[ie]-ve&&zt+1<ie&&--ie;var Ae=bt[ie]-ye,Ie=$t-Ae;if(ae-Wt>Qt-Xt){var Te=(Wt*Ie+ae*Ae)/$t;It(zt,ie,Ae,Wt,Xt,Te,Qt),It(ie,Ft,Ie,Te,Xt,ae,Qt)}else{var Vt=(Xt*Ie+Qt*Ae)/$t;It(zt,ie,Ae,Wt,Xt,ae,Vt),It(ie,Ft,Ie,Wt,Vt,ae,Qt)}})(0,Tt,at.value,ht,Lt,Mt,_t)}function xt(at,ht,Lt,Mt,_t){(1&at.depth?gt:B)(at,ht,Lt,Mt,_t)}var st=function at(ht){function Lt(Mt,_t,St,Dt,ut){if((Tt=Mt._squarify)&&Tt.ratio===ht)for(var Tt,bt,It,zt,Ft,$t=-1,Wt=Tt.length,Xt=Mt.value;++$t<Wt;){for(It=(bt=Tt[$t]).children,zt=bt.value=0,Ft=It.length;zt<Ft;++zt)bt.value+=It[zt].value;bt.dice?B(bt,_t,St,Dt,St+=(ut-St)*bt.value/Xt):gt(bt,_t,St,_t+=(Dt-_t)*bt.value/Xt,ut),Xt-=bt.value}else Mt._squarify=Tt=yt(ht,Mt,_t,St,Dt,ut),Tt.ratio=ht}return Lt.ratio=function(Mt){return at((Mt=+Mt)>1?Mt:1)},Lt}(kt)},45879:function(W,I,o){o.d(I,{h5:function(){return f}});var T=Math.PI,k=2*T,r=1e-6,m=k-r;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function s(){return new h}h.prototype=s.prototype={constructor:h,moveTo:function(d,w){this._+="M"+(this._x0=this._x1=+d)+","+(this._y0=this._y1=+w)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(d,w){this._+="L"+(this._x1=+d)+","+(this._y1=+w)},quadraticCurveTo:function(d,w,v,p){this._+="Q"+ +d+","+ +w+","+(this._x1=+v)+","+(this._y1=+p)},bezierCurveTo:function(d,w,v,p,y,b){this._+="C"+ +d+","+ +w+","+ +v+","+ +p+","+(this._x1=+y)+","+(this._y1=+b)},arcTo:function(d,w,v,p,y){d=+d,w=+w,v=+v,p=+p,y=+y;var b=this._x1,x=this._y1,_=v-d,g=p-w,A=b-d,M=x-w,L=A*A+M*M;if(y<0)throw new Error("negative radius: "+y);if(this._x1===null)this._+="M"+(this._x1=d)+","+(this._y1=w);else if(L>r)if(Math.abs(M*_-g*A)>r&&y){var E=v-b,S=p-x,O=_*_+g*g,P=E*E+S*S,U=Math.sqrt(O),R=Math.sqrt(L),j=y*Math.tan((T-Math.acos((O+L-P)/(2*U*R)))/2),B=j/R,z=j/U;Math.abs(B-1)>r&&(this._+="L"+(d+B*A)+","+(w+B*M)),this._+="A"+y+","+y+",0,0,"+ +(M*E>A*S)+","+(this._x1=d+z*_)+","+(this._y1=w+z*g)}else this._+="L"+(this._x1=d)+","+(this._y1=w)},arc:function(d,w,v,p,y,b){d=+d,w=+w,b=!!b;var x=(v=+v)*Math.cos(p),_=v*Math.sin(p),g=d+x,A=w+_,M=1^b,L=b?p-y:y-p;if(v<0)throw new Error("negative radius: "+v);this._x1===null?this._+="M"+g+","+A:(Math.abs(this._x1-g)>r||Math.abs(this._y1-A)>r)&&(this._+="L"+g+","+A),v&&(L<0&&(L=L%k+k),L>m?this._+="A"+v+","+v+",0,1,"+M+","+(d-x)+","+(w-_)+"A"+v+","+v+",0,1,"+M+","+(this._x1=g)+","+(this._y1=A):L>r&&(this._+="A"+v+","+v+",0,"+ +(L>=T)+","+M+","+(this._x1=d+v*Math.cos(y))+","+(this._y1=w+v*Math.sin(y))))},rect:function(d,w,v,p){this._+="M"+(this._x0=this._x1=+d)+","+(this._y0=this._y1=+w)+"h"+ +v+"v"+ +p+"h"+-v+"Z"},toString:function(){return this._}};var e=s,t=Array.prototype.slice;function n(d){return function(){return d}}function a(d){return d[0]}function i(d){return d[1]}function c(d){return d.source}function l(d){return d.target}function u(d,w,v,p,y){d.moveTo(w,v),d.bezierCurveTo(w=(w+p)/2,v,w,y,p,y)}function f(){return function(d){var w=c,v=l,p=a,y=i,b=null;function x(){var _,g=t.call(arguments),A=w.apply(this,g),M=v.apply(this,g);if(b||(b=_=e()),d(b,+p.apply(this,(g[0]=A,g)),+y.apply(this,g),+p.apply(this,(g[0]=M,g)),+y.apply(this,g)),_)return b=null,_+""||null}return x.source=function(_){return arguments.length?(w=_,x):w},x.target=function(_){return arguments.length?(v=_,x):v},x.x=function(_){return arguments.length?(p=typeof _=="function"?_:n(+_),x):p},x.y=function(_){return arguments.length?(y=typeof _=="function"?_:n(+_),x):y},x.context=function(_){return arguments.length?(b=_??null,x):b},x}(u)}},84096:function(W,I,o){o.d(I,{i$:function(){return c},Dq:function(){return a},g0:function(){return l}});var T=o(58176),k=o(48480),r=o(59879),m=o(82301),h=o(34823),s=o(79791);function e(ie){if(0<=ie.y&&ie.y<100){var se=new Date(-1,ie.m,ie.d,ie.H,ie.M,ie.S,ie.L);return se.setFullYear(ie.y),se}return new Date(ie.y,ie.m,ie.d,ie.H,ie.M,ie.S,ie.L)}function t(ie){if(0<=ie.y&&ie.y<100){var se=new Date(Date.UTC(-1,ie.m,ie.d,ie.H,ie.M,ie.S,ie.L));return se.setUTCFullYear(ie.y),se}return new Date(Date.UTC(ie.y,ie.m,ie.d,ie.H,ie.M,ie.S,ie.L))}function n(ie,se,ke){return{y:ie,m:se,d:ke,H:0,M:0,S:0,L:0}}function a(ie){var se=ie.dateTime,ke=ie.date,Ae=ie.time,Ie=ie.periods,Te=ie.days,Vt=ie.shortDays,Zt=ie.months,Gt=ie.shortMonths,Yt=y(Ie),ne=b(Ie),re=y(Te),Pt=b(Te),Nt=y(Vt),ee=b(Vt),te=y(Zt),ge=b(Zt),pe=y(Gt),me=b(Gt),ce={a:function(De){return Vt[De.getDay()]},A:function(De){return Te[De.getDay()]},b:function(De){return Gt[De.getMonth()]},B:function(De){return Zt[De.getMonth()]},c:null,d:Y,e:Y,f:ot,H:Z,I:tt,j:rt,L:nt,m:ct,M:pt,p:function(De){return Ie[+(De.getHours()>=12)]},q:function(De){return 1+~~(De.getMonth()/3)},Q:ye,s:ve,S:gt,u:kt,U:yt,V:mt,w:Ot,W:vt,x:null,X:null,y:xt,Y:st,Z:at,"%":de},we={a:function(De){return Vt[De.getUTCDay()]},A:function(De){return Te[De.getUTCDay()]},b:function(De){return Gt[De.getUTCMonth()]},B:function(De){return Zt[De.getUTCMonth()]},c:null,d:ht,e:ht,f:Dt,H:Lt,I:Mt,j:_t,L:St,m:ut,M:Tt,p:function(De){return Ie[+(De.getUTCHours()>=12)]},q:function(De){return 1+~~(De.getUTCMonth()/3)},Q:ye,s:ve,S:bt,u:It,U:zt,V:Ft,w:$t,W:Wt,x:null,X:null,y:Xt,Y:ae,Z:Qt,"%":de},ue={a:function(De,Ue,tr){var Ge=Nt.exec(Ue.slice(tr));return Ge?(De.w=ee[Ge[0].toLowerCase()],tr+Ge[0].length):-1},A:function(De,Ue,tr){var Ge=re.exec(Ue.slice(tr));return Ge?(De.w=Pt[Ge[0].toLowerCase()],tr+Ge[0].length):-1},b:function(De,Ue,tr){var Ge=pe.exec(Ue.slice(tr));return Ge?(De.m=me[Ge[0].toLowerCase()],tr+Ge[0].length):-1},B:function(De,Ue,tr){var Ge=te.exec(Ue.slice(tr));return Ge?(De.m=ge[Ge[0].toLowerCase()],tr+Ge[0].length):-1},c:function(De,Ue,tr){return Pe(De,se,Ue,tr)},d:U,e:U,f:V,H:j,I:j,j:R,L:G,m:P,M:B,p:function(De,Ue,tr){var Ge=Yt.exec(Ue.slice(tr));return Ge?(De.p=ne[Ge[0].toLowerCase()],tr+Ge[0].length):-1},q:O,Q:J,s:X,S:z,u:_,U:g,V:A,w:x,W:M,x:function(De,Ue,tr){return Pe(De,ke,Ue,tr)},X:function(De,Ue,tr){return Pe(De,Ae,Ue,tr)},y:E,Y:L,Z:S,"%":et};function he(De,Ue){return function(tr){var Ge,Ze,We,pr=[],xr=-1,sr=0,$e=De.length;for(tr instanceof Date||(tr=new Date(+tr));++xr<$e;)De.charCodeAt(xr)===37&&(pr.push(De.slice(sr,xr)),(Ze=u[Ge=De.charAt(++xr)])!=null?Ge=De.charAt(++xr):Ze=Ge==="e"?" ":"0",(We=Ue[Ge])&&(Ge=We(tr,Ze)),pr.push(Ge),sr=xr+1);return pr.push(De.slice(sr,xr)),pr.join("")}}function be(De,Ue){return function(tr){var Ge,Ze,We=n(1900,void 0,1);if(Pe(We,De,tr+="",0)!=tr.length)return null;if("Q"in We)return new Date(We.Q);if("s"in We)return new Date(1e3*We.s+("L"in We?We.L:0));if(Ue&&!("Z"in We)&&(We.Z=0),"p"in We&&(We.H=We.H%12+12*We.p),We.m===void 0&&(We.m="q"in We?We.q:0),"V"in We){if(We.V<1||We.V>53)return null;"w"in We||(We.w=1),"Z"in We?(Ze=(Ge=t(n(We.y,0,1))).getUTCDay(),Ge=Ze>4||Ze===0?T.l6.ceil(Ge):(0,T.l6)(Ge),Ge=k.Z.offset(Ge,7*(We.V-1)),We.y=Ge.getUTCFullYear(),We.m=Ge.getUTCMonth(),We.d=Ge.getUTCDate()+(We.w+6)%7):(Ze=(Ge=e(n(We.y,0,1))).getDay(),Ge=Ze>4||Ze===0?r.wA.ceil(Ge):(0,r.wA)(Ge),Ge=m.Z.offset(Ge,7*(We.V-1)),We.y=Ge.getFullYear(),We.m=Ge.getMonth(),We.d=Ge.getDate()+(We.w+6)%7)}else("W"in We||"U"in We)&&("w"in We||(We.w="u"in We?We.u%7:"W"in We?1:0),Ze="Z"in We?t(n(We.y,0,1)).getUTCDay():e(n(We.y,0,1)).getDay(),We.m=0,We.d="W"in We?(We.w+6)%7+7*We.W-(Ze+5)%7:We.w+7*We.U-(Ze+6)%7);return"Z"in We?(We.H+=We.Z/100|0,We.M+=We.Z%100,t(We)):e(We)}}function Pe(De,Ue,tr,Ge){for(var Ze,We,pr=0,xr=Ue.length,sr=tr.length;pr<xr;){if(Ge>=sr)return-1;if((Ze=Ue.charCodeAt(pr++))===37){if(Ze=Ue.charAt(pr++),!(We=ue[Ze in u?Ue.charAt(pr++):Ze])||(Ge=We(De,tr,Ge))<0)return-1}else if(Ze!=tr.charCodeAt(Ge++))return-1}return Ge}return ce.x=he(ke,ce),ce.X=he(Ae,ce),ce.c=he(se,ce),we.x=he(ke,we),we.X=he(Ae,we),we.c=he(se,we),{format:function(De){var Ue=he(De+="",ce);return Ue.toString=function(){return De},Ue},parse:function(De){var Ue=be(De+="",!1);return Ue.toString=function(){return De},Ue},utcFormat:function(De){var Ue=he(De+="",we);return Ue.toString=function(){return De},Ue},utcParse:function(De){var Ue=be(De+="",!0);return Ue.toString=function(){return De},Ue}}}var i,c,l,u={"-":"",_:" ",0:"0"},f=/^\s*\d+/,d=/^%/,w=/[\\^$*+?|[\]().{}]/g;function v(ie,se,ke){var Ae=ie<0?"-":"",Ie=(Ae?-ie:ie)+"",Te=Ie.length;return Ae+(Te<ke?new Array(ke-Te+1).join(se)+Ie:Ie)}function p(ie){return ie.replace(w,"\\$&")}function y(ie){return new RegExp("^(?:"+ie.map(p).join("|")+")","i")}function b(ie){for(var se={},ke=-1,Ae=ie.length;++ke<Ae;)se[ie[ke].toLowerCase()]=ke;return se}function x(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+1));return Ae?(ie.w=+Ae[0],ke+Ae[0].length):-1}function _(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+1));return Ae?(ie.u=+Ae[0],ke+Ae[0].length):-1}function g(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+2));return Ae?(ie.U=+Ae[0],ke+Ae[0].length):-1}function A(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+2));return Ae?(ie.V=+Ae[0],ke+Ae[0].length):-1}function M(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+2));return Ae?(ie.W=+Ae[0],ke+Ae[0].length):-1}function L(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+4));return Ae?(ie.y=+Ae[0],ke+Ae[0].length):-1}function E(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+2));return Ae?(ie.y=+Ae[0]+(+Ae[0]>68?1900:2e3),ke+Ae[0].length):-1}function S(ie,se,ke){var Ae=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(se.slice(ke,ke+6));return Ae?(ie.Z=Ae[1]?0:-(Ae[2]+(Ae[3]||"00")),ke+Ae[0].length):-1}function O(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+1));return Ae?(ie.q=3*Ae[0]-3,ke+Ae[0].length):-1}function P(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+2));return Ae?(ie.m=Ae[0]-1,ke+Ae[0].length):-1}function U(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+2));return Ae?(ie.d=+Ae[0],ke+Ae[0].length):-1}function R(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+3));return Ae?(ie.m=0,ie.d=+Ae[0],ke+Ae[0].length):-1}function j(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+2));return Ae?(ie.H=+Ae[0],ke+Ae[0].length):-1}function B(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+2));return Ae?(ie.M=+Ae[0],ke+Ae[0].length):-1}function z(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+2));return Ae?(ie.S=+Ae[0],ke+Ae[0].length):-1}function G(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+3));return Ae?(ie.L=+Ae[0],ke+Ae[0].length):-1}function V(ie,se,ke){var Ae=f.exec(se.slice(ke,ke+6));return Ae?(ie.L=Math.floor(Ae[0]/1e3),ke+Ae[0].length):-1}function et(ie,se,ke){var Ae=d.exec(se.slice(ke,ke+1));return Ae?ke+Ae[0].length:-1}function J(ie,se,ke){var Ae=f.exec(se.slice(ke));return Ae?(ie.Q=+Ae[0],ke+Ae[0].length):-1}function X(ie,se,ke){var Ae=f.exec(se.slice(ke));return Ae?(ie.s=+Ae[0],ke+Ae[0].length):-1}function Y(ie,se){return v(ie.getDate(),se,2)}function Z(ie,se){return v(ie.getHours(),se,2)}function tt(ie,se){return v(ie.getHours()%12||12,se,2)}function rt(ie,se){return v(1+m.Z.count((0,h.Z)(ie),ie),se,3)}function nt(ie,se){return v(ie.getMilliseconds(),se,3)}function ot(ie,se){return nt(ie,se)+"000"}function ct(ie,se){return v(ie.getMonth()+1,se,2)}function pt(ie,se){return v(ie.getMinutes(),se,2)}function gt(ie,se){return v(ie.getSeconds(),se,2)}function kt(ie){var se=ie.getDay();return se===0?7:se}function yt(ie,se){return v(r.OM.count((0,h.Z)(ie)-1,ie),se,2)}function mt(ie,se){var ke=ie.getDay();return ie=ke>=4||ke===0?(0,r.bL)(ie):r.bL.ceil(ie),v(r.bL.count((0,h.Z)(ie),ie)+((0,h.Z)(ie).getDay()===4),se,2)}function Ot(ie){return ie.getDay()}function vt(ie,se){return v(r.wA.count((0,h.Z)(ie)-1,ie),se,2)}function xt(ie,se){return v(ie.getFullYear()%100,se,2)}function st(ie,se){return v(ie.getFullYear()%1e4,se,4)}function at(ie){var se=ie.getTimezoneOffset();return(se>0?"-":(se*=-1,"+"))+v(se/60|0,"0",2)+v(se%60,"0",2)}function ht(ie,se){return v(ie.getUTCDate(),se,2)}function Lt(ie,se){return v(ie.getUTCHours(),se,2)}function Mt(ie,se){return v(ie.getUTCHours()%12||12,se,2)}function _t(ie,se){return v(1+k.Z.count((0,s.Z)(ie),ie),se,3)}function St(ie,se){return v(ie.getUTCMilliseconds(),se,3)}function Dt(ie,se){return St(ie,se)+"000"}function ut(ie,se){return v(ie.getUTCMonth()+1,se,2)}function Tt(ie,se){return v(ie.getUTCMinutes(),se,2)}function bt(ie,se){return v(ie.getUTCSeconds(),se,2)}function It(ie){var se=ie.getUTCDay();return se===0?7:se}function zt(ie,se){return v(T.Ox.count((0,s.Z)(ie)-1,ie),se,2)}function Ft(ie,se){var ke=ie.getUTCDay();return ie=ke>=4||ke===0?(0,T.hB)(ie):T.hB.ceil(ie),v(T.hB.count((0,s.Z)(ie),ie)+((0,s.Z)(ie).getUTCDay()===4),se,2)}function $t(ie){return ie.getUTCDay()}function Wt(ie,se){return v(T.l6.count((0,s.Z)(ie)-1,ie),se,2)}function Xt(ie,se){return v(ie.getUTCFullYear()%100,se,2)}function ae(ie,se){return v(ie.getUTCFullYear()%1e4,se,4)}function Qt(){return"+0000"}function de(){return"%"}function ye(ie){return+ie}function ve(ie){return Math.floor(+ie/1e3)}i=a({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),c=i.format,i.parse,l=i.utcFormat,i.utcParse},82301:function(W,I,o){o.d(I,{a:function(){return m}});var T=o(30052),k=o(54263),r=(0,T.Z)(function(h){h.setHours(0,0,0,0)},function(h,s){h.setDate(h.getDate()+s)},function(h,s){return(s-h-(s.getTimezoneOffset()-h.getTimezoneOffset())*k.yB)/k.UD},function(h){return h.getDate()-1});I.Z=r;var m=r.range},54263:function(W,I,o){o.d(I,{UD:function(){return m},Y2:function(){return r},Ym:function(){return T},iM:function(){return h},yB:function(){return k}});var T=1e3,k=6e4,r=36e5,m=864e5,h=6048e5},81041:function(W,I,o){o.r(I),o.d(I,{timeDay:function(){return f.Z},timeDays:function(){return f.a},timeFriday:function(){return d.mC},timeFridays:function(){return d.b$},timeHour:function(){return l},timeHours:function(){return u},timeInterval:function(){return T.Z},timeMillisecond:function(){return r},timeMilliseconds:function(){return m},timeMinute:function(){return a},timeMinutes:function(){return i},timeMonday:function(){return d.wA},timeMondays:function(){return d.bJ},timeMonth:function(){return v},timeMonths:function(){return p},timeSaturday:function(){return d.EY},timeSaturdays:function(){return d.Ff},timeSecond:function(){return e},timeSeconds:function(){return t},timeSunday:function(){return d.OM},timeSundays:function(){return d.vm},timeThursday:function(){return d.bL},timeThursdays:function(){return d.$t},timeTuesday:function(){return d.sy},timeTuesdays:function(){return d.aU},timeWednesday:function(){return d.zg},timeWednesdays:function(){return d.Ld},timeWeek:function(){return d.OM},timeWeeks:function(){return d.vm},timeYear:function(){return y.Z},timeYears:function(){return y.g},utcDay:function(){return L.Z},utcDays:function(){return L.y},utcFriday:function(){return E.QQ},utcFridays:function(){return E.fz},utcHour:function(){return A},utcHours:function(){return M},utcMillisecond:function(){return r},utcMilliseconds:function(){return m},utcMinute:function(){return x},utcMinutes:function(){return _},utcMonday:function(){return E.l6},utcMondays:function(){return E.$3},utcMonth:function(){return O},utcMonths:function(){return P},utcSaturday:function(){return E.g4},utcSaturdays:function(){return E.Q_},utcSecond:function(){return e},utcSeconds:function(){return t},utcSunday:function(){return E.Ox},utcSundays:function(){return E.SU},utcThursday:function(){return E.hB},utcThursdays:function(){return E.xj},utcTuesday:function(){return E.J1},utcTuesdays:function(){return E.DK},utcWednesday:function(){return E.b3},utcWednesdays:function(){return E.uy},utcWeek:function(){return E.Ox},utcWeeks:function(){return E.SU},utcYear:function(){return U.Z},utcYears:function(){return U.D}});var T=o(30052),k=(0,T.Z)(function(){},function(R,j){R.setTime(+R+j)},function(R,j){return j-R});k.every=function(R){return R=Math.floor(R),isFinite(R)&&R>0?R>1?(0,T.Z)(function(j){j.setTime(Math.floor(j/R)*R)},function(j,B){j.setTime(+j+B*R)},function(j,B){return(B-j)/R}):k:null};var r=k,m=k.range,h=o(54263),s=(0,T.Z)(function(R){R.setTime(R-R.getMilliseconds())},function(R,j){R.setTime(+R+j*h.Ym)},function(R,j){return(j-R)/h.Ym},function(R){return R.getUTCSeconds()}),e=s,t=s.range,n=(0,T.Z)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*h.Ym)},function(R,j){R.setTime(+R+j*h.yB)},function(R,j){return(j-R)/h.yB},function(R){return R.getMinutes()}),a=n,i=n.range,c=(0,T.Z)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*h.Ym-R.getMinutes()*h.yB)},function(R,j){R.setTime(+R+j*h.Y2)},function(R,j){return(j-R)/h.Y2},function(R){return R.getHours()}),l=c,u=c.range,f=o(82301),d=o(59879),w=(0,T.Z)(function(R){R.setDate(1),R.setHours(0,0,0,0)},function(R,j){R.setMonth(R.getMonth()+j)},function(R,j){return j.getMonth()-R.getMonth()+12*(j.getFullYear()-R.getFullYear())},function(R){return R.getMonth()}),v=w,p=w.range,y=o(34823),b=(0,T.Z)(function(R){R.setUTCSeconds(0,0)},function(R,j){R.setTime(+R+j*h.yB)},function(R,j){return(j-R)/h.yB},function(R){return R.getUTCMinutes()}),x=b,_=b.range,g=(0,T.Z)(function(R){R.setUTCMinutes(0,0,0)},function(R,j){R.setTime(+R+j*h.Y2)},function(R,j){return(j-R)/h.Y2},function(R){return R.getUTCHours()}),A=g,M=g.range,L=o(48480),E=o(58176),S=(0,T.Z)(function(R){R.setUTCDate(1),R.setUTCHours(0,0,0,0)},function(R,j){R.setUTCMonth(R.getUTCMonth()+j)},function(R,j){return j.getUTCMonth()-R.getUTCMonth()+12*(j.getUTCFullYear()-R.getUTCFullYear())},function(R){return R.getUTCMonth()}),O=S,P=S.range,U=o(79791)},30052:function(W,I,o){o.d(I,{Z:function(){return r}});var T=new Date,k=new Date;function r(m,h,s,e){function t(n){return m(n=arguments.length===0?new Date:new Date(+n)),n}return t.floor=function(n){return m(n=new Date(+n)),n},t.ceil=function(n){return m(n=new Date(n-1)),h(n,1),m(n),n},t.round=function(n){var a=t(n),i=t.ceil(n);return n-a<i-n?a:i},t.offset=function(n,a){return h(n=new Date(+n),a==null?1:Math.floor(a)),n},t.range=function(n,a,i){var c,l=[];if(n=t.ceil(n),i=i==null?1:Math.floor(i),!(n<a&&i>0))return l;do l.push(c=new Date(+n)),h(n,i),m(n);while(c<n&&n<a);return l},t.filter=function(n){return r(function(a){if(a>=a)for(;m(a),!n(a);)a.setTime(a-1)},function(a,i){if(a>=a)if(i<0)for(;++i<=0;)for(;h(a,-1),!n(a););else for(;--i>=0;)for(;h(a,1),!n(a););})},s&&(t.count=function(n,a){return T.setTime(+n),k.setTime(+a),m(T),m(k),Math.floor(s(T,k))},t.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?t.filter(e?function(a){return e(a)%n==0}:function(a){return t.count(0,a)%n==0}):t:null}),t}},48480:function(W,I,o){o.d(I,{y:function(){return m}});var T=o(30052),k=o(54263),r=(0,T.Z)(function(h){h.setUTCHours(0,0,0,0)},function(h,s){h.setUTCDate(h.getUTCDate()+s)},function(h,s){return(s-h)/k.UD},function(h){return h.getUTCDate()-1});I.Z=r;var m=r.range},58176:function(W,I,o){o.d(I,{$3:function(){return c},DK:function(){return l},J1:function(){return s},Ox:function(){return m},QQ:function(){return n},Q_:function(){return w},SU:function(){return i},b3:function(){return e},fz:function(){return d},g4:function(){return a},hB:function(){return t},l6:function(){return h},uy:function(){return u},xj:function(){return f}});var T=o(30052),k=o(54263);function r(v){return(0,T.Z)(function(p){p.setUTCDate(p.getUTCDate()-(p.getUTCDay()+7-v)%7),p.setUTCHours(0,0,0,0)},function(p,y){p.setUTCDate(p.getUTCDate()+7*y)},function(p,y){return(y-p)/k.iM})}var m=r(0),h=r(1),s=r(2),e=r(3),t=r(4),n=r(5),a=r(6),i=m.range,c=h.range,l=s.range,u=e.range,f=t.range,d=n.range,w=a.range},79791:function(W,I,o){o.d(I,{D:function(){return r}});var T=o(30052),k=(0,T.Z)(function(m){m.setUTCMonth(0,1),m.setUTCHours(0,0,0,0)},function(m,h){m.setUTCFullYear(m.getUTCFullYear()+h)},function(m,h){return h.getUTCFullYear()-m.getUTCFullYear()},function(m){return m.getUTCFullYear()});k.every=function(m){return isFinite(m=Math.floor(m))&&m>0?(0,T.Z)(function(h){h.setUTCFullYear(Math.floor(h.getUTCFullYear()/m)*m),h.setUTCMonth(0,1),h.setUTCHours(0,0,0,0)},function(h,s){h.setUTCFullYear(h.getUTCFullYear()+s*m)}):null},I.Z=k;var r=k.range},59879:function(W,I,o){o.d(I,{$t:function(){return f},EY:function(){return a},Ff:function(){return w},Ld:function(){return u},OM:function(){return m},aU:function(){return l},b$:function(){return d},bJ:function(){return c},bL:function(){return t},mC:function(){return n},sy:function(){return s},vm:function(){return i},wA:function(){return h},zg:function(){return e}});var T=o(30052),k=o(54263);function r(v){return(0,T.Z)(function(p){p.setDate(p.getDate()-(p.getDay()+7-v)%7),p.setHours(0,0,0,0)},function(p,y){p.setDate(p.getDate()+7*y)},function(p,y){return(y-p-(y.getTimezoneOffset()-p.getTimezoneOffset())*k.yB)/k.iM})}var m=r(0),h=r(1),s=r(2),e=r(3),t=r(4),n=r(5),a=r(6),i=m.range,c=h.range,l=s.range,u=e.range,f=t.range,d=n.range,w=a.range},34823:function(W,I,o){o.d(I,{g:function(){return r}});var T=o(30052),k=(0,T.Z)(function(m){m.setMonth(0,1),m.setHours(0,0,0,0)},function(m,h){m.setFullYear(m.getFullYear()+h)},function(m,h){return h.getFullYear()-m.getFullYear()},function(m){return m.getFullYear()});k.every=function(m){return isFinite(m=Math.floor(m))&&m>0?(0,T.Z)(function(h){h.setFullYear(Math.floor(h.getFullYear()/m)*m),h.setMonth(0,1),h.setHours(0,0,0,0)},function(h,s){h.setFullYear(h.getFullYear()+s*m)}):null},I.Z=k;var r=k.range},17045:function(W,I,o){var T=o(8709),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r=Object.prototype.toString,m=Array.prototype.concat,h=Object.defineProperty,s=o(55622)(),e=h&&s,t=function(a,i,c,l){if(i in a){if(l===!0){if(a[i]===c)return}else if(typeof(u=l)!="function"||r.call(u)!=="[object Function]"||!l())return}var u;e?h(a,i,{configurable:!0,enumerable:!1,value:c,writable:!0}):a[i]=c},n=function(a,i){var c=arguments.length>2?arguments[2]:{},l=T(i);k&&(l=m.call(l,Object.getOwnPropertySymbols(i)));for(var u=0;u<l.length;u+=1)t(a,l[u],i[l[u]],c[l[u]])};n.supportsDescriptors=!!e,W.exports=n},46775:function(W){W.exports=function(){for(var I=0;I<arguments.length;I++)if(arguments[I]!==void 0)return arguments[I]}},53545:function(W){W.exports=T;var I=(T.canvas=document.createElement("canvas")).getContext("2d"),o=k([32,126]);function T(r,m){Array.isArray(r)&&(r=r.join(", "));var h,s={},e=16,t=.05;m&&(m.length===2&&typeof m[0]=="number"?h=k(m):Array.isArray(m)?h=m:(m.o?h=k(m.o):m.pairs&&(h=m.pairs),m.fontSize&&(e=m.fontSize),m.threshold!=null&&(t=m.threshold))),h||(h=o),I.font=e+"px "+r;for(var n=0;n<h.length;n++){var a=h[n],i=I.measureText(a[0]).width+I.measureText(a[1]).width,c=I.measureText(a).width;if(Math.abs(i-c)>e*t){var l=(c-i)/e;s[a]=1e3*l}}return s}function k(r){for(var m=[],h=r[0];h<=r[1];h++)for(var s=String.fromCharCode(h),e=r[0];e<r[1];e++){var t=s+String.fromCharCode(e);m.push(t)}return m}T.createPairs=k,T.ascii=o},31457:function(W,I,o){var T=o(65185),k=o(18625),r={M:"moveTo",C:"bezierCurveTo"};W.exports=function(m,h){m.beginPath(),k(T(h)).forEach(function(s){var e=s[0],t=s.slice(1);m[r[e]].apply(m,t)}),m.closePath()}},90660:function(W){W.exports=function(I){switch(I){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(W){function I(o,T,k){var r=0|o[k];if(r<=0)return[];var m,h=new Array(r);if(k===o.length-1)for(m=0;m<r;++m)h[m]=T;else for(m=0;m<r;++m)h[m]=I(o,T,k+1);return h}W.exports=function(o,T){switch(T===void 0&&(T=0),typeof o){case"number":if(o>0)return function(k,r){var m,h;for(m=new Array(k),h=0;h<k;++h)m[h]=r;return m}(0|o,T);break;case"object":if(typeof o.length=="number")return I(o,T,0)}return[]}},11474:function(W){function I(A,M,L){L=L||2;var E,S,O,P,U,R,j,B=M&&M.length,z=B?M[0]*L:A.length,G=o(A,0,z,L,!0),V=[];if(!G||G.next===G.prev)return V;if(B&&(G=function(J,X,Y,Z){var tt,rt,nt,ot=[];for(tt=0,rt=X.length;tt<rt;tt++)(nt=o(J,X[tt]*Z,tt<rt-1?X[tt+1]*Z:J.length,Z,!1))===nt.next&&(nt.steiner=!0),ot.push(i(nt));for(ot.sort(e),tt=0;tt<ot.length;tt++)t(ot[tt],Y),Y=T(Y,Y.next);return Y}(A,M,G,L)),A.length>80*L){E=O=A[0],S=P=A[1];for(var et=L;et<z;et+=L)(U=A[et])<E&&(E=U),(R=A[et+1])<S&&(S=R),U>O&&(O=U),R>P&&(P=R);j=(j=Math.max(O-E,P-S))!==0?1/j:0}return k(G,V,L,E,S,j),V}function o(A,M,L,E,S){var O,P;if(S===g(A,M,L,E)>0)for(O=M;O<L;O+=E)P=b(O,A[O],A[O+1],P);else for(O=L-E;O>=M;O-=E)P=b(O,A[O],A[O+1],P);return P&&f(P,P.next)&&(x(P),P=P.next),P}function T(A,M){if(!A)return A;M||(M=A);var L,E=A;do if(L=!1,E.steiner||!f(E,E.next)&&u(E.prev,E,E.next)!==0)E=E.next;else{if(x(E),(E=M=E.prev)===E.next)break;L=!0}while(L||E!==M);return M}function k(A,M,L,E,S,O,P){if(A){!P&&O&&function(B,z,G,V){var et=B;do et.z===null&&(et.z=a(et.x,et.y,z,G,V)),et.prevZ=et.prev,et.nextZ=et.next,et=et.next;while(et!==B);et.prevZ.nextZ=null,et.prevZ=null,function(J){var X,Y,Z,tt,rt,nt,ot,ct,pt=1;do{for(Y=J,J=null,rt=null,nt=0;Y;){for(nt++,Z=Y,ot=0,X=0;X<pt&&(ot++,Z=Z.nextZ);X++);for(ct=pt;ot>0||ct>0&&Z;)ot!==0&&(ct===0||!Z||Y.z<=Z.z)?(tt=Y,Y=Y.nextZ,ot--):(tt=Z,Z=Z.nextZ,ct--),rt?rt.nextZ=tt:J=tt,tt.prevZ=rt,rt=tt;Y=Z}rt.nextZ=null,pt*=2}while(nt>1)}(et)}(A,E,S,O);for(var U,R,j=A;A.prev!==A.next;)if(U=A.prev,R=A.next,O?m(A,E,S,O):r(A))M.push(U.i/L),M.push(A.i/L),M.push(R.i/L),x(A),A=R.next,j=R.next;else if((A=R)===j){P?P===1?k(A=h(T(A),M,L),M,L,E,S,O,2):P===2&&s(A,M,L,E,S,O):k(T(A),M,L,E,S,O,1);break}}}function r(A){var M=A.prev,L=A,E=A.next;if(u(M,L,E)>=0)return!1;for(var S=A.next.next;S!==A.prev;){if(c(M.x,M.y,L.x,L.y,E.x,E.y,S.x,S.y)&&u(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function m(A,M,L,E){var S=A.prev,O=A,P=A.next;if(u(S,O,P)>=0)return!1;for(var U=S.x<O.x?S.x<P.x?S.x:P.x:O.x<P.x?O.x:P.x,R=S.y<O.y?S.y<P.y?S.y:P.y:O.y<P.y?O.y:P.y,j=S.x>O.x?S.x>P.x?S.x:P.x:O.x>P.x?O.x:P.x,B=S.y>O.y?S.y>P.y?S.y:P.y:O.y>P.y?O.y:P.y,z=a(U,R,M,L,E),G=a(j,B,M,L,E),V=A.prevZ,et=A.nextZ;V&&V.z>=z&&et&&et.z<=G;){if(V!==A.prev&&V!==A.next&&c(S.x,S.y,O.x,O.y,P.x,P.y,V.x,V.y)&&u(V.prev,V,V.next)>=0||(V=V.prevZ,et!==A.prev&&et!==A.next&&c(S.x,S.y,O.x,O.y,P.x,P.y,et.x,et.y)&&u(et.prev,et,et.next)>=0))return!1;et=et.nextZ}for(;V&&V.z>=z;){if(V!==A.prev&&V!==A.next&&c(S.x,S.y,O.x,O.y,P.x,P.y,V.x,V.y)&&u(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;et&&et.z<=G;){if(et!==A.prev&&et!==A.next&&c(S.x,S.y,O.x,O.y,P.x,P.y,et.x,et.y)&&u(et.prev,et,et.next)>=0)return!1;et=et.nextZ}return!0}function h(A,M,L){var E=A;do{var S=E.prev,O=E.next.next;!f(S,O)&&d(S,E,E.next,O)&&p(S,O)&&p(O,S)&&(M.push(S.i/L),M.push(E.i/L),M.push(O.i/L),x(E),x(E.next),E=A=O),E=E.next}while(E!==A);return T(E)}function s(A,M,L,E,S,O){var P=A;do{for(var U=P.next.next;U!==P.prev;){if(P.i!==U.i&&l(P,U)){var R=y(P,U);return P=T(P,P.next),R=T(R,R.next),k(P,M,L,E,S,O),void k(R,M,L,E,S,O)}U=U.next}P=P.next}while(P!==A)}function e(A,M){return A.x-M.x}function t(A,M){if(M=function(E,S){var O,P=S,U=E.x,R=E.y,j=-1/0;do{if(R<=P.y&&R>=P.next.y&&P.next.y!==P.y){var B=P.x+(R-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(B<=U&&B>j){if(j=B,B===U){if(R===P.y)return P;if(R===P.next.y)return P.next}O=P.x<P.next.x?P:P.next}}P=P.next}while(P!==S);if(!O)return null;if(U===j)return O;var z,G=O,V=O.x,et=O.y,J=1/0;P=O;do U>=P.x&&P.x>=V&&U!==P.x&&c(R<et?U:j,R,V,et,R<et?j:U,R,P.x,P.y)&&(z=Math.abs(R-P.y)/(U-P.x),p(P,E)&&(z<J||z===J&&(P.x>O.x||P.x===O.x&&n(O,P)))&&(O=P,J=z)),P=P.next;while(P!==G);return O}(A,M),M){var L=y(M,A);T(M,M.next),T(L,L.next)}}function n(A,M){return u(A.prev,A,M.prev)<0&&u(M.next,A,A.next)<0}function a(A,M,L,E,S){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-L)*S)|A<<8))|A<<4))|A<<2))|A<<1))|(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-E)*S)|M<<8))|M<<4))|M<<2))|M<<1))<<1}function i(A){var M=A,L=A;do(M.x<L.x||M.x===L.x&&M.y<L.y)&&(L=M),M=M.next;while(M!==A);return L}function c(A,M,L,E,S,O,P,U){return(S-P)*(M-U)-(A-P)*(O-U)>=0&&(A-P)*(E-U)-(L-P)*(M-U)>=0&&(L-P)*(O-U)-(S-P)*(E-U)>=0}function l(A,M){return A.next.i!==M.i&&A.prev.i!==M.i&&!function(L,E){var S=L;do{if(S.i!==L.i&&S.next.i!==L.i&&S.i!==E.i&&S.next.i!==E.i&&d(S,S.next,L,E))return!0;S=S.next}while(S!==L);return!1}(A,M)&&(p(A,M)&&p(M,A)&&function(L,E){var S=L,O=!1,P=(L.x+E.x)/2,U=(L.y+E.y)/2;do S.y>U!=S.next.y>U&&S.next.y!==S.y&&P<(S.next.x-S.x)*(U-S.y)/(S.next.y-S.y)+S.x&&(O=!O),S=S.next;while(S!==L);return O}(A,M)&&(u(A.prev,A,M.prev)||u(A,M.prev,M))||f(A,M)&&u(A.prev,A,A.next)>0&&u(M.prev,M,M.next)>0)}function u(A,M,L){return(M.y-A.y)*(L.x-M.x)-(M.x-A.x)*(L.y-M.y)}function f(A,M){return A.x===M.x&&A.y===M.y}function d(A,M,L,E){var S=v(u(A,M,L)),O=v(u(A,M,E)),P=v(u(L,E,A)),U=v(u(L,E,M));return S!==O&&P!==U||!(S!==0||!w(A,L,M))||!(O!==0||!w(A,E,M))||!(P!==0||!w(L,A,E))||!(U!==0||!w(L,M,E))}function w(A,M,L){return M.x<=Math.max(A.x,L.x)&&M.x>=Math.min(A.x,L.x)&&M.y<=Math.max(A.y,L.y)&&M.y>=Math.min(A.y,L.y)}function v(A){return A>0?1:A<0?-1:0}function p(A,M){return u(A.prev,A,A.next)<0?u(A,M,A.next)>=0&&u(A,A.prev,M)>=0:u(A,M,A.prev)<0||u(A,A.next,M)<0}function y(A,M){var L=new _(A.i,A.x,A.y),E=new _(M.i,M.x,M.y),S=A.next,O=M.prev;return A.next=M,M.prev=A,L.next=S,S.prev=L,E.next=L,L.prev=E,O.next=E,E.prev=O,E}function b(A,M,L,E){var S=new _(A,M,L);return E?(S.next=E.next,S.prev=E,E.next.prev=S,E.next=S):(S.prev=S,S.next=S),S}function x(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function _(A,M,L){this.i=A,this.x=M,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function g(A,M,L,E){for(var S=0,O=M,P=L-E;O<L;O+=E)S+=(A[P]-A[O])*(A[O+1]+A[P+1]),P=O;return S}W.exports=I,W.exports.default=I,I.deviation=function(A,M,L,E){var S=M&&M.length,O=S?M[0]*L:A.length,P=Math.abs(g(A,0,O,L));if(S)for(var U=0,R=M.length;U<R;U++){var j=M[U]*L,B=U<R-1?M[U+1]*L:A.length;P-=Math.abs(g(A,j,B,L))}var z=0;for(U=0;U<E.length;U+=3){var G=E[U]*L,V=E[U+1]*L,et=E[U+2]*L;z+=Math.abs((A[G]-A[et])*(A[V+1]-A[G+1])-(A[G]-A[V])*(A[et+1]-A[G+1]))}return P===0&&z===0?0:Math.abs((z-P)/P)},I.flatten=function(A){for(var M=A[0][0].length,L={vertices:[],holes:[],dimensions:M},E=0,S=0;S<A.length;S++){for(var O=0;O<A[S].length;O++)for(var P=0;P<M;P++)L.vertices.push(A[S][O][P]);S>0&&(E+=A[S-1].length,L.holes.push(E))}return L}},2502:function(W,I,o){var T=o(68664);W.exports=function(k,r){var m,h=[],s=[],e=[],t={},n=[];function a(p){e[p]=!1,t.hasOwnProperty(p)&&Object.keys(t[p]).forEach(function(y){delete t[p][y],e[y]&&a(y)})}function i(p){var y,b,x=!1;for(s.push(p),e[p]=!0,y=0;y<n[p].length;y++)(b=n[p][y])===m?(c(m,s),x=!0):e[b]||(x=i(b));if(x)a(p);else for(y=0;y<n[p].length;y++){b=n[p][y];var _=t[b];_||(_={},t[b]=_),_[b]=!0}return s.pop(),x}function c(p,y){var b=[].concat(y).concat(p);r?r(i):h.push(b)}function l(p){(function(L){for(var E=0;E<k.length;E++)E<L&&(k[E]=[]),k[E]=k[E].filter(function(S){return S>=L})})(p);for(var y,b=T(k).components.filter(function(L){return L.length>1}),x=1/0,_=0;_<b.length;_++)for(var g=0;g<b[_].length;g++)b[_][g]<x&&(x=b[_][g],y=_);var A=b[y];if(!A)return!1;var M=k.map(function(L,E){return A.indexOf(E)===-1?[]:L.filter(function(S){return A.indexOf(S)!==-1})});return{leastVertex:x,adjList:M}}m=0;for(var u=k.length;m<u;){var f=l(m);if(m=f.leastVertex,n=f.adjList){for(var d=0;d<n.length;d++)for(var w=0;w<n[d].length;w++){var v=n[d][w];e[+v]=!1,t[v]={}}i(m),m+=1}else m=u}return r?void 0:h}},16134:function(W,I,o){var T=o(36672);W.exports=function(){return T(this).length=0,this}},4892:function(W,I,o){W.exports=o(64404)()?Array.from:o(49441)},64404:function(W){W.exports=function(){var I,o,T=Array.from;return typeof T=="function"&&(o=T(I=["raz","dwa"]),Boolean(o&&o!==I&&o[1]==="dwa"))}},49441:function(W,I,o){var T=o(8260).iterator,k=o(73051),r=o(33717),m=o(35976),h=o(78513),s=o(36672),e=o(95296),t=o(87963),n=Array.isArray,a=Function.prototype.call,i={configurable:!0,enumerable:!0,writable:!0,value:null},c=Object.defineProperty;W.exports=function(l){var u,f,d,w,v,p,y,b,x,_,g=arguments[1],A=arguments[2];if(l=Object(s(l)),e(g)&&h(g),this&&this!==Array&&r(this))u=this;else{if(!g){if(k(l))return(v=l.length)!==1?Array.apply(null,l):((w=new Array(1))[0]=l[0],w);if(n(l)){for(w=new Array(v=l.length),f=0;f<v;++f)w[f]=l[f];return w}}w=[]}if(!n(l)){if((x=l[T])!==void 0){for(y=h(x).call(l),u&&(w=new u),b=y.next(),f=0;!b.done;)_=g?a.call(g,A,b.value,f):b.value,u?(i.value=_,c(w,f,i)):w[f]=_,b=y.next(),++f;v=f}else if(t(l)){for(v=l.length,u&&(w=new u),f=0,d=0;f<v;++f)_=l[f],f+1<v&&(p=_.charCodeAt(0))>=55296&&p<=56319&&(_+=l[++f]),_=g?a.call(g,A,_,d):_,u?(i.value=_,c(w,d,i)):w[d]=_,++d;v=d}}if(v===void 0)for(v=m(l.length),u&&(w=new u(v)),f=0;f<v;++f)_=g?a.call(g,A,l[f],f):l[f],u?(i.value=_,c(w,f,i)):w[f]=_;return u&&(i.value=null,w.length=v),w}},73051:function(W){var I=Object.prototype.toString,o=I.call(function(){return arguments}());W.exports=function(T){return I.call(T)===o}},33717:function(W){var I=Object.prototype.toString,o=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);W.exports=function(T){return typeof T=="function"&&o(I.call(T))}},52345:function(W){W.exports=function(){}},9953:function(W,I,o){W.exports=o(90436)()?Math.sign:o(6069)},90436:function(W){W.exports=function(){var I=Math.sign;return typeof I=="function"&&I(10)===1&&I(-20)===-1}},6069:function(W){W.exports=function(I){return I=Number(I),isNaN(I)||I===0?I:I>0?1:-1}},56247:function(W,I,o){var T=o(9953),k=Math.abs,r=Math.floor;W.exports=function(m){return isNaN(m)?0:(m=Number(m))!==0&&isFinite(m)?T(m)*r(k(m)):m}},35976:function(W,I,o){var T=o(56247),k=Math.max;W.exports=function(r){return k(0,T(r))}},67260:function(W,I,o){var T=o(78513),k=o(36672),r=Function.prototype.bind,m=Function.prototype.call,h=Object.keys,s=Object.prototype.propertyIsEnumerable;W.exports=function(e,t){return function(n,a){var i,c=arguments[2],l=arguments[3];return n=Object(k(n)),T(a),i=h(n),l&&i.sort(typeof l=="function"?r.call(l,n):void 0),typeof e!="function"&&(e=i[e]),m.call(e,i,function(u,f){return s.call(n,u)?m.call(a,c,n[u],u,n,f):t})}}},95879:function(W,I,o){W.exports=o(73583)()?Object.assign:o(34205)},73583:function(W){W.exports=function(){var I,o=Object.assign;return typeof o=="function"&&(o(I={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),I.foo+I.bar+I.trzy==="razdwatrzy")}},34205:function(W,I,o){var T=o(68700),k=o(36672),r=Math.max;W.exports=function(m,h){var s,e,t,n=r(arguments.length,2);for(m=Object(k(m)),t=function(a){try{m[a]=h[a]}catch(i){s||(s=i)}},e=1;e<n;++e)T(h=arguments[e]).forEach(t);if(s!==void 0)throw s;return m}},19012:function(W,I,o){var T=o(4892),k=o(95879),r=o(36672);W.exports=function(m){var h=Object(r(m)),s=arguments[1],e=Object(arguments[2]);if(h!==m&&!s)return h;var t={};return s?T(s,function(n){(e.ensure||n in m)&&(t[n]=m[n])}):k(t,m),t}},52818:function(W,I,o){var T,k,r,m,h=Object.create;o(33247)()||(T=o(51882)),W.exports=T?T.level!==1?h:(k={},r={},m={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(s){r[s]=s!=="__proto__"?m:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,r),Object.defineProperty(T,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(s,e){return h(s===null?k:s,e)}):h},96437:function(W,I,o){W.exports=o(67260)("forEach")},99611:function(W,I,o){var T=o(95296),k={function:!0,object:!0};W.exports=function(r){return T(r)&&k[typeof r]||!1}},95296:function(W,I,o){var T=o(52345)();W.exports=function(k){return k!==T&&k!==null}},68700:function(W,I,o){W.exports=o(13895)()?Object.keys:o(25217)},13895:function(W){W.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function(W,I,o){var T=o(95296),k=Object.keys;W.exports=function(r){return k(T(r)?Object(r):r)}},16906:function(W,I,o){var T=o(78513),k=o(96437),r=Function.prototype.call;W.exports=function(m,h){var s={},e=arguments[2];return T(h),k(m,function(t,n,a,i){s[n]=r.call(h,e,t,n,a,i)}),s}},21780:function(W,I,o){var T=o(95296),k=Array.prototype.forEach,r=Object.create;W.exports=function(m){var h=r(null);return k.call(arguments,function(s){T(s)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(s),h)}),h}},1496:function(W,I,o){W.exports=o(33247)()?Object.setPrototypeOf:o(51882)},33247:function(W){var I=Object.create,o=Object.getPrototypeOf,T={};W.exports=function(){var k=Object.setPrototypeOf;return typeof k=="function"&&o(k((arguments[0]||I)(null),T))===T}},51882:function(W,I,o){var T,k,r,m,h=o(99611),s=o(36672),e=Object.prototype.isPrototypeOf,t=Object.defineProperty,n={configurable:!0,enumerable:!1,writable:!0,value:void 0};T=function(a,i){if(s(a),i===null||h(i))return a;throw new TypeError("Prototype must be null or an object")},W.exports=(k=function(){var a,i=Object.create(null),c={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(a=l.set).call(i,c)}catch{}if(Object.getPrototypeOf(i)===c)return{set:a,level:2}}return i.__proto__=c,Object.getPrototypeOf(i)===c?{level:2}:((i={}).__proto__=c,Object.getPrototypeOf(i)===c&&{level:1})}(),k?(k.level===2?k.set?(m=k.set,r=function(a,i){return m.call(T(a,i),i),a}):r=function(a,i){return T(a,i).__proto__=i,a}:r=function a(i,c){var l;return T(i,c),(l=e.call(a.nullPolyfill,i))&&delete a.nullPolyfill.__proto__,c===null&&(c=a.nullPolyfill),i.__proto__=c,l&&t(a.nullPolyfill,"__proto__",n),i},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),o(52818)},78513:function(W){W.exports=function(I){if(typeof I!="function")throw new TypeError(I+" is not a function");return I}},98976:function(W,I,o){var T=o(99611);W.exports=function(k){if(!T(k))throw new TypeError(k+" is not an Object");return k}},36672:function(W,I,o){var T=o(95296);W.exports=function(k){if(!T(k))throw new TypeError("Cannot use null or undefined");return k}},66741:function(W,I,o){W.exports=o(17557)()?String.prototype.contains:o(60381)},17557:function(W){var I="razdwatrzy";W.exports=function(){return typeof I.contains=="function"&&I.contains("dwa")===!0&&I.contains("foo")===!1}},60381:function(W){var I=String.prototype.indexOf;W.exports=function(o){return I.call(this,o,arguments[1])>-1}},87963:function(W){var I=Object.prototype.toString,o=I.call("");W.exports=function(T){return typeof T=="string"||T&&typeof T=="object"&&(T instanceof String||I.call(T)===o)||!1}},43043:function(W){var I=Object.create(null),o=Math.random;W.exports=function(){var T;do T=o().toString(36).slice(2);while(I[T]);return T}},32411:function(W,I,o){var T,k=o(1496),r=o(66741),m=o(62072),h=o(8260),s=o(95426),e=Object.defineProperty;T=W.exports=function(t,n){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");s.call(this,t),n=n?r.call(n,"key+value")?"key+value":r.call(n,"key")?"key":"value":"value",e(this,"__kind__",m("",n))},k&&k(T,s),delete T.prototype.constructor,T.prototype=Object.create(s.prototype,{_resolve:m(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),e(T.prototype,h.toStringTag,m("c","Array Iterator"))},27515:function(W,I,o){var T=o(73051),k=o(78513),r=o(87963),m=o(66661),h=Array.isArray,s=Function.prototype.call,e=Array.prototype.some;W.exports=function(t,n){var a,i,c,l,u,f,d,w,v=arguments[2];if(h(t)||T(t)?a="array":r(t)?a="string":t=m(t),k(n),c=function(){l=!0},a!=="array")if(a!=="string")for(i=t.next();!i.done;){if(s.call(n,v,i.value,c),l)return;i=t.next()}else for(f=t.length,u=0;u<f&&(d=t[u],u+1<f&&(w=d.charCodeAt(0))>=55296&&w<=56319&&(d+=t[++u]),s.call(n,v,d,c),!l);++u);else e.call(t,function(p){return s.call(n,v,p,c),l})}},66661:function(W,I,o){var T=o(73051),k=o(87963),r=o(32411),m=o(259),h=o(58095),s=o(8260).iterator;W.exports=function(e){return typeof h(e)[s]=="function"?e[s]():T(e)?new r(e):k(e)?new m(e):new r(e)}},95426:function(W,I,o){var T,k=o(16134),r=o(95879),m=o(78513),h=o(36672),s=o(62072),e=o(55174),t=o(8260),n=Object.defineProperty,a=Object.defineProperties;W.exports=T=function(i,c){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");a(this,{__list__:s("w",h(i)),__context__:s("w",c),__nextIndex__:s("w",0)}),c&&(m(c.on),c.on("_add",this._onAdd),c.on("_delete",this._onDelete),c.on("_clear",this._onClear))},delete T.prototype.constructor,a(T.prototype,r({_next:s(function(){var i;if(this.__list__)return this.__redo__&&(i=this.__redo__.shift())!==void 0?i:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:s(function(){return this._createResult(this._next())}),_createResult:s(function(i){return i===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:s(function(i){return this.__list__[i]}),_unBind:s(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:s(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},e({_onAdd:s(function(i){i>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(c,l){c>=i&&(this.__redo__[l]=++c)},this),this.__redo__.push(i)):n(this,"__redo__",s("c",[i])))}),_onDelete:s(function(i){var c;i>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((c=this.__redo__.indexOf(i))!==-1&&this.__redo__.splice(c,1),this.__redo__.forEach(function(l,u){l>i&&(this.__redo__[u]=--l)},this)))}),_onClear:s(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),n(T.prototype,t.iterator,s(function(){return this}))},35940:function(W,I,o){var T=o(73051),k=o(95296),r=o(87963),m=o(8260).iterator,h=Array.isArray;W.exports=function(s){return!(!k(s)||!h(s)&&!r(s)&&!T(s)&&typeof s[m]!="function")}},259:function(W,I,o){var T,k=o(1496),r=o(62072),m=o(8260),h=o(95426),s=Object.defineProperty;T=W.exports=function(e){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");e=String(e),h.call(this,e),s(this,"__length__",r("",e.length))},k&&k(T,h),delete T.prototype.constructor,T.prototype=Object.create(h.prototype,{_next:r(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:r(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0))>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n})}),s(T.prototype,m.toStringTag,r("c","String Iterator"))},58095:function(W,I,o){var T=o(35940);W.exports=function(k){if(!T(k))throw new TypeError(k+" is not iterable");return k}},73523:function(W){function I(o,T){if(o==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(o),r=1;r<arguments.length;r++){var m=arguments[r];if(m!=null)for(var h=Object.keys(Object(m)),s=0,e=h.length;s<e;s++){var t=h[s],n=Object.getOwnPropertyDescriptor(m,t);n!==void 0&&n.enumerable&&(k[t]=m[t])}}return k}W.exports={assign:I,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:I})}}},8260:function(W,I,o){W.exports=o(69711)()?o(94908).Symbol:o(18415)},69711:function(W,I,o){var T=o(94908),k={object:!0,symbol:!0};W.exports=function(){var r,m=T.Symbol;if(typeof m!="function")return!1;r=m("test symbol");try{String(r)}catch{return!1}return!!k[typeof m.iterator]&&!!k[typeof m.toPrimitive]&&!!k[typeof m.toStringTag]}},82276:function(W){W.exports=function(I){return!!I&&(typeof I=="symbol"||!!I.constructor&&I.constructor.name==="Symbol"&&I[I.constructor.toStringTag]==="Symbol")}},29366:function(W,I,o){var T=o(62072),k=Object.create,r=Object.defineProperty,m=Object.prototype,h=k(null);W.exports=function(s){for(var e,t,n=0;h[s+(n||"")];)++n;return h[s+=n||""]=!0,r(m,e="@@"+s,T.gs(null,function(a){t||(t=!0,r(this,e,T(a)),t=!1)})),e}},92842:function(W,I,o){var T=o(62072),k=o(94908).Symbol;W.exports=function(r){return Object.defineProperties(r,{hasInstance:T("",k&&k.hasInstance||r("hasInstance")),isConcatSpreadable:T("",k&&k.isConcatSpreadable||r("isConcatSpreadable")),iterator:T("",k&&k.iterator||r("iterator")),match:T("",k&&k.match||r("match")),replace:T("",k&&k.replace||r("replace")),search:T("",k&&k.search||r("search")),species:T("",k&&k.species||r("species")),split:T("",k&&k.split||r("split")),toPrimitive:T("",k&&k.toPrimitive||r("toPrimitive")),toStringTag:T("",k&&k.toStringTag||r("toStringTag")),unscopables:T("",k&&k.unscopables||r("unscopables"))})}},13304:function(W,I,o){var T=o(62072),k=o(53308),r=Object.create(null);W.exports=function(m){return Object.defineProperties(m,{for:T(function(h){return r[h]?r[h]:r[h]=m(String(h))}),keyFor:T(function(h){var s;for(s in k(h),r)if(r[s]===h)return s})})}},18415:function(W,I,o){var T,k,r,m=o(62072),h=o(53308),s=o(94908).Symbol,e=o(29366),t=o(92842),n=o(13304),a=Object.create,i=Object.defineProperties,c=Object.defineProperty;if(typeof s=="function")try{String(s()),r=!0}catch{}else s=null;k=function(l){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return T(l)},W.exports=T=function l(u){var f;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return r?s(u):(f=a(k.prototype),u=u===void 0?"":String(u),i(f,{__description__:m("",u),__name__:m("",e(u))}))},t(T),n(T),i(k.prototype,{constructor:m(T),toString:m("",function(){return this.__name__})}),i(T.prototype,{toString:m(function(){return"Symbol ("+h(this).__description__+")"}),valueOf:m(function(){return h(this)})}),c(T.prototype,T.toPrimitive,m("",function(){var l=h(this);return typeof l=="symbol"?l:l.toString()})),c(T.prototype,T.toStringTag,m("c","Symbol")),c(k.prototype,T.toStringTag,m("c",T.prototype[T.toStringTag])),c(k.prototype,T.toPrimitive,m("c",T.prototype[T.toPrimitive]))},53308:function(W,I,o){var T=o(82276);W.exports=function(k){if(!T(k))throw new TypeError(k+" is not a symbol");return k}},83522:function(W,I,o){W.exports=o(96402)()?WeakMap:o(329)},96402:function(W){W.exports=function(){var I,o;if(typeof WeakMap!="function")return!1;try{I=new WeakMap([[o={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(I)==="[object WeakMap]"&&typeof I.set=="function"&&I.set({},1)===I&&typeof I.delete=="function"&&typeof I.has=="function"&&I.get(o)==="one"}},96416:function(W){W.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},329:function(W,I,o){var T,k=o(95296),r=o(1496),m=o(98976),h=o(36672),s=o(43043),e=o(62072),t=o(66661),n=o(27515),a=o(8260).toStringTag,i=o(96416),c=Array.isArray,l=Object.defineProperty,u=Object.prototype.hasOwnProperty,f=Object.getPrototypeOf;W.exports=T=function(){var d,w=arguments[0];if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");return d=i&&r&&WeakMap!==T?r(new WeakMap,f(this)):this,k(w)&&(c(w)||(w=t(w))),l(d,"__weakMapData__",e("c","$weakMap$"+s())),w&&n(w,function(v){h(v),d.set(v[0],v[1])}),d},i&&(r&&r(T,WeakMap),T.prototype=Object.create(WeakMap.prototype,{constructor:e(T)})),Object.defineProperties(T.prototype,{delete:e(function(d){return!!u.call(m(d),this.__weakMapData__)&&(delete d[this.__weakMapData__],!0)}),get:e(function(d){if(u.call(m(d),this.__weakMapData__))return d[this.__weakMapData__]}),has:e(function(d){return u.call(m(d),this.__weakMapData__)}),set:e(function(d,w){return l(m(d),this.__weakMapData__,e("c",w)),this}),toString:e(function(){return"[object WeakMap]"})}),l(T.prototype,a,e("c","WeakMap"))},15398:function(W){var I,o=typeof Reflect=="object"?Reflect:null,T=o&&typeof o.apply=="function"?o.apply:function(u,f,d){return Function.prototype.apply.call(u,f,d)};I=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var k=Number.isNaN||function(u){return u!=u};function r(){r.init.call(this)}W.exports=r,W.exports.once=function(u,f){return new Promise(function(d,w){function v(y){u.removeListener(f,p),w(y)}function p(){typeof u.removeListener=="function"&&u.removeListener("error",v),d([].slice.call(arguments))}l(u,f,p,{once:!0}),f!=="error"&&function(y,b,x){typeof y.on=="function"&&l(y,"error",b,{once:!0})}(u,v)})},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var m=10;function h(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function s(u){return u._maxListeners===void 0?r.defaultMaxListeners:u._maxListeners}function e(u,f,d,w){var v,p,y,b;if(h(d),(p=u._events)===void 0?(p=u._events=Object.create(null),u._eventsCount=0):(p.newListener!==void 0&&(u.emit("newListener",f,d.listener?d.listener:d),p=u._events),y=p[f]),y===void 0)y=p[f]=d,++u._eventsCount;else if(typeof y=="function"?y=p[f]=w?[d,y]:[y,d]:w?y.unshift(d):y.push(d),(v=s(u))>0&&y.length>v&&!y.warned){y.warned=!0;var x=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");x.name="MaxListenersExceededWarning",x.emitter=u,x.type=f,x.count=y.length,b=x,console&&console.warn&&console.warn(b)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function n(u,f,d){var w={fired:!1,wrapFn:void 0,target:u,type:f,listener:d},v=t.bind(w);return v.listener=d,w.wrapFn=v,v}function a(u,f,d){var w=u._events;if(w===void 0)return[];var v=w[f];return v===void 0?[]:typeof v=="function"?d?[v.listener||v]:[v]:d?function(p){for(var y=new Array(p.length),b=0;b<y.length;++b)y[b]=p[b].listener||p[b];return y}(v):c(v,v.length)}function i(u){var f=this._events;if(f!==void 0){var d=f[u];if(typeof d=="function")return 1;if(d!==void 0)return d.length}return 0}function c(u,f){for(var d=new Array(f),w=0;w<f;++w)d[w]=u[w];return d}function l(u,f,d,w){if(typeof u.on=="function")w.once?u.once(f,d):u.on(f,d);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(f,function v(p){w.once&&u.removeEventListener(f,v),d(p)})}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");m=u}}),r.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},r.prototype.getMaxListeners=function(){return s(this)},r.prototype.emit=function(u){for(var f=[],d=1;d<arguments.length;d++)f.push(arguments[d]);var w=u==="error",v=this._events;if(v!==void 0)w=w&&v.error===void 0;else if(!w)return!1;if(w){var p;if(f.length>0&&(p=f[0]),p instanceof Error)throw p;var y=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw y.context=p,y}var b=v[u];if(b===void 0)return!1;if(typeof b=="function")T(b,this,f);else{var x=b.length,_=c(b,x);for(d=0;d<x;++d)T(_[d],this,f)}return!0},r.prototype.addListener=function(u,f){return e(this,u,f,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(u,f){return e(this,u,f,!0)},r.prototype.once=function(u,f){return h(f),this.on(u,n(this,u,f)),this},r.prototype.prependOnceListener=function(u,f){return h(f),this.prependListener(u,n(this,u,f)),this},r.prototype.removeListener=function(u,f){var d,w,v,p,y;if(h(f),(w=this._events)===void 0)return this;if((d=w[u])===void 0)return this;if(d===f||d.listener===f)--this._eventsCount==0?this._events=Object.create(null):(delete w[u],w.removeListener&&this.emit("removeListener",u,d.listener||f));else if(typeof d!="function"){for(v=-1,p=d.length-1;p>=0;p--)if(d[p]===f||d[p].listener===f){y=d[p].listener,v=p;break}if(v<0)return this;v===0?d.shift():function(b,x){for(;x+1<b.length;x++)b[x]=b[x+1];b.pop()}(d,v),d.length===1&&(w[u]=d[0]),w.removeListener!==void 0&&this.emit("removeListener",u,y||f)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(u){var f,d,w;if((d=this._events)===void 0)return this;if(d.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):d[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete d[u]),this;if(arguments.length===0){var v,p=Object.keys(d);for(w=0;w<p.length;++w)(v=p[w])!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(f=d[u])=="function")this.removeListener(u,f);else if(f!==void 0)for(w=f.length-1;w>=0;w--)this.removeListener(u,f[w]);return this},r.prototype.listeners=function(u){return a(this,u,!0)},r.prototype.rawListeners=function(u){return a(this,u,!1)},r.listenerCount=function(u,f){return typeof u.listenerCount=="function"?u.listenerCount(f):i.call(u,f)},r.prototype.listenerCount=i,r.prototype.eventNames=function(){return this._eventsCount>0?I(this._events):[]}},60774:function(W){var I=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};W.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return I()}try{return __global__||I()}finally{delete Object.prototype.__global__}}()},94908:function(W,I,o){W.exports=o(51152)()?globalThis:o(60774)},51152:function(W){W.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},92770:function(W,I,o){var T=o(18546);W.exports=function(k){var r=typeof k;if(r==="string"){var m=k;if((k=+k)==0&&T(m))return!1}else if(r!=="number")return!1;return k-k<1}},30120:function(W,I,o){var T=o(90660);W.exports=function(k,r,m){if(!k)throw new TypeError("must specify data as first parameter");if(m=0|+(m||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var h,s,e,t,n=k[0].length,a=k.length*n;r&&typeof r!="string"||(r=new(T(r||"float32"))(a+m));var i=r.length-m;if(a!==i)throw new Error("source length "+a+" ("+n+"x"+k.length+") does not match destination length "+i);for(h=0,e=m;h<k.length;h++)for(s=0;s<n;s++)r[e++]=k[h][s]===null?NaN:k[h][s]}else if(r&&typeof r!="string")r.set(k,m);else{var c=T(r||"float32");if(Array.isArray(k)||r==="array")for(h=0,e=m,t=(r=new c(k.length+m)).length;e<t;e++,h++)r[e]=k[h]===null?NaN:k[h];else m===0?r=new c(k):(r=new c(k.length+m)).set(k,m)}return r}},68016:function(W,I,o){var T=o(53313),k=[32,126];W.exports=function(r){var m=(r=r||{}).shape?r.shape:r.canvas?[r.canvas.width,r.canvas.height]:[512,512],h=r.canvas||document.createElement("canvas"),s=r.font,e=typeof r.step=="number"?[r.step,r.step]:r.step||[32,32],t=r.chars||k;if(s&&typeof s!="string"&&(s=T(s)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var n=[],a=t[0],i=0;a<=t[1];a++)n[i++]=String.fromCharCode(a);t=n}}else t=String(t).split("");m=m.slice(),h.width=m[0],h.height=m[1];var c=h.getContext("2d");c.fillStyle="#000",c.fillRect(0,0,h.width,h.height),c.font=s,c.textAlign="center",c.textBaseline="middle",c.fillStyle="#fff";var l=e[0]/2,u=e[1]/2;for(a=0;a<t.length;a++)c.fillText(t[a],l,u),(l+=e[0])>m[0]-e[0]/2&&(l=e[0]/2,u+=e[1]);return h}},32879:function(W){function I(r,m){m||(m={}),(typeof r=="string"||Array.isArray(r))&&(m.family=r);var h=Array.isArray(m.family)?m.family.join(", "):m.family;if(!h)throw Error("`family` must be defined");var s=m.size||m.fontSize||m.em||48,e=m.weight||m.fontWeight||"",t=(r=[m.style||m.fontStyle||"",e,s].join(" ")+"px "+h,m.origin||"top");if(I.cache[h]&&s<=I.cache[h].em)return o(I.cache[h],t);var n=m.canvas||I.canvas,a=n.getContext("2d"),i={upper:m.upper!==void 0?m.upper:"H",lower:m.lower!==void 0?m.lower:"x",descent:m.descent!==void 0?m.descent:"p",ascent:m.ascent!==void 0?m.ascent:"h",tittle:m.tittle!==void 0?m.tittle:"i",overshoot:m.overshoot!==void 0?m.overshoot:"O"},c=Math.ceil(1.5*s);n.height=c,n.width=.5*c,a.font=r;var l="H",u={top:0};a.clearRect(0,0,c,c),a.textBaseline="top",a.fillStyle="black",a.fillText(l,0,0);var f=T(a.getImageData(0,0,c,c));a.clearRect(0,0,c,c),a.textBaseline="bottom",a.fillText(l,0,c);var d=T(a.getImageData(0,0,c,c));u.lineHeight=u.bottom=c-d+f,a.clearRect(0,0,c,c),a.textBaseline="alphabetic",a.fillText(l,0,c);var w=c-T(a.getImageData(0,0,c,c))-1+f;u.baseline=u.alphabetic=w,a.clearRect(0,0,c,c),a.textBaseline="middle",a.fillText(l,0,.5*c);var v=T(a.getImageData(0,0,c,c));u.median=u.middle=c-v-1+f-.5*c,a.clearRect(0,0,c,c),a.textBaseline="hanging",a.fillText(l,0,.5*c);var p=T(a.getImageData(0,0,c,c));u.hanging=c-p-1+f-.5*c,a.clearRect(0,0,c,c),a.textBaseline="ideographic",a.fillText(l,0,c);var y=T(a.getImageData(0,0,c,c));if(u.ideographic=c-y-1+f,i.upper&&(a.clearRect(0,0,c,c),a.textBaseline="top",a.fillText(i.upper,0,0),u.upper=T(a.getImageData(0,0,c,c)),u.capHeight=u.baseline-u.upper),i.lower&&(a.clearRect(0,0,c,c),a.textBaseline="top",a.fillText(i.lower,0,0),u.lower=T(a.getImageData(0,0,c,c)),u.xHeight=u.baseline-u.lower),i.tittle&&(a.clearRect(0,0,c,c),a.textBaseline="top",a.fillText(i.tittle,0,0),u.tittle=T(a.getImageData(0,0,c,c))),i.ascent&&(a.clearRect(0,0,c,c),a.textBaseline="top",a.fillText(i.ascent,0,0),u.ascent=T(a.getImageData(0,0,c,c))),i.descent&&(a.clearRect(0,0,c,c),a.textBaseline="top",a.fillText(i.descent,0,0),u.descent=k(a.getImageData(0,0,c,c))),i.overshoot){a.clearRect(0,0,c,c),a.textBaseline="top",a.fillText(i.overshoot,0,0);var b=k(a.getImageData(0,0,c,c));u.overshoot=b-w}for(var x in u)u[x]/=s;return u.em=s,I.cache[h]=u,o(u,t)}function o(r,m){var h={};for(var s in typeof m=="string"&&(m=r[m]),r)s!=="em"&&(h[s]=r[s]-m);return h}function T(r){for(var m=r.height,h=r.data,s=3;s<h.length;s+=4)if(h[s]!==0)return Math.floor(.25*(s-3)/m)}function k(r){for(var m=r.height,h=r.data,s=h.length-1;s>0;s-=4)if(h[s]!==0)return Math.floor(.25*(s-3)/m)}W.exports=I,I.canvas=document.createElement("canvas"),I.cache={}},31353:function(W,I,o){var T=o(85395),k=Object.prototype.toString,r=Object.prototype.hasOwnProperty;W.exports=function(m,h,s){if(!T(h))throw new TypeError("iterator must be a function");var e;arguments.length>=3&&(e=s),k.call(m)==="[object Array]"?function(t,n,a){for(var i=0,c=t.length;i<c;i++)r.call(t,i)&&(a==null?n(t[i],i,t):n.call(a,t[i],i,t))}(m,h,e):typeof m=="string"?function(t,n,a){for(var i=0,c=t.length;i<c;i++)a==null?n(t.charAt(i),i,t):n.call(a,t.charAt(i),i,t)}(m,h,e):function(t,n,a){for(var i in t)r.call(t,i)&&(a==null?n(t[i],i,t):n.call(a,t[i],i,t))}(m,h,e)}},73047:function(W){var I=Array.prototype.slice,o=Object.prototype.toString;W.exports=function(T){var k=this;if(typeof k!="function"||o.call(k)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+k);for(var r,m=I.call(arguments,1),h=Math.max(0,k.length-m.length),s=[],e=0;e<h;e++)s.push("$"+e);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var n=k.apply(this,m.concat(I.call(arguments)));return Object(n)===n?n:this}return k.apply(T,m.concat(I.call(arguments)))}),k.prototype){var t=function(){};t.prototype=k.prototype,r.prototype=new t,t.prototype=null}return r}},77575:function(W,I,o){var T=o(73047);W.exports=Function.prototype.bind||T},86249:function(W){W.exports=function(I,o){if(typeof I!="string")throw new TypeError("must specify type string");if(o=o||{},typeof document>"u"&&!o.canvas)return null;var T=o.canvas||document.createElement("canvas");typeof o.width=="number"&&(T.width=o.width),typeof o.height=="number"&&(T.height=o.height);var k,r=o;try{var m=[I];I.indexOf("webgl")===0&&m.push("experimental-"+I);for(var h=0;h<m.length;h++)if(k=T.getContext(m[h],r))return k}catch{k=null}return k||null}},68318:function(W,I,o){var T,k=SyntaxError,r=Function,m=TypeError,h=function(L){try{return r('"use strict"; return ('+L+").constructor;")()}catch{}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch{s=null}var e=function(){throw new m},t=s?function(){try{return e}catch{try{return s(arguments,"callee").get}catch{return e}}}():e,n=o(57877)(),a=Object.getPrototypeOf||function(L){return L.__proto__},i={},c=typeof Uint8Array>"u"?T:a(Uint8Array),l={"%AggregateError%":typeof AggregateError>"u"?T:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?T:ArrayBuffer,"%ArrayIteratorPrototype%":n?a([][Symbol.iterator]()):T,"%AsyncFromSyncIteratorPrototype%":T,"%AsyncFunction%":i,"%AsyncGenerator%":i,"%AsyncGeneratorFunction%":i,"%AsyncIteratorPrototype%":i,"%Atomics%":typeof Atomics>"u"?T:Atomics,"%BigInt%":typeof BigInt>"u"?T:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?T:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?T:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?T:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?T:Float32Array,"%Float64Array%":typeof Float64Array>"u"?T:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?T:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":i,"%Int8Array%":typeof Int8Array>"u"?T:Int8Array,"%Int16Array%":typeof Int16Array>"u"?T:Int16Array,"%Int32Array%":typeof Int32Array>"u"?T:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":n?a(a([][Symbol.iterator]())):T,"%JSON%":typeof JSON=="object"?JSON:T,"%Map%":typeof Map>"u"?T:Map,"%MapIteratorPrototype%":typeof Map<"u"&&n?a(new Map()[Symbol.iterator]()):T,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?T:Promise,"%Proxy%":typeof Proxy>"u"?T:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?T:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?T:Set,"%SetIteratorPrototype%":typeof Set<"u"&&n?a(new Set()[Symbol.iterator]()):T,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?T:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":n?a(""[Symbol.iterator]()):T,"%Symbol%":n?Symbol:T,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":c,"%TypeError%":m,"%Uint8Array%":typeof Uint8Array>"u"?T:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?T:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?T:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?T:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?T:WeakMap,"%WeakRef%":typeof WeakRef>"u"?T:WeakRef,"%WeakSet%":typeof WeakSet>"u"?T:WeakSet};try{null.error}catch(L){var u=a(a(L));l["%Error.prototype%"]=u}var f=function L(E){var S;if(E==="%AsyncFunction%")S=h("async function () {}");else if(E==="%GeneratorFunction%")S=h("function* () {}");else if(E==="%AsyncGeneratorFunction%")S=h("async function* () {}");else if(E==="%AsyncGenerator%"){var O=L("%AsyncGeneratorFunction%");O&&(S=O.prototype)}else if(E==="%AsyncIteratorPrototype%"){var P=L("%AsyncGenerator%");P&&(S=a(P.prototype))}return l[E]=S,S},d={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=o(77575),v=o(35065),p=w.call(Function.call,Array.prototype.concat),y=w.call(Function.apply,Array.prototype.splice),b=w.call(Function.call,String.prototype.replace),x=w.call(Function.call,String.prototype.slice),_=w.call(Function.call,RegExp.prototype.exec),g=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,M=function(L,E){var S,O=L;if(v(d,O)&&(O="%"+(S=d[O])[0]+"%"),v(l,O)){var P=l[O];if(P===i&&(P=f(O)),P===void 0&&!E)throw new m("intrinsic "+L+" exists, but is not available. Please file an issue!");return{alias:S,name:O,value:P}}throw new k("intrinsic "+L+" does not exist!")};W.exports=function(L,E){if(typeof L!="string"||L.length===0)throw new m("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof E!="boolean")throw new m('"allowMissing" argument must be a boolean');if(_(/^%?[^%]*%?$/,L)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var S=function(Y){var Z=x(Y,0,1),tt=x(Y,-1);if(Z==="%"&&tt!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(tt==="%"&&Z!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var rt=[];return b(Y,g,function(nt,ot,ct,pt){rt[rt.length]=ct?b(pt,A,"$1"):ot||nt}),rt}(L),O=S.length>0?S[0]:"",P=M("%"+O+"%",E),U=P.name,R=P.value,j=!1,B=P.alias;B&&(O=B[0],y(S,p([0,1],B)));for(var z=1,G=!0;z<S.length;z+=1){var V=S[z],et=x(V,0,1),J=x(V,-1);if((et==='"'||et==="'"||et==="`"||J==='"'||J==="'"||J==="`")&&et!==J)throw new k("property names with quotes must have matching quotes");if(V!=="constructor"&&G||(j=!0),v(l,U="%"+(O+="."+V)+"%"))R=l[U];else if(R!=null){if(!(V in R)){if(!E)throw new m("base intrinsic for "+L+" exists, but the property is not available.");return}if(s&&z+1>=S.length){var X=s(R,V);R=(G=!!X)&&"get"in X&&!("originalValue"in X.get)?X.get:R[V]}else G=v(R,V),R=R[V];G&&!j&&(l[U]=R)}}return R}},85400:function(W){W.exports=function(I,o){var T=o[0],k=o[1],r=o[2],m=o[3],h=o[4],s=o[5],e=o[6],t=o[7],n=o[8],a=o[9],i=o[10],c=o[11],l=o[12],u=o[13],f=o[14],d=o[15];return I[0]=s*(i*d-c*f)-a*(e*d-t*f)+u*(e*c-t*i),I[1]=-(k*(i*d-c*f)-a*(r*d-m*f)+u*(r*c-m*i)),I[2]=k*(e*d-t*f)-s*(r*d-m*f)+u*(r*t-m*e),I[3]=-(k*(e*c-t*i)-s*(r*c-m*i)+a*(r*t-m*e)),I[4]=-(h*(i*d-c*f)-n*(e*d-t*f)+l*(e*c-t*i)),I[5]=T*(i*d-c*f)-n*(r*d-m*f)+l*(r*c-m*i),I[6]=-(T*(e*d-t*f)-h*(r*d-m*f)+l*(r*t-m*e)),I[7]=T*(e*c-t*i)-h*(r*c-m*i)+n*(r*t-m*e),I[8]=h*(a*d-c*u)-n*(s*d-t*u)+l*(s*c-t*a),I[9]=-(T*(a*d-c*u)-n*(k*d-m*u)+l*(k*c-m*a)),I[10]=T*(s*d-t*u)-h*(k*d-m*u)+l*(k*t-m*s),I[11]=-(T*(s*c-t*a)-h*(k*c-m*a)+n*(k*t-m*s)),I[12]=-(h*(a*f-i*u)-n*(s*f-e*u)+l*(s*i-e*a)),I[13]=T*(a*f-i*u)-n*(k*f-r*u)+l*(k*i-r*a),I[14]=-(T*(s*f-e*u)-h*(k*f-r*u)+l*(k*e-r*s)),I[15]=T*(s*i-e*a)-h*(k*i-r*a)+n*(k*e-r*s),I}},42331:function(W){W.exports=function(I){var o=new Float32Array(16);return o[0]=I[0],o[1]=I[1],o[2]=I[2],o[3]=I[3],o[4]=I[4],o[5]=I[5],o[6]=I[6],o[7]=I[7],o[8]=I[8],o[9]=I[9],o[10]=I[10],o[11]=I[11],o[12]=I[12],o[13]=I[13],o[14]=I[14],o[15]=I[15],o}},31042:function(W){W.exports=function(I,o){return I[0]=o[0],I[1]=o[1],I[2]=o[2],I[3]=o[3],I[4]=o[4],I[5]=o[5],I[6]=o[6],I[7]=o[7],I[8]=o[8],I[9]=o[9],I[10]=o[10],I[11]=o[11],I[12]=o[12],I[13]=o[13],I[14]=o[14],I[15]=o[15],I}},11902:function(W){W.exports=function(){var I=new Float32Array(16);return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},89887:function(W){W.exports=function(I){var o=I[0],T=I[1],k=I[2],r=I[3],m=I[4],h=I[5],s=I[6],e=I[7],t=I[8],n=I[9],a=I[10],i=I[11],c=I[12],l=I[13],u=I[14],f=I[15];return(o*h-T*m)*(a*f-i*u)-(o*s-k*m)*(n*f-i*l)+(o*e-r*m)*(n*u-a*l)+(T*s-k*h)*(t*f-i*c)-(T*e-r*h)*(t*u-a*c)+(k*e-r*s)*(t*l-n*c)}},27812:function(W){W.exports=function(I,o){var T=o[0],k=o[1],r=o[2],m=o[3],h=T+T,s=k+k,e=r+r,t=T*h,n=k*h,a=k*s,i=r*h,c=r*s,l=r*e,u=m*h,f=m*s,d=m*e;return I[0]=1-a-l,I[1]=n+d,I[2]=i-f,I[3]=0,I[4]=n-d,I[5]=1-t-l,I[6]=c+u,I[7]=0,I[8]=i+f,I[9]=c-u,I[10]=1-t-a,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},34045:function(W){W.exports=function(I,o,T){var k,r,m,h=T[0],s=T[1],e=T[2],t=Math.sqrt(h*h+s*s+e*e);return Math.abs(t)<1e-6?null:(h*=t=1/t,s*=t,e*=t,k=Math.sin(o),m=1-(r=Math.cos(o)),I[0]=h*h*m+r,I[1]=s*h*m+e*k,I[2]=e*h*m-s*k,I[3]=0,I[4]=h*s*m-e*k,I[5]=s*s*m+r,I[6]=e*s*m+h*k,I[7]=0,I[8]=h*e*m+s*k,I[9]=s*e*m-h*k,I[10]=e*e*m+r,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I)}},45973:function(W){W.exports=function(I,o,T){var k=o[0],r=o[1],m=o[2],h=o[3],s=k+k,e=r+r,t=m+m,n=k*s,a=k*e,i=k*t,c=r*e,l=r*t,u=m*t,f=h*s,d=h*e,w=h*t;return I[0]=1-(c+u),I[1]=a+w,I[2]=i-d,I[3]=0,I[4]=a-w,I[5]=1-(n+u),I[6]=l+f,I[7]=0,I[8]=i+d,I[9]=l-f,I[10]=1-(n+c),I[11]=0,I[12]=T[0],I[13]=T[1],I[14]=T[2],I[15]=1,I}},81472:function(W){W.exports=function(I,o){return I[0]=o[0],I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=o[1],I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=o[2],I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},14669:function(W){W.exports=function(I,o){return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=o[0],I[13]=o[1],I[14]=o[2],I[15]=1,I}},75262:function(W){W.exports=function(I,o){var T=Math.sin(o),k=Math.cos(o);return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=k,I[6]=T,I[7]=0,I[8]=0,I[9]=-T,I[10]=k,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},331:function(W){W.exports=function(I,o){var T=Math.sin(o),k=Math.cos(o);return I[0]=k,I[1]=0,I[2]=-T,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=T,I[9]=0,I[10]=k,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},11049:function(W){W.exports=function(I,o){var T=Math.sin(o),k=Math.cos(o);return I[0]=k,I[1]=T,I[2]=0,I[3]=0,I[4]=-T,I[5]=k,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},75195:function(W){W.exports=function(I,o,T,k,r,m,h){var s=1/(T-o),e=1/(r-k),t=1/(m-h);return I[0]=2*m*s,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=2*m*e,I[6]=0,I[7]=0,I[8]=(T+o)*s,I[9]=(r+k)*e,I[10]=(h+m)*t,I[11]=-1,I[12]=0,I[13]=0,I[14]=h*m*2*t,I[15]=0,I}},71551:function(W){W.exports=function(I){return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},79576:function(W,I,o){W.exports={create:o(11902),clone:o(42331),copy:o(31042),identity:o(71551),transpose:o(88654),invert:o(95874),adjoint:o(85400),determinant:o(89887),multiply:o(91362),translate:o(31283),scale:o(10789),rotate:o(65074),rotateX:o(35545),rotateY:o(94918),rotateZ:o(15692),fromRotation:o(34045),fromRotationTranslation:o(45973),fromScaling:o(81472),fromTranslation:o(14669),fromXRotation:o(75262),fromYRotation:o(331),fromZRotation:o(11049),fromQuat:o(27812),frustum:o(75195),perspective:o(7864),perspectiveFromFieldOfView:o(35279),ortho:o(60378),lookAt:o(65551),str:o(6726)}},95874:function(W){W.exports=function(I,o){var T=o[0],k=o[1],r=o[2],m=o[3],h=o[4],s=o[5],e=o[6],t=o[7],n=o[8],a=o[9],i=o[10],c=o[11],l=o[12],u=o[13],f=o[14],d=o[15],w=T*s-k*h,v=T*e-r*h,p=T*t-m*h,y=k*e-r*s,b=k*t-m*s,x=r*t-m*e,_=n*u-a*l,g=n*f-i*l,A=n*d-c*l,M=a*f-i*u,L=a*d-c*u,E=i*d-c*f,S=w*E-v*L+p*M+y*A-b*g+x*_;return S?(S=1/S,I[0]=(s*E-e*L+t*M)*S,I[1]=(r*L-k*E-m*M)*S,I[2]=(u*x-f*b+d*y)*S,I[3]=(i*b-a*x-c*y)*S,I[4]=(e*A-h*E-t*g)*S,I[5]=(T*E-r*A+m*g)*S,I[6]=(f*p-l*x-d*v)*S,I[7]=(n*x-i*p+c*v)*S,I[8]=(h*L-s*A+t*_)*S,I[9]=(k*A-T*L-m*_)*S,I[10]=(l*b-u*p+d*w)*S,I[11]=(a*p-n*b-c*w)*S,I[12]=(s*g-h*M-e*_)*S,I[13]=(T*M-k*g+r*_)*S,I[14]=(u*v-l*y-f*w)*S,I[15]=(n*y-a*v+i*w)*S,I):null}},65551:function(W,I,o){var T=o(71551);W.exports=function(k,r,m,h){var s,e,t,n,a,i,c,l,u,f,d=r[0],w=r[1],v=r[2],p=h[0],y=h[1],b=h[2],x=m[0],_=m[1],g=m[2];return Math.abs(d-x)<1e-6&&Math.abs(w-_)<1e-6&&Math.abs(v-g)<1e-6?T(k):(c=d-x,l=w-_,u=v-g,s=y*(u*=f=1/Math.sqrt(c*c+l*l+u*u))-b*(l*=f),e=b*(c*=f)-p*u,t=p*l-y*c,(f=Math.sqrt(s*s+e*e+t*t))?(s*=f=1/f,e*=f,t*=f):(s=0,e=0,t=0),n=l*t-u*e,a=u*s-c*t,i=c*e-l*s,(f=Math.sqrt(n*n+a*a+i*i))?(n*=f=1/f,a*=f,i*=f):(n=0,a=0,i=0),k[0]=s,k[1]=n,k[2]=c,k[3]=0,k[4]=e,k[5]=a,k[6]=l,k[7]=0,k[8]=t,k[9]=i,k[10]=u,k[11]=0,k[12]=-(s*d+e*w+t*v),k[13]=-(n*d+a*w+i*v),k[14]=-(c*d+l*w+u*v),k[15]=1,k)}},91362:function(W){W.exports=function(I,o,T){var k=o[0],r=o[1],m=o[2],h=o[3],s=o[4],e=o[5],t=o[6],n=o[7],a=o[8],i=o[9],c=o[10],l=o[11],u=o[12],f=o[13],d=o[14],w=o[15],v=T[0],p=T[1],y=T[2],b=T[3];return I[0]=v*k+p*s+y*a+b*u,I[1]=v*r+p*e+y*i+b*f,I[2]=v*m+p*t+y*c+b*d,I[3]=v*h+p*n+y*l+b*w,v=T[4],p=T[5],y=T[6],b=T[7],I[4]=v*k+p*s+y*a+b*u,I[5]=v*r+p*e+y*i+b*f,I[6]=v*m+p*t+y*c+b*d,I[7]=v*h+p*n+y*l+b*w,v=T[8],p=T[9],y=T[10],b=T[11],I[8]=v*k+p*s+y*a+b*u,I[9]=v*r+p*e+y*i+b*f,I[10]=v*m+p*t+y*c+b*d,I[11]=v*h+p*n+y*l+b*w,v=T[12],p=T[13],y=T[14],b=T[15],I[12]=v*k+p*s+y*a+b*u,I[13]=v*r+p*e+y*i+b*f,I[14]=v*m+p*t+y*c+b*d,I[15]=v*h+p*n+y*l+b*w,I}},60378:function(W){W.exports=function(I,o,T,k,r,m,h){var s=1/(o-T),e=1/(k-r),t=1/(m-h);return I[0]=-2*s,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=-2*e,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=2*t,I[11]=0,I[12]=(o+T)*s,I[13]=(r+k)*e,I[14]=(h+m)*t,I[15]=1,I}},7864:function(W){W.exports=function(I,o,T,k,r){var m=1/Math.tan(o/2),h=1/(k-r);return I[0]=m/T,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=m,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=(r+k)*h,I[11]=-1,I[12]=0,I[13]=0,I[14]=2*r*k*h,I[15]=0,I}},35279:function(W){W.exports=function(I,o,T,k){var r=Math.tan(o.upDegrees*Math.PI/180),m=Math.tan(o.downDegrees*Math.PI/180),h=Math.tan(o.leftDegrees*Math.PI/180),s=Math.tan(o.rightDegrees*Math.PI/180),e=2/(h+s),t=2/(r+m);return I[0]=e,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=t,I[6]=0,I[7]=0,I[8]=-(h-s)*e*.5,I[9]=(r-m)*t*.5,I[10]=k/(T-k),I[11]=-1,I[12]=0,I[13]=0,I[14]=k*T/(T-k),I[15]=0,I}},65074:function(W){W.exports=function(I,o,T,k){var r,m,h,s,e,t,n,a,i,c,l,u,f,d,w,v,p,y,b,x,_,g,A,M,L=k[0],E=k[1],S=k[2],O=Math.sqrt(L*L+E*E+S*S);return Math.abs(O)<1e-6?null:(L*=O=1/O,E*=O,S*=O,r=Math.sin(T),h=1-(m=Math.cos(T)),s=o[0],e=o[1],t=o[2],n=o[3],a=o[4],i=o[5],c=o[6],l=o[7],u=o[8],f=o[9],d=o[10],w=o[11],v=L*L*h+m,p=E*L*h+S*r,y=S*L*h-E*r,b=L*E*h-S*r,x=E*E*h+m,_=S*E*h+L*r,g=L*S*h+E*r,A=E*S*h-L*r,M=S*S*h+m,I[0]=s*v+a*p+u*y,I[1]=e*v+i*p+f*y,I[2]=t*v+c*p+d*y,I[3]=n*v+l*p+w*y,I[4]=s*b+a*x+u*_,I[5]=e*b+i*x+f*_,I[6]=t*b+c*x+d*_,I[7]=n*b+l*x+w*_,I[8]=s*g+a*A+u*M,I[9]=e*g+i*A+f*M,I[10]=t*g+c*A+d*M,I[11]=n*g+l*A+w*M,o!==I&&(I[12]=o[12],I[13]=o[13],I[14]=o[14],I[15]=o[15]),I)}},35545:function(W){W.exports=function(I,o,T){var k=Math.sin(T),r=Math.cos(T),m=o[4],h=o[5],s=o[6],e=o[7],t=o[8],n=o[9],a=o[10],i=o[11];return o!==I&&(I[0]=o[0],I[1]=o[1],I[2]=o[2],I[3]=o[3],I[12]=o[12],I[13]=o[13],I[14]=o[14],I[15]=o[15]),I[4]=m*r+t*k,I[5]=h*r+n*k,I[6]=s*r+a*k,I[7]=e*r+i*k,I[8]=t*r-m*k,I[9]=n*r-h*k,I[10]=a*r-s*k,I[11]=i*r-e*k,I}},94918:function(W){W.exports=function(I,o,T){var k=Math.sin(T),r=Math.cos(T),m=o[0],h=o[1],s=o[2],e=o[3],t=o[8],n=o[9],a=o[10],i=o[11];return o!==I&&(I[4]=o[4],I[5]=o[5],I[6]=o[6],I[7]=o[7],I[12]=o[12],I[13]=o[13],I[14]=o[14],I[15]=o[15]),I[0]=m*r-t*k,I[1]=h*r-n*k,I[2]=s*r-a*k,I[3]=e*r-i*k,I[8]=m*k+t*r,I[9]=h*k+n*r,I[10]=s*k+a*r,I[11]=e*k+i*r,I}},15692:function(W){W.exports=function(I,o,T){var k=Math.sin(T),r=Math.cos(T),m=o[0],h=o[1],s=o[2],e=o[3],t=o[4],n=o[5],a=o[6],i=o[7];return o!==I&&(I[8]=o[8],I[9]=o[9],I[10]=o[10],I[11]=o[11],I[12]=o[12],I[13]=o[13],I[14]=o[14],I[15]=o[15]),I[0]=m*r+t*k,I[1]=h*r+n*k,I[2]=s*r+a*k,I[3]=e*r+i*k,I[4]=t*r-m*k,I[5]=n*r-h*k,I[6]=a*r-s*k,I[7]=i*r-e*k,I}},10789:function(W){W.exports=function(I,o,T){var k=T[0],r=T[1],m=T[2];return I[0]=o[0]*k,I[1]=o[1]*k,I[2]=o[2]*k,I[3]=o[3]*k,I[4]=o[4]*r,I[5]=o[5]*r,I[6]=o[6]*r,I[7]=o[7]*r,I[8]=o[8]*m,I[9]=o[9]*m,I[10]=o[10]*m,I[11]=o[11]*m,I[12]=o[12],I[13]=o[13],I[14]=o[14],I[15]=o[15],I}},6726:function(W){W.exports=function(I){return"mat4("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+", "+I[8]+", "+I[9]+", "+I[10]+", "+I[11]+", "+I[12]+", "+I[13]+", "+I[14]+", "+I[15]+")"}},31283:function(W){W.exports=function(I,o,T){var k,r,m,h,s,e,t,n,a,i,c,l,u=T[0],f=T[1],d=T[2];return o===I?(I[12]=o[0]*u+o[4]*f+o[8]*d+o[12],I[13]=o[1]*u+o[5]*f+o[9]*d+o[13],I[14]=o[2]*u+o[6]*f+o[10]*d+o[14],I[15]=o[3]*u+o[7]*f+o[11]*d+o[15]):(k=o[0],r=o[1],m=o[2],h=o[3],s=o[4],e=o[5],t=o[6],n=o[7],a=o[8],i=o[9],c=o[10],l=o[11],I[0]=k,I[1]=r,I[2]=m,I[3]=h,I[4]=s,I[5]=e,I[6]=t,I[7]=n,I[8]=a,I[9]=i,I[10]=c,I[11]=l,I[12]=k*u+s*f+a*d+o[12],I[13]=r*u+e*f+i*d+o[13],I[14]=m*u+t*f+c*d+o[14],I[15]=h*u+n*f+l*d+o[15]),I}},88654:function(W){W.exports=function(I,o){if(I===o){var T=o[1],k=o[2],r=o[3],m=o[6],h=o[7],s=o[11];I[1]=o[4],I[2]=o[8],I[3]=o[12],I[4]=T,I[6]=o[9],I[7]=o[13],I[8]=k,I[9]=m,I[11]=o[14],I[12]=r,I[13]=h,I[14]=s}else I[0]=o[0],I[1]=o[4],I[2]=o[8],I[3]=o[12],I[4]=o[1],I[5]=o[5],I[6]=o[9],I[7]=o[13],I[8]=o[2],I[9]=o[6],I[10]=o[10],I[11]=o[14],I[12]=o[3],I[13]=o[7],I[14]=o[11],I[15]=o[15];return I}},42505:function(W,I,o){var T=o(72791),k=o(71299),r=o(98580),m=o(12018),h=o(83522),s=o(25075),e=o(68016),t=o(58404),n=o(18863),a=o(10973),i=o(25677),c=o(75686),l=o(53545),u=o(56131),f=o(32879),d=o(30120),w=o(13547).nextPow2,v=new h,p=!1;if(document.body){var y=document.body.appendChild(document.createElement("div"));y.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(y).fontStretch&&(p=!0),document.body.removeChild(y)}var b=function(x){(function(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer})(x)?(x={regl:x},this.gl=x.regl._gl):this.gl=m(x),this.shader=v.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=x.regl||r({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),v.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(a(x)?x:{})};b.prototype.createShader=function(){var x=this.regl,_=x({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:x.prop("count"),offset:x.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:x.this("sizeBuffer")},width:{offset:0,stride:8,buffer:x.this("sizeBuffer")},char:x.this("charBuffer"),position:x.this("position")},uniforms:{atlasSize:function(g,A){return[A.atlas.width,A.atlas.height]},atlasDim:function(g,A){return[A.atlas.cols,A.atlas.rows]},atlas:function(g,A){return A.atlas.texture},charStep:function(g,A){return A.atlas.step},em:function(g,A){return A.atlas.em},color:x.prop("color"),opacity:x.prop("opacity"),viewport:x.this("viewportArray"),scale:x.this("scale"),align:x.prop("align"),baseline:x.prop("baseline"),translate:x.this("translate"),positionOffset:x.prop("positionOffset")},primitive:"points",viewport:x.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:x,draw:_,atlas:{}}},b.prototype.update=function(x){var _=this;if(typeof x=="string")x={text:x};else if(!x)return;(x=k(x,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(x.opacity)?this.opacity=x.opacity.map(function(ht){return parseFloat(ht)}):this.opacity=parseFloat(x.opacity)),x.viewport!=null&&(this.viewport=n(x.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),x.kerning!=null&&(this.kerning=x.kerning),x.offset!=null&&(typeof x.offset=="number"&&(x.offset=[x.offset,0]),this.positionOffset=d(x.offset)),x.direction&&(this.direction=x.direction),x.range&&(this.range=x.range,this.scale=[1/(x.range[2]-x.range[0]),1/(x.range[3]-x.range[1])],this.translate=[-x.range[0],-x.range[1]]),x.scale&&(this.scale=x.scale),x.translate&&(this.translate=x.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||x.font||(x.font=b.baseFontSize+"px sans-serif");var g,A=!1,M=!1;if(x.font&&(Array.isArray(x.font)?x.font:[x.font]).forEach(function(ht,Lt){if(typeof ht=="string")try{ht=T.parse(ht)}catch{ht=T.parse(b.baseFontSize+"px "+ht)}else ht=T.parse(T.stringify(ht));var Mt=T.stringify({size:b.baseFontSize,family:ht.family,stretch:p?ht.stretch:void 0,variant:ht.variant,weight:ht.weight,style:ht.style}),_t=i(ht.size),St=Math.round(_t[0]*c(_t[1]));if(St!==_.fontSize[Lt]&&(M=!0,_.fontSize[Lt]=St),!(_.font[Lt]&&Mt==_.font[Lt].baseString||(A=!0,_.font[Lt]=b.fonts[Mt],_.font[Lt]))){var Dt=ht.family.join(", "),ut=[ht.style];ht.style!=ht.variant&&ut.push(ht.variant),ht.variant!=ht.weight&&ut.push(ht.weight),p&&ht.weight!=ht.stretch&&ut.push(ht.stretch),_.font[Lt]={baseString:Mt,family:Dt,weight:ht.weight,stretch:ht.stretch,style:ht.style,variant:ht.variant,width:{},kerning:{},metrics:f(Dt,{origin:"top",fontSize:b.baseFontSize,fontStyle:ut.join(" ")})},b.fonts[Mt]=_.font[Lt]}}),(A||M)&&this.font.forEach(function(ht,Lt){var Mt=T.stringify({size:_.fontSize[Lt],family:ht.family,stretch:p?ht.stretch:void 0,variant:ht.variant,weight:ht.weight,style:ht.style});if(_.fontAtlas[Lt]=_.shader.atlas[Mt],!_.fontAtlas[Lt]){var _t=ht.metrics;_.shader.atlas[Mt]=_.fontAtlas[Lt]={fontString:Mt,step:2*Math.ceil(_.fontSize[Lt]*_t.bottom*.5),em:_.fontSize[Lt],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:_.regl.texture()}}x.text==null&&(x.text=_.text)}),typeof x.text=="string"&&x.position&&x.position.length>2){for(var L=Array(.5*x.position.length),E=0;E<L.length;E++)L[E]=x.text;x.text=L}if(x.text!=null||A){if(this.textOffsets=[0],Array.isArray(x.text)){this.count=x.text[0].length,this.counts=[this.count];for(var S=1;S<x.text.length;S++)this.textOffsets[S]=this.textOffsets[S-1]+x.text[S-1].length,this.count+=x.text[S].length,this.counts.push(x.text[S].length);this.text=x.text.join("")}else this.text=x.text,this.count=this.text.length,this.counts=[this.count];g=[],this.font.forEach(function(ht,Lt){b.atlasContext.font=ht.baseString;for(var Mt=_.fontAtlas[Lt],_t=0;_t<_.text.length;_t++){var St=_.text.charAt(_t);if(Mt.ids[St]==null&&(Mt.ids[St]=Mt.chars.length,Mt.chars.push(St),g.push(St)),ht.width[St]==null&&(ht.width[St]=b.atlasContext.measureText(St).width/b.baseFontSize,_.kerning)){var Dt=[];for(var ut in ht.width)Dt.push(ut+St,St+ut);u(ht.kerning,l(ht.family,{pairs:Dt}))}}})}if(x.position)if(x.position.length>2){for(var O=!x.position[0].length,P=t.mallocFloat(2*this.count),U=0,R=0;U<this.counts.length;U++){var j=this.counts[U];if(O)for(var B=0;B<j;B++)P[R++]=x.position[2*U],P[R++]=x.position[2*U+1];else for(var z=0;z<j;z++)P[R++]=x.position[U][0],P[R++]=x.position[U][1]}this.position.call?this.position({type:"float",data:P}):this.position=this.regl.buffer({type:"float",data:P}),t.freeFloat(P)}else this.position.destroy&&this.position.destroy(),this.position={constant:x.position};if(x.text||A){var G=t.mallocUint8(this.count),V=t.mallocFloat(2*this.count);this.textWidth=[];for(var et=0,J=0;et<this.counts.length;et++){for(var X=this.counts[et],Y=this.font[et]||this.font[0],Z=this.fontAtlas[et]||this.fontAtlas[0],tt=0;tt<X;tt++){var rt=this.text.charAt(J),nt=this.text.charAt(J-1);if(G[J]=Z.ids[rt],V[2*J]=Y.width[rt],tt){var ot=V[2*J-2],ct=V[2*J],pt=V[2*J-1]+.5*ot+.5*ct;if(this.kerning){var gt=Y.kerning[nt+rt];gt&&(pt+=.001*gt)}V[2*J+1]=pt}else V[2*J+1]=.5*V[2*J];J++}this.textWidth.push(V.length?.5*V[2*J-2]+V[2*J-1]:0)}x.align||(x.align=this.align),this.charBuffer({data:G,type:"uint8",usage:"stream"}),this.sizeBuffer({data:V,type:"float",usage:"stream"}),t.freeUint8(G),t.freeFloat(V),g.length&&this.font.forEach(function(ht,Lt){var Mt=_.fontAtlas[Lt],_t=Mt.step,St=Math.floor(b.maxAtlasSize/_t),Dt=Math.min(St,Mt.chars.length),ut=Math.ceil(Mt.chars.length/Dt),Tt=w(Dt*_t),bt=w(ut*_t);Mt.width=Tt,Mt.height=bt,Mt.rows=ut,Mt.cols=Dt,Mt.em&&Mt.texture({data:e({canvas:b.atlasCanvas,font:Mt.fontString,chars:Mt.chars,shape:[Tt,bt],step:[_t,_t]})})})}if(x.align&&(this.align=x.align,this.alignOffset=this.textWidth.map(function(ht,Lt){var Mt=Array.isArray(_.align)?_.align.length>1?_.align[Lt]:_.align[0]:_.align;if(typeof Mt=="number")return Mt;switch(Mt){case"right":case"end":return-ht;case"center":case"centre":case"middle":return .5*-ht}return 0})),this.baseline==null&&x.baseline==null&&(x.baseline=0),x.baseline!=null&&(this.baseline=x.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(ht,Lt){var Mt=(_.font[Lt]||_.font[0]).metrics,_t=0;return _t+=.5*Mt.bottom,-1*(_t+=typeof ht=="number"?ht-Mt.baseline:-Mt[ht])})),x.color!=null)if(x.color||(x.color="transparent"),typeof x.color!="string"&&isNaN(x.color)){var kt;if(typeof x.color[0]=="number"&&x.color.length>this.counts.length){var yt=x.color.length;kt=t.mallocUint8(yt);for(var mt=(x.color.subarray||x.color.slice).bind(x.color),Ot=0;Ot<yt;Ot+=4)kt.set(s(mt(Ot,Ot+4),"uint8"),Ot)}else{var vt=x.color.length;kt=t.mallocUint8(4*vt);for(var xt=0;xt<vt;xt++)kt.set(s(x.color[xt]||0,"uint8"),4*xt)}this.color=kt}else this.color=s(x.color,"uint8");if(x.position||x.text||x.color||x.baseline||x.align||x.font||x.offset||x.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var st=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(st);for(var at=0;at<this.batch.length;at++)this.batch[at]={count:this.counts.length>1?this.counts[at]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[at]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*at,4*at+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[at]:this.opacity,baseline:this.baselineOffset[at]!=null?this.baselineOffset[at]:this.baselineOffset[0],align:this.align?this.alignOffset[at]!=null?this.alignOffset[at]:this.alignOffset[0]:0,atlas:this.fontAtlas[at]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*at,2*at+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},b.prototype.destroy=function(){},b.prototype.kerning=!0,b.prototype.position={constant:new Float32Array(2)},b.prototype.translate=null,b.prototype.scale=null,b.prototype.font=null,b.prototype.text="",b.prototype.positionOffset=[0,0],b.prototype.opacity=1,b.prototype.color=new Uint8Array([0,0,0,255]),b.prototype.alignOffset=[0,0],b.maxAtlasSize=1024,b.atlasCanvas=document.createElement("canvas"),b.atlasContext=b.atlasCanvas.getContext("2d",{alpha:!1}),b.baseFontSize=64,b.fonts={},W.exports=b},12018:function(W,I,o){var T=o(71299);function k(h){if(h.container)if(h.container==document.body)document.body.style.width||(h.canvas.width=h.width||h.pixelRatio*o.g.innerWidth),document.body.style.height||(h.canvas.height=h.height||h.pixelRatio*o.g.innerHeight);else{var s=h.container.getBoundingClientRect();h.canvas.width=h.width||s.right-s.left,h.canvas.height=h.height||s.bottom-s.top}}function r(h){return typeof h.getContext=="function"&&"width"in h&&"height"in h}function m(){var h=document.createElement("canvas");return h.style.position="absolute",h.style.top=0,h.style.left=0,h}W.exports=function(h){var s;if(h?typeof h=="string"&&(h={container:h}):h={},(h=r(h)||typeof(s=h).nodeName=="string"&&typeof s.appendChild=="function"&&typeof s.getBoundingClientRect=="function"?{container:h}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(h)?{gl:h}:T(h,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(h.pixelRatio=o.g.pixelRatio||1),h.gl)return h.gl;if(h.canvas&&(h.container=h.canvas.parentNode),h.container){if(typeof h.container=="string"){var e=document.querySelector(h.container);if(!e)throw Error("Element "+h.container+" is not found");h.container=e}r(h.container)?(h.canvas=h.container,h.container=h.canvas.parentNode):h.canvas||(h.canvas=m(),h.container.appendChild(h.canvas),k(h))}else if(!h.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");h.container=document.body||document.documentElement,h.canvas=m(),h.container.appendChild(h.canvas),k(h)}return h.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{h.gl=h.canvas.getContext(t,h.attrs)}catch{}return h.gl}),h.gl}},56068:function(W){W.exports=function(I){typeof I=="string"&&(I=[I]);for(var o=[].slice.call(arguments,1),T=[],k=0;k<I.length-1;k++)T.push(I[k],o[k]||"");return T.push(I[k]),T.join("")}},40383:function(W,I,o){var T=o(68318)("%Object.getOwnPropertyDescriptor%",!0);if(T)try{T([],"length")}catch{T=null}W.exports=T},57035:function(W,I,o){var T,k=o(54404);T=typeof o.g.matchMedia=="function"?!o.g.matchMedia("(hover: none)").matches:k,W.exports=T},38520:function(W,I,o){var T=o(54404);W.exports=T&&function(){var k=!1;try{var r=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{k=!1}return k}()},55622:function(W,I,o){var T=o(68318)("%Object.defineProperty%",!0),k=function(){if(T)try{return T({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return T([],"length",{value:1}).length!==1}catch{return!0}},W.exports=k},57877:function(W,I,o){var T=typeof Symbol<"u"&&Symbol,k=o(35638);W.exports=function(){return typeof T=="function"&&typeof Symbol=="function"&&typeof T("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},35638:function(W){W.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var I={},o=Symbol("test"),T=Object(o);if(typeof o=="string"||Object.prototype.toString.call(o)!=="[object Symbol]"||Object.prototype.toString.call(T)!=="[object Symbol]")return!1;for(o in I[o]=42,I)return!1;if(typeof Object.keys=="function"&&Object.keys(I).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(I).length!==0)return!1;var k=Object.getOwnPropertySymbols(I);if(k.length!==1||k[0]!==o||!Object.prototype.propertyIsEnumerable.call(I,o))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var r=Object.getOwnPropertyDescriptor(I,o);if(r.value!==42||r.enumerable!==!0)return!1}return!0}},84543:function(W,I,o){var T=o(35638);W.exports=function(){return T()&&!!Symbol.toStringTag}},35065:function(W,I,o){var T=o(77575);W.exports=T.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(W,I){I.read=function(o,T,k,r,m){var h,s,e=8*m-r-1,t=(1<<e)-1,n=t>>1,a=-7,i=k?m-1:0,c=k?-1:1,l=o[T+i];for(i+=c,h=l&(1<<-a)-1,l>>=-a,a+=e;a>0;h=256*h+o[T+i],i+=c,a-=8);for(s=h&(1<<-a)-1,h>>=-a,a+=r;a>0;s=256*s+o[T+i],i+=c,a-=8);if(h===0)h=1-n;else{if(h===t)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,r),h-=n}return(l?-1:1)*s*Math.pow(2,h-r)},I.write=function(o,T,k,r,m,h){var s,e,t,n=8*h-m-1,a=(1<<n)-1,i=a>>1,c=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:h-1,u=r?1:-1,f=T<0||T===0&&1/T<0?1:0;for(T=Math.abs(T),isNaN(T)||T===1/0?(e=isNaN(T)?1:0,s=a):(s=Math.floor(Math.log(T)/Math.LN2),T*(t=Math.pow(2,-s))<1&&(s--,t*=2),(T+=s+i>=1?c/t:c*Math.pow(2,1-i))*t>=2&&(s++,t/=2),s+i>=a?(e=0,s=a):s+i>=1?(e=(T*t-1)*Math.pow(2,m),s+=i):(e=T*Math.pow(2,i-1)*Math.pow(2,m),s=0));m>=8;o[k+l]=255&e,l+=u,e/=256,m-=8);for(s=s<<m|e,n+=m;n>0;o[k+l]=255&s,l+=u,s/=256,n-=8);o[k+l-u]|=128*f}},42018:function(W){typeof Object.create=="function"?W.exports=function(I,o){o&&(I.super_=o,I.prototype=Object.create(o.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}))}:W.exports=function(I,o){if(o){I.super_=o;var T=function(){};T.prototype=o.prototype,I.prototype=new T,I.prototype.constructor=I}}},47216:function(W,I,o){var T=o(84543)(),k=o(6614)("Object.prototype.toString"),r=function(s){return!(T&&s&&typeof s=="object"&&Symbol.toStringTag in s)&&k(s)==="[object Arguments]"},m=function(s){return!!r(s)||s!==null&&typeof s=="object"&&typeof s.length=="number"&&s.length>=0&&k(s)!=="[object Array]"&&k(s.callee)==="[object Function]"},h=function(){return r(arguments)}();r.isLegacyArguments=m,W.exports=h?r:m},54404:function(W){W.exports=!0},85395:function(W){var I,o,T=Function.prototype.toString,k=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof k=="function"&&typeof Object.defineProperty=="function")try{I=Object.defineProperty({},"length",{get:function(){throw o}}),o={},k(function(){throw 42},null,I)}catch(i){i!==o&&(k=null)}else k=null;var r=/^\s*class\b/,m=function(i){try{var c=T.call(i);return r.test(c)}catch{return!1}},h=function(i){try{return!m(i)&&(T.call(i),!0)}catch{return!1}},s=Object.prototype.toString,e=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),n=function(){return!1};if(typeof document=="object"){var a=document.all;s.call(a)===s.call(document.all)&&(n=function(i){if((t||!i)&&(i===void 0||typeof i=="object"))try{var c=s.call(i);return(c==="[object HTMLAllCollection]"||c==="[object HTML document.all class]"||c==="[object HTMLCollection]"||c==="[object Object]")&&i("")==null}catch{}return!1})}W.exports=k?function(i){if(n(i))return!0;if(!i||typeof i!="function"&&typeof i!="object")return!1;try{k(i,null,I)}catch(c){if(c!==o)return!1}return!m(i)&&h(i)}:function(i){if(n(i))return!0;if(!i||typeof i!="function"&&typeof i!="object")return!1;if(e)return h(i);if(m(i))return!1;var c=s.call(i);return!(c!=="[object Function]"&&c!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(c))&&h(i)}},65481:function(W,I,o){var T,k=Object.prototype.toString,r=Function.prototype.toString,m=/^\s*(?:function)?\*/,h=o(84543)(),s=Object.getPrototypeOf;W.exports=function(e){if(typeof e!="function")return!1;if(m.test(r.call(e)))return!0;if(!h)return k.call(e)==="[object GeneratorFunction]";if(!s)return!1;if(T===void 0){var t=function(){if(!h)return!1;try{return Function("return function*() {}")()}catch{}}();T=!!t&&s(t)}return s(e)===T}},62683:function(W){W.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(W){W.exports=function(I){return I!=I}},15567:function(W,I,o){var T=o(68222),k=o(17045),r=o(64274),m=o(14922),h=o(22442),s=T(m(),Number);k(s,{getPolyfill:m,implementation:r,shim:h}),W.exports=s},14922:function(W,I,o){var T=o(64274);W.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:T}},22442:function(W,I,o){var T=o(17045),k=o(14922);W.exports=function(){var r=k();return T(Number,{isNaN:r},{isNaN:function(){return Number.isNaN!==r}}),r}},64941:function(W){W.exports=function(I){var o=typeof I;return I!==null&&(o==="object"||o==="function")}},10973:function(W){var I=Object.prototype.toString;W.exports=function(o){var T;return I.call(o)==="[object Object]"&&((T=Object.getPrototypeOf(o))===null||T===Object.getPrototypeOf({}))}},18546:function(W){W.exports=function(I){for(var o,T=I.length,k=0;k<T;k++)if(((o=I.charCodeAt(k))<9||o>13)&&o!==32&&o!==133&&o!==160&&o!==5760&&o!==6158&&(o<8192||o>8205)&&o!==8232&&o!==8233&&o!==8239&&o!==8287&&o!==8288&&o!==12288&&o!==65279)return!1;return!0}},89546:function(W){W.exports=function(I){return typeof I=="string"&&(I=I.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(I)&&/[\dz]$/i.test(I)&&I.length>4))}},9187:function(W,I,o){var T=o(31353),k=o(72077),r=o(6614),m=r("Object.prototype.toString"),h=o(84543)(),s=o(40383),e=typeof globalThis>"u"?o.g:globalThis,t=k(),n=r("Array.prototype.indexOf",!0)||function(l,u){for(var f=0;f<l.length;f+=1)if(l[f]===u)return f;return-1},a=r("String.prototype.slice"),i={},c=Object.getPrototypeOf;h&&s&&c&&T(t,function(l){var u=new e[l];if(Symbol.toStringTag in u){var f=c(u),d=s(f,Symbol.toStringTag);if(!d){var w=c(f);d=s(w,Symbol.toStringTag)}i[l]=d.get}}),W.exports=function(l){if(!l||typeof l!="object")return!1;if(!h||!(Symbol.toStringTag in l)){var u=a(m(l),8,-1);return n(t,u)>-1}return!!s&&function(f){var d=!1;return T(i,function(w,v){if(!d)try{d=w.call(f)===v}catch{}}),d}(l)}},44517:function(W){W.exports=function(){var I,o,T;function k(r,m){if(I)if(o){var h="var sharedChunk = {}; ("+I+")(sharedChunk); ("+o+")(sharedChunk);",s={};I(s),(T=m(s)).workerUrl=window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))}else o=m;else I=m}return k(0,function(r){function m(C,D){return C(D={exports:{}},D.exports),D.exports}var h="1.10.1",s=e;function e(C,D,q,lt){this.cx=3*C,this.bx=3*(q-C)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*D,this.by=3*(lt-D)-this.cy,this.ay=1-this.cy-this.by,this.p1x=C,this.p1y=lt,this.p2x=q,this.p2y=lt}e.prototype.sampleCurveX=function(C){return((this.ax*C+this.bx)*C+this.cx)*C},e.prototype.sampleCurveY=function(C){return((this.ay*C+this.by)*C+this.cy)*C},e.prototype.sampleCurveDerivativeX=function(C){return(3*this.ax*C+2*this.bx)*C+this.cx},e.prototype.solveCurveX=function(C,D){var q,lt,Ct,Rt,jt;for(D===void 0&&(D=1e-6),Ct=C,jt=0;jt<8;jt++){if(Rt=this.sampleCurveX(Ct)-C,Math.abs(Rt)<D)return Ct;var Kt=this.sampleCurveDerivativeX(Ct);if(Math.abs(Kt)<1e-6)break;Ct-=Rt/Kt}if((Ct=C)<(q=0))return q;if(Ct>(lt=1))return lt;for(;q<lt;){if(Rt=this.sampleCurveX(Ct),Math.abs(Rt-C)<D)return Ct;C>Rt?q=Ct:lt=Ct,Ct=.5*(lt-q)+q}return Ct},e.prototype.solve=function(C,D){return this.sampleCurveY(this.solveCurveX(C,D))};var t=n;function n(C,D){this.x=C,this.y=D}function a(C,D,q,lt){var Ct=new s(C,D,q,lt);return function(Rt){return Ct.solve(Rt)}}n.prototype={clone:function(){return new n(this.x,this.y)},add:function(C){return this.clone()._add(C)},sub:function(C){return this.clone()._sub(C)},multByPoint:function(C){return this.clone()._multByPoint(C)},divByPoint:function(C){return this.clone()._divByPoint(C)},mult:function(C){return this.clone()._mult(C)},div:function(C){return this.clone()._div(C)},rotate:function(C){return this.clone()._rotate(C)},rotateAround:function(C,D){return this.clone()._rotateAround(C,D)},matMult:function(C){return this.clone()._matMult(C)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(C){return this.x===C.x&&this.y===C.y},dist:function(C){return Math.sqrt(this.distSqr(C))},distSqr:function(C){var D=C.x-this.x,q=C.y-this.y;return D*D+q*q},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(C){return Math.atan2(this.y-C.y,this.x-C.x)},angleWith:function(C){return this.angleWithSep(C.x,C.y)},angleWithSep:function(C,D){return Math.atan2(this.x*D-this.y*C,this.x*C+this.y*D)},_matMult:function(C){var D=C[0]*this.x+C[1]*this.y,q=C[2]*this.x+C[3]*this.y;return this.x=D,this.y=q,this},_add:function(C){return this.x+=C.x,this.y+=C.y,this},_sub:function(C){return this.x-=C.x,this.y-=C.y,this},_mult:function(C){return this.x*=C,this.y*=C,this},_div:function(C){return this.x/=C,this.y/=C,this},_multByPoint:function(C){return this.x*=C.x,this.y*=C.y,this},_divByPoint:function(C){return this.x/=C.x,this.y/=C.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var C=this.y;return this.y=this.x,this.x=-C,this},_rotate:function(C){var D=Math.cos(C),q=Math.sin(C),lt=D*this.x-q*this.y,Ct=q*this.x+D*this.y;return this.x=lt,this.y=Ct,this},_rotateAround:function(C,D){var q=Math.cos(C),lt=Math.sin(C),Ct=D.x+q*(this.x-D.x)-lt*(this.y-D.y),Rt=D.y+lt*(this.x-D.x)+q*(this.y-D.y);return this.x=Ct,this.y=Rt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(C){return C instanceof n?C:Array.isArray(C)?new n(C[0],C[1]):C};var i=a(.25,.1,.25,1);function c(C,D,q){return Math.min(q,Math.max(D,C))}function l(C,D,q){var lt=q-D,Ct=((C-D)%lt+lt)%lt+D;return Ct===D?q:Ct}function u(C){for(var D=[],q=arguments.length-1;q-- >0;)D[q]=arguments[q+1];for(var lt=0,Ct=D;lt<Ct.length;lt+=1){var Rt=Ct[lt];for(var jt in Rt)C[jt]=Rt[jt]}return C}var f=1;function d(){return f++}function w(){return function C(D){return D?(D^16*Math.random()>>D/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,C)}()}function v(C){return!!C&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(C)}function p(C,D){C.forEach(function(q){D[q]&&(D[q]=D[q].bind(D))})}function y(C,D){return C.indexOf(D,C.length-D.length)!==-1}function b(C,D,q){var lt={};for(var Ct in C)lt[Ct]=D.call(q||this,C[Ct],Ct,C);return lt}function x(C,D,q){var lt={};for(var Ct in C)D.call(q||this,C[Ct],Ct,C)&&(lt[Ct]=C[Ct]);return lt}function _(C){return Array.isArray(C)?C.map(_):typeof C=="object"&&C?b(C,_):C}var g={};function A(C){g[C]||(typeof console<"u"&&console.warn(C),g[C]=!0)}function M(C,D,q){return(q.y-C.y)*(D.x-C.x)>(D.y-C.y)*(q.x-C.x)}function L(C){for(var D=0,q=0,lt=C.length,Ct=lt-1,Rt=void 0,jt=void 0;q<lt;Ct=q++)Rt=C[q],D+=((jt=C[Ct]).x-Rt.x)*(Rt.y+jt.y);return D}function E(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function S(C){var D={};if(C.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(lt,Ct,Rt,jt){var Kt=Rt||jt;return D[Ct]=!Kt||Kt.toLowerCase(),""}),D["max-age"]){var q=parseInt(D["max-age"],10);isNaN(q)?delete D["max-age"]:D["max-age"]=q}return D}var O=null;function P(C){if(O==null){var D=C.navigator?C.navigator.userAgent:null;O=!!C.safari||!(!D||!(/\b(iPad|iPhone|iPod)\b/.test(D)||D.match("Safari")&&!D.match("Chrome")))}return O}function U(C){try{var D=self[C];return D.setItem("_mapbox_test_",1),D.removeItem("_mapbox_test_"),!0}catch{return!1}}var R,j,B,z,G=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),V=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,et=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,J={now:G,frame:function(C){var D=V(C);return{cancel:function(){return et(D)}}},getImageData:function(C,D){D===void 0&&(D=0);var q=self.document.createElement("canvas"),lt=q.getContext("2d");if(!lt)throw new Error("failed to create canvas 2d context");return q.width=C.width,q.height=C.height,lt.drawImage(C,0,0,C.width,C.height),lt.getImageData(-D,-D,C.width+2*D,C.height+2*D)},resolveURL:function(C){return R||(R=self.document.createElement("a")),R.href=C,R.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(j==null&&(j=self.matchMedia("(prefers-reduced-motion: reduce)")),j.matches)}},X={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Y={supported:!1,testSupport:function(C){!Z&&z&&(tt?rt(C):B=C)}},Z=!1,tt=!1;function rt(C){var D=C.createTexture();C.bindTexture(C.TEXTURE_2D,D);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,z),C.isContextLost())return;Y.supported=!0}catch{}C.deleteTexture(D),Z=!0}self.document&&((z=self.document.createElement("img")).onload=function(){B&&rt(B),B=null,tt=!0},z.onerror=function(){Z=!0,B=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var nt="01",ot=function(C,D){this._transformRequestFn=C,this._customAccessToken=D,this._createSkuToken()};function ct(C){return C.indexOf("mapbox:")===0}ot.prototype._createSkuToken=function(){var C=function(){for(var D="",q=0;q<10;q++)D+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",nt,D].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},ot.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ot.prototype.transformRequest=function(C,D){return this._transformRequestFn&&this._transformRequestFn(C,D)||{url:C}},ot.prototype.normalizeStyleURL=function(C,D){if(!ct(C))return C;var q=yt(C);return q.path="/styles/v1"+q.path,this._makeAPIURL(q,this._customAccessToken||D)},ot.prototype.normalizeGlyphsURL=function(C,D){if(!ct(C))return C;var q=yt(C);return q.path="/fonts/v1"+q.path,this._makeAPIURL(q,this._customAccessToken||D)},ot.prototype.normalizeSourceURL=function(C,D){if(!ct(C))return C;var q=yt(C);return q.path="/v4/"+q.authority+".json",q.params.push("secure"),this._makeAPIURL(q,this._customAccessToken||D)},ot.prototype.normalizeSpriteURL=function(C,D,q,lt){var Ct=yt(C);return ct(C)?(Ct.path="/styles/v1"+Ct.path+"/sprite"+D+q,this._makeAPIURL(Ct,this._customAccessToken||lt)):(Ct.path+=""+D+q,mt(Ct))},ot.prototype.normalizeTileURL=function(C,D){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!ct(C))return C;var q=yt(C),lt=J.devicePixelRatio>=2||D===512?"@2x":"",Ct=Y.supported?".webp":"$1";q.path=q.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+lt+Ct),q.path=q.path.replace(/^.+\/v4\//,"/"),q.path="/v4"+q.path;var Rt=this._customAccessToken||function(jt){for(var Kt=0,oe=jt;Kt<oe.length;Kt+=1){var xe=oe[Kt].match(/^access_token=(.*)$/);if(xe)return xe[1]}return null}(q.params)||X.ACCESS_TOKEN;return X.REQUIRE_ACCESS_TOKEN&&Rt&&this._skuToken&&q.params.push("sku="+this._skuToken),this._makeAPIURL(q,Rt)},ot.prototype.canonicalizeTileURL=function(C,D){var q=yt(C);if(!q.path.match(/(^\/v4\/)/)||!q.path.match(/\.[\w]+$/))return C;var lt="mapbox://tiles/";lt+=q.path.replace("/v4/","");var Ct=q.params;return D&&(Ct=Ct.filter(function(Rt){return!Rt.match(/^access_token=/)})),Ct.length&&(lt+="?"+Ct.join("&")),lt},ot.prototype.canonicalizeTileset=function(C,D){for(var q=!!D&&ct(D),lt=[],Ct=0,Rt=C.tiles||[];Ct<Rt.length;Ct+=1){var jt=Rt[Ct];gt(jt)?lt.push(this.canonicalizeTileURL(jt,q)):lt.push(jt)}return lt},ot.prototype._makeAPIURL=function(C,D){var q="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",lt=yt(X.API_URL);if(C.protocol=lt.protocol,C.authority=lt.authority,lt.path!=="/"&&(C.path=""+lt.path+C.path),!X.REQUIRE_ACCESS_TOKEN)return mt(C);if(!(D=D||X.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+q);if(D[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+q);return C.params=C.params.filter(function(Ct){return Ct.indexOf("access_token")===-1}),C.params.push("access_token="+D),mt(C)};var pt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function gt(C){return pt.test(C)}var kt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function yt(C){var D=C.match(kt);if(!D)throw new Error("Unable to parse URL object");return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}function mt(C){var D=C.params.length?"?"+C.params.join("&"):"";return C.protocol+"://"+C.authority+C.path+D}var Ot="mapbox.eventData";function vt(C){if(!C)return null;var D,q=C.split(".");if(!q||q.length!==3)return null;try{return JSON.parse((D=q[1],decodeURIComponent(self.atob(D).split("").map(function(lt){return"%"+("00"+lt.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var xt=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};xt.prototype.getStorageKey=function(C){var D,q,lt=vt(X.ACCESS_TOKEN);return D=lt&&lt.u?(q=lt.u,self.btoa(encodeURIComponent(q).replace(/%([0-9A-F]{2})/g,function(Ct,Rt){return String.fromCharCode(Number("0x"+Rt))}))):X.ACCESS_TOKEN||"",C?Ot+"."+C+":"+D:Ot+":"+D},xt.prototype.fetchEventData=function(){var C=U("localStorage"),D=this.getStorageKey(),q=this.getStorageKey("uuid");if(C)try{var lt=self.localStorage.getItem(D);lt&&(this.eventData=JSON.parse(lt));var Ct=self.localStorage.getItem(q);Ct&&(this.anonId=Ct)}catch{A("Unable to read from LocalStorage")}},xt.prototype.saveEventData=function(){var C=U("localStorage"),D=this.getStorageKey(),q=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem(q,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(D,JSON.stringify(this.eventData))}catch{A("Unable to write to LocalStorage")}},xt.prototype.processRequests=function(C){},xt.prototype.postEvent=function(C,D,q,lt){var Ct=this;if(X.EVENTS_URL){var Rt=yt(X.EVENTS_URL);Rt.params.push("access_token="+(lt||X.ACCESS_TOKEN||""));var jt={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:h,skuId:nt,userId:this.anonId},Kt=D?u(jt,D):jt,oe={url:mt(Rt),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Kt])};this.pendingRequest=Ae(oe,function(xe){Ct.pendingRequest=null,q(xe),Ct.saveEventData(),Ct.processRequests(lt)})}},xt.prototype.queueRequest=function(C,D){this.queue.push(C),this.processRequests(D)};var st,at,ht=function(C){function D(){C.call(this,"map.load"),this.success={},this.skuToken=""}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.postMapLoadEvent=function(q,lt,Ct,Rt){this.skuToken=Ct,(X.EVENTS_URL&&Rt||X.ACCESS_TOKEN&&Array.isArray(q)&&q.some(function(jt){return ct(jt)||gt(jt)}))&&this.queueRequest({id:lt,timestamp:Date.now()},Rt)},D.prototype.processRequests=function(q){var lt=this;if(!this.pendingRequest&&this.queue.length!==0){var Ct=this.queue.shift(),Rt=Ct.id,jt=Ct.timestamp;Rt&&this.success[Rt]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=w()),this.postEvent(jt,{skuToken:this.skuToken},function(Kt){Kt||Rt&&(lt.success[Rt]=!0)},q))}},D}(xt),Lt=function(C){function D(q){C.call(this,"appUserTurnstile"),this._customAccessToken=q}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.postTurnstileEvent=function(q,lt){X.EVENTS_URL&&X.ACCESS_TOKEN&&Array.isArray(q)&&q.some(function(Ct){return ct(Ct)||gt(Ct)})&&this.queueRequest(Date.now(),lt)},D.prototype.processRequests=function(q){var lt=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Ct=vt(X.ACCESS_TOKEN),Rt=Ct?Ct.u:X.ACCESS_TOKEN,jt=Rt!==this.eventData.tokenU;v(this.anonId)||(this.anonId=w(),jt=!0);var Kt=this.queue.shift();if(this.eventData.lastSuccess){var oe=new Date(this.eventData.lastSuccess),xe=new Date(Kt),_e=(Kt-this.eventData.lastSuccess)/864e5;jt=jt||_e>=1||_e<-1||oe.getDate()!==xe.getDate()}else jt=!0;if(!jt)return this.processRequests();this.postEvent(Kt,{"enabled.telemetry":!1},function(Oe){Oe||(lt.eventData.lastSuccess=Kt,lt.eventData.tokenU=Rt)},q)}},D}(xt),Mt=new Lt,_t=Mt.postTurnstileEvent.bind(Mt),St=new ht,Dt=St.postMapLoadEvent.bind(St),ut="mapbox-tiles",Tt=500,bt=50,It=42e4;function zt(){self.caches&&!st&&(st=self.caches.open(ut))}function Ft(C,D,q){if(zt(),st){var lt={status:D.status,statusText:D.statusText,headers:new self.Headers};D.headers.forEach(function(Rt,jt){return lt.headers.set(jt,Rt)});var Ct=S(D.headers.get("Cache-Control")||"");Ct["no-store"]||(Ct["max-age"]&&lt.headers.set("Expires",new Date(q+1e3*Ct["max-age"]).toUTCString()),new Date(lt.headers.get("Expires")).getTime()-q<It||function(Rt,jt){if(at===void 0)try{new Response(new ReadableStream),at=!0}catch{at=!1}at?jt(Rt.body):Rt.blob().then(jt)}(D,function(Rt){var jt=new self.Response(Rt,lt);zt(),st&&st.then(function(Kt){return Kt.put($t(C.url),jt)}).catch(function(Kt){return A(Kt.message)})}))}}function $t(C){var D=C.indexOf("?");return D<0?C:C.slice(0,D)}function Wt(C,D){if(zt(),!st)return D(null);var q=$t(C.url);st.then(function(lt){lt.match(q).then(function(Ct){var Rt=function(jt){if(!jt)return!1;var Kt=new Date(jt.headers.get("Expires")||0),oe=S(jt.headers.get("Cache-Control")||"");return Kt>Date.now()&&!oe["no-cache"]}(Ct);lt.delete(q),Rt&&lt.put(q,Ct.clone()),D(null,Ct,Rt)}).catch(D)}).catch(D)}var Xt,ae=1/0;function Qt(){return Xt==null&&(Xt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Xt}var de={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(de);var ye=function(C){function D(q,lt,Ct){lt===401&&gt(Ct)&&(q+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),C.call(this,q),this.status=lt,this.url=Ct,this.name=this.constructor.name,this.message=q}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},D}(Error),ve=E()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function ie(C,D){var q,lt=new self.AbortController,Ct=new self.Request(C.url,{method:C.method||"GET",body:C.body,credentials:C.credentials,headers:C.headers,referrer:ve(),signal:lt.signal}),Rt=!1,jt=!1,Kt=(q=Ct.url).indexOf("sku=")>0&&gt(q);C.type==="json"&&Ct.headers.set("Accept","application/json");var oe=function(_e,Oe,Be){if(!jt){if(_e&&_e.message!=="SecurityError"&&A(_e),Oe&&Be)return xe(Oe);var Fe=Date.now();self.fetch(Ct).then(function(er){if(er.ok){var or=Kt?er.clone():null;return xe(er,or,Fe)}return D(new ye(er.statusText,er.status,C.url))}).catch(function(er){er.code!==20&&D(new Error(er.message))})}},xe=function(_e,Oe,Be){(C.type==="arrayBuffer"?_e.arrayBuffer():C.type==="json"?_e.json():_e.text()).then(function(Fe){jt||(Oe&&Be&&Ft(Ct,Oe,Be),Rt=!0,D(null,Fe,_e.headers.get("Cache-Control"),_e.headers.get("Expires")))}).catch(function(Fe){jt||D(new Error(Fe.message))})};return Kt?Wt(Ct,oe):oe(null,null),{cancel:function(){jt=!0,Rt||lt.abort()}}}var se=function(C,D){if(q=C.url,!(/^file:/.test(q)||/^file:/.test(ve())&&!/^\w+:/.test(q))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ie(C,D);if(E()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",C,D,void 0,!0)}var q;return function(lt,Ct){var Rt=new self.XMLHttpRequest;for(var jt in Rt.open(lt.method||"GET",lt.url,!0),lt.type==="arrayBuffer"&&(Rt.responseType="arraybuffer"),lt.headers)Rt.setRequestHeader(jt,lt.headers[jt]);return lt.type==="json"&&(Rt.responseType="text",Rt.setRequestHeader("Accept","application/json")),Rt.withCredentials=lt.credentials==="include",Rt.onerror=function(){Ct(new Error(Rt.statusText))},Rt.onload=function(){if((Rt.status>=200&&Rt.status<300||Rt.status===0)&&Rt.response!==null){var Kt=Rt.response;if(lt.type==="json")try{Kt=JSON.parse(Rt.response)}catch(oe){return Ct(oe)}Ct(null,Kt,Rt.getResponseHeader("Cache-Control"),Rt.getResponseHeader("Expires"))}else Ct(new ye(Rt.statusText,Rt.status,lt.url))},Rt.send(lt.body),{cancel:function(){return Rt.abort()}}}(C,D)},ke=function(C,D){return se(u(C,{type:"arrayBuffer"}),D)},Ae=function(C,D){return se(u(C,{method:"POST"}),D)},Ie,Te;Ie=[],Te=0;var Vt=function(C,D){if(Y.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),Te>=X.MAX_PARALLEL_IMAGE_REQUESTS){var q={requestParameters:C,callback:D,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ie.push(q),q}Te++;var lt=!1,Ct=function(){if(!lt)for(lt=!0,Te--;Ie.length&&Te<X.MAX_PARALLEL_IMAGE_REQUESTS;){var jt=Ie.shift(),Kt=jt.requestParameters,oe=jt.callback;jt.cancelled||(jt.cancel=Vt(Kt,oe).cancel)}},Rt=ke(C,function(jt,Kt,oe,xe){Ct(),jt?D(jt):Kt&&(Qt()?function(_e,Oe){var Be=new self.Blob([new Uint8Array(_e)],{type:"image/png"});self.createImageBitmap(Be).then(function(Fe){Oe(null,Fe)}).catch(function(Fe){Oe(new Error("Could not load image because of "+Fe.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Kt,D):function(_e,Oe,Be,Fe){var er=new self.Image,or=self.URL;er.onload=function(){Oe(null,er),or.revokeObjectURL(er.src)},er.onerror=function(){return Oe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Tr=new self.Blob([new Uint8Array(_e)],{type:"image/png"});er.cacheControl=Be,er.expires=Fe,er.src=_e.byteLength?or.createObjectURL(Tr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Kt,D,oe,xe))});return{cancel:function(){Rt.cancel(),Ct()}}};function Zt(C,D,q){q[C]&&q[C].indexOf(D)!==-1||(q[C]=q[C]||[],q[C].push(D))}function Gt(C,D,q){if(q&&q[C]){var lt=q[C].indexOf(D);lt!==-1&&q[C].splice(lt,1)}}var Yt=function(C,D){D===void 0&&(D={}),u(this,D),this.type=C},ne=function(C){function D(q,lt){lt===void 0&&(lt={}),C.call(this,"error",u({error:q},lt))}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D}(Yt),re=function(){};re.prototype.on=function(C,D){return this._listeners=this._listeners||{},Zt(C,D,this._listeners),this},re.prototype.off=function(C,D){return Gt(C,D,this._listeners),Gt(C,D,this._oneTimeListeners),this},re.prototype.once=function(C,D){return this._oneTimeListeners=this._oneTimeListeners||{},Zt(C,D,this._oneTimeListeners),this},re.prototype.fire=function(C,D){typeof C=="string"&&(C=new Yt(C,D||{}));var q=C.type;if(this.listens(q)){C.target=this;for(var lt=0,Ct=this._listeners&&this._listeners[q]?this._listeners[q].slice():[];lt<Ct.length;lt+=1)Ct[lt].call(this,C);for(var Rt=0,jt=this._oneTimeListeners&&this._oneTimeListeners[q]?this._oneTimeListeners[q].slice():[];Rt<jt.length;Rt+=1){var Kt=jt[Rt];Gt(q,Kt,this._oneTimeListeners),Kt.call(this,C)}var oe=this._eventedParent;oe&&(u(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),oe.fire(C))}else C instanceof ne&&console.error(C.error);return this},re.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},re.prototype.setEventedParent=function(C,D){return this._eventedParent=C,this._eventedParentData=D,this};var Pt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Nt=function(C,D,q,lt){this.message=(C?C+": ":"")+q,lt&&(this.identifier=lt),D!=null&&D.__line__&&(this.line=D.__line__)};function ee(C){var D=C.key,q=C.value;return q?[new Nt(D,q,"constants have been deprecated as of v8")]:[]}function te(C){for(var D=[],q=arguments.length-1;q-- >0;)D[q]=arguments[q+1];for(var lt=0,Ct=D;lt<Ct.length;lt+=1){var Rt=Ct[lt];for(var jt in Rt)C[jt]=Rt[jt]}return C}function ge(C){return C instanceof Number||C instanceof String||C instanceof Boolean?C.valueOf():C}function pe(C){if(Array.isArray(C))return C.map(pe);if(C instanceof Object&&!(C instanceof Number||C instanceof String||C instanceof Boolean)){var D={};for(var q in C)D[q]=pe(C[q]);return D}return ge(C)}var me=function(C){function D(q,lt){C.call(this,lt),this.message=lt,this.key=q}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D}(Error),ce=function(C,D){D===void 0&&(D=[]),this.parent=C,this.bindings={};for(var q=0,lt=D;q<lt.length;q+=1){var Ct=lt[q],Rt=Ct[0],jt=Ct[1];this.bindings[Rt]=jt}};ce.prototype.concat=function(C){return new ce(this,C)},ce.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},ce.prototype.has=function(C){return!!this.bindings[C]||!!this.parent&&this.parent.has(C)};var we={kind:"null"},ue={kind:"number"},he={kind:"string"},be={kind:"boolean"},Pe={kind:"color"},De={kind:"object"},Ue={kind:"value"},tr={kind:"collator"},Ge={kind:"formatted"},Ze={kind:"resolvedImage"};function We(C,D){return{kind:"array",itemType:C,N:D}}function pr(C){if(C.kind==="array"){var D=pr(C.itemType);return typeof C.N=="number"?"array<"+D+", "+C.N+">":C.itemType.kind==="value"?"array":"array<"+D+">"}return C.kind}var xr=[we,ue,he,be,Pe,Ge,De,We(Ue),Ze];function sr(C,D){if(D.kind==="error")return null;if(C.kind==="array"){if(D.kind==="array"&&(D.N===0&&D.itemType.kind==="value"||!sr(C.itemType,D.itemType))&&(typeof C.N!="number"||C.N===D.N))return null}else{if(C.kind===D.kind)return null;if(C.kind==="value"){for(var q=0,lt=xr;q<lt.length;q+=1)if(!sr(lt[q],D))return null}}return"Expected "+pr(C)+" but found "+pr(D)+" instead."}function $e(C,D){return D.some(function(q){return q.kind===C.kind})}function ir(C,D){return D.some(function(q){return q==="null"?C===null:q==="array"?Array.isArray(C):q==="object"?C&&!Array.isArray(C)&&typeof C=="object":q===typeof C})}var Ke=m(function(C,D){var q={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function lt(oe){return(oe=Math.round(oe))<0?0:oe>255?255:oe}function Ct(oe){return oe<0?0:oe>1?1:oe}function Rt(oe){return oe[oe.length-1]==="%"?lt(parseFloat(oe)/100*255):lt(parseInt(oe))}function jt(oe){return oe[oe.length-1]==="%"?Ct(parseFloat(oe)/100):Ct(parseFloat(oe))}function Kt(oe,xe,_e){return _e<0?_e+=1:_e>1&&(_e-=1),6*_e<1?oe+(xe-oe)*_e*6:2*_e<1?xe:3*_e<2?oe+(xe-oe)*(2/3-_e)*6:oe}try{D.parseCSSColor=function(oe){var xe,_e=oe.replace(/ /g,"").toLowerCase();if(_e in q)return q[_e].slice();if(_e[0]==="#")return _e.length===4?(xe=parseInt(_e.substr(1),16))>=0&&xe<=4095?[(3840&xe)>>4|(3840&xe)>>8,240&xe|(240&xe)>>4,15&xe|(15&xe)<<4,1]:null:_e.length===7&&(xe=parseInt(_e.substr(1),16))>=0&&xe<=16777215?[(16711680&xe)>>16,(65280&xe)>>8,255&xe,1]:null;var Oe=_e.indexOf("("),Be=_e.indexOf(")");if(Oe!==-1&&Be+1===_e.length){var Fe=_e.substr(0,Oe),er=_e.substr(Oe+1,Be-(Oe+1)).split(","),or=1;switch(Fe){case"rgba":if(er.length!==4)return null;or=jt(er.pop());case"rgb":return er.length!==3?null:[Rt(er[0]),Rt(er[1]),Rt(er[2]),or];case"hsla":if(er.length!==4)return null;or=jt(er.pop());case"hsl":if(er.length!==3)return null;var Tr=(parseFloat(er[0])%360+360)%360/360,kr=jt(er[1]),Or=jt(er[2]),Rr=Or<=.5?Or*(kr+1):Or+kr-Or*kr,Ur=2*Or-Rr;return[lt(255*Kt(Ur,Rr,Tr+1/3)),lt(255*Kt(Ur,Rr,Tr)),lt(255*Kt(Ur,Rr,Tr-1/3)),or];default:return null}}return null}}catch{}}),ar=Ke.parseCSSColor,fr=function(C,D,q,lt){lt===void 0&&(lt=1),this.r=C,this.g=D,this.b=q,this.a=lt};fr.parse=function(C){if(C){if(C instanceof fr)return C;if(typeof C=="string"){var D=ar(C);if(D)return new fr(D[0]/255*D[3],D[1]/255*D[3],D[2]/255*D[3],D[3])}}},fr.prototype.toString=function(){var C=this.toArray(),D=C[0],q=C[1],lt=C[2],Ct=C[3];return"rgba("+Math.round(D)+","+Math.round(q)+","+Math.round(lt)+","+Ct+")"},fr.prototype.toArray=function(){var C=this,D=C.r,q=C.g,lt=C.b,Ct=C.a;return Ct===0?[0,0,0,0]:[255*D/Ct,255*q/Ct,255*lt/Ct,Ct]},fr.black=new fr(0,0,0,1),fr.white=new fr(1,1,1,1),fr.transparent=new fr(0,0,0,0),fr.red=new fr(1,0,0,1);var mr=function(C,D,q){this.sensitivity=C?D?"variant":"case":D?"accent":"base",this.locale=q,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};mr.prototype.compare=function(C,D){return this.collator.compare(C,D)},mr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Cr=function(C,D,q,lt,Ct){this.text=C,this.image=D,this.scale=q,this.fontStack=lt,this.textColor=Ct},Er=function(C){this.sections=C};Er.fromString=function(C){return new Er([new Cr(C,null,null,null,null)])},Er.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},Er.factory=function(C){return C instanceof Er?C:Er.fromString(C)},Er.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},Er.prototype.serialize=function(){for(var C=["format"],D=0,q=this.sections;D<q.length;D+=1){var lt=q[D];if(lt.image)C.push(["image",lt.image.name]);else{C.push(lt.text);var Ct={};lt.fontStack&&(Ct["text-font"]=["literal",lt.fontStack.split(",")]),lt.scale&&(Ct["font-scale"]=lt.scale),lt.textColor&&(Ct["text-color"]=["rgba"].concat(lt.textColor.toArray())),C.push(Ct)}}return C};var _r=function(C){this.name=C.name,this.available=C.available};function Sr(C,D,q,lt){return typeof C=="number"&&C>=0&&C<=255&&typeof D=="number"&&D>=0&&D<=255&&typeof q=="number"&&q>=0&&q<=255?lt===void 0||typeof lt=="number"&&lt>=0&&lt<=1?null:"Invalid rgba value ["+[C,D,q,lt].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof lt=="number"?[C,D,q,lt]:[C,D,q]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Xr(C){if(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number"||C instanceof fr||C instanceof mr||C instanceof Er||C instanceof _r)return!0;if(Array.isArray(C)){for(var D=0,q=C;D<q.length;D+=1)if(!Xr(q[D]))return!1;return!0}if(typeof C=="object"){for(var lt in C)if(!Xr(C[lt]))return!1;return!0}return!1}function en(C){if(C===null)return we;if(typeof C=="string")return he;if(typeof C=="boolean")return be;if(typeof C=="number")return ue;if(C instanceof fr)return Pe;if(C instanceof mr)return tr;if(C instanceof Er)return Ge;if(C instanceof _r)return Ze;if(Array.isArray(C)){for(var D,q=C.length,lt=0,Ct=C;lt<Ct.length;lt+=1){var Rt=en(Ct[lt]);if(D){if(D===Rt)continue;D=Ue;break}D=Rt}return We(D||Ue,q)}return De}function sn(C){var D=typeof C;return C===null?"":D==="string"||D==="number"||D==="boolean"?String(C):C instanceof fr||C instanceof Er||C instanceof _r?C.toString():JSON.stringify(C)}_r.prototype.toString=function(){return this.name},_r.fromString=function(C){return C?new _r({name:C,available:!1}):null},_r.prototype.serialize=function(){return["image",this.name]};var tn=function(C,D){this.type=C,this.value=D};tn.parse=function(C,D){if(C.length!==2)return D.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!Xr(C[1]))return D.error("invalid value");var q=C[1],lt=en(q),Ct=D.expectedType;return lt.kind!=="array"||lt.N!==0||!Ct||Ct.kind!=="array"||typeof Ct.N=="number"&&Ct.N!==0||(lt=Ct),new tn(lt,q)},tn.prototype.evaluate=function(){return this.value},tn.prototype.eachChild=function(){},tn.prototype.outputDefined=function(){return!0},tn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof fr?["rgba"].concat(this.value.toArray()):this.value instanceof Er?this.value.serialize():this.value};var qr=function(C){this.name="ExpressionEvaluationError",this.message=C};qr.prototype.toJSON=function(){return this.message};var vn={string:he,number:ue,boolean:be,object:De},je=function(C,D){this.type=C,this.args=D};je.parse=function(C,D){if(C.length<2)return D.error("Expected at least one argument.");var q,lt=1,Ct=C[0];if(Ct==="array"){var Rt,jt;if(C.length>2){var Kt=C[1];if(typeof Kt!="string"||!(Kt in vn)||Kt==="object")return D.error('The item type argument of "array" must be one of string, number, boolean',1);Rt=vn[Kt],lt++}else Rt=Ue;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return D.error('The length argument to "array" must be a positive integer literal',2);jt=C[2],lt++}q=We(Rt,jt)}else q=vn[Ct];for(var oe=[];lt<C.length;lt++){var xe=D.parse(C[lt],lt,Ue);if(!xe)return null;oe.push(xe)}return new je(q,oe)},je.prototype.evaluate=function(C){for(var D=0;D<this.args.length;D++){var q=this.args[D].evaluate(C);if(!sr(this.type,en(q)))return q;if(D===this.args.length-1)throw new qr("Expected value to be of type "+pr(this.type)+", but found "+pr(en(q))+" instead.")}return null},je.prototype.eachChild=function(C){this.args.forEach(C)},je.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},je.prototype.serialize=function(){var C=this.type,D=[C.kind];if(C.kind==="array"){var q=C.itemType;if(q.kind==="string"||q.kind==="number"||q.kind==="boolean"){D.push(q.kind);var lt=C.N;(typeof lt=="number"||this.args.length>1)&&D.push(lt)}}return D.concat(this.args.map(function(Ct){return Ct.serialize()}))};var nr=function(C){this.type=Ge,this.sections=C};nr.parse=function(C,D){if(C.length<2)return D.error("Expected at least one argument.");var q=C[1];if(!Array.isArray(q)&&typeof q=="object")return D.error("First argument must be an image or text section.");for(var lt=[],Ct=!1,Rt=1;Rt<=C.length-1;++Rt){var jt=C[Rt];if(Ct&&typeof jt=="object"&&!Array.isArray(jt)){Ct=!1;var Kt=null;if(jt["font-scale"]&&!(Kt=D.parse(jt["font-scale"],1,ue)))return null;var oe=null;if(jt["text-font"]&&!(oe=D.parse(jt["text-font"],1,We(he))))return null;var xe=null;if(jt["text-color"]&&!(xe=D.parse(jt["text-color"],1,Pe)))return null;var _e=lt[lt.length-1];_e.scale=Kt,_e.font=oe,_e.textColor=xe}else{var Oe=D.parse(C[Rt],1,Ue);if(!Oe)return null;var Be=Oe.type.kind;if(Be!=="string"&&Be!=="value"&&Be!=="null"&&Be!=="resolvedImage")return D.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ct=!0,lt.push({content:Oe,scale:null,font:null,textColor:null})}}return new nr(lt)},nr.prototype.evaluate=function(C){return new Er(this.sections.map(function(D){var q=D.content.evaluate(C);return en(q)===Ze?new Cr("",q,null,null,null):new Cr(sn(q),null,D.scale?D.scale.evaluate(C):null,D.font?D.font.evaluate(C).join(","):null,D.textColor?D.textColor.evaluate(C):null)}))},nr.prototype.eachChild=function(C){for(var D=0,q=this.sections;D<q.length;D+=1){var lt=q[D];C(lt.content),lt.scale&&C(lt.scale),lt.font&&C(lt.font),lt.textColor&&C(lt.textColor)}},nr.prototype.outputDefined=function(){return!1},nr.prototype.serialize=function(){for(var C=["format"],D=0,q=this.sections;D<q.length;D+=1){var lt=q[D];C.push(lt.content.serialize());var Ct={};lt.scale&&(Ct["font-scale"]=lt.scale.serialize()),lt.font&&(Ct["text-font"]=lt.font.serialize()),lt.textColor&&(Ct["text-color"]=lt.textColor.serialize()),C.push(Ct)}return C};var hr=function(C){this.type=Ze,this.input=C};hr.parse=function(C,D){if(C.length!==2)return D.error("Expected two arguments.");var q=D.parse(C[1],1,he);return q?new hr(q):D.error("No image name provided.")},hr.prototype.evaluate=function(C){var D=this.input.evaluate(C),q=_r.fromString(D);return q&&C.availableImages&&(q.available=C.availableImages.indexOf(D)>-1),q},hr.prototype.eachChild=function(C){C(this.input)},hr.prototype.outputDefined=function(){return!1},hr.prototype.serialize=function(){return["image",this.input.serialize()]};var gr={"to-boolean":be,"to-color":Pe,"to-number":ue,"to-string":he},Mr=function(C,D){this.type=C,this.args=D};Mr.parse=function(C,D){if(C.length<2)return D.error("Expected at least one argument.");var q=C[0];if((q==="to-boolean"||q==="to-string")&&C.length!==2)return D.error("Expected one argument.");for(var lt=gr[q],Ct=[],Rt=1;Rt<C.length;Rt++){var jt=D.parse(C[Rt],Rt,Ue);if(!jt)return null;Ct.push(jt)}return new Mr(lt,Ct)},Mr.prototype.evaluate=function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var D,q,lt=0,Ct=this.args;lt<Ct.length;lt+=1){if(q=null,(D=Ct[lt].evaluate(C))instanceof fr)return D;if(typeof D=="string"){var Rt=C.parseColor(D);if(Rt)return Rt}else if(Array.isArray(D)&&!(q=D.length<3||D.length>4?"Invalid rbga value "+JSON.stringify(D)+": expected an array containing either three or four numeric values.":Sr(D[0],D[1],D[2],D[3])))return new fr(D[0]/255,D[1]/255,D[2]/255,D[3])}throw new qr(q||"Could not parse color from value '"+(typeof D=="string"?D:String(JSON.stringify(D)))+"'")}if(this.type.kind==="number"){for(var jt=null,Kt=0,oe=this.args;Kt<oe.length;Kt+=1){if((jt=oe[Kt].evaluate(C))===null)return 0;var xe=Number(jt);if(!isNaN(xe))return xe}throw new qr("Could not convert "+JSON.stringify(jt)+" to number.")}return this.type.kind==="formatted"?Er.fromString(sn(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?_r.fromString(sn(this.args[0].evaluate(C))):sn(this.args[0].evaluate(C))},Mr.prototype.eachChild=function(C){this.args.forEach(C)},Mr.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Mr.prototype.serialize=function(){if(this.type.kind==="formatted")return new nr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new hr(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(D){C.push(D.serialize())}),C};var Hr=["Unknown","Point","LineString","Polygon"],Pr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Pr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Pr.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Hr[this.feature.type]:this.feature.type:null},Pr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Pr.prototype.canonicalID=function(){return this.canonical},Pr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Pr.prototype.parseColor=function(C){var D=this._parseColorCache[C];return D||(D=this._parseColorCache[C]=fr.parse(C)),D};var Dr=function(C,D,q,lt){this.name=C,this.type=D,this._evaluate=q,this.args=lt};Dr.prototype.evaluate=function(C){return this._evaluate(C,this.args)},Dr.prototype.eachChild=function(C){this.args.forEach(C)},Dr.prototype.outputDefined=function(){return!1},Dr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},Dr.parse=function(C,D){var q,lt=C[0],Ct=Dr.definitions[lt];if(!Ct)return D.error('Unknown expression "'+lt+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Rt=Array.isArray(Ct)?Ct[0]:Ct.type,jt=Array.isArray(Ct)?[[Ct[1],Ct[2]]]:Ct.overloads,Kt=jt.filter(function(Bn){var Cn=Bn[0];return!Array.isArray(Cn)||Cn.length===C.length-1}),oe=null,xe=0,_e=Kt;xe<_e.length;xe+=1){var Oe=_e[xe],Be=Oe[0],Fe=Oe[1];oe=new nn(D.registry,D.path,null,D.scope);for(var er=[],or=!1,Tr=1;Tr<C.length;Tr++){var kr=C[Tr],Or=Array.isArray(Be)?Be[Tr-1]:Be.type,Rr=oe.parse(kr,1+er.length,Or);if(!Rr){or=!0;break}er.push(Rr)}if(!or)if(Array.isArray(Be)&&Be.length!==er.length)oe.error("Expected "+Be.length+" arguments, but found "+er.length+" instead.");else{for(var Ur=0;Ur<er.length;Ur++){var Wr=Array.isArray(Be)?Be[Ur]:Be.type,Jr=er[Ur];oe.concat(Ur+1).checkSubtype(Wr,Jr.type)}if(oe.errors.length===0)return new Dr(lt,Rt,Fe,er)}}if(Kt.length===1)(q=D.errors).push.apply(q,oe.errors);else{for(var gn=(Kt.length?Kt:jt).map(function(Bn){return Cn=Bn[0],Array.isArray(Cn)?"("+Cn.map(pr).join(", ")+")":"("+pr(Cn.type)+"...)";var Cn}).join(" | "),un=[],yn=1;yn<C.length;yn++){var Tn=D.parse(C[yn],1+un.length);if(!Tn)return null;un.push(pr(Tn.type))}D.error("Expected arguments of type "+gn+", but found ("+un.join(", ")+") instead.")}return null},Dr.register=function(C,D){for(var q in Dr.definitions=D,D)C[q]=Dr};var Qr=function(C,D,q){this.type=tr,this.locale=q,this.caseSensitive=C,this.diacriticSensitive=D};Qr.parse=function(C,D){if(C.length!==2)return D.error("Expected one argument.");var q=C[1];if(typeof q!="object"||Array.isArray(q))return D.error("Collator options argument must be an object.");var lt=D.parse(q["case-sensitive"]!==void 0&&q["case-sensitive"],1,be);if(!lt)return null;var Ct=D.parse(q["diacritic-sensitive"]!==void 0&&q["diacritic-sensitive"],1,be);if(!Ct)return null;var Rt=null;return q.locale&&!(Rt=D.parse(q.locale,1,he))?null:new Qr(lt,Ct,Rt)},Qr.prototype.evaluate=function(C){return new mr(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},Qr.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},Qr.prototype.outputDefined=function(){return!1},Qr.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var He=8192;function wr(C,D){C[0]=Math.min(C[0],D[0]),C[1]=Math.min(C[1],D[1]),C[2]=Math.max(C[2],D[0]),C[3]=Math.max(C[3],D[1])}function Me(C,D){return!(C[0]<=D[0]||C[2]>=D[2]||C[1]<=D[1]||C[3]>=D[3])}function qe(C,D){var q,lt=(180+C[0])/360,Ct=(q=C[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+q*Math.PI/360)))/360),Rt=Math.pow(2,D.z);return[Math.round(lt*Rt*He),Math.round(Ct*Rt*He)]}function Qe(C,D,q){return D[1]>C[1]!=q[1]>C[1]&&C[0]<(q[0]-D[0])*(C[1]-D[1])/(q[1]-D[1])+D[0]}function yr(C,D){for(var q=!1,lt=0,Ct=D.length;lt<Ct;lt++)for(var Rt=D[lt],jt=0,Kt=Rt.length;jt<Kt-1;jt++){if(oe=C,xe=Rt[jt],_e=Rt[jt+1],Oe=void 0,Be=void 0,Fe=void 0,er=void 0,Oe=oe[0]-xe[0],Be=oe[1]-xe[1],Fe=oe[0]-_e[0],er=oe[1]-_e[1],Oe*er-Fe*Be==0&&Oe*Fe<=0&&Be*er<=0)return!1;Qe(C,Rt[jt],Rt[jt+1])&&(q=!q)}var oe,xe,_e,Oe,Be,Fe,er;return q}function br(C,D){for(var q=0;q<D.length;q++)if(yr(C,D[q]))return!0;return!1}function Ar(C,D,q,lt){var Ct=C[0]-q[0],Rt=C[1]-q[1],jt=D[0]-q[0],Kt=D[1]-q[1],oe=lt[0]-q[0],xe=lt[1]-q[1],_e=Ct*xe-oe*Rt,Oe=jt*xe-oe*Kt;return _e>0&&Oe<0||_e<0&&Oe>0}function cr(C,D,q){for(var lt=0,Ct=q;lt<Ct.length;lt+=1)for(var Rt=Ct[lt],jt=0;jt<Rt.length-1;++jt)if(Kt=C,oe=D,xe=Rt[jt],_e=Rt[jt+1],Oe=void 0,Be=void 0,Fe=void 0,Fe=[oe[0]-Kt[0],oe[1]-Kt[1]],Oe=[_e[0]-xe[0],_e[1]-xe[1]],Be=Fe,Oe[0]*Be[1]-Oe[1]*Be[0]!=0&&Ar(Kt,oe,xe,_e)&&Ar(xe,_e,Kt,oe))return!0;var Kt,oe,xe,_e,Oe,Be,Fe;return!1}function Xe(C,D){for(var q=0;q<C.length;++q)if(!yr(C[q],D))return!1;for(var lt=0;lt<C.length-1;++lt)if(cr(C[lt],C[lt+1],D))return!1;return!0}function Je(C,D){for(var q=0;q<D.length;q++)if(Xe(C,D[q]))return!0;return!1}function lr(C,D,q){for(var lt=[],Ct=0;Ct<C.length;Ct++){for(var Rt=[],jt=0;jt<C[Ct].length;jt++){var Kt=qe(C[Ct][jt],q);wr(D,Kt),Rt.push(Kt)}lt.push(Rt)}return lt}function ur(C,D,q){for(var lt=[],Ct=0;Ct<C.length;Ct++){var Rt=lr(C[Ct],D,q);lt.push(Rt)}return lt}function Lr(C,D,q,lt){if(C[0]<q[0]||C[0]>q[2]){var Ct=.5*lt,Rt=C[0]-q[0]>Ct?-lt:q[0]-C[0]>Ct?lt:0;Rt===0&&(Rt=C[0]-q[2]>Ct?-lt:q[2]-C[0]>Ct?lt:0),C[0]+=Rt}wr(D,C)}function Ir(C,D,q,lt){for(var Ct=Math.pow(2,lt.z)*He,Rt=[lt.x*He,lt.y*He],jt=[],Kt=0,oe=C;Kt<oe.length;Kt+=1)for(var xe=0,_e=oe[Kt];xe<_e.length;xe+=1){var Oe=_e[xe],Be=[Oe.x+Rt[0],Oe.y+Rt[1]];Lr(Be,D,q,Ct),jt.push(Be)}return jt}function Gr(C,D,q,lt){for(var Ct=Math.pow(2,lt.z)*He,Rt=[lt.x*He,lt.y*He],jt=[],Kt=0,oe=C;Kt<oe.length;Kt+=1){for(var xe=[],_e=0,Oe=oe[Kt];_e<Oe.length;_e+=1){var Be=Oe[_e],Fe=[Be.x+Rt[0],Be.y+Rt[1]];wr(D,Fe),xe.push(Fe)}jt.push(xe)}if(D[2]-D[0]<=Ct/2){(Or=D)[0]=Or[1]=1/0,Or[2]=Or[3]=-1/0;for(var er=0,or=jt;er<or.length;er+=1)for(var Tr=0,kr=or[er];Tr<kr.length;Tr+=1)Lr(kr[Tr],D,q,Ct)}var Or;return jt}var Nr=function(C,D){this.type=be,this.geojson=C,this.geometries=D};function Kr(C){if(C instanceof Dr&&(C.name==="get"&&C.args.length===1||C.name==="feature-state"||C.name==="has"&&C.args.length===1||C.name==="properties"||C.name==="geometry-type"||C.name==="id"||/^filter-/.test(C.name))||C instanceof Nr)return!1;var D=!0;return C.eachChild(function(q){D&&!Kr(q)&&(D=!1)}),D}function Vr(C){if(C instanceof Dr&&C.name==="feature-state")return!1;var D=!0;return C.eachChild(function(q){D&&!Vr(q)&&(D=!1)}),D}function an(C,D){if(C instanceof Dr&&D.indexOf(C.name)>=0)return!1;var q=!0;return C.eachChild(function(lt){q&&!an(lt,D)&&(q=!1)}),q}Nr.parse=function(C,D){if(C.length!==2)return D.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(Xr(C[1])){var q=C[1];if(q.type==="FeatureCollection")for(var lt=0;lt<q.features.length;++lt){var Ct=q.features[lt].geometry.type;if(Ct==="Polygon"||Ct==="MultiPolygon")return new Nr(q,q.features[lt].geometry)}else if(q.type==="Feature"){var Rt=q.geometry.type;if(Rt==="Polygon"||Rt==="MultiPolygon")return new Nr(q,q.geometry)}else if(q.type==="Polygon"||q.type==="MultiPolygon")return new Nr(q,q)}return D.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Nr.prototype.evaluate=function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return function(D,q){var lt=[1/0,1/0,-1/0,-1/0],Ct=[1/0,1/0,-1/0,-1/0],Rt=D.canonicalID();if(q.type==="Polygon"){var jt=lr(q.coordinates,Ct,Rt),Kt=Ir(D.geometry(),lt,Ct,Rt);if(!Me(lt,Ct))return!1;for(var oe=0,xe=Kt;oe<xe.length;oe+=1)if(!yr(xe[oe],jt))return!1}if(q.type==="MultiPolygon"){var _e=ur(q.coordinates,Ct,Rt),Oe=Ir(D.geometry(),lt,Ct,Rt);if(!Me(lt,Ct))return!1;for(var Be=0,Fe=Oe;Be<Fe.length;Be+=1)if(!br(Fe[Be],_e))return!1}return!0}(C,this.geometries);if(C.geometryType()==="LineString")return function(D,q){var lt=[1/0,1/0,-1/0,-1/0],Ct=[1/0,1/0,-1/0,-1/0],Rt=D.canonicalID();if(q.type==="Polygon"){var jt=lr(q.coordinates,Ct,Rt),Kt=Gr(D.geometry(),lt,Ct,Rt);if(!Me(lt,Ct))return!1;for(var oe=0,xe=Kt;oe<xe.length;oe+=1)if(!Xe(xe[oe],jt))return!1}if(q.type==="MultiPolygon"){var _e=ur(q.coordinates,Ct,Rt),Oe=Gr(D.geometry(),lt,Ct,Rt);if(!Me(lt,Ct))return!1;for(var Be=0,Fe=Oe;Be<Fe.length;Be+=1)if(!Je(Fe[Be],_e))return!1}return!0}(C,this.geometries)}return!1},Nr.prototype.eachChild=function(){},Nr.prototype.outputDefined=function(){return!0},Nr.prototype.serialize=function(){return["within",this.geojson]};var rn=function(C,D){this.type=D.type,this.name=C,this.boundExpression=D};rn.parse=function(C,D){if(C.length!==2||typeof C[1]!="string")return D.error("'var' expression requires exactly one string literal argument.");var q=C[1];return D.scope.has(q)?new rn(q,D.scope.get(q)):D.error('Unknown variable "'+q+'". Make sure "'+q+'" has been bound in an enclosing "let" expression before using it.',1)},rn.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},rn.prototype.eachChild=function(){},rn.prototype.outputDefined=function(){return!1},rn.prototype.serialize=function(){return["var",this.name]};var nn=function(C,D,q,lt,Ct){D===void 0&&(D=[]),lt===void 0&&(lt=new ce),Ct===void 0&&(Ct=[]),this.registry=C,this.path=D,this.key=D.map(function(Rt){return"["+Rt+"]"}).join(""),this.scope=lt,this.errors=Ct,this.expectedType=q};function hn(C){if(C instanceof rn)return hn(C.boundExpression);if(C instanceof Dr&&C.name==="error"||C instanceof Qr||C instanceof Nr)return!1;var D=C instanceof Mr||C instanceof je,q=!0;return C.eachChild(function(lt){q=D?q&&hn(lt):q&&lt instanceof tn}),!!q&&Kr(C)&&an(C,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function fn(C,D){for(var q,lt,Ct=C.length-1,Rt=0,jt=Ct,Kt=0;Rt<=jt;)if(q=C[Kt=Math.floor((Rt+jt)/2)],lt=C[Kt+1],q<=D){if(Kt===Ct||D<lt)return Kt;Rt=Kt+1}else{if(!(q>D))throw new qr("Input is not a number.");jt=Kt-1}return 0}nn.prototype.parse=function(C,D,q,lt,Ct){return Ct===void 0&&(Ct={}),D?this.concat(D,q,lt)._parse(C,Ct):this._parse(C,Ct)},nn.prototype._parse=function(C,D){function q(xe,_e,Oe){return Oe==="assert"?new je(_e,[xe]):Oe==="coerce"?new Mr(_e,[xe]):xe}if(C!==null&&typeof C!="string"&&typeof C!="boolean"&&typeof C!="number"||(C=["literal",C]),Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var lt=C[0];if(typeof lt!="string")return this.error("Expression name must be a string, but found "+typeof lt+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Ct=this.registry[lt];if(Ct){var Rt=Ct.parse(C,this);if(!Rt)return null;if(this.expectedType){var jt=this.expectedType,Kt=Rt.type;if(jt.kind!=="string"&&jt.kind!=="number"&&jt.kind!=="boolean"&&jt.kind!=="object"&&jt.kind!=="array"||Kt.kind!=="value")if(jt.kind!=="color"&&jt.kind!=="formatted"&&jt.kind!=="resolvedImage"||Kt.kind!=="value"&&Kt.kind!=="string"){if(this.checkSubtype(jt,Kt))return null}else Rt=q(Rt,jt,D.typeAnnotation||"coerce");else Rt=q(Rt,jt,D.typeAnnotation||"assert")}if(!(Rt instanceof tn)&&Rt.type.kind!=="resolvedImage"&&hn(Rt)){var oe=new Pr;try{Rt=new tn(Rt.type,Rt.evaluate(oe))}catch(xe){return this.error(xe.message),null}}return Rt}return this.error('Unknown expression "'+lt+'". If you wanted a literal array, use ["literal", [...]].',0)}return C===void 0?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},nn.prototype.concat=function(C,D,q){var lt=typeof C=="number"?this.path.concat(C):this.path,Ct=q?this.scope.concat(q):this.scope;return new nn(this.registry,lt,D||null,Ct,this.errors)},nn.prototype.error=function(C){for(var D=[],q=arguments.length-1;q-- >0;)D[q]=arguments[q+1];var lt=""+this.key+D.map(function(Ct){return"["+Ct+"]"}).join("");this.errors.push(new me(lt,C))},nn.prototype.checkSubtype=function(C,D){var q=sr(C,D);return q&&this.error(q),q};var kn=function(C,D,q){this.type=C,this.input=D,this.labels=[],this.outputs=[];for(var lt=0,Ct=q;lt<Ct.length;lt+=1){var Rt=Ct[lt],jt=Rt[0],Kt=Rt[1];this.labels.push(jt),this.outputs.push(Kt)}};function Yr(C,D,q){return C*(1-q)+D*q}kn.parse=function(C,D){if(C.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return D.error("Expected an even number of arguments.");var q=D.parse(C[1],1,ue);if(!q)return null;var lt=[],Ct=null;D.expectedType&&D.expectedType.kind!=="value"&&(Ct=D.expectedType);for(var Rt=1;Rt<C.length;Rt+=2){var jt=Rt===1?-1/0:C[Rt],Kt=C[Rt+1],oe=Rt,xe=Rt+1;if(typeof jt!="number")return D.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(lt.length&&lt[lt.length-1][0]>=jt)return D.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',oe);var _e=D.parse(Kt,xe,Ct);if(!_e)return null;Ct=Ct||_e.type,lt.push([jt,_e])}return new kn(Ct,q,lt)},kn.prototype.evaluate=function(C){var D=this.labels,q=this.outputs;if(D.length===1)return q[0].evaluate(C);var lt=this.input.evaluate(C);if(lt<=D[0])return q[0].evaluate(C);var Ct=D.length;return lt>=D[Ct-1]?q[Ct-1].evaluate(C):q[fn(D,lt)].evaluate(C)},kn.prototype.eachChild=function(C){C(this.input);for(var D=0,q=this.outputs;D<q.length;D+=1)C(q[D])},kn.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},kn.prototype.serialize=function(){for(var C=["step",this.input.serialize()],D=0;D<this.labels.length;D++)D>0&&C.push(this.labels[D]),C.push(this.outputs[D].serialize());return C};var mn=Object.freeze({__proto__:null,number:Yr,color:function(C,D,q){return new fr(Yr(C.r,D.r,q),Yr(C.g,D.g,q),Yr(C.b,D.b,q),Yr(C.a,D.a,q))},array:function(C,D,q){return C.map(function(lt,Ct){return Yr(lt,D[Ct],q)})}}),Sn=.95047,Xn=1,ui=1.08883,si=4/29,gi=6/29,ri=3*gi*gi,Mi=gi*gi*gi,Xa=Math.PI/180,ya=180/Math.PI;function so(C){return C>Mi?Math.pow(C,.3333333333333333):C/ri+si}function Ys(C){return C>gi?C*C*C:ri*(C-si)}function $o(C){return 255*(C<=.0031308?12.92*C:1.055*Math.pow(C,.4166666666666667)-.055)}function xs(C){return(C/=255)<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function Zs(C){var D=xs(C.r),q=xs(C.g),lt=xs(C.b),Ct=so((.4124564*D+.3575761*q+.1804375*lt)/Sn),Rt=so((.2126729*D+.7151522*q+.072175*lt)/Xn);return{l:116*Rt-16,a:500*(Ct-Rt),b:200*(Rt-so((.0193339*D+.119192*q+.9503041*lt)/ui)),alpha:C.a}}function Ka(C){var D=(C.l+16)/116,q=isNaN(C.a)?D:D+C.a/500,lt=isNaN(C.b)?D:D-C.b/200;return D=Xn*Ys(D),q=Sn*Ys(q),lt=ui*Ys(lt),new fr($o(3.2404542*q-1.5371385*D-.4985314*lt),$o(-.969266*q+1.8760108*D+.041556*lt),$o(.0556434*q-.2040259*D+1.0572252*lt),C.alpha)}function ul(C,D,q){var lt=D-C;return C+q*(lt>180||lt<-180?lt-360*Math.round(lt/360):lt)}var Ho={forward:Zs,reverse:Ka,interpolate:function(C,D,q){return{l:Yr(C.l,D.l,q),a:Yr(C.a,D.a,q),b:Yr(C.b,D.b,q),alpha:Yr(C.alpha,D.alpha,q)}}},Vo={forward:function(C){var D=Zs(C),q=D.l,lt=D.a,Ct=D.b,Rt=Math.atan2(Ct,lt)*ya;return{h:Rt<0?Rt+360:Rt,c:Math.sqrt(lt*lt+Ct*Ct),l:q,alpha:C.a}},reverse:function(C){var D=C.h*Xa,q=C.c;return Ka({l:C.l,a:Math.cos(D)*q,b:Math.sin(D)*q,alpha:C.alpha})},interpolate:function(C,D,q){return{h:ul(C.h,D.h,q),c:Yr(C.c,D.c,q),l:Yr(C.l,D.l,q),alpha:Yr(C.alpha,D.alpha,q)}}},Ja=Object.freeze({__proto__:null,lab:Ho,hcl:Vo}),Oi=function(C,D,q,lt,Ct){this.type=C,this.operator=D,this.interpolation=q,this.input=lt,this.labels=[],this.outputs=[];for(var Rt=0,jt=Ct;Rt<jt.length;Rt+=1){var Kt=jt[Rt],oe=Kt[0],xe=Kt[1];this.labels.push(oe),this.outputs.push(xe)}};function bs(C,D,q,lt){var Ct=lt-q,Rt=C-q;return Ct===0?0:D===1?Rt/Ct:(Math.pow(D,Rt)-1)/(Math.pow(D,Ct)-1)}Oi.interpolationFactor=function(C,D,q,lt){var Ct=0;if(C.name==="exponential")Ct=bs(D,C.base,q,lt);else if(C.name==="linear")Ct=bs(D,1,q,lt);else if(C.name==="cubic-bezier"){var Rt=C.controlPoints;Ct=new s(Rt[0],Rt[1],Rt[2],Rt[3]).solve(bs(D,1,q,lt))}return Ct},Oi.parse=function(C,D){var q=C[0],lt=C[1],Ct=C[2],Rt=C.slice(3);if(!Array.isArray(lt)||lt.length===0)return D.error("Expected an interpolation type expression.",1);if(lt[0]==="linear")lt={name:"linear"};else if(lt[0]==="exponential"){var jt=lt[1];if(typeof jt!="number")return D.error("Exponential interpolation requires a numeric base.",1,1);lt={name:"exponential",base:jt}}else{if(lt[0]!=="cubic-bezier")return D.error("Unknown interpolation type "+String(lt[0]),1,0);var Kt=lt.slice(1);if(Kt.length!==4||Kt.some(function(Tr){return typeof Tr!="number"||Tr<0||Tr>1}))return D.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);lt={name:"cubic-bezier",controlPoints:Kt}}if(C.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return D.error("Expected an even number of arguments.");if(!(Ct=D.parse(Ct,2,ue)))return null;var oe=[],xe=null;q==="interpolate-hcl"||q==="interpolate-lab"?xe=Pe:D.expectedType&&D.expectedType.kind!=="value"&&(xe=D.expectedType);for(var _e=0;_e<Rt.length;_e+=2){var Oe=Rt[_e],Be=Rt[_e+1],Fe=_e+3,er=_e+4;if(typeof Oe!="number")return D.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Fe);if(oe.length&&oe[oe.length-1][0]>=Oe)return D.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Fe);var or=D.parse(Be,er,xe);if(!or)return null;xe=xe||or.type,oe.push([Oe,or])}return xe.kind==="number"||xe.kind==="color"||xe.kind==="array"&&xe.itemType.kind==="number"&&typeof xe.N=="number"?new Oi(xe,q,lt,Ct,oe):D.error("Type "+pr(xe)+" is not interpolatable.")},Oi.prototype.evaluate=function(C){var D=this.labels,q=this.outputs;if(D.length===1)return q[0].evaluate(C);var lt=this.input.evaluate(C);if(lt<=D[0])return q[0].evaluate(C);var Ct=D.length;if(lt>=D[Ct-1])return q[Ct-1].evaluate(C);var Rt=fn(D,lt),jt=D[Rt],Kt=D[Rt+1],oe=Oi.interpolationFactor(this.interpolation,lt,jt,Kt),xe=q[Rt].evaluate(C),_e=q[Rt+1].evaluate(C);return this.operator==="interpolate"?mn[this.type.kind.toLowerCase()](xe,_e,oe):this.operator==="interpolate-hcl"?Vo.reverse(Vo.interpolate(Vo.forward(xe),Vo.forward(_e),oe)):Ho.reverse(Ho.interpolate(Ho.forward(xe),Ho.forward(_e),oe))},Oi.prototype.eachChild=function(C){C(this.input);for(var D=0,q=this.outputs;D<q.length;D+=1)C(q[D])},Oi.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Oi.prototype.serialize=function(){var C;C=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var D=[this.operator,C,this.input.serialize()],q=0;q<this.labels.length;q++)D.push(this.labels[q],this.outputs[q].serialize());return D};var qn=function(C,D){this.type=C,this.args=D};qn.parse=function(C,D){if(C.length<2)return D.error("Expectected at least one argument.");var q=null,lt=D.expectedType;lt&&lt.kind!=="value"&&(q=lt);for(var Ct=[],Rt=0,jt=C.slice(1);Rt<jt.length;Rt+=1){var Kt=jt[Rt],oe=D.parse(Kt,1+Ct.length,q,void 0,{typeAnnotation:"omit"});if(!oe)return null;q=q||oe.type,Ct.push(oe)}var xe=lt&&Ct.some(function(_e){return sr(lt,_e.type)});return new qn(xe?Ue:q,Ct)},qn.prototype.evaluate=function(C){for(var D,q=null,lt=0,Ct=0,Rt=this.args;Ct<Rt.length&&(lt++,(q=Rt[Ct].evaluate(C))&&q instanceof _r&&!q.available&&(D||(D=q.name),q=null,lt===this.args.length&&(q=D)),q===null);Ct+=1);return q},qn.prototype.eachChild=function(C){this.args.forEach(C)},qn.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},qn.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(D){C.push(D.serialize())}),C};var Qa=function(C,D){this.type=D.type,this.bindings=[].concat(C),this.result=D};Qa.prototype.evaluate=function(C){return this.result.evaluate(C)},Qa.prototype.eachChild=function(C){for(var D=0,q=this.bindings;D<q.length;D+=1)C(q[D][1]);C(this.result)},Qa.parse=function(C,D){if(C.length<4)return D.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var q=[],lt=1;lt<C.length-1;lt+=2){var Ct=C[lt];if(typeof Ct!="string")return D.error("Expected string, but found "+typeof Ct+" instead.",lt);if(/[^a-zA-Z0-9_]/.test(Ct))return D.error("Variable names must contain only alphanumeric characters or '_'.",lt);var Rt=D.parse(C[lt+1],lt+1);if(!Rt)return null;q.push([Ct,Rt])}var jt=D.parse(C[C.length-1],C.length-1,D.expectedType,q);return jt?new Qa(q,jt):null},Qa.prototype.outputDefined=function(){return this.result.outputDefined()},Qa.prototype.serialize=function(){for(var C=["let"],D=0,q=this.bindings;D<q.length;D+=1){var lt=q[D],Ct=lt[0],Rt=lt[1];C.push(Ct,Rt.serialize())}return C.push(this.result.serialize()),C};var Aa=function(C,D,q){this.type=C,this.index=D,this.input=q};Aa.parse=function(C,D){if(C.length!==3)return D.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var q=D.parse(C[1],1,ue),lt=D.parse(C[2],2,We(D.expectedType||Ue));if(!q||!lt)return null;var Ct=lt.type;return new Aa(Ct.itemType,q,lt)},Aa.prototype.evaluate=function(C){var D=this.index.evaluate(C),q=this.input.evaluate(C);if(D<0)throw new qr("Array index out of bounds: "+D+" < 0.");if(D>=q.length)throw new qr("Array index out of bounds: "+D+" > "+(q.length-1)+".");if(D!==Math.floor(D))throw new qr("Array index must be an integer, but found "+D+" instead.");return q[D]},Aa.prototype.eachChild=function(C){C(this.index),C(this.input)},Aa.prototype.outputDefined=function(){return!1},Aa.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var lo=function(C,D){this.type=be,this.needle=C,this.haystack=D};lo.parse=function(C,D){if(C.length!==3)return D.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var q=D.parse(C[1],1,Ue),lt=D.parse(C[2],2,Ue);return q&&lt?$e(q.type,[be,he,ue,we,Ue])?new lo(q,lt):D.error("Expected first argument to be of type boolean, string, number or null, but found "+pr(q.type)+" instead"):null},lo.prototype.evaluate=function(C){var D=this.needle.evaluate(C),q=this.haystack.evaluate(C);if(!q)return!1;if(!ir(D,["boolean","string","number","null"]))throw new qr("Expected first argument to be of type boolean, string, number or null, but found "+pr(en(D))+" instead.");if(!ir(q,["string","array"]))throw new qr("Expected second argument to be of type array or string, but found "+pr(en(q))+" instead.");return q.indexOf(D)>=0},lo.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},lo.prototype.outputDefined=function(){return!0},lo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ja=function(C,D,q){this.type=ue,this.needle=C,this.haystack=D,this.fromIndex=q};ja.parse=function(C,D){if(C.length<=2||C.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var q=D.parse(C[1],1,Ue),lt=D.parse(C[2],2,Ue);if(!q||!lt)return null;if(!$e(q.type,[be,he,ue,we,Ue]))return D.error("Expected first argument to be of type boolean, string, number or null, but found "+pr(q.type)+" instead");if(C.length===4){var Ct=D.parse(C[3],3,ue);return Ct?new ja(q,lt,Ct):null}return new ja(q,lt)},ja.prototype.evaluate=function(C){var D=this.needle.evaluate(C),q=this.haystack.evaluate(C);if(!ir(D,["boolean","string","number","null"]))throw new qr("Expected first argument to be of type boolean, string, number or null, but found "+pr(en(D))+" instead.");if(!ir(q,["string","array"]))throw new qr("Expected second argument to be of type array or string, but found "+pr(en(q))+" instead.");if(this.fromIndex){var lt=this.fromIndex.evaluate(C);return q.indexOf(D,lt)}return q.indexOf(D)},ja.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},ja.prototype.outputDefined=function(){return!1},ja.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var To=function(C,D,q,lt,Ct,Rt){this.inputType=C,this.type=D,this.input=q,this.cases=lt,this.outputs=Ct,this.otherwise=Rt};To.parse=function(C,D){if(C.length<5)return D.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!=1)return D.error("Expected an even number of arguments.");var q,lt;D.expectedType&&D.expectedType.kind!=="value"&&(lt=D.expectedType);for(var Ct={},Rt=[],jt=2;jt<C.length-1;jt+=2){var Kt=C[jt],oe=C[jt+1];Array.isArray(Kt)||(Kt=[Kt]);var xe=D.concat(jt);if(Kt.length===0)return xe.error("Expected at least one branch label.");for(var _e=0,Oe=Kt;_e<Oe.length;_e+=1){var Be=Oe[_e];if(typeof Be!="number"&&typeof Be!="string")return xe.error("Branch labels must be numbers or strings.");if(typeof Be=="number"&&Math.abs(Be)>Number.MAX_SAFE_INTEGER)return xe.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Be=="number"&&Math.floor(Be)!==Be)return xe.error("Numeric branch labels must be integer values.");if(q){if(xe.checkSubtype(q,en(Be)))return null}else q=en(Be);if(Ct[String(Be)]!==void 0)return xe.error("Branch labels must be unique.");Ct[String(Be)]=Rt.length}var Fe=D.parse(oe,jt,lt);if(!Fe)return null;lt=lt||Fe.type,Rt.push(Fe)}var er=D.parse(C[1],1,Ue);if(!er)return null;var or=D.parse(C[C.length-1],C.length-1,lt);return or?er.type.kind!=="value"&&D.concat(1).checkSubtype(q,er.type)?null:new To(q,lt,er,Ct,Rt,or):null},To.prototype.evaluate=function(C){var D=this.input.evaluate(C);return(en(D)===this.inputType&&this.outputs[this.cases[D]]||this.otherwise).evaluate(C)},To.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},To.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},To.prototype.serialize=function(){for(var C=this,D=["match",this.input.serialize()],q=[],lt={},Ct=0,Rt=Object.keys(this.cases).sort();Ct<Rt.length;Ct+=1){var jt=Rt[Ct];(Oe=lt[this.cases[jt]])===void 0?(lt[this.cases[jt]]=q.length,q.push([this.cases[jt],[jt]])):q[Oe][1].push(jt)}for(var Kt=function(Fe){return C.inputType.kind==="number"?Number(Fe):Fe},oe=0,xe=q;oe<xe.length;oe+=1){var _e=xe[oe],Oe=_e[0],Be=_e[1];Be.length===1?D.push(Kt(Be[0])):D.push(Be.map(Kt)),D.push(this.outputs[outputIndex$1].serialize())}return D.push(this.otherwise.serialize()),D};var co=function(C,D,q){this.type=C,this.branches=D,this.otherwise=q};co.parse=function(C,D){if(C.length<4)return D.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!=0)return D.error("Expected an odd number of arguments.");var q;D.expectedType&&D.expectedType.kind!=="value"&&(q=D.expectedType);for(var lt=[],Ct=1;Ct<C.length-1;Ct+=2){var Rt=D.parse(C[Ct],Ct,be);if(!Rt)return null;var jt=D.parse(C[Ct+1],Ct+1,q);if(!jt)return null;lt.push([Rt,jt]),q=q||jt.type}var Kt=D.parse(C[C.length-1],C.length-1,q);return Kt?new co(q,lt,Kt):null},co.prototype.evaluate=function(C){for(var D=0,q=this.branches;D<q.length;D+=1){var lt=q[D],Ct=lt[0],Rt=lt[1];if(Ct.evaluate(C))return Rt.evaluate(C)}return this.otherwise.evaluate(C)},co.prototype.eachChild=function(C){for(var D=0,q=this.branches;D<q.length;D+=1){var lt=q[D],Ct=lt[0],Rt=lt[1];C(Ct),C(Rt)}C(this.otherwise)},co.prototype.outputDefined=function(){return this.branches.every(function(C){return C[0],C[1].outputDefined()})&&this.otherwise.outputDefined()},co.prototype.serialize=function(){var C=["case"];return this.eachChild(function(D){C.push(D.serialize())}),C};var uo=function(C,D,q,lt){this.type=C,this.input=D,this.beginIndex=q,this.endIndex=lt};function Fs(C,D){return C==="=="||C==="!="?D.kind==="boolean"||D.kind==="string"||D.kind==="number"||D.kind==="null"||D.kind==="value":D.kind==="string"||D.kind==="number"||D.kind==="value"}function hl(C,D,q,lt){return lt.compare(D,q)===0}function Mo(C,D,q){var lt=C!=="=="&&C!=="!=";return function(){function Ct(Rt,jt,Kt){this.type=be,this.lhs=Rt,this.rhs=jt,this.collator=Kt,this.hasUntypedArgument=Rt.type.kind==="value"||jt.type.kind==="value"}return Ct.parse=function(Rt,jt){if(Rt.length!==3&&Rt.length!==4)return jt.error("Expected two or three arguments.");var Kt=Rt[0],oe=jt.parse(Rt[1],1,Ue);if(!oe)return null;if(!Fs(Kt,oe.type))return jt.concat(1).error('"'+Kt+`" comparisons are not supported for type '`+pr(oe.type)+"'.");var xe=jt.parse(Rt[2],2,Ue);if(!xe)return null;if(!Fs(Kt,xe.type))return jt.concat(2).error('"'+Kt+`" comparisons are not supported for type '`+pr(xe.type)+"'.");if(oe.type.kind!==xe.type.kind&&oe.type.kind!=="value"&&xe.type.kind!=="value")return jt.error("Cannot compare types '"+pr(oe.type)+"' and '"+pr(xe.type)+"'.");lt&&(oe.type.kind==="value"&&xe.type.kind!=="value"?oe=new je(xe.type,[oe]):oe.type.kind!=="value"&&xe.type.kind==="value"&&(xe=new je(oe.type,[xe])));var _e=null;if(Rt.length===4){if(oe.type.kind!=="string"&&xe.type.kind!=="string"&&oe.type.kind!=="value"&&xe.type.kind!=="value")return jt.error("Cannot use collator to compare non-string types.");if(!(_e=jt.parse(Rt[3],3,tr)))return null}return new Ct(oe,xe,_e)},Ct.prototype.evaluate=function(Rt){var jt=this.lhs.evaluate(Rt),Kt=this.rhs.evaluate(Rt);if(lt&&this.hasUntypedArgument){var oe=en(jt),xe=en(Kt);if(oe.kind!==xe.kind||oe.kind!=="string"&&oe.kind!=="number")throw new qr('Expected arguments for "'+C+'" to be (string, string) or (number, number), but found ('+oe.kind+", "+xe.kind+") instead.")}if(this.collator&&!lt&&this.hasUntypedArgument){var _e=en(jt),Oe=en(Kt);if(_e.kind!=="string"||Oe.kind!=="string")return D(Rt,jt,Kt)}return this.collator?q(Rt,jt,Kt,this.collator.evaluate(Rt)):D(Rt,jt,Kt)},Ct.prototype.eachChild=function(Rt){Rt(this.lhs),Rt(this.rhs),this.collator&&Rt(this.collator)},Ct.prototype.outputDefined=function(){return!0},Ct.prototype.serialize=function(){var Rt=[C];return this.eachChild(function(jt){Rt.push(jt.serialize())}),Rt},Ct}()}uo.parse=function(C,D){if(C.length<=2||C.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var q=D.parse(C[1],1,Ue),lt=D.parse(C[2],2,ue);if(!q||!lt)return null;if(!$e(q.type,[We(Ue),he,Ue]))return D.error("Expected first argument to be of type array or string, but found "+pr(q.type)+" instead");if(C.length===4){var Ct=D.parse(C[3],3,ue);return Ct?new uo(q.type,q,lt,Ct):null}return new uo(q.type,q,lt)},uo.prototype.evaluate=function(C){var D=this.input.evaluate(C),q=this.beginIndex.evaluate(C);if(!ir(D,["string","array"]))throw new qr("Expected first argument to be of type array or string, but found "+pr(en(D))+" instead.");if(this.endIndex){var lt=this.endIndex.evaluate(C);return D.slice(q,lt)}return D.slice(q)},uo.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},uo.prototype.outputDefined=function(){return!1},uo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var fl=Mo("==",function(C,D,q){return D===q},hl),Xs=Mo("!=",function(C,D,q){return D!==q},function(C,D,q,lt){return!hl(0,D,q,lt)}),pl=Mo("<",function(C,D,q){return D<q},function(C,D,q,lt){return lt.compare(D,q)<0}),Ks=Mo(">",function(C,D,q){return D>q},function(C,D,q,lt){return lt.compare(D,q)>0}),dl=Mo("<=",function(C,D,q){return D<=q},function(C,D,q,lt){return lt.compare(D,q)<=0}),ss=Mo(">=",function(C,D,q){return D>=q},function(C,D,q,lt){return lt.compare(D,q)>=0}),Ao=function(C,D,q,lt,Ct){this.type=he,this.number=C,this.locale=D,this.currency=q,this.minFractionDigits=lt,this.maxFractionDigits=Ct};Ao.parse=function(C,D){if(C.length!==3)return D.error("Expected two arguments.");var q=D.parse(C[1],1,ue);if(!q)return null;var lt=C[2];if(typeof lt!="object"||Array.isArray(lt))return D.error("NumberFormat options argument must be an object.");var Ct=null;if(lt.locale&&!(Ct=D.parse(lt.locale,1,he)))return null;var Rt=null;if(lt.currency&&!(Rt=D.parse(lt.currency,1,he)))return null;var jt=null;if(lt["min-fraction-digits"]&&!(jt=D.parse(lt["min-fraction-digits"],1,ue)))return null;var Kt=null;return lt["max-fraction-digits"]&&!(Kt=D.parse(lt["max-fraction-digits"],1,ue))?null:new Ao(q,Ct,Rt,jt,Kt)},Ao.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},Ao.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},Ao.prototype.outputDefined=function(){return!1},Ao.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var Wo=function(C){this.type=ue,this.input=C};Wo.parse=function(C,D){if(C.length!==2)return D.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var q=D.parse(C[1],1);return q?q.type.kind!=="array"&&q.type.kind!=="string"&&q.type.kind!=="value"?D.error("Expected argument of type string or array, but found "+pr(q.type)+" instead."):new Wo(q):null},Wo.prototype.evaluate=function(C){var D=this.input.evaluate(C);if(typeof D=="string"||Array.isArray(D))return D.length;throw new qr("Expected value to be of type string or array, but found "+pr(en(D))+" instead.")},Wo.prototype.eachChild=function(C){C(this.input)},Wo.prototype.outputDefined=function(){return!1},Wo.prototype.serialize=function(){var C=["length"];return this.eachChild(function(D){C.push(D.serialize())}),C};var ls={"==":fl,"!=":Xs,">":Ks,"<":pl,">=":ss,"<=":dl,array:je,at:Aa,boolean:je,case:co,coalesce:qn,collator:Qr,format:nr,image:hr,in:lo,"index-of":ja,interpolate:Oi,"interpolate-hcl":Oi,"interpolate-lab":Oi,length:Wo,let:Qa,literal:tn,match:To,number:je,"number-format":Ao,object:je,slice:uo,step:kn,string:je,"to-boolean":Mr,"to-color":Mr,"to-number":Mr,"to-string":Mr,var:rn,within:Nr};function zs(C,D){var q=D[0],lt=D[1],Ct=D[2],Rt=D[3];q=q.evaluate(C),lt=lt.evaluate(C),Ct=Ct.evaluate(C);var jt=Rt?Rt.evaluate(C):1,Kt=Sr(q,lt,Ct,jt);if(Kt)throw new qr(Kt);return new fr(q/255*jt,lt/255*jt,Ct/255*jt,jt)}function Js(C,D){return C in D}function Qs(C,D){var q=D[C];return q===void 0?null:q}function Ia(C){return{type:C}}function qo(C){return{result:"success",value:C}}function to(C){return{result:"error",value:C}}function ho(C){return C["property-type"]==="data-driven"||C["property-type"]==="cross-faded-data-driven"}function ml(C){return!!C.expression&&C.expression.parameters.indexOf("zoom")>-1}function Co(C){return!!C.expression&&C.expression.interpolated}function ni(C){return C instanceof Number?"number":C instanceof String?"string":C instanceof Boolean?"boolean":Array.isArray(C)?"array":C===null?"null":typeof C}function Ua(C){return typeof C=="object"&&C!==null&&!Array.isArray(C)}function _s(C){return C}function Oa(C,D){var q,lt,Ct,Rt=D.type==="color",jt=C.stops&&typeof C.stops[0][0]=="object",Kt=jt||C.property!==void 0,oe=jt||!Kt,xe=C.type||(Co(D)?"exponential":"interval");if(Rt&&((C=te({},C)).stops&&(C.stops=C.stops.map(function(un){return[un[0],fr.parse(un[1])]})),C.default?C.default=fr.parse(C.default):C.default=fr.parse(D.default)),C.colorSpace&&C.colorSpace!=="rgb"&&!Ja[C.colorSpace])throw new Error("Unknown color space: "+C.colorSpace);if(xe==="exponential")q=vl;else if(xe==="interval")q=Ns;else if(xe==="categorical"){q=Al,lt=Object.create(null);for(var _e=0,Oe=C.stops;_e<Oe.length;_e+=1){var Be=Oe[_e];lt[Be[0]]=Be[1]}Ct=typeof C.stops[0][0]}else{if(xe!=="identity")throw new Error('Unknown function type "'+xe+'"');q=yl}if(jt){for(var Fe={},er=[],or=0;or<C.stops.length;or++){var Tr=C.stops[or],kr=Tr[0].zoom;Fe[kr]===void 0&&(Fe[kr]={zoom:kr,type:C.type,property:C.property,default:C.default,stops:[]},er.push(kr)),Fe[kr].stops.push([Tr[0].value,Tr[1]])}for(var Or=[],Rr=0,Ur=er;Rr<Ur.length;Rr+=1){var Wr=Ur[Rr];Or.push([Fe[Wr].zoom,Oa(Fe[Wr],D)])}var Jr={name:"linear"};return{kind:"composite",interpolationType:Jr,interpolationFactor:Oi.interpolationFactor.bind(void 0,Jr),zoomStops:Or.map(function(un){return un[0]}),evaluate:function(un,yn){var Tn=un.zoom;return vl({stops:Or,base:C.base},D,Tn).evaluate(Tn,yn)}}}if(oe){var gn=xe==="exponential"?{name:"exponential",base:C.base!==void 0?C.base:1}:null;return{kind:"camera",interpolationType:gn,interpolationFactor:Oi.interpolationFactor.bind(void 0,gn),zoomStops:C.stops.map(function(un){return un[0]}),evaluate:function(un){var yn=un.zoom;return q(C,D,yn,lt,Ct)}}}return{kind:"source",evaluate:function(un,yn){var Tn=yn&&yn.properties?yn.properties[C.property]:void 0;return Tn===void 0?Yo(C.default,D.default):q(C,D,Tn,lt,Ct)}}}function Yo(C,D,q){return C!==void 0?C:D!==void 0?D:q!==void 0?q:void 0}function Al(C,D,q,lt,Ct){return Yo(typeof q===Ct?lt[q]:void 0,C.default,D.default)}function Ns(C,D,q){if(ni(q)!=="number")return Yo(C.default,D.default);var lt=C.stops.length;if(lt===1||q<=C.stops[0][0])return C.stops[0][1];if(q>=C.stops[lt-1][0])return C.stops[lt-1][1];var Ct=fn(C.stops.map(function(Rt){return Rt[0]}),q);return C.stops[Ct][1]}function vl(C,D,q){var lt=C.base!==void 0?C.base:1;if(ni(q)!=="number")return Yo(C.default,D.default);var Ct=C.stops.length;if(Ct===1||q<=C.stops[0][0])return C.stops[0][1];if(q>=C.stops[Ct-1][0])return C.stops[Ct-1][1];var Rt=fn(C.stops.map(function(Oe){return Oe[0]}),q),jt=function(Oe,Be,Fe,er){var or=er-Fe,Tr=Oe-Fe;return or===0?0:Be===1?Tr/or:(Math.pow(Be,Tr)-1)/(Math.pow(Be,or)-1)}(q,lt,C.stops[Rt][0],C.stops[Rt+1][0]),Kt=C.stops[Rt][1],oe=C.stops[Rt+1][1],xe=mn[D.type]||_s;if(C.colorSpace&&C.colorSpace!=="rgb"){var _e=Ja[C.colorSpace];xe=function(Oe,Be){return _e.reverse(_e.interpolate(_e.forward(Oe),_e.forward(Be),jt))}}return typeof Kt.evaluate=="function"?{evaluate:function(){for(var Oe=[],Be=arguments.length;Be--;)Oe[Be]=arguments[Be];var Fe=Kt.evaluate.apply(void 0,Oe),er=oe.evaluate.apply(void 0,Oe);if(Fe!==void 0&&er!==void 0)return xe(Fe,er,jt)}}:xe(Kt,oe,jt)}function yl(C,D,q){return D.type==="color"?q=fr.parse(q):D.type==="formatted"?q=Er.fromString(q.toString()):D.type==="resolvedImage"?q=_r.fromString(q.toString()):ni(q)===D.type||D.type==="enum"&&D.values[q]||(q=void 0),Yo(q,C.default,D.default)}Dr.register(ls,{error:[{kind:"error"},[he],function(C,D){var q=D[0];throw new qr(q.evaluate(C))}],typeof:[he,[Ue],function(C,D){return pr(en(D[0].evaluate(C)))}],"to-rgba":[We(ue,4),[Pe],function(C,D){return D[0].evaluate(C).toArray()}],rgb:[Pe,[ue,ue,ue],zs],rgba:[Pe,[ue,ue,ue,ue],zs],has:{type:be,overloads:[[[he],function(C,D){return Js(D[0].evaluate(C),C.properties())}],[[he,De],function(C,D){var q=D[0],lt=D[1];return Js(q.evaluate(C),lt.evaluate(C))}]]},get:{type:Ue,overloads:[[[he],function(C,D){return Qs(D[0].evaluate(C),C.properties())}],[[he,De],function(C,D){var q=D[0],lt=D[1];return Qs(q.evaluate(C),lt.evaluate(C))}]]},"feature-state":[Ue,[he],function(C,D){return Qs(D[0].evaluate(C),C.featureState||{})}],properties:[De,[],function(C){return C.properties()}],"geometry-type":[he,[],function(C){return C.geometryType()}],id:[Ue,[],function(C){return C.id()}],zoom:[ue,[],function(C){return C.globals.zoom}],"heatmap-density":[ue,[],function(C){return C.globals.heatmapDensity||0}],"line-progress":[ue,[],function(C){return C.globals.lineProgress||0}],accumulated:[Ue,[],function(C){return C.globals.accumulated===void 0?null:C.globals.accumulated}],"+":[ue,Ia(ue),function(C,D){for(var q=0,lt=0,Ct=D;lt<Ct.length;lt+=1)q+=Ct[lt].evaluate(C);return q}],"*":[ue,Ia(ue),function(C,D){for(var q=1,lt=0,Ct=D;lt<Ct.length;lt+=1)q*=Ct[lt].evaluate(C);return q}],"-":{type:ue,overloads:[[[ue,ue],function(C,D){var q=D[0],lt=D[1];return q.evaluate(C)-lt.evaluate(C)}],[[ue],function(C,D){return-D[0].evaluate(C)}]]},"/":[ue,[ue,ue],function(C,D){var q=D[0],lt=D[1];return q.evaluate(C)/lt.evaluate(C)}],"%":[ue,[ue,ue],function(C,D){var q=D[0],lt=D[1];return q.evaluate(C)%lt.evaluate(C)}],ln2:[ue,[],function(){return Math.LN2}],pi:[ue,[],function(){return Math.PI}],e:[ue,[],function(){return Math.E}],"^":[ue,[ue,ue],function(C,D){var q=D[0],lt=D[1];return Math.pow(q.evaluate(C),lt.evaluate(C))}],sqrt:[ue,[ue],function(C,D){var q=D[0];return Math.sqrt(q.evaluate(C))}],log10:[ue,[ue],function(C,D){var q=D[0];return Math.log(q.evaluate(C))/Math.LN10}],ln:[ue,[ue],function(C,D){var q=D[0];return Math.log(q.evaluate(C))}],log2:[ue,[ue],function(C,D){var q=D[0];return Math.log(q.evaluate(C))/Math.LN2}],sin:[ue,[ue],function(C,D){var q=D[0];return Math.sin(q.evaluate(C))}],cos:[ue,[ue],function(C,D){var q=D[0];return Math.cos(q.evaluate(C))}],tan:[ue,[ue],function(C,D){var q=D[0];return Math.tan(q.evaluate(C))}],asin:[ue,[ue],function(C,D){var q=D[0];return Math.asin(q.evaluate(C))}],acos:[ue,[ue],function(C,D){var q=D[0];return Math.acos(q.evaluate(C))}],atan:[ue,[ue],function(C,D){var q=D[0];return Math.atan(q.evaluate(C))}],min:[ue,Ia(ue),function(C,D){return Math.min.apply(Math,D.map(function(q){return q.evaluate(C)}))}],max:[ue,Ia(ue),function(C,D){return Math.max.apply(Math,D.map(function(q){return q.evaluate(C)}))}],abs:[ue,[ue],function(C,D){var q=D[0];return Math.abs(q.evaluate(C))}],round:[ue,[ue],function(C,D){var q=D[0].evaluate(C);return q<0?-Math.round(-q):Math.round(q)}],floor:[ue,[ue],function(C,D){var q=D[0];return Math.floor(q.evaluate(C))}],ceil:[ue,[ue],function(C,D){var q=D[0];return Math.ceil(q.evaluate(C))}],"filter-==":[be,[he,Ue],function(C,D){var q=D[0],lt=D[1];return C.properties()[q.value]===lt.value}],"filter-id-==":[be,[Ue],function(C,D){var q=D[0];return C.id()===q.value}],"filter-type-==":[be,[he],function(C,D){var q=D[0];return C.geometryType()===q.value}],"filter-<":[be,[he,Ue],function(C,D){var q=D[0],lt=D[1],Ct=C.properties()[q.value],Rt=lt.value;return typeof Ct==typeof Rt&&Ct<Rt}],"filter-id-<":[be,[Ue],function(C,D){var q=D[0],lt=C.id(),Ct=q.value;return typeof lt==typeof Ct&&lt<Ct}],"filter->":[be,[he,Ue],function(C,D){var q=D[0],lt=D[1],Ct=C.properties()[q.value],Rt=lt.value;return typeof Ct==typeof Rt&&Ct>Rt}],"filter-id->":[be,[Ue],function(C,D){var q=D[0],lt=C.id(),Ct=q.value;return typeof lt==typeof Ct&&lt>Ct}],"filter-<=":[be,[he,Ue],function(C,D){var q=D[0],lt=D[1],Ct=C.properties()[q.value],Rt=lt.value;return typeof Ct==typeof Rt&&Ct<=Rt}],"filter-id-<=":[be,[Ue],function(C,D){var q=D[0],lt=C.id(),Ct=q.value;return typeof lt==typeof Ct&&lt<=Ct}],"filter->=":[be,[he,Ue],function(C,D){var q=D[0],lt=D[1],Ct=C.properties()[q.value],Rt=lt.value;return typeof Ct==typeof Rt&&Ct>=Rt}],"filter-id->=":[be,[Ue],function(C,D){var q=D[0],lt=C.id(),Ct=q.value;return typeof lt==typeof Ct&&lt>=Ct}],"filter-has":[be,[Ue],function(C,D){return D[0].value in C.properties()}],"filter-has-id":[be,[],function(C){return C.id()!==null&&C.id()!==void 0}],"filter-type-in":[be,[We(he)],function(C,D){return D[0].value.indexOf(C.geometryType())>=0}],"filter-id-in":[be,[We(Ue)],function(C,D){return D[0].value.indexOf(C.id())>=0}],"filter-in-small":[be,[he,We(Ue)],function(C,D){var q=D[0];return D[1].value.indexOf(C.properties()[q.value])>=0}],"filter-in-large":[be,[he,We(Ue)],function(C,D){var q=D[0],lt=D[1];return function(Ct,Rt,jt,Kt){for(;jt<=Kt;){var oe=jt+Kt>>1;if(Rt[oe]===Ct)return!0;Rt[oe]>Ct?Kt=oe-1:jt=oe+1}return!1}(C.properties()[q.value],lt.value,0,lt.value.length-1)}],all:{type:be,overloads:[[[be,be],function(C,D){var q=D[0],lt=D[1];return q.evaluate(C)&&lt.evaluate(C)}],[Ia(be),function(C,D){for(var q=0,lt=D;q<lt.length;q+=1)if(!lt[q].evaluate(C))return!1;return!0}]]},any:{type:be,overloads:[[[be,be],function(C,D){var q=D[0],lt=D[1];return q.evaluate(C)||lt.evaluate(C)}],[Ia(be),function(C,D){for(var q=0,lt=D;q<lt.length;q+=1)if(lt[q].evaluate(C))return!0;return!1}]]},"!":[be,[be],function(C,D){return!D[0].evaluate(C)}],"is-supported-script":[be,[he],function(C,D){var q=D[0],lt=C.globals&&C.globals.isSupportedScript;return!lt||lt(q.evaluate(C))}],upcase:[he,[he],function(C,D){return D[0].evaluate(C).toUpperCase()}],downcase:[he,[he],function(C,D){return D[0].evaluate(C).toLowerCase()}],concat:[he,Ia(Ue),function(C,D){return D.map(function(q){return sn(q.evaluate(C))}).join("")}],"resolved-locale":[he,[tr],function(C,D){return D[0].evaluate(C).resolvedLocale()}]});var ws=function(C,D){this.expression=C,this._warningHistory={},this._evaluator=new Pr,this._defaultValue=D?function(q){return q.type==="color"&&Ua(q.default)?new fr(0,0,0,0):q.type==="color"?fr.parse(q.default)||null:q.default===void 0?null:q.default}(D):null,this._enumValues=D&&D.type==="enum"?D.values:null};function cs(C){return Array.isArray(C)&&C.length>0&&typeof C[0]=="string"&&C[0]in ls}function ks(C,D){var q=new nn(ls,[],D?function(Ct){var Rt={color:Pe,string:he,number:ue,enum:he,boolean:be,formatted:Ge,resolvedImage:Ze};return Ct.type==="array"?We(Rt[Ct.value]||Ue,Ct.length):Rt[Ct.type]}(D):void 0),lt=q.parse(C,void 0,void 0,void 0,D&&D.type==="string"?{typeAnnotation:"coerce"}:void 0);return lt?qo(new ws(lt,D)):to(q.errors)}ws.prototype.evaluateWithoutErrorHandling=function(C,D,q,lt,Ct,Rt){return this._evaluator.globals=C,this._evaluator.feature=D,this._evaluator.featureState=q,this._evaluator.canonical=lt,this._evaluator.availableImages=Ct||null,this._evaluator.formattedSection=Rt,this.expression.evaluate(this._evaluator)},ws.prototype.evaluate=function(C,D,q,lt,Ct,Rt){this._evaluator.globals=C,this._evaluator.feature=D||null,this._evaluator.featureState=q||null,this._evaluator.canonical=lt,this._evaluator.availableImages=Ct||null,this._evaluator.formattedSection=Rt||null;try{var jt=this.expression.evaluate(this._evaluator);if(jt==null||typeof jt=="number"&&jt!=jt)return this._defaultValue;if(this._enumValues&&!(jt in this._enumValues))throw new qr("Expected value to be one of "+Object.keys(this._enumValues).map(function(Kt){return JSON.stringify(Kt)}).join(", ")+", but found "+JSON.stringify(jt)+" instead.");return jt}catch(Kt){return this._warningHistory[Kt.message]||(this._warningHistory[Kt.message]=!0,typeof console<"u"&&console.warn(Kt.message)),this._defaultValue}};var Lo=function(C,D){this.kind=C,this._styleExpression=D,this.isStateDependent=C!=="constant"&&!Vr(D.expression)};Lo.prototype.evaluateWithoutErrorHandling=function(C,D,q,lt,Ct,Rt){return this._styleExpression.evaluateWithoutErrorHandling(C,D,q,lt,Ct,Rt)},Lo.prototype.evaluate=function(C,D,q,lt,Ct,Rt){return this._styleExpression.evaluate(C,D,q,lt,Ct,Rt)};var fo=function(C,D,q,lt){this.kind=C,this.zoomStops=q,this._styleExpression=D,this.isStateDependent=C!=="camera"&&!Vr(D.expression),this.interpolationType=lt};function Eo(C,D){if((C=ks(C,D)).result==="error")return C;var q=C.value.expression,lt=Kr(q);if(!lt&&!ho(D))return to([new me("","data expressions not supported")]);var Ct=an(q,["zoom"]);if(!Ct&&!ml(D))return to([new me("","zoom expressions not supported")]);var Rt=Bs(q);if(!Rt&&!Ct)return to([new me("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Rt instanceof me)return to([Rt]);if(Rt instanceof Oi&&!Co(D))return to([new me("",'"interpolate" expressions cannot be used with this property')]);if(!Rt)return qo(new Lo(lt?"constant":"source",C.value));var jt=Rt instanceof Oi?Rt.interpolation:void 0;return qo(new fo(lt?"camera":"composite",C.value,Rt.labels,jt))}fo.prototype.evaluateWithoutErrorHandling=function(C,D,q,lt,Ct,Rt){return this._styleExpression.evaluateWithoutErrorHandling(C,D,q,lt,Ct,Rt)},fo.prototype.evaluate=function(C,D,q,lt,Ct,Rt){return this._styleExpression.evaluate(C,D,q,lt,Ct,Rt)},fo.prototype.interpolationFactor=function(C,D,q){return this.interpolationType?Oi.interpolationFactor(this.interpolationType,C,D,q):0};var po=function(C,D){this._parameters=C,this._specification=D,te(this,Oa(this._parameters,this._specification))};function Bs(C){var D=null;if(C instanceof Qa)D=Bs(C.result);else if(C instanceof qn)for(var q=0,lt=C.args;q<lt.length;q+=1){var Ct=lt[q];if(D=Bs(Ct))break}else(C instanceof kn||C instanceof Oi)&&C.input instanceof Dr&&C.input.name==="zoom"&&(D=C);return D instanceof me||C.eachChild(function(Rt){var jt=Bs(Rt);jt instanceof me?D=jt:!D&&jt?D=new me("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&jt&&D!==jt&&(D=new me("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}function Ga(C){var D=C.key,q=C.value,lt=C.valueSpec||{},Ct=C.objectElementValidators||{},Rt=C.style,jt=C.styleSpec,Kt=[],oe=ni(q);if(oe!=="object")return[new Nt(D,q,"object expected, "+oe+" found")];for(var xe in q){var _e=xe.split(".")[0],Oe=lt[_e]||lt["*"],Be=void 0;if(Ct[_e])Be=Ct[_e];else if(lt[_e])Be=xi;else if(Ct["*"])Be=Ct["*"];else{if(!lt["*"]){Kt.push(new Nt(D,q[xe],'unknown property "'+xe+'"'));continue}Be=xi}Kt=Kt.concat(Be({key:(D&&D+".")+xe,value:q[xe],valueSpec:Oe,style:Rt,styleSpec:jt,object:q,objectKey:xe},q))}for(var Fe in lt)Ct[Fe]||lt[Fe].required&&lt[Fe].default===void 0&&q[Fe]===void 0&&Kt.push(new Nt(D,q,'missing required property "'+Fe+'"'));return Kt}function xl(C){var D=C.value,q=C.valueSpec,lt=C.style,Ct=C.styleSpec,Rt=C.key,jt=C.arrayElementValidator||xi;if(ni(D)!=="array")return[new Nt(Rt,D,"array expected, "+ni(D)+" found")];if(q.length&&D.length!==q.length)return[new Nt(Rt,D,"array length "+q.length+" expected, length "+D.length+" found")];if(q["min-length"]&&D.length<q["min-length"])return[new Nt(Rt,D,"array length at least "+q["min-length"]+" expected, length "+D.length+" found")];var Kt={type:q.value,values:q.values};Ct.$version<7&&(Kt.function=q.function),ni(q.value)==="object"&&(Kt=q.value);for(var oe=[],xe=0;xe<D.length;xe++)oe=oe.concat(jt({array:D,arrayIndex:xe,value:D[xe],valueSpec:Kt,style:lt,styleSpec:Ct,key:Rt+"["+xe+"]"}));return oe}function bl(C){var D=C.key,q=C.value,lt=C.valueSpec,Ct=ni(q);return Ct==="number"&&q!=q&&(Ct="NaN"),Ct!=="number"?[new Nt(D,q,"number expected, "+Ct+" found")]:"minimum"in lt&&q<lt.minimum?[new Nt(D,q,q+" is less than the minimum value "+lt.minimum)]:"maximum"in lt&&q>lt.maximum?[new Nt(D,q,q+" is greater than the maximum value "+lt.maximum)]:[]}function js(C){var D,q,lt,Ct=C.valueSpec,Rt=ge(C.value.type),jt={},Kt=Rt!=="categorical"&&C.value.property===void 0,oe=!Kt,xe=ni(C.value.stops)==="array"&&ni(C.value.stops[0])==="array"&&ni(C.value.stops[0][0])==="object",_e=Ga({key:C.key,value:C.value,valueSpec:C.styleSpec.function,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{stops:function(Fe){if(Rt==="identity")return[new Nt(Fe.key,Fe.value,'identity function may not have a "stops" property')];var er=[],or=Fe.value;return er=er.concat(xl({key:Fe.key,value:or,valueSpec:Fe.valueSpec,style:Fe.style,styleSpec:Fe.styleSpec,arrayElementValidator:Oe})),ni(or)==="array"&&or.length===0&&er.push(new Nt(Fe.key,or,"array must have at least one stop")),er},default:function(Fe){return xi({key:Fe.key,value:Fe.value,valueSpec:Ct,style:Fe.style,styleSpec:Fe.styleSpec})}}});return Rt==="identity"&&Kt&&_e.push(new Nt(C.key,C.value,'missing required property "property"')),Rt==="identity"||C.value.stops||_e.push(new Nt(C.key,C.value,'missing required property "stops"')),Rt==="exponential"&&C.valueSpec.expression&&!Co(C.valueSpec)&&_e.push(new Nt(C.key,C.value,"exponential functions not supported")),C.styleSpec.$version>=8&&(oe&&!ho(C.valueSpec)?_e.push(new Nt(C.key,C.value,"property functions not supported")):Kt&&!ml(C.valueSpec)&&_e.push(new Nt(C.key,C.value,"zoom functions not supported"))),Rt!=="categorical"&&!xe||C.value.property!==void 0||_e.push(new Nt(C.key,C.value,'"property" property is required')),_e;function Oe(Fe){var er=[],or=Fe.value,Tr=Fe.key;if(ni(or)!=="array")return[new Nt(Tr,or,"array expected, "+ni(or)+" found")];if(or.length!==2)return[new Nt(Tr,or,"array length 2 expected, length "+or.length+" found")];if(xe){if(ni(or[0])!=="object")return[new Nt(Tr,or,"object expected, "+ni(or[0])+" found")];if(or[0].zoom===void 0)return[new Nt(Tr,or,"object stop key must have zoom")];if(or[0].value===void 0)return[new Nt(Tr,or,"object stop key must have value")];if(lt&&lt>ge(or[0].zoom))return[new Nt(Tr,or[0].zoom,"stop zoom values must appear in ascending order")];ge(or[0].zoom)!==lt&&(lt=ge(or[0].zoom),q=void 0,jt={}),er=er.concat(Ga({key:Tr+"[0]",value:or[0],valueSpec:{zoom:{}},style:Fe.style,styleSpec:Fe.styleSpec,objectElementValidators:{zoom:bl,value:Be}}))}else er=er.concat(Be({key:Tr+"[0]",value:or[0],valueSpec:{},style:Fe.style,styleSpec:Fe.styleSpec},or));return cs(pe(or[1]))?er.concat([new Nt(Tr+"[1]",or[1],"expressions are not allowed in function stops.")]):er.concat(xi({key:Tr+"[1]",value:or[1],valueSpec:Ct,style:Fe.style,styleSpec:Fe.styleSpec}))}function Be(Fe,er){var or=ni(Fe.value),Tr=ge(Fe.value),kr=Fe.value!==null?Fe.value:er;if(D){if(or!==D)return[new Nt(Fe.key,kr,or+" stop domain type must match previous stop domain type "+D)]}else D=or;if(or!=="number"&&or!=="string"&&or!=="boolean")return[new Nt(Fe.key,kr,"stop domain value must be a number, string, or boolean")];if(or!=="number"&&Rt!=="categorical"){var Or="number expected, "+or+" found";return ho(Ct)&&Rt===void 0&&(Or+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Nt(Fe.key,kr,Or)]}return Rt!=="categorical"||or!=="number"||isFinite(Tr)&&Math.floor(Tr)===Tr?Rt!=="categorical"&&or==="number"&&q!==void 0&&Tr<q?[new Nt(Fe.key,kr,"stop domain values must appear in ascending order")]:(q=Tr,Rt==="categorical"&&Tr in jt?[new Nt(Fe.key,kr,"stop domain values must be unique")]:(jt[Tr]=!0,[])):[new Nt(Fe.key,kr,"integer expected, found "+Tr)]}}function So(C){var D=(C.expressionContext==="property"?Eo:ks)(pe(C.value),C.valueSpec);if(D.result==="error")return D.value.map(function(lt){return new Nt(""+C.key+lt.key,C.value,lt.message)});var q=D.value.expression||D.value._styleExpression.expression;if(C.expressionContext==="property"&&C.propertyKey==="text-font"&&!q.outputDefined())return[new Nt(C.key,C.value,'Invalid data expression for "'+C.propertyKey+'". Output values must be contained as literals within the expression.')];if(C.expressionContext==="property"&&C.propertyType==="layout"&&!Vr(q))return[new Nt(C.key,C.value,'"feature-state" data expressions are not supported with layout properties.')];if(C.expressionContext==="filter"&&!Vr(q))return[new Nt(C.key,C.value,'"feature-state" data expressions are not supported with filters.')];if(C.expressionContext&&C.expressionContext.indexOf("cluster")===0){if(!an(q,["zoom","feature-state"]))return[new Nt(C.key,C.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(C.expressionContext==="cluster-initial"&&!Kr(q))return[new Nt(C.key,C.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Us(C){var D=C.key,q=C.value,lt=C.valueSpec,Ct=[];return Array.isArray(lt.values)?lt.values.indexOf(ge(q))===-1&&Ct.push(new Nt(D,q,"expected one of ["+lt.values.join(", ")+"], "+JSON.stringify(q)+" found")):Object.keys(lt.values).indexOf(ge(q))===-1&&Ct.push(new Nt(D,q,"expected one of ["+Object.keys(lt.values).join(", ")+"], "+JSON.stringify(q)+" found")),Ct}function Zo(C){if(C===!0||C===!1)return!0;if(!Array.isArray(C)||C.length===0)return!1;switch(C[0]){case"has":return C.length>=2&&C[1]!=="$id"&&C[1]!=="$type";case"in":return C.length>=3&&(typeof C[1]!="string"||Array.isArray(C[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return C.length!==3||Array.isArray(C[1])||Array.isArray(C[2]);case"any":case"all":for(var D=0,q=C.slice(1);D<q.length;D+=1){var lt=q[D];if(!Zo(lt)&&typeof lt!="boolean")return!1}return!0;default:return!0}}po.deserialize=function(C){return new po(C._parameters,C._specification)},po.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};var tl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function us(C){if(C==null)return{filter:function(){return!0},needGeometry:!1};Zo(C)||(C=hs(C));var D=ks(C,tl);if(D.result==="error")throw new Error(D.value.map(function(q){return q.key+": "+q.message}).join(", "));return{filter:function(q,lt,Ct){return D.value.evaluate(q,lt,{},Ct)},needGeometry:Ts(C)}}function Xo(C,D){return C<D?-1:C>D?1:0}function Ts(C){if(!Array.isArray(C))return!1;if(C[0]==="within")return!0;for(var D=1;D<C.length;D++)if(Ts(C[D]))return!0;return!1}function hs(C){if(!C)return!0;var D,q=C[0];return C.length<=1?q!=="any":q==="=="?ii(C[1],C[2],"=="):q==="!="?Vi(ii(C[1],C[2],"==")):q==="<"||q===">"||q==="<="||q===">="?ii(C[1],C[2],q):q==="any"?(D=C.slice(1),["any"].concat(D.map(hs))):q==="all"?["all"].concat(C.slice(1).map(hs)):q==="none"?["all"].concat(C.slice(1).map(hs).map(Vi)):q==="in"?Io(C[1],C.slice(2)):q==="!in"?Vi(Io(C[1],C.slice(2))):q==="has"?go(C[1]):q==="!has"?Vi(go(C[1])):q!=="within"||C}function ii(C,D,q){switch(C){case"$type":return["filter-type-"+q,D];case"$id":return["filter-id-"+q,D];default:return["filter-"+q,C,D]}}function Io(C,D){if(D.length===0)return!1;switch(C){case"$type":return["filter-type-in",["literal",D]];case"$id":return["filter-id-in",["literal",D]];default:return D.length>200&&!D.some(function(q){return typeof q!=typeof D[0]})?["filter-in-large",C,["literal",D.sort(Xo)]]:["filter-in-small",C,["literal",D]]}}function go(C){switch(C){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",C]}}function Vi(C){return["!",C]}function Hn(C){return Zo(pe(C.value))?So(te({},C,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Yn(C)}function Yn(C){var D=C.value,q=C.key;if(ni(D)!=="array")return[new Nt(q,D,"array expected, "+ni(D)+" found")];var lt,Ct=C.styleSpec,Rt=[];if(D.length<1)return[new Nt(q,D,"filter array must have at least 1 element")];switch(Rt=Rt.concat(Us({key:q+"[0]",value:D[0],valueSpec:Ct.filter_operator,style:C.style,styleSpec:C.styleSpec})),ge(D[0])){case"<":case"<=":case">":case">=":D.length>=2&&ge(D[1])==="$type"&&Rt.push(new Nt(q,D,'"$type" cannot be use with operator "'+D[0]+'"'));case"==":case"!=":D.length!==3&&Rt.push(new Nt(q,D,'filter array for operator "'+D[0]+'" must have 3 elements'));case"in":case"!in":D.length>=2&&(lt=ni(D[1]))!=="string"&&Rt.push(new Nt(q+"[1]",D[1],"string expected, "+lt+" found"));for(var jt=2;jt<D.length;jt++)lt=ni(D[jt]),ge(D[1])==="$type"?Rt=Rt.concat(Us({key:q+"["+jt+"]",value:D[jt],valueSpec:Ct.geometry_type,style:C.style,styleSpec:C.styleSpec})):lt!=="string"&&lt!=="number"&&lt!=="boolean"&&Rt.push(new Nt(q+"["+jt+"]",D[jt],"string, number, or boolean expected, "+lt+" found"));break;case"any":case"all":case"none":for(var Kt=1;Kt<D.length;Kt++)Rt=Rt.concat(Yn({key:q+"["+Kt+"]",value:D[Kt],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":lt=ni(D[1]),D.length!==2?Rt.push(new Nt(q,D,'filter array for "'+D[0]+'" operator must have 2 elements')):lt!=="string"&&Rt.push(new Nt(q+"[1]",D[1],"string expected, "+lt+" found"));break;case"within":lt=ni(D[1]),D.length!==2?Rt.push(new Nt(q,D,'filter array for "'+D[0]+'" operator must have 2 elements')):lt!=="object"&&Rt.push(new Nt(q+"[1]",D[1],"object expected, "+lt+" found"))}return Rt}function Oo(C,D){var q=C.key,lt=C.style,Ct=C.styleSpec,Rt=C.value,jt=C.objectKey,Kt=Ct[D+"_"+C.layerType];if(!Kt)return[];var oe=jt.match(/^(.*)-transition$/);if(D==="paint"&&oe&&Kt[oe[1]]&&Kt[oe[1]].transition)return xi({key:q,value:Rt,valueSpec:Ct.transition,style:lt,styleSpec:Ct});var xe,_e=C.valueSpec||Kt[jt];if(!_e)return[new Nt(q,Rt,'unknown property "'+jt+'"')];if(ni(Rt)==="string"&&ho(_e)&&!_e.tokens&&(xe=/^{([^}]+)}$/.exec(Rt)))return[new Nt(q,Rt,'"'+jt+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(xe[1])+" }`.")];var Oe=[];return C.layerType==="symbol"&&(jt==="text-field"&&lt&&!lt.glyphs&&Oe.push(new Nt(q,Rt,'use of "text-field" requires a style "glyphs" property')),jt==="text-font"&&Ua(pe(Rt))&&ge(Rt.type)==="identity"&&Oe.push(new Nt(q,Rt,'"text-font" does not support identity functions'))),Oe.concat(xi({key:C.key,value:Rt,valueSpec:_e,style:lt,styleSpec:Ct,expressionContext:"property",propertyType:D,propertyKey:jt}))}function mo(C){return Oo(C,"paint")}function el(C){return Oo(C,"layout")}function Ms(C){var D=[],q=C.value,lt=C.key,Ct=C.style,Rt=C.styleSpec;q.type||q.ref||D.push(new Nt(lt,q,'either "type" or "ref" is required'));var jt,Kt=ge(q.type),oe=ge(q.ref);if(q.id)for(var xe=ge(q.id),_e=0;_e<C.arrayIndex;_e++){var Oe=Ct.layers[_e];ge(Oe.id)===xe&&D.push(new Nt(lt,q.id,'duplicate layer id "'+q.id+'", previously used at line '+Oe.id.__line__))}if("ref"in q)["type","source","source-layer","filter","layout"].forEach(function(er){er in q&&D.push(new Nt(lt,q[er],'"'+er+'" is prohibited for ref layers'))}),Ct.layers.forEach(function(er){ge(er.id)===oe&&(jt=er)}),jt?jt.ref?D.push(new Nt(lt,q.ref,"ref cannot reference another ref layer")):Kt=ge(jt.type):D.push(new Nt(lt,q.ref,'ref layer "'+oe+'" not found'));else if(Kt!=="background")if(q.source){var Be=Ct.sources&&Ct.sources[q.source],Fe=Be&&ge(Be.type);Be?Fe==="vector"&&Kt==="raster"?D.push(new Nt(lt,q.source,'layer "'+q.id+'" requires a raster source')):Fe==="raster"&&Kt!=="raster"?D.push(new Nt(lt,q.source,'layer "'+q.id+'" requires a vector source')):Fe!=="vector"||q["source-layer"]?Fe==="raster-dem"&&Kt!=="hillshade"?D.push(new Nt(lt,q.source,"raster-dem source can only be used with layer type 'hillshade'.")):Kt!=="line"||!q.paint||!q.paint["line-gradient"]||Fe==="geojson"&&Be.lineMetrics||D.push(new Nt(lt,q,'layer "'+q.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):D.push(new Nt(lt,q,'layer "'+q.id+'" must specify a "source-layer"')):D.push(new Nt(lt,q.source,'source "'+q.source+'" not found'))}else D.push(new Nt(lt,q,'missing required property "source"'));return D=D.concat(Ga({key:lt,value:q,valueSpec:Rt.layer,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xi({key:lt+".type",value:q.type,valueSpec:Rt.layer.type,style:C.style,styleSpec:C.styleSpec,object:q,objectKey:"type"})},filter:Hn,layout:function(er){return Ga({layer:q,key:er.key,value:er.value,style:er.style,styleSpec:er.styleSpec,objectElementValidators:{"*":function(or){return el(te({layerType:Kt},or))}}})},paint:function(er){return Ga({layer:q,key:er.key,value:er.value,style:er.style,styleSpec:er.styleSpec,objectElementValidators:{"*":function(or){return mo(te({layerType:Kt},or))}}})}}})),D}function Ro(C){var D=C.value,q=C.key,lt=ni(D);return lt!=="string"?[new Nt(q,D,"string expected, "+lt+" found")]:[]}var As={promoteId:function(C){var D=C.key,q=C.value;if(ni(q)==="string")return Ro({key:D,value:q});var lt=[];for(var Ct in q)lt.push.apply(lt,Ro({key:D+"."+Ct,value:q[Ct]}));return lt}};function vo(C){var D=C.value,q=C.key,lt=C.styleSpec,Ct=C.style;if(!D.type)return[new Nt(q,D,'"type" is required')];var Rt,jt=ge(D.type);switch(jt){case"vector":case"raster":case"raster-dem":return Ga({key:q,value:D,valueSpec:lt["source_"+jt.replace("-","_")],style:C.style,styleSpec:lt,objectElementValidators:As});case"geojson":if(Rt=Ga({key:q,value:D,valueSpec:lt.source_geojson,style:Ct,styleSpec:lt,objectElementValidators:As}),D.cluster)for(var Kt in D.clusterProperties){var oe=D.clusterProperties[Kt],xe=oe[0],_e=oe[1],Oe=typeof xe=="string"?[xe,["accumulated"],["get",Kt]]:xe;Rt.push.apply(Rt,So({key:q+"."+Kt+".map",value:_e,expressionContext:"cluster-map"})),Rt.push.apply(Rt,So({key:q+"."+Kt+".reduce",value:Oe,expressionContext:"cluster-reduce"}))}return Rt;case"video":return Ga({key:q,value:D,valueSpec:lt.source_video,style:Ct,styleSpec:lt});case"image":return Ga({key:q,value:D,valueSpec:lt.source_image,style:Ct,styleSpec:lt});case"canvas":return[new Nt(q,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Us({key:q+".type",value:D.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Ct,styleSpec:lt})}}function Ko(C){var D=C.value,q=C.styleSpec,lt=q.light,Ct=C.style,Rt=[],jt=ni(D);if(D===void 0)return Rt;if(jt!=="object")return Rt.concat([new Nt("light",D,"object expected, "+jt+" found")]);for(var Kt in D){var oe=Kt.match(/^(.*)-transition$/);Rt=oe&&lt[oe[1]]&&lt[oe[1]].transition?Rt.concat(xi({key:Kt,value:D[Kt],valueSpec:q.transition,style:Ct,styleSpec:q})):lt[Kt]?Rt.concat(xi({key:Kt,value:D[Kt],valueSpec:lt[Kt],style:Ct,styleSpec:q})):Rt.concat([new Nt(Kt,D[Kt],'unknown property "'+Kt+'"')])}return Rt}var Po={"*":function(){return[]},array:xl,boolean:function(C){var D=C.value,q=C.key,lt=ni(D);return lt!=="boolean"?[new Nt(q,D,"boolean expected, "+lt+" found")]:[]},number:bl,color:function(C){var D=C.key,q=C.value,lt=ni(q);return lt!=="string"?[new Nt(D,q,"color expected, "+lt+" found")]:ar(q)===null?[new Nt(D,q,'color expected, "'+q+'" found')]:[]},constants:ee,enum:Us,filter:Hn,function:js,layer:Ms,object:Ga,source:vo,light:Ko,string:Ro,formatted:function(C){return Ro(C).length===0?[]:So(C)},resolvedImage:function(C){return Ro(C).length===0?[]:So(C)}};function xi(C){var D=C.value,q=C.valueSpec,lt=C.styleSpec;return q.expression&&Ua(ge(D))?js(C):q.expression&&cs(pe(D))?So(C):q.type&&Po[q.type]?Po[q.type](C):Ga(te({},C,{valueSpec:q.type?lt[q.type]:q}))}function Jo(C){var D=C.value,q=C.key,lt=Ro(C);return lt.length||(D.indexOf("{fontstack}")===-1&&lt.push(new Nt(q,D,'"glyphs" url must include a "{fontstack}" token')),D.indexOf("{range}")===-1&&lt.push(new Nt(q,D,'"glyphs" url must include a "{range}" token'))),lt}function Qo(C,D){D===void 0&&(D=Pt);var q=[];return q=q.concat(xi({key:"",value:C,valueSpec:D.$root,styleSpec:D,style:C,objectElementValidators:{glyphs:Jo,"*":function(){return[]}}})),C.constants&&(q=q.concat(ee({key:"constants",value:C.constants,style:C,styleSpec:D}))),Fi(q)}function Fi(C){return[].concat(C).sort(function(D,q){return D.line-q.line})}function ra(C){return function(){for(var D=[],q=arguments.length;q--;)D[q]=arguments[q];return Fi(C.apply(this,D))}}Qo.source=ra(vo),Qo.light=ra(Ko),Qo.layer=ra(Ms),Qo.filter=ra(Hn),Qo.paintProperty=ra(mo),Qo.layoutProperty=ra(el);var Ji=Qo,zi=Ji.light,ca=Ji.paintProperty,Do=Ji.layoutProperty;function $a(C,D){var q=!1;if(D&&D.length)for(var lt=0,Ct=D;lt<Ct.length;lt+=1){var Rt=Ct[lt];C.fire(new ne(new Error(Rt.message))),q=!0}return q}var Wi=Ra,Ca=3;function Ra(C,D,q){var lt=this.cells=[];if(C instanceof ArrayBuffer){this.arrayBuffer=C;var Ct=new Int32Array(this.arrayBuffer);C=Ct[0],D=Ct[1],q=Ct[2],this.d=D+2*q;for(var Rt=0;Rt<this.d*this.d;Rt++){var jt=Ct[Ca+Rt],Kt=Ct[Ca+Rt+1];lt.push(jt===Kt?null:Ct.subarray(jt,Kt))}var oe=Ct[Ca+lt.length],xe=Ct[Ca+lt.length+1];this.keys=Ct.subarray(oe,xe),this.bboxes=Ct.subarray(xe),this.insert=this._insertReadonly}else{this.d=D+2*q;for(var _e=0;_e<this.d*this.d;_e++)lt.push([]);this.keys=[],this.bboxes=[]}this.n=D,this.extent=C,this.padding=q,this.scale=D/C,this.uid=0;var Oe=q/D*C;this.min=-Oe,this.max=C+Oe}Ra.prototype.insert=function(C,D,q,lt,Ct){this._forEachCell(D,q,lt,Ct,this._insertCell,this.uid++),this.keys.push(C),this.bboxes.push(D),this.bboxes.push(q),this.bboxes.push(lt),this.bboxes.push(Ct)},Ra.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ra.prototype._insertCell=function(C,D,q,lt,Ct,Rt){this.cells[Ct].push(Rt)},Ra.prototype.query=function(C,D,q,lt,Ct){var Rt=this.min,jt=this.max;if(C<=Rt&&D<=Rt&&jt<=q&&jt<=lt&&!Ct)return Array.prototype.slice.call(this.keys);var Kt=[];return this._forEachCell(C,D,q,lt,this._queryCell,Kt,{},Ct),Kt},Ra.prototype._queryCell=function(C,D,q,lt,Ct,Rt,jt,Kt){var oe=this.cells[Ct];if(oe!==null)for(var xe=this.keys,_e=this.bboxes,Oe=0;Oe<oe.length;Oe++){var Be=oe[Oe];if(jt[Be]===void 0){var Fe=4*Be;(Kt?Kt(_e[Fe+0],_e[Fe+1],_e[Fe+2],_e[Fe+3]):C<=_e[Fe+2]&&D<=_e[Fe+3]&&q>=_e[Fe+0]&&lt>=_e[Fe+1])?(jt[Be]=!0,Rt.push(xe[Be])):jt[Be]=!1}}},Ra.prototype._forEachCell=function(C,D,q,lt,Ct,Rt,jt,Kt){for(var oe=this._convertToCellCoord(C),xe=this._convertToCellCoord(D),_e=this._convertToCellCoord(q),Oe=this._convertToCellCoord(lt),Be=oe;Be<=_e;Be++)for(var Fe=xe;Fe<=Oe;Fe++){var er=this.d*Fe+Be;if((!Kt||Kt(this._convertFromCellCoord(Be),this._convertFromCellCoord(Fe),this._convertFromCellCoord(Be+1),this._convertFromCellCoord(Fe+1)))&&Ct.call(this,C,D,q,lt,er,Rt,jt,Kt))return}},Ra.prototype._convertFromCellCoord=function(C){return(C-this.padding)/this.scale},Ra.prototype._convertToCellCoord=function(C){return Math.max(0,Math.min(this.d-1,Math.floor(C*this.scale)+this.padding))},Ra.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var C=this.cells,D=Ca+this.cells.length+1+1,q=0,lt=0;lt<this.cells.length;lt++)q+=this.cells[lt].length;var Ct=new Int32Array(D+q+this.keys.length+this.bboxes.length);Ct[0]=this.extent,Ct[1]=this.n,Ct[2]=this.padding;for(var Rt=D,jt=0;jt<C.length;jt++){var Kt=C[jt];Ct[Ca+jt]=Rt,Ct.set(Kt,Rt),Rt+=Kt.length}return Ct[Ca+C.length]=Rt,Ct.set(this.keys,Rt),Rt+=this.keys.length,Ct[Ca+C.length+1]=Rt,Ct.set(this.bboxes,Rt),Rt+=this.bboxes.length,Ct.buffer};var Gs=self.ImageData,Pa=self.ImageBitmap,qi={};function wn(C,D,q){q===void 0&&(q={}),Object.defineProperty(D,"_classRegistryKey",{value:C,writeable:!1}),qi[C]={klass:D,omit:q.omit||[],shallow:q.shallow||[]}}for(var na in wn("Object",Object),Wi.serialize=function(C,D){var q=C.toArrayBuffer();return D&&D.push(q),{buffer:q}},Wi.deserialize=function(C){return new Wi(C.buffer)},wn("Grid",Wi),wn("Color",fr),wn("Error",Error),wn("ResolvedImage",_r),wn("StylePropertyFunction",po),wn("StyleExpression",ws,{omit:["_evaluator"]}),wn("ZoomDependentExpression",fo),wn("ZoomConstantExpression",Lo),wn("CompoundExpression",Dr,{omit:["_evaluate"]}),ls)ls[na]._classRegistryKey||wn("Expression_"+na,ls[na]);function Cs(C){return C&&typeof ArrayBuffer<"u"&&(C instanceof ArrayBuffer||C.constructor&&C.constructor.name==="ArrayBuffer")}function $s(C){return Pa&&C instanceof Pa}function ts(C,D){if(C==null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp)return C;if(Cs(C)||$s(C))return D&&D.push(C),C;if(ArrayBuffer.isView(C)){var q=C;return D&&D.push(q.buffer),q}if(C instanceof Gs)return D&&D.push(C.data.buffer),C;if(Array.isArray(C)){for(var lt=[],Ct=0,Rt=C;Ct<Rt.length;Ct+=1){var jt=Rt[Ct];lt.push(ts(jt,D))}return lt}if(typeof C=="object"){var Kt=C.constructor,oe=Kt._classRegistryKey;if(!oe)throw new Error("can't serialize object of unregistered class");var xe=Kt.serialize?Kt.serialize(C,D):{};if(!Kt.serialize){for(var _e in C)if(C.hasOwnProperty(_e)&&!(qi[oe].omit.indexOf(_e)>=0)){var Oe=C[_e];xe[_e]=qi[oe].shallow.indexOf(_e)>=0?Oe:ts(Oe,D)}C instanceof Error&&(xe.message=C.message)}if(xe.$name)throw new Error("$name property is reserved for worker serialization logic.");return oe!=="Object"&&(xe.$name=oe),xe}throw new Error("can't serialize object of type "+typeof C)}function es(C){if(C==null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp||Cs(C)||$s(C)||ArrayBuffer.isView(C)||C instanceof Gs)return C;if(Array.isArray(C))return C.map(es);if(typeof C=="object"){var D=C.$name||"Object",q=qi[D].klass;if(!q)throw new Error("can't deserialize unregistered class "+D);if(q.deserialize)return q.deserialize(C);for(var lt=Object.create(q.prototype),Ct=0,Rt=Object.keys(C);Ct<Rt.length;Ct+=1){var jt=Rt[Ct];if(jt!=="$name"){var Kt=C[jt];lt[jt]=qi[D].shallow.indexOf(jt)>=0?Kt:es(Kt)}}return lt}throw new Error("can't deserialize object of type "+typeof C)}var yo=function(){this.first=!0};yo.prototype.update=function(C,D){var q=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=q,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=q,!0):(this.lastFloorZoom>q?(this.lastIntegerZoom=q+1,this.lastIntegerZoomTime=D):this.lastFloorZoom<q&&(this.lastIntegerZoom=q,this.lastIntegerZoomTime=D),C!==this.lastZoom&&(this.lastZoom=C,this.lastFloorZoom=q,!0))};var xn={"Latin-1 Supplement":function(C){return C>=128&&C<=255},Arabic:function(C){return C>=1536&&C<=1791},"Arabic Supplement":function(C){return C>=1872&&C<=1919},"Arabic Extended-A":function(C){return C>=2208&&C<=2303},"Hangul Jamo":function(C){return C>=4352&&C<=4607},"Unified Canadian Aboriginal Syllabics":function(C){return C>=5120&&C<=5759},Khmer:function(C){return C>=6016&&C<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(C){return C>=6320&&C<=6399},"General Punctuation":function(C){return C>=8192&&C<=8303},"Letterlike Symbols":function(C){return C>=8448&&C<=8527},"Number Forms":function(C){return C>=8528&&C<=8591},"Miscellaneous Technical":function(C){return C>=8960&&C<=9215},"Control Pictures":function(C){return C>=9216&&C<=9279},"Optical Character Recognition":function(C){return C>=9280&&C<=9311},"Enclosed Alphanumerics":function(C){return C>=9312&&C<=9471},"Geometric Shapes":function(C){return C>=9632&&C<=9727},"Miscellaneous Symbols":function(C){return C>=9728&&C<=9983},"Miscellaneous Symbols and Arrows":function(C){return C>=11008&&C<=11263},"CJK Radicals Supplement":function(C){return C>=11904&&C<=12031},"Kangxi Radicals":function(C){return C>=12032&&C<=12255},"Ideographic Description Characters":function(C){return C>=12272&&C<=12287},"CJK Symbols and Punctuation":function(C){return C>=12288&&C<=12351},Hiragana:function(C){return C>=12352&&C<=12447},Katakana:function(C){return C>=12448&&C<=12543},Bopomofo:function(C){return C>=12544&&C<=12591},"Hangul Compatibility Jamo":function(C){return C>=12592&&C<=12687},Kanbun:function(C){return C>=12688&&C<=12703},"Bopomofo Extended":function(C){return C>=12704&&C<=12735},"CJK Strokes":function(C){return C>=12736&&C<=12783},"Katakana Phonetic Extensions":function(C){return C>=12784&&C<=12799},"Enclosed CJK Letters and Months":function(C){return C>=12800&&C<=13055},"CJK Compatibility":function(C){return C>=13056&&C<=13311},"CJK Unified Ideographs Extension A":function(C){return C>=13312&&C<=19903},"Yijing Hexagram Symbols":function(C){return C>=19904&&C<=19967},"CJK Unified Ideographs":function(C){return C>=19968&&C<=40959},"Yi Syllables":function(C){return C>=40960&&C<=42127},"Yi Radicals":function(C){return C>=42128&&C<=42191},"Hangul Jamo Extended-A":function(C){return C>=43360&&C<=43391},"Hangul Syllables":function(C){return C>=44032&&C<=55215},"Hangul Jamo Extended-B":function(C){return C>=55216&&C<=55295},"Private Use Area":function(C){return C>=57344&&C<=63743},"CJK Compatibility Ideographs":function(C){return C>=63744&&C<=64255},"Arabic Presentation Forms-A":function(C){return C>=64336&&C<=65023},"Vertical Forms":function(C){return C>=65040&&C<=65055},"CJK Compatibility Forms":function(C){return C>=65072&&C<=65103},"Small Form Variants":function(C){return C>=65104&&C<=65135},"Arabic Presentation Forms-B":function(C){return C>=65136&&C<=65279},"Halfwidth and Fullwidth Forms":function(C){return C>=65280&&C<=65519}};function Ha(C){for(var D=0,q=C;D<q.length;D+=1)if(fs(q[D].charCodeAt(0)))return!0;return!1}function fs(C){return!(C!==746&&C!==747&&(C<4352||!(xn["Bopomofo Extended"](C)||xn.Bopomofo(C)||xn["CJK Compatibility Forms"](C)&&!(C>=65097&&C<=65103)||xn["CJK Compatibility Ideographs"](C)||xn["CJK Compatibility"](C)||xn["CJK Radicals Supplement"](C)||xn["CJK Strokes"](C)||!(!xn["CJK Symbols and Punctuation"](C)||C>=12296&&C<=12305||C>=12308&&C<=12319||C===12336)||xn["CJK Unified Ideographs Extension A"](C)||xn["CJK Unified Ideographs"](C)||xn["Enclosed CJK Letters and Months"](C)||xn["Hangul Compatibility Jamo"](C)||xn["Hangul Jamo Extended-A"](C)||xn["Hangul Jamo Extended-B"](C)||xn["Hangul Jamo"](C)||xn["Hangul Syllables"](C)||xn.Hiragana(C)||xn["Ideographic Description Characters"](C)||xn.Kanbun(C)||xn["Kangxi Radicals"](C)||xn["Katakana Phonetic Extensions"](C)||xn.Katakana(C)&&C!==12540||!(!xn["Halfwidth and Fullwidth Forms"](C)||C===65288||C===65289||C===65293||C>=65306&&C<=65310||C===65339||C===65341||C===65343||C>=65371&&C<=65503||C===65507||C>=65512&&C<=65519)||!(!xn["Small Form Variants"](C)||C>=65112&&C<=65118||C>=65123&&C<=65126)||xn["Unified Canadian Aboriginal Syllabics"](C)||xn["Unified Canadian Aboriginal Syllabics Extended"](C)||xn["Vertical Forms"](C)||xn["Yijing Hexagram Symbols"](C)||xn["Yi Syllables"](C)||xn["Yi Radicals"](C))))}function Ls(C){return!(fs(C)||function(D){return!!(xn["Latin-1 Supplement"](D)&&(D===167||D===169||D===174||D===177||D===188||D===189||D===190||D===215||D===247)||xn["General Punctuation"](D)&&(D===8214||D===8224||D===8225||D===8240||D===8241||D===8251||D===8252||D===8258||D===8263||D===8264||D===8265||D===8273)||xn["Letterlike Symbols"](D)||xn["Number Forms"](D)||xn["Miscellaneous Technical"](D)&&(D>=8960&&D<=8967||D>=8972&&D<=8991||D>=8996&&D<=9e3||D===9003||D>=9085&&D<=9114||D>=9150&&D<=9165||D===9167||D>=9169&&D<=9179||D>=9186&&D<=9215)||xn["Control Pictures"](D)&&D!==9251||xn["Optical Character Recognition"](D)||xn["Enclosed Alphanumerics"](D)||xn["Geometric Shapes"](D)||xn["Miscellaneous Symbols"](D)&&!(D>=9754&&D<=9759)||xn["Miscellaneous Symbols and Arrows"](D)&&(D>=11026&&D<=11055||D>=11088&&D<=11097||D>=11192&&D<=11243)||xn["CJK Symbols and Punctuation"](D)||xn.Katakana(D)||xn["Private Use Area"](D)||xn["CJK Compatibility Forms"](D)||xn["Small Form Variants"](D)||xn["Halfwidth and Fullwidth Forms"](D)||D===8734||D===8756||D===8757||D>=9984&&D<=10087||D>=10102&&D<=10131||D===65532||D===65533)}(C))}function ia(C){return xn.Arabic(C)||xn["Arabic Supplement"](C)||xn["Arabic Extended-A"](C)||xn["Arabic Presentation Forms-A"](C)||xn["Arabic Presentation Forms-B"](C)}function Va(C){return C>=1424&&C<=2303||xn["Arabic Presentation Forms-A"](C)||xn["Arabic Presentation Forms-B"](C)}function Da(C,D){return!(!D&&Va(C)||C>=2304&&C<=3583||C>=3840&&C<=4255||xn.Khmer(C))}function La(C){for(var D=0,q=C;D<q.length;D+=1)if(Va(q[D].charCodeAt(0)))return!0;return!1}var eo="deferred",xo="loading",Ni="loaded",rs="error",ps=null,Yi="unavailable",ai=null,Es=function(C){C&&typeof C=="string"&&C.indexOf("NetworkError")>-1&&(Yi=rs),ps&&ps(C)};function xa(){Bi.fire(new Yt("pluginStateChange",{pluginStatus:Yi,pluginURL:ai}))}var Bi=new re,ro=function(){return Yi},rl=function(){if(Yi!==eo||!ai)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Yi=xo,xa(),ai&&ke({url:ai},function(C){C?Es(C):(Yi=Ni,xa())})},Ai={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Yi===Ni||Ai.applyArabicShaping!=null},isLoading:function(){return Yi===xo},setState:function(C){Yi=C.pluginStatus,ai=C.pluginURL},isParsed:function(){return Ai.applyArabicShaping!=null&&Ai.processBidirectionalText!=null&&Ai.processStyledBidirectionalText!=null},getPluginURL:function(){return ai}},ti=function(C,D){this.zoom=C,D?(this.now=D.now,this.fadeDuration=D.fadeDuration,this.zoomHistory=D.zoomHistory,this.transition=D.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new yo,this.transition={})};ti.prototype.isSupportedScript=function(C){return function(D,q){for(var lt=0,Ct=D;lt<Ct.length;lt+=1)if(!Da(Ct[lt].charCodeAt(0),q))return!1;return!0}(C,Ai.isLoaded())},ti.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ti.prototype.getCrossfadeParameters=function(){var C=this.zoom,D=C-Math.floor(C),q=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:D+(1-D)*q}:{fromScale:.5,toScale:1,t:1-(1-q)*D}};var Ea=function(C,D){this.property=C,this.value=D,this.expression=function(q,lt){if(Ua(q))return new po(q,lt);if(cs(q)){var Ct=Eo(q,lt);if(Ct.result==="error")throw new Error(Ct.value.map(function(jt){return jt.key+": "+jt.message}).join(", "));return Ct.value}var Rt=q;return typeof q=="string"&&lt.type==="color"&&(Rt=fr.parse(q)),{kind:"constant",evaluate:function(){return Rt}}}(D===void 0?C.specification.default:D,C.specification)};Ea.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ea.prototype.possiblyEvaluate=function(C,D,q){return this.property.possiblyEvaluate(this,C,D,q)};var no=function(C){this.property=C,this.value=new Ea(C,void 0)};no.prototype.transitioned=function(C,D){return new Hs(this.property,this.value,D,u({},C.transition,this.transition),C.now)},no.prototype.untransitioned=function(){return new Hs(this.property,this.value,null,{},0)};var Wa=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};Wa.prototype.getValue=function(C){return _(this._values[C].value.value)},Wa.prototype.setValue=function(C,D){this._values.hasOwnProperty(C)||(this._values[C]=new no(this._values[C].property)),this._values[C].value=new Ea(this._values[C].property,D===null?void 0:_(D))},Wa.prototype.getTransition=function(C){return _(this._values[C].transition)},Wa.prototype.setTransition=function(C,D){this._values.hasOwnProperty(C)||(this._values[C]=new no(this._values[C].property)),this._values[C].transition=_(D)||void 0},Wa.prototype.serialize=function(){for(var C={},D=0,q=Object.keys(this._values);D<q.length;D+=1){var lt=q[D],Ct=this.getValue(lt);Ct!==void 0&&(C[lt]=Ct);var Rt=this.getTransition(lt);Rt!==void 0&&(C[lt+"-transition"]=Rt)}return C},Wa.prototype.transitioned=function(C,D){for(var q=new Fo(this._properties),lt=0,Ct=Object.keys(this._values);lt<Ct.length;lt+=1){var Rt=Ct[lt];q._values[Rt]=this._values[Rt].transitioned(C,D._values[Rt])}return q},Wa.prototype.untransitioned=function(){for(var C=new Fo(this._properties),D=0,q=Object.keys(this._values);D<q.length;D+=1){var lt=q[D];C._values[lt]=this._values[lt].untransitioned()}return C};var Hs=function(C,D,q,lt,Ct){this.property=C,this.value=D,this.begin=Ct+lt.delay||0,this.end=this.begin+lt.duration||0,C.specification.transition&&(lt.delay||lt.duration)&&(this.prior=q)};Hs.prototype.possiblyEvaluate=function(C,D,q){var lt=C.now||0,Ct=this.value.possiblyEvaluate(C,D,q),Rt=this.prior;if(Rt){if(lt>this.end)return this.prior=null,Ct;if(this.value.isDataDriven())return this.prior=null,Ct;if(lt<this.begin)return Rt.possiblyEvaluate(C,D,q);var jt=(lt-this.begin)/(this.end-this.begin);return this.property.interpolate(Rt.possiblyEvaluate(C,D,q),Ct,function(Kt){if(Kt<=0)return 0;if(Kt>=1)return 1;var oe=Kt*Kt,xe=oe*Kt;return 4*(Kt<.5?xe:3*(Kt-oe)+xe-.75)}(jt))}return Ct};var Fo=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};Fo.prototype.possiblyEvaluate=function(C,D,q){for(var lt=new Qi(this._properties),Ct=0,Rt=Object.keys(this._values);Ct<Rt.length;Ct+=1){var jt=Rt[Ct];lt._values[jt]=this._values[jt].possiblyEvaluate(C,D,q)}return lt},Fo.prototype.hasTransition=function(){for(var C=0,D=Object.keys(this._values);C<D.length;C+=1){var q=D[C];if(this._values[q].prior)return!0}return!1};var ns=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};ns.prototype.getValue=function(C){return _(this._values[C].value)},ns.prototype.setValue=function(C,D){this._values[C]=new Ea(this._values[C].property,D===null?void 0:_(D))},ns.prototype.serialize=function(){for(var C={},D=0,q=Object.keys(this._values);D<q.length;D+=1){var lt=q[D],Ct=this.getValue(lt);Ct!==void 0&&(C[lt]=Ct)}return C},ns.prototype.possiblyEvaluate=function(C,D,q){for(var lt=new Qi(this._properties),Ct=0,Rt=Object.keys(this._values);Ct<Rt.length;Ct+=1){var jt=Rt[Ct];lt._values[jt]=this._values[jt].possiblyEvaluate(C,D,q)}return lt};var Ri=function(C,D,q){this.property=C,this.value=D,this.parameters=q};Ri.prototype.isConstant=function(){return this.value.kind==="constant"},Ri.prototype.constantOr=function(C){return this.value.kind==="constant"?this.value.value:C},Ri.prototype.evaluate=function(C,D,q,lt){return this.property.evaluate(this.value,this.parameters,C,D,q,lt)};var Qi=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};Qi.prototype.get=function(C){return this._values[C]};var An=function(C){this.specification=C};An.prototype.possiblyEvaluate=function(C,D){return C.expression.evaluate(D)},An.prototype.interpolate=function(C,D,q){var lt=mn[this.specification.type];return lt?lt(C,D,q):C};var Ln=function(C,D){this.specification=C,this.overrides=D};Ln.prototype.possiblyEvaluate=function(C,D,q,lt){return C.expression.kind==="constant"||C.expression.kind==="camera"?new Ri(this,{kind:"constant",value:C.expression.evaluate(D,null,{},q,lt)},D):new Ri(this,C.expression,D)},Ln.prototype.interpolate=function(C,D,q){if(C.value.kind!=="constant"||D.value.kind!=="constant")return C;if(C.value.value===void 0||D.value.value===void 0)return new Ri(this,{kind:"constant",value:void 0},C.parameters);var lt=mn[this.specification.type];return lt?new Ri(this,{kind:"constant",value:lt(C.value.value,D.value.value,q)},C.parameters):C},Ln.prototype.evaluate=function(C,D,q,lt,Ct,Rt){return C.kind==="constant"?C.value:C.evaluate(D,q,lt,Ct,Rt)};var ds=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(q,lt,Ct,Rt){if(q.value===void 0)return new Ri(this,{kind:"constant",value:void 0},lt);if(q.expression.kind==="constant"){var jt=q.expression.evaluate(lt,null,{},Ct,Rt),Kt=q.property.specification.type==="resolvedImage"&&typeof jt!="string"?jt.name:jt,oe=this._calculate(Kt,Kt,Kt,lt);return new Ri(this,{kind:"constant",value:oe},lt)}if(q.expression.kind==="camera"){var xe=this._calculate(q.expression.evaluate({zoom:lt.zoom-1}),q.expression.evaluate({zoom:lt.zoom}),q.expression.evaluate({zoom:lt.zoom+1}),lt);return new Ri(this,{kind:"constant",value:xe},lt)}return new Ri(this,q.expression,lt)},D.prototype.evaluate=function(q,lt,Ct,Rt,jt,Kt){if(q.kind==="source"){var oe=q.evaluate(lt,Ct,Rt,jt,Kt);return this._calculate(oe,oe,oe,lt)}return q.kind==="composite"?this._calculate(q.evaluate({zoom:Math.floor(lt.zoom)-1},Ct,Rt),q.evaluate({zoom:Math.floor(lt.zoom)},Ct,Rt),q.evaluate({zoom:Math.floor(lt.zoom)+1},Ct,Rt),lt):q.value},D.prototype._calculate=function(q,lt,Ct,Rt){return Rt.zoom>Rt.zoomHistory.lastIntegerZoom?{from:q,to:lt}:{from:Ct,to:lt}},D.prototype.interpolate=function(q){return q},D}(Ln),ua=function(C){this.specification=C};ua.prototype.possiblyEvaluate=function(C,D,q,lt){if(C.value!==void 0){if(C.expression.kind==="constant"){var Ct=C.expression.evaluate(D,null,{},q,lt);return this._calculate(Ct,Ct,Ct,D)}return this._calculate(C.expression.evaluate(new ti(Math.floor(D.zoom-1),D)),C.expression.evaluate(new ti(Math.floor(D.zoom),D)),C.expression.evaluate(new ti(Math.floor(D.zoom+1),D)),D)}},ua.prototype._calculate=function(C,D,q,lt){return lt.zoom>lt.zoomHistory.lastIntegerZoom?{from:C,to:D}:{from:q,to:D}},ua.prototype.interpolate=function(C){return C};var zo=function(C){this.specification=C};zo.prototype.possiblyEvaluate=function(C,D,q,lt){return!!C.expression.evaluate(D,null,{},q,lt)},zo.prototype.interpolate=function(){return!1};var ta=function(C){for(var D in this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],C){var q=C[D];q.specification.overridable&&this.overridableProperties.push(D);var lt=this.defaultPropertyValues[D]=new Ea(q,void 0),Ct=this.defaultTransitionablePropertyValues[D]=new no(q);this.defaultTransitioningPropertyValues[D]=Ct.untransitioned(),this.defaultPossiblyEvaluatedValues[D]=lt.possiblyEvaluate({})}};wn("DataDrivenProperty",Ln),wn("DataConstantProperty",An),wn("CrossFadedDataDrivenProperty",ds),wn("CrossFadedProperty",ua),wn("ColorRampProperty",zo);var gs="-transition",ea=function(C){function D(q,lt){if(C.call(this),this.id=q.id,this.type=q.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},q.type!=="custom"&&(this.metadata=q.metadata,this.minzoom=q.minzoom,this.maxzoom=q.maxzoom,q.type!=="background"&&(this.source=q.source,this.sourceLayer=q["source-layer"],this.filter=q.filter),lt.layout&&(this._unevaluatedLayout=new ns(lt.layout)),lt.paint)){for(var Ct in this._transitionablePaint=new Wa(lt.paint),q.paint)this.setPaintProperty(Ct,q.paint[Ct],{validate:!1});for(var Rt in q.layout)this.setLayoutProperty(Rt,q.layout[Rt],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qi(lt.paint)}}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},D.prototype.getLayoutProperty=function(q){return q==="visibility"?this.visibility:this._unevaluatedLayout.getValue(q)},D.prototype.setLayoutProperty=function(q,lt,Ct){if(Ct===void 0&&(Ct={}),lt!=null){var Rt="layers."+this.id+".layout."+q;if(this._validate(Do,Rt,q,lt,Ct))return}q!=="visibility"?this._unevaluatedLayout.setValue(q,lt):this.visibility=lt},D.prototype.getPaintProperty=function(q){return y(q,gs)?this._transitionablePaint.getTransition(q.slice(0,-11)):this._transitionablePaint.getValue(q)},D.prototype.setPaintProperty=function(q,lt,Ct){if(Ct===void 0&&(Ct={}),lt!=null){var Rt="layers."+this.id+".paint."+q;if(this._validate(ca,Rt,q,lt,Ct))return!1}if(y(q,gs))return this._transitionablePaint.setTransition(q.slice(0,-11),lt||void 0),!1;var jt=this._transitionablePaint._values[q],Kt=jt.property.specification["property-type"]==="cross-faded-data-driven",oe=jt.value.isDataDriven(),xe=jt.value;this._transitionablePaint.setValue(q,lt),this._handleSpecialPaintPropertyUpdate(q);var _e=this._transitionablePaint._values[q].value;return _e.isDataDriven()||oe||Kt||this._handleOverridablePaintPropertyUpdate(q,xe,_e)},D.prototype._handleSpecialPaintPropertyUpdate=function(q){},D.prototype._handleOverridablePaintPropertyUpdate=function(q,lt,Ct){return!1},D.prototype.isHidden=function(q){return!!(this.minzoom&&q<this.minzoom)||!!(this.maxzoom&&q>=this.maxzoom)||this.visibility==="none"},D.prototype.updateTransitions=function(q){this._transitioningPaint=this._transitionablePaint.transitioned(q,this._transitioningPaint)},D.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},D.prototype.recalculate=function(q,lt){q.getCrossfadeParameters&&(this._crossfadeParameters=q.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(q,void 0,lt)),this.paint=this._transitioningPaint.possiblyEvaluate(q,void 0,lt)},D.prototype.serialize=function(){var q={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(q.layout=q.layout||{},q.layout.visibility=this.visibility),x(q,function(lt,Ct){return!(lt===void 0||Ct==="layout"&&!Object.keys(lt).length||Ct==="paint"&&!Object.keys(lt).length)})},D.prototype._validate=function(q,lt,Ct,Rt,jt){return jt===void 0&&(jt={}),(!jt||jt.validate!==!1)&&$a(this,q.call(Ji,{key:lt,layerType:this.type,objectKey:Ct,value:Rt,styleSpec:Pt,style:{glyphs:!0,sprite:!0}}))},D.prototype.is3D=function(){return!1},D.prototype.isTileClipped=function(){return!1},D.prototype.hasOffscreenPass=function(){return!1},D.prototype.resize=function(){},D.prototype.isStateDependent=function(){for(var q in this.paint._values){var lt=this.paint.get(q);if(lt instanceof Ri&&ho(lt.property.specification)&&(lt.value.kind==="source"||lt.value.kind==="composite")&&lt.value.isStateDependent)return!0}return!1},D}(re),No={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Bo=function(C,D){this._structArray=C,this._pos1=D*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Pn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ji(C,D){D===void 0&&(D=1);var q=0,lt=0;return{members:C.map(function(Ct){var Rt,jt=(Rt=Ct.type,No[Rt].BYTES_PER_ELEMENT),Kt=q=io(q,Math.max(D,jt)),oe=Ct.components||1;return lt=Math.max(lt,jt),q+=jt*oe,{name:Ct.name,type:Ct.type,components:oe,offset:Kt}}),size:io(q,Math.max(lt,D)),alignment:D}}function io(C,D){return Math.ceil(C/D)*D}Pn.serialize=function(C,D){return C._trim(),D&&(C.isTransferred=!0,D.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},Pn.deserialize=function(C){var D=Object.create(this.prototype);return D.arrayBuffer=C.arrayBuffer,D.length=C.length,D.capacity=C.arrayBuffer.byteLength/D.bytesPerElement,D._refreshViews(),D},Pn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Pn.prototype.clear=function(){this.length=0},Pn.prototype.resize=function(C){this.reserve(C),this.length=C},Pn.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var D=this.uint8;this._refreshViews(),D&&this.uint8.set(D)}},Pn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ba=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt){var Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,q,lt)},D.prototype.emplace=function(q,lt,Ct){var Rt=2*q;return this.int16[Rt+0]=lt,this.int16[Rt+1]=Ct,q},D}(Pn);ba.prototype.bytesPerElement=4,wn("StructArrayLayout2i4",ba);var is=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt){var jt=this.length;return this.resize(jt+1),this.emplace(jt,q,lt,Ct,Rt)},D.prototype.emplace=function(q,lt,Ct,Rt,jt){var Kt=4*q;return this.int16[Kt+0]=lt,this.int16[Kt+1]=Ct,this.int16[Kt+2]=Rt,this.int16[Kt+3]=jt,q},D}(Pn);is.prototype.bytesPerElement=8,wn("StructArrayLayout4i8",is);var ms=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt,jt,Kt){var oe=this.length;return this.resize(oe+1),this.emplace(oe,q,lt,Ct,Rt,jt,Kt)},D.prototype.emplace=function(q,lt,Ct,Rt,jt,Kt,oe){var xe=6*q;return this.int16[xe+0]=lt,this.int16[xe+1]=Ct,this.int16[xe+2]=Rt,this.int16[xe+3]=jt,this.int16[xe+4]=Kt,this.int16[xe+5]=oe,q},D}(Pn);ms.prototype.bytesPerElement=12,wn("StructArrayLayout2i4i12",ms);var as=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt,jt,Kt){var oe=this.length;return this.resize(oe+1),this.emplace(oe,q,lt,Ct,Rt,jt,Kt)},D.prototype.emplace=function(q,lt,Ct,Rt,jt,Kt,oe){var xe=4*q,_e=8*q;return this.int16[xe+0]=lt,this.int16[xe+1]=Ct,this.uint8[_e+4]=Rt,this.uint8[_e+5]=jt,this.uint8[_e+6]=Kt,this.uint8[_e+7]=oe,q},D}(Pn);as.prototype.bytesPerElement=8,wn("StructArrayLayout2i4ub8",as);var bo=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe){var Be=this.length;return this.resize(Be+1),this.emplace(Be,q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe)},D.prototype.emplace=function(q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be){var Fe=9*q,er=18*q;return this.uint16[Fe+0]=lt,this.uint16[Fe+1]=Ct,this.uint16[Fe+2]=Rt,this.uint16[Fe+3]=jt,this.uint16[Fe+4]=Kt,this.uint16[Fe+5]=oe,this.uint16[Fe+6]=xe,this.uint16[Fe+7]=_e,this.uint8[er+16]=Oe,this.uint8[er+17]=Be,q},D}(Pn);bo.prototype.bytesPerElement=18,wn("StructArrayLayout8ui2ub18",bo);var F=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe){var er=this.length;return this.resize(er+1),this.emplace(er,q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe)},D.prototype.emplace=function(q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe,er){var or=12*q;return this.int16[or+0]=lt,this.int16[or+1]=Ct,this.int16[or+2]=Rt,this.int16[or+3]=jt,this.uint16[or+4]=Kt,this.uint16[or+5]=oe,this.uint16[or+6]=xe,this.uint16[or+7]=_e,this.int16[or+8]=Oe,this.int16[or+9]=Be,this.int16[or+10]=Fe,this.int16[or+11]=er,q},D}(Pn);F.prototype.bytesPerElement=24,wn("StructArrayLayout4i4ui4i24",F);var H=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,q,lt,Ct)},D.prototype.emplace=function(q,lt,Ct,Rt){var jt=3*q;return this.float32[jt+0]=lt,this.float32[jt+1]=Ct,this.float32[jt+2]=Rt,q},D}(Pn);H.prototype.bytesPerElement=12,wn("StructArrayLayout3f12",H);var $=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q){var lt=this.length;return this.resize(lt+1),this.emplace(lt,q)},D.prototype.emplace=function(q,lt){var Ct=1*q;return this.uint32[Ct+0]=lt,q},D}(Pn);$.prototype.bytesPerElement=4,wn("StructArrayLayout1ul4",$);var K=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt,jt,Kt,oe,xe,_e){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,q,lt,Ct,Rt,jt,Kt,oe,xe,_e)},D.prototype.emplace=function(q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe){var Be=10*q,Fe=5*q;return this.int16[Be+0]=lt,this.int16[Be+1]=Ct,this.int16[Be+2]=Rt,this.int16[Be+3]=jt,this.int16[Be+4]=Kt,this.int16[Be+5]=oe,this.uint32[Fe+3]=xe,this.uint16[Be+8]=_e,this.uint16[Be+9]=Oe,q},D}(Pn);K.prototype.bytesPerElement=20,wn("StructArrayLayout6i1ul2ui20",K);var ft=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt,jt,Kt){var oe=this.length;return this.resize(oe+1),this.emplace(oe,q,lt,Ct,Rt,jt,Kt)},D.prototype.emplace=function(q,lt,Ct,Rt,jt,Kt,oe){var xe=6*q;return this.int16[xe+0]=lt,this.int16[xe+1]=Ct,this.int16[xe+2]=Rt,this.int16[xe+3]=jt,this.int16[xe+4]=Kt,this.int16[xe+5]=oe,q},D}(Pn);ft.prototype.bytesPerElement=12,wn("StructArrayLayout2i2i2i12",ft);var At=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt,jt){var Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,q,lt,Ct,Rt,jt)},D.prototype.emplace=function(q,lt,Ct,Rt,jt,Kt){var oe=4*q,xe=8*q;return this.float32[oe+0]=lt,this.float32[oe+1]=Ct,this.float32[oe+2]=Rt,this.int16[xe+6]=jt,this.int16[xe+7]=Kt,q},D}(Pn);At.prototype.bytesPerElement=16,wn("StructArrayLayout2f1f2i16",At);var N=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt){var jt=this.length;return this.resize(jt+1),this.emplace(jt,q,lt,Ct,Rt)},D.prototype.emplace=function(q,lt,Ct,Rt,jt){var Kt=12*q,oe=3*q;return this.uint8[Kt+0]=lt,this.uint8[Kt+1]=Ct,this.float32[oe+1]=Rt,this.float32[oe+2]=jt,q},D}(Pn);N.prototype.bytesPerElement=12,wn("StructArrayLayout2ub2f12",N);var Q=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,q,lt,Ct)},D.prototype.emplace=function(q,lt,Ct,Rt){var jt=3*q;return this.uint16[jt+0]=lt,this.uint16[jt+1]=Ct,this.uint16[jt+2]=Rt,q},D}(Pn);Q.prototype.bytesPerElement=6,wn("StructArrayLayout3ui6",Q);var it=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe,er,or,Tr,kr,Or){var Rr=this.length;return this.resize(Rr+1),this.emplace(Rr,q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe,er,or,Tr,kr,Or)},D.prototype.emplace=function(q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe,er,or,Tr,kr,Or,Rr){var Ur=24*q,Wr=12*q,Jr=48*q;return this.int16[Ur+0]=lt,this.int16[Ur+1]=Ct,this.uint16[Ur+2]=Rt,this.uint16[Ur+3]=jt,this.uint32[Wr+2]=Kt,this.uint32[Wr+3]=oe,this.uint32[Wr+4]=xe,this.uint16[Ur+10]=_e,this.uint16[Ur+11]=Oe,this.uint16[Ur+12]=Be,this.float32[Wr+7]=Fe,this.float32[Wr+8]=er,this.uint8[Jr+36]=or,this.uint8[Jr+37]=Tr,this.uint8[Jr+38]=kr,this.uint32[Wr+10]=Or,this.int16[Ur+22]=Rr,q},D}(Pn);it.prototype.bytesPerElement=48,wn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",it);var dt=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe,er,or,Tr,kr,Or,Rr,Ur,Wr,Jr,gn,un,yn,Tn,Bn,Cn,Fn){var In=this.length;return this.resize(In+1),this.emplace(In,q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe,er,or,Tr,kr,Or,Rr,Ur,Wr,Jr,gn,un,yn,Tn,Bn,Cn,Fn)},D.prototype.emplace=function(q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe,er,or,Tr,kr,Or,Rr,Ur,Wr,Jr,gn,un,yn,Tn,Bn,Cn,Fn,In){var Mn=34*q,Vn=17*q;return this.int16[Mn+0]=lt,this.int16[Mn+1]=Ct,this.int16[Mn+2]=Rt,this.int16[Mn+3]=jt,this.int16[Mn+4]=Kt,this.int16[Mn+5]=oe,this.int16[Mn+6]=xe,this.int16[Mn+7]=_e,this.uint16[Mn+8]=Oe,this.uint16[Mn+9]=Be,this.uint16[Mn+10]=Fe,this.uint16[Mn+11]=er,this.uint16[Mn+12]=or,this.uint16[Mn+13]=Tr,this.uint16[Mn+14]=kr,this.uint16[Mn+15]=Or,this.uint16[Mn+16]=Rr,this.uint16[Mn+17]=Ur,this.uint16[Mn+18]=Wr,this.uint16[Mn+19]=Jr,this.uint16[Mn+20]=gn,this.uint16[Mn+21]=un,this.uint16[Mn+22]=yn,this.uint32[Vn+12]=Tn,this.float32[Vn+13]=Bn,this.float32[Vn+14]=Cn,this.float32[Vn+15]=Fn,this.float32[Vn+16]=In,q},D}(Pn);dt.prototype.bytesPerElement=68,wn("StructArrayLayout8i15ui1ul4f68",dt);var wt=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q){var lt=this.length;return this.resize(lt+1),this.emplace(lt,q)},D.prototype.emplace=function(q,lt){var Ct=1*q;return this.float32[Ct+0]=lt,q},D}(Pn);wt.prototype.bytesPerElement=4,wn("StructArrayLayout1f4",wt);var Et=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,q,lt,Ct)},D.prototype.emplace=function(q,lt,Ct,Rt){var jt=3*q;return this.int16[jt+0]=lt,this.int16[jt+1]=Ct,this.int16[jt+2]=Rt,q},D}(Pn);Et.prototype.bytesPerElement=6,wn("StructArrayLayout3i6",Et);var Bt=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,q,lt,Ct)},D.prototype.emplace=function(q,lt,Ct,Rt){var jt=2*q,Kt=4*q;return this.uint32[jt+0]=lt,this.uint16[Kt+2]=Ct,this.uint16[Kt+3]=Rt,q},D}(Pn);Bt.prototype.bytesPerElement=8,wn("StructArrayLayout1ul2ui8",Bt);var Ut=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt){var Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,q,lt)},D.prototype.emplace=function(q,lt,Ct){var Rt=2*q;return this.uint16[Rt+0]=lt,this.uint16[Rt+1]=Ct,q},D}(Pn);Ut.prototype.bytesPerElement=4,wn("StructArrayLayout2ui4",Ut);var Ht=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q){var lt=this.length;return this.resize(lt+1),this.emplace(lt,q)},D.prototype.emplace=function(q,lt){var Ct=1*q;return this.uint16[Ct+0]=lt,q},D}(Pn);Ht.prototype.bytesPerElement=2,wn("StructArrayLayout1ui2",Ht);var qt=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt){var Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,q,lt)},D.prototype.emplace=function(q,lt,Ct){var Rt=2*q;return this.float32[Rt+0]=lt,this.float32[Rt+1]=Ct,q},D}(Pn);qt.prototype.bytesPerElement=8,wn("StructArrayLayout2f8",qt);var Jt=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(q,lt,Ct,Rt){var jt=this.length;return this.resize(jt+1),this.emplace(jt,q,lt,Ct,Rt)},D.prototype.emplace=function(q,lt,Ct,Rt,jt){var Kt=4*q;return this.float32[Kt+0]=lt,this.float32[Kt+1]=Ct,this.float32[Kt+2]=Rt,this.float32[Kt+3]=jt,q},D}(Pn);Jt.prototype.bytesPerElement=16,wn("StructArrayLayout4f16",Jt);var le=function(C){function D(){C.apply(this,arguments)}C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D;var q={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return q.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},q.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},q.x1.get=function(){return this._structArray.int16[this._pos2+2]},q.y1.get=function(){return this._structArray.int16[this._pos2+3]},q.x2.get=function(){return this._structArray.int16[this._pos2+4]},q.y2.get=function(){return this._structArray.int16[this._pos2+5]},q.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},q.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},q.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},q.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(D.prototype,q),D}(Bo);le.prototype.size=20;var fe=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.get=function(q){return new le(this,q)},D}(K);wn("CollisionBoxArray",fe);var Le=function(C){function D(){C.apply(this,arguments)}C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D;var q={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return q.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},q.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},q.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},q.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},q.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},q.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},q.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},q.segment.get=function(){return this._structArray.uint16[this._pos2+10]},q.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},q.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},q.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},q.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},q.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},q.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},q.placedOrientation.set=function(lt){this._structArray.uint8[this._pos1+37]=lt},q.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},q.hidden.set=function(lt){this._structArray.uint8[this._pos1+38]=lt},q.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},q.crossTileID.set=function(lt){this._structArray.uint32[this._pos4+10]=lt},q.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(D.prototype,q),D}(Bo);Le.prototype.size=48;var Se=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.get=function(q){return new Le(this,q)},D}(it);wn("PlacedSymbolArray",Se);var Ce=function(C){function D(){C.apply(this,arguments)}C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D;var q={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return q.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},q.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},q.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},q.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},q.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},q.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},q.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},q.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},q.key.get=function(){return this._structArray.uint16[this._pos2+8]},q.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},q.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},q.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},q.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},q.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},q.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},q.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},q.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},q.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},q.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},q.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},q.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},q.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},q.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},q.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},q.crossTileID.set=function(lt){this._structArray.uint32[this._pos4+12]=lt},q.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},q.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},q.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},q.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(D.prototype,q),D}(Bo);Ce.prototype.size=68;var Ne=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.get=function(q){return new Ce(this,q)},D}(dt);wn("SymbolInstanceArray",Ne);var Ee=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.getoffsetX=function(q){return this.float32[1*q+0]},D}(wt);wn("GlyphOffsetArray",Ee);var rr=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.getx=function(q){return this.int16[3*q+0]},D.prototype.gety=function(q){return this.int16[3*q+1]},D.prototype.gettileUnitDistanceFromAnchor=function(q){return this.int16[3*q+2]},D}(Et);wn("SymbolLineVertexArray",rr);var Ye=function(C){function D(){C.apply(this,arguments)}C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D;var q={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return q.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},q.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},q.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(D.prototype,q),D}(Bo);Ye.prototype.size=8;var Ve=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.get=function(q){return new Ye(this,q)},D}(Bt);wn("FeatureIndexArray",Ve);var dr=ji([{name:"a_pos",components:2,type:"Int16"}],4).members,vr=function(C){C===void 0&&(C=[]),this.segments=C};function Fr(C,D){return 256*(C=c(Math.floor(C),0,255))+c(Math.floor(D),0,255)}vr.prototype.prepareSegment=function(C,D,q,lt){var Ct=this.segments[this.segments.length-1];return C>vr.MAX_VERTEX_ARRAY_LENGTH&&A("Max vertices per segment is "+vr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!Ct||Ct.vertexLength+C>vr.MAX_VERTEX_ARRAY_LENGTH||Ct.sortKey!==lt)&&(Ct={vertexOffset:D.length,primitiveOffset:q.length,vertexLength:0,primitiveLength:0},lt!==void 0&&(Ct.sortKey=lt),this.segments.push(Ct)),Ct},vr.prototype.get=function(){return this.segments},vr.prototype.destroy=function(){for(var C=0,D=this.segments;C<D.length;C+=1){var q=D[C];for(var lt in q.vaos)q.vaos[lt].destroy()}},vr.simpleSegment=function(C,D,q,lt){return new vr([{vertexOffset:C,primitiveOffset:D,vertexLength:q,primitiveLength:lt,vaos:{},sortKey:0}])},vr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wn("SegmentVector",vr);var zr=ji([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),$r=m(function(C){C.exports=function(D,q){var lt,Ct,Rt,jt,Kt,oe,xe,_e;for(lt=3&D.length,Ct=D.length-lt,Rt=q,Kt=3432918353,oe=461845907,_e=0;_e<Ct;)xe=255&D.charCodeAt(_e)|(255&D.charCodeAt(++_e))<<8|(255&D.charCodeAt(++_e))<<16|(255&D.charCodeAt(++_e))<<24,++_e,Rt=27492+(65535&(jt=5*(65535&(Rt=(Rt^=xe=(65535&(xe=(xe=(65535&xe)*Kt+(((xe>>>16)*Kt&65535)<<16)&4294967295)<<15|xe>>>17))*oe+(((xe>>>16)*oe&65535)<<16)&4294967295)<<13|Rt>>>19))+((5*(Rt>>>16)&65535)<<16)&4294967295))+((58964+(jt>>>16)&65535)<<16);switch(xe=0,lt){case 3:xe^=(255&D.charCodeAt(_e+2))<<16;case 2:xe^=(255&D.charCodeAt(_e+1))<<8;case 1:Rt^=xe=(65535&(xe=(xe=(65535&(xe^=255&D.charCodeAt(_e)))*Kt+(((xe>>>16)*Kt&65535)<<16)&4294967295)<<15|xe>>>17))*oe+(((xe>>>16)*oe&65535)<<16)&4294967295}return Rt^=D.length,Rt=2246822507*(65535&(Rt^=Rt>>>16))+((2246822507*(Rt>>>16)&65535)<<16)&4294967295,Rt=3266489909*(65535&(Rt^=Rt>>>13))+((3266489909*(Rt>>>16)&65535)<<16)&4294967295,(Rt^=Rt>>>16)>>>0}}),Zr=m(function(C){C.exports=function(D,q){for(var lt,Ct=D.length,Rt=q^Ct,jt=0;Ct>=4;)lt=1540483477*(65535&(lt=255&D.charCodeAt(jt)|(255&D.charCodeAt(++jt))<<8|(255&D.charCodeAt(++jt))<<16|(255&D.charCodeAt(++jt))<<24))+((1540483477*(lt>>>16)&65535)<<16),Rt=1540483477*(65535&Rt)+((1540483477*(Rt>>>16)&65535)<<16)^(lt=1540483477*(65535&(lt^=lt>>>24))+((1540483477*(lt>>>16)&65535)<<16)),Ct-=4,++jt;switch(Ct){case 3:Rt^=(255&D.charCodeAt(jt+2))<<16;case 2:Rt^=(255&D.charCodeAt(jt+1))<<8;case 1:Rt=1540483477*(65535&(Rt^=255&D.charCodeAt(jt)))+((1540483477*(Rt>>>16)&65535)<<16)}return Rt=1540483477*(65535&(Rt^=Rt>>>13))+((1540483477*(Rt>>>16)&65535)<<16),(Rt^=Rt>>>15)>>>0}}),cn=$r,ln=$r,pn=Zr;cn.murmur3=ln,cn.murmur2=pn;var bn=function(){this.ids=[],this.positions=[],this.indexed=!1};bn.prototype.add=function(C,D,q,lt){this.ids.push(Br(C)),this.positions.push(D,q,lt)},bn.prototype.getPositions=function(C){for(var D=Br(C),q=0,lt=this.ids.length-1;q<lt;){var Ct=q+lt>>1;this.ids[Ct]>=D?lt=Ct:q=Ct+1}for(var Rt=[];this.ids[q]===D;){var jt=this.positions[3*q],Kt=this.positions[3*q+1],oe=this.positions[3*q+2];Rt.push({index:jt,start:Kt,end:oe}),q++}return Rt},bn.serialize=function(C,D){var q=new Float64Array(C.ids),lt=new Uint32Array(C.positions);return on(q,lt,0,q.length-1),D&&D.push(q.buffer,lt.buffer),{ids:q,positions:lt}},bn.deserialize=function(C){var D=new bn;return D.ids=C.ids,D.positions=C.positions,D.indexed=!0,D};var On=Math.pow(2,53)-1;function Br(C){var D=+C;return!isNaN(D)&&D<=On?D:cn(String(C))}function on(C,D,q,lt){for(;q<lt;){for(var Ct=C[q+lt>>1],Rt=q-1,jt=lt+1;;){do Rt++;while(C[Rt]<Ct);do jt--;while(C[jt]>Ct);if(Rt>=jt)break;dn(C,Rt,jt),dn(D,3*Rt,3*jt),dn(D,3*Rt+1,3*jt+1),dn(D,3*Rt+2,3*jt+2)}jt-q<lt-jt?(on(C,D,q,jt),q=jt+1):(on(C,D,jt+1,lt),lt=jt)}}function dn(C,D,q){var lt=C[D];C[D]=C[q],C[q]=lt}wn("FeaturePositionMap",bn);var _n=function(C,D){this.gl=C.gl,this.location=D},En=function(C){function D(q,lt){C.call(this,q,lt),this.current=0}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.set=function(q){this.current!==q&&(this.current=q,this.gl.uniform1i(this.location,q))},D}(_n),Nn=function(C){function D(q,lt){C.call(this,q,lt),this.current=0}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.set=function(q){this.current!==q&&(this.current=q,this.gl.uniform1f(this.location,q))},D}(_n),$n=function(C){function D(q,lt){C.call(this,q,lt),this.current=[0,0]}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.set=function(q){q[0]===this.current[0]&&q[1]===this.current[1]||(this.current=q,this.gl.uniform2f(this.location,q[0],q[1]))},D}(_n),Kn=function(C){function D(q,lt){C.call(this,q,lt),this.current=[0,0,0]}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.set=function(q){q[0]===this.current[0]&&q[1]===this.current[1]&&q[2]===this.current[2]||(this.current=q,this.gl.uniform3f(this.location,q[0],q[1],q[2]))},D}(_n),hi=function(C){function D(q,lt){C.call(this,q,lt),this.current=[0,0,0,0]}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.set=function(q){q[0]===this.current[0]&&q[1]===this.current[1]&&q[2]===this.current[2]&&q[3]===this.current[3]||(this.current=q,this.gl.uniform4f(this.location,q[0],q[1],q[2],q[3]))},D}(_n),fi=function(C){function D(q,lt){C.call(this,q,lt),this.current=fr.transparent}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.set=function(q){q.r===this.current.r&&q.g===this.current.g&&q.b===this.current.b&&q.a===this.current.a||(this.current=q,this.gl.uniform4f(this.location,q.r,q.g,q.b,q.a))},D}(_n),Jn=new Float32Array(16),Ci=function(C){function D(q,lt){C.call(this,q,lt),this.current=Jn}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.set=function(q){if(q[12]!==this.current[12]||q[0]!==this.current[0])return this.current=q,void this.gl.uniformMatrix4fv(this.location,!1,q);for(var lt=1;lt<16;lt++)if(q[lt]!==this.current[lt]){this.current=q,this.gl.uniformMatrix4fv(this.location,!1,q);break}},D}(_n);function Zi(C){return[Fr(255*C.r,255*C.g),Fr(255*C.b,255*C.a)]}var Pi=function(C,D,q){this.value=C,this.uniformNames=D.map(function(lt){return"u_"+lt}),this.type=q};Pi.prototype.setUniform=function(C,D,q){C.set(q.constantOr(this.value))},Pi.prototype.getBinding=function(C,D,q){return this.type==="color"?new fi(C,D):new Nn(C,D)};var Ui=function(C,D){this.uniformNames=D.map(function(q){return"u_"+q}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ui.prototype.setConstantPatternPositions=function(C,D){this.pixelRatioFrom=D.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=D.tlbr,this.patternTo=C.tlbr},Ui.prototype.setUniform=function(C,D,q,lt){var Ct=lt==="u_pattern_to"?this.patternTo:lt==="u_pattern_from"?this.patternFrom:lt==="u_pixel_ratio_to"?this.pixelRatioTo:lt==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Ct&&C.set(Ct)},Ui.prototype.getBinding=function(C,D,q){return q.substr(0,9)==="u_pattern"?new hi(C,D):new Nn(C,D)};var Wn=function(C,D,q,lt){this.expression=C,this.type=q,this.maxValue=0,this.paintVertexAttributes=D.map(function(Ct){return{name:"a_"+Ct,type:"Float32",components:q==="color"?2:1,offset:0}}),this.paintVertexArray=new lt};Wn.prototype.populatePaintArray=function(C,D,q,lt,Ct){var Rt=this.paintVertexArray.length,jt=this.expression.evaluate(new ti(0),D,{},lt,[],Ct);this.paintVertexArray.resize(C),this._setPaintValue(Rt,C,jt)},Wn.prototype.updatePaintArray=function(C,D,q,lt){var Ct=this.expression.evaluate({zoom:0},q,lt);this._setPaintValue(C,D,Ct)},Wn.prototype._setPaintValue=function(C,D,q){if(this.type==="color")for(var lt=Zi(q),Ct=C;Ct<D;Ct++)this.paintVertexArray.emplace(Ct,lt[0],lt[1]);else{for(var Rt=C;Rt<D;Rt++)this.paintVertexArray.emplace(Rt,q);this.maxValue=Math.max(this.maxValue,Math.abs(q))}},Wn.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Wn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Gn=function(C,D,q,lt,Ct,Rt){this.expression=C,this.uniformNames=D.map(function(jt){return"u_"+jt+"_t"}),this.type=q,this.useIntegerZoom=lt,this.zoom=Ct,this.maxValue=0,this.paintVertexAttributes=D.map(function(jt){return{name:"a_"+jt,type:"Float32",components:q==="color"?4:2,offset:0}}),this.paintVertexArray=new Rt};Gn.prototype.populatePaintArray=function(C,D,q,lt,Ct){var Rt=this.expression.evaluate(new ti(this.zoom),D,{},lt,[],Ct),jt=this.expression.evaluate(new ti(this.zoom+1),D,{},lt,[],Ct),Kt=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue(Kt,C,Rt,jt)},Gn.prototype.updatePaintArray=function(C,D,q,lt){var Ct=this.expression.evaluate({zoom:this.zoom},q,lt),Rt=this.expression.evaluate({zoom:this.zoom+1},q,lt);this._setPaintValue(C,D,Ct,Rt)},Gn.prototype._setPaintValue=function(C,D,q,lt){if(this.type==="color")for(var Ct=Zi(q),Rt=Zi(lt),jt=C;jt<D;jt++)this.paintVertexArray.emplace(jt,Ct[0],Ct[1],Rt[0],Rt[1]);else{for(var Kt=C;Kt<D;Kt++)this.paintVertexArray.emplace(Kt,q,lt);this.maxValue=Math.max(this.maxValue,Math.abs(q),Math.abs(lt))}},Gn.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Gn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Gn.prototype.setUniform=function(C,D){var q=this.useIntegerZoom?Math.floor(D.zoom):D.zoom,lt=c(this.expression.interpolationFactor(q,this.zoom,this.zoom+1),0,1);C.set(lt)},Gn.prototype.getBinding=function(C,D,q){return new Nn(C,D)};var pi=function(C,D,q,lt,Ct,Rt){this.expression=C,this.type=D,this.useIntegerZoom=q,this.zoom=lt,this.layerId=Rt,this.zoomInPaintVertexArray=new Ct,this.zoomOutPaintVertexArray=new Ct};pi.prototype.populatePaintArray=function(C,D,q){var lt=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(lt,C,D.patterns&&D.patterns[this.layerId],q)},pi.prototype.updatePaintArray=function(C,D,q,lt,Ct){this._setPaintValues(C,D,q.patterns&&q.patterns[this.layerId],Ct)},pi.prototype._setPaintValues=function(C,D,q,lt){if(lt&&q){var Ct=q.min,Rt=q.mid,jt=q.max,Kt=lt[Ct],oe=lt[Rt],xe=lt[jt];if(Kt&&oe&&xe)for(var _e=C;_e<D;_e++)this.zoomInPaintVertexArray.emplace(_e,oe.tl[0],oe.tl[1],oe.br[0],oe.br[1],Kt.tl[0],Kt.tl[1],Kt.br[0],Kt.br[1],oe.pixelRatio,Kt.pixelRatio),this.zoomOutPaintVertexArray.emplace(_e,oe.tl[0],oe.tl[1],oe.br[0],oe.br[1],xe.tl[0],xe.tl[1],xe.br[0],xe.br[1],oe.pixelRatio,xe.pixelRatio)}},pi.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,zr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,zr.members,this.expression.isStateDependent))},pi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var oi=function(C,D,q,lt){this.binders={},this.layoutAttributes=lt,this._buffers=[];var Ct=[];for(var Rt in C.paint._values)if(q(Rt)){var jt=C.paint.get(Rt);if(jt instanceof Ri&&ho(jt.property.specification)){var Kt=pa(Rt,C.type),oe=jt.value,xe=jt.property.specification.type,_e=jt.property.useIntegerZoom,Oe=jt.property.specification["property-type"],Be=Oe==="cross-faded"||Oe==="cross-faded-data-driven";if(oe.kind==="constant")this.binders[Rt]=Be?new Ui(oe.value,Kt):new Pi(oe.value,Kt,xe),Ct.push("/u_"+Rt);else if(oe.kind==="source"||Be){var Fe=wi(Rt,xe,"source");this.binders[Rt]=Be?new pi(oe,xe,_e,D,Fe,C.id):new Wn(oe,Kt,xe,Fe),Ct.push("/a_"+Rt)}else{var er=wi(Rt,xe,"composite");this.binders[Rt]=new Gn(oe,Kt,xe,_e,D,er),Ct.push("/z_"+Rt)}}}this.cacheKey=Ct.sort().join("")};oi.prototype.getMaxValue=function(C){var D=this.binders[C];return D instanceof Wn||D instanceof Gn?D.maxValue:0},oi.prototype.populatePaintArrays=function(C,D,q,lt,Ct){for(var Rt in this.binders){var jt=this.binders[Rt];(jt instanceof Wn||jt instanceof Gn||jt instanceof pi)&&jt.populatePaintArray(C,D,q,lt,Ct)}},oi.prototype.setConstantPatternPositions=function(C,D){for(var q in this.binders){var lt=this.binders[q];lt instanceof Ui&&lt.setConstantPatternPositions(C,D)}},oi.prototype.updatePaintArrays=function(C,D,q,lt,Ct){var Rt=!1;for(var jt in C)for(var Kt=0,oe=D.getPositions(jt);Kt<oe.length;Kt+=1){var xe=oe[Kt],_e=q.feature(xe.index);for(var Oe in this.binders){var Be=this.binders[Oe];if((Be instanceof Wn||Be instanceof Gn||Be instanceof pi)&&Be.expression.isStateDependent===!0){var Fe=lt.paint.get(Oe);Be.expression=Fe.value,Be.updatePaintArray(xe.start,xe.end,_e,C[jt],Ct),Rt=!0}}}return Rt},oi.prototype.defines=function(){var C=[];for(var D in this.binders){var q=this.binders[D];(q instanceof Pi||q instanceof Ui)&&C.push.apply(C,q.uniformNames.map(function(lt){return"#define HAS_UNIFORM_"+lt}))}return C},oi.prototype.getPaintVertexBuffers=function(){return this._buffers},oi.prototype.getUniforms=function(C,D){var q=[];for(var lt in this.binders){var Ct=this.binders[lt];if(Ct instanceof Pi||Ct instanceof Ui||Ct instanceof Gn)for(var Rt=0,jt=Ct.uniformNames;Rt<jt.length;Rt+=1){var Kt=jt[Rt];if(D[Kt]){var oe=Ct.getBinding(C,D[Kt],Kt);q.push({name:Kt,property:lt,binding:oe})}}}return q},oi.prototype.setUniforms=function(C,D,q,lt){for(var Ct=0,Rt=D;Ct<Rt.length;Ct+=1){var jt=Rt[Ct],Kt=jt.name,oe=jt.property,xe=jt.binding;this.binders[oe].setUniform(xe,lt,q.get(oe),Kt)}},oi.prototype.updatePaintBuffers=function(C){for(var D in this._buffers=[],this.binders){var q=this.binders[D];if(C&&q instanceof pi){var lt=C.fromScale===2?q.zoomInPaintVertexBuffer:q.zoomOutPaintVertexBuffer;lt&&this._buffers.push(lt)}else(q instanceof Wn||q instanceof Gn)&&q.paintVertexBuffer&&this._buffers.push(q.paintVertexBuffer)}},oi.prototype.upload=function(C){for(var D in this.binders){var q=this.binders[D];(q instanceof Wn||q instanceof Gn||q instanceof pi)&&q.upload(C)}this.updatePaintBuffers()},oi.prototype.destroy=function(){for(var C in this.binders){var D=this.binders[C];(D instanceof Wn||D instanceof Gn||D instanceof pi)&&D.destroy()}};var mi=function(C,D,q,lt){lt===void 0&&(lt=function(){return!0}),this.programConfigurations={};for(var Ct=0,Rt=D;Ct<Rt.length;Ct+=1){var jt=Rt[Ct];this.programConfigurations[jt.id]=new oi(jt,q,lt,C)}this.needsUpload=!1,this._featureMap=new bn,this._bufferOffset=0};function pa(C,D){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[C]||[C.replace(D+"-","").replace(/-/g,"_")]}function wi(C,D,q){var lt={color:{source:qt,composite:Jt},number:{source:wt,composite:qt}},Ct=function(Rt){return{"line-pattern":{source:bo,composite:bo},"fill-pattern":{source:bo,composite:bo},"fill-extrusion-pattern":{source:bo,composite:bo}}[Rt]}(C);return Ct&&Ct[q]||lt[D][q]}mi.prototype.populatePaintArrays=function(C,D,q,lt,Ct,Rt){for(var jt in this.programConfigurations)this.programConfigurations[jt].populatePaintArrays(C,D,lt,Ct,Rt);D.id!==void 0&&this._featureMap.add(D.id,q,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},mi.prototype.updatePaintArrays=function(C,D,q,lt){for(var Ct=0,Rt=q;Ct<Rt.length;Ct+=1){var jt=Rt[Ct];this.needsUpload=this.programConfigurations[jt.id].updatePaintArrays(C,this._featureMap,D,jt,lt)||this.needsUpload}},mi.prototype.get=function(C){return this.programConfigurations[C]},mi.prototype.upload=function(C){if(this.needsUpload){for(var D in this.programConfigurations)this.programConfigurations[D].upload(C);this.needsUpload=!1}},mi.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()},wn("ConstantBinder",Pi),wn("CrossFadedConstantBinder",Ui),wn("SourceExpressionBinder",Wn),wn("CrossFadedCompositeBinder",pi),wn("CompositeExpressionBinder",Gn),wn("ProgramConfiguration",oi,{omit:["_buffers"]}),wn("ProgramConfigurationSet",mi);var Qn=8192,os,_a=(os=15,{min:-1*Math.pow(2,os-1),max:Math.pow(2,os-1)-1});function Fa(C){for(var D=Qn/C.extent,q=C.loadGeometry(),lt=0;lt<q.length;lt++)for(var Ct=q[lt],Rt=0;Rt<Ct.length;Rt++){var jt=Ct[Rt];jt.x=Math.round(jt.x*D),jt.y=Math.round(jt.y*D),(jt.x<_a.min||jt.x>_a.max||jt.y<_a.min||jt.y>_a.max)&&(A("Geometry exceeds allowed extent, reduce your vector tile buffer size"),jt.x=c(jt.x,_a.min,_a.max),jt.y=c(jt.y,_a.min,_a.max))}return q}function Si(C,D,q,lt,Ct){C.emplaceBack(2*D+(lt+1)/2,2*q+(Ct+1)/2)}var Xi=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new ba,this.indexArray=new Q,this.segments=new vr,this.programConfigurations=new mi(dr,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function qa(C,D){for(var q=0;q<C.length;q++)if(_l(D,C[q]))return!0;for(var lt=0;lt<D.length;lt++)if(_l(C,D[lt]))return!0;return!!lc(C,D)}function Bl(C,D,q){return!!_l(C,D)||!!cc(D,C,q)}function Gc(C,D){if(C.length===1)return $c(D,C[0]);for(var q=0;q<D.length;q++)for(var lt=D[q],Ct=0;Ct<lt.length;Ct++)if(_l(C,lt[Ct]))return!0;for(var Rt=0;Rt<C.length;Rt++)if($c(D,C[Rt]))return!0;for(var jt=0;jt<D.length;jt++)if(lc(C,D[jt]))return!0;return!1}function Pu(C,D,q){if(C.length>1){if(lc(C,D))return!0;for(var lt=0;lt<D.length;lt++)if(cc(D[lt],C,q))return!0}for(var Ct=0;Ct<C.length;Ct++)if(cc(C[Ct],D,q))return!0;return!1}function lc(C,D){if(C.length===0||D.length===0)return!1;for(var q=0;q<C.length-1;q++)for(var lt=C[q],Ct=C[q+1],Rt=0;Rt<D.length-1;Rt++)if(jl(lt,Ct,D[Rt],D[Rt+1]))return!0;return!1}function jl(C,D,q,lt){return M(C,q,lt)!==M(D,q,lt)&&M(C,D,q)!==M(C,D,lt)}function cc(C,D,q){var lt=q*q;if(D.length===1)return C.distSqr(D[0])<lt;for(var Ct=1;Ct<D.length;Ct++)if(Cl(C,D[Ct-1],D[Ct])<lt)return!0;return!1}function Cl(C,D,q){var lt=D.distSqr(q);if(lt===0)return C.distSqr(D);var Ct=((C.x-D.x)*(q.x-D.x)+(C.y-D.y)*(q.y-D.y))/lt;return Ct<0?C.distSqr(D):Ct>1?C.distSqr(q):C.distSqr(q.sub(D)._mult(Ct)._add(D))}function $c(C,D){for(var q,lt,Ct,Rt=!1,jt=0;jt<C.length;jt++)for(var Kt=0,oe=(q=C[jt]).length-1;Kt<q.length;oe=Kt++)lt=q[Kt],Ct=q[oe],lt.y>D.y!=Ct.y>D.y&&D.x<(Ct.x-lt.x)*(D.y-lt.y)/(Ct.y-lt.y)+lt.x&&(Rt=!Rt);return Rt}function _l(C,D){for(var q=!1,lt=0,Ct=C.length-1;lt<C.length;Ct=lt++){var Rt=C[lt],jt=C[Ct];Rt.y>D.y!=jt.y>D.y&&D.x<(jt.x-Rt.x)*(D.y-Rt.y)/(jt.y-Rt.y)+Rt.x&&(q=!q)}return q}function uc(C,D,q){var lt=q[0],Ct=q[2];if(C.x<lt.x&&D.x<lt.x||C.x>Ct.x&&D.x>Ct.x||C.y<lt.y&&D.y<lt.y||C.y>Ct.y&&D.y>Ct.y)return!1;var Rt=M(C,D,q[0]);return Rt!==M(C,D,q[1])||Rt!==M(C,D,q[2])||Rt!==M(C,D,q[3])}function hc(C,D,q){var lt=D.paint.get(C).value;return lt.kind==="constant"?lt.value:q.programConfigurations.get(D.id).getMaxValue(C)}function Hc(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1])}function Vc(C,D,q,lt,Ct){if(!D[0]&&!D[1])return C;var Rt=t.convert(D)._mult(Ct);q==="viewport"&&Rt._rotate(-lt);for(var jt=[],Kt=0;Kt<C.length;Kt++){var oe=C[Kt];jt.push(oe.sub(Rt))}return jt}Xi.prototype.populate=function(C,D,q){var lt=this.layers[0],Ct=[],Rt=null;lt.type==="circle"&&(Rt=lt.layout.get("circle-sort-key"));for(var jt=0,Kt=C;jt<Kt.length;jt+=1){var oe=Kt[jt],xe=oe.feature,_e=oe.id,Oe=oe.index,Be=oe.sourceLayerIndex,Fe=this.layers[0]._featureFilter.needGeometry,er={type:xe.type,id:_e,properties:xe.properties,geometry:Fe?Fa(xe):[]};if(this.layers[0]._featureFilter.filter(new ti(this.zoom),er,q)){Fe||(er.geometry=Fa(xe));var or=Rt?Rt.evaluate(er,{},q):void 0,Tr={id:_e,properties:xe.properties,type:xe.type,sourceLayerIndex:Be,index:Oe,geometry:er.geometry,patterns:{},sortKey:or};Ct.push(Tr)}}Rt&&Ct.sort(function(yn,Tn){return yn.sortKey-Tn.sortKey});for(var kr=0,Or=Ct;kr<Or.length;kr+=1){var Rr=Or[kr],Ur=Rr,Wr=Ur.geometry,Jr=Ur.index,gn=Ur.sourceLayerIndex,un=C[Jr].feature;this.addFeature(Rr,Wr,Jr,q),D.featureIndex.insert(un,Wr,Jr,gn,this.index)}},Xi.prototype.update=function(C,D,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(C,D,this.stateDependentLayers,q)},Xi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xi.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,dr),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Xi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xi.prototype.addFeature=function(C,D,q,lt){for(var Ct=0,Rt=D;Ct<Rt.length;Ct+=1)for(var jt=0,Kt=Rt[Ct];jt<Kt.length;jt+=1){var oe=Kt[jt],xe=oe.x,_e=oe.y;if(!(xe<0||xe>=Qn||_e<0||_e>=Qn)){var Oe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),Be=Oe.vertexLength;Si(this.layoutVertexArray,xe,_e,-1,-1),Si(this.layoutVertexArray,xe,_e,1,-1),Si(this.layoutVertexArray,xe,_e,1,1),Si(this.layoutVertexArray,xe,_e,-1,1),this.indexArray.emplaceBack(Be,Be+1,Be+2),this.indexArray.emplaceBack(Be,Be+3,Be+2),Oe.vertexLength+=4,Oe.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,q,{},lt)},wn("CircleBucket",Xi,{omit:["layers"]});var Gp=new ta({"circle-sort-key":new Ln(Pt.layout_circle["circle-sort-key"])}),$p={paint:new ta({"circle-radius":new Ln(Pt.paint_circle["circle-radius"]),"circle-color":new Ln(Pt.paint_circle["circle-color"]),"circle-blur":new Ln(Pt.paint_circle["circle-blur"]),"circle-opacity":new Ln(Pt.paint_circle["circle-opacity"]),"circle-translate":new An(Pt.paint_circle["circle-translate"]),"circle-translate-anchor":new An(Pt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new An(Pt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new An(Pt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ln(Pt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ln(Pt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ln(Pt.paint_circle["circle-stroke-opacity"])}),layout:Gp},jo=typeof Float32Array<"u"?Float32Array:Array;function Du(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function Ah(C,D,q){var lt=D[0],Ct=D[1],Rt=D[2],jt=D[3],Kt=D[4],oe=D[5],xe=D[6],_e=D[7],Oe=D[8],Be=D[9],Fe=D[10],er=D[11],or=D[12],Tr=D[13],kr=D[14],Or=D[15],Rr=q[0],Ur=q[1],Wr=q[2],Jr=q[3];return C[0]=Rr*lt+Ur*Kt+Wr*Oe+Jr*or,C[1]=Rr*Ct+Ur*oe+Wr*Be+Jr*Tr,C[2]=Rr*Rt+Ur*xe+Wr*Fe+Jr*kr,C[3]=Rr*jt+Ur*_e+Wr*er+Jr*Or,Rr=q[4],Ur=q[5],Wr=q[6],Jr=q[7],C[4]=Rr*lt+Ur*Kt+Wr*Oe+Jr*or,C[5]=Rr*Ct+Ur*oe+Wr*Be+Jr*Tr,C[6]=Rr*Rt+Ur*xe+Wr*Fe+Jr*kr,C[7]=Rr*jt+Ur*_e+Wr*er+Jr*Or,Rr=q[8],Ur=q[9],Wr=q[10],Jr=q[11],C[8]=Rr*lt+Ur*Kt+Wr*Oe+Jr*or,C[9]=Rr*Ct+Ur*oe+Wr*Be+Jr*Tr,C[10]=Rr*Rt+Ur*xe+Wr*Fe+Jr*kr,C[11]=Rr*jt+Ur*_e+Wr*er+Jr*Or,Rr=q[12],Ur=q[13],Wr=q[14],Jr=q[15],C[12]=Rr*lt+Ur*Kt+Wr*Oe+Jr*or,C[13]=Rr*Ct+Ur*oe+Wr*Be+Jr*Tr,C[14]=Rr*Rt+Ur*xe+Wr*Fe+Jr*kr,C[15]=Rr*jt+Ur*_e+Wr*er+Jr*Or,C}Math.hypot||(Math.hypot=function(){for(var C=arguments,D=0,q=arguments.length;q--;)D+=C[q]*C[q];return Math.sqrt(D)});var Hp=Ah,Wc,Vp=function(C,D,q){return C[0]=D[0]-q[0],C[1]=D[1]-q[1],C[2]=D[2]-q[2],C};function qc(C,D,q){var lt=D[0],Ct=D[1],Rt=D[2],jt=D[3];return C[0]=q[0]*lt+q[4]*Ct+q[8]*Rt+q[12]*jt,C[1]=q[1]*lt+q[5]*Ct+q[9]*Rt+q[13]*jt,C[2]=q[2]*lt+q[6]*Ct+q[10]*Rt+q[14]*jt,C[3]=q[3]*lt+q[7]*Ct+q[11]*Rt+q[15]*jt,C}Wc=new jo(3),jo!=Float32Array&&(Wc[0]=0,Wc[1]=0,Wc[2]=0),function(){var C=new jo(4);jo!=Float32Array&&(C[0]=0,C[1]=0,C[2]=0,C[3]=0)}();var Wp=function(C){var D=C[0],q=C[1];return D*D+q*q},qp=(function(){var C=new jo(2);jo!=Float32Array&&(C[0]=0,C[1]=0)}(),function(C){function D(q){C.call(this,q,$p)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(q){return new Xi(q)},D.prototype.queryRadius=function(q){var lt=q;return hc("circle-radius",this,lt)+hc("circle-stroke-width",this,lt)+Hc(this.paint.get("circle-translate"))},D.prototype.queryIntersectsFeature=function(q,lt,Ct,Rt,jt,Kt,oe,xe){for(var _e=Vc(q,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Kt.angle,oe),Oe=this.paint.get("circle-radius").evaluate(lt,Ct)+this.paint.get("circle-stroke-width").evaluate(lt,Ct),Be=this.paint.get("circle-pitch-alignment")==="map",Fe=Be?_e:function(gn,un){return gn.map(function(yn){return Ch(yn,un)})}(_e,xe),er=Be?Oe*oe:Oe,or=0,Tr=Rt;or<Tr.length;or+=1)for(var kr=0,Or=Tr[or];kr<Or.length;kr+=1){var Rr=Or[kr],Ur=Be?Rr:Ch(Rr,xe),Wr=er,Jr=qc([],[Rr.x,Rr.y,0,1],xe);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Wr*=Jr[3]/Kt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Wr*=Kt.cameraToCenterDistance/Jr[3]),Bl(Fe,Ur,Wr))return!0}return!1},D}(ea));function Ch(C,D){var q=qc([],[C.x,C.y,0,1],D);return new t(q[0]/q[3],q[1]/q[3])}var Lh=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D}(Xi);function Fu(C,D,q,lt){var Ct=D.width,Rt=D.height;if(lt){if(lt instanceof Uint8ClampedArray)lt=new Uint8Array(lt.buffer);else if(lt.length!==Ct*Rt*q)throw new RangeError("mismatched image size")}else lt=new Uint8Array(Ct*Rt*q);return C.width=Ct,C.height=Rt,C.data=lt,C}function Eh(C,D,q){var lt=D.width,Ct=D.height;if(lt!==C.width||Ct!==C.height){var Rt=Fu({},{width:lt,height:Ct},q);zu(C,Rt,{x:0,y:0},{x:0,y:0},{width:Math.min(C.width,lt),height:Math.min(C.height,Ct)},q),C.width=lt,C.height=Ct,C.data=Rt.data}}function zu(C,D,q,lt,Ct,Rt){if(Ct.width===0||Ct.height===0)return D;if(Ct.width>C.width||Ct.height>C.height||q.x>C.width-Ct.width||q.y>C.height-Ct.height)throw new RangeError("out of range source coordinates for image copy");if(Ct.width>D.width||Ct.height>D.height||lt.x>D.width-Ct.width||lt.y>D.height-Ct.height)throw new RangeError("out of range destination coordinates for image copy");for(var jt=C.data,Kt=D.data,oe=0;oe<Ct.height;oe++)for(var xe=((q.y+oe)*C.width+q.x)*Rt,_e=((lt.y+oe)*D.width+lt.x)*Rt,Oe=0;Oe<Ct.width*Rt;Oe++)Kt[_e+Oe]=jt[xe+Oe];return D}wn("HeatmapBucket",Lh,{omit:["layers"]});var Ll=function(C,D){Fu(this,C,1,D)};Ll.prototype.resize=function(C){Eh(this,C,1)},Ll.prototype.clone=function(){return new Ll({width:this.width,height:this.height},new Uint8Array(this.data))},Ll.copy=function(C,D,q,lt,Ct){zu(C,D,q,lt,Ct,1)};var ao=function(C,D){Fu(this,C,4,D)};ao.prototype.resize=function(C){Eh(this,C,4)},ao.prototype.replace=function(C,D){D?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},ao.prototype.clone=function(){return new ao({width:this.width,height:this.height},new Uint8Array(this.data))},ao.copy=function(C,D,q,lt,Ct){zu(C,D,q,lt,Ct,4)},wn("AlphaImage",Ll),wn("RGBAImage",ao);var Yp={paint:new ta({"heatmap-radius":new Ln(Pt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ln(Pt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new An(Pt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zo(Pt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new An(Pt.paint_heatmap["heatmap-opacity"])})};function Sh(C,D){for(var q=new Uint8Array(1024),lt={},Ct=0,Rt=0;Ct<256;Ct++,Rt+=4){lt[D]=Ct/255;var jt=C.evaluate(lt);q[Rt+0]=Math.floor(255*jt.r/jt.a),q[Rt+1]=Math.floor(255*jt.g/jt.a),q[Rt+2]=Math.floor(255*jt.b/jt.a),q[Rt+3]=Math.floor(255*jt.a)}return new ao({width:256,height:1},q)}var Zp=function(C){function D(q){C.call(this,q,Yp),this._updateColorRamp()}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(q){return new Lh(q)},D.prototype._handleSpecialPaintPropertyUpdate=function(q){q==="heatmap-color"&&this._updateColorRamp()},D.prototype._updateColorRamp=function(){var q=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Sh(q,"heatmapDensity"),this.colorRampTexture=null},D.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},D}(ea),Xp={paint:new ta({"hillshade-illumination-direction":new An(Pt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new An(Pt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new An(Pt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new An(Pt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new An(Pt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new An(Pt.paint_hillshade["hillshade-accent-color"])})},Kp=function(C){function D(q){C.call(this,q,Xp)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},D}(ea),Ih=ji([{name:"a_pos",components:2,type:"Int16"}],4).members,Nu=Yc,Jp=Yc;function Yc(C,D,q){q=q||2;var lt,Ct,Rt,jt,Kt,oe,xe,_e=D&&D.length,Oe=_e?D[0]*q:C.length,Be=Oh(C,0,Oe,q,!0),Fe=[];if(!Be||Be.next===Be.prev)return Fe;if(_e&&(Be=function(or,Tr,kr,Or){var Rr,Ur,Wr,Jr=[];for(Rr=0,Ur=Tr.length;Rr<Ur;Rr++)(Wr=Oh(or,Tr[Rr]*Or,Rr<Ur-1?Tr[Rr+1]*Or:or.length,Or,!1))===Wr.next&&(Wr.steiner=!0),Jr.push(od(Wr));for(Jr.sort(nd),Rr=0;Rr<Jr.length;Rr++)id(Jr[Rr],kr),kr=wl(kr,kr.next);return kr}(C,D,Be,q)),C.length>80*q){lt=Rt=C[0],Ct=jt=C[1];for(var er=q;er<Oe;er+=q)(Kt=C[er])<lt&&(lt=Kt),(oe=C[er+1])<Ct&&(Ct=oe),Kt>Rt&&(Rt=Kt),oe>jt&&(jt=oe);xe=(xe=Math.max(Rt-lt,jt-Ct))!==0?1/xe:0}return fc(Be,Fe,q,lt,Ct,xe),Fe}function Oh(C,D,q,lt,Ct){var Rt,jt;if(Ct===Uu(C,D,q,lt)>0)for(Rt=D;Rt<q;Rt+=lt)jt=Dh(Rt,C[Rt],C[Rt+1],jt);else for(Rt=q-lt;Rt>=D;Rt-=lt)jt=Dh(Rt,C[Rt],C[Rt+1],jt);return jt&&Zc(jt,jt.next)&&(dc(jt),jt=jt.next),jt}function wl(C,D){if(!C)return C;D||(D=C);var q,lt=C;do if(q=!1,lt.steiner||!Zc(lt,lt.next)&&aa(lt.prev,lt,lt.next)!==0)lt=lt.next;else{if(dc(lt),(lt=D=lt.prev)===lt.next)break;q=!0}while(q||lt!==D);return D}function fc(C,D,q,lt,Ct,Rt,jt){if(C){!jt&&Rt&&function(_e,Oe,Be,Fe){var er=_e;do er.z===null&&(er.z=Bu(er.x,er.y,Oe,Be,Fe)),er.prevZ=er.prev,er.nextZ=er.next,er=er.next;while(er!==_e);er.prevZ.nextZ=null,er.prevZ=null,function(or){var Tr,kr,Or,Rr,Ur,Wr,Jr,gn,un=1;do{for(kr=or,or=null,Ur=null,Wr=0;kr;){for(Wr++,Or=kr,Jr=0,Tr=0;Tr<un&&(Jr++,Or=Or.nextZ);Tr++);for(gn=un;Jr>0||gn>0&&Or;)Jr!==0&&(gn===0||!Or||kr.z<=Or.z)?(Rr=kr,kr=kr.nextZ,Jr--):(Rr=Or,Or=Or.nextZ,gn--),Ur?Ur.nextZ=Rr:or=Rr,Rr.prevZ=Ur,Ur=Rr;kr=Or}Ur.nextZ=null,un*=2}while(Wr>1)}(er)}(C,lt,Ct,Rt);for(var Kt,oe,xe=C;C.prev!==C.next;)if(Kt=C.prev,oe=C.next,Rt?td(C,lt,Ct,Rt):Qp(C))D.push(Kt.i/q),D.push(C.i/q),D.push(oe.i/q),dc(C),C=oe.next,xe=oe.next;else if((C=oe)===xe){jt?jt===1?fc(C=ed(wl(C),D,q),D,q,lt,Ct,Rt,2):jt===2&&rd(C,D,q,lt,Ct,Rt):fc(wl(C),D,q,lt,Ct,Rt,1);break}}}function Qp(C){var D=C.prev,q=C,lt=C.next;if(aa(D,q,lt)>=0)return!1;for(var Ct=C.next.next;Ct!==C.prev;){if(Ul(D.x,D.y,q.x,q.y,lt.x,lt.y,Ct.x,Ct.y)&&aa(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.next}return!0}function td(C,D,q,lt){var Ct=C.prev,Rt=C,jt=C.next;if(aa(Ct,Rt,jt)>=0)return!1;for(var Kt=Ct.x<Rt.x?Ct.x<jt.x?Ct.x:jt.x:Rt.x<jt.x?Rt.x:jt.x,oe=Ct.y<Rt.y?Ct.y<jt.y?Ct.y:jt.y:Rt.y<jt.y?Rt.y:jt.y,xe=Ct.x>Rt.x?Ct.x>jt.x?Ct.x:jt.x:Rt.x>jt.x?Rt.x:jt.x,_e=Ct.y>Rt.y?Ct.y>jt.y?Ct.y:jt.y:Rt.y>jt.y?Rt.y:jt.y,Oe=Bu(Kt,oe,D,q,lt),Be=Bu(xe,_e,D,q,lt),Fe=C.prevZ,er=C.nextZ;Fe&&Fe.z>=Oe&&er&&er.z<=Be;){if(Fe!==C.prev&&Fe!==C.next&&Ul(Ct.x,Ct.y,Rt.x,Rt.y,jt.x,jt.y,Fe.x,Fe.y)&&aa(Fe.prev,Fe,Fe.next)>=0||(Fe=Fe.prevZ,er!==C.prev&&er!==C.next&&Ul(Ct.x,Ct.y,Rt.x,Rt.y,jt.x,jt.y,er.x,er.y)&&aa(er.prev,er,er.next)>=0))return!1;er=er.nextZ}for(;Fe&&Fe.z>=Oe;){if(Fe!==C.prev&&Fe!==C.next&&Ul(Ct.x,Ct.y,Rt.x,Rt.y,jt.x,jt.y,Fe.x,Fe.y)&&aa(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.prevZ}for(;er&&er.z<=Be;){if(er!==C.prev&&er!==C.next&&Ul(Ct.x,Ct.y,Rt.x,Rt.y,jt.x,jt.y,er.x,er.y)&&aa(er.prev,er,er.next)>=0)return!1;er=er.nextZ}return!0}function ed(C,D,q){var lt=C;do{var Ct=lt.prev,Rt=lt.next.next;!Zc(Ct,Rt)&&Rh(Ct,lt,lt.next,Rt)&&pc(Ct,Rt)&&pc(Rt,Ct)&&(D.push(Ct.i/q),D.push(lt.i/q),D.push(Rt.i/q),dc(lt),dc(lt.next),lt=C=Rt),lt=lt.next}while(lt!==C);return wl(lt)}function rd(C,D,q,lt,Ct,Rt){var jt=C;do{for(var Kt=jt.next.next;Kt!==jt.prev;){if(jt.i!==Kt.i&&sd(jt,Kt)){var oe=Ph(jt,Kt);return jt=wl(jt,jt.next),oe=wl(oe,oe.next),fc(jt,D,q,lt,Ct,Rt),void fc(oe,D,q,lt,Ct,Rt)}Kt=Kt.next}jt=jt.next}while(jt!==C)}function nd(C,D){return C.x-D.x}function id(C,D){if(D=function(lt,Ct){var Rt,jt=Ct,Kt=lt.x,oe=lt.y,xe=-1/0;do{if(oe<=jt.y&&oe>=jt.next.y&&jt.next.y!==jt.y){var _e=jt.x+(oe-jt.y)*(jt.next.x-jt.x)/(jt.next.y-jt.y);if(_e<=Kt&&_e>xe){if(xe=_e,_e===Kt){if(oe===jt.y)return jt;if(oe===jt.next.y)return jt.next}Rt=jt.x<jt.next.x?jt:jt.next}}jt=jt.next}while(jt!==Ct);if(!Rt)return null;if(Kt===xe)return Rt;var Oe,Be=Rt,Fe=Rt.x,er=Rt.y,or=1/0;jt=Rt;do Kt>=jt.x&&jt.x>=Fe&&Kt!==jt.x&&Ul(oe<er?Kt:xe,oe,Fe,er,oe<er?xe:Kt,oe,jt.x,jt.y)&&(Oe=Math.abs(oe-jt.y)/(Kt-jt.x),pc(jt,lt)&&(Oe<or||Oe===or&&(jt.x>Rt.x||jt.x===Rt.x&&ad(Rt,jt)))&&(Rt=jt,or=Oe)),jt=jt.next;while(jt!==Be);return Rt}(C,D)){var q=Ph(D,C);wl(D,D.next),wl(q,q.next)}}function ad(C,D){return aa(C.prev,C,D.prev)<0&&aa(D.next,C,C.next)<0}function Bu(C,D,q,lt,Ct){return(C=1431655765&((C=858993459&((C=252645135&((C=16711935&((C=32767*(C-q)*Ct)|C<<8))|C<<4))|C<<2))|C<<1))|(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-lt)*Ct)|D<<8))|D<<4))|D<<2))|D<<1))<<1}function od(C){var D=C,q=C;do(D.x<q.x||D.x===q.x&&D.y<q.y)&&(q=D),D=D.next;while(D!==C);return q}function Ul(C,D,q,lt,Ct,Rt,jt,Kt){return(Ct-jt)*(D-Kt)-(C-jt)*(Rt-Kt)>=0&&(C-jt)*(lt-Kt)-(q-jt)*(D-Kt)>=0&&(q-jt)*(Rt-Kt)-(Ct-jt)*(lt-Kt)>=0}function sd(C,D){return C.next.i!==D.i&&C.prev.i!==D.i&&!function(q,lt){var Ct=q;do{if(Ct.i!==q.i&&Ct.next.i!==q.i&&Ct.i!==lt.i&&Ct.next.i!==lt.i&&Rh(Ct,Ct.next,q,lt))return!0;Ct=Ct.next}while(Ct!==q);return!1}(C,D)&&(pc(C,D)&&pc(D,C)&&function(q,lt){var Ct=q,Rt=!1,jt=(q.x+lt.x)/2,Kt=(q.y+lt.y)/2;do Ct.y>Kt!=Ct.next.y>Kt&&Ct.next.y!==Ct.y&&jt<(Ct.next.x-Ct.x)*(Kt-Ct.y)/(Ct.next.y-Ct.y)+Ct.x&&(Rt=!Rt),Ct=Ct.next;while(Ct!==q);return Rt}(C,D)&&(aa(C.prev,C,D.prev)||aa(C,D.prev,D))||Zc(C,D)&&aa(C.prev,C,C.next)>0&&aa(D.prev,D,D.next)>0)}function aa(C,D,q){return(D.y-C.y)*(q.x-D.x)-(D.x-C.x)*(q.y-D.y)}function Zc(C,D){return C.x===D.x&&C.y===D.y}function Rh(C,D,q,lt){var Ct=Kc(aa(C,D,q)),Rt=Kc(aa(C,D,lt)),jt=Kc(aa(q,lt,C)),Kt=Kc(aa(q,lt,D));return Ct!==Rt&&jt!==Kt||!(Ct!==0||!Xc(C,q,D))||!(Rt!==0||!Xc(C,lt,D))||!(jt!==0||!Xc(q,C,lt))||!(Kt!==0||!Xc(q,D,lt))}function Xc(C,D,q){return D.x<=Math.max(C.x,q.x)&&D.x>=Math.min(C.x,q.x)&&D.y<=Math.max(C.y,q.y)&&D.y>=Math.min(C.y,q.y)}function Kc(C){return C>0?1:C<0?-1:0}function pc(C,D){return aa(C.prev,C,C.next)<0?aa(C,D,C.next)>=0&&aa(C,C.prev,D)>=0:aa(C,D,C.prev)<0||aa(C,C.next,D)<0}function Ph(C,D){var q=new ju(C.i,C.x,C.y),lt=new ju(D.i,D.x,D.y),Ct=C.next,Rt=D.prev;return C.next=D,D.prev=C,q.next=Ct,Ct.prev=q,lt.next=q,q.prev=lt,Rt.next=lt,lt.prev=Rt,lt}function Dh(C,D,q,lt){var Ct=new ju(C,D,q);return lt?(Ct.next=lt.next,Ct.prev=lt,lt.next.prev=Ct,lt.next=Ct):(Ct.prev=Ct,Ct.next=Ct),Ct}function dc(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function ju(C,D,q){this.i=C,this.x=D,this.y=q,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Uu(C,D,q,lt){for(var Ct=0,Rt=D,jt=q-lt;Rt<q;Rt+=lt)Ct+=(C[jt]-C[Rt])*(C[Rt+1]+C[jt+1]),jt=Rt;return Ct}function ld(C,D,q,lt,Ct){Fh(C,D,q||0,lt||C.length-1,Ct||cd)}function Fh(C,D,q,lt,Ct){for(;lt>q;){if(lt-q>600){var Rt=lt-q+1,jt=D-q+1,Kt=Math.log(Rt),oe=.5*Math.exp(2*Kt/3),xe=.5*Math.sqrt(Kt*oe*(Rt-oe)/Rt)*(jt-Rt/2<0?-1:1);Fh(C,D,Math.max(q,Math.floor(D-jt*oe/Rt+xe)),Math.min(lt,Math.floor(D+(Rt-jt)*oe/Rt+xe)),Ct)}var _e=C[D],Oe=q,Be=lt;for(gc(C,q,D),Ct(C[lt],_e)>0&&gc(C,q,lt);Oe<Be;){for(gc(C,Oe,Be),Oe++,Be--;Ct(C[Oe],_e)<0;)Oe++;for(;Ct(C[Be],_e)>0;)Be--}Ct(C[q],_e)===0?gc(C,q,Be):gc(C,++Be,lt),Be<=D&&(q=Be+1),D<=Be&&(lt=Be-1)}}function gc(C,D,q){var lt=C[D];C[D]=C[q],C[q]=lt}function cd(C,D){return C<D?-1:C>D?1:0}function Gu(C,D){var q=C.length;if(q<=1)return[C];for(var lt,Ct,Rt=[],jt=0;jt<q;jt++){var Kt=L(C[jt]);Kt!==0&&(C[jt].area=Math.abs(Kt),Ct===void 0&&(Ct=Kt<0),Ct===Kt<0?(lt&&Rt.push(lt),lt=[C[jt]]):lt.push(C[jt]))}if(lt&&Rt.push(lt),D>1)for(var oe=0;oe<Rt.length;oe++)Rt[oe].length<=D||(ld(Rt[oe],D,1,Rt[oe].length-1,ud),Rt[oe]=Rt[oe].slice(0,D));return Rt}function ud(C,D){return D.area-C.area}function $u(C,D,q){for(var lt=q.patternDependencies,Ct=!1,Rt=0,jt=D;Rt<jt.length;Rt+=1){var Kt=jt[Rt].paint.get(C+"-pattern");Kt.isConstant()||(Ct=!0);var oe=Kt.constantOr(null);oe&&(Ct=!0,lt[oe.to]=!0,lt[oe.from]=!0)}return Ct}function Hu(C,D,q,lt,Ct){for(var Rt=Ct.patternDependencies,jt=0,Kt=D;jt<Kt.length;jt+=1){var oe=Kt[jt],xe=oe.paint.get(C+"-pattern").value;if(xe.kind!=="constant"){var _e=xe.evaluate({zoom:lt-1},q,{},Ct.availableImages),Oe=xe.evaluate({zoom:lt},q,{},Ct.availableImages),Be=xe.evaluate({zoom:lt+1},q,{},Ct.availableImages);_e=_e&&_e.name?_e.name:_e,Oe=Oe&&Oe.name?Oe.name:Oe,Be=Be&&Be.name?Be.name:Be,Rt[_e]=!0,Rt[Oe]=!0,Rt[Be]=!0,q.patterns[oe.id]={min:_e,mid:Oe,max:Be}}}return q}Yc.deviation=function(C,D,q,lt){var Ct=D&&D.length,Rt=Ct?D[0]*q:C.length,jt=Math.abs(Uu(C,0,Rt,q));if(Ct)for(var Kt=0,oe=D.length;Kt<oe;Kt++){var xe=D[Kt]*q,_e=Kt<oe-1?D[Kt+1]*q:C.length;jt-=Math.abs(Uu(C,xe,_e,q))}var Oe=0;for(Kt=0;Kt<lt.length;Kt+=3){var Be=lt[Kt]*q,Fe=lt[Kt+1]*q,er=lt[Kt+2]*q;Oe+=Math.abs((C[Be]-C[er])*(C[Fe+1]-C[Be+1])-(C[Be]-C[Fe])*(C[er+1]-C[Be+1]))}return jt===0&&Oe===0?0:Math.abs((Oe-jt)/jt)},Yc.flatten=function(C){for(var D=C[0][0].length,q={vertices:[],holes:[],dimensions:D},lt=0,Ct=0;Ct<C.length;Ct++){for(var Rt=0;Rt<C[Ct].length;Rt++)for(var jt=0;jt<D;jt++)q.vertices.push(C[Ct][Rt][jt]);Ct>0&&(lt+=C[Ct-1].length,q.holes.push(lt))}return q},Nu.default=Jp;var Ss=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ba,this.indexArray=new Q,this.indexArray2=new Ut,this.programConfigurations=new mi(Ih,C.layers,C.zoom),this.segments=new vr,this.segments2=new vr,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};Ss.prototype.populate=function(C,D,q){this.hasPattern=$u("fill",this.layers,D);for(var lt=this.layers[0].layout.get("fill-sort-key"),Ct=[],Rt=0,jt=C;Rt<jt.length;Rt+=1){var Kt=jt[Rt],oe=Kt.feature,xe=Kt.id,_e=Kt.index,Oe=Kt.sourceLayerIndex,Be=this.layers[0]._featureFilter.needGeometry,Fe={type:oe.type,id:xe,properties:oe.properties,geometry:Be?Fa(oe):[]};if(this.layers[0]._featureFilter.filter(new ti(this.zoom),Fe,q)){Be||(Fe.geometry=Fa(oe));var er=lt?lt.evaluate(Fe,{},q,D.availableImages):void 0,or={id:xe,properties:oe.properties,type:oe.type,sourceLayerIndex:Oe,index:_e,geometry:Fe.geometry,patterns:{},sortKey:er};Ct.push(or)}}lt&&Ct.sort(function(yn,Tn){return yn.sortKey-Tn.sortKey});for(var Tr=0,kr=Ct;Tr<kr.length;Tr+=1){var Or=kr[Tr],Rr=Or,Ur=Rr.geometry,Wr=Rr.index,Jr=Rr.sourceLayerIndex;if(this.hasPattern){var gn=Hu("fill",this.layers,Or,this.zoom,D);this.patternFeatures.push(gn)}else this.addFeature(Or,Ur,Wr,q,{});var un=C[Wr].feature;D.featureIndex.insert(un,Ur,Wr,Jr,this.index)}},Ss.prototype.update=function(C,D,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(C,D,this.stateDependentLayers,q)},Ss.prototype.addFeatures=function(C,D,q){for(var lt=0,Ct=this.patternFeatures;lt<Ct.length;lt+=1){var Rt=Ct[lt];this.addFeature(Rt,Rt.geometry,Rt.index,D,q)}},Ss.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ss.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Ih),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},Ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ss.prototype.addFeature=function(C,D,q,lt,Ct){for(var Rt=0,jt=Gu(D,500);Rt<jt.length;Rt+=1){for(var Kt=jt[Rt],oe=0,xe=0,_e=Kt;xe<_e.length;xe+=1)oe+=_e[xe].length;for(var Oe=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray),Be=Oe.vertexLength,Fe=[],er=[],or=0,Tr=Kt;or<Tr.length;or+=1){var kr=Tr[or];if(kr.length!==0){kr!==Kt[0]&&er.push(Fe.length/2);var Or=this.segments2.prepareSegment(kr.length,this.layoutVertexArray,this.indexArray2),Rr=Or.vertexLength;this.layoutVertexArray.emplaceBack(kr[0].x,kr[0].y),this.indexArray2.emplaceBack(Rr+kr.length-1,Rr),Fe.push(kr[0].x),Fe.push(kr[0].y);for(var Ur=1;Ur<kr.length;Ur++)this.layoutVertexArray.emplaceBack(kr[Ur].x,kr[Ur].y),this.indexArray2.emplaceBack(Rr+Ur-1,Rr+Ur),Fe.push(kr[Ur].x),Fe.push(kr[Ur].y);Or.vertexLength+=kr.length,Or.primitiveLength+=kr.length}}for(var Wr=Nu(Fe,er),Jr=0;Jr<Wr.length;Jr+=3)this.indexArray.emplaceBack(Be+Wr[Jr],Be+Wr[Jr+1],Be+Wr[Jr+2]);Oe.vertexLength+=oe,Oe.primitiveLength+=Wr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,q,Ct,lt)},wn("FillBucket",Ss,{omit:["layers","patternFeatures"]});var hd=new ta({"fill-sort-key":new Ln(Pt.layout_fill["fill-sort-key"])}),fd={paint:new ta({"fill-antialias":new An(Pt.paint_fill["fill-antialias"]),"fill-opacity":new Ln(Pt.paint_fill["fill-opacity"]),"fill-color":new Ln(Pt.paint_fill["fill-color"]),"fill-outline-color":new Ln(Pt.paint_fill["fill-outline-color"]),"fill-translate":new An(Pt.paint_fill["fill-translate"]),"fill-translate-anchor":new An(Pt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ds(Pt.paint_fill["fill-pattern"])}),layout:hd},pd=function(C){function D(q){C.call(this,q,fd)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(q,lt){C.prototype.recalculate.call(this,q,lt);var Ct=this.paint._values["fill-outline-color"];Ct.value.kind==="constant"&&Ct.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},D.prototype.createBucket=function(q){return new Ss(q)},D.prototype.queryRadius=function(){return Hc(this.paint.get("fill-translate"))},D.prototype.queryIntersectsFeature=function(q,lt,Ct,Rt,jt,Kt,oe){return Gc(Vc(q,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Kt.angle,oe),Rt)},D.prototype.isTileClipped=function(){return!0},D}(ea),zh=ji([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Nh=Gl;function Gl(C,D,q,lt,Ct){this.properties={},this.extent=q,this.type=0,this._pbf=C,this._geometry=-1,this._keys=lt,this._values=Ct,C.readFields(dd,this,D)}function dd(C,D,q){C==1?D.id=q.readVarint():C==2?function(lt,Ct){for(var Rt=lt.readVarint()+lt.pos;lt.pos<Rt;){var jt=Ct._keys[lt.readVarint()],Kt=Ct._values[lt.readVarint()];Ct.properties[jt]=Kt}}(q,D):C==3?D.type=q.readVarint():C==4&&(D._geometry=q.pos)}function gd(C){for(var D,q,lt=0,Ct=0,Rt=C.length,jt=Rt-1;Ct<Rt;jt=Ct++)D=C[Ct],lt+=((q=C[jt]).x-D.x)*(D.y+q.y);return lt}Gl.types=["Unknown","Point","LineString","Polygon"],Gl.prototype.loadGeometry=function(){var C=this._pbf;C.pos=this._geometry;for(var D,q=C.readVarint()+C.pos,lt=1,Ct=0,Rt=0,jt=0,Kt=[];C.pos<q;){if(Ct<=0){var oe=C.readVarint();lt=7&oe,Ct=oe>>3}if(Ct--,lt===1||lt===2)Rt+=C.readSVarint(),jt+=C.readSVarint(),lt===1&&(D&&Kt.push(D),D=[]),D.push(new t(Rt,jt));else{if(lt!==7)throw new Error("unknown command "+lt);D&&D.push(D[0].clone())}}return D&&Kt.push(D),Kt},Gl.prototype.bbox=function(){var C=this._pbf;C.pos=this._geometry;for(var D=C.readVarint()+C.pos,q=1,lt=0,Ct=0,Rt=0,jt=1/0,Kt=-1/0,oe=1/0,xe=-1/0;C.pos<D;){if(lt<=0){var _e=C.readVarint();q=7&_e,lt=_e>>3}if(lt--,q===1||q===2)(Ct+=C.readSVarint())<jt&&(jt=Ct),Ct>Kt&&(Kt=Ct),(Rt+=C.readSVarint())<oe&&(oe=Rt),Rt>xe&&(xe=Rt);else if(q!==7)throw new Error("unknown command "+q)}return[jt,oe,Kt,xe]},Gl.prototype.toGeoJSON=function(C,D,q){var lt,Ct,Rt=this.extent*Math.pow(2,q),jt=this.extent*C,Kt=this.extent*D,oe=this.loadGeometry(),xe=Gl.types[this.type];function _e(Fe){for(var er=0;er<Fe.length;er++){var or=Fe[er],Tr=180-360*(or.y+Kt)/Rt;Fe[er]=[360*(or.x+jt)/Rt-180,360/Math.PI*Math.atan(Math.exp(Tr*Math.PI/180))-90]}}switch(this.type){case 1:var Oe=[];for(lt=0;lt<oe.length;lt++)Oe[lt]=oe[lt][0];_e(oe=Oe);break;case 2:for(lt=0;lt<oe.length;lt++)_e(oe[lt]);break;case 3:for(oe=function(Fe){var er=Fe.length;if(er<=1)return[Fe];for(var or,Tr,kr=[],Or=0;Or<er;Or++){var Rr=gd(Fe[Or]);Rr!==0&&(Tr===void 0&&(Tr=Rr<0),Tr===Rr<0?(or&&kr.push(or),or=[Fe[Or]]):or.push(Fe[Or]))}return or&&kr.push(or),kr}(oe),lt=0;lt<oe.length;lt++)for(Ct=0;Ct<oe[lt].length;Ct++)_e(oe[lt][Ct])}oe.length===1?oe=oe[0]:xe="Multi"+xe;var Be={type:"Feature",geometry:{type:xe,coordinates:oe},properties:this.properties};return"id"in this&&(Be.id=this.id),Be};var Bh=jh;function jh(C,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=C,this._keys=[],this._values=[],this._features=[],C.readFields(md,this,D),this.length=this._features.length}function md(C,D,q){C===15?D.version=q.readVarint():C===1?D.name=q.readString():C===5?D.extent=q.readVarint():C===2?D._features.push(q.pos):C===3?D._keys.push(q.readString()):C===4&&D._values.push(function(lt){for(var Ct=null,Rt=lt.readVarint()+lt.pos;lt.pos<Rt;){var jt=lt.readVarint()>>3;Ct=jt===1?lt.readString():jt===2?lt.readFloat():jt===3?lt.readDouble():jt===4?lt.readVarint64():jt===5?lt.readVarint():jt===6?lt.readSVarint():jt===7?lt.readBoolean():null}return Ct}(q))}function vd(C,D,q){if(C===3){var lt=new Bh(q,q.readVarint()+q.pos);lt.length&&(D[lt.name]=lt)}}jh.prototype.feature=function(C){if(C<0||C>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[C];var D=this._pbf.readVarint()+this._pbf.pos;return new Nh(this._pbf,D,this.extent,this._keys,this._values)};var $l={VectorTile:function(C,D){this.layers=C.readFields(vd,{},D)},VectorTileFeature:Nh,VectorTileLayer:Bh},yd=$l.VectorTileFeature.types,Vu=Math.pow(2,13);function mc(C,D,q,lt,Ct,Rt,jt,Kt){C.emplaceBack(D,q,2*Math.floor(lt*Vu)+jt,Ct*Vu*2,Rt*Vu*2,Math.round(Kt))}var Is=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new ms,this.indexArray=new Q,this.programConfigurations=new mi(zh,C.layers,C.zoom),this.segments=new vr,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function xd(C,D){return C.x===D.x&&(C.x<0||C.x>Qn)||C.y===D.y&&(C.y<0||C.y>Qn)}Is.prototype.populate=function(C,D,q){this.features=[],this.hasPattern=$u("fill-extrusion",this.layers,D);for(var lt=0,Ct=C;lt<Ct.length;lt+=1){var Rt=Ct[lt],jt=Rt.feature,Kt=Rt.id,oe=Rt.index,xe=Rt.sourceLayerIndex,_e=this.layers[0]._featureFilter.needGeometry,Oe={type:jt.type,id:Kt,properties:jt.properties,geometry:_e?Fa(jt):[]};if(this.layers[0]._featureFilter.filter(new ti(this.zoom),Oe,q)){var Be={id:Kt,sourceLayerIndex:xe,index:oe,geometry:_e?Oe.geometry:Fa(jt),properties:jt.properties,type:jt.type,patterns:{}};jt.id!==void 0&&(Be.id=jt.id),this.hasPattern?this.features.push(Hu("fill-extrusion",this.layers,Be,this.zoom,D)):this.addFeature(Be,Be.geometry,oe,q,{}),D.featureIndex.insert(jt,Be.geometry,oe,xe,this.index,!0)}}},Is.prototype.addFeatures=function(C,D,q){for(var lt=0,Ct=this.features;lt<Ct.length;lt+=1){var Rt=Ct[lt],jt=Rt.geometry;this.addFeature(Rt,jt,Rt.index,D,q)}},Is.prototype.update=function(C,D,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(C,D,this.stateDependentLayers,q)},Is.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Is.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Is.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,zh),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Is.prototype.addFeature=function(C,D,q,lt,Ct){for(var Rt=0,jt=Gu(D,500);Rt<jt.length;Rt+=1){for(var Kt=jt[Rt],oe=0,xe=0,_e=Kt;xe<_e.length;xe+=1)oe+=_e[xe].length;for(var Oe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Be=0,Fe=Kt;Be<Fe.length;Be+=1){var er=Fe[Be];if(er.length!==0&&!((Vn=er).every(function(jn){return jn.x<0})||Vn.every(function(jn){return jn.x>Qn})||Vn.every(function(jn){return jn.y<0})||Vn.every(function(jn){return jn.y>Qn})))for(var or=0,Tr=0;Tr<er.length;Tr++){var kr=er[Tr];if(Tr>=1){var Or=er[Tr-1];if(!xd(kr,Or)){Oe.vertexLength+4>vr.MAX_VERTEX_ARRAY_LENGTH&&(Oe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Rr=kr.sub(Or)._perp()._unit(),Ur=Or.dist(kr);or+Ur>32768&&(or=0),mc(this.layoutVertexArray,kr.x,kr.y,Rr.x,Rr.y,0,0,or),mc(this.layoutVertexArray,kr.x,kr.y,Rr.x,Rr.y,0,1,or),or+=Ur,mc(this.layoutVertexArray,Or.x,Or.y,Rr.x,Rr.y,0,0,or),mc(this.layoutVertexArray,Or.x,Or.y,Rr.x,Rr.y,0,1,or);var Wr=Oe.vertexLength;this.indexArray.emplaceBack(Wr,Wr+2,Wr+1),this.indexArray.emplaceBack(Wr+1,Wr+2,Wr+3),Oe.vertexLength+=4,Oe.primitiveLength+=2}}}}if(Oe.vertexLength+oe>vr.MAX_VERTEX_ARRAY_LENGTH&&(Oe=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray)),yd[C.type]==="Polygon"){for(var Jr=[],gn=[],un=Oe.vertexLength,yn=0,Tn=Kt;yn<Tn.length;yn+=1){var Bn=Tn[yn];if(Bn.length!==0){Bn!==Kt[0]&&gn.push(Jr.length/2);for(var Cn=0;Cn<Bn.length;Cn++){var Fn=Bn[Cn];mc(this.layoutVertexArray,Fn.x,Fn.y,0,0,1,1,0),Jr.push(Fn.x),Jr.push(Fn.y)}}}for(var In=Nu(Jr,gn),Mn=0;Mn<In.length;Mn+=3)this.indexArray.emplaceBack(un+In[Mn],un+In[Mn+2],un+In[Mn+1]);Oe.primitiveLength+=In.length/3,Oe.vertexLength+=oe}}var Vn;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,q,Ct,lt)},wn("FillExtrusionBucket",Is,{omit:["layers","features"]});var bd={paint:new ta({"fill-extrusion-opacity":new An(Pt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ln(Pt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new An(Pt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new An(Pt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ds(Pt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ln(Pt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ln(Pt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new An(Pt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},_d=function(C){function D(q){C.call(this,q,bd)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(q){return new Is(q)},D.prototype.queryRadius=function(){return Hc(this.paint.get("fill-extrusion-translate"))},D.prototype.is3D=function(){return!0},D.prototype.queryIntersectsFeature=function(q,lt,Ct,Rt,jt,Kt,oe,xe){var _e=Vc(q,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Kt.angle,oe),Oe=this.paint.get("fill-extrusion-height").evaluate(lt,Ct),Be=this.paint.get("fill-extrusion-base").evaluate(lt,Ct),Fe=function(or,Tr,kr,Or){for(var Rr=[],Ur=0,Wr=or;Ur<Wr.length;Ur+=1){var Jr=Wr[Ur],gn=[Jr.x,Jr.y,Or,1];qc(gn,gn,Tr),Rr.push(new t(gn[0]/gn[3],gn[1]/gn[3]))}return Rr}(_e,xe,0,0),er=function(or,Tr,kr,Or){for(var Rr=[],Ur=[],Wr=Or[8]*Tr,Jr=Or[9]*Tr,gn=Or[10]*Tr,un=Or[11]*Tr,yn=Or[8]*kr,Tn=Or[9]*kr,Bn=Or[10]*kr,Cn=Or[11]*kr,Fn=0,In=or;Fn<In.length;Fn+=1){for(var Mn=[],Vn=[],jn=0,vi=In[Fn];jn<vi.length;jn+=1){var Dn=vi[jn],ci=Dn.x,_i=Dn.y,ki=Or[0]*ci+Or[4]*_i+Or[12],Ti=Or[1]*ci+Or[5]*_i+Or[13],yi=Or[2]*ci+Or[6]*_i+Or[14],la=Or[3]*ci+Or[7]*_i+Or[15],Ii=yi+gn,ga=la+un,Sa=ki+yn,ka=Ti+Tn,Ya=yi+Bn,Ta=la+Cn,ha=new t((ki+Wr)/ga,(Ti+Jr)/ga);ha.z=Ii/ga,Mn.push(ha);var Ma=new t(Sa/Ta,ka/Ta);Ma.z=Ya/Ta,Vn.push(Ma)}Rr.push(Mn),Ur.push(Vn)}return[Rr,Ur]}(Rt,Be,Oe,xe);return function(or,Tr,kr){var Or=1/0;Gc(kr,Tr)&&(Or=Uh(kr,Tr[0]));for(var Rr=0;Rr<Tr.length;Rr++)for(var Ur=Tr[Rr],Wr=or[Rr],Jr=0;Jr<Ur.length-1;Jr++){var gn=Ur[Jr],un=Ur[Jr+1],yn=Wr[Jr],Tn=[gn,un,Wr[Jr+1],yn,gn];qa(kr,Tn)&&(Or=Math.min(Or,Uh(kr,Tn)))}return Or!==1/0&&Or}(er[0],er[1],Fe)},D}(ea);function vc(C,D){return C.x*D.x+C.y*D.y}function Uh(C,D){if(C.length===1){for(var q,lt=0,Ct=D[lt++];!q||Ct.equals(q);)if(!(q=D[lt++]))return 1/0;for(;lt<D.length;lt++){var Rt=D[lt],jt=C[0],Kt=q.sub(Ct),oe=Rt.sub(Ct),xe=jt.sub(Ct),_e=vc(Kt,Kt),Oe=vc(Kt,oe),Be=vc(oe,oe),Fe=vc(xe,Kt),er=vc(xe,oe),or=_e*Be-Oe*Oe,Tr=(Be*Fe-Oe*er)/or,kr=(_e*er-Oe*Fe)/or,Or=1-Tr-kr,Rr=Ct.z*Or+q.z*Tr+Rt.z*kr;if(isFinite(Rr))return Rr}return 1/0}for(var Ur=1/0,Wr=0,Jr=D;Wr<Jr.length;Wr+=1){var gn=Jr[Wr];Ur=Math.min(Ur,gn.z)}return Ur}var Gh=ji([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,wd=$l.VectorTileFeature.types,kd=Math.cos(Math.PI/180*37.5),$h=Math.pow(2,14)/.5,oo=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new as,this.indexArray=new Q,this.programConfigurations=new mi(Gh,C.layers,C.zoom),this.segments=new vr,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};oo.prototype.populate=function(C,D,q){this.hasPattern=$u("line",this.layers,D);for(var lt=this.layers[0].layout.get("line-sort-key"),Ct=[],Rt=0,jt=C;Rt<jt.length;Rt+=1){var Kt=jt[Rt],oe=Kt.feature,xe=Kt.id,_e=Kt.index,Oe=Kt.sourceLayerIndex,Be=this.layers[0]._featureFilter.needGeometry,Fe={type:oe.type,id:xe,properties:oe.properties,geometry:Be?Fa(oe):[]};if(this.layers[0]._featureFilter.filter(new ti(this.zoom),Fe,q)){Be||(Fe.geometry=Fa(oe));var er=lt?lt.evaluate(Fe,{},q):void 0,or={id:xe,properties:oe.properties,type:oe.type,sourceLayerIndex:Oe,index:_e,geometry:Fe.geometry,patterns:{},sortKey:er};Ct.push(or)}}lt&&Ct.sort(function(yn,Tn){return yn.sortKey-Tn.sortKey});for(var Tr=0,kr=Ct;Tr<kr.length;Tr+=1){var Or=kr[Tr],Rr=Or,Ur=Rr.geometry,Wr=Rr.index,Jr=Rr.sourceLayerIndex;if(this.hasPattern){var gn=Hu("line",this.layers,Or,this.zoom,D);this.patternFeatures.push(gn)}else this.addFeature(Or,Ur,Wr,q,{});var un=C[Wr].feature;D.featureIndex.insert(un,Ur,Wr,Jr,this.index)}},oo.prototype.update=function(C,D,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(C,D,this.stateDependentLayers,q)},oo.prototype.addFeatures=function(C,D,q){for(var lt=0,Ct=this.patternFeatures;lt<Ct.length;lt+=1){var Rt=Ct[lt];this.addFeature(Rt,Rt.geometry,Rt.index,D,q)}},oo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},oo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},oo.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Gh),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},oo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},oo.prototype.addFeature=function(C,D,q,lt,Ct){for(var Rt=this.layers[0].layout,jt=Rt.get("line-join").evaluate(C,{}),Kt=Rt.get("line-cap"),oe=Rt.get("line-miter-limit"),xe=Rt.get("line-round-limit"),_e=0,Oe=D;_e<Oe.length;_e+=1){var Be=Oe[_e];this.addLine(Be,C,jt,Kt,oe,xe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,q,Ct,lt)},oo.prototype.addLine=function(C,D,q,lt,Ct,Rt){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,D.properties&&D.properties.hasOwnProperty("mapbox_clip_start")&&D.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+D.properties.mapbox_clip_start,this.clipEnd=+D.properties.mapbox_clip_end;for(var jt=0;jt<C.length-1;jt++)this.totalDistance+=C[jt].dist(C[jt+1]);this.updateScaledDistance()}for(var Kt=wd[D.type]==="Polygon",oe=C.length;oe>=2&&C[oe-1].equals(C[oe-2]);)oe--;for(var xe=0;xe<oe-1&&C[xe].equals(C[xe+1]);)xe++;if(!(oe<(Kt?3:2))){q==="bevel"&&(Ct=1.05);var _e,Oe=this.overscaling<=16?15*Qn/(512*this.overscaling):0,Be=this.segments.prepareSegment(10*oe,this.layoutVertexArray,this.indexArray),Fe=void 0,er=void 0,or=void 0,Tr=void 0;this.e1=this.e2=-1,Kt&&(_e=C[oe-2],Tr=C[xe].sub(_e)._unit()._perp());for(var kr=xe;kr<oe;kr++)if(!(er=kr===oe-1?Kt?C[xe+1]:void 0:C[kr+1])||!C[kr].equals(er)){Tr&&(or=Tr),_e&&(Fe=_e),_e=C[kr],Tr=er?er.sub(_e)._unit()._perp():or;var Or=(or=or||Tr).add(Tr);Or.x===0&&Or.y===0||Or._unit();var Rr=or.x*Tr.x+or.y*Tr.y,Ur=Or.x*Tr.x+Or.y*Tr.y,Wr=Ur!==0?1/Ur:1/0,Jr=2*Math.sqrt(2-2*Ur),gn=Ur<kd&&Fe&&er,un=or.x*Tr.y-or.y*Tr.x>0;if(gn&&kr>xe){var yn=_e.dist(Fe);if(yn>2*Oe){var Tn=_e.sub(_e.sub(Fe)._mult(Oe/yn)._round());this.updateDistance(Fe,Tn),this.addCurrentVertex(Tn,or,0,0,Be),Fe=Tn}}var Bn=Fe&&er,Cn=Bn?q:Kt?"butt":lt;if(Bn&&Cn==="round"&&(Wr<Rt?Cn="miter":Wr<=2&&(Cn="fakeround")),Cn==="miter"&&Wr>Ct&&(Cn="bevel"),Cn==="bevel"&&(Wr>2&&(Cn="flipbevel"),Wr<Ct&&(Cn="miter")),Fe&&this.updateDistance(Fe,_e),Cn==="miter")Or._mult(Wr),this.addCurrentVertex(_e,Or,0,0,Be);else if(Cn==="flipbevel"){if(Wr>100)Or=Tr.mult(-1);else{var Fn=Wr*or.add(Tr).mag()/or.sub(Tr).mag();Or._perp()._mult(Fn*(un?-1:1))}this.addCurrentVertex(_e,Or,0,0,Be),this.addCurrentVertex(_e,Or.mult(-1),0,0,Be)}else if(Cn==="bevel"||Cn==="fakeround"){var In=-Math.sqrt(Wr*Wr-1),Mn=un?In:0,Vn=un?0:In;if(Fe&&this.addCurrentVertex(_e,or,Mn,Vn,Be),Cn==="fakeround")for(var jn=Math.round(180*Jr/Math.PI/20),vi=1;vi<jn;vi++){var Dn=vi/jn;if(Dn!==.5){var ci=Dn-.5;Dn+=Dn*ci*(Dn-1)*((1.0904+Rr*(Rr*(3.55645-1.43519*Rr)-3.2452))*ci*ci+(.848013+Rr*(.215638*Rr-1.06021)))}var _i=Tr.sub(or)._mult(Dn)._add(or)._unit()._mult(un?-1:1);this.addHalfVertex(_e,_i.x,_i.y,!1,un,0,Be)}er&&this.addCurrentVertex(_e,Tr,-Mn,-Vn,Be)}else if(Cn==="butt")this.addCurrentVertex(_e,Or,0,0,Be);else if(Cn==="square"){var ki=Fe?1:-1;this.addCurrentVertex(_e,Or,ki,ki,Be)}else Cn==="round"&&(Fe&&(this.addCurrentVertex(_e,or,0,0,Be),this.addCurrentVertex(_e,or,1,1,Be,!0)),er&&(this.addCurrentVertex(_e,Tr,-1,-1,Be,!0),this.addCurrentVertex(_e,Tr,0,0,Be)));if(gn&&kr<oe-1){var Ti=_e.dist(er);if(Ti>2*Oe){var yi=_e.add(er.sub(_e)._mult(Oe/Ti)._round());this.updateDistance(_e,yi),this.addCurrentVertex(yi,Tr,0,0,Be),_e=yi}}}}},oo.prototype.addCurrentVertex=function(C,D,q,lt,Ct,Rt){Rt===void 0&&(Rt=!1);var jt=D.x+D.y*q,Kt=D.y-D.x*q,oe=-D.x+D.y*lt,xe=-D.y-D.x*lt;this.addHalfVertex(C,jt,Kt,Rt,!1,q,Ct),this.addHalfVertex(C,oe,xe,Rt,!0,-lt,Ct),this.distance>$h/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,D,q,lt,Ct,Rt))},oo.prototype.addHalfVertex=function(C,D,q,lt,Ct,Rt,jt){var Kt=C.x,oe=C.y,xe=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((Kt<<1)+(lt?1:0),(oe<<1)+(Ct?1:0),Math.round(63*D)+128,Math.round(63*q)+128,1+(Rt===0?0:Rt<0?-1:1)|(63&xe)<<2,xe>>6);var _e=jt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,_e),jt.primitiveLength++),Ct?this.e2=_e:this.e1=_e},oo.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*($h-1):this.distance},oo.prototype.updateDistance=function(C,D){this.distance+=C.dist(D),this.updateScaledDistance()},wn("LineBucket",oo,{omit:["layers","patternFeatures"]});var Td=new ta({"line-cap":new An(Pt.layout_line["line-cap"]),"line-join":new Ln(Pt.layout_line["line-join"]),"line-miter-limit":new An(Pt.layout_line["line-miter-limit"]),"line-round-limit":new An(Pt.layout_line["line-round-limit"]),"line-sort-key":new Ln(Pt.layout_line["line-sort-key"])}),Hh={paint:new ta({"line-opacity":new Ln(Pt.paint_line["line-opacity"]),"line-color":new Ln(Pt.paint_line["line-color"]),"line-translate":new An(Pt.paint_line["line-translate"]),"line-translate-anchor":new An(Pt.paint_line["line-translate-anchor"]),"line-width":new Ln(Pt.paint_line["line-width"]),"line-gap-width":new Ln(Pt.paint_line["line-gap-width"]),"line-offset":new Ln(Pt.paint_line["line-offset"]),"line-blur":new Ln(Pt.paint_line["line-blur"]),"line-dasharray":new ua(Pt.paint_line["line-dasharray"]),"line-pattern":new ds(Pt.paint_line["line-pattern"]),"line-gradient":new zo(Pt.paint_line["line-gradient"])}),layout:Td},Md=function(C){function D(){C.apply(this,arguments)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(q,lt){return lt=new ti(Math.floor(lt.zoom),{now:lt.now,fadeDuration:lt.fadeDuration,zoomHistory:lt.zoomHistory,transition:lt.transition}),C.prototype.possiblyEvaluate.call(this,q,lt)},D.prototype.evaluate=function(q,lt,Ct,Rt){return lt=u({},lt,{zoom:Math.floor(lt.zoom)}),C.prototype.evaluate.call(this,q,lt,Ct,Rt)},D}(Ln),Vh=new Md(Hh.paint.properties["line-width"].specification);Vh.useIntegerZoom=!0;var Ad=function(C){function D(q){C.call(this,q,Hh)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype._handleSpecialPaintPropertyUpdate=function(q){q==="line-gradient"&&this._updateGradient()},D.prototype._updateGradient=function(){var q=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Sh(q,"lineProgress"),this.gradientTexture=null},D.prototype.recalculate=function(q,lt){C.prototype.recalculate.call(this,q,lt),this.paint._values["line-floorwidth"]=Vh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,q)},D.prototype.createBucket=function(q){return new oo(q)},D.prototype.queryRadius=function(q){var lt=q,Ct=Wh(hc("line-width",this,lt),hc("line-gap-width",this,lt)),Rt=hc("line-offset",this,lt);return Ct/2+Math.abs(Rt)+Hc(this.paint.get("line-translate"))},D.prototype.queryIntersectsFeature=function(q,lt,Ct,Rt,jt,Kt,oe){var xe=Vc(q,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Kt.angle,oe),_e=oe/2*Wh(this.paint.get("line-width").evaluate(lt,Ct),this.paint.get("line-gap-width").evaluate(lt,Ct)),Oe=this.paint.get("line-offset").evaluate(lt,Ct);return Oe&&(Rt=function(Be,Fe){for(var er=[],or=new t(0,0),Tr=0;Tr<Be.length;Tr++){for(var kr=Be[Tr],Or=[],Rr=0;Rr<kr.length;Rr++){var Ur=kr[Rr-1],Wr=kr[Rr],Jr=kr[Rr+1],gn=Rr===0?or:Wr.sub(Ur)._unit()._perp(),un=Rr===kr.length-1?or:Jr.sub(Wr)._unit()._perp(),yn=gn._add(un)._unit(),Tn=yn.x*un.x+yn.y*un.y;yn._mult(1/Tn),Or.push(yn._mult(Fe)._add(Wr))}er.push(Or)}return er}(Rt,Oe*oe)),function(Be,Fe,er){for(var or=0;or<Fe.length;or++){var Tr=Fe[or];if(Be.length>=3){for(var kr=0;kr<Tr.length;kr++)if(_l(Be,Tr[kr]))return!0}if(Pu(Be,Tr,er))return!0}return!1}(xe,Rt,_e)},D.prototype.isTileClipped=function(){return!0},D}(ea);function Wh(C,D){return D>0?D+2*C:C}var Wu=ji([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Cd=ji([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ld=(ji([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ji([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),qh=(ji([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ji([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ed=ji([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Sd(C,D,q){return C.sections.forEach(function(lt){lt.text=function(Ct,Rt,jt){var Kt=Rt.layout.get("text-transform").evaluate(jt,{});return Kt==="uppercase"?Ct=Ct.toLocaleUpperCase():Kt==="lowercase"&&(Ct=Ct.toLocaleLowerCase()),Ai.applyArabicShaping&&(Ct=Ai.applyArabicShaping(Ct)),Ct}(lt.text,D,q)}),C}ji([{name:"triangle",components:3,type:"Uint16"}]),ji([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ji([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ji([{type:"Float32",name:"offsetX"}]),ji([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var yc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},wa=24,Yh=function(C,D,q,lt,Ct){var Rt,jt,Kt=8*Ct-lt-1,oe=(1<<Kt)-1,xe=oe>>1,_e=-7,Oe=q?Ct-1:0,Be=q?-1:1,Fe=C[D+Oe];for(Oe+=Be,Rt=Fe&(1<<-_e)-1,Fe>>=-_e,_e+=Kt;_e>0;Rt=256*Rt+C[D+Oe],Oe+=Be,_e-=8);for(jt=Rt&(1<<-_e)-1,Rt>>=-_e,_e+=lt;_e>0;jt=256*jt+C[D+Oe],Oe+=Be,_e-=8);if(Rt===0)Rt=1-xe;else{if(Rt===oe)return jt?NaN:1/0*(Fe?-1:1);jt+=Math.pow(2,lt),Rt-=xe}return(Fe?-1:1)*jt*Math.pow(2,Rt-lt)},Zh=function(C,D,q,lt,Ct,Rt){var jt,Kt,oe,xe=8*Rt-Ct-1,_e=(1<<xe)-1,Oe=_e>>1,Be=Ct===23?Math.pow(2,-24)-Math.pow(2,-77):0,Fe=lt?0:Rt-1,er=lt?1:-1,or=D<0||D===0&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?(Kt=isNaN(D)?1:0,jt=_e):(jt=Math.floor(Math.log(D)/Math.LN2),D*(oe=Math.pow(2,-jt))<1&&(jt--,oe*=2),(D+=jt+Oe>=1?Be/oe:Be*Math.pow(2,1-Oe))*oe>=2&&(jt++,oe/=2),jt+Oe>=_e?(Kt=0,jt=_e):jt+Oe>=1?(Kt=(D*oe-1)*Math.pow(2,Ct),jt+=Oe):(Kt=D*Math.pow(2,Oe-1)*Math.pow(2,Ct),jt=0));Ct>=8;C[q+Fe]=255&Kt,Fe+=er,Kt/=256,Ct-=8);for(jt=jt<<Ct|Kt,xe+=Ct;xe>0;C[q+Fe]=255&jt,Fe+=er,jt/=256,xe-=8);C[q+Fe-er]|=128*or},Jc=bi;function bi(C){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(C)?C:new Uint8Array(C||0),this.pos=0,this.type=0,this.length=this.buf.length}bi.Varint=0,bi.Fixed64=1,bi.Bytes=2,bi.Fixed32=5;var qu=4294967296,Xh=1/qu,Kh=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function nl(C){return C.type===bi.Bytes?C.readVarint()+C.pos:C.pos+1}function Id(C,D,q){return q?4294967296*D+(C>>>0):4294967296*(D>>>0)+(C>>>0)}function Jh(C,D,q){var lt=D<=16383?1:D<=2097151?2:D<=268435455?3:Math.floor(Math.log(D)/(7*Math.LN2));q.realloc(lt);for(var Ct=q.pos-1;Ct>=C;Ct--)q.buf[Ct+lt]=q.buf[Ct]}function Od(C,D){for(var q=0;q<C.length;q++)D.writeVarint(C[q])}function Rd(C,D){for(var q=0;q<C.length;q++)D.writeSVarint(C[q])}function Pd(C,D){for(var q=0;q<C.length;q++)D.writeFloat(C[q])}function Dd(C,D){for(var q=0;q<C.length;q++)D.writeDouble(C[q])}function Fd(C,D){for(var q=0;q<C.length;q++)D.writeBoolean(C[q])}function zd(C,D){for(var q=0;q<C.length;q++)D.writeFixed32(C[q])}function Nd(C,D){for(var q=0;q<C.length;q++)D.writeSFixed32(C[q])}function Bd(C,D){for(var q=0;q<C.length;q++)D.writeFixed64(C[q])}function jd(C,D){for(var q=0;q<C.length;q++)D.writeSFixed64(C[q])}function Qc(C,D){return(C[D]|C[D+1]<<8|C[D+2]<<16)+16777216*C[D+3]}function Hl(C,D,q){C[q]=D,C[q+1]=D>>>8,C[q+2]=D>>>16,C[q+3]=D>>>24}function Qh(C,D){return(C[D]|C[D+1]<<8|C[D+2]<<16)+(C[D+3]<<24)}bi.prototype={destroy:function(){this.buf=null},readFields:function(C,D,q){for(q=q||this.length;this.pos<q;){var lt=this.readVarint(),Ct=lt>>3,Rt=this.pos;this.type=7&lt,C(Ct,D,this),this.pos===Rt&&this.skip(lt)}return D},readMessage:function(C,D){return this.readFields(C,D,this.readVarint()+this.pos)},readFixed32:function(){var C=Qc(this.buf,this.pos);return this.pos+=4,C},readSFixed32:function(){var C=Qh(this.buf,this.pos);return this.pos+=4,C},readFixed64:function(){var C=Qc(this.buf,this.pos)+Qc(this.buf,this.pos+4)*qu;return this.pos+=8,C},readSFixed64:function(){var C=Qc(this.buf,this.pos)+Qh(this.buf,this.pos+4)*qu;return this.pos+=8,C},readFloat:function(){var C=Yh(this.buf,this.pos,!0,23,4);return this.pos+=4,C},readDouble:function(){var C=Yh(this.buf,this.pos,!0,52,8);return this.pos+=8,C},readVarint:function(C){var D,q,lt=this.buf;return D=127&(q=lt[this.pos++]),q<128?D:(D|=(127&(q=lt[this.pos++]))<<7,q<128?D:(D|=(127&(q=lt[this.pos++]))<<14,q<128?D:(D|=(127&(q=lt[this.pos++]))<<21,q<128?D:function(Ct,Rt,jt){var Kt,oe,xe=jt.buf;if(Kt=(112&(oe=xe[jt.pos++]))>>4,oe<128||(Kt|=(127&(oe=xe[jt.pos++]))<<3,oe<128)||(Kt|=(127&(oe=xe[jt.pos++]))<<10,oe<128)||(Kt|=(127&(oe=xe[jt.pos++]))<<17,oe<128)||(Kt|=(127&(oe=xe[jt.pos++]))<<24,oe<128)||(Kt|=(1&(oe=xe[jt.pos++]))<<31,oe<128))return Id(Ct,Kt,Rt);throw new Error("Expected varint not more than 10 bytes")}(D|=(15&(q=lt[this.pos]))<<28,C,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var C=this.readVarint();return C%2==1?(C+1)/-2:C/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var C=this.readVarint()+this.pos,D=this.pos;return this.pos=C,C-D>=12&&Kh?function(q,lt,Ct){return Kh.decode(q.subarray(lt,Ct))}(this.buf,D,C):function(q,lt,Ct){for(var Rt="",jt=lt;jt<Ct;){var Kt,oe,xe,_e=q[jt],Oe=null,Be=_e>239?4:_e>223?3:_e>191?2:1;if(jt+Be>Ct)break;Be===1?_e<128&&(Oe=_e):Be===2?(192&(Kt=q[jt+1]))==128&&(Oe=(31&_e)<<6|63&Kt)<=127&&(Oe=null):Be===3?(Kt=q[jt+1],oe=q[jt+2],(192&Kt)==128&&(192&oe)==128&&((Oe=(15&_e)<<12|(63&Kt)<<6|63&oe)<=2047||Oe>=55296&&Oe<=57343)&&(Oe=null)):Be===4&&(Kt=q[jt+1],oe=q[jt+2],xe=q[jt+3],(192&Kt)==128&&(192&oe)==128&&(192&xe)==128&&((Oe=(15&_e)<<18|(63&Kt)<<12|(63&oe)<<6|63&xe)<=65535||Oe>=1114112)&&(Oe=null)),Oe===null?(Oe=65533,Be=1):Oe>65535&&(Oe-=65536,Rt+=String.fromCharCode(Oe>>>10&1023|55296),Oe=56320|1023&Oe),Rt+=String.fromCharCode(Oe),jt+=Be}return Rt}(this.buf,D,C)},readBytes:function(){var C=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,C);return this.pos=C,D},readPackedVarint:function(C,D){if(this.type!==bi.Bytes)return C.push(this.readVarint(D));var q=nl(this);for(C=C||[];this.pos<q;)C.push(this.readVarint(D));return C},readPackedSVarint:function(C){if(this.type!==bi.Bytes)return C.push(this.readSVarint());var D=nl(this);for(C=C||[];this.pos<D;)C.push(this.readSVarint());return C},readPackedBoolean:function(C){if(this.type!==bi.Bytes)return C.push(this.readBoolean());var D=nl(this);for(C=C||[];this.pos<D;)C.push(this.readBoolean());return C},readPackedFloat:function(C){if(this.type!==bi.Bytes)return C.push(this.readFloat());var D=nl(this);for(C=C||[];this.pos<D;)C.push(this.readFloat());return C},readPackedDouble:function(C){if(this.type!==bi.Bytes)return C.push(this.readDouble());var D=nl(this);for(C=C||[];this.pos<D;)C.push(this.readDouble());return C},readPackedFixed32:function(C){if(this.type!==bi.Bytes)return C.push(this.readFixed32());var D=nl(this);for(C=C||[];this.pos<D;)C.push(this.readFixed32());return C},readPackedSFixed32:function(C){if(this.type!==bi.Bytes)return C.push(this.readSFixed32());var D=nl(this);for(C=C||[];this.pos<D;)C.push(this.readSFixed32());return C},readPackedFixed64:function(C){if(this.type!==bi.Bytes)return C.push(this.readFixed64());var D=nl(this);for(C=C||[];this.pos<D;)C.push(this.readFixed64());return C},readPackedSFixed64:function(C){if(this.type!==bi.Bytes)return C.push(this.readSFixed64());var D=nl(this);for(C=C||[];this.pos<D;)C.push(this.readSFixed64());return C},skip:function(C){var D=7&C;if(D===bi.Varint)for(;this.buf[this.pos++]>127;);else if(D===bi.Bytes)this.pos=this.readVarint()+this.pos;else if(D===bi.Fixed32)this.pos+=4;else{if(D!==bi.Fixed64)throw new Error("Unimplemented type: "+D);this.pos+=8}},writeTag:function(C,D){this.writeVarint(C<<3|D)},realloc:function(C){for(var D=this.length||16;D<this.pos+C;)D*=2;if(D!==this.length){var q=new Uint8Array(D);q.set(this.buf),this.buf=q,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(C){this.realloc(4),Hl(this.buf,C,this.pos),this.pos+=4},writeSFixed32:function(C){this.realloc(4),Hl(this.buf,C,this.pos),this.pos+=4},writeFixed64:function(C){this.realloc(8),Hl(this.buf,-1&C,this.pos),Hl(this.buf,Math.floor(C*Xh),this.pos+4),this.pos+=8},writeSFixed64:function(C){this.realloc(8),Hl(this.buf,-1&C,this.pos),Hl(this.buf,Math.floor(C*Xh),this.pos+4),this.pos+=8},writeVarint:function(C){(C=+C||0)>268435455||C<0?function(D,q){var lt,Ct;if(D>=0?(lt=D%4294967296|0,Ct=D/4294967296|0):(Ct=~(-D/4294967296),4294967295^(lt=~(-D%4294967296))?lt=lt+1|0:(lt=0,Ct=Ct+1|0)),D>=18446744073709552e3||D<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");q.realloc(10),function(Rt,jt,Kt){Kt.buf[Kt.pos++]=127&Rt|128,Rt>>>=7,Kt.buf[Kt.pos++]=127&Rt|128,Rt>>>=7,Kt.buf[Kt.pos++]=127&Rt|128,Rt>>>=7,Kt.buf[Kt.pos++]=127&Rt|128,Rt>>>=7,Kt.buf[Kt.pos]=127&Rt}(lt,0,q),function(Rt,jt){var Kt=(7&Rt)<<4;jt.buf[jt.pos++]|=Kt|((Rt>>>=3)?128:0),Rt&&(jt.buf[jt.pos++]=127&Rt|((Rt>>>=7)?128:0),Rt&&(jt.buf[jt.pos++]=127&Rt|((Rt>>>=7)?128:0),Rt&&(jt.buf[jt.pos++]=127&Rt|((Rt>>>=7)?128:0),Rt&&(jt.buf[jt.pos++]=127&Rt|((Rt>>>=7)?128:0),Rt&&(jt.buf[jt.pos++]=127&Rt)))))}(Ct,q)}(C,this):(this.realloc(4),this.buf[this.pos++]=127&C|(C>127?128:0),C<=127||(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),C<=127||(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),C<=127||(this.buf[this.pos++]=C>>>7&127))))},writeSVarint:function(C){this.writeVarint(C<0?2*-C-1:2*C)},writeBoolean:function(C){this.writeVarint(Boolean(C))},writeString:function(C){C=String(C),this.realloc(4*C.length),this.pos++;var D=this.pos;this.pos=function(lt,Ct,Rt){for(var jt,Kt,oe=0;oe<Ct.length;oe++){if((jt=Ct.charCodeAt(oe))>55295&&jt<57344){if(!Kt){jt>56319||oe+1===Ct.length?(lt[Rt++]=239,lt[Rt++]=191,lt[Rt++]=189):Kt=jt;continue}if(jt<56320){lt[Rt++]=239,lt[Rt++]=191,lt[Rt++]=189,Kt=jt;continue}jt=Kt-55296<<10|jt-56320|65536,Kt=null}else Kt&&(lt[Rt++]=239,lt[Rt++]=191,lt[Rt++]=189,Kt=null);jt<128?lt[Rt++]=jt:(jt<2048?lt[Rt++]=jt>>6|192:(jt<65536?lt[Rt++]=jt>>12|224:(lt[Rt++]=jt>>18|240,lt[Rt++]=jt>>12&63|128),lt[Rt++]=jt>>6&63|128),lt[Rt++]=63&jt|128)}return Rt}(this.buf,C,this.pos);var q=this.pos-D;q>=128&&Jh(D,q,this),this.pos=D-1,this.writeVarint(q),this.pos+=q},writeFloat:function(C){this.realloc(4),Zh(this.buf,C,this.pos,!0,23,4),this.pos+=4},writeDouble:function(C){this.realloc(8),Zh(this.buf,C,this.pos,!0,52,8),this.pos+=8},writeBytes:function(C){var D=C.length;this.writeVarint(D),this.realloc(D);for(var q=0;q<D;q++)this.buf[this.pos++]=C[q]},writeRawMessage:function(C,D){this.pos++;var q=this.pos;C(D,this);var lt=this.pos-q;lt>=128&&Jh(q,lt,this),this.pos=q-1,this.writeVarint(lt),this.pos+=lt},writeMessage:function(C,D,q){this.writeTag(C,bi.Bytes),this.writeRawMessage(D,q)},writePackedVarint:function(C,D){D.length&&this.writeMessage(C,Od,D)},writePackedSVarint:function(C,D){D.length&&this.writeMessage(C,Rd,D)},writePackedBoolean:function(C,D){D.length&&this.writeMessage(C,Fd,D)},writePackedFloat:function(C,D){D.length&&this.writeMessage(C,Pd,D)},writePackedDouble:function(C,D){D.length&&this.writeMessage(C,Dd,D)},writePackedFixed32:function(C,D){D.length&&this.writeMessage(C,zd,D)},writePackedSFixed32:function(C,D){D.length&&this.writeMessage(C,Nd,D)},writePackedFixed64:function(C,D){D.length&&this.writeMessage(C,Bd,D)},writePackedSFixed64:function(C,D){D.length&&this.writeMessage(C,jd,D)},writeBytesField:function(C,D){this.writeTag(C,bi.Bytes),this.writeBytes(D)},writeFixed32Field:function(C,D){this.writeTag(C,bi.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(C,D){this.writeTag(C,bi.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(C,D){this.writeTag(C,bi.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(C,D){this.writeTag(C,bi.Fixed64),this.writeSFixed64(D)},writeVarintField:function(C,D){this.writeTag(C,bi.Varint),this.writeVarint(D)},writeSVarintField:function(C,D){this.writeTag(C,bi.Varint),this.writeSVarint(D)},writeStringField:function(C,D){this.writeTag(C,bi.Bytes),this.writeString(D)},writeFloatField:function(C,D){this.writeTag(C,bi.Fixed32),this.writeFloat(D)},writeDoubleField:function(C,D){this.writeTag(C,bi.Fixed64),this.writeDouble(D)},writeBooleanField:function(C,D){this.writeVarintField(C,Boolean(D))}};var Yu=3;function Ud(C,D,q){C===1&&q.readMessage(Gd,D)}function Gd(C,D,q){if(C===3){var lt=q.readMessage($d,{}),Ct=lt.id,Rt=lt.bitmap,jt=lt.width,Kt=lt.height,oe=lt.left,xe=lt.top,_e=lt.advance;D.push({id:Ct,bitmap:new Ll({width:jt+2*Yu,height:Kt+2*Yu},Rt),metrics:{width:jt,height:Kt,left:oe,top:xe,advance:_e}})}}function $d(C,D,q){C===1?D.id=q.readVarint():C===2?D.bitmap=q.readBytes():C===3?D.width=q.readVarint():C===4?D.height=q.readVarint():C===5?D.left=q.readSVarint():C===6?D.top=q.readSVarint():C===7&&(D.advance=q.readVarint())}var tf=Yu;function ef(C){for(var D=0,q=0,lt=0,Ct=C;lt<Ct.length;lt+=1){var Rt=Ct[lt];D+=Rt.w*Rt.h,q=Math.max(q,Rt.w)}C.sort(function(or,Tr){return Tr.h-or.h});for(var jt=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(D/.95)),q),h:1/0}],Kt=0,oe=0,xe=0,_e=C;xe<_e.length;xe+=1)for(var Oe=_e[xe],Be=jt.length-1;Be>=0;Be--){var Fe=jt[Be];if(!(Oe.w>Fe.w||Oe.h>Fe.h)){if(Oe.x=Fe.x,Oe.y=Fe.y,oe=Math.max(oe,Oe.y+Oe.h),Kt=Math.max(Kt,Oe.x+Oe.w),Oe.w===Fe.w&&Oe.h===Fe.h){var er=jt.pop();Be<jt.length&&(jt[Be]=er)}else Oe.h===Fe.h?(Fe.x+=Oe.w,Fe.w-=Oe.w):Oe.w===Fe.w?(Fe.y+=Oe.h,Fe.h-=Oe.h):(jt.push({x:Fe.x+Oe.w,y:Fe.y,w:Fe.w-Oe.w,h:Oe.h}),Fe.y+=Oe.h,Fe.h-=Oe.h);break}}return{w:Kt,h:oe,fill:D/(Kt*oe)||0}}var _o=1,tu=function(C,D){var q=D.pixelRatio,lt=D.version,Ct=D.stretchX,Rt=D.stretchY,jt=D.content;this.paddedRect=C,this.pixelRatio=q,this.stretchX=Ct,this.stretchY=Rt,this.content=jt,this.version=lt},xc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};xc.tl.get=function(){return[this.paddedRect.x+_o,this.paddedRect.y+_o]},xc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-_o,this.paddedRect.y+this.paddedRect.h-_o]},xc.tlbr.get=function(){return this.tl.concat(this.br)},xc.displaySize.get=function(){return[(this.paddedRect.w-2*_o)/this.pixelRatio,(this.paddedRect.h-2*_o)/this.pixelRatio]},Object.defineProperties(tu.prototype,xc);var bc=function(C,D){var q={},lt={};this.haveRenderCallbacks=[];var Ct=[];this.addImages(C,q,Ct),this.addImages(D,lt,Ct);var Rt=ef(Ct),jt=Rt.w,Kt=Rt.h,oe=new ao({width:jt||1,height:Kt||1});for(var xe in C){var _e=C[xe],Oe=q[xe].paddedRect;ao.copy(_e.data,oe,{x:0,y:0},{x:Oe.x+_o,y:Oe.y+_o},_e.data)}for(var Be in D){var Fe=D[Be],er=lt[Be].paddedRect,or=er.x+_o,Tr=er.y+_o,kr=Fe.data.width,Or=Fe.data.height;ao.copy(Fe.data,oe,{x:0,y:0},{x:or,y:Tr},Fe.data),ao.copy(Fe.data,oe,{x:0,y:Or-1},{x:or,y:Tr-1},{width:kr,height:1}),ao.copy(Fe.data,oe,{x:0,y:0},{x:or,y:Tr+Or},{width:kr,height:1}),ao.copy(Fe.data,oe,{x:kr-1,y:0},{x:or-1,y:Tr},{width:1,height:Or}),ao.copy(Fe.data,oe,{x:0,y:0},{x:or+kr,y:Tr},{width:1,height:Or})}this.image=oe,this.iconPositions=q,this.patternPositions=lt};bc.prototype.addImages=function(C,D,q){for(var lt in C){var Ct=C[lt],Rt={x:0,y:0,w:Ct.data.width+2*_o,h:Ct.data.height+2*_o};q.push(Rt),D[lt]=new tu(Rt,Ct),Ct.hasRenderCallback&&this.haveRenderCallbacks.push(lt)}},bc.prototype.patchUpdatedImages=function(C,D){for(var q in C.dispatchRenderCallbacks(this.haveRenderCallbacks),C.updatedImages)this.patchUpdatedImage(this.iconPositions[q],C.getImage(q),D),this.patchUpdatedImage(this.patternPositions[q],C.getImage(q),D)},bc.prototype.patchUpdatedImage=function(C,D,q){if(C&&D&&C.version!==D.version){C.version=D.version;var lt=C.tl,Ct=lt[0],Rt=lt[1];q.update(D.data,void 0,{x:Ct,y:Rt})}},wn("ImagePosition",tu),wn("ImageAtlas",bc);var Uo={horizontal:1,vertical:2,horizontalOnly:3},_c=-17,Vl=function(){this.scale=1,this.fontStack="",this.imageName=null};Vl.forText=function(C,D){var q=new Vl;return q.scale=C||1,q.fontStack=D,q},Vl.forImage=function(C){var D=new Vl;return D.imageName=C,D};var za=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function eu(C,D,q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe,er,or){var Tr,kr=za.fromFeature(C,Ct);Oe===Uo.vertical&&kr.verticalizePunctuation();var Or=Ai.processBidirectionalText,Rr=Ai.processStyledBidirectionalText;if(Or&&kr.sections.length===1){Tr=[];for(var Ur=0,Wr=Or(kr.toString(),Zu(kr,xe,Rt,D,lt,Fe,er));Ur<Wr.length;Ur+=1){var Jr=Wr[Ur],gn=new za;gn.text=Jr,gn.sections=kr.sections;for(var un=0;un<Jr.length;un++)gn.sectionIndex.push(0);Tr.push(gn)}}else if(Rr){Tr=[];for(var yn=0,Tn=Rr(kr.text,kr.sectionIndex,Zu(kr,xe,Rt,D,lt,Fe,er));yn<Tn.length;yn+=1){var Bn=Tn[yn],Cn=new za;Cn.text=Bn[0],Cn.sectionIndex=Bn[1],Cn.sections=kr.sections,Tr.push(Cn)}}else Tr=function(Mn,Vn){for(var jn=[],vi=Mn.text,Dn=0,ci=0,_i=Vn;ci<_i.length;ci+=1){var ki=_i[ci];jn.push(Mn.substring(Dn,ki)),Dn=ki}return Dn<vi.length&&jn.push(Mn.substring(Dn,vi.length)),jn}(kr,Zu(kr,xe,Rt,D,lt,Fe,er));var Fn=[],In={positionedLines:Fn,text:kr.toString(),top:_e[1],bottom:_e[1],left:_e[0],right:_e[0],writingMode:Oe,iconsInText:!1,verticalizable:!1};return function(Mn,Vn,jn,vi,Dn,ci,_i,ki,Ti,yi,la,Ii){for(var ga=0,Sa=_c,ka=0,Ya=0,Ta=ki==="right"?1:ki==="left"?0:.5,ha=0,Ma=0,ma=Dn;Ma<ma.length;Ma+=1){var fa=ma[Ma];fa.trim();var Un=fa.getMaxScale(),Zn=(Un-1)*wa,Gi={positionedGlyphs:[],lineOffset:0};Mn.positionedLines[ha]=Gi;var di=Gi.positionedGlyphs,Di=0;if(fa.length()){for(var Ei=0;Ei<fa.length();Ei++){var ei=fa.getSection(Ei),$i=fa.getSectionIndex(Ei),Za=fa.getCharCode(Ei),ko=0,Na=null,Rs=null,ol=null,va=wa,Ps=!(Ti===Uo.horizontal||!la&&!fs(Za)||la&&(ru[Za]||ia(Za)));if(ei.imageName){var vs=vi[ei.imageName];if(!vs)continue;ol=ei.imageName,Mn.iconsInText=Mn.iconsInText||!0,Rs=vs.paddedRect;var ys=vs.displaySize;ei.scale=ei.scale*wa/Ii,Na={width:ys[0],height:ys[1],left:_o,top:-tf,advance:Ps?ys[1]:ys[0]},ko=Zn+(wa-ys[1]*ei.scale),va=Na.advance;var Ol=Ps?ys[0]*ei.scale-wa*Un:ys[1]*ei.scale-wa*Un;Ol>0&&Ol>Di&&(Di=Ol)}else{var hu=jn[ei.fontStack],Rl=hu&&hu[Za];if(Rl&&Rl.rect)Rs=Rl.rect,Na=Rl.metrics;else{var fu=Vn[ei.fontStack],Mc=fu&&fu[Za];if(!Mc)continue;Na=Mc.metrics}ko=(Un-ei.scale)*wa}Ps?(Mn.verticalizable=!0,di.push({glyph:Za,imageName:ol,x:ga,y:Sa+ko,vertical:Ps,scale:ei.scale,fontStack:ei.fontStack,sectionIndex:$i,metrics:Na,rect:Rs}),ga+=va*ei.scale+yi):(di.push({glyph:Za,imageName:ol,x:ga,y:Sa+ko,vertical:Ps,scale:ei.scale,fontStack:ei.fontStack,sectionIndex:$i,metrics:Na,rect:Rs}),ga+=Na.advance*ei.scale+yi)}if(di.length!==0){var ah=ga-yi;ka=Math.max(ah,ka),Vd(di,0,di.length-1,Ta,Di)}ga=0;var pu=ci*Un+Di;Gi.lineOffset=Math.max(Di,Zn),Sa+=pu,Ya=Math.max(pu,Ya),++ha}else Sa+=ci,++ha}var ec=Sa-_c,du=Xu(_i),gu=du.horizontalAlign,Ac=du.verticalAlign;(function(oh,Cc,Pl,rc,mu,vu,nc,yu,xu){var Lc=(Cc-Pl)*mu,Ec=0;Ec=vu!==nc?-yu*rc-_c:(-rc*xu+.5)*nc;for(var Dl=0,Sc=oh;Dl<Sc.length;Dl+=1)for(var Fl=0,Ic=Sc[Dl].positionedGlyphs;Fl<Ic.length;Fl+=1){var Oc=Ic[Fl];Oc.x+=Lc,Oc.y+=Ec}})(Mn.positionedLines,Ta,gu,Ac,ka,Ya,ci,ec,Dn.length),Mn.top+=-Ac*ec,Mn.bottom=Mn.top+ec,Mn.left+=-gu*ka,Mn.right=Mn.left+ka}(In,D,q,lt,Tr,jt,Kt,oe,Oe,xe,Be,or),!function(Mn){for(var Vn=0,jn=Mn;Vn<jn.length;Vn+=1)if(jn[Vn].positionedGlyphs.length!==0)return!1;return!0}(Fn)&&In}za.fromFeature=function(C,D){for(var q=new za,lt=0;lt<C.sections.length;lt++){var Ct=C.sections[lt];Ct.image?q.addImageSection(Ct):q.addTextSection(Ct,D)}return q},za.prototype.length=function(){return this.text.length},za.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},za.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},za.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},za.prototype.verticalizePunctuation=function(){this.text=function(C){for(var D="",q=0;q<C.length;q++){var lt=C.charCodeAt(q+1)||null,Ct=C.charCodeAt(q-1)||null;lt&&Ls(lt)&&!yc[C[q+1]]||Ct&&Ls(Ct)&&!yc[C[q-1]]||!yc[C[q]]?D+=C[q]:D+=yc[C[q]]}return D}(this.text)},za.prototype.trim=function(){for(var C=0,D=0;D<this.text.length&&ru[this.text.charCodeAt(D)];D++)C++;for(var q=this.text.length,lt=this.text.length-1;lt>=0&&lt>=C&&ru[this.text.charCodeAt(lt)];lt--)q--;this.text=this.text.substring(C,q),this.sectionIndex=this.sectionIndex.slice(C,q)},za.prototype.substring=function(C,D){var q=new za;return q.text=this.text.substring(C,D),q.sectionIndex=this.sectionIndex.slice(C,D),q.sections=this.sections,q},za.prototype.toString=function(){return this.text},za.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(D,q){return Math.max(D,C.sections[q].scale)},0)},za.prototype.addTextSection=function(C,D){this.text+=C.text,this.sections.push(Vl.forText(C.scale,C.fontStack||D));for(var q=this.sections.length-1,lt=0;lt<C.text.length;++lt)this.sectionIndex.push(q)},za.prototype.addImageSection=function(C){var D=C.image?C.image.name:"";if(D.length!==0){var q=this.getNextImageSectionCharCode();q?(this.text+=String.fromCharCode(q),this.sections.push(Vl.forImage(D)),this.sectionIndex.push(this.sections.length-1)):A("Reached maximum number of images 6401")}else A("Can't add FormattedSection with an empty image.")},za.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ru={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},wo={};function rf(C,D,q,lt,Ct,Rt){if(D.imageName){var jt=lt[D.imageName];return jt?jt.displaySize[0]*D.scale*wa/Rt+Ct:0}var Kt=q[D.fontStack],oe=Kt&&Kt[C];return oe?oe.metrics.advance*D.scale+Ct:0}function nf(C,D,q,lt){var Ct=Math.pow(C-D,2);return lt?C<D?Ct/2:2*Ct:Ct+Math.abs(q)*q}function Hd(C,D,q){var lt=0;return C===10&&(lt-=1e4),q&&(lt+=150),C!==40&&C!==65288||(lt+=50),D!==41&&D!==65289||(lt+=50),lt}function af(C,D,q,lt,Ct,Rt){for(var jt=null,Kt=nf(D,q,Ct,Rt),oe=0,xe=lt;oe<xe.length;oe+=1){var _e=xe[oe],Oe=nf(D-_e.x,q,Ct,Rt)+_e.badness;Oe<=Kt&&(jt=_e,Kt=Oe)}return{index:C,x:D,priorBreak:jt,badness:Kt}}function of(C){return C?of(C.priorBreak).concat(C.index):[]}function Zu(C,D,q,lt,Ct,Rt,jt){if(Rt!=="point")return[];if(!C)return[];for(var Kt=[],oe=function(Tr,kr,Or,Rr,Ur,Wr){for(var Jr=0,gn=0;gn<Tr.length();gn++){var un=Tr.getSection(gn);Jr+=rf(Tr.getCharCode(gn),un,Rr,Ur,kr,Wr)}return Jr/Math.max(1,Math.ceil(Jr/Or))}(C,D,q,lt,Ct,jt),xe=C.text.indexOf("\u200B")>=0,_e=0,Oe=0;Oe<C.length();Oe++){var Be=C.getSection(Oe),Fe=C.getCharCode(Oe);if(ru[Fe]||(_e+=rf(Fe,Be,lt,Ct,D,jt)),Oe<C.length()-1){var er=!((or=Fe)<11904||!(xn["Bopomofo Extended"](or)||xn.Bopomofo(or)||xn["CJK Compatibility Forms"](or)||xn["CJK Compatibility Ideographs"](or)||xn["CJK Compatibility"](or)||xn["CJK Radicals Supplement"](or)||xn["CJK Strokes"](or)||xn["CJK Symbols and Punctuation"](or)||xn["CJK Unified Ideographs Extension A"](or)||xn["CJK Unified Ideographs"](or)||xn["Enclosed CJK Letters and Months"](or)||xn["Halfwidth and Fullwidth Forms"](or)||xn.Hiragana(or)||xn["Ideographic Description Characters"](or)||xn["Kangxi Radicals"](or)||xn["Katakana Phonetic Extensions"](or)||xn.Katakana(or)||xn["Vertical Forms"](or)||xn["Yi Radicals"](or)||xn["Yi Syllables"](or)));(wo[Fe]||er||Be.imageName)&&Kt.push(af(Oe+1,_e,oe,Kt,Hd(Fe,C.getCharCode(Oe+1),er&&xe),!1))}}var or;return of(af(C.length(),_e,oe,Kt,0,!0))}function Xu(C){var D=.5,q=.5;switch(C){case"right":case"top-right":case"bottom-right":D=1;break;case"left":case"top-left":case"bottom-left":D=0}switch(C){case"bottom":case"bottom-right":case"bottom-left":q=1;break;case"top":case"top-right":case"top-left":q=0}return{horizontalAlign:D,verticalAlign:q}}function Vd(C,D,q,lt,Ct){if(lt||Ct)for(var Rt=C[q],jt=Rt.metrics.advance*Rt.scale,Kt=(C[q].x+jt)*lt,oe=D;oe<=q;oe++)C[oe].x-=Kt,C[oe].y+=Ct}function sf(C,D,q,lt,Ct,Rt){var jt,Kt=C.image;if(Kt.content){var oe=Kt.content,xe=Kt.pixelRatio||1;jt=[oe[0]/xe,oe[1]/xe,Kt.displaySize[0]-oe[2]/xe,Kt.displaySize[1]-oe[3]/xe]}var _e,Oe,Be,Fe,er=D.left*Rt,or=D.right*Rt;q==="width"||q==="both"?(Fe=Ct[0]+er-lt[3],Oe=Ct[0]+or+lt[1]):Oe=(Fe=Ct[0]+(er+or-Kt.displaySize[0])/2)+Kt.displaySize[0];var Tr=D.top*Rt,kr=D.bottom*Rt;return q==="height"||q==="both"?(_e=Ct[1]+Tr-lt[0],Be=Ct[1]+kr+lt[2]):Be=(_e=Ct[1]+(Tr+kr-Kt.displaySize[1])/2)+Kt.displaySize[1],{image:Kt,top:_e,right:Oe,bottom:Be,left:Fe,collisionPadding:jt}}wo[10]=!0,wo[32]=!0,wo[38]=!0,wo[40]=!0,wo[41]=!0,wo[43]=!0,wo[45]=!0,wo[47]=!0,wo[173]=!0,wo[183]=!0,wo[8203]=!0,wo[8208]=!0,wo[8211]=!0,wo[8231]=!0;var Wl=function(C){function D(q,lt,Ct,Rt){C.call(this,q,lt),this.angle=Ct,Rt!==void 0&&(this.segment=Rt)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.clone=function(){return new D(this.x,this.y,this.angle,this.segment)},D}(t);wn("Anchor",Wl);var Os=128;function Ku(C,D){var q=D.expression;if(q.kind==="constant")return{kind:"constant",layoutSize:q.evaluate(new ti(C+1))};if(q.kind==="source")return{kind:"source"};for(var lt=q.zoomStops,Ct=q.interpolationType,Rt=0;Rt<lt.length&&lt[Rt]<=C;)Rt++;for(var jt=Rt=Math.max(0,Rt-1);jt<lt.length&&lt[jt]<C+1;)jt++;jt=Math.min(lt.length-1,jt);var Kt=lt[Rt],oe=lt[jt];return q.kind==="composite"?{kind:"composite",minZoom:Kt,maxZoom:oe,interpolationType:Ct}:{kind:"camera",minZoom:Kt,maxZoom:oe,minSize:q.evaluate(new ti(Kt)),maxSize:q.evaluate(new ti(oe)),interpolationType:Ct}}function lf(C,D,q){var lt=D.uSize,Ct=D.uSizeT,Rt=q.lowerSize,jt=q.upperSize;return C.kind==="source"?Rt/Os:C.kind==="composite"?Yr(Rt/Os,jt/Os,Ct):lt}function cf(C,D){var q=0,lt=0;if(C.kind==="constant")lt=C.layoutSize;else if(C.kind!=="source"){var Ct=C.interpolationType,Rt=C.minZoom,jt=C.maxZoom,Kt=Ct?c(Oi.interpolationFactor(Ct,D,Rt,jt),0,1):0;C.kind==="camera"?lt=Yr(C.minSize,C.maxSize,Kt):q=Kt}return{uSizeT:q,uSize:lt}}var Wd=Object.freeze({__proto__:null,getSizeData:Ku,evaluateSizeForFeature:lf,evaluateSizeForZoom:cf,SIZE_PACK_FACTOR:Os});function uf(C,D,q,lt,Ct){if(D.segment===void 0)return!0;for(var Rt=D,jt=D.segment+1,Kt=0;Kt>-q/2;){if(--jt<0)return!1;Kt-=C[jt].dist(Rt),Rt=C[jt]}Kt+=C[jt].dist(C[jt+1]),jt++;for(var oe=[],xe=0;Kt<q/2;){var _e=C[jt-1],Oe=C[jt],Be=C[jt+1];if(!Be)return!1;var Fe=_e.angleTo(Oe)-Oe.angleTo(Be);for(Fe=Math.abs((Fe+3*Math.PI)%(2*Math.PI)-Math.PI),oe.push({distance:Kt,angleDelta:Fe}),xe+=Fe;Kt-oe[0].distance>lt;)xe-=oe.shift().angleDelta;if(xe>Ct)return!1;jt++,Kt+=Oe.dist(Be)}return!0}function hf(C){for(var D=0,q=0;q<C.length-1;q++)D+=C[q].dist(C[q+1]);return D}function ff(C,D,q){return C?.6*D*q:0}function pf(C,D){return Math.max(C?C.right-C.left:0,D?D.right-D.left:0)}function qd(C,D,q,lt,Ct,Rt){for(var jt=ff(q,Ct,Rt),Kt=pf(q,lt)*Rt,oe=0,xe=hf(C)/2,_e=0;_e<C.length-1;_e++){var Oe=C[_e],Be=C[_e+1],Fe=Oe.dist(Be);if(oe+Fe>xe){var er=(xe-oe)/Fe,or=Yr(Oe.x,Be.x,er),Tr=Yr(Oe.y,Be.y,er),kr=new Wl(or,Tr,Be.angleTo(Oe),_e);return kr._round(),!jt||uf(C,kr,Kt,jt,D)?kr:void 0}oe+=Fe}}function Yd(C,D,q,lt,Ct,Rt,jt,Kt,oe){var xe=ff(lt,Rt,jt),_e=pf(lt,Ct),Oe=_e*jt,Be=C[0].x===0||C[0].x===oe||C[0].y===0||C[0].y===oe;return D-Oe<D/4&&(D=Oe+D/4),df(C,Be?D/2*Kt%D:(_e/2+2*Rt)*jt*Kt%D,D,xe,q,Oe,Be,!1,oe)}function df(C,D,q,lt,Ct,Rt,jt,Kt,oe){for(var xe=Rt/2,_e=hf(C),Oe=0,Be=D-q,Fe=[],er=0;er<C.length-1;er++){for(var or=C[er],Tr=C[er+1],kr=or.dist(Tr),Or=Tr.angleTo(or);Be+q<Oe+kr;){var Rr=((Be+=q)-Oe)/kr,Ur=Yr(or.x,Tr.x,Rr),Wr=Yr(or.y,Tr.y,Rr);if(Ur>=0&&Ur<oe&&Wr>=0&&Wr<oe&&Be-xe>=0&&Be+xe<=_e){var Jr=new Wl(Ur,Wr,Or,er);Jr._round(),lt&&!uf(C,Jr,Rt,lt,Ct)||Fe.push(Jr)}}Oe+=kr}return Kt||Fe.length||jt||(Fe=df(C,Oe/2,q,lt,Ct,Rt,jt,!0,oe)),Fe}function gf(C,D,q,lt,Ct){for(var Rt=[],jt=0;jt<C.length;jt++)for(var Kt=C[jt],oe=void 0,xe=0;xe<Kt.length-1;xe++){var _e=Kt[xe],Oe=Kt[xe+1];_e.x<D&&Oe.x<D||(_e.x<D?_e=new t(D,_e.y+(Oe.y-_e.y)*((D-_e.x)/(Oe.x-_e.x)))._round():Oe.x<D&&(Oe=new t(D,_e.y+(Oe.y-_e.y)*((D-_e.x)/(Oe.x-_e.x)))._round()),_e.y<q&&Oe.y<q||(_e.y<q?_e=new t(_e.x+(Oe.x-_e.x)*((q-_e.y)/(Oe.y-_e.y)),q)._round():Oe.y<q&&(Oe=new t(_e.x+(Oe.x-_e.x)*((q-_e.y)/(Oe.y-_e.y)),q)._round()),_e.x>=lt&&Oe.x>=lt||(_e.x>=lt?_e=new t(lt,_e.y+(Oe.y-_e.y)*((lt-_e.x)/(Oe.x-_e.x)))._round():Oe.x>=lt&&(Oe=new t(lt,_e.y+(Oe.y-_e.y)*((lt-_e.x)/(Oe.x-_e.x)))._round()),_e.y>=Ct&&Oe.y>=Ct||(_e.y>=Ct?_e=new t(_e.x+(Oe.x-_e.x)*((Ct-_e.y)/(Oe.y-_e.y)),Ct)._round():Oe.y>=Ct&&(Oe=new t(_e.x+(Oe.x-_e.x)*((Ct-_e.y)/(Oe.y-_e.y)),Ct)._round()),oe&&_e.equals(oe[oe.length-1])||(oe=[_e],Rt.push(oe)),oe.push(Oe)))))}return Rt}var ql=_o;function mf(C,D,q,lt){var Ct=[],Rt=C.image,jt=Rt.pixelRatio,Kt=Rt.paddedRect.w-2*ql,oe=Rt.paddedRect.h-2*ql,xe=C.right-C.left,_e=C.bottom-C.top,Oe=Rt.stretchX||[[0,Kt]],Be=Rt.stretchY||[[0,oe]],Fe=function(ci,_i){return ci+_i[1]-_i[0]},er=Oe.reduce(Fe,0),or=Be.reduce(Fe,0),Tr=Kt-er,kr=oe-or,Or=0,Rr=er,Ur=0,Wr=or,Jr=0,gn=Tr,un=0,yn=kr;if(Rt.content&&lt){var Tn=Rt.content;Or=nu(Oe,0,Tn[0]),Ur=nu(Be,0,Tn[1]),Rr=nu(Oe,Tn[0],Tn[2]),Wr=nu(Be,Tn[1],Tn[3]),Jr=Tn[0]-Or,un=Tn[1]-Ur,gn=Tn[2]-Tn[0]-Rr,yn=Tn[3]-Tn[1]-Wr}var Bn=function(ci,_i,ki,Ti){var yi=iu(ci.stretch-Or,Rr,xe,C.left),la=au(ci.fixed-Jr,gn,ci.stretch,er),Ii=iu(_i.stretch-Ur,Wr,_e,C.top),ga=au(_i.fixed-un,yn,_i.stretch,or),Sa=iu(ki.stretch-Or,Rr,xe,C.left),ka=au(ki.fixed-Jr,gn,ki.stretch,er),Ya=iu(Ti.stretch-Ur,Wr,_e,C.top),Ta=au(Ti.fixed-un,yn,Ti.stretch,or),ha=new t(yi,Ii),Ma=new t(Sa,Ii),ma=new t(Sa,Ya),fa=new t(yi,Ya),Un=new t(la/jt,ga/jt),Zn=new t(ka/jt,Ta/jt),Gi=D*Math.PI/180;if(Gi){var di=Math.sin(Gi),Di=Math.cos(Gi),Ei=[Di,-di,di,Di];ha._matMult(Ei),Ma._matMult(Ei),fa._matMult(Ei),ma._matMult(Ei)}var ei=ci.stretch+ci.fixed,$i=ki.stretch+ki.fixed,Za=_i.stretch+_i.fixed,ko=Ti.stretch+Ti.fixed;return{tl:ha,tr:Ma,bl:fa,br:ma,tex:{x:Rt.paddedRect.x+ql+ei,y:Rt.paddedRect.y+ql+Za,w:$i-ei,h:ko-Za},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Un,pixelOffsetBR:Zn,minFontScaleX:gn/jt/xe,minFontScaleY:yn/jt/_e,isSDF:q}};if(lt&&(Rt.stretchX||Rt.stretchY))for(var Cn=vf(Oe,Tr,er),Fn=vf(Be,kr,or),In=0;In<Cn.length-1;In++)for(var Mn=Cn[In],Vn=Cn[In+1],jn=0;jn<Fn.length-1;jn++){var vi=Fn[jn],Dn=Fn[jn+1];Ct.push(Bn(Mn,vi,Vn,Dn))}else Ct.push(Bn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Kt+1},{fixed:0,stretch:oe+1}));return Ct}function nu(C,D,q){for(var lt=0,Ct=0,Rt=C;Ct<Rt.length;Ct+=1){var jt=Rt[Ct];lt+=Math.max(D,Math.min(q,jt[1]))-Math.max(D,Math.min(q,jt[0]))}return lt}function vf(C,D,q){for(var lt=[{fixed:-ql,stretch:0}],Ct=0,Rt=C;Ct<Rt.length;Ct+=1){var jt=Rt[Ct],Kt=jt[0],oe=jt[1],xe=lt[lt.length-1];lt.push({fixed:Kt-xe.stretch,stretch:xe.stretch}),lt.push({fixed:Kt-xe.stretch,stretch:xe.stretch+(oe-Kt)})}return lt.push({fixed:D+ql,stretch:q}),lt}function iu(C,D,q,lt){return C/D*q+lt}function au(C,D,q,lt){return C-D*q/lt}var ou=function(C,D,q,lt,Ct,Rt,jt,Kt,oe,xe){if(this.boxStartIndex=C.length,oe){var _e=Rt.top,Oe=Rt.bottom,Be=Rt.collisionPadding;Be&&(_e-=Be[1],Oe+=Be[3]);var Fe=Oe-_e;Fe>0&&(Fe=Math.max(10,Fe),this.circleDiameter=Fe)}else{var er=Rt.top*jt-Kt,or=Rt.bottom*jt+Kt,Tr=Rt.left*jt-Kt,kr=Rt.right*jt+Kt,Or=Rt.collisionPadding;if(Or&&(Tr-=Or[0]*jt,er-=Or[1]*jt,kr+=Or[2]*jt,or+=Or[3]*jt),xe){var Rr=new t(Tr,er),Ur=new t(kr,er),Wr=new t(Tr,or),Jr=new t(kr,or),gn=xe*Math.PI/180;Rr._rotate(gn),Ur._rotate(gn),Wr._rotate(gn),Jr._rotate(gn),Tr=Math.min(Rr.x,Ur.x,Wr.x,Jr.x),kr=Math.max(Rr.x,Ur.x,Wr.x,Jr.x),er=Math.min(Rr.y,Ur.y,Wr.y,Jr.y),or=Math.max(Rr.y,Ur.y,Wr.y,Jr.y)}C.emplaceBack(D.x,D.y,Tr,er,kr,or,q,lt,Ct)}this.boxEndIndex=C.length},Yl=function(C,D){if(C===void 0&&(C=[]),D===void 0&&(D=Zd),this.data=C,this.length=this.data.length,this.compare=D,this.length>0)for(var q=(this.length>>1)-1;q>=0;q--)this._down(q)};function Zd(C,D){return C<D?-1:C>D?1:0}function Xd(C,D,q){D===void 0&&(D=1),q===void 0&&(q=!1);for(var lt=1/0,Ct=1/0,Rt=-1/0,jt=-1/0,Kt=C[0],oe=0;oe<Kt.length;oe++){var xe=Kt[oe];(!oe||xe.x<lt)&&(lt=xe.x),(!oe||xe.y<Ct)&&(Ct=xe.y),(!oe||xe.x>Rt)&&(Rt=xe.x),(!oe||xe.y>jt)&&(jt=xe.y)}var _e=Rt-lt,Oe=jt-Ct,Be=Math.min(_e,Oe),Fe=Be/2,er=new Yl([],Kd);if(Be===0)return new t(lt,Ct);for(var or=lt;or<Rt;or+=Be)for(var Tr=Ct;Tr<jt;Tr+=Be)er.push(new Zl(or+Fe,Tr+Fe,Fe,C));for(var kr=function(Ur){for(var Wr=0,Jr=0,gn=0,un=Ur[0],yn=0,Tn=un.length,Bn=Tn-1;yn<Tn;Bn=yn++){var Cn=un[yn],Fn=un[Bn],In=Cn.x*Fn.y-Fn.x*Cn.y;Jr+=(Cn.x+Fn.x)*In,gn+=(Cn.y+Fn.y)*In,Wr+=3*In}return new Zl(Jr/Wr,gn/Wr,0,Ur)}(C),Or=er.length;er.length;){var Rr=er.pop();(Rr.d>kr.d||!kr.d)&&(kr=Rr,q&&console.log("found best %d after %d probes",Math.round(1e4*Rr.d)/1e4,Or)),Rr.max-kr.d<=D||(Fe=Rr.h/2,er.push(new Zl(Rr.p.x-Fe,Rr.p.y-Fe,Fe,C)),er.push(new Zl(Rr.p.x+Fe,Rr.p.y-Fe,Fe,C)),er.push(new Zl(Rr.p.x-Fe,Rr.p.y+Fe,Fe,C)),er.push(new Zl(Rr.p.x+Fe,Rr.p.y+Fe,Fe,C)),Or+=4)}return q&&(console.log("num probes: "+Or),console.log("best distance: "+kr.d)),kr.p}function Kd(C,D){return D.max-C.max}function Zl(C,D,q,lt){this.p=new t(C,D),this.h=q,this.d=function(Ct,Rt){for(var jt=!1,Kt=1/0,oe=0;oe<Rt.length;oe++)for(var xe=Rt[oe],_e=0,Oe=xe.length,Be=Oe-1;_e<Oe;Be=_e++){var Fe=xe[_e],er=xe[Be];Fe.y>Ct.y!=er.y>Ct.y&&Ct.x<(er.x-Fe.x)*(Ct.y-Fe.y)/(er.y-Fe.y)+Fe.x&&(jt=!jt),Kt=Math.min(Kt,Cl(Ct,Fe,er))}return(jt?1:-1)*Math.sqrt(Kt)}(this.p,lt),this.max=this.d+this.h*Math.SQRT2}Yl.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},Yl.prototype.pop=function(){if(this.length!==0){var C=this.data[0],D=this.data.pop();return this.length--,this.length>0&&(this.data[0]=D,this._down(0)),C}},Yl.prototype.peek=function(){return this.data[0]},Yl.prototype._up=function(C){for(var D=this.data,q=this.compare,lt=D[C];C>0;){var Ct=C-1>>1,Rt=D[Ct];if(q(lt,Rt)>=0)break;D[C]=Rt,C=Ct}D[C]=lt},Yl.prototype._down=function(C){for(var D=this.data,q=this.compare,lt=this.length>>1,Ct=D[C];C<lt;){var Rt=1+(C<<1),jt=D[Rt],Kt=Rt+1;if(Kt<this.length&&q(D[Kt],jt)<0&&(Rt=Kt,jt=D[Kt]),q(jt,Ct)>=0)break;D[C]=jt,C=Rt}D[C]=Ct};var Xl=7,Ju=Number.POSITIVE_INFINITY;function yf(C,D){return D[1]!==Ju?function(q,lt,Ct){var Rt=0,jt=0;switch(lt=Math.abs(lt),Ct=Math.abs(Ct),q){case"top-right":case"top-left":case"top":jt=Ct-Xl;break;case"bottom-right":case"bottom-left":case"bottom":jt=-Ct+Xl}switch(q){case"top-right":case"bottom-right":case"right":Rt=-lt;break;case"top-left":case"bottom-left":case"left":Rt=lt}return[Rt,jt]}(C,D[0],D[1]):function(q,lt){var Ct=0,Rt=0;lt<0&&(lt=0);var jt=lt/Math.sqrt(2);switch(q){case"top-right":case"top-left":Rt=jt-Xl;break;case"bottom-right":case"bottom-left":Rt=-jt+Xl;break;case"bottom":Rt=-lt+Xl;break;case"top":Rt=lt-Xl}switch(q){case"top-right":case"bottom-right":Ct=-jt;break;case"top-left":case"bottom-left":Ct=jt;break;case"left":Ct=lt;break;case"right":Ct=-lt}return[Ct,Rt]}(C,D[0])}function Qu(C){switch(C){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var wc=255,kl=wc*Os;function xf(C,D,q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe,er){var or=function(Ur,Wr,Jr,gn,un,yn,Tn,Bn){for(var Cn=gn.layout.get("text-rotate").evaluate(yn,{})*Math.PI/180,Fn=[],In=0,Mn=Wr.positionedLines;In<Mn.length;In+=1)for(var Vn=Mn[In],jn=0,vi=Vn.positionedGlyphs;jn<vi.length;jn+=1){var Dn=vi[jn];if(Dn.rect){var ci=Dn.rect||{},_i=tf+1,ki=!0,Ti=1,yi=0,la=(un||Bn)&&Dn.vertical,Ii=Dn.metrics.advance*Dn.scale/2;if(Bn&&Wr.verticalizable){var ga=(Dn.scale-1)*wa,Sa=(wa-Dn.metrics.width*Dn.scale)/2;yi=Vn.lineOffset/2-(Dn.imageName?-Sa:ga)}if(Dn.imageName){var ka=Tn[Dn.imageName];ki=ka.sdf,Ti=ka.pixelRatio,_i=_o/Ti}var Ya=un?[Dn.x+Ii,Dn.y]:[0,0],Ta=un?[0,0]:[Dn.x+Ii+Jr[0],Dn.y+Jr[1]-yi],ha=[0,0];la&&(ha=Ta,Ta=[0,0]);var Ma=(Dn.metrics.left-_i)*Dn.scale-Ii+Ta[0],ma=(-Dn.metrics.top-_i)*Dn.scale+Ta[1],fa=Ma+ci.w*Dn.scale/Ti,Un=ma+ci.h*Dn.scale/Ti,Zn=new t(Ma,ma),Gi=new t(fa,ma),di=new t(Ma,Un),Di=new t(fa,Un);if(la){var Ei=new t(-Ii,Ii-_c),ei=-Math.PI/2,$i=wa/2-Ii,Za=Dn.imageName?$i:0,ko=new t(5-_c-$i,-Za),Na=new(Function.prototype.bind.apply(t,[null].concat(ha)));Zn._rotateAround(ei,Ei)._add(ko)._add(Na),Gi._rotateAround(ei,Ei)._add(ko)._add(Na),di._rotateAround(ei,Ei)._add(ko)._add(Na),Di._rotateAround(ei,Ei)._add(ko)._add(Na)}if(Cn){var Rs=Math.sin(Cn),ol=Math.cos(Cn),va=[ol,-Rs,Rs,ol];Zn._matMult(va),Gi._matMult(va),di._matMult(va),Di._matMult(va)}var Ps=new t(0,0),vs=new t(0,0);Fn.push({tl:Zn,tr:Gi,bl:di,br:Di,tex:ci,writingMode:Wr.writingMode,glyphOffset:Ya,sectionIndex:Dn.sectionIndex,isSDF:ki,pixelOffsetTL:Ps,pixelOffsetBR:vs,minFontScaleX:0,minFontScaleY:0})}}return Fn}(0,q,Kt,Ct,Rt,jt,lt,C.allowVerticalPlacement),Tr=C.textSizeData,kr=null;Tr.kind==="source"?(kr=[Os*Ct.layout.get("text-size").evaluate(jt,{})])[0]>kl&&A(C.layerIds[0]+': Value for "text-size" is >= '+wc+'. Reduce your "text-size".'):Tr.kind==="composite"&&((kr=[Os*Fe.compositeTextSizes[0].evaluate(jt,{},er),Os*Fe.compositeTextSizes[1].evaluate(jt,{},er)])[0]>kl||kr[1]>kl)&&A(C.layerIds[0]+': Value for "text-size" is >= '+wc+'. Reduce your "text-size".'),C.addSymbols(C.text,or,kr,Kt,Rt,jt,xe,D,oe.lineStartIndex,oe.lineLength,Be,er);for(var Or=0,Rr=_e;Or<Rr.length;Or+=1)Oe[Rr[Or]]=C.text.placedSymbolArray.length-1;return 4*or.length}function bf(C){for(var D in C)return C[D];return null}function Jd(C,D,q,lt){var Ct=C.compareText;if(D in Ct){for(var Rt=Ct[D],jt=Rt.length-1;jt>=0;jt--)if(lt.dist(Rt[jt])<q)return!0}else Ct[D]=[];return Ct[D].push(lt),!1}var Qd=$l.VectorTileFeature.types,t0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function su(C,D,q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be){var Fe=Kt?Math.min(kl,Math.round(Kt[0])):0,er=Kt?Math.min(kl,Math.round(Kt[1])):0;C.emplaceBack(D,q,Math.round(32*lt),Math.round(32*Ct),Rt,jt,(Fe<<1)+(oe?1:0),er,16*xe,16*_e,256*Oe,256*Be)}function th(C,D,q){C.emplaceBack(D.x,D.y,q),C.emplaceBack(D.x,D.y,q),C.emplaceBack(D.x,D.y,q),C.emplaceBack(D.x,D.y,q)}function e0(C){for(var D=0,q=C.sections;D<q.length;D+=1)if(La(q[D].text))return!0;return!1}var Kl=function(C){this.layoutVertexArray=new F,this.indexArray=new Q,this.programConfigurations=C,this.segments=new vr,this.dynamicLayoutVertexArray=new H,this.opacityVertexArray=new $,this.placedSymbolArray=new Se};Kl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Kl.prototype.upload=function(C,D,q,lt){this.isEmpty()||(q&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Wu.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,D),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,Cd.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,t0,!0),this.opacityVertexBuffer.itemSize=1),(q||lt)&&this.programConfigurations.upload(C))},Kl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},wn("SymbolBuffers",Kl);var kc=function(C,D,q){this.layoutVertexArray=new C,this.layoutAttributes=D,this.indexArray=new q,this.segments=new vr,this.collisionVertexArray=new N};kc.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,Ld.members,!0)},kc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},wn("CollisionBuffers",kc);var li=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(jt){return jt.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Du([]),this.placementViewportMatrix=Du([]);var D=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ku(this.zoom,D["text-size"]),this.iconSizeData=Ku(this.zoom,D["icon-size"]);var q=this.layers[0].layout,lt=q.get("symbol-sort-key"),Ct=q.get("symbol-z-order");this.sortFeaturesByKey=Ct!=="viewport-y"&&lt.constantOr(1)!==void 0;var Rt=Ct==="viewport-y"||Ct==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Rt&&(q.get("text-allow-overlap")||q.get("icon-allow-overlap")||q.get("text-ignore-placement")||q.get("icon-ignore-placement")),q.get("symbol-placement")==="point"&&(this.writingModes=q.get("text-writing-mode").map(function(jt){return Uo[jt]})),this.stateDependentLayerIds=this.layers.filter(function(jt){return jt.isStateDependent()}).map(function(jt){return jt.id}),this.sourceID=C.sourceID};li.prototype.createArrays=function(){this.text=new Kl(new mi(Wu.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new Kl(new mi(Wu.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new Ee,this.lineVertexArray=new rr,this.symbolInstances=new Ne},li.prototype.calculateGlyphDependencies=function(C,D,q,lt,Ct){for(var Rt=0;Rt<C.length;Rt++)if(D[C.charCodeAt(Rt)]=!0,(q||lt)&&Ct){var jt=yc[C.charAt(Rt)];jt&&(D[jt.charCodeAt(0)]=!0)}},li.prototype.populate=function(C,D,q){var lt=this.layers[0],Ct=lt.layout,Rt=Ct.get("text-font"),jt=Ct.get("text-field"),Kt=Ct.get("icon-image"),oe=(jt.value.kind!=="constant"||jt.value.value instanceof Er&&!jt.value.value.isEmpty()||jt.value.value.toString().length>0)&&(Rt.value.kind!=="constant"||Rt.value.value.length>0),xe=Kt.value.kind!=="constant"||!!Kt.value.value||Object.keys(Kt.parameters).length>0,_e=Ct.get("symbol-sort-key");if(this.features=[],oe||xe){for(var Oe=D.iconDependencies,Be=D.glyphDependencies,Fe=D.availableImages,er=new ti(this.zoom),or=0,Tr=C;or<Tr.length;or+=1){var kr=Tr[or],Or=kr.feature,Rr=kr.id,Ur=kr.index,Wr=kr.sourceLayerIndex,Jr=lt._featureFilter.needGeometry,gn={type:Or.type,id:Rr,properties:Or.properties,geometry:Jr?Fa(Or):[]};if(lt._featureFilter.filter(er,gn,q)){Jr||(gn.geometry=Fa(Or));var un=void 0;if(oe){var yn=lt.getValueAndResolveTokens("text-field",gn,q,Fe),Tn=Er.factory(yn);e0(Tn)&&(this.hasRTLText=!0),(!this.hasRTLText||ro()==="unavailable"||this.hasRTLText&&Ai.isParsed())&&(un=Sd(Tn,lt,gn))}var Bn=void 0;if(xe){var Cn=lt.getValueAndResolveTokens("icon-image",gn,q,Fe);Bn=Cn instanceof _r?Cn:_r.fromString(Cn)}if(un||Bn){var Fn=this.sortFeaturesByKey?_e.evaluate(gn,{},q):void 0,In={id:Rr,text:un,icon:Bn,index:Ur,sourceLayerIndex:Wr,geometry:Fa(Or),properties:Or.properties,type:Qd[Or.type],sortKey:Fn};if(this.features.push(In),Bn&&(Oe[Bn.name]=!0),un){var Mn=Rt.evaluate(gn,{},q).join(","),Vn=Ct.get("text-rotation-alignment")==="map"&&Ct.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Uo.vertical)>=0;for(var jn=0,vi=un.sections;jn<vi.length;jn+=1){var Dn=vi[jn];if(Dn.image)Oe[Dn.image.name]=!0;else{var ci=Ha(un.toString()),_i=Dn.fontStack||Mn,ki=Be[_i]=Be[_i]||{};this.calculateGlyphDependencies(Dn.text,ki,Vn,this.allowVerticalPlacement,ci)}}}}}}Ct.get("symbol-placement")==="line"&&(this.features=function(Ti){var yi={},la={},Ii=[],ga=0;function Sa(Di){Ii.push(Ti[Di]),ga++}function ka(Di,Ei,ei){var $i=la[Di];return delete la[Di],la[Ei]=$i,Ii[$i].geometry[0].pop(),Ii[$i].geometry[0]=Ii[$i].geometry[0].concat(ei[0]),$i}function Ya(Di,Ei,ei){var $i=yi[Ei];return delete yi[Ei],yi[Di]=$i,Ii[$i].geometry[0].shift(),Ii[$i].geometry[0]=ei[0].concat(Ii[$i].geometry[0]),$i}function Ta(Di,Ei,ei){var $i=ei?Ei[0][Ei[0].length-1]:Ei[0][0];return Di+":"+$i.x+":"+$i.y}for(var ha=0;ha<Ti.length;ha++){var Ma=Ti[ha],ma=Ma.geometry,fa=Ma.text?Ma.text.toString():null;if(fa){var Un=Ta(fa,ma),Zn=Ta(fa,ma,!0);if(Un in la&&Zn in yi&&la[Un]!==yi[Zn]){var Gi=Ya(Un,Zn,ma),di=ka(Un,Zn,Ii[Gi].geometry);delete yi[Un],delete la[Zn],la[Ta(fa,Ii[di].geometry,!0)]=di,Ii[Gi].geometry=null}else Un in la?ka(Un,Zn,ma):Zn in yi?Ya(Un,Zn,ma):(Sa(ha),yi[Un]=ga-1,la[Zn]=ga-1)}else Sa(ha)}return Ii.filter(function(Di){return Di.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ti,yi){return Ti.sortKey-yi.sortKey})}},li.prototype.update=function(C,D,q){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(C,D,this.layers,q),this.icon.programConfigurations.updatePaintArrays(C,D,this.layers,q))},li.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},li.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},li.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},li.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},li.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},li.prototype.addToLineVertexArray=function(C,D){var q=this.lineVertexArray.length;if(C.segment!==void 0){for(var lt=C.dist(D[C.segment+1]),Ct=C.dist(D[C.segment]),Rt={},jt=C.segment+1;jt<D.length;jt++)Rt[jt]={x:D[jt].x,y:D[jt].y,tileUnitDistanceFromAnchor:lt},jt<D.length-1&&(lt+=D[jt+1].dist(D[jt]));for(var Kt=C.segment||0;Kt>=0;Kt--)Rt[Kt]={x:D[Kt].x,y:D[Kt].y,tileUnitDistanceFromAnchor:Ct},Kt>0&&(Ct+=D[Kt-1].dist(D[Kt]));for(var oe=0;oe<D.length;oe++){var xe=Rt[oe];this.lineVertexArray.emplaceBack(xe.x,xe.y,xe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:q,lineLength:this.lineVertexArray.length-q}},li.prototype.addSymbols=function(C,D,q,lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe){for(var Be=C.indexArray,Fe=C.layoutVertexArray,er=C.segments.prepareSegment(4*D.length,Fe,Be,Rt.sortKey),or=this.glyphOffsetArray.length,Tr=er.vertexLength,kr=this.allowVerticalPlacement&&jt===Uo.vertical?Math.PI/2:0,Or=Rt.text&&Rt.text.sections,Rr=0;Rr<D.length;Rr++){var Ur=D[Rr],Wr=Ur.tl,Jr=Ur.tr,gn=Ur.bl,un=Ur.br,yn=Ur.tex,Tn=Ur.pixelOffsetTL,Bn=Ur.pixelOffsetBR,Cn=Ur.minFontScaleX,Fn=Ur.minFontScaleY,In=Ur.glyphOffset,Mn=Ur.isSDF,Vn=Ur.sectionIndex,jn=er.vertexLength,vi=In[1];su(Fe,Kt.x,Kt.y,Wr.x,vi+Wr.y,yn.x,yn.y,q,Mn,Tn.x,Tn.y,Cn,Fn),su(Fe,Kt.x,Kt.y,Jr.x,vi+Jr.y,yn.x+yn.w,yn.y,q,Mn,Bn.x,Tn.y,Cn,Fn),su(Fe,Kt.x,Kt.y,gn.x,vi+gn.y,yn.x,yn.y+yn.h,q,Mn,Tn.x,Bn.y,Cn,Fn),su(Fe,Kt.x,Kt.y,un.x,vi+un.y,yn.x+yn.w,yn.y+yn.h,q,Mn,Bn.x,Bn.y,Cn,Fn),th(C.dynamicLayoutVertexArray,Kt,kr),Be.emplaceBack(jn,jn+1,jn+2),Be.emplaceBack(jn+1,jn+2,jn+3),er.vertexLength+=4,er.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(In[0]),Rr!==D.length-1&&Vn===D[Rr+1].sectionIndex||C.programConfigurations.populatePaintArrays(Fe.length,Rt,Rt.index,{},Oe,Or&&Or[Vn])}C.placedSymbolArray.emplaceBack(Kt.x,Kt.y,or,this.glyphOffsetArray.length-or,Tr,oe,xe,Kt.segment,q?q[0]:0,q?q[1]:0,lt[0],lt[1],jt,0,!1,0,_e)},li.prototype._addCollisionDebugVertex=function(C,D,q,lt,Ct,Rt){return D.emplaceBack(0,0),C.emplaceBack(q.x,q.y,lt,Ct,Math.round(Rt.x),Math.round(Rt.y))},li.prototype.addCollisionDebugVertices=function(C,D,q,lt,Ct,Rt,jt){var Kt=Ct.segments.prepareSegment(4,Ct.layoutVertexArray,Ct.indexArray),oe=Kt.vertexLength,xe=Ct.layoutVertexArray,_e=Ct.collisionVertexArray,Oe=jt.anchorX,Be=jt.anchorY;this._addCollisionDebugVertex(xe,_e,Rt,Oe,Be,new t(C,D)),this._addCollisionDebugVertex(xe,_e,Rt,Oe,Be,new t(q,D)),this._addCollisionDebugVertex(xe,_e,Rt,Oe,Be,new t(q,lt)),this._addCollisionDebugVertex(xe,_e,Rt,Oe,Be,new t(C,lt)),Kt.vertexLength+=4;var Fe=Ct.indexArray;Fe.emplaceBack(oe,oe+1),Fe.emplaceBack(oe+1,oe+2),Fe.emplaceBack(oe+2,oe+3),Fe.emplaceBack(oe+3,oe),Kt.primitiveLength+=4},li.prototype.addDebugCollisionBoxes=function(C,D,q,lt){for(var Ct=C;Ct<D;Ct++){var Rt=this.collisionBoxArray.get(Ct),jt=Rt.x1,Kt=Rt.y1,oe=Rt.x2,xe=Rt.y2;this.addCollisionDebugVertices(jt,Kt,oe,xe,lt?this.textCollisionBox:this.iconCollisionBox,Rt.anchorPoint,q)}},li.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new kc(ft,qh.members,Ut),this.iconCollisionBox=new kc(ft,qh.members,Ut);for(var C=0;C<this.symbolInstances.length;C++){var D=this.symbolInstances.get(C);this.addDebugCollisionBoxes(D.textBoxStartIndex,D.textBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.iconBoxStartIndex,D.iconBoxEndIndex,D,!1),this.addDebugCollisionBoxes(D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex,D,!1)}},li.prototype._deserializeCollisionBoxesForSymbol=function(C,D,q,lt,Ct,Rt,jt,Kt,oe){for(var xe={},_e=D;_e<q;_e++){var Oe=C.get(_e);xe.textBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},xe.textFeatureIndex=Oe.featureIndex;break}for(var Be=lt;Be<Ct;Be++){var Fe=C.get(Be);xe.verticalTextBox={x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,anchorPointX:Fe.anchorPointX,anchorPointY:Fe.anchorPointY},xe.verticalTextFeatureIndex=Fe.featureIndex;break}for(var er=Rt;er<jt;er++){var or=C.get(er);xe.iconBox={x1:or.x1,y1:or.y1,x2:or.x2,y2:or.y2,anchorPointX:or.anchorPointX,anchorPointY:or.anchorPointY},xe.iconFeatureIndex=or.featureIndex;break}for(var Tr=Kt;Tr<oe;Tr++){var kr=C.get(Tr);xe.verticalIconBox={x1:kr.x1,y1:kr.y1,x2:kr.x2,y2:kr.y2,anchorPointX:kr.anchorPointX,anchorPointY:kr.anchorPointY},xe.verticalIconFeatureIndex=kr.featureIndex;break}return xe},li.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var D=0;D<this.symbolInstances.length;D++){var q=this.symbolInstances.get(D);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,q.textBoxStartIndex,q.textBoxEndIndex,q.verticalTextBoxStartIndex,q.verticalTextBoxEndIndex,q.iconBoxStartIndex,q.iconBoxEndIndex,q.verticalIconBoxStartIndex,q.verticalIconBoxEndIndex))}},li.prototype.hasTextData=function(){return this.text.segments.get().length>0},li.prototype.hasIconData=function(){return this.icon.segments.get().length>0},li.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},li.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},li.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},li.prototype.addIndicesForPlacedSymbol=function(C,D){for(var q=C.placedSymbolArray.get(D),lt=q.vertexStartIndex+4*q.numGlyphs,Ct=q.vertexStartIndex;Ct<lt;Ct+=4)C.indexArray.emplaceBack(Ct,Ct+1,Ct+2),C.indexArray.emplaceBack(Ct+1,Ct+2,Ct+3)},li.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var D=Math.sin(C),q=Math.cos(C),lt=[],Ct=[],Rt=[],jt=0;jt<this.symbolInstances.length;++jt){Rt.push(jt);var Kt=this.symbolInstances.get(jt);lt.push(0|Math.round(D*Kt.anchorX+q*Kt.anchorY)),Ct.push(Kt.featureIndex)}return Rt.sort(function(oe,xe){return lt[oe]-lt[xe]||Ct[xe]-Ct[oe]}),Rt},li.prototype.addToSortKeyRanges=function(C,D){var q=this.sortKeyRanges[this.sortKeyRanges.length-1];q&&q.sortKey===D?q.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:D,symbolInstanceStart:C,symbolInstanceEnd:C+1})},li.prototype.sortFeatures=function(C){var D=this;if(this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var q=0,lt=this.symbolInstanceIndexes;q<lt.length;q+=1){var Ct=lt[q],Rt=this.symbolInstances.get(Ct);this.featureSortOrder.push(Rt.featureIndex),[Rt.rightJustifiedTextSymbolIndex,Rt.centerJustifiedTextSymbolIndex,Rt.leftJustifiedTextSymbolIndex].forEach(function(jt,Kt,oe){jt>=0&&oe.indexOf(jt)===Kt&&D.addIndicesForPlacedSymbol(D.text,jt)}),Rt.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Rt.verticalPlacedTextSymbolIndex),Rt.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Rt.placedIconSymbolIndex),Rt.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Rt.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},wn("SymbolBucket",li,{omit:["layers","collisionBoxArray","features","compareText"]}),li.MAX_GLYPHS=65535,li.addDynamicAttributes=th;var r0=new ta({"symbol-placement":new An(Pt.layout_symbol["symbol-placement"]),"symbol-spacing":new An(Pt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new An(Pt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ln(Pt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new An(Pt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new An(Pt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new An(Pt.layout_symbol["icon-ignore-placement"]),"icon-optional":new An(Pt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new An(Pt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ln(Pt.layout_symbol["icon-size"]),"icon-text-fit":new An(Pt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new An(Pt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ln(Pt.layout_symbol["icon-image"]),"icon-rotate":new Ln(Pt.layout_symbol["icon-rotate"]),"icon-padding":new An(Pt.layout_symbol["icon-padding"]),"icon-keep-upright":new An(Pt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ln(Pt.layout_symbol["icon-offset"]),"icon-anchor":new Ln(Pt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new An(Pt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new An(Pt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new An(Pt.layout_symbol["text-rotation-alignment"]),"text-field":new Ln(Pt.layout_symbol["text-field"]),"text-font":new Ln(Pt.layout_symbol["text-font"]),"text-size":new Ln(Pt.layout_symbol["text-size"]),"text-max-width":new Ln(Pt.layout_symbol["text-max-width"]),"text-line-height":new An(Pt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ln(Pt.layout_symbol["text-letter-spacing"]),"text-justify":new Ln(Pt.layout_symbol["text-justify"]),"text-radial-offset":new Ln(Pt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new An(Pt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ln(Pt.layout_symbol["text-anchor"]),"text-max-angle":new An(Pt.layout_symbol["text-max-angle"]),"text-writing-mode":new An(Pt.layout_symbol["text-writing-mode"]),"text-rotate":new Ln(Pt.layout_symbol["text-rotate"]),"text-padding":new An(Pt.layout_symbol["text-padding"]),"text-keep-upright":new An(Pt.layout_symbol["text-keep-upright"]),"text-transform":new Ln(Pt.layout_symbol["text-transform"]),"text-offset":new Ln(Pt.layout_symbol["text-offset"]),"text-allow-overlap":new An(Pt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new An(Pt.layout_symbol["text-ignore-placement"]),"text-optional":new An(Pt.layout_symbol["text-optional"])}),eh={paint:new ta({"icon-opacity":new Ln(Pt.paint_symbol["icon-opacity"]),"icon-color":new Ln(Pt.paint_symbol["icon-color"]),"icon-halo-color":new Ln(Pt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ln(Pt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ln(Pt.paint_symbol["icon-halo-blur"]),"icon-translate":new An(Pt.paint_symbol["icon-translate"]),"icon-translate-anchor":new An(Pt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ln(Pt.paint_symbol["text-opacity"]),"text-color":new Ln(Pt.paint_symbol["text-color"],{runtimeType:Pe,getOverride:function(C){return C.textColor},hasOverride:function(C){return!!C.textColor}}),"text-halo-color":new Ln(Pt.paint_symbol["text-halo-color"]),"text-halo-width":new Ln(Pt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ln(Pt.paint_symbol["text-halo-blur"]),"text-translate":new An(Pt.paint_symbol["text-translate"]),"text-translate-anchor":new An(Pt.paint_symbol["text-translate-anchor"])}),layout:r0},Jl=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:we,this.defaultValue=C};Jl.prototype.evaluate=function(C){if(C.formattedSection){var D=this.defaultValue.property.overrides;if(D&&D.hasOverride(C.formattedSection))return D.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},Jl.prototype.eachChild=function(C){this.defaultValue.isConstant()||C(this.defaultValue.value._styleExpression.expression)},Jl.prototype.outputDefined=function(){return!1},Jl.prototype.serialize=function(){return null},wn("FormatSectionOverride",Jl,{omit:["defaultValue"]});var n0=function(C){function D(q){C.call(this,q,eh)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(q,lt){if(C.prototype.recalculate.call(this,q,lt),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Ct=this.layout.get("text-writing-mode");if(Ct){for(var Rt=[],jt=0,Kt=Ct;jt<Kt.length;jt+=1){var oe=Kt[jt];Rt.indexOf(oe)<0&&Rt.push(oe)}this.layout._values["text-writing-mode"]=Rt}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},D.prototype.getValueAndResolveTokens=function(q,lt,Ct,Rt){var jt=this.layout.get(q).evaluate(lt,{},Ct,Rt),Kt=this._unevaluatedLayout._values[q];return Kt.isDataDriven()||cs(Kt.value)||!jt?jt:function(oe,xe){return xe.replace(/{([^{}]+)}/g,function(_e,Oe){return Oe in oe?String(oe[Oe]):""})}(lt.properties,jt)},D.prototype.createBucket=function(q){return new li(q)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype._setPaintOverrides=function(){for(var q=0,lt=eh.paint.overridableProperties;q<lt.length;q+=1){var Ct=lt[q];if(D.hasPaintOverride(this.layout,Ct)){var Rt,jt=this.paint.get(Ct),Kt=new Jl(jt),oe=new ws(Kt,jt.property.specification);Rt=jt.value.kind==="constant"||jt.value.kind==="source"?new Lo("source",oe):new fo("composite",oe,jt.value.zoomStops,jt.value._interpolationType),this.paint._values[Ct]=new Ri(jt.property,Rt,jt.parameters)}}},D.prototype._handleOverridablePaintPropertyUpdate=function(q,lt,Ct){return!(!this.layout||lt.isDataDriven()||Ct.isDataDriven())&&D.hasPaintOverride(this.layout,q)},D.hasPaintOverride=function(q,lt){var Ct=q.get("text-field"),Rt=eh.paint.properties[lt],jt=!1,Kt=function(_e){for(var Oe=0,Be=_e;Oe<Be.length;Oe+=1){var Fe=Be[Oe];if(Rt.overrides&&Rt.overrides.hasOverride(Fe))return void(jt=!0)}};if(Ct.value.kind==="constant"&&Ct.value.value instanceof Er)Kt(Ct.value.value.sections);else if(Ct.value.kind==="source"){var oe=function(_e){if(!jt)if(_e instanceof tn&&en(_e.value)===Ge){var Oe=_e.value;Kt(Oe.sections)}else _e instanceof nr?Kt(_e.sections):_e.eachChild(oe)},xe=Ct.value;xe._styleExpression&&oe(xe._styleExpression.expression)}return jt},D}(ea),i0={paint:new ta({"background-color":new An(Pt.paint_background["background-color"]),"background-pattern":new ua(Pt.paint_background["background-pattern"]),"background-opacity":new An(Pt.paint_background["background-opacity"])})},a0=function(C){function D(q){C.call(this,q,i0)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D}(ea),o0={paint:new ta({"raster-opacity":new An(Pt.paint_raster["raster-opacity"]),"raster-hue-rotate":new An(Pt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new An(Pt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new An(Pt.paint_raster["raster-brightness-max"]),"raster-saturation":new An(Pt.paint_raster["raster-saturation"]),"raster-contrast":new An(Pt.paint_raster["raster-contrast"]),"raster-resampling":new An(Pt.paint_raster["raster-resampling"]),"raster-fade-duration":new An(Pt.paint_raster["raster-fade-duration"])})},s0=function(C){function D(q){C.call(this,q,o0)}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D}(ea),l0=function(C){function D(q){C.call(this,q,{}),this.implementation=q}return C&&(D.__proto__=C),D.prototype=Object.create(C&&C.prototype),D.prototype.constructor=D,D.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},D.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},D.prototype.recalculate=function(){},D.prototype.updateTransitions=function(){},D.prototype.hasTransition=function(){},D.prototype.serialize=function(){},D.prototype.onAdd=function(q){this.implementation.onAdd&&this.implementation.onAdd(q,q.painter.context.gl)},D.prototype.onRemove=function(q){this.implementation.onRemove&&this.implementation.onRemove(q,q.painter.context.gl)},D}(ea),c0={circle:qp,heatmap:Zp,hillshade:Kp,fill:pd,"fill-extrusion":_d,line:Ad,symbol:n0,background:a0,raster:s0},_f=self.HTMLImageElement,wf=self.HTMLCanvasElement,kf=self.HTMLVideoElement,Tf=self.ImageData,lu=self.ImageBitmap,El=function(C,D,q,lt){this.context=C,this.format=q,this.texture=C.gl.createTexture(),this.update(D,lt)};El.prototype.update=function(C,D,q){var lt=C.width,Ct=C.height,Rt=!(this.size&&this.size[0]===lt&&this.size[1]===Ct||q),jt=this.context,Kt=jt.gl;if(this.useMipmap=Boolean(D&&D.useMipmap),Kt.bindTexture(Kt.TEXTURE_2D,this.texture),jt.pixelStoreUnpackFlipY.set(!1),jt.pixelStoreUnpack.set(1),jt.pixelStoreUnpackPremultiplyAlpha.set(this.format===Kt.RGBA&&(!D||D.premultiply!==!1)),Rt)this.size=[lt,Ct],C instanceof _f||C instanceof wf||C instanceof kf||C instanceof Tf||lu&&C instanceof lu?Kt.texImage2D(Kt.TEXTURE_2D,0,this.format,this.format,Kt.UNSIGNED_BYTE,C):Kt.texImage2D(Kt.TEXTURE_2D,0,this.format,lt,Ct,0,this.format,Kt.UNSIGNED_BYTE,C.data);else{var oe=q||{x:0,y:0},xe=oe.x,_e=oe.y;C instanceof _f||C instanceof wf||C instanceof kf||C instanceof Tf||lu&&C instanceof lu?Kt.texSubImage2D(Kt.TEXTURE_2D,0,xe,_e,Kt.RGBA,Kt.UNSIGNED_BYTE,C):Kt.texSubImage2D(Kt.TEXTURE_2D,0,xe,_e,lt,Ct,Kt.RGBA,Kt.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Kt.generateMipmap(Kt.TEXTURE_2D)},El.prototype.bind=function(C,D,q){var lt=this.context.gl;lt.bindTexture(lt.TEXTURE_2D,this.texture),q!==lt.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(q=lt.LINEAR),C!==this.filter&&(lt.texParameteri(lt.TEXTURE_2D,lt.TEXTURE_MAG_FILTER,C),lt.texParameteri(lt.TEXTURE_2D,lt.TEXTURE_MIN_FILTER,q||C),this.filter=C),D!==this.wrap&&(lt.texParameteri(lt.TEXTURE_2D,lt.TEXTURE_WRAP_S,D),lt.texParameteri(lt.TEXTURE_2D,lt.TEXTURE_WRAP_T,D),this.wrap=D)},El.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},El.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var rh=function(C){var D=this;this._callback=C,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){D._triggered=!1,D._callback()})};rh.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},rh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ql=function(C,D,q){this.target=C,this.parent=D,this.mapId=q,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},p(["receive","process"],this),this.invoker=new rh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=E()?C:self};function Mf(C,D,q){var lt=2*Math.PI*6378137/256/Math.pow(2,q);return[C*lt-2*Math.PI*6378137/2,D*lt-2*Math.PI*6378137/2]}Ql.prototype.send=function(C,D,q,lt,Ct){var Rt=this;Ct===void 0&&(Ct=!1);var jt=Math.round(1e18*Math.random()).toString(36).substring(0,10);q&&(this.callbacks[jt]=q);var Kt=P(this.globalScope)?void 0:[];return this.target.postMessage({id:jt,type:C,hasCallback:!!q,targetMapId:lt,mustQueue:Ct,sourceMapId:this.mapId,data:ts(D,Kt)},Kt),{cancel:function(){q&&delete Rt.callbacks[jt],Rt.target.postMessage({id:jt,type:"<cancel>",targetMapId:lt,sourceMapId:Rt.mapId})}}},Ql.prototype.receive=function(C){var D=C.data,q=D.id;if(q&&(!D.targetMapId||this.mapId===D.targetMapId))if(D.type==="<cancel>"){delete this.tasks[q];var lt=this.cancelCallbacks[q];delete this.cancelCallbacks[q],lt&&lt()}else E()||D.mustQueue?(this.tasks[q]=D,this.taskQueue.push(q),this.invoker.trigger()):this.processTask(q,D)},Ql.prototype.process=function(){if(this.taskQueue.length){var C=this.taskQueue.shift(),D=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),D&&this.processTask(C,D)}},Ql.prototype.processTask=function(C,D){var q=this;if(D.type==="<response>"){var lt=this.callbacks[C];delete this.callbacks[C],lt&&(D.error?lt(es(D.error)):lt(null,es(D.data)))}else{var Ct=!1,Rt=P(this.globalScope)?void 0:[],jt=D.hasCallback?function(_e,Oe){Ct=!0,delete q.cancelCallbacks[C],q.target.postMessage({id:C,type:"<response>",sourceMapId:q.mapId,error:_e?ts(_e):null,data:ts(Oe,Rt)},Rt)}:function(_e){Ct=!0},Kt=null,oe=es(D.data);if(this.parent[D.type])Kt=this.parent[D.type](D.sourceMapId,oe,jt);else if(this.parent.getWorkerSource){var xe=D.type.split(".");Kt=this.parent.getWorkerSource(D.sourceMapId,xe[0],oe.source)[xe[1]](oe,jt)}else jt(new Error("Could not find function "+D.type));!Ct&&Kt&&Kt.cancel&&(this.cancelCallbacks[C]=Kt.cancel)}},Ql.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var oa=function(C,D){C&&(D?this.setSouthWest(C).setNorthEast(D):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};oa.prototype.setNorthEast=function(C){return this._ne=C instanceof Li?new Li(C.lng,C.lat):Li.convert(C),this},oa.prototype.setSouthWest=function(C){return this._sw=C instanceof Li?new Li(C.lng,C.lat):Li.convert(C),this},oa.prototype.extend=function(C){var D,q,lt=this._sw,Ct=this._ne;if(C instanceof Li)D=C,q=C;else{if(!(C instanceof oa)){if(Array.isArray(C)){if(C.length===4||C.every(Array.isArray)){var Rt=C;return this.extend(oa.convert(Rt))}var jt=C;return this.extend(Li.convert(jt))}return this}if(D=C._sw,q=C._ne,!D||!q)return this}return lt||Ct?(lt.lng=Math.min(D.lng,lt.lng),lt.lat=Math.min(D.lat,lt.lat),Ct.lng=Math.max(q.lng,Ct.lng),Ct.lat=Math.max(q.lat,Ct.lat)):(this._sw=new Li(D.lng,D.lat),this._ne=new Li(q.lng,q.lat)),this},oa.prototype.getCenter=function(){return new Li((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},oa.prototype.getSouthWest=function(){return this._sw},oa.prototype.getNorthEast=function(){return this._ne},oa.prototype.getNorthWest=function(){return new Li(this.getWest(),this.getNorth())},oa.prototype.getSouthEast=function(){return new Li(this.getEast(),this.getSouth())},oa.prototype.getWest=function(){return this._sw.lng},oa.prototype.getSouth=function(){return this._sw.lat},oa.prototype.getEast=function(){return this._ne.lng},oa.prototype.getNorth=function(){return this._ne.lat},oa.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},oa.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},oa.prototype.isEmpty=function(){return!(this._sw&&this._ne)},oa.prototype.contains=function(C){var D=Li.convert(C),q=D.lng,lt=D.lat,Ct=this._sw.lat<=lt&&lt<=this._ne.lat,Rt=this._sw.lng<=q&&q<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Rt=this._sw.lng>=q&&q>=this._ne.lng),Ct&&Rt},oa.convert=function(C){return!C||C instanceof oa?C:new oa(C)};var Af=63710088e-1,Li=function(C,D){if(isNaN(C)||isNaN(D))throw new Error("Invalid LngLat object: ("+C+", "+D+")");if(this.lng=+C,this.lat=+D,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Li.prototype.wrap=function(){return new Li(l(this.lng,-180,180),this.lat)},Li.prototype.toArray=function(){return[this.lng,this.lat]},Li.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Li.prototype.distanceTo=function(C){var D=Math.PI/180,q=this.lat*D,lt=C.lat*D,Ct=Math.sin(q)*Math.sin(lt)+Math.cos(q)*Math.cos(lt)*Math.cos((C.lng-this.lng)*D);return Af*Math.acos(Math.min(Ct,1))},Li.prototype.toBounds=function(C){C===void 0&&(C=0);var D=360*C/40075017,q=D/Math.cos(Math.PI/180*this.lat);return new oa(new Li(this.lng-q,this.lat-D),new Li(this.lng+q,this.lat+D))},Li.convert=function(C){if(C instanceof Li)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new Li(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new Li(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Cf=2*Math.PI*Af;function Lf(C){return Cf*Math.cos(C*Math.PI/180)}function Ef(C){return(180+C)/360}function Sf(C){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C*Math.PI/360)))/360}function If(C,D){return C/Lf(D)}function nh(C){var D=180-360*C;return 360/Math.PI*Math.atan(Math.exp(D*Math.PI/180))-90}var Sl=function(C,D,q){q===void 0&&(q=0),this.x=+C,this.y=+D,this.z=+q};Sl.fromLngLat=function(C,D){D===void 0&&(D=0);var q=Li.convert(C);return new Sl(Ef(q.lng),Sf(q.lat),If(D,q.lat))},Sl.prototype.toLngLat=function(){return new Li(360*this.x-180,nh(this.y))},Sl.prototype.toAltitude=function(){return C=this.z,D=this.y,C*Lf(nh(D));var C,D},Sl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Cf*(C=nh(this.y),1/Math.cos(C*Math.PI/180));var C};var Il=function(C,D,q){this.z=C,this.x=D,this.y=q,this.key=Tc(0,C,C,D,q)};Il.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},Il.prototype.url=function(C,D){var q,lt,Ct,Rt,jt,Kt=(q=this.x,lt=this.y,Ct=this.z,Rt=Mf(256*q,256*(lt=Math.pow(2,Ct)-lt-1),Ct),jt=Mf(256*(q+1),256*(lt+1),Ct),Rt[0]+","+Rt[1]+","+jt[0]+","+jt[1]),oe=function(xe,_e,Oe){for(var Be,Fe="",er=xe;er>0;er--)Fe+=(_e&(Be=1<<er-1)?1:0)+(Oe&Be?2:0);return Fe}(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(D==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",oe).replace("{bbox-epsg-3857}",Kt)},Il.prototype.getTilePoint=function(C){var D=Math.pow(2,this.z);return new t((C.x*D-this.x)*Qn,(C.y*D-this.y)*Qn)},Il.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Of=function(C,D){this.wrap=C,this.canonical=D,this.key=Tc(C,D.z,D.z,D.x,D.y)},sa=function(C,D,q,lt,Ct){this.overscaledZ=C,this.wrap=D,this.canonical=new Il(q,+lt,+Ct),this.key=Tc(D,C,q,lt,Ct)};function Tc(C,D,q,lt,Ct){(C*=2)<0&&(C=-1*C-1);var Rt=1<<q;return(Rt*Rt*C+Rt*Ct+lt).toString(36)+q.toString(36)+D.toString(36)}sa.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},sa.prototype.scaledTo=function(C){var D=this.canonical.z-C;return C>this.canonical.z?new sa(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sa(C,this.wrap,C,this.canonical.x>>D,this.canonical.y>>D)},sa.prototype.calculateScaledKey=function(C,D){var q=this.canonical.z-C;return C>this.canonical.z?Tc(this.wrap*+D,C,this.canonical.z,this.canonical.x,this.canonical.y):Tc(this.wrap*+D,C,C,this.canonical.x>>q,this.canonical.y>>q)},sa.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var D=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>D&&C.canonical.y===this.canonical.y>>D},sa.prototype.children=function(C){if(this.overscaledZ>=C)return[new sa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var D=this.canonical.z+1,q=2*this.canonical.x,lt=2*this.canonical.y;return[new sa(D,this.wrap,D,q,lt),new sa(D,this.wrap,D,q+1,lt),new sa(D,this.wrap,D,q,lt+1),new sa(D,this.wrap,D,q+1,lt+1)]},sa.prototype.isLessThan=function(C){return this.wrap<C.wrap||!(this.wrap>C.wrap)&&(this.overscaledZ<C.overscaledZ||!(this.overscaledZ>C.overscaledZ)&&(this.canonical.x<C.canonical.x||!(this.canonical.x>C.canonical.x)&&this.canonical.y<C.canonical.y))},sa.prototype.wrapped=function(){return new sa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},sa.prototype.unwrapTo=function(C){return new sa(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},sa.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},sa.prototype.toUnwrapped=function(){return new Of(this.wrap,this.canonical)},sa.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},sa.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new Sl(C.x-this.wrap,C.y))},wn("CanonicalTileID",Il),wn("OverscaledTileID",sa,{omit:["posMatrix"]});var il=function(C,D,q){if(this.uid=C,D.height!==D.width)throw new RangeError("DEM tiles must be square");if(q&&q!=="mapbox"&&q!=="terrarium")return A('"'+q+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=D.height;var lt=this.dim=D.height-2;this.data=new Uint32Array(D.data.buffer),this.encoding=q||"mapbox";for(var Ct=0;Ct<lt;Ct++)this.data[this._idx(-1,Ct)]=this.data[this._idx(0,Ct)],this.data[this._idx(lt,Ct)]=this.data[this._idx(lt-1,Ct)],this.data[this._idx(Ct,-1)]=this.data[this._idx(Ct,0)],this.data[this._idx(Ct,lt)]=this.data[this._idx(Ct,lt-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(lt,-1)]=this.data[this._idx(lt-1,0)],this.data[this._idx(-1,lt)]=this.data[this._idx(0,lt-1)],this.data[this._idx(lt,lt)]=this.data[this._idx(lt-1,lt-1)]};il.prototype.get=function(C,D){var q=new Uint8Array(this.data.buffer),lt=4*this._idx(C,D);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(q[lt],q[lt+1],q[lt+2])},il.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},il.prototype._idx=function(C,D){if(C<-1||C>=this.dim+1||D<-1||D>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(D+1)*this.stride+(C+1)},il.prototype._unpackMapbox=function(C,D,q){return(256*C*256+256*D+q)/10-1e4},il.prototype._unpackTerrarium=function(C,D,q){return 256*C+D+q/256-32768},il.prototype.getPixels=function(){return new ao({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},il.prototype.backfillBorder=function(C,D,q){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var lt=D*this.dim,Ct=D*this.dim+this.dim,Rt=q*this.dim,jt=q*this.dim+this.dim;switch(D){case-1:lt=Ct-1;break;case 1:Ct=lt+1}switch(q){case-1:Rt=jt-1;break;case 1:jt=Rt+1}for(var Kt=-D*this.dim,oe=-q*this.dim,xe=Rt;xe<jt;xe++)for(var _e=lt;_e<Ct;_e++)this.data[this._idx(_e,xe)]=C.data[this._idx(_e+Kt,xe+oe)]},wn("DEMData",il);var cu=function(C){this._stringToNumber={},this._numberToString=[];for(var D=0;D<C.length;D++){var q=C[D];this._stringToNumber[q]=D,this._numberToString[D]=q}};cu.prototype.encode=function(C){return this._stringToNumber[C]},cu.prototype.decode=function(C){return this._numberToString[C]};var uu=function(C,D,q,lt,Ct){this.type="Feature",this._vectorTileFeature=C,C._z=D,C._x=q,C._y=lt,this.properties=C.properties,this.id=Ct},ih={geometry:{configurable:!0}};ih.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ih.geometry.set=function(C){this._geometry=C},uu.prototype.toJSON=function(){var C={geometry:this.geometry};for(var D in this)D!=="_geometry"&&D!=="_vectorTileFeature"&&(C[D]=this[D]);return C},Object.defineProperties(uu.prototype,ih);var tc=function(){this.state={},this.stateChanges={},this.deletedStates={}};tc.prototype.updateState=function(C,D,q){var lt=String(D);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][lt]=this.stateChanges[C][lt]||{},u(this.stateChanges[C][lt],q),this.deletedStates[C]===null)for(var Ct in this.deletedStates[C]={},this.state[C])Ct!==lt&&(this.deletedStates[C][Ct]=null);else if(this.deletedStates[C]&&this.deletedStates[C][lt]===null)for(var Rt in this.deletedStates[C][lt]={},this.state[C][lt])q[Rt]||(this.deletedStates[C][lt][Rt]=null);else for(var jt in q)this.deletedStates[C]&&this.deletedStates[C][lt]&&this.deletedStates[C][lt][jt]===null&&delete this.deletedStates[C][lt][jt]},tc.prototype.removeFeatureState=function(C,D,q){if(this.deletedStates[C]!==null){var lt=String(D);if(this.deletedStates[C]=this.deletedStates[C]||{},q&&D!==void 0)this.deletedStates[C][lt]!==null&&(this.deletedStates[C][lt]=this.deletedStates[C][lt]||{},this.deletedStates[C][lt][q]=null);else if(D!==void 0)if(this.stateChanges[C]&&this.stateChanges[C][lt])for(q in this.deletedStates[C][lt]={},this.stateChanges[C][lt])this.deletedStates[C][lt][q]=null;else this.deletedStates[C][lt]=null;else this.deletedStates[C]=null}},tc.prototype.getState=function(C,D){var q=String(D),lt=this.state[C]||{},Ct=this.stateChanges[C]||{},Rt=u({},lt[q],Ct[q]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var jt=this.deletedStates[C][D];if(jt===null)return{};for(var Kt in jt)delete Rt[Kt]}return Rt},tc.prototype.initializeTileState=function(C,D){C.setFeatureState(this.state,D)},tc.prototype.coalesceChanges=function(C,D){var q={};for(var lt in this.stateChanges){this.state[lt]=this.state[lt]||{};var Ct={};for(var Rt in this.stateChanges[lt])this.state[lt][Rt]||(this.state[lt][Rt]={}),u(this.state[lt][Rt],this.stateChanges[lt][Rt]),Ct[Rt]=this.state[lt][Rt];q[lt]=Ct}for(var jt in this.deletedStates){this.state[jt]=this.state[jt]||{};var Kt={};if(this.deletedStates[jt]===null)for(var oe in this.state[jt])Kt[oe]={},this.state[jt][oe]={};else for(var xe in this.deletedStates[jt]){if(this.deletedStates[jt][xe]===null)this.state[jt][xe]={};else for(var _e=0,Oe=Object.keys(this.deletedStates[jt][xe]);_e<Oe.length;_e+=1){var Be=Oe[_e];delete this.state[jt][xe][Be]}Kt[xe]=this.state[jt][xe]}q[jt]=q[jt]||{},u(q[jt],Kt)}if(this.stateChanges={},this.deletedStates={},Object.keys(q).length!==0)for(var Fe in C)C[Fe].setFeatureState(q,D)};var al=function(C,D){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new Wi(Qn,16,0),this.grid3D=new Wi(Qn,16,0),this.featureIndexArray=new Ve,this.promoteId=D};function Rf(C,D,q,lt,Ct){return b(C,function(Rt,jt){var Kt=D instanceof Qi?D.get(jt):null;return Kt&&Kt.evaluate?Kt.evaluate(q,lt,Ct):Kt})}function Pf(C){for(var D=1/0,q=1/0,lt=-1/0,Ct=-1/0,Rt=0,jt=C;Rt<jt.length;Rt+=1){var Kt=jt[Rt];D=Math.min(D,Kt.x),q=Math.min(q,Kt.y),lt=Math.max(lt,Kt.x),Ct=Math.max(Ct,Kt.y)}return{minX:D,minY:q,maxX:lt,maxY:Ct}}function u0(C,D){return D-C}al.prototype.insert=function(C,D,q,lt,Ct,Rt){var jt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(q,lt,Ct);for(var Kt=Rt?this.grid3D:this.grid,oe=0;oe<D.length;oe++){for(var xe=D[oe],_e=[1/0,1/0,-1/0,-1/0],Oe=0;Oe<xe.length;Oe++){var Be=xe[Oe];_e[0]=Math.min(_e[0],Be.x),_e[1]=Math.min(_e[1],Be.y),_e[2]=Math.max(_e[2],Be.x),_e[3]=Math.max(_e[3],Be.y)}_e[0]<Qn&&_e[1]<Qn&&_e[2]>=0&&_e[3]>=0&&Kt.insert(jt,_e[0],_e[1],_e[2],_e[3])}},al.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new $l.VectorTile(new Jc(this.rawTileData)).layers,this.sourceLayerCoder=new cu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},al.prototype.query=function(C,D,q,lt){var Ct=this;this.loadVTLayers();for(var Rt=C.params||{},jt=Qn/C.tileSize/C.scale,Kt=us(Rt.filter),oe=C.queryGeometry,xe=C.queryPadding*jt,_e=Pf(oe),Oe=this.grid.query(_e.minX-xe,_e.minY-xe,_e.maxX+xe,_e.maxY+xe),Be=Pf(C.cameraQueryGeometry),Fe=0,er=this.grid3D.query(Be.minX-xe,Be.minY-xe,Be.maxX+xe,Be.maxY+xe,function(Ur,Wr,Jr,gn){return function(un,yn,Tn,Bn,Cn){for(var Fn=0,In=un;Fn<In.length;Fn+=1){var Mn=In[Fn];if(yn<=Mn.x&&Tn<=Mn.y&&Bn>=Mn.x&&Cn>=Mn.y)return!0}var Vn=[new t(yn,Tn),new t(yn,Cn),new t(Bn,Cn),new t(Bn,Tn)];if(un.length>2){for(var jn=0,vi=Vn;jn<vi.length;jn+=1)if(_l(un,vi[jn]))return!0}for(var Dn=0;Dn<un.length-1;Dn++)if(uc(un[Dn],un[Dn+1],Vn))return!0;return!1}(C.cameraQueryGeometry,Ur-xe,Wr-xe,Jr+xe,gn+xe)});Fe<er.length;Fe+=1){var or=er[Fe];Oe.push(or)}Oe.sort(u0);for(var Tr,kr={},Or=function(Ur){var Wr=Oe[Ur];if(Wr!==Tr){Tr=Wr;var Jr=Ct.featureIndexArray.get(Wr),gn=null;Ct.loadMatchingFeature(kr,Jr.bucketIndex,Jr.sourceLayerIndex,Jr.featureIndex,Kt,Rt.layers,Rt.availableImages,D,q,lt,function(un,yn,Tn){return gn||(gn=Fa(un)),yn.queryIntersectsFeature(oe,un,Tn,gn,Ct.z,C.transform,jt,C.pixelPosMatrix)})}},Rr=0;Rr<Oe.length;Rr++)Or(Rr);return kr},al.prototype.loadMatchingFeature=function(C,D,q,lt,Ct,Rt,jt,Kt,oe,xe,_e){var Oe=this.bucketLayerIDs[D];if(!Rt||function(gn,un){for(var yn=0;yn<gn.length;yn++)if(un.indexOf(gn[yn])>=0)return!0;return!1}(Rt,Oe)){var Be=this.sourceLayerCoder.decode(q),Fe=this.vtLayers[Be].feature(lt);if(Ct.filter(new ti(this.tileID.overscaledZ),Fe))for(var er=this.getId(Fe,Be),or=0;or<Oe.length;or++){var Tr=Oe[or];if(!(Rt&&Rt.indexOf(Tr)<0)){var kr=Kt[Tr];if(kr){var Or={};er!==void 0&&xe&&(Or=xe.getState(kr.sourceLayer||"_geojsonTileLayer",er));var Rr=oe[Tr];Rr.paint=Rf(Rr.paint,kr.paint,Fe,Or,jt),Rr.layout=Rf(Rr.layout,kr.layout,Fe,Or,jt);var Ur=!_e||_e(Fe,kr,Or);if(Ur){var Wr=new uu(Fe,this.z,this.x,this.y,er);Wr.layer=Rr;var Jr=C[Tr];Jr===void 0&&(Jr=C[Tr]=[]),Jr.push({featureIndex:lt,feature:Wr,intersectionZ:Ur})}}}}}},al.prototype.lookupSymbolFeatures=function(C,D,q,lt,Ct,Rt,jt,Kt){var oe={};this.loadVTLayers();for(var xe=us(Ct),_e=0,Oe=C;_e<Oe.length;_e+=1){var Be=Oe[_e];this.loadMatchingFeature(oe,q,lt,Be,xe,Rt,jt,Kt,D)}return oe},al.prototype.hasLayer=function(C){for(var D=0,q=this.bucketLayerIDs;D<q.length;D+=1)for(var lt=0,Ct=q[D];lt<Ct.length;lt+=1)if(C===Ct[lt])return!0;return!1},al.prototype.getId=function(C,D){var q=C.id;if(this.promoteId){var lt=typeof this.promoteId=="string"?this.promoteId:this.promoteId[D];typeof(q=C.properties[lt])=="boolean"&&(q=Number(q))}return q},wn("FeatureIndex",al,{omit:["rawTileData","sourceLayerCoder"]});var da=function(C,D){this.tileID=C,this.uid=d(),this.uses=0,this.tileSize=D,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};da.prototype.registerFadeDuration=function(C){var D=C+this.timeAdded;D<J.now()||this.fadeEndTime&&D<this.fadeEndTime||(this.fadeEndTime=D)},da.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},da.prototype.loadVectorData=function(C,D,q){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",C){for(var lt in C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=function(xe,_e){var Oe={};if(!_e)return Oe;for(var Be=function(){var or=er[Fe],Tr=or.layerIds.map(function(Ur){return _e.getLayer(Ur)}).filter(Boolean);if(Tr.length!==0){or.layers=Tr,or.stateDependentLayerIds&&(or.stateDependentLayers=or.stateDependentLayerIds.map(function(Ur){return Tr.filter(function(Wr){return Wr.id===Ur})[0]}));for(var kr=0,Or=Tr;kr<Or.length;kr+=1){var Rr=Or[kr];Oe[Rr.id]=or}}},Fe=0,er=xe;Fe<er.length;Fe+=1)Be();return Oe}(C.buckets,D.style),this.hasSymbolBuckets=!1,this.buckets){var Ct=this.buckets[lt];if(Ct instanceof li){if(this.hasSymbolBuckets=!0,!q)break;Ct.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Rt in this.buckets){var jt=this.buckets[Rt];if(jt instanceof li&&jt.hasRTLText){this.hasRTLText=!0,Ai.isLoading()||Ai.isLoaded()||ro()!=="deferred"||rl();break}}for(var Kt in this.queryPadding=0,this.buckets){var oe=this.buckets[Kt];this.queryPadding=Math.max(this.queryPadding,D.style.getLayer(Kt).queryRadius(oe))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)}else this.collisionBoxArray=new fe},da.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},da.prototype.getBucket=function(C){return this.buckets[C.id]},da.prototype.upload=function(C){for(var D in this.buckets){var q=this.buckets[D];q.uploadPending()&&q.upload(C)}var lt=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new El(C,this.imageAtlas.image,lt.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new El(C,this.glyphAtlasImage,lt.ALPHA),this.glyphAtlasImage=null)},da.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},da.prototype.queryRenderedFeatures=function(C,D,q,lt,Ct,Rt,jt,Kt,oe,xe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:lt,cameraQueryGeometry:Ct,scale:Rt,tileSize:this.tileSize,pixelPosMatrix:xe,transform:Kt,params:jt,queryPadding:this.queryPadding*oe},C,D,q):{}},da.prototype.querySourceFeatures=function(C,D){var q=this.latestFeatureIndex;if(q&&q.rawTileData){var lt=q.loadVTLayers(),Ct=D?D.sourceLayer:"",Rt=lt._geojsonTileLayer||lt[Ct];if(Rt)for(var jt=us(D&&D.filter),Kt=this.tileID.canonical,oe=Kt.z,xe=Kt.x,_e=Kt.y,Oe={z:oe,x:xe,y:_e},Be=0;Be<Rt.length;Be++){var Fe=Rt.feature(Be);if(jt.filter(new ti(this.tileID.overscaledZ),Fe)){var er=q.getId(Fe,Ct),or=new uu(Fe,oe,xe,_e,er);or.tile=Oe,C.push(or)}}}},da.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},da.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},da.prototype.setExpiryData=function(C){var D=this.expirationTime;if(C.cacheControl){var q=S(C.cacheControl);q["max-age"]&&(this.expirationTime=Date.now()+1e3*q["max-age"])}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var lt=Date.now(),Ct=!1;if(this.expirationTime>lt)Ct=!1;else if(D)if(this.expirationTime<D)Ct=!0;else{var Rt=this.expirationTime-D;Rt?this.expirationTime=lt+Math.max(Rt,3e4):Ct=!0}else Ct=!0;Ct?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},da.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},da.prototype.setFeatureState=function(C,D){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(C).length!==0){var q=this.latestFeatureIndex.loadVTLayers();for(var lt in this.buckets)if(D.style.hasLayer(lt)){var Ct=this.buckets[lt],Rt=Ct.layers[0].sourceLayer||"_geojsonTileLayer",jt=q[Rt],Kt=C[Rt];if(jt&&Kt&&Object.keys(Kt).length!==0){Ct.update(Kt,jt,this.imageAtlas&&this.imageAtlas.patternPositions||{});var oe=D&&D.style&&D.style.getLayer(lt);oe&&(this.queryPadding=Math.max(this.queryPadding,oe.queryRadius(Ct)))}}}},da.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},da.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<J.now()},da.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},da.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=J.now()+C},da.prototype.setDependencies=function(C,D){for(var q={},lt=0,Ct=D;lt<Ct.length;lt+=1)q[Ct[lt]]=!0;this.dependencies[C]=q},da.prototype.hasDependency=function(C,D){for(var q=0,lt=C;q<lt.length;q+=1){var Ct=lt[q],Rt=this.dependencies[Ct];if(Rt){for(var jt=0,Kt=D;jt<Kt.length;jt+=1)if(Rt[Kt[jt]])return!0}}return!1};var Tl=self.performance,Df=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},Tl.mark(this._marks.start)};Df.prototype.finish=function(){Tl.mark(this._marks.end);var C=Tl.getEntriesByName(this._marks.measure);return C.length===0&&(Tl.measure(this._marks.measure,this._marks.start,this._marks.end),C=Tl.getEntriesByName(this._marks.measure),Tl.clearMarks(this._marks.start),Tl.clearMarks(this._marks.end),Tl.clearMeasures(this._marks.measure)),C},r.Actor=Ql,r.AlphaImage=Ll,r.CanonicalTileID=Il,r.CollisionBoxArray=fe,r.Color=fr,r.DEMData=il,r.DataConstantProperty=An,r.DictionaryCoder=cu,r.EXTENT=Qn,r.ErrorEvent=ne,r.EvaluationParameters=ti,r.Event=Yt,r.Evented=re,r.FeatureIndex=al,r.FillBucket=Ss,r.FillExtrusionBucket=Is,r.ImageAtlas=bc,r.ImagePosition=tu,r.LineBucket=oo,r.LngLat=Li,r.LngLatBounds=oa,r.MercatorCoordinate=Sl,r.ONE_EM=wa,r.OverscaledTileID=sa,r.Point=t,r.Point$1=t,r.Properties=ta,r.Protobuf=Jc,r.RGBAImage=ao,r.RequestManager=ot,r.RequestPerformance=Df,r.ResourceType=de,r.SegmentVector=vr,r.SourceFeatureState=tc,r.StructArrayLayout1ui2=Ht,r.StructArrayLayout2f1f2i16=At,r.StructArrayLayout2i4=ba,r.StructArrayLayout3ui6=Q,r.StructArrayLayout4i8=is,r.SymbolBucket=li,r.Texture=El,r.Tile=da,r.Transitionable=Wa,r.Uniform1f=Nn,r.Uniform1i=En,r.Uniform2f=$n,r.Uniform3f=Kn,r.Uniform4f=hi,r.UniformColor=fi,r.UniformMatrix4f=Ci,r.UnwrappedTileID=Of,r.ValidationError=Nt,r.WritingMode=Uo,r.ZoomHistory=yo,r.add=function(C,D,q){return C[0]=D[0]+q[0],C[1]=D[1]+q[1],C[2]=D[2]+q[2],C},r.addDynamicAttributes=th,r.asyncAll=function(C,D,q){if(!C.length)return q(null,[]);var lt=C.length,Ct=new Array(C.length),Rt=null;C.forEach(function(jt,Kt){D(jt,function(oe,xe){oe&&(Rt=oe),Ct[Kt]=xe,--lt==0&&q(Rt,Ct)})})},r.bezier=a,r.bindAll=p,r.browser=J,r.cacheEntryPossiblyAdded=function(C){++ae>bt&&(C.getActor().send("enforceCacheSizeLimit",Tt),ae=0)},r.clamp=c,r.clearTileCache=function(C){var D=self.caches.delete(ut);C&&D.catch(C).then(function(){return C()})},r.clipLine=gf,r.clone=function(C){var D=new jo(16);return D[0]=C[0],D[1]=C[1],D[2]=C[2],D[3]=C[3],D[4]=C[4],D[5]=C[5],D[6]=C[6],D[7]=C[7],D[8]=C[8],D[9]=C[9],D[10]=C[10],D[11]=C[11],D[12]=C[12],D[13]=C[13],D[14]=C[14],D[15]=C[15],D},r.clone$1=_,r.clone$2=function(C){var D=new jo(3);return D[0]=C[0],D[1]=C[1],D[2]=C[2],D},r.collisionCircleLayout=Ed,r.config=X,r.create=function(){var C=new jo(16);return jo!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C},r.create$1=function(){var C=new jo(9);return jo!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[5]=0,C[6]=0,C[7]=0),C[0]=1,C[4]=1,C[8]=1,C},r.create$2=function(){var C=new jo(4);return jo!=Float32Array&&(C[1]=0,C[2]=0),C[0]=1,C[3]=1,C},r.createCommonjsModule=m,r.createExpression=ks,r.createLayout=ji,r.createStyleLayer=function(C){return C.type==="custom"?new l0(C):new c0[C.type](C)},r.cross=function(C,D,q){var lt=D[0],Ct=D[1],Rt=D[2],jt=q[0],Kt=q[1],oe=q[2];return C[0]=Ct*oe-Rt*Kt,C[1]=Rt*jt-lt*oe,C[2]=lt*Kt-Ct*jt,C},r.deepEqual=function C(D,q){if(Array.isArray(D)){if(!Array.isArray(q)||D.length!==q.length)return!1;for(var lt=0;lt<D.length;lt++)if(!C(D[lt],q[lt]))return!1;return!0}if(typeof D=="object"&&D!==null&&q!==null){if(typeof q!="object"||Object.keys(D).length!==Object.keys(q).length)return!1;for(var Ct in D)if(!C(D[Ct],q[Ct]))return!1;return!0}return D===q},r.dot=function(C,D){return C[0]*D[0]+C[1]*D[1]+C[2]*D[2]},r.dot$1=function(C,D){return C[0]*D[0]+C[1]*D[1]+C[2]*D[2]+C[3]*D[3]},r.ease=i,r.emitValidationErrors=$a,r.endsWith=y,r.enforceCacheSizeLimit=function(C){zt(),st&&st.then(function(D){D.keys().then(function(q){for(var lt=0;lt<q.length-C;lt++)D.delete(q[lt])})})},r.evaluateSizeForFeature=lf,r.evaluateSizeForZoom=cf,r.evaluateVariableOffset=yf,r.evented=Bi,r.extend=u,r.featureFilter=us,r.filterObject=x,r.fromRotation=function(C,D){var q=Math.sin(D),lt=Math.cos(D);return C[0]=lt,C[1]=q,C[2]=0,C[3]=-q,C[4]=lt,C[5]=0,C[6]=0,C[7]=0,C[8]=1,C},r.getAnchorAlignment=Xu,r.getAnchorJustification=Qu,r.getArrayBuffer=ke,r.getImage=Vt,r.getJSON=function(C,D){return se(u(C,{type:"json"}),D)},r.getRTLTextPluginStatus=ro,r.getReferrer=ve,r.getVideo=function(C,D){var q,lt,Ct=self.document.createElement("video");Ct.muted=!0,Ct.onloadstart=function(){D(null,Ct)};for(var Rt=0;Rt<C.length;Rt++){var jt=self.document.createElement("source");q=C[Rt],lt=void 0,(lt=self.document.createElement("a")).href=q,lt.protocol===self.document.location.protocol&&lt.host===self.document.location.host||(Ct.crossOrigin="Anonymous"),jt.src=C[Rt],Ct.appendChild(jt)}return{cancel:function(){}}},r.identity=Du,r.invert=function(C,D){var q=D[0],lt=D[1],Ct=D[2],Rt=D[3],jt=D[4],Kt=D[5],oe=D[6],xe=D[7],_e=D[8],Oe=D[9],Be=D[10],Fe=D[11],er=D[12],or=D[13],Tr=D[14],kr=D[15],Or=q*Kt-lt*jt,Rr=q*oe-Ct*jt,Ur=q*xe-Rt*jt,Wr=lt*oe-Ct*Kt,Jr=lt*xe-Rt*Kt,gn=Ct*xe-Rt*oe,un=_e*or-Oe*er,yn=_e*Tr-Be*er,Tn=_e*kr-Fe*er,Bn=Oe*Tr-Be*or,Cn=Oe*kr-Fe*or,Fn=Be*kr-Fe*Tr,In=Or*Fn-Rr*Cn+Ur*Bn+Wr*Tn-Jr*yn+gn*un;return In?(In=1/In,C[0]=(Kt*Fn-oe*Cn+xe*Bn)*In,C[1]=(Ct*Cn-lt*Fn-Rt*Bn)*In,C[2]=(or*gn-Tr*Jr+kr*Wr)*In,C[3]=(Be*Jr-Oe*gn-Fe*Wr)*In,C[4]=(oe*Tn-jt*Fn-xe*yn)*In,C[5]=(q*Fn-Ct*Tn+Rt*yn)*In,C[6]=(Tr*Ur-er*gn-kr*Rr)*In,C[7]=(_e*gn-Be*Ur+Fe*Rr)*In,C[8]=(jt*Cn-Kt*Tn+xe*un)*In,C[9]=(lt*Tn-q*Cn-Rt*un)*In,C[10]=(er*Jr-or*Ur+kr*Or)*In,C[11]=(Oe*Ur-_e*Jr-Fe*Or)*In,C[12]=(Kt*yn-jt*Bn-oe*un)*In,C[13]=(q*Bn-lt*yn+Ct*un)*In,C[14]=(or*Rr-er*Wr-Tr*Or)*In,C[15]=(_e*Wr-Oe*Rr+Be*Or)*In,C):null},r.isChar=xn,r.isMapboxURL=ct,r.keysDifference=function(C,D){var q=[];for(var lt in C)lt in D||q.push(lt);return q},r.makeRequest=se,r.mapObject=b,r.mercatorXfromLng=Ef,r.mercatorYfromLat=Sf,r.mercatorZfromAltitude=If,r.mul=Hp,r.multiply=Ah,r.mvt=$l,r.normalize=function(C,D){var q=D[0],lt=D[1],Ct=D[2],Rt=q*q+lt*lt+Ct*Ct;return Rt>0&&(Rt=1/Math.sqrt(Rt)),C[0]=D[0]*Rt,C[1]=D[1]*Rt,C[2]=D[2]*Rt,C},r.number=Yr,r.offscreenCanvasSupported=Qt,r.ortho=function(C,D,q,lt,Ct,Rt,jt){var Kt=1/(D-q),oe=1/(lt-Ct),xe=1/(Rt-jt);return C[0]=-2*Kt,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*oe,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*xe,C[11]=0,C[12]=(D+q)*Kt,C[13]=(Ct+lt)*oe,C[14]=(jt+Rt)*xe,C[15]=1,C},r.parseGlyphPBF=function(C){return new Jc(C).readFields(Ud,[])},r.pbf=Jc,r.performSymbolLayout=function(C,D,q,lt,Ct,Rt,jt){C.createArrays();var Kt=512*C.overscaling;C.tilePixelRatio=Qn/Kt,C.compareText={},C.iconsNeedLinear=!1;var oe=C.layers[0].layout,xe=C.layers[0]._unevaluatedLayout._values,_e={};if(C.textSizeData.kind==="composite"){var Oe=C.textSizeData,Be=Oe.minZoom,Fe=Oe.maxZoom;_e.compositeTextSizes=[xe["text-size"].possiblyEvaluate(new ti(Be),jt),xe["text-size"].possiblyEvaluate(new ti(Fe),jt)]}if(C.iconSizeData.kind==="composite"){var er=C.iconSizeData,or=er.minZoom,Tr=er.maxZoom;_e.compositeIconSizes=[xe["icon-size"].possiblyEvaluate(new ti(or),jt),xe["icon-size"].possiblyEvaluate(new ti(Tr),jt)]}_e.layoutTextSize=xe["text-size"].possiblyEvaluate(new ti(C.zoom+1),jt),_e.layoutIconSize=xe["icon-size"].possiblyEvaluate(new ti(C.zoom+1),jt),_e.textMaxSize=xe["text-size"].possiblyEvaluate(new ti(18));for(var kr=oe.get("text-line-height")*wa,Or=oe.get("text-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",Rr=oe.get("text-keep-upright"),Ur=oe.get("text-size"),Wr=function(){var un=gn[Jr],yn=oe.get("text-font").evaluate(un,{},jt).join(","),Tn=Ur.evaluate(un,{},jt),Bn=_e.layoutTextSize.evaluate(un,{},jt),Cn=_e.layoutIconSize.evaluate(un,{},jt),Fn={horizontal:{},vertical:void 0},In=un.text,Mn=[0,0];if(In){var Vn=In.toString(),jn=oe.get("text-letter-spacing").evaluate(un,{},jt)*wa,vi=function(Un){for(var Zn=0,Gi=Un;Zn<Gi.length;Zn+=1)if(di=Gi[Zn].charCodeAt(0),xn.Arabic(di)||xn["Arabic Supplement"](di)||xn["Arabic Extended-A"](di)||xn["Arabic Presentation Forms-A"](di)||xn["Arabic Presentation Forms-B"](di))return!1;var di;return!0}(Vn)?jn:0,Dn=oe.get("text-anchor").evaluate(un,{},jt),ci=oe.get("text-variable-anchor");if(!ci){var _i=oe.get("text-radial-offset").evaluate(un,{},jt);Mn=_i?yf(Dn,[_i*wa,Ju]):oe.get("text-offset").evaluate(un,{},jt).map(function(Un){return Un*wa})}var ki=Or?"center":oe.get("text-justify").evaluate(un,{},jt),Ti=oe.get("symbol-placement"),yi=Ti==="point"?oe.get("text-max-width").evaluate(un,{},jt)*wa:0,la=function(){C.allowVerticalPlacement&&Ha(Vn)&&(Fn.vertical=eu(In,D,q,Ct,yn,yi,kr,Dn,"left",vi,Mn,Uo.vertical,!0,Ti,Bn,Tn))};if(!Or&&ci){for(var Ii=ki==="auto"?ci.map(function(Un){return Qu(Un)}):[ki],ga=!1,Sa=0;Sa<Ii.length;Sa++){var ka=Ii[Sa];if(!Fn.horizontal[ka])if(ga)Fn.horizontal[ka]=Fn.horizontal[0];else{var Ya=eu(In,D,q,Ct,yn,yi,kr,"center",ka,vi,Mn,Uo.horizontal,!1,Ti,Bn,Tn);Ya&&(Fn.horizontal[ka]=Ya,ga=Ya.positionedLines.length===1)}}la()}else{ki==="auto"&&(ki=Qu(Dn));var Ta=eu(In,D,q,Ct,yn,yi,kr,Dn,ki,vi,Mn,Uo.horizontal,!1,Ti,Bn,Tn);Ta&&(Fn.horizontal[ki]=Ta),la(),Ha(Vn)&&Or&&Rr&&(Fn.vertical=eu(In,D,q,Ct,yn,yi,kr,Dn,ki,vi,Mn,Uo.vertical,!1,Ti,Bn,Tn))}}var ha=void 0,Ma=!1;if(un.icon&&un.icon.name){var ma=lt[un.icon.name];ma&&(ha=function(Un,Zn,Gi){var di=Xu(Gi),Di=di.horizontalAlign,Ei=di.verticalAlign,ei=Zn[0],$i=Zn[1],Za=ei-Un.displaySize[0]*Di,ko=Za+Un.displaySize[0],Na=$i-Un.displaySize[1]*Ei;return{image:Un,top:Na,bottom:Na+Un.displaySize[1],left:Za,right:ko}}(Ct[un.icon.name],oe.get("icon-offset").evaluate(un,{},jt),oe.get("icon-anchor").evaluate(un,{},jt)),Ma=ma.sdf,C.sdfIcons===void 0?C.sdfIcons=ma.sdf:C.sdfIcons!==ma.sdf&&A("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ma.pixelRatio!==C.pixelRatio||oe.get("icon-rotate").constantOr(1)!==0)&&(C.iconsNeedLinear=!0))}var fa=bf(Fn.horizontal)||Fn.vertical;C.iconsInText=!!fa&&fa.iconsInText,(fa||ha)&&function(Un,Zn,Gi,di,Di,Ei,ei,$i,Za,ko,Na){var Rs=Ei.textMaxSize.evaluate(Zn,{});Rs===void 0&&(Rs=ei);var ol,va=Un.layers[0].layout,Ps=va.get("icon-offset").evaluate(Zn,{},Na),vs=bf(Gi.horizontal),ys=24,Ol=ei/ys,hu=Un.tilePixelRatio*Ol,Rl=Un.tilePixelRatio*Rs/ys,fu=Un.tilePixelRatio*$i,Mc=Un.tilePixelRatio*va.get("symbol-spacing"),ah=va.get("text-padding")*Un.tilePixelRatio,pu=va.get("icon-padding")*Un.tilePixelRatio,ec=va.get("text-max-angle")/180*Math.PI,du=va.get("text-rotation-alignment")==="map"&&va.get("symbol-placement")!=="point",gu=va.get("icon-rotation-alignment")==="map"&&va.get("symbol-placement")!=="point",Ac=va.get("symbol-placement"),oh=Mc/2,Cc=va.get("icon-text-fit");di&&Cc!=="none"&&(Un.allowVerticalPlacement&&Gi.vertical&&(ol=sf(di,Gi.vertical,Cc,va.get("icon-text-fit-padding"),Ps,Ol)),vs&&(di=sf(di,vs,Cc,va.get("icon-text-fit-padding"),Ps,Ol)));var Pl=function(h0,Rc){Rc.x<0||Rc.x>=Qn||Rc.y<0||Rc.y>=Qn||function(Ki,Ds,f0,Ml,fh,jf,bu,Vs,_u,Pc,wu,ku,ph,Uf,Dc,Gf,$f,Hf,Vf,Wf,Go,Tu,qf,Ws,p0){var Yf,zl,ic,ac,oc,sc=Ki.addToLineVertexArray(Ds,f0),Zf=0,Xf=0,Kf=0,Jf=0,dh=-1,gh=-1,sl={},Qf=cn(""),mh=0,vh=0;if(Vs._unevaluatedLayout.getValue("text-radial-offset")===void 0?(mh=(Yf=Vs.layout.get("text-offset").evaluate(Go,{},Ws).map(function(zc){return zc*wa}))[0],vh=Yf[1]):(mh=Vs.layout.get("text-radial-offset").evaluate(Go,{},Ws)*wa,vh=Ju),Ki.allowVerticalPlacement&&Ml.vertical){var tp=Vs.layout.get("text-rotate").evaluate(Go,{},Ws)+90,d0=Ml.vertical;ac=new ou(_u,Ds,Pc,wu,ku,d0,ph,Uf,Dc,tp),bu&&(oc=new ou(_u,Ds,Pc,wu,ku,bu,$f,Hf,Dc,tp))}if(fh){var yh=Vs.layout.get("icon-rotate").evaluate(Go,{}),ep=Vs.layout.get("icon-text-fit")!=="none",rp=mf(fh,yh,qf,ep),xh=bu?mf(bu,yh,qf,ep):void 0;ic=new ou(_u,Ds,Pc,wu,ku,fh,$f,Hf,!1,yh),Zf=4*rp.length;var np=Ki.iconSizeData,Fc=null;np.kind==="source"?(Fc=[Os*Vs.layout.get("icon-size").evaluate(Go,{})])[0]>kl&&A(Ki.layerIds[0]+': Value for "icon-size" is >= '+wc+'. Reduce your "icon-size".'):np.kind==="composite"&&((Fc=[Os*Tu.compositeIconSizes[0].evaluate(Go,{},Ws),Os*Tu.compositeIconSizes[1].evaluate(Go,{},Ws)])[0]>kl||Fc[1]>kl)&&A(Ki.layerIds[0]+': Value for "icon-size" is >= '+wc+'. Reduce your "icon-size".'),Ki.addSymbols(Ki.icon,rp,Fc,Wf,Vf,Go,!1,Ds,sc.lineStartIndex,sc.lineLength,-1,Ws),dh=Ki.icon.placedSymbolArray.length-1,xh&&(Xf=4*xh.length,Ki.addSymbols(Ki.icon,xh,Fc,Wf,Vf,Go,Uo.vertical,Ds,sc.lineStartIndex,sc.lineLength,-1,Ws),gh=Ki.icon.placedSymbolArray.length-1)}for(var ip in Ml.horizontal){var Mu=Ml.horizontal[ip];if(!zl){Qf=cn(Mu.text);var g0=Vs.layout.get("text-rotate").evaluate(Go,{},Ws);zl=new ou(_u,Ds,Pc,wu,ku,Mu,ph,Uf,Dc,g0)}var ap=Mu.positionedLines.length===1;if(Kf+=xf(Ki,Ds,Mu,jf,Vs,Dc,Go,Gf,sc,Ml.vertical?Uo.horizontal:Uo.horizontalOnly,ap?Object.keys(Ml.horizontal):[ip],sl,dh,Tu,Ws),ap)break}Ml.vertical&&(Jf+=xf(Ki,Ds,Ml.vertical,jf,Vs,Dc,Go,Gf,sc,Uo.vertical,["vertical"],sl,gh,Tu,Ws));var m0=zl?zl.boxStartIndex:Ki.collisionBoxArray.length,v0=zl?zl.boxEndIndex:Ki.collisionBoxArray.length,y0=ac?ac.boxStartIndex:Ki.collisionBoxArray.length,x0=ac?ac.boxEndIndex:Ki.collisionBoxArray.length,b0=ic?ic.boxStartIndex:Ki.collisionBoxArray.length,_0=ic?ic.boxEndIndex:Ki.collisionBoxArray.length,w0=oc?oc.boxStartIndex:Ki.collisionBoxArray.length,k0=oc?oc.boxEndIndex:Ki.collisionBoxArray.length,qs=-1,Au=function(zc,sp){return zc&&zc.circleDiameter?Math.max(zc.circleDiameter,sp):sp};qs=Au(zl,qs),qs=Au(ac,qs),qs=Au(ic,qs);var op=(qs=Au(oc,qs))>-1?1:0;op&&(qs*=p0/wa),Ki.glyphOffsetArray.length>=li.MAX_GLYPHS&&A("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Go.sortKey!==void 0&&Ki.addToSortKeyRanges(Ki.symbolInstances.length,Go.sortKey),Ki.symbolInstances.emplaceBack(Ds.x,Ds.y,sl.right>=0?sl.right:-1,sl.center>=0?sl.center:-1,sl.left>=0?sl.left:-1,sl.vertical||-1,dh,gh,Qf,m0,v0,y0,x0,b0,_0,w0,k0,Pc,Kf,Jf,Zf,Xf,op,0,ph,mh,vh,qs)}(Un,Rc,h0,Gi,di,Di,ol,Un.layers[0],Un.collisionBoxArray,Zn.index,Zn.sourceLayerIndex,Un.index,hu,ah,du,Za,fu,pu,gu,Ps,Zn,Ei,ko,Na,ei)};if(Ac==="line")for(var rc=0,mu=gf(Zn.geometry,0,0,Qn,Qn);rc<mu.length;rc+=1)for(var vu=mu[rc],nc=0,yu=Yd(vu,Mc,ec,Gi.vertical||vs,di,ys,Rl,Un.overscaling,Qn);nc<yu.length;nc+=1){var xu=yu[nc];vs&&Jd(Un,vs.text,oh,xu)||Pl(vu,xu)}else if(Ac==="line-center")for(var Lc=0,Ec=Zn.geometry;Lc<Ec.length;Lc+=1){var Dl=Ec[Lc];if(Dl.length>1){var Sc=qd(Dl,ec,Gi.vertical||vs,di,ys,Rl);Sc&&Pl(Dl,Sc)}}else if(Zn.type==="Polygon")for(var Fl=0,Ic=Gu(Zn.geometry,0);Fl<Ic.length;Fl+=1){var Oc=Ic[Fl],Ff=Xd(Oc,16);Pl(Oc[0],new Wl(Ff.x,Ff.y,0))}else if(Zn.type==="LineString")for(var sh=0,zf=Zn.geometry;sh<zf.length;sh+=1){var lh=zf[sh];Pl(lh,new Wl(lh[0].x,lh[0].y,0))}else if(Zn.type==="Point")for(var ch=0,Nf=Zn.geometry;ch<Nf.length;ch+=1)for(var uh=0,Bf=Nf[ch];uh<Bf.length;uh+=1){var hh=Bf[uh];Pl([hh],new Wl(hh.x,hh.y,0))}}(C,un,Fn,ha,lt,_e,Bn,Cn,Mn,Ma,jt)},Jr=0,gn=C.features;Jr<gn.length;Jr+=1)Wr();Rt&&C.generateCollisionDebugBuffers()},r.perspective=function(C,D,q,lt,Ct){var Rt,jt=1/Math.tan(D/2);return C[0]=jt/q,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=jt,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,Ct!=null&&Ct!==1/0?(Rt=1/(lt-Ct),C[10]=(Ct+lt)*Rt,C[14]=2*Ct*lt*Rt):(C[10]=-1,C[14]=-2*lt),C},r.pick=function(C,D){for(var q={},lt=0;lt<D.length;lt++){var Ct=D[lt];Ct in C&&(q[Ct]=C[Ct])}return q},r.plugin=Ai,r.polygonIntersectsPolygon=qa,r.postMapLoadEvent=Dt,r.postTurnstileEvent=_t,r.potpack=ef,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=wn,r.registerForPluginStateChange=function(C){return C({pluginStatus:Yi,pluginURL:ai}),Bi.on("pluginStateChange",C),C},r.rotate=function(C,D,q){var lt=D[0],Ct=D[1],Rt=D[2],jt=D[3],Kt=Math.sin(q),oe=Math.cos(q);return C[0]=lt*oe+Rt*Kt,C[1]=Ct*oe+jt*Kt,C[2]=lt*-Kt+Rt*oe,C[3]=Ct*-Kt+jt*oe,C},r.rotateX=function(C,D,q){var lt=Math.sin(q),Ct=Math.cos(q),Rt=D[4],jt=D[5],Kt=D[6],oe=D[7],xe=D[8],_e=D[9],Oe=D[10],Be=D[11];return D!==C&&(C[0]=D[0],C[1]=D[1],C[2]=D[2],C[3]=D[3],C[12]=D[12],C[13]=D[13],C[14]=D[14],C[15]=D[15]),C[4]=Rt*Ct+xe*lt,C[5]=jt*Ct+_e*lt,C[6]=Kt*Ct+Oe*lt,C[7]=oe*Ct+Be*lt,C[8]=xe*Ct-Rt*lt,C[9]=_e*Ct-jt*lt,C[10]=Oe*Ct-Kt*lt,C[11]=Be*Ct-oe*lt,C},r.rotateZ=function(C,D,q){var lt=Math.sin(q),Ct=Math.cos(q),Rt=D[0],jt=D[1],Kt=D[2],oe=D[3],xe=D[4],_e=D[5],Oe=D[6],Be=D[7];return D!==C&&(C[8]=D[8],C[9]=D[9],C[10]=D[10],C[11]=D[11],C[12]=D[12],C[13]=D[13],C[14]=D[14],C[15]=D[15]),C[0]=Rt*Ct+xe*lt,C[1]=jt*Ct+_e*lt,C[2]=Kt*Ct+Oe*lt,C[3]=oe*Ct+Be*lt,C[4]=xe*Ct-Rt*lt,C[5]=_e*Ct-jt*lt,C[6]=Oe*Ct-Kt*lt,C[7]=Be*Ct-oe*lt,C},r.scale=function(C,D,q){var lt=q[0],Ct=q[1],Rt=q[2];return C[0]=D[0]*lt,C[1]=D[1]*lt,C[2]=D[2]*lt,C[3]=D[3]*lt,C[4]=D[4]*Ct,C[5]=D[5]*Ct,C[6]=D[6]*Ct,C[7]=D[7]*Ct,C[8]=D[8]*Rt,C[9]=D[9]*Rt,C[10]=D[10]*Rt,C[11]=D[11]*Rt,C[12]=D[12],C[13]=D[13],C[14]=D[14],C[15]=D[15],C},r.scale$1=function(C,D,q){return C[0]=D[0]*q,C[1]=D[1]*q,C[2]=D[2]*q,C[3]=D[3]*q,C},r.scale$2=function(C,D,q){return C[0]=D[0]*q,C[1]=D[1]*q,C[2]=D[2]*q,C},r.setCacheLimits=function(C,D){Tt=C,bt=D},r.setRTLTextPlugin=function(C,D,q){if(q===void 0&&(q=!1),Yi===eo||Yi===xo||Yi===Ni)throw new Error("setRTLTextPlugin cannot be called multiple times.");ai=J.resolveURL(C),Yi=eo,ps=D,xa(),q||rl()},r.sphericalToCartesian=function(C){var D=C[0],q=C[1],lt=C[2];return q+=90,q*=Math.PI/180,lt*=Math.PI/180,{x:D*Math.cos(q)*Math.sin(lt),y:D*Math.sin(q)*Math.sin(lt),z:D*Math.cos(lt)}},r.sqrLen=Wp,r.styleSpec=Pt,r.sub=Vp,r.symbolSize=Wd,r.transformMat3=function(C,D,q){var lt=D[0],Ct=D[1],Rt=D[2];return C[0]=lt*q[0]+Ct*q[3]+Rt*q[6],C[1]=lt*q[1]+Ct*q[4]+Rt*q[7],C[2]=lt*q[2]+Ct*q[5]+Rt*q[8],C},r.transformMat4=qc,r.translate=function(C,D,q){var lt,Ct,Rt,jt,Kt,oe,xe,_e,Oe,Be,Fe,er,or=q[0],Tr=q[1],kr=q[2];return D===C?(C[12]=D[0]*or+D[4]*Tr+D[8]*kr+D[12],C[13]=D[1]*or+D[5]*Tr+D[9]*kr+D[13],C[14]=D[2]*or+D[6]*Tr+D[10]*kr+D[14],C[15]=D[3]*or+D[7]*Tr+D[11]*kr+D[15]):(lt=D[0],Ct=D[1],Rt=D[2],jt=D[3],Kt=D[4],oe=D[5],xe=D[6],_e=D[7],Oe=D[8],Be=D[9],Fe=D[10],er=D[11],C[0]=lt,C[1]=Ct,C[2]=Rt,C[3]=jt,C[4]=Kt,C[5]=oe,C[6]=xe,C[7]=_e,C[8]=Oe,C[9]=Be,C[10]=Fe,C[11]=er,C[12]=lt*or+Kt*Tr+Oe*kr+D[12],C[13]=Ct*or+oe*Tr+Be*kr+D[13],C[14]=Rt*or+xe*Tr+Fe*kr+D[14],C[15]=jt*or+_e*Tr+er*kr+D[15]),C},r.triggerPluginCompletionEvent=Es,r.uniqueId=d,r.validateCustomStyleLayer=function(C){var D=[],q=C.id;return q===void 0&&D.push({message:"layers."+q+': missing required property "id"'}),C.render===void 0&&D.push({message:"layers."+q+': missing required method "render"'}),C.renderingMode&&C.renderingMode!=="2d"&&C.renderingMode!=="3d"&&D.push({message:"layers."+q+': property "renderingMode" must be either "2d" or "3d"'}),D},r.validateLight=zi,r.validateStyle=Ji,r.values=function(C){var D=[];for(var q in C)D.push(C[q]);return D},r.vectorTile=$l,r.version=h,r.warnOnce=A,r.webpSupported=Y,r.window=self,r.wrap=l}),k(0,function(r){function m(Vt){var Zt=typeof Vt;if(Zt==="number"||Zt==="boolean"||Zt==="string"||Vt==null)return JSON.stringify(Vt);if(Array.isArray(Vt)){for(var Gt="[",Yt=0,ne=Vt;Yt<ne.length;Yt+=1)Gt+=m(ne[Yt])+",";return Gt+"]"}for(var re=Object.keys(Vt).sort(),Pt="{",Nt=0;Nt<re.length;Nt++)Pt+=JSON.stringify(re[Nt])+":"+m(Vt[re[Nt]])+",";return Pt+"}"}function h(Vt){for(var Zt="",Gt=0,Yt=r.refProperties;Gt<Yt.length;Gt+=1)Zt+="/"+m(Vt[Yt[Gt]]);return Zt}var s=function(Vt){this.keyCache={},Vt&&this.replace(Vt)};s.prototype.replace=function(Vt){this._layerConfigs={},this._layers={},this.update(Vt,[])},s.prototype.update=function(Vt,Zt){for(var Gt=this,Yt=0,ne=Vt;Yt<ne.length;Yt+=1){var re=ne[Yt];this._layerConfigs[re.id]=re;var Pt=this._layers[re.id]=r.createStyleLayer(re);Pt._featureFilter=r.featureFilter(Pt.filter),this.keyCache[re.id]&&delete this.keyCache[re.id]}for(var Nt=0,ee=Zt;Nt<ee.length;Nt+=1){var te=ee[Nt];delete this.keyCache[te],delete this._layerConfigs[te],delete this._layers[te]}this.familiesBySource={};for(var ge=0,pe=function(Pe,De){for(var Ue={},tr=0;tr<Pe.length;tr++){var Ge=De&&De[Pe[tr].id]||h(Pe[tr]);De&&(De[Pe[tr].id]=Ge);var Ze=Ue[Ge];Ze||(Ze=Ue[Ge]=[]),Ze.push(Pe[tr])}var We=[];for(var pr in Ue)We.push(Ue[pr]);return We}(r.values(this._layerConfigs),this.keyCache);ge<pe.length;ge+=1){var me=pe[ge].map(function(Pe){return Gt._layers[Pe.id]}),ce=me[0];if(ce.visibility!=="none"){var we=ce.source||"",ue=this.familiesBySource[we];ue||(ue=this.familiesBySource[we]={});var he=ce.sourceLayer||"_geojsonTileLayer",be=ue[he];be||(be=ue[he]=[]),be.push(me)}}};var e=function(Vt){var Zt={},Gt=[];for(var Yt in Vt){var ne=Vt[Yt],re=Zt[Yt]={};for(var Pt in ne){var Nt=ne[+Pt];if(Nt&&Nt.bitmap.width!==0&&Nt.bitmap.height!==0){var ee={x:0,y:0,w:Nt.bitmap.width+2,h:Nt.bitmap.height+2};Gt.push(ee),re[Pt]={rect:ee,metrics:Nt.metrics}}}}var te=r.potpack(Gt),ge=te.w,pe=te.h,me=new r.AlphaImage({width:ge||1,height:pe||1});for(var ce in Vt){var we=Vt[ce];for(var ue in we){var he=we[+ue];if(he&&he.bitmap.width!==0&&he.bitmap.height!==0){var be=Zt[ce][ue].rect;r.AlphaImage.copy(he.bitmap,me,{x:0,y:0},{x:be.x+1,y:be.y+1},he.bitmap)}}}this.image=me,this.positions=Zt};r.register("GlyphAtlas",e);var t=function(Vt){this.tileID=new r.OverscaledTileID(Vt.tileID.overscaledZ,Vt.tileID.wrap,Vt.tileID.canonical.z,Vt.tileID.canonical.x,Vt.tileID.canonical.y),this.uid=Vt.uid,this.zoom=Vt.zoom,this.pixelRatio=Vt.pixelRatio,this.tileSize=Vt.tileSize,this.source=Vt.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Vt.showCollisionBoxes,this.collectResourceTiming=!!Vt.collectResourceTiming,this.returnDependencies=!!Vt.returnDependencies,this.promoteId=Vt.promoteId};function n(Vt,Zt,Gt){for(var Yt=new r.EvaluationParameters(Zt),ne=0,re=Vt;ne<re.length;ne+=1)re[ne].recalculate(Yt,Gt)}function a(Vt,Zt){var Gt=r.getArrayBuffer(Vt.request,function(Yt,ne,re,Pt){Yt?Zt(Yt):ne&&Zt(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(ne)),rawData:ne,cacheControl:re,expires:Pt})});return function(){Gt.cancel(),Zt()}}t.prototype.parse=function(Vt,Zt,Gt,Yt,ne){var re=this;this.status="parsing",this.data=Vt,this.collisionBoxArray=new r.CollisionBoxArray;var Pt=new r.DictionaryCoder(Object.keys(Vt.layers).sort()),Nt=new r.FeatureIndex(this.tileID,this.promoteId);Nt.bucketLayerIDs=[];var ee,te,ge,pe,me={},ce={featureIndex:Nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Gt},we=Zt.familiesBySource[this.source];for(var ue in we){var he=Vt.layers[ue];if(he){he.version===1&&r.warnOnce('Vector tile source "'+this.source+'" layer "'+ue+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var be=Pt.encode(ue),Pe=[],De=0;De<he.length;De++){var Ue=he.feature(De),tr=Nt.getId(Ue,ue);Pe.push({feature:Ue,id:tr,index:De,sourceLayerIndex:be})}for(var Ge=0,Ze=we[ue];Ge<Ze.length;Ge+=1){var We=Ze[Ge],pr=We[0];pr.minzoom&&this.zoom<Math.floor(pr.minzoom)||pr.maxzoom&&this.zoom>=pr.maxzoom||pr.visibility!=="none"&&(n(We,this.zoom,Gt),(me[pr.id]=pr.createBucket({index:Nt.bucketLayerIDs.length,layers:We,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:be,sourceID:this.source})).populate(Pe,ce,this.tileID.canonical),Nt.bucketLayerIDs.push(We.map(function(Ke){return Ke.id})))}}}var xr=r.mapObject(ce.glyphDependencies,function(Ke){return Object.keys(Ke).map(Number)});Object.keys(xr).length?Yt.send("getGlyphs",{uid:this.uid,stacks:xr},function(Ke,ar){ee||(ee=Ke,te=ar,ir.call(re))}):te={};var sr=Object.keys(ce.iconDependencies);sr.length?Yt.send("getImages",{icons:sr,source:this.source,tileID:this.tileID,type:"icons"},function(Ke,ar){ee||(ee=Ke,ge=ar,ir.call(re))}):ge={};var $e=Object.keys(ce.patternDependencies);function ir(){if(ee)return ne(ee);if(te&&ge&&pe){var Ke=new e(te),ar=new r.ImageAtlas(ge,pe);for(var fr in me){var mr=me[fr];mr instanceof r.SymbolBucket?(n(mr.layers,this.zoom,Gt),r.performSymbolLayout(mr,te,Ke.positions,ge,ar.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):mr.hasPattern&&(mr instanceof r.LineBucket||mr instanceof r.FillBucket||mr instanceof r.FillExtrusionBucket)&&(n(mr.layers,this.zoom,Gt),mr.addFeatures(ce,this.tileID.canonical,ar.patternPositions))}this.status="done",ne(null,{buckets:r.values(me).filter(function(Cr){return!Cr.isEmpty()}),featureIndex:Nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ke.image,imageAtlas:ar,glyphMap:this.returnDependencies?te:null,iconMap:this.returnDependencies?ge:null,glyphPositions:this.returnDependencies?Ke.positions:null})}}$e.length?Yt.send("getImages",{icons:$e,source:this.source,tileID:this.tileID,type:"patterns"},function(Ke,ar){ee||(ee=Ke,pe=ar,ir.call(re))}):pe={},ir.call(this)};var i=function(Vt,Zt,Gt,Yt){this.actor=Vt,this.layerIndex=Zt,this.availableImages=Gt,this.loadVectorData=Yt||a,this.loading={},this.loaded={}};i.prototype.loadTile=function(Vt,Zt){var Gt=this,Yt=Vt.uid;this.loading||(this.loading={});var ne=!!(Vt&&Vt.request&&Vt.request.collectResourceTiming)&&new r.RequestPerformance(Vt.request),re=this.loading[Yt]=new t(Vt);re.abort=this.loadVectorData(Vt,function(Pt,Nt){if(delete Gt.loading[Yt],Pt||!Nt)return re.status="done",Gt.loaded[Yt]=re,Zt(Pt);var ee=Nt.rawData,te={};Nt.expires&&(te.expires=Nt.expires),Nt.cacheControl&&(te.cacheControl=Nt.cacheControl);var ge={};if(ne){var pe=ne.finish();pe&&(ge.resourceTiming=JSON.parse(JSON.stringify(pe)))}re.vectorTile=Nt.vectorTile,re.parse(Nt.vectorTile,Gt.layerIndex,Gt.availableImages,Gt.actor,function(me,ce){if(me||!ce)return Zt(me);Zt(null,r.extend({rawTileData:ee.slice(0)},ce,te,ge))}),Gt.loaded=Gt.loaded||{},Gt.loaded[Yt]=re})},i.prototype.reloadTile=function(Vt,Zt){var Gt=this,Yt=this.loaded,ne=Vt.uid,re=this;if(Yt&&Yt[ne]){var Pt=Yt[ne];Pt.showCollisionBoxes=Vt.showCollisionBoxes;var Nt=function(ee,te){var ge=Pt.reloadCallback;ge&&(delete Pt.reloadCallback,Pt.parse(Pt.vectorTile,re.layerIndex,Gt.availableImages,re.actor,ge)),Zt(ee,te)};Pt.status==="parsing"?Pt.reloadCallback=Nt:Pt.status==="done"&&(Pt.vectorTile?Pt.parse(Pt.vectorTile,this.layerIndex,this.availableImages,this.actor,Nt):Nt())}},i.prototype.abortTile=function(Vt,Zt){var Gt=this.loading,Yt=Vt.uid;Gt&&Gt[Yt]&&Gt[Yt].abort&&(Gt[Yt].abort(),delete Gt[Yt]),Zt()},i.prototype.removeTile=function(Vt,Zt){var Gt=this.loaded,Yt=Vt.uid;Gt&&Gt[Yt]&&delete Gt[Yt],Zt()};var c=r.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(Vt,Zt){var Gt=Vt.uid,Yt=Vt.encoding,ne=Vt.rawImageData,re=c&&ne instanceof c?this.getImageData(ne):ne,Pt=new r.DEMData(Gt,re,Yt);this.loaded=this.loaded||{},this.loaded[Gt]=Pt,Zt(null,Pt)},l.prototype.getImageData=function(Vt){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Vt.width,Vt.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Vt.width,this.offscreenCanvas.height=Vt.height,this.offscreenCanvasContext.drawImage(Vt,0,0,Vt.width,Vt.height);var Zt=this.offscreenCanvasContext.getImageData(-1,-1,Vt.width+2,Vt.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:Zt.width,height:Zt.height},Zt.data)},l.prototype.removeTile=function(Vt){var Zt=this.loaded,Gt=Vt.uid;Zt&&Zt[Gt]&&delete Zt[Gt]};var u=function Vt(Zt,Gt){var Yt,ne=Zt&&Zt.type;if(ne==="FeatureCollection")for(Yt=0;Yt<Zt.features.length;Yt++)Vt(Zt.features[Yt],Gt);else if(ne==="GeometryCollection")for(Yt=0;Yt<Zt.geometries.length;Yt++)Vt(Zt.geometries[Yt],Gt);else if(ne==="Feature")Vt(Zt.geometry,Gt);else if(ne==="Polygon")f(Zt.coordinates,Gt);else if(ne==="MultiPolygon")for(Yt=0;Yt<Zt.coordinates.length;Yt++)f(Zt.coordinates[Yt],Gt);return Zt};function f(Vt,Zt){if(Vt.length!==0){d(Vt[0],Zt);for(var Gt=1;Gt<Vt.length;Gt++)d(Vt[Gt],!Zt)}}function d(Vt,Zt){for(var Gt=0,Yt=0,ne=Vt.length,re=ne-1;Yt<ne;re=Yt++)Gt+=(Vt[Yt][0]-Vt[re][0])*(Vt[re][1]+Vt[Yt][1]);Gt>=0!=!!Zt&&Vt.reverse()}var w=r.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(Vt){this._feature=Vt,this.extent=r.EXTENT,this.type=Vt.type,this.properties=Vt.tags,"id"in Vt&&!isNaN(Vt.id)&&(this.id=parseInt(Vt.id,10))};v.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Vt=[],Zt=0,Gt=this._feature.geometry;Zt<Gt.length;Zt+=1){var Yt=Gt[Zt];Vt.push([new r.Point$1(Yt[0],Yt[1])])}return Vt}for(var ne=[],re=0,Pt=this._feature.geometry;re<Pt.length;re+=1){for(var Nt=[],ee=0,te=Pt[re];ee<te.length;ee+=1){var ge=te[ee];Nt.push(new r.Point$1(ge[0],ge[1]))}ne.push(Nt)}return ne},v.prototype.toGeoJSON=function(Vt,Zt,Gt){return w.call(this,Vt,Zt,Gt)};var p=function(Vt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=Vt.length,this._features=Vt};p.prototype.feature=function(Vt){return new v(this._features[Vt])};var y=r.vectorTile.VectorTileFeature,b=x;function x(Vt,Zt){this.options=Zt||{},this.features=Vt,this.length=Vt.length}function _(Vt,Zt){this.id=typeof Vt.id=="number"?Vt.id:void 0,this.type=Vt.type,this.rawGeometry=Vt.type===1?[Vt.geometry]:Vt.geometry,this.properties=Vt.tags,this.extent=Zt||4096}x.prototype.feature=function(Vt){return new _(this.features[Vt],this.options.extent)},_.prototype.loadGeometry=function(){var Vt=this.rawGeometry;this.geometry=[];for(var Zt=0;Zt<Vt.length;Zt++){for(var Gt=Vt[Zt],Yt=[],ne=0;ne<Gt.length;ne++)Yt.push(new r.Point$1(Gt[ne][0],Gt[ne][1]));this.geometry.push(Yt)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Vt=this.geometry,Zt=1/0,Gt=-1/0,Yt=1/0,ne=-1/0,re=0;re<Vt.length;re++)for(var Pt=Vt[re],Nt=0;Nt<Pt.length;Nt++){var ee=Pt[Nt];Zt=Math.min(Zt,ee.x),Gt=Math.max(Gt,ee.x),Yt=Math.min(Yt,ee.y),ne=Math.max(ne,ee.y)}return[Zt,Yt,Gt,ne]},_.prototype.toGeoJSON=y.prototype.toGeoJSON;var g=E,A=E,M=function(Vt,Zt){Zt=Zt||{};var Gt={};for(var Yt in Vt)Gt[Yt]=new b(Vt[Yt].features,Zt),Gt[Yt].name=Yt,Gt[Yt].version=Zt.version,Gt[Yt].extent=Zt.extent;return E({layers:Gt})},L=b;function E(Vt){var Zt=new r.pbf;return function(Gt,Yt){for(var ne in Gt.layers)Yt.writeMessage(3,S,Gt.layers[ne])}(Vt,Zt),Zt.finish()}function S(Vt,Zt){var Gt;Zt.writeVarintField(15,Vt.version||1),Zt.writeStringField(1,Vt.name||""),Zt.writeVarintField(5,Vt.extent||4096);var Yt={keys:[],values:[],keycache:{},valuecache:{}};for(Gt=0;Gt<Vt.length;Gt++)Yt.feature=Vt.feature(Gt),Zt.writeMessage(2,O,Yt);var ne=Yt.keys;for(Gt=0;Gt<ne.length;Gt++)Zt.writeStringField(3,ne[Gt]);var re=Yt.values;for(Gt=0;Gt<re.length;Gt++)Zt.writeMessage(4,B,re[Gt])}function O(Vt,Zt){var Gt=Vt.feature;Gt.id!==void 0&&Zt.writeVarintField(1,Gt.id),Zt.writeMessage(2,P,Vt),Zt.writeVarintField(3,Gt.type),Zt.writeMessage(4,j,Gt)}function P(Vt,Zt){var Gt=Vt.feature,Yt=Vt.keys,ne=Vt.values,re=Vt.keycache,Pt=Vt.valuecache;for(var Nt in Gt.properties){var ee=re[Nt];ee===void 0&&(Yt.push(Nt),ee=Yt.length-1,re[Nt]=ee),Zt.writeVarint(ee);var te=Gt.properties[Nt],ge=typeof te;ge!=="string"&&ge!=="boolean"&&ge!=="number"&&(te=JSON.stringify(te));var pe=ge+":"+te,me=Pt[pe];me===void 0&&(ne.push(te),me=ne.length-1,Pt[pe]=me),Zt.writeVarint(me)}}function U(Vt,Zt){return(Zt<<3)+(7&Vt)}function R(Vt){return Vt<<1^Vt>>31}function j(Vt,Zt){for(var Gt=Vt.loadGeometry(),Yt=Vt.type,ne=0,re=0,Pt=Gt.length,Nt=0;Nt<Pt;Nt++){var ee=Gt[Nt],te=1;Yt===1&&(te=ee.length),Zt.writeVarint(U(1,te));for(var ge=Yt===3?ee.length-1:ee.length,pe=0;pe<ge;pe++){pe===1&&Yt!==1&&Zt.writeVarint(U(2,ge-1));var me=ee[pe].x-ne,ce=ee[pe].y-re;Zt.writeVarint(R(me)),Zt.writeVarint(R(ce)),ne+=me,re+=ce}Yt===3&&Zt.writeVarint(U(7,1))}}function B(Vt,Zt){var Gt=typeof Vt;Gt==="string"?Zt.writeStringField(1,Vt):Gt==="boolean"?Zt.writeBooleanField(7,Vt):Gt==="number"&&(Vt%1!=0?Zt.writeDoubleField(3,Vt):Vt<0?Zt.writeSVarintField(6,Vt):Zt.writeVarintField(5,Vt))}function z(Vt,Zt,Gt,Yt,ne,re){if(!(ne-Yt<=Gt)){var Pt=Yt+ne>>1;G(Vt,Zt,Pt,Yt,ne,re%2),z(Vt,Zt,Gt,Yt,Pt-1,re+1),z(Vt,Zt,Gt,Pt+1,ne,re+1)}}function G(Vt,Zt,Gt,Yt,ne,re){for(;ne>Yt;){if(ne-Yt>600){var Pt=ne-Yt+1,Nt=Gt-Yt+1,ee=Math.log(Pt),te=.5*Math.exp(2*ee/3),ge=.5*Math.sqrt(ee*te*(Pt-te)/Pt)*(Nt-Pt/2<0?-1:1);G(Vt,Zt,Gt,Math.max(Yt,Math.floor(Gt-Nt*te/Pt+ge)),Math.min(ne,Math.floor(Gt+(Pt-Nt)*te/Pt+ge)),re)}var pe=Zt[2*Gt+re],me=Yt,ce=ne;for(V(Vt,Zt,Yt,Gt),Zt[2*ne+re]>pe&&V(Vt,Zt,Yt,ne);me<ce;){for(V(Vt,Zt,me,ce),me++,ce--;Zt[2*me+re]<pe;)me++;for(;Zt[2*ce+re]>pe;)ce--}Zt[2*Yt+re]===pe?V(Vt,Zt,Yt,ce):V(Vt,Zt,++ce,ne),ce<=Gt&&(Yt=ce+1),Gt<=ce&&(ne=ce-1)}}function V(Vt,Zt,Gt,Yt){et(Vt,Gt,Yt),et(Zt,2*Gt,2*Yt),et(Zt,2*Gt+1,2*Yt+1)}function et(Vt,Zt,Gt){var Yt=Vt[Zt];Vt[Zt]=Vt[Gt],Vt[Gt]=Yt}function J(Vt,Zt,Gt,Yt){var ne=Vt-Gt,re=Zt-Yt;return ne*ne+re*re}g.fromVectorTileJs=A,g.fromGeojsonVt=M,g.GeoJSONWrapper=L;var X=function(Vt){return Vt[0]},Y=function(Vt){return Vt[1]},Z=function(Vt,Zt,Gt,Yt,ne){Zt===void 0&&(Zt=X),Gt===void 0&&(Gt=Y),Yt===void 0&&(Yt=64),ne===void 0&&(ne=Float64Array),this.nodeSize=Yt,this.points=Vt;for(var re=Vt.length<65536?Uint16Array:Uint32Array,Pt=this.ids=new re(Vt.length),Nt=this.coords=new ne(2*Vt.length),ee=0;ee<Vt.length;ee++)Pt[ee]=ee,Nt[2*ee]=Zt(Vt[ee]),Nt[2*ee+1]=Gt(Vt[ee]);z(Pt,Nt,Yt,0,Pt.length-1,0)};Z.prototype.range=function(Vt,Zt,Gt,Yt){return function(ne,re,Pt,Nt,ee,te,ge){for(var pe,me,ce=[0,ne.length-1,0],we=[];ce.length;){var ue=ce.pop(),he=ce.pop(),be=ce.pop();if(he-be<=ge)for(var Pe=be;Pe<=he;Pe++)pe=re[2*Pe],me=re[2*Pe+1],pe>=Pt&&pe<=ee&&me>=Nt&&me<=te&&we.push(ne[Pe]);else{var De=Math.floor((be+he)/2);pe=re[2*De],me=re[2*De+1],pe>=Pt&&pe<=ee&&me>=Nt&&me<=te&&we.push(ne[De]);var Ue=(ue+1)%2;(ue===0?Pt<=pe:Nt<=me)&&(ce.push(be),ce.push(De-1),ce.push(Ue)),(ue===0?ee>=pe:te>=me)&&(ce.push(De+1),ce.push(he),ce.push(Ue))}}return we}(this.ids,this.coords,Vt,Zt,Gt,Yt,this.nodeSize)},Z.prototype.within=function(Vt,Zt,Gt){return function(Yt,ne,re,Pt,Nt,ee){for(var te=[0,Yt.length-1,0],ge=[],pe=Nt*Nt;te.length;){var me=te.pop(),ce=te.pop(),we=te.pop();if(ce-we<=ee)for(var ue=we;ue<=ce;ue++)J(ne[2*ue],ne[2*ue+1],re,Pt)<=pe&&ge.push(Yt[ue]);else{var he=Math.floor((we+ce)/2),be=ne[2*he],Pe=ne[2*he+1];J(be,Pe,re,Pt)<=pe&&ge.push(Yt[he]);var De=(me+1)%2;(me===0?re-Nt<=be:Pt-Nt<=Pe)&&(te.push(we),te.push(he-1),te.push(De)),(me===0?re+Nt>=be:Pt+Nt>=Pe)&&(te.push(he+1),te.push(ce),te.push(De))}}return ge}(this.ids,this.coords,Vt,Zt,Gt,this.nodeSize)};var tt={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Vt){return Vt}},rt=function(Vt){this.options=yt(Object.create(tt),Vt),this.trees=new Array(this.options.maxZoom+1)};function nt(Vt,Zt,Gt,Yt,ne){return{x:Vt,y:Zt,zoom:1/0,id:Gt,parentId:-1,numPoints:Yt,properties:ne}}function ot(Vt,Zt){var Gt=Vt.geometry.coordinates,Yt=Gt[0],ne=Gt[1];return{x:gt(Yt),y:kt(ne),zoom:1/0,index:Zt,parentId:-1}}function ct(Vt){return{type:"Feature",id:Vt.id,properties:pt(Vt),geometry:{type:"Point",coordinates:[(Yt=Vt.x,360*(Yt-.5)),(Zt=Vt.y,Gt=(180-360*Zt)*Math.PI/180,360*Math.atan(Math.exp(Gt))/Math.PI-90)]}};var Zt,Gt,Yt}function pt(Vt){var Zt=Vt.numPoints,Gt=Zt>=1e4?Math.round(Zt/1e3)+"k":Zt>=1e3?Math.round(Zt/100)/10+"k":Zt;return yt(yt({},Vt.properties),{cluster:!0,cluster_id:Vt.id,point_count:Zt,point_count_abbreviated:Gt})}function gt(Vt){return Vt/360+.5}function kt(Vt){var Zt=Math.sin(Vt*Math.PI/180),Gt=.5-.25*Math.log((1+Zt)/(1-Zt))/Math.PI;return Gt<0?0:Gt>1?1:Gt}function yt(Vt,Zt){for(var Gt in Zt)Vt[Gt]=Zt[Gt];return Vt}function mt(Vt){return Vt.x}function Ot(Vt){return Vt.y}function vt(Vt,Zt,Gt,Yt){for(var ne,re=Yt,Pt=Gt-Zt>>1,Nt=Gt-Zt,ee=Vt[Zt],te=Vt[Zt+1],ge=Vt[Gt],pe=Vt[Gt+1],me=Zt+3;me<Gt;me+=3){var ce=xt(Vt[me],Vt[me+1],ee,te,ge,pe);if(ce>re)ne=me,re=ce;else if(ce===re){var we=Math.abs(me-Pt);we<Nt&&(ne=me,Nt=we)}}re>Yt&&(ne-Zt>3&&vt(Vt,Zt,ne,Yt),Vt[ne+2]=re,Gt-ne>3&&vt(Vt,ne,Gt,Yt))}function xt(Vt,Zt,Gt,Yt,ne,re){var Pt=ne-Gt,Nt=re-Yt;if(Pt!==0||Nt!==0){var ee=((Vt-Gt)*Pt+(Zt-Yt)*Nt)/(Pt*Pt+Nt*Nt);ee>1?(Gt=ne,Yt=re):ee>0&&(Gt+=Pt*ee,Yt+=Nt*ee)}return(Pt=Vt-Gt)*Pt+(Nt=Zt-Yt)*Nt}function st(Vt,Zt,Gt,Yt){var ne={id:Vt===void 0?null:Vt,type:Zt,geometry:Gt,tags:Yt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(re){var Pt=re.geometry,Nt=re.type;if(Nt==="Point"||Nt==="MultiPoint"||Nt==="LineString")at(re,Pt);else if(Nt==="Polygon"||Nt==="MultiLineString")for(var ee=0;ee<Pt.length;ee++)at(re,Pt[ee]);else if(Nt==="MultiPolygon")for(ee=0;ee<Pt.length;ee++)for(var te=0;te<Pt[ee].length;te++)at(re,Pt[ee][te])}(ne),ne}function at(Vt,Zt){for(var Gt=0;Gt<Zt.length;Gt+=3)Vt.minX=Math.min(Vt.minX,Zt[Gt]),Vt.minY=Math.min(Vt.minY,Zt[Gt+1]),Vt.maxX=Math.max(Vt.maxX,Zt[Gt]),Vt.maxY=Math.max(Vt.maxY,Zt[Gt+1])}function ht(Vt,Zt,Gt,Yt){if(Zt.geometry){var ne=Zt.geometry.coordinates,re=Zt.geometry.type,Pt=Math.pow(Gt.tolerance/((1<<Gt.maxZoom)*Gt.extent),2),Nt=[],ee=Zt.id;if(Gt.promoteId?ee=Zt.properties[Gt.promoteId]:Gt.generateId&&(ee=Yt||0),re==="Point")Lt(ne,Nt);else if(re==="MultiPoint")for(var te=0;te<ne.length;te++)Lt(ne[te],Nt);else if(re==="LineString")Mt(ne,Nt,Pt,!1);else if(re==="MultiLineString"){if(Gt.lineMetrics){for(te=0;te<ne.length;te++)Nt=[],Mt(ne[te],Nt,Pt,!1),Vt.push(st(ee,"LineString",Nt,Zt.properties));return}_t(ne,Nt,Pt,!1)}else if(re==="Polygon")_t(ne,Nt,Pt,!0);else{if(re!=="MultiPolygon"){if(re==="GeometryCollection"){for(te=0;te<Zt.geometry.geometries.length;te++)ht(Vt,{id:ee,geometry:Zt.geometry.geometries[te],properties:Zt.properties},Gt,Yt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(te=0;te<ne.length;te++){var ge=[];_t(ne[te],ge,Pt,!0),Nt.push(ge)}}Vt.push(st(ee,re,Nt,Zt.properties))}}function Lt(Vt,Zt){Zt.push(St(Vt[0])),Zt.push(Dt(Vt[1])),Zt.push(0)}function Mt(Vt,Zt,Gt,Yt){for(var ne,re,Pt=0,Nt=0;Nt<Vt.length;Nt++){var ee=St(Vt[Nt][0]),te=Dt(Vt[Nt][1]);Zt.push(ee),Zt.push(te),Zt.push(0),Nt>0&&(Pt+=Yt?(ne*te-ee*re)/2:Math.sqrt(Math.pow(ee-ne,2)+Math.pow(te-re,2))),ne=ee,re=te}var ge=Zt.length-3;Zt[2]=1,vt(Zt,0,ge,Gt),Zt[ge+2]=1,Zt.size=Math.abs(Pt),Zt.start=0,Zt.end=Zt.size}function _t(Vt,Zt,Gt,Yt){for(var ne=0;ne<Vt.length;ne++){var re=[];Mt(Vt[ne],re,Gt,Yt),Zt.push(re)}}function St(Vt){return Vt/360+.5}function Dt(Vt){var Zt=Math.sin(Vt*Math.PI/180),Gt=.5-.25*Math.log((1+Zt)/(1-Zt))/Math.PI;return Gt<0?0:Gt>1?1:Gt}function ut(Vt,Zt,Gt,Yt,ne,re,Pt,Nt){if(Yt/=Zt,re>=(Gt/=Zt)&&Pt<Yt)return Vt;if(Pt<Gt||re>=Yt)return null;for(var ee=[],te=0;te<Vt.length;te++){var ge=Vt[te],pe=ge.geometry,me=ge.type,ce=ne===0?ge.minX:ge.minY,we=ne===0?ge.maxX:ge.maxY;if(ce>=Gt&&we<Yt)ee.push(ge);else if(!(we<Gt||ce>=Yt)){var ue=[];if(me==="Point"||me==="MultiPoint")Tt(pe,ue,Gt,Yt,ne);else if(me==="LineString")bt(pe,ue,Gt,Yt,ne,!1,Nt.lineMetrics);else if(me==="MultiLineString")zt(pe,ue,Gt,Yt,ne,!1);else if(me==="Polygon")zt(pe,ue,Gt,Yt,ne,!0);else if(me==="MultiPolygon")for(var he=0;he<pe.length;he++){var be=[];zt(pe[he],be,Gt,Yt,ne,!0),be.length&&ue.push(be)}if(ue.length){if(Nt.lineMetrics&&me==="LineString"){for(he=0;he<ue.length;he++)ee.push(st(ge.id,me,ue[he],ge.tags));continue}me!=="LineString"&&me!=="MultiLineString"||(ue.length===1?(me="LineString",ue=ue[0]):me="MultiLineString"),me!=="Point"&&me!=="MultiPoint"||(me=ue.length===3?"Point":"MultiPoint"),ee.push(st(ge.id,me,ue,ge.tags))}}}return ee.length?ee:null}function Tt(Vt,Zt,Gt,Yt,ne){for(var re=0;re<Vt.length;re+=3){var Pt=Vt[re+ne];Pt>=Gt&&Pt<=Yt&&(Zt.push(Vt[re]),Zt.push(Vt[re+1]),Zt.push(Vt[re+2]))}}function bt(Vt,Zt,Gt,Yt,ne,re,Pt){for(var Nt,ee,te=It(Vt),ge=ne===0?$t:Wt,pe=Vt.start,me=0;me<Vt.length-3;me+=3){var ce=Vt[me],we=Vt[me+1],ue=Vt[me+2],he=Vt[me+3],be=Vt[me+4],Pe=ne===0?ce:we,De=ne===0?he:be,Ue=!1;Pt&&(Nt=Math.sqrt(Math.pow(ce-he,2)+Math.pow(we-be,2))),Pe<Gt?De>Gt&&(ee=ge(te,ce,we,he,be,Gt),Pt&&(te.start=pe+Nt*ee)):Pe>Yt?De<Yt&&(ee=ge(te,ce,we,he,be,Yt),Pt&&(te.start=pe+Nt*ee)):Ft(te,ce,we,ue),De<Gt&&Pe>=Gt&&(ee=ge(te,ce,we,he,be,Gt),Ue=!0),De>Yt&&Pe<=Yt&&(ee=ge(te,ce,we,he,be,Yt),Ue=!0),!re&&Ue&&(Pt&&(te.end=pe+Nt*ee),Zt.push(te),te=It(Vt)),Pt&&(pe+=Nt)}var tr=Vt.length-3;ce=Vt[tr],we=Vt[tr+1],ue=Vt[tr+2],(Pe=ne===0?ce:we)>=Gt&&Pe<=Yt&&Ft(te,ce,we,ue),tr=te.length-3,re&&tr>=3&&(te[tr]!==te[0]||te[tr+1]!==te[1])&&Ft(te,te[0],te[1],te[2]),te.length&&Zt.push(te)}function It(Vt){var Zt=[];return Zt.size=Vt.size,Zt.start=Vt.start,Zt.end=Vt.end,Zt}function zt(Vt,Zt,Gt,Yt,ne,re){for(var Pt=0;Pt<Vt.length;Pt++)bt(Vt[Pt],Zt,Gt,Yt,ne,re,!1)}function Ft(Vt,Zt,Gt,Yt){Vt.push(Zt),Vt.push(Gt),Vt.push(Yt)}function $t(Vt,Zt,Gt,Yt,ne,re){var Pt=(re-Zt)/(Yt-Zt);return Vt.push(re),Vt.push(Gt+(ne-Gt)*Pt),Vt.push(1),Pt}function Wt(Vt,Zt,Gt,Yt,ne,re){var Pt=(re-Gt)/(ne-Gt);return Vt.push(Zt+(Yt-Zt)*Pt),Vt.push(re),Vt.push(1),Pt}function Xt(Vt,Zt){for(var Gt=[],Yt=0;Yt<Vt.length;Yt++){var ne,re=Vt[Yt],Pt=re.type;if(Pt==="Point"||Pt==="MultiPoint"||Pt==="LineString")ne=ae(re.geometry,Zt);else if(Pt==="MultiLineString"||Pt==="Polygon"){ne=[];for(var Nt=0;Nt<re.geometry.length;Nt++)ne.push(ae(re.geometry[Nt],Zt))}else if(Pt==="MultiPolygon")for(ne=[],Nt=0;Nt<re.geometry.length;Nt++){for(var ee=[],te=0;te<re.geometry[Nt].length;te++)ee.push(ae(re.geometry[Nt][te],Zt));ne.push(ee)}Gt.push(st(re.id,Pt,ne,re.tags))}return Gt}function ae(Vt,Zt){var Gt=[];Gt.size=Vt.size,Vt.start!==void 0&&(Gt.start=Vt.start,Gt.end=Vt.end);for(var Yt=0;Yt<Vt.length;Yt+=3)Gt.push(Vt[Yt]+Zt,Vt[Yt+1],Vt[Yt+2]);return Gt}function Qt(Vt,Zt){if(Vt.transformed)return Vt;var Gt,Yt,ne,re=1<<Vt.z,Pt=Vt.x,Nt=Vt.y;for(Gt=0;Gt<Vt.features.length;Gt++){var ee=Vt.features[Gt],te=ee.geometry,ge=ee.type;if(ee.geometry=[],ge===1)for(Yt=0;Yt<te.length;Yt+=2)ee.geometry.push(de(te[Yt],te[Yt+1],Zt,re,Pt,Nt));else for(Yt=0;Yt<te.length;Yt++){var pe=[];for(ne=0;ne<te[Yt].length;ne+=2)pe.push(de(te[Yt][ne],te[Yt][ne+1],Zt,re,Pt,Nt));ee.geometry.push(pe)}}return Vt.transformed=!0,Vt}function de(Vt,Zt,Gt,Yt,ne,re){return[Math.round(Gt*(Vt*Yt-ne)),Math.round(Gt*(Zt*Yt-re))]}function ye(Vt,Zt,Gt,Yt,ne){for(var re=Zt===ne.maxZoom?0:ne.tolerance/((1<<Zt)*ne.extent),Pt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Gt,y:Yt,z:Zt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Nt=0;Nt<Vt.length;Nt++){Pt.numFeatures++,ve(Pt,Vt[Nt],re,ne);var ee=Vt[Nt].minX,te=Vt[Nt].minY,ge=Vt[Nt].maxX,pe=Vt[Nt].maxY;ee<Pt.minX&&(Pt.minX=ee),te<Pt.minY&&(Pt.minY=te),ge>Pt.maxX&&(Pt.maxX=ge),pe>Pt.maxY&&(Pt.maxY=pe)}return Pt}function ve(Vt,Zt,Gt,Yt){var ne=Zt.geometry,re=Zt.type,Pt=[];if(re==="Point"||re==="MultiPoint")for(var Nt=0;Nt<ne.length;Nt+=3)Pt.push(ne[Nt]),Pt.push(ne[Nt+1]),Vt.numPoints++,Vt.numSimplified++;else if(re==="LineString")ie(Pt,ne,Vt,Gt,!1,!1);else if(re==="MultiLineString"||re==="Polygon")for(Nt=0;Nt<ne.length;Nt++)ie(Pt,ne[Nt],Vt,Gt,re==="Polygon",Nt===0);else if(re==="MultiPolygon")for(var ee=0;ee<ne.length;ee++){var te=ne[ee];for(Nt=0;Nt<te.length;Nt++)ie(Pt,te[Nt],Vt,Gt,!0,Nt===0)}if(Pt.length){var ge=Zt.tags||null;if(re==="LineString"&&Yt.lineMetrics){for(var pe in ge={},Zt.tags)ge[pe]=Zt.tags[pe];ge.mapbox_clip_start=ne.start/ne.size,ge.mapbox_clip_end=ne.end/ne.size}var me={geometry:Pt,type:re==="Polygon"||re==="MultiPolygon"?3:re==="LineString"||re==="MultiLineString"?2:1,tags:ge};Zt.id!==null&&(me.id=Zt.id),Vt.features.push(me)}}function ie(Vt,Zt,Gt,Yt,ne,re){var Pt=Yt*Yt;if(Yt>0&&Zt.size<(ne?Pt:Yt))Gt.numPoints+=Zt.length/3;else{for(var Nt=[],ee=0;ee<Zt.length;ee+=3)(Yt===0||Zt[ee+2]>Pt)&&(Gt.numSimplified++,Nt.push(Zt[ee]),Nt.push(Zt[ee+1])),Gt.numPoints++;ne&&function(te,ge){for(var pe=0,me=0,ce=te.length,we=ce-2;me<ce;we=me,me+=2)pe+=(te[me]-te[we])*(te[me+1]+te[we+1]);if(pe>0===ge)for(me=0,ce=te.length;me<ce/2;me+=2){var ue=te[me],he=te[me+1];te[me]=te[ce-2-me],te[me+1]=te[ce-1-me],te[ce-2-me]=ue,te[ce-1-me]=he}}(Nt,re),Vt.push(Nt)}}function se(Vt,Zt){var Gt=(Zt=this.options=function(ne,re){for(var Pt in re)ne[Pt]=re[Pt];return ne}(Object.create(this.options),Zt)).debug;if(Gt&&console.time("preprocess data"),Zt.maxZoom<0||Zt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Zt.promoteId&&Zt.generateId)throw new Error("promoteId and generateId cannot be used together.");var Yt=function(ne,re){var Pt=[];if(ne.type==="FeatureCollection")for(var Nt=0;Nt<ne.features.length;Nt++)ht(Pt,ne.features[Nt],re,Nt);else ne.type==="Feature"?ht(Pt,ne,re):ht(Pt,{geometry:ne},re);return Pt}(Vt,Zt);this.tiles={},this.tileCoords=[],Gt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Zt.indexMaxZoom,Zt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Yt=function(ne,re){var Pt=re.buffer/re.extent,Nt=ne,ee=ut(ne,1,-1-Pt,Pt,0,-1,2,re),te=ut(ne,1,1-Pt,2+Pt,0,-1,2,re);return(ee||te)&&(Nt=ut(ne,1,-Pt,1+Pt,0,-1,2,re)||[],ee&&(Nt=Xt(ee,1).concat(Nt)),te&&(Nt=Nt.concat(Xt(te,-1)))),Nt}(Yt,Zt)).length&&this.splitTile(Yt,0,0,0),Gt&&(Yt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ke(Vt,Zt,Gt){return 32*((1<<Vt)*Gt+Zt)+Vt}function Ae(Vt,Zt){var Gt=Vt.tileID.canonical;if(!this._geoJSONIndex)return Zt(null,null);var Yt=this._geoJSONIndex.getTile(Gt.z,Gt.x,Gt.y);if(!Yt)return Zt(null,null);var ne=new p(Yt.features),re=g(ne);re.byteOffset===0&&re.byteLength===re.buffer.byteLength||(re=new Uint8Array(re)),Zt(null,{vectorTile:ne,rawData:re.buffer})}rt.prototype.load=function(Vt){var Zt=this.options,Gt=Zt.log,Yt=Zt.minZoom,ne=Zt.maxZoom,re=Zt.nodeSize;Gt&&console.time("total time");var Pt="prepare "+Vt.length+" points";Gt&&console.time(Pt),this.points=Vt;for(var Nt=[],ee=0;ee<Vt.length;ee++)Vt[ee].geometry&&Nt.push(ot(Vt[ee],ee));this.trees[ne+1]=new Z(Nt,mt,Ot,re,Float32Array),Gt&&console.timeEnd(Pt);for(var te=ne;te>=Yt;te--){var ge=+Date.now();Nt=this._cluster(Nt,te),this.trees[te]=new Z(Nt,mt,Ot,re,Float32Array),Gt&&console.log("z%d: %d clusters in %dms",te,Nt.length,+Date.now()-ge)}return Gt&&console.timeEnd("total time"),this},rt.prototype.getClusters=function(Vt,Zt){var Gt=((Vt[0]+180)%360+360)%360-180,Yt=Math.max(-90,Math.min(90,Vt[1])),ne=Vt[2]===180?180:((Vt[2]+180)%360+360)%360-180,re=Math.max(-90,Math.min(90,Vt[3]));if(Vt[2]-Vt[0]>=360)Gt=-180,ne=180;else if(Gt>ne){var Pt=this.getClusters([Gt,Yt,180,re],Zt),Nt=this.getClusters([-180,Yt,ne,re],Zt);return Pt.concat(Nt)}for(var ee=this.trees[this._limitZoom(Zt)],te=[],ge=0,pe=ee.range(gt(Gt),kt(re),gt(ne),kt(Yt));ge<pe.length;ge+=1){var me=pe[ge],ce=ee.points[me];te.push(ce.numPoints?ct(ce):this.points[ce.index])}return te},rt.prototype.getChildren=function(Vt){var Zt=this._getOriginId(Vt),Gt=this._getOriginZoom(Vt),Yt="No cluster with the specified id.",ne=this.trees[Gt];if(!ne)throw new Error(Yt);var re=ne.points[Zt];if(!re)throw new Error(Yt);for(var Pt=this.options.radius/(this.options.extent*Math.pow(2,Gt-1)),Nt=[],ee=0,te=ne.within(re.x,re.y,Pt);ee<te.length;ee+=1){var ge=te[ee],pe=ne.points[ge];pe.parentId===Vt&&Nt.push(pe.numPoints?ct(pe):this.points[pe.index])}if(Nt.length===0)throw new Error(Yt);return Nt},rt.prototype.getLeaves=function(Vt,Zt,Gt){Zt=Zt||10,Gt=Gt||0;var Yt=[];return this._appendLeaves(Yt,Vt,Zt,Gt,0),Yt},rt.prototype.getTile=function(Vt,Zt,Gt){var Yt=this.trees[this._limitZoom(Vt)],ne=Math.pow(2,Vt),re=this.options,Pt=re.extent,Nt=re.radius/Pt,ee=(Gt-Nt)/ne,te=(Gt+1+Nt)/ne,ge={features:[]};return this._addTileFeatures(Yt.range((Zt-Nt)/ne,ee,(Zt+1+Nt)/ne,te),Yt.points,Zt,Gt,ne,ge),Zt===0&&this._addTileFeatures(Yt.range(1-Nt/ne,ee,1,te),Yt.points,ne,Gt,ne,ge),Zt===ne-1&&this._addTileFeatures(Yt.range(0,ee,Nt/ne,te),Yt.points,-1,Gt,ne,ge),ge.features.length?ge:null},rt.prototype.getClusterExpansionZoom=function(Vt){for(var Zt=this._getOriginZoom(Vt)-1;Zt<=this.options.maxZoom;){var Gt=this.getChildren(Vt);if(Zt++,Gt.length!==1)break;Vt=Gt[0].properties.cluster_id}return Zt},rt.prototype._appendLeaves=function(Vt,Zt,Gt,Yt,ne){for(var re=0,Pt=this.getChildren(Zt);re<Pt.length;re+=1){var Nt=Pt[re],ee=Nt.properties;if(ee&&ee.cluster?ne+ee.point_count<=Yt?ne+=ee.point_count:ne=this._appendLeaves(Vt,ee.cluster_id,Gt,Yt,ne):ne<Yt?ne++:Vt.push(Nt),Vt.length===Gt)break}return ne},rt.prototype._addTileFeatures=function(Vt,Zt,Gt,Yt,ne,re){for(var Pt=0,Nt=Vt;Pt<Nt.length;Pt+=1){var ee=Zt[Nt[Pt]],te=ee.numPoints,ge={type:1,geometry:[[Math.round(this.options.extent*(ee.x*ne-Gt)),Math.round(this.options.extent*(ee.y*ne-Yt))]],tags:te?pt(ee):this.points[ee.index].properties},pe=void 0;te?pe=ee.id:this.options.generateId?pe=ee.index:this.points[ee.index].id&&(pe=this.points[ee.index].id),pe!==void 0&&(ge.id=pe),re.features.push(ge)}},rt.prototype._limitZoom=function(Vt){return Math.max(this.options.minZoom,Math.min(Vt,this.options.maxZoom+1))},rt.prototype._cluster=function(Vt,Zt){for(var Gt=[],Yt=this.options,ne=Yt.radius,re=Yt.extent,Pt=Yt.reduce,Nt=ne/(re*Math.pow(2,Zt)),ee=0;ee<Vt.length;ee++){var te=Vt[ee];if(!(te.zoom<=Zt)){te.zoom=Zt;for(var ge=this.trees[Zt+1],pe=ge.within(te.x,te.y,Nt),me=te.numPoints||1,ce=te.x*me,we=te.y*me,ue=Pt&&me>1?this._map(te,!0):null,he=(ee<<5)+(Zt+1)+this.points.length,be=0,Pe=pe;be<Pe.length;be+=1){var De=Pe[be],Ue=ge.points[De];if(!(Ue.zoom<=Zt)){Ue.zoom=Zt;var tr=Ue.numPoints||1;ce+=Ue.x*tr,we+=Ue.y*tr,me+=tr,Ue.parentId=he,Pt&&(ue||(ue=this._map(te,!0)),Pt(ue,this._map(Ue)))}}me===1?Gt.push(te):(te.parentId=he,Gt.push(nt(ce/me,we/me,he,me,ue)))}}return Gt},rt.prototype._getOriginId=function(Vt){return Vt-this.points.length>>5},rt.prototype._getOriginZoom=function(Vt){return(Vt-this.points.length)%32},rt.prototype._map=function(Vt,Zt){if(Vt.numPoints)return Zt?yt({},Vt.properties):Vt.properties;var Gt=this.points[Vt.index].properties,Yt=this.options.map(Gt);return Zt&&Yt===Gt?yt({},Yt):Yt},se.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},se.prototype.splitTile=function(Vt,Zt,Gt,Yt,ne,re,Pt){for(var Nt=[Vt,Zt,Gt,Yt],ee=this.options,te=ee.debug;Nt.length;){Yt=Nt.pop(),Gt=Nt.pop(),Zt=Nt.pop(),Vt=Nt.pop();var ge=1<<Zt,pe=ke(Zt,Gt,Yt),me=this.tiles[pe];if(!me&&(te>1&&console.time("creation"),me=this.tiles[pe]=ye(Vt,Zt,Gt,Yt,ee),this.tileCoords.push({z:Zt,x:Gt,y:Yt}),te)){te>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Zt,Gt,Yt,me.numFeatures,me.numPoints,me.numSimplified),console.timeEnd("creation"));var ce="z"+Zt;this.stats[ce]=(this.stats[ce]||0)+1,this.total++}if(me.source=Vt,ne){if(Zt===ee.maxZoom||Zt===ne)continue;var we=1<<ne-Zt;if(Gt!==Math.floor(re/we)||Yt!==Math.floor(Pt/we))continue}else if(Zt===ee.indexMaxZoom||me.numPoints<=ee.indexMaxPoints)continue;if(me.source=null,Vt.length!==0){te>1&&console.time("clipping");var ue,he,be,Pe,De,Ue,tr=.5*ee.buffer/ee.extent,Ge=.5-tr,Ze=.5+tr,We=1+tr;ue=he=be=Pe=null,De=ut(Vt,ge,Gt-tr,Gt+Ze,0,me.minX,me.maxX,ee),Ue=ut(Vt,ge,Gt+Ge,Gt+We,0,me.minX,me.maxX,ee),Vt=null,De&&(ue=ut(De,ge,Yt-tr,Yt+Ze,1,me.minY,me.maxY,ee),he=ut(De,ge,Yt+Ge,Yt+We,1,me.minY,me.maxY,ee),De=null),Ue&&(be=ut(Ue,ge,Yt-tr,Yt+Ze,1,me.minY,me.maxY,ee),Pe=ut(Ue,ge,Yt+Ge,Yt+We,1,me.minY,me.maxY,ee),Ue=null),te>1&&console.timeEnd("clipping"),Nt.push(ue||[],Zt+1,2*Gt,2*Yt),Nt.push(he||[],Zt+1,2*Gt,2*Yt+1),Nt.push(be||[],Zt+1,2*Gt+1,2*Yt),Nt.push(Pe||[],Zt+1,2*Gt+1,2*Yt+1)}}},se.prototype.getTile=function(Vt,Zt,Gt){var Yt=this.options,ne=Yt.extent,re=Yt.debug;if(Vt<0||Vt>24)return null;var Pt=1<<Vt,Nt=ke(Vt,Zt=(Zt%Pt+Pt)%Pt,Gt);if(this.tiles[Nt])return Qt(this.tiles[Nt],ne);re>1&&console.log("drilling down to z%d-%d-%d",Vt,Zt,Gt);for(var ee,te=Vt,ge=Zt,pe=Gt;!ee&&te>0;)te--,ge=Math.floor(ge/2),pe=Math.floor(pe/2),ee=this.tiles[ke(te,ge,pe)];return ee&&ee.source?(re>1&&console.log("found parent tile z%d-%d-%d",te,ge,pe),re>1&&console.time("drilling down"),this.splitTile(ee.source,te,ge,pe,Vt,Zt,Gt),re>1&&console.timeEnd("drilling down"),this.tiles[Nt]?Qt(this.tiles[Nt],ne):null):null};var Ie=function(Vt){function Zt(Gt,Yt,ne,re){Vt.call(this,Gt,Yt,ne,Ae),re&&(this.loadGeoJSON=re)}return Vt&&(Zt.__proto__=Vt),Zt.prototype=Object.create(Vt&&Vt.prototype),Zt.prototype.constructor=Zt,Zt.prototype.loadData=function(Gt,Yt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Yt,this._pendingLoadDataParams=Gt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Zt.prototype._loadData=function(){var Gt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Yt=this._pendingCallback,ne=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var re=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new r.RequestPerformance(ne.request);this.loadGeoJSON(ne,function(Pt,Nt){if(Pt||!Nt)return Yt(Pt);if(typeof Nt!="object")return Yt(new Error("Input data given to '"+ne.source+"' is not a valid GeoJSON object."));u(Nt,!0);try{Gt._geoJSONIndex=ne.cluster?new rt(function(ge){var pe=ge.superclusterOptions,me=ge.clusterProperties;if(!me||!pe)return pe;for(var ce={},we={},ue={accumulated:null,zoom:0},he={properties:null},be=Object.keys(me),Pe=0,De=be;Pe<De.length;Pe+=1){var Ue=De[Pe],tr=me[Ue],Ge=tr[0],Ze=tr[1],We=r.createExpression(Ze),pr=r.createExpression(typeof Ge=="string"?[Ge,["accumulated"],["get",Ue]]:Ge);ce[Ue]=We.value,we[Ue]=pr.value}return pe.map=function(xr){he.properties=xr;for(var sr={},$e=0,ir=be;$e<ir.length;$e+=1){var Ke=ir[$e];sr[Ke]=ce[Ke].evaluate(ue,he)}return sr},pe.reduce=function(xr,sr){he.properties=sr;for(var $e=0,ir=be;$e<ir.length;$e+=1){var Ke=ir[$e];ue.accumulated=xr[Ke],xr[Ke]=we[Ke].evaluate(ue,he)}},pe}(ne)).load(Nt.features):function(ge,pe){return new se(ge,pe)}(Nt,ne.geojsonVtOptions)}catch(ge){return Yt(ge)}Gt.loaded={};var ee={};if(re){var te=re.finish();te&&(ee.resourceTiming={},ee.resourceTiming[ne.source]=JSON.parse(JSON.stringify(te)))}Yt(null,ee)})}},Zt.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Zt.prototype.reloadTile=function(Gt,Yt){var ne=this.loaded,re=Gt.uid;return ne&&ne[re]?Vt.prototype.reloadTile.call(this,Gt,Yt):this.loadTile(Gt,Yt)},Zt.prototype.loadGeoJSON=function(Gt,Yt){if(Gt.request)r.getJSON(Gt.request,Yt);else{if(typeof Gt.data!="string")return Yt(new Error("Input data given to '"+Gt.source+"' is not a valid GeoJSON object."));try{return Yt(null,JSON.parse(Gt.data))}catch{return Yt(new Error("Input data given to '"+Gt.source+"' is not a valid GeoJSON object."))}}},Zt.prototype.removeSource=function(Gt,Yt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Yt()},Zt.prototype.getClusterExpansionZoom=function(Gt,Yt){try{Yt(null,this._geoJSONIndex.getClusterExpansionZoom(Gt.clusterId))}catch(ne){Yt(ne)}},Zt.prototype.getClusterChildren=function(Gt,Yt){try{Yt(null,this._geoJSONIndex.getChildren(Gt.clusterId))}catch(ne){Yt(ne)}},Zt.prototype.getClusterLeaves=function(Gt,Yt){try{Yt(null,this._geoJSONIndex.getLeaves(Gt.clusterId,Gt.limit,Gt.offset))}catch(ne){Yt(ne)}},Zt}(i),Te=function(Vt){var Zt=this;this.self=Vt,this.actor=new r.Actor(Vt,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:i,geojson:Ie},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Gt,Yt){if(Zt.workerSourceTypes[Gt])throw new Error('Worker source with name "'+Gt+'" already registered.');Zt.workerSourceTypes[Gt]=Yt},this.self.registerRTLTextPlugin=function(Gt){if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=Gt.applyArabicShaping,r.plugin.processBidirectionalText=Gt.processBidirectionalText,r.plugin.processStyledBidirectionalText=Gt.processStyledBidirectionalText}};return Te.prototype.setReferrer=function(Vt,Zt){this.referrer=Zt},Te.prototype.setImages=function(Vt,Zt,Gt){for(var Yt in this.availableImages[Vt]=Zt,this.workerSources[Vt]){var ne=this.workerSources[Vt][Yt];for(var re in ne)ne[re].availableImages=Zt}Gt()},Te.prototype.setLayers=function(Vt,Zt,Gt){this.getLayerIndex(Vt).replace(Zt),Gt()},Te.prototype.updateLayers=function(Vt,Zt,Gt){this.getLayerIndex(Vt).update(Zt.layers,Zt.removedIds),Gt()},Te.prototype.loadTile=function(Vt,Zt,Gt){this.getWorkerSource(Vt,Zt.type,Zt.source).loadTile(Zt,Gt)},Te.prototype.loadDEMTile=function(Vt,Zt,Gt){this.getDEMWorkerSource(Vt,Zt.source).loadTile(Zt,Gt)},Te.prototype.reloadTile=function(Vt,Zt,Gt){this.getWorkerSource(Vt,Zt.type,Zt.source).reloadTile(Zt,Gt)},Te.prototype.abortTile=function(Vt,Zt,Gt){this.getWorkerSource(Vt,Zt.type,Zt.source).abortTile(Zt,Gt)},Te.prototype.removeTile=function(Vt,Zt,Gt){this.getWorkerSource(Vt,Zt.type,Zt.source).removeTile(Zt,Gt)},Te.prototype.removeDEMTile=function(Vt,Zt){this.getDEMWorkerSource(Vt,Zt.source).removeTile(Zt)},Te.prototype.removeSource=function(Vt,Zt,Gt){if(this.workerSources[Vt]&&this.workerSources[Vt][Zt.type]&&this.workerSources[Vt][Zt.type][Zt.source]){var Yt=this.workerSources[Vt][Zt.type][Zt.source];delete this.workerSources[Vt][Zt.type][Zt.source],Yt.removeSource!==void 0?Yt.removeSource(Zt,Gt):Gt()}},Te.prototype.loadWorkerSource=function(Vt,Zt,Gt){try{this.self.importScripts(Zt.url),Gt()}catch(Yt){Gt(Yt.toString())}},Te.prototype.syncRTLPluginState=function(Vt,Zt,Gt){try{r.plugin.setState(Zt);var Yt=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&Yt!=null){this.self.importScripts(Yt);var ne=r.plugin.isParsed();Gt(ne?void 0:new Error("RTL Text Plugin failed to import scripts from "+Yt),ne)}}catch(re){Gt(re.toString())}},Te.prototype.getAvailableImages=function(Vt){var Zt=this.availableImages[Vt];return Zt||(Zt=[]),Zt},Te.prototype.getLayerIndex=function(Vt){var Zt=this.layerIndexes[Vt];return Zt||(Zt=this.layerIndexes[Vt]=new s),Zt},Te.prototype.getWorkerSource=function(Vt,Zt,Gt){var Yt=this;if(this.workerSources[Vt]||(this.workerSources[Vt]={}),this.workerSources[Vt][Zt]||(this.workerSources[Vt][Zt]={}),!this.workerSources[Vt][Zt][Gt]){var ne={send:function(re,Pt,Nt){Yt.actor.send(re,Pt,Nt,Vt)}};this.workerSources[Vt][Zt][Gt]=new this.workerSourceTypes[Zt](ne,this.getLayerIndex(Vt),this.getAvailableImages(Vt))}return this.workerSources[Vt][Zt][Gt]},Te.prototype.getDEMWorkerSource=function(Vt,Zt){return this.demWorkerSources[Vt]||(this.demWorkerSources[Vt]={}),this.demWorkerSources[Vt][Zt]||(this.demWorkerSources[Vt][Zt]=new l),this.demWorkerSources[Vt][Zt]},Te.prototype.enforceCacheSizeLimit=function(Vt,Zt){r.enforceCacheSizeLimit(Zt)},typeof WorkerGlobalScope<"u"&&r.window!==void 0&&r.window instanceof WorkerGlobalScope&&(r.window.worker=new Te(r.window)),Te}),k(0,function(r){var m=r.createCommonjsModule(function(F){function H(ft){return!$(ft)}function $(ft){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var N,Q,it=new Blob([""],{type:"text/javascript"}),dt=URL.createObjectURL(it);try{Q=new Worker(dt),N=!0}catch{N=!1}return Q&&Q.terminate(),URL.revokeObjectURL(dt),N}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var N=document.createElement("canvas");N.width=N.height=1;var Q=N.getContext("2d");if(!Q)return!1;var it=Q.getImageData(0,0,1,1);return it&&it.width===N.width}()?(At=ft&&ft.failIfMajorPerformanceCaveat,K[At]===void 0&&(K[At]=function(N){var Q=function(dt){var wt=document.createElement("canvas"),Et=Object.create(H.webGLContextAttributes);return Et.failIfMajorPerformanceCaveat=dt,wt.probablySupportsContext?wt.probablySupportsContext("webgl",Et)||wt.probablySupportsContext("experimental-webgl",Et):wt.supportsContext?wt.supportsContext("webgl",Et)||wt.supportsContext("experimental-webgl",Et):wt.getContext("webgl",Et)||wt.getContext("experimental-webgl",Et)}(N);if(!Q)return!1;var it=Q.createShader(Q.VERTEX_SHADER);return!(!it||Q.isContextLost())&&(Q.shaderSource(it,"void main() {}"),Q.compileShader(it),Q.getShaderParameter(it,Q.COMPILE_STATUS)===!0)}(At)),K[At]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var At}F.exports?F.exports=H:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=H,window.mapboxgl.notSupportedReason=$);var K={};H.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),h={create:function(F,H,$){var K=r.window.document.createElement(F);return H!==void 0&&(K.className=H),$&&$.appendChild(K),K},createNS:function(F,H){return r.window.document.createElementNS(F,H)}},s=r.window.document.documentElement.style;function e(F){if(!s)return F[0];for(var H=0;H<F.length;H++)if(F[H]in s)return F[H];return F[0]}var t,n=e(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);h.disableDrag=function(){s&&n&&(t=s[n],s[n]="none")},h.enableDrag=function(){s&&n&&(s[n]=t)};var a=e(["transform","WebkitTransform"]);h.setTransform=function(F,H){F.style[a]=H};var i=!1;try{var c=Object.defineProperty({},"passive",{get:function(){i=!0}});r.window.addEventListener("test",c,c),r.window.removeEventListener("test",c,c)}catch{i=!1}h.addEventListener=function(F,H,$,K){K===void 0&&(K={}),"passive"in K&&i?F.addEventListener(H,$,K):F.addEventListener(H,$,K.capture)},h.removeEventListener=function(F,H,$,K){K===void 0&&(K={}),"passive"in K&&i?F.removeEventListener(H,$,K):F.removeEventListener(H,$,K.capture)};var l=function(F){F.preventDefault(),F.stopPropagation(),r.window.removeEventListener("click",l,!0)};function u(F){var H=F.userImage;return!!(H&&H.render&&H.render())&&(F.data.replace(new Uint8Array(H.data.buffer)),!0)}h.suppressClick=function(){r.window.addEventListener("click",l,!0),r.window.setTimeout(function(){r.window.removeEventListener("click",l,!0)},0)},h.mousePos=function(F,H){var $=F.getBoundingClientRect();return new r.Point(H.clientX-$.left-F.clientLeft,H.clientY-$.top-F.clientTop)},h.touchPos=function(F,H){for(var $=F.getBoundingClientRect(),K=[],ft=0;ft<H.length;ft++)K.push(new r.Point(H[ft].clientX-$.left-F.clientLeft,H[ft].clientY-$.top-F.clientTop));return K},h.mouseButton=function(F){return r.window.InstallTrigger!==void 0&&F.button===2&&F.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:F.button},h.remove=function(F){F.parentNode&&F.parentNode.removeChild(F)};var f=function(F){function H(){F.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.isLoaded=function(){return this.loaded},H.prototype.setLoaded=function($){if(this.loaded!==$&&(this.loaded=$,$)){for(var K=0,ft=this.requestors;K<ft.length;K+=1){var At=ft[K],N=At.ids,Q=At.callback;this._notify(N,Q)}this.requestors=[]}},H.prototype.getImage=function($){return this.images[$]},H.prototype.addImage=function($,K){this._validate($,K)&&(this.images[$]=K)},H.prototype._validate=function($,K){var ft=!0;return this._validateStretch(K.stretchX,K.data&&K.data.width)||(this.fire(new r.ErrorEvent(new Error('Image "'+$+'" has invalid "stretchX" value'))),ft=!1),this._validateStretch(K.stretchY,K.data&&K.data.height)||(this.fire(new r.ErrorEvent(new Error('Image "'+$+'" has invalid "stretchY" value'))),ft=!1),this._validateContent(K.content,K)||(this.fire(new r.ErrorEvent(new Error('Image "'+$+'" has invalid "content" value'))),ft=!1),ft},H.prototype._validateStretch=function($,K){if(!$)return!0;for(var ft=0,At=0,N=$;At<N.length;At+=1){var Q=N[At];if(Q[0]<ft||Q[1]<Q[0]||K<Q[1])return!1;ft=Q[1]}return!0},H.prototype._validateContent=function($,K){return!($&&($.length!==4||$[0]<0||K.data.width<$[0]||$[1]<0||K.data.height<$[1]||$[2]<0||K.data.width<$[2]||$[3]<0||K.data.height<$[3]||$[2]<$[0]||$[3]<$[1]))},H.prototype.updateImage=function($,K){var ft=this.images[$];K.version=ft.version+1,this.images[$]=K,this.updatedImages[$]=!0},H.prototype.removeImage=function($){var K=this.images[$];delete this.images[$],delete this.patterns[$],K.userImage&&K.userImage.onRemove&&K.userImage.onRemove()},H.prototype.listImages=function(){return Object.keys(this.images)},H.prototype.getImages=function($,K){var ft=!0;if(!this.isLoaded())for(var At=0,N=$;At<N.length;At+=1){var Q=N[At];this.images[Q]||(ft=!1)}this.isLoaded()||ft?this._notify($,K):this.requestors.push({ids:$,callback:K})},H.prototype._notify=function($,K){for(var ft={},At=0,N=$;At<N.length;At+=1){var Q=N[At];this.images[Q]||this.fire(new r.Event("styleimagemissing",{id:Q}));var it=this.images[Q];it?ft[Q]={data:it.data.clone(),pixelRatio:it.pixelRatio,sdf:it.sdf,version:it.version,stretchX:it.stretchX,stretchY:it.stretchY,content:it.content,hasRenderCallback:Boolean(it.userImage&&it.userImage.render)}:r.warnOnce('Image "'+Q+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}K(null,ft)},H.prototype.getPixelSize=function(){var $=this.atlasImage;return{width:$.width,height:$.height}},H.prototype.getPattern=function($){var K=this.patterns[$],ft=this.getImage($);if(!ft)return null;if(K&&K.position.version===ft.version)return K.position;if(K)K.position.version=ft.version;else{var At={w:ft.data.width+2,h:ft.data.height+2,x:0,y:0},N=new r.ImagePosition(At,ft);this.patterns[$]={bin:At,position:N}}return this._updatePatternAtlas(),this.patterns[$].position},H.prototype.bind=function($){var K=$.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture($,this.atlasImage,K.RGBA),this.atlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE)},H.prototype._updatePatternAtlas=function(){var $=[];for(var K in this.patterns)$.push(this.patterns[K].bin);var ft=r.potpack($),At=ft.w,N=ft.h,Q=this.atlasImage;for(var it in Q.resize({width:At||1,height:N||1}),this.patterns){var dt=this.patterns[it].bin,wt=dt.x+1,Et=dt.y+1,Bt=this.images[it].data,Ut=Bt.width,Ht=Bt.height;r.RGBAImage.copy(Bt,Q,{x:0,y:0},{x:wt,y:Et},{width:Ut,height:Ht}),r.RGBAImage.copy(Bt,Q,{x:0,y:Ht-1},{x:wt,y:Et-1},{width:Ut,height:1}),r.RGBAImage.copy(Bt,Q,{x:0,y:0},{x:wt,y:Et+Ht},{width:Ut,height:1}),r.RGBAImage.copy(Bt,Q,{x:Ut-1,y:0},{x:wt-1,y:Et},{width:1,height:Ht}),r.RGBAImage.copy(Bt,Q,{x:0,y:0},{x:wt+Ut,y:Et},{width:1,height:Ht})}this.dirty=!0},H.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},H.prototype.dispatchRenderCallbacks=function($){for(var K=0,ft=$;K<ft.length;K+=1){var At=ft[K];if(!this.callbackDispatchedThisFrame[At]){this.callbackDispatchedThisFrame[At]=!0;var N=this.images[At];u(N)&&this.updateImage(At,N)}}},H}(r.Evented),d=p,w=p,v=1e20;function p(F,H,$,K,ft,At){this.fontSize=F||24,this.buffer=H===void 0?3:H,this.cutoff=K||.25,this.fontFamily=ft||"sans-serif",this.fontWeight=At||"normal",this.radius=$||8;var N=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=N,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.d=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Int16Array(N),this.middle=Math.round(N/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(F,H,$,K,ft,At,N){for(var Q=0;Q<H;Q++){for(var it=0;it<$;it++)K[it]=F[it*H+Q];for(b(K,ft,At,N,$),it=0;it<$;it++)F[it*H+Q]=ft[it]}for(it=0;it<$;it++){for(Q=0;Q<H;Q++)K[Q]=F[it*H+Q];for(b(K,ft,At,N,H),Q=0;Q<H;Q++)F[it*H+Q]=Math.sqrt(ft[Q])}}function b(F,H,$,K,ft){$[0]=0,K[0]=-v,K[1]=+v;for(var At=1,N=0;At<ft;At++){for(var Q=(F[At]+At*At-(F[$[N]]+$[N]*$[N]))/(2*At-2*$[N]);Q<=K[N];)N--,Q=(F[At]+At*At-(F[$[N]]+$[N]*$[N]))/(2*At-2*$[N]);$[++N]=At,K[N]=Q,K[N+1]=+v}for(At=0,N=0;At<ft;At++){for(;K[N+1]<At;)N++;H[At]=(At-$[N])*(At-$[N])+F[$[N]]}}p.prototype.draw=function(F){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(F,this.buffer,this.middle);for(var H=this.ctx.getImageData(0,0,this.size,this.size),$=new Uint8ClampedArray(this.size*this.size),K=0;K<this.size*this.size;K++){var ft=H.data[4*K+3]/255;this.gridOuter[K]=ft===1?0:ft===0?v:Math.pow(Math.max(0,.5-ft),2),this.gridInner[K]=ft===1?v:ft===0?0:Math.pow(Math.max(0,ft-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),K=0;K<this.size*this.size;K++){var At=this.gridOuter[K]-this.gridInner[K];$[K]=Math.max(0,Math.min(255,Math.round(255-255*(At/this.radius+this.cutoff))))}return $},d.default=w;var x=function(F,H){this.requestManager=F,this.localIdeographFontFamily=H,this.entries={}};x.prototype.setURL=function(F){this.url=F},x.prototype.getGlyphs=function(F,H){var $=this,K=[];for(var ft in F)for(var At=0,N=F[ft];At<N.length;At+=1){var Q=N[At];K.push({stack:ft,id:Q})}r.asyncAll(K,function(it,dt){var wt=it.stack,Et=it.id,Bt=$.entries[wt];Bt||(Bt=$.entries[wt]={glyphs:{},requests:{},ranges:{}});var Ut=Bt.glyphs[Et];if(Ut===void 0){if(Ut=$._tinySDF(Bt,wt,Et))return Bt.glyphs[Et]=Ut,void dt(null,{stack:wt,id:Et,glyph:Ut});var Ht=Math.floor(Et/256);if(256*Ht>65535)dt(new Error("glyphs > 65535 not supported"));else if(Bt.ranges[Ht])dt(null,{stack:wt,id:Et,glyph:Ut});else{var qt=Bt.requests[Ht];qt||(qt=Bt.requests[Ht]=[],x.loadGlyphRange(wt,Ht,$.url,$.requestManager,function(Jt,le){if(le){for(var fe in le)$._doesCharSupportLocalGlyph(+fe)||(Bt.glyphs[+fe]=le[+fe]);Bt.ranges[Ht]=!0}for(var Le=0,Se=qt;Le<Se.length;Le+=1)(0,Se[Le])(Jt,le);delete Bt.requests[Ht]})),qt.push(function(Jt,le){Jt?dt(Jt):le&&dt(null,{stack:wt,id:Et,glyph:le[Et]||null})})}}else dt(null,{stack:wt,id:Et,glyph:Ut})},function(it,dt){if(it)H(it);else if(dt){for(var wt={},Et=0,Bt=dt;Et<Bt.length;Et+=1){var Ut=Bt[Et],Ht=Ut.stack,qt=Ut.id,Jt=Ut.glyph;(wt[Ht]||(wt[Ht]={}))[qt]=Jt&&{id:Jt.id,bitmap:Jt.bitmap.clone(),metrics:Jt.metrics}}H(null,wt)}})},x.prototype._doesCharSupportLocalGlyph=function(F){return!!this.localIdeographFontFamily&&(r.isChar["CJK Unified Ideographs"](F)||r.isChar["Hangul Syllables"](F)||r.isChar.Hiragana(F)||r.isChar.Katakana(F))},x.prototype._tinySDF=function(F,H,$){var K=this.localIdeographFontFamily;if(K&&this._doesCharSupportLocalGlyph($)){var ft=F.tinySDF;if(!ft){var At="400";/bold/i.test(H)?At="900":/medium/i.test(H)?At="500":/light/i.test(H)&&(At="200"),ft=F.tinySDF=new x.TinySDF(24,3,8,.25,K,At)}return{id:$,bitmap:new r.AlphaImage({width:30,height:30},ft.draw(String.fromCharCode($))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},x.loadGlyphRange=function(F,H,$,K,ft){var At=256*H,N=At+255,Q=K.transformRequest(K.normalizeGlyphsURL($).replace("{fontstack}",F).replace("{range}",At+"-"+N),r.ResourceType.Glyphs);r.getArrayBuffer(Q,function(it,dt){if(it)ft(it);else if(dt){for(var wt={},Et=0,Bt=r.parseGlyphPBF(dt);Et<Bt.length;Et+=1){var Ut=Bt[Et];wt[Ut.id]=Ut}ft(null,wt)}})},x.TinySDF=d;var _=function(){this.specification=r.styleSpec.light.position};_.prototype.possiblyEvaluate=function(F,H){return r.sphericalToCartesian(F.expression.evaluate(H))},_.prototype.interpolate=function(F,H,$){return{x:r.number(F.x,H.x,$),y:r.number(F.y,H.y,$),z:r.number(F.z,H.z,$)}};var g=new r.Properties({anchor:new r.DataConstantProperty(r.styleSpec.light.anchor),position:new _,color:new r.DataConstantProperty(r.styleSpec.light.color),intensity:new r.DataConstantProperty(r.styleSpec.light.intensity)}),A="-transition",M=function(F){function H($){F.call(this),this._transitionable=new r.Transitionable(g),this.setLight($),this._transitioning=this._transitionable.untransitioned()}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getLight=function(){return this._transitionable.serialize()},H.prototype.setLight=function($,K){if(K===void 0&&(K={}),!this._validate(r.validateLight,$,K))for(var ft in $){var At=$[ft];r.endsWith(ft,A)?this._transitionable.setTransition(ft.slice(0,-11),At):this._transitionable.setValue(ft,At)}},H.prototype.updateTransitions=function($){this._transitioning=this._transitionable.transitioned($,this._transitioning)},H.prototype.hasTransition=function(){return this._transitioning.hasTransition()},H.prototype.recalculate=function($){this.properties=this._transitioning.possiblyEvaluate($)},H.prototype._validate=function($,K,ft){return(!ft||ft.validate!==!1)&&r.emitValidationErrors(this,$.call(r.validateStyle,r.extend({value:K,style:{glyphs:!0,sprite:!0},styleSpec:r.styleSpec})))},H}(r.Evented),L=function(F,H){this.width=F,this.height=H,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};L.prototype.getDash=function(F,H){var $=F.join(",")+String(H);return this.dashEntry[$]||(this.dashEntry[$]=this.addDash(F,H)),this.dashEntry[$]},L.prototype.getDashRanges=function(F,H,$){var K=[],ft=F.length%2==1?-F[F.length-1]*$:0,At=F[0]*$,N=!0;K.push({left:ft,right:At,isDash:N,zeroLength:F[0]===0});for(var Q=F[0],it=1;it<F.length;it++){N=!N;var dt=F[it];ft=Q*$,At=(Q+=dt)*$,K.push({left:ft,right:At,isDash:N,zeroLength:dt===0})}return K},L.prototype.addRoundDash=function(F,H,$){for(var K=H/2,ft=-$;ft<=$;ft++)for(var At=this.nextRow+$+ft,N=this.width*At,Q=0,it=F[Q],dt=0;dt<this.width;dt++){dt/it.right>1&&(it=F[++Q]);var wt=Math.abs(dt-it.left),Et=Math.abs(dt-it.right),Bt=Math.min(wt,Et),Ut=void 0,Ht=ft/$*(K+1);if(it.isDash){var qt=K-Math.abs(Ht);Ut=Math.sqrt(Bt*Bt+qt*qt)}else Ut=K-Math.sqrt(Bt*Bt+Ht*Ht);this.data[N+dt]=Math.max(0,Math.min(255,Ut+128))}},L.prototype.addRegularDash=function(F){for(var H=F.length-1;H>=0;--H){var $=F[H],K=F[H+1];$.zeroLength?F.splice(H,1):K&&K.isDash===$.isDash&&(K.left=$.left,F.splice(H,1))}var ft=F[0],At=F[F.length-1];ft.isDash===At.isDash&&(ft.left=At.left-this.width,At.right=ft.right+this.width);for(var N=this.width*this.nextRow,Q=0,it=F[Q],dt=0;dt<this.width;dt++){dt/it.right>1&&(it=F[++Q]);var wt=Math.abs(dt-it.left),Et=Math.abs(dt-it.right),Bt=Math.min(wt,Et),Ut=it.isDash?Bt:-Bt;this.data[N+dt]=Math.max(0,Math.min(255,Ut+128))}},L.prototype.addDash=function(F,H){var $=H?7:0,K=2*$+1;if(this.nextRow+K>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var ft=0,At=0;At<F.length;At++)ft+=F[At];if(ft!==0){var N=this.width/ft,Q=this.getDashRanges(F,this.width,N);H?this.addRoundDash(Q,N,$):this.addRegularDash(Q)}var it={y:(this.nextRow+$+.5)/this.height,height:2*$/this.height,width:ft};return this.nextRow+=K,this.dirty=!0,it},L.prototype.bind=function(F){var H=F.gl;this.texture?(H.bindTexture(H.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,H.texSubImage2D(H.TEXTURE_2D,0,0,0,this.width,this.height,H.ALPHA,H.UNSIGNED_BYTE,this.data))):(this.texture=H.createTexture(),H.bindTexture(H.TEXTURE_2D,this.texture),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,H.REPEAT),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,H.REPEAT),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.LINEAR),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.LINEAR),H.texImage2D(H.TEXTURE_2D,0,H.ALPHA,this.width,this.height,0,H.ALPHA,H.UNSIGNED_BYTE,this.data))};var E=function F(H,$){this.workerPool=H,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var K=this.workerPool.acquire(this.id),ft=0;ft<K.length;ft++){var At=K[ft],N=new F.Actor(At,$,this.id);N.name="Worker "+ft,this.actors.push(N)}};function S(F,H,$){var K=function(ft,At){if(ft)return $(ft);if(At){var N=r.pick(r.extend(At,F),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);At.vector_layers&&(N.vectorLayers=At.vector_layers,N.vectorLayerIds=N.vectorLayers.map(function(Q){return Q.id})),N.tiles=H.canonicalizeTileset(N,F.url),$(null,N)}};return F.url?r.getJSON(H.transformRequest(H.normalizeSourceURL(F.url),r.ResourceType.Source),K):r.browser.frame(function(){return K(null,F)})}E.prototype.broadcast=function(F,H,$){$=$||function(){},r.asyncAll(this.actors,function(K,ft){K.send(F,H,ft)},$)},E.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},E.prototype.remove=function(){this.actors.forEach(function(F){F.remove()}),this.actors=[],this.workerPool.release(this.id)},E.Actor=r.Actor;var O=function(F,H,$){this.bounds=r.LngLatBounds.convert(this.validateBounds(F)),this.minzoom=H||0,this.maxzoom=$||24};O.prototype.validateBounds=function(F){return Array.isArray(F)&&F.length===4?[Math.max(-180,F[0]),Math.max(-90,F[1]),Math.min(180,F[2]),Math.min(90,F[3])]:[-180,-90,180,90]},O.prototype.contains=function(F){var H=Math.pow(2,F.z),$=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*H),K=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*H),ft=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*H),At=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*H);return F.x>=$&&F.x<ft&&F.y>=K&&F.y<At};var P=function(F){function H($,K,ft,At){if(F.call(this),this.id=$,this.dispatcher=ft,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(K,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},K),this._collectResourceTiming=K.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(At)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.load=function(){var $=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,function(K,ft){$._tileJSONRequest=null,$._loaded=!0,K?$.fire(new r.ErrorEvent(K)):ft&&(r.extend($,ft),ft.bounds&&($.tileBounds=new O(ft.bounds,$.minzoom,$.maxzoom)),r.postTurnstileEvent(ft.tiles,$.map._requestManager._customAccessToken),r.postMapLoadEvent(ft.tiles,$.map._getMapId(),$.map._requestManager._skuToken,$.map._requestManager._customAccessToken),$.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),$.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},H.prototype.loaded=function(){return this._loaded},H.prototype.hasTile=function($){return!this.tileBounds||this.tileBounds.contains($.canonical)},H.prototype.onAdd=function($){this.map=$,this.load()},H.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},H.prototype.serialize=function(){return r.extend({},this._options)},H.prototype.loadTile=function($,K){var ft=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme)),At={request:this.map._requestManager.transformRequest(ft,r.ResourceType.Tile),uid:$.uid,tileID:$.tileID,zoom:$.tileID.overscaledZ,tileSize:this.tileSize*$.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function N(Q,it){return delete $.request,$.aborted?K(null):Q&&Q.status!==404?K(Q):(it&&it.resourceTiming&&($.resourceTiming=it.resourceTiming),this.map._refreshExpiredTiles&&it&&$.setExpiryData(it),$.loadVectorData(it,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),K(null),void($.reloadCallback&&(this.loadTile($,$.reloadCallback),$.reloadCallback=null)))}At.request.collectResourceTiming=this._collectResourceTiming,$.actor&&$.state!=="expired"?$.state==="loading"?$.reloadCallback=K:$.request=$.actor.send("reloadTile",At,N.bind(this)):($.actor=this.dispatcher.getActor(),$.request=$.actor.send("loadTile",At,N.bind(this)))},H.prototype.abortTile=function($){$.request&&($.request.cancel(),delete $.request),$.actor&&$.actor.send("abortTile",{uid:$.uid,type:this.type,source:this.id},void 0)},H.prototype.unloadTile=function($){$.unloadVectorData(),$.actor&&$.actor.send("removeTile",{uid:$.uid,type:this.type,source:this.id},void 0)},H.prototype.hasTransition=function(){return!1},H}(r.Evented),U=function(F){function H($,K,ft,At){F.call(this),this.id=$,this.dispatcher=ft,this.setEventedParent(At),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},K),r.extend(this,r.pick(K,["url","scheme","tileSize"]))}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.load=function(){var $=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,function(K,ft){$._tileJSONRequest=null,$._loaded=!0,K?$.fire(new r.ErrorEvent(K)):ft&&(r.extend($,ft),ft.bounds&&($.tileBounds=new O(ft.bounds,$.minzoom,$.maxzoom)),r.postTurnstileEvent(ft.tiles),r.postMapLoadEvent(ft.tiles,$.map._getMapId(),$.map._requestManager._skuToken),$.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),$.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},H.prototype.loaded=function(){return this._loaded},H.prototype.onAdd=function($){this.map=$,this.load()},H.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},H.prototype.serialize=function(){return r.extend({},this._options)},H.prototype.hasTile=function($){return!this.tileBounds||this.tileBounds.contains($.canonical)},H.prototype.loadTile=function($,K){var ft=this,At=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);$.request=r.getImage(this.map._requestManager.transformRequest(At,r.ResourceType.Tile),function(N,Q){if(delete $.request,$.aborted)$.state="unloaded",K(null);else if(N)$.state="errored",K(N);else if(Q){ft.map._refreshExpiredTiles&&$.setExpiryData(Q),delete Q.cacheControl,delete Q.expires;var it=ft.map.painter.context,dt=it.gl;$.texture=ft.map.painter.getTileTexture(Q.width),$.texture?$.texture.update(Q,{useMipmap:!0}):($.texture=new r.Texture(it,Q,dt.RGBA,{useMipmap:!0}),$.texture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE,dt.LINEAR_MIPMAP_NEAREST),it.extTextureFilterAnisotropic&&dt.texParameterf(dt.TEXTURE_2D,it.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,it.extTextureFilterAnisotropicMax)),$.state="loaded",r.cacheEntryPossiblyAdded(ft.dispatcher),K(null)}})},H.prototype.abortTile=function($,K){$.request&&($.request.cancel(),delete $.request),K()},H.prototype.unloadTile=function($,K){$.texture&&this.map.painter.saveTileTexture($.texture),K()},H.prototype.hasTransition=function(){return!1},H}(r.Evented),R=function(F){function H($,K,ft,At){F.call(this,$,K,ft,At),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},K),this.encoding=K.encoding||"mapbox"}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},H.prototype.loadTile=function($,K){var ft=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function At(N,Q){N&&($.state="errored",K(N)),Q&&($.dem=Q,$.needsHillshadePrepare=!0,$.state="loaded",K(null))}$.request=r.getImage(this.map._requestManager.transformRequest(ft,r.ResourceType.Tile),function(N,Q){if(delete $.request,$.aborted)$.state="unloaded",K(null);else if(N)$.state="errored",K(N);else if(Q){this.map._refreshExpiredTiles&&$.setExpiryData(Q),delete Q.cacheControl,delete Q.expires;var it=r.window.ImageBitmap&&Q instanceof r.window.ImageBitmap&&r.offscreenCanvasSupported()?Q:r.browser.getImageData(Q,1),dt={uid:$.uid,coord:$.tileID,source:this.id,rawImageData:it,encoding:this.encoding};$.actor&&$.state!=="expired"||($.actor=this.dispatcher.getActor(),$.actor.send("loadDEMTile",dt,At.bind(this)))}}.bind(this)),$.neighboringTiles=this._getNeighboringTiles($.tileID)},H.prototype._getNeighboringTiles=function($){var K=$.canonical,ft=Math.pow(2,K.z),At=(K.x-1+ft)%ft,N=K.x===0?$.wrap-1:$.wrap,Q=(K.x+1+ft)%ft,it=K.x+1===ft?$.wrap+1:$.wrap,dt={};return dt[new r.OverscaledTileID($.overscaledZ,N,K.z,At,K.y).key]={backfilled:!1},dt[new r.OverscaledTileID($.overscaledZ,it,K.z,Q,K.y).key]={backfilled:!1},K.y>0&&(dt[new r.OverscaledTileID($.overscaledZ,N,K.z,At,K.y-1).key]={backfilled:!1},dt[new r.OverscaledTileID($.overscaledZ,$.wrap,K.z,K.x,K.y-1).key]={backfilled:!1},dt[new r.OverscaledTileID($.overscaledZ,it,K.z,Q,K.y-1).key]={backfilled:!1}),K.y+1<ft&&(dt[new r.OverscaledTileID($.overscaledZ,N,K.z,At,K.y+1).key]={backfilled:!1},dt[new r.OverscaledTileID($.overscaledZ,$.wrap,K.z,K.x,K.y+1).key]={backfilled:!1},dt[new r.OverscaledTileID($.overscaledZ,it,K.z,Q,K.y+1).key]={backfilled:!1}),dt},H.prototype.unloadTile=function($){$.demTexture&&this.map.painter.saveTileTexture($.demTexture),$.fbo&&($.fbo.destroy(),delete $.fbo),$.dem&&delete $.dem,delete $.neighboringTiles,$.state="unloaded",$.actor&&$.actor.send("removeDEMTile",{uid:$.uid,source:this.id})},H}(U),j=function(F){function H($,K,ft,At){F.call(this),this.id=$,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ft.getActor(),this.setEventedParent(At),this._data=K.data,this._options=r.extend({},K),this._collectResourceTiming=K.collectResourceTiming,this._resourceTiming=[],K.maxzoom!==void 0&&(this.maxzoom=K.maxzoom),K.type&&(this.type=K.type),K.attribution&&(this.attribution=K.attribution),this.promoteId=K.promoteId;var N=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:K.cluster||!1,geojsonVtOptions:{buffer:(K.buffer!==void 0?K.buffer:128)*N,tolerance:(K.tolerance!==void 0?K.tolerance:.375)*N,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:K.lineMetrics||!1,generateId:K.generateId||!1},superclusterOptions:{maxZoom:K.clusterMaxZoom!==void 0?Math.min(K.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:r.EXTENT,radius:(K.clusterRadius||50)*N,log:!1,generateId:K.generateId||!1},clusterProperties:K.clusterProperties},K.workerOptions)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.load=function(){var $=this;this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(K){if(K)$.fire(new r.ErrorEvent(K));else{var ft={dataType:"source",sourceDataType:"metadata"};$._collectResourceTiming&&$._resourceTiming&&$._resourceTiming.length>0&&(ft.resourceTiming=$._resourceTiming,$._resourceTiming=[]),$.fire(new r.Event("data",ft))}})},H.prototype.onAdd=function($){this.map=$,this.load()},H.prototype.setData=function($){var K=this;return this._data=$,this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ft){if(ft)K.fire(new r.ErrorEvent(ft));else{var At={dataType:"source",sourceDataType:"content"};K._collectResourceTiming&&K._resourceTiming&&K._resourceTiming.length>0&&(At.resourceTiming=K._resourceTiming,K._resourceTiming=[]),K.fire(new r.Event("data",At))}}),this},H.prototype.getClusterExpansionZoom=function($,K){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:$,source:this.id},K),this},H.prototype.getClusterChildren=function($,K){return this.actor.send("geojson.getClusterChildren",{clusterId:$,source:this.id},K),this},H.prototype.getClusterLeaves=function($,K,ft,At){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:$,limit:K,offset:ft},At),this},H.prototype._updateWorkerData=function($){var K=this;this._loaded=!1;var ft=r.extend({},this.workerOptions),At=this._data;typeof At=="string"?(ft.request=this.map._requestManager.transformRequest(r.browser.resolveURL(At),r.ResourceType.Source),ft.request.collectResourceTiming=this._collectResourceTiming):ft.data=JSON.stringify(At),this.actor.send(this.type+".loadData",ft,function(N,Q){K._removed||Q&&Q.abandoned||(K._loaded=!0,Q&&Q.resourceTiming&&Q.resourceTiming[K.id]&&(K._resourceTiming=Q.resourceTiming[K.id].slice(0)),K.actor.send(K.type+".coalesce",{source:ft.source},null),$(N))})},H.prototype.loaded=function(){return this._loaded},H.prototype.loadTile=function($,K){var ft=this,At=$.actor?"reloadTile":"loadTile";$.actor=this.actor;var N={type:this.type,uid:$.uid,tileID:$.tileID,zoom:$.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};$.request=this.actor.send(At,N,function(Q,it){return delete $.request,$.unloadVectorData(),$.aborted?K(null):Q?K(Q):($.loadVectorData(it,ft.map.painter,At==="reloadTile"),K(null))})},H.prototype.abortTile=function($){$.request&&($.request.cancel(),delete $.request),$.aborted=!0},H.prototype.unloadTile=function($){$.unloadVectorData(),this.actor.send("removeTile",{uid:$.uid,type:this.type,source:this.id})},H.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},H.prototype.serialize=function(){return r.extend({},this._options,{type:this.type,data:this._data})},H.prototype.hasTransition=function(){return!1},H}(r.Evented),B=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),z=function(F){function H($,K,ft,At){F.call(this),this.id=$,this.dispatcher=ft,this.coordinates=K.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(At),this.options=K}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.load=function($,K){var ft=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),function(At,N){ft._loaded=!0,At?ft.fire(new r.ErrorEvent(At)):N&&(ft.image=N,$&&(ft.coordinates=$),K&&K(),ft._finishLoading())})},H.prototype.loaded=function(){return this._loaded},H.prototype.updateImage=function($){var K=this;return this.image&&$.url?(this.options.url=$.url,this.load($.coordinates,function(){K.texture=null}),this):this},H.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))},H.prototype.onAdd=function($){this.map=$,this.load()},H.prototype.setCoordinates=function($){var K=this;this.coordinates=$;var ft=$.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(N){for(var Q=1/0,it=1/0,dt=-1/0,wt=-1/0,Et=0,Bt=N;Et<Bt.length;Et+=1){var Ut=Bt[Et];Q=Math.min(Q,Ut.x),it=Math.min(it,Ut.y),dt=Math.max(dt,Ut.x),wt=Math.max(wt,Ut.y)}var Ht=dt-Q,qt=wt-it,Jt=Math.max(Ht,qt),le=Math.max(0,Math.floor(-Math.log(Jt)/Math.LN2)),fe=Math.pow(2,le);return new r.CanonicalTileID(le,Math.floor((Q+dt)/2*fe),Math.floor((it+wt)/2*fe))}(ft),this.minzoom=this.maxzoom=this.tileID.z;var At=ft.map(function(N){return K.tileID.getTilePoint(N)._round()});return this._boundsArray=new r.StructArrayLayout4i8,this._boundsArray.emplaceBack(At[0].x,At[0].y,0,0),this._boundsArray.emplaceBack(At[1].x,At[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(At[3].x,At[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(At[2].x,At[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this},H.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var $=this.map.painter.context,K=$.gl;for(var ft in this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new r.Texture($,this.image,K.RGBA),this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE)),this.tiles){var At=this.tiles[ft];At.state!=="loaded"&&(At.state="loaded",At.texture=this.texture)}}},H.prototype.loadTile=function($,K){this.tileID&&this.tileID.equals($.tileID.canonical)?(this.tiles[String($.tileID.wrap)]=$,$.buckets={},K(null)):($.state="errored",K(null))},H.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},H.prototype.hasTransition=function(){return!1},H}(r.Evented),G=function(F){function H($,K,ft,At){F.call(this,$,K,ft,At),this.roundZoom=!0,this.type="video",this.options=K}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.load=function(){var $=this;this._loaded=!1;var K=this.options;this.urls=[];for(var ft=0,At=K.urls;ft<At.length;ft+=1){var N=At[ft];this.urls.push(this.map._requestManager.transformRequest(N,r.ResourceType.Source).url)}r.getVideo(this.urls,function(Q,it){$._loaded=!0,Q?$.fire(new r.ErrorEvent(Q)):it&&($.video=it,$.video.loop=!0,$.video.addEventListener("playing",function(){$.map.triggerRepaint()}),$.map&&$.video.play(),$._finishLoading())})},H.prototype.pause=function(){this.video&&this.video.pause()},H.prototype.play=function(){this.video&&this.video.play()},H.prototype.seek=function($){if(this.video){var K=this.video.seekable;$<K.start(0)||$>K.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+K.start(0)+" and "+K.end(0)+"-second mark."))):this.video.currentTime=$}},H.prototype.getVideo=function(){return this.video},H.prototype.onAdd=function($){this.map||(this.map=$,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},H.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var $=this.map.painter.context,K=$.gl;for(var ft in this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE),K.texSubImage2D(K.TEXTURE_2D,0,0,0,K.RGBA,K.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture($,this.video,K.RGBA),this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE)),this.tiles){var At=this.tiles[ft];At.state!=="loaded"&&(At.state="loaded",At.texture=this.texture)}}},H.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},H.prototype.hasTransition=function(){return this.video&&!this.video.paused},H}(z),V=function(F){function H($,K,ft,At){F.call(this,$,K,ft,At),K.coordinates?Array.isArray(K.coordinates)&&K.coordinates.length===4&&!K.coordinates.some(function(N){return!Array.isArray(N)||N.length!==2||N.some(function(Q){return typeof Q!="number"})})||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+$,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+$,null,'missing required property "coordinates"'))),K.animate&&typeof K.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError("sources."+$,null,'optional "animate" property must be a boolean value'))),K.canvas?typeof K.canvas=="string"||K.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+$,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+$,null,'missing required property "canvas"'))),this.options=K,this.animate=K.animate===void 0||K.animate}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},H.prototype.getCanvas=function(){return this.canvas},H.prototype.onAdd=function($){this.map=$,this.load(),this.canvas&&this.animate&&this.play()},H.prototype.onRemove=function(){this.pause()},H.prototype.prepare=function(){var $=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,$=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,$=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var K=this.map.painter.context,ft=K.gl;for(var At in this.boundsBuffer||(this.boundsBuffer=K.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?($||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture(K,this.canvas,ft.RGBA,{premultiply:!0}),this.tiles){var N=this.tiles[At];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture)}}},H.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},H.prototype.hasTransition=function(){return this._playing},H.prototype._hasInvalidDimensions=function(){for(var $=0,K=[this.canvas.width,this.canvas.height];$<K.length;$+=1){var ft=K[$];if(isNaN(ft)||ft<=0)return!0}return!1},H}(z),et={vector:P,raster:U,"raster-dem":R,geojson:j,video:G,image:z,canvas:V};function J(F,H){var $=r.identity([]);return r.translate($,$,[1,1,0]),r.scale($,$,[.5*F.width,.5*F.height,1]),r.multiply($,$,F.calculatePosMatrix(H.toUnwrapped()))}function X(F,H,$,K,ft,At){var N=function(qt,Jt,le){if(qt)for(var fe=0,Le=qt;fe<Le.length;fe+=1){var Se=Jt[Le[fe]];if(Se&&Se.source===le&&Se.type==="fill-extrusion")return!0}else for(var Ce in Jt){var Ne=Jt[Ce];if(Ne.source===le&&Ne.type==="fill-extrusion")return!0}return!1}(ft&&ft.layers,H,F.id),Q=At.maxPitchScaleFactor(),it=F.tilesIn(K,Q,N);it.sort(Y);for(var dt=[],wt=0,Et=it;wt<Et.length;wt+=1){var Bt=Et[wt];dt.push({wrappedTileID:Bt.tileID.wrapped().key,queryResults:Bt.tile.queryRenderedFeatures(H,$,F._state,Bt.queryGeometry,Bt.cameraQueryGeometry,Bt.scale,ft,At,Q,J(F.transform,Bt.tileID))})}var Ut=function(qt){for(var Jt={},le={},fe=0,Le=qt;fe<Le.length;fe+=1){var Se=Le[fe],Ce=Se.queryResults,Ne=Se.wrappedTileID,Ee=le[Ne]=le[Ne]||{};for(var rr in Ce)for(var Ye=Ce[rr],Ve=Ee[rr]=Ee[rr]||{},dr=Jt[rr]=Jt[rr]||[],vr=0,Fr=Ye;vr<Fr.length;vr+=1){var zr=Fr[vr];Ve[zr.featureIndex]||(Ve[zr.featureIndex]=!0,dr.push(zr))}}return Jt}(dt);for(var Ht in Ut)Ut[Ht].forEach(function(qt){var Jt=qt.feature,le=F.getFeatureState(Jt.layer["source-layer"],Jt.id);Jt.source=Jt.layer.source,Jt.layer["source-layer"]&&(Jt.sourceLayer=Jt.layer["source-layer"]),Jt.state=le});return Ut}function Y(F,H){var $=F.tileID,K=H.tileID;return $.overscaledZ-K.overscaledZ||$.canonical.y-K.canonical.y||$.wrap-K.wrap||$.canonical.x-K.canonical.x}var Z=function(F,H){this.max=F,this.onRemove=H,this.reset()};Z.prototype.reset=function(){for(var F in this.data)for(var H=0,$=this.data[F];H<$.length;H+=1){var K=$[H];K.timeout&&clearTimeout(K.timeout),this.onRemove(K.value)}return this.data={},this.order=[],this},Z.prototype.add=function(F,H,$){var K=this,ft=F.wrapped().key;this.data[ft]===void 0&&(this.data[ft]=[]);var At={value:H,timeout:void 0};if($!==void 0&&(At.timeout=setTimeout(function(){K.remove(F,At)},$)),this.data[ft].push(At),this.order.push(ft),this.order.length>this.max){var N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this},Z.prototype.has=function(F){return F.wrapped().key in this.data},Z.prototype.getAndRemove=function(F){return this.has(F)?this._getAndRemoveByKey(F.wrapped().key):null},Z.prototype._getAndRemoveByKey=function(F){var H=this.data[F].shift();return H.timeout&&clearTimeout(H.timeout),this.data[F].length===0&&delete this.data[F],this.order.splice(this.order.indexOf(F),1),H.value},Z.prototype.getByKey=function(F){var H=this.data[F];return H?H[0].value:null},Z.prototype.get=function(F){return this.has(F)?this.data[F.wrapped().key][0].value:null},Z.prototype.remove=function(F,H){if(!this.has(F))return this;var $=F.wrapped().key,K=H===void 0?0:this.data[$].indexOf(H),ft=this.data[$][K];return this.data[$].splice(K,1),ft.timeout&&clearTimeout(ft.timeout),this.data[$].length===0&&delete this.data[$],this.onRemove(ft.value),this.order.splice(this.order.indexOf($),1),this},Z.prototype.setMaxSize=function(F){for(this.max=F;this.order.length>this.max;){var H=this._getAndRemoveByKey(this.order[0]);H&&this.onRemove(H)}return this},Z.prototype.filter=function(F){var H=[];for(var $ in this.data)for(var K=0,ft=this.data[$];K<ft.length;K+=1){var At=ft[K];F(At.value)||H.push(At)}for(var N=0,Q=H;N<Q.length;N+=1){var it=Q[N];this.remove(it.value.tileID,it)}};var tt=function(F,H,$){this.context=F;var K=F.gl;this.buffer=K.createBuffer(),this.dynamicDraw=Boolean($),this.context.unbindVAO(),F.bindElementBuffer.set(this.buffer),K.bufferData(K.ELEMENT_ARRAY_BUFFER,H.arrayBuffer,this.dynamicDraw?K.DYNAMIC_DRAW:K.STATIC_DRAW),this.dynamicDraw||delete H.arrayBuffer};tt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},tt.prototype.updateData=function(F){var H=this.context.gl;this.context.unbindVAO(),this.bind(),H.bufferSubData(H.ELEMENT_ARRAY_BUFFER,0,F.arrayBuffer)},tt.prototype.destroy=function(){var F=this.context.gl;this.buffer&&(F.deleteBuffer(this.buffer),delete this.buffer)};var rt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},nt=function(F,H,$,K){this.length=H.length,this.attributes=$,this.itemSize=H.bytesPerElement,this.dynamicDraw=K,this.context=F;var ft=F.gl;this.buffer=ft.createBuffer(),F.bindVertexBuffer.set(this.buffer),ft.bufferData(ft.ARRAY_BUFFER,H.arrayBuffer,this.dynamicDraw?ft.DYNAMIC_DRAW:ft.STATIC_DRAW),this.dynamicDraw||delete H.arrayBuffer};nt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},nt.prototype.updateData=function(F){var H=this.context.gl;this.bind(),H.bufferSubData(H.ARRAY_BUFFER,0,F.arrayBuffer)},nt.prototype.enableAttributes=function(F,H){for(var $=0;$<this.attributes.length;$++){var K=this.attributes[$],ft=H.attributes[K.name];ft!==void 0&&F.enableVertexAttribArray(ft)}},nt.prototype.setVertexAttribPointers=function(F,H,$){for(var K=0;K<this.attributes.length;K++){var ft=this.attributes[K],At=H.attributes[ft.name];At!==void 0&&F.vertexAttribPointer(At,ft.components,F[rt[ft.type]],!1,this.itemSize,ft.offset+this.itemSize*($||0))}},nt.prototype.destroy=function(){var F=this.context.gl;this.buffer&&(F.deleteBuffer(this.buffer),delete this.buffer)};var ot=function(F){this.gl=F.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ot.prototype.get=function(){return this.current},ot.prototype.set=function(F){},ot.prototype.getDefault=function(){return this.default},ot.prototype.setDefault=function(){this.set(this.default)};var ct=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return r.Color.transparent},H.prototype.set=function($){var K=this.current;($.r!==K.r||$.g!==K.g||$.b!==K.b||$.a!==K.a||this.dirty)&&(this.gl.clearColor($.r,$.g,$.b,$.a),this.current=$,this.dirty=!1)},H}(ot),pt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 1},H.prototype.set=function($){($!==this.current||this.dirty)&&(this.gl.clearDepth($),this.current=$,this.dirty=!1)},H}(ot),gt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 0},H.prototype.set=function($){($!==this.current||this.dirty)&&(this.gl.clearStencil($),this.current=$,this.dirty=!1)},H}(ot),kt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return[!0,!0,!0,!0]},H.prototype.set=function($){var K=this.current;($[0]!==K[0]||$[1]!==K[1]||$[2]!==K[2]||$[3]!==K[3]||this.dirty)&&(this.gl.colorMask($[0],$[1],$[2],$[3]),this.current=$,this.dirty=!1)},H}(ot),yt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!0},H.prototype.set=function($){($!==this.current||this.dirty)&&(this.gl.depthMask($),this.current=$,this.dirty=!1)},H}(ot),mt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 255},H.prototype.set=function($){($!==this.current||this.dirty)&&(this.gl.stencilMask($),this.current=$,this.dirty=!1)},H}(ot),Ot=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},H.prototype.set=function($){var K=this.current;($.func!==K.func||$.ref!==K.ref||$.mask!==K.mask||this.dirty)&&(this.gl.stencilFunc($.func,$.ref,$.mask),this.current=$,this.dirty=!1)},H}(ot),vt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){var $=this.gl;return[$.KEEP,$.KEEP,$.KEEP]},H.prototype.set=function($){var K=this.current;($[0]!==K[0]||$[1]!==K[1]||$[2]!==K[2]||this.dirty)&&(this.gl.stencilOp($[0],$[1],$[2]),this.current=$,this.dirty=!1)},H}(ot),xt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;$?K.enable(K.STENCIL_TEST):K.disable(K.STENCIL_TEST),this.current=$,this.dirty=!1}},H}(ot),st=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return[0,1]},H.prototype.set=function($){var K=this.current;($[0]!==K[0]||$[1]!==K[1]||this.dirty)&&(this.gl.depthRange($[0],$[1]),this.current=$,this.dirty=!1)},H}(ot),at=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;$?K.enable(K.DEPTH_TEST):K.disable(K.DEPTH_TEST),this.current=$,this.dirty=!1}},H}(ot),ht=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.LESS},H.prototype.set=function($){($!==this.current||this.dirty)&&(this.gl.depthFunc($),this.current=$,this.dirty=!1)},H}(ot),Lt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;$?K.enable(K.BLEND):K.disable(K.BLEND),this.current=$,this.dirty=!1}},H}(ot),Mt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){var $=this.gl;return[$.ONE,$.ZERO]},H.prototype.set=function($){var K=this.current;($[0]!==K[0]||$[1]!==K[1]||this.dirty)&&(this.gl.blendFunc($[0],$[1]),this.current=$,this.dirty=!1)},H}(ot),_t=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return r.Color.transparent},H.prototype.set=function($){var K=this.current;($.r!==K.r||$.g!==K.g||$.b!==K.b||$.a!==K.a||this.dirty)&&(this.gl.blendColor($.r,$.g,$.b,$.a),this.current=$,this.dirty=!1)},H}(ot),St=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.FUNC_ADD},H.prototype.set=function($){($!==this.current||this.dirty)&&(this.gl.blendEquation($),this.current=$,this.dirty=!1)},H}(ot),Dt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;$?K.enable(K.CULL_FACE):K.disable(K.CULL_FACE),this.current=$,this.dirty=!1}},H}(ot),ut=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.BACK},H.prototype.set=function($){($!==this.current||this.dirty)&&(this.gl.cullFace($),this.current=$,this.dirty=!1)},H}(ot),Tt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.CCW},H.prototype.set=function($){($!==this.current||this.dirty)&&(this.gl.frontFace($),this.current=$,this.dirty=!1)},H}(ot),bt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function($){($!==this.current||this.dirty)&&(this.gl.useProgram($),this.current=$,this.dirty=!1)},H}(ot),It=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.TEXTURE0},H.prototype.set=function($){($!==this.current||this.dirty)&&(this.gl.activeTexture($),this.current=$,this.dirty=!1)},H}(ot),zt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){var $=this.gl;return[0,0,$.drawingBufferWidth,$.drawingBufferHeight]},H.prototype.set=function($){var K=this.current;($[0]!==K[0]||$[1]!==K[1]||$[2]!==K[2]||$[3]!==K[3]||this.dirty)&&(this.gl.viewport($[0],$[1],$[2],$[3]),this.current=$,this.dirty=!1)},H}(ot),Ft=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;K.bindFramebuffer(K.FRAMEBUFFER,$),this.current=$,this.dirty=!1}},H}(ot),$t=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;K.bindRenderbuffer(K.RENDERBUFFER,$),this.current=$,this.dirty=!1}},H}(ot),Wt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;K.bindTexture(K.TEXTURE_2D,$),this.current=$,this.dirty=!1}},H}(ot),Xt=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;K.bindBuffer(K.ARRAY_BUFFER,$),this.current=$,this.dirty=!1}},H}(ot),ae=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function($){var K=this.gl;K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,$),this.current=$,this.dirty=!1},H}(ot),Qt=function(F){function H($){F.call(this,$),this.vao=$.extVertexArrayObject}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function($){this.vao&&($!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES($),this.current=$,this.dirty=!1)},H}(ot),de=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 4},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;K.pixelStorei(K.UNPACK_ALIGNMENT,$),this.current=$,this.dirty=!1}},H}(ot),ye=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$),this.current=$,this.dirty=!1}},H}(ot),ve=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function($){if($!==this.current||this.dirty){var K=this.gl;K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,$),this.current=$,this.dirty=!1}},H}(ot),ie=function(F){function H($,K){F.call(this,$),this.context=$,this.parent=K}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H}(ot),se=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.setDirty=function(){this.dirty=!0},H.prototype.set=function($){if($!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var K=this.gl;K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,$,0),this.current=$,this.dirty=!1}},H}(ie),ke=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.set=function($){if($!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var K=this.gl;K.framebufferRenderbuffer(K.FRAMEBUFFER,K.DEPTH_ATTACHMENT,K.RENDERBUFFER,$),this.current=$,this.dirty=!1}},H}(ie),Ae=function(F,H,$,K){this.context=F,this.width=H,this.height=$;var ft=F.gl,At=this.framebuffer=ft.createFramebuffer();this.colorAttachment=new se(F,At),K&&(this.depthAttachment=new ke(F,At))};Ae.prototype.destroy=function(){var F=this.context.gl,H=this.colorAttachment.get();if(H&&F.deleteTexture(H),this.depthAttachment){var $=this.depthAttachment.get();$&&F.deleteRenderbuffer($)}F.deleteFramebuffer(this.framebuffer)};var Ie=function(F,H,$){this.func=F,this.mask=H,this.range=$};Ie.ReadOnly=!1,Ie.ReadWrite=!0,Ie.disabled=new Ie(519,Ie.ReadOnly,[0,1]);var Te=7680,Vt=function(F,H,$,K,ft,At){this.test=F,this.ref=H,this.mask=$,this.fail=K,this.depthFail=ft,this.pass=At};Vt.disabled=new Vt({func:519,mask:0},0,0,Te,Te,Te);var Zt=function(F,H,$){this.blendFunction=F,this.blendColor=H,this.mask=$};Zt.Replace=[1,0],Zt.disabled=new Zt(Zt.Replace,r.Color.transparent,[!1,!1,!1,!1]),Zt.unblended=new Zt(Zt.Replace,r.Color.transparent,[!0,!0,!0,!0]),Zt.alphaBlended=new Zt([1,771],r.Color.transparent,[!0,!0,!0,!0]);var Gt=function(F,H,$){this.enable=F,this.mode=H,this.frontFace=$};Gt.disabled=new Gt(!1,1029,2305),Gt.backCCW=new Gt(!0,1029,2305);var Yt=function(F){this.gl=F,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ct(this),this.clearDepth=new pt(this),this.clearStencil=new gt(this),this.colorMask=new kt(this),this.depthMask=new yt(this),this.stencilMask=new mt(this),this.stencilFunc=new Ot(this),this.stencilOp=new vt(this),this.stencilTest=new xt(this),this.depthRange=new st(this),this.depthTest=new at(this),this.depthFunc=new ht(this),this.blend=new Lt(this),this.blendFunc=new Mt(this),this.blendColor=new _t(this),this.blendEquation=new St(this),this.cullFace=new Dt(this),this.cullFaceSide=new ut(this),this.frontFace=new Tt(this),this.program=new bt(this),this.activeTexture=new It(this),this.viewport=new zt(this),this.bindFramebuffer=new Ft(this),this.bindRenderbuffer=new $t(this),this.bindTexture=new Wt(this),this.bindVertexBuffer=new Xt(this),this.bindElementBuffer=new ae(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Qt(this),this.pixelStoreUnpack=new de(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new ve(this),this.extTextureFilterAnisotropic=F.getExtension("EXT_texture_filter_anisotropic")||F.getExtension("MOZ_EXT_texture_filter_anisotropic")||F.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=F.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=F.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(F.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=F.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=F.getExtension("EXT_disjoint_timer_query")};Yt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Yt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Yt.prototype.createIndexBuffer=function(F,H){return new tt(this,F,H)},Yt.prototype.createVertexBuffer=function(F,H,$){return new nt(this,F,H,$)},Yt.prototype.createRenderbuffer=function(F,H,$){var K=this.gl,ft=K.createRenderbuffer();return this.bindRenderbuffer.set(ft),K.renderbufferStorage(K.RENDERBUFFER,F,H,$),this.bindRenderbuffer.set(null),ft},Yt.prototype.createFramebuffer=function(F,H,$){return new Ae(this,F,H,$)},Yt.prototype.clear=function(F){var H=F.color,$=F.depth,K=this.gl,ft=0;H&&(ft|=K.COLOR_BUFFER_BIT,this.clearColor.set(H),this.colorMask.set([!0,!0,!0,!0])),$!==void 0&&(ft|=K.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set($),this.depthMask.set(!0)),K.clear(ft)},Yt.prototype.setCullFace=function(F){F.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(F.mode),this.frontFace.set(F.frontFace))},Yt.prototype.setDepthMode=function(F){F.func!==this.gl.ALWAYS||F.mask?(this.depthTest.set(!0),this.depthFunc.set(F.func),this.depthMask.set(F.mask),this.depthRange.set(F.range)):this.depthTest.set(!1)},Yt.prototype.setStencilMode=function(F){F.test.func!==this.gl.ALWAYS||F.mask?(this.stencilTest.set(!0),this.stencilMask.set(F.mask),this.stencilOp.set([F.fail,F.depthFail,F.pass]),this.stencilFunc.set({func:F.test.func,ref:F.ref,mask:F.test.mask})):this.stencilTest.set(!1)},Yt.prototype.setColorMode=function(F){r.deepEqual(F.blendFunction,Zt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(F.blendFunction),this.blendColor.set(F.blendColor)),this.colorMask.set(F.mask)},Yt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ne=function(F){function H($,K,ft){var At=this;F.call(this),this.id=$,this.dispatcher=ft,this.on("data",function(N){N.dataType==="source"&&N.sourceDataType==="metadata"&&(At._sourceLoaded=!0),At._sourceLoaded&&!At._paused&&N.dataType==="source"&&N.sourceDataType==="content"&&(At.reload(),At.transform&&At.update(At.transform))}),this.on("error",function(){At._sourceErrored=!0}),this._source=function(N,Q,it,dt){var wt=new et[Q.type](N,Q,it,dt);if(wt.id!==N)throw new Error("Expected Source id to be "+N+" instead of "+wt.id);return r.bindAll(["load","abort","unload","serialize","prepare"],wt),wt}($,K,ft,this),this._tiles={},this._cache=new Z(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new r.SourceFeatureState}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.onAdd=function($){this.map=$,this._maxTileCacheSize=$?$._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd($)},H.prototype.onRemove=function($){this._source&&this._source.onRemove&&this._source.onRemove($)},H.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var $ in this._tiles){var K=this._tiles[$];if(K.state!=="loaded"&&K.state!=="errored")return!1}return!0},H.prototype.getSource=function(){return this._source},H.prototype.pause=function(){this._paused=!0},H.prototype.resume=function(){if(this._paused){var $=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,$&&this.reload(),this.transform&&this.update(this.transform)}},H.prototype._loadTile=function($,K){return this._source.loadTile($,K)},H.prototype._unloadTile=function($){if(this._source.unloadTile)return this._source.unloadTile($,function(){})},H.prototype._abortTile=function($){if(this._source.abortTile)return this._source.abortTile($,function(){})},H.prototype.serialize=function(){return this._source.serialize()},H.prototype.prepare=function($){for(var K in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ft=this._tiles[K];ft.upload($),ft.prepare(this.map.style.imageManager)}},H.prototype.getIds=function(){return r.values(this._tiles).map(function($){return $.tileID}).sort(re).map(function($){return $.key})},H.prototype.getRenderableIds=function($){var K=this,ft=[];for(var At in this._tiles)this._isIdRenderable(At,$)&&ft.push(this._tiles[At]);return $?ft.sort(function(N,Q){var it=N.tileID,dt=Q.tileID,wt=new r.Point(it.canonical.x,it.canonical.y)._rotate(K.transform.angle),Et=new r.Point(dt.canonical.x,dt.canonical.y)._rotate(K.transform.angle);return it.overscaledZ-dt.overscaledZ||Et.y-wt.y||Et.x-wt.x}).map(function(N){return N.tileID.key}):ft.map(function(N){return N.tileID}).sort(re).map(function(N){return N.key})},H.prototype.hasRenderableParent=function($){var K=this.findLoadedParent($,0);return!!K&&this._isIdRenderable(K.tileID.key)},H.prototype._isIdRenderable=function($,K){return this._tiles[$]&&this._tiles[$].hasData()&&!this._coveredTiles[$]&&(K||!this._tiles[$].holdingForFade())},H.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var $ in this._cache.reset(),this._tiles)this._tiles[$].state!=="errored"&&this._reloadTile($,"reloading")},H.prototype._reloadTile=function($,K){var ft=this._tiles[$];ft&&(ft.state!=="loading"&&(ft.state=K),this._loadTile(ft,this._tileLoaded.bind(this,ft,$,K)))},H.prototype._tileLoaded=function($,K,ft,At){if(At)return $.state="errored",void(At.status!==404?this._source.fire(new r.ErrorEvent(At,{tile:$})):this.update(this.transform));$.timeAdded=r.browser.now(),ft==="expired"&&($.refreshedUponExpiration=!0),this._setTileReloadTimer(K,$),this.getSource().type==="raster-dem"&&$.dem&&this._backfillDEM($),this._state.initializeTileState($,this.map?this.map.painter:null),this._source.fire(new r.Event("data",{dataType:"source",tile:$,coord:$.tileID}))},H.prototype._backfillDEM=function($){for(var K=this.getRenderableIds(),ft=0;ft<K.length;ft++){var At=K[ft];if($.neighboringTiles&&$.neighboringTiles[At]){var N=this.getTileByID(At);Q($,N),Q(N,$)}}function Q(it,dt){it.needsHillshadePrepare=!0;var wt=dt.tileID.canonical.x-it.tileID.canonical.x,Et=dt.tileID.canonical.y-it.tileID.canonical.y,Bt=Math.pow(2,it.tileID.canonical.z),Ut=dt.tileID.key;wt===0&&Et===0||Math.abs(Et)>1||(Math.abs(wt)>1&&(Math.abs(wt+Bt)===1?wt+=Bt:Math.abs(wt-Bt)===1&&(wt-=Bt)),dt.dem&&it.dem&&(it.dem.backfillBorder(dt.dem,wt,Et),it.neighboringTiles&&it.neighboringTiles[Ut]&&(it.neighboringTiles[Ut].backfilled=!0)))}},H.prototype.getTile=function($){return this.getTileByID($.key)},H.prototype.getTileByID=function($){return this._tiles[$]},H.prototype._retainLoadedChildren=function($,K,ft,At){for(var N in this._tiles){var Q=this._tiles[N];if(!(At[N]||!Q.hasData()||Q.tileID.overscaledZ<=K||Q.tileID.overscaledZ>ft)){for(var it=Q.tileID;Q&&Q.tileID.overscaledZ>K+1;){var dt=Q.tileID.scaledTo(Q.tileID.overscaledZ-1);(Q=this._tiles[dt.key])&&Q.hasData()&&(it=dt)}for(var wt=it;wt.overscaledZ>K;)if($[(wt=wt.scaledTo(wt.overscaledZ-1)).key]){At[it.key]=it;break}}}},H.prototype.findLoadedParent=function($,K){if($.key in this._loadedParentTiles){var ft=this._loadedParentTiles[$.key];return ft&&ft.tileID.overscaledZ>=K?ft:null}for(var At=$.overscaledZ-1;At>=K;At--){var N=$.scaledTo(At),Q=this._getLoadedTile(N);if(Q)return Q}},H.prototype._getLoadedTile=function($){var K=this._tiles[$.key];return K&&K.hasData()?K:this._cache.getByKey($.wrapped().key)},H.prototype.updateCacheSize=function($){var K=(Math.ceil($.width/this._source.tileSize)+1)*(Math.ceil($.height/this._source.tileSize)+1),ft=Math.floor(5*K),At=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ft):ft;this._cache.setMaxSize(At)},H.prototype.handleWrapJump=function($){var K=($-(this._prevLng===void 0?$:this._prevLng))/360,ft=Math.round(K);if(this._prevLng=$,ft){var At={};for(var N in this._tiles){var Q=this._tiles[N];Q.tileID=Q.tileID.unwrapTo(Q.tileID.wrap+ft),At[Q.tileID.key]=Q}for(var it in this._tiles=At,this._timers)clearTimeout(this._timers[it]),delete this._timers[it];for(var dt in this._tiles){var wt=this._tiles[dt];this._setTileReloadTimer(dt,wt)}}},H.prototype.update=function($){var K=this;if(this.transform=$,this._sourceLoaded&&!this._paused){var ft;this.updateCacheSize($),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ft=$.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ee){return new r.OverscaledTileID(Ee.canonical.z,Ee.wrap,Ee.canonical.z,Ee.canonical.x,Ee.canonical.y)}):(ft=$.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ft=ft.filter(function(Ee){return K._source.hasTile(Ee)}))):ft=[];var At=$.coveringZoomLevel(this._source),N=Math.max(At-H.maxOverzooming,this._source.minzoom),Q=Math.max(At+H.maxUnderzooming,this._source.minzoom),it=this._updateRetainedTiles(ft,At);if(Pt(this._source.type)){for(var dt={},wt={},Et=0,Bt=Object.keys(it);Et<Bt.length;Et+=1){var Ut=Bt[Et],Ht=it[Ut],qt=this._tiles[Ut];if(qt&&!(qt.fadeEndTime&&qt.fadeEndTime<=r.browser.now())){var Jt=this.findLoadedParent(Ht,N);Jt&&(this._addTile(Jt.tileID),dt[Jt.tileID.key]=Jt.tileID),wt[Ut]=Ht}}for(var le in this._retainLoadedChildren(wt,At,Q,it),dt)it[le]||(this._coveredTiles[le]=!0,it[le]=dt[le])}for(var fe in it)this._tiles[fe].clearFadeHold();for(var Le=0,Se=r.keysDifference(this._tiles,it);Le<Se.length;Le+=1){var Ce=Se[Le],Ne=this._tiles[Ce];Ne.hasSymbolBuckets&&!Ne.holdingForFade()?Ne.setHoldDuration(this.map._fadeDuration):Ne.hasSymbolBuckets&&!Ne.symbolFadeFinished()||this._removeTile(Ce)}this._updateLoadedParentTileCache()}},H.prototype.releaseSymbolFadeTiles=function(){for(var $ in this._tiles)this._tiles[$].holdingForFade()&&this._removeTile($)},H.prototype._updateRetainedTiles=function($,K){for(var ft={},At={},N=Math.max(K-H.maxOverzooming,this._source.minzoom),Q=Math.max(K+H.maxUnderzooming,this._source.minzoom),it={},dt=0,wt=$;dt<wt.length;dt+=1){var Et=wt[dt],Bt=this._addTile(Et);ft[Et.key]=Et,Bt.hasData()||K<this._source.maxzoom&&(it[Et.key]=Et)}this._retainLoadedChildren(it,K,Q,ft);for(var Ut=0,Ht=$;Ut<Ht.length;Ut+=1){var qt=Ht[Ut],Jt=this._tiles[qt.key];if(!Jt.hasData()){if(K+1>this._source.maxzoom){var le=qt.children(this._source.maxzoom)[0],fe=this.getTile(le);if(fe&&fe.hasData()){ft[le.key]=le;continue}}else{var Le=qt.children(this._source.maxzoom);if(ft[Le[0].key]&&ft[Le[1].key]&&ft[Le[2].key]&&ft[Le[3].key])continue}for(var Se=Jt.wasRequested(),Ce=qt.overscaledZ-1;Ce>=N;--Ce){var Ne=qt.scaledTo(Ce);if(At[Ne.key]||(At[Ne.key]=!0,!(Jt=this.getTile(Ne))&&Se&&(Jt=this._addTile(Ne)),Jt&&(ft[Ne.key]=Ne,Se=Jt.wasRequested(),Jt.hasData())))break}}}return ft},H.prototype._updateLoadedParentTileCache=function(){for(var $ in this._loadedParentTiles={},this._tiles){for(var K=[],ft=void 0,At=this._tiles[$].tileID;At.overscaledZ>0;){if(At.key in this._loadedParentTiles){ft=this._loadedParentTiles[At.key];break}K.push(At.key);var N=At.scaledTo(At.overscaledZ-1);if(ft=this._getLoadedTile(N))break;At=N}for(var Q=0,it=K;Q<it.length;Q+=1){var dt=it[Q];this._loadedParentTiles[dt]=ft}}},H.prototype._addTile=function($){var K=this._tiles[$.key];if(K)return K;(K=this._cache.getAndRemove($))&&(this._setTileReloadTimer($.key,K),K.tileID=$,this._state.initializeTileState(K,this.map?this.map.painter:null),this._cacheTimers[$.key]&&(clearTimeout(this._cacheTimers[$.key]),delete this._cacheTimers[$.key],this._setTileReloadTimer($.key,K)));var ft=Boolean(K);return ft||(K=new r.Tile($,this._source.tileSize*$.overscaleFactor()),this._loadTile(K,this._tileLoaded.bind(this,K,$.key,K.state))),K?(K.uses++,this._tiles[$.key]=K,ft||this._source.fire(new r.Event("dataloading",{tile:K,coord:K.tileID,dataType:"source"})),K):null},H.prototype._setTileReloadTimer=function($,K){var ft=this;$ in this._timers&&(clearTimeout(this._timers[$]),delete this._timers[$]);var At=K.getExpiryTimeout();At&&(this._timers[$]=setTimeout(function(){ft._reloadTile($,"expired"),delete ft._timers[$]},At))},H.prototype._removeTile=function($){var K=this._tiles[$];K&&(K.uses--,delete this._tiles[$],this._timers[$]&&(clearTimeout(this._timers[$]),delete this._timers[$]),K.uses>0||(K.hasData()&&K.state!=="reloading"?this._cache.add(K.tileID,K,K.getExpiryTimeout()):(K.aborted=!0,this._abortTile(K),this._unloadTile(K))))},H.prototype.clearTiles=function(){for(var $ in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile($);this._cache.reset()},H.prototype.tilesIn=function($,K,ft){var At=this,N=[],Q=this.transform;if(!Q)return N;for(var it=ft?Q.getCameraQueryGeometry($):$,dt=$.map(function(Ce){return Q.pointCoordinate(Ce)}),wt=it.map(function(Ce){return Q.pointCoordinate(Ce)}),Et=this.getIds(),Bt=1/0,Ut=1/0,Ht=-1/0,qt=-1/0,Jt=0,le=wt;Jt<le.length;Jt+=1){var fe=le[Jt];Bt=Math.min(Bt,fe.x),Ut=Math.min(Ut,fe.y),Ht=Math.max(Ht,fe.x),qt=Math.max(qt,fe.y)}for(var Le=function(Ce){var Ne=At._tiles[Et[Ce]];if(!Ne.holdingForFade()){var Ee=Ne.tileID,rr=Math.pow(2,Q.zoom-Ne.tileID.overscaledZ),Ye=K*Ne.queryPadding*r.EXTENT/Ne.tileSize/rr,Ve=[Ee.getTilePoint(new r.MercatorCoordinate(Bt,Ut)),Ee.getTilePoint(new r.MercatorCoordinate(Ht,qt))];if(Ve[0].x-Ye<r.EXTENT&&Ve[0].y-Ye<r.EXTENT&&Ve[1].x+Ye>=0&&Ve[1].y+Ye>=0){var dr=dt.map(function(Fr){return Ee.getTilePoint(Fr)}),vr=wt.map(function(Fr){return Ee.getTilePoint(Fr)});N.push({tile:Ne,tileID:Ee,queryGeometry:dr,cameraQueryGeometry:vr,scale:rr})}}},Se=0;Se<Et.length;Se++)Le(Se);return N},H.prototype.getVisibleCoordinates=function($){for(var K=this,ft=this.getRenderableIds($).map(function(it){return K._tiles[it].tileID}),At=0,N=ft;At<N.length;At+=1){var Q=N[At];Q.posMatrix=this.transform.calculatePosMatrix(Q.toUnwrapped())}return ft},H.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Pt(this._source.type))for(var $ in this._tiles){var K=this._tiles[$];if(K.fadeEndTime!==void 0&&K.fadeEndTime>=r.browser.now())return!0}return!1},H.prototype.setFeatureState=function($,K,ft){$=$||"_geojsonTileLayer",this._state.updateState($,K,ft)},H.prototype.removeFeatureState=function($,K,ft){$=$||"_geojsonTileLayer",this._state.removeFeatureState($,K,ft)},H.prototype.getFeatureState=function($,K){return $=$||"_geojsonTileLayer",this._state.getState($,K)},H.prototype.setDependencies=function($,K,ft){var At=this._tiles[$];At&&At.setDependencies(K,ft)},H.prototype.reloadTilesForDependencies=function($,K){for(var ft in this._tiles)this._tiles[ft].hasDependency($,K)&&this._reloadTile(ft,"reloading");this._cache.filter(function(At){return!At.hasDependency($,K)})},H}(r.Evented);function re(F,H){var $=Math.abs(2*F.wrap)-+(F.wrap<0),K=Math.abs(2*H.wrap)-+(H.wrap<0);return F.overscaledZ-H.overscaledZ||K-$||H.canonical.y-F.canonical.y||H.canonical.x-F.canonical.x}function Pt(F){return F==="raster"||F==="image"||F==="video"}function Nt(){return new r.window.Worker(bo.workerUrl)}ne.maxOverzooming=10,ne.maxUnderzooming=3;var ee="mapboxgl_preloaded_worker_pool",te=function(){this.active={}};te.prototype.acquire=function(F){if(!this.workers)for(this.workers=[];this.workers.length<te.workerCount;)this.workers.push(new Nt);return this.active[F]=!0,this.workers.slice()},te.prototype.release=function(F){delete this.active[F],this.numActive()===0&&(this.workers.forEach(function(H){H.terminate()}),this.workers=null)},te.prototype.isPreloaded=function(){return!!this.active[ee]},te.prototype.numActive=function(){return Object.keys(this.active).length};var ge,pe=Math.floor(r.browser.hardwareConcurrency/2);function me(){return ge||(ge=new te),ge}function ce(F,H){var $={};for(var K in F)K!=="ref"&&($[K]=F[K]);return r.refProperties.forEach(function(ft){ft in H&&($[ft]=H[ft])}),$}function we(F){F=F.slice();for(var H=Object.create(null),$=0;$<F.length;$++)H[F[$].id]=F[$];for(var K=0;K<F.length;K++)"ref"in F[K]&&(F[K]=ce(F[K],H[F[K].ref]));return F}te.workerCount=Math.max(Math.min(pe,6),1);var ue={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function he(F,H,$){$.push({command:ue.addSource,args:[F,H[F]]})}function be(F,H,$){H.push({command:ue.removeSource,args:[F]}),$[F]=!0}function Pe(F,H,$,K){be(F,$,K),he(F,H,$)}function De(F,H,$){var K;for(K in F[$])if(F[$].hasOwnProperty(K)&&K!=="data"&&!r.deepEqual(F[$][K],H[$][K]))return!1;for(K in H[$])if(H[$].hasOwnProperty(K)&&K!=="data"&&!r.deepEqual(F[$][K],H[$][K]))return!1;return!0}function Ue(F,H,$,K,ft,At){var N;for(N in H=H||{},F=F||{})F.hasOwnProperty(N)&&(r.deepEqual(F[N],H[N])||$.push({command:At,args:[K,N,H[N],ft]}));for(N in H)H.hasOwnProperty(N)&&!F.hasOwnProperty(N)&&(r.deepEqual(F[N],H[N])||$.push({command:At,args:[K,N,H[N],ft]}))}function tr(F){return F.id}function Ge(F,H){return F[H.id]=H,F}function Ze(F,H){if(!F)return[{command:ue.setStyle,args:[H]}];var $=[];try{if(!r.deepEqual(F.version,H.version))return[{command:ue.setStyle,args:[H]}];r.deepEqual(F.center,H.center)||$.push({command:ue.setCenter,args:[H.center]}),r.deepEqual(F.zoom,H.zoom)||$.push({command:ue.setZoom,args:[H.zoom]}),r.deepEqual(F.bearing,H.bearing)||$.push({command:ue.setBearing,args:[H.bearing]}),r.deepEqual(F.pitch,H.pitch)||$.push({command:ue.setPitch,args:[H.pitch]}),r.deepEqual(F.sprite,H.sprite)||$.push({command:ue.setSprite,args:[H.sprite]}),r.deepEqual(F.glyphs,H.glyphs)||$.push({command:ue.setGlyphs,args:[H.glyphs]}),r.deepEqual(F.transition,H.transition)||$.push({command:ue.setTransition,args:[H.transition]}),r.deepEqual(F.light,H.light)||$.push({command:ue.setLight,args:[H.light]});var K={},ft=[];(function(N,Q,it,dt){var wt;for(wt in Q=Q||{},N=N||{})N.hasOwnProperty(wt)&&(Q.hasOwnProperty(wt)||be(wt,it,dt));for(wt in Q)Q.hasOwnProperty(wt)&&(N.hasOwnProperty(wt)?r.deepEqual(N[wt],Q[wt])||(N[wt].type==="geojson"&&Q[wt].type==="geojson"&&De(N,Q,wt)?it.push({command:ue.setGeoJSONSourceData,args:[wt,Q[wt].data]}):Pe(wt,Q,it,dt)):he(wt,Q,it))})(F.sources,H.sources,ft,K);var At=[];F.layers&&F.layers.forEach(function(N){K[N.source]?$.push({command:ue.removeLayer,args:[N.id]}):At.push(N)}),$=$.concat(ft),function(N,Q,it){Q=Q||[];var dt,wt,Et,Bt,Ut,Ht,qt,Jt=(N=N||[]).map(tr),le=Q.map(tr),fe=N.reduce(Ge,{}),Le=Q.reduce(Ge,{}),Se=Jt.slice(),Ce=Object.create(null);for(dt=0,wt=0;dt<Jt.length;dt++)Et=Jt[dt],Le.hasOwnProperty(Et)?wt++:(it.push({command:ue.removeLayer,args:[Et]}),Se.splice(Se.indexOf(Et,wt),1));for(dt=0,wt=0;dt<le.length;dt++)Et=le[le.length-1-dt],Se[Se.length-1-dt]!==Et&&(fe.hasOwnProperty(Et)?(it.push({command:ue.removeLayer,args:[Et]}),Se.splice(Se.lastIndexOf(Et,Se.length-wt),1)):wt++,Ht=Se[Se.length-dt],it.push({command:ue.addLayer,args:[Le[Et],Ht]}),Se.splice(Se.length-dt,0,Et),Ce[Et]=!0);for(dt=0;dt<le.length;dt++)if(Bt=fe[Et=le[dt]],Ut=Le[Et],!Ce[Et]&&!r.deepEqual(Bt,Ut))if(r.deepEqual(Bt.source,Ut.source)&&r.deepEqual(Bt["source-layer"],Ut["source-layer"])&&r.deepEqual(Bt.type,Ut.type)){for(qt in Ue(Bt.layout,Ut.layout,it,Et,null,ue.setLayoutProperty),Ue(Bt.paint,Ut.paint,it,Et,null,ue.setPaintProperty),r.deepEqual(Bt.filter,Ut.filter)||it.push({command:ue.setFilter,args:[Et,Ut.filter]}),r.deepEqual(Bt.minzoom,Ut.minzoom)&&r.deepEqual(Bt.maxzoom,Ut.maxzoom)||it.push({command:ue.setLayerZoomRange,args:[Et,Ut.minzoom,Ut.maxzoom]}),Bt)Bt.hasOwnProperty(qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?Ue(Bt[qt],Ut[qt],it,Et,qt.slice(6),ue.setPaintProperty):r.deepEqual(Bt[qt],Ut[qt])||it.push({command:ue.setLayerProperty,args:[Et,qt,Ut[qt]]}));for(qt in Ut)Ut.hasOwnProperty(qt)&&!Bt.hasOwnProperty(qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?Ue(Bt[qt],Ut[qt],it,Et,qt.slice(6),ue.setPaintProperty):r.deepEqual(Bt[qt],Ut[qt])||it.push({command:ue.setLayerProperty,args:[Et,qt,Ut[qt]]}))}else it.push({command:ue.removeLayer,args:[Et]}),Ht=Se[Se.lastIndexOf(Et)+1],it.push({command:ue.addLayer,args:[Ut,Ht]})}(At,H.layers,$)}catch(N){console.warn("Unable to compute style diff:",N),$=[{command:ue.setStyle,args:[H]}]}return $}var We=function(F,H){this.reset(F,H)};We.prototype.reset=function(F,H){this.points=F||[],this._distances=[0];for(var $=1;$<this.points.length;$++)this._distances[$]=this._distances[$-1]+this.points[$].dist(this.points[$-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(H||0,.5*this.length),this.paddedLength=this.length-2*this.padding},We.prototype.lerp=function(F){if(this.points.length===1)return this.points[0];F=r.clamp(F,0,1);for(var H=1,$=this._distances[H],K=F*this.paddedLength+this.padding;$<K&&H<this._distances.length;)$=this._distances[++H];var ft=H-1,At=this._distances[ft],N=$-At,Q=N>0?(K-At)/N:0;return this.points[ft].mult(1-Q).add(this.points[H].mult(Q))};var pr=function(F,H,$){var K=this.boxCells=[],ft=this.circleCells=[];this.xCellCount=Math.ceil(F/$),this.yCellCount=Math.ceil(H/$);for(var At=0;At<this.xCellCount*this.yCellCount;At++)K.push([]),ft.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=F,this.height=H,this.xScale=this.xCellCount/F,this.yScale=this.yCellCount/H,this.boxUid=0,this.circleUid=0};function xr(F,H,$,K,ft){var At=r.create();return H?(r.scale(At,At,[1/ft,1/ft,1]),$||r.rotateZ(At,At,K.angle)):r.multiply(At,K.labelPlaneMatrix,F),At}function sr(F,H,$,K,ft){if(H){var At=r.clone(F);return r.scale(At,At,[ft,ft,1]),$||r.rotateZ(At,At,-K.angle),At}return K.glCoordMatrix}function $e(F,H){var $=[F.x,F.y,0,1];en($,$,H);var K=$[3];return{point:new r.Point($[0]/K,$[1]/K),signedDistanceFromCamera:K}}function ir(F,H){return .5+F/H*.5}function Ke(F,H){var $=F[0]/F[3],K=F[1]/F[3];return $>=-H[0]&&$<=H[0]&&K>=-H[1]&&K<=H[1]}function ar(F,H,$,K,ft,At,N,Q){var it=K?F.textSizeData:F.iconSizeData,dt=r.evaluateSizeForZoom(it,$.transform.zoom),wt=[256/$.width*2+1,256/$.height*2+1],Et=K?F.text.dynamicLayoutVertexArray:F.icon.dynamicLayoutVertexArray;Et.clear();for(var Bt=F.lineVertexArray,Ut=K?F.text.placedSymbolArray:F.icon.placedSymbolArray,Ht=$.transform.width/$.transform.height,qt=!1,Jt=0;Jt<Ut.length;Jt++){var le=Ut.get(Jt);if(le.hidden||le.writingMode===r.WritingMode.vertical&&!qt)Xr(le.numGlyphs,Et);else{qt=!1;var fe=[le.anchorX,le.anchorY,0,1];if(r.transformMat4(fe,fe,H),Ke(fe,wt)){var Le=fe[3],Se=ir($.transform.cameraToCenterDistance,Le),Ce=r.evaluateSizeForFeature(it,dt,le),Ne=N?Ce/Se:Ce*Se,Ee=new r.Point(le.anchorX,le.anchorY),rr=$e(Ee,ft).point,Ye={},Ve=Cr(le,Ne,!1,Q,H,ft,At,F.glyphOffsetArray,Bt,Et,rr,Ee,Ye,Ht);qt=Ve.useVertical,(Ve.notEnoughRoom||qt||Ve.needsFlipping&&Cr(le,Ne,!0,Q,H,ft,At,F.glyphOffsetArray,Bt,Et,rr,Ee,Ye,Ht).notEnoughRoom)&&Xr(le.numGlyphs,Et)}else Xr(le.numGlyphs,Et)}}K?F.text.dynamicLayoutVertexBuffer.updateData(Et):F.icon.dynamicLayoutVertexBuffer.updateData(Et)}function fr(F,H,$,K,ft,At,N,Q,it,dt,wt){var Et=Q.glyphStartIndex+Q.numGlyphs,Bt=Q.lineStartIndex,Ut=Q.lineStartIndex+Q.lineLength,Ht=H.getoffsetX(Q.glyphStartIndex),qt=H.getoffsetX(Et-1),Jt=_r(F*Ht,$,K,ft,At,N,Q.segment,Bt,Ut,it,dt,wt);if(!Jt)return null;var le=_r(F*qt,$,K,ft,At,N,Q.segment,Bt,Ut,it,dt,wt);return le?{first:Jt,last:le}:null}function mr(F,H,$,K){return F===r.WritingMode.horizontal&&Math.abs($.y-H.y)>Math.abs($.x-H.x)*K?{useVertical:!0}:(F===r.WritingMode.vertical?H.y<$.y:H.x>$.x)?{needsFlipping:!0}:null}function Cr(F,H,$,K,ft,At,N,Q,it,dt,wt,Et,Bt,Ut){var Ht,qt=H/24,Jt=F.lineOffsetX*qt,le=F.lineOffsetY*qt;if(F.numGlyphs>1){var fe=F.glyphStartIndex+F.numGlyphs,Le=F.lineStartIndex,Se=F.lineStartIndex+F.lineLength,Ce=fr(qt,Q,Jt,le,$,wt,Et,F,it,At,Bt);if(!Ce)return{notEnoughRoom:!0};var Ne=$e(Ce.first.point,N).point,Ee=$e(Ce.last.point,N).point;if(K&&!$){var rr=mr(F.writingMode,Ne,Ee,Ut);if(rr)return rr}Ht=[Ce.first];for(var Ye=F.glyphStartIndex+1;Ye<fe-1;Ye++)Ht.push(_r(qt*Q.getoffsetX(Ye),Jt,le,$,wt,Et,F.segment,Le,Se,it,At,Bt));Ht.push(Ce.last)}else{if(K&&!$){var Ve=$e(Et,ft).point,dr=F.lineStartIndex+F.segment+1,vr=new r.Point(it.getx(dr),it.gety(dr)),Fr=$e(vr,ft),zr=Fr.signedDistanceFromCamera>0?Fr.point:Er(Et,vr,Ve,1,ft),$r=mr(F.writingMode,Ve,zr,Ut);if($r)return $r}var Zr=_r(qt*Q.getoffsetX(F.glyphStartIndex),Jt,le,$,wt,Et,F.segment,F.lineStartIndex,F.lineStartIndex+F.lineLength,it,At,Bt);if(!Zr)return{notEnoughRoom:!0};Ht=[Zr]}for(var cn=0,ln=Ht;cn<ln.length;cn+=1){var pn=ln[cn];r.addDynamicAttributes(dt,pn.point,pn.angle)}return{}}function Er(F,H,$,K,ft){var At=$e(F.add(F.sub(H)._unit()),ft).point,N=$.sub(At);return $.add(N._mult(K/N.mag()))}function _r(F,H,$,K,ft,At,N,Q,it,dt,wt,Et){var Bt=K?F-H:F+H,Ut=Bt>0?1:-1,Ht=0;K&&(Ut*=-1,Ht=Math.PI),Ut<0&&(Ht+=Math.PI);for(var qt=Ut>0?Q+N:Q+N+1,Jt=ft,le=ft,fe=0,Le=0,Se=Math.abs(Bt),Ce=[];fe+Le<=Se;){if((qt+=Ut)<Q||qt>=it)return null;if(le=Jt,Ce.push(Jt),(Jt=Et[qt])===void 0){var Ne=new r.Point(dt.getx(qt),dt.gety(qt)),Ee=$e(Ne,wt);if(Ee.signedDistanceFromCamera>0)Jt=Et[qt]=Ee.point;else{var rr=qt-Ut;Jt=Er(fe===0?At:new r.Point(dt.getx(rr),dt.gety(rr)),Ne,le,Se-fe+1,wt)}}fe+=Le,Le=le.dist(Jt)}var Ye=(Se-fe)/Le,Ve=Jt.sub(le),dr=Ve.mult(Ye)._add(le);dr._add(Ve._unit()._perp()._mult($*Ut));var vr=Ht+Math.atan2(Jt.y-le.y,Jt.x-le.x);return Ce.push(dr),{point:dr,angle:vr,path:Ce}}pr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},pr.prototype.insert=function(F,H,$,K,ft){this._forEachCell(H,$,K,ft,this._insertBoxCell,this.boxUid++),this.boxKeys.push(F),this.bboxes.push(H),this.bboxes.push($),this.bboxes.push(K),this.bboxes.push(ft)},pr.prototype.insertCircle=function(F,H,$,K){this._forEachCell(H-K,$-K,H+K,$+K,this._insertCircleCell,this.circleUid++),this.circleKeys.push(F),this.circles.push(H),this.circles.push($),this.circles.push(K)},pr.prototype._insertBoxCell=function(F,H,$,K,ft,At){this.boxCells[ft].push(At)},pr.prototype._insertCircleCell=function(F,H,$,K,ft,At){this.circleCells[ft].push(At)},pr.prototype._query=function(F,H,$,K,ft,At){if($<0||F>this.width||K<0||H>this.height)return!ft&&[];var N=[];if(F<=0&&H<=0&&this.width<=$&&this.height<=K){if(ft)return!0;for(var Q=0;Q<this.boxKeys.length;Q++)N.push({key:this.boxKeys[Q],x1:this.bboxes[4*Q],y1:this.bboxes[4*Q+1],x2:this.bboxes[4*Q+2],y2:this.bboxes[4*Q+3]});for(var it=0;it<this.circleKeys.length;it++){var dt=this.circles[3*it],wt=this.circles[3*it+1],Et=this.circles[3*it+2];N.push({key:this.circleKeys[it],x1:dt-Et,y1:wt-Et,x2:dt+Et,y2:wt+Et})}return At?N.filter(At):N}var Bt={hitTest:ft,seenUids:{box:{},circle:{}}};return this._forEachCell(F,H,$,K,this._queryCell,N,Bt,At),ft?N.length>0:N},pr.prototype._queryCircle=function(F,H,$,K,ft){var At=F-$,N=F+$,Q=H-$,it=H+$;if(N<0||At>this.width||it<0||Q>this.height)return!K&&[];var dt=[],wt={hitTest:K,circle:{x:F,y:H,radius:$},seenUids:{box:{},circle:{}}};return this._forEachCell(At,Q,N,it,this._queryCellCircle,dt,wt,ft),K?dt.length>0:dt},pr.prototype.query=function(F,H,$,K,ft){return this._query(F,H,$,K,!1,ft)},pr.prototype.hitTest=function(F,H,$,K,ft){return this._query(F,H,$,K,!0,ft)},pr.prototype.hitTestCircle=function(F,H,$,K){return this._queryCircle(F,H,$,!0,K)},pr.prototype._queryCell=function(F,H,$,K,ft,At,N,Q){var it=N.seenUids,dt=this.boxCells[ft];if(dt!==null)for(var wt=this.bboxes,Et=0,Bt=dt;Et<Bt.length;Et+=1){var Ut=Bt[Et];if(!it.box[Ut]){it.box[Ut]=!0;var Ht=4*Ut;if(F<=wt[Ht+2]&&H<=wt[Ht+3]&&$>=wt[Ht+0]&&K>=wt[Ht+1]&&(!Q||Q(this.boxKeys[Ut]))){if(N.hitTest)return At.push(!0),!0;At.push({key:this.boxKeys[Ut],x1:wt[Ht],y1:wt[Ht+1],x2:wt[Ht+2],y2:wt[Ht+3]})}}}var qt=this.circleCells[ft];if(qt!==null)for(var Jt=this.circles,le=0,fe=qt;le<fe.length;le+=1){var Le=fe[le];if(!it.circle[Le]){it.circle[Le]=!0;var Se=3*Le;if(this._circleAndRectCollide(Jt[Se],Jt[Se+1],Jt[Se+2],F,H,$,K)&&(!Q||Q(this.circleKeys[Le]))){if(N.hitTest)return At.push(!0),!0;var Ce=Jt[Se],Ne=Jt[Se+1],Ee=Jt[Se+2];At.push({key:this.circleKeys[Le],x1:Ce-Ee,y1:Ne-Ee,x2:Ce+Ee,y2:Ne+Ee})}}}},pr.prototype._queryCellCircle=function(F,H,$,K,ft,At,N,Q){var it=N.circle,dt=N.seenUids,wt=this.boxCells[ft];if(wt!==null)for(var Et=this.bboxes,Bt=0,Ut=wt;Bt<Ut.length;Bt+=1){var Ht=Ut[Bt];if(!dt.box[Ht]){dt.box[Ht]=!0;var qt=4*Ht;if(this._circleAndRectCollide(it.x,it.y,it.radius,Et[qt+0],Et[qt+1],Et[qt+2],Et[qt+3])&&(!Q||Q(this.boxKeys[Ht])))return At.push(!0),!0}}var Jt=this.circleCells[ft];if(Jt!==null)for(var le=this.circles,fe=0,Le=Jt;fe<Le.length;fe+=1){var Se=Le[fe];if(!dt.circle[Se]){dt.circle[Se]=!0;var Ce=3*Se;if(this._circlesCollide(le[Ce],le[Ce+1],le[Ce+2],it.x,it.y,it.radius)&&(!Q||Q(this.circleKeys[Se])))return At.push(!0),!0}}},pr.prototype._forEachCell=function(F,H,$,K,ft,At,N,Q){for(var it=this._convertToXCellCoord(F),dt=this._convertToYCellCoord(H),wt=this._convertToXCellCoord($),Et=this._convertToYCellCoord(K),Bt=it;Bt<=wt;Bt++)for(var Ut=dt;Ut<=Et;Ut++){var Ht=this.xCellCount*Ut+Bt;if(ft.call(this,F,H,$,K,Ht,At,N,Q))return}},pr.prototype._convertToXCellCoord=function(F){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(F*this.xScale)))},pr.prototype._convertToYCellCoord=function(F){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(F*this.yScale)))},pr.prototype._circlesCollide=function(F,H,$,K,ft,At){var N=K-F,Q=ft-H,it=$+At;return it*it>N*N+Q*Q},pr.prototype._circleAndRectCollide=function(F,H,$,K,ft,At,N){var Q=(At-K)/2,it=Math.abs(F-(K+Q));if(it>Q+$)return!1;var dt=(N-ft)/2,wt=Math.abs(H-(ft+dt));if(wt>dt+$)return!1;if(it<=Q||wt<=dt)return!0;var Et=it-Q,Bt=wt-dt;return Et*Et+Bt*Bt<=$*$};var Sr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xr(F,H){for(var $=0;$<F;$++){var K=H.length;H.resize(K+4),H.float32.set(Sr,3*K)}}function en(F,H,$){var K=H[0],ft=H[1];return F[0]=$[0]*K+$[4]*ft+$[12],F[1]=$[1]*K+$[5]*ft+$[13],F[3]=$[3]*K+$[7]*ft+$[15],F}var sn=100,tn=function(F,H,$){H===void 0&&(H=new pr(F.width+200,F.height+200,25)),$===void 0&&($=new pr(F.width+200,F.height+200,25)),this.transform=F,this.grid=H,this.ignoredGrid=$,this.pitchfactor=Math.cos(F._pitch)*F.cameraToCenterDistance,this.screenRightBoundary=F.width+sn,this.screenBottomBoundary=F.height+sn,this.gridRightBoundary=F.width+200,this.gridBottomBoundary=F.height+200};function qr(F,H,$){return H*(r.EXTENT/(F.tileSize*Math.pow(2,$-F.tileID.overscaledZ)))}tn.prototype.placeCollisionBox=function(F,H,$,K,ft){var At=this.projectAndGetPerspectiveRatio(K,F.anchorPointX,F.anchorPointY),N=$*At.perspectiveRatio,Q=F.x1*N+At.point.x,it=F.y1*N+At.point.y,dt=F.x2*N+At.point.x,wt=F.y2*N+At.point.y;return!this.isInsideGrid(Q,it,dt,wt)||!H&&this.grid.hitTest(Q,it,dt,wt,ft)?{box:[],offscreen:!1}:{box:[Q,it,dt,wt],offscreen:this.isOffscreen(Q,it,dt,wt)}},tn.prototype.placeCollisionCircles=function(F,H,$,K,ft,At,N,Q,it,dt,wt,Et,Bt){var Ut=[],Ht=new r.Point(H.anchorX,H.anchorY),qt=$e(Ht,At),Jt=ir(this.transform.cameraToCenterDistance,qt.signedDistanceFromCamera),le=(dt?ft/Jt:ft*Jt)/r.ONE_EM,fe=$e(Ht,N).point,Le=fr(le,K,H.lineOffsetX*le,H.lineOffsetY*le,!1,fe,Ht,H,$,N,{}),Se=!1,Ce=!1,Ne=!0;if(Le){for(var Ee=.5*Et*Jt+Bt,rr=new r.Point(-100,-100),Ye=new r.Point(this.screenRightBoundary,this.screenBottomBoundary),Ve=new We,dr=Le.first,vr=Le.last,Fr=[],zr=dr.path.length-1;zr>=1;zr--)Fr.push(dr.path[zr]);for(var $r=1;$r<vr.path.length;$r++)Fr.push(vr.path[$r]);var Zr=2.5*Ee;if(Q){var cn=Fr.map(function(Pi){return $e(Pi,Q)});Fr=cn.some(function(Pi){return Pi.signedDistanceFromCamera<=0})?[]:cn.map(function(Pi){return Pi.point})}var ln=[];if(Fr.length>0){for(var pn=Fr[0].clone(),bn=Fr[0].clone(),On=1;On<Fr.length;On++)pn.x=Math.min(pn.x,Fr[On].x),pn.y=Math.min(pn.y,Fr[On].y),bn.x=Math.max(bn.x,Fr[On].x),bn.y=Math.max(bn.y,Fr[On].y);ln=pn.x>=rr.x&&bn.x<=Ye.x&&pn.y>=rr.y&&bn.y<=Ye.y?[Fr]:bn.x<rr.x||pn.x>Ye.x||bn.y<rr.y||pn.y>Ye.y?[]:r.clipLine([Fr],rr.x,rr.y,Ye.x,Ye.y)}for(var Br=0,on=ln;Br<on.length;Br+=1){var dn=on[Br];Ve.reset(dn,.25*Ee);var _n;_n=Ve.length<=.5*Ee?1:Math.ceil(Ve.paddedLength/Zr)+1;for(var En=0;En<_n;En++){var Nn=En/Math.max(_n-1,1),$n=Ve.lerp(Nn),Kn=$n.x+sn,hi=$n.y+sn;Ut.push(Kn,hi,Ee,0);var fi=Kn-Ee,Jn=hi-Ee,Ci=Kn+Ee,Zi=hi+Ee;if(Ne=Ne&&this.isOffscreen(fi,Jn,Ci,Zi),Ce=Ce||this.isInsideGrid(fi,Jn,Ci,Zi),!F&&this.grid.hitTestCircle(Kn,hi,Ee,wt)&&(Se=!0,!it))return{circles:[],offscreen:!1,collisionDetected:Se}}}}return{circles:!it&&Se||!Ce?[]:Ut,offscreen:Ne,collisionDetected:Se}},tn.prototype.queryRenderedSymbols=function(F){if(F.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var H=[],$=1/0,K=1/0,ft=-1/0,At=-1/0,N=0,Q=F;N<Q.length;N+=1){var it=Q[N],dt=new r.Point(it.x+sn,it.y+sn);$=Math.min($,dt.x),K=Math.min(K,dt.y),ft=Math.max(ft,dt.x),At=Math.max(At,dt.y),H.push(dt)}for(var wt={},Et={},Bt=0,Ut=this.grid.query($,K,ft,At).concat(this.ignoredGrid.query($,K,ft,At));Bt<Ut.length;Bt+=1){var Ht=Ut[Bt],qt=Ht.key;if(wt[qt.bucketInstanceId]===void 0&&(wt[qt.bucketInstanceId]={}),!wt[qt.bucketInstanceId][qt.featureIndex]){var Jt=[new r.Point(Ht.x1,Ht.y1),new r.Point(Ht.x2,Ht.y1),new r.Point(Ht.x2,Ht.y2),new r.Point(Ht.x1,Ht.y2)];r.polygonIntersectsPolygon(H,Jt)&&(wt[qt.bucketInstanceId][qt.featureIndex]=!0,Et[qt.bucketInstanceId]===void 0&&(Et[qt.bucketInstanceId]=[]),Et[qt.bucketInstanceId].push(qt.featureIndex))}}return Et},tn.prototype.insertCollisionBox=function(F,H,$,K,ft){var At={bucketInstanceId:$,featureIndex:K,collisionGroupID:ft};(H?this.ignoredGrid:this.grid).insert(At,F[0],F[1],F[2],F[3])},tn.prototype.insertCollisionCircles=function(F,H,$,K,ft){for(var At=H?this.ignoredGrid:this.grid,N={bucketInstanceId:$,featureIndex:K,collisionGroupID:ft},Q=0;Q<F.length;Q+=4)At.insertCircle(N,F[Q],F[Q+1],F[Q+2])},tn.prototype.projectAndGetPerspectiveRatio=function(F,H,$){var K=[H,$,0,1];return en(K,K,F),{point:new r.Point((K[0]/K[3]+1)/2*this.transform.width+sn,(-K[1]/K[3]+1)/2*this.transform.height+sn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/K[3]*.5}},tn.prototype.isOffscreen=function(F,H,$,K){return $<sn||F>=this.screenRightBoundary||K<sn||H>this.screenBottomBoundary},tn.prototype.isInsideGrid=function(F,H,$,K){return $>=0&&F<this.gridRightBoundary&&K>=0&&H<this.gridBottomBoundary},tn.prototype.getViewportMatrix=function(){var F=r.identity([]);return r.translate(F,F,[-100,-100,0]),F};var vn=function(F,H,$,K){this.opacity=F?Math.max(0,Math.min(1,F.opacity+(F.placed?H:-H))):K&&$?1:0,this.placed=$};vn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var je=function(F,H,$,K,ft){this.text=new vn(F?F.text:null,H,$,ft),this.icon=new vn(F?F.icon:null,H,K,ft)};je.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var nr=function(F,H,$){this.text=F,this.icon=H,this.skipFade=$},hr=function(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]},gr=function(F,H,$,K,ft){this.bucketInstanceId=F,this.featureIndex=H,this.sourceLayerIndex=$,this.bucketIndex=K,this.tileID=ft},Mr=function(F){this.crossSourceCollisions=F,this.maxGroupID=0,this.collisionGroups={}};function Hr(F,H,$,K,ft){var At=r.getAnchorAlignment(F),N=-(At.horizontalAlign-.5)*H,Q=-(At.verticalAlign-.5)*$,it=r.evaluateVariableOffset(F,K);return new r.Point(N+it[0]*ft,Q+it[1]*ft)}function Pr(F,H,$,K,ft,At){var N=F.x1,Q=F.x2,it=F.y1,dt=F.y2,wt=F.anchorPointX,Et=F.anchorPointY,Bt=new r.Point(H,$);return K&&Bt._rotate(ft?At:-At),{x1:N+Bt.x,y1:it+Bt.y,x2:Q+Bt.x,y2:dt+Bt.y,anchorPointX:wt,anchorPointY:Et}}Mr.prototype.get=function(F){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[F]){var H=++this.maxGroupID;this.collisionGroups[F]={ID:H,predicate:function($){return $.collisionGroupID===H}}}return this.collisionGroups[F]};var Dr=function(F,H,$,K){this.transform=F.clone(),this.collisionIndex=new tn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=H,this.retainedQueryData={},this.collisionGroups=new Mr($),this.collisionCircleArrays={},this.prevPlacement=K,K&&(K.prevPlacement=void 0),this.placedOrientations={}};function Qr(F,H,$,K,ft){F.emplaceBack(H?1:0,$?1:0,K||0,ft||0),F.emplaceBack(H?1:0,$?1:0,K||0,ft||0),F.emplaceBack(H?1:0,$?1:0,K||0,ft||0),F.emplaceBack(H?1:0,$?1:0,K||0,ft||0)}Dr.prototype.getBucketParts=function(F,H,$,K){var ft=$.getBucket(H),At=$.latestFeatureIndex;if(ft&&At&&H.id===ft.layerIds[0]){var N=$.collisionBoxArray,Q=ft.layers[0].layout,it=Math.pow(2,this.transform.zoom-$.tileID.overscaledZ),dt=$.tileSize/r.EXTENT,wt=this.transform.calculatePosMatrix($.tileID.toUnwrapped()),Et=Q.get("text-pitch-alignment")==="map",Bt=Q.get("text-rotation-alignment")==="map",Ut=qr($,1,this.transform.zoom),Ht=xr(wt,Et,Bt,this.transform,Ut),qt=null;if(Et){var Jt=sr(wt,Et,Bt,this.transform,Ut);qt=r.multiply([],this.transform.labelPlaneMatrix,Jt)}this.retainedQueryData[ft.bucketInstanceId]=new gr(ft.bucketInstanceId,At,ft.sourceLayerIndex,ft.index,$.tileID);var le={bucket:ft,layout:Q,posMatrix:wt,textLabelPlaneMatrix:Ht,labelToScreenMatrix:qt,scale:it,textPixelRatio:dt,holdingForFade:$.holdingForFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(ft.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ft.sourceID)};if(K)for(var fe=0,Le=ft.sortKeyRanges;fe<Le.length;fe+=1){var Se=Le[fe],Ce=Se.sortKey,Ne=Se.symbolInstanceStart,Ee=Se.symbolInstanceEnd;F.push({sortKey:Ce,symbolInstanceStart:Ne,symbolInstanceEnd:Ee,parameters:le})}else F.push({symbolInstanceStart:0,symbolInstanceEnd:ft.symbolInstances.length,parameters:le})}},Dr.prototype.attemptAnchorPlacement=function(F,H,$,K,ft,At,N,Q,it,dt,wt,Et,Bt,Ut,Ht){var qt,Jt=[Et.textOffset0,Et.textOffset1],le=Hr(F,$,K,Jt,ft),fe=this.collisionIndex.placeCollisionBox(Pr(H,le.x,le.y,At,N,this.transform.angle),wt,Q,it,dt.predicate);if(!Ht||this.collisionIndex.placeCollisionBox(Pr(Ht,le.x,le.y,At,N,this.transform.angle),wt,Q,it,dt.predicate).box.length!==0)return fe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Et.crossTileID]&&this.prevPlacement.placements[Et.crossTileID]&&this.prevPlacement.placements[Et.crossTileID].text&&(qt=this.prevPlacement.variableOffsets[Et.crossTileID].anchor),this.variableOffsets[Et.crossTileID]={textOffset:Jt,width:$,height:K,anchor:F,textBoxScale:ft,prevAnchor:qt},this.markUsedJustification(Bt,F,Et,Ut),Bt.allowVerticalPlacement&&(this.markUsedOrientation(Bt,Ut,Et),this.placedOrientations[Et.crossTileID]=Ut),{shift:le,placedGlyphBoxes:fe}):void 0},Dr.prototype.placeLayerBucketPart=function(F,H,$){var K=this,ft=F.parameters,At=ft.bucket,N=ft.layout,Q=ft.posMatrix,it=ft.textLabelPlaneMatrix,dt=ft.labelToScreenMatrix,wt=ft.textPixelRatio,Et=ft.holdingForFade,Bt=ft.collisionBoxArray,Ut=ft.partiallyEvaluatedTextSize,Ht=ft.collisionGroup,qt=N.get("text-optional"),Jt=N.get("icon-optional"),le=N.get("text-allow-overlap"),fe=N.get("icon-allow-overlap"),Le=N.get("text-rotation-alignment")==="map",Se=N.get("text-pitch-alignment")==="map",Ce=N.get("icon-text-fit")!=="none",Ne=N.get("symbol-z-order")==="viewport-y",Ee=le&&(fe||!At.hasIconData()||Jt),rr=fe&&(le||!At.hasTextData()||qt);!At.collisionArrays&&Bt&&At.deserializeCollisionBoxes(Bt);var Ye=function($r,Zr){if(!H[$r.crossTileID])if(Et)K.placements[$r.crossTileID]=new nr(!1,!1,!1);else{var cn,ln=!1,pn=!1,bn=!0,On=null,Br={box:null,offscreen:null},on={box:null,offscreen:null},dn=null,_n=null,En=0,Nn=0,$n=0;Zr.textFeatureIndex?En=Zr.textFeatureIndex:$r.useRuntimeCollisionCircles&&(En=$r.featureIndex),Zr.verticalTextFeatureIndex&&(Nn=Zr.verticalTextFeatureIndex);var Kn=Zr.textBox;if(Kn){var hi=function(Si){var Xi=r.WritingMode.horizontal;if(At.allowVerticalPlacement&&!Si&&K.prevPlacement){var qa=K.prevPlacement.placedOrientations[$r.crossTileID];qa&&(K.placedOrientations[$r.crossTileID]=qa,Xi=qa,K.markUsedOrientation(At,Xi,$r))}return Xi},fi=function(Si,Xi){if(At.allowVerticalPlacement&&$r.numVerticalGlyphVertices>0&&Zr.verticalTextBox)for(var qa=0,Bl=At.writingModes;qa<Bl.length&&(Bl[qa]===r.WritingMode.vertical?(Br=Xi(),on=Br):Br=Si(),!(Br&&Br.box&&Br.box.length));qa+=1);else Br=Si()};if(N.get("text-variable-anchor")){var Jn=N.get("text-variable-anchor");if(K.prevPlacement&&K.prevPlacement.variableOffsets[$r.crossTileID]){var Ci=K.prevPlacement.variableOffsets[$r.crossTileID];Jn.indexOf(Ci.anchor)>0&&(Jn=Jn.filter(function(Si){return Si!==Ci.anchor})).unshift(Ci.anchor)}var Zi=function(Si,Xi,qa){for(var Bl=Si.x2-Si.x1,Gc=Si.y2-Si.y1,Pu=$r.textBoxScale,lc=Ce&&!fe?Xi:null,jl={box:[],offscreen:!1},cc=le?2*Jn.length:Jn.length,Cl=0;Cl<cc;++Cl){var $c=Jn[Cl%Jn.length],_l=Cl>=Jn.length,uc=K.attemptAnchorPlacement($c,Si,Bl,Gc,Pu,Le,Se,wt,Q,Ht,_l,$r,At,qa,lc);if(uc&&(jl=uc.placedGlyphBoxes)&&jl.box&&jl.box.length){ln=!0,On=uc.shift;break}}return jl};fi(function(){return Zi(Kn,Zr.iconBox,r.WritingMode.horizontal)},function(){var Si=Zr.verticalTextBox,Xi=Br&&Br.box&&Br.box.length;return At.allowVerticalPlacement&&!Xi&&$r.numVerticalGlyphVertices>0&&Si?Zi(Si,Zr.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),Br&&(ln=Br.box,bn=Br.offscreen);var Pi=hi(Br&&Br.box);if(!ln&&K.prevPlacement){var Ui=K.prevPlacement.variableOffsets[$r.crossTileID];Ui&&(K.variableOffsets[$r.crossTileID]=Ui,K.markUsedJustification(At,Ui.anchor,$r,Pi))}}else{var Wn=function(Si,Xi){var qa=K.collisionIndex.placeCollisionBox(Si,le,wt,Q,Ht.predicate);return qa&&qa.box&&qa.box.length&&(K.markUsedOrientation(At,Xi,$r),K.placedOrientations[$r.crossTileID]=Xi),qa};fi(function(){return Wn(Kn,r.WritingMode.horizontal)},function(){var Si=Zr.verticalTextBox;return At.allowVerticalPlacement&&$r.numVerticalGlyphVertices>0&&Si?Wn(Si,r.WritingMode.vertical):{box:null,offscreen:null}}),hi(Br&&Br.box&&Br.box.length)}}if(ln=(cn=Br)&&cn.box&&cn.box.length>0,bn=cn&&cn.offscreen,$r.useRuntimeCollisionCircles){var Gn=At.text.placedSymbolArray.get($r.centerJustifiedTextSymbolIndex),pi=r.evaluateSizeForFeature(At.textSizeData,Ut,Gn),oi=N.get("text-padding"),mi=$r.collisionCircleDiameter;dn=K.collisionIndex.placeCollisionCircles(le,Gn,At.lineVertexArray,At.glyphOffsetArray,pi,Q,it,dt,$,Se,Ht.predicate,mi,oi),ln=le||dn.circles.length>0&&!dn.collisionDetected,bn=bn&&dn.offscreen}if(Zr.iconFeatureIndex&&($n=Zr.iconFeatureIndex),Zr.iconBox){var pa=function(Si){var Xi=Ce&&On?Pr(Si,On.x,On.y,Le,Se,K.transform.angle):Si;return K.collisionIndex.placeCollisionBox(Xi,fe,wt,Q,Ht.predicate)};pn=on&&on.box&&on.box.length&&Zr.verticalIconBox?(_n=pa(Zr.verticalIconBox)).box.length>0:(_n=pa(Zr.iconBox)).box.length>0,bn=bn&&_n.offscreen}var wi=qt||$r.numHorizontalGlyphVertices===0&&$r.numVerticalGlyphVertices===0,Qn=Jt||$r.numIconVertices===0;if(wi||Qn?Qn?wi||(pn=pn&&ln):ln=pn&&ln:pn=ln=pn&&ln,ln&&cn&&cn.box&&(on&&on.box&&Nn?K.collisionIndex.insertCollisionBox(cn.box,N.get("text-ignore-placement"),At.bucketInstanceId,Nn,Ht.ID):K.collisionIndex.insertCollisionBox(cn.box,N.get("text-ignore-placement"),At.bucketInstanceId,En,Ht.ID)),pn&&_n&&K.collisionIndex.insertCollisionBox(_n.box,N.get("icon-ignore-placement"),At.bucketInstanceId,$n,Ht.ID),dn&&(ln&&K.collisionIndex.insertCollisionCircles(dn.circles,N.get("text-ignore-placement"),At.bucketInstanceId,En,Ht.ID),$)){var os=At.bucketInstanceId,_a=K.collisionCircleArrays[os];_a===void 0&&(_a=K.collisionCircleArrays[os]=new hr);for(var Fa=0;Fa<dn.circles.length;Fa+=4)_a.circles.push(dn.circles[Fa+0]),_a.circles.push(dn.circles[Fa+1]),_a.circles.push(dn.circles[Fa+2]),_a.circles.push(dn.collisionDetected?1:0)}K.placements[$r.crossTileID]=new nr(ln||Ee,pn||rr,bn||At.justReloaded),H[$r.crossTileID]=!0}};if(Ne)for(var Ve=At.getSortedSymbolIndexes(this.transform.angle),dr=Ve.length-1;dr>=0;--dr){var vr=Ve[dr];Ye(At.symbolInstances.get(vr),At.collisionArrays[vr])}else for(var Fr=F.symbolInstanceStart;Fr<F.symbolInstanceEnd;Fr++)Ye(At.symbolInstances.get(Fr),At.collisionArrays[Fr]);if($&&At.bucketInstanceId in this.collisionCircleArrays){var zr=this.collisionCircleArrays[At.bucketInstanceId];r.invert(zr.invProjMatrix,Q),zr.viewportMatrix=this.collisionIndex.getViewportMatrix()}At.justReloaded=!1},Dr.prototype.markUsedJustification=function(F,H,$,K){var ft,At={left:$.leftJustifiedTextSymbolIndex,center:$.centerJustifiedTextSymbolIndex,right:$.rightJustifiedTextSymbolIndex};ft=K===r.WritingMode.vertical?$.verticalPlacedTextSymbolIndex:At[r.getAnchorJustification(H)];for(var N=0,Q=[$.leftJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.rightJustifiedTextSymbolIndex,$.verticalPlacedTextSymbolIndex];N<Q.length;N+=1){var it=Q[N];it>=0&&(F.text.placedSymbolArray.get(it).crossTileID=ft>=0&&it!==ft?0:$.crossTileID)}},Dr.prototype.markUsedOrientation=function(F,H,$){for(var K=H===r.WritingMode.horizontal||H===r.WritingMode.horizontalOnly?H:0,ft=H===r.WritingMode.vertical?H:0,At=0,N=[$.leftJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.rightJustifiedTextSymbolIndex];At<N.length;At+=1){var Q=N[At];F.text.placedSymbolArray.get(Q).placedOrientation=K}$.verticalPlacedTextSymbolIndex&&(F.text.placedSymbolArray.get($.verticalPlacedTextSymbolIndex).placedOrientation=ft)},Dr.prototype.commit=function(F){this.commitTime=F,this.zoomAtLastRecencyCheck=this.transform.zoom;var H=this.prevPlacement,$=!1;this.prevZoomAdjustment=H?H.zoomAdjustment(this.transform.zoom):0;var K=H?H.symbolFadeChange(F):1,ft=H?H.opacities:{},At=H?H.variableOffsets:{},N=H?H.placedOrientations:{};for(var Q in this.placements){var it=this.placements[Q],dt=ft[Q];dt?(this.opacities[Q]=new je(dt,K,it.text,it.icon),$=$||it.text!==dt.text.placed||it.icon!==dt.icon.placed):(this.opacities[Q]=new je(null,K,it.text,it.icon,it.skipFade),$=$||it.text||it.icon)}for(var wt in ft){var Et=ft[wt];if(!this.opacities[wt]){var Bt=new je(Et,K,!1,!1);Bt.isHidden()||(this.opacities[wt]=Bt,$=$||Et.text.placed||Et.icon.placed)}}for(var Ut in At)this.variableOffsets[Ut]||!this.opacities[Ut]||this.opacities[Ut].isHidden()||(this.variableOffsets[Ut]=At[Ut]);for(var Ht in N)this.placedOrientations[Ht]||!this.opacities[Ht]||this.opacities[Ht].isHidden()||(this.placedOrientations[Ht]=N[Ht]);$?this.lastPlacementChangeTime=F:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=H?H.lastPlacementChangeTime:F)},Dr.prototype.updateLayerOpacities=function(F,H){for(var $={},K=0,ft=H;K<ft.length;K+=1){var At=ft[K],N=At.getBucket(F);N&&At.latestFeatureIndex&&F.id===N.layerIds[0]&&this.updateBucketOpacities(N,$,At.collisionBoxArray)}},Dr.prototype.updateBucketOpacities=function(F,H,$){var K=this;F.hasTextData()&&F.text.opacityVertexArray.clear(),F.hasIconData()&&F.icon.opacityVertexArray.clear(),F.hasIconCollisionBoxData()&&F.iconCollisionBox.collisionVertexArray.clear(),F.hasTextCollisionBoxData()&&F.textCollisionBox.collisionVertexArray.clear();var ft=F.layers[0].layout,At=new je(null,0,!1,!1,!0),N=ft.get("text-allow-overlap"),Q=ft.get("icon-allow-overlap"),it=ft.get("text-variable-anchor"),dt=ft.get("text-rotation-alignment")==="map",wt=ft.get("text-pitch-alignment")==="map",Et=ft.get("icon-text-fit")!=="none",Bt=new je(null,0,N&&(Q||!F.hasIconData()||ft.get("icon-optional")),Q&&(N||!F.hasTextData()||ft.get("text-optional")),!0);!F.collisionArrays&&$&&(F.hasIconCollisionBoxData()||F.hasTextCollisionBoxData())&&F.deserializeCollisionBoxes($);for(var Ut=function(le,fe,Le){for(var Se=0;Se<fe/4;Se++)le.opacityVertexArray.emplaceBack(Le)},Ht=function(le){var fe=F.symbolInstances.get(le),Le=fe.numHorizontalGlyphVertices,Se=fe.numVerticalGlyphVertices,Ce=fe.crossTileID,Ne=H[Ce],Ee=K.opacities[Ce];Ne?Ee=At:Ee||(Ee=Bt,K.opacities[Ce]=Ee),H[Ce]=!0;var rr=Le>0||Se>0,Ye=fe.numIconVertices>0,Ve=K.placedOrientations[fe.crossTileID],dr=Ve===r.WritingMode.vertical,vr=Ve===r.WritingMode.horizontal||Ve===r.WritingMode.horizontalOnly;if(rr){var Fr=Ar(Ee.text),zr=dr?cr:Fr;Ut(F.text,Le,zr);var $r=vr?cr:Fr;Ut(F.text,Se,$r);var Zr=Ee.text.isHidden();[fe.rightJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.leftJustifiedTextSymbolIndex].forEach(function($n){$n>=0&&(F.text.placedSymbolArray.get($n).hidden=Zr||dr?1:0)}),fe.verticalPlacedTextSymbolIndex>=0&&(F.text.placedSymbolArray.get(fe.verticalPlacedTextSymbolIndex).hidden=Zr||vr?1:0);var cn=K.variableOffsets[fe.crossTileID];cn&&K.markUsedJustification(F,cn.anchor,fe,Ve);var ln=K.placedOrientations[fe.crossTileID];ln&&(K.markUsedJustification(F,"left",fe,ln),K.markUsedOrientation(F,ln,fe))}if(Ye){var pn=Ar(Ee.icon),bn=!(Et&&fe.verticalPlacedIconSymbolIndex&&dr);if(fe.placedIconSymbolIndex>=0){var On=bn?pn:cr;Ut(F.icon,fe.numIconVertices,On),F.icon.placedSymbolArray.get(fe.placedIconSymbolIndex).hidden=Ee.icon.isHidden()}if(fe.verticalPlacedIconSymbolIndex>=0){var Br=bn?cr:pn;Ut(F.icon,fe.numVerticalIconVertices,Br),F.icon.placedSymbolArray.get(fe.verticalPlacedIconSymbolIndex).hidden=Ee.icon.isHidden()}}if(F.hasIconCollisionBoxData()||F.hasTextCollisionBoxData()){var on=F.collisionArrays[le];if(on){var dn=new r.Point(0,0);if(on.textBox||on.verticalTextBox){var _n=!0;if(it){var En=K.variableOffsets[Ce];En?(dn=Hr(En.anchor,En.width,En.height,En.textOffset,En.textBoxScale),dt&&dn._rotate(wt?K.transform.angle:-K.transform.angle)):_n=!1}on.textBox&&Qr(F.textCollisionBox.collisionVertexArray,Ee.text.placed,!_n||dr,dn.x,dn.y),on.verticalTextBox&&Qr(F.textCollisionBox.collisionVertexArray,Ee.text.placed,!_n||vr,dn.x,dn.y)}var Nn=Boolean(!vr&&on.verticalIconBox);on.iconBox&&Qr(F.iconCollisionBox.collisionVertexArray,Ee.icon.placed,Nn,Et?dn.x:0,Et?dn.y:0),on.verticalIconBox&&Qr(F.iconCollisionBox.collisionVertexArray,Ee.icon.placed,!Nn,Et?dn.x:0,Et?dn.y:0)}}},qt=0;qt<F.symbolInstances.length;qt++)Ht(qt);if(F.sortFeatures(this.transform.angle),this.retainedQueryData[F.bucketInstanceId]&&(this.retainedQueryData[F.bucketInstanceId].featureSortOrder=F.featureSortOrder),F.hasTextData()&&F.text.opacityVertexBuffer&&F.text.opacityVertexBuffer.updateData(F.text.opacityVertexArray),F.hasIconData()&&F.icon.opacityVertexBuffer&&F.icon.opacityVertexBuffer.updateData(F.icon.opacityVertexArray),F.hasIconCollisionBoxData()&&F.iconCollisionBox.collisionVertexBuffer&&F.iconCollisionBox.collisionVertexBuffer.updateData(F.iconCollisionBox.collisionVertexArray),F.hasTextCollisionBoxData()&&F.textCollisionBox.collisionVertexBuffer&&F.textCollisionBox.collisionVertexBuffer.updateData(F.textCollisionBox.collisionVertexArray),F.bucketInstanceId in this.collisionCircleArrays){var Jt=this.collisionCircleArrays[F.bucketInstanceId];F.placementInvProjMatrix=Jt.invProjMatrix,F.placementViewportMatrix=Jt.viewportMatrix,F.collisionCircleArray=Jt.circles,delete this.collisionCircleArrays[F.bucketInstanceId]}},Dr.prototype.symbolFadeChange=function(F){return this.fadeDuration===0?1:(F-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Dr.prototype.zoomAdjustment=function(F){return Math.max(0,(this.transform.zoom-F)/1.5)},Dr.prototype.hasTransitions=function(F){return this.stale||F-this.lastPlacementChangeTime<this.fadeDuration},Dr.prototype.stillRecent=function(F,H){var $=this.zoomAtLastRecencyCheck===H?1-this.zoomAdjustment(H):1;return this.zoomAtLastRecencyCheck=H,this.commitTime+this.fadeDuration*$>F},Dr.prototype.setStale=function(){this.stale=!0};var He=Math.pow(2,25),wr=Math.pow(2,24),Me=Math.pow(2,17),qe=Math.pow(2,16),Qe=Math.pow(2,9),yr=Math.pow(2,8),br=Math.pow(2,1);function Ar(F){if(F.opacity===0&&!F.placed)return 0;if(F.opacity===1&&F.placed)return 4294967295;var H=F.placed?1:0,$=Math.floor(127*F.opacity);return $*He+H*wr+$*Me+H*qe+$*Qe+H*yr+$*br+H}var cr=0,Xe=function(F){this._sortAcrossTiles=F.layout.get("symbol-z-order")!=="viewport-y"&&F.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Xe.prototype.continuePlacement=function(F,H,$,K,ft){for(var At=this._bucketParts;this._currentTileIndex<F.length;){var N=F[this._currentTileIndex];if(H.getBucketParts(At,K,N,this._sortAcrossTiles),this._currentTileIndex++,ft())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,At.sort(function(it,dt){return it.sortKey-dt.sortKey}));this._currentPartIndex<At.length;){var Q=At[this._currentPartIndex];if(H.placeLayerBucketPart(Q,this._seenCrossTileIDs,$),this._currentPartIndex++,ft())return!0}return!1};var Je=function(F,H,$,K,ft,At,N){this.placement=new Dr(F,ft,At,N),this._currentPlacementIndex=H.length-1,this._forceFullPlacement=$,this._showCollisionBoxes=K,this._done=!1};Je.prototype.isDone=function(){return this._done},Je.prototype.continuePlacement=function(F,H,$){for(var K=this,ft=r.browser.now(),At=function(){var it=r.browser.now()-ft;return!K._forceFullPlacement&&it>2};this._currentPlacementIndex>=0;){var N=H[F[this._currentPlacementIndex]],Q=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=Q)&&(!N.maxzoom||N.maxzoom>Q)){if(this._inProgressLayer||(this._inProgressLayer=new Xe(N)),this._inProgressLayer.continuePlacement($[N.source],this.placement,this._showCollisionBoxes,N,At))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Je.prototype.commit=function(F){return this.placement.commit(F),this.placement};var lr=512/r.EXTENT/2,ur=function(F,H,$){this.tileID=F,this.indexedSymbolInstances={},this.bucketInstanceId=$;for(var K=0;K<H.length;K++){var ft=H.get(K),At=ft.key;this.indexedSymbolInstances[At]||(this.indexedSymbolInstances[At]=[]),this.indexedSymbolInstances[At].push({crossTileID:ft.crossTileID,coord:this.getScaledCoordinates(ft,F)})}};ur.prototype.getScaledCoordinates=function(F,H){var $=H.canonical.z-this.tileID.canonical.z,K=lr/Math.pow(2,$);return{x:Math.floor((H.canonical.x*r.EXTENT+F.anchorX)*K),y:Math.floor((H.canonical.y*r.EXTENT+F.anchorY)*K)}},ur.prototype.findMatches=function(F,H,$){for(var K=this.tileID.canonical.z<H.canonical.z?1:Math.pow(2,this.tileID.canonical.z-H.canonical.z),ft=0;ft<F.length;ft++){var At=F.get(ft);if(!At.crossTileID){var N=this.indexedSymbolInstances[At.key];if(N)for(var Q=this.getScaledCoordinates(At,H),it=0,dt=N;it<dt.length;it+=1){var wt=dt[it];if(Math.abs(wt.coord.x-Q.x)<=K&&Math.abs(wt.coord.y-Q.y)<=K&&!$[wt.crossTileID]){$[wt.crossTileID]=!0,At.crossTileID=wt.crossTileID;break}}}}};var Lr=function(){this.maxCrossTileID=0};Lr.prototype.generate=function(){return++this.maxCrossTileID};var Ir=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ir.prototype.handleWrapJump=function(F){var H=Math.round((F-this.lng)/360);if(H!==0)for(var $ in this.indexes){var K=this.indexes[$],ft={};for(var At in K){var N=K[At];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+H),ft[N.tileID.key]=N}this.indexes[$]=ft}this.lng=F},Ir.prototype.addBucket=function(F,H,$){if(this.indexes[F.overscaledZ]&&this.indexes[F.overscaledZ][F.key]){if(this.indexes[F.overscaledZ][F.key].bucketInstanceId===H.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(F.overscaledZ,this.indexes[F.overscaledZ][F.key])}for(var K=0;K<H.symbolInstances.length;K++)H.symbolInstances.get(K).crossTileID=0;this.usedCrossTileIDs[F.overscaledZ]||(this.usedCrossTileIDs[F.overscaledZ]={});var ft=this.usedCrossTileIDs[F.overscaledZ];for(var At in this.indexes){var N=this.indexes[At];if(Number(At)>F.overscaledZ)for(var Q in N){var it=N[Q];it.tileID.isChildOf(F)&&it.findMatches(H.symbolInstances,F,ft)}else{var dt=N[F.scaledTo(Number(At)).key];dt&&dt.findMatches(H.symbolInstances,F,ft)}}for(var wt=0;wt<H.symbolInstances.length;wt++){var Et=H.symbolInstances.get(wt);Et.crossTileID||(Et.crossTileID=$.generate(),ft[Et.crossTileID]=!0)}return this.indexes[F.overscaledZ]===void 0&&(this.indexes[F.overscaledZ]={}),this.indexes[F.overscaledZ][F.key]=new ur(F,H.symbolInstances,H.bucketInstanceId),!0},Ir.prototype.removeBucketCrossTileIDs=function(F,H){for(var $ in H.indexedSymbolInstances)for(var K=0,ft=H.indexedSymbolInstances[$];K<ft.length;K+=1){var At=ft[K];delete this.usedCrossTileIDs[F][At.crossTileID]}},Ir.prototype.removeStaleBuckets=function(F){var H=!1;for(var $ in this.indexes){var K=this.indexes[$];for(var ft in K)F[K[ft].bucketInstanceId]||(this.removeBucketCrossTileIDs($,K[ft]),delete K[ft],H=!0)}return H};var Gr=function(){this.layerIndexes={},this.crossTileIDs=new Lr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Gr.prototype.addLayer=function(F,H,$){var K=this.layerIndexes[F.id];K===void 0&&(K=this.layerIndexes[F.id]=new Ir);var ft=!1,At={};K.handleWrapJump($);for(var N=0,Q=H;N<Q.length;N+=1){var it=Q[N],dt=it.getBucket(F);dt&&F.id===dt.layerIds[0]&&(dt.bucketInstanceId||(dt.bucketInstanceId=++this.maxBucketInstanceId),K.addBucket(it.tileID,dt,this.crossTileIDs)&&(ft=!0),At[dt.bucketInstanceId]=!0)}return K.removeStaleBuckets(At)&&(ft=!0),ft},Gr.prototype.pruneUnusedLayers=function(F){var H={};for(var $ in F.forEach(function(K){H[K]=!0}),this.layerIndexes)H[$]||delete this.layerIndexes[$]};var Nr=function(F,H){return r.emitValidationErrors(F,H&&H.filter(function($){return $.identifier!=="source.canvas"}))},Kr=r.pick(ue,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Vr=r.pick(ue,["setCenter","setZoom","setBearing","setPitch"]),an=function(){var F={},H=r.styleSpec.$version;for(var $ in r.styleSpec.$root){var K=r.styleSpec.$root[$];if(K.required){var ft;(ft=$==="version"?H:K.type==="array"?[]:{})!=null&&(F[$]=ft)}}return F}(),rn=function(F){function H($,K){var ft=this;K===void 0&&(K={}),F.call(this),this.map=$,this.dispatcher=new E(me(),this),this.imageManager=new f,this.imageManager.setEventedParent(this),this.glyphManager=new x($._requestManager,K.localIdeographFontFamily),this.lineAtlas=new L(256,512),this.crossTileSymbolIndex=new Gr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());var At=this;this._rtlTextPluginCallback=H.registerForPluginStateChange(function(N){var Q={pluginStatus:N.pluginStatus,pluginURL:N.pluginURL};At.dispatcher.broadcast("syncRTLPluginState",Q,function(it,dt){if(r.triggerPluginCompletionEvent(it),dt&&dt.every(function(Et){return Et}))for(var wt in At.sourceCaches)At.sourceCaches[wt].reload()})}),this.on("data",function(N){if(N.dataType==="source"&&N.sourceDataType==="metadata"){var Q=ft.sourceCaches[N.sourceId];if(Q){var it=Q.getSource();if(it&&it.vectorLayerIds)for(var dt in ft._layers){var wt=ft._layers[dt];wt.source===it.id&&ft._validateLayer(wt)}}}})}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.loadURL=function($,K){var ft=this;K===void 0&&(K={}),this.fire(new r.Event("dataloading",{dataType:"style"}));var At=typeof K.validate=="boolean"?K.validate:!r.isMapboxURL($);$=this.map._requestManager.normalizeStyleURL($,K.accessToken);var N=this.map._requestManager.transformRequest($,r.ResourceType.Style);this._request=r.getJSON(N,function(Q,it){ft._request=null,Q?ft.fire(new r.ErrorEvent(Q)):it&&ft._load(it,At)})},H.prototype.loadJSON=function($,K){var ft=this;K===void 0&&(K={}),this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.browser.frame(function(){ft._request=null,ft._load($,K.validate!==!1)})},H.prototype.loadEmpty=function(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(an,!1)},H.prototype._load=function($,K){if(!K||!Nr(this,r.validateStyle($))){for(var ft in this._loaded=!0,this.stylesheet=$,$.sources)this.addSource(ft,$.sources[ft],{validate:!1});$.sprite?this._loadSprite($.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL($.glyphs);var At=we(this.stylesheet.layers);this._order=At.map(function(dt){return dt.id}),this._layers={},this._serializedLayers={};for(var N=0,Q=At;N<Q.length;N+=1){var it=Q[N];(it=r.createStyleLayer(it)).setEventedParent(this,{layer:{id:it.id}}),this._layers[it.id]=it,this._serializedLayers[it.id]=it.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new M(this.stylesheet.light),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}},H.prototype._loadSprite=function($){var K=this;this._spriteRequest=function(ft,At,N){var Q,it,dt,wt=r.browser.devicePixelRatio>1?"@2x":"",Et=r.getJSON(At.transformRequest(At.normalizeSpriteURL(ft,wt,".json"),r.ResourceType.SpriteJSON),function(Ht,qt){Et=null,dt||(dt=Ht,Q=qt,Ut())}),Bt=r.getImage(At.transformRequest(At.normalizeSpriteURL(ft,wt,".png"),r.ResourceType.SpriteImage),function(Ht,qt){Bt=null,dt||(dt=Ht,it=qt,Ut())});function Ut(){if(dt)N(dt);else if(Q&&it){var Ht=r.browser.getImageData(it),qt={};for(var Jt in Q){var le=Q[Jt],fe=le.width,Le=le.height,Se=le.x,Ce=le.y,Ne=le.sdf,Ee=le.pixelRatio,rr=le.stretchX,Ye=le.stretchY,Ve=le.content,dr=new r.RGBAImage({width:fe,height:Le});r.RGBAImage.copy(Ht,dr,{x:Se,y:Ce},{x:0,y:0},{width:fe,height:Le}),qt[Jt]={data:dr,pixelRatio:Ee,sdf:Ne,stretchX:rr,stretchY:Ye,content:Ve}}N(null,qt)}}return{cancel:function(){Et&&(Et.cancel(),Et=null),Bt&&(Bt.cancel(),Bt=null)}}}($,this.map._requestManager,function(ft,At){if(K._spriteRequest=null,ft)K.fire(new r.ErrorEvent(ft));else if(At)for(var N in At)K.imageManager.addImage(N,At[N]);K.imageManager.setLoaded(!0),K._availableImages=K.imageManager.listImages(),K.dispatcher.broadcast("setImages",K._availableImages),K.fire(new r.Event("data",{dataType:"style"}))})},H.prototype._validateLayer=function($){var K=this.sourceCaches[$.source];if(K){var ft=$.sourceLayer;if(ft){var At=K.getSource();(At.type==="geojson"||At.vectorLayerIds&&At.vectorLayerIds.indexOf(ft)===-1)&&this.fire(new r.ErrorEvent(new Error('Source layer "'+ft+'" does not exist on source "'+At.id+'" as specified by style layer "'+$.id+'"')))}}},H.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var $ in this.sourceCaches)if(!this.sourceCaches[$].loaded())return!1;return!!this.imageManager.isLoaded()},H.prototype._serializeLayers=function($){for(var K=[],ft=0,At=$;ft<At.length;ft+=1){var N=At[ft],Q=this._layers[N];Q.type!=="custom"&&K.push(Q.serialize())}return K},H.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var $ in this.sourceCaches)if(this.sourceCaches[$].hasTransition())return!0;for(var K in this._layers)if(this._layers[K].hasTransition())return!0;return!1},H.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},H.prototype.update=function($){if(this._loaded){var K=this._changed;if(this._changed){var ft=Object.keys(this._updatedLayers),At=Object.keys(this._removedLayers);for(var N in(ft.length||At.length)&&this._updateWorkerLayers(ft,At),this._updatedSources){var Q=this._updatedSources[N];Q==="reload"?this._reloadSource(N):Q==="clear"&&this._clearSource(N)}for(var it in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[it].updateTransitions($);this.light.updateTransitions($),this._resetUpdates()}for(var dt in this.sourceCaches)this.sourceCaches[dt].used=!1;for(var wt=0,Et=this._order;wt<Et.length;wt+=1){var Bt=Et[wt],Ut=this._layers[Bt];Ut.recalculate($,this._availableImages),!Ut.isHidden($.zoom)&&Ut.source&&(this.sourceCaches[Ut.source].used=!0)}this.light.recalculate($),this.z=$.zoom,K&&this.fire(new r.Event("data",{dataType:"style"}))}},H.prototype._updateTilesForChangedImages=function(){var $=Object.keys(this._changedImages);if($.length){for(var K in this.sourceCaches)this.sourceCaches[K].reloadTilesForDependencies(["icons","patterns"],$);this._changedImages={}}},H.prototype._updateWorkerLayers=function($,K){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers($),removedIds:K})},H.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},H.prototype.setState=function($){var K=this;if(this._checkLoaded(),Nr(this,r.validateStyle($)))return!1;($=r.clone$1($)).layers=we($.layers);var ft=Ze(this.serialize(),$).filter(function(N){return!(N.command in Vr)});if(ft.length===0)return!1;var At=ft.filter(function(N){return!(N.command in Kr)});if(At.length>0)throw new Error("Unimplemented: "+At.map(function(N){return N.command}).join(", ")+".");return ft.forEach(function(N){N.command!=="setTransition"&&K[N.command].apply(K,N.args)}),this.stylesheet=$,!0},H.prototype.addImage=function($,K){if(this.getImage($))return this.fire(new r.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage($,K),this._availableImages=this.imageManager.listImages(),this._changedImages[$]=!0,this._changed=!0,this.fire(new r.Event("data",{dataType:"style"}))},H.prototype.updateImage=function($,K){this.imageManager.updateImage($,K)},H.prototype.getImage=function($){return this.imageManager.getImage($)},H.prototype.removeImage=function($){if(!this.getImage($))return this.fire(new r.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage($),this._availableImages=this.imageManager.listImages(),this._changedImages[$]=!0,this._changed=!0,this.fire(new r.Event("data",{dataType:"style"}))},H.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},H.prototype.addSource=function($,K,ft){var At=this;if(ft===void 0&&(ft={}),this._checkLoaded(),this.sourceCaches[$]!==void 0)throw new Error("There is already a source with this ID");if(!K.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(K).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(K.type)>=0&&this._validate(r.validateStyle.source,"sources."+$,K,null,ft))){this.map&&this.map._collectResourceTiming&&(K.collectResourceTiming=!0);var N=this.sourceCaches[$]=new ne($,K,this.dispatcher);N.style=this,N.setEventedParent(this,function(){return{isSourceLoaded:At.loaded(),source:N.serialize(),sourceId:$}}),N.onAdd(this.map),this._changed=!0}},H.prototype.removeSource=function($){if(this._checkLoaded(),this.sourceCaches[$]===void 0)throw new Error("There is no source with this ID");for(var K in this._layers)if(this._layers[K].source===$)return this.fire(new r.ErrorEvent(new Error('Source "'+$+'" cannot be removed while layer "'+K+'" is using it.')));var ft=this.sourceCaches[$];delete this.sourceCaches[$],delete this._updatedSources[$],ft.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:$})),ft.setEventedParent(null),ft.clearTiles(),ft.onRemove&&ft.onRemove(this.map),this._changed=!0},H.prototype.setGeoJSONSourceData=function($,K){this._checkLoaded(),this.sourceCaches[$].getSource().setData(K),this._changed=!0},H.prototype.getSource=function($){return this.sourceCaches[$]&&this.sourceCaches[$].getSource()},H.prototype.addLayer=function($,K,ft){ft===void 0&&(ft={}),this._checkLoaded();var At=$.id;if(this.getLayer(At))this.fire(new r.ErrorEvent(new Error('Layer with id "'+At+'" already exists on this map')));else{var N;if($.type==="custom"){if(Nr(this,r.validateCustomStyleLayer($)))return;N=r.createStyleLayer($)}else{if(typeof $.source=="object"&&(this.addSource(At,$.source),$=r.clone$1($),$=r.extend($,{source:At})),this._validate(r.validateStyle.layer,"layers."+At,$,{arrayIndex:-1},ft))return;N=r.createStyleLayer($),this._validateLayer(N),N.setEventedParent(this,{layer:{id:At}}),this._serializedLayers[N.id]=N.serialize()}var Q=K?this._order.indexOf(K):this._order.length;if(K&&Q===-1)this.fire(new r.ErrorEvent(new Error('Layer with id "'+K+'" does not exist on this map.')));else{if(this._order.splice(Q,0,At),this._layerOrderChanged=!0,this._layers[At]=N,this._removedLayers[At]&&N.source&&N.type!=="custom"){var it=this._removedLayers[At];delete this._removedLayers[At],it.type!==N.type?this._updatedSources[N.source]="clear":(this._updatedSources[N.source]="reload",this.sourceCaches[N.source].pause())}this._updateLayer(N),N.onAdd&&N.onAdd(this.map)}}},H.prototype.moveLayer=function($,K){if(this._checkLoaded(),this._changed=!0,this._layers[$]){if($!==K){var ft=this._order.indexOf($);this._order.splice(ft,1);var At=K?this._order.indexOf(K):this._order.length;K&&At===-1?this.fire(new r.ErrorEvent(new Error('Layer with id "'+K+'" does not exist on this map.'))):(this._order.splice(At,0,$),this._layerOrderChanged=!0)}}else this.fire(new r.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be moved.")))},H.prototype.removeLayer=function($){this._checkLoaded();var K=this._layers[$];if(K){K.setEventedParent(null);var ft=this._order.indexOf($);this._order.splice(ft,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[$]=K,delete this._layers[$],delete this._serializedLayers[$],delete this._updatedLayers[$],delete this._updatedPaintProps[$],K.onRemove&&K.onRemove(this.map)}else this.fire(new r.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be removed.")))},H.prototype.getLayer=function($){return this._layers[$]},H.prototype.hasLayer=function($){return $ in this._layers},H.prototype.setLayerZoomRange=function($,K,ft){this._checkLoaded();var At=this.getLayer($);At?At.minzoom===K&&At.maxzoom===ft||(K!=null&&(At.minzoom=K),ft!=null&&(At.maxzoom=ft),this._updateLayer(At)):this.fire(new r.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot have zoom extent.")))},H.prototype.setFilter=function($,K,ft){ft===void 0&&(ft={}),this._checkLoaded();var At=this.getLayer($);if(At){if(!r.deepEqual(At.filter,K))return K==null?(At.filter=void 0,void this._updateLayer(At)):void(this._validate(r.validateStyle.filter,"layers."+At.id+".filter",K,null,ft)||(At.filter=r.clone$1(K),this._updateLayer(At)))}else this.fire(new r.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be filtered.")))},H.prototype.getFilter=function($){return r.clone$1(this.getLayer($).filter)},H.prototype.setLayoutProperty=function($,K,ft,At){At===void 0&&(At={}),this._checkLoaded();var N=this.getLayer($);N?r.deepEqual(N.getLayoutProperty(K),ft)||(N.setLayoutProperty(K,ft,At),this._updateLayer(N)):this.fire(new r.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be styled.")))},H.prototype.getLayoutProperty=function($,K){var ft=this.getLayer($);if(ft)return ft.getLayoutProperty(K);this.fire(new r.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style.")))},H.prototype.setPaintProperty=function($,K,ft,At){At===void 0&&(At={}),this._checkLoaded();var N=this.getLayer($);N?r.deepEqual(N.getPaintProperty(K),ft)||(N.setPaintProperty(K,ft,At)&&this._updateLayer(N),this._changed=!0,this._updatedPaintProps[$]=!0):this.fire(new r.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be styled.")))},H.prototype.getPaintProperty=function($,K){return this.getLayer($).getPaintProperty(K)},H.prototype.setFeatureState=function($,K){this._checkLoaded();var ft=$.source,At=$.sourceLayer,N=this.sourceCaches[ft];if(N!==void 0){var Q=N.getSource().type;Q==="geojson"&&At?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Q!=="vector"||At?($.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),N.setFeatureState(At,$.id,K)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+ft+"' does not exist in the map's style.")))},H.prototype.removeFeatureState=function($,K){this._checkLoaded();var ft=$.source,At=this.sourceCaches[ft];if(At!==void 0){var N=At.getSource().type,Q=N==="vector"?$.sourceLayer:void 0;N!=="vector"||Q?K&&typeof $.id!="string"&&typeof $.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):At.removeFeatureState(Q,$.id,K):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+ft+"' does not exist in the map's style.")))},H.prototype.getFeatureState=function($){this._checkLoaded();var K=$.source,ft=$.sourceLayer,At=this.sourceCaches[K];if(At!==void 0){if(At.getSource().type!=="vector"||ft)return $.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),At.getFeatureState(ft,$.id);this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+K+"' does not exist in the map's style.")))},H.prototype.getTransition=function(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},H.prototype.serialize=function(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,function($){return $.serialize()}),layers:this._serializeLayers(this._order)},function($){return $!==void 0})},H.prototype._updateLayer=function($){this._updatedLayers[$.id]=!0,$.source&&!this._updatedSources[$.source]&&this.sourceCaches[$.source].getSource().type!=="raster"&&(this._updatedSources[$.source]="reload",this.sourceCaches[$.source].pause()),this._changed=!0},H.prototype._flattenAndSortRenderedFeatures=function($){for(var K=this,ft=function(Ve){return K._layers[Ve].type==="fill-extrusion"},At={},N=[],Q=this._order.length-1;Q>=0;Q--){var it=this._order[Q];if(ft(it)){At[it]=Q;for(var dt=0,wt=$;dt<wt.length;dt+=1){var Et=wt[dt][it];if(Et)for(var Bt=0,Ut=Et;Bt<Ut.length;Bt+=1){var Ht=Ut[Bt];N.push(Ht)}}}}N.sort(function(Ve,dr){return dr.intersectionZ-Ve.intersectionZ});for(var qt=[],Jt=this._order.length-1;Jt>=0;Jt--){var le=this._order[Jt];if(ft(le))for(var fe=N.length-1;fe>=0;fe--){var Le=N[fe].feature;if(At[Le.layer.id]<Jt)break;qt.push(Le),N.pop()}else for(var Se=0,Ce=$;Se<Ce.length;Se+=1){var Ne=Ce[Se][le];if(Ne)for(var Ee=0,rr=Ne;Ee<rr.length;Ee+=1){var Ye=rr[Ee];qt.push(Ye.feature)}}}return qt},H.prototype.queryRenderedFeatures=function($,K,ft){K&&K.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",K.filter,null,K);var At={};if(K&&K.layers){if(!Array.isArray(K.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var N=0,Q=K.layers;N<Q.length;N+=1){var it=Q[N],dt=this._layers[it];if(!dt)return this.fire(new r.ErrorEvent(new Error("The layer '"+it+"' does not exist in the map's style and cannot be queried for features."))),[];At[dt.source]=!0}}var wt=[];for(var Et in K.availableImages=this._availableImages,this.sourceCaches)K.layers&&!At[Et]||wt.push(X(this.sourceCaches[Et],this._layers,this._serializedLayers,$,K,ft));return this.placement&&wt.push(function(Bt,Ut,Ht,qt,Jt,le,fe){for(var Le={},Se=le.queryRenderedSymbols(qt),Ce=[],Ne=0,Ee=Object.keys(Se).map(Number);Ne<Ee.length;Ne+=1){var rr=Ee[Ne];Ce.push(fe[rr])}Ce.sort(Y);for(var Ye=function(){var zr=dr[Ve],$r=zr.featureIndex.lookupSymbolFeatures(Se[zr.bucketInstanceId],Ut,zr.bucketIndex,zr.sourceLayerIndex,Jt.filter,Jt.layers,Jt.availableImages,Bt);for(var Zr in $r){var cn=Le[Zr]=Le[Zr]||[],ln=$r[Zr];ln.sort(function(Br,on){var dn=zr.featureSortOrder;if(dn){var _n=dn.indexOf(Br.featureIndex);return dn.indexOf(on.featureIndex)-_n}return on.featureIndex-Br.featureIndex});for(var pn=0,bn=ln;pn<bn.length;pn+=1){var On=bn[pn];cn.push(On)}}},Ve=0,dr=Ce;Ve<dr.length;Ve+=1)Ye();var vr=function(zr){Le[zr].forEach(function($r){var Zr=$r.feature,cn=Bt[zr],ln=Ht[cn.source].getFeatureState(Zr.layer["source-layer"],Zr.id);Zr.source=Zr.layer.source,Zr.layer["source-layer"]&&(Zr.sourceLayer=Zr.layer["source-layer"]),Zr.state=ln})};for(var Fr in Le)vr(Fr);return Le}(this._layers,this._serializedLayers,this.sourceCaches,$,K,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(wt)},H.prototype.querySourceFeatures=function($,K){K&&K.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",K.filter,null,K);var ft=this.sourceCaches[$];return ft?function(At,N){for(var Q=At.getRenderableIds().map(function(Ut){return At.getTileByID(Ut)}),it=[],dt={},wt=0;wt<Q.length;wt++){var Et=Q[wt],Bt=Et.tileID.canonical.key;dt[Bt]||(dt[Bt]=!0,Et.querySourceFeatures(it,N))}return it}(ft,K):[]},H.prototype.addSourceType=function($,K,ft){return H.getSourceType($)?ft(new Error('A source type called "'+$+'" already exists.')):(H.setSourceType($,K),K.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:$,url:K.workerSourceURL},ft):ft(null,null))},H.prototype.getLight=function(){return this.light.getLight()},H.prototype.setLight=function($,K){K===void 0&&(K={}),this._checkLoaded();var ft=this.light.getLight(),At=!1;for(var N in $)if(!r.deepEqual($[N],ft[N])){At=!0;break}if(At){var Q={now:r.browser.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight($,K),this.light.updateTransitions(Q)}},H.prototype._validate=function($,K,ft,At,N){return N===void 0&&(N={}),(!N||N.validate!==!1)&&Nr(this,$.call(r.validateStyle,r.extend({key:K,style:this.serialize(),value:ft,styleSpec:r.styleSpec},At)))},H.prototype._remove=function(){for(var $ in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[$].setEventedParent(null);for(var K in this.sourceCaches)this.sourceCaches[K].clearTiles(),this.sourceCaches[K].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},H.prototype._clearSource=function($){this.sourceCaches[$].clearTiles()},H.prototype._reloadSource=function($){this.sourceCaches[$].resume(),this.sourceCaches[$].reload()},H.prototype._updateSources=function($){for(var K in this.sourceCaches)this.sourceCaches[K].update($)},H.prototype._generateCollisionBoxes=function(){for(var $ in this.sourceCaches)this._reloadSource($)},H.prototype._updatePlacement=function($,K,ft,At,N){N===void 0&&(N=!1);for(var Q=!1,it=!1,dt={},wt=0,Et=this._order;wt<Et.length;wt+=1){var Bt=Et[wt],Ut=this._layers[Bt];if(Ut.type==="symbol"){if(!dt[Ut.source]){var Ht=this.sourceCaches[Ut.source];dt[Ut.source]=Ht.getRenderableIds(!0).map(function(Se){return Ht.getTileByID(Se)}).sort(function(Se,Ce){return Ce.tileID.overscaledZ-Se.tileID.overscaledZ||(Se.tileID.isLessThan(Ce.tileID)?-1:1)})}var qt=this.crossTileSymbolIndex.addLayer(Ut,dt[Ut.source],$.center.lng);Q=Q||qt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((N=N||this._layerOrderChanged||ft===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.browser.now(),$.zoom))&&(this.pauseablePlacement=new Je($,this._order,N,K,ft,At,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,dt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.browser.now()),it=!0),Q&&this.pauseablePlacement.placement.setStale()),it||Q)for(var Jt=0,le=this._order;Jt<le.length;Jt+=1){var fe=le[Jt],Le=this._layers[fe];Le.type==="symbol"&&this.placement.updateLayerOpacities(Le,dt[Le.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.browser.now())},H.prototype._releaseSymbolFadeTiles=function(){for(var $ in this.sourceCaches)this.sourceCaches[$].releaseSymbolFadeTiles()},H.prototype.getImages=function($,K,ft){this.imageManager.getImages(K.icons,ft),this._updateTilesForChangedImages();var At=this.sourceCaches[K.source];At&&At.setDependencies(K.tileID.key,K.type,K.icons)},H.prototype.getGlyphs=function($,K,ft){this.glyphManager.getGlyphs(K.stacks,ft)},H.prototype.getResource=function($,K,ft){return r.makeRequest(K,ft)},H}(r.Evented);rn.getSourceType=function(F){return et[F]},rn.setSourceType=function(F,H){et[F]=H},rn.registerForPluginStateChange=r.registerForPluginStateChange;var nn=r.createLayout([{name:"a_pos",type:"Int16",components:2}]),hn=qn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),fn=qn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),kn=qn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Yr=qn(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),mn=qn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Sn=qn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Xn=qn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ui=qn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),si=qn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),gi=qn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ri=qn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Mi=qn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Xa=qn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ya=qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),so=qn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ys=qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),$o=qn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),xs=qn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Zs=qn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ka=qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ul=qn(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ho=qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Vo=qn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ja=qn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Oi=qn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),bs=qn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function qn(F,H){var $=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,K={};return{fragmentSource:F=F.replace($,function(ft,At,N,Q,it){return K[it]=!0,At==="define"?`
#ifndef HAS_UNIFORM_u_`+it+`
varying `+N+" "+Q+" "+it+`;
#else
uniform `+N+" "+Q+" u_"+it+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+it+`
    `+N+" "+Q+" "+it+" = u_"+it+`;
#endif
`}),vertexSource:H=H.replace($,function(ft,At,N,Q,it){var dt=Q==="float"?"vec2":"vec4",wt=it.match(/color/)?"color":dt;return K[it]?At==="define"?`
#ifndef HAS_UNIFORM_u_`+it+`
uniform lowp float u_`+it+`_t;
attribute `+N+" "+dt+" a_"+it+`;
varying `+N+" "+Q+" "+it+`;
#else
uniform `+N+" "+Q+" u_"+it+`;
#endif
`:wt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+it+`
    `+it+" = a_"+it+`;
#else
    `+N+" "+Q+" "+it+" = u_"+it+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+it+`
    `+it+" = unpack_mix_"+wt+"(a_"+it+", u_"+it+`_t);
#else
    `+N+" "+Q+" "+it+" = u_"+it+`;
#endif
`:At==="define"?`
#ifndef HAS_UNIFORM_u_`+it+`
uniform lowp float u_`+it+`_t;
attribute `+N+" "+dt+" a_"+it+`;
#else
uniform `+N+" "+Q+" u_"+it+`;
#endif
`:wt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+it+`
    `+N+" "+Q+" "+it+" = a_"+it+`;
#else
    `+N+" "+Q+" "+it+" = u_"+it+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+it+`
    `+N+" "+Q+" "+it+" = unpack_mix_"+wt+"(a_"+it+", u_"+it+`_t);
#else
    `+N+" "+Q+" "+it+" = u_"+it+`;
#endif
`})}}var Qa=Object.freeze({__proto__:null,prelude:hn,background:fn,backgroundPattern:kn,circle:Yr,clippingMask:mn,heatmap:Sn,heatmapTexture:Xn,collisionBox:ui,collisionCircle:si,debug:gi,fill:ri,fillOutline:Mi,fillOutlinePattern:Xa,fillPattern:ya,fillExtrusion:so,fillExtrusionPattern:Ys,hillshadePrepare:$o,hillshade:xs,line:Zs,lineGradient:Ka,linePattern:ul,lineSDF:Ho,raster:Vo,symbolIcon:Ja,symbolSDF:Oi,symbolTextAndIcon:bs}),Aa=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Aa.prototype.bind=function(F,H,$,K,ft,At,N,Q){this.context=F;for(var it=this.boundPaintVertexBuffers.length!==K.length,dt=0;!it&&dt<K.length;dt++)this.boundPaintVertexBuffers[dt]!==K[dt]&&(it=!0);var wt=!this.vao||this.boundProgram!==H||this.boundLayoutVertexBuffer!==$||it||this.boundIndexBuffer!==ft||this.boundVertexOffset!==At||this.boundDynamicVertexBuffer!==N||this.boundDynamicVertexBuffer2!==Q;!F.extVertexArrayObject||wt?this.freshBind(H,$,K,ft,At,N,Q):(F.bindVertexArrayOES.set(this.vao),N&&N.bind(),ft&&ft.dynamicDraw&&ft.bind(),Q&&Q.bind())},Aa.prototype.freshBind=function(F,H,$,K,ft,At,N){var Q,it=F.numAttributes,dt=this.context,wt=dt.gl;if(dt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=dt.extVertexArrayObject.createVertexArrayOES(),dt.bindVertexArrayOES.set(this.vao),Q=0,this.boundProgram=F,this.boundLayoutVertexBuffer=H,this.boundPaintVertexBuffers=$,this.boundIndexBuffer=K,this.boundVertexOffset=ft,this.boundDynamicVertexBuffer=At,this.boundDynamicVertexBuffer2=N;else{Q=dt.currentNumAttributes||0;for(var Et=it;Et<Q;Et++)wt.disableVertexAttribArray(Et)}H.enableAttributes(wt,F);for(var Bt=0,Ut=$;Bt<Ut.length;Bt+=1)Ut[Bt].enableAttributes(wt,F);At&&At.enableAttributes(wt,F),N&&N.enableAttributes(wt,F),H.bind(),H.setVertexAttribPointers(wt,F,ft);for(var Ht=0,qt=$;Ht<qt.length;Ht+=1){var Jt=qt[Ht];Jt.bind(),Jt.setVertexAttribPointers(wt,F,ft)}At&&(At.bind(),At.setVertexAttribPointers(wt,F,ft)),K&&K.bind(),N&&(N.bind(),N.setVertexAttribPointers(wt,F,ft)),dt.currentNumAttributes=it},Aa.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var lo=function(F,H,$,K,ft){var At=F.gl;this.program=At.createProgram();var N=$?$.defines():[];ft&&N.push("#define OVERDRAW_INSPECTOR;");var Q=N.concat(hn.fragmentSource,H.fragmentSource).join(`
`),it=N.concat(hn.vertexSource,H.vertexSource).join(`
`),dt=At.createShader(At.FRAGMENT_SHADER);if(At.isContextLost())this.failedToCreate=!0;else{At.shaderSource(dt,Q),At.compileShader(dt),At.attachShader(this.program,dt);var wt=At.createShader(At.VERTEX_SHADER);if(At.isContextLost())this.failedToCreate=!0;else{At.shaderSource(wt,it),At.compileShader(wt),At.attachShader(this.program,wt);for(var Et=$?$.layoutAttributes:[],Bt=0;Bt<Et.length;Bt++)At.bindAttribLocation(this.program,Bt,Et[Bt].name);At.linkProgram(this.program),At.deleteShader(wt),At.deleteShader(dt),this.numAttributes=At.getProgramParameter(this.program,At.ACTIVE_ATTRIBUTES),this.attributes={};for(var Ut={},Ht=0;Ht<this.numAttributes;Ht++){var qt=At.getActiveAttrib(this.program,Ht);qt&&(this.attributes[qt.name]=At.getAttribLocation(this.program,qt.name))}for(var Jt=At.getProgramParameter(this.program,At.ACTIVE_UNIFORMS),le=0;le<Jt;le++){var fe=At.getActiveUniform(this.program,le);fe&&(Ut[fe.name]=At.getUniformLocation(this.program,fe.name))}this.fixedUniforms=K(F,Ut),this.binderUniforms=$?$.getUniforms(F,Ut):[]}}};function ja(F,H,$){var K=1/qr($,1,H.transform.tileZoom),ft=Math.pow(2,$.tileID.overscaledZ),At=$.tileSize*Math.pow(2,H.transform.tileZoom)/ft,N=At*($.tileID.canonical.x+$.tileID.wrap*ft),Q=At*$.tileID.canonical.y;return{u_image:0,u_texsize:$.imageAtlasTexture.size,u_scale:[K,F.fromScale,F.toScale],u_fade:F.t,u_pixel_coord_upper:[N>>16,Q>>16],u_pixel_coord_lower:[65535&N,65535&Q]}}lo.prototype.draw=function(F,H,$,K,ft,At,N,Q,it,dt,wt,Et,Bt,Ut,Ht,qt){var Jt,le=F.gl;if(!this.failedToCreate){for(var fe in F.program.set(this.program),F.setDepthMode($),F.setStencilMode(K),F.setColorMode(ft),F.setCullFace(At),this.fixedUniforms)this.fixedUniforms[fe].set(N[fe]);Ut&&Ut.setUniforms(F,this.binderUniforms,Et,{zoom:Bt});for(var Le=(Jt={},Jt[le.LINES]=2,Jt[le.TRIANGLES]=3,Jt[le.LINE_STRIP]=1,Jt)[H],Se=0,Ce=wt.get();Se<Ce.length;Se+=1){var Ne=Ce[Se],Ee=Ne.vaos||(Ne.vaos={});(Ee[Q]||(Ee[Q]=new Aa)).bind(F,this,it,Ut?Ut.getPaintVertexBuffers():[],dt,Ne.vertexOffset,Ht,qt),le.drawElements(H,Ne.primitiveLength*Le,le.UNSIGNED_SHORT,Ne.primitiveOffset*Le*2)}}};var To=function(F,H,$,K){var ft=H.style.light,At=ft.properties.get("position"),N=[At.x,At.y,At.z],Q=r.create$1();ft.properties.get("anchor")==="viewport"&&r.fromRotation(Q,-H.transform.angle),r.transformMat3(N,N,Q);var it=ft.properties.get("color");return{u_matrix:F,u_lightpos:N,u_lightintensity:ft.properties.get("intensity"),u_lightcolor:[it.r,it.g,it.b],u_vertical_gradient:+$,u_opacity:K}},co=function(F,H,$,K,ft,At,N){return r.extend(To(F,H,$,K),ja(At,H,N),{u_height_factor:-Math.pow(2,ft.overscaledZ)/N.tileSize/8})},uo=function(F){return{u_matrix:F}},Fs=function(F,H,$,K){return r.extend(uo(F),ja($,H,K))},hl=function(F,H){return{u_matrix:F,u_world:H}},Mo=function(F,H,$,K,ft){return r.extend(Fs(F,H,$,K),{u_world:ft})},fl=function(F,H,$,K){var ft,At,N=F.transform;if(K.paint.get("circle-pitch-alignment")==="map"){var Q=qr($,1,N.zoom);ft=!0,At=[Q,Q]}else ft=!1,At=N.pixelsToGLUnits;return{u_camera_to_center_distance:N.cameraToCenterDistance,u_scale_with_map:+(K.paint.get("circle-pitch-scale")==="map"),u_matrix:F.translatePosMatrix(H.posMatrix,$,K.paint.get("circle-translate"),K.paint.get("circle-translate-anchor")),u_pitch_with_map:+ft,u_device_pixel_ratio:r.browser.devicePixelRatio,u_extrude_scale:At}},Xs=function(F,H,$){var K=qr($,1,H.zoom),ft=Math.pow(2,H.zoom-$.tileID.overscaledZ),At=$.tileID.overscaleFactor();return{u_matrix:F,u_camera_to_center_distance:H.cameraToCenterDistance,u_pixels_to_tile_units:K,u_extrude_scale:[H.pixelsToGLUnits[0]/(K*ft),H.pixelsToGLUnits[1]/(K*ft)],u_overscale_factor:At}},pl=function(F,H,$){return{u_matrix:F,u_inv_matrix:H,u_camera_to_center_distance:$.cameraToCenterDistance,u_viewport_size:[$.width,$.height]}},Ks=function(F,H,$){return $===void 0&&($=1),{u_matrix:F,u_color:H,u_overlay:0,u_overlay_scale:$}},dl=function(F){return{u_matrix:F}},ss=function(F,H,$,K){return{u_matrix:F,u_extrude_scale:qr(H,1,$),u_intensity:K}},Ao=function(F,H,$,K){var ft=r.create();r.ortho(ft,0,F.width,F.height,0,0,1);var At=F.context.gl;return{u_matrix:ft,u_world:[At.drawingBufferWidth,At.drawingBufferHeight],u_image:$,u_color_ramp:K,u_opacity:H.paint.get("heatmap-opacity")}},Wo=function(F,H,$){var K=$.paint.get("hillshade-shadow-color"),ft=$.paint.get("hillshade-highlight-color"),At=$.paint.get("hillshade-accent-color"),N=$.paint.get("hillshade-illumination-direction")*(Math.PI/180);$.paint.get("hillshade-illumination-anchor")==="viewport"&&(N-=F.transform.angle);var Q,it,dt,wt=!F.options.moving;return{u_matrix:F.transform.calculatePosMatrix(H.tileID.toUnwrapped(),wt),u_image:0,u_latrange:(Q=H.tileID,it=Math.pow(2,Q.canonical.z),dt=Q.canonical.y,[new r.MercatorCoordinate(0,dt/it).toLngLat().lat,new r.MercatorCoordinate(0,(dt+1)/it).toLngLat().lat]),u_light:[$.paint.get("hillshade-exaggeration"),N],u_shadow:K,u_highlight:ft,u_accent:At}},ls=function(F,H,$){var K=H.stride,ft=r.create();return r.ortho(ft,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(ft,ft,[0,-r.EXTENT,0]),{u_matrix:ft,u_image:1,u_dimension:[K,K],u_zoom:F.overscaledZ,u_maxzoom:$,u_unpack:H.getUnpackVector()}},zs=function(F,H,$){var K=F.transform;return{u_matrix:to(F,H,$),u_ratio:1/qr(H,1,K.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_units_to_pixels:[1/K.pixelsToGLUnits[0],1/K.pixelsToGLUnits[1]]}},Js=function(F,H,$){return r.extend(zs(F,H,$),{u_image:0})},Qs=function(F,H,$,K){var ft=F.transform,At=qo(H,ft);return{u_matrix:to(F,H,$),u_texsize:H.imageAtlasTexture.size,u_ratio:1/qr(H,1,ft.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_image:0,u_scale:[At,K.fromScale,K.toScale],u_fade:K.t,u_units_to_pixels:[1/ft.pixelsToGLUnits[0],1/ft.pixelsToGLUnits[1]]}},Ia=function(F,H,$,K,ft){var At=F.transform,N=F.lineAtlas,Q=qo(H,At),it=$.layout.get("line-cap")==="round",dt=N.getDash(K.from,it),wt=N.getDash(K.to,it),Et=dt.width*ft.fromScale,Bt=wt.width*ft.toScale;return r.extend(zs(F,H,$),{u_patternscale_a:[Q/Et,-dt.height/2],u_patternscale_b:[Q/Bt,-wt.height/2],u_sdfgamma:N.width/(256*Math.min(Et,Bt)*r.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:dt.y,u_tex_y_b:wt.y,u_mix:ft.t})};function qo(F,H){return 1/qr(F,1,H.tileZoom)}function to(F,H,$){return F.translatePosMatrix(H.tileID.posMatrix,H,$.paint.get("line-translate"),$.paint.get("line-translate-anchor"))}var ho=function(F,H,$,K,ft){return{u_matrix:F,u_tl_parent:H,u_scale_parent:$,u_buffer_scale:1,u_fade_t:K.mix,u_opacity:K.opacity*ft.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ft.paint.get("raster-brightness-min"),u_brightness_high:ft.paint.get("raster-brightness-max"),u_saturation_factor:(N=ft.paint.get("raster-saturation"),N>0?1-1/(1.001-N):-N),u_contrast_factor:(At=ft.paint.get("raster-contrast"),At>0?1/(1-At):1+At),u_spin_weights:ml(ft.paint.get("raster-hue-rotate"))};var At,N};function ml(F){F*=Math.PI/180;var H=Math.sin(F),$=Math.cos(F);return[(2*$+1)/3,(-Math.sqrt(3)*H-$+1)/3,(Math.sqrt(3)*H-$+1)/3]}var Co,ni=function(F,H,$,K,ft,At,N,Q,it,dt){var wt=ft.transform;return{u_is_size_zoom_constant:+(F==="constant"||F==="source"),u_is_size_feature_constant:+(F==="constant"||F==="camera"),u_size_t:H?H.uSizeT:0,u_size:H?H.uSize:0,u_camera_to_center_distance:wt.cameraToCenterDistance,u_pitch:wt.pitch/360*2*Math.PI,u_rotate_symbol:+$,u_aspect_ratio:wt.width/wt.height,u_fade_change:ft.options.fadeDuration?ft.symbolFadeChange:1,u_matrix:At,u_label_plane_matrix:N,u_coord_matrix:Q,u_is_text:+it,u_pitch_with_map:+K,u_texsize:dt,u_texture:0}},Ua=function(F,H,$,K,ft,At,N,Q,it,dt,wt){var Et=ft.transform;return r.extend(ni(F,H,$,K,ft,At,N,Q,it,dt),{u_gamma_scale:K?Math.cos(Et._pitch)*Et.cameraToCenterDistance:1,u_device_pixel_ratio:r.browser.devicePixelRatio,u_is_halo:+wt})},_s=function(F,H,$,K,ft,At,N,Q,it,dt){return r.extend(Ua(F,H,$,K,ft,At,N,Q,!0,it,!0),{u_texsize_icon:dt,u_texture_icon:1})},Oa=function(F,H,$){return{u_matrix:F,u_opacity:H,u_color:$}},Yo=function(F,H,$,K,ft,At){return r.extend(function(N,Q,it,dt){var wt=it.imageManager.getPattern(N.from.toString()),Et=it.imageManager.getPattern(N.to.toString()),Bt=it.imageManager.getPixelSize(),Ut=Bt.width,Ht=Bt.height,qt=Math.pow(2,dt.tileID.overscaledZ),Jt=dt.tileSize*Math.pow(2,it.transform.tileZoom)/qt,le=Jt*(dt.tileID.canonical.x+dt.tileID.wrap*qt),fe=Jt*dt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:wt.tl,u_pattern_br_a:wt.br,u_pattern_tl_b:Et.tl,u_pattern_br_b:Et.br,u_texsize:[Ut,Ht],u_mix:Q.t,u_pattern_size_a:wt.displaySize,u_pattern_size_b:Et.displaySize,u_scale_a:Q.fromScale,u_scale_b:Q.toScale,u_tile_units_to_pixels:1/qr(dt,1,it.transform.tileZoom),u_pixel_coord_upper:[le>>16,fe>>16],u_pixel_coord_lower:[65535&le,65535&fe]}}(K,At,$,ft),{u_matrix:F,u_opacity:H})},Al={fillExtrusion:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_lightpos:new r.Uniform3f(F,H.u_lightpos),u_lightintensity:new r.Uniform1f(F,H.u_lightintensity),u_lightcolor:new r.Uniform3f(F,H.u_lightcolor),u_vertical_gradient:new r.Uniform1f(F,H.u_vertical_gradient),u_opacity:new r.Uniform1f(F,H.u_opacity)}},fillExtrusionPattern:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_lightpos:new r.Uniform3f(F,H.u_lightpos),u_lightintensity:new r.Uniform1f(F,H.u_lightintensity),u_lightcolor:new r.Uniform3f(F,H.u_lightcolor),u_vertical_gradient:new r.Uniform1f(F,H.u_vertical_gradient),u_height_factor:new r.Uniform1f(F,H.u_height_factor),u_image:new r.Uniform1i(F,H.u_image),u_texsize:new r.Uniform2f(F,H.u_texsize),u_pixel_coord_upper:new r.Uniform2f(F,H.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(F,H.u_pixel_coord_lower),u_scale:new r.Uniform3f(F,H.u_scale),u_fade:new r.Uniform1f(F,H.u_fade),u_opacity:new r.Uniform1f(F,H.u_opacity)}},fill:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix)}},fillPattern:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_image:new r.Uniform1i(F,H.u_image),u_texsize:new r.Uniform2f(F,H.u_texsize),u_pixel_coord_upper:new r.Uniform2f(F,H.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(F,H.u_pixel_coord_lower),u_scale:new r.Uniform3f(F,H.u_scale),u_fade:new r.Uniform1f(F,H.u_fade)}},fillOutline:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_world:new r.Uniform2f(F,H.u_world)}},fillOutlinePattern:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_world:new r.Uniform2f(F,H.u_world),u_image:new r.Uniform1i(F,H.u_image),u_texsize:new r.Uniform2f(F,H.u_texsize),u_pixel_coord_upper:new r.Uniform2f(F,H.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(F,H.u_pixel_coord_lower),u_scale:new r.Uniform3f(F,H.u_scale),u_fade:new r.Uniform1f(F,H.u_fade)}},circle:function(F,H){return{u_camera_to_center_distance:new r.Uniform1f(F,H.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(F,H.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(F,H.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(F,H.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(F,H.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(F,H.u_matrix)}},collisionBox:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_camera_to_center_distance:new r.Uniform1f(F,H.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(F,H.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(F,H.u_extrude_scale),u_overscale_factor:new r.Uniform1f(F,H.u_overscale_factor)}},collisionCircle:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_inv_matrix:new r.UniformMatrix4f(F,H.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(F,H.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(F,H.u_viewport_size)}},debug:function(F,H){return{u_color:new r.UniformColor(F,H.u_color),u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_overlay:new r.Uniform1i(F,H.u_overlay),u_overlay_scale:new r.Uniform1f(F,H.u_overlay_scale)}},clippingMask:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix)}},heatmap:function(F,H){return{u_extrude_scale:new r.Uniform1f(F,H.u_extrude_scale),u_intensity:new r.Uniform1f(F,H.u_intensity),u_matrix:new r.UniformMatrix4f(F,H.u_matrix)}},heatmapTexture:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_world:new r.Uniform2f(F,H.u_world),u_image:new r.Uniform1i(F,H.u_image),u_color_ramp:new r.Uniform1i(F,H.u_color_ramp),u_opacity:new r.Uniform1f(F,H.u_opacity)}},hillshade:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_image:new r.Uniform1i(F,H.u_image),u_latrange:new r.Uniform2f(F,H.u_latrange),u_light:new r.Uniform2f(F,H.u_light),u_shadow:new r.UniformColor(F,H.u_shadow),u_highlight:new r.UniformColor(F,H.u_highlight),u_accent:new r.UniformColor(F,H.u_accent)}},hillshadePrepare:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_image:new r.Uniform1i(F,H.u_image),u_dimension:new r.Uniform2f(F,H.u_dimension),u_zoom:new r.Uniform1f(F,H.u_zoom),u_maxzoom:new r.Uniform1f(F,H.u_maxzoom),u_unpack:new r.Uniform4f(F,H.u_unpack)}},line:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_ratio:new r.Uniform1f(F,H.u_ratio),u_device_pixel_ratio:new r.Uniform1f(F,H.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(F,H.u_units_to_pixels)}},lineGradient:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_ratio:new r.Uniform1f(F,H.u_ratio),u_device_pixel_ratio:new r.Uniform1f(F,H.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(F,H.u_units_to_pixels),u_image:new r.Uniform1i(F,H.u_image)}},linePattern:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_texsize:new r.Uniform2f(F,H.u_texsize),u_ratio:new r.Uniform1f(F,H.u_ratio),u_device_pixel_ratio:new r.Uniform1f(F,H.u_device_pixel_ratio),u_image:new r.Uniform1i(F,H.u_image),u_units_to_pixels:new r.Uniform2f(F,H.u_units_to_pixels),u_scale:new r.Uniform3f(F,H.u_scale),u_fade:new r.Uniform1f(F,H.u_fade)}},lineSDF:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_ratio:new r.Uniform1f(F,H.u_ratio),u_device_pixel_ratio:new r.Uniform1f(F,H.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(F,H.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(F,H.u_patternscale_a),u_patternscale_b:new r.Uniform2f(F,H.u_patternscale_b),u_sdfgamma:new r.Uniform1f(F,H.u_sdfgamma),u_image:new r.Uniform1i(F,H.u_image),u_tex_y_a:new r.Uniform1f(F,H.u_tex_y_a),u_tex_y_b:new r.Uniform1f(F,H.u_tex_y_b),u_mix:new r.Uniform1f(F,H.u_mix)}},raster:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_tl_parent:new r.Uniform2f(F,H.u_tl_parent),u_scale_parent:new r.Uniform1f(F,H.u_scale_parent),u_buffer_scale:new r.Uniform1f(F,H.u_buffer_scale),u_fade_t:new r.Uniform1f(F,H.u_fade_t),u_opacity:new r.Uniform1f(F,H.u_opacity),u_image0:new r.Uniform1i(F,H.u_image0),u_image1:new r.Uniform1i(F,H.u_image1),u_brightness_low:new r.Uniform1f(F,H.u_brightness_low),u_brightness_high:new r.Uniform1f(F,H.u_brightness_high),u_saturation_factor:new r.Uniform1f(F,H.u_saturation_factor),u_contrast_factor:new r.Uniform1f(F,H.u_contrast_factor),u_spin_weights:new r.Uniform3f(F,H.u_spin_weights)}},symbolIcon:function(F,H){return{u_is_size_zoom_constant:new r.Uniform1i(F,H.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(F,H.u_is_size_feature_constant),u_size_t:new r.Uniform1f(F,H.u_size_t),u_size:new r.Uniform1f(F,H.u_size),u_camera_to_center_distance:new r.Uniform1f(F,H.u_camera_to_center_distance),u_pitch:new r.Uniform1f(F,H.u_pitch),u_rotate_symbol:new r.Uniform1i(F,H.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(F,H.u_aspect_ratio),u_fade_change:new r.Uniform1f(F,H.u_fade_change),u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(F,H.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(F,H.u_coord_matrix),u_is_text:new r.Uniform1i(F,H.u_is_text),u_pitch_with_map:new r.Uniform1i(F,H.u_pitch_with_map),u_texsize:new r.Uniform2f(F,H.u_texsize),u_texture:new r.Uniform1i(F,H.u_texture)}},symbolSDF:function(F,H){return{u_is_size_zoom_constant:new r.Uniform1i(F,H.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(F,H.u_is_size_feature_constant),u_size_t:new r.Uniform1f(F,H.u_size_t),u_size:new r.Uniform1f(F,H.u_size),u_camera_to_center_distance:new r.Uniform1f(F,H.u_camera_to_center_distance),u_pitch:new r.Uniform1f(F,H.u_pitch),u_rotate_symbol:new r.Uniform1i(F,H.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(F,H.u_aspect_ratio),u_fade_change:new r.Uniform1f(F,H.u_fade_change),u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(F,H.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(F,H.u_coord_matrix),u_is_text:new r.Uniform1i(F,H.u_is_text),u_pitch_with_map:new r.Uniform1i(F,H.u_pitch_with_map),u_texsize:new r.Uniform2f(F,H.u_texsize),u_texture:new r.Uniform1i(F,H.u_texture),u_gamma_scale:new r.Uniform1f(F,H.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(F,H.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(F,H.u_is_halo)}},symbolTextAndIcon:function(F,H){return{u_is_size_zoom_constant:new r.Uniform1i(F,H.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(F,H.u_is_size_feature_constant),u_size_t:new r.Uniform1f(F,H.u_size_t),u_size:new r.Uniform1f(F,H.u_size),u_camera_to_center_distance:new r.Uniform1f(F,H.u_camera_to_center_distance),u_pitch:new r.Uniform1f(F,H.u_pitch),u_rotate_symbol:new r.Uniform1i(F,H.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(F,H.u_aspect_ratio),u_fade_change:new r.Uniform1f(F,H.u_fade_change),u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(F,H.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(F,H.u_coord_matrix),u_is_text:new r.Uniform1i(F,H.u_is_text),u_pitch_with_map:new r.Uniform1i(F,H.u_pitch_with_map),u_texsize:new r.Uniform2f(F,H.u_texsize),u_texsize_icon:new r.Uniform2f(F,H.u_texsize_icon),u_texture:new r.Uniform1i(F,H.u_texture),u_texture_icon:new r.Uniform1i(F,H.u_texture_icon),u_gamma_scale:new r.Uniform1f(F,H.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(F,H.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(F,H.u_is_halo)}},background:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_opacity:new r.Uniform1f(F,H.u_opacity),u_color:new r.UniformColor(F,H.u_color)}},backgroundPattern:function(F,H){return{u_matrix:new r.UniformMatrix4f(F,H.u_matrix),u_opacity:new r.Uniform1f(F,H.u_opacity),u_image:new r.Uniform1i(F,H.u_image),u_pattern_tl_a:new r.Uniform2f(F,H.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(F,H.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(F,H.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(F,H.u_pattern_br_b),u_texsize:new r.Uniform2f(F,H.u_texsize),u_mix:new r.Uniform1f(F,H.u_mix),u_pattern_size_a:new r.Uniform2f(F,H.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(F,H.u_pattern_size_b),u_scale_a:new r.Uniform1f(F,H.u_scale_a),u_scale_b:new r.Uniform1f(F,H.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(F,H.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(F,H.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(F,H.u_tile_units_to_pixels)}}};function Ns(F,H,$,K,ft,At,N){for(var Q=F.context,it=Q.gl,dt=F.useProgram("collisionBox"),wt=[],Et=0,Bt=0,Ut=0;Ut<K.length;Ut++){var Ht=K[Ut],qt=H.getTile(Ht),Jt=qt.getBucket($);if(Jt){var le=Ht.posMatrix;ft[0]===0&&ft[1]===0||(le=F.translatePosMatrix(Ht.posMatrix,qt,ft,At));var fe=N?Jt.textCollisionBox:Jt.iconCollisionBox,Le=Jt.collisionCircleArray;if(Le.length>0){var Se=r.create(),Ce=le;r.mul(Se,Jt.placementInvProjMatrix,F.transform.glCoordMatrix),r.mul(Se,Se,Jt.placementViewportMatrix),wt.push({circleArray:Le,circleOffset:Bt,transform:Ce,invTransform:Se}),Bt=Et+=Le.length/4}fe&&dt.draw(Q,it.LINES,Ie.disabled,Vt.disabled,F.colorModeForRenderPass(),Gt.disabled,Xs(le,F.transform,qt),$.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,null,F.transform.zoom,null,null,fe.collisionVertexBuffer)}}if(N&&wt.length){var Ne=F.useProgram("collisionCircle"),Ee=new r.StructArrayLayout2f1f2i16;Ee.resize(4*Et),Ee._trim();for(var rr=0,Ye=0,Ve=wt;Ye<Ve.length;Ye+=1)for(var dr=Ve[Ye],vr=0;vr<dr.circleArray.length/4;vr++){var Fr=4*vr,zr=dr.circleArray[Fr+0],$r=dr.circleArray[Fr+1],Zr=dr.circleArray[Fr+2],cn=dr.circleArray[Fr+3];Ee.emplace(rr++,zr,$r,Zr,cn,0),Ee.emplace(rr++,zr,$r,Zr,cn,1),Ee.emplace(rr++,zr,$r,Zr,cn,2),Ee.emplace(rr++,zr,$r,Zr,cn,3)}(!Co||Co.length<2*Et)&&(Co=function(dn){var _n=2*dn,En=new r.StructArrayLayout3ui6;En.resize(_n),En._trim();for(var Nn=0;Nn<_n;Nn++){var $n=6*Nn;En.uint16[$n+0]=4*Nn+0,En.uint16[$n+1]=4*Nn+1,En.uint16[$n+2]=4*Nn+2,En.uint16[$n+3]=4*Nn+2,En.uint16[$n+4]=4*Nn+3,En.uint16[$n+5]=4*Nn+0}return En}(Et));for(var ln=Q.createIndexBuffer(Co,!0),pn=Q.createVertexBuffer(Ee,r.collisionCircleLayout.members,!0),bn=0,On=wt;bn<On.length;bn+=1){var Br=On[bn],on=pl(Br.transform,Br.invTransform,F.transform);Ne.draw(Q,it.TRIANGLES,Ie.disabled,Vt.disabled,F.colorModeForRenderPass(),Gt.disabled,on,$.id,pn,ln,r.SegmentVector.simpleSegment(0,2*Br.circleOffset,Br.circleArray.length,Br.circleArray.length/2),null,F.transform.zoom,null,null,null)}pn.destroy(),ln.destroy()}}var vl=r.identity(new Float32Array(16));function yl(F,H,$,K,ft,At){var N=r.getAnchorAlignment(F),Q=-(N.horizontalAlign-.5)*H,it=-(N.verticalAlign-.5)*$,dt=r.evaluateVariableOffset(F,K);return new r.Point((Q/ft+dt[0])*At,(it/ft+dt[1])*At)}function ws(F,H,$,K,ft,At,N,Q,it,dt,wt){var Et=F.text.placedSymbolArray,Bt=F.text.dynamicLayoutVertexArray,Ut=F.icon.dynamicLayoutVertexArray,Ht={};Bt.clear();for(var qt=0;qt<Et.length;qt++){var Jt=Et.get(qt),le=F.allowVerticalPlacement&&!Jt.placedOrientation,fe=Jt.hidden||!Jt.crossTileID||le?null:K[Jt.crossTileID];if(fe){var Le=new r.Point(Jt.anchorX,Jt.anchorY),Se=$e(Le,$?Q:N),Ce=ir(At.cameraToCenterDistance,Se.signedDistanceFromCamera),Ne=ft.evaluateSizeForFeature(F.textSizeData,dt,Jt)*Ce/r.ONE_EM;$&&(Ne*=F.tilePixelRatio/it);for(var Ee=fe.width,rr=fe.height,Ye=yl(fe.anchor,Ee,rr,fe.textOffset,fe.textBoxScale,Ne),Ve=$?$e(Le.add(Ye),N).point:Se.point.add(H?Ye.rotate(-At.angle):Ye),dr=F.allowVerticalPlacement&&Jt.placedOrientation===r.WritingMode.vertical?Math.PI/2:0,vr=0;vr<Jt.numGlyphs;vr++)r.addDynamicAttributes(Bt,Ve,dr);wt&&Jt.associatedIconIndex>=0&&(Ht[Jt.associatedIconIndex]={shiftedAnchor:Ve,angle:dr})}else Xr(Jt.numGlyphs,Bt)}if(wt){Ut.clear();for(var Fr=F.icon.placedSymbolArray,zr=0;zr<Fr.length;zr++){var $r=Fr.get(zr);if($r.hidden)Xr($r.numGlyphs,Ut);else{var Zr=Ht[zr];if(Zr)for(var cn=0;cn<$r.numGlyphs;cn++)r.addDynamicAttributes(Ut,Zr.shiftedAnchor,Zr.angle);else Xr($r.numGlyphs,Ut)}}F.icon.dynamicLayoutVertexBuffer.updateData(Ut)}F.text.dynamicLayoutVertexBuffer.updateData(Bt)}function cs(F,H,$){return $.iconsInText&&H?"symbolTextAndIcon":F?"symbolSDF":"symbolIcon"}function ks(F,H,$,K,ft,At,N,Q,it,dt,wt,Et){for(var Bt=F.context,Ut=Bt.gl,Ht=F.transform,qt=Q==="map",Jt=it==="map",le=qt&&$.layout.get("symbol-placement")!=="point",fe=qt&&!Jt&&!le,Le=$.layout.get("symbol-sort-key").constantOr(1)!==void 0,Se=F.depthModeForSublayer(0,Ie.ReadOnly),Ce=$.layout.get("text-variable-anchor"),Ne=[],Ee=0,rr=K;Ee<rr.length;Ee+=1){var Ye=rr[Ee],Ve=H.getTile(Ye),dr=Ve.getBucket($);if(dr){var vr=ft?dr.text:dr.icon;if(vr&&vr.segments.get().length){var Fr=vr.programConfigurations.get($.id),zr=ft||dr.sdfIcons,$r=ft?dr.textSizeData:dr.iconSizeData,Zr=Jt||Ht.pitch!==0,cn=F.useProgram(cs(zr,ft,dr),Fr),ln=r.evaluateSizeForZoom($r,Ht.zoom),pn=void 0,bn=[0,0],On=void 0,Br=void 0,on=null,dn=void 0;if(ft){if(On=Ve.glyphAtlasTexture,Br=Ut.LINEAR,pn=Ve.glyphAtlasTexture.size,dr.iconsInText){bn=Ve.imageAtlasTexture.size,on=Ve.imageAtlasTexture;var _n=$r.kind==="composite"||$r.kind==="camera";dn=Zr||F.options.rotating||F.options.zooming||_n?Ut.LINEAR:Ut.NEAREST}}else{var En=$.layout.get("icon-size").constantOr(0)!==1||dr.iconsNeedLinear;On=Ve.imageAtlasTexture,Br=zr||F.options.rotating||F.options.zooming||En||Zr?Ut.LINEAR:Ut.NEAREST,pn=Ve.imageAtlasTexture.size}var Nn=qr(Ve,1,F.transform.zoom),$n=xr(Ye.posMatrix,Jt,qt,F.transform,Nn),Kn=sr(Ye.posMatrix,Jt,qt,F.transform,Nn),hi=Ce&&dr.hasTextData(),fi=$.layout.get("icon-text-fit")!=="none"&&hi&&dr.hasIconData();le&&ar(dr,Ye.posMatrix,F,ft,$n,Kn,Jt,dt);var Jn=F.translatePosMatrix(Ye.posMatrix,Ve,At,N),Ci=le||ft&&Ce||fi?vl:$n,Zi=F.translatePosMatrix(Kn,Ve,At,N,!0),Pi=zr&&$.paint.get(ft?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ui={program:cn,buffers:vr,uniformValues:zr?dr.iconsInText?_s($r.kind,ln,fe,Jt,F,Jn,Ci,Zi,pn,bn):Ua($r.kind,ln,fe,Jt,F,Jn,Ci,Zi,ft,pn,!0):ni($r.kind,ln,fe,Jt,F,Jn,Ci,Zi,ft,pn),atlasTexture:On,atlasTextureIcon:on,atlasInterpolation:Br,atlasInterpolationIcon:dn,isSDF:zr,hasHalo:Pi};if(Le)for(var Wn=0,Gn=vr.segments.get();Wn<Gn.length;Wn+=1){var pi=Gn[Wn];Ne.push({segments:new r.SegmentVector([pi]),sortKey:pi.sortKey,state:Ui})}else Ne.push({segments:vr.segments,sortKey:0,state:Ui})}}}Le&&Ne.sort(function(os,_a){return os.sortKey-_a.sortKey});for(var oi=0,mi=Ne;oi<mi.length;oi+=1){var pa=mi[oi],wi=pa.state;if(Bt.activeTexture.set(Ut.TEXTURE0),wi.atlasTexture.bind(wi.atlasInterpolation,Ut.CLAMP_TO_EDGE),wi.atlasTextureIcon&&(Bt.activeTexture.set(Ut.TEXTURE1),wi.atlasTextureIcon&&wi.atlasTextureIcon.bind(wi.atlasInterpolationIcon,Ut.CLAMP_TO_EDGE)),wi.isSDF){var Qn=wi.uniformValues;wi.hasHalo&&(Qn.u_is_halo=1,Lo(wi.buffers,pa.segments,$,F,wi.program,Se,wt,Et,Qn)),Qn.u_is_halo=0}Lo(wi.buffers,pa.segments,$,F,wi.program,Se,wt,Et,wi.uniformValues)}}function Lo(F,H,$,K,ft,At,N,Q,it){var dt=K.context,wt=dt.gl;ft.draw(dt,wt.TRIANGLES,At,N,Q,Gt.disabled,it,$.id,F.layoutVertexBuffer,F.indexBuffer,H,$.paint,K.transform.zoom,F.programConfigurations.get($.id),F.dynamicLayoutVertexBuffer,F.opacityVertexBuffer)}function fo(F,H,$,K,ft,At,N){var Q,it,dt,wt,Et,Bt=F.context.gl,Ut=$.paint.get("fill-pattern"),Ht=Ut&&Ut.constantOr(1),qt=$.getCrossfadeParameters();N?(it=Ht&&!$.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Q=Bt.LINES):(it=Ht?"fillPattern":"fill",Q=Bt.TRIANGLES);for(var Jt=0,le=K;Jt<le.length;Jt+=1){var fe=le[Jt],Le=H.getTile(fe);if(!Ht||Le.patternsLoaded()){var Se=Le.getBucket($);if(Se){var Ce=Se.programConfigurations.get($.id),Ne=F.useProgram(it,Ce);Ht&&(F.context.activeTexture.set(Bt.TEXTURE0),Le.imageAtlasTexture.bind(Bt.LINEAR,Bt.CLAMP_TO_EDGE),Ce.updatePaintBuffers(qt));var Ee=Ut.constantOr(null);if(Ee&&Le.imageAtlas){var rr=Le.imageAtlas,Ye=rr.patternPositions[Ee.to.toString()],Ve=rr.patternPositions[Ee.from.toString()];Ye&&Ve&&Ce.setConstantPatternPositions(Ye,Ve)}var dr=F.translatePosMatrix(fe.posMatrix,Le,$.paint.get("fill-translate"),$.paint.get("fill-translate-anchor"));if(N){wt=Se.indexBuffer2,Et=Se.segments2;var vr=[Bt.drawingBufferWidth,Bt.drawingBufferHeight];dt=it==="fillOutlinePattern"&&Ht?Mo(dr,F,qt,Le,vr):hl(dr,vr)}else wt=Se.indexBuffer,Et=Se.segments,dt=Ht?Fs(dr,F,qt,Le):uo(dr);Ne.draw(F.context,Q,ft,F.stencilModeForClipping(fe),At,Gt.disabled,dt,$.id,Se.layoutVertexBuffer,wt,Et,$.paint,F.transform.zoom,Ce)}}}}function Eo(F,H,$,K,ft,At,N){for(var Q=F.context,it=Q.gl,dt=$.paint.get("fill-extrusion-pattern"),wt=dt.constantOr(1),Et=$.getCrossfadeParameters(),Bt=$.paint.get("fill-extrusion-opacity"),Ut=0,Ht=K;Ut<Ht.length;Ut+=1){var qt=Ht[Ut],Jt=H.getTile(qt),le=Jt.getBucket($);if(le){var fe=le.programConfigurations.get($.id),Le=F.useProgram(wt?"fillExtrusionPattern":"fillExtrusion",fe);wt&&(F.context.activeTexture.set(it.TEXTURE0),Jt.imageAtlasTexture.bind(it.LINEAR,it.CLAMP_TO_EDGE),fe.updatePaintBuffers(Et));var Se=dt.constantOr(null);if(Se&&Jt.imageAtlas){var Ce=Jt.imageAtlas,Ne=Ce.patternPositions[Se.to.toString()],Ee=Ce.patternPositions[Se.from.toString()];Ne&&Ee&&fe.setConstantPatternPositions(Ne,Ee)}var rr=F.translatePosMatrix(qt.posMatrix,Jt,$.paint.get("fill-extrusion-translate"),$.paint.get("fill-extrusion-translate-anchor")),Ye=$.paint.get("fill-extrusion-vertical-gradient"),Ve=wt?co(rr,F,Ye,Bt,qt,Et,Jt):To(rr,F,Ye,Bt);Le.draw(Q,Q.gl.TRIANGLES,ft,At,N,Gt.backCCW,Ve,$.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,$.paint,F.transform.zoom,fe)}}}function po(F,H,$,K,ft,At){var N=F.context,Q=N.gl,it=H.fbo;if(it){var dt=F.useProgram("hillshade");N.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,it.colorAttachment.get());var wt=Wo(F,H,$);dt.draw(N,Q.TRIANGLES,K,ft,At,Gt.disabled,wt,$.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments)}}function Bs(F,H,$,K,ft,At,N){var Q=F.context,it=Q.gl,dt=H.dem;if(dt&&dt.data){var wt=dt.dim,Et=dt.stride,Bt=dt.getPixels();if(Q.activeTexture.set(it.TEXTURE1),Q.pixelStoreUnpackPremultiplyAlpha.set(!1),H.demTexture=H.demTexture||F.getTileTexture(Et),H.demTexture){var Ut=H.demTexture;Ut.update(Bt,{premultiply:!1}),Ut.bind(it.NEAREST,it.CLAMP_TO_EDGE)}else H.demTexture=new r.Texture(Q,Bt,it.RGBA,{premultiply:!1}),H.demTexture.bind(it.NEAREST,it.CLAMP_TO_EDGE);Q.activeTexture.set(it.TEXTURE0);var Ht=H.fbo;if(!Ht){var qt=new r.Texture(Q,{width:wt,height:wt,data:null},it.RGBA);qt.bind(it.LINEAR,it.CLAMP_TO_EDGE),(Ht=H.fbo=Q.createFramebuffer(wt,wt,!0)).colorAttachment.set(qt.texture)}Q.bindFramebuffer.set(Ht.framebuffer),Q.viewport.set([0,0,wt,wt]),F.useProgram("hillshadePrepare").draw(Q,it.TRIANGLES,ft,At,N,Gt.disabled,ls(H.tileID,dt,K),$.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments),H.needsHillshadePrepare=!1}}function Ga(F,H,$,K,ft){var At=K.paint.get("raster-fade-duration");if(At>0){var N=r.browser.now(),Q=(N-F.timeAdded)/At,it=H?(N-H.timeAdded)/At:-1,dt=$.getSource(),wt=ft.coveringZoomLevel({tileSize:dt.tileSize,roundZoom:dt.roundZoom}),Et=!H||Math.abs(H.tileID.overscaledZ-wt)>Math.abs(F.tileID.overscaledZ-wt),Bt=Et&&F.refreshedUponExpiration?1:r.clamp(Et?Q:1-it,0,1);return F.refreshedUponExpiration&&Q>=1&&(F.refreshedUponExpiration=!1),H?{opacity:1,mix:1-Bt}:{opacity:Bt,mix:0}}return{opacity:1,mix:0}}var xl=new r.Color(1,0,0,1),bl=new r.Color(0,1,0,1),js=new r.Color(0,0,1,1),So=new r.Color(1,0,1,1),Us=new r.Color(0,1,1,1);function Zo(F){var H=F.transform.padding;tl(F,F.transform.height-(H.top||0),3,xl),tl(F,H.bottom||0,3,bl),us(F,H.left||0,3,js),us(F,F.transform.width-(H.right||0),3,So);var $=F.transform.centerPoint;(function(K,ft,At,N){var Q=20,it=2;Xo(K,ft-it/2,At-Q/2,it,Q,N),Xo(K,ft-Q/2,At-it/2,Q,it,N)})(F,$.x,F.transform.height-$.y,Us)}function tl(F,H,$,K){Xo(F,0,H+$/2,F.transform.width,$,K)}function us(F,H,$,K){Xo(F,H-$/2,0,$,F.transform.height,K)}function Xo(F,H,$,K,ft,At){var N=F.context,Q=N.gl;Q.enable(Q.SCISSOR_TEST),Q.scissor(H*r.browser.devicePixelRatio,$*r.browser.devicePixelRatio,K*r.browser.devicePixelRatio,ft*r.browser.devicePixelRatio),N.clear({color:At}),Q.disable(Q.SCISSOR_TEST)}function Ts(F,H,$){var K=F.context,ft=K.gl,At=$.posMatrix,N=F.useProgram("debug"),Q=Ie.disabled,it=Vt.disabled,dt=F.colorModeForRenderPass(),wt="$debug";K.activeTexture.set(ft.TEXTURE0),F.emptyTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),N.draw(K,ft.LINE_STRIP,Q,it,dt,Gt.disabled,Ks(At,r.Color.red),wt,F.debugBuffer,F.tileBorderIndexBuffer,F.debugSegments);var Et=H.getTileByID($.key).latestRawTileData,Bt=Et&&Et.byteLength||0,Ut=Math.floor(Bt/1024),Ht=H.getTile($).tileSize,qt=512/Math.min(Ht,512)*($.overscaledZ/F.transform.zoom)*.5,Jt=$.canonical.toString();$.overscaledZ!==$.canonical.z&&(Jt+=" => "+$.overscaledZ),function(le,fe){le.initDebugOverlayCanvas();var Le=le.debugOverlayCanvas,Se=le.context.gl,Ce=le.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,Le.width,Le.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(fe,5,5),Ce.strokeText(fe,5,5),le.debugOverlayTexture.update(Le),le.debugOverlayTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}(F,Jt+" "+Ut+"kb"),N.draw(K,ft.TRIANGLES,Q,it,Zt.alphaBlended,Gt.disabled,Ks(At,r.Color.transparent,qt),wt,F.debugBuffer,F.quadTriangleIndexBuffer,F.debugSegments)}var hs={symbol:function(F,H,$,K,ft){if(F.renderPass==="translucent"){var At=Vt.disabled,N=F.colorModeForRenderPass();$.layout.get("text-variable-anchor")&&function(Q,it,dt,wt,Et,Bt,Ut){for(var Ht=it.transform,qt=Et==="map",Jt=Bt==="map",le=0,fe=Q;le<fe.length;le+=1){var Le=fe[le],Se=wt.getTile(Le),Ce=Se.getBucket(dt);if(Ce&&Ce.text&&Ce.text.segments.get().length){var Ne=Ce.textSizeData,Ee=r.evaluateSizeForZoom(Ne,Ht.zoom),rr=qr(Se,1,it.transform.zoom),Ye=xr(Le.posMatrix,Jt,qt,it.transform,rr),Ve=dt.layout.get("icon-text-fit")!=="none"&&Ce.hasIconData();if(Ee){var dr=Math.pow(2,Ht.zoom-Se.tileID.overscaledZ);ws(Ce,qt,Jt,Ut,r.symbolSize,Ht,Ye,Le.posMatrix,dr,Ee,Ve)}}}}(K,F,$,H,$.layout.get("text-rotation-alignment"),$.layout.get("text-pitch-alignment"),ft),$.paint.get("icon-opacity").constantOr(1)!==0&&ks(F,H,$,K,!1,$.paint.get("icon-translate"),$.paint.get("icon-translate-anchor"),$.layout.get("icon-rotation-alignment"),$.layout.get("icon-pitch-alignment"),$.layout.get("icon-keep-upright"),At,N),$.paint.get("text-opacity").constantOr(1)!==0&&ks(F,H,$,K,!0,$.paint.get("text-translate"),$.paint.get("text-translate-anchor"),$.layout.get("text-rotation-alignment"),$.layout.get("text-pitch-alignment"),$.layout.get("text-keep-upright"),At,N),H.map.showCollisionBoxes&&(Ns(F,H,$,K,$.paint.get("text-translate"),$.paint.get("text-translate-anchor"),!0),Ns(F,H,$,K,$.paint.get("icon-translate"),$.paint.get("icon-translate-anchor"),!1))}},circle:function(F,H,$,K){if(F.renderPass==="translucent"){var ft=$.paint.get("circle-opacity"),At=$.paint.get("circle-stroke-width"),N=$.paint.get("circle-stroke-opacity"),Q=$.layout.get("circle-sort-key").constantOr(1)!==void 0;if(ft.constantOr(1)!==0||At.constantOr(1)!==0&&N.constantOr(1)!==0){for(var it=F.context,dt=it.gl,wt=F.depthModeForSublayer(0,Ie.ReadOnly),Et=Vt.disabled,Bt=F.colorModeForRenderPass(),Ut=[],Ht=0;Ht<K.length;Ht++){var qt=K[Ht],Jt=H.getTile(qt),le=Jt.getBucket($);if(le){var fe=le.programConfigurations.get($.id),Le={programConfiguration:fe,program:F.useProgram("circle",fe),layoutVertexBuffer:le.layoutVertexBuffer,indexBuffer:le.indexBuffer,uniformValues:fl(F,qt,Jt,$)};if(Q)for(var Se=0,Ce=le.segments.get();Se<Ce.length;Se+=1){var Ne=Ce[Se];Ut.push({segments:new r.SegmentVector([Ne]),sortKey:Ne.sortKey,state:Le})}else Ut.push({segments:le.segments,sortKey:0,state:Le})}}Q&&Ut.sort(function(cn,ln){return cn.sortKey-ln.sortKey});for(var Ee=0,rr=Ut;Ee<rr.length;Ee+=1){var Ye=rr[Ee],Ve=Ye.state,dr=Ve.programConfiguration,vr=Ve.program,Fr=Ve.layoutVertexBuffer,zr=Ve.indexBuffer,$r=Ve.uniformValues,Zr=Ye.segments;vr.draw(it,dt.TRIANGLES,wt,Et,Bt,Gt.disabled,$r,$.id,Fr,zr,Zr,$.paint,F.transform.zoom,dr)}}}},heatmap:function(F,H,$,K){if($.paint.get("heatmap-opacity")!==0)if(F.renderPass==="offscreen"){var ft=F.context,At=ft.gl,N=Vt.disabled,Q=new Zt([At.ONE,At.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(qt,Jt,le){var fe=qt.gl;qt.activeTexture.set(fe.TEXTURE1),qt.viewport.set([0,0,Jt.width/4,Jt.height/4]);var Le=le.heatmapFbo;if(Le)fe.bindTexture(fe.TEXTURE_2D,Le.colorAttachment.get()),qt.bindFramebuffer.set(Le.framebuffer);else{var Se=fe.createTexture();fe.bindTexture(fe.TEXTURE_2D,Se),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_S,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_T,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MIN_FILTER,fe.LINEAR),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MAG_FILTER,fe.LINEAR),Le=le.heatmapFbo=qt.createFramebuffer(Jt.width/4,Jt.height/4,!1),function(Ce,Ne,Ee,rr){var Ye=Ce.gl,Ve=Ce.extRenderToTextureHalfFloat?Ce.extTextureHalfFloat.HALF_FLOAT_OES:Ye.UNSIGNED_BYTE;Ye.texImage2D(Ye.TEXTURE_2D,0,Ye.RGBA,Ne.width/4,Ne.height/4,0,Ye.RGBA,Ve,null),rr.colorAttachment.set(Ee)}(qt,Jt,Se,Le)}})(ft,F,$),ft.clear({color:r.Color.transparent});for(var it=0;it<K.length;it++){var dt=K[it];if(!H.hasRenderableParent(dt)){var wt=H.getTile(dt),Et=wt.getBucket($);if(Et){var Bt=Et.programConfigurations.get($.id),Ut=F.useProgram("heatmap",Bt),Ht=F.transform.zoom;Ut.draw(ft,At.TRIANGLES,Ie.disabled,N,Q,Gt.disabled,ss(dt.posMatrix,wt,Ht,$.paint.get("heatmap-intensity")),$.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,$.paint,F.transform.zoom,Bt)}}}ft.viewport.set([0,0,F.width,F.height])}else F.renderPass==="translucent"&&(F.context.setColorMode(F.colorModeForRenderPass()),function(qt,Jt){var le=qt.context,fe=le.gl,Le=Jt.heatmapFbo;if(Le){le.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,Le.colorAttachment.get()),le.activeTexture.set(fe.TEXTURE1);var Se=Jt.colorRampTexture;Se||(Se=Jt.colorRampTexture=new r.Texture(le,Jt.colorRamp,fe.RGBA)),Se.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),qt.useProgram("heatmapTexture").draw(le,fe.TRIANGLES,Ie.disabled,Vt.disabled,qt.colorModeForRenderPass(),Gt.disabled,Ao(qt,Jt,0,1),Jt.id,qt.viewportBuffer,qt.quadTriangleIndexBuffer,qt.viewportSegments,Jt.paint,qt.transform.zoom)}}(F,$))},line:function(F,H,$,K){if(F.renderPass==="translucent"){var ft=$.paint.get("line-opacity"),At=$.paint.get("line-width");if(ft.constantOr(1)!==0&&At.constantOr(1)!==0){var N=F.depthModeForSublayer(0,Ie.ReadOnly),Q=F.colorModeForRenderPass(),it=$.paint.get("line-dasharray"),dt=$.paint.get("line-pattern"),wt=dt.constantOr(1),Et=$.paint.get("line-gradient"),Bt=$.getCrossfadeParameters(),Ut=wt?"linePattern":it?"lineSDF":Et?"lineGradient":"line",Ht=F.context,qt=Ht.gl,Jt=!0;if(Et){Ht.activeTexture.set(qt.TEXTURE0);var le=$.gradientTexture;if(!$.gradient)return;le||(le=$.gradientTexture=new r.Texture(Ht,$.gradient,qt.RGBA)),le.bind(qt.LINEAR,qt.CLAMP_TO_EDGE)}for(var fe=0,Le=K;fe<Le.length;fe+=1){var Se=Le[fe],Ce=H.getTile(Se);if(!wt||Ce.patternsLoaded()){var Ne=Ce.getBucket($);if(Ne){var Ee=Ne.programConfigurations.get($.id),rr=F.context.program.get(),Ye=F.useProgram(Ut,Ee),Ve=Jt||Ye.program!==rr,dr=dt.constantOr(null);if(dr&&Ce.imageAtlas){var vr=Ce.imageAtlas,Fr=vr.patternPositions[dr.to.toString()],zr=vr.patternPositions[dr.from.toString()];Fr&&zr&&Ee.setConstantPatternPositions(Fr,zr)}var $r=wt?Qs(F,Ce,$,Bt):it?Ia(F,Ce,$,it,Bt):Et?Js(F,Ce,$):zs(F,Ce,$);wt?(Ht.activeTexture.set(qt.TEXTURE0),Ce.imageAtlasTexture.bind(qt.LINEAR,qt.CLAMP_TO_EDGE),Ee.updatePaintBuffers(Bt)):it&&(Ve||F.lineAtlas.dirty)&&(Ht.activeTexture.set(qt.TEXTURE0),F.lineAtlas.bind(Ht)),Ye.draw(Ht,qt.TRIANGLES,N,F.stencilModeForClipping(Se),Q,Gt.disabled,$r,$.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,$.paint,F.transform.zoom,Ee),Jt=!1}}}}}},fill:function(F,H,$,K){var ft=$.paint.get("fill-color"),At=$.paint.get("fill-opacity");if(At.constantOr(1)!==0){var N=F.colorModeForRenderPass(),Q=$.paint.get("fill-pattern"),it=F.opaquePassEnabledForLayer()&&!Q.constantOr(1)&&ft.constantOr(r.Color.transparent).a===1&&At.constantOr(0)===1?"opaque":"translucent";if(F.renderPass===it){var dt=F.depthModeForSublayer(1,F.renderPass==="opaque"?Ie.ReadWrite:Ie.ReadOnly);fo(F,H,$,K,dt,N,!1)}if(F.renderPass==="translucent"&&$.paint.get("fill-antialias")){var wt=F.depthModeForSublayer($.getPaintProperty("fill-outline-color")?2:0,Ie.ReadOnly);fo(F,H,$,K,wt,N,!0)}}},"fill-extrusion":function(F,H,$,K){var ft=$.paint.get("fill-extrusion-opacity");if(ft!==0&&F.renderPass==="translucent"){var At=new Ie(F.context.gl.LEQUAL,Ie.ReadWrite,F.depthRangeFor3D);if(ft!==1||$.paint.get("fill-extrusion-pattern").constantOr(1))Eo(F,H,$,K,At,Vt.disabled,Zt.disabled),Eo(F,H,$,K,At,F.stencilModeFor3D(),F.colorModeForRenderPass());else{var N=F.colorModeForRenderPass();Eo(F,H,$,K,At,Vt.disabled,N)}}},hillshade:function(F,H,$,K){if(F.renderPass==="offscreen"||F.renderPass==="translucent"){for(var ft=F.context,At=H.getSource().maxzoom,N=F.depthModeForSublayer(0,Ie.ReadOnly),Q=F.colorModeForRenderPass(),it=F.renderPass==="translucent"?F.stencilConfigForOverlap(K):[{},K],dt=it[0],wt=0,Et=it[1];wt<Et.length;wt+=1){var Bt=Et[wt],Ut=H.getTile(Bt);Ut.needsHillshadePrepare&&F.renderPass==="offscreen"?Bs(F,Ut,$,At,N,Vt.disabled,Q):F.renderPass==="translucent"&&po(F,Ut,$,N,dt[Bt.overscaledZ],Q)}ft.viewport.set([0,0,F.width,F.height])}},raster:function(F,H,$,K){if(F.renderPass==="translucent"&&$.paint.get("raster-opacity")!==0&&K.length)for(var ft=F.context,At=ft.gl,N=H.getSource(),Q=F.useProgram("raster"),it=F.colorModeForRenderPass(),dt=N instanceof z?[{},K]:F.stencilConfigForOverlap(K),wt=dt[0],Et=dt[1],Bt=Et[Et.length-1].overscaledZ,Ut=!F.options.moving,Ht=0,qt=Et;Ht<qt.length;Ht+=1){var Jt=qt[Ht],le=F.depthModeForSublayer(Jt.overscaledZ-Bt,$.paint.get("raster-opacity")===1?Ie.ReadWrite:Ie.ReadOnly,At.LESS),fe=H.getTile(Jt),Le=F.transform.calculatePosMatrix(Jt.toUnwrapped(),Ut);fe.registerFadeDuration($.paint.get("raster-fade-duration"));var Se=H.findLoadedParent(Jt,0),Ce=Ga(fe,Se,H,$,F.transform),Ne=void 0,Ee=void 0,rr=$.paint.get("raster-resampling")==="nearest"?At.NEAREST:At.LINEAR;ft.activeTexture.set(At.TEXTURE0),fe.texture.bind(rr,At.CLAMP_TO_EDGE,At.LINEAR_MIPMAP_NEAREST),ft.activeTexture.set(At.TEXTURE1),Se?(Se.texture.bind(rr,At.CLAMP_TO_EDGE,At.LINEAR_MIPMAP_NEAREST),Ne=Math.pow(2,Se.tileID.overscaledZ-fe.tileID.overscaledZ),Ee=[fe.tileID.canonical.x*Ne%1,fe.tileID.canonical.y*Ne%1]):fe.texture.bind(rr,At.CLAMP_TO_EDGE,At.LINEAR_MIPMAP_NEAREST);var Ye=ho(Le,Ee||[0,0],Ne||1,Ce,$);N instanceof z?Q.draw(ft,At.TRIANGLES,le,Vt.disabled,it,Gt.disabled,Ye,$.id,N.boundsBuffer,F.quadTriangleIndexBuffer,N.boundsSegments):Q.draw(ft,At.TRIANGLES,le,wt[Jt.overscaledZ],it,Gt.disabled,Ye,$.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments)}},background:function(F,H,$){var K=$.paint.get("background-color"),ft=$.paint.get("background-opacity");if(ft!==0){var At=F.context,N=At.gl,Q=F.transform,it=Q.tileSize,dt=$.paint.get("background-pattern");if(!F.isPatternMissing(dt)){var wt=!dt&&K.a===1&&ft===1&&F.opaquePassEnabledForLayer()?"opaque":"translucent";if(F.renderPass===wt){var Et=Vt.disabled,Bt=F.depthModeForSublayer(0,wt==="opaque"?Ie.ReadWrite:Ie.ReadOnly),Ut=F.colorModeForRenderPass(),Ht=F.useProgram(dt?"backgroundPattern":"background"),qt=Q.coveringTiles({tileSize:it});dt&&(At.activeTexture.set(N.TEXTURE0),F.imageManager.bind(F.context));for(var Jt=$.getCrossfadeParameters(),le=0,fe=qt;le<fe.length;le+=1){var Le=fe[le],Se=F.transform.calculatePosMatrix(Le.toUnwrapped()),Ce=dt?Yo(Se,ft,F,dt,{tileID:Le,tileSize:it},Jt):Oa(Se,ft,K);Ht.draw(At,N.TRIANGLES,Bt,Et,Ut,Gt.disabled,Ce,$.id,F.tileExtentBuffer,F.quadTriangleIndexBuffer,F.tileExtentSegments)}}}}},debug:function(F,H,$){for(var K=0;K<$.length;K++)Ts(F,H,$[K])},custom:function(F,H,$){var K=F.context,ft=$.implementation;if(F.renderPass==="offscreen"){var At=ft.prerender;At&&(F.setCustomLayerDefaults(),K.setColorMode(F.colorModeForRenderPass()),At.call(ft,K.gl,F.transform.customLayerMatrix()),K.setDirty(),F.setBaseState())}else if(F.renderPass==="translucent"){F.setCustomLayerDefaults(),K.setColorMode(F.colorModeForRenderPass()),K.setStencilMode(Vt.disabled);var N=ft.renderingMode==="3d"?new Ie(F.context.gl.LEQUAL,Ie.ReadWrite,F.depthRangeFor3D):F.depthModeForSublayer(0,Ie.ReadOnly);K.setDepthMode(N),ft.render(K.gl,F.transform.customLayerMatrix()),K.setDirty(),F.setBaseState(),K.bindFramebuffer.set(null)}}},ii=function(F,H){this.context=new Yt(F),this.transform=H,this._tileTextures={},this.setup(),this.numSublayers=ne.maxUnderzooming+ne.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Gr,this.gpuTimers={}};ii.prototype.resize=function(F,H){if(this.width=F*r.browser.devicePixelRatio,this.height=H*r.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var $=0,K=this.style._order;$<K.length;$+=1){var ft=K[$];this.style._layers[ft].resize()}},ii.prototype.setup=function(){var F=this.context,H=new r.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(r.EXTENT,0),H.emplaceBack(0,r.EXTENT),H.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=F.createVertexBuffer(H,nn.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);var $=new r.StructArrayLayout2i4;$.emplaceBack(0,0),$.emplaceBack(r.EXTENT,0),$.emplaceBack(0,r.EXTENT),$.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=F.createVertexBuffer($,nn.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);var K=new r.StructArrayLayout4i8;K.emplaceBack(0,0,0,0),K.emplaceBack(r.EXTENT,0,r.EXTENT,0),K.emplaceBack(0,r.EXTENT,0,r.EXTENT),K.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=F.createVertexBuffer(K,B.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);var ft=new r.StructArrayLayout2i4;ft.emplaceBack(0,0),ft.emplaceBack(1,0),ft.emplaceBack(0,1),ft.emplaceBack(1,1),this.viewportBuffer=F.createVertexBuffer(ft,nn.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);var At=new r.StructArrayLayout1ui2;At.emplaceBack(0),At.emplaceBack(1),At.emplaceBack(3),At.emplaceBack(2),At.emplaceBack(0),this.tileBorderIndexBuffer=F.createIndexBuffer(At);var N=new r.StructArrayLayout3ui6;N.emplaceBack(0,1,2),N.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=F.createIndexBuffer(N),this.emptyTexture=new r.Texture(F,{width:1,height:1,data:new Uint8Array([0,0,0,0])},F.gl.RGBA);var Q=this.context.gl;this.stencilClearMode=new Vt({func:Q.ALWAYS,mask:0},0,255,Q.ZERO,Q.ZERO,Q.ZERO)},ii.prototype.clearStencil=function(){var F=this.context,H=F.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var $=r.create();r.ortho($,0,this.width,this.height,0,0,1),r.scale($,$,[H.drawingBufferWidth,H.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(F,H.TRIANGLES,Ie.disabled,this.stencilClearMode,Zt.disabled,Gt.disabled,dl($),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ii.prototype._renderTileClippingMasks=function(F,H){if(this.currentStencilSource!==F.source&&F.isTileClipped()&&H&&H.length){this.currentStencilSource=F.source;var $=this.context,K=$.gl;this.nextStencilID+H.length>256&&this.clearStencil(),$.setColorMode(Zt.disabled),$.setDepthMode(Ie.disabled);var ft=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var At=0,N=H;At<N.length;At+=1){var Q=N[At],it=this._tileClippingMaskIDs[Q.key]=this.nextStencilID++;ft.draw($,K.TRIANGLES,Ie.disabled,new Vt({func:K.ALWAYS,mask:0},it,255,K.KEEP,K.KEEP,K.REPLACE),Zt.disabled,Gt.disabled,dl(Q.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ii.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var F=this.nextStencilID++,H=this.context.gl;return new Vt({func:H.NOTEQUAL,mask:255},F,255,H.KEEP,H.KEEP,H.REPLACE)},ii.prototype.stencilModeForClipping=function(F){var H=this.context.gl;return new Vt({func:H.EQUAL,mask:255},this._tileClippingMaskIDs[F.key],0,H.KEEP,H.KEEP,H.REPLACE)},ii.prototype.stencilConfigForOverlap=function(F){var H,$=this.context.gl,K=F.sort(function(it,dt){return dt.overscaledZ-it.overscaledZ}),ft=K[K.length-1].overscaledZ,At=K[0].overscaledZ-ft+1;if(At>1){this.currentStencilSource=void 0,this.nextStencilID+At>256&&this.clearStencil();for(var N={},Q=0;Q<At;Q++)N[Q+ft]=new Vt({func:$.GEQUAL,mask:255},Q+this.nextStencilID,255,$.KEEP,$.KEEP,$.REPLACE);return this.nextStencilID+=At,[N,K]}return[(H={},H[ft]=Vt.disabled,H),K]},ii.prototype.colorModeForRenderPass=function(){var F=this.context.gl;if(this._showOverdrawInspector){var H=.125;return new Zt([F.CONSTANT_COLOR,F.ONE],new r.Color(H,H,H,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Zt.unblended:Zt.alphaBlended},ii.prototype.depthModeForSublayer=function(F,H,$){if(!this.opaquePassEnabledForLayer())return Ie.disabled;var K=1-((1+this.currentLayer)*this.numSublayers+F)*this.depthEpsilon;return new Ie($||this.context.gl.LEQUAL,H,[K,K])},ii.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ii.prototype.render=function(F,H){var $=this;this.style=F,this.options=H,this.lineAtlas=F.lineAtlas,this.imageManager=F.imageManager,this.glyphManager=F.glyphManager,this.symbolFadeChange=F.placement.symbolFadeChange(r.browser.now()),this.imageManager.beginFrame();var K=this.style._order,ft=this.style.sourceCaches;for(var At in ft){var N=ft[At];N.used&&N.prepare(this.context)}var Q,it,dt={},wt={},Et={};for(var Bt in ft){var Ut=ft[Bt];dt[Bt]=Ut.getVisibleCoordinates(),wt[Bt]=dt[Bt].slice().reverse(),Et[Bt]=Ut.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Ht=0;Ht<K.length;Ht++){var qt=K[Ht];if(this.style._layers[qt].is3D()){this.opaquePassCutoff=Ht;break}}this.renderPass="offscreen";for(var Jt=0,le=K;Jt<le.length;Jt+=1){var fe=le[Jt],Le=this.style._layers[fe];if(Le.hasOffscreenPass()&&!Le.isHidden(this.transform.zoom)){var Se=wt[Le.source];(Le.type==="custom"||Se.length)&&this.renderLayer(this,ft[Le.source],Le,Se)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:H.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=H.showOverdrawInspector,this.depthRangeFor3D=[0,1-(F._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=K.length-1;this.currentLayer>=0;this.currentLayer--){var Ce=this.style._layers[K[this.currentLayer]],Ne=ft[Ce.source],Ee=dt[Ce.source];this._renderTileClippingMasks(Ce,Ee),this.renderLayer(this,Ne,Ce,Ee)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<K.length;this.currentLayer++){var rr=this.style._layers[K[this.currentLayer]],Ye=ft[rr.source],Ve=(rr.type==="symbol"?Et:wt)[rr.source];this._renderTileClippingMasks(rr,dt[rr.source]),this.renderLayer(this,Ye,rr,Ve)}this.options.showTileBoundaries&&(r.values(this.style._layers).forEach(function(dr){dr.source&&!dr.isHidden($.transform.zoom)&&(dr.source!==(it&&it.id)&&(it=$.style.sourceCaches[dr.source]),(!Q||Q.getSource().maxzoom<it.getSource().maxzoom)&&(Q=it))}),Q&&hs.debug(this,Q,Q.getVisibleCoordinates())),this.options.showPadding&&Zo(this),this.context.setDefault()},ii.prototype.renderLayer=function(F,H,$,K){$.isHidden(this.transform.zoom)||($.type==="background"||$.type==="custom"||K.length)&&(this.id=$.id,this.gpuTimingStart($),hs[$.type](F,H,$,K,this.style.placement.variableOffsets),this.gpuTimingEnd())},ii.prototype.gpuTimingStart=function(F){if(this.options.gpuTiming){var H=this.context.extTimerQuery,$=this.gpuTimers[F.id];$||($=this.gpuTimers[F.id]={calls:0,cpuTime:0,query:H.createQueryEXT()}),$.calls++,H.beginQueryEXT(H.TIME_ELAPSED_EXT,$.query)}},ii.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var F=this.context.extTimerQuery;F.endQueryEXT(F.TIME_ELAPSED_EXT)}},ii.prototype.collectGpuTimers=function(){var F=this.gpuTimers;return this.gpuTimers={},F},ii.prototype.queryGpuTimers=function(F){var H={};for(var $ in F){var K=F[$],ft=this.context.extTimerQuery,At=ft.getQueryObjectEXT(K.query,ft.QUERY_RESULT_EXT)/1e6;ft.deleteQueryEXT(K.query),H[$]=At}return H},ii.prototype.translatePosMatrix=function(F,H,$,K,ft){if(!$[0]&&!$[1])return F;var At=ft?K==="map"?this.transform.angle:0:K==="viewport"?-this.transform.angle:0;if(At){var N=Math.sin(At),Q=Math.cos(At);$=[$[0]*Q-$[1]*N,$[0]*N+$[1]*Q]}var it=[ft?$[0]:qr(H,$[0],this.transform.zoom),ft?$[1]:qr(H,$[1],this.transform.zoom),0],dt=new Float32Array(16);return r.translate(dt,F,it),dt},ii.prototype.saveTileTexture=function(F){var H=this._tileTextures[F.size[0]];H?H.push(F):this._tileTextures[F.size[0]]=[F]},ii.prototype.getTileTexture=function(F){var H=this._tileTextures[F];return H&&H.length>0?H.pop():null},ii.prototype.isPatternMissing=function(F){if(!F)return!1;if(!F.from||!F.to)return!0;var H=this.imageManager.getPattern(F.from.toString()),$=this.imageManager.getPattern(F.to.toString());return!H||!$},ii.prototype.useProgram=function(F,H){this.cache=this.cache||{};var $=""+F+(H?H.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[$]||(this.cache[$]=new lo(this.context,Qa[F],H,Al[F],this._showOverdrawInspector)),this.cache[$]},ii.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ii.prototype.setBaseState=function(){var F=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(F.FUNC_ADD)},ii.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var F=this.context.gl;this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,F.RGBA)}},ii.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Io=function(F,H){this.points=F,this.planes=H};Io.fromInvProjectionMatrix=function(F,H,$){var K=Math.pow(2,$),ft=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(N){return r.transformMat4([],N,F)}).map(function(N){return r.scale$1([],N,1/N[3]/H*K)}),At=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(N){var Q=r.sub([],ft[N[0]],ft[N[1]]),it=r.sub([],ft[N[2]],ft[N[1]]),dt=r.normalize([],r.cross([],Q,it)),wt=-r.dot(dt,ft[N[1]]);return dt.concat(wt)});return new Io(ft,At)};var go=function(F,H){this.min=F,this.max=H,this.center=r.scale$2([],r.add([],this.min,this.max),.5)};go.prototype.quadrant=function(F){for(var H=[F%2==0,F<2],$=r.clone$2(this.min),K=r.clone$2(this.max),ft=0;ft<H.length;ft++)$[ft]=H[ft]?this.min[ft]:this.center[ft],K[ft]=H[ft]?this.center[ft]:this.max[ft];return K[2]=this.max[2],new go($,K)},go.prototype.distanceX=function(F){return Math.max(Math.min(this.max[0],F[0]),this.min[0])-F[0]},go.prototype.distanceY=function(F){return Math.max(Math.min(this.max[1],F[1]),this.min[1])-F[1]},go.prototype.intersects=function(F){for(var H=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],$=!0,K=0;K<F.planes.length;K++){for(var ft=F.planes[K],At=0,N=0;N<H.length;N++)At+=r.dot$1(ft,H[N])>=0;if(At===0)return 0;At!==H.length&&($=!1)}if($)return 2;for(var Q=0;Q<3;Q++){for(var it=Number.MAX_VALUE,dt=-Number.MAX_VALUE,wt=0;wt<F.points.length;wt++){var Et=F.points[wt][Q]-this.min[Q];it=Math.min(it,Et),dt=Math.max(dt,Et)}if(dt<0||it>this.max[Q]-this.min[Q])return 0}return 1};var Vi=function(F,H,$,K){if(F===void 0&&(F=0),H===void 0&&(H=0),$===void 0&&($=0),K===void 0&&(K=0),isNaN(F)||F<0||isNaN(H)||H<0||isNaN($)||$<0||isNaN(K)||K<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=F,this.bottom=H,this.left=$,this.right=K};Vi.prototype.interpolate=function(F,H,$){return H.top!=null&&F.top!=null&&(this.top=r.number(F.top,H.top,$)),H.bottom!=null&&F.bottom!=null&&(this.bottom=r.number(F.bottom,H.bottom,$)),H.left!=null&&F.left!=null&&(this.left=r.number(F.left,H.left,$)),H.right!=null&&F.right!=null&&(this.right=r.number(F.right,H.right,$)),this},Vi.prototype.getCenter=function(F,H){var $=r.clamp((this.left+F-this.right)/2,0,F),K=r.clamp((this.top+H-this.bottom)/2,0,H);return new r.Point($,K)},Vi.prototype.equals=function(F){return this.top===F.top&&this.bottom===F.bottom&&this.left===F.left&&this.right===F.right},Vi.prototype.clone=function(){return new Vi(this.top,this.bottom,this.left,this.right)},Vi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Hn=function(F,H,$,K,ft){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=ft===void 0||ft,this._minZoom=F||0,this._maxZoom=H||22,this._minPitch=$??0,this._maxPitch=K??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Vi,this._posMatrixCache={},this._alignedPosMatrixCache={}},Yn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Hn.prototype.clone=function(){var F=new Hn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return F.tileSize=this.tileSize,F.latRange=this.latRange,F.width=this.width,F.height=this.height,F._center=this._center,F.zoom=this.zoom,F.angle=this.angle,F._fov=this._fov,F._pitch=this._pitch,F._unmodified=this._unmodified,F._edgeInsets=this._edgeInsets.clone(),F._calcMatrices(),F},Yn.minZoom.get=function(){return this._minZoom},Yn.minZoom.set=function(F){this._minZoom!==F&&(this._minZoom=F,this.zoom=Math.max(this.zoom,F))},Yn.maxZoom.get=function(){return this._maxZoom},Yn.maxZoom.set=function(F){this._maxZoom!==F&&(this._maxZoom=F,this.zoom=Math.min(this.zoom,F))},Yn.minPitch.get=function(){return this._minPitch},Yn.minPitch.set=function(F){this._minPitch!==F&&(this._minPitch=F,this.pitch=Math.max(this.pitch,F))},Yn.maxPitch.get=function(){return this._maxPitch},Yn.maxPitch.set=function(F){this._maxPitch!==F&&(this._maxPitch=F,this.pitch=Math.min(this.pitch,F))},Yn.renderWorldCopies.get=function(){return this._renderWorldCopies},Yn.renderWorldCopies.set=function(F){F===void 0?F=!0:F===null&&(F=!1),this._renderWorldCopies=F},Yn.worldSize.get=function(){return this.tileSize*this.scale},Yn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Yn.size.get=function(){return new r.Point(this.width,this.height)},Yn.bearing.get=function(){return-this.angle/Math.PI*180},Yn.bearing.set=function(F){var H=-r.wrap(F,-180,180)*Math.PI/180;this.angle!==H&&(this._unmodified=!1,this.angle=H,this._calcMatrices(),this.rotationMatrix=r.create$2(),r.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Yn.pitch.get=function(){return this._pitch/Math.PI*180},Yn.pitch.set=function(F){var H=r.clamp(F,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==H&&(this._unmodified=!1,this._pitch=H,this._calcMatrices())},Yn.fov.get=function(){return this._fov/Math.PI*180},Yn.fov.set=function(F){F=Math.max(.01,Math.min(60,F)),this._fov!==F&&(this._unmodified=!1,this._fov=F/180*Math.PI,this._calcMatrices())},Yn.zoom.get=function(){return this._zoom},Yn.zoom.set=function(F){var H=Math.min(Math.max(F,this.minZoom),this.maxZoom);this._zoom!==H&&(this._unmodified=!1,this._zoom=H,this.scale=this.zoomScale(H),this.tileZoom=Math.floor(H),this.zoomFraction=H-this.tileZoom,this._constrain(),this._calcMatrices())},Yn.center.get=function(){return this._center},Yn.center.set=function(F){F.lat===this._center.lat&&F.lng===this._center.lng||(this._unmodified=!1,this._center=F,this._constrain(),this._calcMatrices())},Yn.padding.get=function(){return this._edgeInsets.toJSON()},Yn.padding.set=function(F){this._edgeInsets.equals(F)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,F,1),this._calcMatrices())},Yn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Hn.prototype.isPaddingEqual=function(F){return this._edgeInsets.equals(F)},Hn.prototype.interpolatePadding=function(F,H,$){this._unmodified=!1,this._edgeInsets.interpolate(F,H,$),this._constrain(),this._calcMatrices()},Hn.prototype.coveringZoomLevel=function(F){var H=(F.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/F.tileSize));return Math.max(0,H)},Hn.prototype.getVisibleUnwrappedCoordinates=function(F){var H=[new r.UnwrappedTileID(0,F)];if(this._renderWorldCopies)for(var $=this.pointCoordinate(new r.Point(0,0)),K=this.pointCoordinate(new r.Point(this.width,0)),ft=this.pointCoordinate(new r.Point(this.width,this.height)),At=this.pointCoordinate(new r.Point(0,this.height)),N=Math.floor(Math.min($.x,K.x,ft.x,At.x)),Q=Math.floor(Math.max($.x,K.x,ft.x,At.x)),it=N-1;it<=Q+1;it++)it!==0&&H.push(new r.UnwrappedTileID(it,F));return H},Hn.prototype.coveringTiles=function(F){var H=this.coveringZoomLevel(F),$=H;if(F.minzoom!==void 0&&H<F.minzoom)return[];F.maxzoom!==void 0&&H>F.maxzoom&&(H=F.maxzoom);var K=r.MercatorCoordinate.fromLngLat(this.center),ft=Math.pow(2,H),At=[ft*K.x,ft*K.y,0],N=Io.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,H),Q=F.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Q=H);var it=function(Ve){return{aabb:new go([Ve*ft,0,0],[(Ve+1)*ft,ft,0]),zoom:0,x:0,y:0,wrap:Ve,fullyVisible:!1}},dt=[],wt=[],Et=H,Bt=F.reparseOverscaled?$:H;if(this._renderWorldCopies)for(var Ut=1;Ut<=3;Ut++)dt.push(it(-Ut)),dt.push(it(Ut));for(dt.push(it(0));dt.length>0;){var Ht=dt.pop(),qt=Ht.x,Jt=Ht.y,le=Ht.fullyVisible;if(!le){var fe=Ht.aabb.intersects(N);if(fe===0)continue;le=fe===2}var Le=Ht.aabb.distanceX(At),Se=Ht.aabb.distanceY(At),Ce=Math.max(Math.abs(Le),Math.abs(Se)),Ne=3+(1<<Et-Ht.zoom)-2;if(Ht.zoom===Et||Ce>Ne&&Ht.zoom>=Q)wt.push({tileID:new r.OverscaledTileID(Ht.zoom===Et?Bt:Ht.zoom,Ht.wrap,Ht.zoom,qt,Jt),distanceSq:r.sqrLen([At[0]-.5-qt,At[1]-.5-Jt])});else for(var Ee=0;Ee<4;Ee++){var rr=(qt<<1)+Ee%2,Ye=(Jt<<1)+(Ee>>1);dt.push({aabb:Ht.aabb.quadrant(Ee),zoom:Ht.zoom+1,x:rr,y:Ye,wrap:Ht.wrap,fullyVisible:le})}}return wt.sort(function(Ve,dr){return Ve.distanceSq-dr.distanceSq}).map(function(Ve){return Ve.tileID})},Hn.prototype.resize=function(F,H){this.width=F,this.height=H,this.pixelsToGLUnits=[2/F,-2/H],this._constrain(),this._calcMatrices()},Yn.unmodified.get=function(){return this._unmodified},Hn.prototype.zoomScale=function(F){return Math.pow(2,F)},Hn.prototype.scaleZoom=function(F){return Math.log(F)/Math.LN2},Hn.prototype.project=function(F){var H=r.clamp(F.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.Point(r.mercatorXfromLng(F.lng)*this.worldSize,r.mercatorYfromLat(H)*this.worldSize)},Hn.prototype.unproject=function(F){return new r.MercatorCoordinate(F.x/this.worldSize,F.y/this.worldSize).toLngLat()},Yn.point.get=function(){return this.project(this.center)},Hn.prototype.setLocationAtPoint=function(F,H){var $=this.pointCoordinate(H),K=this.pointCoordinate(this.centerPoint),ft=this.locationCoordinate(F),At=new r.MercatorCoordinate(ft.x-($.x-K.x),ft.y-($.y-K.y));this.center=this.coordinateLocation(At),this._renderWorldCopies&&(this.center=this.center.wrap())},Hn.prototype.locationPoint=function(F){return this.coordinatePoint(this.locationCoordinate(F))},Hn.prototype.pointLocation=function(F){return this.coordinateLocation(this.pointCoordinate(F))},Hn.prototype.locationCoordinate=function(F){return r.MercatorCoordinate.fromLngLat(F)},Hn.prototype.coordinateLocation=function(F){return F.toLngLat()},Hn.prototype.pointCoordinate=function(F){var H=[F.x,F.y,0,1],$=[F.x,F.y,1,1];r.transformMat4(H,H,this.pixelMatrixInverse),r.transformMat4($,$,this.pixelMatrixInverse);var K=H[3],ft=$[3],At=H[0]/K,N=$[0]/ft,Q=H[1]/K,it=$[1]/ft,dt=H[2]/K,wt=$[2]/ft,Et=dt===wt?0:(0-dt)/(wt-dt);return new r.MercatorCoordinate(r.number(At,N,Et)/this.worldSize,r.number(Q,it,Et)/this.worldSize)},Hn.prototype.coordinatePoint=function(F){var H=[F.x*this.worldSize,F.y*this.worldSize,0,1];return r.transformMat4(H,H,this.pixelMatrix),new r.Point(H[0]/H[3],H[1]/H[3])},Hn.prototype.getBounds=function(){return new r.LngLatBounds().extend(this.pointLocation(new r.Point(0,0))).extend(this.pointLocation(new r.Point(this.width,0))).extend(this.pointLocation(new r.Point(this.width,this.height))).extend(this.pointLocation(new r.Point(0,this.height)))},Hn.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Hn.prototype.setMaxBounds=function(F){F?(this.lngRange=[F.getWest(),F.getEast()],this.latRange=[F.getSouth(),F.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Hn.prototype.calculatePosMatrix=function(F,H){H===void 0&&(H=!1);var $=F.key,K=H?this._alignedPosMatrixCache:this._posMatrixCache;if(K[$])return K[$];var ft=F.canonical,At=this.worldSize/this.zoomScale(ft.z),N=ft.x+Math.pow(2,ft.z)*F.wrap,Q=r.identity(new Float64Array(16));return r.translate(Q,Q,[N*At,ft.y*At,0]),r.scale(Q,Q,[At/r.EXTENT,At/r.EXTENT,1]),r.multiply(Q,H?this.alignedProjMatrix:this.projMatrix,Q),K[$]=new Float32Array(Q),K[$]},Hn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Hn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var F,H,$,K,ft=-90,At=90,N=-180,Q=180,it=this.size,dt=this._unmodified;if(this.latRange){var wt=this.latRange;ft=r.mercatorYfromLat(wt[1])*this.worldSize,F=(At=r.mercatorYfromLat(wt[0])*this.worldSize)-ft<it.y?it.y/(At-ft):0}if(this.lngRange){var Et=this.lngRange;N=r.mercatorXfromLng(Et[0])*this.worldSize,H=(Q=r.mercatorXfromLng(Et[1])*this.worldSize)-N<it.x?it.x/(Q-N):0}var Bt=this.point,Ut=Math.max(H||0,F||0);if(Ut)return this.center=this.unproject(new r.Point(H?(Q+N)/2:Bt.x,F?(At+ft)/2:Bt.y)),this.zoom+=this.scaleZoom(Ut),this._unmodified=dt,void(this._constraining=!1);if(this.latRange){var Ht=Bt.y,qt=it.y/2;Ht-qt<ft&&(K=ft+qt),Ht+qt>At&&(K=At-qt)}if(this.lngRange){var Jt=Bt.x,le=it.x/2;Jt-le<N&&($=N+le),Jt+le>Q&&($=Q-le)}$===void 0&&K===void 0||(this.center=this.unproject(new r.Point($!==void 0?$:Bt.x,K!==void 0?K:Bt.y))),this._unmodified=dt,this._constraining=!1}},Hn.prototype._calcMatrices=function(){if(this.height){var F=this._fov/2,H=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(F)*this.height;var $=Math.PI/2+this._pitch,K=this._fov*(.5+H.y/this.height),ft=Math.sin(K)*this.cameraToCenterDistance/Math.sin(r.clamp(Math.PI-$-K,.01,Math.PI-.01)),At=this.point,N=At.x,Q=At.y,it=1.01*(Math.cos(Math.PI/2-this._pitch)*ft+this.cameraToCenterDistance),dt=this.height/50,wt=new Float64Array(16);r.perspective(wt,this._fov,this.width/this.height,dt,it),wt[8]=2*-H.x/this.width,wt[9]=2*H.y/this.height,r.scale(wt,wt,[1,-1,1]),r.translate(wt,wt,[0,0,-this.cameraToCenterDistance]),r.rotateX(wt,wt,this._pitch),r.rotateZ(wt,wt,this.angle),r.translate(wt,wt,[-N,-Q,0]),this.mercatorMatrix=r.scale([],wt,[this.worldSize,this.worldSize,this.worldSize]),r.scale(wt,wt,[1,1,r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=wt,this.invProjMatrix=r.invert([],this.projMatrix);var Et=this.width%2/2,Bt=this.height%2/2,Ut=Math.cos(this.angle),Ht=Math.sin(this.angle),qt=N-Math.round(N)+Ut*Et+Ht*Bt,Jt=Q-Math.round(Q)+Ut*Bt+Ht*Et,le=new Float64Array(wt);if(r.translate(le,le,[qt>.5?qt-1:qt,Jt>.5?Jt-1:Jt,0]),this.alignedProjMatrix=le,wt=r.create(),r.scale(wt,wt,[this.width/2,-this.height/2,1]),r.translate(wt,wt,[1,-1,0]),this.labelPlaneMatrix=wt,wt=r.create(),r.scale(wt,wt,[1,-1,1]),r.translate(wt,wt,[-1,-1,0]),r.scale(wt,wt,[2/this.width,2/this.height,1]),this.glCoordMatrix=wt,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(wt=r.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=wt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Hn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var F=this.pointCoordinate(new r.Point(0,0)),H=[F.x*this.worldSize,F.y*this.worldSize,0,1];return r.transformMat4(H,H,this.pixelMatrix)[3]/this.cameraToCenterDistance},Hn.prototype.getCameraPoint=function(){var F=this._pitch,H=Math.tan(F)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.Point(0,H))},Hn.prototype.getCameraQueryGeometry=function(F){var H=this.getCameraPoint();if(F.length===1)return[F[0],H];for(var $=H.x,K=H.y,ft=H.x,At=H.y,N=0,Q=F;N<Q.length;N+=1){var it=Q[N];$=Math.min($,it.x),K=Math.min(K,it.y),ft=Math.max(ft,it.x),At=Math.max(At,it.y)}return[new r.Point($,K),new r.Point(ft,K),new r.Point(ft,At),new r.Point($,At),new r.Point($,K)]},Object.defineProperties(Hn.prototype,Yn);var Oo=function(F){var H,$,K,ft,At;this._hashName=F&&encodeURIComponent(F),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(H=this._updateHashUnthrottled.bind(this),$=300,K=!1,ft=null,At=function(){ft=null,K&&(H(),ft=setTimeout(At,$),K=!1)},function(){return K=!0,ft||At(),ft})};Oo.prototype.addTo=function(F){return this._map=F,r.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Oo.prototype.remove=function(){return r.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Oo.prototype.getHashString=function(F){var H=this._map.getCenter(),$=Math.round(100*this._map.getZoom())/100,K=Math.ceil(($*Math.LN2+Math.log(512/360/.5))/Math.LN10),ft=Math.pow(10,K),At=Math.round(H.lng*ft)/ft,N=Math.round(H.lat*ft)/ft,Q=this._map.getBearing(),it=this._map.getPitch(),dt="";if(dt+=F?"/"+At+"/"+N+"/"+$:$+"/"+N+"/"+At,(Q||it)&&(dt+="/"+Math.round(10*Q)/10),it&&(dt+="/"+Math.round(it)),this._hashName){var wt=this._hashName,Et=!1,Bt=r.window.location.hash.slice(1).split("&").map(function(Ut){var Ht=Ut.split("=")[0];return Ht===wt?(Et=!0,Ht+"="+dt):Ut}).filter(function(Ut){return Ut});return Et||Bt.push(wt+"="+dt),"#"+Bt.join("&")}return"#"+dt},Oo.prototype._getCurrentHash=function(){var F,H=this,$=r.window.location.hash.replace("#","");return this._hashName?($.split("&").map(function(K){return K.split("=")}).forEach(function(K){K[0]===H._hashName&&(F=K)}),(F&&F[1]||"").split("/")):$.split("/")},Oo.prototype._onHashChange=function(){var F=this._getCurrentHash();if(F.length>=3&&!F.some(function($){return isNaN($)})){var H=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(F[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+F[2],+F[1]],zoom:+F[0],bearing:H,pitch:+(F[4]||0)}),!0}return!1},Oo.prototype._updateHashUnthrottled=function(){var F=this.getHashString();try{r.window.history.replaceState(r.window.history.state,"",F)}catch{}};var mo={linearity:.3,easing:r.bezier(0,0,.3,1)},el=r.extend({deceleration:2500,maxSpeed:1400},mo),Ms=r.extend({deceleration:20,maxSpeed:1400},mo),Ro=r.extend({deceleration:1e3,maxSpeed:360},mo),As=r.extend({deceleration:1e3,maxSpeed:90},mo),vo=function(F){this._map=F,this.clear()};function Ko(F,H){(!F.duration||F.duration<H.duration)&&(F.duration=H.duration,F.easing=H.easing)}function Po(F,H,$){var K=$.maxSpeed,ft=$.linearity,At=$.deceleration,N=r.clamp(F*ft/(H/1e3),-K,K),Q=Math.abs(N)/(At*ft);return{easing:$.easing,duration:1e3*Q,amount:N*(Q/2)}}vo.prototype.clear=function(){this._inertiaBuffer=[]},vo.prototype.record=function(F){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.browser.now(),settings:F})},vo.prototype._drainInertiaBuffer=function(){for(var F=this._inertiaBuffer,H=r.browser.now();F.length>0&&H-F[0].time>160;)F.shift()},vo.prototype._onMoveEnd=function(F){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var H={zoom:0,bearing:0,pitch:0,pan:new r.Point(0,0),pinchAround:void 0,around:void 0},$=0,K=this._inertiaBuffer;$<K.length;$+=1){var ft=K[$].settings;H.zoom+=ft.zoomDelta||0,H.bearing+=ft.bearingDelta||0,H.pitch+=ft.pitchDelta||0,ft.panDelta&&H.pan._add(ft.panDelta),ft.around&&(H.around=ft.around),ft.pinchAround&&(H.pinchAround=ft.pinchAround)}var At=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,N={};if(H.pan.mag()){var Q=Po(H.pan.mag(),At,r.extend({},el,F||{}));N.offset=H.pan.mult(Q.amount/H.pan.mag()),N.center=this._map.transform.center,Ko(N,Q)}if(H.zoom){var it=Po(H.zoom,At,Ms);N.zoom=this._map.transform.zoom+it.amount,Ko(N,it)}if(H.bearing){var dt=Po(H.bearing,At,Ro);N.bearing=this._map.transform.bearing+r.clamp(dt.amount,-179,179),Ko(N,dt)}if(H.pitch){var wt=Po(H.pitch,At,As);N.pitch=this._map.transform.pitch+wt.amount,Ko(N,wt)}if(N.zoom||N.bearing){var Et=H.pinchAround===void 0?H.around:H.pinchAround;N.around=Et?this._map.unproject(Et):this._map.getCenter()}return this.clear(),r.extend(N,{noMoveStart:!0})}};var xi=function(F){function H(K,ft,At,N){N===void 0&&(N={});var Q=h.mousePos(ft.getCanvasContainer(),At),it=ft.unproject(Q);F.call(this,K,r.extend({point:Q,lngLat:it,originalEvent:At},N)),this._defaultPrevented=!1,this.target=ft}F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H;var $={defaultPrevented:{configurable:!0}};return H.prototype.preventDefault=function(){this._defaultPrevented=!0},$.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(H.prototype,$),H}(r.Event),Jo=function(F){function H(K,ft,At){var N=K==="touchend"?At.changedTouches:At.touches,Q=h.touchPos(ft.getCanvasContainer(),N),it=Q.map(function(Et){return ft.unproject(Et)}),dt=Q.reduce(function(Et,Bt,Ut,Ht){return Et.add(Bt.div(Ht.length))},new r.Point(0,0)),wt=ft.unproject(dt);F.call(this,K,{points:Q,point:dt,lngLats:it,lngLat:wt,originalEvent:At}),this._defaultPrevented=!1}F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H;var $={defaultPrevented:{configurable:!0}};return H.prototype.preventDefault=function(){this._defaultPrevented=!0},$.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(H.prototype,$),H}(r.Event),Qo=function(F){function H(K,ft,At){F.call(this,K,{originalEvent:At}),this._defaultPrevented=!1}F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H;var $={defaultPrevented:{configurable:!0}};return H.prototype.preventDefault=function(){this._defaultPrevented=!0},$.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(H.prototype,$),H}(r.Event),Fi=function(F,H){this._map=F,this._clickTolerance=H.clickTolerance};Fi.prototype.reset=function(){delete this._mousedownPos},Fi.prototype.wheel=function(F){return this._firePreventable(new Qo(F.type,this._map,F))},Fi.prototype.mousedown=function(F,H){return this._mousedownPos=H,this._firePreventable(new xi(F.type,this._map,F))},Fi.prototype.mouseup=function(F){this._map.fire(new xi(F.type,this._map,F))},Fi.prototype.click=function(F,H){this._mousedownPos&&this._mousedownPos.dist(H)>=this._clickTolerance||this._map.fire(new xi(F.type,this._map,F))},Fi.prototype.dblclick=function(F){return this._firePreventable(new xi(F.type,this._map,F))},Fi.prototype.mouseover=function(F){this._map.fire(new xi(F.type,this._map,F))},Fi.prototype.mouseout=function(F){this._map.fire(new xi(F.type,this._map,F))},Fi.prototype.touchstart=function(F){return this._firePreventable(new Jo(F.type,this._map,F))},Fi.prototype.touchmove=function(F){this._map.fire(new Jo(F.type,this._map,F))},Fi.prototype.touchend=function(F){this._map.fire(new Jo(F.type,this._map,F))},Fi.prototype.touchcancel=function(F){this._map.fire(new Jo(F.type,this._map,F))},Fi.prototype._firePreventable=function(F){if(this._map.fire(F),F.defaultPrevented)return{}},Fi.prototype.isEnabled=function(){return!0},Fi.prototype.isActive=function(){return!1},Fi.prototype.enable=function(){},Fi.prototype.disable=function(){};var ra=function(F){this._map=F};ra.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ra.prototype.mousemove=function(F){this._map.fire(new xi(F.type,this._map,F))},ra.prototype.mousedown=function(){this._delayContextMenu=!0},ra.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ra.prototype.contextmenu=function(F){this._delayContextMenu?this._contextMenuEvent=F:this._map.fire(new xi(F.type,this._map,F)),this._map.listens("contextmenu")&&F.preventDefault()},ra.prototype.isEnabled=function(){return!0},ra.prototype.isActive=function(){return!1},ra.prototype.enable=function(){},ra.prototype.disable=function(){};var Ji=function(F,H){this._map=F,this._el=F.getCanvasContainer(),this._container=F.getContainer(),this._clickTolerance=H.clickTolerance||1};function zi(F,H){for(var $={},K=0;K<F.length;K++)$[F[K].identifier]=H[K];return $}Ji.prototype.isEnabled=function(){return!!this._enabled},Ji.prototype.isActive=function(){return!!this._active},Ji.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ji.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ji.prototype.mousedown=function(F,H){this.isEnabled()&&F.shiftKey&&F.button===0&&(h.disableDrag(),this._startPos=this._lastPos=H,this._active=!0)},Ji.prototype.mousemoveWindow=function(F,H){if(this._active){var $=H;if(!(this._lastPos.equals($)||!this._box&&$.dist(this._startPos)<this._clickTolerance)){var K=this._startPos;this._lastPos=$,this._box||(this._box=h.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",F));var ft=Math.min(K.x,$.x),At=Math.max(K.x,$.x),N=Math.min(K.y,$.y),Q=Math.max(K.y,$.y);h.setTransform(this._box,"translate("+ft+"px,"+N+"px)"),this._box.style.width=At-ft+"px",this._box.style.height=Q-N+"px"}}},Ji.prototype.mouseupWindow=function(F,H){var $=this;if(this._active&&F.button===0){var K=this._startPos,ft=H;if(this.reset(),h.suppressClick(),K.x!==ft.x||K.y!==ft.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:F})),{cameraAnimation:function(At){return At.fitScreenCoordinates(K,ft,$._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",F)}},Ji.prototype.keydown=function(F){this._active&&F.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",F))},Ji.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(h.remove(this._box),this._box=null),h.enableDrag(),delete this._startPos,delete this._lastPos},Ji.prototype._fireEvent=function(F,H){return this._map.fire(new r.Event(F,{originalEvent:H}))};var ca=function(F){this.reset(),this.numTouches=F.numTouches};ca.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ca.prototype.touchstart=function(F,H,$){(this.centroid||$.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=F.timeStamp),$.length===this.numTouches&&(this.centroid=function(K){for(var ft=new r.Point(0,0),At=0,N=K;At<N.length;At+=1){var Q=N[At];ft._add(Q)}return ft.div(K.length)}(H),this.touches=zi($,H)))},ca.prototype.touchmove=function(F,H,$){if(!this.aborted&&this.centroid){var K=zi($,H);for(var ft in this.touches){var At=this.touches[ft],N=K[ft];(!N||N.dist(At)>30)&&(this.aborted=!0)}}},ca.prototype.touchend=function(F,H,$){if((!this.centroid||F.timeStamp-this.startTime>500)&&(this.aborted=!0),$.length===0){var K=!this.aborted&&this.centroid;if(this.reset(),K)return K}};var Do=function(F){this.singleTap=new ca(F),this.numTaps=F.numTaps,this.reset()};Do.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Do.prototype.touchstart=function(F,H,$){this.singleTap.touchstart(F,H,$)},Do.prototype.touchmove=function(F,H,$){this.singleTap.touchmove(F,H,$)},Do.prototype.touchend=function(F,H,$){var K=this.singleTap.touchend(F,H,$);if(K){var ft=F.timeStamp-this.lastTime<500,At=!this.lastTap||this.lastTap.dist(K)<30;if(ft&&At||this.reset(),this.count++,this.lastTime=F.timeStamp,this.lastTap=K,this.count===this.numTaps)return this.reset(),K}};var $a=function(){this._zoomIn=new Do({numTouches:1,numTaps:2}),this._zoomOut=new Do({numTouches:2,numTaps:1}),this.reset()};$a.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},$a.prototype.touchstart=function(F,H,$){this._zoomIn.touchstart(F,H,$),this._zoomOut.touchstart(F,H,$)},$a.prototype.touchmove=function(F,H,$){this._zoomIn.touchmove(F,H,$),this._zoomOut.touchmove(F,H,$)},$a.prototype.touchend=function(F,H,$){var K=this,ft=this._zoomIn.touchend(F,H,$),At=this._zoomOut.touchend(F,H,$);return ft?(this._active=!0,F.preventDefault(),setTimeout(function(){return K.reset()},0),{cameraAnimation:function(N){return N.easeTo({duration:300,zoom:N.getZoom()+1,around:N.unproject(ft)},{originalEvent:F})}}):At?(this._active=!0,F.preventDefault(),setTimeout(function(){return K.reset()},0),{cameraAnimation:function(N){return N.easeTo({duration:300,zoom:N.getZoom()-1,around:N.unproject(At)},{originalEvent:F})}}):void 0},$a.prototype.touchcancel=function(){this.reset()},$a.prototype.enable=function(){this._enabled=!0},$a.prototype.disable=function(){this._enabled=!1,this.reset()},$a.prototype.isEnabled=function(){return this._enabled},$a.prototype.isActive=function(){return this._active};var Wi=function(F){this.reset(),this._clickTolerance=F.clickTolerance||1};Wi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Wi.prototype._correctButton=function(F,H){return!1},Wi.prototype._move=function(F,H){return{}},Wi.prototype.mousedown=function(F,H){if(!this._lastPoint){var $=h.mouseButton(F);this._correctButton(F,$)&&(this._lastPoint=H,this._eventButton=$)}},Wi.prototype.mousemoveWindow=function(F,H){var $=this._lastPoint;if($&&(F.preventDefault(),this._moved||!(H.dist($)<this._clickTolerance)))return this._moved=!0,this._lastPoint=H,this._move($,H)},Wi.prototype.mouseupWindow=function(F){h.mouseButton(F)===this._eventButton&&(this._moved&&h.suppressClick(),this.reset())},Wi.prototype.enable=function(){this._enabled=!0},Wi.prototype.disable=function(){this._enabled=!1,this.reset()},Wi.prototype.isEnabled=function(){return this._enabled},Wi.prototype.isActive=function(){return this._active};var Ca=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.mousedown=function($,K){F.prototype.mousedown.call(this,$,K),this._lastPoint&&(this._active=!0)},H.prototype._correctButton=function($,K){return K===0&&!$.ctrlKey},H.prototype._move=function($,K){return{around:K,panDelta:K.sub($)}},H}(Wi),Ra=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype._correctButton=function($,K){return K===0&&$.ctrlKey||K===2},H.prototype._move=function($,K){var ft=.8*(K.x-$.x);if(ft)return this._active=!0,{bearingDelta:ft}},H.prototype.contextmenu=function($){$.preventDefault()},H}(Wi),Gs=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype._correctButton=function($,K){return K===0&&$.ctrlKey||K===2},H.prototype._move=function($,K){var ft=-.5*(K.y-$.y);if(ft)return this._active=!0,{pitchDelta:ft}},H.prototype.contextmenu=function($){$.preventDefault()},H}(Wi),Pa=function(F){this._minTouches=1,this._clickTolerance=F.clickTolerance||1,this.reset()};Pa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new r.Point(0,0)},Pa.prototype.touchstart=function(F,H,$){return this._calculateTransform(F,H,$)},Pa.prototype.touchmove=function(F,H,$){if(this._active)return F.preventDefault(),this._calculateTransform(F,H,$)},Pa.prototype.touchend=function(F,H,$){this._calculateTransform(F,H,$),this._active&&$.length<this._minTouches&&this.reset()},Pa.prototype.touchcancel=function(){this.reset()},Pa.prototype._calculateTransform=function(F,H,$){$.length>0&&(this._active=!0);var K=zi($,H),ft=new r.Point(0,0),At=new r.Point(0,0),N=0;for(var Q in K){var it=K[Q],dt=this._touches[Q];dt&&(ft._add(it),At._add(it.sub(dt)),N++,K[Q]=it)}if(this._touches=K,!(N<this._minTouches)&&At.mag()){var wt=At.div(N);if(this._sum._add(wt),!(this._sum.mag()<this._clickTolerance))return{around:ft.div(N),panDelta:wt}}},Pa.prototype.enable=function(){this._enabled=!0},Pa.prototype.disable=function(){this._enabled=!1,this.reset()},Pa.prototype.isEnabled=function(){return this._enabled},Pa.prototype.isActive=function(){return this._active};var qi=function(){this.reset()};function wn(F,H,$){for(var K=0;K<F.length;K++)if(F[K].identifier===$)return H[K]}qi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},qi.prototype._start=function(F){},qi.prototype._move=function(F,H,$){return{}},qi.prototype.touchstart=function(F,H,$){this._firstTwoTouches||$.length<2||(this._firstTwoTouches=[$[0].identifier,$[1].identifier],this._start([H[0],H[1]]))},qi.prototype.touchmove=function(F,H,$){if(this._firstTwoTouches){F.preventDefault();var K=this._firstTwoTouches,ft=K[0],At=K[1],N=wn($,H,ft),Q=wn($,H,At);if(N&&Q){var it=this._aroundCenter?null:N.add(Q).div(2);return this._move([N,Q],it,F)}}},qi.prototype.touchend=function(F,H,$){if(this._firstTwoTouches){var K=this._firstTwoTouches,ft=K[0],At=K[1],N=wn($,H,ft),Q=wn($,H,At);N&&Q||(this._active&&h.suppressClick(),this.reset())}},qi.prototype.touchcancel=function(){this.reset()},qi.prototype.enable=function(F){this._enabled=!0,this._aroundCenter=!!F&&F.around==="center"},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};function na(F,H){return Math.log(F/H)/Math.LN2}var Cs=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.reset=function(){F.prototype.reset.call(this),delete this._distance,delete this._startDistance},H.prototype._start=function($){this._startDistance=this._distance=$[0].dist($[1])},H.prototype._move=function($,K){var ft=this._distance;if(this._distance=$[0].dist($[1]),this._active||!(Math.abs(na(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:na(this._distance,ft),pinchAround:K}},H}(qi);function $s(F,H){return 180*F.angleWith(H)/Math.PI}var ts=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.reset=function(){F.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},H.prototype._start=function($){this._startVector=this._vector=$[0].sub($[1]),this._minDiameter=$[0].dist($[1])},H.prototype._move=function($,K){var ft=this._vector;if(this._vector=$[0].sub($[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$s(this._vector,ft),pinchAround:K}},H.prototype._isBelowThreshold=function($){this._minDiameter=Math.min(this._minDiameter,$.mag());var K=25/(Math.PI*this._minDiameter)*360,ft=$s($,this._startVector);return Math.abs(ft)<K},H}(qi);function es(F){return Math.abs(F.y)>Math.abs(F.x)}var yo=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.reset=function(){F.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},H.prototype._start=function($){this._lastPoints=$,es($[0].sub($[1]))&&(this._valid=!1)},H.prototype._move=function($,K,ft){var At=$[0].sub(this._lastPoints[0]),N=$[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(At,N,ft.timeStamp),this._valid)return this._lastPoints=$,this._active=!0,{pitchDelta:(At.y+N.y)/2*-.5}},H.prototype.gestureBeginsVertically=function($,K,ft){if(this._valid!==void 0)return this._valid;var At=$.mag()>=2,N=K.mag()>=2;if(At||N){if(!At||!N)return this._firstMove===void 0&&(this._firstMove=ft),ft-this._firstMove<100&&void 0;var Q=$.y>0==K.y>0;return es($)&&es(K)&&Q}},H}(qi),xn={panStep:100,bearingStep:15,pitchStep:10},Ha=function(){var F=xn;this._panStep=F.panStep,this._bearingStep=F.bearingStep,this._pitchStep=F.pitchStep};function fs(F){return F*(2-F)}Ha.prototype.reset=function(){this._active=!1},Ha.prototype.keydown=function(F){var H=this;if(!(F.altKey||F.ctrlKey||F.metaKey)){var $=0,K=0,ft=0,At=0,N=0;switch(F.keyCode){case 61:case 107:case 171:case 187:$=1;break;case 189:case 109:case 173:$=-1;break;case 37:F.shiftKey?K=-1:(F.preventDefault(),At=-1);break;case 39:F.shiftKey?K=1:(F.preventDefault(),At=1);break;case 38:F.shiftKey?ft=1:(F.preventDefault(),N=-1);break;case 40:F.shiftKey?ft=-1:(F.preventDefault(),N=1);break;default:return}return{cameraAnimation:function(Q){var it=Q.getZoom();Q.easeTo({duration:300,easeId:"keyboardHandler",easing:fs,zoom:$?Math.round(it)+$*(F.shiftKey?2:1):it,bearing:Q.getBearing()+K*H._bearingStep,pitch:Q.getPitch()+ft*H._pitchStep,offset:[-At*H._panStep,-N*H._panStep],center:Q.getCenter()},{originalEvent:F})}}}},Ha.prototype.enable=function(){this._enabled=!0},Ha.prototype.disable=function(){this._enabled=!1,this.reset()},Ha.prototype.isEnabled=function(){return this._enabled},Ha.prototype.isActive=function(){return this._active};var Ls=4.000244140625,ia=function(F,H){this._map=F,this._el=F.getCanvasContainer(),this._handler=H,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ia.prototype.setZoomRate=function(F){this._defaultZoomRate=F},ia.prototype.setWheelZoomRate=function(F){this._wheelZoomRate=F},ia.prototype.isEnabled=function(){return!!this._enabled},ia.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ia.prototype.isZooming=function(){return!!this._zooming},ia.prototype.enable=function(F){this.isEnabled()||(this._enabled=!0,this._aroundCenter=F&&F.around==="center")},ia.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ia.prototype.wheel=function(F){if(this.isEnabled()){var H=F.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*F.deltaY:F.deltaY,$=r.browser.now(),K=$-(this._lastWheelEventTime||0);this._lastWheelEventTime=$,H!==0&&H%Ls==0?this._type="wheel":H!==0&&Math.abs(H)<4?this._type="trackpad":K>400?(this._type=null,this._lastValue=H,this._timeout=setTimeout(this._onTimeout,40,F)):this._type||(this._type=Math.abs(K*H)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,H+=this._lastValue)),F.shiftKey&&H&&(H/=4),this._type&&(this._lastWheelEvent=F,this._delta-=H,this._active||this._start(F)),F.preventDefault()}},ia.prototype._onTimeout=function(F){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(F)},ia.prototype._start=function(F){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var H=h.mousePos(this._el,F);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(H)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ia.prototype.renderFrame=function(){return this._onScrollFrame()},ia.prototype._onScrollFrame=function(){var F=this;if(this._frameId&&(this._frameId=null,this.isActive())){var H=this._map.transform;if(this._delta!==0){var $=this._type==="wheel"&&Math.abs(this._delta)>Ls?this._wheelZoomRate:this._defaultZoomRate,K=2/(1+Math.exp(-Math.abs(this._delta*$)));this._delta<0&&K!==0&&(K=1/K);var ft=typeof this._targetZoom=="number"?H.zoomScale(this._targetZoom):H.scale;this._targetZoom=Math.min(H.maxZoom,Math.max(H.minZoom,H.scaleZoom(ft*K))),this._type==="wheel"&&(this._startZoom=H.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var At,N=typeof this._targetZoom=="number"?this._targetZoom:H.zoom,Q=this._startZoom,it=this._easing,dt=!1;if(this._type==="wheel"&&Q&&it){var wt=Math.min((r.browser.now()-this._lastWheelEventTime)/200,1),Et=it(wt);At=r.number(Q,N,Et),wt<1?this._frameId||(this._frameId=!0):dt=!0}else At=N,dt=!0;return this._active=!0,dt&&(this._active=!1,this._finishTimeout=setTimeout(function(){F._zooming=!1,F._handler._triggerRenderFrame(),delete F._targetZoom,delete F._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!dt,zoomDelta:At-H.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ia.prototype._smoothOutEasing=function(F){var H=r.ease;if(this._prevEase){var $=this._prevEase,K=(r.browser.now()-$.start)/$.duration,ft=$.easing(K+.01)-$.easing(K),At=.27/Math.sqrt(ft*ft+1e-4)*.01,N=Math.sqrt(.0729-At*At);H=r.bezier(At,N,.25,1)}return this._prevEase={start:r.browser.now(),duration:F,easing:H},H},ia.prototype.reset=function(){this._active=!1};var Va=function(F,H){this._clickZoom=F,this._tapZoom=H};Va.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Va.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Va.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Va.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Da=function(){this.reset()};Da.prototype.reset=function(){this._active=!1},Da.prototype.dblclick=function(F,H){return F.preventDefault(),{cameraAnimation:function($){$.easeTo({duration:300,zoom:$.getZoom()+(F.shiftKey?-1:1),around:$.unproject(H)},{originalEvent:F})}}},Da.prototype.enable=function(){this._enabled=!0},Da.prototype.disable=function(){this._enabled=!1,this.reset()},Da.prototype.isEnabled=function(){return this._enabled},Da.prototype.isActive=function(){return this._active};var La=function(){this._tap=new Do({numTouches:1,numTaps:1}),this.reset()};La.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},La.prototype.touchstart=function(F,H,$){this._swipePoint||(this._tapTime&&F.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?$.length>0&&(this._swipePoint=H[0],this._swipeTouch=$[0].identifier):this._tap.touchstart(F,H,$))},La.prototype.touchmove=function(F,H,$){if(this._tapTime){if(this._swipePoint){if($[0].identifier!==this._swipeTouch)return;var K=H[0],ft=K.y-this._swipePoint.y;return this._swipePoint=K,F.preventDefault(),this._active=!0,{zoomDelta:ft/128}}}else this._tap.touchmove(F,H,$)},La.prototype.touchend=function(F,H,$){this._tapTime?this._swipePoint&&$.length===0&&this.reset():this._tap.touchend(F,H,$)&&(this._tapTime=F.timeStamp)},La.prototype.touchcancel=function(){this.reset()},La.prototype.enable=function(){this._enabled=!0},La.prototype.disable=function(){this._enabled=!1,this.reset()},La.prototype.isEnabled=function(){return this._enabled},La.prototype.isActive=function(){return this._active};var eo=function(F,H,$){this._el=F,this._mousePan=H,this._touchPan=$};eo.prototype.enable=function(F){this._inertiaOptions=F||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},eo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},eo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},eo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var xo=function(F,H,$){this._pitchWithRotate=F.pitchWithRotate,this._mouseRotate=H,this._mousePitch=$};xo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},xo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},xo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},xo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ni=function(F,H,$,K){this._el=F,this._touchZoom=H,this._touchRotate=$,this._tapDragZoom=K,this._rotationDisabled=!1,this._enabled=!0};Ni.prototype.enable=function(F){this._touchZoom.enable(F),this._rotationDisabled||this._touchRotate.enable(F),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ni.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ni.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ni.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ni.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ni.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var rs=function(F){return F.zoom||F.drag||F.pitch||F.rotate},ps=function(F){function H(){F.apply(this,arguments)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H}(r.Event);function Yi(F){return F.panDelta&&F.panDelta.mag()||F.zoomDelta||F.bearingDelta||F.pitchDelta}var ai=function(F,H){this._map=F,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new vo(F),this._bearingSnap=H.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(H),r.bindAll(["handleEvent","handleWindowEvent"],this);var $=this._el;this._listeners=[[$,"touchstart",{passive:!1}],[$,"touchmove",{passive:!1}],[$,"touchend",void 0],[$,"touchcancel",void 0],[$,"mousedown",void 0],[$,"mousemove",void 0],[$,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[$,"mouseover",void 0],[$,"mouseout",void 0],[$,"dblclick",void 0],[$,"click",void 0],[$,"keydown",{capture:!1}],[$,"keyup",void 0],[$,"wheel",{passive:!1}],[$,"contextmenu",void 0],[r.window,"blur",void 0]];for(var K=0,ft=this._listeners;K<ft.length;K+=1){var At=ft[K],N=At[0],Q=At[1],it=At[2];h.addEventListener(N,Q,N===r.window.document?this.handleWindowEvent:this.handleEvent,it)}};ai.prototype.destroy=function(){for(var F=0,H=this._listeners;F<H.length;F+=1){var $=H[F],K=$[0],ft=$[1],At=$[2];h.removeEventListener(K,ft,K===r.window.document?this.handleWindowEvent:this.handleEvent,At)}},ai.prototype._addDefaultHandlers=function(F){var H=this._map,$=H.getCanvasContainer();this._add("mapEvent",new Fi(H,F));var K=H.boxZoom=new Ji(H,F);this._add("boxZoom",K);var ft=new $a,At=new Da;H.doubleClickZoom=new Va(At,ft),this._add("tapZoom",ft),this._add("clickZoom",At);var N=new La;this._add("tapDragZoom",N);var Q=H.touchPitch=new yo;this._add("touchPitch",Q);var it=new Ra(F),dt=new Gs(F);H.dragRotate=new xo(F,it,dt),this._add("mouseRotate",it,["mousePitch"]),this._add("mousePitch",dt,["mouseRotate"]);var wt=new Ca(F),Et=new Pa(F);H.dragPan=new eo($,wt,Et),this._add("mousePan",wt),this._add("touchPan",Et,["touchZoom","touchRotate"]);var Bt=new ts,Ut=new Cs;H.touchZoomRotate=new Ni($,Ut,Bt,N),this._add("touchRotate",Bt,["touchPan","touchZoom"]),this._add("touchZoom",Ut,["touchPan","touchRotate"]);var Ht=H.scrollZoom=new ia(H,this);this._add("scrollZoom",Ht,["mousePan"]);var qt=H.keyboard=new Ha;this._add("keyboard",qt),this._add("blockableMapEvent",new ra(H));for(var Jt=0,le=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Jt<le.length;Jt+=1){var fe=le[Jt];F.interactive&&F[fe]&&H[fe].enable(F[fe])}},ai.prototype._add=function(F,H,$){this._handlers.push({handlerName:F,handler:H,allowed:$}),this._handlersById[F]=H},ai.prototype.stop=function(){if(!this._updatingCamera){for(var F=0,H=this._handlers;F<H.length;F+=1)H[F].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ai.prototype.isActive=function(){for(var F=0,H=this._handlers;F<H.length;F+=1)if(H[F].handler.isActive())return!0;return!1},ai.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ai.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ai.prototype.isMoving=function(){return Boolean(rs(this._eventsInProgress))||this.isZooming()},ai.prototype._blockedByActive=function(F,H,$){for(var K in F)if(K!==$&&(!H||H.indexOf(K)<0))return!0;return!1},ai.prototype.handleWindowEvent=function(F){this.handleEvent(F,F.type+"Window")},ai.prototype._getMapTouches=function(F){for(var H=[],$=0,K=F;$<K.length;$+=1){var ft=K[$],At=ft.target;this._el.contains(At)&&H.push(ft)}return H},ai.prototype.handleEvent=function(F,H){if(F.type!=="blur"){this._updatingCamera=!0;for(var $=F.type==="renderFrame"?void 0:F,K={needsRenderFrame:!1},ft={},At={},N=F.touches?this._getMapTouches(F.touches):void 0,Q=N?h.touchPos(this._el,N):h.mousePos(this._el,F),it=0,dt=this._handlers;it<dt.length;it+=1){var wt=dt[it],Et=wt.handlerName,Bt=wt.handler,Ut=wt.allowed;if(Bt.isEnabled()){var Ht=void 0;this._blockedByActive(At,Ut,Et)?Bt.reset():Bt[H||F.type]&&(Ht=Bt[H||F.type](F,Q,N),this.mergeHandlerResult(K,ft,Ht,Et,$),Ht&&Ht.needsRenderFrame&&this._triggerRenderFrame()),(Ht||Bt.isActive())&&(At[Et]=Bt)}}var qt={};for(var Jt in this._previousActiveHandlers)At[Jt]||(qt[Jt]=$);this._previousActiveHandlers=At,(Object.keys(qt).length||Yi(K))&&(this._changes.push([K,ft,qt]),this._triggerRenderFrame()),(Object.keys(At).length||Yi(K))&&this._map._stop(!0),this._updatingCamera=!1;var le=K.cameraAnimation;le&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],le(this._map))}else this.stop()},ai.prototype.mergeHandlerResult=function(F,H,$,K,ft){if($){r.extend(F,$);var At={handlerName:K,originalEvent:$.originalEvent||ft};$.zoomDelta!==void 0&&(H.zoom=At),$.panDelta!==void 0&&(H.drag=At),$.pitchDelta!==void 0&&(H.pitch=At),$.bearingDelta!==void 0&&(H.rotate=At)}},ai.prototype._applyChanges=function(){for(var F={},H={},$={},K=0,ft=this._changes;K<ft.length;K+=1){var At=ft[K],N=At[0],Q=At[1],it=At[2];N.panDelta&&(F.panDelta=(F.panDelta||new r.Point(0,0))._add(N.panDelta)),N.zoomDelta&&(F.zoomDelta=(F.zoomDelta||0)+N.zoomDelta),N.bearingDelta&&(F.bearingDelta=(F.bearingDelta||0)+N.bearingDelta),N.pitchDelta&&(F.pitchDelta=(F.pitchDelta||0)+N.pitchDelta),N.around!==void 0&&(F.around=N.around),N.pinchAround!==void 0&&(F.pinchAround=N.pinchAround),N.noInertia&&(F.noInertia=N.noInertia),r.extend(H,Q),r.extend($,it)}this._updateMapTransform(F,H,$),this._changes=[]},ai.prototype._updateMapTransform=function(F,H,$){var K=this._map,ft=K.transform;if(!Yi(F))return this._fireEvents(H,$);var At=F.panDelta,N=F.zoomDelta,Q=F.bearingDelta,it=F.pitchDelta,dt=F.around,wt=F.pinchAround;wt!==void 0&&(dt=wt),K._stop(!0),dt=dt||K.transform.centerPoint;var Et=ft.pointLocation(At?dt.sub(At):dt);Q&&(ft.bearing+=Q),it&&(ft.pitch+=it),N&&(ft.zoom+=N),ft.setLocationAtPoint(Et,dt),this._map._update(),F.noInertia||this._inertia.record(F),this._fireEvents(H,$)},ai.prototype._fireEvents=function(F,H){var $=this,K=rs(this._eventsInProgress),ft=rs(F),At={};for(var N in F){var Q=F[N].originalEvent;this._eventsInProgress[N]||(At[N+"start"]=Q),this._eventsInProgress[N]=F[N]}for(var it in!K&&ft&&this._fireEvent("movestart",ft.originalEvent),At)this._fireEvent(it,At[it]);for(var dt in F.rotate&&(this._bearingChanged=!0),ft&&this._fireEvent("move",ft.originalEvent),F){var wt=F[dt].originalEvent;this._fireEvent(dt,wt)}var Et,Bt={};for(var Ut in this._eventsInProgress){var Ht=this._eventsInProgress[Ut],qt=Ht.handlerName,Jt=Ht.originalEvent;this._handlersById[qt].isActive()||(delete this._eventsInProgress[Ut],Et=H[qt]||Jt,Bt[Ut+"end"]=Et)}for(var le in Bt)this._fireEvent(le,Bt[le]);var fe=rs(this._eventsInProgress);if((K||ft)&&!fe){this._updatingCamera=!0;var Le=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Se=function(Ce){return Ce!==0&&-$._bearingSnap<Ce&&Ce<$._bearingSnap};Le?(Se(Le.bearing||this._map.getBearing())&&(Le.bearing=0),this._map.easeTo(Le,{originalEvent:Et})):(this._map.fire(new r.Event("moveend",{originalEvent:Et})),Se(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ai.prototype._fireEvent=function(F,H){this._map.fire(new r.Event(F,H?{originalEvent:H}:{}))},ai.prototype._triggerRenderFrame=function(){var F=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(H){delete F._frameId,F.handleEvent(new ps("renderFrame",{timeStamp:H})),F._applyChanges()}))};var Es=function(F){function H($,K){F.call(this),this._moving=!1,this._zooming=!1,this.transform=$,this._bearingSnap=K.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.getCenter=function(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)},H.prototype.setCenter=function($,K){return this.jumpTo({center:$},K)},H.prototype.panBy=function($,K,ft){return $=r.Point.convert($).mult(-1),this.panTo(this.transform.center,r.extend({offset:$},K),ft)},H.prototype.panTo=function($,K,ft){return this.easeTo(r.extend({center:$},K),ft)},H.prototype.getZoom=function(){return this.transform.zoom},H.prototype.setZoom=function($,K){return this.jumpTo({zoom:$},K),this},H.prototype.zoomTo=function($,K,ft){return this.easeTo(r.extend({zoom:$},K),ft)},H.prototype.zoomIn=function($,K){return this.zoomTo(this.getZoom()+1,$,K),this},H.prototype.zoomOut=function($,K){return this.zoomTo(this.getZoom()-1,$,K),this},H.prototype.getBearing=function(){return this.transform.bearing},H.prototype.setBearing=function($,K){return this.jumpTo({bearing:$},K),this},H.prototype.getPadding=function(){return this.transform.padding},H.prototype.setPadding=function($,K){return this.jumpTo({padding:$},K),this},H.prototype.rotateTo=function($,K,ft){return this.easeTo(r.extend({bearing:$},K),ft)},H.prototype.resetNorth=function($,K){return this.rotateTo(0,r.extend({duration:1e3},$),K),this},H.prototype.resetNorthPitch=function($,K){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},$),K),this},H.prototype.snapToNorth=function($,K){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth($,K):this},H.prototype.getPitch=function(){return this.transform.pitch},H.prototype.setPitch=function($,K){return this.jumpTo({pitch:$},K),this},H.prototype.cameraForBounds=function($,K){return $=r.LngLatBounds.convert($),this._cameraForBoxAndBearing($.getNorthWest(),$.getSouthEast(),0,K)},H.prototype._cameraForBoxAndBearing=function($,K,ft,At){var N={top:0,bottom:0,right:0,left:0};if(typeof(At=r.extend({padding:N,offset:[0,0],maxZoom:this.transform.maxZoom},At)).padding=="number"){var Q=At.padding;At.padding={top:Q,bottom:Q,right:Q,left:Q}}At.padding=r.extend(N,At.padding);var it=this.transform,dt=it.padding,wt=it.project(r.LngLat.convert($)),Et=it.project(r.LngLat.convert(K)),Bt=wt.rotate(-ft*Math.PI/180),Ut=Et.rotate(-ft*Math.PI/180),Ht=new r.Point(Math.max(Bt.x,Ut.x),Math.max(Bt.y,Ut.y)),qt=new r.Point(Math.min(Bt.x,Ut.x),Math.min(Bt.y,Ut.y)),Jt=Ht.sub(qt),le=(it.width-(dt.left+dt.right+At.padding.left+At.padding.right))/Jt.x,fe=(it.height-(dt.top+dt.bottom+At.padding.top+At.padding.bottom))/Jt.y;if(!(fe<0||le<0)){var Le=Math.min(it.scaleZoom(it.scale*Math.min(le,fe)),At.maxZoom),Se=r.Point.convert(At.offset),Ce=(At.padding.left-At.padding.right)/2,Ne=(At.padding.top-At.padding.bottom)/2,Ee=new r.Point(Se.x+Ce,Se.y+Ne).mult(it.scale/it.zoomScale(Le));return{center:it.unproject(wt.add(Et).div(2).sub(Ee)),zoom:Le,bearing:ft}}r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},H.prototype.fitBounds=function($,K,ft){return this._fitInternal(this.cameraForBounds($,K),K,ft)},H.prototype.fitScreenCoordinates=function($,K,ft,At,N){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.Point.convert($)),this.transform.pointLocation(r.Point.convert(K)),ft,At),At,N)},H.prototype._fitInternal=function($,K,ft){return $?(delete(K=r.extend($,K)).padding,K.linear?this.easeTo(K,ft):this.flyTo(K,ft)):this},H.prototype.jumpTo=function($,K){this.stop();var ft=this.transform,At=!1,N=!1,Q=!1;return"zoom"in $&&ft.zoom!==+$.zoom&&(At=!0,ft.zoom=+$.zoom),$.center!==void 0&&(ft.center=r.LngLat.convert($.center)),"bearing"in $&&ft.bearing!==+$.bearing&&(N=!0,ft.bearing=+$.bearing),"pitch"in $&&ft.pitch!==+$.pitch&&(Q=!0,ft.pitch=+$.pitch),$.padding==null||ft.isPaddingEqual($.padding)||(ft.padding=$.padding),this.fire(new r.Event("movestart",K)).fire(new r.Event("move",K)),At&&this.fire(new r.Event("zoomstart",K)).fire(new r.Event("zoom",K)).fire(new r.Event("zoomend",K)),N&&this.fire(new r.Event("rotatestart",K)).fire(new r.Event("rotate",K)).fire(new r.Event("rotateend",K)),Q&&this.fire(new r.Event("pitchstart",K)).fire(new r.Event("pitch",K)).fire(new r.Event("pitchend",K)),this.fire(new r.Event("moveend",K))},H.prototype.easeTo=function($,K){var ft=this;this._stop(!1,$.easeId),(($=r.extend({offset:[0,0],duration:500,easing:r.ease},$)).animate===!1||!$.essential&&r.browser.prefersReducedMotion)&&($.duration=0);var At=this.transform,N=this.getZoom(),Q=this.getBearing(),it=this.getPitch(),dt=this.getPadding(),wt="zoom"in $?+$.zoom:N,Et="bearing"in $?this._normalizeBearing($.bearing,Q):Q,Bt="pitch"in $?+$.pitch:it,Ut="padding"in $?$.padding:At.padding,Ht=r.Point.convert($.offset),qt=At.centerPoint.add(Ht),Jt=At.pointLocation(qt),le=r.LngLat.convert($.center||Jt);this._normalizeCenter(le);var fe,Le,Se=At.project(Jt),Ce=At.project(le).sub(Se),Ne=At.zoomScale(wt-N);$.around&&(fe=r.LngLat.convert($.around),Le=At.locationPoint(fe));var Ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||wt!==N,this._rotating=this._rotating||Q!==Et,this._pitching=this._pitching||Bt!==it,this._padding=!At.isPaddingEqual(Ut),this._easeId=$.easeId,this._prepareEase(K,$.noMoveStart,Ee),clearTimeout(this._easeEndTimeoutID),this._ease(function(rr){if(ft._zooming&&(At.zoom=r.number(N,wt,rr)),ft._rotating&&(At.bearing=r.number(Q,Et,rr)),ft._pitching&&(At.pitch=r.number(it,Bt,rr)),ft._padding&&(At.interpolatePadding(dt,Ut,rr),qt=At.centerPoint.add(Ht)),fe)At.setLocationAtPoint(fe,Le);else{var Ye=At.zoomScale(At.zoom-N),Ve=wt>N?Math.min(2,Ne):Math.max(.5,Ne),dr=Math.pow(Ve,1-rr),vr=At.unproject(Se.add(Ce.mult(rr*dr)).mult(Ye));At.setLocationAtPoint(At.renderWorldCopies?vr.wrap():vr,qt)}ft._fireMoveEvents(K)},function(rr){ft._afterEase(K,rr)},$),this},H.prototype._prepareEase=function($,K,ft){ft===void 0&&(ft={}),this._moving=!0,K||ft.moving||this.fire(new r.Event("movestart",$)),this._zooming&&!ft.zooming&&this.fire(new r.Event("zoomstart",$)),this._rotating&&!ft.rotating&&this.fire(new r.Event("rotatestart",$)),this._pitching&&!ft.pitching&&this.fire(new r.Event("pitchstart",$))},H.prototype._fireMoveEvents=function($){this.fire(new r.Event("move",$)),this._zooming&&this.fire(new r.Event("zoom",$)),this._rotating&&this.fire(new r.Event("rotate",$)),this._pitching&&this.fire(new r.Event("pitch",$))},H.prototype._afterEase=function($,K){if(!this._easeId||!K||this._easeId!==K){delete this._easeId;var ft=this._zooming,At=this._rotating,N=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ft&&this.fire(new r.Event("zoomend",$)),At&&this.fire(new r.Event("rotateend",$)),N&&this.fire(new r.Event("pitchend",$)),this.fire(new r.Event("moveend",$))}},H.prototype.flyTo=function($,K){var ft=this;if(!$.essential&&r.browser.prefersReducedMotion){var At=r.pick($,["center","zoom","bearing","pitch","around"]);return this.jumpTo(At,K)}this.stop(),$=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},$);var N=this.transform,Q=this.getZoom(),it=this.getBearing(),dt=this.getPitch(),wt=this.getPadding(),Et="zoom"in $?r.clamp(+$.zoom,N.minZoom,N.maxZoom):Q,Bt="bearing"in $?this._normalizeBearing($.bearing,it):it,Ut="pitch"in $?+$.pitch:dt,Ht="padding"in $?$.padding:N.padding,qt=N.zoomScale(Et-Q),Jt=r.Point.convert($.offset),le=N.centerPoint.add(Jt),fe=N.pointLocation(le),Le=r.LngLat.convert($.center||fe);this._normalizeCenter(Le);var Se=N.project(fe),Ce=N.project(Le).sub(Se),Ne=$.curve,Ee=Math.max(N.width,N.height),rr=Ee/qt,Ye=Ce.mag();if("minZoom"in $){var Ve=r.clamp(Math.min($.minZoom,Q,Et),N.minZoom,N.maxZoom),dr=Ee/N.zoomScale(Ve-Q);Ne=Math.sqrt(dr/Ye*2)}var vr=Ne*Ne;function Fr(Br){var on=(rr*rr-Ee*Ee+(Br?-1:1)*vr*vr*Ye*Ye)/(2*(Br?rr:Ee)*vr*Ye);return Math.log(Math.sqrt(on*on+1)-on)}function zr(Br){return(Math.exp(Br)-Math.exp(-Br))/2}function $r(Br){return(Math.exp(Br)+Math.exp(-Br))/2}var Zr=Fr(0),cn=function(Br){return $r(Zr)/$r(Zr+Ne*Br)},ln=function(Br){return Ee*(($r(Zr)*(zr(on=Zr+Ne*Br)/$r(on))-zr(Zr))/vr)/Ye;var on},pn=(Fr(1)-Zr)/Ne;if(Math.abs(Ye)<1e-6||!isFinite(pn)){if(Math.abs(Ee-rr)<1e-6)return this.easeTo($,K);var bn=rr<Ee?-1:1;pn=Math.abs(Math.log(rr/Ee))/Ne,ln=function(){return 0},cn=function(Br){return Math.exp(bn*Ne*Br)}}if("duration"in $)$.duration=+$.duration;else{var On="screenSpeed"in $?+$.screenSpeed/Ne:+$.speed;$.duration=1e3*pn/On}return $.maxDuration&&$.duration>$.maxDuration&&($.duration=0),this._zooming=!0,this._rotating=it!==Bt,this._pitching=Ut!==dt,this._padding=!N.isPaddingEqual(Ht),this._prepareEase(K,!1),this._ease(function(Br){var on=Br*pn,dn=1/cn(on);N.zoom=Br===1?Et:Q+N.scaleZoom(dn),ft._rotating&&(N.bearing=r.number(it,Bt,Br)),ft._pitching&&(N.pitch=r.number(dt,Ut,Br)),ft._padding&&(N.interpolatePadding(wt,Ht,Br),le=N.centerPoint.add(Jt));var _n=Br===1?Le:N.unproject(Se.add(Ce.mult(ln(on))).mult(dn));N.setLocationAtPoint(N.renderWorldCopies?_n.wrap():_n,le),ft._fireMoveEvents(K)},function(){return ft._afterEase(K)},$),this},H.prototype.isEasing=function(){return!!this._easeFrameId},H.prototype.stop=function(){return this._stop()},H.prototype._stop=function($,K){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ft=this._onEaseEnd;delete this._onEaseEnd,ft.call(this,K)}if(!$){var At=this.handlers;At&&At.stop()}return this},H.prototype._ease=function($,K,ft){ft.animate===!1||ft.duration===0?($(1),K()):(this._easeStart=r.browser.now(),this._easeOptions=ft,this._onEaseFrame=$,this._onEaseEnd=K,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},H.prototype._renderFrameCallback=function(){var $=Math.min((r.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing($)),$<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},H.prototype._normalizeBearing=function($,K){$=r.wrap($,-180,180);var ft=Math.abs($-K);return Math.abs($-360-K)<ft&&($-=360),Math.abs($+360-K)<ft&&($+=360),$},H.prototype._normalizeCenter=function($){var K=this.transform;if(K.renderWorldCopies&&!K.lngRange){var ft=$.lng-K.center.lng;$.lng+=ft>180?-360:ft<-180?360:0}},H}(r.Evented),xa=function(F){F===void 0&&(F={}),this.options=F,r.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};xa.prototype.getDefaultPosition=function(){return"bottom-right"},xa.prototype.onAdd=function(F){var H=this.options&&this.options.compact;return this._map=F,this._container=h.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=h.create("div","mapboxgl-ctrl-attrib-inner",this._container),H&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),H===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},xa.prototype.onRemove=function(){h.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},xa.prototype._updateEditLink=function(){var F=this._editLink;F||(F=this._editLink=this._container.querySelector(".mapbox-improve-map"));var H=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(F){var $=H.reduce(function(K,ft,At){return ft.value&&(K+=ft.key+"="+ft.value+(At<H.length-1?"&":"")),K},"?");F.href=r.config.FEEDBACK_URL+"/"+$+(this._map._hash?this._map._hash.getHashString(!0):""),F.rel="noopener nofollow"}},xa.prototype._updateData=function(F){!F||F.sourceDataType!=="metadata"&&F.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},xa.prototype._updateAttributions=function(){if(this._map.style){var F=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?F=F.concat(this.options.customAttribution.map(function(Q){return typeof Q!="string"?"":Q})):typeof this.options.customAttribution=="string"&&F.push(this.options.customAttribution)),this._map.style.stylesheet){var H=this._map.style.stylesheet;this.styleOwner=H.owner,this.styleId=H.id}var $=this._map.style.sourceCaches;for(var K in $){var ft=$[K];if(ft.used){var At=ft.getSource();At.attribution&&F.indexOf(At.attribution)<0&&F.push(At.attribution)}}F.sort(function(Q,it){return Q.length-it.length});var N=(F=F.filter(function(Q,it){for(var dt=it+1;dt<F.length;dt++)if(F[dt].indexOf(Q)>=0)return!1;return!0})).join(" | ");N!==this._attribHTML&&(this._attribHTML=N,F.length?(this._innerContainer.innerHTML=N,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},xa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Bi=function(){r.bindAll(["_updateLogo"],this),r.bindAll(["_updateCompact"],this)};Bi.prototype.onAdd=function(F){this._map=F,this._container=h.create("div","mapboxgl-ctrl");var H=h.create("a","mapboxgl-ctrl-logo");return H.target="_blank",H.rel="noopener nofollow",H.href="https://www.mapbox.com/",H.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),H.setAttribute("rel","noopener nofollow"),this._container.appendChild(H),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Bi.prototype.onRemove=function(){h.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Bi.prototype.getDefaultPosition=function(){return"bottom-left"},Bi.prototype._updateLogo=function(F){F&&F.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Bi.prototype._logoRequired=function(){if(this._map.style){var F=this._map.style.sourceCaches;for(var H in F)if(F[H].getSource().mapbox_logo)return!0;return!1}},Bi.prototype._updateCompact=function(){var F=this._container.children;if(F.length){var H=F[0];this._map.getCanvasContainer().offsetWidth<250?H.classList.add("mapboxgl-compact"):H.classList.remove("mapboxgl-compact")}};var ro=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ro.prototype.add=function(F){var H=++this._id;return this._queue.push({callback:F,id:H,cancelled:!1}),H},ro.prototype.remove=function(F){for(var H=this._currentlyRunning,$=0,K=H?this._queue.concat(H):this._queue;$<K.length;$+=1){var ft=K[$];if(ft.id===F)return void(ft.cancelled=!0)}},ro.prototype.run=function(F){F===void 0&&(F=0);var H=this._currentlyRunning=this._queue;this._queue=[];for(var $=0,K=H;$<K.length;$+=1){var ft=K[$];if(!ft.cancelled&&(ft.callback(F),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ro.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var rl={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ai=r.window.HTMLImageElement,ti=r.window.HTMLElement,Ea=r.window.ImageBitmap,no=60,Wa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:no,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Hs=function(F){function H(K){var ft=this;if((K=r.extend({},Wa,K)).minZoom!=null&&K.maxZoom!=null&&K.minZoom>K.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(K.minPitch!=null&&K.maxPitch!=null&&K.minPitch>K.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(K.minPitch!=null&&K.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(K.maxPitch!=null&&K.maxPitch>no)throw new Error("maxPitch must be less than or equal to 60");var At=new Hn(K.minZoom,K.maxZoom,K.minPitch,K.maxPitch,K.renderWorldCopies);if(F.call(this,At,K),this._interactive=K.interactive,this._maxTileCacheSize=K.maxTileCacheSize,this._failIfMajorPerformanceCaveat=K.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=K.preserveDrawingBuffer,this._antialias=K.antialias,this._trackResize=K.trackResize,this._bearingSnap=K.bearingSnap,this._refreshExpiredTiles=K.refreshExpiredTiles,this._fadeDuration=K.fadeDuration,this._crossSourceCollisions=K.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=K.collectResourceTiming,this._renderTaskQueue=new ro,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},rl,K.locale),this._requestManager=new r.RequestManager(K.transformRequest,K.accessToken),typeof K.container=="string"){if(this._container=r.window.document.getElementById(K.container),!this._container)throw new Error("Container '"+K.container+"' not found.")}else{if(!(K.container instanceof ti))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=K.container}if(K.maxBounds&&this.setMaxBounds(K.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ft._update(!1)}),this.on("moveend",function(){return ft._update(!1)}),this.on("zoom",function(){return ft._update(!0)}),r.window!==void 0&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ai(this,K);var N=typeof K.hash=="string"&&K.hash||void 0;this._hash=K.hash&&new Oo(N).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:K.center,zoom:K.zoom,bearing:K.bearing,pitch:K.pitch}),K.bounds&&(this.resize(),this.fitBounds(K.bounds,r.extend({},K.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=K.localIdeographFontFamily,K.style&&this.setStyle(K.style,{localIdeographFontFamily:K.localIdeographFontFamily}),K.attributionControl&&this.addControl(new xa({customAttribution:K.customAttribution})),this.addControl(new Bi,K.logoPosition),this.on("style.load",function(){ft.transform.unmodified&&ft.jumpTo(ft.style.stylesheet)}),this.on("data",function(Q){ft._update(Q.dataType==="style"),ft.fire(new r.Event(Q.dataType+"data",Q))}),this.on("dataloading",function(Q){ft.fire(new r.Event(Q.dataType+"dataloading",Q))})}F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H;var $={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return H.prototype._getMapId=function(){return this._mapId},H.prototype.addControl=function(K,ft){if(ft===void 0&&K.getDefaultPosition&&(ft=K.getDefaultPosition()),ft===void 0&&(ft="top-right"),!K||!K.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var At=K.onAdd(this);this._controls.push(K);var N=this._controlPositions[ft];return ft.indexOf("bottom")!==-1?N.insertBefore(At,N.firstChild):N.appendChild(At),this},H.prototype.removeControl=function(K){if(!K||!K.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ft=this._controls.indexOf(K);return ft>-1&&this._controls.splice(ft,1),K.onRemove(this),this},H.prototype.resize=function(K){var ft=this._containerDimensions(),At=ft[0],N=ft[1];this._resizeCanvas(At,N),this.transform.resize(At,N),this.painter.resize(At,N);var Q=!this._moving;return Q&&(this.stop(),this.fire(new r.Event("movestart",K)).fire(new r.Event("move",K))),this.fire(new r.Event("resize",K)),Q&&this.fire(new r.Event("moveend",K)),this},H.prototype.getBounds=function(){return this.transform.getBounds()},H.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},H.prototype.setMaxBounds=function(K){return this.transform.setMaxBounds(r.LngLatBounds.convert(K)),this._update()},H.prototype.setMinZoom=function(K){if((K=K??-2)>=-2&&K<=this.transform.maxZoom)return this.transform.minZoom=K,this._update(),this.getZoom()<K&&this.setZoom(K),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},H.prototype.getMinZoom=function(){return this.transform.minZoom},H.prototype.setMaxZoom=function(K){if((K=K??22)>=this.transform.minZoom)return this.transform.maxZoom=K,this._update(),this.getZoom()>K&&this.setZoom(K),this;throw new Error("maxZoom must be greater than the current minZoom")},H.prototype.getMaxZoom=function(){return this.transform.maxZoom},H.prototype.setMinPitch=function(K){if((K=K??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(K>=0&&K<=this.transform.maxPitch)return this.transform.minPitch=K,this._update(),this.getPitch()<K&&this.setPitch(K),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},H.prototype.getMinPitch=function(){return this.transform.minPitch},H.prototype.setMaxPitch=function(K){if((K=K??no)>no)throw new Error("maxPitch must be less than or equal to 60");if(K>=this.transform.minPitch)return this.transform.maxPitch=K,this._update(),this.getPitch()>K&&this.setPitch(K),this;throw new Error("maxPitch must be greater than the current minPitch")},H.prototype.getMaxPitch=function(){return this.transform.maxPitch},H.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},H.prototype.setRenderWorldCopies=function(K){return this.transform.renderWorldCopies=K,this._update()},H.prototype.project=function(K){return this.transform.locationPoint(r.LngLat.convert(K))},H.prototype.unproject=function(K){return this.transform.pointLocation(r.Point.convert(K))},H.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},H.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},H.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},H.prototype._createDelegatedListener=function(K,ft,At){var N,Q=this;if(K==="mouseenter"||K==="mouseover"){var it=!1;return{layer:ft,listener:At,delegates:{mousemove:function(wt){var Et=Q.getLayer(ft)?Q.queryRenderedFeatures(wt.point,{layers:[ft]}):[];Et.length?it||(it=!0,At.call(Q,new xi(K,Q,wt.originalEvent,{features:Et}))):it=!1},mouseout:function(){it=!1}}}}if(K==="mouseleave"||K==="mouseout"){var dt=!1;return{layer:ft,listener:At,delegates:{mousemove:function(wt){(Q.getLayer(ft)?Q.queryRenderedFeatures(wt.point,{layers:[ft]}):[]).length?dt=!0:dt&&(dt=!1,At.call(Q,new xi(K,Q,wt.originalEvent)))},mouseout:function(wt){dt&&(dt=!1,At.call(Q,new xi(K,Q,wt.originalEvent)))}}}}return{layer:ft,listener:At,delegates:(N={},N[K]=function(wt){var Et=Q.getLayer(ft)?Q.queryRenderedFeatures(wt.point,{layers:[ft]}):[];Et.length&&(wt.features=Et,At.call(Q,wt),delete wt.features)},N)}},H.prototype.on=function(K,ft,At){if(At===void 0)return F.prototype.on.call(this,K,ft);var N=this._createDelegatedListener(K,ft,At);for(var Q in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[K]=this._delegatedListeners[K]||[],this._delegatedListeners[K].push(N),N.delegates)this.on(Q,N.delegates[Q]);return this},H.prototype.once=function(K,ft,At){if(At===void 0)return F.prototype.once.call(this,K,ft);var N=this._createDelegatedListener(K,ft,At);for(var Q in N.delegates)this.once(Q,N.delegates[Q]);return this},H.prototype.off=function(K,ft,At){var N=this;return At===void 0?F.prototype.off.call(this,K,ft):(this._delegatedListeners&&this._delegatedListeners[K]&&function(Q){for(var it=Q[K],dt=0;dt<it.length;dt++){var wt=it[dt];if(wt.layer===ft&&wt.listener===At){for(var Et in wt.delegates)N.off(Et,wt.delegates[Et]);return it.splice(dt,1),N}}}(this._delegatedListeners),this)},H.prototype.queryRenderedFeatures=function(K,ft){if(!this.style)return[];var At;if(ft!==void 0||K===void 0||K instanceof r.Point||Array.isArray(K)||(ft=K,K=void 0),ft=ft||{},(K=K||[[0,0],[this.transform.width,this.transform.height]])instanceof r.Point||typeof K[0]=="number")At=[r.Point.convert(K)];else{var N=r.Point.convert(K[0]),Q=r.Point.convert(K[1]);At=[N,new r.Point(Q.x,N.y),Q,new r.Point(N.x,Q.y),N]}return this.style.queryRenderedFeatures(At,ft,this.transform)},H.prototype.querySourceFeatures=function(K,ft){return this.style.querySourceFeatures(K,ft)},H.prototype.setStyle=function(K,ft){return(ft=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ft)).diff!==!1&&ft.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&K?(this._diffStyle(K,ft),this):(this._localIdeographFontFamily=ft.localIdeographFontFamily,this._updateStyle(K,ft))},H.prototype._getUIString=function(K){var ft=this._locale[K];if(ft==null)throw new Error("Missing UI string '"+K+"'");return ft},H.prototype._updateStyle=function(K,ft){return this.style&&(this.style.setEventedParent(null),this.style._remove()),K?(this.style=new rn(this,ft||{}),this.style.setEventedParent(this,{style:this.style}),typeof K=="string"?this.style.loadURL(K):this.style.loadJSON(K),this):(delete this.style,this)},H.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new rn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},H.prototype._diffStyle=function(K,ft){var At=this;if(typeof K=="string"){var N=this._requestManager.normalizeStyleURL(K),Q=this._requestManager.transformRequest(N,r.ResourceType.Style);r.getJSON(Q,function(it,dt){it?At.fire(new r.ErrorEvent(it)):dt&&At._updateDiff(dt,ft)})}else typeof K=="object"&&this._updateDiff(K,ft)},H.prototype._updateDiff=function(K,ft){try{this.style.setState(K)&&this._update(!0)}catch(At){r.warnOnce("Unable to perform style diff: "+(At.message||At.error||At)+".  Rebuilding the style from scratch."),this._updateStyle(K,ft)}},H.prototype.getStyle=function(){if(this.style)return this.style.serialize()},H.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")},H.prototype.addSource=function(K,ft){return this._lazyInitEmptyStyle(),this.style.addSource(K,ft),this._update(!0)},H.prototype.isSourceLoaded=function(K){var ft=this.style&&this.style.sourceCaches[K];if(ft!==void 0)return ft.loaded();this.fire(new r.ErrorEvent(new Error("There is no source with ID '"+K+"'")))},H.prototype.areTilesLoaded=function(){var K=this.style&&this.style.sourceCaches;for(var ft in K){var At=K[ft]._tiles;for(var N in At){var Q=At[N];if(Q.state!=="loaded"&&Q.state!=="errored")return!1}}return!0},H.prototype.addSourceType=function(K,ft,At){return this._lazyInitEmptyStyle(),this.style.addSourceType(K,ft,At)},H.prototype.removeSource=function(K){return this.style.removeSource(K),this._update(!0)},H.prototype.getSource=function(K){return this.style.getSource(K)},H.prototype.addImage=function(K,ft,At){At===void 0&&(At={});var N=At.pixelRatio;N===void 0&&(N=1);var Q=At.sdf;Q===void 0&&(Q=!1);var it=At.stretchX,dt=At.stretchY,wt=At.content;if(this._lazyInitEmptyStyle(),ft instanceof Ai||Ea&&ft instanceof Ea){var Et=r.browser.getImageData(ft),Bt=Et.width,Ut=Et.height,Ht=Et.data;this.style.addImage(K,{data:new r.RGBAImage({width:Bt,height:Ut},Ht),pixelRatio:N,stretchX:it,stretchY:dt,content:wt,sdf:Q,version:0})}else{if(ft.width===void 0||ft.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var qt=ft.width,Jt=ft.height,le=ft.data,fe=ft;this.style.addImage(K,{data:new r.RGBAImage({width:qt,height:Jt},new Uint8Array(le)),pixelRatio:N,stretchX:it,stretchY:dt,content:wt,sdf:Q,version:0,userImage:fe}),fe.onAdd&&fe.onAdd(this,K)}},H.prototype.updateImage=function(K,ft){var At=this.style.getImage(K);if(!At)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var N=ft instanceof Ai||Ea&&ft instanceof Ea?r.browser.getImageData(ft):ft,Q=N.width,it=N.height,dt=N.data;if(Q===void 0||it===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(Q!==At.data.width||it!==At.data.height)return this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var wt=!(ft instanceof Ai||Ea&&ft instanceof Ea);At.data.replace(dt,wt),this.style.updateImage(K,At)},H.prototype.hasImage=function(K){return K?!!this.style.getImage(K):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)},H.prototype.removeImage=function(K){this.style.removeImage(K)},H.prototype.loadImage=function(K,ft){r.getImage(this._requestManager.transformRequest(K,r.ResourceType.Image),ft)},H.prototype.listImages=function(){return this.style.listImages()},H.prototype.addLayer=function(K,ft){return this._lazyInitEmptyStyle(),this.style.addLayer(K,ft),this._update(!0)},H.prototype.moveLayer=function(K,ft){return this.style.moveLayer(K,ft),this._update(!0)},H.prototype.removeLayer=function(K){return this.style.removeLayer(K),this._update(!0)},H.prototype.getLayer=function(K){return this.style.getLayer(K)},H.prototype.setLayerZoomRange=function(K,ft,At){return this.style.setLayerZoomRange(K,ft,At),this._update(!0)},H.prototype.setFilter=function(K,ft,At){return At===void 0&&(At={}),this.style.setFilter(K,ft,At),this._update(!0)},H.prototype.getFilter=function(K){return this.style.getFilter(K)},H.prototype.setPaintProperty=function(K,ft,At,N){return N===void 0&&(N={}),this.style.setPaintProperty(K,ft,At,N),this._update(!0)},H.prototype.getPaintProperty=function(K,ft){return this.style.getPaintProperty(K,ft)},H.prototype.setLayoutProperty=function(K,ft,At,N){return N===void 0&&(N={}),this.style.setLayoutProperty(K,ft,At,N),this._update(!0)},H.prototype.getLayoutProperty=function(K,ft){return this.style.getLayoutProperty(K,ft)},H.prototype.setLight=function(K,ft){return ft===void 0&&(ft={}),this._lazyInitEmptyStyle(),this.style.setLight(K,ft),this._update(!0)},H.prototype.getLight=function(){return this.style.getLight()},H.prototype.setFeatureState=function(K,ft){return this.style.setFeatureState(K,ft),this._update()},H.prototype.removeFeatureState=function(K,ft){return this.style.removeFeatureState(K,ft),this._update()},H.prototype.getFeatureState=function(K){return this.style.getFeatureState(K)},H.prototype.getContainer=function(){return this._container},H.prototype.getCanvasContainer=function(){return this._canvasContainer},H.prototype.getCanvas=function(){return this._canvas},H.prototype._containerDimensions=function(){var K=0,ft=0;return this._container&&(K=this._container.clientWidth||400,ft=this._container.clientHeight||300),[K,ft]},H.prototype._detectMissingCSS=function(){r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},H.prototype._setupContainer=function(){var K=this._container;K.classList.add("mapboxgl-map"),(this._missingCSSCanary=h.create("div","mapboxgl-canary",K)).style.visibility="hidden",this._detectMissingCSS();var ft=this._canvasContainer=h.create("div","mapboxgl-canvas-container",K);this._interactive&&ft.classList.add("mapboxgl-interactive"),this._canvas=h.create("canvas","mapboxgl-canvas",ft),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var At=this._containerDimensions();this._resizeCanvas(At[0],At[1]);var N=this._controlContainer=h.create("div","mapboxgl-control-container",K),Q=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(it){Q[it]=h.create("div","mapboxgl-ctrl-"+it,N)})},H.prototype._resizeCanvas=function(K,ft){var At=r.browser.devicePixelRatio||1;this._canvas.width=At*K,this._canvas.height=At*ft,this._canvas.style.width=K+"px",this._canvas.style.height=ft+"px"},H.prototype._setupPainter=function(){var K=r.extend({},m.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ft=this._canvas.getContext("webgl",K)||this._canvas.getContext("experimental-webgl",K);ft?(this.painter=new ii(ft,this.transform),r.webpSupported.testSupport(ft)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))},H.prototype._contextLost=function(K){K.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:K}))},H.prototype._contextRestored=function(K){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:K}))},H.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},H.prototype._update=function(K){return this.style?(this._styleDirty=this._styleDirty||K,this._sourcesDirty=!0,this.triggerRepaint(),this):this},H.prototype._requestRenderFrame=function(K){return this._update(),this._renderTaskQueue.add(K)},H.prototype._cancelRenderFrame=function(K){this._renderTaskQueue.remove(K)},H.prototype._render=function(K){var ft,At=this,N=0,Q=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ft=Q.createQueryEXT(),Q.beginQueryEXT(Q.TIME_ELAPSED_EXT,ft),N=r.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(K),!this._removed){var it=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var dt=this.transform.zoom,wt=r.browser.now();this.style.zoomHistory.update(dt,wt);var Et=new r.EvaluationParameters(dt,{now:wt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Bt=Et.crossFadingFactor();Bt===1&&Bt===this._crossFadingFactor||(it=!0,this._crossFadingFactor=Bt),this.style.update(Et)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||it)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ut=r.browser.now()-N;Q.endQueryEXT(Q.TIME_ELAPSED_EXT,ft),setTimeout(function(){var qt=Q.getQueryObjectEXT(ft,Q.QUERY_RESULT_EXT)/1e6;Q.deleteQueryEXT(ft),At.fire(new r.Event("gpu-timing-frame",{cpuTime:Ut,gpuTime:qt}))},50)}if(this.listens("gpu-timing-layer")){var Ht=this.painter.collectGpuTimers();setTimeout(function(){var qt=At.painter.queryGpuTimers(Ht);At.fire(new r.Event("gpu-timing-layer",{layerTimes:qt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new r.Event("idle"))),this}},H.prototype.remove=function(){this._hash&&this._hash.remove();for(var K=0,ft=this._controls;K<ft.length;K+=1)ft[K].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),r.window!==void 0&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1));var At=this.painter.context.gl.getExtension("WEBGL_lose_context");At&&At.loseContext(),Fo(this._canvasContainer),Fo(this._controlContainer),Fo(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new r.Event("remove"))},H.prototype.triggerRepaint=function(){var K=this;this.style&&!this._frame&&(this._frame=r.browser.frame(function(ft){K._frame=null,K._render(ft)}))},H.prototype._onWindowOnline=function(){this._update()},H.prototype._onWindowResize=function(K){this._trackResize&&this.resize({originalEvent:K})._update()},$.showTileBoundaries.get=function(){return!!this._showTileBoundaries},$.showTileBoundaries.set=function(K){this._showTileBoundaries!==K&&(this._showTileBoundaries=K,this._update())},$.showPadding.get=function(){return!!this._showPadding},$.showPadding.set=function(K){this._showPadding!==K&&(this._showPadding=K,this._update())},$.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},$.showCollisionBoxes.set=function(K){this._showCollisionBoxes!==K&&(this._showCollisionBoxes=K,K?this.style._generateCollisionBoxes():this._update())},$.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},$.showOverdrawInspector.set=function(K){this._showOverdrawInspector!==K&&(this._showOverdrawInspector=K,this._update())},$.repaint.get=function(){return!!this._repaint},$.repaint.set=function(K){this._repaint!==K&&(this._repaint=K,this.triggerRepaint())},$.vertices.get=function(){return!!this._vertices},$.vertices.set=function(K){this._vertices=K,this._update()},H.prototype._setCacheLimits=function(K,ft){r.setCacheLimits(K,ft)},$.version.get=function(){return r.version},Object.defineProperties(H.prototype,$),H}(Es);function Fo(F){F.parentNode&&F.parentNode.removeChild(F)}var ns={showCompass:!0,showZoom:!0,visualizePitch:!1},Ri=function(F){var H=this;this.options=r.extend({},ns,F),this._container=h.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function($){return $.preventDefault()}),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function($){return H._map.zoomIn({},{originalEvent:$})}),h.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function($){return H._map.zoomOut({},{originalEvent:$})}),h.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function($){H.options.visualizePitch?H._map.resetNorthPitch({},{originalEvent:$}):H._map.resetNorth({},{originalEvent:$})}),this._compassIcon=h.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ri.prototype._updateZoomButtons=function(){var F=this._map.getZoom();this._zoomInButton.disabled=F===this._map.getMaxZoom(),this._zoomOutButton.disabled=F===this._map.getMinZoom()},Ri.prototype._rotateCompassArrow=function(){var F=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=F},Ri.prototype.onAdd=function(F){return this._map=F,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qi(this._map,this._compass,this.options.visualizePitch)),this._container},Ri.prototype.onRemove=function(){h.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ri.prototype._createButton=function(F,H){var $=h.create("button",F,this._container);return $.type="button",$.addEventListener("click",H),$},Ri.prototype._setButtonTitle=function(F,H){var $=this._map._getUIString("NavigationControl."+H);F.title=$,F.setAttribute("aria-label",$)};var Qi=function(F,H,$){$===void 0&&($=!1),this._clickTolerance=10,this.element=H,this.mouseRotate=new Ra({clickTolerance:F.dragRotate._mouseRotate._clickTolerance}),this.map=F,$&&(this.mousePitch=new Gs({clickTolerance:F.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener(H,"mousedown",this.mousedown),h.addEventListener(H,"touchstart",this.touchstart,{passive:!1}),h.addEventListener(H,"touchmove",this.touchmove),h.addEventListener(H,"touchend",this.touchend),h.addEventListener(H,"touchcancel",this.reset)};function An(F,H,$){if(F=new r.LngLat(F.lng,F.lat),H){var K=new r.LngLat(F.lng-360,F.lat),ft=new r.LngLat(F.lng+360,F.lat),At=$.locationPoint(F).distSqr(H);$.locationPoint(K).distSqr(H)<At?F=K:$.locationPoint(ft).distSqr(H)<At&&(F=ft)}for(;Math.abs(F.lng-$.center.lng)>180;){var N=$.locationPoint(F);if(N.x>=0&&N.y>=0&&N.x<=$.width&&N.y<=$.height)break;F.lng>$.center.lng?F.lng-=360:F.lng+=360}return F}Qi.prototype.down=function(F,H){this.mouseRotate.mousedown(F,H),this.mousePitch&&this.mousePitch.mousedown(F,H),h.disableDrag()},Qi.prototype.move=function(F,H){var $=this.map,K=this.mouseRotate.mousemoveWindow(F,H);if(K&&K.bearingDelta&&$.setBearing($.getBearing()+K.bearingDelta),this.mousePitch){var ft=this.mousePitch.mousemoveWindow(F,H);ft&&ft.pitchDelta&&$.setPitch($.getPitch()+ft.pitchDelta)}},Qi.prototype.off=function(){var F=this.element;h.removeEventListener(F,"mousedown",this.mousedown),h.removeEventListener(F,"touchstart",this.touchstart,{passive:!1}),h.removeEventListener(F,"touchmove",this.touchmove),h.removeEventListener(F,"touchend",this.touchend),h.removeEventListener(F,"touchcancel",this.reset),this.offTemp()},Qi.prototype.offTemp=function(){h.enableDrag(),h.removeEventListener(r.window,"mousemove",this.mousemove),h.removeEventListener(r.window,"mouseup",this.mouseup)},Qi.prototype.mousedown=function(F){this.down(r.extend({},F,{ctrlKey:!0,preventDefault:function(){return F.preventDefault()}}),h.mousePos(this.element,F)),h.addEventListener(r.window,"mousemove",this.mousemove),h.addEventListener(r.window,"mouseup",this.mouseup)},Qi.prototype.mousemove=function(F){this.move(F,h.mousePos(this.element,F))},Qi.prototype.mouseup=function(F){this.mouseRotate.mouseupWindow(F),this.mousePitch&&this.mousePitch.mouseupWindow(F),this.offTemp()},Qi.prototype.touchstart=function(F){F.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=h.touchPos(this.element,F.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return F.preventDefault()}},this._startPos))},Qi.prototype.touchmove=function(F){F.targetTouches.length!==1?this.reset():(this._lastPos=h.touchPos(this.element,F.targetTouches)[0],this.move({preventDefault:function(){return F.preventDefault()}},this._lastPos))},Qi.prototype.touchend=function(F){F.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Qi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ln={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ds(F,H,$){var K=F.classList;for(var ft in Ln)K.remove("mapboxgl-"+$+"-anchor-"+ft);K.add("mapboxgl-"+$+"-anchor-"+H)}var ua,zo=function(F){function H($,K){var ft=this;if(F.call(this),($ instanceof r.window.HTMLElement||K)&&($=r.extend({element:$},K)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=$&&$.anchor||"center",this._color=$&&$.color||"#3FB1CE",this._draggable=$&&$.draggable||!1,this._state="inactive",this._rotation=$&&$.rotation||0,this._rotationAlignment=$&&$.rotationAlignment||"auto",this._pitchAlignment=$&&$.pitchAlignment&&$.pitchAlignment!=="auto"?$.pitchAlignment:this._rotationAlignment,$&&$.element)this._element=$.element,this._offset=r.Point.convert($&&$.offset||[0,0]);else{this._defaultMarker=!0,this._element=h.create("div"),this._element.setAttribute("aria-label","Map marker");var At=h.createNS("http://www.w3.org/2000/svg","svg");At.setAttributeNS(null,"display","block"),At.setAttributeNS(null,"height","41px"),At.setAttributeNS(null,"width","27px"),At.setAttributeNS(null,"viewBox","0 0 27 41");var N=h.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"stroke","none"),N.setAttributeNS(null,"stroke-width","1"),N.setAttributeNS(null,"fill","none"),N.setAttributeNS(null,"fill-rule","evenodd");var Q=h.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill-rule","nonzero");var it=h.createNS("http://www.w3.org/2000/svg","g");it.setAttributeNS(null,"transform","translate(3.0, 29.0)"),it.setAttributeNS(null,"fill","#000000");for(var dt=0,wt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];dt<wt.length;dt+=1){var Et=wt[dt],Bt=h.createNS("http://www.w3.org/2000/svg","ellipse");Bt.setAttributeNS(null,"opacity","0.04"),Bt.setAttributeNS(null,"cx","10.5"),Bt.setAttributeNS(null,"cy","5.80029008"),Bt.setAttributeNS(null,"rx",Et.rx),Bt.setAttributeNS(null,"ry",Et.ry),it.appendChild(Bt)}var Ut=h.createNS("http://www.w3.org/2000/svg","g");Ut.setAttributeNS(null,"fill",this._color);var Ht=h.createNS("http://www.w3.org/2000/svg","path");Ht.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ut.appendChild(Ht);var qt=h.createNS("http://www.w3.org/2000/svg","g");qt.setAttributeNS(null,"opacity","0.25"),qt.setAttributeNS(null,"fill","#000000");var Jt=h.createNS("http://www.w3.org/2000/svg","path");Jt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),qt.appendChild(Jt);var le=h.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(6.0, 7.0)"),le.setAttributeNS(null,"fill","#FFFFFF");var fe=h.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Le=h.createNS("http://www.w3.org/2000/svg","circle");Le.setAttributeNS(null,"fill","#000000"),Le.setAttributeNS(null,"opacity","0.25"),Le.setAttributeNS(null,"cx","5.5"),Le.setAttributeNS(null,"cy","5.5"),Le.setAttributeNS(null,"r","5.4999962");var Se=h.createNS("http://www.w3.org/2000/svg","circle");Se.setAttributeNS(null,"fill","#FFFFFF"),Se.setAttributeNS(null,"cx","5.5"),Se.setAttributeNS(null,"cy","5.5"),Se.setAttributeNS(null,"r","5.4999962"),fe.appendChild(Le),fe.appendChild(Se),Q.appendChild(it),Q.appendChild(Ut),Q.appendChild(qt),Q.appendChild(le),Q.appendChild(fe),At.appendChild(Q),this._element.appendChild(At),this._offset=r.Point.convert($&&$.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ce){Ce.preventDefault()}),this._element.addEventListener("mousedown",function(Ce){Ce.preventDefault()}),this._element.addEventListener("focus",function(){var Ce=ft._map.getContainer();Ce.scrollTop=0,Ce.scrollLeft=0}),ds(this._element,this._anchor,"marker"),this._popup=null}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.addTo=function($){return this.remove(),this._map=$,$.getCanvasContainer().appendChild(this._element),$.on("move",this._update),$.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},H.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),h.remove(this._element),this._popup&&this._popup.remove(),this},H.prototype.getLngLat=function(){return this._lngLat},H.prototype.setLngLat=function($){return this._lngLat=r.LngLat.convert($),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},H.prototype.getElement=function(){return this._element},H.prototype.setPopup=function($){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),$){if(!("offset"in $.options)){var K=13.5,ft=Math.sqrt(Math.pow(K,2)/2);$.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ft,-1*(24.6+ft)],"bottom-right":[-ft,-1*(24.6+ft)],left:[K,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=$,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},H.prototype._onKeyPress=function($){var K=$.code,ft=$.charCode||$.keyCode;K!=="Space"&&K!=="Enter"&&ft!==32&&ft!==13||this.togglePopup()},H.prototype._onMapClick=function($){var K=$.originalEvent.target,ft=this._element;this._popup&&(K===ft||ft.contains(K))&&this.togglePopup()},H.prototype.getPopup=function(){return this._popup},H.prototype.togglePopup=function(){var $=this._popup;return $?($.isOpen()?$.remove():$.addTo(this._map),this):this},H.prototype._update=function($){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=An(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var K="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?K="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(K="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ft="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?ft="rotateX(0deg)":this._pitchAlignment==="map"&&(ft="rotateX("+this._map.getPitch()+"deg)"),$&&$.type!=="moveend"||(this._pos=this._pos.round()),h.setTransform(this._element,Ln[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ft+" "+K)}},H.prototype.getOffset=function(){return this._offset},H.prototype.setOffset=function($){return this._offset=r.Point.convert($),this._update(),this},H.prototype._onMove=function($){this._pos=$.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag"))},H.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"},H.prototype._addDragHandler=function($){this._element.contains($.originalEvent.target)&&($.preventDefault(),this._positionDelta=$.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},H.prototype.setDraggable=function($){return this._draggable=!!$,this._map&&($?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},H.prototype.isDraggable=function(){return this._draggable},H.prototype.setRotation=function($){return this._rotation=$||0,this._update(),this},H.prototype.getRotation=function(){return this._rotation},H.prototype.setRotationAlignment=function($){return this._rotationAlignment=$||"auto",this._update(),this},H.prototype.getRotationAlignment=function(){return this._rotationAlignment},H.prototype.setPitchAlignment=function($){return this._pitchAlignment=$&&$!=="auto"?$:this._rotationAlignment,this._update(),this},H.prototype.getPitchAlignment=function(){return this._pitchAlignment},H}(r.Evented),ta={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},gs=0,ea=!1,No=function(F){function H($){F.call(this),this.options=r.extend({},ta,$),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.onAdd=function($){return this._map=$,this._container=h.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),K=this._setupUI,ua!==void 0?K(ua):r.window.navigator.permissions!==void 0?r.window.navigator.permissions.query({name:"geolocation"}).then(function(ft){ua=ft.state!=="denied",K(ua)}):(ua=!!r.window.navigator.geolocation,K(ua)),this._container;var K},H.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),h.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,gs=0,ea=!1},H.prototype._isOutOfMapMaxBounds=function($){var K=this._map.getMaxBounds(),ft=$.coords;return K&&(ft.longitude<K.getWest()||ft.longitude>K.getEast()||ft.latitude<K.getSouth()||ft.latitude>K.getNorth())},H.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},H.prototype._onSuccess=function($){if(this._map){if(this._isOutOfMapMaxBounds($))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",$)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=$,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker($),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera($),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",$)),this._finish()}},H.prototype._updateCamera=function($){var K=new r.LngLat($.coords.longitude,$.coords.latitude),ft=$.coords.accuracy,At=this._map.getBearing(),N=r.extend({bearing:At},this.options.fitBoundsOptions);this._map.fitBounds(K.toBounds(ft),N,{geolocateSource:!0})},H.prototype._updateMarker=function($){if($){var K=new r.LngLat($.coords.longitude,$.coords.latitude);this._accuracyCircleMarker.setLngLat(K).addTo(this._map),this._userLocationDotMarker.setLngLat(K).addTo(this._map),this._accuracy=$.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},H.prototype._updateCircleRadius=function(){var $=this._map._container.clientHeight/2,K=this._map.unproject([0,$]),ft=this._map.unproject([1,$]),At=K.distanceTo(ft),N=Math.ceil(2*this._accuracy/At);this._circleElement.style.width=N+"px",this._circleElement.style.height=N+"px"},H.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},H.prototype._onError=function($){if(this._map){if(this.options.trackUserLocation)if($.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var K=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=K,this._geolocateButton.setAttribute("aria-label",K),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if($.code===3&&ea)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",$)),this._finish()}},H.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},H.prototype._setupUI=function($){var K=this;if(this._container.addEventListener("contextmenu",function(N){return N.preventDefault()}),this._geolocateButton=h.create("button","mapboxgl-ctrl-geolocate",this._container),h.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",$===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ft=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ft,this._geolocateButton.setAttribute("aria-label",ft)}else{var At=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=At,this._geolocateButton.setAttribute("aria-label",At)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=h.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new zo(this._dotElement),this._circleElement=h.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(N){var Q=N.originalEvent&&N.originalEvent.type==="resize";N.geolocateSource||K._watchState!=="ACTIVE_LOCK"||Q||(K._watchState="BACKGROUND",K._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),K._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),K.fire(new r.Event("trackuserlocationend")))})},H.prototype.trigger=function(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":gs--,ea=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var $;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++gs>1?($={maximumAge:6e5,timeout:0},ea=!0):($=this.options.positionOptions,ea=!1),this._geolocationWatchID=r.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,$)}}else r.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},H.prototype._clearWatch=function(){r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},H}(r.Evented),Bo={maxWidth:100,unit:"metric"},Pn=function(F){this.options=r.extend({},Bo,F),r.bindAll(["_onMove","setUnit"],this)};function ji(F,H,$){var K=$&&$.maxWidth||100,ft=F._container.clientHeight/2,At=F.unproject([0,ft]),N=F.unproject([K,ft]),Q=At.distanceTo(N);if($&&$.unit==="imperial"){var it=3.2808*Q;it>5280?io(H,K,it/5280,F._getUIString("ScaleControl.Miles")):io(H,K,it,F._getUIString("ScaleControl.Feet"))}else $&&$.unit==="nautical"?io(H,K,Q/1852,F._getUIString("ScaleControl.NauticalMiles")):Q>=1e3?io(H,K,Q/1e3,F._getUIString("ScaleControl.Kilometers")):io(H,K,Q,F._getUIString("ScaleControl.Meters"))}function io(F,H,$,K){var ft,At,N,Q=(ft=$,(At=Math.pow(10,(""+Math.floor(ft)).length-1))*((N=ft/At)>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:function(dt){var wt=Math.pow(10,Math.ceil(-Math.log(dt)/Math.LN10));return Math.round(dt*wt)/wt}(N))),it=Q/$;F.style.width=H*it+"px",F.innerHTML=Q+"&nbsp;"+K}Pn.prototype.getDefaultPosition=function(){return"bottom-left"},Pn.prototype._onMove=function(){ji(this._map,this._container,this.options)},Pn.prototype.onAdd=function(F){return this._map=F,this._container=h.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",F.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Pn.prototype.onRemove=function(){h.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Pn.prototype.setUnit=function(F){this.options.unit=F,ji(this._map,this._container,this.options)};var ba=function(F){this._fullscreen=!1,F&&F.container&&(F.container instanceof r.window.HTMLElement?this._container=F.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in r.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in r.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in r.window.document&&(this._fullscreenchange="MSFullscreenChange")};ba.prototype.onAdd=function(F){return this._map=F,this._container||(this._container=this._map.getContainer()),this._controlContainer=h.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ba.prototype.onRemove=function(){h.remove(this._controlContainer),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ba.prototype._checkFullscreenSupport=function(){return!!(r.window.document.fullscreenEnabled||r.window.document.mozFullScreenEnabled||r.window.document.msFullscreenEnabled||r.window.document.webkitFullscreenEnabled)},ba.prototype._setupUI=function(){var F=this._fullscreenButton=h.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);h.create("span","mapboxgl-ctrl-icon",F).setAttribute("aria-hidden",!0),F.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ba.prototype._updateTitle=function(){var F=this._getTitle();this._fullscreenButton.setAttribute("aria-label",F),this._fullscreenButton.title=F},ba.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ba.prototype._isFullscreen=function(){return this._fullscreen},ba.prototype._changeIcon=function(){(r.window.document.fullscreenElement||r.window.document.mozFullScreenElement||r.window.document.webkitFullscreenElement||r.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ba.prototype._onClickFullscreen=function(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.mozCancelFullScreen?r.window.document.mozCancelFullScreen():r.window.document.msExitFullscreen?r.window.document.msExitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var is={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ms=function(F){function H($){F.call(this),this.options=r.extend(Object.create(is),$),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return F&&(H.__proto__=F),H.prototype=Object.create(F&&F.prototype),H.prototype.constructor=H,H.prototype.addTo=function($){return this._map&&this.remove(),this._map=$,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this},H.prototype.isOpen=function(){return!!this._map},H.prototype.remove=function(){return this._content&&h.remove(this._content),this._container&&(h.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this},H.prototype.getLngLat=function(){return this._lngLat},H.prototype.setLngLat=function($){return this._lngLat=r.LngLat.convert($),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},H.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},H.prototype.getElement=function(){return this._container},H.prototype.setText=function($){return this.setDOMContent(r.window.document.createTextNode($))},H.prototype.setHTML=function($){var K,ft=r.window.document.createDocumentFragment(),At=r.window.document.createElement("body");for(At.innerHTML=$;K=At.firstChild;)ft.appendChild(K);return this.setDOMContent(ft)},H.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},H.prototype.setMaxWidth=function($){return this.options.maxWidth=$,this._update(),this},H.prototype.setDOMContent=function($){return this._createContent(),this._content.appendChild($),this._update(),this},H.prototype.addClassName=function($){this._container&&this._container.classList.add($)},H.prototype.removeClassName=function($){this._container&&this._container.classList.remove($)},H.prototype.toggleClassName=function($){if(this._container)return this._container.classList.toggle($)},H.prototype._createContent=function(){this._content&&h.remove(this._content),this._content=h.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=h.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},H.prototype._onMouseUp=function($){this._update($.point)},H.prototype._onMouseMove=function($){this._update($.point)},H.prototype._onDrag=function($){this._update($.point)},H.prototype._update=function($){var K=this,ft=this._lngLat||this._trackPointer;if(this._map&&ft&&this._content&&(this._container||(this._container=h.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=h.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Bt){return K._container.classList.add(Bt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=An(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||$)){var At=this._pos=this._trackPointer&&$?$:this._map.project(this._lngLat),N=this.options.anchor,Q=as(this.options.offset);if(!N){var it,dt=this._container.offsetWidth,wt=this._container.offsetHeight;it=At.y+Q.bottom.y<wt?["top"]:At.y>this._map.transform.height-wt?["bottom"]:[],At.x<dt/2?it.push("left"):At.x>this._map.transform.width-dt/2&&it.push("right"),N=it.length===0?"bottom":it.join("-")}var Et=At.add(Q[N]).round();h.setTransform(this._container,Ln[N]+" translate("+Et.x+"px,"+Et.y+"px)"),ds(this._container,N,"popup")}},H.prototype._onClose=function(){this.remove()},H}(r.Evented);function as(F){if(F){if(typeof F=="number"){var H=Math.round(Math.sqrt(.5*Math.pow(F,2)));return{center:new r.Point(0,0),top:new r.Point(0,F),"top-left":new r.Point(H,H),"top-right":new r.Point(-H,H),bottom:new r.Point(0,-F),"bottom-left":new r.Point(H,-H),"bottom-right":new r.Point(-H,-H),left:new r.Point(F,0),right:new r.Point(-F,0)}}if(F instanceof r.Point||Array.isArray(F)){var $=r.Point.convert(F);return{center:$,top:$,"top-left":$,"top-right":$,bottom:$,"bottom-left":$,"bottom-right":$,left:$,right:$}}return{center:r.Point.convert(F.center||[0,0]),top:r.Point.convert(F.top||[0,0]),"top-left":r.Point.convert(F["top-left"]||[0,0]),"top-right":r.Point.convert(F["top-right"]||[0,0]),bottom:r.Point.convert(F.bottom||[0,0]),"bottom-left":r.Point.convert(F["bottom-left"]||[0,0]),"bottom-right":r.Point.convert(F["bottom-right"]||[0,0]),left:r.Point.convert(F.left||[0,0]),right:r.Point.convert(F.right||[0,0])}}return as(new r.Point(0,0))}var bo={version:r.version,supported:m,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:Hs,NavigationControl:Ri,GeolocateControl:No,AttributionControl:xa,ScaleControl:Pn,FullscreenControl:ba,Popup:ms,Marker:zo,Style:rn,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.Point,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,config:r.config,prewarm:function(){me().acquire(ee)},clearPrewarmedResources:function(){var F=ge;F&&(F.isPreloaded()&&F.numActive()===1?(F.release(ee),ge=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(F){r.config.ACCESS_TOKEN=F},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(F){r.config.API_URL=F},get workerCount(){return te.workerCount},set workerCount(F){te.workerCount=F},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(F){r.config.MAX_PARALLEL_IMAGE_REQUESTS=F},clearStorage:function(F){r.clearTileCache(F)},workerUrl:""};return bo}),T}()},27084:function(W){W.exports=Math.log2||function(I){return Math.log(I)*Math.LOG2E}},16825:function(W,I,o){W.exports=function(k,r){r||(r=k,k=window);var m=0,h=0,s=0,e={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function n(p){var y=!1;return"altKey"in p&&(y=y||p.altKey!==e.alt,e.alt=!!p.altKey),"shiftKey"in p&&(y=y||p.shiftKey!==e.shift,e.shift=!!p.shiftKey),"ctrlKey"in p&&(y=y||p.ctrlKey!==e.control,e.control=!!p.ctrlKey),"metaKey"in p&&(y=y||p.metaKey!==e.meta,e.meta=!!p.metaKey),y}function a(p,y){var b=T.x(y),x=T.y(y);"buttons"in y&&(p=0|y.buttons),(p!==m||b!==h||x!==s||n(y))&&(m=0|p,h=b||0,s=x||0,r&&r(m,h,s,e))}function i(p){a(0,p)}function c(){(m||h||s||e.shift||e.alt||e.meta||e.control)&&(h=s=0,m=0,e.shift=e.alt=e.control=e.meta=!1,r&&r(0,0,0,e))}function l(p){n(p)&&r&&r(m,h,s,e)}function u(p){T.buttons(p)===0?a(0,p):a(m,p)}function f(p){a(m|T.buttons(p),p)}function d(p){a(m&~T.buttons(p),p)}function w(){t||(t=!0,k.addEventListener("mousemove",u),k.addEventListener("mousedown",f),k.addEventListener("mouseup",d),k.addEventListener("mouseleave",i),k.addEventListener("mouseenter",i),k.addEventListener("mouseout",i),k.addEventListener("mouseover",i),k.addEventListener("blur",c),k.addEventListener("keyup",l),k.addEventListener("keydown",l),k.addEventListener("keypress",l),k!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}w();var v={element:k};return Object.defineProperties(v,{enabled:{get:function(){return t},set:function(p){p?w():t&&(t=!1,k.removeEventListener("mousemove",u),k.removeEventListener("mousedown",f),k.removeEventListener("mouseup",d),k.removeEventListener("mouseleave",i),k.removeEventListener("mouseenter",i),k.removeEventListener("mouseout",i),k.removeEventListener("mouseover",i),k.removeEventListener("blur",c),k.removeEventListener("keyup",l),k.removeEventListener("keydown",l),k.removeEventListener("keypress",l),k!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return m},enumerable:!0},x:{get:function(){return h},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return e},enumerable:!0}}),v};var T=o(74311)},48956:function(W){var I={left:0,top:0};W.exports=function(o,T,k){T=T||o.currentTarget||o.srcElement,Array.isArray(k)||(k=[0,0]);var r,m=o.clientX||0,h=o.clientY||0,s=(r=T)===window||r===document||r===document.body?I:r.getBoundingClientRect();return k[0]=m-s.left,k[1]=h-s.top,k}},74311:function(W,I){function o(T){return T.target||T.srcElement||window}I.buttons=function(T){if(typeof T=="object"){if("buttons"in T)return T.buttons;if("which"in T){if((k=T.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in T){var k;if((k=T.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},I.element=o,I.x=function(T){if(typeof T=="object"){if("offsetX"in T)return T.offsetX;var k=o(T).getBoundingClientRect();return T.clientX-k.left}return 0},I.y=function(T){if(typeof T=="object"){if("offsetY"in T)return T.offsetY;var k=o(T).getBoundingClientRect();return T.clientY-k.top}return 0}},1195:function(W,I,o){var T=o(75686);W.exports=function(k,r,m){typeof k=="function"&&(m=!!r,r=k,k=window);var h=T("ex",k),s=function(e){m&&e.preventDefault();var t=e.deltaX||0,n=e.deltaY||0,a=e.deltaZ||0,i=1;switch(e.deltaMode){case 1:i=h;break;case 2:i=window.innerHeight}if(n*=i,a*=i,(t*=i)||n||a)return r(t,n,a,e)};return k.addEventListener("wheel",s),s}},7417:function(W,I,o){var T;(function(k,r,m){r[k]=r[k]||function(){var h,s,e,t=Object.prototype.toString,n=typeof setImmediate<"u"?function(b){return setImmediate(b)}:setTimeout;try{Object.defineProperty({},"x",{}),h=function(b,x,_,g){return Object.defineProperty(b,x,{value:_,writable:!0,configurable:g!==!1})}}catch{h=function(b,x,_){return b[x]=_,b}}function a(b,x){e.add(b,x),s||(s=n(e.drain))}function i(b){var x,_=typeof b;return b==null||_!="object"&&_!="function"||(x=b.then),typeof x=="function"&&x}function c(){for(var b=0;b<this.chain.length;b++)l(this,this.state===1?this.chain[b].success:this.chain[b].failure,this.chain[b]);this.chain.length=0}function l(b,x,_){var g,A;try{x===!1?_.reject(b.msg):(g=x===!0?b.msg:x.call(void 0,b.msg))===_.promise?_.reject(TypeError("Promise-chain cycle")):(A=i(g))?A.call(g,_.resolve,_.reject):_.resolve(g)}catch(M){_.reject(M)}}function u(b){var x,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(x=i(b))?a(function(){var g=new w(_);try{x.call(b,function(){u.apply(g,arguments)},function(){f.apply(g,arguments)})}catch(A){f.call(g,A)}}):(_.msg=b,_.state=1,_.chain.length>0&&a(c,_))}catch(g){f.call(new w(_),g)}}}function f(b){var x=this;x.triggered||(x.triggered=!0,x.def&&(x=x.def),x.msg=b,x.state=2,x.chain.length>0&&a(c,x))}function d(b,x,_,g){for(var A=0;A<x.length;A++)(function(M){b.resolve(x[M]).then(function(L){_(M,L)},g)})(A)}function w(b){this.def=b,this.triggered=!1}function v(b){this.promise=b,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(b){if(typeof b!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var x=new v(this);this.then=function(_,g){var A={success:typeof _!="function"||_,failure:typeof g=="function"&&g};return A.promise=new this.constructor(function(M,L){if(typeof M!="function"||typeof L!="function")throw TypeError("Not a function");A.resolve=M,A.reject=L}),x.chain.push(A),x.state!==0&&a(c,x),A.promise},this.catch=function(_){return this.then(void 0,_)};try{b.call(void 0,function(_){u.call(x,_)},function(_){f.call(x,_)})}catch(_){f.call(x,_)}}e=function(){var b,x,_;function g(A,M){this.fn=A,this.self=M,this.next=void 0}return{add:function(A,M){_=new g(A,M),x?x.next=_:b=_,x=_,_=void 0},drain:function(){var A=b;for(b=x=s=void 0;A;)A.fn.call(A.self),A=A.next}}}();var y=h({},"constructor",p,!1);return p.prototype=y,h(y,"__NPO__",0,!1),h(p,"resolve",function(b){return b&&typeof b=="object"&&b.__NPO__===1?b:new this(function(x,_){if(typeof x!="function"||typeof _!="function")throw TypeError("Not a function");x(b)})}),h(p,"reject",function(b){return new this(function(x,_){if(typeof x!="function"||typeof _!="function")throw TypeError("Not a function");_(b)})}),h(p,"all",function(b){var x=this;return t.call(b)!="[object Array]"?x.reject(TypeError("Not an array")):b.length===0?x.resolve([]):new x(function(_,g){if(typeof _!="function"||typeof g!="function")throw TypeError("Not a function");var A=b.length,M=Array(A),L=0;d(x,b,function(E,S){M[E]=S,++L===A&&_(M)},g)})}),h(p,"race",function(b){var x=this;return t.call(b)!="[object Array]"?x.reject(TypeError("Not an array")):new x(function(_,g){if(typeof _!="function"||typeof g!="function")throw TypeError("Not a function");d(x,b,function(A,M){_(M)},g)})}),p}(),W.exports?W.exports=r[k]:(T=function(){return r[k]}.call(I,o,I,W))===void 0||(W.exports=T)})("Promise",o.g!==void 0?o.g:this)},18625:function(W){var I=Math.PI,o=h(120);function T(s,e,t,n){return["C",s,e,t,n,t,n]}function k(s,e,t,n,a,i){return["C",s/3+.6666666666666666*t,e/3+.6666666666666666*n,a/3+.6666666666666666*t,i/3+.6666666666666666*n,a,i]}function r(s,e,t,n,a,i,c,l,u,f){if(f)A=f[0],M=f[1],_=f[2],g=f[3];else{var d=m(s,e,-a);s=d.x,e=d.y;var w=(s-(l=(d=m(l,u,-a)).x))/2,v=(e-(u=d.y))/2,p=w*w/(t*t)+v*v/(n*n);p>1&&(t*=p=Math.sqrt(p),n*=p);var y=t*t,b=n*n,x=(i==c?-1:1)*Math.sqrt(Math.abs((y*b-y*v*v-b*w*w)/(y*v*v+b*w*w)));x==1/0&&(x=1);var _=x*t*v/n+(s+l)/2,g=x*-n*w/t+(e+u)/2,A=Math.asin(((e-g)/n).toFixed(9)),M=Math.asin(((u-g)/n).toFixed(9));(A=s<_?I-A:A)<0&&(A=2*I+A),(M=l<_?I-M:M)<0&&(M=2*I+M),c&&A>M&&(A-=2*I),!c&&M>A&&(M-=2*I)}if(Math.abs(M-A)>o){var L=M,E=l,S=u;M=A+o*(c&&M>A?1:-1);var O=r(l=_+t*Math.cos(M),u=g+n*Math.sin(M),t,n,a,0,c,E,S,[M,L,_,g])}var P=Math.tan((M-A)/4),U=4/3*t*P,R=4/3*n*P,j=[2*s-(s+U*Math.sin(A)),2*e-(e-R*Math.cos(A)),l+U*Math.sin(M),u-R*Math.cos(M),l,u];if(f)return j;O&&(j=j.concat(O));for(var B=0;B<j.length;){var z=m(j[B],j[B+1],a);j[B++]=z.x,j[B++]=z.y}return j}function m(s,e,t){return{x:s*Math.cos(t)-e*Math.sin(t),y:s*Math.sin(t)+e*Math.cos(t)}}function h(s){return s*(I/180)}W.exports=function(s){for(var e,t=[],n=0,a=0,i=0,c=0,l=null,u=null,f=0,d=0,w=0,v=s.length;w<v;w++){var p=s[w],y=p[0];switch(y){case"M":i=p[1],c=p[2];break;case"A":(p=r(f,d,p[1],p[2],h(p[3]),p[4],p[5],p[6],p[7])).unshift("C"),p.length>7&&(t.push(p.splice(0,7)),p.unshift("C"));break;case"S":var b=f,x=d;e!="C"&&e!="S"||(b+=b-n,x+=x-a),p=["C",b,x,p[1],p[2],p[3],p[4]];break;case"T":e=="Q"||e=="T"?(l=2*f-l,u=2*d-u):(l=f,u=d),p=k(f,d,l,u,p[1],p[2]);break;case"Q":l=p[1],u=p[2],p=k(f,d,p[1],p[2],p[3],p[4]);break;case"L":p=T(f,d,p[1],p[2]);break;case"H":p=T(f,d,p[1],d);break;case"V":p=T(f,d,f,p[1]);break;case"Z":p=T(f,d,i,c)}e=y,f=p[p.length-2],d=p[p.length-1],p.length>4?(n=p[p.length-4],a=p[p.length-3]):(n=f,a=d),t.push(p)}return t}},56131:function(W){var I=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;W.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de",Object.getOwnPropertyNames(k)[0]==="5")return!1;for(var r={},m=0;m<10;m++)r["_"+String.fromCharCode(m)]=m;if(Object.getOwnPropertyNames(r).map(function(s){return r[s]}).join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(s){h[s]=s}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(k,r){for(var m,h,s=function(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}(k),e=1;e<arguments.length;e++){for(var t in m=Object(arguments[e]))o.call(m,t)&&(s[t]=m[t]);if(I){h=I(m);for(var n=0;n<h.length;n++)T.call(m,h[n])&&(s[h[n]]=m[h[n]])}}return s}},65848:function(W){var I=function(o){return o!=o};W.exports=function(o,T){return o===0&&T===0?1/o==1/T:o===T||!(!I(o)||!I(T))}},64003:function(W,I,o){var T=o(17045),k=o(68222),r=o(65848),m=o(27015),h=o(55572),s=k(m(),Object);T(s,{getPolyfill:m,implementation:r,shim:h}),W.exports=s},27015:function(W,I,o){var T=o(65848);W.exports=function(){return typeof Object.is=="function"?Object.is:T}},55572:function(W,I,o){var T=o(27015),k=o(17045);W.exports=function(){var r=T();return k(Object,{is:r},{is:function(){return Object.is!==r}}),r}},99019:function(W,I,o){var T;if(!Object.keys){var k=Object.prototype.hasOwnProperty,r=Object.prototype.toString,m=o(64178),h=Object.prototype.propertyIsEnumerable,s=!h.call({toString:null},"toString"),e=h.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=function(c){var l=c.constructor;return l&&l.prototype===c},a={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},i=function(){if(typeof window>"u")return!1;for(var c in window)try{if(!a["$"+c]&&k.call(window,c)&&window[c]!==null&&typeof window[c]=="object")try{n(window[c])}catch{return!0}}catch{return!0}return!1}();T=function(c){var l=c!==null&&typeof c=="object",u=r.call(c)==="[object Function]",f=m(c),d=l&&r.call(c)==="[object String]",w=[];if(!l&&!u&&!f)throw new TypeError("Object.keys called on a non-object");var v=e&&u;if(d&&c.length>0&&!k.call(c,0))for(var p=0;p<c.length;++p)w.push(String(p));if(f&&c.length>0)for(var y=0;y<c.length;++y)w.push(String(y));else for(var b in c)v&&b==="prototype"||!k.call(c,b)||w.push(String(b));if(s)for(var x=function(g){if(typeof window>"u"||!i)return n(g);try{return n(g)}catch{return!1}}(c),_=0;_<t.length;++_)x&&t[_]==="constructor"||!k.call(c,t[_])||w.push(t[_]);return w}}W.exports=T},8709:function(W,I,o){var T=Array.prototype.slice,k=o(64178),r=Object.keys,m=r?function(s){return r(s)}:o(99019),h=Object.keys;m.shim=function(){if(Object.keys){var s=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);s||(Object.keys=function(e){return k(e)?h(T.call(e)):h(e)})}else Object.keys=m;return Object.keys||m},W.exports=m},64178:function(W){var I=Object.prototype.toString;W.exports=function(o){var T=I.call(o),k=T==="[object Arguments]";return k||(k=T!=="[object Array]"&&o!==null&&typeof o=="object"&&typeof o.length=="number"&&o.length>=0&&I.call(o.callee)==="[object Function]"),k}},88641:function(W){function I(k,r){if(typeof k!="string")return[k];var m=[k];typeof r=="string"||Array.isArray(r)?r={brackets:r}:r||(r={});var h=r.brackets?Array.isArray(r.brackets)?r.brackets:[r.brackets]:["{}","[]","()"],s=r.escape||"___",e=!!r.flat;h.forEach(function(n){var a=new RegExp(["\\",n[0],"[^\\",n[0],"\\",n[1],"]*\\",n[1]].join("")),i=[];function c(l,u,f){var d=m.push(l.slice(n[0].length,-n[1].length))-1;return i.push(d),s+d+s}m.forEach(function(l,u){for(var f,d=0;l!=f;)if(f=l,l=l.replace(a,c),d++>1e4)throw Error("References have circular dependency. Please, check them.");m[u]=l}),i=i.reverse(),m=m.map(function(l){return i.forEach(function(u){l=l.replace(new RegExp("(\\"+s+u+"\\"+s+")","g"),n[0]+"$1"+n[1])}),l})});var t=new RegExp("\\"+s+"([0-9]+)\\"+s);return e?m:function n(a,i,c){for(var l,u=[],f=0;l=t.exec(a);){if(f++>1e4)throw Error("Circular references in parenthesis");u.push(a.slice(0,l.index)),u.push(n(i[l[1]],i)),a=a.slice(l.index+l[0].length)}return u.push(a),u}(m[0],m)}function o(k,r){if(r&&r.flat){var m,h=r&&r.escape||"___",s=k[0];if(!s)return"";for(var e=new RegExp("\\"+h+"([0-9]+)\\"+h),t=0;s!=m;){if(t++>1e4)throw Error("Circular references in "+k);m=s,s=s.replace(e,n)}return s}return k.reduce(function a(i,c){return Array.isArray(c)&&(c=c.reduce(a,"")),i+c},"");function n(a,i){if(k[i]==null)throw Error("Reference "+i+"is undefined");return k[i]}}function T(k,r){return Array.isArray(k)?o(k,r):I(k,r)}T.parse=I,T.stringify=o,W.exports=T},18863:function(W,I,o){var T=o(71299);W.exports=function(k){var r;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?r=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(r={x:(k=T(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?r.width=k.right-r.x:r.width=0:r.width=k.width,k.height==null?k.bottom?r.height=k.bottom-r.y:r.height=0:r.height=k.height),r}},95616:function(W){W.exports=function(k){var r=[];return k.replace(o,function(m,h,s){var e=h.toLowerCase();for(s=function(t){var n=t.match(T);return n?n.map(Number):[]}(s),e=="m"&&s.length>2&&(r.push([h].concat(s.splice(0,2))),e="l",h=h=="m"?"l":"L");;){if(s.length==I[e])return s.unshift(h),r.push(s);if(s.length<I[e])throw new Error("malformed path data");r.push([h].concat(s.splice(0,I[e])))}}),r};var I={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=/([astvzqmhlc])([^astvzqmhlc]*)/gi,T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function(W){W.exports=function(I,o){o||(o=[0,""]),I=String(I);var T=parseFloat(I,10);return o[0]=T,o[1]=I.match(/[\d.\-\+]*\s*(.*)/)[1]||"",o}},9748:function(W,I,o){var T=o(90386);(function(){var k,r,m,h,s,e;typeof performance<"u"&&performance!==null&&performance.now?W.exports=function(){return performance.now()}:T!=null&&T.hrtime?(W.exports=function(){return(k()-s)/1e6},r=T.hrtime,h=(k=function(){var t;return 1e9*(t=r())[0]+t[1]})(),e=1e9*T.uptime(),s=h-e):Date.now?(W.exports=function(){return Date.now()-m},m=Date.now()):(W.exports=function(){return new Date().getTime()-m},m=new Date().getTime())}).call(this)},71299:function(W){W.exports=function(T,k,r){var m,h,s={};if(typeof k=="string"&&(k=o(k)),Array.isArray(k)){var e={};for(h=0;h<k.length;h++)e[k[h]]=!0;k=e}for(m in k)k[m]=o(k[m]);var t={};for(m in k){var n=k[m];if(Array.isArray(n))for(h=0;h<n.length;h++){var a=n[h];if(r&&(t[a]=!0),a in T){if(s[m]=T[a],r)for(var i=h;i<n.length;i++)t[n[i]]=!0;break}}else m in T&&(k[m]&&(s[m]=T[m]),r&&(t[m]=!0))}if(r)for(m in T)t[m]||(s[m]=T[m]);return s};var I={};function o(T){return I[T]?I[T]:(typeof T=="string"&&(T=I[T]=T.split(/\s*,\s*|\s+/)),T)}},38258:function(W){W.exports=function(I,o,T,k){var r=I[0],m=I[1],h=!1;T===void 0&&(T=0),k===void 0&&(k=o.length);for(var s=k-T,e=0,t=s-1;e<s;t=e++){var n=o[e+T][0],a=o[e+T][1],i=o[t+T][0],c=o[t+T][1];a>m!=c>m&&r<(i-n)*(m-a)/(c-a)+n&&(h=!h)}return h}},52142:function(W,I,o){var T,k=o(69444),r=o(29023),m=o(87263),h=o(11328),s=o(55968),e=o(10670),t=!1,n=r();function a(i,c,l){var u=T.segments(i),f=T.segments(c),d=l(T.combine(u,f));return T.polygon(d)}T={buildLog:function(i){return i===!0?t=k():i===!1&&(t=!1),t!==!1&&t.list},epsilon:function(i){return n.epsilon(i)},segments:function(i){var c=m(!0,n,t);return i.regions.forEach(c.addRegion),{segments:c.calculate(i.inverted),inverted:i.inverted}},combine:function(i,c){return{combined:m(!1,n,t).calculate(i.segments,i.inverted,c.segments,c.inverted),inverted1:i.inverted,inverted2:c.inverted}},selectUnion:function(i){return{segments:s.union(i.combined,t),inverted:i.inverted1||i.inverted2}},selectIntersect:function(i){return{segments:s.intersect(i.combined,t),inverted:i.inverted1&&i.inverted2}},selectDifference:function(i){return{segments:s.difference(i.combined,t),inverted:i.inverted1&&!i.inverted2}},selectDifferenceRev:function(i){return{segments:s.differenceRev(i.combined,t),inverted:!i.inverted1&&i.inverted2}},selectXor:function(i){return{segments:s.xor(i.combined,t),inverted:i.inverted1!==i.inverted2}},polygon:function(i){return{regions:h(i.segments,n,t),inverted:i.inverted}},polygonFromGeoJSON:function(i){return e.toPolygon(T,i)},polygonToGeoJSON:function(i){return e.fromPolygon(T,n,i)},union:function(i,c){return a(i,c,T.selectUnion)},intersect:function(i,c){return a(i,c,T.selectIntersect)},difference:function(i,c){return a(i,c,T.selectDifference)},differenceRev:function(i,c){return a(i,c,T.selectDifferenceRev)},xor:function(i,c){return a(i,c,T.selectXor)}},typeof window=="object"&&(window.PolyBool=T),W.exports=T},69444:function(W){W.exports=function(){var I,o=0,T=!1;function k(r,m){return I.list.push({type:r,data:m?JSON.parse(JSON.stringify(m)):void 0}),I}return I={list:[],segmentId:function(){return o++},checkIntersection:function(r,m){return k("check",{seg1:r,seg2:m})},segmentChop:function(r,m){return k("div_seg",{seg:r,pt:m}),k("chop",{seg:r,pt:m})},statusRemove:function(r){return k("pop_seg",{seg:r})},segmentUpdate:function(r){return k("seg_update",{seg:r})},segmentNew:function(r,m){return k("new_seg",{seg:r,primary:m})},segmentRemove:function(r){return k("rem_seg",{seg:r})},tempStatus:function(r,m,h){return k("temp_status",{seg:r,above:m,below:h})},rewind:function(r){return k("rewind",{seg:r})},status:function(r,m,h){return k("status",{seg:r,above:m,below:h})},vert:function(r){return r===T?I:(T=r,k("vert",{x:r}))},log:function(r){return typeof r!="string"&&(r=JSON.stringify(r,!1,"  ")),k("log",{txt:r})},reset:function(){return k("reset")},selected:function(r){return k("selected",{segs:r})},chainStart:function(r){return k("chain_start",{seg:r})},chainRemoveHead:function(r,m){return k("chain_rem_head",{index:r,pt:m})},chainRemoveTail:function(r,m){return k("chain_rem_tail",{index:r,pt:m})},chainNew:function(r,m){return k("chain_new",{pt1:r,pt2:m})},chainMatch:function(r){return k("chain_match",{index:r})},chainClose:function(r){return k("chain_close",{index:r})},chainAddHead:function(r,m){return k("chain_add_head",{index:r,pt:m})},chainAddTail:function(r,m){return k("chain_add_tail",{index:r,pt:m})},chainConnect:function(r,m){return k("chain_con",{index1:r,index2:m})},chainReverse:function(r){return k("chain_rev",{index:r})},chainJoin:function(r,m){return k("chain_join",{index1:r,index2:m})},done:function(){return k("done")}}}},29023:function(W){W.exports=function(I){typeof I!="number"&&(I=1e-10);var o={epsilon:function(T){return typeof T=="number"&&(I=T),I},pointAboveOrOnLine:function(T,k,r){var m=k[0],h=k[1],s=r[0],e=r[1],t=T[0];return(s-m)*(T[1]-h)-(e-h)*(t-m)>=-I},pointBetween:function(T,k,r){var m=T[1]-k[1],h=r[0]-k[0],s=T[0]-k[0],e=r[1]-k[1],t=s*h+m*e;return!(t<I||t-(h*h+e*e)>-I)},pointsSameX:function(T,k){return Math.abs(T[0]-k[0])<I},pointsSameY:function(T,k){return Math.abs(T[1]-k[1])<I},pointsSame:function(T,k){return o.pointsSameX(T,k)&&o.pointsSameY(T,k)},pointsCompare:function(T,k){return o.pointsSameX(T,k)?o.pointsSameY(T,k)?0:T[1]<k[1]?-1:1:T[0]<k[0]?-1:1},pointsCollinear:function(T,k,r){var m=T[0]-k[0],h=T[1]-k[1],s=k[0]-r[0],e=k[1]-r[1];return Math.abs(m*e-s*h)<I},linesIntersect:function(T,k,r,m){var h=k[0]-T[0],s=k[1]-T[1],e=m[0]-r[0],t=m[1]-r[1],n=h*t-s*e;if(Math.abs(n)<I)return!1;var a=T[0]-r[0],i=T[1]-r[1],c=(e*i-t*a)/n,l=(h*i-s*a)/n,u={alongA:0,alongB:0,pt:[T[0]+c*h,T[1]+c*s]};return u.alongA=c<=-I?-2:c<I?-1:c-1<=-I?0:c-1<I?1:2,u.alongB=l<=-I?-2:l<I?-1:l-1<=-I?0:l-1<I?1:2,u},pointInsideRegion:function(T,k){for(var r=T[0],m=T[1],h=k[k.length-1][0],s=k[k.length-1][1],e=!1,t=0;t<k.length;t++){var n=k[t][0],a=k[t][1];a-m>I!=s-m>I&&(h-n)*(m-a)/(s-a)+n-r>I&&(e=!e),h=n,s=a}return e}};return o}},10670:function(W){var I={toPolygon:function(o,T){function k(h){if(h.length<=0)return o.segments({inverted:!1,regions:[]});function s(n){var a=n.slice(0,n.length-1);return o.segments({inverted:!1,regions:[a]})}for(var e=s(h[0]),t=1;t<h.length;t++)e=o.selectDifference(o.combine(e,s(h[t])));return e}if(T.type==="Polygon")return o.polygon(k(T.coordinates));if(T.type==="MultiPolygon"){for(var r=o.segments({inverted:!1,regions:[]}),m=0;m<T.coordinates.length;m++)r=o.selectUnion(o.combine(r,k(T.coordinates[m])));return o.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(o,T,k){function r(l,u){return T.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],u)}function m(l){return{region:l,children:[]}}k=o.polygon(o.segments(k));var h=m(null);function s(l,u){for(var f=0;f<l.children.length;f++)if(r(u,(w=l.children[f]).region))return void s(w,u);var d=m(u);for(f=0;f<l.children.length;f++){var w;r((w=l.children[f]).region,u)&&(d.children.push(w),l.children.splice(f,1),f--)}l.children.push(d)}for(var e=0;e<k.regions.length;e++){var t=k.regions[e];t.length<3||s(h,t)}function n(l,u){for(var f=0,d=l[l.length-1][0],w=l[l.length-1][1],v=[],p=0;p<l.length;p++){var y=l[p][0],b=l[p][1];v.push([y,b]),f+=b*d-y*w,d=y,w=b}return f<0!==u&&v.reverse(),v.push([v[0][0],v[0][1]]),v}var a=[];function i(l){var u=[n(l.region,!1)];a.push(u);for(var f=0;f<l.children.length;f++)u.push(c(l.children[f]))}function c(l){for(var u=0;u<l.children.length;u++)i(l.children[u]);return n(l.region,!0)}for(e=0;e<h.children.length;e++)i(h.children[e]);return a.length<=0?{type:"Polygon",coordinates:[]}:a.length==1?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}}};W.exports=I},87263:function(W,I,o){var T=o(26859);W.exports=function(k,r,m){function h(i,c,l){return{id:m?m.segmentId():-1,start:i,end:c,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var s=T.create();function e(i,c){s.insertBefore(i,function(l){return u=i.isStart,f=i.pt,d=c,w=l.isStart,v=l.pt,p=l.other.pt,((y=r.pointsCompare(f,v))!==0?y:r.pointsSame(d,p)?0:u!==w?u?1:-1:r.pointAboveOrOnLine(d,w?v:p,w?p:v)?1:-1)<0;var u,f,d,w,v,p,y})}function t(i,c){var l=function(u,f){var d=T.node({isStart:!0,pt:u.start,seg:u,primary:f,other:null,status:null});return e(d,u.end),d}(i,c);return function(u,f,d){var w=T.node({isStart:!1,pt:f.end,seg:f,primary:d,other:u,status:null});u.other=w,e(w,u.pt)}(l,i,c),l}function n(i,c){var l=h(c,i.seg.end,i.seg);return function(u,f){m&&m.segmentChop(u.seg,f),u.other.remove(),u.seg.end=f,u.other.pt=f,e(u.other,u.pt)}(i,c),t(l,i.primary)}function a(i,c){var l=T.create();function u(M){return l.findTransition(function(L){var E,S,O,P,U,R;return E=M,S=L.ev,O=E.seg.start,P=E.seg.end,U=S.seg.start,R=S.seg.end,(r.pointsCollinear(O,U,R)?r.pointsCollinear(P,U,R)||r.pointAboveOrOnLine(P,U,R)?1:-1:r.pointAboveOrOnLine(O,U,R)?1:-1)>0})}function f(M,L){var E=M.seg,S=L.seg,O=E.start,P=E.end,U=S.start,R=S.end;m&&m.checkIntersection(E,S);var j=r.linesIntersect(O,P,U,R);if(j===!1){if(!r.pointsCollinear(O,P,U)||r.pointsSame(O,R)||r.pointsSame(P,U))return!1;var B=r.pointsSame(O,U),z=r.pointsSame(P,R);if(B&&z)return L;var G=!B&&r.pointBetween(O,U,R),V=!z&&r.pointBetween(P,U,R);if(B)return V?n(L,P):n(M,R),L;G&&(z||(V?n(L,P):n(M,R)),n(L,O))}else j.alongA===0&&(j.alongB===-1?n(M,U):j.alongB===0?n(M,j.pt):j.alongB===1&&n(M,R)),j.alongB===0&&(j.alongA===-1?n(L,O):j.alongA===0?n(L,j.pt):j.alongA===1&&n(L,P));return!1}for(var d=[];!s.isEmpty();){var w=s.getHead();if(m&&m.vert(w.pt[0]),w.isStart){let M=function(){if(p){var L=f(w,p);if(L)return L}return!!y&&f(w,y)};m&&m.segmentNew(w.seg,w.primary);var v=u(w),p=v.before?v.before.ev:null,y=v.after?v.after.ev:null;m&&m.tempStatus(w.seg,!!p&&p.seg,!!y&&y.seg);var b,x,_=M();if(_&&(k?(x=w.seg.myFill.below===null||w.seg.myFill.above!==w.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=w.seg.myFill,m&&m.segmentUpdate(_.seg),w.other.remove(),w.remove()),s.getHead()!==w){m&&m.rewind(w.seg);continue}k?(x=w.seg.myFill.below===null||w.seg.myFill.above!==w.seg.myFill.below,w.seg.myFill.below=y?y.seg.myFill.above:i,w.seg.myFill.above=x?!w.seg.myFill.below:w.seg.myFill.below):w.seg.otherFill===null&&(b=y?w.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:w.primary?c:i,w.seg.otherFill={above:b,below:b}),m&&m.status(w.seg,!!p&&p.seg,!!y&&y.seg),w.other.status=v.insert(T.node({ev:w}))}else{var g=w.status;if(g===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(g.prev)&&l.exists(g.next)&&f(g.prev.ev,g.next.ev),m&&m.statusRemove(g.ev.seg),g.remove(),!w.primary){var A=w.seg.myFill;w.seg.myFill=w.seg.otherFill,w.seg.otherFill=A}d.push(w.seg)}s.getHead().remove()}return m&&m.done(),d}return k?{addRegion:function(i){for(var c,l,u,f=i[i.length-1],d=0;d<i.length;d++){c=f,f=i[d];var w=r.pointsCompare(c,f);w!==0&&t((l=w<0?c:f,u=w<0?f:c,{id:m?m.segmentId():-1,start:l,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(i){return a(i,!1)}}:{calculate:function(i,c,l,u){return i.forEach(function(f){t(h(f.start,f.end,f),!0)}),l.forEach(function(f){t(h(f.start,f.end,f),!1)}),a(c,u)}}}},26859:function(W){W.exports={create:function(){var I={root:{root:!0,next:null},exists:function(o){return o!==null&&o!==I.root},isEmpty:function(){return I.root.next===null},getHead:function(){return I.root.next},insertBefore:function(o,T){for(var k=I.root,r=I.root.next;r!==null;){if(T(r))return o.prev=r.prev,o.next=r,r.prev.next=o,void(r.prev=o);k=r,r=r.next}k.next=o,o.prev=k,o.next=null},findTransition:function(o){for(var T=I.root,k=I.root.next;k!==null&&!o(k);)T=k,k=k.next;return{before:T===I.root?null:T,after:k,insert:function(r){return r.prev=T,r.next=k,T.next=r,k!==null&&(k.prev=r),r}}}};return I},node:function(I){return I.prev=null,I.next=null,I.remove=function(){I.prev.next=I.next,I.next&&(I.next.prev=I.prev),I.prev=null,I.next=null},I}}},11328:function(W){W.exports=function(I,o,T){var k=[],r=[];return I.forEach(function(m){var h=m.start,s=m.end;if(o.pointsSame(h,s))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{T&&T.chainStart(m);for(var e={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},n=e,a=0;a<k.length;a++){var i=(d=k[a])[0],c=(d[1],d[d.length-1]);if(d[d.length-2],o.pointsSame(i,h)){if(g(a,!0,!0))break}else if(o.pointsSame(i,s)){if(g(a,!0,!1))break}else if(o.pointsSame(c,h)){if(g(a,!1,!0))break}else if(o.pointsSame(c,s)&&g(a,!1,!1))break}if(n===e)return k.push([h,s]),void(T&&T.chainNew(h,s));if(n===t){T&&T.chainMatch(e.index);var l=e.index,u=e.matches_pt1?s:h,f=e.matches_head,d=k[l],w=f?d[0]:d[d.length-1],v=f?d[1]:d[d.length-2],p=f?d[d.length-1]:d[0],y=f?d[d.length-2]:d[1];return o.pointsCollinear(v,w,u)&&(f?(T&&T.chainRemoveHead(e.index,u),d.shift()):(T&&T.chainRemoveTail(e.index,u),d.pop()),w=v),o.pointsSame(p,u)?(k.splice(l,1),o.pointsCollinear(y,p,w)&&(f?(T&&T.chainRemoveTail(e.index,w),d.pop()):(T&&T.chainRemoveHead(e.index,w),d.shift())),T&&T.chainClose(e.index),void r.push(d)):void(f?(T&&T.chainAddHead(e.index,u),d.unshift(u)):(T&&T.chainAddTail(e.index,u),d.push(u)))}var b=e.index,x=t.index;T&&T.chainConnect(b,x);var _=k[b].length<k[x].length;e.matches_head?t.matches_head?_?(A(b),M(b,x)):(A(x),M(x,b)):M(x,b):t.matches_head?M(b,x):_?(A(b),M(x,b)):(A(x),M(b,x))}function g(L,E,S){return n.index=L,n.matches_head=E,n.matches_pt1=S,n===e?(n=t,!1):(n=null,!0)}function A(L){T&&T.chainReverse(L),k[L].reverse()}function M(L,E){var S=k[L],O=k[E],P=S[S.length-1],U=S[S.length-2],R=O[0],j=O[1];o.pointsCollinear(U,P,R)&&(T&&T.chainRemoveTail(L,P),S.pop(),P=U),o.pointsCollinear(P,R,j)&&(T&&T.chainRemoveHead(E,R),O.shift()),T&&T.chainJoin(L,E),k[L]=S.concat(O),k.splice(E,1)}}),r}},55968:function(W){function I(T,k,r){var m=[];return T.forEach(function(h){var s=(h.myFill.above?8:0)+(h.myFill.below?4:0)+(h.otherFill&&h.otherFill.above?2:0)+(h.otherFill&&h.otherFill.below?1:0);k[s]!==0&&m.push({id:r?r.segmentId():-1,start:h.start,end:h.end,myFill:{above:k[s]===1,below:k[s]===2},otherFill:null})}),r&&r.selected(m),m}var o={union:function(T,k){return I(T,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(T,k){return I(T,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(T,k){return I(T,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(T,k){return I(T,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(T,k){return I(T,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};W.exports=o},14847:function(W,I,o){var T=o(21630).Transform,k=o(90715);function r(){T.call(this,{readableObjectMode:!0})}function m(h,s,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=h,s&&(this.code=s),e&&(this.statusCode=e)}r.prototype=Object.create(T.prototype),r.prototype.constructor=r,k(r.prototype),I.OF=function(h,s,e){for(var t=s,n=0;n<e.length;)if(h[t++]!==e[n++])return!1;return!0},I.eG=function(h,s){var e=[],t=0;if(s&&s==="hex")for(;t<h.length;)e.push(parseInt(h.slice(t,t+2),16)),t+=2;else for(;t<h.length;t++)e.push(255&h.charCodeAt(t));return e},I.mP=function(h,s){return h[s]|h[s+1]<<8},I.n8=function(h,s){return h[s+1]|h[s]<<8},I.nm=function(h,s){return h[s]|h[s+1]<<8|h[s+2]<<16|16777216*h[s+3]},I.Ag=function(h,s){return h[s+3]|h[s+2]<<8|h[s+1]<<16|16777216*h[s]},m.prototype=Object.create(Error.prototype),m.prototype.constructor=m},71371:function(W){function I(k,r){var m=new Error(k);return m.code=r,m}function o(k){try{return decodeURIComponent(escape(k))}catch{return k}}function T(k,r,m){this.input=k.subarray(r,m),this.start=r;var h=String.fromCharCode.apply(null,this.input.subarray(0,4));if(h!=="II*\0"&&h!=="MM\0*")throw I("invalid TIFF signature","EBADDATA");this.big_endian=h[0]==="M"}T.prototype.each=function(k){this.aborted=!1;var r=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:r}];this.ifds_to_read.length>0&&!this.aborted;){var m=this.ifds_to_read.shift();m.offset&&this.scan_ifd(m.id,m.offset,k)}},T.prototype.read_uint16=function(k){var r=this.input;if(k+2>r.length)throw I("unexpected EOF","EBADDATA");return this.big_endian?256*r[k]+r[k+1]:r[k]+256*r[k+1]},T.prototype.read_uint32=function(k){var r=this.input;if(k+4>r.length)throw I("unexpected EOF","EBADDATA");return this.big_endian?16777216*r[k]+65536*r[k+1]+256*r[k+2]+r[k+3]:r[k]+256*r[k+1]+65536*r[k+2]+16777216*r[k+3]},T.prototype.is_subifd_link=function(k,r){return k===0&&r===34665||k===0&&r===34853||k===34665&&r===40965},T.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},T.prototype.exif_format_read=function(k,r){var m;switch(k){case 1:case 2:return this.input[r];case 6:return(m=this.input[r])|33554430*(128&m);case 3:return this.read_uint16(r);case 8:return(m=this.read_uint16(r))|131070*(32768&m);case 4:return this.read_uint32(r);case 9:return 0|this.read_uint32(r);default:return null}},T.prototype.scan_ifd=function(k,r,m){var h=this.read_uint16(r);r+=2;for(var s=0;s<h;s++){var e=this.read_uint16(r),t=this.read_uint16(r+2),n=this.read_uint32(r+4),a=this.exif_format_length(t),i=n*a,c=i<=4?r+8:this.read_uint32(r+8),l=!1;if(c+i>this.input.length)throw I("unexpected EOF","EBADDATA");for(var u=[],f=c,d=0;d<n;d++,f+=a){var w=this.exif_format_read(t,f);if(w===null){u=null;break}u.push(w)}if(Array.isArray(u)&&t===2&&(u=o(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(k,e)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:e,offset:u[0]}),l=!0),m({is_big_endian:this.big_endian,ifd:k,tag:e,format:t,count:n,entry_offset:r+this.start,data_length:i,data_offset:c+this.start,value:u,is_subifd_link:l})===!1)return void(this.aborted=!0);r+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(r)})},W.exports.ExifParser=T,W.exports.get_orientation=function(k){var r=0;try{return new T(k,0,k.length).each(function(m){if(m.ifd===0&&m.tag===274&&Array.isArray(m.value))return r=m.value[0],!1}),r}catch{return-1}}},76767:function(W,I,o){var T=o(14847).n8,k=o(14847).Ag;function r(n,a){if(n.length<4+a)return null;var i=k(n,a);return n.length<i+a||i<8?null:{boxtype:String.fromCharCode.apply(null,n.slice(a+4,a+8)),data:n.slice(a+8,a+i),end:a+i}}function m(n,a){for(var i=0;;){var c=r(n,i);if(!c)break;switch(c.boxtype){case"ispe":a.sizes.push({width:k(c.data,4),height:k(c.data,8)});break;case"irot":a.transforms.push({type:"irot",value:3&c.data[0]});break;case"imir":a.transforms.push({type:"imir",value:1&c.data[0]})}i=c.end}}function h(n,a,i){for(var c=0,l=0;l<i;l++)c=256*c+(n[a+l]||0);return c}function s(n,a){for(var i=n[4]>>4&15,c=15&n[4],l=n[5]>>4&15,u=T(n,6),f=8,d=0;d<u;d++){var w=T(n,f),v=T(n,f+=2),p=h(n,f+=2,l),y=T(n,f+=l);if(f+=2,v===0&&y===1){var b=h(n,f,i),x=h(n,f+i,c);a.item_loc[w]={length:x,offset:b+p}}f+=y*(i+c)}}function e(n,a){for(var i=T(n,4),c=6,l=0;l<i;l++){var u=r(n,c);if(!u)break;if(u.boxtype==="infe"){for(var f=T(u.data,4),d="",w=8;w<u.data.length&&u.data[w];w++)d+=String.fromCharCode(u.data[w]);a.item_inf[d]=f}c=u.end}}function t(n,a){for(var i=0;;){var c=r(n,i);if(!c)break;c.boxtype==="ipco"&&m(c.data,a),i=c.end}}W.exports.unbox=r,W.exports.readSizeFromMeta=function(n){var a={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(w,v){for(var p=4;;){var y=r(w,p);if(!y)break;y.boxtype==="iprp"&&t(y.data,v),y.boxtype==="iloc"&&s(y.data,v),y.boxtype==="iinf"&&e(y.data,v),p=y.end}}(n,a),a.sizes.length){var i,c,l,u=(c=(i=a.sizes).reduce(function(w,v){return w.width>v.width||w.width===v.width&&w.height>v.height?w:v}),l=i.reduce(function(w,v){return w.height>v.height||w.height===v.height&&w.width>v.width?w:v}),c.width>l.height||c.width===l.height&&c.height>l.width?c:l),f=1;a.transforms.forEach(function(w){var v={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},p={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(w.type==="imir"&&(f=w.value===0?p[f]:v[f=v[f=p[f]]]),w.type==="irot")for(var y=0;y<w.value;y++)f=v[f]});var d=null;return a.item_inf.Exif&&(d=a.item_loc[a.item_inf.Exif]),{width:u.width,height:u.height,orientation:a.transforms.length?f:null,variants:a.sizes,exif_location:d}}},W.exports.getMimeType=function(n){var a=String.fromCharCode.apply(null,n.slice(0,4)),i={};i[a]=!0;for(var c=8;c<n.length;c+=4)i[String.fromCharCode.apply(null,n.slice(c,c+4))]=!0;if(i.mif1||i.msf1||i.miaf)return a==="avif"||a==="avis"||a==="avio"?{type:"avif",mime:"image/avif"}:a==="heic"||a==="heix"?{type:"heic",mime:"image/heic"}:a==="hevc"||a==="hevx"?{type:"heic",mime:"image/heic-sequence"}:i.avif||i.avis?{type:"avif",mime:"image/avif"}:i.heic||i.heix||i.hevc||i.hevx||i.heis?i.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(W,I,o){var T=o(14847).eG,k=o(14847).OF,r=o(14847).Ag,m=o(76767),h=o(71371),s=T("ftyp");W.exports=function(e){if(k(e,4,s)){var t=m.unbox(e,0);if(t){var n=m.getMimeType(t.data);if(n){for(var a,i=t.end;;){var c=m.unbox(e,i);if(!c)break;if(i=c.end,c.boxtype==="mdat")return;if(c.boxtype==="meta"){a=c.data;break}}if(a){var l=m.readSizeFromMeta(a);if(l){var u={width:l.width,height:l.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(u.variants=l.variants),l.orientation&&(u.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=e.length){var f=r(e,l.exif_location.offset),d=e.slice(l.exif_location.offset+f+4,l.exif_location.offset+l.exif_location.length),w=h.get_orientation(d);w>0&&(u.orientation=w)}return u}}}}}}},2504:function(W,I,o){var T=o(14847).eG,k=o(14847).OF,r=o(14847).mP,m=T("BM");W.exports=function(h){if(!(h.length<26)&&k(h,0,m))return{width:r(h,18),height:r(h,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(W,I,o){var T=o(14847).eG,k=o(14847).OF,r=o(14847).mP,m=T("GIF87a"),h=T("GIF89a");W.exports=function(s){if(!(s.length<10)&&(k(s,0,m)||k(s,0,h)))return{width:r(s,6),height:r(s,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(W,I,o){var T=o(14847).mP;W.exports=function(k){var r=T(k,0),m=T(k,2),h=T(k,4);if(r===0&&m===1&&h){for(var s=[],e={width:0,height:0},t=0;t<h;t++){var n=k[6+16*t]||256,a=k[6+16*t+1]||256,i={width:n,height:a};s.push(i),(n>e.width||a>e.height)&&(e=i)}return{width:e.width,height:e.height,variants:s,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(W,I,o){var T=o(14847).n8,k=o(14847).eG,r=o(14847).OF,m=o(71371),h=k("Exif\0\0");W.exports=function(s){if(!(s.length<2)&&s[0]===255&&s[1]===216&&s[2]===255)for(var e=2;;){for(;;){if(s.length-e<2)return;if(s[e++]===255)break}for(var t,n,a=s[e++];a===255;)a=s[e++];if(208<=a&&a<=217||a===1)t=0;else{if(!(192<=a&&a<=254)||s.length-e<2)return;t=T(s,e)-2,e+=2}if(a===217||a===218)return;if(a===225&&t>=10&&r(s,e,h)&&(n=m.get_orientation(s.slice(e+6,e+t))),t>=5&&192<=a&&a<=207&&a!==196&&a!==200&&a!==204){if(s.length-e<t)return;var i={width:T(s,e+3),height:T(s,e+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return n>0&&(i.orientation=n),i}e+=t}}},6303:function(W,I,o){var T=o(14847).eG,k=o(14847).OF,r=o(14847).Ag,m=T(`\x89PNG\r

`),h=T("IHDR");W.exports=function(s){if(!(s.length<24)&&k(s,0,m)&&k(s,12,h))return{width:r(s,16),height:r(s,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(W,I,o){var T=o(14847).eG,k=o(14847).OF,r=o(14847).Ag,m=T("8BPS\0");W.exports=function(h){if(!(h.length<22)&&k(h,0,m))return{width:r(h,18),height:r(h,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(W){function I(e){return typeof e=="number"&&isFinite(e)&&e>0}var o=/<[-_.:a-zA-Z0-9][^>]*>/,T=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,r=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,m=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,h=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function s(e){return h.test(e)?e.match(h)[0]:"px"}W.exports=function(e){if(function(p){var y,b=0,x=p.length;for(p[0]===239&&p[1]===187&&p[2]===191&&(b=3);b<x&&((y=p[b])===32||y===9||y===13||y===10);)b++;return b!==x&&p[b]===60}(e)){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);var a=(t.match(o)||[""])[0];if(T.test(a)){var i=function(p){var y=p.match(k),b=p.match(r),x=p.match(m);return{width:y&&(y[1]||y[2]),height:b&&(b[1]||b[2]),viewbox:x&&(x[1]||x[2])}}(a),c=parseFloat(i.width),l=parseFloat(i.height);if(i.width&&i.height)return!I(c)||!I(l)?void 0:{width:c,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(i.width),hUnits:s(i.height)};var u=(i.viewbox||"").split(" "),f={width:u[2],height:u[3]},d=parseFloat(f.width),w=parseFloat(f.height);if(I(d)&&I(w)&&s(f.width)===s(f.height)){var v=d/w;return i.width?I(c)?{width:c,height:c/v,type:"svg",mime:"image/svg+xml",wUnits:s(i.width),hUnits:s(i.width)}:void 0:i.height?I(l)?{width:l*v,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(i.height),hUnits:s(i.height)}:void 0:{width:d,height:w,type:"svg",mime:"image/svg+xml",wUnits:s(f.width),hUnits:s(f.height)}}}}}},66278:function(W,I,o){var T=o(14847).eG,k=o(14847).OF,r=o(14847).mP,m=o(14847).n8,h=o(14847).nm,s=o(14847).Ag,e=T("II*\0"),t=T("MM\0*");function n(c,l,u){return u?m(c,l):r(c,l)}function a(c,l,u){return u?s(c,l):h(c,l)}function i(c,l,u){var f=n(c,l+2,u);return a(c,l+4,u)!==1||f!==3&&f!==4?null:f===3?n(c,l+8,u):a(c,l+8,u)}W.exports=function(c){if(!(c.length<8)&&(k(c,0,e)||k(c,0,t))){var l=c[0]===77,u=a(c,4,l)-8;if(!(u<0)){var f=u+8;if(!(c.length-f<2)){var d=12*n(c,f+0,l);if(!(d<=0||(f+=2,c.length-f<d))){var w,v,p,y;for(w=0;w<d;w+=12)(y=n(c,f+w,l))===256?v=i(c,f+w,l):y===257&&(p=i(c,f+w,l));return v&&p?{width:v,height:p,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function(W,I,o){var T=o(14847).eG,k=o(14847).OF,r=o(14847).mP,m=o(14847).nm,h=o(71371),s=T("RIFF"),e=T("WEBP");function t(i,c){if(i[c+3]===157&&i[c+4]===1&&i[c+5]===42)return{width:16383&r(i,c+6),height:16383&r(i,c+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function n(i,c){if(i[c]===47){var l=m(i,c+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function a(i,c){return{width:1+(i[c+6]<<16|i[c+5]<<8|i[c+4]),height:1+(i[c+9]<<c|i[c+8]<<8|i[c+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}W.exports=function(i){if(!(i.length<16)&&(k(i,0,s)||k(i,8,e))){var c=12,l=null,u=0,f=m(i,4)+8;if(!(f>i.length)){for(;c+8<f;)if(i[c]!==0){var d=String.fromCharCode.apply(null,i.slice(c,c+4)),w=m(i,c+4);d==="VP8 "&&w>=10?l=l||t(i,c+8):d==="VP8L"&&w>=9?l=l||n(i,c+8):d==="VP8X"&&w>=10?l=l||a(i,c+8):d==="EXIF"&&(u=h.get_orientation(i.slice(c+8,c+8+w)),c=1/0),c+=8+w}else c++;if(l)return u>0&&(l.orientation=u),l}}}},91497:function(W,I,o){W.exports={avif:o(24461),bmp:o(2504),gif:o(47342),ico:o(31355),jpeg:o(54261),png:o(6303),psd:o(38689),svg:o(6881),tiff:o(66278),webp:o(90784)}},33575:function(W,I,o){var T=o(91497);W.exports=function(k){return function(r){for(var m=Object.keys(T),h=0;h<m.length;h++){var s=T[m[h]](r);if(s)return s}return null}(k)},W.exports.parsers=T},90386:function(W){var I,o,T=W.exports={};function k(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function m(l){if(I===setTimeout)return setTimeout(l,0);if((I===k||!I)&&setTimeout)return I=setTimeout,setTimeout(l,0);try{return I(l,0)}catch{try{return I.call(null,l,0)}catch{return I.call(this,l,0)}}}(function(){try{I=typeof setTimeout=="function"?setTimeout:k}catch{I=k}try{o=typeof clearTimeout=="function"?clearTimeout:r}catch{o=r}})();var h,s=[],e=!1,t=-1;function n(){e&&h&&(e=!1,h.length?s=h.concat(s):t=-1,s.length&&a())}function a(){if(!e){var l=m(n);e=!0;for(var u=s.length;u;){for(h=s,s=[];++t<u;)h&&h[t].run();t=-1,u=s.length}h=null,e=!1,function(f){if(o===clearTimeout)return clearTimeout(f);if((o===r||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(f);try{return o(f)}catch{try{return o.call(null,f)}catch{return o.call(this,f)}}}(l)}}function i(l,u){this.fun=l,this.array=u}function c(){}T.nextTick=function(l){var u=new Array(arguments.length-1);if(arguments.length>1)for(var f=1;f<arguments.length;f++)u[f-1]=arguments[f];s.push(new i(l,u)),s.length!==1||e||m(a)},i.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=c,T.addListener=c,T.once=c,T.off=c,T.removeListener=c,T.removeAllListeners=c,T.emit=c,T.prependListener=c,T.prependOnceListener=c,T.listeners=function(l){return[]},T.binding=function(l){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(l){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},5877:function(W,I,o){for(var T=o(9748),k=typeof window>"u"?o.g:window,r=["moz","webkit"],m="AnimationFrame",h=k["request"+m],s=k["cancel"+m]||k["cancelRequest"+m],e=0;!h&&e<r.length;e++)h=k[r[e]+"Request"+m],s=k[r[e]+"Cancel"+m]||k[r[e]+"CancelRequest"+m];if(!h||!s){var t=0,n=0,a=[];h=function(i){if(a.length===0){var c=T(),l=Math.max(0,16.666666666666668-(c-t));t=l+c,setTimeout(function(){var u=a.slice(0);a.length=0;for(var f=0;f<u.length;f++)if(!u[f].cancelled)try{u[f].callback(t)}catch(d){setTimeout(function(){throw d},0)}},Math.round(l))}return a.push({handle:++n,callback:i,cancelled:!1}),n},s=function(i){for(var c=0;c<a.length;c++)a[c].handle===i&&(a[c].cancelled=!0)}}W.exports=function(i){return h.call(k,i)},W.exports.cancel=function(){s.apply(k,arguments)},W.exports.polyfill=function(i){i||(i=k),i.requestAnimationFrame=h,i.cancelAnimationFrame=s}},3593:function(W,I,o){var T=o(21527),k=o(25075),r=o(93447),m=o(71299),h=o(56131),s=o(30120),e=o(57060),t=e.float32,n=e.fract32;W.exports=function(i,c){if(typeof i=="function"?(c||(c={}),c.regl=i):c=i,c.length&&(c.positions=c),!(i=c.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,u,f,d,w,v,p=i._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},b=[];return d=i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),f=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),w=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=i.buffer({usage:"static",type:"float",data:a}),A(c),l=i({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:i.prop("range"),lineWidth:i.prop("lineWidth"),capSize:i.prop("capSize"),opacity:i.prop("opacity"),scale:i.prop("scale"),translate:i.prop("translate"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),viewport:function(L,E){return[E.viewport.x,E.viewport.y,L.viewportWidth,L.viewportHeight]}},attributes:{color:{buffer:d,offset:function(L,E){return 4*E.offset},divisor:1},position:{buffer:u,offset:function(L,E){return 8*E.offset},divisor:1},positionFract:{buffer:f,offset:function(L,E){return 8*E.offset},divisor:1},error:{buffer:w,offset:function(L,E){return 16*E.offset},divisor:1},direction:{buffer:v,stride:24,offset:0},lineOffset:{buffer:v,stride:24,offset:8},capOffset:{buffer:v,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:!1,instances:i.prop("count"),count:a.length}),h(x,{update:A,draw:_,destroy:M,regl:i,gl:p,canvas:p.canvas,groups:b}),x;function x(L){L?A(L):L===null&&M(),_()}function _(L){if(typeof L=="number")return g(L);L&&!Array.isArray(L)&&(L=[L]),i._refresh(),b.forEach(function(E,S){E&&(L&&(L[S]?E.draw=!0:E.draw=!1),E.draw?g(S):E.draw=!0)})}function g(L){typeof L=="number"&&(L=b[L]),L!=null&&L&&L.count&&L.color&&L.opacity&&L.positions&&L.positions.length>1&&(L.scaleRatio=[L.scale[0]*L.viewport.width,L.scale[1]*L.viewport.height],l(L),L.after&&L.after(L))}function A(L){if(L){L.length!=null?typeof L[0]=="number"&&(L=[{positions:L}]):Array.isArray(L)||(L=[L]);var E=0,S=0;if(x.groups=b=L.map(function(z,G){var V=b[G];return z&&(typeof z=="function"?z={after:z}:typeof z[0]=="number"&&(z={positions:z}),z=m(z,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),V||(b[G]=V={id:G,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},z=h({},y,z)),r(V,z,[{lineWidth:function(et){return .5*+et},capSize:function(et){return .5*+et},opacity:parseFloat,errors:function(et){return et=s(et),S+=et.length,et},positions:function(et,J){return et=s(et,"float64"),J.count=Math.floor(et.length/2),J.bounds=T(et,2),J.offset=E,E+=J.count,et}},{color:function(et,J){var X=J.count;if(et||(et="transparent"),!Array.isArray(et)||typeof et[0]=="number"){var Y=et;et=Array(X);for(var Z=0;Z<X;Z++)et[Z]=Y}if(et.length<X)throw Error("Not enough colors");for(var tt=new Uint8Array(4*X),rt=0;rt<X;rt++){var nt=k(et[rt],"uint8");tt.set(nt,4*rt)}return tt},range:function(et,J,X){var Y=J.bounds;return et||(et=Y),J.scale=[1/(et[2]-et[0]),1/(et[3]-et[1])],J.translate=[-et[0],-et[1]],J.scaleFract=n(J.scale),J.translateFract=n(J.translate),et},viewport:function(et){var J;return Array.isArray(et)?J={x:et[0],y:et[1],width:et[2]-et[0],height:et[3]-et[1]}:et?(J={x:et.x||et.left||0,y:et.y||et.top||0},et.right?J.width=et.right-J.x:J.width=et.w||et.width||0,et.bottom?J.height=et.bottom-J.y:J.height=et.h||et.height||0):J={x:0,y:0,width:p.drawingBufferWidth,height:p.drawingBufferHeight},J}}])),V}),E||S){var O=b.reduce(function(z,G,V){return z+(G?G.count:0)},0),P=new Float64Array(2*O),U=new Uint8Array(4*O),R=new Float32Array(4*O);b.forEach(function(z,G){if(z){var V=z.positions,et=z.count,J=z.offset,X=z.color,Y=z.errors;et&&(U.set(X,4*J),R.set(Y,4*J),P.set(V,2*J))}});var j=t(P);u(j);var B=n(P,j);f(B),d(U),w(R)}}}function M(){u.destroy(),f.destroy(),d.destroy(),w.destroy(),v.destroy()}};var a=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(W,I,o){var T=o(25075),k=o(21527),r=o(56131),m=o(56068),h=o(71299),s=o(30120),e=o(11474),t=o(54),n=o(57060),a=n.float32,i=n.fract32,c=o(83522),l=o(18863),u=o(6851);function f(d,w){if(!(this instanceof f))return new f(d,w);if(typeof d=="function"?(w||(w={}),w.regl=d):w=d,w.length&&(w.positions=w),!(d=w.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=d._gl,this.regl=d,this.passes=[],this.shaders=f.shaders.has(d)?f.shaders.get(d):f.shaders.set(d,f.createShaders(d)).get(d),this.update(w)}W.exports=f,f.dashMult=2,f.maxPatternLength=256,f.precisionThreshold=3e6,f.maxPoints=1e4,f.maxLines=2048,f.shaders=new c,f.createShaders=function(d){var w,v=d.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),p={primitive:"triangle strip",instances:d.prop("count"),count:4,offset:0,uniforms:{miterMode:function(b,x){return x.join==="round"?2:1},miterLimit:d.prop("miterLimit"),scale:d.prop("scale"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),translate:d.prop("translate"),thickness:d.prop("thickness"),dashTexture:d.prop("dashTexture"),opacity:d.prop("opacity"),pixelRatio:d.context("pixelRatio"),id:d.prop("id"),dashLength:d.prop("dashLength"),viewport:function(b,x){return[x.viewport.x,x.viewport.y,b.viewportWidth,b.viewportHeight]},depth:d.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(b,x){return!x.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:d.prop("viewport")},viewport:d.prop("viewport")},y=d(r({vert:m([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:m([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:d.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},p));try{w=d(r({cull:{enable:!0,face:"back"},vert:m([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:m([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aColor:{buffer:d.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:d.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},p))}catch{w=y}return{fill:d({primitive:"triangle",elements:function(b,x){return x.triangles},offset:0,vert:m([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:m([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:d.prop("scale"),color:d.prop("fill"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),translate:d.prop("translate"),opacity:d.prop("opacity"),pixelRatio:d.context("pixelRatio"),id:d.prop("id"),viewport:function(b,x){return[x.viewport.x,x.viewport.y,b.viewportWidth,b.viewportHeight]}},attributes:{position:{buffer:d.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:8}},blend:p.blend,depth:{enable:!1},scissor:p.scissor,stencil:p.stencil,viewport:p.viewport}),rect:y,miter:w}},f.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},f.prototype.render=function(){for(var d,w=[],v=arguments.length;v--;)w[v]=arguments[v];w.length&&(d=this).update.apply(d,w),this.draw()},f.prototype.draw=function(){for(var d=this,w=[],v=arguments.length;v--;)w[v]=arguments[v];return(w.length?w:this.passes).forEach(function(p,y){var b;if(p&&Array.isArray(p))return(b=d).draw.apply(b,p);typeof p=="number"&&(p=d.passes[p]),p&&p.count>1&&p.opacity&&(d.regl._refresh(),p.fill&&p.triangles&&p.triangles.length>2&&d.shaders.fill(p),p.thickness&&(p.scale[0]*p.viewport.width>f.precisionThreshold||p.scale[1]*p.viewport.height>f.precisionThreshold||p.join==="rect"||!p.join&&(p.thickness<=2||p.count>=f.maxPoints)?d.shaders.rect(p):d.shaders.miter(p)))}),this},f.prototype.update=function(d){var w=this;if(d){d.length!=null?typeof d[0]=="number"&&(d=[{positions:d}]):Array.isArray(d)||(d=[d]);var v=this.regl,p=this.gl;if(d.forEach(function(g,A){var M=w.passes[A];if(g!==void 0)if(g!==null){if(typeof g[0]=="number"&&(g={positions:g}),g=h(g,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),M||(w.passes[A]=M={id:A,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:v.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:v.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},g=r({},f.defaults,g)),g.thickness!=null&&(M.thickness=parseFloat(g.thickness)),g.opacity!=null&&(M.opacity=parseFloat(g.opacity)),g.miterLimit!=null&&(M.miterLimit=parseFloat(g.miterLimit)),g.overlay!=null&&(M.overlay=!!g.overlay,A<f.maxLines&&(M.depth=2*(f.maxLines-1-A%f.maxLines)/f.maxLines-1)),g.join!=null&&(M.join=g.join),g.hole!=null&&(M.hole=g.hole),g.fill!=null&&(M.fill=g.fill?T(g.fill,"uint8"):null),g.viewport!=null&&(M.viewport=l(g.viewport)),M.viewport||(M.viewport=l([p.drawingBufferWidth,p.drawingBufferHeight])),g.close!=null&&(M.close=g.close),g.positions===null&&(g.positions=[]),g.positions){var L,E;if(g.positions.x&&g.positions.y){var S=g.positions.x,O=g.positions.y;E=M.count=Math.max(S.length,O.length),L=new Float64Array(2*E);for(var P=0;P<E;P++)L[2*P]=S[P],L[2*P+1]=O[P]}else L=s(g.positions,"float64"),E=M.count=Math.floor(L.length/2);var U=M.bounds=k(L,2);if(M.fill){for(var R=[],j={},B=0,z=0,G=0,V=M.count;z<V;z++){var et=L[2*z],J=L[2*z+1];isNaN(et)||isNaN(J)||et==null||J==null?(et=L[2*B],J=L[2*B+1],j[z]=B):B=z,R[G++]=et,R[G++]=J}if(g.splitNull){M.count-1 in j||(j[M.count]=M.count-1);var X=Object.keys(j).map(Number).sort(function(ve,ie){return ve-ie}),Y=[],Z=0,tt=M.hole!=null?M.hole[0]:null;if(tt!=null){var rt=u(X,function(ve){return ve>=tt});(X=X.slice(0,rt)).push(tt)}for(var nt=function(ve){var ie=R.slice(2*Z,2*X[ve]).concat(tt?R.slice(2*tt):[]),se=(M.hole||[]).map(function(Ae){return Ae-tt+(X[ve]-Z)}),ke=e(ie,se);ke=ke.map(function(Ae){return Ae+Z+(Ae+Z<X[ve]?0:tt-X[ve])}),Y.push.apply(Y,ke),Z=X[ve]+1},ot=0;ot<X.length;ot++)nt(ot);for(var ct=0,pt=Y.length;ct<pt;ct++)j[Y[ct]]!=null&&(Y[ct]=j[Y[ct]]);M.triangles=Y}else{for(var gt=e(R,M.hole||[]),kt=0,yt=gt.length;kt<yt;kt++)j[gt[kt]]!=null&&(gt[kt]=j[gt[kt]]);M.triangles=gt}}var mt=new Float64Array(L);t(mt,2,U);var Ot=new Float64Array(2*E+6);M.close?L[0]===L[2*E-2]&&L[1]===L[2*E-1]?(Ot[0]=mt[2*E-4],Ot[1]=mt[2*E-3]):(Ot[0]=mt[2*E-2],Ot[1]=mt[2*E-1]):(Ot[0]=mt[0],Ot[1]=mt[1]),Ot.set(mt,2),M.close?L[0]===L[2*E-2]&&L[1]===L[2*E-1]?(Ot[2*E+2]=mt[2],Ot[2*E+3]=mt[3],M.count-=1):(Ot[2*E+2]=mt[0],Ot[2*E+3]=mt[1],Ot[2*E+4]=mt[2],Ot[2*E+5]=mt[3]):(Ot[2*E+2]=mt[2*E-2],Ot[2*E+3]=mt[2*E-1],Ot[2*E+4]=mt[2*E-2],Ot[2*E+5]=mt[2*E-1]);var vt=a(Ot);M.positionBuffer(vt);var xt=i(Ot,vt);M.positionFractBuffer(xt)}if(g.range?M.range=g.range:M.range||(M.range=M.bounds),(g.range||g.positions)&&M.count){var st=M.bounds,at=st[2]-st[0],ht=st[3]-st[1],Lt=M.range[2]-M.range[0],Mt=M.range[3]-M.range[1];M.scale=[at/Lt,ht/Mt],M.translate=[-M.range[0]/Lt+st[0]/Lt||0,-M.range[1]/Mt+st[1]/Mt||0],M.scaleFract=i(M.scale),M.translateFract=i(M.translate)}if(g.dashes){var _t,St=0;if(!g.dashes||g.dashes.length<2)St=1,_t=new Uint8Array([255,255,255,255,255,255,255,255]);else{St=0;for(var Dt=0;Dt<g.dashes.length;++Dt)St+=g.dashes[Dt];_t=new Uint8Array(St*f.dashMult);for(var ut=0,Tt=255,bt=0;bt<2;bt++)for(var It=0;It<g.dashes.length;++It){for(var zt=0,Ft=g.dashes[It]*f.dashMult*.5;zt<Ft;++zt)_t[ut++]=Tt;Tt^=255}}M.dashLength=St,M.dashTexture({channels:1,data:_t,width:_t.length,height:1,mag:"linear",min:"linear"},0,0)}if(g.color){var $t=M.count,Wt=g.color;Wt||(Wt="transparent");var Xt=new Uint8Array(4*$t+4);if(Array.isArray(Wt)&&typeof Wt[0]!="number"){for(var ae=0;ae<$t;ae++){var Qt=T(Wt[ae],"uint8");Xt.set(Qt,4*ae)}Xt.set(T(Wt[0],"uint8"),4*$t)}else for(var de=T(Wt,"uint8"),ye=0;ye<$t+1;ye++)Xt.set(de,4*ye);M.colorBuffer({usage:"dynamic",type:"uint8",data:Xt})}}else w.passes[A]=null}),d.length<this.passes.length){for(var y=d.length;y<this.passes.length;y++){var b=this.passes[y];b&&(b.colorBuffer.destroy(),b.positionBuffer.destroy(),b.dashTexture.destroy())}this.passes.length=d.length}for(var x=[],_=0;_<this.passes.length;_++)this.passes[_]!==null&&x.push(this.passes[_]);return this.passes=x,this}},f.prototype.destroy=function(){return this.passes.forEach(function(d){d.colorBuffer.destroy(),d.positionBuffer.destroy(),d.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(W,I,o){function T(p,y){return function(b){if(Array.isArray(b))return b}(p)||function(b,x){var _=b==null?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(_!=null){var g,A,M,L,E=[],S=!0,O=!1;try{if(M=(_=_.call(b)).next,x===0){if(Object(_)!==_)return;S=!1}else for(;!(S=(g=M.call(_)).done)&&(E.push(g.value),E.length!==x);S=!0);}catch(P){O=!0,A=P}finally{try{if(!S&&_.return!=null&&(L=_.return(),Object(L)!==L))return}finally{if(O)throw A}}return E}}(p,y)||k(p,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(p,y){if(p){if(typeof p=="string")return r(p,y);var b=Object.prototype.toString.call(p).slice(8,-1);return b==="Object"&&p.constructor&&(b=p.constructor.name),b==="Map"||b==="Set"?Array.from(p):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?r(p,y):void 0}}function r(p,y){(y==null||y>p.length)&&(y=p.length);for(var b=0,x=new Array(y);b<y;b++)x[b]=p[b];return x}var m=o(25075),h=o(21527),s=o(6475),e=o(88294),t=o(56131),n=o(56068),a=o(71299),i=o(93447),c=o(30120),l=o(62683),u=o(57060),f=o(18863),d=w;function w(p,y){var b=this;if(!(this instanceof w))return new w(p,y);typeof p=="function"?(y||(y={}),y.regl=p):(y=p,p=null),y&&y.length&&(y.positions=y);var x,_=(p=y.regl)._gl,g=[];this.tooManyColors=l,x=p.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:p,gl:_,groups:[],markerCache:[null],markerTextures:[null],palette:g,paletteIds:{},paletteTexture:x,maxColors:255,maxSize:100,canvas:_.canvas}),this.update(y);var A={uniforms:{constPointSize:!!y.constPointSize,opacity:p.prop("opacity"),paletteSize:function(E,S){return[b.tooManyColors?0:255,x.height]},pixelRatio:p.context("pixelRatio"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translate:p.prop("translate"),translateFract:p.prop("translateFract"),markerTexture:p.prop("markerTexture"),paletteTexture:x},attributes:{x:function(E,S){return S.xAttr||{buffer:S.positionBuffer,stride:8,offset:0}},y:function(E,S){return S.yAttr||{buffer:S.positionBuffer,stride:8,offset:4}},xFract:function(E,S){return S.xAttr?{constant:[0,0]}:{buffer:S.positionFractBuffer,stride:8,offset:0}},yFract:function(E,S){return S.yAttr?{constant:[0,0]}:{buffer:S.positionFractBuffer,stride:8,offset:4}},size:function(E,S){return S.size.length?{buffer:S.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*S.size/b.maxSize)]}},borderSize:function(E,S){return S.borderSize.length?{buffer:S.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*S.borderSize/b.maxSize)]}},colorId:function(E,S){return S.color.length?{buffer:S.colorBuffer,stride:b.tooManyColors?8:4,offset:0}:{constant:b.tooManyColors?g.slice(4*S.color,4*S.color+4):[S.color]}},borderColorId:function(E,S){return S.borderColor.length?{buffer:S.colorBuffer,stride:b.tooManyColors?8:4,offset:b.tooManyColors?4:2}:{constant:b.tooManyColors?g.slice(4*S.borderColor,4*S.borderColor+4):[S.borderColor]}},isActive:function(E,S){return S.activation===!0?{constant:[1]}:S.activation?S.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:p.prop("elements"),count:p.prop("count"),offset:p.prop("offset"),primitive:"points"},M=t({},A);M.frag=n([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),M.vert=n([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=p(M);var L=t({},A);L.frag=n([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),L.vert=n([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),l&&(L.frag=L.frag.replace("smoothstep","smoothStep"),M.frag=M.frag.replace("smoothstep","smoothStep")),this.drawCircle=p(L)}w.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},w.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},w.prototype.draw=function(){for(var p=this,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];var _=this.groups;if(b.length===1&&Array.isArray(b[0])&&(b[0][0]===null||Array.isArray(b[0][0]))&&(b=b[0]),this.regl._refresh(),b.length)for(var g=0;g<b.length;g++)this.drawItem(g,b[g]);else _.forEach(function(A,M){p.drawItem(M)});return this},w.prototype.drawItem=function(p,y){var b,x=this.groups,_=x[p];if(typeof y=="number"&&(p=y,_=x[y],y=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,y));for(var g=[],A=1;A<_.activation.length;A++)_.activation[A]&&(_.activation[A]===!0||_.activation[A].data.length)&&g.push.apply(g,function(M){if(Array.isArray(M))return r(M)}(b=this.getMarkerDrawOptions(A,_,y))||function(M){if(typeof Symbol<"u"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}(b)||k(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());g.length&&this.drawMarker(g)}},w.prototype.getMarkerDrawOptions=function(p,y,b){var x=y.range,_=y.tree,g=y.viewport,A=y.activation,M=y.selectionBuffer,L=y.count;if(this.regl,!_)return b?[t({},y,{markerTexture:this.markerTextures[p],activation:A[p],count:b.length,elements:b,offset:0})]:[t({},y,{markerTexture:this.markerTextures[p],activation:A[p],offset:0})];var E=[],S=_.range(x,{lod:!0,px:[(x[2]-x[0])/g.width,(x[3]-x[1])/g.height]});if(b){for(var O=A[p].data,P=new Uint8Array(L),U=0;U<b.length;U++){var R=b[U];P[R]=O?O[R]:1}M.subdata(P)}for(var j=S.length;j--;){var B=T(S[j],2),z=B[0],G=B[1];E.push(t({},y,{markerTexture:this.markerTextures[p],activation:b?M:A[p],offset:z,count:G-z}))}return E},w.prototype.update=function(){for(var p=this,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];if(b.length){b.length===1&&Array.isArray(b[0])&&(b=b[0]);var _=this.groups,g=this.gl,A=this.regl,M=this.maxSize,L=this.maxColors,E=this.palette;this.groups=_=b.map(function(S,O){var P=_[O];if(S===void 0)return P;S===null?S={positions:null}:typeof S=="function"?S={ondraw:S}:typeof S[0]=="number"&&(S={positions:S}),(S=a(S,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(S.positions=[]),S.tooManyColors!=null&&(p.tooManyColors=S.tooManyColors),P||(_[O]=P={id:O,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:A.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},S=t({},w.defaults,S)),S.positions&&!("marker"in S)&&(S.marker=P.marker,delete P.marker),S.marker&&!("positions"in S)&&(S.positions=P.positions,delete P.positions);var U=0,R=0;if(i(P,S,[{snap:!0,size:function(kt,yt){return kt==null&&(kt=w.defaults.size),U+=kt&&kt.length?1:0,kt},borderSize:function(kt,yt){return kt==null&&(kt=w.defaults.borderSize),U+=kt&&kt.length?1:0,kt},opacity:parseFloat,color:function(kt,yt){return kt==null&&(kt=w.defaults.color),kt=p.updateColor(kt),R++,kt},borderColor:function(kt,yt){return kt==null&&(kt=w.defaults.borderColor),kt=p.updateColor(kt),R++,kt},bounds:function(kt,yt,mt){return"range"in mt||(mt.range=null),kt},positions:function(kt,yt,mt){var Ot=yt.snap,vt=yt.positionBuffer,xt=yt.positionFractBuffer,st=yt.selectionBuffer;if(kt.x||kt.y)return kt.x.length?yt.xAttr={buffer:A.buffer(kt.x),offset:0,stride:4,count:kt.x.length}:yt.xAttr={buffer:kt.x.buffer,offset:4*kt.x.offset||0,stride:4*(kt.x.stride||1),count:kt.x.count},kt.y.length?yt.yAttr={buffer:A.buffer(kt.y),offset:0,stride:4,count:kt.y.length}:yt.yAttr={buffer:kt.y.buffer,offset:4*kt.y.offset||0,stride:4*(kt.y.stride||1),count:kt.y.count},yt.count=Math.max(yt.xAttr.count,yt.yAttr.count),kt;kt=c(kt,"float64");var at=yt.count=Math.floor(kt.length/2),ht=yt.bounds=at?h(kt,2):null;if(mt.range||yt.range||(delete yt.range,mt.range=ht),mt.marker||yt.marker||(delete yt.marker,mt.marker=null),Ot&&(Ot===!0||at>Ot)?yt.tree=e(kt,{bounds:ht}):Ot&&Ot.length&&(yt.tree=Ot),yt.tree){var Lt={primitive:"points",usage:"static",data:yt.tree,type:"uint32"};yt.elements?yt.elements(Lt):yt.elements=A.elements(Lt)}var Mt=u.float32(kt);return vt({data:Mt,usage:"dynamic"}),xt({data:u.fract32(kt,Mt),usage:"dynamic"}),st({data:new Uint8Array(at),type:"uint8",usage:"stream"}),kt}},{marker:function(kt,yt,mt){var Ot=yt.activation;if(Ot.forEach(function(Mt){return Mt&&Mt.destroy&&Mt.destroy()}),Ot.length=0,kt&&typeof kt[0]!="number"){for(var vt=[],xt=0,st=Math.min(kt.length,yt.count);xt<st;xt++){var at=p.addMarker(kt[xt]);vt[at]||(vt[at]=new Uint8Array(yt.count)),vt[at][xt]=1}for(var ht=0;ht<vt.length;ht++)if(vt[ht]){var Lt={data:vt[ht],type:"uint8",usage:"static"};Ot[ht]?Ot[ht](Lt):Ot[ht]=A.buffer(Lt),Ot[ht].data=vt[ht]}}else Ot[p.addMarker(kt)]=!0;return kt},range:function(kt,yt,mt){var Ot=yt.bounds;if(Ot)return kt||(kt=Ot),yt.scale=[1/(kt[2]-kt[0]),1/(kt[3]-kt[1])],yt.translate=[-kt[0],-kt[1]],yt.scaleFract=u.fract(yt.scale),yt.translateFract=u.fract(yt.translate),kt},viewport:function(kt){return f(kt||[g.drawingBufferWidth,g.drawingBufferHeight])}}]),U){var j=P,B=j.count,z=j.size,G=j.borderSize,V=j.sizeBuffer,et=new Uint8Array(2*B);if(z.length||G.length)for(var J=0;J<B;J++)et[2*J]=Math.round(255*(z[J]==null?z:z[J])/M),et[2*J+1]=Math.round(255*(G[J]==null?G:G[J])/M);V({data:et,usage:"dynamic"})}if(R){var X,Y=P,Z=Y.count,tt=Y.color,rt=Y.borderColor,nt=Y.colorBuffer;if(p.tooManyColors){if(tt.length||rt.length){X=new Uint8Array(8*Z);for(var ot=0;ot<Z;ot++){var ct=tt[ot];X[8*ot]=E[4*ct],X[8*ot+1]=E[4*ct+1],X[8*ot+2]=E[4*ct+2],X[8*ot+3]=E[4*ct+3];var pt=rt[ot];X[8*ot+4]=E[4*pt],X[8*ot+5]=E[4*pt+1],X[8*ot+6]=E[4*pt+2],X[8*ot+7]=E[4*pt+3]}}}else if(tt.length||rt.length){X=new Uint8Array(4*Z+2);for(var gt=0;gt<Z;gt++)tt[gt]!=null&&(X[4*gt]=tt[gt]%L,X[4*gt+1]=Math.floor(tt[gt]/L)),rt[gt]!=null&&(X[4*gt+2]=rt[gt]%L,X[4*gt+3]=Math.floor(rt[gt]/L))}nt({data:X||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return P})}},w.prototype.addMarker=function(p){var y,b=this.markerTextures,x=this.regl,_=this.markerCache,g=p==null?0:_.indexOf(p);if(g>=0)return g;if(p instanceof Uint8Array||p instanceof Uint8ClampedArray)y=p;else{y=new Uint8Array(p.length);for(var A=0,M=p.length;A<M;A++)y[A]=255*p[A]}var L=Math.floor(Math.sqrt(y.length));return g=b.length,_.push(p),b.push(x.texture({channels:1,data:y,radius:L,mag:"linear",min:"linear"})),g},w.prototype.updateColor=function(p){var y=this.paletteIds,b=this.palette,x=this.maxColors;Array.isArray(p)||(p=[p]);var _=[];if(typeof p[0]=="number"){var g=[];if(Array.isArray(p))for(var A=0;A<p.length;A+=4)g.push(p.slice(A,A+4));else for(var M=0;M<p.length;M+=4)g.push(p.subarray(M,M+4));p=g}for(var L=0;L<p.length;L++){var E=p[L];E=m(E,"uint8");var S=s(E,!1);if(y[S]==null){var O=b.length;y[S]=Math.floor(O/4),b[O]=E[0],b[O+1]=E[1],b[O+2]=E[2],b[O+3]=E[3]}_[L]=y[S]}return!this.tooManyColors&&b.length>4*x&&(this.tooManyColors=!0),this.updatePalette(b),_.length===1?_[0]:_},w.prototype.updatePalette=function(p){if(!this.tooManyColors){var y=this.maxColors,b=this.paletteTexture,x=Math.ceil(.25*p.length/y);if(x>1)for(var _=.25*(p=p.slice()).length%y;_<x*y;_++)p.push(0,0,0,0);b.height<x&&b.resize(y,x),b.subimage({width:Math.min(.25*p.length,y),height:x,data:p},0,0)}},w.prototype.destroy=function(){return this.groups.forEach(function(p){p.sizeBuffer.destroy(),p.positionBuffer.destroy(),p.positionFractBuffer.destroy(),p.colorBuffer.destroy(),p.activation.forEach(function(y){return y&&y.destroy&&y.destroy()}),p.selectionBuffer.destroy(),p.elements&&p.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(p){return p&&p.destroy&&p.destroy()}),this};var v=o(56131);W.exports=function(p,y){var b=new d(p,y),x=b.render.bind(b);return v(x,{render:x,update:b.update.bind(b),draw:b.draw.bind(b),destroy:b.destroy.bind(b),regl:b.regl,gl:b.gl,canvas:b.gl.canvas,groups:b.groups,markers:b.markerCache,palette:b.palette}),x}},60487:function(W,I,o){var T=o(11870),k=o(71299),r=o(21527),m=o(5877),h=o(57471),s=o(18863),e=o(30120);function t(c,l){if(!(this instanceof t))return new t(c);this.traces=[],this.passes={},this.regl=c,this.scatter=T(c),this.canvas=this.scatter.canvas}function n(c,l,u){return(c.id!=null?c.id:c)<<16|(255&l)<<8|255&u}function a(c,l,u){var f,d,w,v,p=c[l],y=c[u];return p.length>2?(p[0],p[2],f=p[1],d=p[3]):p.length?(f=p[0],d=p[1]):(p.x,f=p.y,p.x,p.width,d=p.y+p.height),y.length>2?(w=y[0],v=y[2],y[1],y[3]):y.length?(w=y[0],v=y[1]):(w=y.x,y.y,v=y.x+y.width,y.y,y.height),[w,f,v,d]}function i(c){if(typeof c=="number")return[c,c,c,c];if(c.length===2)return[c[0],c[1],c[0],c[1]];var l=s(c);return[l.x,l.y,l.x+l.width,l.y+l.height]}W.exports=t,t.prototype.render=function(){for(var c,l=this,u=[],f=arguments.length;f--;)u[f]=arguments[f];return u.length&&(c=this).update.apply(c,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=m(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,m(function(){l.dirty=!1})),this)},t.prototype.update=function(){for(var c,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var f=0;f<l.length;f++)this.updateItem(f,l[f]);this.traces=this.traces.filter(Boolean);for(var d=[],w=0,v=0;v<this.traces.length;v++){for(var p=this.traces[v],y=this.traces[v].passes,b=0;b<y.length;b++)d.push(this.passes[y[b]]);p.passOffset=w,w+=p.passes.length}return(c=this.scatter).update.apply(c,d),this}},t.prototype.updateItem=function(c,l){var u=this.regl;if(l===null)return this.traces[c]=null,this;if(!l)return this;var f,d=k(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),w=this.traces[c]||(this.traces[c]={id:c,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:s([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(d.color!=null&&(w.color=d.color),d.size!=null&&(w.size=d.size),d.marker!=null&&(w.marker=d.marker),d.borderColor!=null&&(w.borderColor=d.borderColor),d.borderSize!=null&&(w.borderSize=d.borderSize),d.opacity!=null&&(w.opacity=d.opacity),d.viewport&&(w.viewport=s(d.viewport)),d.diagonal!=null&&(w.diagonal=d.diagonal),d.upper!=null&&(w.upper=d.upper),d.lower!=null&&(w.lower=d.lower),d.data){w.buffer(e(d.data)),w.columns=d.data.length,w.count=d.data[0].length,w.bounds=[];for(var v=0;v<w.columns;v++)w.bounds[v]=r(d.data[v],1)}d.range&&(w.range=d.range,f=w.range&&typeof w.range[0]!="number"),d.domain&&(w.domain=d.domain);var p=!1;d.padding!=null&&(Array.isArray(d.padding)&&d.padding.length===w.columns&&typeof d.padding[d.padding.length-1]=="number"?(w.padding=d.padding.map(i),p=!0):w.padding=i(d.padding));var y=w.columns,b=w.count,x=w.viewport.width,_=w.viewport.height,g=w.viewport.x,A=w.viewport.y,M=x/y,L=_/y;w.passes=[];for(var E=0;E<y;E++)for(var S=0;S<y;S++)if((w.diagonal||S!==E)&&(w.upper||!(E>S))&&(w.lower||!(E<S))){var O=n(w.id,E,S),P=this.passes[O]||(this.passes[O]={});if(d.data&&(d.transpose?P.positions={x:{buffer:w.buffer,offset:S,count:b,stride:y},y:{buffer:w.buffer,offset:E,count:b,stride:y}}:P.positions={x:{buffer:w.buffer,offset:S*b,count:b},y:{buffer:w.buffer,offset:E*b,count:b}},P.bounds=a(w.bounds,E,S)),d.domain||d.viewport||d.data){var U=p?a(w.padding,E,S):w.padding;if(w.domain){var R=a(w.domain,E,S),j=R[0],B=R[1],z=R[2],G=R[3];P.viewport=[g+j*x+U[0],A+B*_+U[1],g+z*x-U[2],A+G*_-U[3]]}else P.viewport=[g+S*M+M*U[0],A+E*L+L*U[1],g+(S+1)*M-M*U[2],A+(E+1)*L-L*U[3]]}d.color&&(P.color=w.color),d.size&&(P.size=w.size),d.marker&&(P.marker=w.marker),d.borderSize&&(P.borderSize=w.borderSize),d.borderColor&&(P.borderColor=w.borderColor),d.opacity&&(P.opacity=w.opacity),d.range&&(P.range=f?a(w.range,E,S):w.range||P.bounds),w.passes.push(O)}return this},t.prototype.draw=function(){for(var c,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var f=[],d=0;d<l.length;d++)if(typeof l[d]=="number"){var w=this.traces[l[d]],v=w.passes,p=w.passOffset;f.push.apply(f,h(p,p+v.length))}else if(l[d].length){var y=l[d],b=this.traces[d],x=b.passes,_=b.passOffset;x=x.map(function(g,A){f[_+A]=y})}(c=this.scatter).draw.apply(c,f)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(c){c.buffer&&c.buffer.destroy&&c.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(W){W.exports=function(){function I(Gt,Yt){this.id=rt++,this.type=Gt,this.data=Yt}function o(Gt){if(Gt.length===0)return[];var Yt=Gt.charAt(0),ne=Gt.charAt(Gt.length-1);if(1<Gt.length&&Yt===ne&&(Yt==='"'||Yt==="'"))return['"'+Gt.substr(1,Gt.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Yt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Gt))return o(Gt.substr(0,Yt.index)).concat(o(Yt[1])).concat(o(Gt.substr(Yt.index+Yt[0].length)));if((Yt=Gt.split(".")).length===1)return['"'+Gt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Gt=[],ne=0;ne<Yt.length;++ne)Gt=Gt.concat(o(Yt[ne]));return Gt}function T(Gt){return"["+o(Gt).join("][")+"]"}function k(Gt){return typeof Gt=="string"?Gt.split():Gt}function r(Gt){return typeof Gt=="string"?document.querySelector(Gt):Gt}function m(Gt){var Yt,ne,re,Pt,Nt=Gt||{};Gt={};var ee=[],te=[],ge=typeof window>"u"?1:window.devicePixelRatio,pe=!1,me={},ce=function(ue){},we=function(){};if(typeof Nt=="string"?Yt=document.querySelector(Nt):typeof Nt=="object"&&(typeof Nt.nodeName=="string"&&typeof Nt.appendChild=="function"&&typeof Nt.getBoundingClientRect=="function"?Yt=Nt:typeof Nt.drawArrays=="function"||typeof Nt.drawElements=="function"?re=(Pt=Nt).canvas:("gl"in Nt?Pt=Nt.gl:"canvas"in Nt?re=r(Nt.canvas):"container"in Nt&&(ne=r(Nt.container)),"attributes"in Nt&&(Gt=Nt.attributes),"extensions"in Nt&&(ee=k(Nt.extensions)),"optionalExtensions"in Nt&&(te=k(Nt.optionalExtensions)),"onDone"in Nt&&(ce=Nt.onDone),"profile"in Nt&&(pe=!!Nt.profile),"pixelRatio"in Nt&&(ge=+Nt.pixelRatio),"cachedCode"in Nt&&(me=Nt.cachedCode))),Yt&&(Yt.nodeName.toLowerCase()==="canvas"?re=Yt:ne=Yt),!Pt){if(!re){if(!(Yt=function(ue,he,be){function Pe(){var tr=window.innerWidth,Ge=window.innerHeight;ue!==document.body&&(tr=(Ge=Ue.getBoundingClientRect()).right-Ge.left,Ge=Ge.bottom-Ge.top),Ue.width=be*tr,Ue.height=be*Ge}var De,Ue=document.createElement("canvas");return tt(Ue.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),ue.appendChild(Ue),ue===document.body&&(Ue.style.position="absolute",tt(ue.style,{margin:0,padding:0})),ue!==document.body&&typeof ResizeObserver=="function"?(De=new ResizeObserver(function(){setTimeout(Pe)})).observe(ue):window.addEventListener("resize",Pe,!1),Pe(),{canvas:Ue,onDestroy:function(){De?De.disconnect():window.removeEventListener("resize",Pe),ue.removeChild(Ue)}}}(ne||document.body,0,ge)))return null;re=Yt.canvas,we=Yt.onDestroy}Gt.premultipliedAlpha===void 0&&(Gt.premultipliedAlpha=!0),Pt=function(ue,he){function be(Pe){try{return ue.getContext(Pe,he)}catch{return null}}return be("webgl")||be("experimental-webgl")||be("webgl-experimental")}(re,Gt)}return Pt?{gl:Pt,canvas:re,container:ne,extensions:ee,optionalExtensions:te,pixelRatio:ge,profile:pe,cachedCode:me,onDone:ce,onDestroy:we}:(we(),ce("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function h(Gt,Yt){for(var ne=Array(Gt),re=0;re<Gt;++re)ne[re]=Yt(re);return ne}function s(Gt){var Yt,ne;return Yt=(65535<Gt)<<4,Yt|=ne=(255<(Gt>>>=Yt))<<3,(Yt|=ne=(15<(Gt>>>=ne))<<2)|(ne=(3<(Gt>>>=ne))<<1)|Gt>>>ne>>1}function e(){function Gt(re){t:{for(var Pt=16;268435456>=Pt;Pt*=16)if(re<=Pt){re=Pt;break t}re=0}return 0<(Pt=ne[s(re)>>2]).length?Pt.pop():new ArrayBuffer(re)}function Yt(re){ne[s(re.byteLength)>>2].push(re)}var ne=h(8,function(){return[]});return{alloc:Gt,free:Yt,allocType:function(re,Pt){var Nt=null;switch(re){case 5120:Nt=new Int8Array(Gt(Pt),0,Pt);break;case 5121:Nt=new Uint8Array(Gt(Pt),0,Pt);break;case 5122:Nt=new Int16Array(Gt(2*Pt),0,Pt);break;case 5123:Nt=new Uint16Array(Gt(2*Pt),0,Pt);break;case 5124:Nt=new Int32Array(Gt(4*Pt),0,Pt);break;case 5125:Nt=new Uint32Array(Gt(4*Pt),0,Pt);break;case 5126:Nt=new Float32Array(Gt(4*Pt),0,Pt);break;default:return null}return Nt.length!==Pt?Nt.subarray(0,Pt):Nt},freeType:function(re){Yt(re.buffer)}}}function t(Gt){return!!Gt&&typeof Gt=="object"&&Array.isArray(Gt.shape)&&Array.isArray(Gt.stride)&&typeof Gt.offset=="number"&&Gt.shape.length===Gt.stride.length&&(Array.isArray(Gt.data)||kt(Gt.data))}function n(Gt,Yt,ne,re,Pt,Nt){for(var ee=0;ee<Yt;++ee)for(var te=Gt[ee],ge=0;ge<ne;++ge)for(var pe=te[ge],me=0;me<re;++me)Pt[Nt++]=pe[me]}function a(Gt,Yt,ne,re,Pt){for(var Nt=1,ee=ne+1;ee<Yt.length;++ee)Nt*=Yt[ee];var te=Yt[ne];if(Yt.length-ne==4){var ge=Yt[ne+1],pe=Yt[ne+2];for(Yt=Yt[ne+3],ee=0;ee<te;++ee)n(Gt[ee],ge,pe,Yt,re,Pt),Pt+=Nt}else for(ee=0;ee<te;++ee)a(Gt[ee],Yt,ne+1,re,Pt),Pt+=Nt}function i(Gt){return 0|Ot[Object.prototype.toString.call(Gt)]}function c(Gt,Yt){for(var ne=0;ne<Yt.length;++ne)Gt[ne]=Yt[ne]}function l(Gt,Yt,ne,re,Pt,Nt,ee){for(var te=0,ge=0;ge<ne;++ge)for(var pe=0;pe<re;++pe)Gt[te++]=Yt[Pt*ge+Nt*pe+ee]}function u(Gt,Yt,ne,re){function Pt(ce){this.id=ge++,this.buffer=Gt.createBuffer(),this.type=ce,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,ne.profile&&(this.stats={size:0})}function Nt(ce,we,ue){ce.byteLength=we.byteLength,Gt.bufferData(ce.type,we,ue)}function ee(ce,we,ue,he,be,Pe){if(ce.usage=ue,Array.isArray(we)){if(ce.dtype=he||5126,0<we.length)if(Array.isArray(we[0])){be=at(we);for(var De=he=1;De<be.length;++De)he*=be[De];ce.dimension=he,Nt(ce,we=st(we,be,ce.dtype),ue),Pe?ce.persistentData=we:pt.freeType(we)}else typeof we[0]=="number"?(ce.dimension=be,c(be=pt.allocType(ce.dtype,we.length),we),Nt(ce,be,ue),Pe?ce.persistentData=be:pt.freeType(be)):kt(we[0])&&(ce.dimension=we[0].length,ce.dtype=he||i(we[0])||5126,Nt(ce,we=st(we,[we.length,we[0].length],ce.dtype),ue),Pe?ce.persistentData=we:pt.freeType(we))}else if(kt(we))ce.dtype=he||i(we),ce.dimension=be,Nt(ce,we,ue),Pe&&(ce.persistentData=new Uint8Array(new Uint8Array(we.buffer)));else if(t(we)){be=we.shape;var Ue=we.stride,tr=(De=we.offset,0),Ge=0,Ze=0,We=0;be.length===1?(tr=be[0],Ge=1,Ze=Ue[0],We=0):be.length===2&&(tr=be[0],Ge=be[1],Ze=Ue[0],We=Ue[1]),ce.dtype=he||i(we.data)||5126,ce.dimension=Ge,l(be=pt.allocType(ce.dtype,tr*Ge),we.data,tr,Ge,Ze,We,De),Nt(ce,be,ue),Pe?ce.persistentData=be:pt.freeType(be)}else we instanceof ArrayBuffer&&(ce.dtype=5121,ce.dimension=be,Nt(ce,we,ue),Pe&&(ce.persistentData=new Uint8Array(new Uint8Array(we))))}function te(ce){Yt.bufferCount--,re(ce),Gt.deleteBuffer(ce.buffer),ce.buffer=null,delete pe[ce.id]}var ge=0,pe={};Pt.prototype.bind=function(){Gt.bindBuffer(this.type,this.buffer)},Pt.prototype.destroy=function(){te(this)};var me=[];return ne.profile&&(Yt.getTotalBufferSize=function(){var ce=0;return Object.keys(pe).forEach(function(we){ce+=pe[we].stats.size}),ce}),{create:function(ce,we,ue,he){function be(De){var Ue=35044,tr=null,Ge=0,Ze=0,We=1;return Array.isArray(De)||kt(De)||t(De)||De instanceof ArrayBuffer?tr=De:typeof De=="number"?Ge=0|De:De&&("data"in De&&(tr=De.data),"usage"in De&&(Ue=xt[De.usage]),"type"in De&&(Ze=vt[De.type]),"dimension"in De&&(We=0|De.dimension),"length"in De&&(Ge=0|De.length)),Pe.bind(),tr?ee(Pe,tr,Ue,Ze,We,he):(Ge&&Gt.bufferData(Pe.type,Ge,Ue),Pe.dtype=Ze||5121,Pe.usage=Ue,Pe.dimension=We,Pe.byteLength=Ge),ne.profile&&(Pe.stats.size=Pe.byteLength*ht[Pe.dtype]),be}Yt.bufferCount++;var Pe=new Pt(we);return pe[Pe.id]=Pe,ue||be(ce),be._reglType="buffer",be._buffer=Pe,be.subdata=function(De,Ue){var tr,Ge=0|(Ue||0);if(Pe.bind(),kt(De)||De instanceof ArrayBuffer)Gt.bufferSubData(Pe.type,Ge,De);else if(Array.isArray(De)){if(0<De.length)if(typeof De[0]=="number"){var Ze=pt.allocType(Pe.dtype,De.length);c(Ze,De),Gt.bufferSubData(Pe.type,Ge,Ze),pt.freeType(Ze)}else(Array.isArray(De[0])||kt(De[0]))&&(tr=at(De),Ze=st(De,tr,Pe.dtype),Gt.bufferSubData(Pe.type,Ge,Ze),pt.freeType(Ze))}else if(t(De)){tr=De.shape;var We=De.stride,pr=Ze=0,xr=0,sr=0;tr.length===1?(Ze=tr[0],pr=1,xr=We[0],sr=0):tr.length===2&&(Ze=tr[0],pr=tr[1],xr=We[0],sr=We[1]),tr=Array.isArray(De.data)?Pe.dtype:i(De.data),l(tr=pt.allocType(tr,Ze*pr),De.data,Ze,pr,xr,sr,De.offset),Gt.bufferSubData(Pe.type,Ge,tr),pt.freeType(tr)}return be},ne.profile&&(be.stats=Pe.stats),be.destroy=function(){te(Pe)},be},createStream:function(ce,we){var ue=me.pop();return ue||(ue=new Pt(ce)),ue.bind(),ee(ue,we,35040,0,1,!1),ue},destroyStream:function(ce){me.push(ce)},clear:function(){yt(pe).forEach(te),me.forEach(te)},getBuffer:function(ce){return ce&&ce._buffer instanceof Pt?ce._buffer:null},restore:function(){yt(pe).forEach(function(ce){ce.buffer=Gt.createBuffer(),Gt.bindBuffer(ce.type,ce.buffer),Gt.bufferData(ce.type,ce.persistentData||ce.byteLength,ce.usage)})},_initBuffer:ee}}function f(Gt,Yt,ne,re){function Pt(ce){this.id=ge++,te[this.id]=this,this.buffer=ce,this.primType=4,this.type=this.vertCount=0}function Nt(ce,we,ue,he,be,Pe,De){var Ue;if(ce.buffer.bind(),we?((Ue=De)||kt(we)&&(!t(we)||kt(we.data))||(Ue=Yt.oes_element_index_uint?5125:5123),ne._initBuffer(ce.buffer,we,ue,Ue,3)):(Gt.bufferData(34963,Pe,ue),ce.buffer.dtype=Ue||5121,ce.buffer.usage=ue,ce.buffer.dimension=3,ce.buffer.byteLength=Pe),Ue=De,!De){switch(ce.buffer.dtype){case 5121:case 5120:Ue=5121;break;case 5123:case 5122:Ue=5123;break;case 5125:case 5124:Ue=5125}ce.buffer.dtype=Ue}ce.type=Ue,0>(we=be)&&(we=ce.buffer.byteLength,Ue===5123?we>>=1:Ue===5125&&(we>>=2)),ce.vertCount=we,we=he,0>he&&(we=4,(he=ce.buffer.dimension)===1&&(we=0),he===2&&(we=1),he===3&&(we=4)),ce.primType=we}function ee(ce){re.elementsCount--,delete te[ce.id],ce.buffer.destroy(),ce.buffer=null}var te={},ge=0,pe={uint8:5121,uint16:5123};Yt.oes_element_index_uint&&(pe.uint32=5125),Pt.prototype.bind=function(){this.buffer.bind()};var me=[];return{create:function(ce,we){function ue(Pe){if(Pe)if(typeof Pe=="number")he(Pe),be.primType=4,be.vertCount=0|Pe,be.type=5121;else{var De=null,Ue=35044,tr=-1,Ge=-1,Ze=0,We=0;Array.isArray(Pe)||kt(Pe)||t(Pe)?De=Pe:("data"in Pe&&(De=Pe.data),"usage"in Pe&&(Ue=xt[Pe.usage]),"primitive"in Pe&&(tr=Lt[Pe.primitive]),"count"in Pe&&(Ge=0|Pe.count),"type"in Pe&&(We=pe[Pe.type]),"length"in Pe?Ze=0|Pe.length:(Ze=Ge,We===5123||We===5122?Ze*=2:We!==5125&&We!==5124||(Ze*=4))),Nt(be,De,Ue,tr,Ge,Ze,We)}else he(),be.primType=4,be.vertCount=0,be.type=5121;return ue}var he=ne.create(null,34963,!0),be=new Pt(he._buffer);return re.elementsCount++,ue(ce),ue._reglType="elements",ue._elements=be,ue.subdata=function(Pe,De){return he.subdata(Pe,De),ue},ue.destroy=function(){ee(be)},ue},createStream:function(ce){var we=me.pop();return we||(we=new Pt(ne.create(null,34963,!0,!1)._buffer)),Nt(we,ce,35040,-1,-1,0,0),we},destroyStream:function(ce){me.push(ce)},getElements:function(ce){return typeof ce=="function"&&ce._elements instanceof Pt?ce._elements:null},clear:function(){yt(te).forEach(ee)}}}function d(Gt){for(var Yt=pt.allocType(5123,Gt.length),ne=0;ne<Gt.length;++ne)if(isNaN(Gt[ne]))Yt[ne]=65535;else if(Gt[ne]===1/0)Yt[ne]=31744;else if(Gt[ne]===-1/0)Yt[ne]=64512;else{Mt[0]=Gt[ne];var re=(Nt=_t[0])>>>31<<15,Pt=(Nt<<1>>>24)-127,Nt=Nt>>13&1023;Yt[ne]=-24>Pt?re:-14>Pt?re+(Nt+1024>>-14-Pt):15<Pt?re+31744:re+(Pt+15<<10)+Nt}return Yt}function w(Gt){return Array.isArray(Gt)||kt(Gt)}function v(Gt){return"[object "+Gt+"]"}function p(Gt){return Array.isArray(Gt)&&(Gt.length===0||typeof Gt[0]=="number")}function y(Gt){return!(!Array.isArray(Gt)||Gt.length===0||!w(Gt[0]))}function b(Gt){return Object.prototype.toString.call(Gt)}function x(Gt){if(!Gt)return!1;var Yt=b(Gt);return 0<=Wt.indexOf(Yt)||p(Gt)||y(Gt)||t(Gt)}function _(Gt,Yt){Gt.type===36193?(Gt.data=d(Yt),pt.freeType(Yt)):Gt.data=Yt}function g(Gt,Yt,ne,re,Pt,Nt){if(Gt=ae[Gt]!==void 0?ae[Gt]:ut[Gt]*Xt[Yt],Nt&&(Gt*=6),Pt){for(re=0;1<=ne;)re+=Gt*ne*ne,ne/=2;return re}return Gt*ne*re}function A(Gt,Yt,ne,re,Pt,Nt,ee){function te(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ge(He,wr){He.internalformat=wr.internalformat,He.format=wr.format,He.type=wr.type,He.compressed=wr.compressed,He.premultiplyAlpha=wr.premultiplyAlpha,He.flipY=wr.flipY,He.unpackAlignment=wr.unpackAlignment,He.colorSpace=wr.colorSpace,He.width=wr.width,He.height=wr.height,He.channels=wr.channels}function pe(He,wr){if(typeof wr=="object"&&wr){"premultiplyAlpha"in wr&&(He.premultiplyAlpha=wr.premultiplyAlpha),"flipY"in wr&&(He.flipY=wr.flipY),"alignment"in wr&&(He.unpackAlignment=wr.alignment),"colorSpace"in wr&&(He.colorSpace=Er[wr.colorSpace]),"type"in wr&&(He.type=_r[wr.type]);var Me=He.width,qe=He.height,Qe=He.channels,yr=!1;"shape"in wr?(Me=wr.shape[0],qe=wr.shape[1],wr.shape.length===3&&(Qe=wr.shape[2],yr=!0)):("radius"in wr&&(Me=qe=wr.radius),"width"in wr&&(Me=wr.width),"height"in wr&&(qe=wr.height),"channels"in wr&&(Qe=wr.channels,yr=!0)),He.width=0|Me,He.height=0|qe,He.channels=0|Qe,Me=!1,"format"in wr&&(Me=wr.format,qe=He.internalformat=Sr[Me],He.format=hr[qe],Me in _r&&!("type"in wr)&&(He.type=_r[Me]),Me in Xr&&(He.compressed=!0),Me=!0),!yr&&Me?He.channels=ut[He.format]:yr&&!Me&&He.channels!==Dt[He.format]&&(He.format=He.internalformat=Dt[He.channels])}}function me(He){Gt.pixelStorei(37440,He.flipY),Gt.pixelStorei(37441,He.premultiplyAlpha),Gt.pixelStorei(37443,He.colorSpace),Gt.pixelStorei(3317,He.unpackAlignment)}function ce(){te.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function we(He,wr){var Me=null;if(x(wr)?Me=wr:wr&&(pe(He,wr),"x"in wr&&(He.xOffset=0|wr.x),"y"in wr&&(He.yOffset=0|wr.y),x(wr.data)&&(Me=wr.data)),wr.copy){var qe=Pt.viewportWidth,Qe=Pt.viewportHeight;He.width=He.width||qe-He.xOffset,He.height=He.height||Qe-He.yOffset,He.needsCopy=!0}else if(Me){if(kt(Me))He.channels=He.channels||4,He.data=Me,"type"in wr||He.type!==5121||(He.type=0|Ot[Object.prototype.toString.call(Me)]);else if(p(Me)){switch(He.channels=He.channels||4,Qe=(qe=Me).length,He.type){case 5121:case 5123:case 5125:case 5126:(Qe=pt.allocType(He.type,Qe)).set(qe),He.data=Qe;break;case 36193:He.data=d(qe)}He.alignment=1,He.needsFree=!0}else if(t(Me)){qe=Me.data,Array.isArray(qe)||He.type!==5121||(He.type=0|Ot[Object.prototype.toString.call(qe)]),Qe=Me.shape;var yr,br,Ar,cr,Xe=Me.stride;Qe.length===3?(Ar=Qe[2],cr=Xe[2]):cr=Ar=1,yr=Qe[0],br=Qe[1],Qe=Xe[0],Xe=Xe[1],He.alignment=1,He.width=yr,He.height=br,He.channels=Ar,He.format=He.internalformat=Dt[Ar],He.needsFree=!0,yr=cr,Me=Me.offset,Ar=He.width,cr=He.height,br=He.channels;for(var Je=pt.allocType(He.type===36193?5126:He.type,Ar*cr*br),lr=0,ur=0;ur<cr;++ur)for(var Lr=0;Lr<Ar;++Lr)for(var Ir=0;Ir<br;++Ir)Je[lr++]=qe[Qe*Lr+Xe*ur+yr*Ir+Me];_(He,Je)}else if(b(Me)===Tt||b(Me)===bt||b(Me)===It)b(Me)===Tt||b(Me)===bt?He.element=Me:He.element=Me.canvas,He.width=He.element.width,He.height=He.element.height,He.channels=4;else if(b(Me)===zt)He.element=Me,He.width=Me.width,He.height=Me.height,He.channels=4;else if(b(Me)===Ft)He.element=Me,He.width=Me.naturalWidth,He.height=Me.naturalHeight,He.channels=4;else if(b(Me)===$t)He.element=Me,He.width=Me.videoWidth,He.height=Me.videoHeight,He.channels=4;else if(y(Me)){for(qe=He.width||Me[0].length,Qe=He.height||Me.length,Xe=He.channels,Xe=w(Me[0][0])?Xe||Me[0][0].length:Xe||1,yr=mt.shape(Me),Ar=1,cr=0;cr<yr.length;++cr)Ar*=yr[cr];Ar=pt.allocType(He.type===36193?5126:He.type,Ar),mt.flatten(Me,yr,"",Ar),_(He,Ar),He.alignment=1,He.width=qe,He.height=Qe,He.channels=Xe,He.format=He.internalformat=Dt[Xe],He.needsFree=!0}}else He.width=He.width||1,He.height=He.height||1,He.channels=He.channels||4}function ue(He,wr,Me,qe,Qe){var yr=He.element,br=He.data,Ar=He.internalformat,cr=He.format,Xe=He.type,Je=He.width,lr=He.height;me(He),yr?Gt.texSubImage2D(wr,Qe,Me,qe,cr,Xe,yr):He.compressed?Gt.compressedTexSubImage2D(wr,Qe,Me,qe,Ar,Je,lr,br):He.needsCopy?(re(),Gt.copyTexSubImage2D(wr,Qe,Me,qe,He.xOffset,He.yOffset,Je,lr)):Gt.texSubImage2D(wr,Qe,Me,qe,Je,lr,cr,Xe,br)}function he(){return gr.pop()||new ce}function be(He){He.needsFree&&pt.freeType(He.data),ce.call(He),gr.push(He)}function Pe(){te.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function De(He,wr,Me){var qe=He.images[0]=he();He.mipmask=1,qe.width=He.width=wr,qe.height=He.height=Me,qe.channels=He.channels=4}function Ue(He,wr){var Me=null;if(x(wr))ge(Me=He.images[0]=he(),He),we(Me,wr),He.mipmask=1;else if(pe(He,wr),Array.isArray(wr.mipmap))for(var qe=wr.mipmap,Qe=0;Qe<qe.length;++Qe)ge(Me=He.images[Qe]=he(),He),Me.width>>=Qe,Me.height>>=Qe,we(Me,qe[Qe]),He.mipmask|=1<<Qe;else ge(Me=He.images[0]=he(),He),we(Me,wr),He.mipmask=1;ge(He,He.images[0])}function tr(He,wr){for(var Me=He.images,qe=0;qe<Me.length&&Me[qe];++qe){var Qe=Me[qe],yr=wr,br=qe,Ar=Qe.element,cr=Qe.data,Xe=Qe.internalformat,Je=Qe.format,lr=Qe.type,ur=Qe.width,Lr=Qe.height;me(Qe),Ar?Gt.texImage2D(yr,br,Je,Je,lr,Ar):Qe.compressed?Gt.compressedTexImage2D(yr,br,Xe,ur,Lr,0,cr):Qe.needsCopy?(re(),Gt.copyTexImage2D(yr,br,Je,Qe.xOffset,Qe.yOffset,ur,Lr,0)):Gt.texImage2D(yr,br,Je,ur,Lr,0,Je,lr,cr||null)}}function Ge(){var He=Mr.pop()||new Pe;te.call(He);for(var wr=He.mipmask=0;16>wr;++wr)He.images[wr]=null;return He}function Ze(He){for(var wr=He.images,Me=0;Me<wr.length;++Me)wr[Me]&&be(wr[Me]),wr[Me]=null;Mr.push(He)}function We(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function pr(He,wr){"min"in wr&&(He.minFilter=Cr[wr.min],0<=St.indexOf(He.minFilter)&&!("faces"in wr)&&(He.genMipmaps=!0)),"mag"in wr&&(He.magFilter=mr[wr.mag]);var Me=He.wrapS,qe=He.wrapT;if("wrap"in wr){var Qe=wr.wrap;typeof Qe=="string"?Me=qe=fr[Qe]:Array.isArray(Qe)&&(Me=fr[Qe[0]],qe=fr[Qe[1]])}else"wrapS"in wr&&(Me=fr[wr.wrapS]),"wrapT"in wr&&(qe=fr[wr.wrapT]);if(He.wrapS=Me,He.wrapT=qe,"anisotropic"in wr&&(He.anisotropic=wr.anisotropic),"mipmap"in wr){switch(Me=!1,typeof wr.mipmap){case"string":He.mipmapHint=ar[wr.mipmap],Me=He.genMipmaps=!0;break;case"boolean":Me=He.genMipmaps=wr.mipmap;break;case"object":He.genMipmaps=!1,Me=!0}!Me||"min"in wr||(He.minFilter=9984)}}function xr(He,wr){Gt.texParameteri(wr,10241,He.minFilter),Gt.texParameteri(wr,10240,He.magFilter),Gt.texParameteri(wr,10242,He.wrapS),Gt.texParameteri(wr,10243,He.wrapT),Yt.ext_texture_filter_anisotropic&&Gt.texParameteri(wr,34046,He.anisotropic),He.genMipmaps&&(Gt.hint(33170,He.mipmapHint),Gt.generateMipmap(wr))}function sr(He){te.call(this),this.mipmask=0,this.internalformat=6408,this.id=Hr++,this.refCount=1,this.target=He,this.texture=Gt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new We,ee.profile&&(this.stats={size:0})}function $e(He){Gt.activeTexture(33984),Gt.bindTexture(He.target,He.texture)}function ir(){var He=Qr[0];He?Gt.bindTexture(He.target,He.texture):Gt.bindTexture(3553,null)}function Ke(He){var wr=He.texture,Me=He.unit,qe=He.target;0<=Me&&(Gt.activeTexture(33984+Me),Gt.bindTexture(qe,null),Qr[Me]=null),Gt.deleteTexture(wr),He.texture=null,He.params=null,He.pixels=null,He.refCount=0,delete Pr[He.id],Nt.textureCount--}var ar={"don't care":4352,"dont care":4352,nice:4354,fast:4353},fr={repeat:10497,clamp:33071,mirror:33648},mr={nearest:9728,linear:9729},Cr=tt({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},mr),Er={none:0,browser:37444},_r={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Sr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Xr={};Yt.ext_srgb&&(Sr.srgb=35904,Sr.srgba=35906),Yt.oes_texture_float&&(_r.float32=_r.float=5126),Yt.oes_texture_half_float&&(_r.float16=_r["half float"]=36193),Yt.webgl_depth_texture&&(tt(Sr,{depth:6402,"depth stencil":34041}),tt(_r,{uint16:5123,uint32:5125,"depth stencil":34042})),Yt.webgl_compressed_texture_s3tc&&tt(Xr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Yt.webgl_compressed_texture_atc&&tt(Xr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Yt.webgl_compressed_texture_pvrtc&&tt(Xr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Yt.webgl_compressed_texture_etc1&&(Xr["rgb etc1"]=36196);var en=Array.prototype.slice.call(Gt.getParameter(34467));Object.keys(Xr).forEach(function(He){var wr=Xr[He];0<=en.indexOf(wr)&&(Sr[He]=wr)});var sn=Object.keys(Sr);ne.textureFormats=sn;var tn=[];Object.keys(Sr).forEach(function(He){tn[Sr[He]]=He});var qr=[];Object.keys(_r).forEach(function(He){qr[_r[He]]=He});var vn=[];Object.keys(mr).forEach(function(He){vn[mr[He]]=He});var je=[];Object.keys(Cr).forEach(function(He){je[Cr[He]]=He});var nr=[];Object.keys(fr).forEach(function(He){nr[fr[He]]=He});var hr=sn.reduce(function(He,wr){var Me=Sr[wr];return Me===6409||Me===6406||Me===6409||Me===6410||Me===6402||Me===34041||Yt.ext_srgb&&(Me===35904||Me===35906)?He[Me]=Me:Me===32855||0<=wr.indexOf("rgba")?He[Me]=6408:He[Me]=6407,He},{}),gr=[],Mr=[],Hr=0,Pr={},Dr=ne.maxTextureUnits,Qr=Array(Dr).map(function(){return null});return tt(sr.prototype,{bind:function(){this.bindCount+=1;var He=this.unit;if(0>He){for(var wr=0;wr<Dr;++wr){var Me=Qr[wr];if(Me){if(0<Me.bindCount)continue;Me.unit=-1}Qr[wr]=this,He=wr;break}ee.profile&&Nt.maxTextureUnits<He+1&&(Nt.maxTextureUnits=He+1),this.unit=He,Gt.activeTexture(33984+He),Gt.bindTexture(this.target,this.texture)}return He},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Ke(this)}}),ee.profile&&(Nt.getTotalTextureSize=function(){var He=0;return Object.keys(Pr).forEach(function(wr){He+=Pr[wr].stats.size}),He}),{create2D:function(He,wr){function Me(Qe,yr){var br=qe.texInfo;We.call(br);var Ar=Ge();return typeof Qe=="number"?De(Ar,0|Qe,typeof yr=="number"?0|yr:0|Qe):Qe?(pr(br,Qe),Ue(Ar,Qe)):De(Ar,1,1),br.genMipmaps&&(Ar.mipmask=(Ar.width<<1)-1),qe.mipmask=Ar.mipmask,ge(qe,Ar),qe.internalformat=Ar.internalformat,Me.width=Ar.width,Me.height=Ar.height,$e(qe),tr(Ar,3553),xr(br,3553),ir(),Ze(Ar),ee.profile&&(qe.stats.size=g(qe.internalformat,qe.type,Ar.width,Ar.height,br.genMipmaps,!1)),Me.format=tn[qe.internalformat],Me.type=qr[qe.type],Me.mag=vn[br.magFilter],Me.min=je[br.minFilter],Me.wrapS=nr[br.wrapS],Me.wrapT=nr[br.wrapT],Me}var qe=new sr(3553);return Pr[qe.id]=qe,Nt.textureCount++,Me(He,wr),Me.subimage=function(Qe,yr,br,Ar){yr|=0,br|=0,Ar|=0;var cr=he();return ge(cr,qe),cr.width=0,cr.height=0,we(cr,Qe),cr.width=cr.width||(qe.width>>Ar)-yr,cr.height=cr.height||(qe.height>>Ar)-br,$e(qe),ue(cr,3553,yr,br,Ar),ir(),be(cr),Me},Me.resize=function(Qe,yr){var br=0|Qe,Ar=0|yr||br;if(br===qe.width&&Ar===qe.height)return Me;Me.width=qe.width=br,Me.height=qe.height=Ar,$e(qe);for(var cr=0;qe.mipmask>>cr;++cr){var Xe=br>>cr,Je=Ar>>cr;if(!Xe||!Je)break;Gt.texImage2D(3553,cr,qe.format,Xe,Je,0,qe.format,qe.type,null)}return ir(),ee.profile&&(qe.stats.size=g(qe.internalformat,qe.type,br,Ar,!1,!1)),Me},Me._reglType="texture2d",Me._texture=qe,ee.profile&&(Me.stats=qe.stats),Me.destroy=function(){qe.decRef()},Me},createCube:function(He,wr,Me,qe,Qe,yr){function br(Xe,Je,lr,ur,Lr,Ir){var Gr,Nr=Ar.texInfo;for(We.call(Nr),Gr=0;6>Gr;++Gr)cr[Gr]=Ge();if(typeof Xe!="number"&&Xe){if(typeof Xe=="object")if(Je)Ue(cr[0],Xe),Ue(cr[1],Je),Ue(cr[2],lr),Ue(cr[3],ur),Ue(cr[4],Lr),Ue(cr[5],Ir);else if(pr(Nr,Xe),pe(Ar,Xe),"faces"in Xe)for(Xe=Xe.faces,Gr=0;6>Gr;++Gr)ge(cr[Gr],Ar),Ue(cr[Gr],Xe[Gr]);else for(Gr=0;6>Gr;++Gr)Ue(cr[Gr],Xe)}else for(Xe=0|Xe||1,Gr=0;6>Gr;++Gr)De(cr[Gr],Xe,Xe);for(ge(Ar,cr[0]),Ar.mipmask=Nr.genMipmaps?(cr[0].width<<1)-1:cr[0].mipmask,Ar.internalformat=cr[0].internalformat,br.width=cr[0].width,br.height=cr[0].height,$e(Ar),Gr=0;6>Gr;++Gr)tr(cr[Gr],34069+Gr);for(xr(Nr,34067),ir(),ee.profile&&(Ar.stats.size=g(Ar.internalformat,Ar.type,br.width,br.height,Nr.genMipmaps,!0)),br.format=tn[Ar.internalformat],br.type=qr[Ar.type],br.mag=vn[Nr.magFilter],br.min=je[Nr.minFilter],br.wrapS=nr[Nr.wrapS],br.wrapT=nr[Nr.wrapT],Gr=0;6>Gr;++Gr)Ze(cr[Gr]);return br}var Ar=new sr(34067);Pr[Ar.id]=Ar,Nt.cubeCount++;var cr=Array(6);return br(He,wr,Me,qe,Qe,yr),br.subimage=function(Xe,Je,lr,ur,Lr){lr|=0,ur|=0,Lr|=0;var Ir=he();return ge(Ir,Ar),Ir.width=0,Ir.height=0,we(Ir,Je),Ir.width=Ir.width||(Ar.width>>Lr)-lr,Ir.height=Ir.height||(Ar.height>>Lr)-ur,$e(Ar),ue(Ir,34069+Xe,lr,ur,Lr),ir(),be(Ir),br},br.resize=function(Xe){if((Xe|=0)!==Ar.width){br.width=Ar.width=Xe,br.height=Ar.height=Xe,$e(Ar);for(var Je=0;6>Je;++Je)for(var lr=0;Ar.mipmask>>lr;++lr)Gt.texImage2D(34069+Je,lr,Ar.format,Xe>>lr,Xe>>lr,0,Ar.format,Ar.type,null);return ir(),ee.profile&&(Ar.stats.size=g(Ar.internalformat,Ar.type,br.width,br.height,!1,!0)),br}},br._reglType="textureCube",br._texture=Ar,ee.profile&&(br.stats=Ar.stats),br.destroy=function(){Ar.decRef()},br},clear:function(){for(var He=0;He<Dr;++He)Gt.activeTexture(33984+He),Gt.bindTexture(3553,null),Qr[He]=null;yt(Pr).forEach(Ke),Nt.cubeCount=0,Nt.textureCount=0},getTexture:function(He){return null},restore:function(){for(var He=0;He<Dr;++He){var wr=Qr[He];wr&&(wr.bindCount=0,wr.unit=-1,Qr[He]=null)}yt(Pr).forEach(function(Me){Me.texture=Gt.createTexture(),Gt.bindTexture(Me.target,Me.texture);for(var qe=0;32>qe;++qe)if(Me.mipmask&1<<qe)if(Me.target===3553)Gt.texImage2D(3553,qe,Me.internalformat,Me.width>>qe,Me.height>>qe,0,Me.internalformat,Me.type,null);else for(var Qe=0;6>Qe;++Qe)Gt.texImage2D(34069+Qe,qe,Me.internalformat,Me.width>>qe,Me.height>>qe,0,Me.internalformat,Me.type,null);xr(Me.texInfo,Me.target)})},refresh:function(){for(var He=0;He<Dr;++He){var wr=Qr[He];wr&&(wr.bindCount=0,wr.unit=-1,Qr[He]=null),Gt.activeTexture(33984+He),Gt.bindTexture(3553,null),Gt.bindTexture(34067,null)}}}}function M(Gt,Yt,ne,re,Pt,Nt){function ee(sr,$e,ir){this.target=sr,this.texture=$e,this.renderbuffer=ir;var Ke=sr=0;$e?(sr=$e.width,Ke=$e.height):ir&&(sr=ir.width,Ke=ir.height),this.width=sr,this.height=Ke}function te(sr){sr&&(sr.texture&&sr.texture._texture.decRef(),sr.renderbuffer&&sr.renderbuffer._renderbuffer.decRef())}function ge(sr,$e,ir){sr&&(sr.texture?sr.texture._texture.refCount+=1:sr.renderbuffer._renderbuffer.refCount+=1)}function pe(sr,$e){$e&&($e.texture?Gt.framebufferTexture2D(36160,sr,$e.target,$e.texture._texture.texture,0):Gt.framebufferRenderbuffer(36160,sr,36161,$e.renderbuffer._renderbuffer.renderbuffer))}function me(sr){var $e=3553,ir=null,Ke=null,ar=sr;return typeof sr=="object"&&(ar=sr.data,"target"in sr&&($e=0|sr.target)),(sr=ar._reglType)==="texture2d"||sr==="textureCube"?ir=ar:sr==="renderbuffer"&&(Ke=ar,$e=36161),new ee($e,ir,Ke)}function ce(sr,$e,ir,Ke,ar){return ir?((sr=re.create2D({width:sr,height:$e,format:Ke,type:ar}))._texture.refCount=0,new ee(3553,sr,null)):((sr=Pt.create({width:sr,height:$e,format:Ke}))._renderbuffer.refCount=0,new ee(36161,null,sr))}function we(sr){return sr&&(sr.texture||sr.renderbuffer)}function ue(sr,$e,ir){sr&&(sr.texture?sr.texture.resize($e,ir):sr.renderbuffer&&sr.renderbuffer.resize($e,ir),sr.width=$e,sr.height=ir)}function he(){this.id=pr++,xr[this.id]=this,this.framebuffer=Gt.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function be(sr){sr.colorAttachments.forEach(te),te(sr.depthAttachment),te(sr.stencilAttachment),te(sr.depthStencilAttachment)}function Pe(sr){Gt.deleteFramebuffer(sr.framebuffer),sr.framebuffer=null,Nt.framebufferCount--,delete xr[sr.id]}function De(sr){var $e;Gt.bindFramebuffer(36160,sr.framebuffer);var ir=sr.colorAttachments;for($e=0;$e<ir.length;++$e)pe(36064+$e,ir[$e]);for($e=ir.length;$e<ne.maxColorAttachments;++$e)Gt.framebufferTexture2D(36160,36064+$e,3553,null,0);Gt.framebufferTexture2D(36160,33306,3553,null,0),Gt.framebufferTexture2D(36160,36096,3553,null,0),Gt.framebufferTexture2D(36160,36128,3553,null,0),pe(36096,sr.depthAttachment),pe(36128,sr.stencilAttachment),pe(33306,sr.depthStencilAttachment),Gt.checkFramebufferStatus(36160),Gt.isContextLost(),Gt.bindFramebuffer(36160,tr.next?tr.next.framebuffer:null),tr.cur=tr.next,Gt.getError()}function Ue(sr,$e){function ir(ar,fr){var mr,Cr=0,Er=0,_r=!0,Sr=!0;mr=null;var Xr=!0,en="rgba",sn="uint8",tn=1,qr=null,vn=null,je=null,nr=!1;typeof ar=="number"?(Cr=0|ar,Er=0|fr||Cr):ar?("shape"in ar?(Cr=(Er=ar.shape)[0],Er=Er[1]):("radius"in ar&&(Cr=Er=ar.radius),"width"in ar&&(Cr=ar.width),"height"in ar&&(Er=ar.height)),("color"in ar||"colors"in ar)&&(mr=ar.color||ar.colors,Array.isArray(mr)),mr||("colorCount"in ar&&(tn=0|ar.colorCount),"colorTexture"in ar&&(Xr=!!ar.colorTexture,en="rgba4"),"colorType"in ar&&(sn=ar.colorType,!Xr)&&(sn==="half float"||sn==="float16"?en="rgba16f":sn!=="float"&&sn!=="float32"||(en="rgba32f")),"colorFormat"in ar&&(en=ar.colorFormat,0<=Ge.indexOf(en)?Xr=!0:0<=Ze.indexOf(en)&&(Xr=!1))),("depthTexture"in ar||"depthStencilTexture"in ar)&&(nr=!(!ar.depthTexture&&!ar.depthStencilTexture)),"depth"in ar&&(typeof ar.depth=="boolean"?_r=ar.depth:(qr=ar.depth,Sr=!1)),"stencil"in ar&&(typeof ar.stencil=="boolean"?Sr=ar.stencil:(vn=ar.stencil,_r=!1)),"depthStencil"in ar&&(typeof ar.depthStencil=="boolean"?_r=Sr=ar.depthStencil:(je=ar.depthStencil,Sr=_r=!1))):Cr=Er=1;var hr=null,gr=null,Mr=null,Hr=null;if(Array.isArray(mr))hr=mr.map(me);else if(mr)hr=[me(mr)];else for(hr=Array(tn),mr=0;mr<tn;++mr)hr[mr]=ce(Cr,Er,Xr,en,sn);for(Cr=Cr||hr[0].width,Er=Er||hr[0].height,qr?gr=me(qr):_r&&!Sr&&(gr=ce(Cr,Er,nr,"depth","uint32")),vn?Mr=me(vn):Sr&&!_r&&(Mr=ce(Cr,Er,!1,"stencil","uint8")),je?Hr=me(je):!qr&&!vn&&Sr&&_r&&(Hr=ce(Cr,Er,nr,"depth stencil","depth stencil")),_r=null,mr=0;mr<hr.length;++mr)ge(hr[mr]),hr[mr]&&hr[mr].texture&&(Sr=ye[hr[mr].texture._texture.format]*ve[hr[mr].texture._texture.type],_r===null&&(_r=Sr));return ge(gr),ge(Mr),ge(Hr),be(Ke),Ke.width=Cr,Ke.height=Er,Ke.colorAttachments=hr,Ke.depthAttachment=gr,Ke.stencilAttachment=Mr,Ke.depthStencilAttachment=Hr,ir.color=hr.map(we),ir.depth=we(gr),ir.stencil=we(Mr),ir.depthStencil=we(Hr),ir.width=Ke.width,ir.height=Ke.height,De(Ke),ir}var Ke=new he;return Nt.framebufferCount++,ir(sr,$e),tt(ir,{resize:function(ar,fr){var mr=Math.max(0|ar,1),Cr=Math.max(0|fr||mr,1);if(mr===Ke.width&&Cr===Ke.height)return ir;for(var Er=Ke.colorAttachments,_r=0;_r<Er.length;++_r)ue(Er[_r],mr,Cr);return ue(Ke.depthAttachment,mr,Cr),ue(Ke.stencilAttachment,mr,Cr),ue(Ke.depthStencilAttachment,mr,Cr),Ke.width=ir.width=mr,Ke.height=ir.height=Cr,De(Ke),ir},_reglType:"framebuffer",_framebuffer:Ke,destroy:function(){Pe(Ke),be(Ke)},use:function(ar){tr.setFBO({framebuffer:ir},ar)}})}var tr={cur:null,next:null,dirty:!1,setFBO:null},Ge=["rgba"],Ze=["rgba4","rgb565","rgb5 a1"];Yt.ext_srgb&&Ze.push("srgba"),Yt.ext_color_buffer_half_float&&Ze.push("rgba16f","rgb16f"),Yt.webgl_color_buffer_float&&Ze.push("rgba32f");var We=["uint8"];Yt.oes_texture_half_float&&We.push("half float","float16"),Yt.oes_texture_float&&We.push("float","float32");var pr=0,xr={};return tt(tr,{getFramebuffer:function(sr){return typeof sr=="function"&&sr._reglType==="framebuffer"&&(sr=sr._framebuffer)instanceof he?sr:null},create:Ue,createCube:function(sr){function $e(Ke){var ar,fr={color:null},mr=0,Cr=null;ar="rgba";var Er="uint8",_r=1;if(typeof Ke=="number"?mr=0|Ke:Ke?("shape"in Ke?mr=Ke.shape[0]:("radius"in Ke&&(mr=0|Ke.radius),"width"in Ke?mr=0|Ke.width:"height"in Ke&&(mr=0|Ke.height)),("color"in Ke||"colors"in Ke)&&(Cr=Ke.color||Ke.colors,Array.isArray(Cr)),Cr||("colorCount"in Ke&&(_r=0|Ke.colorCount),"colorType"in Ke&&(Er=Ke.colorType),"colorFormat"in Ke&&(ar=Ke.colorFormat)),"depth"in Ke&&(fr.depth=Ke.depth),"stencil"in Ke&&(fr.stencil=Ke.stencil),"depthStencil"in Ke&&(fr.depthStencil=Ke.depthStencil)):mr=1,Cr)if(Array.isArray(Cr))for(Ke=[],ar=0;ar<Cr.length;++ar)Ke[ar]=Cr[ar];else Ke=[Cr];else for(Ke=Array(_r),Cr={radius:mr,format:ar,type:Er},ar=0;ar<_r;++ar)Ke[ar]=re.createCube(Cr);for(fr.color=Array(Ke.length),ar=0;ar<Ke.length;++ar)_r=Ke[ar],mr=mr||_r.width,fr.color[ar]={target:34069,data:Ke[ar]};for(ar=0;6>ar;++ar){for(_r=0;_r<Ke.length;++_r)fr.color[_r].target=34069+ar;0<ar&&(fr.depth=ir[0].depth,fr.stencil=ir[0].stencil,fr.depthStencil=ir[0].depthStencil),ir[ar]?ir[ar](fr):ir[ar]=Ue(fr)}return tt($e,{width:mr,height:mr,color:Ke})}var ir=Array(6);return $e(sr),tt($e,{faces:ir,resize:function(Ke){var ar=0|Ke;if(ar===$e.width)return $e;var fr=$e.color;for(Ke=0;Ke<fr.length;++Ke)fr[Ke].resize(ar);for(Ke=0;6>Ke;++Ke)ir[Ke].resize(ar);return $e.width=$e.height=ar,$e},_reglType:"framebufferCube",destroy:function(){ir.forEach(function(Ke){Ke.destroy()})}})},clear:function(){yt(xr).forEach(Pe)},restore:function(){tr.cur=null,tr.next=null,tr.dirty=!0,yt(xr).forEach(function(sr){sr.framebuffer=Gt.createFramebuffer(),De(sr)})}})}function L(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function E(Gt,Yt,ne,re,Pt,Nt,ee){function te(){this.id=++me,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var ue=Yt.oes_vertex_array_object;this.vao=ue?ue.createVertexArrayOES():null,ce[this.id]=this,this.buffers=[]}var ge=ne.maxAttributes,pe=Array(ge);for(ne=0;ne<ge;++ne)pe[ne]=new L;var me=0,ce={},we={Record:L,scope:{},state:pe,currentVAO:null,targetVAO:null,restore:Yt.oes_vertex_array_object?function(){Yt.oes_vertex_array_object&&yt(ce).forEach(function(ue){ue.refresh()})}:function(){},createVAO:function(ue){function he(Pe){var De;Array.isArray(Pe)?(De=Pe,be.elements&&be.ownsElements&&be.elements.destroy(),be.elements=null,be.ownsElements=!1,be.offset=0,be.count=0,be.instances=-1,be.primitive=4):(Pe.elements?(De=Pe.elements,be.ownsElements?(typeof De=="function"&&De._reglType==="elements"?be.elements.destroy():be.elements(De),be.ownsElements=!1):Nt.getElements(Pe.elements)?(be.elements=Pe.elements,be.ownsElements=!1):(be.elements=Nt.create(Pe.elements),be.ownsElements=!0)):(be.elements=null,be.ownsElements=!1),De=Pe.attributes,be.offset=0,be.count=-1,be.instances=-1,be.primitive=4,be.elements&&(be.count=be.elements._elements.vertCount,be.primitive=be.elements._elements.primType),"offset"in Pe&&(be.offset=0|Pe.offset),"count"in Pe&&(be.count=0|Pe.count),"instances"in Pe&&(be.instances=0|Pe.instances),"primitive"in Pe&&(be.primitive=Lt[Pe.primitive])),Pe={};var Ue=be.attributes;Ue.length=De.length;for(var tr=0;tr<De.length;++tr){var Ge,Ze=De[tr],We=Ue[tr]=new L,pr=Ze.data||Ze;Array.isArray(pr)||kt(pr)||t(pr)?(be.buffers[tr]&&(Ge=be.buffers[tr],kt(pr)&&Ge._buffer.byteLength>=pr.byteLength?Ge.subdata(pr):(Ge.destroy(),be.buffers[tr]=null)),be.buffers[tr]||(Ge=be.buffers[tr]=Pt.create(Ze,34962,!1,!0)),We.buffer=Pt.getBuffer(Ge),We.size=0|We.buffer.dimension,We.normalized=!1,We.type=We.buffer.dtype,We.offset=0,We.stride=0,We.divisor=0,We.state=1,Pe[tr]=1):Pt.getBuffer(Ze)?(We.buffer=Pt.getBuffer(Ze),We.size=0|We.buffer.dimension,We.normalized=!1,We.type=We.buffer.dtype,We.offset=0,We.stride=0,We.divisor=0,We.state=1):Pt.getBuffer(Ze.buffer)?(We.buffer=Pt.getBuffer(Ze.buffer),We.size=0|(+Ze.size||We.buffer.dimension),We.normalized=!!Ze.normalized||!1,We.type="type"in Ze?vt[Ze.type]:We.buffer.dtype,We.offset=0|(Ze.offset||0),We.stride=0|(Ze.stride||0),We.divisor=0|(Ze.divisor||0),We.state=1):"x"in Ze&&(We.x=+Ze.x||0,We.y=+Ze.y||0,We.z=+Ze.z||0,We.w=+Ze.w||0,We.state=2)}for(Ge=0;Ge<be.buffers.length;++Ge)!Pe[Ge]&&be.buffers[Ge]&&(be.buffers[Ge].destroy(),be.buffers[Ge]=null);return be.refresh(),he}var be=new te;return re.vaoCount+=1,he.destroy=function(){for(var Pe=0;Pe<be.buffers.length;++Pe)be.buffers[Pe]&&be.buffers[Pe].destroy();be.buffers.length=0,be.ownsElements&&(be.elements.destroy(),be.elements=null,be.ownsElements=!1),be.destroy()},he._vao=be,he._reglType="vao",he(ue)},getVAO:function(ue){return typeof ue=="function"&&ue._vao?ue._vao:null},destroyBuffer:function(ue){for(var he=0;he<pe.length;++he){var be=pe[he];be.buffer===ue&&(Gt.disableVertexAttribArray(he),be.buffer=null)}},setVAO:Yt.oes_vertex_array_object?function(ue){if(ue!==we.currentVAO){var he=Yt.oes_vertex_array_object;ue?he.bindVertexArrayOES(ue.vao):he.bindVertexArrayOES(null),we.currentVAO=ue}}:function(ue){if(ue!==we.currentVAO){if(ue)ue.bindAttrs();else{for(var he=Yt.angle_instanced_arrays,be=0;be<pe.length;++be){var Pe=pe[be];Pe.buffer?(Gt.enableVertexAttribArray(be),Pe.buffer.bind(),Gt.vertexAttribPointer(be,Pe.size,Pe.type,Pe.normalized,Pe.stride,Pe.offfset),he&&Pe.divisor&&he.vertexAttribDivisorANGLE(be,Pe.divisor)):(Gt.disableVertexAttribArray(be),Gt.vertexAttrib4f(be,Pe.x,Pe.y,Pe.z,Pe.w))}ee.elements?Gt.bindBuffer(34963,ee.elements.buffer.buffer):Gt.bindBuffer(34963,null)}we.currentVAO=ue}},clear:Yt.oes_vertex_array_object?function(){yt(ce).forEach(function(ue){ue.destroy()})}:function(){}};return te.prototype.bindAttrs=function(){for(var ue=Yt.angle_instanced_arrays,he=this.attributes,be=0;be<he.length;++be){var Pe=he[be];Pe.buffer?(Gt.enableVertexAttribArray(be),Gt.bindBuffer(34962,Pe.buffer.buffer),Gt.vertexAttribPointer(be,Pe.size,Pe.type,Pe.normalized,Pe.stride,Pe.offset),ue&&Pe.divisor&&ue.vertexAttribDivisorANGLE(be,Pe.divisor)):(Gt.disableVertexAttribArray(be),Gt.vertexAttrib4f(be,Pe.x,Pe.y,Pe.z,Pe.w))}for(ue=he.length;ue<ge;++ue)Gt.disableVertexAttribArray(ue);(ue=Nt.getElements(this.elements))?Gt.bindBuffer(34963,ue.buffer.buffer):Gt.bindBuffer(34963,null)},te.prototype.refresh=function(){var ue=Yt.oes_vertex_array_object;ue&&(ue.bindVertexArrayOES(this.vao),this.bindAttrs(),we.currentVAO=null,ue.bindVertexArrayOES(null))},te.prototype.destroy=function(){if(this.vao){var ue=Yt.oes_vertex_array_object;this===we.currentVAO&&(we.currentVAO=null,ue.bindVertexArrayOES(null)),ue.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ce[this.id]&&(delete ce[this.id],--re.vaoCount)},we}function S(Gt,Yt,ne,re){function Pt(he,be,Pe,De){this.name=he,this.id=be,this.location=Pe,this.info=De}function Nt(he,be){for(var Pe=0;Pe<he.length;++Pe)if(he[Pe].id===be.id)return void(he[Pe].location=be.location);he.push(be)}function ee(he,be,Pe){if(!(Ue=(Pe=he===35632?pe:me)[be])){var De=Yt.str(be),Ue=Gt.createShader(he);Gt.shaderSource(Ue,De),Gt.compileShader(Ue),Pe[be]=Ue}return Ue}function te(he,be){this.id=ue++,this.fragId=he,this.vertId=be,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,re.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ge(he,be,Pe){var De;De=ee(35632,he.fragId);var Ue=ee(35633,he.vertId);if(be=he.program=Gt.createProgram(),Gt.attachShader(be,De),Gt.attachShader(be,Ue),Pe)for(De=0;De<Pe.length;++De)Ue=Pe[De],Gt.bindAttribLocation(be,Ue[0],Ue[1]);Gt.linkProgram(be),Ue=Gt.getProgramParameter(be,35718),re.profile&&(he.stats.uniformsCount=Ue);var tr=he.uniforms;for(De=0;De<Ue;++De)if(Pe=Gt.getActiveUniform(be,De))if(1<Pe.size)for(var Ge=0;Ge<Pe.size;++Ge){var Ze=Pe.name.replace("[0]","["+Ge+"]");Nt(tr,new Pt(Ze,Yt.id(Ze),Gt.getUniformLocation(be,Ze),Pe))}else Nt(tr,new Pt(Pe.name,Yt.id(Pe.name),Gt.getUniformLocation(be,Pe.name),Pe));for(Ue=Gt.getProgramParameter(be,35721),re.profile&&(he.stats.attributesCount=Ue),he=he.attributes,De=0;De<Ue;++De)(Pe=Gt.getActiveAttrib(be,De))&&Nt(he,new Pt(Pe.name,Yt.id(Pe.name),Gt.getAttribLocation(be,Pe.name),Pe))}var pe={},me={},ce={},we=[],ue=0;return re.profile&&(ne.getMaxUniformsCount=function(){var he=0;return we.forEach(function(be){be.stats.uniformsCount>he&&(he=be.stats.uniformsCount)}),he},ne.getMaxAttributesCount=function(){var he=0;return we.forEach(function(be){be.stats.attributesCount>he&&(he=be.stats.attributesCount)}),he}),{clear:function(){var he=Gt.deleteShader.bind(Gt);yt(pe).forEach(he),pe={},yt(me).forEach(he),me={},we.forEach(function(be){Gt.deleteProgram(be.program)}),we.length=0,ce={},ne.shaderCount=0},program:function(he,be,Pe,De){var Ue=ce[be];Ue||(Ue=ce[be]={});var tr=Ue[he];if(tr&&(tr.refCount++,!De))return tr;var Ge=new te(be,he);return ne.shaderCount++,ge(Ge,Pe,De),tr||(Ue[he]=Ge),we.push(Ge),tt(Ge,{destroy:function(){if(Ge.refCount--,0>=Ge.refCount){Gt.deleteProgram(Ge.program);var Ze=we.indexOf(Ge);we.splice(Ze,1),ne.shaderCount--}0>=Ue[Ge.vertId].refCount&&(Gt.deleteShader(me[Ge.vertId]),delete me[Ge.vertId],delete ce[Ge.fragId][Ge.vertId]),Object.keys(ce[Ge.fragId]).length||(Gt.deleteShader(pe[Ge.fragId]),delete pe[Ge.fragId],delete ce[Ge.fragId])}})},restore:function(){pe={},me={};for(var he=0;he<we.length;++he)ge(we[he],null,we[he].attributes.map(function(be){return[be.location,be.name]}))},shader:ee,frag:-1,vert:-1}}function O(Gt,Yt,ne,re,Pt,Nt,ee){function te(ge){var pe;pe=Yt.next===null?5121:Yt.next.colorAttachments[0].texture._texture.type;var me=0,ce=0,we=re.framebufferWidth,ue=re.framebufferHeight,he=null;return kt(ge)?he=ge:ge&&(me=0|ge.x,ce=0|ge.y,we=0|(ge.width||re.framebufferWidth-me),ue=0|(ge.height||re.framebufferHeight-ce),he=ge.data||null),ne(),ge=we*ue*4,he||(pe===5121?he=new Uint8Array(ge):pe===5126&&(he=he||new Float32Array(ge))),Gt.pixelStorei(3333,4),Gt.readPixels(me,ce,we,ue,6408,pe,he),he}return function(ge){return ge&&"framebuffer"in ge?function(pe){var me;return Yt.setFBO({framebuffer:pe.framebuffer},function(){me=te(pe)}),me}(ge):te(ge)}}function P(Gt,Yt){return Gt>>>Yt|Gt<<32-Yt}function U(Gt,Yt){var ne=(65535&Gt)+(65535&Yt);return(Gt>>16)+(Yt>>16)+(ne>>16)<<16|65535&ne}function R(Gt){return Array.prototype.slice.call(Gt)}function j(Gt){return R(Gt).join("")}function B(Gt){function Yt(){var me=[],ce=[];return tt(function(){me.push.apply(me,R(arguments))},{def:function(){var we="v"+Pt++;return ce.push(we),0<arguments.length&&(me.push(we,"="),me.push.apply(me,R(arguments)),me.push(";")),we},toString:function(){return j([0<ce.length?"var "+ce.join(",")+";":"",j(me)])}})}function ne(){function me(be,Pe){we(be,Pe,"=",ce.def(be,Pe),";")}var ce=Yt(),we=Yt(),ue=ce.toString,he=we.toString;return tt(function(){ce.apply(ce,R(arguments))},{def:ce.def,entry:ce,exit:we,save:me,set:function(be,Pe,De){me(be,Pe),ce(be,Pe,"=",De,";")},toString:function(){return ue()+he()}})}var re=Gt&&Gt.cache,Pt=0,Nt=[],ee=[],te=[],ge=Yt(),pe={};return{global:ge,link:function(me,ce){var we=ce&&ce.stable;if(!we){for(var ue=0;ue<ee.length;++ue)if(ee[ue]===me&&!te[ue])return Nt[ue]}return ue="g"+Pt++,Nt.push(ue),ee.push(me),te.push(we),ue},block:Yt,proc:function(me,ce){function we(){var Pe="a"+ue.length;return ue.push(Pe),Pe}var ue=[];ce=ce||0;for(var he=0;he<ce;++he)we();var be=(he=ne()).toString;return pe[me]=tt(he,{arg:we,toString:function(){return j(["function(",ue.join(),"){",be(),"}"])}})},scope:ne,cond:function(){var me=j(arguments),ce=ne(),we=ne(),ue=ce.toString,he=we.toString;return tt(ce,{then:function(){return ce.apply(ce,R(arguments)),this},else:function(){return we.apply(we,R(arguments)),this},toString:function(){var be=he();return be&&(be="else{"+be+"}"),j(["if(",me,"){",ue(),"}",be])}})},compile:function(){var me=['"use strict";',ge,"return {"];Object.keys(pe).forEach(function(ue){me.push('"',ue,'":',pe[ue].toString(),",")}),me.push("}");var ce,we=j(me).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return re&&(ce=function(ue){for(var he,be="",Pe=0;Pe<ue.length;Pe++)he=ue.charCodeAt(Pe),be+="0123456789abcdef".charAt(he>>>4&15)+"0123456789abcdef".charAt(15&he);return be}(function(ue){for(var he=Array(ue.length>>2),be=0;be<he.length;be++)he[be]=0;for(be=0;be<8*ue.length;be+=8)he[be>>5]|=(255&ue.charCodeAt(be/8))<<24-be%32;var Pe,De,Ue,tr,Ge,Ze,We,pr,xr,sr,$e,ir=8*ue.length;for(ue=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],be=Array(64),he[ir>>5]|=128<<24-ir%32,he[15+(ir+64>>9<<4)]=ir,pr=0;pr<he.length;pr+=16){for(ir=ue[0],Pe=ue[1],De=ue[2],Ue=ue[3],tr=ue[4],Ge=ue[5],Ze=ue[6],We=ue[7],xr=0;64>xr;xr++){var Ke;16>xr?be[xr]=he[xr+pr]:(sr=xr,$e=U($e=P($e=be[xr-2],17)^P($e,19)^$e>>>10,be[xr-7]),Ke=P(Ke=be[xr-15],7)^P(Ke,18)^Ke>>>3,be[sr]=U(U($e,Ke),be[xr-16])),sr=U(U(U(U(We,sr=P(sr=tr,6)^P(sr,11)^P(sr,25)),tr&Ge^~tr&Ze),ie[xr]),be[xr]),$e=U(We=P(We=ir,2)^P(We,13)^P(We,22),ir&Pe^ir&De^Pe&De),We=Ze,Ze=Ge,Ge=tr,tr=U(Ue,sr),Ue=De,De=Pe,Pe=ir,ir=U(sr,$e)}ue[0]=U(ir,ue[0]),ue[1]=U(Pe,ue[1]),ue[2]=U(De,ue[2]),ue[3]=U(Ue,ue[3]),ue[4]=U(tr,ue[4]),ue[5]=U(Ge,ue[5]),ue[6]=U(Ze,ue[6]),ue[7]=U(We,ue[7])}for(he="",be=0;be<32*ue.length;be+=8)he+=String.fromCharCode(ue[be>>5]>>>24-be%32&255);return he}(function(ue){for(var he,be,Pe="",De=-1;++De<ue.length;)he=ue.charCodeAt(De),be=De+1<ue.length?ue.charCodeAt(De+1):0,55296<=he&&56319>=he&&56320<=be&&57343>=be&&(he=65536+((1023&he)<<10)+(1023&be),De++),127>=he?Pe+=String.fromCharCode(he):2047>=he?Pe+=String.fromCharCode(192|he>>>6&31,128|63&he):65535>=he?Pe+=String.fromCharCode(224|he>>>12&15,128|he>>>6&63,128|63&he):2097151>=he&&(Pe+=String.fromCharCode(240|he>>>18&7,128|he>>>12&63,128|he>>>6&63,128|63&he));return Pe}(we))),re[ce])?re[ce].apply(null,ee):(we=Function.apply(null,Nt.concat(we)),re&&(re[ce]=we),we.apply(null,ee))}}}function z(Gt){return Array.isArray(Gt)||kt(Gt)||t(Gt)}function G(Gt){return Gt.sort(function(Yt,ne){return Yt==="viewport"?-1:ne==="viewport"?1:Yt<ne?-1:1})}function V(Gt,Yt,ne,re){this.thisDep=Gt,this.contextDep=Yt,this.propDep=ne,this.append=re}function et(Gt){return Gt&&!(Gt.thisDep||Gt.contextDep||Gt.propDep)}function J(Gt){return new V(!1,!1,!1,Gt)}function X(Gt,Yt){var ne=Gt.type;if(ne===0)return new V(!0,1<=(ne=Gt.data.length),2<=ne,Yt);if(ne===4)return new V((ne=Gt.data).thisDep,ne.contextDep,ne.propDep,Yt);if(ne===5)return new V(!1,!1,!1,Yt);if(ne===6){for(var re=ne=!1,Pt=!1,Nt=0;Nt<Gt.data.length;++Nt){var ee=Gt.data[Nt];ee.type===1?Pt=!0:ee.type===2?re=!0:ee.type===3?ne=!0:ee.type===0?(ne=!0,1<=(ee=ee.data)&&(re=!0),2<=ee&&(Pt=!0)):ee.type===4&&(ne=ne||ee.data.thisDep,re=re||ee.data.contextDep,Pt=Pt||ee.data.propDep)}return new V(ne,re,Pt,Yt)}return new V(ne===3,ne===2,ne===1,Yt)}function Y(Gt,Yt,ne,re,Pt,Nt,ee,te,ge,pe,me,ce,we,ue,he,be){function Pe(Me){return Me.replace(".","_")}function De(Me,qe,Qe){var yr=Pe(Me);Hr.push(Me),Mr[yr]=gr[yr]=!!Qe,Pr[yr]=qe}function Ue(Me,qe,Qe){var yr=Pe(Me);Hr.push(Me),Array.isArray(Qe)?(gr[yr]=Qe.slice(),Mr[yr]=Qe.slice()):gr[yr]=Mr[yr]=Qe,Dr[yr]=qe}function tr(){var Me=B({cache:he}),qe=Me.link,Qe=Me.global;Me.id=wr++,Me.batchId="0";var yr=qe(Qr),br=Me.shared={props:"a0"};Object.keys(Qr).forEach(function(lr){br[lr]=Qe.def(yr,".",lr)});var Ar=Me.next={},cr=Me.current={};Object.keys(Dr).forEach(function(lr){Array.isArray(gr[lr])&&(Ar[lr]=Qe.def(br.next,".",lr),cr[lr]=Qe.def(br.current,".",lr))});var Xe=Me.constants={};Object.keys(He).forEach(function(lr){Xe[lr]=Qe.def(JSON.stringify(He[lr]))}),Me.invoke=function(lr,ur){switch(ur.type){case 0:var Lr=["this",br.context,br.props,Me.batchId];return lr.def(qe(ur.data),".call(",Lr.slice(0,Math.max(ur.data.length+1,4)),")");case 1:return lr.def(br.props,ur.data);case 2:return lr.def(br.context,ur.data);case 3:return lr.def("this",ur.data);case 4:return ur.data.append(Me,lr),ur.data.ref;case 5:return ur.data.toString();case 6:return ur.data.map(function(Ir){return Me.invoke(lr,Ir)})}},Me.attribCache={};var Je={};return Me.scopeAttrib=function(lr){if((lr=Yt.id(lr))in Je)return Je[lr];var ur=pe.scope[lr];return ur||(ur=pe.scope[lr]=new qr),Je[lr]=qe(ur)},Me}function Ge(Me,qe){var Qe=Me.static,yr=Me.dynamic;if("framebuffer"in Qe){var br=Qe.framebuffer;return br?(br=te.getFramebuffer(br),J(function(cr,Xe){var Je=cr.link(br),lr=cr.shared;return Xe.set(lr.framebuffer,".next",Je),lr=lr.context,Xe.set(lr,".framebufferWidth",Je+".width"),Xe.set(lr,".framebufferHeight",Je+".height"),Je})):J(function(cr,Xe){var Je=cr.shared;return Xe.set(Je.framebuffer,".next","null"),Je=Je.context,Xe.set(Je,".framebufferWidth",Je+".drawingBufferWidth"),Xe.set(Je,".framebufferHeight",Je+".drawingBufferHeight"),"null"})}if("framebuffer"in yr){var Ar=yr.framebuffer;return X(Ar,function(cr,Xe){var Je=cr.invoke(Xe,Ar),lr=cr.shared,ur=lr.framebuffer;return Je=Xe.def(ur,".getFramebuffer(",Je,")"),Xe.set(ur,".next",Je),lr=lr.context,Xe.set(lr,".framebufferWidth",Je+"?"+Je+".width:"+lr+".drawingBufferWidth"),Xe.set(lr,".framebufferHeight",Je+"?"+Je+".height:"+lr+".drawingBufferHeight"),Je})}return null}function Ze(Me,qe,Qe){function yr(lr){if(lr in br){var ur=Yt.id(br[lr]);return(lr=J(function(){return ur})).id=ur,lr}if(lr in Ar){var Lr=Ar[lr];return X(Lr,function(Ir,Gr){var Nr=Ir.invoke(Gr,Lr);return Gr.def(Ir.shared.strings,".id(",Nr,")")})}return null}var br=Me.static,Ar=Me.dynamic,cr=yr("frag"),Xe=yr("vert"),Je=null;return et(cr)&&et(Xe)?(Je=me.program(Xe.id,cr.id,null,Qe),Me=J(function(lr,ur){return lr.link(Je)})):Me=new V(cr&&cr.thisDep||Xe&&Xe.thisDep,cr&&cr.contextDep||Xe&&Xe.contextDep,cr&&cr.propDep||Xe&&Xe.propDep,function(lr,ur){var Lr,Ir,Gr=lr.shared.shader;return Lr=cr?cr.append(lr,ur):ur.def(Gr,".","frag"),Ir=Xe?Xe.append(lr,ur):ur.def(Gr,".","vert"),ur.def(Gr+".program("+Ir+","+Lr+")")}),{frag:cr,vert:Xe,progVar:Me,program:Je}}function We(Me,qe){function Qe(Nr,Kr){if(Nr in yr){var Vr=0|yr[Nr];return Kr?Ar.offset=Vr:Ar.instances=Vr,J(function(rn,nn){return Kr&&(rn.OFFSET=Vr),Vr})}if(Nr in br){var an=br[Nr];return X(an,function(rn,nn){var hn=rn.invoke(nn,an);return Kr&&(rn.OFFSET=hn),hn})}if(Kr){if(Je)return J(function(rn,nn){return rn.OFFSET=0});if(cr)return new V(Xe.thisDep,Xe.contextDep,Xe.propDep,function(rn,nn){return nn.def(rn.shared.vao+".currentVAO?"+rn.shared.vao+".currentVAO.offset:0")})}else if(cr)return new V(Xe.thisDep,Xe.contextDep,Xe.propDep,function(rn,nn){return nn.def(rn.shared.vao+".currentVAO?"+rn.shared.vao+".currentVAO.instances:-1")});return null}var yr=Me.static,br=Me.dynamic,Ar={},cr=!1,Xe=function(){if("vao"in yr){var Nr=yr.vao;return Nr!==null&&pe.getVAO(Nr)===null&&(Nr=pe.createVAO(Nr)),cr=!0,Ar.vao=Nr,J(function(Vr){var an=pe.getVAO(Nr);return an?Vr.link(an):"null"})}if("vao"in br){cr=!0;var Kr=br.vao;return X(Kr,function(Vr,an){var rn=Vr.invoke(an,Kr);return an.def(Vr.shared.vao+".getVAO("+rn+")")})}return null}(),Je=!1,lr=function(){if("elements"in yr){var Nr=yr.elements;if(Ar.elements=Nr,z(Nr)){var Kr=Ar.elements=Nt.create(Nr,!0);Nr=Nt.getElements(Kr),Je=!0}else Nr&&(Nr=Nt.getElements(Nr),Je=!0);return Kr=J(function(an,rn){if(Nr){var nn=an.link(Nr);return an.ELEMENTS=nn}return an.ELEMENTS=null}),Kr.value=Nr,Kr}if("elements"in br){Je=!0;var Vr=br.elements;return X(Vr,function(an,rn){var nn=(hn=an.shared).isBufferArgs,hn=hn.elements,fn=an.invoke(rn,Vr),kn=rn.def("null");return nn=rn.def(nn,"(",fn,")"),fn=an.cond(nn).then(kn,"=",hn,".createStream(",fn,");").else(kn,"=",hn,".getElements(",fn,");"),rn.entry(fn),rn.exit(an.cond(nn).then(hn,".destroyStream(",kn,");")),an.ELEMENTS=kn})}return cr?new V(Xe.thisDep,Xe.contextDep,Xe.propDep,function(an,rn){return rn.def(an.shared.vao+".currentVAO?"+an.shared.elements+".getElements("+an.shared.vao+".currentVAO.elements):null")}):null}(),ur=Qe("offset",!0),Lr=function(){if("primitive"in yr){var Nr=yr.primitive;return Ar.primitive=Nr,J(function(Vr,an){return Lt[Nr]})}if("primitive"in br){var Kr=br.primitive;return X(Kr,function(Vr,an){var rn=Vr.constants.primTypes,nn=Vr.invoke(an,Kr);return an.def(rn,"[",nn,"]")})}return Je?et(lr)?lr.value?J(function(Vr,an){return an.def(Vr.ELEMENTS,".primType")}):J(function(){return 4}):new V(lr.thisDep,lr.contextDep,lr.propDep,function(Vr,an){var rn=Vr.ELEMENTS;return an.def(rn,"?",rn,".primType:",4)}):cr?new V(Xe.thisDep,Xe.contextDep,Xe.propDep,function(Vr,an){return an.def(Vr.shared.vao+".currentVAO?"+Vr.shared.vao+".currentVAO.primitive:4")}):null}(),Ir=function(){if("count"in yr){var Nr=0|yr.count;return Ar.count=Nr,J(function(){return Nr})}if("count"in br){var Kr=br.count;return X(Kr,function(Vr,an){return Vr.invoke(an,Kr)})}return Je?et(lr)?lr?ur?new V(ur.thisDep,ur.contextDep,ur.propDep,function(Vr,an){return an.def(Vr.ELEMENTS,".vertCount-",Vr.OFFSET)}):J(function(Vr,an){return an.def(Vr.ELEMENTS,".vertCount")}):J(function(){return-1}):new V(lr.thisDep||ur.thisDep,lr.contextDep||ur.contextDep,lr.propDep||ur.propDep,function(Vr,an){var rn=Vr.ELEMENTS;return Vr.OFFSET?an.def(rn,"?",rn,".vertCount-",Vr.OFFSET,":-1"):an.def(rn,"?",rn,".vertCount:-1")}):cr?new V(Xe.thisDep,Xe.contextDep,Xe.propDep,function(Vr,an){return an.def(Vr.shared.vao,".currentVAO?",Vr.shared.vao,".currentVAO.count:-1")}):null}(),Gr=Qe("instances",!1);return{elements:lr,primitive:Lr,count:Ir,instances:Gr,offset:ur,vao:Xe,vaoActive:cr,elementsActive:Je,static:Ar}}function pr(Me,qe){var Qe=Me.static,yr=Me.dynamic,br={};return Object.keys(Qe).forEach(function(Ar){var cr=Qe[Ar],Xe=Yt.id(Ar),Je=new qr;if(z(cr))Je.state=1,Je.buffer=Pt.getBuffer(Pt.create(cr,34962,!1,!0)),Je.type=0;else if(ur=Pt.getBuffer(cr))Je.state=1,Je.buffer=ur,Je.type=0;else if("constant"in cr){var lr=cr.constant;Je.buffer="null",Je.state=2,typeof lr=="number"?Je.x=lr:se.forEach(function(Vr,an){an<lr.length&&(Je[Vr]=lr[an])})}else{var ur=z(cr.buffer)?Pt.getBuffer(Pt.create(cr.buffer,34962,!1,!0)):Pt.getBuffer(cr.buffer),Lr=0|cr.offset,Ir=0|cr.stride,Gr=0|cr.size,Nr=!!cr.normalized,Kr=0;"type"in cr&&(Kr=vt[cr.type]),cr=0|cr.divisor,Je.buffer=ur,Je.state=1,Je.size=Gr,Je.normalized=Nr,Je.type=Kr||ur.dtype,Je.offset=Lr,Je.stride=Ir,Je.divisor=cr}br[Ar]=J(function(Vr,an){var rn=Vr.attribCache;if(Xe in rn)return rn[Xe];var nn={isStream:!1};return Object.keys(Je).forEach(function(hn){nn[hn]=Je[hn]}),Je.buffer&&(nn.buffer=Vr.link(Je.buffer),nn.type=nn.type||nn.buffer+".dtype"),rn[Xe]=nn})}),Object.keys(yr).forEach(function(Ar){var cr=yr[Ar];br[Ar]=X(cr,function(Xe,Je){function lr(rn){Je(Nr[rn],"=",ur,".",rn,"|0;")}var ur=Xe.invoke(Je,cr),Lr=Xe.shared,Ir=Xe.constants,Gr=Lr.isBufferArgs,Nr=(Lr=Lr.buffer,{isStream:Je.def(!1)}),Kr=new qr;Kr.state=1,Object.keys(Kr).forEach(function(rn){Nr[rn]=Je.def(""+Kr[rn])});var Vr=Nr.buffer,an=Nr.type;return Je("if(",Gr,"(",ur,")){",Nr.isStream,"=true;",Vr,"=",Lr,".createStream(",34962,",",ur,");",an,"=",Vr,".dtype;","}else{",Vr,"=",Lr,".getBuffer(",ur,");","if(",Vr,"){",an,"=",Vr,".dtype;",'}else if("constant" in ',ur,"){",Nr.state,"=",2,";","if(typeof "+ur+'.constant === "number"){',Nr[se[0]],"=",ur,".constant;",se.slice(1).map(function(rn){return Nr[rn]}).join("="),"=0;","}else{",se.map(function(rn,nn){return Nr[rn]+"="+ur+".constant.length>"+nn+"?"+ur+".constant["+nn+"]:0;"}).join(""),"}}else{","if(",Gr,"(",ur,".buffer)){",Vr,"=",Lr,".createStream(",34962,",",ur,".buffer);","}else{",Vr,"=",Lr,".getBuffer(",ur,".buffer);","}",an,'="type" in ',ur,"?",Ir.glTypes,"[",ur,".type]:",Vr,".dtype;",Nr.normalized,"=!!",ur,".normalized;"),lr("size"),lr("offset"),lr("stride"),lr("divisor"),Je("}}"),Je.exit("if(",Nr.isStream,"){",Lr,".destroyStream(",Vr,");","}"),Nr})}),br}function xr(Me,qe,Qe,yr,br){function Ar(Kr){var Vr=Xe[Kr];Vr&&(lr[Kr]=Vr)}var cr=function(Kr,Vr){if(typeof(an=Kr.static).frag=="string"&&typeof an.vert=="string"){if(0<Object.keys(Vr.dynamic).length)return null;var an=Vr.static,rn=Object.keys(an);if(0<rn.length&&typeof an[rn[0]]=="number"){for(var nn=[],hn=0;hn<rn.length;++hn)nn.push([0|an[rn[hn]],rn[hn]]);return nn}}return null}(Me,qe),Xe=function(Kr,Vr,an){function rn(kn){if(kn in nn){var Yr=nn[kn];kn=!0;var mn,Sn,Xn=0|Yr.x,ui=0|Yr.y;return"width"in Yr?mn=0|Yr.width:kn=!1,"height"in Yr?Sn=0|Yr.height:kn=!1,new V(!kn&&Vr&&Vr.thisDep,!kn&&Vr&&Vr.contextDep,!kn&&Vr&&Vr.propDep,function(gi,ri){var Mi=gi.shared.context,Xa=mn;"width"in Yr||(Xa=ri.def(Mi,".","framebufferWidth","-",Xn));var ya=Sn;return"height"in Yr||(ya=ri.def(Mi,".","framebufferHeight","-",ui)),[Xn,ui,Xa,ya]})}if(kn in hn){var si=hn[kn];return kn=X(si,function(gi,ri){var Mi=gi.invoke(ri,si),Xa=gi.shared.context,ya=ri.def(Mi,".x|0"),so=ri.def(Mi,".y|0");return[ya,so,ri.def('"width" in ',Mi,"?",Mi,".width|0:","(",Xa,".","framebufferWidth","-",ya,")"),Mi=ri.def('"height" in ',Mi,"?",Mi,".height|0:","(",Xa,".","framebufferHeight","-",so,")")]}),Vr&&(kn.thisDep=kn.thisDep||Vr.thisDep,kn.contextDep=kn.contextDep||Vr.contextDep,kn.propDep=kn.propDep||Vr.propDep),kn}return Vr?new V(Vr.thisDep,Vr.contextDep,Vr.propDep,function(gi,ri){var Mi=gi.shared.context;return[0,0,ri.def(Mi,".","framebufferWidth"),ri.def(Mi,".","framebufferHeight")]}):null}var nn=Kr.static,hn=Kr.dynamic;if(Kr=rn("viewport")){var fn=Kr;Kr=new V(Kr.thisDep,Kr.contextDep,Kr.propDep,function(kn,Yr){var mn=fn.append(kn,Yr),Sn=kn.shared.context;return Yr.set(Sn,".viewportWidth",mn[2]),Yr.set(Sn,".viewportHeight",mn[3]),mn})}return{viewport:Kr,scissor_box:rn("scissor.box")}}(Me,Lr=Ge(Me)),Je=We(Me),lr=function(Kr,Vr){var an=Kr.static,rn=Kr.dynamic,nn={};return Hr.forEach(function(hn){function fn(Yr,mn){if(hn in an){var Sn=Yr(an[hn]);nn[kn]=J(function(){return Sn})}else if(hn in rn){var Xn=rn[hn];nn[kn]=X(Xn,function(ui,si){return mn(ui,si,ui.invoke(si,Xn))})}}var kn=Pe(hn);switch(hn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return fn(function(Yr){return Yr},function(Yr,mn,Sn){return Sn});case"depth.func":return fn(function(Yr){return Ie[Yr]},function(Yr,mn,Sn){return mn.def(Yr.constants.compareFuncs,"[",Sn,"]")});case"depth.range":return fn(function(Yr){return Yr},function(Yr,mn,Sn){return[mn.def("+",Sn,"[0]"),mn=mn.def("+",Sn,"[1]")]});case"blend.func":return fn(function(Yr){return[Ae["srcRGB"in Yr?Yr.srcRGB:Yr.src],Ae["dstRGB"in Yr?Yr.dstRGB:Yr.dst],Ae["srcAlpha"in Yr?Yr.srcAlpha:Yr.src],Ae["dstAlpha"in Yr?Yr.dstAlpha:Yr.dst]]},function(Yr,mn,Sn){function Xn(ri,Mi){return mn.def('"',ri,Mi,'" in ',Sn,"?",Sn,".",ri,Mi,":",Sn,".",ri)}Yr=Yr.constants.blendFuncs;var ui=Xn("src","RGB"),si=Xn("dst","RGB"),gi=(ui=mn.def(Yr,"[",ui,"]"),mn.def(Yr,"[",Xn("src","Alpha"),"]"));return[ui,si=mn.def(Yr,"[",si,"]"),gi,Yr=mn.def(Yr,"[",Xn("dst","Alpha"),"]")]});case"blend.equation":return fn(function(Yr){return typeof Yr=="string"?[vn[Yr],vn[Yr]]:typeof Yr=="object"?[vn[Yr.rgb],vn[Yr.alpha]]:void 0},function(Yr,mn,Sn){var Xn=Yr.constants.blendEquations,ui=mn.def(),si=mn.def();return(Yr=Yr.cond("typeof ",Sn,'==="string"')).then(ui,"=",si,"=",Xn,"[",Sn,"];"),Yr.else(ui,"=",Xn,"[",Sn,".rgb];",si,"=",Xn,"[",Sn,".alpha];"),mn(Yr),[ui,si]});case"blend.color":return fn(function(Yr){return h(4,function(mn){return+Yr[mn]})},function(Yr,mn,Sn){return h(4,function(Xn){return mn.def("+",Sn,"[",Xn,"]")})});case"stencil.mask":return fn(function(Yr){return 0|Yr},function(Yr,mn,Sn){return mn.def(Sn,"|0")});case"stencil.func":return fn(function(Yr){return[Ie[Yr.cmp||"keep"],Yr.ref||0,"mask"in Yr?Yr.mask:-1]},function(Yr,mn,Sn){return[Yr=mn.def('"cmp" in ',Sn,"?",Yr.constants.compareFuncs,"[",Sn,".cmp]",":",7680),mn.def(Sn,".ref|0"),mn=mn.def('"mask" in ',Sn,"?",Sn,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return fn(function(Yr){return[hn==="stencil.opBack"?1029:1028,Te[Yr.fail||"keep"],Te[Yr.zfail||"keep"],Te[Yr.zpass||"keep"]]},function(Yr,mn,Sn){function Xn(si){return mn.def('"',si,'" in ',Sn,"?",ui,"[",Sn,".",si,"]:",7680)}var ui=Yr.constants.stencilOps;return[hn==="stencil.opBack"?1029:1028,Xn("fail"),Xn("zfail"),Xn("zpass")]});case"polygonOffset.offset":return fn(function(Yr){return[0|Yr.factor,0|Yr.units]},function(Yr,mn,Sn){return[mn.def(Sn,".factor|0"),mn=mn.def(Sn,".units|0")]});case"cull.face":return fn(function(Yr){var mn=0;return Yr==="front"?mn=1028:Yr==="back"&&(mn=1029),mn},function(Yr,mn,Sn){return mn.def(Sn,'==="front"?',1028,":",1029)});case"frontFace":return fn(function(Yr){return Vt[Yr]},function(Yr,mn,Sn){return mn.def(Sn+'==="cw"?2304:2305')});case"colorMask":return fn(function(Yr){return Yr.map(function(mn){return!!mn})},function(Yr,mn,Sn){return h(4,function(Xn){return"!!"+Sn+"["+Xn+"]"})});case"sample.coverage":return fn(function(Yr){return["value"in Yr?Yr.value:1,!!Yr.invert]},function(Yr,mn,Sn){return[mn.def('"value" in ',Sn,"?+",Sn,".value:1"),mn=mn.def("!!",Sn,".invert")]})}}),nn}(Me),ur=Ze(Me,0,cr);Ar("viewport"),Ar(Pe("scissor.box"));var Lr,Ir=0<Object.keys(lr).length;if((Lr={framebuffer:Lr,draw:Je,shader:ur,state:lr,dirty:Ir,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Kr){var Vr,an=Kr.static;if(Kr=Kr.dynamic,"profile"in an){var rn=!!an.profile;(Vr=J(function(hn,fn){return rn})).enable=rn}else if("profile"in Kr){var nn=Kr.profile;Vr=X(nn,function(hn,fn){return hn.invoke(fn,nn)})}return Vr}(Me),Lr.uniforms=function(Kr,Vr){var an=Kr.static,rn=Kr.dynamic,nn={};return Object.keys(an).forEach(function(hn){var fn,kn=an[hn];if(typeof kn=="number"||typeof kn=="boolean")fn=J(function(){return kn});else if(typeof kn=="function"){var Yr=kn._reglType;Yr==="texture2d"||Yr==="textureCube"?fn=J(function(mn){return mn.link(kn)}):Yr!=="framebuffer"&&Yr!=="framebufferCube"||(fn=J(function(mn){return mn.link(kn.color[0])}))}else w(kn)&&(fn=J(function(mn){return mn.global.def("[",h(kn.length,function(Sn){return kn[Sn]}),"]")}));fn.value=kn,nn[hn]=fn}),Object.keys(rn).forEach(function(hn){var fn=rn[hn];nn[hn]=X(fn,function(kn,Yr){return kn.invoke(Yr,fn)})}),nn}(Qe),Lr.drawVAO=Lr.scopeVAO=Je.vao,!Lr.drawVAO&&ur.program&&!cr&&ne.angle_instanced_arrays&&Je.static.elements){var Gr=!0;if(Me=ur.program.attributes.map(function(Kr){return Kr=qe.static[Kr],Gr=Gr&&!!Kr,Kr}),Gr&&0<Me.length){var Nr=pe.getVAO(pe.createVAO({attributes:Me,elements:Je.static.elements}));Lr.drawVAO=new V(null,null,null,function(Kr,Vr){return Kr.link(Nr)}),Lr.useVAO=!0}}return cr?Lr.useVAO=!0:Lr.attributes=pr(qe),Lr.context=function(Kr){var Vr=Kr.static,an=Kr.dynamic,rn={};return Object.keys(Vr).forEach(function(nn){var hn=Vr[nn];rn[nn]=J(function(fn,kn){return typeof hn=="number"||typeof hn=="boolean"?""+hn:fn.link(hn)})}),Object.keys(an).forEach(function(nn){var hn=an[nn];rn[nn]=X(hn,function(fn,kn){return fn.invoke(kn,hn)})}),rn}(yr),Lr}function sr(Me,qe,Qe){var yr=Me.shared.context,br=Me.scope();Object.keys(Qe).forEach(function(Ar){qe.save(yr,"."+Ar);var cr=Qe[Ar].append(Me,qe);Array.isArray(cr)?br(yr,".",Ar,"=[",cr.join(),"];"):br(yr,".",Ar,"=",cr,";")}),qe(br)}function $e(Me,qe,Qe,yr){var br,Ar=(Xe=Me.shared).gl,cr=Xe.framebuffer;nr&&(br=qe.def(Xe.extensions,".webgl_draw_buffers"));var Xe=(Je=Me.constants).drawBuffer,Je=Je.backBuffer;Me=Qe?Qe.append(Me,qe):qe.def(cr,".next"),yr||qe("if(",Me,"!==",cr,".cur){"),qe("if(",Me,"){",Ar,".bindFramebuffer(",36160,",",Me,".framebuffer);"),nr&&qe(br,".drawBuffersWEBGL(",Xe,"[",Me,".colorAttachments.length]);"),qe("}else{",Ar,".bindFramebuffer(",36160,",null);"),nr&&qe(br,".drawBuffersWEBGL(",Je,");"),qe("}",cr,".cur=",Me,";"),yr||qe("}")}function ir(Me,qe,Qe){var yr=Me.shared,br=yr.gl,Ar=Me.current,cr=Me.next,Xe=yr.current,Je=yr.next,lr=Me.cond(Xe,".dirty");Hr.forEach(function(ur){var Lr,Ir;if(!((ur=Pe(ur))in Qe.state))if(ur in cr){Lr=cr[ur],Ir=Ar[ur];var Gr=h(gr[ur].length,function(Nr){return lr.def(Lr,"[",Nr,"]")});lr(Me.cond(Gr.map(function(Nr,Kr){return Nr+"!=="+Ir+"["+Kr+"]"}).join("||")).then(br,".",Dr[ur],"(",Gr,");",Gr.map(function(Nr,Kr){return Ir+"["+Kr+"]="+Nr}).join(";"),";"))}else Lr=lr.def(Je,".",ur),Gr=Me.cond(Lr,"!==",Xe,".",ur),lr(Gr),ur in Pr?Gr(Me.cond(Lr).then(br,".enable(",Pr[ur],");").else(br,".disable(",Pr[ur],");"),Xe,".",ur,"=",Lr,";"):Gr(br,".",Dr[ur],"(",Lr,");",Xe,".",ur,"=",Lr,";")}),Object.keys(Qe.state).length===0&&lr(Xe,".dirty=false;"),qe(lr)}function Ke(Me,qe,Qe,yr){var br,Ar=Me.shared,cr=Me.current,Xe=Ar.current,Je=Ar.gl;G(Object.keys(Qe)).forEach(function(lr){var ur=Qe[lr];if(!yr||yr(ur)){var Lr=ur.append(Me,qe);if(Pr[lr]){var Ir=Pr[lr];et(ur)?(br=Me.link(Lr,{stable:!0}),qe(Me.cond(br).then(Je,".enable(",Ir,");").else(Je,".disable(",Ir,");")),qe(Xe,".",lr,"=",br,";")):(qe(Me.cond(Lr).then(Je,".enable(",Ir,");").else(Je,".disable(",Ir,");")),qe(Xe,".",lr,"=",Lr,";"))}else if(w(Lr)){var Gr=cr[lr];qe(Je,".",Dr[lr],"(",Lr,");",Lr.map(function(Nr,Kr){return Gr+"["+Kr+"]="+Nr}).join(";"),";")}else et(ur)?(br=Me.link(Lr,{stable:!0}),qe(Je,".",Dr[lr],"(",br,");",Xe,".",lr,"=",br,";")):qe(Je,".",Dr[lr],"(",Lr,");",Xe,".",lr,"=",Lr,";")}})}function ar(Me,qe){je&&(Me.instancing=qe.def(Me.shared.extensions,".angle_instanced_arrays"))}function fr(Me,qe,Qe,yr,br){function Ar(){return typeof performance>"u"?"Date.now()":"performance.now()"}function cr(Kr){Kr(lr=qe.def(),"=",Ar(),";"),typeof br=="string"?Kr(Ir,".count+=",br,";"):Kr(Ir,".count++;"),ue&&(yr?Kr(ur=qe.def(),"=",Nr,".getNumPendingQueries();"):Kr(Nr,".beginQuery(",Ir,");"))}function Xe(Kr){Kr(Ir,".cpuTime+=",Ar(),"-",lr,";"),ue&&(yr?Kr(Nr,".pushScopeStats(",ur,",",Nr,".getNumPendingQueries(),",Ir,");"):Kr(Nr,".endQuery();"))}function Je(Kr){var Vr=qe.def(Gr,".profile");qe(Gr,".profile=",Kr,";"),qe.exit(Gr,".profile=",Vr,";")}var lr,ur,Lr=Me.shared,Ir=Me.stats,Gr=Lr.current,Nr=Lr.timer;if(Qe=Qe.profile){if(et(Qe))return void(Qe.enable?(cr(qe),Xe(qe.exit),Je("true")):Je("false"));Je(Qe=Qe.append(Me,qe))}else Qe=qe.def(Gr,".profile");cr(Lr=Me.block()),qe("if(",Qe,"){",Lr,"}"),Xe(Me=Me.block()),qe.exit("if(",Qe,"){",Me,"}")}function mr(Me,qe,Qe,yr,br){function Ar(Xe,Je,lr){function ur(){qe("if(!",Nr,".buffer){",Ir,".enableVertexAttribArray(",Gr,");}");var rn,nn=lr.type;rn=lr.size?qe.def(lr.size,"||",Je):Je,qe("if(",Nr,".type!==",nn,"||",Nr,".size!==",rn,"||",an.map(function(hn){return Nr+"."+hn+"!=="+lr[hn]}).join("||"),"){",Ir,".bindBuffer(",34962,",",Kr,".buffer);",Ir,".vertexAttribPointer(",[Gr,rn,nn,lr.normalized,lr.stride,lr.offset],");",Nr,".type=",nn,";",Nr,".size=",rn,";",an.map(function(hn){return Nr+"."+hn+"="+lr[hn]+";"}).join(""),"}"),je&&(nn=lr.divisor,qe("if(",Nr,".divisor!==",nn,"){",Me.instancing,".vertexAttribDivisorANGLE(",[Gr,nn],");",Nr,".divisor=",nn,";}"))}function Lr(){qe("if(",Nr,".buffer){",Ir,".disableVertexAttribArray(",Gr,");",Nr,".buffer=null;","}if(",se.map(function(rn,nn){return Nr+"."+rn+"!=="+Vr[nn]}).join("||"),"){",Ir,".vertexAttrib4f(",Gr,",",Vr,");",se.map(function(rn,nn){return Nr+"."+rn+"="+Vr[nn]+";"}).join(""),"}")}var Ir=cr.gl,Gr=qe.def(Xe,".location"),Nr=qe.def(cr.attributes,"[",Gr,"]");Xe=lr.state;var Kr=lr.buffer,Vr=[lr.x,lr.y,lr.z,lr.w],an=["buffer","normalized","offset","stride"];Xe===1?ur():Xe===2?Lr():(qe("if(",Xe,"===",1,"){"),ur(),qe("}else{"),Lr(),qe("}"))}var cr=Me.shared;yr.forEach(function(Xe){var Je,lr=Xe.name,ur=Qe.attributes[lr];if(ur){if(!br(ur))return;Je=ur.append(Me,qe)}else{if(!br(Zt))return;var Lr=Me.scopeAttrib(lr);Je={},Object.keys(new qr).forEach(function(Ir){Je[Ir]=qe.def(Lr,".",Ir)})}Ar(Me.link(Xe),function(Ir){switch(Ir){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Xe.info.type),Je)})}function Cr(Me,qe,Qe,yr,br,Ar){for(var cr,Xe=Me.shared,Je=Xe.gl,lr=0;lr<yr.length;++lr){var ur,Lr=(Nr=yr[lr]).name,Ir=Nr.info.type,Gr=Qe.uniforms[Lr],Nr=Me.link(Nr)+".location";if(Gr){if(!br(Gr))continue;if(et(Gr)){if(Lr=Gr.value,Ir===35678||Ir===35680)qe(Je,".uniform1i(",Nr,",",(Ir=Me.link(Lr._texture||Lr.color[0]._texture))+".bind());"),qe.exit(Ir,".unbind();");else if(Ir===35674||Ir===35675||Ir===35676)Gr=2,Ir===35675?Gr=3:Ir===35676&&(Gr=4),qe(Je,".uniformMatrix",Gr,"fv(",Nr,",false,",Lr=Me.global.def("new Float32Array(["+Array.prototype.slice.call(Lr)+"])"),");");else{switch(Ir){case 5126:cr="1f";break;case 35664:cr="2f";break;case 35665:cr="3f";break;case 35666:cr="4f";break;case 35670:case 5124:cr="1i";break;case 35671:case 35667:cr="2i";break;case 35672:case 35668:cr="3i";break;case 35673:case 35669:cr="4i"}qe(Je,".uniform",cr,"(",Nr,",",w(Lr)?Array.prototype.slice.call(Lr):Lr,");")}continue}ur=Gr.append(Me,qe)}else{if(!br(Zt))continue;ur=qe.def(Xe.uniforms,"[",Yt.id(Lr),"]")}switch(Ir===35678?qe("if(",ur,"&&",ur,'._reglType==="framebuffer"){',ur,"=",ur,".color[0];","}"):Ir===35680&&qe("if(",ur,"&&",ur,'._reglType==="framebufferCube"){',ur,"=",ur,".color[0];","}"),Lr=1,Ir){case 35678:case 35680:Ir=qe.def(ur,"._texture"),qe(Je,".uniform1i(",Nr,",",Ir,".bind());"),qe.exit(Ir,".unbind();");continue;case 5124:case 35670:cr="1i";break;case 35667:case 35671:cr="2i",Lr=2;break;case 35668:case 35672:cr="3i",Lr=3;break;case 35669:case 35673:cr="4i",Lr=4;break;case 5126:cr="1f";break;case 35664:cr="2f",Lr=2;break;case 35665:cr="3f",Lr=3;break;case 35666:cr="4f",Lr=4;break;case 35674:cr="Matrix2fv";break;case 35675:cr="Matrix3fv";break;case 35676:cr="Matrix4fv"}if(cr.charAt(0)==="M"){qe(Je,".uniform",cr,"(",Nr,","),Nr=Math.pow(Ir-35674+2,2);var Kr=Me.global.def("new Float32Array(",Nr,")");Array.isArray(ur)?qe("false,(",h(Nr,function(an){return Kr+"["+an+"]="+ur[an]}),",",Kr,")"):qe("false,(Array.isArray(",ur,")||",ur," instanceof Float32Array)?",ur,":(",h(Nr,function(an){return Kr+"["+an+"]="+ur+"["+an+"]"}),",",Kr,")"),qe(");")}else{if(1<Lr){Ir=[];var Vr=[];for(Gr=0;Gr<Lr;++Gr)Array.isArray(ur)?Vr.push(ur[Gr]):Vr.push(qe.def(ur+"["+Gr+"]")),Ar&&Ir.push(qe.def());Ar&&qe("if(!",Me.batchId,"||",Ir.map(function(an,rn){return an+"!=="+Vr[rn]}).join("||"),"){",Ir.map(function(an,rn){return an+"="+Vr[rn]+";"}).join("")),qe(Je,".uniform",cr,"(",Nr,",",Vr.join(","),");")}else Ar&&(Ir=qe.def(),qe("if(!",Me.batchId,"||",Ir,"!==",ur,"){",Ir,"=",ur,";")),qe(Je,".uniform",cr,"(",Nr,",",ur,");");Ar&&qe("}")}}}function Er(Me,qe,Qe,yr){function br(nn){var hn=Ir[nn];return hn?hn.contextDep&&yr.contextDynamic||hn.propDep?hn.append(Me,Qe):hn.append(Me,qe):qe.def(Lr,".",nn)}function Ar(){function nn(){Qe(Je,".drawElementsInstancedANGLE(",[Nr,Vr,an,Kr+"<<(("+an+"-5121)>>1)",Xe],");")}function hn(){Qe(Je,".drawArraysInstancedANGLE(",[Nr,Kr,Vr,Xe],");")}Gr&&Gr!=="null"?rn?nn():(Qe("if(",Gr,"){"),nn(),Qe("}else{"),hn(),Qe("}")):hn()}function cr(){function nn(){Qe(ur+".drawElements("+[Nr,Vr,an,Kr+"<<(("+an+"-5121)>>1)"]+");")}function hn(){Qe(ur+".drawArrays("+[Nr,Kr,Vr]+");")}Gr&&Gr!=="null"?rn?nn():(Qe("if(",Gr,"){"),nn(),Qe("}else{"),hn(),Qe("}")):hn()}var Xe,Je,lr=Me.shared,ur=lr.gl,Lr=lr.draw,Ir=yr.draw,Gr=function(){var nn=Ir.elements,hn=qe;return nn?((nn.contextDep&&yr.contextDynamic||nn.propDep)&&(hn=Qe),nn=nn.append(Me,hn),Ir.elementsActive&&hn("if("+nn+")"+ur+".bindBuffer(34963,"+nn+".buffer.buffer);")):(nn=hn.def(),hn(nn,"=",Lr,".","elements",";","if(",nn,"){",ur,".bindBuffer(",34963,",",nn,".buffer.buffer);}","else if(",lr.vao,".currentVAO){",nn,"=",Me.shared.elements+".getElements("+lr.vao,".currentVAO.elements);",hr?"":"if("+nn+")"+ur+".bindBuffer(34963,"+nn+".buffer.buffer);","}")),nn}(),Nr=br("primitive"),Kr=br("offset"),Vr=function(){var nn=Ir.count,hn=qe;return nn?((nn.contextDep&&yr.contextDynamic||nn.propDep)&&(hn=Qe),nn=nn.append(Me,hn)):nn=hn.def(Lr,".","count"),nn}();if(typeof Vr=="number"){if(Vr===0)return}else Qe("if(",Vr,"){"),Qe.exit("}");je&&(Xe=br("instances"),Je=Me.instancing);var an=Gr+".type",rn=Ir.elements&&et(Ir.elements)&&!Ir.vaoActive;je&&(typeof Xe!="number"||0<=Xe)?typeof Xe=="string"?(Qe("if(",Xe,">0){"),Ar(),Qe("}else if(",Xe,"<0){"),cr(),Qe("}")):Ar():cr()}function _r(Me,qe,Qe,yr,br){return br=(qe=tr()).proc("body",br),je&&(qe.instancing=br.def(qe.shared.extensions,".angle_instanced_arrays")),Me(qe,br,Qe,yr),qe.compile().body}function Sr(Me,qe,Qe,yr){ar(Me,qe),Qe.useVAO?Qe.drawVAO?qe(Me.shared.vao,".setVAO(",Qe.drawVAO.append(Me,qe),");"):qe(Me.shared.vao,".setVAO(",Me.shared.vao,".targetVAO);"):(qe(Me.shared.vao,".setVAO(null);"),mr(Me,qe,Qe,yr.attributes,function(){return!0})),Cr(Me,qe,Qe,yr.uniforms,function(){return!0},!1),Er(Me,qe,qe,Qe)}function Xr(Me,qe,Qe,yr){function br(){return!0}Me.batchId="a1",ar(Me,qe),mr(Me,qe,Qe,yr.attributes,br),Cr(Me,qe,Qe,yr.uniforms,br,!1),Er(Me,qe,qe,Qe)}function en(Me,qe,Qe,yr){function br(Lr){return Lr.contextDep&&cr||Lr.propDep}function Ar(Lr){return!br(Lr)}ar(Me,qe);var cr=Qe.contextDep,Xe=qe.def(),Je=qe.def();Me.shared.props=Je,Me.batchId=Xe;var lr=Me.scope(),ur=Me.scope();qe(lr.entry,"for(",Xe,"=0;",Xe,"<","a1",";++",Xe,"){",Je,"=","a0","[",Xe,"];",ur,"}",lr.exit),Qe.needsContext&&sr(Me,ur,Qe.context),Qe.needsFramebuffer&&$e(Me,ur,Qe.framebuffer),Ke(Me,ur,Qe.state,br),Qe.profile&&br(Qe.profile)&&fr(Me,ur,Qe,!1,!0),yr?(Qe.useVAO?Qe.drawVAO?br(Qe.drawVAO)?ur(Me.shared.vao,".setVAO(",Qe.drawVAO.append(Me,ur),");"):lr(Me.shared.vao,".setVAO(",Qe.drawVAO.append(Me,lr),");"):lr(Me.shared.vao,".setVAO(",Me.shared.vao,".targetVAO);"):(lr(Me.shared.vao,".setVAO(null);"),mr(Me,lr,Qe,yr.attributes,Ar),mr(Me,ur,Qe,yr.attributes,br)),Cr(Me,lr,Qe,yr.uniforms,Ar,!1),Cr(Me,ur,Qe,yr.uniforms,br,!0),Er(Me,lr,ur,Qe)):(qe=Me.global.def("{}"),yr=Qe.shader.progVar.append(Me,ur),Je=ur.def(yr,".id"),lr=ur.def(qe,"[",Je,"]"),ur(Me.shared.gl,".useProgram(",yr,".program);","if(!",lr,"){",lr,"=",qe,"[",Je,"]=",Me.link(function(Lr){return _r(Xr,Me,Qe,Lr,2)}),"(",yr,");}",lr,".call(this,a0[",Xe,"],",Xe,");"))}function sn(Me,qe){function Qe(Xe){var Je=qe.shader[Xe];Je&&(Je=Je.append(Me,yr),isNaN(Je)?yr.set(br.shader,"."+Xe,Je):yr.set(br.shader,"."+Xe,Me.link(Je,{stable:!0})))}var yr=Me.proc("scope",3);Me.batchId="a2";var br=Me.shared,Ar=br.current;if(sr(Me,yr,qe.context),qe.framebuffer&&qe.framebuffer.append(Me,yr),G(Object.keys(qe.state)).forEach(function(Xe){var Je=qe.state[Xe],lr=Je.append(Me,yr);w(lr)?lr.forEach(function(ur,Lr){isNaN(ur)?yr.set(Me.next[Xe],"["+Lr+"]",ur):yr.set(Me.next[Xe],"["+Lr+"]",Me.link(ur,{stable:!0}))}):et(Je)?yr.set(br.next,"."+Xe,Me.link(lr,{stable:!0})):yr.set(br.next,"."+Xe,lr)}),fr(Me,yr,qe,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Xe){var Je=qe.draw[Xe];Je&&(Je=Je.append(Me,yr),isNaN(Je)?yr.set(br.draw,"."+Xe,Je):yr.set(br.draw,"."+Xe,Me.link(Je),{stable:!0}))}),Object.keys(qe.uniforms).forEach(function(Xe){var Je=qe.uniforms[Xe].append(Me,yr);Array.isArray(Je)&&(Je="["+Je.map(function(lr){return isNaN(lr)?lr:Me.link(lr,{stable:!0})})+"]"),yr.set(br.uniforms,"["+Me.link(Yt.id(Xe),{stable:!0})+"]",Je)}),Object.keys(qe.attributes).forEach(function(Xe){var Je=qe.attributes[Xe].append(Me,yr),lr=Me.scopeAttrib(Xe);Object.keys(new qr).forEach(function(ur){yr.set(lr,"."+ur,Je[ur])})}),qe.scopeVAO){var cr=qe.scopeVAO.append(Me,yr);isNaN(cr)?yr.set(br.vao,".targetVAO",cr):yr.set(br.vao,".targetVAO",Me.link(cr,{stable:!0}))}Qe("vert"),Qe("frag"),0<Object.keys(qe.state).length&&(yr(Ar,".dirty=true;"),yr.exit(Ar,".dirty=true;")),yr("a1(",Me.shared.context,",a0,",Me.batchId,");")}function tn(Me,qe,Qe){var yr=qe.static[Qe];if(yr&&function(ur){if(typeof ur=="object"&&!w(ur)){for(var Lr=Object.keys(ur),Ir=0;Ir<Lr.length;++Ir)if(nt.isDynamic(ur[Lr[Ir]]))return!0;return!1}}(yr)){var br=Me.global,Ar=Object.keys(yr),cr=!1,Xe=!1,Je=!1,lr=Me.global.def("{}");Ar.forEach(function(ur){var Lr=yr[ur];if(nt.isDynamic(Lr))typeof Lr=="function"&&(Lr=yr[ur]=nt.unbox(Lr)),ur=X(Lr,null),cr=cr||ur.thisDep,Je=Je||ur.propDep,Xe=Xe||ur.contextDep;else{switch(br(lr,".",ur,"="),typeof Lr){case"number":br(Lr);break;case"string":br('"',Lr,'"');break;case"object":Array.isArray(Lr)&&br("[",Lr.join(),"]");break;default:br(Me.link(Lr))}br(";")}}),qe.dynamic[Qe]=new nt.DynamicVariable(4,{thisDep:cr,contextDep:Xe,propDep:Je,ref:lr,append:function(ur,Lr){Ar.forEach(function(Ir){var Gr=yr[Ir];nt.isDynamic(Gr)&&(Gr=ur.invoke(Lr,Gr),Lr(lr,".",Ir,"=",Gr,";"))})}}),delete qe.static[Qe]}}var qr=pe.Record,vn={add:32774,subtract:32778,"reverse subtract":32779};ne.ext_blend_minmax&&(vn.min=32775,vn.max=32776);var je=ne.angle_instanced_arrays,nr=ne.webgl_draw_buffers,hr=ne.oes_vertex_array_object,gr={dirty:!0,profile:be.profile},Mr={},Hr=[],Pr={},Dr={};De("dither",3024),De("blend.enable",3042),Ue("blend.color","blendColor",[0,0,0,0]),Ue("blend.equation","blendEquationSeparate",[32774,32774]),Ue("blend.func","blendFuncSeparate",[1,0,1,0]),De("depth.enable",2929,!0),Ue("depth.func","depthFunc",513),Ue("depth.range","depthRange",[0,1]),Ue("depth.mask","depthMask",!0),Ue("colorMask","colorMask",[!0,!0,!0,!0]),De("cull.enable",2884),Ue("cull.face","cullFace",1029),Ue("frontFace","frontFace",2305),Ue("lineWidth","lineWidth",1),De("polygonOffset.enable",32823),Ue("polygonOffset.offset","polygonOffset",[0,0]),De("sample.alpha",32926),De("sample.enable",32928),Ue("sample.coverage","sampleCoverage",[1,!1]),De("stencil.enable",2960),Ue("stencil.mask","stencilMask",-1),Ue("stencil.func","stencilFunc",[519,0,-1]),Ue("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Ue("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),De("scissor.enable",3089),Ue("scissor.box","scissor",[0,0,Gt.drawingBufferWidth,Gt.drawingBufferHeight]),Ue("viewport","viewport",[0,0,Gt.drawingBufferWidth,Gt.drawingBufferHeight]);var Qr={gl:Gt,context:we,strings:Yt,next:Mr,current:gr,draw:ce,elements:Nt,buffer:Pt,shader:me,attributes:pe.state,vao:pe,uniforms:ge,framebuffer:te,extensions:ne,timer:ue,isBufferArgs:z},He={primTypes:Lt,compareFuncs:Ie,blendFuncs:Ae,blendEquations:vn,stencilOps:Te,glTypes:vt,orientationType:Vt};nr&&(He.backBuffer=[1029],He.drawBuffer=h(re.maxDrawbuffers,function(Me){return Me===0?[0]:h(Me,function(qe){return 36064+qe})}));var wr=0;return{next:Mr,current:gr,procs:function(){var Me=tr(),qe=Me.proc("poll"),Qe=Me.proc("refresh"),yr=Me.block();qe(yr),Qe(yr);var br,Ar=(Je=Me.shared).gl,cr=Je.next,Xe=Je.current;yr(Xe,".dirty=false;"),$e(Me,qe),$e(Me,Qe,null,!0),je&&(br=Me.link(je)),ne.oes_vertex_array_object&&Qe(Me.link(ne.oes_vertex_array_object),".bindVertexArrayOES(null);");var Je=Qe.def(Je.attributes),lr=Qe.def(0),ur=Me.cond(lr,".buffer");ur.then(Ar,".enableVertexAttribArray(i);",Ar,".bindBuffer(",34962,",",lr,".buffer.buffer);",Ar,".vertexAttribPointer(i,",lr,".size,",lr,".type,",lr,".normalized,",lr,".stride,",lr,".offset);").else(Ar,".disableVertexAttribArray(i);",Ar,".vertexAttrib4f(i,",lr,".x,",lr,".y,",lr,".z,",lr,".w);",lr,".buffer=null;");var Lr=Me.link(re.maxAttributes,{stable:!0});return Qe("for(var i=0;i<",Lr,";++i){",lr,"=",Je,"[i];",ur,"}"),je&&Qe("for(var i=0;i<",Lr,";++i){",br,".vertexAttribDivisorANGLE(i,",Je,"[i].divisor);","}"),Qe(Me.shared.vao,".currentVAO=null;",Me.shared.vao,".setVAO(",Me.shared.vao,".targetVAO);"),Object.keys(Pr).forEach(function(Ir){var Gr=Pr[Ir],Nr=yr.def(cr,".",Ir),Kr=Me.block();Kr("if(",Nr,"){",Ar,".enable(",Gr,")}else{",Ar,".disable(",Gr,")}",Xe,".",Ir,"=",Nr,";"),Qe(Kr),qe("if(",Nr,"!==",Xe,".",Ir,"){",Kr,"}")}),Object.keys(Dr).forEach(function(Ir){var Gr,Nr,Kr=Dr[Ir],Vr=gr[Ir],an=Me.block();an(Ar,".",Kr,"("),w(Vr)?(Kr=Vr.length,Gr=Me.global.def(cr,".",Ir),Nr=Me.global.def(Xe,".",Ir),an(h(Kr,function(rn){return Gr+"["+rn+"]"}),");",h(Kr,function(rn){return Nr+"["+rn+"]="+Gr+"["+rn+"];"}).join("")),qe("if(",h(Kr,function(rn){return Gr+"["+rn+"]!=="+Nr+"["+rn+"]"}).join("||"),"){",an,"}")):(Gr=yr.def(cr,".",Ir),Nr=yr.def(Xe,".",Ir),an(Gr,");",Xe,".",Ir,"=",Gr,";"),qe("if(",Gr,"!==",Nr,"){",an,"}")),Qe(an)}),Me.compile()}(),compile:function(Me,qe,Qe,yr,br){var Ar=tr();Ar.stats=Ar.link(br),Object.keys(qe.static).forEach(function(Xe){tn(Ar,qe,Xe)}),ke.forEach(function(Xe){tn(Ar,Me,Xe)});var cr=xr(Me,qe,Qe,yr);return cr.shader.program&&(cr.shader.program.attributes.sort(function(Xe,Je){return Xe.name<Je.name?-1:1}),cr.shader.program.uniforms.sort(function(Xe,Je){return Xe.name<Je.name?-1:1})),function(Xe,Je){var lr=Xe.proc("draw",1);ar(Xe,lr),sr(Xe,lr,Je.context),$e(Xe,lr,Je.framebuffer),ir(Xe,lr,Je),Ke(Xe,lr,Je.state),fr(Xe,lr,Je,!1,!0);var ur=Je.shader.progVar.append(Xe,lr);if(lr(Xe.shared.gl,".useProgram(",ur,".program);"),Je.shader.program)Sr(Xe,lr,Je,Je.shader.program);else{lr(Xe.shared.vao,".setVAO(null);");var Lr=Xe.global.def("{}"),Ir=lr.def(ur,".id"),Gr=lr.def(Lr,"[",Ir,"]");lr(Xe.cond(Gr).then(Gr,".call(this,a0);").else(Gr,"=",Lr,"[",Ir,"]=",Xe.link(function(Nr){return _r(Sr,Xe,Je,Nr,1)}),"(",ur,");",Gr,".call(this,a0);"))}0<Object.keys(Je.state).length&&lr(Xe.shared.current,".dirty=true;"),Xe.shared.vao&&lr(Xe.shared.vao,".setVAO(null);")}(Ar,cr),sn(Ar,cr),function(Xe,Je){function lr(Vr){return Vr.contextDep&&Lr||Vr.propDep}var ur=Xe.proc("batch",2);Xe.batchId="0",ar(Xe,ur);var Lr=!1,Ir=!0;Object.keys(Je.context).forEach(function(Vr){Lr=Lr||Je.context[Vr].propDep}),Lr||(sr(Xe,ur,Je.context),Ir=!1);var Gr=!1;if((Nr=Je.framebuffer)?(Nr.propDep?Lr=Gr=!0:Nr.contextDep&&Lr&&(Gr=!0),Gr||$e(Xe,ur,Nr)):$e(Xe,ur,null),Je.state.viewport&&Je.state.viewport.propDep&&(Lr=!0),ir(Xe,ur,Je),Ke(Xe,ur,Je.state,function(Vr){return!lr(Vr)}),Je.profile&&lr(Je.profile)||fr(Xe,ur,Je,!1,"a1"),Je.contextDep=Lr,Je.needsContext=Ir,Je.needsFramebuffer=Gr,(Ir=Je.shader.progVar).contextDep&&Lr||Ir.propDep)en(Xe,ur,Je,null);else if(Ir=Ir.append(Xe,ur),ur(Xe.shared.gl,".useProgram(",Ir,".program);"),Je.shader.program)en(Xe,ur,Je,Je.shader.program);else{ur(Xe.shared.vao,".setVAO(null);");var Nr=Xe.global.def("{}"),Kr=(Gr=ur.def(Ir,".id"),ur.def(Nr,"[",Gr,"]"));ur(Xe.cond(Kr).then(Kr,".call(this,a0,a1);").else(Kr,"=",Nr,"[",Gr,"]=",Xe.link(function(Vr){return _r(en,Xe,Je,Vr,2)}),"(",Ir,");",Kr,".call(this,a0,a1);"))}0<Object.keys(Je.state).length&&ur(Xe.shared.current,".dirty=true;"),Xe.shared.vao&&ur(Xe.shared.vao,".setVAO(null);")}(Ar,cr),tt(Ar.compile(),{destroy:function(){cr.shader.program.destroy()}})}}}function Z(Gt,Yt){for(var ne=0;ne<Gt.length;++ne)if(Gt[ne]===Yt)return ne;return-1}var tt=function(Gt,Yt){for(var ne=Object.keys(Yt),re=0;re<ne.length;++re)Gt[ne[re]]=Yt[ne[re]];return Gt},rt=0,nt={DynamicVariable:I,define:function(Gt,Yt){return new I(Gt,T(Yt+""))},isDynamic:function(Gt){return typeof Gt=="function"&&!Gt._reglType||Gt instanceof I},unbox:function Gt(Yt,ne){return typeof Yt=="function"?new I(0,Yt):typeof Yt=="number"||typeof Yt=="boolean"?new I(5,Yt):Array.isArray(Yt)?new I(6,Yt.map(function(re,Pt){return Gt(re)})):Yt instanceof I?Yt:void 0},accessor:T},ot={next:typeof requestAnimationFrame=="function"?function(Gt){return requestAnimationFrame(Gt)}:function(Gt){return setTimeout(Gt,16)},cancel:typeof cancelAnimationFrame=="function"?function(Gt){return cancelAnimationFrame(Gt)}:clearTimeout},ct=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},pt=e();pt.zero=e();var gt=function(Gt,Yt){var ne=1;Yt.ext_texture_filter_anisotropic&&(ne=Gt.getParameter(34047));var re=1,Pt=1;Yt.webgl_draw_buffers&&(re=Gt.getParameter(34852),Pt=Gt.getParameter(36063));var Nt=!!Yt.oes_texture_float;if(Nt){Nt=Gt.createTexture(),Gt.bindTexture(3553,Nt),Gt.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var ee=Gt.createFramebuffer();if(Gt.bindFramebuffer(36160,ee),Gt.framebufferTexture2D(36160,36064,3553,Nt,0),Gt.bindTexture(3553,null),Gt.checkFramebufferStatus(36160)!==36053)Nt=!1;else{Gt.viewport(0,0,1,1),Gt.clearColor(1,0,0,1),Gt.clear(16384);var te=pt.allocType(5126,4);Gt.readPixels(0,0,1,1,6408,5126,te),Gt.getError()?Nt=!1:(Gt.deleteFramebuffer(ee),Gt.deleteTexture(Nt),Nt=te[0]===1),pt.freeType(te)}}return te=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(te=Gt.createTexture(),ee=pt.allocType(5121,36),Gt.activeTexture(33984),Gt.bindTexture(34067,te),Gt.texImage2D(34069,0,6408,3,3,0,6408,5121,ee),pt.freeType(ee),Gt.bindTexture(34067,null),Gt.deleteTexture(te),te=!Gt.getError()),{colorBits:[Gt.getParameter(3410),Gt.getParameter(3411),Gt.getParameter(3412),Gt.getParameter(3413)],depthBits:Gt.getParameter(3414),stencilBits:Gt.getParameter(3415),subpixelBits:Gt.getParameter(3408),extensions:Object.keys(Yt).filter(function(ge){return!!Yt[ge]}),maxAnisotropic:ne,maxDrawbuffers:re,maxColorAttachments:Pt,pointSizeDims:Gt.getParameter(33901),lineWidthDims:Gt.getParameter(33902),maxViewportDims:Gt.getParameter(3386),maxCombinedTextureUnits:Gt.getParameter(35661),maxCubeMapSize:Gt.getParameter(34076),maxRenderbufferSize:Gt.getParameter(34024),maxTextureUnits:Gt.getParameter(34930),maxTextureSize:Gt.getParameter(3379),maxAttributes:Gt.getParameter(34921),maxVertexUniforms:Gt.getParameter(36347),maxVertexTextureUnits:Gt.getParameter(35660),maxVaryingVectors:Gt.getParameter(36348),maxFragmentUniforms:Gt.getParameter(36349),glsl:Gt.getParameter(35724),renderer:Gt.getParameter(7937),vendor:Gt.getParameter(7936),version:Gt.getParameter(7938),readFloat:Nt,npotTextureCube:te}},kt=function(Gt){return Gt instanceof Uint8Array||Gt instanceof Uint16Array||Gt instanceof Uint32Array||Gt instanceof Int8Array||Gt instanceof Int16Array||Gt instanceof Int32Array||Gt instanceof Float32Array||Gt instanceof Float64Array||Gt instanceof Uint8ClampedArray},yt=function(Gt){return Object.keys(Gt).map(function(Yt){return Gt[Yt]})},mt={shape:function(Gt){for(var Yt=[];Gt.length;Gt=Gt[0])Yt.push(Gt.length);return Yt},flatten:function(Gt,Yt,ne,re){var Pt=1;if(Yt.length)for(var Nt=0;Nt<Yt.length;++Nt)Pt*=Yt[Nt];else Pt=0;switch(ne=re||pt.allocType(ne,Pt),Yt.length){case 0:break;case 1:for(re=Yt[0],Yt=0;Yt<re;++Yt)ne[Yt]=Gt[Yt];break;case 2:for(re=Yt[0],Yt=Yt[1],Nt=Pt=0;Nt<re;++Nt)for(var ee=Gt[Nt],te=0;te<Yt;++te)ne[Pt++]=ee[te];break;case 3:n(Gt,Yt[0],Yt[1],Yt[2],ne,0);break;default:a(Gt,Yt,0,ne,0)}return ne}},Ot={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},vt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},xt={dynamic:35048,stream:35040,static:35044},st=mt.flatten,at=mt.shape,ht=[];ht[5120]=1,ht[5122]=2,ht[5124]=4,ht[5121]=1,ht[5123]=2,ht[5125]=4,ht[5126]=4;var Lt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Mt=new Float32Array(1),_t=new Uint32Array(Mt.buffer),St=[9984,9986,9985,9987],Dt=[0,6409,6410,6407,6408],ut={};ut[6409]=ut[6406]=ut[6402]=1,ut[34041]=ut[6410]=2,ut[6407]=ut[35904]=3,ut[6408]=ut[35906]=4;var Tt=v("HTMLCanvasElement"),bt=v("OffscreenCanvas"),It=v("CanvasRenderingContext2D"),zt=v("ImageBitmap"),Ft=v("HTMLImageElement"),$t=v("HTMLVideoElement"),Wt=Object.keys(Ot).concat([Tt,bt,It,zt,Ft,$t]),Xt=[];Xt[5121]=1,Xt[5126]=4,Xt[36193]=2,Xt[5123]=2,Xt[5125]=4;var ae=[];ae[32854]=2,ae[32855]=2,ae[36194]=2,ae[34041]=4,ae[33776]=.5,ae[33777]=.5,ae[33778]=1,ae[33779]=1,ae[35986]=.5,ae[35987]=1,ae[34798]=1,ae[35840]=.5,ae[35841]=.25,ae[35842]=.5,ae[35843]=.25,ae[36196]=.5;var Qt=[];Qt[32854]=2,Qt[32855]=2,Qt[36194]=2,Qt[33189]=2,Qt[36168]=1,Qt[34041]=4,Qt[35907]=4,Qt[34836]=16,Qt[34842]=8,Qt[34843]=6;var de=function(Gt,Yt,ne,re,Pt){function Nt(ce){this.id=pe++,this.refCount=1,this.renderbuffer=ce,this.format=32854,this.height=this.width=0,Pt.profile&&(this.stats={size:0})}function ee(ce){var we=ce.renderbuffer;Gt.bindRenderbuffer(36161,null),Gt.deleteRenderbuffer(we),ce.renderbuffer=null,ce.refCount=0,delete me[ce.id],re.renderbufferCount--}var te={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Yt.ext_srgb&&(te.srgba=35907),Yt.ext_color_buffer_half_float&&(te.rgba16f=34842,te.rgb16f=34843),Yt.webgl_color_buffer_float&&(te.rgba32f=34836);var ge=[];Object.keys(te).forEach(function(ce){ge[te[ce]]=ce});var pe=0,me={};return Nt.prototype.decRef=function(){0>=--this.refCount&&ee(this)},Pt.profile&&(re.getTotalRenderbufferSize=function(){var ce=0;return Object.keys(me).forEach(function(we){ce+=me[we].stats.size}),ce}),{create:function(ce,we){function ue(be,Pe){var De=0,Ue=0,tr=32854;if(typeof be=="object"&&be?("shape"in be?(De=0|(Ue=be.shape)[0],Ue=0|Ue[1]):("radius"in be&&(De=Ue=0|be.radius),"width"in be&&(De=0|be.width),"height"in be&&(Ue=0|be.height)),"format"in be&&(tr=te[be.format])):typeof be=="number"?(De=0|be,Ue=typeof Pe=="number"?0|Pe:De):be||(De=Ue=1),De!==he.width||Ue!==he.height||tr!==he.format)return ue.width=he.width=De,ue.height=he.height=Ue,he.format=tr,Gt.bindRenderbuffer(36161,he.renderbuffer),Gt.renderbufferStorage(36161,tr,De,Ue),Pt.profile&&(he.stats.size=Qt[he.format]*he.width*he.height),ue.format=ge[he.format],ue}var he=new Nt(Gt.createRenderbuffer());return me[he.id]=he,re.renderbufferCount++,ue(ce,we),ue.resize=function(be,Pe){var De=0|be,Ue=0|Pe||De;return De===he.width&&Ue===he.height||(ue.width=he.width=De,ue.height=he.height=Ue,Gt.bindRenderbuffer(36161,he.renderbuffer),Gt.renderbufferStorage(36161,he.format,De,Ue),Pt.profile&&(he.stats.size=Qt[he.format]*he.width*he.height)),ue},ue._reglType="renderbuffer",ue._renderbuffer=he,Pt.profile&&(ue.stats=he.stats),ue.destroy=function(){he.decRef()},ue},clear:function(){yt(me).forEach(ee)},restore:function(){yt(me).forEach(function(ce){ce.renderbuffer=Gt.createRenderbuffer(),Gt.bindRenderbuffer(36161,ce.renderbuffer),Gt.renderbufferStorage(36161,ce.format,ce.width,ce.height)}),Gt.bindRenderbuffer(36161,null)}}},ye=[];ye[6408]=4,ye[6407]=3;var ve=[];ve[5121]=1,ve[5126]=4,ve[36193]=2;var ie=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],se=["x","y","z","w"],ke="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ae={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ie={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Te={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Vt={cw:2304,ccw:2305},Zt=new V(!1,!1,!1,function(){});return function(Gt){function Yt(){if(Xr.length===0)Ge&&Ge.update(),qr=null;else{qr=ot.next(Yt),me();for(var je=Xr.length-1;0<=je;--je){var nr=Xr[je];nr&&nr(xr,null,0)}ue.flush(),Ge&&Ge.update()}}function ne(){!qr&&0<Xr.length&&(qr=ot.next(Yt))}function re(){qr&&(ot.cancel(Yt),qr=null)}function Pt(je){je.preventDefault(),re(),en.forEach(function(nr){nr()})}function Nt(je){ue.getError(),be.restore(),ar.restore(),$e.restore(),fr.restore(),mr.restore(),Cr.restore(),Ke.restore(),Ge&&Ge.restore(),Er.procs.refresh(),ne(),sn.forEach(function(nr){nr()})}function ee(je){function nr(Me,qe){var Qe={},yr={};return Object.keys(Me).forEach(function(br){var Ar=Me[br];if(nt.isDynamic(Ar))yr[br]=nt.unbox(Ar,br);else{if(qe&&Array.isArray(Ar)){for(var cr=0;cr<Ar.length;++cr)if(nt.isDynamic(Ar[cr]))return void(yr[br]=nt.unbox(Ar,br))}Qe[br]=Ar}}),{dynamic:yr,static:Qe}}var hr=nr(je.context||{},!0),gr=nr(je.uniforms||{},!0),Mr=nr(je.attributes||{},!1);je=nr(function(Me){function qe(yr){if(yr in Qe){var br=Qe[yr];delete Qe[yr],Object.keys(br).forEach(function(Ar){Qe[yr+"."+Ar]=br[Ar]})}}var Qe=tt({},Me);return delete Qe.uniforms,delete Qe.attributes,delete Qe.context,delete Qe.vao,"stencil"in Qe&&Qe.stencil.op&&(Qe.stencil.opBack=Qe.stencil.opFront=Qe.stencil.op,delete Qe.stencil.op),qe("blend"),qe("depth"),qe("cull"),qe("stencil"),qe("polygonOffset"),qe("scissor"),qe("sample"),"vao"in Me&&(Qe.vao=Me.vao),Qe}(je),!1);var Hr={gpuTime:0,cpuTime:0,count:0},Pr=Er.compile(je,Mr,gr,hr,Hr),Dr=Pr.draw,Qr=Pr.batch,He=Pr.scope,wr=[];return tt(function(Me,qe){var Qe;if(typeof Me=="function")return He.call(this,null,Me,0);if(typeof qe=="function")if(typeof Me=="number")for(Qe=0;Qe<Me;++Qe)He.call(this,null,qe,Qe);else{if(!Array.isArray(Me))return He.call(this,Me,qe,0);for(Qe=0;Qe<Me.length;++Qe)He.call(this,Me[Qe],qe,Qe)}else if(typeof Me=="number"){if(0<Me)return Qr.call(this,function(yr){for(;wr.length<yr;)wr.push(null);return wr}(0|Me),0|Me)}else{if(!Array.isArray(Me))return Dr.call(this,Me);if(Me.length)return Qr.call(this,Me,Me.length)}},{stats:Hr,destroy:function(){Pr.destroy()}})}function te(je,nr){var hr=0;Er.procs.poll();var gr=nr.color;gr&&(ue.clearColor(+gr[0]||0,+gr[1]||0,+gr[2]||0,+gr[3]||0),hr|=16384),"depth"in nr&&(ue.clearDepth(+nr.depth),hr|=256),"stencil"in nr&&(ue.clearStencil(0|nr.stencil),hr|=1024),ue.clear(hr)}function ge(je){return Xr.push(je),ne(),{cancel:function(){var nr=Z(Xr,je);Xr[nr]=function hr(){var gr=Z(Xr,hr);Xr[gr]=Xr[Xr.length-1],--Xr.length,0>=Xr.length&&re()}}}}function pe(){var je=_r.viewport,nr=_r.scissor_box;je[0]=je[1]=nr[0]=nr[1]=0,xr.viewportWidth=xr.framebufferWidth=xr.drawingBufferWidth=je[2]=nr[2]=ue.drawingBufferWidth,xr.viewportHeight=xr.framebufferHeight=xr.drawingBufferHeight=je[3]=nr[3]=ue.drawingBufferHeight}function me(){xr.tick+=1,xr.time=we(),pe(),Er.procs.poll()}function ce(){fr.refresh(),pe(),Er.procs.refresh(),Ge&&Ge.update()}function we(){return(ct()-Ze)/1e3}if(!(Gt=m(Gt)))return null;var ue=Gt.gl,he=ue.getContextAttributes();ue.isContextLost();var be=function(je,nr){function hr(Pr){var Dr;Pr=Pr.toLowerCase();try{Dr=gr[Pr]=je.getExtension(Pr)}catch{}return!!Dr}for(var gr={},Mr=0;Mr<nr.extensions.length;++Mr){var Hr=nr.extensions[Mr];if(!hr(Hr))return nr.onDestroy(),nr.onDone('"'+Hr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return nr.optionalExtensions.forEach(hr),{extensions:gr,restore:function(){Object.keys(gr).forEach(function(Pr){if(gr[Pr]&&!hr(Pr))throw Error("(regl): error restoring extension "+Pr)})}}}(ue,Gt);if(!be)return null;var Pe=function(){var je={"":0},nr=[""];return{id:function(hr){var gr=je[hr];return gr||(gr=je[hr]=nr.length,nr.push(hr),gr)},str:function(hr){return nr[hr]}}}(),De={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Ue=Gt.cachedCode||{},tr=be.extensions,Ge=function(je,nr){function hr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function gr(wr,Me,qe){var Qe=Pr.pop()||new hr;Qe.startQueryIndex=wr,Qe.endQueryIndex=Me,Qe.sum=0,Qe.stats=qe,Dr.push(Qe)}if(!nr.ext_disjoint_timer_query)return null;var Mr=[],Hr=[],Pr=[],Dr=[],Qr=[],He=[];return{beginQuery:function(wr){var Me=Mr.pop()||nr.ext_disjoint_timer_query.createQueryEXT();nr.ext_disjoint_timer_query.beginQueryEXT(35007,Me),Hr.push(Me),gr(Hr.length-1,Hr.length,wr)},endQuery:function(){nr.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:gr,update:function(){var wr,Me;if((wr=Hr.length)!==0){He.length=Math.max(He.length,wr+1),Qr.length=Math.max(Qr.length,wr+1),Qr[0]=0;var qe=He[0]=0;for(Me=wr=0;Me<Hr.length;++Me){var Qe=Hr[Me];nr.ext_disjoint_timer_query.getQueryObjectEXT(Qe,34919)?(qe+=nr.ext_disjoint_timer_query.getQueryObjectEXT(Qe,34918),Mr.push(Qe)):Hr[wr++]=Qe,Qr[Me+1]=qe,He[Me+1]=wr}for(Hr.length=wr,Me=wr=0;Me<Dr.length;++Me){var yr=(qe=Dr[Me]).startQueryIndex;Qe=qe.endQueryIndex,qe.sum+=Qr[Qe]-Qr[yr],yr=He[yr],(Qe=He[Qe])===yr?(qe.stats.gpuTime+=qe.sum/1e6,Pr.push(qe)):(qe.startQueryIndex=yr,qe.endQueryIndex=Qe,Dr[wr++]=qe)}Dr.length=wr}},getNumPendingQueries:function(){return Hr.length},clear:function(){Mr.push.apply(Mr,Hr);for(var wr=0;wr<Mr.length;wr++)nr.ext_disjoint_timer_query.deleteQueryEXT(Mr[wr]);Hr.length=0,Mr.length=0},restore:function(){Hr.length=0,Mr.length=0}}}(0,tr),Ze=ct(),We=ue.drawingBufferWidth,pr=ue.drawingBufferHeight,xr={tick:0,time:0,viewportWidth:We,viewportHeight:pr,framebufferWidth:We,framebufferHeight:pr,drawingBufferWidth:We,drawingBufferHeight:pr,pixelRatio:Gt.pixelRatio},sr=(We={elements:null,primitive:4,count:-1,offset:0,instances:-1},gt(ue,tr)),$e=u(ue,De,Gt,function(je){return Ke.destroyBuffer(je)}),ir=f(ue,tr,$e,De),Ke=E(ue,tr,sr,De,$e,ir,We),ar=S(ue,Pe,De,Gt),fr=A(ue,tr,sr,function(){Er.procs.poll()},xr,De,Gt),mr=de(ue,tr,0,De,Gt),Cr=M(ue,tr,sr,fr,mr,De),Er=Y(ue,Pe,tr,sr,$e,ir,0,Cr,{},Ke,ar,We,xr,Ge,Ue,Gt),_r=(Pe=O(ue,Cr,Er.procs.poll,xr),Er.next),Sr=ue.canvas,Xr=[],en=[],sn=[],tn=[Gt.onDestroy],qr=null;Sr&&(Sr.addEventListener("webglcontextlost",Pt,!1),Sr.addEventListener("webglcontextrestored",Nt,!1));var vn=Cr.setFBO=ee({framebuffer:nt.define.call(null,1,"framebuffer")});return ce(),he=tt(ee,{clear:function(je){if("framebuffer"in je)if(je.framebuffer&&je.framebuffer_reglType==="framebufferCube")for(var nr=0;6>nr;++nr)vn(tt({framebuffer:je.framebuffer.faces[nr]},je),te);else vn(je,te);else te(0,je)},prop:nt.define.bind(null,1),context:nt.define.bind(null,2),this:nt.define.bind(null,3),draw:ee({}),buffer:function(je){return $e.create(je,34962,!1,!1)},elements:function(je){return ir.create(je,!1)},texture:fr.create2D,cube:fr.createCube,renderbuffer:mr.create,framebuffer:Cr.create,framebufferCube:Cr.createCube,vao:Ke.createVAO,attributes:he,frame:ge,on:function(je,nr){var hr;switch(je){case"frame":return ge(nr);case"lost":hr=en;break;case"restore":hr=sn;break;case"destroy":hr=tn}return hr.push(nr),{cancel:function(){for(var gr=0;gr<hr.length;++gr)if(hr[gr]===nr){hr[gr]=hr[hr.length-1],hr.pop();break}}}},limits:sr,hasExtension:function(je){return 0<=sr.extensions.indexOf(je.toLowerCase())},read:Pe,destroy:function(){Xr.length=0,re(),Sr&&(Sr.removeEventListener("webglcontextlost",Pt),Sr.removeEventListener("webglcontextrestored",Nt)),ar.clear(),Cr.clear(),mr.clear(),Ke.clear(),fr.clear(),ir.clear(),$e.clear(),Ge&&Ge.clear(),tn.forEach(function(je){je()})},_gl:ue,_refresh:ce,poll:function(){me(),Ge&&Ge.update()},now:we,stats:De,getCachedCode:function(){return Ue},preloadCachedCode:function(je){Object.entries(je).forEach(function(nr){Ue[nr[0]]=nr[1]})}}),Gt.onDone(null,he),he}}()},71665:function(W,I,o){var T=o(12856),k=T.Buffer;function r(h,s){for(var e in h)s[e]=h[e]}function m(h,s,e){return k(h,s,e)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?W.exports=T:(r(T,I),I.Buffer=m),m.prototype=Object.create(k.prototype),r(k,m),m.from=function(h,s,e){if(typeof h=="number")throw new TypeError("Argument must not be a number");return k(h,s,e)},m.alloc=function(h,s,e){if(typeof h!="number")throw new TypeError("Argument must be a number");var t=k(h);return s!==void 0?typeof e=="string"?t.fill(s,e):t.fill(s):t.fill(0),t},m.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return k(h)},m.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return T.SlowBuffer(h)}},21630:function(W,I,o){W.exports=k;var T=o(15398).EventEmitter;function k(){T.call(this)}o(42018)(k,T),k.Readable=o(40410),k.Writable=o(37493),k.Duplex=o(37865),k.Transform=o(74308),k.PassThrough=o(66897),k.finished=o(12726),k.pipeline=o(10168),k.Stream=k,k.prototype.pipe=function(r,m){var h=this;function s(l){r.writable&&r.write(l)===!1&&h.pause&&h.pause()}function e(){h.readable&&h.resume&&h.resume()}h.on("data",s),r.on("drain",e),r._isStdio||m&&m.end===!1||(h.on("end",n),h.on("close",a));var t=!1;function n(){t||(t=!0,r.end())}function a(){t||(t=!0,typeof r.destroy=="function"&&r.destroy())}function i(l){if(c(),T.listenerCount(this,"error")===0)throw l}function c(){h.removeListener("data",s),r.removeListener("drain",e),h.removeListener("end",n),h.removeListener("close",a),h.removeListener("error",i),r.removeListener("error",i),h.removeListener("end",c),h.removeListener("close",c),r.removeListener("close",c)}return h.on("error",i),r.on("error",i),h.on("end",c),h.on("close",c),r.on("close",c),r.emit("pipe",h),r}},74322:function(W){var I={};function o(k,r,m){m||(m=Error);var h=function(s){var e,t;function n(a,i,c){return s.call(this,function(l,u,f){return typeof r=="string"?r:r(l,u,f)}(a,i,c))||this}return t=s,(e=n).prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t,n}(m);h.prototype.name=m.name,h.prototype.code=k,I[k]=h}function T(k,r){if(Array.isArray(k)){var m=k.length;return k=k.map(function(h){return String(h)}),m>2?"one of ".concat(r," ").concat(k.slice(0,m-1).join(", "),", or ")+k[m-1]:m===2?"one of ".concat(r," ").concat(k[0]," or ").concat(k[1]):"of ".concat(r," ").concat(k[0])}return"of ".concat(r," ").concat(String(k))}o("ERR_INVALID_OPT_VALUE",function(k,r){return'The value "'+r+'" is invalid for option "'+k+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(k,r,m){var h,s,e,t,n;if(typeof r=="string"&&(s="not ",r.substr(0,4)===s)?(h="must not be",r=r.replace(/^not /,"")):h="must be",function(i,c,l){return(l===void 0||l>i.length)&&(l=i.length),i.substring(l-9,l)===c}(k," argument"))e="The ".concat(k," ").concat(h," ").concat(T(r,"type"));else{var a=(typeof n!="number"&&(n=0),n+1>(t=k).length||t.indexOf(".",n)===-1?"argument":"property");e='The "'.concat(k,'" ').concat(a," ").concat(h," ").concat(T(r,"type"))}return e+". Received type ".concat(typeof m)},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),W.exports.q=I},37865:function(W,I,o){var T=o(90386),k=Object.keys||function(i){var c=[];for(var l in i)c.push(l);return c};W.exports=t;var r=o(40410),m=o(37493);o(42018)(t,r);for(var h=k(m.prototype),s=0;s<h.length;s++){var e=h[s];t.prototype[e]||(t.prototype[e]=m.prototype[e])}function t(i){if(!(this instanceof t))return new t(i);r.call(this,i),m.call(this,i),this.allowHalfOpen=!0,i&&(i.readable===!1&&(this.readable=!1),i.writable===!1&&(this.writable=!1),i.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}function n(){this._writableState.ended||T.nextTick(a,this)}function a(i){i.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(i){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=i,this._writableState.destroyed=i)}})},66897:function(W,I,o){W.exports=k;var T=o(74308);function k(r){if(!(this instanceof k))return new k(r);T.call(this,r)}o(42018)(k,T),k.prototype._transform=function(r,m,h){h(null,r)}},40410:function(W,I,o){var T,k=o(90386);W.exports=_,_.ReadableState=x,o(15398).EventEmitter;var r,m=function(J,X){return J.listeners(X).length},h=o(71405),s=o(12856).Buffer,e=o.g.Uint8Array||function(){},t=o(40964);r=t&&t.debuglog?t.debuglog("stream"):function(){};var n,a,i,c=o(31125),l=o(65756),u=o(56306).getHighWaterMark,f=o(74322).q,d=f.ERR_INVALID_ARG_TYPE,w=f.ERR_STREAM_PUSH_AFTER_EOF,v=f.ERR_METHOD_NOT_IMPLEMENTED,p=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;o(42018)(_,h);var y=l.errorOrDestroy,b=["error","close","destroy","pause","resume"];function x(J,X,Y){T=T||o(37865),J=J||{},typeof Y!="boolean"&&(Y=X instanceof T),this.objectMode=!!J.objectMode,Y&&(this.objectMode=this.objectMode||!!J.readableObjectMode),this.highWaterMark=u(this,J,"readableHighWaterMark",Y),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=J.emitClose!==!1,this.autoDestroy=!!J.autoDestroy,this.destroyed=!1,this.defaultEncoding=J.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,J.encoding&&(n||(n=o(68019).s),this.decoder=new n(J.encoding),this.encoding=J.encoding)}function _(J){if(T=T||o(37865),!(this instanceof _))return new _(J);var X=this instanceof T;this._readableState=new x(J,this,X),this.readable=!0,J&&(typeof J.read=="function"&&(this._read=J.read),typeof J.destroy=="function"&&(this._destroy=J.destroy)),h.call(this)}function g(J,X,Y,Z,tt){r("readableAddChunk",X);var rt,nt=J._readableState;if(X===null)nt.reading=!1,function(ot,ct){if(r("onEofChunk"),!ct.ended){if(ct.decoder){var pt=ct.decoder.end();pt&&pt.length&&(ct.buffer.push(pt),ct.length+=ct.objectMode?1:pt.length)}ct.ended=!0,ct.sync?E(ot):(ct.needReadable=!1,ct.emittedReadable||(ct.emittedReadable=!0,S(ot)))}}(J,nt);else if(tt||(rt=function(ot,ct){var pt,gt;return gt=ct,s.isBuffer(gt)||gt instanceof e||typeof ct=="string"||ct===void 0||ot.objectMode||(pt=new d("chunk",["string","Buffer","Uint8Array"],ct)),pt}(nt,X)),rt)y(J,rt);else if(nt.objectMode||X&&X.length>0)if(typeof X=="string"||nt.objectMode||Object.getPrototypeOf(X)===s.prototype||(X=function(ot){return s.from(ot)}(X)),Z)nt.endEmitted?y(J,new p):A(J,nt,X,!0);else if(nt.ended)y(J,new w);else{if(nt.destroyed)return!1;nt.reading=!1,nt.decoder&&!Y?(X=nt.decoder.write(X),nt.objectMode||X.length!==0?A(J,nt,X,!1):O(J,nt)):A(J,nt,X,!1)}else Z||(nt.reading=!1,O(J,nt));return!nt.ended&&(nt.length<nt.highWaterMark||nt.length===0)}function A(J,X,Y,Z){X.flowing&&X.length===0&&!X.sync?(X.awaitDrain=0,J.emit("data",Y)):(X.length+=X.objectMode?1:Y.length,Z?X.buffer.unshift(Y):X.buffer.push(Y),X.needReadable&&E(J)),O(J,X)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(J){this._readableState&&(this._readableState.destroyed=J)}}),_.prototype.destroy=l.destroy,_.prototype._undestroy=l.undestroy,_.prototype._destroy=function(J,X){X(J)},_.prototype.push=function(J,X){var Y,Z=this._readableState;return Z.objectMode?Y=!0:typeof J=="string"&&((X=X||Z.defaultEncoding)!==Z.encoding&&(J=s.from(J,X),X=""),Y=!0),g(this,J,X,!1,Y)},_.prototype.unshift=function(J){return g(this,J,null,!0,!1)},_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function(J){n||(n=o(68019).s);var X=new n(J);this._readableState.decoder=X,this._readableState.encoding=this._readableState.decoder.encoding;for(var Y=this._readableState.buffer.head,Z="";Y!==null;)Z+=X.write(Y.data),Y=Y.next;return this._readableState.buffer.clear(),Z!==""&&this._readableState.buffer.push(Z),this._readableState.length=Z.length,this};var M=1073741824;function L(J,X){return J<=0||X.length===0&&X.ended?0:X.objectMode?1:J!=J?X.flowing&&X.length?X.buffer.head.data.length:X.length:(J>X.highWaterMark&&(X.highWaterMark=function(Y){return Y>=M?Y=M:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y}(J)),J<=X.length?J:X.ended?X.length:(X.needReadable=!0,0))}function E(J){var X=J._readableState;r("emitReadable",X.needReadable,X.emittedReadable),X.needReadable=!1,X.emittedReadable||(r("emitReadable",X.flowing),X.emittedReadable=!0,k.nextTick(S,J))}function S(J){var X=J._readableState;r("emitReadable_",X.destroyed,X.length,X.ended),X.destroyed||!X.length&&!X.ended||(J.emit("readable"),X.emittedReadable=!1),X.needReadable=!X.flowing&&!X.ended&&X.length<=X.highWaterMark,B(J)}function O(J,X){X.readingMore||(X.readingMore=!0,k.nextTick(P,J,X))}function P(J,X){for(;!X.reading&&!X.ended&&(X.length<X.highWaterMark||X.flowing&&X.length===0);){var Y=X.length;if(r("maybeReadMore read 0"),J.read(0),Y===X.length)break}X.readingMore=!1}function U(J){var X=J._readableState;X.readableListening=J.listenerCount("readable")>0,X.resumeScheduled&&!X.paused?X.flowing=!0:J.listenerCount("data")>0&&J.resume()}function R(J){r("readable nexttick read 0"),J.read(0)}function j(J,X){r("resume",X.reading),X.reading||J.read(0),X.resumeScheduled=!1,J.emit("resume"),B(J),X.flowing&&!X.reading&&J.read(0)}function B(J){var X=J._readableState;for(r("flow",X.flowing);X.flowing&&J.read()!==null;);}function z(J,X){return X.length===0?null:(X.objectMode?Y=X.buffer.shift():!J||J>=X.length?(Y=X.decoder?X.buffer.join(""):X.buffer.length===1?X.buffer.first():X.buffer.concat(X.length),X.buffer.clear()):Y=X.buffer.consume(J,X.decoder),Y);var Y}function G(J){var X=J._readableState;r("endReadable",X.endEmitted),X.endEmitted||(X.ended=!0,k.nextTick(V,X,J))}function V(J,X){if(r("endReadableNT",J.endEmitted,J.length),!J.endEmitted&&J.length===0&&(J.endEmitted=!0,X.readable=!1,X.emit("end"),J.autoDestroy)){var Y=X._writableState;(!Y||Y.autoDestroy&&Y.finished)&&X.destroy()}}function et(J,X){for(var Y=0,Z=J.length;Y<Z;Y++)if(J[Y]===X)return Y;return-1}_.prototype.read=function(J){r("read",J),J=parseInt(J,10);var X=this._readableState,Y=J;if(J!==0&&(X.emittedReadable=!1),J===0&&X.needReadable&&((X.highWaterMark!==0?X.length>=X.highWaterMark:X.length>0)||X.ended))return r("read: emitReadable",X.length,X.ended),X.length===0&&X.ended?G(this):E(this),null;if((J=L(J,X))===0&&X.ended)return X.length===0&&G(this),null;var Z,tt=X.needReadable;return r("need readable",tt),(X.length===0||X.length-J<X.highWaterMark)&&r("length less than watermark",tt=!0),X.ended||X.reading?r("reading or ended",tt=!1):tt&&(r("do read"),X.reading=!0,X.sync=!0,X.length===0&&(X.needReadable=!0),this._read(X.highWaterMark),X.sync=!1,X.reading||(J=L(Y,X))),(Z=J>0?z(J,X):null)===null?(X.needReadable=X.length<=X.highWaterMark,J=0):(X.length-=J,X.awaitDrain=0),X.length===0&&(X.ended||(X.needReadable=!0),Y!==J&&X.ended&&G(this)),Z!==null&&this.emit("data",Z),Z},_.prototype._read=function(J){y(this,new v("_read()"))},_.prototype.pipe=function(J,X){var Y=this,Z=this._readableState;switch(Z.pipesCount){case 0:Z.pipes=J;break;case 1:Z.pipes=[Z.pipes,J];break;default:Z.pipes.push(J)}Z.pipesCount+=1,r("pipe count=%d opts=%j",Z.pipesCount,X);var tt=X&&X.end===!1||J===k.stdout||J===k.stderr?yt:rt;function rt(){r("onend"),J.end()}Z.endEmitted?k.nextTick(tt):Y.once("end",tt),J.on("unpipe",function mt(Ot,vt){r("onunpipe"),Ot===Y&&vt&&vt.hasUnpiped===!1&&(vt.hasUnpiped=!0,r("cleanup"),J.removeListener("close",gt),J.removeListener("finish",kt),J.removeListener("drain",nt),J.removeListener("error",pt),J.removeListener("unpipe",mt),Y.removeListener("end",rt),Y.removeListener("end",yt),Y.removeListener("data",ct),ot=!0,!Z.awaitDrain||J._writableState&&!J._writableState.needDrain||nt())});var nt=function(mt){return function(){var Ot=mt._readableState;r("pipeOnDrain",Ot.awaitDrain),Ot.awaitDrain&&Ot.awaitDrain--,Ot.awaitDrain===0&&m(mt,"data")&&(Ot.flowing=!0,B(mt))}}(Y);J.on("drain",nt);var ot=!1;function ct(mt){r("ondata");var Ot=J.write(mt);r("dest.write",Ot),Ot===!1&&((Z.pipesCount===1&&Z.pipes===J||Z.pipesCount>1&&et(Z.pipes,J)!==-1)&&!ot&&(r("false write response, pause",Z.awaitDrain),Z.awaitDrain++),Y.pause())}function pt(mt){r("onerror",mt),yt(),J.removeListener("error",pt),m(J,"error")===0&&y(J,mt)}function gt(){J.removeListener("finish",kt),yt()}function kt(){r("onfinish"),J.removeListener("close",gt),yt()}function yt(){r("unpipe"),Y.unpipe(J)}return Y.on("data",ct),function(mt,Ot,vt){if(typeof mt.prependListener=="function")return mt.prependListener(Ot,vt);mt._events&&mt._events[Ot]?Array.isArray(mt._events[Ot])?mt._events[Ot].unshift(vt):mt._events[Ot]=[vt,mt._events[Ot]]:mt.on(Ot,vt)}(J,"error",pt),J.once("close",gt),J.once("finish",kt),J.emit("pipe",Y),Z.flowing||(r("pipe resume"),Y.resume()),J},_.prototype.unpipe=function(J){var X=this._readableState,Y={hasUnpiped:!1};if(X.pipesCount===0)return this;if(X.pipesCount===1)return J&&J!==X.pipes||(J||(J=X.pipes),X.pipes=null,X.pipesCount=0,X.flowing=!1,J&&J.emit("unpipe",this,Y)),this;if(!J){var Z=X.pipes,tt=X.pipesCount;X.pipes=null,X.pipesCount=0,X.flowing=!1;for(var rt=0;rt<tt;rt++)Z[rt].emit("unpipe",this,{hasUnpiped:!1});return this}var nt=et(X.pipes,J);return nt===-1||(X.pipes.splice(nt,1),X.pipesCount-=1,X.pipesCount===1&&(X.pipes=X.pipes[0]),J.emit("unpipe",this,Y)),this},_.prototype.on=function(J,X){var Y=h.prototype.on.call(this,J,X),Z=this._readableState;return J==="data"?(Z.readableListening=this.listenerCount("readable")>0,Z.flowing!==!1&&this.resume()):J==="readable"&&(Z.endEmitted||Z.readableListening||(Z.readableListening=Z.needReadable=!0,Z.flowing=!1,Z.emittedReadable=!1,r("on readable",Z.length,Z.reading),Z.length?E(this):Z.reading||k.nextTick(R,this))),Y},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(J,X){var Y=h.prototype.removeListener.call(this,J,X);return J==="readable"&&k.nextTick(U,this),Y},_.prototype.removeAllListeners=function(J){var X=h.prototype.removeAllListeners.apply(this,arguments);return J!=="readable"&&J!==void 0||k.nextTick(U,this),X},_.prototype.resume=function(){var J=this._readableState;return J.flowing||(r("resume"),J.flowing=!J.readableListening,function(X,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,k.nextTick(j,X,Y))}(this,J)),J.paused=!1,this},_.prototype.pause=function(){return r("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(r("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(J){var X=this,Y=this._readableState,Z=!1;for(var tt in J.on("end",function(){if(r("wrapped end"),Y.decoder&&!Y.ended){var nt=Y.decoder.end();nt&&nt.length&&X.push(nt)}X.push(null)}),J.on("data",function(nt){r("wrapped data"),Y.decoder&&(nt=Y.decoder.write(nt)),Y.objectMode&&nt==null||(Y.objectMode||nt&&nt.length)&&(X.push(nt)||(Z=!0,J.pause()))}),J)this[tt]===void 0&&typeof J[tt]=="function"&&(this[tt]=function(nt){return function(){return J[nt].apply(J,arguments)}}(tt));for(var rt=0;rt<b.length;rt++)J.on(b[rt],this.emit.bind(this,b[rt]));return this._read=function(nt){r("wrapped _read",nt),Z&&(Z=!1,J.resume())},this},typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return a===void 0&&(a=o(68221)),a(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(J){this._readableState&&(this._readableState.flowing=J)}}),_._fromList=z,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(_.from=function(J,X){return i===void 0&&(i=o(31748)),i(_,J,X)})},74308:function(W,I,o){W.exports=t;var T=o(74322).q,k=T.ERR_METHOD_NOT_IMPLEMENTED,r=T.ERR_MULTIPLE_CALLBACK,m=T.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=T.ERR_TRANSFORM_WITH_LENGTH_0,s=o(37865);function e(i,c){var l=this._transformState;l.transforming=!1;var u=l.writecb;if(u===null)return this.emit("error",new r);l.writechunk=null,l.writecb=null,c!=null&&this.push(c),u(i);var f=this._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function t(i){if(!(this instanceof t))return new t(i);s.call(this,i),this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,i&&(typeof i.transform=="function"&&(this._transform=i.transform),typeof i.flush=="function"&&(this._flush=i.flush)),this.on("prefinish",n)}function n(){var i=this;typeof this._flush!="function"||this._readableState.destroyed?a(this,null,null):this._flush(function(c,l){a(i,c,l)})}function a(i,c,l){if(c)return i.emit("error",c);if(l!=null&&i.push(l),i._writableState.length)throw new h;if(i._transformState.transforming)throw new m;return i.push(null)}o(42018)(t,s),t.prototype.push=function(i,c){return this._transformState.needTransform=!1,s.prototype.push.call(this,i,c)},t.prototype._transform=function(i,c,l){l(new k("_transform()"))},t.prototype._write=function(i,c,l){var u=this._transformState;if(u.writecb=l,u.writechunk=i,u.writeencoding=c,!u.transforming){var f=this._readableState;(u.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},t.prototype._read=function(i){var c=this._transformState;c.writechunk===null||c.transforming?c.needTransform=!0:(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform))},t.prototype._destroy=function(i,c){s.prototype._destroy.call(this,i,function(l){c(l)})}},37493:function(W,I,o){var T,k=o(90386);function r(O){var P=this;this.next=null,this.entry=null,this.finish=function(){(function(U,R,j){var B=U.entry;for(U.entry=null;B;){var z=B.callback;R.pendingcb--,z(void 0),B=B.next}R.corkedRequestsFree.next=U})(P,O)}}W.exports=_,_.WritableState=x;var m,h={deprecate:o(20588)},s=o(71405),e=o(12856).Buffer,t=o.g.Uint8Array||function(){},n=o(65756),a=o(56306).getHighWaterMark,i=o(74322).q,c=i.ERR_INVALID_ARG_TYPE,l=i.ERR_METHOD_NOT_IMPLEMENTED,u=i.ERR_MULTIPLE_CALLBACK,f=i.ERR_STREAM_CANNOT_PIPE,d=i.ERR_STREAM_DESTROYED,w=i.ERR_STREAM_NULL_VALUES,v=i.ERR_STREAM_WRITE_AFTER_END,p=i.ERR_UNKNOWN_ENCODING,y=n.errorOrDestroy;function b(){}function x(O,P,U){T=T||o(37865),O=O||{},typeof U!="boolean"&&(U=P instanceof T),this.objectMode=!!O.objectMode,U&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=a(this,O,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var R=O.decodeStrings===!1;this.decodeStrings=!R,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){(function(B,z){var G=B._writableState,V=G.sync,et=G.writecb;if(typeof et!="function")throw new u;if(function(X){X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0}(G),z)(function(X,Y,Z,tt,rt){--Y.pendingcb,Z?(k.nextTick(rt,tt),k.nextTick(S,X,Y),X._writableState.errorEmitted=!0,y(X,tt)):(rt(tt),X._writableState.errorEmitted=!0,y(X,tt),S(X,Y))})(B,G,V,z,et);else{var J=L(G)||B.destroyed;J||G.corked||G.bufferProcessing||!G.bufferedRequest||M(B,G),V?k.nextTick(A,B,G,J,et):A(B,G,J,et)}})(P,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function _(O){var P=this instanceof(T=T||o(37865));if(!P&&!m.call(_,this))return new _(O);this._writableState=new x(O,this,P),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),s.call(this)}function g(O,P,U,R,j,B,z){P.writelen=R,P.writecb=z,P.writing=!0,P.sync=!0,P.destroyed?P.onwrite(new d("write")):U?O._writev(j,P.onwrite):O._write(j,B,P.onwrite),P.sync=!1}function A(O,P,U,R){U||function(j,B){B.length===0&&B.needDrain&&(B.needDrain=!1,j.emit("drain"))}(O,P),P.pendingcb--,R(),S(O,P)}function M(O,P){P.bufferProcessing=!0;var U=P.bufferedRequest;if(O._writev&&U&&U.next){var R=P.bufferedRequestCount,j=new Array(R),B=P.corkedRequestsFree;B.entry=U;for(var z=0,G=!0;U;)j[z]=U,U.isBuf||(G=!1),U=U.next,z+=1;j.allBuffers=G,g(O,P,!0,P.length,j,"",B.finish),P.pendingcb++,P.lastBufferedRequest=null,B.next?(P.corkedRequestsFree=B.next,B.next=null):P.corkedRequestsFree=new r(P),P.bufferedRequestCount=0}else{for(;U;){var V=U.chunk,et=U.encoding,J=U.callback;if(g(O,P,!1,P.objectMode?1:V.length,V,et,J),U=U.next,P.bufferedRequestCount--,P.writing)break}U===null&&(P.lastBufferedRequest=null)}P.bufferedRequest=U,P.bufferProcessing=!1}function L(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function E(O,P){O._final(function(U){P.pendingcb--,U&&y(O,U),P.prefinished=!0,O.emit("prefinish"),S(O,P)})}function S(O,P){var U=L(P);if(U&&(function(j,B){B.prefinished||B.finalCalled||(typeof j._final!="function"||B.destroyed?(B.prefinished=!0,j.emit("prefinish")):(B.pendingcb++,B.finalCalled=!0,k.nextTick(E,j,B)))}(O,P),P.pendingcb===0&&(P.finished=!0,O.emit("finish"),P.autoDestroy))){var R=O._readableState;(!R||R.autoDestroy&&R.endEmitted)&&O.destroy()}return U}o(42018)(_,s),x.prototype.getBuffer=function(){for(var O=this.bufferedRequest,P=[];O;)P.push(O),O=O.next;return P},function(){try{Object.defineProperty(x.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(O){return!!m.call(this,O)||this===_&&O&&O._writableState instanceof x}})):m=function(O){return O instanceof this},_.prototype.pipe=function(){y(this,new f)},_.prototype.write=function(O,P,U){var R,j=this._writableState,B=!1,z=!j.objectMode&&(R=O,e.isBuffer(R)||R instanceof t);return z&&!e.isBuffer(O)&&(O=function(G){return e.from(G)}(O)),typeof P=="function"&&(U=P,P=null),z?P="buffer":P||(P=j.defaultEncoding),typeof U!="function"&&(U=b),j.ending?function(G,V){var et=new v;y(G,et),k.nextTick(V,et)}(this,U):(z||function(G,V,et,J){var X;return et===null?X=new w:typeof et=="string"||V.objectMode||(X=new c("chunk",["string","Buffer"],et)),!X||(y(G,X),k.nextTick(J,X),!1)}(this,j,O,U))&&(j.pendingcb++,B=function(G,V,et,J,X,Y){if(!et){var Z=function(ot,ct,pt){return ot.objectMode||ot.decodeStrings===!1||typeof ct!="string"||(ct=e.from(ct,pt)),ct}(V,J,X);J!==Z&&(et=!0,X="buffer",J=Z)}var tt=V.objectMode?1:J.length;V.length+=tt;var rt=V.length<V.highWaterMark;if(rt||(V.needDrain=!0),V.writing||V.corked){var nt=V.lastBufferedRequest;V.lastBufferedRequest={chunk:J,encoding:X,isBuf:et,callback:Y,next:null},nt?nt.next=V.lastBufferedRequest:V.bufferedRequest=V.lastBufferedRequest,V.bufferedRequestCount+=1}else g(G,V,!1,tt,J,X,Y);return rt}(this,j,z,O,P,U)),B},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,O.writing||O.corked||O.bufferProcessing||!O.bufferedRequest||M(this,O))},_.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new p(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(O,P,U){U(new l("_write()"))},_.prototype._writev=null,_.prototype.end=function(O,P,U){var R=this._writableState;return typeof O=="function"?(U=O,O=null,P=null):typeof P=="function"&&(U=P,P=null),O!=null&&this.write(O,P),R.corked&&(R.corked=1,this.uncork()),R.ending||function(j,B,z){B.ending=!0,S(j,B),z&&(B.finished?k.nextTick(z):j.once("finish",z)),B.ended=!0,j.writable=!1}(this,R,U),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),_.prototype.destroy=n.destroy,_.prototype._undestroy=n.undestroy,_.prototype._destroy=function(O,P){P(O)}},68221:function(W,I,o){var T,k=o(90386);function r(w,v,p){return v in w?Object.defineProperty(w,v,{value:p,enumerable:!0,configurable:!0,writable:!0}):w[v]=p,w}var m=o(12726),h=Symbol("lastResolve"),s=Symbol("lastReject"),e=Symbol("error"),t=Symbol("ended"),n=Symbol("lastPromise"),a=Symbol("handlePromise"),i=Symbol("stream");function c(w,v){return{value:w,done:v}}function l(w){var v=w[h];if(v!==null){var p=w[i].read();p!==null&&(w[n]=null,w[h]=null,w[s]=null,v(c(p,!1)))}}function u(w){k.nextTick(l,w)}var f=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((r(T={get stream(){return this[i]},next:function(){var w=this,v=this[e];if(v!==null)return Promise.reject(v);if(this[t])return Promise.resolve(c(void 0,!0));if(this[i].destroyed)return new Promise(function(x,_){k.nextTick(function(){w[e]?_(w[e]):x(c(void 0,!0))})});var p,y=this[n];if(y)p=new Promise(function(x,_){return function(g,A){x.then(function(){_[t]?g(c(void 0,!0)):_[a](g,A)},A)}}(y,this));else{var b=this[i].read();if(b!==null)return Promise.resolve(c(b,!1));p=new Promise(this[a])}return this[n]=p,p}},Symbol.asyncIterator,function(){return this}),r(T,"return",function(){var w=this;return new Promise(function(v,p){w[i].destroy(null,function(y){y?p(y):v(c(void 0,!0))})})}),T),f);W.exports=function(w){var v,p=Object.create(d,(r(v={},i,{value:w,writable:!0}),r(v,h,{value:null,writable:!0}),r(v,s,{value:null,writable:!0}),r(v,e,{value:null,writable:!0}),r(v,t,{value:w._readableState.endEmitted,writable:!0}),r(v,a,{value:function(y,b){var x=p[i].read();x?(p[n]=null,p[h]=null,p[s]=null,y(c(x,!1))):(p[h]=y,p[s]=b)},writable:!0}),v));return p[n]=null,m(w,function(y){if(y&&y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var b=p[s];return b!==null&&(p[n]=null,p[h]=null,p[s]=null,b(y)),void(p[e]=y)}var x=p[h];x!==null&&(p[n]=null,p[h]=null,p[s]=null,x(c(void 0,!0))),p[t]=!0}),w.on("readable",u.bind(null,p)),p}},31125:function(W,I,o){function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=o(12856).Buffer,h=o(69862).inspect,s=h&&h.custom||"inspect";W.exports=function(){function e(){(function(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,n=[{key:"push",value:function(a){var i={data:a,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(a){var i={data:a,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(a){if(this.length===0)return"";for(var i=this.head,c=""+i.data;i=i.next;)c+=a+i.data;return c}},{key:"concat",value:function(a){if(this.length===0)return m.alloc(0);for(var i,c,l,u=m.allocUnsafe(a>>>0),f=this.head,d=0;f;)i=f.data,c=u,l=d,m.prototype.copy.call(i,c,l),d+=f.data.length,f=f.next;return u}},{key:"consume",value:function(a,i){var c;return a<this.head.data.length?(c=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):c=a===this.head.data.length?this.shift():i?this._getString(a):this._getBuffer(a),c}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var i=this.head,c=1,l=i.data;for(a-=l.length;i=i.next;){var u=i.data,f=a>u.length?u.length:a;if(f===u.length?l+=u:l+=u.slice(0,a),(a-=f)==0){f===u.length?(++c,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=u.slice(f));break}++c}return this.length-=c,l}},{key:"_getBuffer",value:function(a){var i=m.allocUnsafe(a),c=this.head,l=1;for(c.data.copy(i),a-=c.data.length;c=c.next;){var u=c.data,f=a>u.length?u.length:a;if(u.copy(i,i.length-a,0,f),(a-=f)==0){f===u.length?(++l,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=u.slice(f));break}++l}return this.length-=l,i}},{key:s,value:function(a,i){return h(this,function(c){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?T(Object(u),!0).forEach(function(f){k(c,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):T(Object(u)).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(u,f))})}return c}({},i,{depth:0,customInspect:!1}))}}],n&&r(t.prototype,n),e}()},65756:function(W,I,o){var T=o(90386);function k(h,s){m(h,s),r(h)}function r(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function m(h,s){h.emit("error",s)}W.exports={destroy:function(h,s){var e=this,t=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return t||n?(s?s(h):h&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,T.nextTick(m,this,h)):T.nextTick(m,this,h)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function(a){!s&&a?e._writableState?e._writableState.errorEmitted?T.nextTick(r,e):(e._writableState.errorEmitted=!0,T.nextTick(k,e,a)):T.nextTick(k,e,a):s?(T.nextTick(r,e),s(a)):T.nextTick(r,e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(h,s){var e=h._readableState,t=h._writableState;e&&e.autoDestroy||t&&t.autoDestroy?h.destroy(s):h.emit("error",s)}}},12726:function(W,I,o){var T=o(74322).q.ERR_STREAM_PREMATURE_CLOSE;function k(){}W.exports=function r(m,h,s){if(typeof h=="function")return r(m,null,h);h||(h={}),s=function(w){var v=!1;return function(){if(!v){v=!0;for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];w.apply(this,y)}}}(s||k);var e=h.readable||h.readable!==!1&&m.readable,t=h.writable||h.writable!==!1&&m.writable,n=function(){m.writable||i()},a=m._writableState&&m._writableState.finished,i=function(){t=!1,a=!0,e||s.call(m)},c=m._readableState&&m._readableState.endEmitted,l=function(){e=!1,c=!0,t||s.call(m)},u=function(w){s.call(m,w)},f=function(){var w;return e&&!c?(m._readableState&&m._readableState.ended||(w=new T),s.call(m,w)):t&&!a?(m._writableState&&m._writableState.ended||(w=new T),s.call(m,w)):void 0},d=function(){m.req.on("finish",i)};return function(w){return w.setHeader&&typeof w.abort=="function"}(m)?(m.on("complete",i),m.on("abort",f),m.req?d():m.on("request",d)):t&&!m._writableState&&(m.on("end",n),m.on("close",n)),m.on("end",l),m.on("finish",i),h.error!==!1&&m.on("error",u),m.on("close",f),function(){m.removeListener("complete",i),m.removeListener("abort",f),m.removeListener("request",d),m.req&&m.req.removeListener("finish",i),m.removeListener("end",n),m.removeListener("close",n),m.removeListener("finish",i),m.removeListener("end",l),m.removeListener("error",u),m.removeListener("close",f)}}},31748:function(W){W.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function(W,I,o){var T,k=o(74322).q,r=k.ERR_MISSING_ARGS,m=k.ERR_STREAM_DESTROYED;function h(t){if(t)throw t}function s(t){t()}function e(t,n){return t.pipe(n)}W.exports=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i,c=function(u){return u.length?typeof u[u.length-1]!="function"?h:u.pop():h}(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new r("streams");var l=n.map(function(u,f){var d=f<n.length-1;return function(w,v,p,y){y=function(_){var g=!1;return function(){g||(g=!0,_.apply(void 0,arguments))}}(y);var b=!1;w.on("close",function(){b=!0}),T===void 0&&(T=o(12726)),T(w,{readable:v,writable:p},function(_){if(_)return y(_);b=!0,y()});var x=!1;return function(_){if(!b&&!x)return x=!0,function(g){return g.setHeader&&typeof g.abort=="function"}(w)?w.abort():typeof w.destroy=="function"?w.destroy():void y(_||new m("pipe"))}}(u,d,f>0,function(w){i||(i=w),w&&l.forEach(s),d||(l.forEach(s),c(i))})});return n.reduce(e)}},56306:function(W,I,o){var T=o(74322).q.ERR_INVALID_OPT_VALUE;W.exports={getHighWaterMark:function(k,r,m,h){var s=function(e,t,n){return e.highWaterMark!=null?e.highWaterMark:t?e[n]:null}(r,h,m);if(s!=null){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new T(h?m:"highWaterMark",s);return Math.floor(s)}return k.objectMode?16:16384}}},71405:function(W,I,o){W.exports=o(15398).EventEmitter},68019:function(W,I,o){var T=o(71665).Buffer,k=T.isEncoding||function(c){switch((c=""+c)&&c.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(c){var l;switch(this.encoding=function(u){var f=function(d){if(!d)return"utf8";for(var w;;)switch(d){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return d;default:if(w)return;d=(""+d).toLowerCase(),w=!0}}(u);if(typeof f!="string"&&(T.isEncoding===k||!k(u)))throw new Error("Unknown encoding: "+u);return f||u}(c),this.encoding){case"utf16le":this.text=s,this.end=e,l=4;break;case"utf8":this.fillLast=h,l=4;break;case"base64":this.text=t,this.end=n,l=3;break;default:return this.write=a,void(this.end=i)}this.lastNeed=0,this.lastTotal=0,this.lastChar=T.allocUnsafe(l)}function m(c){return c<=127?0:c>>5==6?2:c>>4==14?3:c>>3==30?4:c>>6==2?-1:-2}function h(c){var l=this.lastTotal-this.lastNeed,u=function(f,d,w){if((192&d[0])!=128)return f.lastNeed=0,"\uFFFD";if(f.lastNeed>1&&d.length>1){if((192&d[1])!=128)return f.lastNeed=1,"\uFFFD";if(f.lastNeed>2&&d.length>2&&(192&d[2])!=128)return f.lastNeed=2,"\uFFFD"}}(this,c);return u!==void 0?u:this.lastNeed<=c.length?(c.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(c.copy(this.lastChar,l,0,c.length),void(this.lastNeed-=c.length))}function s(c,l){if((c.length-l)%2==0){var u=c.toString("utf16le",l);if(u){var f=u.charCodeAt(u.length-1);if(f>=55296&&f<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=c[c.length-1],c.toString("utf16le",l,c.length-1)}function e(c){var l=c&&c.length?this.write(c):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return l+this.lastChar.toString("utf16le",0,u)}return l}function t(c,l){var u=(c.length-l)%3;return u===0?c.toString("base64",l):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=c[c.length-1]:(this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1]),c.toString("base64",l,c.length-u))}function n(c){var l=c&&c.length?this.write(c):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function a(c){return c.toString(this.encoding)}function i(c){return c&&c.length?this.write(c):""}I.s=r,r.prototype.write=function(c){if(c.length===0)return"";var l,u;if(this.lastNeed){if((l=this.fillLast(c))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<c.length?l?l+this.text(c,u):this.text(c,u):l||""},r.prototype.end=function(c){var l=c&&c.length?this.write(c):"";return this.lastNeed?l+"\uFFFD":l},r.prototype.text=function(c,l){var u=function(d,w,v){var p=w.length-1;if(p<v)return 0;var y=m(w[p]);return y>=0?(y>0&&(d.lastNeed=y-1),y):--p<v||y===-2?0:(y=m(w[p]))>=0?(y>0&&(d.lastNeed=y-2),y):--p<v||y===-2?0:(y=m(w[p]))>=0?(y>0&&(y===2?y=0:d.lastNeed=y-3),y):0}(this,c,l);if(!this.lastNeed)return c.toString("utf8",l);this.lastTotal=u;var f=c.length-(u-this.lastNeed);return c.copy(this.lastChar,0,f),c.toString("utf8",l,f)},r.prototype.fillLast=function(c){if(this.lastNeed<=c.length)return c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,c.length),this.lastNeed-=c.length}},90715:function(W,I,o){var T=o(32791),k=o(41633)("stream-parser");W.exports=function(d){var w=d&&typeof d._transform=="function",v=d&&typeof d._write=="function";if(!w&&!v)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),d._bytes=t,d._skipBytes=n,w&&(d._passthrough=a),w?d._transform=c:d._write=i};var r=-1,m=0,h=1,s=2;function e(d){k("initializing parser stream"),d._parserBytesLeft=0,d._parserBuffers=[],d._parserBuffered=0,d._parserState=r,d._parserCallback=null,typeof d.push=="function"&&(d._parserOutput=d.push.bind(d)),d._parserInit=!0}function t(d,w){T(!this._parserCallback,'there is already a "callback" set!'),T(isFinite(d)&&d>0,'can only buffer a finite number of bytes > 0, got "'+d+'"'),this._parserInit||e(this),k("buffering %o bytes",d),this._parserBytesLeft=d,this._parserCallback=w,this._parserState=m}function n(d,w){T(!this._parserCallback,'there is already a "callback" set!'),T(d>0,'can only skip > 0 bytes, got "'+d+'"'),this._parserInit||e(this),k("skipping %o bytes",d),this._parserBytesLeft=d,this._parserCallback=w,this._parserState=h}function a(d,w){T(!this._parserCallback,'There is already a "callback" set!'),T(d>0,'can only pass through > 0 bytes, got "'+d+'"'),this._parserInit||e(this),k("passing through %o bytes",d),this._parserBytesLeft=d,this._parserCallback=w,this._parserState=s}function i(d,w,v){this._parserInit||e(this),k("write(%o bytes)",d.length),typeof w=="function"&&(v=w),u(this,d,null,v)}function c(d,w,v){this._parserInit||e(this),k("transform(%o bytes)",d.length),typeof w!="function"&&(w=this._parserOutput),u(this,d,w,v)}function l(d,w,v,p){if(d._parserBytesLeft-=w.length,k("%o bytes left for stream piece",d._parserBytesLeft),d._parserState===m?(d._parserBuffers.push(w),d._parserBuffered+=w.length):d._parserState===s&&v(w),d._parserBytesLeft!==0)return p;var y=d._parserCallback;if(y&&d._parserState===m&&d._parserBuffers.length>1&&(w=Buffer.concat(d._parserBuffers,d._parserBuffered)),d._parserState!==m&&(w=null),d._parserCallback=null,d._parserBuffered=0,d._parserState=r,d._parserBuffers.splice(0),y){var b=[];w&&b.push(w),v&&b.push(v);var x=y.length>b.length;x&&b.push(f(p));var _=y.apply(d,b);if(!x||p===_)return p}}var u=f(function d(w,v,p,y){return w._parserBytesLeft<=0?y(new Error("got data but not currently parsing anything")):v.length<=w._parserBytesLeft?function(){return l(w,v,p,y)}:function(){var b=v.slice(0,w._parserBytesLeft);return l(w,b,p,function(x){return x?y(x):v.length>b.length?function(){return d(w,v.slice(b.length),p,y)}:void 0})}});function f(d){return function(){for(var w=d.apply(this,arguments);typeof w=="function";)w=w();return w}}},41633:function(W,I,o){var T=o(90386);function k(){var r;try{r=I.storage.debug}catch{}return!r&&T!==void 0&&"env"in T&&(r=T.env.DEBUG),r}(I=W.exports=o(74469)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},I.formatArgs=function(r){var m=this.useColors;if(r[0]=(m?"%c":"")+this.namespace+(m?" %c":" ")+r[0]+(m?"%c ":" ")+"+"+I.humanize(this.diff),m){var h="color: "+this.color;r.splice(1,0,h,"color: inherit");var s=0,e=0;r[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(s++,t==="%c"&&(e=s))}),r.splice(e,0,h)}},I.save=function(r){try{r==null?I.storage.removeItem("debug"):I.storage.debug=r}catch{}},I.load=k,I.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},I.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),I.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],I.formatters.j=function(r){try{return JSON.stringify(r)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}},I.enable(k())},74469:function(W,I,o){var T;function k(r){function m(){if(m.enabled){var h=m,s=+new Date,e=s-(T||s);h.diff=e,h.prev=T,h.curr=s,T=s;for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];t[0]=I.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(i,c){if(i==="%%")return i;a++;var l=I.formatters[c];if(typeof l=="function"){var u=t[a];i=l.call(h,u),t.splice(a,1),a--}return i}),I.formatArgs.call(h,t),(m.log||I.log||console.log.bind(console)).apply(h,t)}}return m.namespace=r,m.enabled=I.enabled(r),m.useColors=I.useColors(),m.color=function(h){var s,e=0;for(s in h)e=(e<<5)-e+h.charCodeAt(s),e|=0;return I.colors[Math.abs(e)%I.colors.length]}(r),typeof I.init=="function"&&I.init(m),m}(I=W.exports=k.debug=k.default=k).coerce=function(r){return r instanceof Error?r.stack||r.message:r},I.disable=function(){I.enable("")},I.enable=function(r){I.save(r),I.names=[],I.skips=[];for(var m=(typeof r=="string"?r:"").split(/[\s,]+/),h=m.length,s=0;s<h;s++)m[s]&&((r=m[s].replace(/\*/g,".*?"))[0]==="-"?I.skips.push(new RegExp("^"+r.substr(1)+"$")):I.names.push(new RegExp("^"+r+"$")))},I.enabled=function(r){var m,h;for(m=0,h=I.skips.length;m<h;m++)if(I.skips[m].test(r))return!1;for(m=0,h=I.names.length;m<h;m++)if(I.names[m].test(r))return!0;return!1},I.humanize=o(11375),I.names=[],I.skips=[],I.formatters={}},11375:function(W){var I=1e3,o=60*I,T=60*o,k=24*T;function r(m,h,s){if(!(m<h))return m<1.5*h?Math.floor(m/h)+" "+s:Math.ceil(m/h)+" "+s+"s"}W.exports=function(m,h){h=h||{};var s,e=typeof m;if(e==="string"&&m.length>0)return function(t){if(!((t=String(t)).length>100)){var n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(n){var a=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*k;case"hours":case"hour":case"hrs":case"hr":case"h":return a*T;case"minutes":case"minute":case"mins":case"min":case"m":return a*o;case"seconds":case"second":case"secs":case"sec":case"s":return a*I;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(m);if(e==="number"&&isNaN(m)===!1)return h.long?r(s=m,k,"day")||r(s,T,"hour")||r(s,o,"minute")||r(s,I,"second")||s+" ms":function(t){return t>=k?Math.round(t/k)+"d":t>=T?Math.round(t/T)+"h":t>=o?Math.round(t/o)+"m":t>=I?Math.round(t/I)+"s":t+"ms"}(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))}},99011:function(W,I,o){var T=o(88641);W.exports=function(k,r,m){if(k==null)throw Error("First argument should be a string");if(r==null)throw Error("Separator should be a string or a RegExp");m?(typeof m=="string"||Array.isArray(m))&&(m={ignore:m}):m={},m.escape==null&&(m.escape=!0),m.ignore==null?m.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof m.ignore=="string"&&(m.ignore=[m.ignore]),m.ignore=m.ignore.map(function(i){return i.length===1&&(i+=i),i}));var h=T.parse(k,{flat:!0,brackets:m.ignore}),s=h[0].split(r);if(m.escape){for(var e=[],t=0;t<s.length;t++){var n=s[t],a=s[t+1];n[n.length-1]==="\\"&&n[n.length-2]!=="\\"?(e.push(n+r+a),t++):e.push(n)}s=e}for(t=0;t<s.length;t++)h[0]=s[t],s[t]=T.stringify(h,{flat:!0});return s}},68664:function(W){W.exports=function(I){for(var o=I.length,T=new Array(o),k=new Array(o),r=new Array(o),m=new Array(o),h=new Array(o),s=new Array(o),e=0;e<o;++e)T[e]=-1,k[e]=0,r[e]=!1,m[e]=0,h[e]=-1,s[e]=[];var t,n=0,a=[],i=[];function c(f){var d=[f],w=[f];for(T[f]=k[f]=n,r[f]=!0,n+=1;w.length>0;){f=w[w.length-1];var v=I[f];if(m[f]<v.length){for(var p=m[f];p<v.length;++p){var y=v[p];if(T[y]<0){T[y]=k[y]=n,r[y]=!0,n+=1,d.push(y),w.push(y);break}r[y]&&(k[f]=0|Math.min(k[f],k[y])),h[y]>=0&&s[f].push(h[y])}m[f]=p}else{if(k[f]===T[f]){var b=[],x=[],_=0;for(p=d.length-1;p>=0;--p){var g=d[p];if(r[g]=!1,b.push(g),x.push(s[g]),_+=s[g].length,h[g]=a.length,g===f){d.length=p;break}}a.push(b);var A=new Array(_);for(p=0;p<x.length;p++)for(var M=0;M<x[p].length;M++)A[--_]=x[p][M];i.push(A)}w.pop()}}}for(e=0;e<o;++e)T[e]<0&&c(e);for(e=0;e<i.length;e++){var l=i[e];if(l.length!==0){l.sort(function(f,d){return f-d}),t=[l[0]];for(var u=1;u<l.length;u++)l[u]!==l[u-1]&&t.push(l[u]);i[e]=t}}return{components:a,adjacencyList:i}}},7095:function(W,I,o){o.r(I);var T=2*Math.PI,k=function(h,s,e,t,n,a,i){var c=h.x,l=h.y;return{x:t*(c*=s)-n*(l*=e)+a,y:n*c+t*l+i}},r=function(h,s){var e=s===1.5707963267948966?.551915024494:s===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(s/4),t=Math.cos(h),n=Math.sin(h),a=Math.cos(h+s),i=Math.sin(h+s);return[{x:t-n*e,y:n+t*e},{x:a+i*e,y:i-a*e},{x:a,y:i}]},m=function(h,s,e,t){var n=h*e+s*t;return n>1&&(n=1),n<-1&&(n=-1),(h*t-s*e<0?-1:1)*Math.acos(n)};I.default=function(h){var s=h.px,e=h.py,t=h.cx,n=h.cy,a=h.rx,i=h.ry,c=h.xAxisRotation,l=c===void 0?0:c,u=h.largeArcFlag,f=u===void 0?0:u,d=h.sweepFlag,w=d===void 0?0:d,v=[];if(a===0||i===0)return[];var p=Math.sin(l*T/360),y=Math.cos(l*T/360),b=y*(s-t)/2+p*(e-n)/2,x=-p*(s-t)/2+y*(e-n)/2;if(b===0&&x===0)return[];a=Math.abs(a),i=Math.abs(i);var _=Math.pow(b,2)/Math.pow(a,2)+Math.pow(x,2)/Math.pow(i,2);_>1&&(a*=Math.sqrt(_),i*=Math.sqrt(_));var g=function(R,j,B,z,G,V,et,J,X,Y,Z,tt){var rt=Math.pow(G,2),nt=Math.pow(V,2),ot=Math.pow(Z,2),ct=Math.pow(tt,2),pt=rt*nt-rt*ct-nt*ot;pt<0&&(pt=0),pt/=rt*ct+nt*ot;var gt=(pt=Math.sqrt(pt)*(et===J?-1:1))*G/V*tt,kt=pt*-V/G*Z,yt=Y*gt-X*kt+(R+B)/2,mt=X*gt+Y*kt+(j+z)/2,Ot=(Z-gt)/G,vt=(tt-kt)/V,xt=(-Z-gt)/G,st=(-tt-kt)/V,at=m(1,0,Ot,vt),ht=m(Ot,vt,xt,st);return J===0&&ht>0&&(ht-=T),J===1&&ht<0&&(ht+=T),[yt,mt,at,ht]}(s,e,t,n,a,i,f,w,p,y,b,x),A=function(R,j){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return function(B,z){var G=[],V=!0,et=!1,J=void 0;try{for(var X,Y=B[Symbol.iterator]();!(V=(X=Y.next()).done)&&(G.push(X.value),!z||G.length!==z);V=!0);}catch(Z){et=!0,J=Z}finally{try{!V&&Y.return&&Y.return()}finally{if(et)throw J}}return G}(R,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(g,4),M=A[0],L=A[1],E=A[2],S=A[3],O=Math.abs(S)/(T/4);Math.abs(1-O)<1e-7&&(O=1);var P=Math.max(Math.ceil(O),1);S/=P;for(var U=0;U<P;U++)v.push(r(E,S)),E+=S;return v.map(function(R){var j=k(R[0],a,i,y,p,M,L),B=j.x,z=j.y,G=k(R[1],a,i,y,p,M,L),V=G.x,et=G.y,J=k(R[2],a,i,y,p,M,L);return{x1:B,y1:z,x2:V,y2:et,x:J.x,y:J.y}})}},1750:function(W,I,o){var T=o(95616),k=o(65185),r=o(29988),m=o(89546),h=o(32791);W.exports=function(s){if(Array.isArray(s)&&s.length===1&&typeof s[0]=="string"&&(s=s[0]),typeof s=="string"&&(h(m(s),"String is not an SVG path."),s=T(s)),h(Array.isArray(s),"Argument should be a string or an array of path segments."),s=k(s),!(s=r(s)).length)return[0,0,0,0];for(var e=[1/0,1/0,-1/0,-1/0],t=0,n=s.length;t<n;t++)for(var a=s[t].slice(1),i=0;i<a.length;i+=2)a[i+0]<e[0]&&(e[0]=a[i+0]),a[i+1]<e[1]&&(e[1]=a[i+1]),a[i+0]>e[2]&&(e[2]=a[i+0]),a[i+1]>e[3]&&(e[3]=a[i+1]);return e}},29988:function(W,I,o){W.exports=function(m){for(var h,s=[],e=0,t=0,n=0,a=0,i=null,c=null,l=0,u=0,f=0,d=m.length;f<d;f++){var w=m[f],v=w[0];switch(v){case"M":n=w[1],a=w[2];break;case"A":var p=T({px:l,py:u,cx:w[6],cy:w[7],rx:w[1],ry:w[2],xAxisRotation:w[3],largeArcFlag:w[4],sweepFlag:w[5]});if(!p.length)continue;for(var y,b=0;b<p.length;b++)w=["C",(y=p[b]).x1,y.y1,y.x2,y.y2,y.x,y.y],b<p.length-1&&s.push(w);break;case"S":var x=l,_=u;h!="C"&&h!="S"||(x+=x-e,_+=_-t),w=["C",x,_,w[1],w[2],w[3],w[4]];break;case"T":h=="Q"||h=="T"?(i=2*l-i,c=2*u-c):(i=l,c=u),w=r(l,u,i,c,w[1],w[2]);break;case"Q":i=w[1],c=w[2],w=r(l,u,w[1],w[2],w[3],w[4]);break;case"L":w=k(l,u,w[1],w[2]);break;case"H":w=k(l,u,w[1],u);break;case"V":w=k(l,u,l,w[1]);break;case"Z":w=k(l,u,n,a)}h=v,l=w[w.length-2],u=w[w.length-1],w.length>4?(e=w[w.length-4],t=w[w.length-3]):(e=l,t=u),s.push(w)}return s};var T=o(7095);function k(m,h,s,e){return["C",m,h,s,e,s,e]}function r(m,h,s,e,t,n){return["C",m/3+.6666666666666666*s,h/3+.6666666666666666*e,t/3+.6666666666666666*s,n/3+.6666666666666666*e,t,n]}},82019:function(W,I,o){var T,k=o(1750),r=o(95616),m=o(31457),h=o(89546),s=o(44781),e=document.createElement("canvas"),t=e.getContext("2d");W.exports=function(n,a){if(!h(n))throw Error("Argument should be valid svg path string");var i,c;a||(a={}),a.shape?(i=a.shape[0],c=a.shape[1]):(i=e.width=a.w||a.width||200,c=e.height=a.h||a.height||200);var l=Math.min(i,c),u=a.stroke||0,f=a.viewbox||a.viewBox||k(n),d=[i/(f[2]-f[0]),c/(f[3]-f[1])],w=Math.min(d[0]||0,d[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,i,c),t.fillStyle="white",u&&(typeof u!="number"&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*i,.5*c),t.scale(w,w),function(){if(T!=null)return T;var y=document.createElement("canvas").getContext("2d");if(y.canvas.width=y.canvas.height=1,!window.Path2D)return T=!1;var b=new Path2D("M0,0h1v1h-1v-1Z");y.fillStyle="black",y.fill(b);var x=y.getImageData(0,0,1,1);return T=x&&x.data&&x.data[3]===255}()){var v=new Path2D(n);t.fill(v),u&&t.stroke(v)}else{var p=r(n);m(t,p),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),s(t,{cutoff:a.cutoff!=null?a.cutoff:.5,radius:a.radius!=null?a.radius:.5*l})}},84267:function(W,I,o){var T;(function(k){var r=/^\s+/,m=/\s+$/,h=0,s=k.round,e=k.min,t=k.max,n=k.random;function a(Z,tt){if(tt=tt||{},(Z=Z||"")instanceof a)return Z;if(!(this instanceof a))return new a(Z,tt);var rt=function(nt){var ot,ct,pt,gt={r:0,g:0,b:0},kt=1,yt=null,mt=null,Ot=null,vt=!1,xt=!1;return typeof nt=="string"&&(nt=function(st){st=st.replace(r,"").replace(m,"").toLowerCase();var at,ht=!1;if(E[st])st=E[st],ht=!0;else if(st=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(at=X.rgb.exec(st))?{r:at[1],g:at[2],b:at[3]}:(at=X.rgba.exec(st))?{r:at[1],g:at[2],b:at[3],a:at[4]}:(at=X.hsl.exec(st))?{h:at[1],s:at[2],l:at[3]}:(at=X.hsla.exec(st))?{h:at[1],s:at[2],l:at[3],a:at[4]}:(at=X.hsv.exec(st))?{h:at[1],s:at[2],v:at[3]}:(at=X.hsva.exec(st))?{h:at[1],s:at[2],v:at[3],a:at[4]}:(at=X.hex8.exec(st))?{r:R(at[1]),g:R(at[2]),b:R(at[3]),a:G(at[4]),format:ht?"name":"hex8"}:(at=X.hex6.exec(st))?{r:R(at[1]),g:R(at[2]),b:R(at[3]),format:ht?"name":"hex"}:(at=X.hex4.exec(st))?{r:R(at[1]+""+at[1]),g:R(at[2]+""+at[2]),b:R(at[3]+""+at[3]),a:G(at[4]+""+at[4]),format:ht?"name":"hex8"}:!!(at=X.hex3.exec(st))&&{r:R(at[1]+""+at[1]),g:R(at[2]+""+at[2]),b:R(at[3]+""+at[3]),format:ht?"name":"hex"}}(nt)),typeof nt=="object"&&(Y(nt.r)&&Y(nt.g)&&Y(nt.b)?(ot=nt.r,ct=nt.g,pt=nt.b,gt={r:255*P(ot,255),g:255*P(ct,255),b:255*P(pt,255)},vt=!0,xt=String(nt.r).substr(-1)==="%"?"prgb":"rgb"):Y(nt.h)&&Y(nt.s)&&Y(nt.v)?(yt=B(nt.s),mt=B(nt.v),gt=function(st,at,ht){st=6*P(st,360),at=P(at,100),ht=P(ht,100);var Lt=k.floor(st),Mt=st-Lt,_t=ht*(1-at),St=ht*(1-Mt*at),Dt=ht*(1-(1-Mt)*at),ut=Lt%6;return{r:255*[ht,St,_t,_t,Dt,ht][ut],g:255*[Dt,ht,ht,St,_t,_t][ut],b:255*[_t,_t,Dt,ht,ht,St][ut]}}(nt.h,yt,mt),vt=!0,xt="hsv"):Y(nt.h)&&Y(nt.s)&&Y(nt.l)&&(yt=B(nt.s),Ot=B(nt.l),gt=function(st,at,ht){var Lt,Mt,_t;function St(Tt,bt,It){return It<0&&(It+=1),It>1&&(It-=1),It<1/6?Tt+6*(bt-Tt)*It:It<.5?bt:It<2/3?Tt+(bt-Tt)*(2/3-It)*6:Tt}if(st=P(st,360),at=P(at,100),ht=P(ht,100),at===0)Lt=Mt=_t=ht;else{var Dt=ht<.5?ht*(1+at):ht+at-ht*at,ut=2*ht-Dt;Lt=St(ut,Dt,st+1/3),Mt=St(ut,Dt,st),_t=St(ut,Dt,st-1/3)}return{r:255*Lt,g:255*Mt,b:255*_t}}(nt.h,yt,Ot),vt=!0,xt="hsl"),nt.hasOwnProperty("a")&&(kt=nt.a)),kt=O(kt),{ok:vt,format:nt.format||xt,r:e(255,t(gt.r,0)),g:e(255,t(gt.g,0)),b:e(255,t(gt.b,0)),a:kt}}(Z);this._originalInput=Z,this._r=rt.r,this._g=rt.g,this._b=rt.b,this._a=rt.a,this._roundA=s(100*this._a)/100,this._format=tt.format||rt.format,this._gradientType=tt.gradientType,this._r<1&&(this._r=s(this._r)),this._g<1&&(this._g=s(this._g)),this._b<1&&(this._b=s(this._b)),this._ok=rt.ok,this._tc_id=h++}function i(Z,tt,rt){Z=P(Z,255),tt=P(tt,255),rt=P(rt,255);var nt,ot,ct=t(Z,tt,rt),pt=e(Z,tt,rt),gt=(ct+pt)/2;if(ct==pt)nt=ot=0;else{var kt=ct-pt;switch(ot=gt>.5?kt/(2-ct-pt):kt/(ct+pt),ct){case Z:nt=(tt-rt)/kt+(tt<rt?6:0);break;case tt:nt=(rt-Z)/kt+2;break;case rt:nt=(Z-tt)/kt+4}nt/=6}return{h:nt,s:ot,l:gt}}function c(Z,tt,rt){Z=P(Z,255),tt=P(tt,255),rt=P(rt,255);var nt,ot,ct=t(Z,tt,rt),pt=e(Z,tt,rt),gt=ct,kt=ct-pt;if(ot=ct===0?0:kt/ct,ct==pt)nt=0;else{switch(ct){case Z:nt=(tt-rt)/kt+(tt<rt?6:0);break;case tt:nt=(rt-Z)/kt+2;break;case rt:nt=(Z-tt)/kt+4}nt/=6}return{h:nt,s:ot,v:gt}}function l(Z,tt,rt,nt){var ot=[j(s(Z).toString(16)),j(s(tt).toString(16)),j(s(rt).toString(16))];return nt&&ot[0].charAt(0)==ot[0].charAt(1)&&ot[1].charAt(0)==ot[1].charAt(1)&&ot[2].charAt(0)==ot[2].charAt(1)?ot[0].charAt(0)+ot[1].charAt(0)+ot[2].charAt(0):ot.join("")}function u(Z,tt,rt,nt){return[j(z(nt)),j(s(Z).toString(16)),j(s(tt).toString(16)),j(s(rt).toString(16))].join("")}function f(Z,tt){tt=tt===0?0:tt||10;var rt=a(Z).toHsl();return rt.s-=tt/100,rt.s=U(rt.s),a(rt)}function d(Z,tt){tt=tt===0?0:tt||10;var rt=a(Z).toHsl();return rt.s+=tt/100,rt.s=U(rt.s),a(rt)}function w(Z){return a(Z).desaturate(100)}function v(Z,tt){tt=tt===0?0:tt||10;var rt=a(Z).toHsl();return rt.l+=tt/100,rt.l=U(rt.l),a(rt)}function p(Z,tt){tt=tt===0?0:tt||10;var rt=a(Z).toRgb();return rt.r=t(0,e(255,rt.r-s(-tt/100*255))),rt.g=t(0,e(255,rt.g-s(-tt/100*255))),rt.b=t(0,e(255,rt.b-s(-tt/100*255))),a(rt)}function y(Z,tt){tt=tt===0?0:tt||10;var rt=a(Z).toHsl();return rt.l-=tt/100,rt.l=U(rt.l),a(rt)}function b(Z,tt){var rt=a(Z).toHsl(),nt=(rt.h+tt)%360;return rt.h=nt<0?360+nt:nt,a(rt)}function x(Z){var tt=a(Z).toHsl();return tt.h=(tt.h+180)%360,a(tt)}function _(Z){var tt=a(Z).toHsl(),rt=tt.h;return[a(Z),a({h:(rt+120)%360,s:tt.s,l:tt.l}),a({h:(rt+240)%360,s:tt.s,l:tt.l})]}function g(Z){var tt=a(Z).toHsl(),rt=tt.h;return[a(Z),a({h:(rt+90)%360,s:tt.s,l:tt.l}),a({h:(rt+180)%360,s:tt.s,l:tt.l}),a({h:(rt+270)%360,s:tt.s,l:tt.l})]}function A(Z){var tt=a(Z).toHsl(),rt=tt.h;return[a(Z),a({h:(rt+72)%360,s:tt.s,l:tt.l}),a({h:(rt+216)%360,s:tt.s,l:tt.l})]}function M(Z,tt,rt){tt=tt||6,rt=rt||30;var nt=a(Z).toHsl(),ot=360/rt,ct=[a(Z)];for(nt.h=(nt.h-(ot*tt>>1)+720)%360;--tt;)nt.h=(nt.h+ot)%360,ct.push(a(nt));return ct}function L(Z,tt){tt=tt||6;for(var rt=a(Z).toHsv(),nt=rt.h,ot=rt.s,ct=rt.v,pt=[],gt=1/tt;tt--;)pt.push(a({h:nt,s:ot,v:ct})),ct=(ct+gt)%1;return pt}a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(299*Z.r+587*Z.g+114*Z.b)/1e3},getLuminance:function(){var Z,tt,rt,nt=this.toRgb();return Z=nt.r/255,tt=nt.g/255,rt=nt.b/255,.2126*(Z<=.03928?Z/12.92:k.pow((Z+.055)/1.055,2.4))+.7152*(tt<=.03928?tt/12.92:k.pow((tt+.055)/1.055,2.4))+.0722*(rt<=.03928?rt/12.92:k.pow((rt+.055)/1.055,2.4))},setAlpha:function(Z){return this._a=O(Z),this._roundA=s(100*this._a)/100,this},toHsv:function(){var Z=c(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=c(this._r,this._g,this._b),tt=s(360*Z.h),rt=s(100*Z.s),nt=s(100*Z.v);return this._a==1?"hsv("+tt+", "+rt+"%, "+nt+"%)":"hsva("+tt+", "+rt+"%, "+nt+"%, "+this._roundA+")"},toHsl:function(){var Z=i(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=i(this._r,this._g,this._b),tt=s(360*Z.h),rt=s(100*Z.s),nt=s(100*Z.l);return this._a==1?"hsl("+tt+", "+rt+"%, "+nt+"%)":"hsla("+tt+", "+rt+"%, "+nt+"%, "+this._roundA+")"},toHex:function(Z){return l(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return function(tt,rt,nt,ot,ct){var pt=[j(s(tt).toString(16)),j(s(rt).toString(16)),j(s(nt).toString(16)),j(z(ot))];return ct&&pt[0].charAt(0)==pt[0].charAt(1)&&pt[1].charAt(0)==pt[1].charAt(1)&&pt[2].charAt(0)==pt[2].charAt(1)&&pt[3].charAt(0)==pt[3].charAt(1)?pt[0].charAt(0)+pt[1].charAt(0)+pt[2].charAt(0)+pt[3].charAt(0):pt.join("")}(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:s(this._r),g:s(this._g),b:s(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+s(this._r)+", "+s(this._g)+", "+s(this._b)+")":"rgba("+s(this._r)+", "+s(this._g)+", "+s(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:s(100*P(this._r,255))+"%",g:s(100*P(this._g,255))+"%",b:s(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+s(100*P(this._r,255))+"%, "+s(100*P(this._g,255))+"%, "+s(100*P(this._b,255))+"%)":"rgba("+s(100*P(this._r,255))+"%, "+s(100*P(this._g,255))+"%, "+s(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(S[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Z){var tt="#"+u(this._r,this._g,this._b,this._a),rt=tt,nt=this._gradientType?"GradientType = 1, ":"";if(Z){var ot=a(Z);rt="#"+u(ot._r,ot._g,ot._b,ot._a)}return"progid:DXImageTransform.Microsoft.gradient("+nt+"startColorstr="+tt+",endColorstr="+rt+")"},toString:function(Z){var tt=!!Z;Z=Z||this._format;var rt=!1,nt=this._a<1&&this._a>=0;return tt||!nt||Z!=="hex"&&Z!=="hex6"&&Z!=="hex3"&&Z!=="hex4"&&Z!=="hex8"&&Z!=="name"?(Z==="rgb"&&(rt=this.toRgbString()),Z==="prgb"&&(rt=this.toPercentageRgbString()),Z!=="hex"&&Z!=="hex6"||(rt=this.toHexString()),Z==="hex3"&&(rt=this.toHexString(!0)),Z==="hex4"&&(rt=this.toHex8String(!0)),Z==="hex8"&&(rt=this.toHex8String()),Z==="name"&&(rt=this.toName()),Z==="hsl"&&(rt=this.toHslString()),Z==="hsv"&&(rt=this.toHsvString()),rt||this.toHexString()):Z==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return a(this.toString())},_applyModification:function(Z,tt){var rt=Z.apply(null,[this].concat([].slice.call(tt)));return this._r=rt._r,this._g=rt._g,this._b=rt._b,this.setAlpha(rt._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(d,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(Z,tt){return Z.apply(null,[this].concat([].slice.call(tt)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(L,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(g,arguments)}},a.fromRatio=function(Z,tt){if(typeof Z=="object"){var rt={};for(var nt in Z)Z.hasOwnProperty(nt)&&(rt[nt]=nt==="a"?Z[nt]:B(Z[nt]));Z=rt}return a(Z,tt)},a.equals=function(Z,tt){return!(!Z||!tt)&&a(Z).toRgbString()==a(tt).toRgbString()},a.random=function(){return a.fromRatio({r:n(),g:n(),b:n()})},a.mix=function(Z,tt,rt){rt=rt===0?0:rt||50;var nt=a(Z).toRgb(),ot=a(tt).toRgb(),ct=rt/100;return a({r:(ot.r-nt.r)*ct+nt.r,g:(ot.g-nt.g)*ct+nt.g,b:(ot.b-nt.b)*ct+nt.b,a:(ot.a-nt.a)*ct+nt.a})},a.readability=function(Z,tt){var rt=a(Z),nt=a(tt);return(k.max(rt.getLuminance(),nt.getLuminance())+.05)/(k.min(rt.getLuminance(),nt.getLuminance())+.05)},a.isReadable=function(Z,tt,rt){var nt,ot,ct,pt,gt,kt=a.readability(Z,tt);switch(ot=!1,(ct=rt,(pt=((ct=ct||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&pt!=="AAA"&&(pt="AA"),(gt=(ct.size||"small").toLowerCase())!=="small"&&gt!=="large"&&(gt="small"),nt={level:pt,size:gt}).level+nt.size){case"AAsmall":case"AAAlarge":ot=kt>=4.5;break;case"AAlarge":ot=kt>=3;break;case"AAAsmall":ot=kt>=7}return ot},a.mostReadable=function(Z,tt,rt){var nt,ot,ct,pt,gt=null,kt=0;ot=(rt=rt||{}).includeFallbackColors,ct=rt.level,pt=rt.size;for(var yt=0;yt<tt.length;yt++)(nt=a.readability(Z,tt[yt]))>kt&&(kt=nt,gt=a(tt[yt]));return a.isReadable(Z,gt,{level:ct,size:pt})||!ot?gt:(rt.includeFallbackColors=!1,a.mostReadable(Z,["#fff","#000"],rt))};var E=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=a.hexNames=function(Z){var tt={};for(var rt in Z)Z.hasOwnProperty(rt)&&(tt[Z[rt]]=rt);return tt}(E);function O(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function P(Z,tt){(function(nt){return typeof nt=="string"&&nt.indexOf(".")!=-1&&parseFloat(nt)===1})(Z)&&(Z="100%");var rt=function(nt){return typeof nt=="string"&&nt.indexOf("%")!=-1}(Z);return Z=e(tt,t(0,parseFloat(Z))),rt&&(Z=parseInt(Z*tt,10)/100),k.abs(Z-tt)<1e-6?1:Z%tt/parseFloat(tt)}function U(Z){return e(1,t(0,Z))}function R(Z){return parseInt(Z,16)}function j(Z){return Z.length==1?"0"+Z:""+Z}function B(Z){return Z<=1&&(Z=100*Z+"%"),Z}function z(Z){return k.round(255*parseFloat(Z)).toString(16)}function G(Z){return R(Z)/255}var V,et,J,X=(et="[\\s|\\(]+("+(V="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",J="[\\s|\\(]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",{CSS_UNIT:new RegExp(V),rgb:new RegExp("rgb"+et),rgba:new RegExp("rgba"+J),hsl:new RegExp("hsl"+et),hsla:new RegExp("hsla"+J),hsv:new RegExp("hsv"+et),hsva:new RegExp("hsva"+J),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Y(Z){return!!X.CSS_UNIT.exec(Z)}W.exports?W.exports=a:(T=function(){return a}.call(I,o,I,W))===void 0||(W.exports=T)})(Math)},57060:function(W){W.exports=o,W.exports.float32=W.exports.float=o,W.exports.fract32=W.exports.fract=function(T,k){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);k instanceof Float32Array||(k=o(T));for(var r=0,m=k.length;r<m;r++)k[r]=T[r]-k[r];return k}return o(T-o(T))};var I=new Float32Array(1);function o(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(I[0]=T,I[0])}},75686:function(W,I,o){var T=o(25677);W.exports=m;var k=96;function r(h,s){var e=T(getComputedStyle(h).getPropertyValue(s));return e[0]*m(e[1],h)}function m(h,s){switch(s=s||document.body,h=(h||"px").trim().toLowerCase(),s!==window&&s!==document||(s=document.body),h){case"%":return s.clientHeight/100;case"ch":case"ex":return function(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var a=r(n,"font-size")/128;return t.removeChild(n),a}(h,s);case"em":return r(s,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},96892:function(W,I,o){function T(m){return m}function k(m,h){return typeof h=="string"&&(h=m.objects[h]),h.type==="GeometryCollection"?{type:"FeatureCollection",features:h.geometries.map(function(s){return r(m,s)})}:r(m,h)}function r(m,h){var s=h.id,e=h.bbox,t=h.properties==null?{}:h.properties,n=function(a,i){var c=function(p){if(p==null)return T;var y,b,x=p.scale[0],_=p.scale[1],g=p.translate[0],A=p.translate[1];return function(M,L){L||(y=b=0);var E=2,S=M.length,O=new Array(S);for(O[0]=(y+=M[0])*x+g,O[1]=(b+=M[1])*_+A;E<S;)O[E]=M[E],++E;return O}}(a.transform),l=a.arcs;function u(p,y){y.length&&y.pop();for(var b=l[p<0?~p:p],x=0,_=b.length;x<_;++x)y.push(c(b[x],x));p<0&&function(g,A){for(var M,L=g.length,E=L-A;E<--L;)M=g[E],g[E++]=g[L],g[L]=M}(y,_)}function f(p){return c(p)}function d(p){for(var y=[],b=0,x=p.length;b<x;++b)u(p[b],y);return y.length<2&&y.push(y[0]),y}function w(p){for(var y=d(p);y.length<4;)y.push(y[0]);return y}function v(p){return p.map(w)}return function p(y){var b,x=y.type;switch(x){case"GeometryCollection":return{type:x,geometries:y.geometries.map(p)};case"Point":b=f(y.coordinates);break;case"MultiPoint":b=y.coordinates.map(f);break;case"LineString":b=d(y.arcs);break;case"MultiLineString":b=y.arcs.map(d);break;case"Polygon":b=v(y.arcs);break;case"MultiPolygon":b=y.arcs.map(v);break;default:return null}return{type:x,coordinates:b}}(i)}(m,h);return s==null&&e==null?{type:"Feature",properties:t,geometry:n}:e==null?{type:"Feature",id:s,properties:t,geometry:n}:{type:"Feature",id:s,bbox:e,properties:t,geometry:n}}o.d(I,{zL:function(){return k}})},73116:function(W,I,o){var T=o(24511);W.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch{return!1}return!T(k)}},69190:function(W,I,o){var T=o(24582),k=o(47403),r=o(9234),m=o(6048),h=function(s,e){return s.replace("%v",m(e))};W.exports=function(s,e,t){if(!k(t))throw new TypeError(h(e,s));if(!T(s)){if("default"in t)return t.default;if(t.isOptional)return null}var n=r(t.errorMessage);throw T(n)||(n=e),new TypeError(h(n,s))}},18497:function(W){W.exports=function(I){try{return I.toString()}catch{try{return String(I)}catch{return null}}}},6048:function(W,I,o){var T=o(18497),k=/[\n\r\u2028\u2029]/g;W.exports=function(r){var m=T(r);return m===null?"<Non-coercible to string value>":(m.length>100&&(m=m.slice(0,99)+"\u2026"),m=m.replace(k,function(h){switch(h){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function(W,I,o){var T=o(24582),k={object:!0,function:!0,undefined:!0};W.exports=function(r){return!!T(r)&&hasOwnProperty.call(k,typeof r)}},82527:function(W,I,o){var T=o(69190),k=o(84985);W.exports=function(r){return k(r)?r:T(r,"%v is not a plain function",arguments[1])}},84985:function(W,I,o){var T=o(73116),k=/^\s*class[\s{/}]/,r=Function.prototype.toString;W.exports=function(m){return!!T(m)&&!k.test(r.call(m))}},24511:function(W,I,o){var T=o(47403);W.exports=function(k){if(!T(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},9234:function(W,I,o){var T=o(24582),k=o(47403),r=Object.prototype.toString;W.exports=function(m){if(!T(m))return null;if(k(m)){var h=m.toString;if(typeof h!="function"||h===r)return null}try{return""+m}catch{return null}}},10424:function(W,I,o){var T=o(69190),k=o(24582);W.exports=function(r){return k(r)?r:T(r,"Cannot use %v",arguments[1])}},24582:function(W){W.exports=function(I){return I!=null}},58404:function(W,I,o){var T=o(13547),k=o(12129),r=o(12856).Buffer;o.g.__TYPEDARRAY_POOL||(o.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var m=typeof Uint8ClampedArray<"u",h=typeof BigUint64Array<"u",s=typeof BigInt64Array<"u",e=o.g.__TYPEDARRAY_POOL;e.UINT8C||(e.UINT8C=k([32,0])),e.BIGUINT64||(e.BIGUINT64=k([32,0])),e.BIGINT64||(e.BIGINT64=k([32,0])),e.BUFFER||(e.BUFFER=k([32,0]));var t=e.DATA,n=e.BUFFER;function a(A){if(A){var M=A.length||A.byteLength,L=T.log2(M);t[L].push(A)}}function i(A){A=T.nextPow2(A);var M=T.log2(A),L=t[M];return L.length>0?L.pop():new ArrayBuffer(A)}function c(A){return new Uint8Array(i(A),0,A)}function l(A){return new Uint16Array(i(2*A),0,A)}function u(A){return new Uint32Array(i(4*A),0,A)}function f(A){return new Int8Array(i(A),0,A)}function d(A){return new Int16Array(i(2*A),0,A)}function w(A){return new Int32Array(i(4*A),0,A)}function v(A){return new Float32Array(i(4*A),0,A)}function p(A){return new Float64Array(i(8*A),0,A)}function y(A){return m?new Uint8ClampedArray(i(A),0,A):c(A)}function b(A){return h?new BigUint64Array(i(8*A),0,A):null}function x(A){return s?new BigInt64Array(i(8*A),0,A):null}function _(A){return new DataView(i(A),0,A)}function g(A){A=T.nextPow2(A);var M=T.log2(A),L=n[M];return L.length>0?L.pop():new r(A)}I.free=function(A){if(r.isBuffer(A))n[T.log2(A.length)].push(A);else{if(Object.prototype.toString.call(A)!=="[object ArrayBuffer]"&&(A=A.buffer),!A)return;var M=A.length||A.byteLength,L=0|T.log2(M);t[L].push(A)}},I.freeUint8=I.freeUint16=I.freeUint32=I.freeBigUint64=I.freeInt8=I.freeInt16=I.freeInt32=I.freeBigInt64=I.freeFloat32=I.freeFloat=I.freeFloat64=I.freeDouble=I.freeUint8Clamped=I.freeDataView=function(A){a(A.buffer)},I.freeArrayBuffer=a,I.freeBuffer=function(A){n[T.log2(A.length)].push(A)},I.malloc=function(A,M){if(M===void 0||M==="arraybuffer")return i(A);switch(M){case"uint8":return c(A);case"uint16":return l(A);case"uint32":return u(A);case"int8":return f(A);case"int16":return d(A);case"int32":return w(A);case"float":case"float32":return v(A);case"double":case"float64":return p(A);case"uint8_clamped":return y(A);case"bigint64":return x(A);case"biguint64":return b(A);case"buffer":return g(A);case"data":case"dataview":return _(A);default:return null}return null},I.mallocArrayBuffer=i,I.mallocUint8=c,I.mallocUint16=l,I.mallocUint32=u,I.mallocInt8=f,I.mallocInt16=d,I.mallocInt32=w,I.mallocFloat32=I.mallocFloat=v,I.mallocFloat64=I.mallocDouble=p,I.mallocUint8Clamped=y,I.mallocBigUint64=b,I.mallocBigInt64=x,I.mallocDataView=_,I.mallocBuffer=g,I.clearCache=function(){for(var A=0;A<32;++A)e.UINT8[A].length=0,e.UINT16[A].length=0,e.UINT32[A].length=0,e.INT8[A].length=0,e.INT16[A].length=0,e.INT32[A].length=0,e.FLOAT[A].length=0,e.DOUBLE[A].length=0,e.BIGUINT64[A].length=0,e.BIGINT64[A].length=0,e.UINT8C[A].length=0,t[A].length=0,n[A].length=0}},90448:function(W){var I=/[\'\"]/;W.exports=function(o){return o?(I.test(o.charAt(0))&&(o=o.substr(1)),I.test(o.charAt(o.length-1))&&(o=o.substr(0,o.length-1)),o):""}},93447:function(W){W.exports=function(I,o,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var k=0,r=T.length;k<r;k++){var m=T[k];for(var h in m)if((o[h]===void 0||Array.isArray(o[h])||I[h]!==o[h])&&h in o){var s;if(m[h]===!0)s=o[h];else if(m[h]===!1||typeof m[h]=="function"&&(s=m[h](o[h],I,o))===void 0)continue;I[h]=s}}return I}},20588:function(W,I,o){function T(k){try{if(!o.g.localStorage)return!1}catch{return!1}var r=o.g.localStorage[k];return r!=null&&String(r).toLowerCase()==="true"}W.exports=function(k,r){if(T("noDeprecation"))return k;var m=!1;return function(){if(!m){if(T("throwDeprecation"))throw new Error(r);T("traceDeprecation")?console.trace(r):console.warn(r),m=!0}return k.apply(this,arguments)}}},45920:function(W){W.exports=function(I){return I&&typeof I=="object"&&typeof I.copy=="function"&&typeof I.fill=="function"&&typeof I.readUInt8=="function"}},4936:function(W,I,o){var T=o(47216),k=o(65481),r=o(21099),m=o(9187);function h(P){return P.call.bind(P)}var s=typeof BigInt<"u",e=typeof Symbol<"u",t=h(Object.prototype.toString),n=h(Number.prototype.valueOf),a=h(String.prototype.valueOf),i=h(Boolean.prototype.valueOf);if(s)var c=h(BigInt.prototype.valueOf);if(e)var l=h(Symbol.prototype.valueOf);function u(P,U){if(typeof P!="object")return!1;try{return U(P),!0}catch{return!1}}function f(P){return t(P)==="[object Map]"}function d(P){return t(P)==="[object Set]"}function w(P){return t(P)==="[object WeakMap]"}function v(P){return t(P)==="[object WeakSet]"}function p(P){return t(P)==="[object ArrayBuffer]"}function y(P){return typeof ArrayBuffer<"u"&&(p.working?p(P):P instanceof ArrayBuffer)}function b(P){return t(P)==="[object DataView]"}function x(P){return typeof DataView<"u"&&(b.working?b(P):P instanceof DataView)}I.isArgumentsObject=T,I.isGeneratorFunction=k,I.isTypedArray=m,I.isPromise=function(P){return typeof Promise<"u"&&P instanceof Promise||P!==null&&typeof P=="object"&&typeof P.then=="function"&&typeof P.catch=="function"},I.isArrayBufferView=function(P){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(P):m(P)||x(P)},I.isUint8Array=function(P){return r(P)==="Uint8Array"},I.isUint8ClampedArray=function(P){return r(P)==="Uint8ClampedArray"},I.isUint16Array=function(P){return r(P)==="Uint16Array"},I.isUint32Array=function(P){return r(P)==="Uint32Array"},I.isInt8Array=function(P){return r(P)==="Int8Array"},I.isInt16Array=function(P){return r(P)==="Int16Array"},I.isInt32Array=function(P){return r(P)==="Int32Array"},I.isFloat32Array=function(P){return r(P)==="Float32Array"},I.isFloat64Array=function(P){return r(P)==="Float64Array"},I.isBigInt64Array=function(P){return r(P)==="BigInt64Array"},I.isBigUint64Array=function(P){return r(P)==="BigUint64Array"},f.working=typeof Map<"u"&&f(new Map),I.isMap=function(P){return typeof Map<"u"&&(f.working?f(P):P instanceof Map)},d.working=typeof Set<"u"&&d(new Set),I.isSet=function(P){return typeof Set<"u"&&(d.working?d(P):P instanceof Set)},w.working=typeof WeakMap<"u"&&w(new WeakMap),I.isWeakMap=function(P){return typeof WeakMap<"u"&&(w.working?w(P):P instanceof WeakMap)},v.working=typeof WeakSet<"u"&&v(new WeakSet),I.isWeakSet=function(P){return v(P)},p.working=typeof ArrayBuffer<"u"&&p(new ArrayBuffer),I.isArrayBuffer=y,b.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&b(new DataView(new ArrayBuffer(1),0,1)),I.isDataView=x;var _=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function g(P){return t(P)==="[object SharedArrayBuffer]"}function A(P){return _!==void 0&&(g.working===void 0&&(g.working=g(new _)),g.working?g(P):P instanceof _)}function M(P){return u(P,n)}function L(P){return u(P,a)}function E(P){return u(P,i)}function S(P){return s&&u(P,c)}function O(P){return e&&u(P,l)}I.isSharedArrayBuffer=A,I.isAsyncFunction=function(P){return t(P)==="[object AsyncFunction]"},I.isMapIterator=function(P){return t(P)==="[object Map Iterator]"},I.isSetIterator=function(P){return t(P)==="[object Set Iterator]"},I.isGeneratorObject=function(P){return t(P)==="[object Generator]"},I.isWebAssemblyCompiledModule=function(P){return t(P)==="[object WebAssembly.Module]"},I.isNumberObject=M,I.isStringObject=L,I.isBooleanObject=E,I.isBigIntObject=S,I.isSymbolObject=O,I.isBoxedPrimitive=function(P){return M(P)||L(P)||E(P)||S(P)||O(P)},I.isAnyArrayBuffer=function(P){return typeof Uint8Array<"u"&&(y(P)||A(P))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(P){Object.defineProperty(I,P,{enumerable:!1,value:function(){throw new Error(P+" is not supported in userland")}})})},43827:function(W,I,o){var T=o(90386),k=Object.getOwnPropertyDescriptors||function(O){for(var P=Object.keys(O),U={},R=0;R<P.length;R++)U[P[R]]=Object.getOwnPropertyDescriptor(O,P[R]);return U},r=/%[sdj%]/g;I.format=function(O){if(!w(O)){for(var P=[],U=0;U<arguments.length;U++)P.push(e(arguments[U]));return P.join(" ")}U=1;for(var R=arguments,j=R.length,B=String(O).replace(r,function(G){if(G==="%%")return"%";if(U>=j)return G;switch(G){case"%s":return String(R[U++]);case"%d":return Number(R[U++]);case"%j":try{return JSON.stringify(R[U++])}catch{return"[Circular]"}default:return G}}),z=R[U];U<j;z=R[++U])f(z)||!y(z)?B+=" "+z:B+=" "+e(z);return B},I.deprecate=function(O,P){if(T!==void 0&&T.noDeprecation===!0)return O;if(T===void 0)return function(){return I.deprecate(O,P).apply(this,arguments)};var U=!1;return function(){if(!U){if(T.throwDeprecation)throw new Error(P);T.traceDeprecation?console.trace(P):console.error(P),U=!0}return O.apply(this,arguments)}};var m={},h=/^$/;if(T.env.NODE_DEBUG){var s=T.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),h=new RegExp("^"+s+"$","i")}function e(O,P){var U={seen:[],stylize:n};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),u(P)?U.showHidden=P:P&&I._extend(U,P),v(U.showHidden)&&(U.showHidden=!1),v(U.depth)&&(U.depth=2),v(U.colors)&&(U.colors=!1),v(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=t),a(U,O,U.depth)}function t(O,P){var U=e.styles[P];return U?"\x1B["+e.colors[U][0]+"m"+O+"\x1B["+e.colors[U][1]+"m":O}function n(O,P){return O}function a(O,P,U){if(O.customInspect&&P&&_(P.inspect)&&P.inspect!==I.inspect&&(!P.constructor||P.constructor.prototype!==P)){var R=P.inspect(U,O);return w(R)||(R=a(O,R,U)),R}var j=function(Y,Z){if(v(Z))return Y.stylize("undefined","undefined");if(w(Z)){var tt="'"+JSON.stringify(Z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Y.stylize(tt,"string")}return d(Z)?Y.stylize(""+Z,"number"):u(Z)?Y.stylize(""+Z,"boolean"):f(Z)?Y.stylize("null","null"):void 0}(O,P);if(j)return j;var B=Object.keys(P),z=function(Y){var Z={};return Y.forEach(function(tt,rt){Z[tt]=!0}),Z}(B);if(O.showHidden&&(B=Object.getOwnPropertyNames(P)),x(P)&&(B.indexOf("message")>=0||B.indexOf("description")>=0))return i(P);if(B.length===0){if(_(P)){var G=P.name?": "+P.name:"";return O.stylize("[Function"+G+"]","special")}if(p(P))return O.stylize(RegExp.prototype.toString.call(P),"regexp");if(b(P))return O.stylize(Date.prototype.toString.call(P),"date");if(x(P))return i(P)}var V,et="",J=!1,X=["{","}"];return l(P)&&(J=!0,X=["[","]"]),_(P)&&(et=" [Function"+(P.name?": "+P.name:"")+"]"),p(P)&&(et=" "+RegExp.prototype.toString.call(P)),b(P)&&(et=" "+Date.prototype.toUTCString.call(P)),x(P)&&(et=" "+i(P)),B.length!==0||J&&P.length!=0?U<0?p(P)?O.stylize(RegExp.prototype.toString.call(P),"regexp"):O.stylize("[Object]","special"):(O.seen.push(P),V=J?function(Y,Z,tt,rt,nt){for(var ot=[],ct=0,pt=Z.length;ct<pt;++ct)L(Z,String(ct))?ot.push(c(Y,Z,tt,rt,String(ct),!0)):ot.push("");return nt.forEach(function(gt){gt.match(/^\d+$/)||ot.push(c(Y,Z,tt,rt,gt,!0))}),ot}(O,P,U,z,B):B.map(function(Y){return c(O,P,U,z,Y,J)}),O.seen.pop(),function(Y,Z,tt){return Y.reduce(function(rt,nt){return nt.indexOf(`
`),rt+nt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?tt[0]+(Z===""?"":Z+`
 `)+" "+Y.join(`,
  `)+" "+tt[1]:tt[0]+Z+" "+Y.join(", ")+" "+tt[1]}(V,et,X)):X[0]+et+X[1]}function i(O){return"["+Error.prototype.toString.call(O)+"]"}function c(O,P,U,R,j,B){var z,G,V;if((V=Object.getOwnPropertyDescriptor(P,j)||{value:P[j]}).get?G=V.set?O.stylize("[Getter/Setter]","special"):O.stylize("[Getter]","special"):V.set&&(G=O.stylize("[Setter]","special")),L(R,j)||(z="["+j+"]"),G||(O.seen.indexOf(V.value)<0?(G=f(U)?a(O,V.value,null):a(O,V.value,U-1)).indexOf(`
`)>-1&&(G=B?G.split(`
`).map(function(et){return"  "+et}).join(`
`).slice(2):`
`+G.split(`
`).map(function(et){return"   "+et}).join(`
`)):G=O.stylize("[Circular]","special")),v(z)){if(B&&j.match(/^\d+$/))return G;(z=JSON.stringify(""+j)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(z=z.slice(1,-1),z=O.stylize(z,"name")):(z=z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),z=O.stylize(z,"string"))}return z+": "+G}function l(O){return Array.isArray(O)}function u(O){return typeof O=="boolean"}function f(O){return O===null}function d(O){return typeof O=="number"}function w(O){return typeof O=="string"}function v(O){return O===void 0}function p(O){return y(O)&&g(O)==="[object RegExp]"}function y(O){return typeof O=="object"&&O!==null}function b(O){return y(O)&&g(O)==="[object Date]"}function x(O){return y(O)&&(g(O)==="[object Error]"||O instanceof Error)}function _(O){return typeof O=="function"}function g(O){return Object.prototype.toString.call(O)}function A(O){return O<10?"0"+O.toString(10):O.toString(10)}I.debuglog=function(O){if(O=O.toUpperCase(),!m[O])if(h.test(O)){var P=T.pid;m[O]=function(){var U=I.format.apply(I,arguments);console.error("%s %d: %s",O,P,U)}}else m[O]=function(){};return m[O]},I.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},I.types=o(4936),I.isArray=l,I.isBoolean=u,I.isNull=f,I.isNullOrUndefined=function(O){return O==null},I.isNumber=d,I.isString=w,I.isSymbol=function(O){return typeof O=="symbol"},I.isUndefined=v,I.isRegExp=p,I.types.isRegExp=p,I.isObject=y,I.isDate=b,I.types.isDate=b,I.isError=x,I.types.isNativeError=x,I.isFunction=_,I.isPrimitive=function(O){return O===null||typeof O=="boolean"||typeof O=="number"||typeof O=="string"||typeof O=="symbol"||O===void 0},I.isBuffer=o(45920);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(O,P){return Object.prototype.hasOwnProperty.call(O,P)}I.log=function(){var O,P;console.log("%s - %s",(P=[A((O=new Date).getHours()),A(O.getMinutes()),A(O.getSeconds())].join(":"),[O.getDate(),M[O.getMonth()],P].join(" ")),I.format.apply(I,arguments))},I.inherits=o(42018),I._extend=function(O,P){if(!P||!y(P))return O;for(var U=Object.keys(P),R=U.length;R--;)O[U[R]]=P[U[R]];return O};var E=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function S(O,P){if(!O){var U=new Error("Promise was rejected with a falsy value");U.reason=O,O=U}return P(O)}I.promisify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');if(E&&O[E]){var P;if(typeof(P=O[E])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(P,E,{value:P,enumerable:!1,writable:!1,configurable:!0}),P}function P(){for(var U,R,j=new Promise(function(G,V){U=G,R=V}),B=[],z=0;z<arguments.length;z++)B.push(arguments[z]);B.push(function(G,V){G?R(G):U(V)});try{O.apply(this,B)}catch(G){R(G)}return j}return Object.setPrototypeOf(P,Object.getPrototypeOf(O)),E&&Object.defineProperty(P,E,{value:P,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(P,k(O))},I.promisify.custom=E,I.callbackify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');function P(){for(var U=[],R=0;R<arguments.length;R++)U.push(arguments[R]);var j=U.pop();if(typeof j!="function")throw new TypeError("The last argument must be of type Function");var B=this,z=function(){return j.apply(B,arguments)};O.apply(this,U).then(function(G){T.nextTick(z.bind(null,null,G))},function(G){T.nextTick(S.bind(null,G,z))})}return Object.setPrototypeOf(P,Object.getPrototypeOf(O)),Object.defineProperties(P,k(O)),P}},40372:function(W,I,o){var T=o(86249);W.exports=function(k){return T("webgl",k)}},21099:function(W,I,o){var T=o(31353),k=o(72077),r=o(6614),m=o(40383),h=r("Object.prototype.toString"),s=o(84543)(),e=typeof globalThis>"u"?o.g:globalThis,t=k(),n=r("String.prototype.slice"),a={},i=Object.getPrototypeOf;s&&m&&i&&T(t,function(l){if(typeof e[l]=="function"){var u=new e[l];if(Symbol.toStringTag in u){var f=i(u),d=m(f,Symbol.toStringTag);if(!d){var w=i(f);d=m(w,Symbol.toStringTag)}a[l]=d.get}}});var c=o(9187);W.exports=function(l){return!!c(l)&&(s&&Symbol.toStringTag in l?function(u){var f=!1;return T(a,function(d,w){if(!f)try{var v=d.call(u);v===w&&(f=v)}catch{}}),f}(l):n(h(l),8,-1))}},3961:function(W,I,o){var T=o(63489),k=o(56131),r=T.instance();function m(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}m.prototype=new T.baseCalendar,k(m.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(i,c){if(typeof i=="string"){var l=i.match(s);return l?l[0]:""}var u=this._validateYear(i),f=i.month(),d=""+this.toChineseMonth(u,f);return c&&d.length<2&&(d="0"+d),this.isIntercalaryMonth(u,f)&&(d+="i"),d},monthNames:function(i){if(typeof i=="string"){var c=i.match(e);return c?c[0]:""}var l=this._validateYear(i),u=i.month(),f=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(f="\u95F0"+f),f},monthNamesShort:function(i){if(typeof i=="string"){var c=i.match(t);return c?c[0]:""}var l=this._validateYear(i),u=i.month(),f=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(f="\u95F0"+f),f},parseMonth:function(i,c){i=this._validateYear(i);var l,u=parseInt(c);if(isNaN(u))c[0]==="\u95F0"&&(l=!0,c=c.substring(1)),c[c.length-1]==="\u6708"&&(c=c.substring(0,c.length-1)),u=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(c);else{var f=c[c.length-1];l=f==="i"||f==="I"}return this.toMonthIndex(i,u,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(i,c){if(i.year&&(i=i.year()),typeof i!="number"||i<1888||i>2111)throw c.replace(/\{0\}/,this.local.name);return i},toMonthIndex:function(i,c,l){var u=this.intercalaryMonth(i);if(l&&c!==u||c<1||c>12)throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!l&&c<=u?c-1:c:c-1},toChineseMonth:function(i,c){i.year&&(c=(i=i.year()).month());var l=this.intercalaryMonth(i);if(c<0||c>(l?12:11))throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?c<l?c+1:c:c+1},intercalaryMonth:function(i){return i=this._validateYear(i),n[i-n[0]]>>13},isIntercalaryMonth:function(i,c){i.year&&(c=(i=i.year()).month());var l=this.intercalaryMonth(i);return!!l&&l===c},leapYear:function(i){return this.intercalaryMonth(i)!==0},weekOfYear:function(i,c,l){var u,f=this._validateYear(i,T.local.invalidyear),d=a[f-a[0]],w=d>>9&4095,v=d>>5&15,p=31&d;(u=r.newDate(w,v,p)).add(4-(u.dayOfWeek()||7),"d");var y=this.toJD(i,c,l)-u.toJD();return 1+Math.floor(y/7)},monthsInYear:function(i){return this.leapYear(i)?13:12},daysInMonth:function(i,c){i.year&&(c=i.month(),i=i.year()),i=this._validateYear(i);var l=n[i-n[0]];if(c>(l>>13?12:11))throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-c?30:29},weekDay:function(i,c,l){return(this.dayOfWeek(i,c,l)||7)<6},toJD:function(i,c,l){var u=this._validate(i,d,l,T.local.invalidDate);i=this._validateYear(u.year()),c=u.month(),l=u.day();var f=this.isIntercalaryMonth(i,c),d=this.toChineseMonth(i,c),w=function(v,p,y,b,x){var _,g,A;if(typeof v=="object")g=v,_=p||{};else{var M;if(!(typeof v=="number"&&v>=1888&&v<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof p=="number"&&p>=1&&p<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof y=="number"&&y>=1&&y<=30))throw new Error("Lunar day outside range 1 - 30");typeof b=="object"?(M=!1,_=b):(M=!!b,_={}),g={year:v,month:p,day:y,isIntercalary:M}}A=g.day-1;var L,E=n[g.year-n[0]],S=E>>13;L=S&&(g.month>S||g.isIntercalary)?g.month:g.month-1;for(var O=0;O<L;O++)A+=E&1<<12-O?30:29;var P=a[g.year-a[0]],U=new Date(P>>9&4095,(P>>5&15)-1,(31&P)+A);return _.year=U.getFullYear(),_.month=1+U.getMonth(),_.day=U.getDate(),_}(i,d,l,f);return r.toJD(w.year,w.month,w.day)},fromJD:function(i){var c=r.fromJD(i),l=function(f,d,w,v){var p,y;if(typeof f=="object")p=f,y=d||{};else{if(!(typeof f=="number"&&f>=1888&&f<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof d=="number"&&d>=1&&d<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof w=="number"&&w>=1&&w<=31))throw new Error("Solar day outside range 1 - 31");p={year:f,month:d,day:w},y={}}var b=a[p.year-a[0]],x=p.year<<9|p.month<<5|p.day;y.year=x>=b?p.year:p.year-1,b=a[y.year-a[0]];var _,g=new Date(b>>9&4095,(b>>5&15)-1,31&b),A=new Date(p.year,p.month-1,p.day);_=Math.round((A-g)/864e5);var M,L=n[y.year-n[0]];for(M=0;M<13;M++){var E=L&1<<12-M?30:29;if(_<E)break;_-=E}var S=L>>13;return!S||M<S?(y.isIntercalary=!1,y.month=1+M):M===S?(y.isIntercalary=!0,y.month=M):(y.isIntercalary=!1,y.month=M),y.day=1+_,y}(c.year(),c.month(),c.day()),u=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,u,l.day)},fromString:function(i){var c=i.match(h),l=this._validateYear(+c[1]),u=+c[2],f=!!c[3],d=this.toMonthIndex(l,u,f),w=+c[4];return this.newDate(l,d,w)},add:function(i,c,l){var u=i.year(),f=i.month(),d=this.isIntercalaryMonth(u,f),w=this.toChineseMonth(u,f),v=Object.getPrototypeOf(m.prototype).add.call(this,i,c,l);if(l==="y"){var p=v.year(),y=v.month(),b=this.isIntercalaryMonth(p,w),x=d&&b?this.toMonthIndex(p,w,!0):this.toMonthIndex(p,w,!1);x!==y&&v.month(x)}return v}});var h=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,s=/^\d?\d[iI]?/m,e=/^??[]?/m,t=/^??[]?/m;T.calendars.chinese=m;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],a=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(W,I,o){var T=o(63489),k=o(56131);function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}r.prototype=new T.baseCalendar,k(r.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var h=this._validate(m,this.minMonth,this.minDay,T.local.invalidYear);return(m=h.year()+(h.year()<0?1:0))%4==3||m%4==-1},monthsInYear:function(m){return this._validate(m,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear),13},weekOfYear:function(m,h,s){var e=this.newDate(m,h,s);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(m,h){var s=this._validate(m,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===13&&this.leapYear(s.year())?1:0)},weekDay:function(m,h,s){return(this.dayOfWeek(m,h,s)||7)<6},toJD:function(m,h,s){var e=this._validate(m,h,s,T.local.invalidDate);return(m=e.year())<0&&m++,e.day()+30*(e.month()-1)+365*(m-1)+Math.floor(m/4)+this.jdEpoch-1},fromJD:function(m){var h=Math.floor(m)+.5-this.jdEpoch,s=Math.floor((h-Math.floor((h+366)/1461))/365)+1;s<=0&&s--,h=Math.floor(m)+.5-this.newDate(s,1,1).toJD();var e=Math.floor(h/30)+1,t=h-30*(e-1)+1;return this.newDate(s,e,t)}}),T.calendars.coptic=r},86825:function(W,I,o){var T=o(63489),k=o(56131);function r(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}r.prototype=new T.baseCalendar,k(r.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(h){return this._validate(h,this.minMonth,this.minDay,T.local.invalidYear),!1},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,T.local.invalidYear),13},daysInYear:function(h){return this._validate(h,this.minMonth,this.minDay,T.local.invalidYear),400},weekOfYear:function(h,s,e){var t=this.newDate(h,s,e);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(h,s){var e=this._validate(h,s,this.minDay,T.local.invalidMonth);return this.daysPerMonth[e.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(h,s,e){return(this._validate(h,s,e,T.local.invalidDate).day()+1)%8},weekDay:function(h,s,e){var t=this.dayOfWeek(h,s,e);return t>=2&&t<=6},extraInfo:function(h,s,e){var t=this._validate(h,s,e,T.local.invalidDate);return{century:m[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(h,s,e){var t=this._validate(h,s,e,T.local.invalidDate);return h=t.year()+(t.year()<0?1:0),s=t.month(),(e=t.day())+(s>1?16:0)+(s>2?32*(s-2):0)+400*(h-1)+this.jdEpoch-1},fromJD:function(h){h=Math.floor(h+.5)-Math.floor(this.jdEpoch)-1;var s=Math.floor(h/400)+1;h-=400*(s-1),h+=h>15?16:0;var e=Math.floor(h/32)+1,t=h-32*(e-1)+1;return this.newDate(s<=0?s-1:s,e,t)}});var m={20:"Fruitbat",21:"Anchovy"};T.calendars.discworld=r},37715:function(W,I,o){var T=o(63489),k=o(56131);function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}r.prototype=new T.baseCalendar,k(r.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var h=this._validate(m,this.minMonth,this.minDay,T.local.invalidYear);return(m=h.year()+(h.year()<0?1:0))%4==3||m%4==-1},monthsInYear:function(m){return this._validate(m,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear),13},weekOfYear:function(m,h,s){var e=this.newDate(m,h,s);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(m,h){var s=this._validate(m,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===13&&this.leapYear(s.year())?1:0)},weekDay:function(m,h,s){return(this.dayOfWeek(m,h,s)||7)<6},toJD:function(m,h,s){var e=this._validate(m,h,s,T.local.invalidDate);return(m=e.year())<0&&m++,e.day()+30*(e.month()-1)+365*(m-1)+Math.floor(m/4)+this.jdEpoch-1},fromJD:function(m){var h=Math.floor(m)+.5-this.jdEpoch,s=Math.floor((h-Math.floor((h+366)/1461))/365)+1;s<=0&&s--,h=Math.floor(m)+.5-this.newDate(s,1,1).toJD();var e=Math.floor(h/30)+1,t=h-30*(e-1)+1;return this.newDate(s,e,t)}}),T.calendars.ethiopian=r},99384:function(W,I,o){var T=o(63489),k=o(56131);function r(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function m(h,s){return h-s*Math.floor(h/s)}r.prototype=new T.baseCalendar,k(r.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var s=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear);return this._leapYear(s.year())},_leapYear:function(h){return m(7*(h=h<0?h+1:h)+1,19)<7},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,T.local.invalidYear),this._leapYear(h.year?h.year():h)?13:12},weekOfYear:function(h,s,e){var t=this.newDate(h,s,e);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(h){return h=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear).year(),this.toJD(h===-1?1:h+1,7,1)-this.toJD(h,7,1)},daysInMonth:function(h,s){return h.year&&(s=h.month(),h=h.year()),this._validate(h,s,this.minDay,T.local.invalidMonth),s===12&&this.leapYear(h)||s===8&&m(this.daysInYear(h),10)===5?30:s===9&&m(this.daysInYear(h),10)===3?29:this.daysPerMonth[s-1]},weekDay:function(h,s,e){return this.dayOfWeek(h,s,e)!==6},extraInfo:function(h,s,e){var t=this._validate(h,s,e,T.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(h,s,e){var t=this._validate(h,s,e,T.local.invalidDate);h=t.year(),s=t.month(),e=t.day();var n=h<=0?h+1:h,a=this.jdEpoch+this._delay1(n)+this._delay2(n)+e+1;if(s<7){for(var i=7;i<=this.monthsInYear(h);i++)a+=this.daysInMonth(h,i);for(i=1;i<s;i++)a+=this.daysInMonth(h,i)}else for(i=7;i<s;i++)a+=this.daysInMonth(h,i);return a},_delay1:function(h){var s=Math.floor((235*h-234)/19),e=12084+13753*s,t=29*s+Math.floor(e/25920);return m(3*(t+1),7)<3&&t++,t},_delay2:function(h){var s=this._delay1(h-1),e=this._delay1(h);return this._delay1(h+1)-e==356?2:e-s==382?1:0},fromJD:function(h){h=Math.floor(h)+.5;for(var s=Math.floor(98496*(h-this.jdEpoch)/35975351)-1;h>=this.toJD(s===-1?1:s+1,7,1);)s++;for(var e=h<this.toJD(s,1,1)?7:1;h>this.toJD(s,e,this.daysInMonth(s,e));)e++;var t=h-this.toJD(s,e,1)+1;return this.newDate(s,e,t)}}),T.calendars.hebrew=r},43805:function(W,I,o){var T=o(63489),k=o(56131);function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}r.prototype=new T.baseCalendar,k(r.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(m){return(11*this._validate(m,this.minMonth,this.minDay,T.local.invalidYear).year()+14)%30<11},weekOfYear:function(m,h,s){var e=this.newDate(m,h,s);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(m){return this.leapYear(m)?355:354},daysInMonth:function(m,h){var s=this._validate(m,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(m,h,s){return this.dayOfWeek(m,h,s)!==5},toJD:function(m,h,s){var e=this._validate(m,h,s,T.local.invalidDate);return m=e.year(),h=e.month(),m=m<=0?m+1:m,(s=e.day())+Math.ceil(29.5*(h-1))+354*(m-1)+Math.floor((3+11*m)/30)+this.jdEpoch-1},fromJD:function(m){m=Math.floor(m)+.5;var h=Math.floor((30*(m-this.jdEpoch)+10646)/10631);h=h<=0?h-1:h;var s=Math.min(12,Math.ceil((m-29-this.toJD(h,1,1))/29.5)+1),e=m-this.toJD(h,s,1)+1;return this.newDate(h,s,e)}}),T.calendars.islamic=r},88874:function(W,I,o){var T=o(63489),k=o(56131);function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}r.prototype=new T.baseCalendar,k(r.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var h=this._validate(m,this.minMonth,this.minDay,T.local.invalidYear);return(m=h.year()<0?h.year()+1:h.year())%4==0},weekOfYear:function(m,h,s){var e=this.newDate(m,h,s);return e.add(4-(e.dayOfWeek()||7),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(m,h){var s=this._validate(m,h,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(m,h,s){return(this.dayOfWeek(m,h,s)||7)<6},toJD:function(m,h,s){var e=this._validate(m,h,s,T.local.invalidDate);return m=e.year(),h=e.month(),s=e.day(),m<0&&m++,h<=2&&(m--,h+=12),Math.floor(365.25*(m+4716))+Math.floor(30.6001*(h+1))+s-1524.5},fromJD:function(m){var h=Math.floor(m+.5)+1524,s=Math.floor((h-122.1)/365.25),e=Math.floor(365.25*s),t=Math.floor((h-e)/30.6001),n=t-Math.floor(t<14?1:13),a=s-Math.floor(n>2?4716:4715),i=h-e-Math.floor(30.6001*t);return a<=0&&a--,this.newDate(a,n,i)}}),T.calendars.julian=r},83290:function(W,I,o){var T=o(63489),k=o(56131);function r(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}function m(s,e){return s-e*Math.floor(s/e)}function h(s,e){return m(s-1,e)+1}r.prototype=new T.baseCalendar,k(r.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(s){return this._validate(s,this.minMonth,this.minDay,T.local.invalidYear),!1},formatYear:function(s){s=this._validate(s,this.minMonth,this.minDay,T.local.invalidYear).year();var e=Math.floor(s/400);return s%=400,s+=s<0?400:0,e+"."+Math.floor(s/20)+"."+s%20},forYear:function(s){if((s=s.split(".")).length<3)throw"Invalid Mayan year";for(var e=0,t=0;t<s.length;t++){var n=parseInt(s[t],10);if(Math.abs(n)>19||t>0&&n<0)throw"Invalid Mayan year";e=20*e+n}return e},monthsInYear:function(s){return this._validate(s,this.minMonth,this.minDay,T.local.invalidYear),18},weekOfYear:function(s,e,t){return this._validate(s,e,t,T.local.invalidDate),0},daysInYear:function(s){return this._validate(s,this.minMonth,this.minDay,T.local.invalidYear),360},daysInMonth:function(s,e){return this._validate(s,e,this.minDay,T.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(s,e,t){return this._validate(s,e,t,T.local.invalidDate).day()},weekDay:function(s,e,t){return this._validate(s,e,t,T.local.invalidDate),!0},extraInfo:function(s,e,t){var n=this._validate(s,e,t,T.local.invalidDate).toJD(),a=this._toHaab(n),i=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],tzolkinDayName:this.local.tzolkinMonths[i[0]-1],tzolkinDay:i[0],tzolkinTrecena:i[1]}},_toHaab:function(s){var e=m(8+(s-=this.jdEpoch)+340,365);return[Math.floor(e/20)+1,m(e,20)]},_toTzolkin:function(s){return[h(20+(s-=this.jdEpoch),20),h(s+4,13)]},toJD:function(s,e,t){var n=this._validate(s,e,t,T.local.invalidDate);return n.day()+20*n.month()+360*n.year()+this.jdEpoch},fromJD:function(s){s=Math.floor(s)+.5-this.jdEpoch;var e=Math.floor(s/360);s%=360,s+=s<0?360:0;var t=Math.floor(s/20),n=s%20;return this.newDate(e,t,n)}}),T.calendars.mayan=r},29108:function(W,I,o){var T=o(63489),k=o(56131);function r(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}r.prototype=new T.baseCalendar;var m=T.instance("gregorian");k(r.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var s=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear);return m.leapYear(s.year()+(s.year()<1?1:0)+1469)},weekOfYear:function(h,s,e){var t=this.newDate(h,s,e);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(h,s){var e=this._validate(h,s,this.minDay,T.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(e.month()===12&&this.leapYear(e.year())?1:0)},weekDay:function(h,s,e){return(this.dayOfWeek(h,s,e)||7)<6},toJD:function(h,s,e){var t=this._validate(h,s,e,T.local.invalidMonth);(h=t.year())<0&&h++;for(var n=t.day(),a=1;a<t.month();a++)n+=this.daysPerMonth[a-1];return n+m.toJD(h+1468,3,13)},fromJD:function(h){h=Math.floor(h+.5);for(var s=Math.floor((h-(this.jdEpoch-1))/366);h>=this.toJD(s+1,1,1);)s++;for(var e=h-Math.floor(this.toJD(s,1,1)+.5)+1,t=1;e>this.daysInMonth(s,t);)e-=this.daysInMonth(s,t),t++;return this.newDate(s,t,e)}}),T.calendars.nanakshahi=r},55422:function(W,I,o){var T=o(63489),k=o(56131);function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}r.prototype=new T.baseCalendar,k(r.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(m){return this.daysInYear(m)!==this.daysPerYear},weekOfYear:function(m,h,s){var e=this.newDate(m,h,s);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(m){if(m=this._validate(m,this.minMonth,this.minDay,T.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[m]===void 0)return this.daysPerYear;for(var h=0,s=this.minMonth;s<=12;s++)h+=this.NEPALI_CALENDAR_DATA[m][s];return h},daysInMonth:function(m,h){return m.year&&(h=m.month(),m=m.year()),this._validate(m,h,this.minDay,T.local.invalidMonth),this.NEPALI_CALENDAR_DATA[m]===void 0?this.daysPerMonth[h-1]:this.NEPALI_CALENDAR_DATA[m][h]},weekDay:function(m,h,s){return this.dayOfWeek(m,h,s)!==6},toJD:function(m,h,s){var e=this._validate(m,h,s,T.local.invalidDate);m=e.year(),h=e.month(),s=e.day();var t=T.instance(),n=0,a=h,i=m;this._createMissingCalendarData(m);var c=m-(a>9||a===9&&s>=this.NEPALI_CALENDAR_DATA[i][0]?56:57);for(h!==9&&(n=s,a--);a!==9;)a<=0&&(a=12,i--),n+=this.NEPALI_CALENDAR_DATA[i][a],a--;return h===9?(n+=s-this.NEPALI_CALENDAR_DATA[i][0])<0&&(n+=t.daysInYear(c)):n+=this.NEPALI_CALENDAR_DATA[i][9]-this.NEPALI_CALENDAR_DATA[i][0],t.newDate(c,1,1).add(n,"d").toJD()},fromJD:function(m){var h=T.instance().fromJD(m),s=h.year(),e=h.dayOfYear(),t=s+56;this._createMissingCalendarData(t);for(var n=9,a=this.NEPALI_CALENDAR_DATA[t][0],i=this.NEPALI_CALENDAR_DATA[t][n]-a+1;e>i;)++n>12&&(n=1,t++),i+=this.NEPALI_CALENDAR_DATA[t][n];var c=this.NEPALI_CALENDAR_DATA[t][n]-(i-e);return this.newDate(t,n,c)},_createMissingCalendarData:function(m){var h=this.daysPerMonth.slice(0);h.unshift(17);for(var s=m-1;s<m+2;s++)this.NEPALI_CALENDAR_DATA[s]===void 0&&(this.NEPALI_CALENDAR_DATA[s]=h)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),T.calendars.nepali=r},94320:function(W,I,o){var T=o(63489),k=o(56131);function r(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function m(h,s){return h-s*Math.floor(h/s)}r.prototype=new T.baseCalendar,k(r.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(h){var s=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear);return 682*((s.year()-(s.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(h,s,e){var t=this.newDate(h,s,e);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(h,s){var e=this._validate(h,s,this.minDay,T.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(e.month()===12&&this.leapYear(e.year())?1:0)},weekDay:function(h,s,e){return this.dayOfWeek(h,s,e)!==5},toJD:function(h,s,e){var t=this._validate(h,s,e,T.local.invalidDate);h=t.year(),s=t.month(),e=t.day();var n=h-(h>=0?474:473),a=474+m(n,2820);return e+(s<=7?31*(s-1):30*(s-1)+6)+Math.floor((682*a-110)/2816)+365*(a-1)+1029983*Math.floor(n/2820)+this.jdEpoch-1},fromJD:function(h){var s=(h=Math.floor(h)+.5)-this.toJD(475,1,1),e=Math.floor(s/1029983),t=m(s,1029983),n=2820;if(t!==1029982){var a=Math.floor(t/366),i=m(t,366);n=Math.floor((2134*a+2816*i+2815)/1028522)+a+1}var c=n+2820*e+474;c=c<=0?c-1:c;var l=h-this.toJD(c,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),f=h-this.toJD(c,u,1)+1;return this.newDate(c,u,f)}}),T.calendars.persian=r,T.calendars.jalali=r},31320:function(W,I,o){var T=o(63489),k=o(56131),r=T.instance();function m(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}m.prototype=new T.baseCalendar,k(m.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(h){var s=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear);return h=this._t2gYear(s.year()),r.leapYear(h)},weekOfYear:function(h,s,e){var t=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear);return h=this._t2gYear(t.year()),r.weekOfYear(h,t.month(),t.day())},daysInMonth:function(h,s){var e=this._validate(h,s,this.minDay,T.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(e.month()===2&&this.leapYear(e.year())?1:0)},weekDay:function(h,s,e){return(this.dayOfWeek(h,s,e)||7)<6},toJD:function(h,s,e){var t=this._validate(h,s,e,T.local.invalidDate);return h=this._t2gYear(t.year()),r.toJD(h,t.month(),t.day())},fromJD:function(h){var s=r.fromJD(h),e=this._g2tYear(s.year());return this.newDate(e,s.month(),s.day())},_t2gYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&h<=-1?1:0)},_g2tYear:function(h){return h-this.yearsOffset-(h>=1&&h<=this.yearsOffset?1:0)}}),T.calendars.taiwan=m},51367:function(W,I,o){var T=o(63489),k=o(56131),r=T.instance();function m(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}m.prototype=new T.baseCalendar,k(m.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var s=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear);return h=this._t2gYear(s.year()),r.leapYear(h)},weekOfYear:function(h,s,e){var t=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear);return h=this._t2gYear(t.year()),r.weekOfYear(h,t.month(),t.day())},daysInMonth:function(h,s){var e=this._validate(h,s,this.minDay,T.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(e.month()===2&&this.leapYear(e.year())?1:0)},weekDay:function(h,s,e){return(this.dayOfWeek(h,s,e)||7)<6},toJD:function(h,s,e){var t=this._validate(h,s,e,T.local.invalidDate);return h=this._t2gYear(t.year()),r.toJD(h,t.month(),t.day())},fromJD:function(h){var s=r.fromJD(h),e=this._g2tYear(s.year());return this.newDate(e,s.month(),s.day())},_t2gYear:function(h){return h-this.yearsOffset-(h>=1&&h<=this.yearsOffset?1:0)},_g2tYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&h<=-1?1:0)}}),T.calendars.thai=m},21457:function(W,I,o){var T=o(63489),k=o(56131);function r(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}r.prototype=new T.baseCalendar,k(r.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(h){var s=this._validate(h,this.minMonth,this.minDay,T.local.invalidYear);return this.daysInYear(s.year())===355},weekOfYear:function(h,s,e){var t=this.newDate(h,s,e);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(h){for(var s=0,e=1;e<=12;e++)s+=this.daysInMonth(h,e);return s},daysInMonth:function(h,s){for(var e=this._validate(h,s,this.minDay,T.local.invalidMonth).toJD()-24e5+.5,t=0,n=0;n<m.length;n++){if(m[n]>e)return m[t]-m[t-1];t++}return 30},weekDay:function(h,s,e){return this.dayOfWeek(h,s,e)!==5},toJD:function(h,s,e){var t=this._validate(h,s,e,T.local.invalidDate),n=12*(t.year()-1)+t.month()-15292;return t.day()+m[n-1]-1+24e5-.5},fromJD:function(h){for(var s=h-24e5+.5,e=0,t=0;t<m.length&&!(m[t]>s);t++)e++;var n=e+15292,a=Math.floor((n-1)/12),i=a+1,c=n-12*a,l=s-m[e-1]+1;return this.newDate(i,c,l)},isValid:function(h,s,e){var t=T.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(h=h.year!=null?h.year:h)>=1276&&h<=1500),t},_validate:function(h,s,e,t){var n=T.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw t.replace(/\{0\}/,this.local.name);return n}}),T.calendars.ummalqura=r;var m=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(W,I,o){var T=o(56131);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function r(t,n,a,i){if(this._calendar=t,this._year=n,this._month=a,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(e.local.invalidDate||e.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function m(t,n){return"000000".substring(0,n-(t=""+t).length)+t}function h(){this.shortYearCutoff="+10"}function s(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}T(k.prototype,{instance:function(t,n){t=(t||"gregorian").toLowerCase(),n=n||"";var a=this._localCals[t+"-"+n];if(!a&&this.calendars[t]&&(a=new this.calendars[t](n),this._localCals[t+"-"+n]=a),!a)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return a},newDate:function(t,n,a,i,c){return(i=(t!=null&&t.year?t.calendar():typeof i=="string"?this.instance(i,c):i)||this.instance()).newDate(t,n,a)},substituteDigits:function(t){return function(n){return(n+"").replace(/[0-9]/g,function(a){return t[a]})}},substituteChineseDigits:function(t,n){return function(a){for(var i="",c=0;a>0;){var l=a%10;i=(l===0?"":t[l]+n[c])+i,c++,a=Math.floor(a/10)}return i.indexOf(t[1]+n[1])===0&&(i=i.substr(1)),i||t[0]}}}),T(r.prototype,{newDate:function(t,n,a){return this._calendar.newDate(t??this,n,a)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,n,a){if(!this._calendar.isValid(t,n,a))throw(e.local.invalidDate||e.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=n,this._day=a,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,n){return this._calendar.add(this,t,n)},set:function(t,n){return this._calendar.set(this,t,n)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(e.local.differentCalendars||e.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var n=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return n===0?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+m(Math.abs(this.year()),4)+"-"+m(this.month(),2)+"-"+m(this.day(),2)}}),T(h.prototype,{_validateLevel:0,newDate:function(t,n,a){return t==null?this.today():(t.year&&(this._validate(t,n,a,e.local.invalidDate||e.regionalOptions[""].invalidDate),a=t.day(),n=t.month(),t=t.year()),new r(this,t,n,a))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var n=this._validate(t,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear);return(n.year()<0?"-":"")+m(Math.abs(n.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear),12},monthOfYear:function(t,n){var a=this._validate(t,n,this.minDay,e.local.invalidMonth||e.regionalOptions[""].invalidMonth);return(a.month()+this.monthsInYear(a)-this.firstMonth)%this.monthsInYear(a)+this.minMonth},fromMonthOfYear:function(t,n){var a=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,a,this.minDay,e.local.invalidMonth||e.regionalOptions[""].invalidMonth),a},daysInYear:function(t){var n=this._validate(t,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(t,n,a){var i=this._validate(t,n,a,e.local.invalidDate||e.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,n,a){var i=this._validate(t,n,a,e.local.invalidDate||e.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(t,n,a){return this._validate(t,n,a,e.local.invalidDate||e.regionalOptions[""].invalidDate),{}},add:function(t,n,a){return this._validate(t,this.minMonth,this.minDay,e.local.invalidDate||e.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,n,a),n,a)},_add:function(t,n,a){if(this._validateLevel++,a==="d"||a==="w"){var i=t.toJD()+n*(a==="w"?this.daysInWeek():1),c=t.calendar().fromJD(i);return this._validateLevel--,[c.year(),c.month(),c.day()]}try{var l=t.year()+(a==="y"?n:0),u=t.monthOfYear()+(a==="m"?n:0);c=t.day(),a==="y"?(t.month()!==this.fromMonthOfYear(l,u)&&(u=this.newDate(l,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(l)),c=Math.min(c,this.daysInMonth(l,this.fromMonthOfYear(l,u)))):a==="m"&&(function(d){for(;u<d.minMonth;)l--,u+=d.monthsInYear(l);for(var w=d.monthsInYear(l);u>w-1+d.minMonth;)l++,u-=w,w=d.monthsInYear(l)}(this),c=Math.min(c,this.daysInMonth(l,this.fromMonthOfYear(l,u))));var f=[l,this.fromMonthOfYear(l,u),c];return this._validateLevel--,f}catch(d){throw this._validateLevel--,d}},_correctAdd:function(t,n,a,i){if(!(this.hasYearZero||i!=="y"&&i!=="m"||n[0]!==0&&t.year()>0==n[0]>0)){var c={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],l=a<0?-1:1;n=this._add(t,a*c[0]+l*c[1],c[2])}return t.date(n[0],n[1],n[2])},set:function(t,n,a){this._validate(t,this.minMonth,this.minDay,e.local.invalidDate||e.regionalOptions[""].invalidDate);var i=a==="y"?n:t.year(),c=a==="m"?n:t.month(),l=a==="d"?n:t.day();return a!=="y"&&a!=="m"||(l=Math.min(l,this.daysInMonth(i,c))),t.date(i,c,l)},isValid:function(t,n,a){this._validateLevel++;var i=this.hasYearZero||t!==0;if(i){var c=this.newDate(t,n,this.minDay);i=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(c)&&a>=this.minDay&&a-this.minDay<this.daysInMonth(c)}return this._validateLevel--,i},toJSDate:function(t,n,a){var i=this._validate(t,n,a,e.local.invalidDate||e.regionalOptions[""].invalidDate);return e.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(t){return this.fromJD(e.instance().fromJSDate(t).toJD())},_validate:function(t,n,a,i){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(e.local.differentCalendars||e.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,n,a))throw i.replace(/\{0\}/,this.local.name);var c=this.newDate(t,n,a);return this._validateLevel--,c}catch(l){throw this._validateLevel--,l}}}),s.prototype=new h,T(s.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var n=this._validate(t,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear);return(t=n.year()+(n.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,n,a){var i=this.newDate(t,n,a);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(t,n){var a=this._validate(t,n,this.minDay,e.local.invalidMonth||e.regionalOptions[""].invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(t,n,a){return(this.dayOfWeek(t,n,a)||7)<6},toJD:function(t,n,a){var i=this._validate(t,n,a,e.local.invalidDate||e.regionalOptions[""].invalidDate);t=i.year(),n=i.month(),a=i.day(),t<0&&t++,n<3&&(n+=12,t--);var c=Math.floor(t/100),l=2-c+Math.floor(c/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(n+1))+a+l-1524.5},fromJD:function(t){var n=Math.floor(t+.5),a=Math.floor((n-186721625e-2)/36524.25),i=1524+(a=n+1+a-Math.floor(a/4)),c=Math.floor((i-122.1)/365.25),l=Math.floor(365.25*c),u=Math.floor((i-l)/30.6001),f=i-l-Math.floor(30.6001*u),d=u-(u>13.5?13:1),w=c-(d>2.5?4716:4715);return w<=0&&w--,this.newDate(w,d,f)},toJSDate:function(t,n,a){var i=this._validate(t,n,a,e.local.invalidDate||e.regionalOptions[""].invalidDate),c=new Date(i.year(),i.month()-1,i.day());return c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),c.setHours(c.getHours()>12?c.getHours()+2:0),c},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var e=W.exports=new k;e.cdate=r,e.baseCalendar=h,e.calendars.gregorian=s},94338:function(W,I,o){var T=o(56131),k=o(63489);T(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],T(k.cdate.prototype,{formatDate:function(r,m){return typeof r!="string"&&(m=r,r=""),this._calendar.formatDate(r||"",this,m)}}),T(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(r,m,h){if(typeof r!="string"&&(h=m,m=r,r=""),!m)return"";if(m.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;r=r||this.local.dateFormat;for(var s,e,t,n=(h=h||{}).dayNamesShort||this.local.dayNamesShort,a=h.dayNames||this.local.dayNames,i=h.monthNumbers||this.local.monthNumbers,c=h.monthNamesShort||this.local.monthNamesShort,l=h.monthNames||this.local.monthNames,u=(h.calculateWeek||this.local.calculateWeek,function(g,A){for(var M=1;_+M<r.length&&r.charAt(_+M)===g;)M++;return _+=M-1,Math.floor(M/(A||1))>1}),f=function(g,A,M,L){var E=""+A;if(u(g,L))for(;E.length<M;)E="0"+E;return E},d=this,w=function(g){return typeof i=="function"?i.call(d,g,u("m")):y(f("m",g.month(),2))},v=function(g,A){return A?typeof l=="function"?l.call(d,g):l[g.month()-d.minMonth]:typeof c=="function"?c.call(d,g):c[g.month()-d.minMonth]},p=this.local.digits,y=function(g){return h.localNumbers&&p?p(g):g},b="",x=!1,_=0;_<r.length;_++)if(x)r.charAt(_)!=="'"||u("'")?b+=r.charAt(_):x=!1;else switch(r.charAt(_)){case"d":b+=y(f("d",m.day(),2));break;case"D":b+=(s=m.dayOfWeek(),e=n,t=a,u("D")?t[s]:e[s]);break;case"o":b+=f("o",m.dayOfYear(),3);break;case"w":b+=f("w",m.weekOfYear(),2);break;case"m":b+=w(m);break;case"M":b+=v(m,u("M"));break;case"y":b+=u("y",2)?m.year():(m.year()%100<10?"0":"")+m.year()%100;break;case"Y":u("Y",2),b+=m.formatYear();break;case"J":b+=m.toJD();break;case"@":b+=(m.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":b+=(m.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?b+="'":x=!0;break;default:b+=r.charAt(_)}return b},parseDate:function(r,m,h){if(m==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((m=typeof m=="object"?m.toString():m+"")==="")return null;r=r||this.local.dateFormat;var s=(h=h||{}).shortYearCutoff||this.shortYearCutoff;s=typeof s!="string"?s:this.today().year()%100+parseInt(s,10);for(var e=h.dayNamesShort||this.local.dayNamesShort,t=h.dayNames||this.local.dayNames,n=h.parseMonth||this.local.parseMonth,a=h.monthNumbers||this.local.monthNumbers,i=h.monthNamesShort||this.local.monthNamesShort,c=h.monthNames||this.local.monthNames,l=-1,u=-1,f=-1,d=-1,w=-1,v=!1,p=!1,y=function(P,U){for(var R=1;E+R<r.length&&r.charAt(E+R)===P;)R++;return E+=R-1,Math.floor(R/(U||1))>1},b=function(P,U){var R=y(P,U),j=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(P)+1],B=new RegExp("^-?\\d{1,"+j+"}"),z=m.substring(L).match(B);if(!z)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,L);return L+=z[0].length,parseInt(z[0],10)},x=this,_=function(){if(typeof a=="function"){y("m");var P=a.call(x,m.substring(L));return L+=P.length,P}return b("m")},g=function(P,U,R,j){for(var B=y(P,j)?R:U,z=0;z<B.length;z++)if(m.substr(L,B[z].length).toLowerCase()===B[z].toLowerCase())return L+=B[z].length,z+x.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,L)},A=function(){if(typeof c=="function"){var P=y("M")?c.call(x,m.substring(L)):i.call(x,m.substring(L));return L+=P.length,P}return g("M",i,c)},M=function(){if(m.charAt(L)!==r.charAt(E))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,L);L++},L=0,E=0;E<r.length;E++)if(p)r.charAt(E)!=="'"||y("'")?M():p=!1;else switch(r.charAt(E)){case"d":d=b("d");break;case"D":g("D",e,t);break;case"o":w=b("o");break;case"w":b("w");break;case"m":f=_();break;case"M":f=A();break;case"y":var S=E;v=!y("y",2),E=S,u=b("y",2);break;case"Y":u=b("Y",2);break;case"J":l=b("J")+.5,m.charAt(L)==="."&&(L++,b("J"));break;case"@":l=b("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=b("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":L=m.length;break;case"'":y("'")?M():p=!0;break;default:M()}if(L<m.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&v&&(u+=s===-1?1900:this.today().year()-this.today().year()%100-(u<=s?0:100)),typeof f=="string"&&(f=n.call(this,u,f)),w>-1){f=1,d=w;for(var O=this.daysInMonth(u,f);d>O;O=this.daysInMonth(u,f))f++,d-=O}return l>-1?this.fromJD(l):this.newDate(u,f,d)},determineDate:function(r,m,h,s,e){h&&typeof h!="object"&&(e=s,s=h,h=null),typeof s!="string"&&(e=s,s="");var t=this;return m=m?m.newDate():null,r==null?m:typeof r=="string"?function(n){try{return t.parseDate(s,n,e)}catch{}for(var a=((n=n.toLowerCase()).match(/^c/)&&h?h.newDate():null)||t.today(),i=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,c=i.exec(n);c;)a.add(parseInt(c[1],10),c[2]||"d"),c=i.exec(n);return a}(r):typeof r=="number"?isNaN(r)||r===1/0||r===-1/0?m:t.today().add(r,"d"):t.newDate(r)}})},69862:function(){},40964:function(){},72077:function(W,I,o){var T=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?o.g:globalThis;W.exports=function(){for(var r=[],m=0;m<T.length;m++)typeof k[T[m]]=="function"&&(r[r.length]=T[m]);return r}},81684:function(W,I,o){function T(pt,gt,kt){pt.prototype=gt.prototype=kt,kt.constructor=pt}function k(pt,gt){var kt=Object.create(pt.prototype);for(var yt in gt)kt[yt]=gt[yt];return kt}function r(){}o.d(I,{sX:function(){return ct},k4:function(){return J}});var m=.7,h=1/m,s="\\s*([+-]?\\d+)\\s*",e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",n=/^#([0-9a-f]{3,8})$/,a=new RegExp("^rgb\\(".concat(s,",").concat(s,",").concat(s,"\\)$")),i=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),c=new RegExp("^rgba\\(".concat(s,",").concat(s,",").concat(s,",").concat(e,"\\)$")),l=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(e,"\\)$")),u=new RegExp("^hsl\\(".concat(e,",").concat(t,",").concat(t,"\\)$")),f=new RegExp("^hsla\\(".concat(e,",").concat(t,",").concat(t,",").concat(e,"\\)$")),d={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function w(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function p(pt){var gt,kt;return pt=(pt+"").trim().toLowerCase(),(gt=n.exec(pt))?(kt=gt[1].length,gt=parseInt(gt[1],16),kt===6?y(gt):kt===3?new _(gt>>8&15|gt>>4&240,gt>>4&15|240&gt,(15&gt)<<4|15&gt,1):kt===8?b(gt>>24&255,gt>>16&255,gt>>8&255,(255&gt)/255):kt===4?b(gt>>12&15|gt>>8&240,gt>>8&15|gt>>4&240,gt>>4&15|240&gt,((15&gt)<<4|15&gt)/255):null):(gt=a.exec(pt))?new _(gt[1],gt[2],gt[3],1):(gt=i.exec(pt))?new _(255*gt[1]/100,255*gt[2]/100,255*gt[3]/100,1):(gt=c.exec(pt))?b(gt[1],gt[2],gt[3],gt[4]):(gt=l.exec(pt))?b(255*gt[1]/100,255*gt[2]/100,255*gt[3]/100,gt[4]):(gt=u.exec(pt))?S(gt[1],gt[2]/100,gt[3]/100,1):(gt=f.exec(pt))?S(gt[1],gt[2]/100,gt[3]/100,gt[4]):d.hasOwnProperty(pt)?y(d[pt]):pt==="transparent"?new _(NaN,NaN,NaN,0):null}function y(pt){return new _(pt>>16&255,pt>>8&255,255&pt,1)}function b(pt,gt,kt,yt){return yt<=0&&(pt=gt=kt=NaN),new _(pt,gt,kt,yt)}function x(pt,gt,kt,yt){return arguments.length===1?((mt=pt)instanceof r||(mt=p(mt)),mt?new _((mt=mt.rgb()).r,mt.g,mt.b,mt.opacity):new _):new _(pt,gt,kt,yt??1);var mt}function _(pt,gt,kt,yt){this.r=+pt,this.g=+gt,this.b=+kt,this.opacity=+yt}function g(){return"#".concat(E(this.r)).concat(E(this.g)).concat(E(this.b))}function A(){var pt=M(this.opacity);return"".concat(pt===1?"rgb(":"rgba(").concat(L(this.r),", ").concat(L(this.g),", ").concat(L(this.b)).concat(pt===1?")":", ".concat(pt,")"))}function M(pt){return isNaN(pt)?1:Math.max(0,Math.min(1,pt))}function L(pt){return Math.max(0,Math.min(255,Math.round(pt)||0))}function E(pt){return((pt=L(pt))<16?"0":"")+pt.toString(16)}function S(pt,gt,kt,yt){return yt<=0?pt=gt=kt=NaN:kt<=0||kt>=1?pt=gt=NaN:gt<=0&&(pt=NaN),new P(pt,gt,kt,yt)}function O(pt){if(pt instanceof P)return new P(pt.h,pt.s,pt.l,pt.opacity);if(pt instanceof r||(pt=p(pt)),!pt)return new P;if(pt instanceof P)return pt;var gt=(pt=pt.rgb()).r/255,kt=pt.g/255,yt=pt.b/255,mt=Math.min(gt,kt,yt),Ot=Math.max(gt,kt,yt),vt=NaN,xt=Ot-mt,st=(Ot+mt)/2;return xt?(vt=gt===Ot?(kt-yt)/xt+6*(kt<yt):kt===Ot?(yt-gt)/xt+2:(gt-kt)/xt+4,xt/=st<.5?Ot+mt:2-Ot-mt,vt*=60):xt=st>0&&st<1?0:vt,new P(vt,xt,st,pt.opacity)}function P(pt,gt,kt,yt){this.h=+pt,this.s=+gt,this.l=+kt,this.opacity=+yt}function U(pt){return(pt=(pt||0)%360)<0?pt+360:pt}function R(pt){return Math.max(0,Math.min(1,pt||0))}function j(pt,gt,kt){return 255*(pt<60?gt+(kt-gt)*pt/60:pt<180?kt:pt<240?gt+(kt-gt)*(240-pt)/60:gt)}T(r,p,{copy:function(pt){return Object.assign(new this.constructor,this,pt)},displayable:function(){return this.rgb().displayable()},hex:w,formatHex:w,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O(this).formatHsl()},formatRgb:v,toString:v}),T(_,x,k(r,{brighter:function(pt){return pt=pt==null?h:Math.pow(h,pt),new _(this.r*pt,this.g*pt,this.b*pt,this.opacity)},darker:function(pt){return pt=pt==null?m:Math.pow(m,pt),new _(this.r*pt,this.g*pt,this.b*pt,this.opacity)},rgb:function(){return this},clamp:function(){return new _(L(this.r),L(this.g),L(this.b),M(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:g,formatHex:g,formatHex8:function(){return"#".concat(E(this.r)).concat(E(this.g)).concat(E(this.b)).concat(E(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:A,toString:A})),T(P,function(pt,gt,kt,yt){return arguments.length===1?O(pt):new P(pt,gt,kt,yt??1)},k(r,{brighter:function(pt){return pt=pt==null?h:Math.pow(h,pt),new P(this.h,this.s,this.l*pt,this.opacity)},darker:function(pt){return pt=pt==null?m:Math.pow(m,pt),new P(this.h,this.s,this.l*pt,this.opacity)},rgb:function(){var pt=this.h%360+360*(this.h<0),gt=isNaN(pt)||isNaN(this.s)?0:this.s,kt=this.l,yt=kt+(kt<.5?kt:1-kt)*gt,mt=2*kt-yt;return new _(j(pt>=240?pt-240:pt+120,mt,yt),j(pt,mt,yt),j(pt<120?pt+240:pt-120,mt,yt),this.opacity)},clamp:function(){return new P(U(this.h),R(this.s),R(this.l),M(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var pt=M(this.opacity);return"".concat(pt===1?"hsl(":"hsla(").concat(U(this.h),", ").concat(100*R(this.s),"%, ").concat(100*R(this.l),"%").concat(pt===1?")":", ".concat(pt,")"))}}));var B=function(pt){return function(){return pt}};function z(pt,gt){var kt=gt-pt;return kt?function(yt,mt){return function(Ot){return yt+Ot*mt}}(pt,kt):B(isNaN(pt)?gt:pt)}var G=function pt(gt){var kt=function(mt){return(mt=+mt)==1?z:function(Ot,vt){return vt-Ot?function(xt,st,at){return xt=Math.pow(xt,at),st=Math.pow(st,at)-xt,at=1/at,function(ht){return Math.pow(xt+ht*st,at)}}(Ot,vt,mt):B(isNaN(Ot)?vt:Ot)}}(gt);function yt(mt,Ot){var vt=kt((mt=x(mt)).r,(Ot=x(Ot)).r),xt=kt(mt.g,Ot.g),st=kt(mt.b,Ot.b),at=z(mt.opacity,Ot.opacity);return function(ht){return mt.r=vt(ht),mt.g=xt(ht),mt.b=st(ht),mt.opacity=at(ht),mt+""}}return yt.gamma=pt,yt}(1);function V(pt,gt){var kt,yt=gt?gt.length:0,mt=pt?Math.min(yt,pt.length):0,Ot=new Array(mt),vt=new Array(yt);for(kt=0;kt<mt;++kt)Ot[kt]=ct(pt[kt],gt[kt]);for(;kt<yt;++kt)vt[kt]=gt[kt];return function(xt){for(kt=0;kt<mt;++kt)vt[kt]=Ot[kt](xt);return vt}}function et(pt,gt){var kt=new Date;return pt=+pt,gt=+gt,function(yt){return kt.setTime(pt*(1-yt)+gt*yt),kt}}function J(pt,gt){return pt=+pt,gt=+gt,function(kt){return pt*(1-kt)+gt*kt}}function X(pt){return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gt){return typeof gt}:function(gt){return gt&&typeof Symbol=="function"&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt},X(pt)}function Y(pt,gt){var kt,yt={},mt={};for(kt in pt!==null&&X(pt)==="object"||(pt={}),gt!==null&&X(gt)==="object"||(gt={}),gt)kt in pt?yt[kt]=ct(pt[kt],gt[kt]):mt[kt]=gt[kt];return function(Ot){for(kt in yt)mt[kt]=yt[kt](Ot);return mt}}var Z=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tt=new RegExp(Z.source,"g");function rt(pt,gt){var kt,yt,mt,Ot=Z.lastIndex=tt.lastIndex=0,vt=-1,xt=[],st=[];for(pt+="",gt+="";(kt=Z.exec(pt))&&(yt=tt.exec(gt));)(mt=yt.index)>Ot&&(mt=gt.slice(Ot,mt),xt[vt]?xt[vt]+=mt:xt[++vt]=mt),(kt=kt[0])===(yt=yt[0])?xt[vt]?xt[vt]+=yt:xt[++vt]=yt:(xt[++vt]=null,st.push({i:vt,x:J(kt,yt)})),Ot=tt.lastIndex;return Ot<gt.length&&(mt=gt.slice(Ot),xt[vt]?xt[vt]+=mt:xt[++vt]=mt),xt.length<2?st[0]?function(at){return function(ht){return at(ht)+""}}(st[0].x):function(at){return function(){return at}}(gt):(gt=st.length,function(at){for(var ht,Lt=0;Lt<gt;++Lt)xt[(ht=st[Lt]).i]=ht.x(at);return xt.join("")})}function nt(pt,gt){gt||(gt=[]);var kt,yt=pt?Math.min(gt.length,pt.length):0,mt=gt.slice();return function(Ot){for(kt=0;kt<yt;++kt)mt[kt]=pt[kt]*(1-Ot)+gt[kt]*Ot;return mt}}function ot(pt){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gt){return typeof gt}:function(gt){return gt&&typeof Symbol=="function"&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt},ot(pt)}function ct(pt,gt){var kt,yt,mt=ot(gt);return gt==null||mt==="boolean"?B(gt):(mt==="number"?J:mt==="string"?(kt=p(gt))?(gt=kt,G):rt:gt instanceof p?G:gt instanceof Date?et:(yt=gt,!ArrayBuffer.isView(yt)||yt instanceof DataView?Array.isArray(gt)?V:typeof gt.valueOf!="function"&&typeof gt.toString!="function"||isNaN(gt)?Y:J:nt))(pt,gt)}},40402:function(W){W.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(W){W.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(W){W.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(W){W.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(W){W.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(W){W.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Re={};function jr(W){var I=Re[W];if(I!==void 0)return I.exports;var o=Re[W]={exports:{}};return ze[W].call(o.exports,o,o.exports,jr),o.exports}return jr.n=function(W){var I=W&&W.__esModule?function(){return W.default}:function(){return W};return jr.d(I,{a:I}),I},jr.d=function(W,I){for(var o in I)jr.o(I,o)&&!jr.o(W,o)&&Object.defineProperty(W,o,{enumerable:!0,get:I[o]})},jr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),jr.o=function(W,I){return Object.prototype.hasOwnProperty.call(W,I)},jr.r=function(W){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})},jr(27909)}()})})(Bp);const jp=Cu(Ou);function Up(){}var Nl=ll.edit("editor");Nl.setValue(Up.toString().split(`
`).slice(1,-1).join(`
`)),Nl.setTheme("ace/theme/monokai"),Nl.session.setMode("ace/mode/javascript"),Nl.setOption("useWorker",!1);let Mh=function(Rn,zn){let ze=Nl.getValue();return new Function("t","x",ze+"return rhs(t,x).dxdt")(Rn,zn)};window.ode_rhs=Mh;let Ru=0;window.simulation_run=function(Rn){let zn=++Ru,ze=Nl.getValue(),Re=new Function("t","x",ze+"return odeOption;")(),jr=vp(Re.tstep,Float64Array.from(Re.x0));try{Mh(0,Re.x0)}catch(o){alert("rhs function error: "+o);debugger;return}const W={},I=setInterval(()=>{zn!=Ru&&clearInterval(I),jr.step();let o=jr.last_data(),T=o.names().split(","),k=o.data();for(let h=0;h<T.length;h++)W[T[h]]==null?W[T[h]]=[]:W[T[h]].push(k[h]);let r=[];for(let h in W)h!=="simtime"&&r.push({x:W.simtime,y:W[h],name:h});let m={title:"t="+k[0].toFixed(2)};jp.newPlot("inspector",r,m)},Rn?Re.tstep*1e3:0)},window.simulation_stop=function(){Ru++}})()});export default M0();
